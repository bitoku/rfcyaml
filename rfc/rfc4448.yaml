- contents:
  - '   Encapsulation Methods for Transport of Ethernet over MPLS Networks

    '
  title: __initial_text__
- contents:
  - "Status of This Memo\n   This document specifies an Internet standards track protocol
    for the\n   Internet community, and requests discussion and suggestions for\n
    \  improvements.  Please refer to the current edition of the \"Internet\n   Official
    Protocol Standards\" (STD 1) for the standardization state\n   and status of this
    protocol.  Distribution of this memo is unlimited.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2006).\n"
  title: Copyright Notice
- contents:
  - "Abstract\n   An Ethernet pseudowire (PW) is used to carry Ethernet/802.3 Protocol\n
    \  Data Units (PDUs) over an MPLS network.  This enables service\n   providers
    to offer \"emulated\" Ethernet services over existing MPLS\n   networks.  This
    document specifies the encapsulation of\n   Ethernet/802.3 PDUs within a pseudowire.
    \ It also specifies the\n   procedures for using a PW to provide a \"point-to-point
    Ethernet\"\n   service.\n"
  title: Abstract
- contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n
    \  2. Specification of Requirements ...................................6\n   3.
    Applicability Statement .........................................6\n   4. Details
    Specific to Particular Emulated Services ................7\n      4.1. Ethernet
    Tagged Mode .......................................7\n      4.2. Ethernet Raw
    Mode ..........................................8\n      4.3. Ethernet-Specific
    Interface Parameter LDP Sub-TLV ..........8\n      4.4. Generic Procedures .........................................9\n
    \          4.4.1. Raw Mode vs. Tagged Mode ............................9\n           4.4.2.
    MTU Management on the PE/CE Links ..................11\n           4.4.3. Frame
    Ordering .....................................11\n           4.4.4. Frame Error
    Processing .............................11\n           4.4.5. IEEE 802.3x Flow
    Control Interworking ..............11\n      4.5. Management ................................................12\n
    \     4.6. The Control Word ..........................................12\n      4.7.
    QoS Considerations ........................................13\n   5. Security
    Considerations ........................................14\n   6. PSN MTU Requirements
    ...........................................14\n   7. Normative References ...........................................15\n
    \  8. Informative References .........................................15\n   9.
    Significant Contributors .......................................17\n   Appendix
    A. Interoperability Guidelines ...........................20\n      A.1. Configuration
    Options .....................................20\n      A.2. IEEE 802.3x Flow Control
    Considerations ...................21\n   Appendix B. QoS Details ...........................................21\n
    \     B.1. Adaptation of 802.1Q CoS to PSN CoS .......................22\n      B.2.
    Drop Precedence ...........................................23\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   An Ethernet pseudowire (PW) allows Ethernet/802.3 [802.3]
    Protocol\n   Data Units (PDUs) to be carried over a Multi-Protocol Label Switched\n
    \  [MPLS-ARCH] network.  In addressing the issues associated with\n   carrying
    an Ethernet PDU over a packet switched network (PSN), this\n   document assumes
    that a pseudowire (PW) has been set up by using a\n   control protocol such as
    the one as described in [PWE3-CTRL].  The\n   design of Ethernet pseudowire described
    in this document conforms to\n   the pseudowire architecture described in [RFC3985].
    \ It is also\n   assumed in the remainder of this document that the reader is
    familiar\n   with RFC 3985.\n   The Pseudowire Emulation Edge-to-Edge (PWE3) Ethernet
    PDU consists of\n   the Destination Address, Source Address, Length/Type, MAC
    Client\n   Data, and padding extracted from a MAC frame as a concatenated octet\n
    \  sequence in their original order [PDU].\n   In addition to the Ethernet PDU
    format used within the pseudowire,\n   this document discusses:\n      - Procedures
    for using a PW in order to provide a pair of Customer\n        Edge (CE) routers
    with an emulated (point-to-point) Ethernet\n        service, including the procedures
    for the processing of Provider\n        Edge (PE)-bound and CE-bound Ethernet
    PDUs [RFC3985]\n      - Ethernet-specific quality of service (QoS) and security\n
    \       considerations\n      - Inter-domain transport considerations for Ethernet
    PW\n   The following two figures describe the reference models that are\n   derived
    from [RFC3985] to support the Ethernet PW emulated services.\n            |<--------------
    Emulated Service ---------------->|\n            |                                                  |\n
    \           |          |<------- Pseudowire ------->|          |\n            |
    \         |                            |          |\n            |          |
    \   |<-- PSN Tunnel -->|    |          |\n            | PW End   V    V                  V
    \   V  PW End  |\n            V Service  +----+                  +----+  Service
    V\n      +-----+    |     | PE1|==================| PE2|     |    +-----+\n      |
    \    |----------|............PW1.............|----------|     |\n      | CE1 |
    \   |     |    |                  |    |     |    | CE2 |\n      |     |----------|............PW2.............|----------|
    \    |\n      +-----+  ^ |     |    |==================|    |     | ^  +-----+\n
    \           ^  |       +----+                  +----+     | |  ^\n            |
    \ |   Provider Edge 1         Provider Edge 2  |  |\n            |  |                                            |
    \ |\n      Customer |                                            | Customer\n
    \     Edge 1   |                                            | Edge 2\n               |
    \                                           |\n               |                                            |\n
    \     Attachment Circuit (AC)                    Attachment Circuit (AC)\n      native
    Ethernet service                    native Ethernet service\n         Figure 1:
    PWE3 Ethernet/VLAN Interface Reference Configuration\n   The \"emulated service\"
    shown in Figure 1 is, strictly speaking, a\n   bridged LAN; the PEs have MAC interfaces,
    consume MAC control frames,\n   etc.  However, the procedures specified herein
    only support the case\n   in which there are two CEs on the \"emulated LAN\".
    \ Hence we refer to\n   this service as \"emulated point-to-point Ethernet\".
    \ Specification of\n   the procedures for using pseudowires to emulate LANs with
    more than\n   two CEs are out of the scope of the current document.\n   +-------------+
    \                               +-------------+\n   |  Emulated   |                                |
    \ Emulated   |\n   |  Ethernet   |                                |  Ethernet
    \  |\n   | (including  |         Emulated Service       | (including  |\n   |
    \ VLAN)      |<==============================>|  VLAN)      |\n   |  Services
    \  |                                |  Services   |\n   +-------------+           Pseudowire
    \          +-------------+\n   |Demultiplexer|<==============================>|Demultiplexer|\n
    \  +-------------+                                +-------------+\n   |    PSN
    \     |            PSN Tunnel          |    PSN      |\n   |   MPLS      |<==============================>|
    \  MPLS      |\n   +-------------+                                +-------------+\n
    \  |  Physical   |                                |  Physical   |\n   +-----+-------+
    \                               +-----+-------+\n         Figure 2: Ethernet PWE3
    Protocol Stack Reference Model\n   For the purpose of this document, PE1 will
    be defined as the ingress\n   router, and PE2 as the egress router.  A layer 2
    PDU will be received\n   at PE1, encapsulated at PE1, transported, decapsulated
    at PE2, and\n   transmitted out on the attachment circuit of PE2.\n   An Ethernet
    PW emulates a single Ethernet link between exactly two\n   endpoints.  The mechanisms
    described in this document are agnostic to\n   that which is beneath the \"Pseudowire\"
    level in Figure 2, concerning\n   itself only with the \"Emulated Service\" portion
    of the stack.\n   The following reference model describes the termination point
    of each\n   end of the PW within the PE:\n           +-----------------------------------+\n
    \          |                PE                 |\n   +---+   +-+  +-----+  +------+
    \ +------+  +-+\n   |   |   |P|  |     |  |PW ter|  | PSN  |  |P|\n   |   |<==|h|<=|
    NSP |<=|minati|<=|Tunnel|<=|h|<== From PSN\n   |   |   |y|  |     |  |on    |
    \ |      |  |y|\n   | C |   +-+  +-----+  +------+  +------+  +-+\n   | E |   |
    \                                  |\n   |   |   +-+  +-----+  +------+  +------+
    \ +-+\n   |   |   |P|  |     |  |PW ter|  | PSN  |  |P|\n   |   |==>|h|=>| NSP
    |=>|minati|=>|Tunnel|=>|h|==> To PSN\n   |   |   |y|  |     |  |on    |  |      |
    \ |y|\n   +---+   +-+  +-----+  +------+  +------+  +-+\n           |                                   |\n
    \          +-----------------------------------+\n                       ^         ^
    \        ^\n                       |         |         |\n                       A
    \        B         C\n           Figure 3: PW Reference Diagram\n   The PW terminates
    at a logical port within the PE, defined at point B\n   in the above diagram.
    \ This port provides an Ethernet MAC service\n   that will deliver each Ethernet
    frame that is received at point A,\n   unaltered, to the point A in the corresponding
    PE at the other end of\n   the PW.\n   The Native Service Processing (NSP) function
    includes frame\n   processing that is required for the Ethernet frames that are\n
    \  forwarded to the PW termination point.  Such functions may include\n   stripping,
    overwriting or adding VLAN tags, physical port\n   multiplexing and demultiplexing,
    PW-PW bridging, L2 encapsulation,\n   shaping, policing, etc.  These functions
    are specific to the Ethernet\n   technology, and may not be required for the PW
    emulation service.\n   The points to the left of A, including the physical layer
    between the\n   CE and PE, and any adaptation (NSP) functions between it and the
    PW\n   terminations, are outside of the scope of PWE3 and are not defined\n   here.\n
    \  \"PW Termination\", between A and B, represents the operations for\n   setting
    up and maintaining the PW, and for encapsulating and\n   decapsulating the Ethernet
    frames as necessary to transmit them\n   across the MPLS network.\n   An Ethernet
    PW operates in one of two modes: \"raw mode\" or \"tagged\n   mode\".  In tagged
    mode, each frame MUST contain at least one 802.1Q\n   [802.1Q] VLAN tag, and the
    tag value is meaningful to the NSPs at the\n   two PW termination points.  That
    is, the two PW termination points\n   must have some agreement (signaled or manually
    configured) on how to\n   process the tag.  On a raw mode PW, a frame MAY contain
    an 802.1Q\n   VLAN tag, but if it does, the tag is not meaningful to the NSPs,
    and\n   passes transparently through them.\n   Additional terminology relevant
    to pseudowires and Layer 2 Virtual\n   Private Networking may be found in [RFC4026].\n"
  title: 1.  Introduction
- contents:
  - "2.  Specification of Requirements\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\",
    \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\",
    and \"OPTIONAL\" in this\n   document are to be interpreted as described in RFC
    2119 [RFC2119].\n"
  title: 2.  Specification of Requirements
- contents:
  - "3.  Applicability Statement\n   The Ethernet PW emulation allows a service provider
    to offer a \"port\n   to port\" Ethernet-based service across an MPLS packet switched\n
    \  network (PSN) while the Ethernet VLAN PW emulation allows an\n   \"Ethernet
    VLAN to VLAN\" based service across an MPLS packet switched\n   network (PSN).\n
    \  The Ethernet or Ethernet VLAN PW has the following characteristics in\n   relationship
    to the respective native service:\n      - An Ethernet PW connects two Ethernet
    ACs while an Ethernet VLAN\n        PW connects two Ethernet VLAN ACs, supporting
    bidirectional\n        transport of variable length Ethernet frames.  The ingress\n
    \       Native Service Processing (NSP) function strips the preamble and\n        frame
    check sequence (FCS) from the Ethernet frame and\n        transports the frame
    in its entirety across the PW.  This is\n        done regardless of the presence
    of the 802.1Q tag in the frame.\n        The egress NSP function receives the
    Ethernet frame from the PW\n        and regenerates the preamble or FCS before
    forwarding the frame\n        to the attachment circuit.  Since the FCS is not
    transported\n        across either Ethernet or Ethernet VLAN PWs, payload integrity\n
    \       transparency may be lost.  The OPTIONAL method described in\n        [FCS]
    can be used to achieve payload integrity transparency on\n        Ethernet or
    Ethernet VLAN PWs.\n      - For an Ethernet VLAN PW, VLAN tag rewrite can be achieved
    by NSP\n        at the egress PE, which is outside the scope of this document.\n
    \     - The Ethernet or Ethernet VLAN PW only supports homogeneous\n        Ethernet
    frame type across the PW; both ends of the PW must be\n        either tagged or
    untagged.  Heterogeneous frame type support\n        achieved with NSP functionality
    is outside the scope of this\n        document.\n      - Ethernet port or Ethernet
    VLAN status notification is provided\n        using the PW Status TLV in the Label
    Distribution Protocol (LDP)\n        status notification message.  Loss of connectivity
    between PEs\n        can be detected by the LDP session closing, or by using [VCCV]\n
    \       mechanisms.  The PE can convey these indications back to its\n        attached
    Remote System.\n      - The maximum frame size that can be supported is limited
    by the\n        PSN MTU minus the MPLS header size, unless fragmentation and\n
    \       reassembly are used [FRAG].\n      - The packet switched network may reorder,
    duplicate, or silently\n        drop packets.  Sequencing MAY be enabled in the
    Ethernet or\n        Ethernet VLAN PW to detect lost, duplicate, or out-of-order\n
    \       packets on a per-PW basis.\n      - The faithfulness of an Ethernet or
    Ethernet VLAN PW may be\n        increased by leveraging Quality of Service features
    of the PEs\n        and the underlying PSN.  (See Section 4.7, \"QoS\n        Considerations\".)\n"
  title: 3.  Applicability Statement
- contents:
  - '4.  Details Specific to Particular Emulated Services

    '
  - contents:
    - "4.1.  Ethernet Tagged Mode\n   The Ethernet frame will be encapsulated according
      to the procedures\n   defined later in this document for tagged mode.  It should
      be noted\n   that if the VLAN identifier is modified by the egress PE, the\n
      \  Ethernet spanning tree protocol might fail to work properly.  If this\n   issue
      is of significance, the VLAN identifier MUST be selected in\n   such a way that
      it matches on the attachment circuits at both ends of\n   the PW.\n   If the
      PE detects a failure on the Ethernet physical port, or the\n   port is administratively
      disabled, it MUST send a PW status\n   notification message for all PWs associated
      with the port.\n   This mode uses service-delimiting tags to map input Ethernet
      frames\n   to respective PWs and corresponds to PW type 0x0004 \"Ethernet Tagged\n
      \  Mode\" [IANA].\n"
    title: 4.1.  Ethernet Tagged Mode
  - contents:
    - "4.2.  Ethernet Raw Mode\n   The Ethernet frame will be encapsulated according
      to the procedures\n   defined later in this document for raw mode.  If the PE
      detects a\n   failure on the Ethernet input port, or the port is administratively\n
      \  disabled, the PE MUST send an appropriate PW status notification\n   message
      to the corresponding remote PE.\n   In this mode, all Ethernet frames received
      on the attachment circuit\n   of PE1 will be transmitted to PE2 on a single
      PW.  This service\n   corresponds to PW type 0x0005 \"Ethernet\" [IANA].\n"
    title: 4.2.  Ethernet Raw Mode
  - contents:
    - "4.3.  Ethernet-Specific Interface Parameter LDP Sub-TLV\n   This LDP sub-Type
      Length Value [LDP] specifies interface-specific\n   parameters.  When applicable,
      it MUST be used to validate that the\n   PEs, and the ingress and egress ports
      at the edges of the circuit,\n   have the necessary capabilities to interoperate
      with each other.  The\n   Interface parameter TLV is defined in [PWE3-CTRL],
      the IANA registry\n   with initial values for interface parameter sub-TLV types
      is defined\n   in [IANA], but the Ethernet-specific interface parameters are\n
      \  specified as follows:\n      - 0x06 Requested VLAN ID Sub-TLV\n        An
      Optional 16-bit value indicating the requested VLAN ID.  This\n        parameter
      MUST be used by a PE that is incapable of rewriting\n        the 802.1Q Ethernet
      VLAN tag on output.  If the ingress PE\n        receives this request, it MUST
      rewrite the VLAN ID contained\n        inside the VLAN Tag at the input to match
      the requested VLAN ID.\n        If this is not possible, and the VLAN ID does
      not already match\n        the configured ingress VLAN ID, the PW MUST not be
      enabled.\n        This parameter is applicable only to PW type 0x0004.\n"
    title: 4.3.  Ethernet-Specific Interface Parameter LDP Sub-TLV
  - contents:
    - "4.4.  Generic Procedures\n   When the NSP/Forwarder hands a frame to the PW
      termination function:\n      - The preamble (if any) and FCS are stripped off.\n
      \     - The control word as defined in Section 4.6, \"The Control Word\",\n
      \       is, if necessary, prepended to the resulting frame.  The\n        conditions
      under which the control word is or is not used are\n        specified below.\n
      \     - The proper pseudowire demultiplexer (PW Label) is prepended to\n        the
      resulting packet.\n      - The proper tunnel encapsulation is prepended to the
      resulting\n        packet.\n      - The packet is transmitted.\n   The way in
      which the proper tunnel encapsulation and pseudowire\n   demultiplexer is chosen
      depends on the procedures that were used to\n   set up the pseudowire.\n   The
      tunnel encapsulation depends on how the MPLS PSN is set up.  This\n   can include
      no label, one label, or multiple labels.  The proper\n   pseudowire demultiplexer
      is an MPLS label whose value is determined\n   by the PW setup and maintenance
      protocols.\n   When a packet arrives over a PW, the tunnel encapsulation and
      PW\n   demultiplexer are stripped off.  If the control word is present, it\n
      \  is processed and stripped off.  The resulting frame is then handed to\n   the
      Forwarder/NSP.  Regeneration of the FCS is considered to be an\n   NSP responsibility.\n"
    - contents:
      - "4.4.1.  Raw Mode vs. Tagged Mode\n   When the PE receives an Ethernet frame,
        and the frame has a VLAN tag,\n   we can distinguish two cases:\n      1.
        The tag is service-delimiting.  This means that the tag was\n         placed
        on the frame by some piece of service provider-operated\n         equipment,
        and the tag is used by the service provider to\n         distinguish the traffic.
        \ For example, LANs from different\n         customers might be attached to
        the same service provider\n         switch, which applies VLAN tags to distinguish
        one customer's\n         traffic from another's, and then forwards the frames
        to the PE.\n      2. The tag is not service-delimiting.  This means that the
        tag was\n         placed in the frame by a piece of customer equipment, and
        is\n         not meaningful to the PE.\n   Whether or not the tag is service-delimiting
        is determined by local\n   configuration on the PE.\n   If an Ethernet PW
        is operating in raw mode, service-delimiting tags\n   are NEVER sent over
        the PW.  If a service-delimiting tag is present\n   when the frame is received
        from the attachment circuit by the PE, it\n   MUST be stripped (by the NSP)
        from the frame before the frame is sent\n   to the PW.\n   If an Ethernet
        PW is operating in tagged mode, every frame sent on\n   the PW MUST have a
        service-delimiting VLAN tag.  If the frame as\n   received by the PE from
        the attachment circuit does not have a\n   service-delimiting VLAN tag, the
        PE must prepend the frame with a\n   dummy VLAN tag before sending the frame
        on the PW.  This is the\n   default operating mode.  This is the only REQUIRED
        mode.\n   In both modes, non-service-delimiting tags are passed transparently\n
        \  across the PW as part of the payload.  It should be noted that a\n   single
        Ethernet packet may contain more than one tag.  At most, one\n   of these
        tags may be service-delimiting.  In any case, the NSP\n   function may only
        inspect the outermost tag for the purpose of\n   adapting the Ethernet frame
        to the pseudowire.\n   In both modes, the service-delimiting tag values have
        only local\n   significance, i.e., are meaningful only at a particular PE-CE\n
        \  interface.  When tagged mode is used, the PE that receives a frame\n   from
        the PW may rewrite the tag value, or may strip the tag entirely,\n   or may
        leave the tag unchanged, depending on its configuration.  When\n   raw mode
        is used, the PE that receives a frame may or may not need to\n   add a service-delimiting
        tag before transmitting the frame on the\n   attachment circuit; however,
        it MUST not rewrite or remove any tags\n   that are already present.\n   The
        following table illustrates the operations that might be\n   performed at
        input from the attachment circuit:\n   +-----------------------------------------------------------+\n
        \  |       Tag-> |  service delimiting | non service delimiting|\n   |-------------+---------------------+-----------------------|\n
        \  |   Raw Mode  | 1st VLAN Tag Removed| no operation performed|\n   |-------------+---------------------+-----------------------|\n
        \  | Tagged Mode | NO OP or Tag Added  |     Tag Added         |\n   +-----------------------------------------------------------+\n"
      title: 4.4.1.  Raw Mode vs. Tagged Mode
    - contents:
      - "4.4.2.  MTU Management on the PE/CE Links\n   The Ethernet PW MUST NOT be
        enabled unless it is known that the MTUs\n   of the CE-PE links are the same
        at both ends of the PW.  If an egress\n   router receives an encapsulated
        layer 2 PDU whose payload length\n   (i.e., the length of the PDU itself without
        any of the encapsulation\n   headers) exceeds the MTU of the destination layer
        2 interface, the\n   PDU MUST be dropped.\n"
      title: 4.4.2.  MTU Management on the PE/CE Links
    - contents:
      - "4.4.3.  Frame Ordering\n   In general, applications running over Ethernet
        do not require strict\n   frame ordering.  However, the IEEE definition of
        802.3 [802.3]\n   requires that frames from the same conversation in the context
        of\n   link aggregation (clause 43) are delivered in sequence.  Moreover,\n
        \  the PSN cannot (in the general case) be assumed to provide or to\n   guarantee
        frame ordering.  An Ethernet PW can, through use of the\n   control word,
        provide strict frame ordering.  If this option is\n   enabled, any frames
        that get misordered by the PSN will be dropped or\n   reordered by the receiving
        PW endpoint.  If strict frame ordering is\n   a requirement for a particular
        PW, this option MUST be enabled.\n"
      title: 4.4.3.  Frame Ordering
    - contents:
      - "4.4.4.  Frame Error Processing\n   An encapsulated Ethernet frame traversing
        a pseudowire may be\n   dropped, corrupted, or delivered out-of-order.  As
        described in\n   [PWE3-REQ], frame loss, corruption, and out-of-order delivery
        are\n   considered to be a \"generalized bit error\" of the pseudowire.  PW\n
        \  frames that are corrupted will be detected at the PSN layer and\n   dropped.\n
        \  At the ingress of the PW, the native Ethernet frame error processing\n
        \  mechanisms MUST be enabled.  Therefore, if a PE device receives an\n   Ethernet
        frame containing hardware-level Cyclic Redundancy Check\n   (CRC) errors,
        framing errors, or a runt condition, the frame MUST be\n   discarded on input.
        \ Note that defining this processing is part of\n   the NSP function and is
        outside the scope of this document.\n"
      title: 4.4.4.  Frame Error Processing
    - contents:
      - "4.4.5.  IEEE 802.3x Flow Control Interworking\n   In a standard Ethernet
        network, the flow control mechanism is\n   optional and typically configured
        between the two nodes on a point-\n   to-point link (e.g., between the CE
        and the PE).  IEEE 802.3x PAUSE\n   frames MUST NOT be carried across the
        PW.  See Appendix A for notes\n   on CE-PE flow control.\n"
      title: 4.4.5.  IEEE 802.3x Flow Control Interworking
    title: 4.4.  Generic Procedures
  - contents:
    - "4.5.  Management\n   The Ethernet PW management model follows the general PW
      management\n   model defined in [RFC3985] and [PWE3-MIB].  Many common PW management\n
      \  facilities are provided here, with no additional Ethernet specifics\n   necessary.
      \ Ethernet-specific parameters are defined in an additional\n   MIB module,
      [PW-MIB].\n"
    title: 4.5.  Management
  - contents:
    - "4.6.  The Control Word\n   The control word defined in this section is based
      on the Generic PW\n   MPLS Control Word as defined in [PWE3-CW].  It provides
      the ability\n   to sequence individual frames on the PW, avoidance of equal-cost\n
      \  multiple-path load-balancing (ECMP) [RFC2992], and Operations and\n   Management
      (OAM) mechanisms including VCCV [VCCV].\n   [PWE3-CW] states, \"If a PW is sensitive
      to packet misordering and is\n   being carried over an MPLS PSN that uses the
      contents of the MPLS\n   payload to select the ECMP path, it MUST employ a mechanism
      which\n   prevents packet misordering.\" This is necessary because ECMP\n   implementations
      may examine the first nibble after the MPLS label\n   stack to determine whether
      the labelled packet is IP or not.  Thus,\n   if the source MAC address of an
      Ethernet frame carried over the PW\n   without a control word present begins
      with 0x4 or 0x6, it could be\n   mistaken for an IPv4 or IPv6 packet.  This
      could, depending on the\n   configuration and topology of the MPLS network,
      lead to a situation\n   where all packets for a given PW do not follow the same
      path.  This\n   may increase out-of-order frames on a given PW, or cause OAM
      packets\n   to follow a different path than actual traffic (see Section 4.4.3,\n
      \  \"Frame Ordering\").\n   The features that the control word provides may
      not be needed for a\n   given Ethernet PW.  For example, ECMP may not be present
      or active on\n   a given MPLS network, strict frame sequencing may not be required,\n
      \  etc.  If this is the case, the control word provides little value and\n   is
      therefore optional.  Early Ethernet PW implementations have been\n   deployed
      that do not include a control word or the ability to process\n   one if present.
      \ To aid in backwards compatibility, future\n   implementations MUST be able
      to send and receive frames without the\n   control word present.\n   In all
      cases, the egress PE MUST be aware of whether the ingress PE\n   will send a
      control word over a specific PW.  This may be achieved by\n   configuration
      of the PEs, or by signaling, as defined in [PWE3-CTRL].\n   The control word
      is defined as follows:\n    0                   1                   2                   3\n
      \   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |0 0 0 0|   Reserved            |       Sequence Number         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  In the above diagram, the first 4 bits MUST be set to 0 to indicate\n   PW
      data.  The rest of the first 16 bits are reserved for future use.\n   They MUST
      be set to 0 when transmitting, and MUST be ignored upon\n   receipt.\n   The
      next 16 bits provide a sequence number that can be used to\n   guarantee ordered
      frame delivery.  The processing of the sequence\n   number field is OPTIONAL.\n
      \  The sequence number space is a 16-bit, unsigned circular space.  The\n   sequence
      number value 0 is used to indicate that the sequence number\n   check algorithm
      is not used.  The sequence number processing\n   algorithm is found in [PWE3-CW].\n"
    title: 4.6.  The Control Word
  - contents:
    - "4.7.  QoS Considerations\n   The ingress PE MAY consider the user priority
      (PRI) field [802.1Q] of\n   the VLAN tag header when determining the value to
      be placed in a QoS\n   field of the encapsulating protocol (e.g., the EXP fields
      of the MPLS\n   label stack).  In a similar way, the egress PE MAY consider
      the QoS\n   field of the encapsulating protocol (e.g., the EXP fields of the
      MPLS\n   label stack) when queuing the frame for transmission towards the CE.\n
      \  A PE MUST support the ability to carry the Ethernet PW as a best-\n   effort
      service over the MPLS PSN.  PRI bits are kept transparent\n   between PE devices,
      regardless of the QoS support of the PSN.\n   If an 802.1Q VLAN field is added
      at the PE, a default PRI setting of\n   zero MUST be supported, a configured
      default value is recommended, or\n   the value may be mapped from the QoS field
      of the PSN, as referred to\n   above.\n   A PE may support additional QoS support
      by means of one or more of\n   the following methods:\n        i.  One class
      of service (CoS) per PW End Service (PWES), mapped\n            to a single
      CoS PW at the PSN.\n       ii.  Multiple CoS per PWES mapped to a single PW
      with multiple\n            CoS at the PSN.\n      iii.  Multiple CoS per PWES
      mapped to multiple PWs at the PSN.\n   Examples of the cases above and details
      of the service mapping\n   considerations are described in Appendix B.\n   The
      PW guaranteed rate at the MPLS PSN level is PW service provider\n   policy based
      on agreement with the customer, and may be different\n   from the Ethernet physical
      port rate.\n"
    title: 4.7.  QoS Considerations
  title: 4.  Details Specific to Particular Emulated Services
- contents:
  - "5.  Security Considerations\n   The Ethernet pseudowire type is subject to all
    of the general\n   security considerations discussed in [RFC3985] and [PWE3-CTRL].\n
    \  The Ethernet pseudowire is transported on an MPLS PSN; therefore, the\n   security
    of the pseudowire itself will only be as good as the\n   security of the MPLS
    PSN.  The MPLS PSN can be secured by various\n   methods, as described in [MPLS-ARCH].\n
    \  Security achieved by access control of MAC addresses is out of the\n   scope
    of this document.  Additional security requirements related to\n   the use of
    PW in a switching (virtual bridging) environment are not\n   discussed here as
    they are not within the scope of this document.\n"
  title: 5.  Security Considerations
- contents:
  - "6.  PSN MTU Requirements\n   The MPLS PSN MUST be configured with an MTU that
    is large enough to\n   transport a maximum-sized Ethernet frame that has been
    encapsulated\n   with a control word, a pseudowire demultiplexer, and a tunnel\n
    \  encapsulation.  With MPLS used as the tunneling protocol, for\n   example,
    this is likely to be 8 or more bytes greater than the\n   largest frame size.
    \ The methodology described in [FRAG] MAY be used\n   to fragment encapsulated
    frames that exceed the PSN MTU.  However, if\n   [FRAG] is not used and if the
    ingress router determines that an\n   encapsulated layer 2 PDU exceeds the MTU
    of the PSN tunnel through\n   which it must be sent, the PDU MUST be dropped.\n"
  title: 6.  PSN MTU Requirements
- contents:
  - "7.  Normative References\n   [PWE3-CW]    Bryant, S., Swallow, G., and D. McPherson,
    \"Pseudowire\n                Emulation Edge-to-Edge (PWE3) Control Word for Use
    over\n                an MPLS PSN\", RFC 4385, February 2006.\n   [IANA]       Martini,
    L., \"IANA Allocations for Pseudowire Edge to\n                Edge Emulation
    (PWE3)\", BCP 116, RFC 4446, April 2006.\n   [PWE3-CTRL]  Martini, L., El-Aawar,
    N., Heron, G., Rosen, E., Tappan,\n                D., and T. Smith, \"Pseudowire
    Setup and Maintenance\n                using the Label Distribution Protocol (LDP)\",
    RFC 4447,\n                April 2006.\n   [MPLS-ARCH]  Rosen, E., Viswanathan,
    A., and R. Callon,\n                \"Multiprotocol Label Switching Architecture\",
    RFC 3031,\n                January 2001.\n   [802.3]      IEEE802.3-2005, ISO/IEC
    8802-3: 2000 (E), \"IEEE Standard\n                for Information technology
    -- Telecommunications and\n                information exchange between systems
    -- Local and\n                metropolitan\n                 area networks --
    Specific requirements -- Part 3:\n                Carrier Sense Multiple Access
    with Collision Detection\n                (CSMA/CD) Access Method and Physical
    Layer\n                Specifications\", 2005.\n   [802.1Q]     ANSI/IEEE Standard
    802.1Q-2005, \"IEEE Standards for\n                Local and Metropolitan Area
    Networks: Virtual Bridged\n                Local Area Networks\", 2005.\n   [PDU]
    \       IEEE Std 802.3, 1998 Edition, \"Part 3: Carrier sense\n                multiple
    access with collision detection (CSMA/CD)\n                access method and physical
    layer specifications\" figure\n                3.1, 1998\n   [RFC2119]    Bradner,
    S., \"Key words for use in RFCs to Indicate\n                Requirement Levels\",
    BCP 14, RFC 2119, March 1997.\n"
  title: 7.  Normative References
- contents:
  - "8.  Informative References\n   [RFC3985]    Bryant, S. and P. Pate, \"Pseudo
    Wire Emulation Edge-to-\n                Edge (PWE3) Architecture\", RFC 3985,
    March 2005.\n   [PW-MIB]     Zelig, D. and T. Nadeau, \"Ethernet Pseudo Wire (PW)\n
    \               Management Information Base\", Work in Progress, February\n                2006.\n
    \  [PWE3-REQ]   Xiao, X., McPherson, D., and P. Pate, \"Requirements for\n                Pseudo-Wire
    Emulation Edge-to-Edge (PWE3)\", RFC 3916,\n                September 2004.\n
    \  [PWE3-MIB]   Zelig, D., Ed. and T. Nadeau, Ed., \"Pseudo Wire (PW)\n                Management
    Information Base\", Work in Progress, February\n                2006.\n   [LDP]
    \       Andersson, L., Doolan, P., Feldman, N., Fredette, A.,\n                and
    B. Thomas, \"LDP Specification\", RFC 3036, January\n                2001.\n   [FRAG]
    \      Malis, A. and W. Townsley, \"PWE3 Fragmentation and\n                Reassembly\",
    Work in Progress, February 2005.\n   [FCS]        Malis, A., Allan, D., and N.
    Del Regno, \"PWE3 Frame\n                Check Sequence Retention\", Work in Progress,
    September\n                2005.\n   [VCCV]       Nadeau, T., Ed. and R. Aggarwal,
    Ed., \"Pseudo Wire\n                Virtual Circuit Connectivity Verification
    (VCCV)\", Work\n                in Progress, August 2005.\n   [RFC2992]    Hopps,
    C., \"Analysis of an Equal-Cost Multi-Path\n                Algorithm\", RFC 2992,
    November 2000.\n   [RFC4026]    Andersson, L. and T. Madsen, \"Provider Provisioned\n
    \               Virtual Private Network (VPN) Terminology\", RFC 4026,\n                March
    2005.\n   [L2TPv3]     Lau, J., Townsley, M., and I. Goyret, \"Layer Two\n                Tunneling
    Protocol - Version 3 (L2TPv3)\", RFC 3931,\n                March 2005.\n"
  title: 8.  Informative References
- contents:
  - "9.  Significant Contributors\n   Andrew G. Malis\n   Tellabs\n   90 Rio Robles
    Dr.\n   San Jose, CA 95134\n   EMail: Andy.Malis@tellabs.com\n   Dan Tappan\n
    \  Cisco Systems, Inc.\n   1414 Massachusetts Avenue\n   Boxborough, MA 01719\n
    \  EMail: tappan@cisco.com\n   Steve Vogelsang\n   ECI Telecom\n   Omega Corporate
    Center\n   1300 Omega Drive\n   Pittsburgh, PA 15205\n   EMail: stephen.vogelsang@ecitele.com\n
    \  Vinai Sirkay\n   Reliance Infocomm\n   Dhirubai Ambani Knowledge City\n   Navi
    Mumbai 400 709\n   India\n   EMail: vinai@sirkay.com\n   Vasile Radoaca\n   Nortel
    Networks\n   600  Technology Park\n   Billerica MA 01821\n   EMail: vasile@nortelnetworks.com\n
    \  Chris Liljenstolpe\n   Alcatel\n   11600 Sallie Mae Dr.\n   9th Floor\n   Reston,
    VA 20193\n   EMail: chris.liljenstolpe@alcatel.com\n   Kireeti Kompella\n   Juniper
    Networks\n   1194 N. Mathilda Ave\n   Sunnyvale, CA 94089\n   EMail: kireeti@juniper.net\n
    \  Tricci So\n   Nortel Networks 3500 Carling Ave.,\n   Nepean, Ontario,\n   Canada,
    K2H 8E9.\n   EMail: tso@nortelnetworks.com\n   XiPeng Xiao\n   Riverstone Networks\n
    \  5200 Great America Parkway\n   Santa Clara, CA 95054\n   EMail: xxiao@riverstonenet.com\n
    \  Christopher O.  Flores\n   T-Systems\n   10700 Parkridge Boulevard\n   Reston,
    VA 20191\n   USA\n   EMail: christopher.flores@usa.telekom.de\n   David Zelig\n
    \  Corrigent Systems\n   126, Yigal Alon St.\n   Tel Aviv, ISRAEL\n   EMail: davidz@corrigent.com\n
    \  Raj Sharma\n   Luminous Networks, Inc.\n   10460 Bubb Road\n   Cupertino, CA
    95014\n   EMail: raj@luminous.com\n   Nick Tingle\n   TiMetra Networks\n   274
    Ferguson Drive\n   Mountain View, CA 94043\n   EMail: nick@timetra.com\n   Sunil
    Khandekar\n   TiMetra Networks\n   274 Ferguson Drive\n   Mountain View, CA 94043\n
    \  EMail: sunil@timetra.com\n   Loa Andersson\n   TLA-group\n   EMail: loa@pi.se\n"
  title: 9.  Significant Contributors
- contents:
  - 'Appendix A.  Interoperability Guidelines

    '
  - contents:
    - "A.1.  Configuration Options\n   The following is a list of the configuration
      options for a point-to-\n   point Ethernet PW based on the reference points
      of Figure 3:\n   --------------|---------------|---------------|------------------\n
      \  Service and   |  Encap on C   |Operation at B | Remarks\n   Encap on A    |
      \              |ingress/egress |\n   --------------|---------------|---------------|------------------\n
      \  1) Raw        | Raw - Same as |               |\n                 | A             |
      \              |\n                 |               |               |\n   --------------|---------------|---------------|------------------\n
      \  2) Tag1       | Tag2          |Optional change| VLAN can be\n                 |
      \              |of VLAN value  | 0-4095\n                 |               |
      \              | Change allowed in\n                 |               |               |
      both directions\n   --------------|---------------|---------------|------------------\n
      \  3) No Tag     | Tag           |Add/remove Tag | Tag can be\n                 |
      \              |field          | 0-4095\n                 |               |
      \              | (note i)\n                 |               |               |\n
      \  --------------|---------------|---------------|------------------\n   4)
      Tag        | No Tag        |Remove/add Tag | (note ii)\n                 |               |field
      \         |\n                 |               |               |\n                 |
      \              |               |\n   --------------|---------------|---------------|------------------\n
      \                     Figure 4: Configuration Options\n   Allowed combinations:\n
      \  Raw and other services are not allowed on the same NSP virtual port\n   (A).
      \ All other combinations are allowed, except that conflicting\n   VLANs on (A)
      are not allowed.  Note that in most point-to-point PW\n   applications the NSP
      virtual port is the same entity as the physical\n   port.\n   Notes:\n        i.
      \ Mode #3 MAY be limited to adding VLAN NULL only, since\n            change
      of VLAN or association to specific VLAN can be done\n            at the PW CE-bound
      side.\n       ii.  Mode #4 exists in layer 2 switches, but is not recommended\n
      \           when operating with PW since it may not preserve the user's\n            PRI
      bits.  If there is a need to remove the VLAN tag (for\n            TLS at the
      other end of the PW), it is recommended to use\n            mode #2 with tag2=0
      (NULL VLAN) on the PW and use mode #3 at\n            the other end of the PW.\n"
    title: A.1.  Configuration Options
  - contents:
    - "A.2.  IEEE 802.3x Flow Control Considerations\n   If the receiving node becomes
      congested, it can send a special frame,\n   called the PAUSE frame, to the source
      node at the opposite end of the\n   connection.  The implementation MUST provide
      a mechanism for\n   terminating PAUSE frames locally (i.e., at the local PE).
      \ It MUST\n   operate as follows: PAUSE frames received on a local Ethernet
      port\n   SHOULD cause the PE device to buffer, or to discard, further Ethernet\n
      \  frames for that port until the PAUSE condition is cleared.\n   Optionally,
      the PE MAY simply discard PAUSE frames.\n   If the PE device wishes to pause
      data received on a local Ethernet\n   port (perhaps because its own buffers
      are filling up or because it\n   has received notification of congestion within
      the PSN), then it MAY\n   issue a PAUSE frame on the local Ethernet port, but
      MUST clear this\n   condition when willing to receive more data.\n"
    title: A.2.  IEEE 802.3x Flow Control Considerations
  title: Appendix A.  Interoperability Guidelines
- contents:
  - "Appendix B.  QoS Details\n   Section 4.7, \"QoS Considerations\", describes various
    modes for\n   supporting PW QOS over the PSN.  Examples of the above for a point-\n
    \  to-point VLAN service are:\n      - The classification to the PW is based on
    VLAN field, but the\n        user PRI bits are mapped to different CoS markings
    (and network\n        behavior) at the PW level.  An example of this is a PW mapped
    to\n        an E-LSP in an MPLS network.\n      - The classification to the PW
    is based on VLAN field and the PRI\n        bits, and frames with different PRI
    bits are mapped to different\n        PWs.  An example is to map a PWES to different
    L-LSPs in MPLS\n        PSN in order to support multiple CoS over an L-LSP-capable\n
    \       network, or to map a PWES to multiple L2TPv3 sessions [L2TPv3].\n        The
    specific value to be assigned at the PSN for various CoS is\n        out of the
    scope of this document.\n"
  - contents:
    - "B.1.  Adaptation of 802.1Q CoS to PSN CoS\n   It is not required that the PSN
      will have the same CoS definition of\n   CoS as defined in [802.1Q], and the
      mapping of 802.1Q CoS to PSN CoS\n   is application specific and depends on
      the agreement between the\n   customer and the PW provider.  However, the following
      principles\n   adopted from 802.1Q, Table 8-2, MUST be met when applying the
      set of\n   PSN CoS based on user's PRI bits.\n                ----------------------------------\n
      \               |#of available classes of service|\n   -------------||---+---+---+---+---+---+---+---|\n
      \  User         || 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |\n   Priority     ||   |   |
      \  |   |   |   |   |   |\n   ===============================================\n
      \  0 Best Effort|| 0 | 0 | 0 | 1 | 1 | 1 | 1 | 2 |\n   (Default)    ||   |   |
      \  |   |   |   |   |   |\n   ------------ ||---+---+---+---+---+---+---+---|\n
      \  1 Background || 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |\n                ||   |   |
      \  |   |   |   |   |   |\n   ------------ ||---+---+---+---+---+---+---+---|\n
      \  2 Spare      || 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1 |\n                ||   |   |
      \  |   |   |   |   |   |\n   ------------ ||---+---+---+---+---+---+---+---|\n
      \  3 Excellent  || 0 | 0 | 0 | 1 | 1 | 2 | 2 | 3 |\n   Effort       ||   |   |
      \  |   |   |   |   |   |\n   ------------ ||---+---+---+---+---+---+---+---|\n
      \  4 Controlled || 0 | 1 | 1 | 2 | 2 | 3 | 3 | 4 |\n   Load         ||   |   |
      \  |   |   |   |   |   |\n   ------------ ||---+---+---+---+---+---+---+---|\n
      \  5 Interactive|| 0 | 1 | 1 | 2 | 3 | 4 | 4 | 5 |\n   Multimedia   ||   |   |
      \  |   |   |   |   |   |\n   ------------ ||---+---+---+---+---+---+---+---|\n
      \  6 Interactive|| 0 | 1 | 2 | 3 | 4 | 5 | 5 | 6 |\n   Voice        ||   |   |
      \  |   |   |   |   |   |\n   ------------ ||---+---+---+---+---+---+---+---|\n
      \  7 Network    || 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 |\n   Control      ||   |   |
      \  |   |   |   |   |   |\n   ------------ ||---+---+---+---+---+---+---+---|\n
      \                    Figure 5: IEEE 802.1Q CoS Mapping\n"
    title: B.1.  Adaptation of 802.1Q CoS to PSN CoS
  - contents:
    - "B.2.  Drop Precedence\n   The 802.1P standard does not support drop precedence;
      therefore, from\n   the PW PE-bound point of view there is no mapping required.
      \ It is,\n   however, possible to mark different drop precedence for different
      PW\n   frames based on the operator policy and required network behavior.\n
      \  This functionality is not discussed further here.\n   PSN QoS support and
      signaling of QoS are out of the scope of this\n   document.\n"
    title: B.2.  Drop Precedence
  title: Appendix B.  QoS Details
- contents:
  - "Authors' Addresses\n   Luca Martini, Editor\n   Cisco Systems, Inc.\n   9155
    East Nichols Avenue, Suite 400\n   Englewood, CO, 80112\n   EMail: lmartini@cisco.com\n
    \  Nasser El-Aawar\n   Level 3 Communications, LLC.\n   1025 Eldorado Blvd.\n
    \  Broomfield, CO, 80021\n   EMail: nna@level3.net\n   Giles Heron\n   Tellabs\n
    \  Abbey Place\n   24-28 Easton Street\n   High Wycombe\n   Bucks\n   HP11 1NT\n
    \  UK\n   EMail: giles.heron@tellabs.com\n   Eric C. Rosen\n   Cisco Systems,
    Inc.\n   1414 Massachusetts Avenue\n   Boxborough, MA 01719\n   EMail: erosen@cisco.com\n"
  title: Authors' Addresses
- contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2006).\n   This
    document is subject to the rights, licenses and restrictions\n   contained in
    BCP 78, and except as set forth therein, the authors\n   retain all their rights.\n
    \  This document and the information contained herein are provided on an\n   \"AS
    IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n   OR IS SPONSORED
    BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET\n   ENGINEERING TASK FORCE
    DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,\n   INCLUDING BUT NOT LIMITED TO
    ANY WARRANTY THAT THE USE OF THE\n   INFORMATION HEREIN WILL NOT INFRINGE ANY
    RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
    PURPOSE.\n"
  title: Full Copyright Statement
- contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or
    scope of any\n   Intellectual Property Rights or other rights that might be claimed
    to\n   pertain to the implementation or use of the technology described in\n   this
    document or the extent to which any license under such rights\n   might or might
    not be available; nor does it represent that it has\n   made any independent effort
    to identify any such rights.  Information\n   on the procedures with respect to
    rights in RFC documents can be\n   found in BCP 78 and BCP 79.\n   Copies of IPR
    disclosures made to the IETF Secretariat and any\n   assurances of licenses to
    be made available, or the result of an\n   attempt made to obtain a general license
    or permission for the use of\n   such proprietary rights by implementers or users
    of this\n   specification can be obtained from the IETF on-line IPR repository
    at\n   http://www.ietf.org/ipr.\n   The IETF invites any interested party to bring
    to its attention any\n   copyrights, patents or patent applications, or other
    proprietary\n   rights that may cover technology that may be required to implement\n
    \  this standard.  Please address the information to the IETF at\n   ietf-ipr@ietf.org.\n"
  title: Intellectual Property
- contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is provided by the IETF\n
    \  Administrative Support Activity (IASA).\n"
  title: Acknowledgement
