- title: __initial_text__
  contents:
  - "         1123, 1122, 1060, 791\n             Type of Service in the Internet\
    \ Protocol Suite\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document specifies an IAB standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"IAB\n   Official\
    \ Protocol Standards\" for the standardization state and status\n   of this protocol.\
    \  Distribution of this memo is unlimited.\n"
- title: Summary
  contents:
  - "Summary\n   This memo changes and clarifies some aspects of the semantics of\
    \ the\n   Type of Service octet in the Internet Protocol (IP) header.  The\n \
    \  handling of IP Type of Service by both hosts and routers is specified\n   in\
    \ some detail.\n   This memo defines a new TOS value for requesting that the network\n\
    \   minimize the monetary cost of transmitting a datagram.  A number of\n   additional\
    \ new TOS values are reserved for future experimentation and\n   standardization.\
    \  The ability to request that transmission be\n   optimized along multiple axes\
    \ (previously accomplished by setting\n   multiple TOS bits simultaneously) is\
    \ removed.  Thus, for example, a\n   single datagram can no longer request that\
    \ the network simultaneously\n   minimize delay and maximize throughput.\n   In\
    \ addition, there is a minor conflict between the Host Requirements\n   (RFC-1122\
    \ and RFC-1123) and a number of other standards concerning\n   the sizes of the\
    \ fields in the Type of Service octet.  This memo\n   resolves that conflict.\n"
- title: Table of Contents
  contents:
  - 'Table of Contents

    '
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \ 5.  Use of the TOS Field in the Internet Protocols .............    6\n    \
    \  5.1  Internet Control Message Protocol (ICMP) ...............    6\n      5.2\
    \  Transport Protocols ....................................    7\n      5.3  Application\
    \ Protocols ..................................    7\n   6.  ICMP and the TOS Facility\
    \ ..................................    8\n      6.1  Destination Unreachable\
    \ ................................    8\n      6.2  Redirect ...............................................\
    \    9\n   7.  Use of the TOS Field in Routing ............................  \
    \  9\n      7.1  Host Routing ...........................................   10\n\
    \      7.2  Forwarding .............................................   12\n  \
    \ 8.  Other consequences of TOS ..................................   13\n   APPENDIX\
    \ A.  Updates to Other Specifications ...................   14\n      A.1  RFC-792\
    \ (ICMP) .........................................   14\n      A.2  RFC-1060 (Assigned\
    \ Numbers) ............................   14\n      A.3  RFC-1122 and RFC-1123\
    \ (Host Requirements) ..............   16\n      A.4  RFC-1195 (Integrated IS-IS)\
    \ ............................   16\n      A.5  RFC-1247 (OSPF) and RFC-1248 (OSPF\
    \ MIB) ................   17\n   APPENDIX B.  Rationale .........................................\
    \   18\n      B.1  The Minimize Monetary Cost TOS Value ...................  \
    \ 18\n      B.2  The Specification of the TOS Field .....................   19\n\
    \      B.3  The Choice of Weak TOS Routing .........................   21\n  \
    \    B.4  The Retention of Longest Match Routing .................   22\n    \
    \  B.5  The Use of Destination Unreachable .....................   23\n   APPENDIX\
    \ C.  Limitations of the TOS Mechanism ..................   24\n      C.1  Inherent\
    \ Limitations ...................................   24\n      C.2  Limitations\
    \ of this Specification ......................   25\n   References .....................................................\
    \   27\n   Acknowledgements ...............................................  \
    \ 28\n   Security Considerations ........................................   28\n\
    \   Author's Address ...............................................   28\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - 'RFC 1349                    Type of Service                    July 1992

    '
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Paths through the Internet vary widely in the quality of\
    \ service they\n   provide.  Some paths are more reliable than others.  Some impose\
    \ high\n   call setup or per-packet charges, while others do not do usage-based\n\
    \   charging.  Throughput and delay also vary widely.  Often there are\n   tradeoffs:\
    \ the path that provides the highest throughput may well not\n   be the one that\
    \ provides the lowest delay or the lowest monetary\n   cost.  Therefore, the \"\
    optimal\" path for a packet to follow through\n   the Internet may depend on the\
    \ needs of the application and its user.\n   Because the Internet itself has no\
    \ direct knowledge of how to\n   optimize the path for a particular application\
    \ or user, the IP\n   protocol [11] provides a (rather limited) facility for upper\
    \ layer\n   protocols to convey hints to the Internet Layer about how the\n  \
    \ tradeoffs should be made for the particular packet.  This facility is\n   the\
    \ \"Type of Service\" facility, abbreviated as the \"TOS facility\" in\n   this\
    \ memo.\n   Although the TOS facility has been a part of the IP specification\n\
    \   since the beginning, it has been little used in the past.  However,\n   the\
    \ Internet host specification [1,2] now mandates that hosts use the\n   TOS facility.\
    \  Additionally, routing protocols (including OSPF [10]\n   and Integrated IS-IS\
    \ [7]) have been developed which can compute\n   routes separately for each type\
    \ of service.  These new routing\n   protocols make it practical for routers to\
    \ consider the requested\n   type of service when making routing decisions.\n\
    \   This specification defines in detail how hosts and routers use the\n   TOS\
    \ facility.  Section 2 introduces the primary considerations that\n   motivated\
    \ the design choices in this specification.  Sections 3 and 4\n   describe the\
    \ Type of Service octet in the IP header and the values\n   which the TOS field\
    \ of that octet may contain.  Section 5 describes\n   how a host (or router) chooses\
    \ appropriate values to insert into the\n   TOS fields of the IP datagrams it\
    \ originates.  Sections 6 and 7\n   describe the ICMP Destination Unreachable\
    \ and Redirect messages and\n   how TOS affects path choice by both hosts and\
    \ routers.  Section 8\n   describes some additional ways in which TOS may optionally\
    \ affect\n   packet processing.  Appendix A describes how this specification\n\
    \   updates a number of existing specifications.  Appendices B and C\n   expand\
    \ on the discussion in Section 2.\n"
- title: 2.  Goals and Philosophy
  contents:
  - "2.  Goals and Philosophy\n   The fundamental rule that guided this specification\
    \ is that a host\n   should never be penalized for using the TOS facility.  If\
    \ a host\n   makes appropriate use of the TOS facility, its network service should\n\
    \   be at least as good as (and hopefully better than) it would have been\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \ if the host had not used the facility.  This goal was considered\n   particularly\
    \ important because it is unlikely that any specification\n   which did not meet\
    \ this goal, no matter how good it might be in other\n   respects, would ever\
    \ become widely deployed and used.  A particular\n   consequence of this goal\
    \ is that if a network cannot provide the TOS\n   requested in a packet, the network\
    \ does not discard the packet but\n   instead delivers it the same way it would\
    \ have been delivered had\n   none of the TOS bits been set.\n   Even though the\
    \ TOS facility has not been widely used in the past, it\n   is a goal of this\
    \ memo to be as compatible as possible with existing\n   practice.  Primarily\
    \ this means that existing host implementations\n   should not interact badly\
    \ with hosts and routers which implement the\n   specifications of this memo,\
    \ since TOS support is almost non-existent\n   in routers which predate this specification.\
    \  However, this memo does\n   attempt to be compatible with the treatment of\
    \ IP TOS in OSPF and\n   Integrated IS-IS.\n   Because the Internet community\
    \ does not have much experience with\n   TOS, it is important that this specification\
    \ allow easy definition\n   and deployment of new and experimental types of service.\
    \  This goal\n   has had a significant impact on this specification.  In particular,\n\
    \   it led to the decision to fix permanently the size of the TOS field\n   and\
    \ to the decision that hosts and routers should be able to handle a\n   new type\
    \ of service correctly without having to understand its\n   semantics.\n   Appendix\
    \ B of this memo provides a more detailed explanation of the\n   rationale behind\
    \ particular aspects of this specification.\n"
- title: 3.  Specification of the Type of Service Octet
  contents:
  - "3.  Specification of the Type of Service Octet\n   The TOS facility is one of\
    \ the features of the Type of Service octet\n   in the IP datagram header.  The\
    \ Type of Service octet consists of\n   three fields:\n                0     1\
    \     2     3     4     5     6     7\n             +-----+-----+-----+-----+-----+-----+-----+-----+\n\
    \             |                 |                       |     |\n            \
    \ |   PRECEDENCE    |          TOS          | MBZ |\n             |          \
    \       |                       |     |\n             +-----+-----+-----+-----+-----+-----+-----+-----+\n\
    \   The first field, labeled \"PRECEDENCE\" above, is intended to denote\n   the\
    \ importance or priority of the datagram.  This field is not\n   discussed in\
    \ detail in this memo.\n   The second field, labeled \"TOS\" above, denotes how\
    \ the network should\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \ make tradeoffs between throughput, delay, reliability, and cost.  The\n   TOS\
    \ field is the primary topic of this memo.\n   The last field, labeled \"MBZ\"\
    \ (for \"must be zero\") above, is\n   currently unused.  The originator of a\
    \ datagram sets this field to\n   zero (unless participating in an Internet protocol\
    \ experiment which\n   makes use of that bit).  Routers and recipients of datagrams\
    \ ignore\n   the value of this field.  This field is copied on fragmentation.\n\
    \   In the past there has been some confusion about the size of the TOS\n   field.\
    \  RFC-791 defined it as a three bit field, including bits 3-5\n   in the figure\
    \ above.  It included bit 6 in the MBZ field.  RFC-1122\n   added bits 6 and 7\
    \ to the TOS field, eliminating the MBZ field.  This\n   memo redefines the TOS\
    \ field to be the four bits shown in the figure\n   above.  The reasons for choosing\
    \ to make the TOS field four bits wide\n   can be found in Appendix B.2.\n"
- title: 4.  Specification of the TOS Field
  contents:
  - "4.  Specification of the TOS Field\n   As was stated just above, this memo redefines\
    \ the TOS field as a four\n   bit field.  Also contrary to RFC-791, this memo\
    \ defines the TOS field\n   as a single enumerated value rather than as a set\
    \ of bits (where each\n   bit has its own meaning).  This memo defines the semantics\
    \ of the\n   following TOS field values (expressed as binary numbers):\n     \
    \               1000   --   minimize delay\n                    0100   --   maximize\
    \ throughput\n                    0010   --   maximize reliability\n         \
    \           0001   --   minimize monetary cost\n                    0000   --\
    \   normal service\n   The values used in the TOS field are referred to in this\
    \ memo as \"TOS\n   values\", and the value of the TOS field of an IP packet is\
    \ referred\n   to in this memo as the \"requested TOS\".  The TOS field value\
    \ 0000 is\n   referred to in this memo as the \"default TOS.\"\n   Because this\
    \ specification redefines TOS values to be integers rather\n   than sets of bits,\
    \ computing the logical OR of two TOS values is no\n   longer meaningful.  For\
    \ example, it would be a serious error for a\n   router to choose a low delay\
    \ path for a packet whose requested TOS\n   was 1110 simply because the router\
    \ noted that the former \"delay bit\"\n   was set.\n   Although the semantics\
    \ of values other than the five listed above are\n   not defined by this memo,\
    \ they are perfectly legal TOS values, and\n   hosts and routers must not preclude\
    \ their use in any way.  As will\n   become clear after reading the remainder\
    \ of this memo, only the\n   default TOS is in any way special.  A host or router\
    \ need not (and\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \ except as described in Section 8 should not) make any distinction\n   between\
    \ TOS values whose semantics are defined by this memo and those\n   that are not.\n\
    \   It is important to note the use of the words \"minimize\" and\n   \"maximize\"\
    \ in the definitions of values for the TOS field.  For\n   example, setting the\
    \ TOS field to 1000 (minimize delay) does not\n   guarantee that the path taken\
    \ by the datagram will have a delay that\n   the user considers \"low\".  The\
    \ network will attempt to choose the\n   lowest delay path available, based on\
    \ its (often imperfect)\n   information about path delay.  The network will not\
    \ discard the\n   datagram simply because it believes that the delay of the available\n\
    \   paths is \"too high\" (actually, the network manager can override this\n \
    \  behavior through creative use of routing metrics, but this is\n   strongly\
    \ discouraged: setting the TOS field is intended to give\n   better service when\
    \ it is available, rather than to deny service when\n   it is not).\n"
- title: 5.  Use of the TOS Field in the Internet Protocols
  contents:
  - "5.  Use of the TOS Field in the Internet Protocols\n   For the TOS facility to\
    \ be useful, the TOS fields in IP packets must\n   be filled in with reasonable\
    \ values.  This section discusses how\n   protocols above IP choose appropriate\
    \ values.\n   5.1  Internet Control Message Protocol (ICMP)\n      ICMP [8,9,12]\
    \ defines a number of messages for performing error\n      reporting and diagnostic\
    \ functions for the Internet Layer.  This\n      section describes how a host\
    \ or router chooses appropriate TOS\n      values for ICMP messages it originates.\
    \  The TOS facility also\n      affects the origination and processing of ICMP\
    \ Redirects and ICMP\n      Destination Unreachables, but that is the topic of\
    \ Section 6.\n      For purposes of this discussion, it is useful to divide ICMP\n\
    \      messages into three classes:\n       o   ICMP error messages include ICMP\
    \ message types 3 (Destination\n           Unreachable), 4 (Source Quench), 5\
    \ (Redirect), 11 (Time\n           Exceeded), and 12 (Parameter Problem).\n  \
    \     o   ICMP request messages include ICMP message types 8 (Echo), 10\n    \
    \       (Router Solicitation), 13 (Timestamp), 15 (Information\n           Request\
    \ -- now obsolete), and 17 (Address Mask Request).\n       o   ICMP reply messages\
    \ include ICMP message types 0 (Echo\n           Reply), 9 (Router Advertisement),\
    \ 14 (Timestamp Reply), 16\n           (Information Reply -- also obsolete), and\
    \ 18 (Address Mask\n           Reply).\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    An ICMP error message is always sent with the default TOS (0000).\n     \
    \ An ICMP request message may be sent with any value in the TOS\n      field.\
    \  A mechanism to allow the user to specify the TOS value to\n      be used would\
    \ be a useful feature in many applications that\n      generate ICMP request messages.\n\
    \      An ICMP reply message is sent with the same value in the TOS field\n  \
    \    as was used in the corresponding ICMP request message.\n   5.2  Transport\
    \ Protocols\n      When sending a datagram, a transport protocol uses the TOS\n\
    \      requested by the application.  There is no requirement that both\n    \
    \  ends of a transport connection use the same TOS.  For example, the\n      sending\
    \ side of a bulk data transfer application should request\n      that throughput\
    \ be maximized, whereas the receiving side might\n      request that delay be\
    \ minimized (assuming that it is primarily\n      sending small acknowledgement\
    \ packets).  It may be useful for a\n      transport protocol to provide applications\
    \ with a mechanism for\n      learning the value of the TOS field that accompanied\
    \ the most\n      recently received data.\n      It is quite permissible to switch\
    \ to a different TOS in the middle\n      of a connection if the nature of the\
    \ traffic being generated\n      changes.  An example of this would be SMTP, which\
    \ spends part of\n      its time doing bulk data transfer and part of its time\
    \ exchanging\n      short command messages and responses.\n      TCP [13] should\
    \ use the same TOS for datagrams containing only TCP\n      control information\
    \ as it does for datagrams which contain user\n      data.  Although it might\
    \ seem intuitively correct to always\n      request that the network minimize\
    \ delay for segments containing\n      acknowledgements but no data, doing so\
    \ could corrupt TCP's round\n      trip time estimates.\n   5.3  Application Protocols\n\
    \      Applications are responsible for choosing appropriate TOS values\n    \
    \  for any traffic they originate.  The Assigned Numbers document\n      [15]\
    \ lists the TOS values to be used by a number of common network\n      applications.\
    \  For other applications, it is the responsibility of\n      the application's\
    \ designer or programmer to make a suitable\n      choice, based on the nature\
    \ of the traffic to be originated by the\n      application.\n      It is essential\
    \ for many sorts of network diagnostic applications,\n      and desirable for\
    \ other applications, that the user of the\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    application be able to override the TOS value(s) which the\n      application\
    \ would otherwise choose.\n      The Assigned Numbers document is revised and\
    \ reissued\n      periodically.  Until RFC-1060, the edition current as this is\n\
    \      being written, has been superceded, readers should consult\n      Appendix\
    \ A.2 of this memo.\n"
- title: 6.  ICMP and the TOS Facility
  contents:
  - "6.  ICMP and the TOS Facility\n   Routers communicate routing information to\
    \ hosts using the ICMP\n   protocol [12].  This section describes how support\
    \ for the TOS\n   facility affects the origination and interpretation of ICMP\
    \ Redirect\n   messages and certain types of ICMP Destination Unreachable messages.\n\
    \   This memo does not define any new extensions to the ICMP protocol.\n   6.1\
    \  Destination Unreachable\n      The ICMP Destination Unreachable message contains\
    \ a code which\n      describes the reason that the destination is unreachable.\
    \  There\n      are four codes [1,12] which are particularly relevant to the topic\n\
    \      of this memo:\n         0 -- network unreachable\n         1 -- host unreachable\n\
    \        11 -- network unreachable for type of service\n        12 -- host unreachable\
    \ for type of service\n      A router generates a code 11 or code 12 Destination\
    \ Unreachable\n      when an unreachable destination (network or host) would have\
    \ been\n      reachable had a different TOS value been specified.  A router\n\
    \      generates a code 0 or code 1 Destination Unreachable in other\n      cases.\n\
    \      A host receiving a Destination Unreachable message containing any\n   \
    \   of these codes should recognize that it may result from a routing\n      transient.\
    \  The host should therefore interpret the message as\n      only a hint, not\
    \ proof, that the specified destination is\n      unreachable.\n      The use\
    \ of codes 11 and 12 may seem contrary to the statement in\n      Section 2 that\
    \ packets should not be discarded simply because the\n      requested TOS cannot\
    \ be provided.  The rationale for having these\n      codes and the limited cases\
    \ in which they are expected to be used\n      are described in Appendix B.5.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \ 6.2  Redirect\n      The ICMP Redirect message also includes a code, which specifies\n\
    \      the class of datagrams to which the Redirect applies.  There are\n    \
    \  currently four codes defined:\n         0 -- redirect datagrams for the network\n\
    \         1 -- redirect datagrams for the host\n         2 -- redirect datagrams\
    \ for the type of service and network\n         3 -- redirect datagrams for the\
    \ type of service and host\n      A router generates a code 3 Redirect when the\
    \ Redirect applies\n      only to IP packets which request a particular TOS value.\
    \  A router\n      generates a code 1 Redirect instead when the the optimal next\
    \ hop\n      on the path to the destination would be the same for any TOS\n  \
    \    value.  In order to minimize the potential for host confusion,\n      routers\
    \ should refrain from using codes 0 and 2 in Redirects\n      [3,6].\n      Although\
    \ the current Internet Host specification [1] only requires\n      hosts to correctly\
    \ handle code 0 and code 1 Redirects, a host\n      should also correctly handle\
    \ code 2 and code 3 Redirects, as\n      described in Section 7.1 of this memo.\
    \  If a host does not, it is\n      better for the host to treat code 2 as equivalent\
    \ to code 0 and\n      code 3 as equivalent to code 1 than for the host to simply\
    \ ignore\n      code 2 and code 3 Redirects.\n"
- title: 7.  Use of the TOS Field in Routing
  contents:
  - "7.  Use of the TOS Field in Routing\n   Both hosts and routers should consider\
    \ the value of the TOS field of\n   a datagram when choosing an appropriate path\
    \ to get the datagram to\n   its destination.  The mechanisms for doing so are\
    \ discussed in this\n   section.\n   Whether a packet's TOS value actually affects\
    \ the path it takes\n   inside of a particular routing domain is a choice made\
    \ by the routing\n   domain's network manager.  In many routing domains the paths\
    \ are\n   sufficiently homogeneous in nature that there is no reason for\n   routers\
    \ to choose different paths based up the TOS field in a\n   datagram.  Inside\
    \ such a routing domain, the network manager may\n   choose to limit the size\
    \ of the routing database and of routing\n   protocol updates by only defining\
    \ routes for the default (0000) TOS.\n   Neither hosts nor routers should need\
    \ to have any explicit knowledge\n   of whether TOS affects routing in the local\
    \ routing domain.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \ 7.1  Host Routing\n      When a host (which is not also a router) wishes to\
    \ send an IP\n      packet to a destination on another network or subnet, it needs\
    \ to\n      choose an appropriate router to send the packet to.  According to\n\
    \      the IP Architecture, it does so by maintaining a route cache and a\n  \
    \    list of default routers.  Each entry in the route cache lists a\n      destination\
    \ (IP address) and the appropriate router to use to\n      reach that destination.\
    \  The host learns the information stored in\n      its route cache through the\
    \ ICMP Redirect mechanism.  The host\n      learns the list of default routers\
    \ either from static\n      configuration information or by using the ICMP Router\
    \ Discovery\n      mechanism [8].  When the host wishes to send an IP packet,\
    \ it\n      searches its route cache for a route matching the destination\n  \
    \    address in the packet.  If one is found it is used; if not, the\n      packet\
    \ is sent to one of the default routers.  All of this is\n      described in greater\
    \ detail in section 3.3.1 of RFC-1122 [1].\n      Adding support for the TOS facility\
    \ changes the host routing\n      procedure only slightly.  In the following,\
    \ it is assumed that (in\n      accordance with the current Internet Host specification\
    \ [1]) the\n      host treats code 0 (redirect datagrams for the network) Redirects\n\
    \      as if they were code 1 (redirect datagrams for the host)\n      Redirects.\
    \  Similarly, it is assumed that the host treats code 2\n      (redirect datagrams\
    \ for the network and type of service) Redirects\n      as if they were code 3\
    \ (redirect datagrams for the host and type\n      of service) Redirects.  Readers\
    \ considering violating these\n      assumptions should be aware that long and\
    \ careful consideration of\n      the way in which Redirects are treated is necessary\
    \ to avoid\n      situations where every packet sent to some destination provokes\
    \ a\n      Redirect.  Because these assumptions match the recommendations of\n\
    \      Internet Host specification, that careful consideration is beyond\n   \
    \   the scope of this memo.\n      As was described in Section 6.2, some ICMP\
    \ Redirects apply only to\n      IP packets which request a particular TOS.  Thus,\
    \ a host (at least\n      conceptually) needs to store two types of entries in\
    \ its route\n      cache:\n       type 1: { destination, TOS, router }\n     \
    \  type 2: { destination, *, router }\n      where type 1 entries result from\
    \ the receipt of code 3 (or code 1)\n      Redirects and type 2 entries result\
    \ from the receipt of code 2 (or\n      code 0) Redirects.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    When a host wants to send a packet, it first searches the route\n      cache\
    \ for a type 1 entry whose destination matches the destination\n      address\
    \ of the packet and whose TOS matches the requested TOS in\n      the packet.\
    \  If it doesn't find one, the host searches its route\n      cache again, this\
    \ time looking for a type 2 entry whose\n      destination matches the destination\
    \ address of the packet.  If\n      either of these searches finds a matching\
    \ entry, the packet is\n      sent to the router listed in the matching entry.\
    \  Otherwise, the\n      packet is sent to one of the routers on the list of default\n\
    \      routers.\n      When a host creates (or updates) a type 2 entry, it must\
    \ flush\n      from its route cache any type 1 entries which have the same\n \
    \     destination.  This is necessary for correctness, since the type 1\n    \
    \  entry may be obsolete but would continue to be used if it weren't\n      flushed\
    \ because type 1 entries are always preferred over type 2\n      entries.\n  \
    \    However, the converse is not true: when a host creates a type 1\n      entry,\
    \ it should not flush a type 2 entry that has the same\n      destination.  In\
    \ this case, the type 1 entry will properly\n      override the type 2 entry for\
    \ packets whose destination address\n      and requested TOS match the type 1\
    \ entry.  Because the type 2\n      entry may well specify the correct router\
    \ for some TOS values\n      other than the one specified in the type 1 entry,\
    \ saving the type\n      2 entry will likely cut down on the number of Redirects\
    \ which the\n      host would otherwise receive.  This savings can potentially\
    \ be\n      substantial if one of the Redirects which was avoided would have\n\
    \      created a new type 2 entry (thereby causing the new type 1 entry\n    \
    \  to be flushed).  That can happen, for example, if only some of the\n      routers\
    \ on the local net are part of a routing domain that\n      computes separate\
    \ routes for each TOS.\n      As an alternative, a host may treat all Redirects\
    \ as if they were\n      code 3 (redirect datagrams for hosts and type of service)\n\
    \      Redirects.  This alternative allows the host to have only type 1\n    \
    \  route cache entries, thereby simplifying route lookup and\n      eliminating\
    \ the need for the rules in the previous two paragraphs.\n      The disadvantage\
    \ of this approach is that it increases the size of\n      the route cache and\
    \ the amount of Redirect traffic if the host\n      sends packets with a variety\
    \ of requested TOS's to a destination\n      for which the host should use the\
    \ same router regardless of the\n      requested TOS.  There is not yet sufficient\
    \ experience with the\n      TOS facility to know whether that disadvantage would\
    \ be serious\n      enough in practice to outweigh the simplicity of this approach.\n\
    \      Despite RFC-1122, some hosts acquire their routing information by\n   \
    \   \"wiretapping\" a routing protocol instead of by using the\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    mechanisms described above.  Such hosts will need to follow the\n      procedures\
    \ described in Section 7.2 (except of course that hosts\n      will not send ICMP\
    \ Destination Unreachables or ICMP Redirects).\n   7.2  Forwarding\n      A router\
    \ in the Internet should be able to consider the value of\n      the TOS field\
    \ when choosing an appropriate path over which to\n      forward an IP packet.\
    \  How a router does this is a part of the\n      more general issue of how a\
    \ router picks appropriate paths.  This\n      larger issue can be extremely complex\
    \ [4], and is beyond the scope\n      of this memo.  This discussion should therefore\
    \ be considered only\n      an overview.  Implementors should consult the Router\
    \ Requirements\n      specification [3] and the the specifications of the routing\n\
    \      protocols they implement for details.\n      A router associates a TOS\
    \ value with each route in its forwarding\n      table.  The value can be any\
    \ of the possible values of the TOS\n      field in an IP datagram (including\
    \ those values whose semantics\n      are yet to be defined).  Any routes learned\
    \ using routing\n      protocols which support TOS are assigned appropriate TOS\
    \ value by\n      those protocols.  Routes learned using other routing protocols\
    \ are\n      always assigned the default TOS value (0000).  Static routes have\n\
    \      their TOS values assigned by the network manager.\n      When a router\
    \ wants to forward a packet, it first looks up the\n      destination address\
    \ in its forwarding table.  This yields a set of\n      candidate routes.  The\
    \ set may be empty (if the destination is\n      unreachable), or it may contain\
    \ one or more routes to the\n      destination.  If the set is not empty, the\
    \ TOS values of the\n      routes in the set are examined.  If the set contains\
    \ a route whose\n      TOS exactly matches the TOS field of the packet being forwarded\n\
    \      then that route is chosen.  If not but the set contains a route\n     \
    \ with the default TOS then that route is chosen.\n      If no route is found,\
    \ or if the the chosen route has an infinite\n      metric, the destination is\
    \ considered to be unreachable.  The\n      packet is discarded and an ICMP Destination\
    \ Unreachable is\n      returned to the source.  Normally, the Unreachable uses\
    \ code 0\n      (Network unreachable) or 1 (Host unreachable).  If, however, a\n\
    \      route to the destination exists which has a different TOS value\n     \
    \ and a non-infinite metric then code 11 (Network unreachable for\n      type\
    \ of service) or code 12 (Host unreachable for type of service)\n      must be\
    \ used instead.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - 'RFC 1349                    Type of Service                    July 1992

    '
- title: 8.  Other consequences of TOS
  contents:
  - "8.  Other consequences of TOS\n   The TOS field in a datagram primarily affects\
    \ the path chosen through\n   the network, but an implementor may choose to have\
    \ TOS also affect\n   other aspects of how the datagram is handled.  For example,\
    \ a host or\n   router might choose to give preferential queuing on network output\n\
    \   queues to datagrams which have requested that delay be minimized.\n   Similarly,\
    \ a router forced by overload to discard packets might\n   attempt to avoid discarding\
    \ packets that have requested that\n   reliability be maximized.  At least one\
    \ paper [14] has explored these\n   ideas in some detail, but little is known\
    \ about how well such special\n   handling would work in practice.\n   Additionally,\
    \ some Link Layer protocols have their own quality of\n   service mechanisms.\
    \  When a router or host transmits an IP packet, it\n   might request from the\
    \ Link Layer a quality of service as close as\n   possible to the one requested\
    \ in the TOS field in the IP header.\n   Long ago an attempt (RFC-795) was made\
    \ to codify how this might be\n   done, but that document describes Link Layer\
    \ protocols which have\n   since become obsolete and no more recent document on\
    \ the subject has\n   been written.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - 'RFC 1349                    Type of Service                    July 1992

    '
- title: APPENDIX A.  Updates to Other Specifications
  contents:
  - "APPENDIX A.  Updates to Other Specifications\n   While this memo is primarily\
    \ an update to the IP protocol\n   specification [11], it also peripherally affects\
    \ a number of other\n   specifications.  This appendix describes those peripheral\
    \ effects.\n   This information is included in an appendix rather than in the\
    \ main\n   body of the document because most if not all of these other\n   specifications\
    \ will be updated in the future.  As that happens, the\n   information included\
    \ in this appendix will become obsolete.\n   A.1  RFC-792 (ICMP)\n      RFC-792\
    \ [12] defines a set of codes indicating reasons why a\n      destination is unreachable.\
    \  This memo describes the use of two\n      additional codes:\n        11 --\
    \ network unreachable for type of service\n        12 -- host unreachable for\
    \ type of service\n      These codes were defined in RFC-1122 [1] but were not\
    \ included in\n      RFC-792.\n   A.2  RFC-1060 (Assigned Numbers)\n      RFC-1060\
    \ [15] describes the old interpretation of the TOS field\n      (as three independent\
    \ bits, with no way to specify that monetary\n      cost should be minimized).\
    \  Although it is likely obvious how the\n      values in RFC-1060 ought to be\
    \ interpreted in light of this memo,\n      the information from that RFC is reproduced\
    \ here.  The only actual\n      changes are for ICMP (to conform to Section 5.1\
    \ of this memo) and\n      NNTP:\n                        ----- Type-of-Service\
    \ Value -----\n         Protocol           TOS Value\n         TELNET (1)    \
    \     1000                 (minimize delay)\n         FTP\n           Control\
    \          1000                 (minimize delay)\n           Data (2)        \
    \ 0100                 (maximize throughput)\n         TFTP               1000\
    \                 (minimize delay)\n         SMTP (3)\n           Command phase\
    \    1000                 (minimize delay)\n           DATA phase       0100 \
    \                (maximize throughput)\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \                      ----- Type-of-Service Value -----\n         Protocol  \
    \         TOS Value\n         Domain Name Service\n           UDP Query      \
    \  1000                 (minimize delay)\n           TCP Query        0000\n \
    \          Zone Transfer    0100                 (maximize throughput)\n     \
    \    NNTP               0001                 (minimize monetary cost)\n      \
    \   ICMP\n           Errors           0000\n           Requests         0000 (4)\n\
    \           Responses        <same as request> (4)\n         Any IGP         \
    \   0010                 (maximize reliability)\n         EGP                0000\n\
    \         SNMP               0010                 (maximize reliability)\n   \
    \      BOOTP              0000\n         Notes:\n          (1) Includes all interactive\
    \ user protocols (e.g., rlogin).\n          (2) Includes all bulk data transfer\
    \ protocols (e.g., rcp).\n          (3) If the implementation does not support\
    \ changing the TOS\n              during the lifetime of the connection, then\
    \ the\n              recommended TOS on opening the connection is the default\n\
    \              TOS (0000).\n          (4) Although ICMP request messages are normally\
    \ sent with the\n              default TOS, there are sometimes good reasons why\
    \ they\n              would be sent with some other TOS value.  An ICMP response\n\
    \              always uses the same TOS value as was used in the\n           \
    \   corresponding ICMP request message.  See Section 5.1 of\n              this\
    \ memo.\n         An application may (at the request of the user) substitute 0001\n\
    \         (minimize monetary cost) for any of the above values.\n         This\
    \ appendix is expected to be obsoleted by the next revision\n         of the Assigned\
    \ Numbers document.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \ A.3  RFC-1122 and RFC-1123 (Host Requirements)\n      The use of the TOS field\
    \ by hosts is described in detail in\n      RFC-1122 [1] and RFC-1123 [2].  The\
    \ information provided there is\n      still correct, except that:\n       (1)\
    \ The TOS field is four bits wide rather than five bits wide.\n           The\
    \ requirements that refer to the TOS field should refer\n           only to the\
    \ four bits that make up the TOS field.\n       (2) An application may set bit\
    \ 6 of the TOS octet to a non-zero\n           value (but still must not set bit\
    \ 7 to a non-zero value).\n      These details will presumably be corrected in\
    \ the next revision of\n      the Host Requirements specification, at which time\
    \ this appendix\n      can be considered obsolete.\n   A.4  RFC-1195 (Integrated\
    \ IS-IS)\n      Integrated IS-IS (sometimes known as Dual IS-IS) has multiple\n\
    \      metrics for each route.  Which of the metrics is used to route a\n    \
    \  particular IP packet is determined by the TOS field in the packet.\n      This\
    \ is described in detail in section 3.5 of RFC-1195 [7].\n      The mapping from\
    \ the value of the TOS field to an appropriate\n      Integrated IS-IS metric\
    \ is described by a table in that section.\n      Although the specification in\
    \ this memo is intended to be\n      substantially compatible with Integrated\
    \ IS-IS, the extension of\n      the TOS field to four bits and the addition of\
    \ a TOS value\n      requesting \"minimize monetary cost\" require minor modifications\
    \ to\n      that table, as shown here:\n         The IP TOS octet is mapped onto\
    \ the four available metrics as\n         follows:\n         Bits 0-2 (Precedence):\
    \ (unchanged from RFC-1195)\n         Bits 3-6 (TOS):\n            0000    (all\
    \ normal)               Use default metric\n            1000    (minimize delay)\
    \           Use delay metric\n            0100    (maximize throughput)      Use\
    \ default metric\n            0010    (maximize reliability)     Use reliability\
    \ metric\n            0001    (minimize monetary cost)   Use cost metric\n   \
    \         other                              Use default metric\n         Bit\
    \ 7 (MBZ): This bit is ignored by Integrated IS-IS.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    It is expected that the next revision of the Integrated IS-IS\n      specification\
    \ will include this corrected table, at which time\n      this appendix can be\
    \ considered obsolete.\n   A.5  RFC-1247 (OSPF) and RFC-1248 (OSPF MIB)\n    \
    \  Although the specification in this memo is intended to be\n      substantially\
    \ compatible with OSPF, the extension of the TOS field\n      to four bits requires\
    \ minor modifications to the section that\n      describes the encoding of TOS\
    \ values in Link State Advertisements,\n      described in section 12.3 of RFC-1247\
    \ [10].  The encoding is\n      summarized in Table 17 of that memo; what follows\
    \ is an updated\n      version of table 17.  The numbers in the first column are\
    \ decimal\n      integers, and the numbers in the second column are binary TOS\n\
    \      values:\n                OSPF encoding   TOS\n                _____________________________________________\n\
    \                0               0000   normal service\n                2    \
    \           0001   minimize monetary cost\n                4               0010\
    \   maximize reliability\n                6               0011\n             \
    \   8               0100   maximize throughput\n                10           \
    \   0101\n                12              0110\n                14           \
    \   0111\n                16              1000   minimize delay\n            \
    \    18              1001\n                20              1010\n            \
    \    22              1011\n                24              1100\n            \
    \    26              1101\n                28              1110\n            \
    \    30              1111\n      The OSPF MIB, described in RFC-1248 [5], is entirely\
    \ consistent\n      with this memo except for the textual comment which describes\
    \ the\n      mapping of the old TOS flag bits into TOSType values.  TOSType\n\
    \      values use the same encoding of TOS values as OSPF's Link State\n     \
    \ Advertisements do, so the above table also describes the mapping\n      between\
    \ TOSType values (the first column) and TOS field values\n      (the second column).\n\
    \      If RFC-1247 and RFC-1248 are revised in the future, it is expected\n  \
    \    that this information will be incorporated into the revised\n      versions.\
    \  At that time, this appendix may be considered obsolete.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - 'RFC 1349                    Type of Service                    July 1992

    '
- title: APPENDIX B.  Rationale
  contents:
  - "APPENDIX B.  Rationale\n   The main body of this memo has described the details\
    \ of how TOS\n   facility works.  This appendix is for those who wonder why it\
    \ works\n   that way.\n   Much of what is in this document can be explained by\
    \ the simple fact\n   that the goal of this document is to provide a clear and\
    \ complete\n   specification of the existing TOS facility rather than to design\
    \ from\n   scratch a new quality of service mechanism for IP.  While this memo\n\
    \   does amend the facility in some small and carefully considered ways\n   discussed\
    \ below, the desirability of compatibility with existing\n   specifications and\
    \ uses of the TOS facility [1,2,7,10,11] was never\n   in doubt.  This goal of\
    \ backwards compatibility determined the broad\n   outlines and many of the details\
    \ of this specification.\n   Much of the rest of this specification was determined\
    \ by two\n   additional goals, which were described more fully in Section 2. \
    \ The\n   first was that hosts should never be penalized for using the TOS\n \
    \  facility, since that would likely ensure that it would never be\n   widely\
    \ deployed.  The second was that the specification should make\n   it easy, or\
    \ at least possible, to define and deploy new types of\n   service in the future.\n\
    \   The three goals above did not eliminate all need for engineering\n   choices,\
    \ however, and in a few cases the goals proved to be in\n   conflict with each\
    \ other.  The remainder of this appendix discusses\n   the rationale behind some\
    \ of these engineering choices.\n   B.1  The Minimize Monetary Cost TOS Value\n\
    \      Because the Internet is becoming increasingly commercialized, a\n     \
    \ number of participants in the IETF's Router Requirements Working\n      Group\
    \ felt it would be important to have a TOS value which would\n      allow a user\
    \ to declare that monetary cost was more important than\n      other qualities\
    \ of the service.\n      There was considerable debate over what exactly this\
    \ value should\n      mean.  Some felt, for example, that the TOS value should\
    \ mean\n      \"must not cost money\".  This was rejected for several reasons.\n\
    \      Because it would request a particular level of service (cost = 0)\n   \
    \   rather than merely requesting that some service attribute be\n      minimized\
    \ or maximized, it would not only philosophically at odds\n      with the other\
    \ TOS values but would require special code in both\n      hosts and routers.\
    \  Also, it would not be helpful to users who\n      want their packets to travel\
    \ via the least-cost path but can\n      accept some level of cost when necessary.\
    \  Finally, since whether\n      any particular routing domain considers the TOS\
    \ field when routing\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    is a choice made by the network manager, a user requiring a free\n      path\
    \ might not get one if the packet has to pass through a routing\n      domain\
    \ that does not consider TOS in its routing decisions.\n      Some proposed a\
    \ slight variant: a TOS value which would mean \"I am\n      willing to pay money\
    \ to have this packet delivered\".  This\n      proposal suffers most of the same\
    \ shortcomings as the previous one\n      and turns out to have an additional\
    \ interesting quirk: because of\n      the algorithms specified in Section 7.2,\
    \ any packet which used\n      this TOS value would prefer links that cost money\
    \ over equally\n      good free links.  Thus, such a TOS value would almost be\n\
    \      equivalent to a \"maximize monetary cost\" value!\n      It seems likely\
    \ that in the future users may need some mechanism\n      to express the maximum\
    \ amount they are willing to pay to have a\n      packet delivered.  However,\
    \ an IP option would be a more\n      appropriate mechanism, since there are precedents\
    \ for having IP\n      options that all routers are required to honor, and an\
    \ IP option\n      could include parameters such as the maximum amount the user\
    \ was\n      willing to pay.  Thus, the TOS value defined in this memo merely\n\
    \      requests that the network \"minimize monetary cost\".\n   B.2  The Specification\
    \ of the TOS Field\n      There were four goals that guided the decision to have\
    \ a four bit\n      TOS field and the specification of that field's values:\n\
    \       (1) To define a new type of service requesting that the network\n    \
    \       \"minimize monetary cost\"\n       (2) To remain as compatible as possible\
    \ with existing\n           specifications and uses of the TOS facility\n    \
    \   (3) To allow for the definition and deployment of new types of\n         \
    \  service in the future\n       (4) To permanently fix the size of the TOS field\n\
    \      The last goal may seem surprising, but turns out to be necessary\n    \
    \  for routing to work correctly when new types of service are\n      deployed.\
    \  If routers have different ideas about the size of the\n      TOS field they\
    \ make inconsistent decisions that may lead to\n      routing loops.\n      At\
    \ first glance goals (3) and (4) seem to be pretty much mutually\n      exclusive.\
    \  The IP header currently has only three unused bits, so\n      at most three\
    \ new type of service bits could be defined without\n      resorting to the impractical\
    \ step of changing the IP header\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    format.  Since one of them would need to be allocated to meet goal\n    \
    \  (1), at most two bits could be reserved for new or experimental\n      types\
    \ of service.  Not only is it questionable whether two would\n      be enough,\
    \ but it is improbable that the IETF and IAB would allow\n      all of the currently\
    \ unused bits to be permanently reserved for\n      types of service which might\
    \ or might or might not ever be\n      defined.\n      However, some (if not most\
    \ of) the possible combinations of the\n      individual bits would not be useful.\
    \  Clearly, setting all of the\n      bits would be equivalent to setting none\
    \ of the bits, since\n      setting all of the bits would indicate that none of\
    \ the types of\n      optimization was any more important than any of the others.\n\
    \      Although one could perhaps assign reasonable semantics to most\n      pairs\
    \ of bits, it is unclear that the range of network service\n      provided by\
    \ various paths could usefully be subdivided in so fine\n      a manner.  If some\
    \ of these non-useful combinations of bits could\n      be assigned to new types\
    \ of service then it would be possible to\n      meet goal (3) and goal (4) without\
    \ having to use up all of the\n      remaining reserved bits in the IP header.\
    \  The obvious way to do\n      that was to change the interpretation of TOS values\
    \ so that they\n      were integers rather than independently settable bits.\n\
    \      The integers were chosen to be compatible with the bit definitions\n  \
    \    found in RFC-791.  Thus, for example, setting the TOS field to\n      1000\
    \ (minimize delay) sets bit 3 of the Type of Service octet; bit\n      3 is defined\
    \ as the Low Delay bit in RFC-791.  This memo only\n      defines values which\
    \ correspond to setting a single one of the\n      RFC-791 bits, since setting\
    \ multiple TOS bits does not seem to be\n      a common practice.  According to\
    \ [15], none of the common TCP/IP\n      applications currently set multiple TOS\
    \ bits.  However, TOS values\n      corresponding to particular combinations of\
    \ the RFC-791 bits could\n      be defined if and when they are determined to\
    \ be useful.\n      The new TOS value for \"minimize monetary cost\" needed to\
    \ be one\n      which would not be too terribly misconstrued by preexisting\n\
    \      implementations.  This seemed to imply that the value should be\n     \
    \ one which left all of the RFC-791 bits clear.  That would require\n      expanding\
    \ the TOS field, but would allow old implementations to\n      treat packets which\
    \ request minimization of monetary cost (TOS\n      0001) as if they had requested\
    \ the default TOS.  This is not a\n      perfect solution since (as described\
    \ above) changing the size of\n      the TOS field could cause routing loops if\
    \ some routers were to\n      route based on a three bit TOS field and others\
    \ were to route\n      based on a four bit TOS field.  Fortunately, this should\
    \ not be\n      much of a problem in practice because routers which route based\
    \ on\n      a three bit TOS field are very rare as this is being written and\n\
    \      will only become more so once this specification is published.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    Because of those considerations, and also in order to allow a\n      reasonable\
    \ number of TOS values for future definition, it seemed\n      desirable to expand\
    \ the TOS field.  That left the question of how\n      much to expand it.  Expanding\
    \ it to five bits would allow\n      considerable future expansion (27 new TOS\
    \ values) and would be\n      consistent with Host Requirements, but would reduce\
    \ to one the\n      number of reserved bits in the IP header.  Expanding the TOS\
    \ field\n      to four bits would restrict future expansion to more modest levels\n\
    \      (11 new TOS values), but would leave an additional IP header bit\n    \
    \  free.  The IETF's Router Requirements Working Group concluded that\n      a\
    \ four bits wide TOS field allow enough values for future use and\n      that\
    \ consistency with Host Requirements was inadequate\n      justification for unnecessarily\
    \ increasing the size of the TOS\n      field.\n   B.3  The Choice of Weak TOS\
    \ Routing\n      \"Ruminations on the Next Hop\" [4] describes three alternative\
    \ ways\n      of routing based on the TOS field.  Briefly, they are:\n       (1)\
    \ Strong TOS --\n           a route may be used only if its TOS exactly matches\
    \ the TOS\n           in the datagram being routed.  If there is no route with\
    \ the\n           requested TOS, the packet is discarded.\n       (2) Weak TOS\
    \ --\n           like Strong TOS, except that a route with the default TOS\n \
    \          (0000) is used if there is no route that has the requested\n      \
    \     TOS.  If there is no route with either the requested TOS or\n          \
    \ the default TOS, the packet is discarded.\n       (3) Very Weak TOS --\n   \
    \        like Weak TOS, except that a route with the numerically\n           smallest\
    \ TOS is used if there is no route that has either the\n           requested TOS\
    \ or the default TOS.\n      This specification has adopted Weak TOS.\n      Strong\
    \ TOS was quickly rejected.  Because it requires that each\n      router a packet\
    \ traverses have a route with the requested TOS,\n      packets which requested\
    \ non-zero TOS values would have (at least\n      until the TOS facility becomes\
    \ widely used) a high probability of\n      being discarded as undeliverable.\
    \  This violates the principle\n      (described in Section 2) that hosts should\
    \ not be penalized for\n      choosing non-zero TOS values.\n      The choice\
    \ between Weak TOS and Very Weak TOS was not as\n      straightforward.  Weak\
    \ TOS was chosen because it is slightly\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    simpler to implement and because it is consistent with the OSPF\n      and\
    \ Integrated IS-IS specifications.  In addition, many dislike\n      Very Weak\
    \ TOS because its algorithm for choosing a route when none\n      of the available\
    \ routes have either the requested or the default\n      TOS cannot be justified\
    \ by intuition (there is no reason to\n      believe that having a numerically\
    \ smaller TOS makes a route\n      better).  Since a router would need to understand\
    \ the semantics of\n      all of the TOS values to make a more intelligent choice,\
    \ there\n      seems to be no reasonable way to fix this particular deficiency\
    \ of\n      Very Weak TOS.\n      In practice it is expected that the choice between\
    \ Weak TOS and\n      Very Weak TOS will make little practical difference, since\
    \ (except\n      where the network manager has intentionally set things up\n \
    \     otherwise) there will be a route with the default TOS to any\n      destination\
    \ for which there is a route with any other TOS.\n   B.4  The Retention of Longest\
    \ Match Routing\n      An interesting issue is how early in the route choice process\
    \ TOS\n      should be considered.  There seem to be two obvious possibilities:\n\
    \       (1) Find the set of routes that best match the destination\n         \
    \  address of the packet.  From among those, choose the route\n           which\
    \ best matches the requested TOS.\n       (2) Find the set of routes that best\
    \ match the requested TOS.\n           From among those, choose the route which\
    \ best matches the\n           destination address of the packet.\n      The two\
    \ approaches are believed to support an identical set of\n      routing policies.\
    \  Which of the two allows the simpler\n      configuration and minimizes the\
    \ amount of routing information that\n      needs to be passed around seems to\
    \ depend on the topology, though\n      some believe that the second option has\
    \ a slight edge in this\n      regard.\n      Under the first option, if the network\
    \ manager neglects some\n      pieces of the configuration the likely consequence\
    \ is that some\n      packets which would benefit from TOS-specific routes will\
    \ be\n      routed as if they had requested the default TOS.  Under the second\n\
    \      option, however, a network manager can easily (accidently)\n      configure\
    \ things in such a way that packets which request a\n      certain TOS and should\
    \ be delivered locally will instead follow a\n      default route for that TOS\
    \ and be dumped into the Internet.  Thus,\n      the first option would seem to\
    \ have a slight edge with regard to\n      robustness in the face of errors by\
    \ the network manager.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    It has been also been suggested that the first option provides the\n    \
    \  additional benefit of allowing loop-free routing in routing\n      domains\
    \ which contain both routers that consider TOS in their\n      routing decisions\
    \ and routers that do not.  Whether that is true\n      in all cases is unknown.\
    \  It is certainly the case, however, that\n      under the second option it would\
    \ not work to mix routers that\n      consider TOS and routers which do not in\
    \ the same routing domain.\n      All in all, there were no truly compelling arguments\
    \ for choosing\n      one way or the other, but it was nontheless necessary to\
    \ make a\n      choice: if different routers were to make the choice differently,\n\
    \      chaos (in the form of routing loops) would result.  The mechanisms\n  \
    \    specified in this memo reflect the first option because that will\n     \
    \ probably be more intuitive to most network managers.  Internet\n      routing\
    \ has traditionally chosen the route which best matches the\n      destination\
    \ address, with other mechanisms serving merely as tie-\n      breakers.  The\
    \ first option is consistent with that tradition.\n   B.5  The Use of Destination\
    \ Unreachable\n      Perhaps the most contentious and least defensible part of\
    \ this\n      specification is that a packet can be discarded because the\n  \
    \    destination is considered to be unreachable even though a packet\n      to\
    \ the same destination but requesting a different TOS would have\n      been deliverable.\
    \  This would seem to fall perilously close to\n      violating the principle\
    \ that hosts should never be penalized for\n      requesting non-default TOS values\
    \ in packets they originate.\n      This can happen in only three, somewhat unusual,\
    \ cases:\n       (1) There is a route to the packet's destination which has the\n\
    \           TOS value requested in the packet, but the route has an\n        \
    \   infinite metric.\n       (2) The only routes to the packet's destination have\
    \ TOS values\n           other than the one requested in the packet.  One of them\
    \ has\n           the default TOS, but it has an infinite metric.\n       (3)\
    \ The only routes to the packet's destination have TOS values\n           other\
    \ than the one requested in the packet.  None of them\n           have the default\
    \ TOS.\n      It is commonly accepted that a router which has a default route\n\
    \      should nonetheless discard a packet if the router has a more\n      specific\
    \ route to the destination in its forwarding table but that\n      route has an\
    \ infinite metric.  The first two cases seem to be\n      analogous to that rule.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \    In addition, it is worth noting that, except perhaps during brief\n     \
    \ transients resulting from topology changes, routes with infinite\n      metrics\
    \ occur only as the result of deliberate action (or serious\n      error) on the\
    \ part of the network manager.  Thus, packets are\n      unlikely to be discarded\
    \ unless the network manager has taken\n      deliberate action to cause them\
    \ to be.  Some people believe that\n      this is an important feature of the\
    \ specification, allowing the\n      network to (for example) keep packets which\
    \ have requested that\n      cost be minimized off of a link that is so expensive\
    \ that the\n      network manager feels confident that the users would want their\n\
    \      packets to be dropped.  Others (including the author of this memo)\n  \
    \    believe that this \"feature\" will prove not to be useful, and that\n   \
    \   other mechanisms may be required for access controls on links, but\n     \
    \ couldn't justify changing this specification in the ways necessary\n      to\
    \ eliminate the \"feature\".\n      Case (3) above is more problematic.  It could\
    \ have been avoided by\n      using Very Weak TOS, but that idea was rejected\
    \ for the reasons\n      discussed in Appendix B.3.  Some suggested that case\
    \ (3) could be\n      fixed by relaxing longest match routing (described in Appendix\n\
    \      B.4), but that idea was rejected because it would add complexity\n    \
    \  to routers without necessarily making their routing choices\n      particularly\
    \ more intuitive.  It is also worth noting that this is\n      another case that\
    \ a network manager has to try rather hard to\n      create: since OSPF and Integrated\
    \ IS-IS both enforce the\n      constraint that there must be a route with the\
    \ default TOS to any\n      destination for which there is a route with a non-zero\
    \ TOS, a\n      network manager would have to await the development of a new\n\
    \      routing protocol or create the problem with static routes.  The\n     \
    \ eventual conclusion was that any fix to case (3) was worse than\n      the problem.\n"
- title: APPENDIX C.  Limitations of the TOS Mechanism
  contents:
  - "APPENDIX C.  Limitations of the TOS Mechanism\n   It is important to note that\
    \ the TOS facility has some limitations.\n   Some are consequences of engineering\
    \ choices made in this\n   specification.  Others, referred to as \"inherent limitations\"\
    \ below,\n   could probably not have been avoided without either replacing the\
    \ TOS\n   facility defined in RFC-791 or accepting that things wouldn't work\n\
    \   right until all routers in the Internet supported the TOS facility.\n   C.1\
    \  Inherent Limitations\n      The most important of the inherent limitations\
    \ is that the TOS\n      facility is strictly an advisory mechanism.  It is not\
    \ an\n      appropriate mechanism for requesting service guarantees.  There\n\
    \      are two reasons why this is so:\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \     (1) Not all networks will consider the value of the TOS field\n        \
    \   when deciding how to handle and route packets.  Partly this\n           is\
    \ a transition issue: there will be a (probably lengthy)\n           period when\
    \ some networks will use equipment that predates\n           this specification.\
    \  Even long term, however, many networks\n           will not be able to provide\
    \ better service by considering the\n           value of the TOS field.  For example,\
    \ the best path through a\n           network composed of a homogeneous collection\
    \ of\n           interconnected LANs is probably the same for any possible TOS\n\
    \           value.  Inside such a network, it would make little sense to\n   \
    \        require routers and routing protocols to do the extra work\n        \
    \   needed to consider the value of the TOS field when forwarding\n          \
    \ packets.\n       (2) The TOS mechanism is not powerful enough to allow an\n\
    \           application to quantify the level of service it desires.  For\n  \
    \         example, an application may use the TOS field to request that\n    \
    \       the network choose a path which maximizes throughput, but\n          \
    \ cannot use that mechanism to say that it needs or wants a\n           particular\
    \ number of kilobytes or megabytes per second.\n           Because the network\
    \ cannot know what the application\n           requires, it would be inappropriate\
    \ for the network to decide\n           to discard a packet which requested maximal\
    \ throughput\n           because no \"high throughput\" path was available.\n\
    \      The inability to provide resource guarantees is a serious drawback\n  \
    \    for certain kinds of network applications.  For example, a system\n     \
    \ using packetized voice simply creates network congestion when the\n      available\
    \ bandwidth is inadequate to deliver intelligible speech.\n      Likewise, the\
    \ network oughtn't even bother to deliver a voice\n      packet that has suffered\
    \ more delay in the network than the\n      application can tolerate.  Unfortunately,\
    \ resource guarantees are\n      problematic in connectionless networks.  Internet\
    \ researchers are\n      actively studying this problem, and are optimistic that\
    \ they will\n      be able to invent ways in which the Internet Architecture can\n\
    \      evolve to support resource guarantees while preserving the\n      advantages\
    \ of connectionless networking.\n   C.2  Limitations of this Specification\n \
    \     There are a couple of additional limitations of the TOS facility\n     \
    \ which are not inherent limitations but instead are consequences of\n      engineering\
    \ choices made in this specification:\n       (1) Routing is not really optimal\
    \ for some TOS values.  This is\n           because optimal routing for those\
    \ TOS values would require\n           that routing protocols be cognizant of\
    \ the semantics of the\n           TOS values and use special algorithms to compute\
    \ routes for\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - "RFC 1349                    Type of Service                    July 1992\n  \
    \         them.  For example, routing protocols traditionally compute\n      \
    \     the metric for a path by summing the costs of the individual\n         \
    \  links that make up the path.  However, to maximize\n           reliability,\
    \ a routing protocol would instead have to compute\n           a metric which\
    \ was the product of the probabilities of\n           successful delivery over\
    \ each of the individual links in the\n           path.  While this limitation\
    \ is in some sense a limitation of\n           current routing protocols rather\
    \ than of this specification,\n           this specification contributes to the\
    \ problem by specifying\n           that there are a number of legal TOS values\
    \ that have no\n           currently defined semantics.\n       (2) This specification\
    \ assumes that network managers will do \"the\n           right thing\".  If a\
    \ routing domain uses TOS, the network\n           manager must configure the\
    \ routers in such a way that a\n           reasonable path is chosen for each\
    \ TOS.  While this ought not\n           to be terribly difficult, a network manager\
    \ could accidently\n           or intentionally violate our rule that using the\
    \ TOS facility\n           should provide service at least as good as not using\
    \ it.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - 'RFC 1349                    Type of Service                    July 1992

    '
- title: References
  contents:
  - "References\n  [1]   Internet Engineering Task Force (R. Braden, Editor),\n  \
    \      \"Requirements for Internet Hosts -- Communication Layers\", RFC\n    \
    \    1122, USC/Information Sciences Institute, October 1989.\n  [2]   Internet\
    \ Engineering Task Force (R. Braden, Editor),\n        \"Requirements for Internet\
    \ Hosts -- Application and Support\",\n        RFC 1123, USC/Information Sciences\
    \ Institute, October 1989.\n  [3]   Almquist, P., \"Requirements for IP Routers\"\
    , Work in progress.\n  [4]   Almquist, P., \"Ruminations on the Next Hop\", Work\
    \ in progress.\n  [5]   Baker, F. and R. Coltun, \"OSPF Version 2 Management Information\n\
    \        Base\", RFC 1248, ACC, Computer Science Center, August 1991.\n  [6] \
    \  Braden, R. and J. Postel, \"Requirements for Internet Gateways\",\n       \
    \ RFC 1009, USC/Information Sciences Institute, June 1987.\n  [7]   Callon, R.,\
    \ \"Use of OSI IS-IS for Routing in TCP/IP and Dual\n        Environments\", RFC\
    \ 1195, Digital Equipment Corporation, December\n        1990.\n  [8]   Deering,\
    \ S., \"ICMP Router Discovery Messages\", RFC 1256, Xerox\n        PARC, September\
    \ 1991.\n  [9]   Mogul, J. and J. Postel, \"Internet Standard Subnetting\n   \
    \     Procedure\", RFC 950, USC/Information Sciences Institute, August\n     \
    \   1985.\n [10]   Moy, J., \"OSPF Version 2\", RFC 1247, Proteon, Inc., July\
    \ 1991.\n [11]   Postel, J., \"Internet Protocol\", RFC 791, DARPA, September\
    \ 1981.\n [12]   Postel, J., \"Internet Control Message Protocol\", RFC 792, DARPA,\n\
    \        September 1981.\n [13]   Postel, J., \"Transmission Control Protocol\"\
    , RFC 793, DARPA,\n        September 1981.\n [14]   Prue, W. and J. Postel, \"\
    A Queuing Algorithm to Provide Type-\n        of-Service for IP Links\", RFC 1046,\
    \ USC/Information Sciences\n        Institute, February 1988.\n [15]   Reynolds,\
    \ J. and J. Postel, \"Assigned Numbers\", RFC 1060,\n        USC/Information Sciences\
    \ Institute, March 1990.\n"
- title: RFC 1349                    Type of Service                    July 1992
  contents:
  - 'RFC 1349                    Type of Service                    July 1992

    '
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   Some of the ideas presented in this memo are based on discussions\n\
    \   held by the IETF's Router Requirements Working Group.  Much of the\n   specification\
    \ of the treatment of Type of Service by hosts is merely\n   a restatement of\
    \ the ideas of the IETF's former Host Requirements\n   Working Group, as captured\
    \ in RFC-1122 and RFC-1123.  The author is\n   indebted to John Moy and Ross Callon\
    \ for their assistance and\n   cooperation in achieving consistency among the\
    \ OSPF specification,\n   the Integrated IS-IS specification, and this memo.\n\
    \   This memo has been substantially improved as the result of thoughtful\n  \
    \ comments from a number of reviewers, including Dave Borman, Bob\n   Braden,\
    \ Ross Callon, Vint Cerf, Noel Chiappa, Deborah Estrin, Phill\n   Gross, Bob Hinden,\
    \ Steve Huston, Jon Postel, Greg Vaudreuil, John\n   Wobus, and the Router Requirements\
    \ Working Group.\n   The initial work on this memo was done while its author was\
    \ an\n   employee of BARRNet.  Their support is gratefully acknowledged.\n"
- title: Security Considerations
  contents:
  - "Security Considerations\n   This memo does not explicitly discuss security issues.\
    \  The author\n   does not believe that the specifications in this memo either\
    \ weaken\n   or enhance the security of the IP Protocol or of the other protocols\n\
    \   mentioned herein.\n"
- title: Author's Address
  contents:
  - "Author's Address\n   Philip Almquist\n   214 Cole Street, Suite 2\n   San Francisco,\
    \ CA 94117-1916\n   Phone: 415-752-2427\n   Email: almquist@Jessica.Stanford.EDU\n"
