- title: __initial_text__
  contents:
  - '                   Local Network Protection for IPv6

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The IETF Trust (2007).\n"
- title: Abstract
  contents:
  - "Abstract\n   Although there are many perceived benefits to Network Address\n\
    \   Translation (NAT), its primary benefit of \"amplifying\" available\n   address\
    \ space is not needed in IPv6.  In addition to NAT's many\n   serious disadvantages,\
    \ there is a perception that other benefits\n   exist, such as a variety of management\
    \ and security attributes that\n   could be useful for an Internet Protocol site.\
    \  IPv6 was designed\n   with the intention of making NAT unnecessary, and this\
    \ document shows\n   how Local Network Protection (LNP) using IPv6 can provide\
    \ the same or\n   more benefits without the need for address translation.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  3\n   2.  Perceived Benefits of NAT and Its Impact on IPv4 . .\
    \ . . . . .  6\n     2.1.  Simple Gateway between Internet and Private Network\
    \  . . .  6\n     2.2.  Simple Security Due to Stateful Filter Implementation\
    \  . .  6\n     2.3.  User/Application Tracking  . . . . . . . . . . . . . . .\
    \ .  7\n     2.4.  Privacy and Topology Hiding  . . . . . . . . . . . . . . .\
    \  8\n     2.5.  Independent Control of Addressing in a Private Network . .  9\n\
    \     2.6.  Global Address Pool Conservation . . . . . . . . . . . . .  9\n  \
    \   2.7.  Multihoming and Renumbering with NAT . . . . . . . . . . . 10\n   3.\
    \  Description of the IPv6 Tools  . . . . . . . . . . . . . . . . 11\n     3.1.\
    \  Privacy Addresses (RFC 3041) . . . . . . . . . . . . . . . 11\n     3.2.  Unique\
    \ Local Addresses . . . . . . . . . . . . . . . . . . 12\n     3.3.  DHCPv6 Prefix\
    \ Delegation . . . . . . . . . . . . . . . . . 13\n     3.4.  Untraceable IPv6\
    \ Addresses . . . . . . . . . . . . . . . . 13\n   4.  Using IPv6 Technology to\
    \ Provide the Market Perceived\n       Benefits of NAT  . . . . . . . . . . .\
    \ . . . . . . . . . . . . 14\n     4.1.  Simple Gateway between Internet and Internal\
    \ Network . . . 14\n     4.2.  IPv6 and Simple Security . . . . . . . . . . .\
    \ . . . . . . 15\n     4.3.  User/Application Tracking  . . . . . . . . . . .\
    \ . . . . . 17\n     4.4.  Privacy and Topology Hiding Using IPv6 . . . . . .\
    \ . . . . 17\n     4.5.  Independent Control of Addressing in a Private Network\
    \ . . 20\n     4.6.  Global Address Pool Conservation . . . . . . . . . . . .\
    \ . 21\n     4.7.  Multihoming and Renumbering  . . . . . . . . . . . . . . .\
    \ 21\n   5.  Case Studies . . . . . . . . . . . . . . . . . . . . . . . . . 22\n\
    \     5.1.  Medium/Large Private Networks  . . . . . . . . . . . . . . 22\n  \
    \   5.2.  Small Private Networks . . . . . . . . . . . . . . . . . . 24\n    \
    \ 5.3.  Single User Connection . . . . . . . . . . . . . . . . . . 25\n     5.4.\
    \  ISP/Carrier Customer Networks  . . . . . . . . . . . . . . 26\n   6.  IPv6\
    \ Gap Analysis  . . . . . . . . . . . . . . . . . . . . . . 27\n     6.1.  Simple\
    \ Security  . . . . . . . . . . . . . . . . . . . . . 27\n     6.2.  Subnet Topology\
    \ Masking  . . . . . . . . . . . . . . . . . 28\n     6.3.  Minimal Traceability\
    \ of Privacy Addresses  . . . . . . . . 28\n     6.4.  Site Multihoming . . .\
    \ . . . . . . . . . . . . . . . . . . 28\n   7.  Security Considerations  . .\
    \ . . . . . . . . . . . . . . . . . 29\n   8.  Conclusion . . . . . . . . . .\
    \ . . . . . . . . . . . . . . . . 29\n   9.  Acknowledgements . . . . . . . .\
    \ . . . . . . . . . . . . . . . 29\n   10. Informative References . . . . . .\
    \ . . . . . . . . . . . . . . 30\n   Appendix A.  Additional Benefits Due to Native\
    \ IPv6 and\n                Universal Unique Addressing . . . . . . . . . . .\
    \ . . 32\n     A.1.  Universal Any-to-Any Connectivity  . . . . . . . . . . .\
    \ . 32\n     A.2.  Auto-Configuration . . . . . . . . . . . . . . . . . . . .\
    \ 32\n     A.3.  Native Multicast Services  . . . . . . . . . . . . . . . . 33\n\
    \     A.4.  Increased Security Protection  . . . . . . . . . . . . . . 33\n  \
    \   A.5.  Mobility . . . . . . . . . . . . . . . . . . . . . . . . . 34\n    \
    \ A.6.  Merging Networks . . . . . . . . . . . . . . . . . . . . . 34\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   There have been periodic claims that IPv6 will require a\
    \ Network\n   Address Translation (NAT), because network administrators use NAT\
    \ to\n   meet a variety of needs when using IPv4 and those needs will also\n \
    \  have to be met when using IPv6.  Although there are many perceived\n   benefits\
    \ to NAT, its primary benefit of \"amplifying\" available\n   address space is\
    \ not needed in IPv6.  The serious disadvantages and\n   impact on applications\
    \ by ambiguous address space and Network Address\n   Translation [1] [5] have\
    \ been well documented [4] [6], so there will\n   not be much additional discussion\
    \ here.  However, given its wide\n   deployment NAT undoubtedly has some perceived\
    \ benefits, though the\n   bulk of those using it have not evaluated the technical\
    \ trade-offs.\n   Indeed, it is often claimed that some connectivity and security\n\
    \   concerns can only be solved by using a NAT device, without any\n   mention\
    \ of the negative impacts on applications.  This is amplified\n   through the\
    \ widespread sharing of vendor best practice documents and\n   sample configurations\
    \ that do not differentiate the translation\n   function of address expansion\
    \ from the state function of limiting\n   connectivity.\n   This document describes\
    \ the uses of a NAT device in an IPv4\n   environment that are regularly cited\
    \ as 'solutions' for perceived\n   problems.  It then shows how the goals of the\
    \ network manager can be\n   met in an IPv6 network without using the header modification\
    \ feature\n   of NAT.  It should be noted that this document is 'informational',\
    \ as\n   it discusses approaches that will work to accomplish the goals of the\n\
    \   network manager.  It is specifically not a Best Current Practice\n   (BCP)\
    \ that is recommending any one approach or a manual on how to\n   configure a\
    \ network.\n   As far as security and privacy are concerned, this document considers\n\
    \   how to mitigate a number of threats.  Some are obviously external,\n   such\
    \ as having a hacker or a worm-infected machine outside trying to\n   penetrate\
    \ and attack the local network.  Some are local, such as a\n   disgruntled employee\
    \ disrupting business operations or the\n   unintentional negligence of a user\
    \ downloading some malware, which\n   then proceeds to attack from within.  Some\
    \ may be inherent in the\n   device hardware (\"embedded\"), such as having some\
    \ firmware in a\n   domestic appliance \"call home\" to its manufacturer without\
    \ the user's\n   consent.\n   Another consideration discussed is the view that\
    \ NAT can be used to\n   fulfill the goals of a security policy.  On the one hand,\
    \ NAT does\n   satisfy some policy goals, such as topology hiding; at the same\
    \ time\n   it defeats others, such as the ability to produce an end-to-end audit\n\
    \   trail at network level.  That said, there are artifacts of NAT\n   devices\
    \ that do provide some value.\n   1.  The need to establish state before anything\
    \ gets through from\n       outside to inside solves one set of problems.\n  \
    \ 2.  The expiration of state to stop receiving any packets when\n       finished\
    \ with a flow solves a set of problems.\n   3.  The ability for nodes to appear\
    \ to be attached at the edge of the\n       network solves a set of problems.\n\
    \   4.  The ability to have addresses that are not publicly routed solves\n  \
    \     yet another set (mostly changes where the state is and scale\n       requirements\
    \ for the first one).\n   This document describes several techniques that may\
    \ be combined in an\n   IPv6 deployment to protect the integrity of its network\
    \ architecture.\n   It will focus on the 'how to accomplish a goal' perspective,\
    \ leaving\n   most of the 'why that goal is useful' perspective for other\n  \
    \ documents.  These techniques, known collectively as Local Network\n   Protection\
    \ (LNP), retain the concept of a well-defined boundary\n   between \"inside\"\
    \ and \"outside\" the private network, while allowing\n   firewalling, topology\
    \ hiding, and privacy.  LNP will achieve these\n   security goals without address\
    \ translation while regaining the\n   ability for arbitrary any-to-any connectivity.\n\
    \   IPv6 Local Network Protection can be summarized in the following\n   table.\
    \  It presents the marketed benefits of IPv4+NAT with a cross-\n   reference of\
    \ how those are delivered in both the IPv4 and IPv6\n   environments.\n      \
    \    Goal                 IPv4                    IPv6\n   +------------------+-----------------------+-----------------------+\n\
    \   | Simple Gateway   |  DHCP - single        |  DHCP-PD - arbitrary  |\n   |\
    \ as default router|  address upstream     |  length customer      |\n   | and\
    \ address pool |  DHCP - limited       |  prefix upstream      |\n   | manager\
    \          |  number of individual |  SLAAC via RA         |\n   |           \
    \       |  devices downstream   |  downstream           |\n   |              \
    \    |  see Section 2.1      |  see Section 4.1      |\n   +------------------|-----------------------|-----------------------+\n\
    \   |  Simple Security |  Filtering side       |  Explicit Context     |\n   |\
    \                  |  effect due to lack   |  Based Access Control |\n   |   \
    \               |  of translation state |  (Reflexive ACL)      |\n   |      \
    \            |  see Section 2.2      |  see Section 4.2      |\n   +------------------|-----------------------|-----------------------+\n\
    \   |  Local Usage     |  NAT state table      |  Address uniqueness   |\n   |\
    \  Tracking        |                       |                       |\n   |   \
    \               |  see Section 2.3      |  see Section 4.3      |\n   +------------------|-----------------------|-----------------------+\n\
    \   |  End-System      |  NAT transforms       |  Temporary use        |\n   |\
    \  Privacy         |  device ID bits in    |  privacy addresses    |\n   |   \
    \               |  the address          |                       |\n   |      \
    \            |  see Section 2.4      |  see Section 4.4      |\n   +------------------|-----------------------|-----------------------+\n\
    \   |  Topology Hiding |  NAT transforms       |  Untraceable addresses|\n   |\
    \                  |  subnet bits in the   |  using IGP host routes|\n   |   \
    \               |  address              |  /or MIPv6 tunnels    |\n   |      \
    \            |  see Section 2.4      |  see Section 4.4      |\n   +------------------|-----------------------|-----------------------+\n\
    \   |  Addressing      |  RFC 1918             |  RFC 3177 & 4193      |\n   |\
    \  Autonomy        |  see Section 2.5      |  see Section 4.5      |\n   +------------------|-----------------------|-----------------------+\n\
    \   |  Global Address  |  RFC 1918             |  17*10^18 subnets     |\n   |\
    \  Pool            |  << 2^48 application  |  3.4*10^38 addresses  |\n   |  Conservation\
    \    |  end points           | full port list / addr |\n   |                 \
    \ |  topology restricted  | unrestricted topology |\n   |                  | \
    \ see Section 2.6      |  see Section 4.6      |\n   +------------------|-----------------------|-----------------------+\n\
    \   |  Renumbering and |  Address translation  |  Preferred lifetime   |\n   |\
    \  Multihoming     |  at border            |  per prefix & multiple|\n   |   \
    \               |                       |  addresses per        |\n   |      \
    \            |                       |  interface            |\n   |         \
    \         |  see Section 2.7      |  see Section 4.7      |\n   +------------------+-----------------------+-----------------------+\n\
    \   This document first identifies the perceived benefits of NAT in more\n   detail,\
    \ and then shows how IPv6 LNP can provide each of them.  It\n   concludes with\
    \ an IPv6 LNP case study and a gap analysis of standards\n   work that remains\
    \ to be done for an optimal LNP solution.\n"
- title: 2.  Perceived Benefits of NAT and Its Impact on IPv4
  contents:
  - "2.  Perceived Benefits of NAT and Its Impact on IPv4\n   This section provides\
    \ insight into the generally perceived benefits\n   of the use of IPv4 NAT.  The\
    \ goal of this description is not to\n   analyze these benefits or the accuracy\
    \ of the perception (detailed\n   discussions in [4]), but to describe the deployment\
    \ requirements and\n   set a context for the later descriptions of the IPv6 approaches\
    \ for\n   dealing with those requirements.\n"
- title: 2.1.  Simple Gateway between Internet and Private Network
  contents:
  - "2.1.  Simple Gateway between Internet and Private Network\n   A NAT device can\
    \ connect a private network with addresses allocated\n   from any part of the\
    \ space (ambiguous [1]or global registered and\n   unregistered addresses) towards\
    \ the Internet, though extra effort is\n   needed when the same range exists on\
    \ both sides of the NAT.  The\n   address space of the private network can be\
    \ built from globally\n   unique addresses, from ambiguous address space, or from\
    \ both\n   simultaneously.  In the simple case of private use addresses, without\n\
    \   needing specific configuration the NAT device enables access between\n   the\
    \ client side of a distributed client-server application in the\n   private network\
    \ and the server side located in the public Internet.\n   Wide-scale deployments\
    \ have shown that using NAT to act as a simple\n   gateway attaching a private\
    \ IPv4 network to the Internet is simple\n   and practical for the non-technical\
    \ end user.  Frequently, a simple\n   user interface or even a default configuration\
    \ is sufficient for\n   configuring both device and application access rights.\n\
    \   This simplicity comes at a price, as the resulting topology puts\n   restrictions\
    \ on applications.  The NAT simplicity works well when the\n   applications are\
    \ limited to a client/server model with the server\n   deployed on the public\
    \ side of the NAT.  For peer-to-peer, multi-\n   party, or servers deployed on\
    \ the private side of the NAT, helper\n   technologies must also be deployed.\
    \  These helper technologies are\n   frequently complex to develop and manage,\
    \ creating a hidden cost to\n   this 'simple gateway'.\n"
- title: 2.2.  Simple Security Due to Stateful Filter Implementation
  contents:
  - "2.2.  Simple Security Due to Stateful Filter Implementation\n   It is frequently\
    \ believed that through its session-oriented\n   operation, NAT puts in an extra\
    \ barrier to keep the private network\n   protected from outside influences. \
    \ Since a NAT device typically\n   keeps state only for individual sessions, attackers,\
    \ worms, etc.,\n   cannot exploit this state to attack a specific host on any\
    \ other\n   port.  However, in the port overload case of Network Address Port\n\
    \   Translation (NAPT) attacking all active ports will impact a\n   potentially\
    \ wide number of hosts.  This benefit may be partially\n   real; however, experienced\
    \ hackers are well aware of NAT devices and\n   are very familiar with private\
    \ address space, and they have devised\n   methods of attack (such as trojan horses)\
    \ that readily penetrate NAT\n   boundaries.  While the stateful filtering offered\
    \ by NAT offers a\n   measure of protection against a variety of straightforward\
    \ network\n   attacks, it does not protect against all attacks despite being\n\
    \   presented as a one-size-fits-all answer.\n   The act of translating address\
    \ bits within the header does not\n   provide security in itself.  For example,\
    \ consider a configuration\n   with static NAT and all inbound ports translating\
    \ to a single\n   machine.  In such a scenario, the security risk for that machine\
    \ is\n   identical to the case with no NAT device in the communication path,\n\
    \   as any connection to the public address will be delivered to the\n   mapped\
    \ target.\n   The perceived security of NAT comes from the lack of pre-established\n\
    \   or permanent mapping state.  This is often used as a 'better than\n   nothing'\
    \ level of protection because it doesn't require complex\n   management to filter\
    \ out unwanted traffic.  Dynamically establishing\n   state in response to internal\
    \ requests reduces the threat of\n   unexpected external connections to internal\
    \ devices, and this level\n   of protection would also be available from a basic\
    \ firewall.  (A\n   basic firewall, supporting clients accessing public side servers,\n\
    \   would improve on that level of protection by avoiding the problem of\n   state\
    \ persisting as different clients use the same private side\n   address over time.)\
    \  This role, often marketed as a firewall, is\n   really an arbitrary artifact,\
    \ while a real firewall often offers\n   explicit and more comprehensive management\
    \ controls.\n   In some cases, NAT operators (including domestic users) may be\n\
    \   obliged to configure quite complex port mapping rules to allow\n   external\
    \ access to local applications such as a multi-player game or\n   web servers.\
    \  In this case, the NAT actually adds management\n   complexity compared to the\
    \ simple router discussed in Section 2.1.\n   In situations where two or more\
    \ devices need to host the same\n   application or otherwise use the same public\
    \ port, this complexity\n   shifts from difficult to impossible.\n"
- title: 2.3.  User/Application Tracking
  contents:
  - "2.3.  User/Application Tracking\n   One usage of NAT is for the local network\
    \ administrator to track user\n   and application traffic.  Although NATs create\
    \ temporary state for\n   active sessions, in general they provide limited capabilities\
    \ for the\n   administrator of the NAT to gather information about who in the\n\
    \   private network is requesting access to which Internet location.\n   This\
    \ is done by periodically logging the network address translation\n   details\
    \ of the private and the public addresses from the NAT device's\n   state database.\n\
    \   The subsequent checking of this database is not always a simple task,\n  \
    \ especially if Port Address Translation is used.  It also has an\n   unstated\
    \ assumption that the administrative instance has a mapping\n   between a private\
    \ IPv4-address and a network element or user at all\n   times, or the administrator\
    \ has a time-correlated list of the\n   address/port mappings.\n"
- title: 2.4.  Privacy and Topology Hiding
  contents:
  - "2.4.  Privacy and Topology Hiding\n   One goal of 'topology hiding' is to prevent\
    \ external entities from\n   making a correlation between the topological location\
    \ of devices on\n   the local network.  The ability of NAT to provide Internet\
    \ access to\n   a large community of users by the use of a single (or a few) globally\n\
    \   routable IPv4 address(es) offers a simple mechanism to hide the\n   internal\
    \ topology of a network.  In this scenario, the large\n   community will be represented\
    \ in the Internet by a single (or a few)\n   IPv4 address(es).\n   By using NAT,\
    \ a system appears to the Internet as if it originated\n   inside the NAT box\
    \ itself; i.e., the IPv4 address that appears on the\n   Internet is only sufficient\
    \ to identify the NAT so all internal nodes\n   appear to exist at the demarcation\
    \ edge.  When concealed behind a\n   NAT, it is impossible to tell from the outside\
    \ which member of a\n   family, which customer of an Internet cafe, or which employee\
    \ of a\n   company generated or received a particular packet.  Thus, although\n\
    \   NATs do nothing to provide application level privacy, they do prevent\n  \
    \ the external tracking and profiling of individual systems by means of\n   their\
    \ IP addresses, usually known as 'device profiling'.\n   There is a similarity\
    \ with privacy based on application level\n   proxies.  When using an application\
    \ level gateway for browsing the\n   web for example, the 'privacy' of a web user\
    \ can be provided by\n   masking the true identity of the original web user towards\
    \ the\n   outside world (although the details of what is -- or is not -- logged\n\
    \   at the NAT/proxy will be different).\n   Some network managers prefer to hide\
    \ as much as possible of their\n   internal network topology from outsiders as\
    \ a useful precaution to\n   mitigate scanning attacks.  Mostly, this is achieved\
    \ by blocking\n   \"traceroute\", etc., though NAT entirely hides the internal\
    \ subnet\n   topology.  Scanning is a particular concern in IPv4 networks because\n\
    \   the subnet size is small enough that once the topology is known, it\n   is\
    \ easy to find all the hosts, then start scanning them for\n   vulnerable ports.\
    \  Once a list of available devices has been mapped,\n   a port-scan on these\
    \ IP addresses can be performed.  Scanning works\n   by tracking which ports do\
    \ not receive unreachable errors from either\n   the firewall or host.  With the\
    \ list of open ports, an attacker can\n   optimize the time needed for a successful\
    \ attack by correlating it\n   with known vulnerabilities to reduce the number\
    \ of attempts.  For\n   example, FTP usually runs on port 21, and HTTP usually\
    \ runs on port\n   80.  Any vulnerable open ports could be used for access to\
    \ an end-\n   system to command it to start initiating attacks on others.\n"
- title: 2.5.  Independent Control of Addressing in a Private Network
  contents:
  - "2.5.  Independent Control of Addressing in a Private Network\n   Many private\
    \ IPv4 networks make use of the address space defined in\n   RFC 1918 to enlarge\
    \ the available addressing space for their private\n   network, and at the same\
    \ time reduce their need for globally routable\n   addresses.  This type of local\
    \ control of address resources allows a\n   sufficiently large pool for a clean\
    \ and hierarchical addressing\n   structure in the local network.\n   Another\
    \ benefit is the ability to change providers with minimal\n   operational difficulty\
    \ due to the usage of independent addresses on a\n   majority of the network infrastructure.\
    \  Changing the addresses on\n   the public side of the NAT avoids the administrative\
    \ challenge of\n   changing every device in the network.\n   Section 2.7 describes\
    \ some disadvantages that appear if independent\n   networks using ambiguous addresses\
    \ [1] have to be merged.\n"
- title: 2.6.  Global Address Pool Conservation
  contents:
  - "2.6.  Global Address Pool Conservation\n   While the widespread use of IPv4+NAT\
    \ has reduced the potential\n   consumption rate, the ongoing depletion of the\
    \ IPv4 address range has\n   already taken the remaining pool of unallocated IPv4\
    \ addresses well\n   below 20%.  While mathematical models based on historical\
    \ IPv4 prefix\n   consumption periodically attempt to predict the future exhaustion\n\
    \   date of the IPv4 address pool, a possible result of this continuous\n   resource\
    \ consumption is that the administrative overhead for\n   acquiring globally unique\
    \ IPv4 addresses will at some point increase\n   noticeably due to tightening\
    \ allocation policies.\n   In response to the increasing administrative overhead,\
    \ many Internet\n   Service Providers (ISPs) have already resorted to the ambiguous\n\
    \   addresses defined in RFC 1918 behind a NAT for the various services\n   they\
    \ provide as well as connections for their end customers.  This\n   happens even\
    \ though the private use address space is strictly limited\n   in size.  Some\
    \ deployments have already outgrown that space and have\n   begun cascading NAT\
    \ to continue expanding, though this practice\n   eventually breaks down over\
    \ routing ambiguity.  Additionally, while\n   we are unlikely to know the full\
    \ extent of the practice (because it\n   is hidden behind a NAT), service providers\
    \ have been known to\n   announce previously unallocated public space to their\
    \ customers (to\n   avoid the problems associated with the same address space\
    \ appearing\n   on both sides), only to find that once that space was formally\n\
    \   allocated and being publicly announced, their customers couldn't\n   reach\
    \ the registered networks.\n   The number of and types of applications that can\
    \ be deployed by these\n   ISPs and their customers are restricted by the ability\
    \ to overload\n   the port range on the public side of the most public NAT in\
    \ the path.\n   The limit of this approach is something substantially less than\
    \ 2^48\n   possible active *application* endpoints (approximately [2^32 minus\n\
    \   2^29] * [2* 2^16 minus well-known port space]), as distinct from\n   addressable\
    \ devices each with its own application endpoint range.\n   Those who advocate\
    \ layering of NAT frequently forget to mention that\n   there are topology restrictions\
    \ placed on the applications.  Forced\n   into this limiting situation, such customers\
    \ can rightly claim that\n   despite the optimistic predictions of mathematical\
    \ models, the global\n   pool of IPv4 addresses is effectively already exhausted.\n"
- title: 2.7.  Multihoming and Renumbering with NAT
  contents:
  - "2.7.  Multihoming and Renumbering with NAT\n   Allowing a network to be multihomed\
    \ and renumbering a network are\n   quite different functions.  However, these\
    \ are argued together as\n   reasons for using NAT, because making a network multihomed\
    \ is often a\n   transitional state required as part of network renumbering, and\
    \ NAT\n   interacts with both in the same way.\n   For enterprise networks, it\
    \ is highly desirable to provide resiliency\n   and load-balancing to be connected\
    \ to more than one Internet Service\n   Provider (ISP) and to be able to change\
    \ ISPs at will.  This means\n   that a site must be able to operate under more\
    \ than one Classless\n   Inter-Domain Routing (CIDR) prefix [18] and/or readily\
    \ change its\n   CIDR prefix.  Unfortunately, IPv4 was not designed to facilitate\n\
    \   either of these maneuvers.  However, if a site is connected to its\n   ISPs\
    \ via NAT boxes, only those boxes need to deal with multihoming\n   and renumbering\
    \ issues.\n   Similarly, if two enterprise IPv4 networks need to be merged and\
    \ RFC\n   1918 addresses are used, there is a high probability of address\n  \
    \ overlaps.  In those situations, it may well be that installing a NAT\n   box\
    \ between them will avoid the need to renumber one or both.  For\n   any enterprise,\
    \ this can be a short-term financial saving and allows\n   more time to renumber\
    \ the network components.  The long-term solution\n   is a single network without\
    \ usage of NAT to avoid the ongoing\n   operational complexity of overlapping\
    \ addresses.\n   The addition of an extra NAT as a solution may be sufficient\
    \ for some\n   networks; however, when the merging networks were already using\n\
    \   address translation it will create major problems due to\n   administrative\
    \ difficulties of overlapping address spaces in the\n   merged networks.\n"
- title: 3.  Description of the IPv6 Tools
  contents:
  - "3.  Description of the IPv6 Tools\n   This section describes several features\
    \ that can be used as part of\n   the LNP solution to replace the protection features\
    \ associated with\n   IPv4 NAT.\n   The reader must clearly distinguish between\
    \ features of IPv6 that\n   were fully defined when this document was drafted\
    \ and those that were\n   potential features that still required more work to\
    \ define them.  The\n   latter are summarized later in the 'Gap Analysis' section\
    \ of this\n   document.  However, we do not distinguish in this document between\n\
    \   fully defined features of IPv6 and those that were already widely\n   implemented\
    \ at the time of writing.\n"
- title: 3.1.  Privacy Addresses (RFC 3041)
  contents:
  - "3.1.  Privacy Addresses (RFC 3041)\n   There are situations where it is desirable\
    \ to prevent device\n   profiling, for example, by web sites that are accessed\
    \ from the\n   device as it moves around the Internet.  IPv6 privacy addresses\
    \ were\n   defined to provide that capability.  IPv6 addresses consist of a\n\
    \   routing prefix, a subnet-id (SID) part, and an interface identifier\n   (IID)\
    \ part.  As originally defined, IPv6 stateless address auto-\n   configuration\
    \ (SLAAC) will typically embed the IEEE Link Identifier\n   of the interface as\
    \ the IID part, though this practice facilitates\n   tracking and profiling of\
    \ a device through the consistent IID.  RFC\n   3041 [7] describes an extension\
    \ to SLAAC to enhance device privacy.\n   Use of the privacy address extension\
    \ causes nodes to generate global-\n   scope addresses from interface identifiers\
    \ that change over time,\n   consistent with system administrator policy.  Changing\
    \ the interface\n   identifier (thus the global-scope addresses generated from\
    \ it) over\n   time makes it more difficult for eavesdroppers and other information\n\
    \   collectors to identify when addresses used in different transactions\n   actually\
    \ correspond to the same node.  A relatively short valid\n   lifetime for the\
    \ privacy address also has the effect of reducing the\n   attack profile of a\
    \ device, as it is not directly attackable once it\n   stops answering at the\
    \ temporary use address.\n   While the primary implementation and source of randomized\
    \ RFC 3041\n   addresses are expected to be from end-systems running stateless\
    \ auto-\n   configuration, there is nothing that prevents a Dynamic Host\n   Configuration\
    \ Protocol (DHCP) server from running the RFC 3041\n   algorithm for any new IEEE\
    \ identifier it hears in a request, then\n   remembering that for future queries.\
    \  This would allow using them in\n   DNS for registered services since the assumption\
    \ of a DHCP server-\n   based deployment would be a persistent value that minimizes\
    \ DNS\n   churn.  A DHCP-based deployment would also allow for local policy to\n\
    \   periodically change the entire collection of end-device addresses\n   while\
    \ maintaining some degree of central knowledge and control over\n   which addresses\
    \ should be in use at any point in time.\n   Randomizing the IID, as defined in\
    \ RFC 3041, is effectively a sparse\n   allocation technique that only precludes\
    \ tracking of the lower 64\n   bits of the IPv6 address.  Masking of the subnet\
    \ ID will require\n   additional approaches as discussed below in Section 3.4.\
    \  Additional\n   considerations are discussed in [19].\n"
- title: 3.2.  Unique Local Addresses
  contents:
  - "3.2.  Unique Local Addresses\n   Achieving the goal of autonomy, that many perceive\
    \ as a value of NAT,\n   is required for local network and application services\
    \ stability\n   during periods of intermittent connectivity or moving between\
    \ one or\n   more providers.  Such autonomy in a single routing prefix environment\n\
    \   would lead to massive expansion of the global routing tables (as seen\n  \
    \ in IPv4), so IPv6 provides for simultaneous use of multiple prefixes.\n   The\
    \ Unique Local Address (ULA) prefix [17] has been set aside for use\n   in local\
    \ communications.  The ULA prefix for any network is routable\n   over a locally\
    \ defined collection of routers.  These prefixes are not\n   intended to be routed\
    \ on the public global Internet as large-scale\n   inter-domain distribution of\
    \ routes for ULA prefixes would have a\n   negative impact on global route aggregation.\n\
    \   ULAs have the following characteristics:\n   o  For all practical purposes,\
    \ a globally unique prefix\n      *  allows networks to be combined or privately\
    \ interconnected\n         without creating address conflicts or requiring renumbering\
    \ of\n         interfaces using these prefixes, and\n      *  if accidentally\
    \ leaked outside of a network via routing or DNS,\n         is highly unlikely\
    \ that there will be a conflict with any other\n         addresses.\n   o  They\
    \ are ISP independent and can be used for communications inside\n      of a network\
    \ without having any permanent or only intermittent\n      Internet connectivity.\n\
    \   o  They have a well-known prefix to allow for easy filtering at\n      network\
    \ boundaries preventing leakage of routes and packets that\n      should remain\
    \ local.\n   o  In practice, applications may treat these addresses like global-\n\
    \      scope addresses, but address selection algorithms may need to\n      distinguish\
    \ between ULAs and ordinary global-scope unicast\n      addresses to ensure stability.\
    \  The policy table defined in [11]\n      is one way to bias this selection,\
    \ by giving higher preference to\n      FC00::/7 over 2001::/3.  Mixing the two\
    \ kinds of addresses may\n      lead to undeliverable packets during times of\
    \ instability, but\n      that mixing is not likely to happen when the rules of\
    \ RFC 3484 are\n      followed.\n   o  ULAs have no intrinsic security properties.\
    \  However, they have\n      the useful property that their routing scope is limited\
    \ by default\n      within an administrative boundary.  Their usage is suggested\
    \ at\n      several points in this document, as a matter of administrative\n \
    \     convenience.\n"
- title: 3.3.  DHCPv6 Prefix Delegation
  contents:
  - "3.3.  DHCPv6 Prefix Delegation\n   One of the functions of a simple gateway is\
    \ managing the local use\n   address range.  The Prefix Delegation (DHCP-PD) options\
    \ [12] provide\n   a mechanism for automated delegation of IPv6 prefixes using\
    \ the DHCP\n   [10].  This mechanism (DHCP-PD) is intended for delegating a long-\n\
    \   lived prefix from a delegating router (possibly incorporating a\n   DHCPv6\
    \ server) to a requesting router, possibly across an\n   administrative boundary,\
    \ where the delegating router does not require\n   knowledge about the topology\
    \ of the links in the network to which the\n   prefixes will be assigned.\n"
- title: 3.4.  Untraceable IPv6 Addresses
  contents:
  - "3.4.  Untraceable IPv6 Addresses\n   The main goal of untraceable IPv6 addresses\
    \ is to create an\n   apparently amorphous network infrastructure, as seen from\
    \ external\n   networks, to protect the local infrastructure from malicious outside\n\
    \   influences and from mapping of any correlation between the network\n   activities\
    \ of multiple devices from external networks.  When using\n   untraceable IPv6\
    \ addresses, it could be that two apparently\n   sequential addresses are allocated\
    \ to devices on very different parts\n   of the local network instead of belonging\
    \ to devices adjacent to each\n   other on the same subnet.\n   Since IPv6 addresses\
    \ will not be in short supply even within a single\n   /64 (or shorter) prefix,\
    \ it is possible to generate them effectively\n   at random when untraceability\
    \ is required.  They will be globally\n   routable IPv6 addresses under the site's\
    \ prefix, which can be\n   randomly and independently assigned to IPv6 devices.\
    \  The random\n   assignment is intended to mislead the outside world about the\n\
    \   structure of the local network.  In particular, the subnet structure\n   may\
    \ be invisible in the address.  Thus, a flat routing mechanism will\n   be needed\
    \ within the site.  The local routers need to maintain a\n   correlation between\
    \ the topological location of the device and the\n   untraceable IPv6 address.\
    \  For smaller deployments, this correlation\n   could be done by generating IPv6\
    \ host route entries, or for larger\n   ones by utilizing an indirection device\
    \ such as a Mobile IPv6 Home\n   Agent.  Additional details are in Section 4.7.\n"
- title: 4.  Using IPv6 Technology to Provide the Market Perceived Benefits of
  contents:
  - "4.  Using IPv6 Technology to Provide the Market Perceived Benefits of\n    NAT\n\
    \   The facilities in IPv6 described in Section 3 can be used to provide\n   the\
    \ protection perceived to be associated with IPv4 NAT.  This\n   section gives\
    \ some examples of how IPv6 can be used securely.\n"
- title: 4.1.  Simple Gateway between Internet and Internal Network
  contents:
  - "4.1.  Simple Gateway between Internet and Internal Network\n   As a simple gateway,\
    \ the device manages both packet routing and local\n   address management.  A\
    \ basic IPv6 router should have a default\n   configuration to advertise inside\
    \ the site a locally generated random\n   ULA prefix, independently from the state\
    \ of any external\n   connectivity.  This would allow local nodes in a topology\
    \ more\n   complex than a single link to communicate amongst themselves\n   independent\
    \ of the state of a global connection.  If the network\n   happened to concatenate\
    \ with another local network, the randomness in\n   ULA creation is highly unlikely\
    \ to result in address collisions.\n   With external connectivity, the simple\
    \ gateway should use DHCP-PD to\n   acquire a routing prefix from the service\
    \ provider for use when\n   connecting to the global Internet.  End-system connections\
    \ involving\n   other nodes on the global Internet that follow the policy table\
    \ in\n   RFC 3484 will always use the global IPv6 addresses derived from this\n\
    \   prefix delegation.  It should be noted that the address selection\n   policy\
    \ table should be configured to prefer the ULA prefix range over\n   the DHCP-PD\
    \ prefix range when the goal is to keep local\n   communications stable during\
    \ periods of transient external\n   connectivity.\n   In the very simple case,\
    \ there is no explicit routing protocol on\n   either side of the gateway, and\
    \ a single default route is used\n   internally pointing out to the global Internet.\
    \  A slightly more\n   complex case might involve local internal routing protocols,\
    \ but with\n   the entire local network sharing a common global prefix there would\n\
    \   still not be a need for an external routing protocol as the service\n   provider\
    \ could install a route for the prefix delegated via DHCP-PD\n   pointing toward\
    \ the connecting link.\n"
- title: 4.2.  IPv6 and Simple Security
  contents:
  - "4.2.  IPv6 and Simple Security\n   The vulnerability of an IPv6 host directly\
    \ connected to the Internet\n   is similar to that of an IPv4 host.  The use of\
    \ firewalls and\n   Intrusion Detection Systems (IDSs) is recommended for those\
    \ that want\n   boundary protection in addition to host defenses.  A proxy may\
    \ be\n   used for certain applications, but with the caveat that the end-to-\n\
    \   end transparency is broken.  However, with IPv6, the following\n   protections\
    \ are available without the use of NAT while maintaining\n   end-to-end reachability:\n\
    \   1.  Short lifetimes on privacy extension suffixes reduce the attack\n    \
    \   profile since the node will not respond to the address once its\n       lifetime\
    \ becomes invalid.\n   2.  IP security (IPsec) is often cited as the reason for\
    \ improved\n       security because it is a mandatory service for IPv6\n     \
    \  implementations.  Broader availability does not by itself improve\n       security\
    \ because its use is still regulated by the availability\n       of a key infrastructure.\
    \  IPsec functions to authenticate the\n       correspondent, prevent session\
    \ hijacking, prevent content\n       tampering, and optionally mask the packet\
    \ contents.  While IPsec\n       is commonly available in some IPv4 implementations\
    \ and with\n       extensions can support NAT traversals, NAT support has\n  \
    \     limitations and does not work in all situations.  The use of\n       IPsec\
    \ with NATs requires an additional UDP encapsulation and\n       keepalive overhead\
    \ [13].  In the IPv4/NAT environment, the usage\n       of IPsec has been largely\
    \ limited to edge-to-edge Virtual Private\n       Network (VPN) deployments. \
    \ The potential for end-to-end IPsec\n       use is significantly enhanced when\
    \ NAT is removed from the\n       network, as connections can be initiated from\
    \ either end.  It\n       should be noted that encrypted IPsec traffic will bypass\
    \ content-\n       aware firewalls, which is presumed to be acceptable for parties\n\
    \       with whom the site has established a security association.\n   3.  The\
    \ size of the address space of a typical subnet (64 bits of\n       IID) will\
    \ make a complete subnet ping sweep usually significantly\n       harder and more\
    \ expensive than for IPv4 [20].  Reducing the\n       security threat of port\
    \ scans on identified nodes requires sparse\n       distribution within the subnet\
    \ to minimize the probability of\n       scans finding adjacent nodes.  This scanning\
    \ protection will be\n       nullified if IIDs are configured in any structured\
    \ groupings\n       within the IID space.  Provided that IIDs are essentially\n\
    \       randomly distributed across the available space, address\n       scanning-based\
    \ attacks will effectively fail.  This protection\n       exists if the attacker\
    \ has no direct access to the specific\n       subnet and therefore is trying\
    \ to scan it remotely.  If an\n       attacker has local access, then he could\
    \ use Neighbor Discovery\n       (ND) [3] and ping6 to the link-scope multicast\
    \ ff02::1 to detect\n       the IEEE-based address of local neighbors, then apply\
    \ the global\n       prefix to those to simplify its search (of course, a locally\n\
    \       connected attacker has many scanning options with IPv4 as well).\n   Assuming\
    \ the network administrator is aware of [20] the increased\n   size of the IPv6\
    \ address will make topology probing much harder, and\n   almost impossible for\
    \ IPv6 devices.  The intention of topology\n   probing is to identify a selection\
    \ of the available hosts inside an\n   enterprise.  This mostly starts with a\
    \ ping sweep.  Since the IPv6\n   subnets are 64 bits worth of address space,\
    \ this means that an\n   attacker has to simply send out an unrealistic number\
    \ of pings to map\n   the network, and virus/worm propagation will be thwarted\
    \ in the\n   process.  At full-rate full-duplex 40 Gbps (400 times the typical\
    \ 100\n   Mbps LAN, and 13,000 times the typical DSL/cable access link), it\n\
    \   takes over 5,000 years to scan the entirety of a single 64-bit\n   subnet.\n\
    \   IPv4 NAT was not developed as a security mechanism.  Despite\n   marketing\
    \ messages to the contrary, it is not a security mechanism,\n   and hence it will\
    \ offer some security holes while many people assume\n   their network is secure\
    \ due to the usage of NAT.  IPv6 security best\n   practices will avoid this kind\
    \ of illusory security, but can only\n   address the same threats if correctly\
    \ configured firewalls and IDSs\n   are used at the perimeter.\n      It must\
    \ be noted that even a firewall doesn't fully secure a\n      network.  Many attacks\
    \ come from inside or are at a layer higher\n      than the firewall can protect\
    \ against.  In the final analysis,\n      every system has to be responsible for\
    \ its own security, and every\n      process running on a system has to be robust\
    \ in the face of\n      challenges like stack overflows, etc.  What a firewall\
    \ does is\n      prevent a network administration from having to carry unauthorized\n\
    \      traffic, and in so doing reduce the probability of certain kinds\n    \
    \  of attacks across the protected boundary.\n   To implement simple security\
    \ for IPv6 in, for example, a DSL or cable\n   modem-connected home network, the\
    \ broadband gateway/router should be\n   equipped with stateful firewall capabilities.\
    \  These should provide a\n   default configuration where incoming traffic is\
    \ limited to return\n   traffic resulting from outgoing packets (sometimes known\
    \ as\n   reflective session state).  There should also be an easy interface\n\
    \   that allows users to create inbound 'pinholes' for specific purposes\n   such\
    \ as online gaming.\n   Administrators and the designers of configuration interfaces\
    \ for\n   simple IPv6 firewalls need to provide a means of documenting the\n \
    \  security caveats that arise from a given set of configuration rules\n   so\
    \ that users (who are normally oblivious to such things) can be made\n   aware\
    \ of the risks.  As rules are improved iteratively, the goal will\n   be to make\
    \ use of the IPv6 Internet more secure without increasing\n   the perceived complexity\
    \ for users who just want to accomplish a\n   task.\n"
- title: 4.3.  User/Application Tracking
  contents:
  - "4.3.  User/Application Tracking\n   IPv6 enables the collection of information\
    \ about data flows.  Because\n   all addresses used for Internet and intra-/inter-site\
    \ communication\n   are unique, it is possible for an enterprise or ISP to get\
    \ very\n   detailed information on any communication exchange between two or\n\
    \   more devices.  Unless privacy addresses [7] are in use, this enhances\n  \
    \ the capability of data-flow tracking for security audits compared\n   with IPv4\
    \ NAT, because in IPv6 a flow between a sender and receiver\n   will always be\
    \ uniquely identified due to the unique IPv6 source and\n   destination addresses.\n\
    \   At the same time, this tracking is per address.  In environments\n   where\
    \ the goal is tracking back to the user, additional external\n   information will\
    \ be necessary correlating a user with an address.  In\n   the case of short-lifetime\
    \ privacy address usage, this external\n   information will need to be based on\
    \ more stable information such as\n   the layer 2 media address.\n"
- title: 4.4.  Privacy and Topology Hiding Using IPv6
  contents:
  - "4.4.  Privacy and Topology Hiding Using IPv6\n   Partial host privacy is achieved\
    \ in IPv6 using RFC 3041 pseudo-random\n   privacy addresses [7] which are generated\
    \ as required, so that a\n   session can use an address that is valid only for\
    \ a limited time.\n   This only allows such a session to be traced back to the\
    \ subnet that\n   originates it, but not immediately to the actual host, where\
    \ IPv4 NAT\n   is only traceable to the most public NAT interface.\n   Due to\
    \ the large IPv6 address space available, there is plenty of\n   freedom to randomize\
    \ subnet allocations.  By doing this, it is\n   possible to reduce the correlation\
    \ between a subnet and its location.\n   When doing both subnet and IID randomization,\
    \ a casual snooper won't\n   be able to deduce much about the network's topology.\
    \  The obtaining\n   of a single address will tell the snooper very little about\
    \ other\n   addresses.  This is different from IPv4 where address space\n   limitations\
    \ cause this not to be true.  In most usage cases, this\n   concept should be\
    \ sufficient for address privacy and topology hiding,\n   with the cost being\
    \ a more complex internal routing configuration.\n   As discussed in Section 3.1,\
    \ there are multiple parts to the IPv6\n   address, and different techniques to\
    \ manage privacy for each which\n   may be combined to protect the entire address.\
    \  In the case where a\n   network administrator wishes to fully isolate the internal\
    \ IPv6\n   topology, and the majority of its internal use addresses, one option\n\
    \   is to run all internal traffic using Unique Local Addresses (ULAs).\n   By\
    \ definition, this prefix block is not to be advertised in the\n   public routing\
    \ system, so without a routing path external traffic\n   will never reach the\
    \ site.  For the set of hosts that do in fact need\n   to interact externally,\
    \ by using multiple IPv6 prefixes (ULAs and one\n   or more global addresses)\
    \ all of the internal nodes that do not need\n   external connectivity, and the\
    \ internally used addresses of those\n   that do, will be masked from the outside.\
    \  The policy table defined\n   in [11] provides a mechanism to bias the selection\
    \ process when\n   multiple prefixes are in use such that the ULA would be preferred\n\
    \   when the correspondent is also local.\n   There are other scenarios for the\
    \ extreme situation when a network\n   manager also wishes to fully conceal the\
    \ internal IPv6 topology.  In\n   these cases, the goal in replacing the IPv4\
    \ NAT approach is to make\n   all of the topology hidden nodes appear from the\
    \ outside to logically\n   exist at the edge of the network, just as they would\
    \ when behind a\n   NAT.  This figure shows the relationship between the logical\
    \ subnets\n   and the topology masking router discussed in the bullet points that\n\
    \   follow.\n                             Internet\n                         \
    \        |\n                                 \\\n                            \
    \     |\n                       +------------------+\n                       |\
    \     topology     |-+-+-+-+-+-+-+-+--\n                       |     masking \
    \     |  Logical subnets\n                       |     router       |-+-+-+-+-+-+-+-+--\n\
    \                       +------------------+  for topology\n                 \
    \                |           hidden nodes\n                                 |\n\
    \               Real internal  -------------+-\n               topology      \
    \ |            |\n                              |           -+----------\n   \
    \                -----------+--------+\n                                     \
    \  |\n                                       |\n                             \
    \          |\n   o  One approach uses explicit host routes in the Interior Gateway\n\
    \      Protocol (IGP) to remove the external correlation between physical\n  \
    \    topology attachment point and end-to-end IPv6 address.  In the\n      figure\
    \ above the hosts would be allocated prefixes from one or\n      more logical\
    \ subnets, and would inject host routes into the IGP to\n      internally identify\
    \ their real attachment point.  This solution\n      does however show severe\
    \ scalability issues and requires hosts to\n      securely participate in the\
    \ IGP, as well as have the firewall\n      block all external to internal traceroutes\
    \ for the logical subnet.\n      The specific limitations are dependent on the\
    \ IGP protocol, the\n      physical topology, and the stability of the system.\
    \  In any case,\n      the approach should be limited to uses with substantially\
    \ fewer\n      than the maximum number of routes that the IGP can support\n  \
    \    (generally between 5,000 and 50,000 total entries including subnet\n    \
    \  routes).  Hosts should also listen to the IGP for duplicate use\n      before\
    \ finalizing an interface address assignment as the duplicate\n      address detection\
    \ will only check for use on the attached segment,\n      not the logical subnet.\n\
    \   o  Another technical approach to fully hide the internal topology is\n   \
    \   use of a tunneling mechanism.  Mobile IPv6 without route\n      optimization\
    \ is one approach for using an automated tunnel, as it\n      always starts in\
    \ tunnel mode via the Home Agent (HA).  In this\n      deployment model, the application\
    \ perceived addresses of the nodes\n      are routed via the edge HA acting as\
    \ the topology masking router\n      (above).  This indirection method truly masks\
    \ the internal\n      topology, as from outside the local network all nodes with\
    \ global\n      access appear to share the prefix of one or more logical subnets\n\
    \      attached to the HA rather than their real attachment point.  Note\n   \
    \   that in this usage context, the HA is replacing the NAT function\n      at\
    \ the edge of the network, so concerns about additional latency\n      for routing\
    \ through a tunnel to the HA do not apply because it is\n      effectively on\
    \ the same path that the NAT traffic would have\n      taken.  Duplicate address\
    \ detection is handled as a normal process\n      of the HA binding update.  While\
    \ turning off all binding updates\n      with the correspondent node would appear\
    \ to be necessary to\n      prevent leakage of topology information, that approach\
    \ would also\n      force all internal traffic using the home address to route\
    \ via the\n      HA tunnel, which may be undesirable.  A more efficient method\n\
    \      would be to allow internal route optimizations while dropping\n      outbound\
    \ binding update messages at the firewall.  Another\n      approach for the internal\
    \ traffic would be to use the policy table\n      of RFC 3484 to bias a ULA prefix\
    \ as preferred internally, leaving\n      the logical subnet Home Address external\
    \ for use.  The downside to\n      a Mobile IPv6-based solution is that it requires\
    \ a Home Agent in\n      the network and the configuration of a security association\
    \ with\n      the HA for each hidden node, and it consumes some amount of\n  \
    \    bandwidth for tunnel overhead.\n   o  Another method (where the layer 2 topology\
    \ allows) uses a virtual\n      LAN approach to logically attach the devices to\
    \ one or more\n      subnets on the edge router.  This approach leads the end\
    \ nodes to\n      believe they actually share a common segment.  The downside\
    \ of\n      this approach is that all internal traffic would be directed over\n\
    \      suboptimal paths via the edge router, as well as the complexity of\n  \
    \    managing a distributed logical LAN.\n   One issue to be aware of is that\
    \ subnet scope multicast will not work\n   for the logical hidden subnets, except\
    \ in the VLAN case.  While a\n   limited scope multicast to a collection of nodes\
    \ that are arbitrarily\n   scattered makes no technical sense, care should be\
    \ exercised to avoid\n   deploying applications that expect limited scope multicast\
    \ in\n   conjunction with topology hiding.\n   Another issue that this document\
    \ will not define is the mechanism for\n   a topology hidden node to learn its\
    \ logical subnet.  While manual\n   configuration would clearly be sufficient,\
    \ DHCP could be used for\n   address assignment, with the recipient node discovering\
    \ it is in a\n   hidden mode when the attached subnet prefix doesn't match the\
    \ one\n   assigned.\n"
- title: 4.5.  Independent Control of Addressing in a Private Network
  contents:
  - "4.5.  Independent Control of Addressing in a Private Network\n   IPv6 provides\
    \ for autonomy in local use addresses through ULAs.  At\n   the same time, IPv6\
    \ simplifies simultaneous use of multiple addresses\n   per interface so that\
    \ an IPv6 NAT is not required between the ULA and\n   the public Internet because\
    \ nodes that need access to the public\n   Internet will have a global use address\
    \ as well.  When using IPv6,\n   the need to ask for more address space will become\
    \ far less likely\n   due to the increased size of the subnets, along with an\
    \ allocation\n   policy that recognizes that table fragmentation is also an important\n\
    \   consideration.  While global IPv6 allocation policy is managed\n   through\
    \ the Regional Internet Registries (RIRs), it is expected that\n   they will continue\
    \ with derivatives of [8] for the foreseeable future\n   so the number of subnet\
    \ prefixes available to an organization should\n   not be a limitation that would\
    \ create an artificial demand for NAT.\n   Ongoing subnet address maintenance\
    \ may become simpler when IPv6\n   technology is utilized.  Under IPv4 address\
    \ space policy\n   restrictions, each subnet must be optimized, so one has to\
    \ look\n   periodically into the number of hosts on a segment and the subnet\n\
    \   size allocated to the segment and rebalance.  For example, an\n   enterprise\
    \ today may have a mix of IPv4 /28 - /23 size subnets, and\n   may shrink/grow\
    \ these as its network user base changes.  For IPv6,\n   all subnets have /64\
    \ prefixes, which will reduce the operational and\n   configuration overhead.\n"
- title: 4.6.  Global Address Pool Conservation
  contents:
  - "4.6.  Global Address Pool Conservation\n   IPv6 provides sufficient space to\
    \ completely avoid the need for\n   overlapping address space.  Since allocations\
    \ in IPv6 are based on\n   subnets rather than hosts, a reasonable way to look\
    \ at the pool is\n   that there are about 17*10^18 unique subnet values where\
    \ sparse\n   allocation practice within those provides for new opportunities such\n\
    \   as SEcure Neighbor Discovery (SEND) [15].  As previously discussed,\n   the\
    \ serious disadvantages of ambiguous address space have been well\n   documented,\
    \ and with sufficient space there is no need to continue\n   the increasingly\
    \ aggressive conservation practices that are necessary\n   with IPv4.  While IPv6\
    \ allocation policies and ISP business practice\n   will continue to evolve, the\
    \ recommendations in RFC 3177 are based on\n   the technical potential of the\
    \ vast IPv6 address space.  That\n   document demonstrates that there is no resource\
    \ limitation that will\n   require the adoption of the IPv4 workaround of ambiguous\
    \ space behind\n   a NAT.  As an example of the direct contrast, many expansion-oriented\n\
    \   IPv6 deployment scenarios result in multiple IPv6 addresses per\n   device,\
    \ as opposed to the constriction of IPv4 scenarios where\n   multiple devices\
    \ are forced to share a scarce global address through\n   a NAT.\n"
- title: 4.7.  Multihoming and Renumbering
  contents:
  - "4.7.  Multihoming and Renumbering\n   IPv6 was designed to allow sites and hosts\
    \ to run with several\n   simultaneous CIDR-allocated prefixes, and thus with\
    \ several\n   simultaneous ISPs.  An address selection mechanism [11] is specified\n\
    \   so that hosts will behave consistently when several addresses are\n   simultaneously\
    \ valid.  The fundamental difficulty that IPv4 has in\n   regard to multiple addresses\
    \ therefore does not apply to IPv6.  IPv6\n   sites can and do run today with\
    \ multiple ISPs active, and the\n   processes for adding, removing, and renumbering\
    \ active prefixes at a\n   site have been documented in [16] and [21].  However,\
    \ multihoming and\n   renumbering remain technically challenging even with IPv6\
    \ with\n   regards to session continuity across multihoming events or\n   interactions\
    \ with ingress filtering (see the Gap Analysis below).\n   The IPv6 address space\
    \ allocated by the ISP will be dependent upon\n   the connecting service provider.\
    \  This will likely result in a\n   renumbering effort when the network changes\
    \ between service\n   providers.  When changing ISPs or ISPs readjust their addressing\n\
    \   pool, DHCP-PD [12] can be used as an almost zero-touch external\n   mechanism\
    \ for prefix change in conjunction with a ULA prefix for\n   internal connection\
    \ stability.  With appropriate management of the\n   lifetime values and overlap\
    \ of the external prefixes, a smooth make-\n   before-break transition is possible\
    \ as existing communications will\n   continue on the old prefix as long as it\
    \ remains valid, while any new\n   communications will use the new prefix.\n"
- title: 5.  Case Studies
  contents:
  - "5.  Case Studies\n   In presenting these case studies, we have chosen to consider\n\
    \   categories of networks divided first according to their function\n   either\
    \ as carrier/ISP networks or end user (such as enterprise)\n   networks with the\
    \ latter category broken down according to the number\n   of connected end hosts.\
    \  For each category of networks, we can use\n   IPv6 Local Network Protection\
    \ to achieve a secure and flexible\n   infrastructure, which provides an enhanced\
    \ network functionality in\n   comparison with the usage of address translation.\n\
    \   o  Medium/Large Private Networks (typically >10 connections)\n   o  Small\
    \ Private Networks (typically 1 to 10 connections)\n   o  Single User Connection\
    \ (typically 1 connection)\n   o  ISP/Carrier Customer Networks\n"
- title: 5.1.  Medium/Large Private Networks
  contents:
  - "5.1.  Medium/Large Private Networks\n   The majority of private enterprise, academic,\
    \ research, or government\n   networks fall into this category.  Many of these\
    \ networks have one or\n   more exit points to the Internet.  Though these organizations\
    \ have\n   sufficient resources to acquire addressing independence when using\n\
    \   IPv4, there are several reasons why they might choose to use NAT in\n   such\
    \ a network.  For the ISP, there is no need to import the IPv4\n   address range\
    \ from the remote end-customer, which facilitates IPv4\n   route summarization.\
    \  The customer can use a larger IPv4 address\n   range (probably with less administrative\
    \ overhead) by the use of RFC\n   1918 and NAT.  The customer also reduces the\
    \ overhead in changing to\n   a new ISP, because the addresses assigned to devices\
    \ behind the NAT\n   do not need to be changed when the customer is assigned a\
    \ different\n   address by a new ISP.  By using address translation in IPv4, one\n\
    \   avoids the expensive process of network renumbering.  Finally, the\n   customer\
    \ can provide privacy for its hosts and the topology of its\n   internal network\
    \ if the internal addresses are mapped through NAT.\n   It is expected that there\
    \ will be enough IPv6 addresses available for\n   all networks and appliances\
    \ for the foreseeable future.  The basic\n   IPv6 address range an ISP allocates\
    \ for a private network is large\n   enough (currently /48) for most of the medium\
    \ and large enterprises,\n   while for the very large private enterprise networks\
    \ address ranges\n   can be concatenated.  The goal of this assignment mechanism\
    \ is to\n   decrease the total amount of entries in the public Internet routing\n\
    \   table.  A single /48 allocation provides an enterprise network with\n   65,536\
    \ different /64 subnet prefixes.\n   To mask the identity of a user on a network\
    \ of this type, the usage\n   of IPv6 privacy extensions may be advised.  This\
    \ technique is useful\n   when an external element wants to track and collect\
    \ all information\n   sent and received by a certain host with a known IPv6 address.\n\
    \   Privacy extensions add a random time-limited factor to the host part\n   of\
    \ an IPv6 address and will make it very hard for an external element\n   to keep\
    \ correlating the IPv6 address to a specific host on the inside\n   network. \
    \ The usage of IPv6 privacy extensions does not mask the\n   internal network\
    \ structure of an enterprise network.\n   When there is a need to mask the internal\
    \ structure towards the\n   external IPv6 Internet, then some form of 'untraceable'\
    \ addresses may\n   be used.  These addresses will appear to exist at the external\
    \ edge\n   of the network, and may be assigned to those hosts for which topology\n\
    \   masking is required or that want to reach the IPv6 Internet or other\n   external\
    \ networks.  The technology to assign these addresses to the\n   hosts could be\
    \ based on DHCPv6 or static configuration.  To\n   complement the 'Untraceable'\
    \ addresses, it is necessary to have at\n   least awareness of the IPv6 address\
    \ location when routing an IPv6\n   packet through the internal network.  This\
    \ could be achieved by 'host\n   based route-injection' in the local network infrastructure.\
    \  This\n   route-injection could be done based on /128 host-routes to each\n\
    \   device that wants to connect to the Internet using an untraceable\n   address.\
    \  This will provide the most dynamic masking, but will have a\n   scalability\
    \ limitation, as an IGP is typically not designed to carry\n   many thousands\
    \ of IPv6 prefixes.  A large enterprise may have\n   thousands of hosts willing\
    \ to connect to the Internet.\n   An alternative for larger deployments is to\
    \ leverage the tunneling\n   aspect of MIPv6 even for non-mobile devices.  With\
    \ the logical subnet\n   being allocated as attached to the edge Home Agent, the\
    \ real\n   attachment and internal topology are masked from the outside.\n   Dropping\
    \ outbound binding updates at the firewall is also necessary\n   to avoid leaking\
    \ the attachment information.\n   Less flexible masking could be to have time-based\
    \ IPv6 prefixes per\n   link or subnet.  This may reduce the amount of route entries\
    \ in the\n   IGP by a significant factor, but has as a trade-off that masking\
    \ is\n   time and subnet based, which will complicate auditing systems.  The\n\
    \   dynamic allocation of 'Untraceable' addresses can also limit the IPv6\n  \
    \ access between local and external hosts to those local hosts being\n   authorized\
    \ for this capability.\n   The use of permanent ULA addresses on a site provides\
    \ the benefit\n   that even if an enterprise changes its ISP, the renumbering\
    \ will only\n   affect those devices that have a wish to connect beyond the site.\n\
    \   Internal servers and services would not change their allocated IPv6\n   ULA\
    \ address, and the service would remain available even during\n   global address\
    \ renumbering.\n"
- title: 5.2.  Small Private Networks
  contents:
  - "5.2.  Small Private Networks\n   Also known as SOHO (Small Office/Home Office)\
    \ networks, this category\n   describes those networks that have few routers in\
    \ the topology and\n   usually have a single network egress point.  Typically,\
    \ these\n   networks:\n   o  are connected via either a dial-up connection or\
    \ broadband access,\n   o  don't have dedicated Network Operation Center (NOC),\
    \ and\n   o  today, typically use NAT as the cheapest available solution for\n\
    \      connectivity and address management\n   In most cases, the received global\
    \ IPv4 prefix is not fixed over time\n   and is too long (very often a /32 giving\
    \ just a single address) to\n   provide every node in the private network with\
    \ a unique, globally\n   usable address.  Fixing either of those issues typically\
    \ adds an\n   administrative overhead for address management to the user.  This\n\
    \   category may even be limited to receiving ambiguous IPv4 addresses\n   from\
    \ the service provider based on RFC 1918.  An ISP will typically\n   pass along\
    \ the higher administration cost attached to larger address\n   blocks, or IPv4\
    \ prefixes that are static over time, due to the larger\n   public address pool\
    \ each of those requires.\n   As a direct response to explicit charges per public\
    \ address, most of\n   this category has deployed NAPT (port demultiplexing NAT)\
    \ to minimize\n   the number of addresses in use.  Unfortunately, this also limits\
    \ the\n   Internet capability of the equipment to being mainly a receiver of\n\
    \   Internet data (client), and it makes it quite hard for the equipment\n   to\
    \ become a worldwide Internet server (HTTP, FTP, etc.) due to the\n   stateful\
    \ operation of the NAT equipment.  Even when there is\n   sufficient technical\
    \ knowledge to manage the NAT to enable external\n   access to a server, only\
    \ one server can be mapped per protocol/port\n   number per address, and then\
    \ only when the address from the ISP is\n   publicly routed.  When there is an\
    \ upstream NAT providing private\n   address space to the ISP side of the private\
    \ NAT, additional\n   negotiation with the ISP will be necessary to provide an\
    \ inbound\n   mapping, if that is even possible.\n   When deploying IPv6 LNP in\
    \ this environment, there are two approaches\n   possible with respect to IPv6\
    \ addressing.\n   o  DHCPv6 Prefix-Delegation (PD)\n   o  ISP provides a static\
    \ IPv6 address range\n   For the DHCPv6-PD solution, a dynamic address allocation\
    \ approach is\n   chosen.  By means of the enhanced DHCPv6 protocol, it is possible\
    \ to\n   have the ISP push down an IPv6 prefix range automatically towards the\n\
    \   small private network and populate all interfaces in that small\n   private\
    \ network dynamically.  This reduces the burden for\n   administrative overhead\
    \ because everything happens automatically.\n   For the static configuration,\
    \ the mechanisms used could be the same\n   as for the medium/large enterprises.\
    \  Typically, the need for masking\n   the topology will not be of high priority\
    \ for these users, and the\n   usage of IPv6 privacy extensions could be sufficient.\n\
    \   For both alternatives, the ISP has the unrestricted capability for\n   summarization\
    \ of its RIR-allocated IPv6 prefix, while the small\n   private network administrator\
    \ has all flexibility in using the\n   received IPv6 prefix to its advantage because\
    \ it will be of\n   sufficient size to allow all the local nodes to have a public\
    \ address\n   and full range of ports available whenever necessary.\n   While\
    \ a full prefix is expected to be the primary deployment model,\n   there may\
    \ be cases where the ISP provides a single IPv6 address for\n   use on a single\
    \ piece of equipment (PC, PDA, etc.).  This is expected\n   to be rare, though,\
    \ because in the IPv6 world the assumption is that\n   there is an unrestricted\
    \ availability of a large amount of globally\n   routable and unique address space.\
    \  If scarcity was the motivation\n   with IPv4 to provide RFC 1918 addresses,\
    \ in this environment the ISP\n   will not be motivated to allocate private addresses\
    \ to the single\n   user connection because there are enough global addresses\
    \ available\n   at essentially the same cost.  Also, it will be likely that the\n\
    \   single device wants to mask its identity to the called party or its\n   attack\
    \ profile over a shorter time than the life of the ISP\n   attachment, so it will\
    \ need to enable IPv6 privacy extensions.  In\n   turn, this leads to the need\
    \ for a minimum allocation of a /64 prefix\n   rather than a single address.\n"
- title: 5.3.  Single User Connection
  contents:
  - "5.3.  Single User Connection\n   This group identifies the users that are connected\
    \ via a single IPv4\n   address and use a single piece of equipment (PC, PDA,\
    \ etc.).  This\n   user may get an ambiguous IPv4 address (frequently imposed\
    \ by the\n   ISP) from the service provider that is based on RFC 1918.  If\n \
    \  ambiguous addressing is utilized, the service provider will execute\n   NAT\
    \ on the allocated IPv4 address for global Internet connectivity.\n   This also\
    \ limits the Internet capability of the equipment to being\n   mainly a receiver\
    \ of Internet data, and it makes it quite hard for\n   the equipment to become\
    \ a worldwide Internet server (HTTP, FTP, etc.)\n   due to the stateful operation\
    \ of the NAT equipment.\n   When using IPv6 LNP, this group will identify the\
    \ users that are\n   connected via a single IPv6 address and use a single piece\
    \ of\n   equipment (PC, PDA, etc.).\n   In the IPv6 world, the assumption is that\
    \ there is unrestricted\n   availability of a large amount of globally routable\
    \ and unique IPv6\n   addresses.  The ISP will not be motivated to allocate private\n\
    \   addresses to the single user connection because he has enough global\n   addresses\
    \ available, if scarcity was the motivation with IPv4 to\n   provide RFC 1918\
    \ addresses.  If the single user wants to mask his\n   identity, he may choose\
    \ to enable IPv6 privacy extensions.\n"
- title: 5.4.  ISP/Carrier Customer Networks
  contents:
  - "5.4.  ISP/Carrier Customer Networks\n   This group refers to the actual service\
    \ providers that are providing\n   the IP access and transport services.  They\
    \ tend to have three\n   separate IP domains that they support:\n   o  For the\
    \ first, they fall into the medium/large private networks\n      category (above)\
    \ for their own internal networks, LANs, etc.\n   o  The second is the Operations\
    \ address domain, which addresses their\n      backbone and access switches, and\
    \ other hardware.  This address\n      domain is separate from the other address\
    \ domains for engineering\n      reasons as well as simplicity in managing the\
    \ security of the\n      backbone.\n   o  The third is the IP addresses (single\
    \ or blocks) that they assign\n      to customers.  These can be registered addresses\
    \ (usually given to\n      category 5.1 and 5.2 and sometimes 5.3) or can be from\
    \ a pool of\n      RFC 1918 addresses used with IPv4 NAT for single user connections.\n\
    \      Therefore they can actually have two different NAT domains that\n     \
    \ are not connected (internal LAN and single user customers).\n   When IPv6 LNP\
    \ is utilized in these three domains, then for the first\n   category it will\
    \ be possible to use the same solutions as described\n   in Section 5.1.  The\
    \ second domain of the ISP/carrier is the\n   Operations network.  This environment\
    \ tends to be a closed\n   environment, and consequently communication can be\
    \ done based on\n   ULAs.  However, in this environment, stable IPv6 Provider\
    \ Independent\n   addresses can be used.  This would give a solid and scalable\n\
    \   configuration with respect to a local IPv6 address plan.  By the\n   usage\
    \ of proper network edge filters, outside access to the closed\n   environment\
    \ can be avoided.  The third is the IPv6 addresses that\n   ISP/carrier network\
    \ assign to customers.  These will typically be\n   assigned with prefix lengths\
    \ terminating on nibble boundaries to be\n   consistent with the DNS PTR records.\
    \  As scarcity of IPv6 addresses\n   is not a concern, it will be possible for\
    \ the ISP to provide globally\n   routable IPv6 prefixes without a requirement\
    \ for address translation.\n   An ISP may for commercial reasons still decide\
    \ to restrict the\n   capabilities of the end users by other means like traffic\
    \ and/or\n   route filtering, etc.\n   If the carrier network is a mobile provider,\
    \ then IPv6 is encouraged\n   in comparison with the combination of IPv4+NAT for\
    \ Third Generation\n   Partnership Project (3GPP)-attached devices.  In Section\
    \ 2.3 of RFC\n   3314, 'Recommendations for IPv6 in 3GPP Standards' [9], it is\
    \ found\n   that the IPv6 WG recommends that one or more /64 prefixes should be\n\
    \   assigned to each primary Protocol Data Packet (PDP) context.  This\n   will\
    \ allow sufficient address space for a 3GPP-attached node to\n   allocate privacy\
    \ addresses and/or route to a multi-link subnet, and\n   it will discourage the\
    \ use of NAT within 3GPP-attached devices.\n"
- title: 6.  IPv6 Gap Analysis
  contents:
  - "6.  IPv6 Gap Analysis\n   Like IPv4 and any major standards effort, IPv6 standardization\
    \ work\n   continues as deployments are ongoing.  This section discusses several\n\
    \   topics for which additional standardization, or documentation of best\n  \
    \ practice, is required to fully realize the benefits or provide\n   optimizations\
    \ when deploying LNP.  From a standardization\n   perspective, there is no obstacle\
    \ to immediate deployment of the LNP\n   approach in many scenarios, though product\
    \ implementations may lag\n   behind the standardization efforts.  That said,\
    \ the list below\n   identifies additional work that should be undertaken to cover\
    \ the\n   missing scenarios.\n"
- title: 6.1.  Simple Security
  contents:
  - "6.1.  Simple Security\n   Firewall traversal by dynamic pinhole management requires\
    \ further\n   study.  Several partial solutions exist including Interactive\n\
    \   Connectivity Establishment (ICE) [23], and Universal Plug and Play\n   (UPNP)\
    \ [24].  Alternative approaches are looking to define service\n   provider mediated\
    \ pinhole management, where things like voice call\n   signaling could dynamically\
    \ establish pinholes based on predefined\n   authentication rules.  The basic\
    \ security provided by a stateful\n   firewall will require some degree of default\
    \ configuration and\n   automation to mask the technical complexity from a consumer\
    \ who\n   merely wants a secure environment with working applications.  There\n\
    \   is no reason a stateful IPv6 firewall product cannot be shipped with\n   default\
    \ protection that is equal to or better than that offered by\n   today's IPv4/NAT\
    \ products.\n"
- title: 6.2.  Subnet Topology Masking
  contents:
  - "6.2.  Subnet Topology Masking\n   There really is no functional standards gap\
    \ here as a centrally\n   assigned pool of addresses in combination with host\
    \ routes in the IGP\n   is an effective way to mask topology for smaller deployments.\
    \  If\n   necessary, a best practice document could be developed describing the\n\
    \   interaction between DHCP and various IGPs that would in effect define\n  \
    \ Untraceable Addresses.\n   As an alternative for larger deployments, there is\
    \ no gap in the HA\n   tunneling approach when firewalls are configured to block\
    \ outbound\n   binding update messages.  A border Home Agent using internal\n\
    \   tunneling to the logical mobile (potentially rack mounted) node can\n   completely\
    \ mask all internal topology, while avoiding the strain from\n   a large number\
    \ of host routes in the IGP.  Some optimization work\n   could be done in Mobile\
    \ IP to define a policy message where a mobile\n   node would learn from the Home\
    \ Agent that it should not try to inform\n   its correspondent about route optimization\
    \ and thereby expose its\n   real location.  This optimization, which reduces\
    \ the load on the\n   firewall, would result in less optimal internal traffic\
    \ routing as\n   that would also transit the HA unless ULAs were used internally.\n\
    \   Trade-offs for this optimization work should be investigated in the\n   IETF.\n"
- title: 6.3.  Minimal Traceability of Privacy Addresses
  contents:
  - "6.3.  Minimal Traceability of Privacy Addresses\n   Privacy addresses [7] may\
    \ certainly be used to limit the traceability\n   of external traffic flows back\
    \ to specific hosts, but lacking a\n   topology masking component above they would\
    \ still reveal the subnet\n   address bits.  For complete privacy, a best practice\
    \ document\n   describing the combination of privacy addresses and topology masking\n\
    \   may be required.  This work remains to be done and should be pursued\n   by\
    \ the IETF.\n"
- title: 6.4.  Site Multihoming
  contents:
  - "6.4.  Site Multihoming\n   This complex problem has never been completely solved\
    \ for IPv4, which\n   is exactly why NAT has been used as a partial solution.\
    \  For IPv6,\n   after several years of work, the IETF has converged on an\n \
    \  architectural approach intended with service restoration as initial\n   aim\
    \ [22].  When this document was drafted, the IETF was actively\n   defining the\
    \ details of this approach to the multihoming problem.\n   The approach appears\
    \ to be most suitable for small and medium sites,\n   though it will conflict\
    \ with existing firewall state procedures.  At\n   this time, there are also active\
    \ discussions in the address\n   registries investigating the possibility of assigning\
    \ provider-\n   independent address space.  Their challenge is finding a reasonable\n\
    \   metric for limiting the number of organizations that would qualify\n   for\
    \ a global routing entry.  Additional work appears to be necessary\n   to satisfy\
    \ the entire range of requirements.\n"
- title: 7.  Security Considerations
  contents:
  - "7.  Security Considerations\n   While issues that are potentially security related\
    \ are discussed\n   throughout the document, the approaches herein do not introduce\
    \ any\n   new security concerns.  IPv4 NAT has been widely sold as a security\n\
    \   tool, and suppliers have been implementing address translation\n   functionality\
    \ in their firewalls, though the true impact of NATs on\n   security has been\
    \ previously documented in [2] and [4].\n   This document defines IPv6 approaches\
    \ that collectively achieve the\n   goals of the network manager without the negative\
    \ impact on\n   applications or security that are inherent in a NAT approach.\
    \  While\n   Section 6 identifies additional optimization work, to the degree\
    \ that\n   these techniques improve a network manager's ability to explicitly\n\
    \   audit or control access, and thereby manage the overall attack\n   exposure\
    \ of local resources, they act to improve local network\n   security.\n"
- title: 8.  Conclusion
  contents:
  - "8.  Conclusion\n   This document has described a number of techniques that may\
    \ be\n   combined on an IPv6 site to protect the integrity of its network\n  \
    \ architecture.  These techniques, known collectively as Local Network\n   Protection,\
    \ retain the concept of a well-defined boundary between\n   \"inside\" and \"\
    outside\" the private network and allow firewalling,\n   topology hiding, and\
    \ privacy.  However, because they preserve address\n   transparency where it is\
    \ needed, they achieve these goals without the\n   disadvantage of address translation.\
    \  Thus, Local Network Protection\n   in IPv6 can provide the benefits of IPv4\
    \ Network Address Translation\n   without the corresponding disadvantages.\n \
    \  The document has also identified a few ongoing IETF work items that\n   are\
    \ needed to realize 100% of the benefits of LNP.\n"
- title: 9.  Acknowledgements
  contents:
  - "9.  Acknowledgements\n   Christian Huitema has contributed during the initial\
    \ round table to\n   discuss the scope and goal of the document, while the European\
    \ Union\n   IST 6NET project acted as a catalyst for the work documented in this\n\
    \   note.  Editorial comments and contributions have been received from:\n   Fred\
    \ Templin, Chao Luo, Pekka Savola, Tim Chown, Jeroen Massar,\n   Salman Asadullah,\
    \ Patrick Grossetete, Fred Baker, Jim Bound, Mark\n   Smith, Alain Durand, John\
    \ Spence, Christian Huitema, Mark Smith,\n   Elwyn Davies, Daniel Senie, Soininen\
    \ Jonne, Kurt Erik Lindqvist,\n   Cullen Jennings, and other members of the v6ops\
    \ WG and IESG.\n"
- title: 10.  Informative References
  contents:
  - "10.  Informative References\n   [1]   Rekhter, Y., Moskowitz, R., Karrenberg,\
    \ D., Groot, G., and E.\n         Lear, \"Address Allocation for Private Internets\"\
    , BCP 5,\n         RFC 1918, February 1996.\n   [2]   Srisuresh, P. and M. Holdrege,\
    \ \"IP Network Address Translator\n         (NAT) Terminology and Considerations\"\
    , RFC 2663, August 1999.\n   [3]   Narten, T., Nordmark, E., and W. Simpson, \"\
    Neighbor Discovery\n         for IP Version 6 (IPv6)\", RFC 2461, December 1998.\n\
    \   [4]   Hain, T., \"Architectural Implications of NAT\", RFC 2993,\n       \
    \  November 2000.\n   [5]   Srisuresh, P. and K. Egevang, \"Traditional IP Network\
    \ Address\n         Translator (Traditional NAT)\", RFC 3022, January 2001.\n\
    \   [6]   Holdrege, M. and P. Srisuresh, \"Protocol Complications with the\n \
    \        IP Network Address Translator\", RFC 3027, January 2001.\n   [7]   Narten,\
    \ T. and R. Draves, \"Privacy Extensions for Stateless\n         Address Autoconfiguration\
    \ in IPv6\", RFC 3041, January 2001.\n   [8]   IAB and IESG, \"IAB/IESG Recommendations\
    \ on IPv6 Address\n         Allocations to Sites\", RFC 3177, September 2001.\n\
    \   [9]   Wasserman, M., \"Recommendations for IPv6 in Third Generation\n    \
    \     Partnership Project (3GPP) Standards\", RFC 3314,\n         September 2002.\n\
    \   [10]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C., and M.\n   \
    \      Carney, \"Dynamic Host Configuration Protocol for IPv6\n         (DHCPv6)\"\
    , RFC 3315, July 2003.\n   [11]  Draves, R., \"Default Address Selection for Internet\
    \ Protocol\n         version 6 (IPv6)\", RFC 3484, February 2003.\n   [12]  Troan,\
    \ O. and R. Droms, \"IPv6 Prefix Options for Dynamic Host\n         Configuration\
    \ Protocol (DHCP) version 6\", RFC 3633,\n         December 2003.\n   [13]  Huttunen,\
    \ A., Swander, B., Volpe, V., DiBurro, L., and M.\n         Stenberg, \"UDP Encapsulation\
    \ of IPsec ESP Packets\", RFC 3948,\n         January 2005.\n   [14]  Savola,\
    \ P. and B. Haberman, \"Embedding the Rendezvous Point\n         (RP) Address\
    \ in an IPv6 Multicast Address\", RFC 3956,\n         November 2004.\n   [15]\
    \  Arkko, J., Kempf, J., Zill, B., and P. Nikander, \"SEcure\n         Neighbor\
    \ Discovery (SEND)\", RFC 3971, March 2005.\n   [16]  Baker, F., Lear, E., and\
    \ R. Droms, \"Procedures for Renumbering\n         an IPv6 Network without a Flag\
    \ Day\", RFC 4192, September 2005.\n   [17]  Hinden, R. and B. Haberman, \"Unique\
    \ Local IPv6 Unicast\n         Addresses\", RFC 4193, October 2005.\n   [18] \
    \ Fuller, V. and T. Li, \"Classless Inter-domain Routing (CIDR):\n         The\
    \ Internet Address Assignment and Aggregation Plan\", BCP 122,\n         RFC 4632,\
    \ August 2006.\n   [19]  Dupont, F. and P. Savola, \"RFC 3041 Considered Harmful\"\
    , Work\n         in Progress, June 2004.\n   [20]  Chown, T., \"IPv6 Implications\
    \ for TCP/UDP Port Scanning\", Work\n         in Progress, October 2005.\n   [21]\
    \  Chown, T., Tompson, M., Ford, A., and S. Venaas, \"Things to\n         think\
    \ about when Renumbering an IPv6 network\", Work\n         in Progress, September\
    \ 2006.\n   [22]  Huston, G., \"Architectural Commentary on Site Multi-homing\n\
    \         using a Level 3 Shim\", Work in Progress, July 2005.\n   [23]  Rosenberg,\
    \ J., \"Interactive Connectivity Establishment (ICE): A\n         Methodology\
    \ for Network  Address Translator (NAT) Traversal for\n         Offer/Answer Protocols\"\
    , Work in Progress, October 2006.\n   [24]  \"Universal Plug and Play Web Site\"\
    , July 2005,\n         <http://www.upnp.org/>.\n"
- title: Appendix A.  Additional Benefits Due to Native IPv6 and Universal Unique
  contents:
  - "Appendix A.  Additional Benefits Due to Native IPv6 and Universal Unique\n  \
    \           Addressing\n   The users of native IPv6 technology and globally unique\
    \ IPv6\n   addresses have the potential to make use of the enhanced IPv6\n   capabilities,\
    \ in addition to the benefits offered by the IPv4\n   technology.\n"
- title: A.1.  Universal Any-to-Any Connectivity
  contents:
  - "A.1.  Universal Any-to-Any Connectivity\n   One of the original design points\
    \ of the Internet was any-to-any\n   connectivity.  The dramatic growth of Internet-connected\
    \ systems\n   coupled with the limited address space of the IPv4 protocol spawned\n\
    \   address conservation techniques.  NAT was introduced as a tool to\n   reduce\
    \ demand on the limited IPv4 address pool, but the side effect\n   of the NAT\
    \ technology was to remove the any-to-any connectivity\n   capability.  By removing\
    \ the need for address conservation (and\n   therefore NAT), IPv6 returns the\
    \ any-to-any connectivity model and\n   removes the limitations on application\
    \ developers.  With the freedom\n   to innovate unconstrained by NAT traversal\
    \ efforts, developers will\n   be able to focus on new advanced network services\
    \ (i.e., peer-to-peer\n   applications, IPv6-embedded IPsec communication between\
    \ two\n   communicating devices, instant messaging, Internet telephony, etc.)\n\
    \   rather than focusing on discovering and traversing the increasingly\n   complex\
    \ NAT environment.\n   It will also allow application and service developers to\
    \ rethink the\n   security model involved with any-to-any connectivity, as the\
    \ current\n   edge firewall solution in IPv4 may not be sufficient for any-to-any\n\
    \   service models.\n"
- title: A.2.  Auto-Configuration
  contents:
  - "A.2.  Auto-Configuration\n   IPv6 offers a scalable approach to minimizing human\
    \ interaction and\n   device configuration.  IPv4 implementations require touching\
    \ each end\n   system to indicate the use of DHCP vs. a static address and\n \
    \  management of a server with the pool size large enough for the\n   potential\
    \ number of connected devices.  Alternatively, IPv6 uses an\n   indication from\
    \ the router to instruct the end systems to use DHCP or\n   the stateless auto-configuration\
    \ approach supporting a virtually\n   limitless number of devices on the subnet.\
    \  This minimizes the number\n   of systems that require human interaction as\
    \ well as improves\n   consistency between all the systems on a subnet.  In the\
    \ case that\n   there is no router to provide this indication, an address for\
    \ use\n   only on the local link will be derived from the interface media layer\n\
    \   address.\n"
- title: A.3.  Native Multicast Services
  contents:
  - "A.3.  Native Multicast Services\n   Multicast services in IPv4 were severely\
    \ restricted by the limited\n   address space available to use for group assignments\
    \ and an implicit\n   locally defined range for group membership.  IPv6 multicast\
    \ corrects\n   this situation by embedding explicit scope indications as well\
    \ as\n   expanding to 4 billion groups per scope.  In the source-specific\n  \
    \ multicast case, this is further expanded to 4 billion groups per\n   scope per\
    \ subnet by embedding the 64 bits of subnet identifier into\n   the multicast\
    \ address.\n   IPv6 allows also for innovative usage of the IPv6 address length\
    \ and\n   makes it possible to embed the multicast Rendezvous Point (RP) [14]\n\
    \   directly in the IPv6 multicast address when using Any-Source\n   Multicast\
    \ (ASM).  This is not possible with the limited size of the\n   IPv4 address.\
    \  This approach also simplifies the multicast model\n   considerably, making\
    \ it easier to understand and deploy.\n"
- title: A.4.  Increased Security Protection
  contents:
  - "A.4.  Increased Security Protection\n   The security protection offered by native\
    \ IPv6 technology is more\n   advanced than IPv4 technology.  There are various\
    \ transport\n   mechanisms enhanced to allow a network to operate more securely\
    \ with\n   less performance impact:\n   o  IPv6 has the IPsec technology directly\
    \ embedded into the IPv6\n      protocol.  This allows for simpler peer-to-peer\
    \ authentication and\n      encryption, once a simple key/trust management model\
    \ is developed,\n      while the usage of some other less secure mechanisms is\
    \ avoided\n      (e.g., MD5 password hash for neighbor authentication).\n   o\
    \  While a firewall is specifically designed to disallow applications\n      based\
    \ on local policy, it does not interfere with those that are\n      allowed. \
    \ This is a security improvement over NAT, where the work-\n      arounds to enable\
    \ applications allowed by local policy are\n      effectively architected man-in-the-middle\
    \ attacks on the packets,\n      which precludes end-to-end auditing or IP level\
    \ identification.\n   o  All flows on the Internet will be better traceable due\
    \ to a unique\n      and globally routable source and destination IPv6 address.\
    \  This\n      may facilitate an easier methodology for back-tracing Denial of\n\
    \      Service (DoS) attacks and avoid illegal access to network\n      resources\
    \ by simpler traffic filtering.\n   o  The usage of private address space in IPv6\
    \ is now provided by\n      Unique Local Addresses, which will avoid conflict\
    \ situations when\n      merging networks and securing the internal communication\
    \ on a\n      local network infrastructure due to simpler traffic filtering\n\
    \      policy.\n   o  The technology to enable source-routing on a network\n \
    \     infrastructure has been enhanced to allow this feature to\n      function,\
    \ without impacting the processing power of intermediate\n      network devices.\
    \  The only devices impacted with the source-\n      routing will be the source\
    \ and destination node and the\n      intermediate source-routed nodes.  This\
    \ impact behavior is\n      different if IPv4 is used, because then all intermediate\
    \ devices\n      would have had to look into the source route header.\n"
- title: A.5.  Mobility
  contents:
  - "A.5.  Mobility\n   Anytime, anywhere, universal access requires MIPv6 services\
    \ in\n   support of mobile nodes.  While a Home Agent is required for initial\n\
    \   connection establishment in either protocol version, IPv6 mobile\n   nodes\
    \ are able to optimize the path between them using the MIPv6\n   option header,\
    \ while IPv4 mobile nodes are required to triangle route\n   all packets.  In\
    \ general terms, this will minimize the network\n   resources used and maximize\
    \ the quality of the communication.\n"
- title: A.6.  Merging Networks
  contents:
  - "A.6.  Merging Networks\n   When two IPv4 networks want to merge, it is not guaranteed\
    \ that both\n   networks are using different address ranges on some parts of the\n\
    \   network infrastructure due to the usage of RFC 1918 private\n   addressing.\
    \  This potential overlap in address space may complicate a\n   merging of two\
    \ and more networks dramatically due to the additional\n   IPv4 renumbering effort,\
    \ i.e., when the first network has a service\n   running (NTP, DNS, DHCP, HTTP,\
    \ etc.) that needs to be accessed by the\n   second merging network.  Similar\
    \ address conflicts can happen when\n   two network devices from these merging\
    \ networks want to communicate.\n   With the usage of IPv6, the addressing overlap\
    \ will not exist because\n   of the existence of the Unique Local Address usage\
    \ for private and\n   local addressing.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Gunter Van de Velde\n   Cisco Systems\n   De Kleetlaan\
    \ 6a\n   Diegem  1831\n   Belgium\n   Phone: +32 2704 5473\n   EMail: gunter@cisco.com\n\
    \   Tony Hain\n   Cisco Systems\n   500 108th Ave. NE\n   Bellevue, Wa.\n   USA\n\
    \   EMail: alh-ietf@tndh.net\n   Ralph Droms\n   Cisco Systems\n   1414 Massachusetts\
    \ Avenue\n   Boxborough, MA  01719\n   USA\n   EMail: rdroms@cisco.com\n   Brian\
    \ Carpenter\n   IBM\n   8 Chemin de Blandonnet\n   1214 Vernier,\n   CH\n   EMail:\
    \ brc@zurich.ibm.com\n   Eric Klein\n   Tel Aviv University\n   Tel Aviv,\n  \
    \ Israel\n   EMail: ericlklein.ipv6@gmail.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2007).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
