- contents:
  - ' Session Initiation Protocol Event Package for Voice Quality Reporting

    '
  title: __initial_text__
- contents:
  - "Abstract\n   This document defines a Session Initiation Protocol (SIP) event\n
    \  package that enables the collection and reporting of metrics that\n   measure
    the quality for Voice over Internet Protocol (VoIP) sessions.\n   Voice call quality
    information derived from RTP Control Protocol\n   Extended Reports (RTCP-XR) and
    call information from SIP is conveyed\n   from a User Agent (UA) in a session,
    known as a reporter, to a third\n   party, known as a collector.  A registration
    for the application/ vq-\n   rtcpxr media type is also included.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    5741.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc6035.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2010 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (http://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n   This document may contain
    material from IETF Documents or IETF\n   Contributions published or made publicly
    available before November\n   10, 2008.  The person(s) controlling the copyright
    in some of this\n   material may not have granted the IETF Trust the right to
    allow\n   modifications of such material outside the IETF Standards Process.\n
    \  Without obtaining an adequate license from the person(s) controlling\n   the
    copyright in such materials, this document may not be modified\n   outside the
    IETF Standards Process, and derivative works of it may\n   not be created outside
    the IETF Standards Process, except to format\n   it for publication as an RFC
    or to translate it into languages other\n   than English.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n
    \     1.1. Applicability Statement ....................................4\n      1.2.
    Use of the Mechanism .......................................4\n   2. Terminology
    .....................................................6\n   3. SIP Events for VoIP
    Quality Reporting ...........................6\n      3.1. SUBSCRIBE NOTIFY Method
    ....................................6\n      3.2. PUBLISH Method .............................................7\n
    \     3.3. Multi-Party and Multi-Segment Calls ........................7\n      3.4.
    Overload Avoidance .........................................7\n   4. Event Package
    Formal Definition .................................8\n      4.1. Event Package
    Name .........................................8\n      4.2. Event Package Parameters
    ...................................8\n      4.3. SUBSCRIBE Bodies ...........................................8\n
    \     4.4. Subscribe Duration .........................................8\n      4.5.
    NOTIFY Bodies ..............................................8\n      4.6. Voice
    Quality Event and Semantics .........................10\n           4.6.1. ABNF
    Syntax Definition .............................10\n           4.6.2. Parameter
    Definitions and Mappings .................21\n      4.7. Message Flow and Syntax
    Examples ..........................29\n           4.7.1. End of Session Report
    Using NOTIFY .................29\n           4.7.2. Midsession Threshold Violation
    Using NOTIFY ........32\n           4.7.3. End of Session Report Using PUBLISH
    ................35\n           4.7.4. Alert Report Using PUBLISH .........................37\n
    \     4.8. Configuration Dataset for vq-rtcpxr Events ................39\n   5.
    IANA Considerations ............................................39\n      5.1.
    SIP Event Package Registration ............................39\n      5.2. application/vq-rtcpxr
    Media Type Registration .............39\n   6. Security Considerations ........................................40\n
    \  7. Contributors ...................................................40\n   8.
    References .....................................................40\n      8.1.
    Normative References ......................................40\n      8.2. Informative
    References ....................................41\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   Real-time communications over IP networks use SIP for signaling
    with\n   RTP/RTCP for media transport and reporting, respectively.  These\n   protocols
    are very flexible and can support an extremely wide\n   spectrum of usage scenarios.
    \ For this reason, extensions to these\n   protocols must be specified in the
    context of a specific usage\n   scenario.  In this memo, extensions to SIP are
    proposed to support\n   the reporting of RTP Control Protocol Extended Reports
    [4] metrics.\n"
  - contents:
    - "1.1.  Applicability Statement\n   RTP is utilized in many different architectures
      and topologies.  RFC\n   5117 [13] lists and describes the following topologies:
      point-to-\n   point, point-to-multipoint using multicast, point-to-multipoint
      using\n   the translator from RFC 3550, point-to-multipoint using the mixer\n
      \  model from RFC 3550, point-to-multipoint using video-switching\n   Multipoint
      Control Units (MCUs), point-to-multipoint using RTCP-\n   terminating MCU, and
      non-symmetric mixer/translators.  As the\n   Abstract of this document points
      out, this specification is for\n   reporting quality of Voice over Internet
      Protocol (VoIP) sessions.\n   As such, only the first topology, point to point,
      is currently\n   supported by this specification.  This reflects both current
      VoIP\n   deployments, which are predominantly point to point using unicast,\n
      \  and the state of research in the area of quality.\n   How to accurately report
      the quality of a multipart conference or a\n   session involving multiple hops
      through translators and mixers is\n   currently an area of research in the industry.
      \ However, this\n   mechanism can easily be used for centrally mixed conference
      calls, in\n   which each leg of the conferences is just a point-to-point call.\n
      \  This mechanism could be extended to cover additional RTP topologies\n   in
      the future once these topics progress out of the realm of research\n   and into
      actual Internet deployments.\n"
    title: 1.1.  Applicability Statement
  - contents:
    - "1.2.  Use of the Mechanism\n   RTCP reports are usually sent to other participating
      endpoints in a\n   session.  This can make the collection of performance information
      by\n   an administrator or management system quite complex to implement.  In\n
      \  the usage scenarios addressed in this memo, the data contained in\n   RTCP
      XR VoIP metrics reports (RFC 3611 [4]) are forwarded to a\n   central collection
      server systems using SIP.\n   Applications residing in the server or elsewhere
      can aid in network\n   management to alleviate bandwidth constraints and also
      to support\n   customer service by identifying and acknowledging calls of poor\n
      \  quality.  However, specifying such applications is beyond the scope\n   of
      this paper.\n   There is a large portfolio of quality parameters that can be\n
      \  associated with VoIP, but only a minimal necessary number of\n   parameters
      are included on the RTCP-XR reports:\n   1.  The codec type, as resulting from
      the Session Description\n       Protocol (SDP) offer-answer negotiation in SIP,\n
      \  2.  The burst gap loss density and max gap duration, since voice cut-\n       outs
      are the most annoying quality impairment in VoIP,\n   3.  Round-trip delay,
      because it is critical to conversational\n       quality,\n   4.  Conversational
      quality as a catch-all for other voice quality\n       impairments, such as
      randomly distributed packet loss, jitter,\n       annoying silent suppression
      effects, etc.\n   In specific usage scenarios where other parameters are required,\n
      \  designers can include other parameters beyond the scope of this\n   paper.\n
      \  RTCP reports are best effort only, and though they are very useful,\n   they
      have a number of limitations as discussed in [3].  This must be\n   considered
      when using RTCP reports in managed networks.\n   This document defines a new
      SIP event package, vq-rtcpxr, and a new\n   MIME type, application/vq-rtcpxr,
      that enable the collection and\n   reporting of metrics that measure quality
      for RTP [3] sessions.  The\n   definitions of the metrics used in the event
      package are based on\n   RTCP Extended Reports [4] and RTCP [3]; a mapping between
      the SIP\n   event parameters and the parameters within the aforementioned RFCs
      is\n   defined within this document in Section 4.6.2.\n   Monitoring of voice
      quality is believed to be the highest priority\n   for usage of this mechanism,
      and as such, the metrics in the event\n   package are largely tailored for voice
      quality measurements.  The\n   event package is designed to be extensible.  However,
      the negotiation\n   of such extensions is not defined in this document.\n   The
      event package supports reporting the voice quality metrics for\n   both the
      inbound and outbound directions.  Voice quality metrics for\n   the inbound
      direction can generally be computed locally by the\n   reporting endpoint; however,
      voice quality metrics for the outbound\n   direction are computed by the remote
      endpoint and sent to the\n   reporting endpoint using the RTCP Extended Reports
      [4].\n   The configuration of the usage of this event package is not covered\n
      \  in this document.  It is the recommendation of this document that the\n   SIP
      configuration framework [15] be used.  This is discussed in\n   Section 4.8.\n
      \  The event package SHOULD be used with the SUBSCRIBE/NOTIFY method;\n   however,
      it MAY also be used with the PUBLISH method [8] for backward\n   compatibility
      with some existing implementations.  Message flow\n   examples for both methods
      are provided in this document.\n"
    title: 1.2.  Use of the Mechanism
  title: 1.  Introduction
- contents:
  - "2.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\",
    \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\"
    in this\n   document are to be interpreted as described in BCP 14, RFC 2119 [1].\n"
  title: 2.  Terminology
- contents:
  - "3.  SIP Events for VoIP Quality Reporting\n   This document defines a SIP events
    package [5] for Voice over IP\n   performance reporting.  A SIP UA can send these
    events to an entity\n   that can make the information available to other applications.
    \ For\n   purposes of illustration, the entities involved in SIP vq-rtcpxr\n   event
    reporting will be referred to as follows:\n   o  REPORTER: an entity involved
    in the measurement and reporting of\n      media quality, i.e., the SIP UA involved
    in a media session.\n   o  COLLECTOR: an entity that receives SIP vq-rtcpxr events.
    \ A\n      COLLECTOR may be a proxy server or another entity that is capable\n
    \     of supporting SIP vq-rtcpxr events.\n"
  - contents:
    - "3.1.  SUBSCRIBE NOTIFY Method\n   The COLLECTOR SHALL send a SUBSCRIBE to the
      REPORTER to explicitly\n   establish the relationship.  The REPORTER SHOULD
      send the voice\n   quality metric reports using the NOTIFY method.  The REPORTER
      MUST\n   NOT send any vq-rtcpxr events if a COLLECTOR address has not been\n
      \  configured.  The REPORTER populates the Request-URI according to the\n   rules
      for an in-dialog request.  The COLLECTOR MAY send a SUBSCRIBE\n   to a SIP Proxy
      acting on behalf of the reporting SIP UAs.\n"
    title: 3.1.  SUBSCRIBE NOTIFY Method
  - contents:
    - "3.2.  PUBLISH Method\n   A SIP UA that supports this specification MAY also
      send the service\n   quality metric reports using the PUBLISH method [8]; however,
      this\n   approach SHOULD NOT be used, in general, on the public Internet.  The\n
      \  PUBLISH method MAY be supported for backward compatibility with\n   existing
      implementations.\n   The REPORTER MAY therefore populate the Request-URI of
      the PUBLISH\n   method with the address of the COLLECTOR.  To ensure security
      of SIP\n   proxies and the COLLECTOR, the REPORTER MUST be configured with the\n
      \  address of the COLLECTOR, preferably using the SIP UA configuration\n   framework
      [15], as described in Section 5.8.\n   It is RECOMMENDED that the REPORTER send
      an OPTIONS message to the\n   COLLECTOR to ensure support of the PUBLISH message.\n
      \     If PUBLISH is not supported, then the REPORTER can only wait for a\n      SUBSCRIBE
      request from the COLLECTOR and then deliver the\n      information in NOTIFYs.
      \ If a REPORTER sends a PUBLISH to a\n      COLLECTOR that does not support
      or allow this method, a 501 Not\n      Implemented or a 405 Method Not Allowed
      response will be received,\n      and the REPORTER will stop publication.\n"
    title: 3.2.  PUBLISH Method
  - contents:
    - "3.3.  Multi-Party and Multi-Segment Calls\n   A voice quality metric report
      may be sent for each session\n   terminating at the REPORTER, and it may contain
      multiple report\n   bodies.  For a multi-party call, the report MAY contain
      report bodies\n   for the session between the reporting endpoint and each remote\n
      \  endpoint for which there was an RTP session during the call.\n   Multi-party
      services such as call hold and call transfer can result\n   in the user participating
      in a series of concatenated sessions,\n   potentially with different choices
      of codec or sample rate, although\n   these may be perceived by the user as
      a single call.  A REPORTER MAY\n   send a voice quality metric report at the
      end of each session or MAY\n   send a single voice quality metric report containing
      an application/\n   vq-rtcpxr body for each segment of the call.\n"
    title: 3.3.  Multi-Party and Multi-Segment Calls
  - contents:
    - "3.4.  Overload Avoidance\n   Users of this extension should ensure that they
      implement general SIP\n   mechanisms for avoiding overload.  For instance, an
      overloaded proxy\n   or COLLECTOR MUST send a 503 Service Unavailable or other
      5xx\n   response with an appropriate Retry-After time specified.  REPORTERs\n
      \  MUST act on these responses and respect the Retry-After time\n   interval.
      \ In addition, future SIP extensions to better handle\n   overload as covered
      in [14] should be followed as they are\n   standardized.\n   To avoid overload
      of SIP Proxies or COLLECTORS, it is important to do\n   capacity planning and
      to minimize the number of reports that are\n   sent.\n   Approaches to avoiding
      overload include:\n   a.  Send only one report at the end of each call.\n   b.
      \ Use interval reports only on \"problem\" calls that are being\n       closely
      monitored.\n   c.  Limit the number of alerts that can be sent to a maximum
      of one\n       per call.\n"
    title: 3.4.  Overload Avoidance
  title: 3.  SIP Events for VoIP Quality Reporting
- contents:
  - '4.  Event Package Formal Definition

    '
  - contents:
    - "4.1.  Event Package Name\n   This document defines a SIP Event Package.  SIP
      Event Packages were\n   originally defined in RFC 3265 [5].\n"
    title: 4.1.  Event Package Name
  - contents:
    - "4.2.  Event Package Parameters\n   No event package parameters are defined.\n"
    title: 4.2.  Event Package Parameters
  - contents:
    - "4.3.  SUBSCRIBE Bodies\n   SUBSCRIBE bodies are described by this specification.\n"
    title: 4.3.  SUBSCRIBE Bodies
  - contents:
    - "4.4.  Subscribe Duration\n   Subscriptions to this event package MAY range
      from minutes to weeks.\n   Subscriptions in hours or days are more typical and
      are RECOMMENDED.\n   The default subscription duration for this event package
      is one hour.\n"
    title: 4.4.  Subscribe Duration
  - contents:
    - "4.5.  NOTIFY Bodies\n   There are three notify bodies: a Session report, an
      Interval report,\n   and an Alert report.\n   The Session report SHOULD be used
      for reporting when a voice media\n   session terminates, when a media change
      occurs, such as a codec\n   change or a session fork, or when a session terminates
      due to no\n   media packets being received and MUST NOT be used for reporting
      at\n   arbitrary points in time.  This report MUST be used for cumulative\n
      \  metric reporting and the report timestamps MUST be from the start of\n   a
      media session to the time at which the report is generated.\n   The Interval
      report SHOULD be used for periodic or interval reporting\n   and MUST NOT be
      used for reporting of the complete media session.\n   This report is intended
      to capture short duration metric reporting\n   and the report intervals SHOULD
      be non-overlapping time windows.\n   The Alert report MAY be used when voice
      quality degrades during a\n   session.  The time window to which an Alert report
      relates MAY be a\n   short time interval or from the start of the call to the
      point the\n   alert is generated; this time window SHOULD be selected to provide\n
      \  the most useful information to support problem diagnosis.\n   Session, Interval,
      and Alert reports MUST populate the metrics with\n   values that are measured
      over the interval explicitly defined by the\n   \"start\" and \"stop\" timestamps.\n
      \  Voice quality summary reports reference only one codec (payload\n   type).
      \ This payload type SHOULD be the main voice payload, not\n   comfort noise
      or telephone event payloads.  For applications that\n   consistently and rapidly
      switch codecs, the most used codec should be\n   reported.  All values in the
      report, such as IP addresses,\n   synchronization source (SSRC), etc., represent
      those values as\n   received by the REPORTER.  In some scenarios, these may
      not be the\n   same on either end of the session -- the COLLECTOR will need
      logic to\n   be able to put these sessions together.  The values of parameters\n
      \  such as sample rate, frame duration, frame octets, packets per\n   second,
      round-trip delay, etc., depend on the type of report in which\n   they are present.
      \ If present in a Session or an Interval report,\n   they represent average
      values over the session or interval.  If\n   present in an Alert report, they
      represent instantaneous values.\n   The REPORTER always includes local quality
      reporting information and\n   should, if possible, share remote quality reporting
      information to\n   the COLLECTOR.  This remote quality could be available from
      received\n   RTCP-XR reports or other sources.  Reporting this is useful in
      cases\n   where the other end might support RTCP-XR but not this voice quality\n
      \  reporting.\n   This specification defines a new MIME type, application/vq-rtcpxr,\n
      \  which is a text encoding of the RTCP and RTCP-XR statistics with some\n   additional
      metrics and correlation information.\n"
    title: 4.5.  NOTIFY Bodies
  - contents:
    - "4.6.  Voice Quality Event and Semantics\n   This section describes the syntax
      extensions required for event\n   publication in SIP.  The formal syntax definitions
      described in this\n   section are expressed in the Augmented BNF [6] format
      used in SIP [2]\n   and contain references to elements defined therein.\n   Additionally,
      the definition of the timestamp format is provided in\n   [7].  Note that most
      of the parameters are optional.  In practice,\n   most implementations will
      send a subset of the parameters.  It is not\n   the intention of this document
      to define what parameters may or may\n   not be useful for monitoring the quality
      of a voice session, but to\n   enable reporting of voice quality.  As such,
      the syntax allows the\n   implementer to choose which metrics are most appropriate
      for their\n   solution.  As there are no \"invalid\", \"unknown\", or \"not
      applicable\"\n   values in the syntax, the intention is to exclude any parameters
      for\n   which values are not available, not applicable, or unknown.\n   The
      authors recognize that implementers may need to add new parameter\n   lines
      to the reports and new metrics to the existing parameter lines.\n   The extension
      tokens are intended to fulfill this need.\n"
    - contents:
      - '4.6.1.  ABNF Syntax Definition

        '
      - 'VQReportEvent  =  AlertReport /  SessionReport / IntervalReport

        '
      - "SessionReport = \"VQSessionReport\" [ HCOLON \"CallTerm\" ] CRLF\n            SessionInfo
        \ CRLF\n            LocalMetrics [ CRLF RemoteMetrics ]\n            [ CRLF
        DialogID ]\n"
      - '; CallTerm indicates the final report of a session.

        '
      - "IntervalReport = \"VQIntervalReport\" [ HCOLON \"CallTerm\" ] CRLF\n            SessionInfo
        \ CRLF\n            LocalMetrics [ CRLF RemoteMetrics ]\n            [ CRLF
        DialogID ]\n"
      - 'LocalMetrics  = "LocalMetrics" HCOLON CRLF Metrics

        '
      - 'RemoteMetrics = "RemoteMetrics" HCOLON CRLF Metrics

        '
      - "AlertReport   = \"VQAlertReport\" HCOLON\n      MetricType WSP Severity WSP
        Direction CRLF\n      SessionInfo  CRLF\n      LocalMetrics [ CRLF RemoteMetrics
        ]\n      [ DialogID ]\n"
      - "SessionInfo =\n   CallID CRLF\n   LocalID CRLF\n   RemoteID CRLF\n   OrigID
        CRLF\n   LocalAddr CRLF\n   RemoteAddr CRLF\n   LocalGroupID CRLF\n   RemoteGroupID
        CRLF\n   [ LocalMACAddr CRLF ]\n   [ RemoteMACAddr CRLF ]\n"
      - "Metrics = TimeStamps CRLF\n   [ SessionDescription CRLF ]\n   [ JitterBuffer
        CRLF ]\n   [ PacketLoss CRLF ]\n   [ BurstGapLoss CRLF ]\n   [ Delay CRLF
        ]\n   [ Signal CRLF ]\n   [ QualityEstimates CRLF ]\n   *(Extension CRLF)\n"
      - '; Timestamps are provided in Coordinated Universal Time (UTC)

        '
      - '; using the ABNF format provided in RFC 3339,

        '
      - ';  "Date and Time on the Internet: Timestamps"

        '
      - '; These timestamps SHOULD reflect, as closely as

        '
      - '; possible, the actual time during which the media session

        '
      - '; was running to enable correlation to events occurring

        '
      - '; in the network infrastructure and to accounting records.

        '
      - '; Time zones other than "Z" are not allowed.

        '
      - 'TimeStamps = "Timestamps" HCOLON StartTime WSP StopTime

        '
      - 'StartTime  = "START" EQUAL date-time

        '
      - 'StopTime   = "STOP" EQUAL date-time

        '
      - '; SessionDescription provides a shortened version of the

        '
      - '; session SDP but contains only the relevant parameters for

        '
      - '; session quality reporting purposes.

        '
      - "SessionDescription  = \"SessionDesc\" HCOLON\n   [ PayloadType WSP ]\n   [
        PayloadDesc WSP ]\n   [ SampleRate WSP ]\n   [ PacketsPerSecond WSP ]\n   [
        FrameDuration WSP ]\n   [ FrameOctets WSP ]\n   [ FramesPerPacket WSP ]\n
        \  [ FmtpOptions WSP ]\n   [ PacketLossConcealment WSP ]\n   [ SilenceSuppressionState
        ]\n   *(WSP Extension)\n"
      - '; PayloadType provides the PT parameter used in the RTP packets.

        '
      - 'PayloadType  = "PT" EQUAL (1*3DIGIT)

        '
      - '; PayloadDesc provides a text description of the codec.

        '
      - '; This parameter SHOULD use the IANA registry for

        '
      - '; media-type names defined by RFC 4855 where it unambiguously

        '
      - '; defines the codec.  Refer to the "Audio Media Types"

        '
      - '; registry on http://www.iana.org.

        '
      - 'PayloadDesc  = "PD" EQUAL (word / DQUOTE word-plus DQUOTE)

        '
      - '; SampleRate reports the rate at which a voice was sampled

        '
      - '; in the case of narrowband codecs, this value will typically

        '
      - '; be 8000.

        '
      - '; For codecs that are able to change sample rates, the lowest and

        '
      - '; highest sample rates MUST be reported (e.g., 8000;16000).

        '
      - 'SampleRate = "SR" EQUAL (1*6DIGIT) *(SEMI (1*66DIGIT))

        '
      - '; FrameDuration can be combined with the FramesPerPacket

        '
      - '; to determine the packetization rate; the units for

        '
      - '; FrameDuration are milliseconds.  NOTE: for frame-based codecs,

        '
      - '; each frame constitutes a single frame; for sample-based codecs,

        '
      - '; a "frame" refers to the set of samples carried in an RTP packet.

        '
      - 'FrameDuration = "FD" EQUAL (1*4DIGIT)

        '
      - '; FrameOctets provides the number of octets in each frame

        '
      - '; at the time the report is generated (i.e., last value).

        '
      - '; This MAY be used where FrameDuration is not available.

        '
      - '; NOTE: for frame-based codecs, each frame constitutes a single frame;

        '
      - '; for sample-based codecs, a "frame" refers to the set of samples

        '
      - '; carried in an RTP packet.

        '
      - 'FrameOctets  = "FO" EQUAL (1*5DIGIT)

        '
      - '; FramesPerPacket provides the number of frames in each RTP

        '
      - '; packet at the time the report is generated.

        '
      - '; NOTE: for frame-based codecs, each frame constitutes a single frame;

        '
      - '; for sample-based codecs, a "frame" refers to the set of samples

        '
      - '; carried in an RTP packet.

        '
      - 'FramesPerPacket = "FPP" EQUAL (1*2DIGIT)

        '
      - '; Packets per second provides the average number of packets

        '
      - '; that are transmitted per second, as at the time the report is

        '
      - '; generated.

        '
      - 'PacketsPerSecond = "PPS" EQUAL (1*5DIGIT)

        '
      - '; FMTP options from SDP.  Note that the parameter is delineated

        '
      - '; by " " to avoid parsing issues in transitioning between SDP

        '
      - '; and SIP parsing.

        '
      - 'FmtpOptions = "FMTP" EQUAL DQUOTE word-plus DQUOTE

        '
      - '; PacketLossConcealment indicates whether a PLC algorithm was

        '
      - '; or is being used for the session.  The values follow the same

        '
      - '; numbering convention as RFC 3611 [4].

        '
      - '; 0 - unspecified

        '
      - '; 1 - disabled

        '
      - '; 2 - enhanced

        '
      - '; 3 - standard

        '
      - 'PacketLossConcealment  = "PLC" EQUAL ("0" / "1" / "2" / "3")

        '
      - '; SilenceSuppressionState indicates whether silence suppression,

        '
      - '; also known as Voice Activity Detection (VAD) is enabled.

        '
      - 'SilenceSuppressionState  = "SSUP" EQUAL ("on" / "off")

        '
      - '; CallId provides the call id from the SIP dialog.

        '
      - 'CallID  =  "CallID" HCOLON Call-ID-Parm

        '
      - '; LocalID identifies the reporting endpoint for the media session [2].

        '
      - 'LocalID = "LocalID" HCOLON (name-addr/addr-spec)

        '
      - '; RemoteID identifies the remote endpoint of the media session [2].

        '
      - 'RemoteID = "RemoteID" HCOLON (name-addr/addr-spec)

        '
      - '; OrigID identifies the endpoint which originated the session.

        '
      - 'OrigID = "OrigID" HCOLON (name-addr/addr-spec)

        '
      - '; LocalAddr provides the IP address, port, and SSRC of the

        '
      - '; endpoint/UA, which is the receiving end of the stream being

        '
      - '; measured.

        '
      - 'LocalAddr   = "LocalAddr" HCOLON IPAddress WSP Port WSP Ssrc

        '
      - '; RemoteAddr provides the IP address, port, and SSRC of the

        '
      - '; the source of the stream being measured.

        '
      - 'RemoteAddr  = "RemoteAddr" HCOLON IPAddress WSP Port WSP Ssrc

        '
      - '; LocalMACAddr provides the Media Access Control (MAC) address

        '
      - '; of the local SIP device.

        '
      - 'LocalMACAddr   = "LocalMAC" HCOLON hex2 *(":" hex2)

        '
      - '; RemoteMACAddr provides the MAC address

        '
      - '; of the remote SIP device.

        '
      - 'RemoteMACAddr   = "RemoteMAC" HCOLON hex2 *(":" hex2)

        '
      - '; LocalGroupID provides the identification for the purposes

        '
      - '; of aggregation for the local endpoint.

        '
      - 'LocalGroupID = "LocalGroup" HCOLON word-plus

        '
      - '; RemoteGroupID provides the identification for the purposes

        '
      - '; of aggregation for the remote endpoint.

        '
      - 'RemoteGroupID = "RemoteGroup" HCOLON word-plus

        '
      - '; For clarification, the LocalAddr in the LocalMetrics report

        '
      - '; MUST be the RemoteAddr in the RemoteMetrics report.

        '
      - 'IPAddress   = "IP" EQUAL IPv6address / IPv4address

        '
      - 'Port        = "PORT" EQUAL 1*DIGIT

        '
      - 'Ssrc        = "SSRC" EQUAL ( %x30.78 1*8HEXDIG)

        '
      - "JitterBuffer = \"JitterBuffer\" HCOLON\n   [ JitterBufferAdaptive WSP ]\n
        \  [ JitterBufferRate WSP ]\n   [ JitterBufferNominal WSP ]\n   [ JitterBufferMax
        WSP ]\n   [ JitterBufferAbsMax ]\n   *(WSP Extension)\n"
      - '; JitterBufferAdaptive indicates whether the jitter buffer in

        '
      - '; the endpoint is adaptive, static, or unknown.

        '
      - '; The values follow the same numbering convention as RFC 3611 [4].

        '
      - '; For more details, please refer to that document.

        '
      - '; 0 - unknown

        '
      - '; 1 - reserved

        '
      - '; 2 - non-adaptive

        '
      - '; 3 - adaptive

        '
      - 'JitterBufferAdaptive  = "JBA" EQUAL ("0" / "1" / "2" / "3")

        '
      - '; JitterBuffer metric definitions are provided in RFC 3611 [4].

        '
      - 'JitterBufferRate      = "JBR" EQUAL (1*2DIGIT) ;0-15

        '
      - 'JitterBufferNominal   = "JBN" EQUAL (1*5DIGIT) ;0-65535

        '
      - 'JitterBufferMax       = "JBM" EQUAL (1*5DIGIT) ;0-65535

        '
      - 'JitterBufferAbsMax    = "JBX" EQUAL (1*5DIGIT) ;0-65535

        '
      - '; PacketLoss metric definitions are provided in RFC 3611 [4].

        '
      - "PacketLoss = \"PacketLoss\" HCOLON\n           [ NetworkPacketLossRate WSP
        ]\n           [ JitterBufferDiscardRate ]\n           *(WSP Extension)\n"
      - "NetworkPacketLossRate =\n  \"NLR\" EQUAL (1*3DIGIT [ \".\" 1*2DIGIT ]) ;percentage\n"
      - "JitterBufferDiscardRate =\n  \"JDR\" EQUAL (1*3DIGIT [ \".\" 1*2DIGIT ])
        ;percentage\n"
      - '; BurstGapLoss metric definitions are provided in RFC 3611 [4].

        '
      - "BurstGapLoss = \"BurstGapLoss\" HCOLON\n   [ BurstLossDensity WSP ]\n   [
        BurstDuration WSP ]\n   [ GapLossDensity WSP ]\n   [ GapDuration WSP ]\n   [
        MinimumGapThreshold ]\n   *(WSP Extension)\n"
      - "BurstLossDensity =\n \"BLD\" EQUAL (1*3DIGIT [ \".\" 1*2DIGIT ]) ;percentage\n"
      - "BurstDuration =\n \"BD\" EQUAL (1*7DIGIT) ;0-3,600,000 -- milliseconds\n"
      - "GapLossDensity =\n \"GLD\" EQUAL (1*3DIGIT [ \".\" 1*2DIGIT ]) ;percentage\n"
      - "GapDuration =\n \"GD\" EQUAL (1*7DIGIT) ;0-3,600,000 -- milliseconds\n"
      - "MinimumGapThreshold =\n \"GMIN\" EQUAL (1*3DIGIT) ;1-255\n"
      - "Delay = \"Delay\" HCOLON\n   [ RoundTripDelay WSP ]\n   [ EndSystemDelay
        WSP ]\n   [ OneWayDelay WSP ]\n   [ SymmOneWayDelay WSP ]\n   [ InterarrivalJitter
        WSP ]\n   [ MeanAbsoluteJitter ]\n   *(WSP Extension)\n"
      - '; RoundTripDelay SHALL be measured as defined in RFC 3550 [3].

        '
      - 'RoundTripDelay = "RTD" EQUAL (1*5DIGIT) ;0-65535

        '
      - '; EndSystemDelay metric is defined in RFC 3611 [4].

        '
      - 'EndSystemDelay = "ESD" EQUAL (1*5DIGIT) ;0-65535

        '
      - '; OneWayDelay is defined in RFC 2679 [12].

        '
      - 'OneWayDelay = "OWD" EQUAL (1*5DIGIT) ;0-65535

        '
      - '; SymmOneWayDelay is defined as half the sum of RoundTripDelay

        '
      - '; and the EndSystemDelay values for both endpoints.

        '
      - 'SymmOneWayDelay = "SOWD" EQUAL (1*5DIGIT); 0-65535

        '
      - '; Interarrival Jitter is calculated as defined RFC 3550 [3]

        '
      - '; and converted into milliseconds.

        '
      - 'InterarrivalJitter = "IAJ" EQUAL (1*5DIGIT) ;0-65535 ms

        '
      - '; Mean Absolute Jitter is measured as defined

        '
      - '; by ITU-T G.1020 [9] where it is known as MAPDV.

        '
      - 'MeanAbsoluteJitter = "MAJ" EQUAL (1*5DIGIT);0-65535

        '
      - '; Signal metrics definitions are provided in RFC 3611 [4].

        '
      - "Signal = \"Signal\" HCOLON\n   [ SignalLevel WSP ]\n   [ NoiseLevel WSP ]\n
        \  [ ResidualEchoReturnLoss ]\n   *(WSP Extension)\n"
      - '; SignalLevel will normally be a negative value.

        '
      - '; The absence of the negative sign indicates a positive value.

        '
      - '; Where the signal level is negative, the sign MUST be

        '
      - '; included.  This metric applies to the speech signal decoded

        '
      - '; from the received packet stream.

        '
      - 'SignalLevel = "SL" EQUAL ([ "-" ] 1*2DIGIT)

        '
      - '; NoiseLevel will normally be negative and the sign MUST be

        '
      - '; explicitly included.

        '
      - '; The absence of a sign indicates a positive value.

        '
      - '; This metric applies to the speech signal decoded from the

        '
      - '; received packet stream.

        '
      - 'NoiseLevel  = "NL" EQUAL ([ "-" ] 1*2DIGIT)

        '
      - '; Residual Echo Return Loss (RERL) is the ratio between

        '
      - '; the original signal and the echo level as measured after

        '
      - '; echo cancellation or suppression has been applied.

        '
      - '; Expressed in decibels (dB).  This is typically a positive

        '
      - '; value.

        '
      - '; This metric relates to the proportion of the speech signal

        '
      - '; decoded from the received packet stream that is reflected

        '
      - '; back in the encoded speech signal output in the transmitted

        '
      - '; packet stream (i.e., will affect the REMOTE user''s

        '
      - '; conversational quality).  To support the diagnosis of echo-

        '
      - '; related problems experienced by the local user of the device

        '
      - '; generating a report according to this document, the value of

        '
      - '; RERL reported via the RTCP XR VoIP Metrics payload SHOULD be

        '
      - '; reported in the RemoteMetrics set of data.

        '
      - 'ResidualEchoReturnLoss = "RERL" EQUAL (1*3DIGIT)

        '
      - '; Voice Quality estimation metrics.

        '
      - '; Each quality estimate has an optional associated algorithm.

        '
      - '; These fields permit the implementation to use a variety

        '
      - '; of different calculation methods for each type of metric.

        '
      - "QualityEstimates  = \"QualityEst\" HCOLON\n   [ ListeningQualityR WSP ]\n
        \  [ RLQEstAlg WSP ]\n   [ ConversationalQualityR WSP ]\n   [ RCQEstAlg WSP
        ]\n   [ ExternalR-In WSP ]\n   [ ExtRInEstAlg WSP ]\n   [ ExternalR-Out WSP
        ]\n   [ ExtROutEstAlg WSP ]\n   [ MOS-LQ WSP ]\n   [ MOSLQEstAlg WSP ]\n   [
        MOS-CQ WSP ]\n   [ MOSCQEstAlg WSP ]\n   [ QoEEstAlg ]\n   *(WSP Extension)\n"
      - 'ListeningQualityR = "RLQ" EQUAL (1*3DIGIT) ; 0 - 120

        '
      - 'RLQEstAlg = "RLQEstAlg" EQUAL word ; "P.564" [10], or other

        '
      - 'ConversationalQualityR = "RCQ" EQUAL (1*3DIGIT) ; 0 - 120

        '
      - 'RCQEstAlg = "RCQEstAlg" EQUAL word ; "P.564", or other

        '
      - '; ExternalR-In is measured by the local endpoint for incoming

        '
      - '; connection on the "other" side of this endpoint.  For example,

        '
      - ';   Phone A <---> Bridge <----> Phone B

        '
      - ';   ListeningQualityR = quality for Phone A ----> Bridge path

        '
      - ';   ExternalR-In = quality for Bridge <---- Phone B path

        '
      - 'ExternalR-In = "EXTRI" EQUAL (1*3DIGIT) ; 0 - 120

        '
      - 'ExtRInEstAlg = "ExtRIEstAlg" EQUAL word ; "P.564" or other

        '
      - '; ExternalR-Out is copied from the RTCP XR message received from the

        '
      - '; remote endpoint on the "other" side of this endpoint.  For example,

        '
      - ';   Phone A <---> Bridge <----> Phone B

        '
      - ';   ExternalR-Out = quality for Bridge -----> Phone B path

        '
      - 'ExternalR-Out = "EXTRO" EQUAL (1*3DIGIT) ; 0 - 120

        '
      - 'ExtROutEstAlg = "ExtROEstAlg" EQUAL word ; "P.564" or other

        '
      - 'MOS-LQ = "MOSLQ" EQUAL (DIGIT [ "." 1*3DIGIT ]) ; 0.0 - 4.9

        '
      - 'MOSLQEstAlg = "MOSLQEstAlg" EQUAL word ; "P.564" or other

        '
      - 'MOS-CQ = "MOSCQ" EQUAL (DIGIT [ "." 1*3DIGIT ])  ; 0.0 - 4.9

        '
      - 'MOSCQEstAlg = "MOSCQEstAlg" EQUAL word ; "P.564" or other

        '
      - '; QoEEstAlg provides an alternative to the separate

        '
      - '; estimation algorithms for use when the same algorithm

        '
      - '; is used for all measurements.

        '
      - 'QoEEstAlg = "QoEEstAlg" EQUAL word ; "P.564" or other

        '
      - '; DialogID provides the identification of the dialog with

        '
      - '; which the media session is related.  This value is taken

        '
      - '; from the SIP header.

        '
      - 'DialogID  = "DialogID" COLON Call-ID-Parm *(SEMI did-parm)

        '
      - 'did-parm  = to-tag / from-tag / word

        '
      - 'to-tag    = "to-tag" EQUAL token

        '
      - 'from-tag  = "from-tag" EQUAL token

        '
      - '; MetricType provides the metric on which a notification of

        '
      - '; threshold violation was based.  The more commonly used metrics

        '
      - '; for alerting purposes are included here explicitly, using the

        '
      - '; character encoding that represents the parameter in

        '
      - '; this ABNF.  The Extension parameter can be used to provide

        '
      - '; metrics that are not defined by this document.

        '
      - "MetricType = \"Type\" EQUAL \"RLQ\" / \"RCQ\" / \"EXTR\" /\n   \"MOSLQ\"
        / \"MOSCQ\" /\n   \"BD\" / \"NLR\" / \"JDR\" /\n   \"RTD\" / \"ESD\" / \"IAJ\"
        /\n   \"RERL\" / \"SL\" / \"NL\" / Extension\n"
      - 'Direction = "Dir" EQUAL "local" / "remote"

        '
      - "Severity  = \"Severity\" EQUAL \"Warning\" / \"Critical\" /\n   \"Clear\"\n"
      - 'Call-ID-Parm =  word [ "@" word ]

        '
      - '; General ABNF notation from RFC 5234.

        '
      - 'CRLF =  %x0D.0A

        '
      - 'DIGIT =  %x30-39

        '
      - 'WSP   =  SP / HTAB ; white space

        '
      - 'SP    =  " "

        '
      - 'HTAB  =  %x09 ; horizontal tab

        '
      - "HEXDIG =  DIGIT / \"A\" / \"B\" / \"C\" / \"D\" / \"E\" / \"F\" /\n             \"a\"
        / \"b\" / \"c\" / \"d\" / \"e\" / \"f\"\n"
      - 'DQUOTE  =  %x22 ; " (Double Quote)

        '
      - 'ALPHA   =  %x41-5A / %x61-7A   ; A-Z / a-z

        '
      - '; ABNF notation from RFC 3261.

        '
      - 'alphanum  =  ALPHA / DIGIT

        '
      - 'LWS  =  [ *WSP CRLF ] 1*WSP ; linear whitespace

        '
      - 'SWS  =  [ LWS ] ; sep whitespace

        '
      - 'SEMI =  SWS ";" SWS ; semicolon

        '
      - 'EQUAL   =  SWS "=" SWS ; equal

        '
      - 'COLON   =  SWS ":" SWS ; colon

        '
      - 'HCOLON  =  *( SP / HTAB ) ":" SWS

        '
      - "token       =  1*(alphanum / \"-\" / \".\" / \"!\" / \"%\" / \"*\"\n                  /
        \"_\" / \"+\" / \"`\" / \"'\" / \"~\" )\n"
      - 'IPv4address   =  1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT

        '
      - 'IPv6address   =  hexpart [ ":" IPv4address ]

        '
      - "hexpart       =  hexseq / hexseq \"::\" [ hexseq ] / \"::\"\n                      [
        hexseq ]\n"
      - 'hexseq        =  hex4 *( ":" hex4)

        '
      - 'hex4          =  1*4HEXDIG

        '
      - 'hex2          =  2HEXDIG

        '
      - '; ABNF notation from RFC 3339.

        '
      - 'date-fullyear   = 4DIGIT ; e.g. 2006

        '
      - 'date-month      = 2DIGIT ; e.g. 01 or 11

        '
      - 'date-mday       = 2DIGIT ; e.g. 02 or 22

        '
      - 'time-hour       = 2DIGIT ; e.g. 01 or 13

        '
      - 'time-minute     = 2DIGIT ; e.g. 03 or 55

        '
      - 'time-second     = 2DIGIT ; e.g. 01 or 59

        '
      - 'time-secfrac    = "." 1*DIGIT

        '
      - 'time-numoffset  = ("+" / "-") time-hour ":" time-minute

        '
      - 'time-offset     = "Z" / time-numoffset

        '
      - 'partial-time = time-hour ":" time-minute ":" time-second [ time-secfrac]

        '
      - 'full-date    = date-fullyear "-" date-month "-" date-mday

        '
      - 'full-time    = partial-time time-offset

        '
      - 'date-time    = full-date "T" full-time

        '
      - '; Miscellaneous definitions

        '
      - ';

        '
      - 'Extension = word-plus

        '
      - "word  =  1*(alphanum / \"-\" / \".\" / \"!\" / \"%\" / \"*\" /\n   \"_\"
        / \"+\" / \"`\" / \"'\" / \"~\" /\n   \"(\" / \")\" / \"<\" / \">\" /\n   \":\"
        / \"\\\" / DQUOTE /\n   \"/\" / \"[\" / \"]\" / \"?\" )\n"
      - "word-plus =  1*(alphanum /  \"-\"  /  \".\"  /  \"!\"  / \"%\" / \"*\" /\n
        \  \"_\"  /  \"+\"  /  \"`\"  /  \"'\"  /  \"~\"  /\n   \"(\"  /  \")\"  /
        \ \"<\"  /  \">\"  /  \":\"  /\n   \"\\\"  /  \"/\"  /  \"[\"  /  \"]\"  /
        \ \"?\"  /\n   \"{\"  /  \"}\"  /  \"=\"  /  \" \")\n"
      title: 4.6.1.  ABNF Syntax Definition
    - contents:
      - "4.6.2.  Parameter Definitions and Mappings\n   Parameter values, codec types,
        and other aspects of the endpoints may\n   change dynamically during a session.
        \ The reported values of metrics\n   and configuration parameters SHALL be
        the current value at the time\n   the report is generated.\n   The Packet
        Loss Rate and Packet Discard Rate parameters are\n   calculated over the period
        between the starting and ending timestamps\n   for the report.  These are
        normally calculated from a count of the\n   number of lost or discarded packets
        divided by the count of the\n   number of packets, and hence are based on
        the current values of these\n   counters at the time the report was generated.\n
        \  Packet delay variation, signal level, noise level, and echo level are\n
        \  computed as running or interval averages, based on the appropriate\n   standard,
        e.g., RFC 3550 for Packet Delay Variation (PDV), and the\n   sampled value
        of these running averages is reported.  Delay, packet\n   size, jitter buffer
        size, and codec-related data may change during a\n   session and the current
        value of these parameters is reported as\n   sampled at the time the report
        is generated.\n"
      - contents:
        - "4.6.2.1.  General Mapping Percentages from 8-bit, Fixed-Point Numbers\n
          \  RFC 3611 uses an 8-bit, fixed-point number with the binary point at\n
          \  the left edge of the field.  This value is calculated by dividing the\n
          \  total number of packets lost by the total number of packets expected\n
          \  and multiplying the result by 256, and then taking the integer part.\n
          \  For any RTCP XR parameter in this format, to map into the equivalent\n
          \  SIP vq-rtcpxr parameter, simply reverse the equation, i.e., divide by\n
          \  256 and take the integer part.\n"
        title: 4.6.2.1.  General Mapping Percentages from 8-bit, Fixed-Point Numbers
      - contents:
        - "4.6.2.2.  Timestamps\n   Following SIP and other IETF conventions, timestamps
          are provided in\n   Coordinated Universal Time (UTC) using the ABNF format
          provided in\n   RFC 3339 [7].  These timestamps SHOULD reflect, as closely
          as\n   possible, the actual time during which the media session was running\n
          \  to enable correlation to related events occurring in the network and\n
          \  to accounting or billing records.\n"
        title: 4.6.2.2.  Timestamps
      - contents:
        - "4.6.2.3.  SessionDescription\n   The parameters in this field provide a
          shortened version of the\n   session SDP(s), containing only the relevant
          parameters for session\n   quality reporting purposes.  Where values may
          change during a\n   session, for example, a codec may change rate, then
          the most-recent\n   value of the parameter is reported.\n"
        - contents:
          - "4.6.2.3.1.  Payload Type\n   This is the \"payload type\" parameter used
            in the RTP packets, i.e.,\n   the codec.  This field can also be mapped
            from the SDP \"rtpmap\"\n   attribute field \"payload type\".  IANA-registered
            types SHOULD be\n   used.\n"
          title: 4.6.2.3.1.  Payload Type
        - contents:
          - "4.6.2.3.2.  Payload Desc\n   This parameter is a text description of
            the codec.  This parameter\n   SHOULD use the IANA registry for media-type
            names where it\n   unambiguously defines the codec.  Refer to the \"Audio
            Media Types\"\n   registry on http://www.iana.org.\n"
          title: 4.6.2.3.2.  Payload Desc
        - contents:
          - "4.6.2.3.3.  Sample Rate\n   This parameter is mapped from the SDP \"rtpmap\"
            attribute field \"clock\n   rate\".  The field provides the rate at which
            a voice was sampled,\n   measured in Hertz (Hz).\n"
          title: 4.6.2.3.3.  Sample Rate
        - contents:
          - "4.6.2.3.4.  Packets Per Second\n   This parameter is not contained in
            RTP or SDP but can usually be\n   obtained from the device codec.  Packets
            per second provides the\n   (rounded) number of RTP packets that are transmitted
            per second.\n"
          title: 4.6.2.3.4.  Packets Per Second
        - contents:
          - "4.6.2.3.5.  Frame Duration\n   This parameter is not contained in RTP
            or SDP but can usually be\n   obtained from the device codec.  The field
            reflects the amount of\n   voice content in each frame within the RTP
            payload, measured in\n   milliseconds.  Note that this value can be combined
            with the\n   FramesPerPacket to determine the packetization rate.  Also,
            where a\n   sample-based codec is used, a \"frame\" refers to the set
            of samples\n   carried in an RTP packet.\n"
          title: 4.6.2.3.5.  Frame Duration
        - contents:
          - "4.6.2.3.6.  Frame Octets\n   This parameter is not contained in RTP or
            SDP but is usually provided\n   by the device codec.  The field provides
            the number of octets in each\n   frame within the RTP payload.  This field
            is usually not provided\n   when the FrameDuration is provided.  Also,
            where a sample-based codec\n   is used, a \"frame\" refers to the set
            of samples carried in an RTP\n   packet.\n"
          title: 4.6.2.3.6.  Frame Octets
        - contents:
          - "4.6.2.3.7.  Frames Per Packet\n   This parameter is not contained in
            RTP or SDP but can usually be\n   obtained from the device codec.  This
            field provides the number of\n   frames in each RTP packet.  Note that
            this value can be combined with\n   the FrameDuration to determine the
            packetization rate.  Also, where a\n   sample-based codec is used, a \"frame\"
            refers to the set of samples\n   carried in an RTP packet.\n"
          title: 4.6.2.3.7.  Frames Per Packet
        - contents:
          - "4.6.2.3.8.  FMTP Options\n   This parameter is taken directly from the
            SDP attribute \"fmtp\"\n   defined in RFC 4566.\n"
          title: 4.6.2.3.8.  FMTP Options
        - contents:
          - "4.6.2.3.9.  Silence Suppression State\n   This parameter does not correspond
            to SDP, RTP, or RTCP XR.  It\n   indicates whether silence suppression,
            also known as Voice Activity\n   Detection (VAD), is enabled for the identified
            session.\n"
          title: 4.6.2.3.9.  Silence Suppression State
        - contents:
          - "4.6.2.3.10.  Packet Loss Concealment\n   This value corresponds to \"PLC\"
            in RFC 3611 in the VoIP Metrics\n   Report Block.  The values defined
            by RFC 3611 are reused by this\n   recommendation and therefore no mapping
            is required.\n"
          title: 4.6.2.3.10.  Packet Loss Concealment
        title: 4.6.2.3.  SessionDescription
      - contents:
        - "4.6.2.4.  LocalAddr\n   This field provides the IP address, port, and synchronization
          source\n   (SSRC) for the session from the perspective of the endpoint that
          is\n   measuring performance.  The IPAddress MAY be in IPv4 or IPv6 format.\n
          \  The SSRC is taken from SDP, RTCP, or RTCP XR input parameters.\n   In
          the presence of NAT and where a NAT-traversal mechanism such as\n   Session
          Traversal Utilities for NAT (STUN) [16] is used, the external\n   IP address
          can be reported, since the internal IP address is not\n   visible to the
          network operator.\n"
        title: 4.6.2.4.  LocalAddr
      - contents:
        - "4.6.2.5.  RemoteAddr\n   This field provides the IP address, port, and
          SSRC of the session\n   peer from the perspective of the remote endpoint
          measuring\n   performance.  In the presence of NAT and where a NAT-traversal\n
          \  mechanism such as STUN [16] is used, the external IP address can be\n
          \  reported, since the internal IP address is not visible to the network\n
          \  operator.\n"
        title: 4.6.2.5.  RemoteAddr
      - contents:
        - '4.6.2.6.  Jitter Buffer Parameters

          '
        - contents:
          - "4.6.2.6.1.  Jitter Buffer Adaptive\n   This value corresponds to \"JBA\"
            in RFC 3611 in the VoIP Metrics\n   Report Block.  The values defined
            by RFC 3611 are unchanged and\n   therefore no mapping is required.\n"
          title: 4.6.2.6.1.  Jitter Buffer Adaptive
        - contents:
          - "4.6.2.6.2.  Jitter Buffer Rate\n   This value corresponds to \"JB rate\"
            in RFC 3611 in the VoIP Metrics\n   Report Block.  The parameter does
            not require any conversion.\n"
          title: 4.6.2.6.2.  Jitter Buffer Rate
        - contents:
          - "4.6.2.6.3.  Jitter Buffer Nominal\n   This value corresponds to \"JB
            nominal\" in RFC 3611 in the VoIP\n   Metrics Report Block.  The parameter
            does not require any conversion.\n"
          title: 4.6.2.6.3.  Jitter Buffer Nominal
        - contents:
          - "4.6.2.6.4.  Jitter Buffer Max\n   This value corresponds to \"JB maximum\"
            in RFC 3611 in the VoIP\n   Metrics Report Block.  The parameter does
            not require any conversion.\n"
          title: 4.6.2.6.4.  Jitter Buffer Max
        - contents:
          - "4.6.2.6.5.  Jitter Buffer Abs Max\n   This value corresponds to \"JB
            abs max\" in RFC 3611 in the VoIP\n   Metrics Report Block.  The parameter
            does not require any conversion.\n"
          title: 4.6.2.6.5.  Jitter Buffer Abs Max
        title: 4.6.2.6.  Jitter Buffer Parameters
      - contents:
        - '4.6.2.7.  Packet Loss Parameters

          '
        - contents:
          - "4.6.2.7.1.  Network Loss Rate\n   This value corresponds to \"loss rate\"
            in RFC 3611 in the VoIP Metrics\n   Report Block.  For conversion, see
            Section 4.6.2.1.  A loss rate of\n   100% MAY be reported if media packets
            were expected but none had been\n   received at the time of session termination.\n"
          title: 4.6.2.7.1.  Network Loss Rate
        - contents:
          - "4.6.2.7.2.  Jitter Buffer Discard Rate\n   This value corresponds to
            \"discard rate\" in RFC 3611 in the VoIP\n   Metrics Report Block.  For
            conversion, see Section 4.6.2.1.\n"
          title: 4.6.2.7.2.  Jitter Buffer Discard Rate
        title: 4.6.2.7.  Packet Loss Parameters
      - contents:
        - '4.6.2.8.  Burst/Gap Parameters

          '
        - contents:
          - "4.6.2.8.1.  Burst Loss Density\n   This value corresponds to \"burst
            density\" in RFC 3611 in the VoIP\n   Metrics Report Block.  For conversion,
            see Section 4.6.2.1.\n"
          title: 4.6.2.8.1.  Burst Loss Density
        - contents:
          - "4.6.2.8.2.  Burst Duration\n   This value corresponds to \"burst duration\"
            in RFC 3611 in the VoIP\n   Metrics Report Block.  This value requires
            no conversion; the exact\n   value sent in an RTCP XR VoIP Metrics Report
            Block can be included in\n   the SIP vq-rtcpxr parameter.\n"
          title: 4.6.2.8.2.  Burst Duration
        - contents:
          - "4.6.2.8.3.  Gap Loss Density\n   This value corresponds to \"gap density\"
            in RFC 3611 in the VoIP\n   metrics Report Block.\n"
          title: 4.6.2.8.3.  Gap Loss Density
        - contents:
          - "4.6.2.8.4.  Gap Duration\n   This value corresponds to \"gap duration\"
            in RFC 3611 in the VoIP\n   Metrics Report Block.  This value requires
            no conversion; the exact\n   value sent in an RTCP XR VoIP Metrics Report
            Block can be reported.\n"
          title: 4.6.2.8.4.  Gap Duration
        - contents:
          - "4.6.2.8.5.  Minimum Gap Threshold\n   This value corresponds to \"Gmin\"
            in RFC 3611 in the VoIP Metrics\n   Report Block.  This value requires
            no conversion; the exact value\n   sent in an RTCP XR VoIP Metrics Report
            Block can be reported.\n"
          title: 4.6.2.8.5.  Minimum Gap Threshold
        title: 4.6.2.8.  Burst/Gap Parameters
      - contents:
        - '4.6.2.9.  Delay Parameters

          '
        - contents:
          - "4.6.2.9.1.  Round-Trip Delay\n   This value corresponds to \"round trip
            delay\" in RFC 3611 in the VoIP\n   Metrics Report Block and may be measured
            using the method defined in\n   RFC 3550.  The parameter is expressed
            in milliseconds.\n"
          title: 4.6.2.9.1.  Round-Trip Delay
        - contents:
          - "4.6.2.9.2.  End System Delay\n   This value corresponds to \"end system
            delay\" in RFC 3611 in the VoIP\n   Metrics Report Block.  This parameter
            does not require any\n   conversion.  The parameter is expressed in milliseconds.\n"
          title: 4.6.2.9.2.  End System Delay
        - contents:
          - "4.6.2.9.3.  Symmetric One-Way Delay\n   This value is computed by adding
            Round-Trip Delay to the local and\n   remote End System Delay and dividing
            by two.\n"
          title: 4.6.2.9.3.  Symmetric One-Way Delay
        - contents:
          - "4.6.2.9.4.  One-Way Delay\n   This value SHOULD be measured using the
            methods defined in IETF RFC\n   2679 [12].  The parameter is expressed
            in milliseconds.\n"
          title: 4.6.2.9.4.  One-Way Delay
        - contents:
          - "4.6.2.9.5.  Inter-Arrival Jitter\n   Inter-arrival jitter is calculated
            as defined in RFC 3550 and\n   converted into milliseconds.\n"
          title: 4.6.2.9.5.  Inter-Arrival Jitter
        - contents:
          - "4.6.2.9.6.  Mean Absolute Jitter\n   It is recommended that MAJ be measured
            as defined in ITU-T G.1020\n   [9].  This parameter is often referred
            to as MAPDV (Mean Absolute\n   Packet Delay Variation).  The parameter
            is expressed in milliseconds.\n"
          title: 4.6.2.9.6.  Mean Absolute Jitter
        title: 4.6.2.9.  Delay Parameters
      - contents:
        - '4.6.2.10.  Signal-Related Parameters

          '
        - contents:
          - "4.6.2.10.1.  Signal Level\n   This field corresponds to \"signal level\"
            in RFC 3611 in the VoIP\n   Metrics Report Block.  This field provides
            the voice signal relative\n   level is defined as the ratio of the signal
            level to a 0 dBm0\n   reference, expressed in decibels.  This value can
            be used directly\n   without extra conversion.\n"
          title: 4.6.2.10.1.  Signal Level
        - contents:
          - "4.6.2.10.2.  Noise Level\n   This field corresponds to \"noise level\"
            in RFC 3611 in the VoIP\n   Metrics Report Block.  This field provides
            the ratio of the silent\n   period background noise level to a 0 dBm0
            reference, expressed in\n   decibels.  This value can be used directly
            without extra conversion.\n"
          title: 4.6.2.10.2.  Noise Level
        - contents:
          - "4.6.2.10.3.  Residual Echo Return Loss (RERL)\n   This field corresponds
            to \"RERL\" in RFC 3611 in the VoIP Metrics\n   Report Block.  This field
            provides the ratio between the original\n   signal and the echo level
            in decibels, as measured after echo\n   cancellation or suppression has
            been applied.  This value can be used\n   directly without extra conversion.\n"
          title: 4.6.2.10.3.  Residual Echo Return Loss (RERL)
        title: 4.6.2.10.  Signal-Related Parameters
      - contents:
        - '4.6.2.11.  Quality Scores

          '
        - contents:
          - "4.6.2.11.1.  ListeningQualityR\n   This field reports the listening quality
            expressed as an R factor\n   (per G.107).  This does not include the effects
            of echo or delay.\n   The range of R is 0-95 for narrowband calls and
            0-120 for wideband\n   calls.  Algorithms for computing this value SHOULD
            be compliant with\n   ITU-T Recommendations P.564 [10] and G.107 [11].\n"
          title: 4.6.2.11.1.  ListeningQualityR
        - contents:
          - "4.6.2.11.2.  RLQEstAlg\n   This field provides a text name for the algorithm
            used to estimate\n   ListeningQualityR.  This field will be free form
            text and not\n   necessarily reflective of any standards or recommendations.\n"
          title: 4.6.2.11.2.  RLQEstAlg
        - contents:
          - "4.6.2.11.3.  ConversationalQualityR\n   This field corresponds to \"R
            factor\" in RFC 3611 in the VoIP Metrics\n   Report Block.  This parameter
            provides a cumulative measurement of\n   voice quality from the start
            of the session to the reporting time.\n   The range of R is 0-95 for narrowband
            calls and 0-120 for wideband\n   calls.  Algorithms for computing this
            value SHOULD be compliant with\n   ITU-T Recommendations P.564 and G.107.
            \ Within RFC 3611, a reported R\n   factor of 127 indicates that this
            parameter is unavailable; in this\n   case, the ConversationalQualityR
            parameter MUST be omitted from the\n   vq-rtcpxr event.\n"
          title: 4.6.2.11.3.  ConversationalQualityR
        - contents:
          - "4.6.2.11.4.  RCQEstAlg\n   This field provides a text name for the algorithm
            used to estimate\n   ConversationalQualityR.  This field will be free
            form text and not\n   necessarily reflective of any standards or recommendations.\n"
          title: 4.6.2.11.4.  RCQEstAlg
        - contents:
          - "4.6.2.11.5.  ExternalR-In\n   This field corresponds to \"ext. R factor\"
            in RFC 3611 in the VoIP\n   Metrics Report Block.  This parameter reflects
            voice quality as\n   measured by the local endpoint for incoming connection
            on \"other\"\n   side (refer to RFC 3611 for a more-detailed explanation).
            \ The range\n   of R is 0-95 for narrowband calls and 0-120 for wideband
            calls.\n   Algorithms for computing this value SHOULD be compliant with
            ITU-T\n   Recommendations P.564 and G.107.  Within RFC 3611, a reported
            R\n   factor of 127 indicates that this parameter is unavailable; in this\n
            \  case, the ConversationalQualityR parameter MUST be omitted from the\n
            \  vq-rtcpxr event.\n"
          title: 4.6.2.11.5.  ExternalR-In
        - contents:
          - "4.6.2.11.6.  ExtRInEstAlg\n   This field provides a text name for the
            algorithm used to estimate\n   ExternalR-In.  This field will be free-form
            text and not necessarily\n   reflective of any standards or recommendations.\n"
          title: 4.6.2.11.6.  ExtRInEstAlg
        - contents:
          - "4.6.2.11.7.  ExternalR-Out\n   This field corresponds to \"ext. R factor\"
            in RFC 3611 in the VoIP\n   Metrics Report Block.  Here, the value is
            copied from RTCP XR message\n   received from the remote endpoint on the
            \"other\" side of this\n   endpoint; refer to RFC 3611 for a more detailed
            explanation).  The\n   range of R is 0-95 for narrowband calls and 0-120
            for wideband calls.\n   Algorithms for computing this value SHOULD be
            compliant with ITU-T\n   Recommendations P.564 and G.107.  Within RFC
            3611, a reported R\n   factor of 127 indicates that this parameter is
            unavailable; in this\n   case, the ConversationalQualityR parameter SHALL
            be omitted from the\n   vq-rtcpxr event.\n"
          title: 4.6.2.11.7.  ExternalR-Out
        - contents:
          - "4.6.2.11.8.  ExtROutEstAlg\n   This field provides a text name for the
            algorithm used to estimate\n   ExternalR-Out.  This field will be free-form
            text and not necessarily\n   reflective of any standards or recommendations.\n"
          title: 4.6.2.11.8.  ExtROutEstAlg
        - contents:
          - "4.6.2.11.9.  MOS Reporting\n   Conversion of RFC 3611 reported mean opinion
            scores (MOSs) for use in\n   reporting MOS-LQ and MOS-CQ MUST be performed
            by dividing the RFC\n   3611 reported value by 10 if this value is less
            than or equal to 50\n   or omitting the MOS-xQ parameter if the RFC 3611
            reported value is\n   127 (which indicates unavailable).\n"
          - contents:
            - "4.6.2.11.9.1.  MOS-LQ\n   This field corresponds to \"MOSLQ\" in RFC
              3611 in the VoIP Metrics\n   Report Block.  This parameter is the estimated
              mean opinion score for\n   listening voice quality on a scale from 1
              to 5, in which 5 represents\n   \"Excellent\" and 1 represents \"Unacceptable\".
              \ Algorithms for\n   computing this value SHOULD be compliant with ITU-T
              Recommendation\n   P.564 [10].  This field provides a text name for
              the algorithm used\n   to estimate MOS-LQ.\n"
            title: 4.6.2.11.9.1.  MOS-LQ
          - contents:
            - "4.6.2.11.9.2.  MOS-CQ\n   This field corresponds to \"MOSCQ\" in RFC
              3611 in the VoIP Metrics\n   Report Block.  This parameter is the estimated
              mean opinion score for\n   conversation voice quality on a scale from
              1 to 5, in which 5\n   represents excellent and 1 represents unacceptable.
              \ Algorithms for\n   computing this value SHOULD be compliant with ITU-T
              Recommendation\n   P.564 with regard to the listening quality element
              of the computed\n   MOS score.\n"
            title: 4.6.2.11.9.2.  MOS-CQ
          - contents:
            - "4.6.2.11.9.3.  MOSCQEstAlg\n   This field provides a text name for
              the algorithm used to estimate\n   MOS-CQ.  This field will be free-form
              text and not necessarily\n   reflective of any standards or recommendations.\n"
            title: 4.6.2.11.9.3.  MOSCQEstAlg
          title: 4.6.2.11.9.  MOS Reporting
        - contents:
          - "4.6.2.11.10.  QoEEstAlg\n   This field provides a text description of
            the algorithm used to\n   estimate all voice quality metrics.  This parameter
            is provided as an\n   alternative to the separate estimation algorithms
            for use when the\n   same algorithm is used for all measurements.  This
            field will be\n   free-form text and not necessarily reflective of any
            standards or\n   recommendations.\n"
          title: 4.6.2.11.10.  QoEEstAlg
        title: 4.6.2.11.  Quality Scores
      title: 4.6.2.  Parameter Definitions and Mappings
    title: 4.6.  Voice Quality Event and Semantics
  - contents:
    - "4.7.  Message Flow and Syntax Examples\n   This section shows a number of message
      flow examples showing how the\n   event package works.\n"
    - contents:
      - "4.7.1.  End of Session Report Using NOTIFY\n       Alice            Proxy/Registrar
        \       Collector             Bob\n       |                    |                    |
        \                   |\n       |                    |                    |
        \                   |\n       | REGISTER Allow-Event:vq-rtcpxr F1       |
        \                   |\n       |------------------->|                    |
        \                   |\n       |      200 OK F2     |                    |
        \                   |\n       |<-------------------|                    |
        \                   |\n       |                    |  SUBSCRIBE Event:vq-rtcpxr
        F3           |\n       |                    |<-------------------|                    |\n
        \      | SUBSCRIBE Event:vq-rtcpxr F4            |                    |\n
        \      |<-------------------|                    |                    |\n
        \      |     200 OK F5      |                    |                    |\n
        \      |------------------->|                    |                    |\n
        \      |                    |   200 OK F6        |                    |\n
        \      |                    |------------------->|                    |\n
        \      |      INVITE F7     |                    |                    |\n
        \      |------------------->|                    |                    |\n
        \      |                    |      INVITE F8     |                    |\n
        \      |                    |---------------------------------------->|\n
        \      |                    |      200 OK F9     |                    |\n
        \      |                    |<----------------------------------------|\n
        \      |     200 OK F10     |                    |                    |\n
        \      |<-------------------|                    |                    |\n
        \      |        ACK F11     |                    |                    |\n
        \      |------------------->|                    |                    |\n
        \      |                    |      ACK F12       |                    |\n
        \      |                    |---------------------------------------->|\n
        \      |        RTP         |                    |                    |\n
        \      |<============================================================>|\n
        \      |        RTCP, RTCP XR                    |                    |\n
        \      |<============================================================>|\n
        \      |                    |                    |                    |\n
        \      |    BYE F13         |                    |                    |\n
        \      |------------------->|      BYE F14       |                    |\n
        \      |                    |---------------------------------------->|\n
        \      |                    |     200 OK F15     |                    |\n
        \      |                    |<----------------------------------------|\n
        \      |     200 OK F16     |                    |                    |\n
        \      |<-------------------|                    |                    |\n
        \      |  NOTIFY Event:vq-rtcpxr F17             |                    |\n
        \      |------------------->|                    |                    |\n
        \      |                    | NOTIFY Event:vq-rtcpxr F18              |\n
        \      |                    |------------------->|                    |\n
        \      |                    |     200 OK F19     |                    |\n
        \      |                    |<-------------------|                    |\n
        \      |     200 OK F20     |                    |                    |\n
        \      |<-------------------|                    |                    |\n
        \  Figure 1. Summary report with NOTIFY sent after session termination.\n
        \  In the call flow depicted in Figure 1, the following message format\n   is
        sent in F17:\n       NOTIFY sip:collector@example.org SIP/2.0\n       Via:
        SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7\n       Max-Forwards: 70\n
        \      To: <sip:collector@example.org>;tag=43524545\n       From: Alice <sip:alice@example.org>;tag=a3343df32\n
        \      Call-ID: 1890463548\n       CSeq: 4321 NOTIFY\n       Contact: <sip:alice@pc22.example.org>\n
        \      Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER,\n        SUBSCRIBE,
        NOTIFY\n       Event: vq-rtcpxr\n       Accept: application/sdp, message/sipfrag\n
        \      Subscription-State: active;expires=3600\n       Content-Type: application/vq-rtcpxr\n
        \      Content-Length: ...\n       VQSessionReport: CallTerm\n       CallID:
        6dg37f1890463\n       LocalID: Alice <sip:alice@example.org>\n       RemoteID:
        Bill <sip:bill@example.net>\n       OrigID: Alice <sip:alice@example.org>\n
        \      LocalGroup: example-phone-55671\n       RemoteGroup: example-gateway-09871\n
        \      LocalAddr: IP=10.10.1.100 PORT=5000 SSRC=1a3b5c7d\n       LocalMAC:
        00:1f:5b:cc:21:0f\n       RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=0x2468abcd\n
        \      RemoteMAC: 00:26:08:8e:95:02\n       LocalMetrics:\n       Timestamps:START=2004-10-10T18:23:43Z
        STOP=2004-10-01T18:26:02Z\n       SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160
        FPP=1 PPS=50\n                       PLC=3 SSUP=on\n       JitterBuffer:JBA=3
        JBR=2 JBN=40 JBM=80 JBX=120\n       PacketLoss:NLR=5.0 JDR=2.0\n       BurstGapLoss:BLD=0
        BD=0 GLD=2.0 GD=500 GMIN=16\n       Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10\n
        \      Signal:SL=-18 NL=-50 RERL=55\n       QualityEst:RLQ=88 RCQ=85 EXTRI=90
        MOSLQ=4.1 MOSCQ=4.0\n         QoEEstAlg=P.564\n       RemoteMetrics:\n       Timestamps:START=2004-10-10T18:23:43Z
        STOP=2004-10-01T18:26:02Z\n       SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160
        FPP=1 PPS=50\n                       PLC=3 SSUP=on\n       JitterBuffer:JBA=3
        JBR=2 JBN=40 JBM=80 JBX=120\n       PacketLoss:NLR=5.0 JDR=2.0\n       BurstGapLoss:BLD=0
        BD=0 GLD=2.0 GD=500 GMIN=16\n       Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10\n
        \      Signal:SL=-21 NL=-45 RERL=55\n       QualityEst:RLQ=90 RCQ=85 EXTRI=90
        MOSLQ=4.3 MOSCQ=4.2\n         QoEEstAlg=P.564\n       DialogID:1890463548@alice.example.org;to-tag=8472761;\n
        \        from-tag=9123dh311\n"
      title: 4.7.1.  End of Session Report Using NOTIFY
    - contents:
      - "4.7.2.  Midsession Threshold Violation Using NOTIFY\n   Alice            Proxy/Registrar
        \       Collector             Bob\n    |                    |                    |
        \                   |\n    |                    |                    |                    |\n
        \   | REGISTER Allow-Event:vq-rtcpxr F1       |                    |\n    |------------------->|
        \                   |                    |\n    |      200 OK F2     |                    |
        \                   |\n    |<-------------------|                    |                    |\n
        \   |                    |  SUBSCRIBE Event:vq-rtcpxr F3           |\n    |
        \                   |<-------------------|                    |\n    | SUBSCRIBE
        Event:vq-rtcpxr F4            |                    |\n    |<-------------------|
        \                   |                    |\n    |     200 OK F5      |                    |
        \                   |\n    |------------------->|                    |                    |\n
        \   |                    |   200 OK F6        |                    |\n    |
        \                   |------------------->|                    |\n    |      INVITE
        F7     |                    |                    |\n    |------------------->|
        \                   |                    |\n    |                    |      INVITE
        F8     |                    |\n    |                    |---------------------------------------->|\n
        \   |                    |      200 OK F9     |                    |\n    |
        \                   |<----------------------------------------|\n    |     200
        OK F10     |                    |                    |\n    |<-------------------|
        \                   |                    |\n    |        ACK F11     |                    |
        \                   |\n    |------------------->|                    |                    |\n
        \   |                    |      ACK F12       |                    |\n    |
        \                   |---------------------------------------->|\n    |        RTP
        \        |                    |                    |\n    |<============================================================>|\n
        \   |        RTCP, RTCP XR                    |                    |\n    |<============================================================>|\n
        \   |  NOTIFY Event:vq-rtcpxr F13             |                    |\n    |------------------->|
        \                   |                    |\n    |                    | NOTIFY
        Event:vq-rtcpxr F14              |\n    |                    |------------------->|
        \                   |\n    |                    |     200 OK F15     |                    |\n
        \   |                    |<-------------------|                    |\n    |
        \    200 OK F16     |                    |                    |\n    |<-------------------|
        \                   |                    |\n    |                    |                    |
        \                   |\n    |    BYE F17         |                    |                    |\n
        \   |------------------->|      BYE F18       |                    |\n    |
        \                   |---------------------------------------->|\n    |                    |
        \    200 OK F19     |                    |\n    |                    |<----------------------------------------|\n
        \   |     200 OK F20     |                    |                    |\n    |<-------------------|
        \                   |                    |\n    |  NOTIFY Event:vq-rtcpxr
        F21             |                    |\n    |------------------->|                    |
        \                   |\n    |                    | NOTIFY Event:vq-rtcpxr F22
        \             |\n    |                    |------------------->|                    |\n
        \   |                    |     200 OK F23     |                    |\n    |
        \                   |<-------------------|                    |\n    |     200
        OK F24     |                    |                    |\n    |<-------------------|
        \                   |                    |\n   Figure 2.  An alert report
        is sent during the session.\n   In the call flow depicted in Figure 2, the
        following message\n   format is sent in F13:\n       NOTIFY sip:collector@example.org
        SIP/2.0\n       Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7\n       Max-Forwards:
        70\n       To: <sip:proxy@example.org>\n       From: Alice <sip:alice@example.org>;tag=a3343df32\n
        \      Call-ID: 1890463548\n       CSeq: 4331 PUBLISH\n       Allow: INVITE,
        ACK, CANCEL, OPTIONS, BYE, REFER,\n        SUBSCRIBE, NOTIFY\n       Event:
        vq-rtcpxr\n       Accept: application/sdp, message/sipfrag\n       Content-Type:
        application/vq-rtcpxr\n       Content-Length: ...\n       VQAlertReport: Type=NLR
        Severity=Critical Dir=local\n       CallID: 6dg37f1890463\n       LocalID:
        Alice <sip:alice@example.org>\n       RemoteID: Bill <sip:bill@example.org>\n
        \      OrigID: Alice <sip:alice@example.org>\n       LocalGroup: example-phone-55671\n
        \      RemoteGroup: example-gateway-09871\n       LocalAddr:IP=10.10.1.100
        PORT=5000 SSRC=0x2468abcd\n       LocalMAC: 00:1f:5b:cc:21:0f\n       RemoteAddr:IP=11.1.1.150
        PORT=5002 SSRC=1357efff\n       RemoteMAC: 00:26:08:8e:95:02\n       LocalMetrics:\n
        \      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z\n       SessionDesc:PT=18
        PD=G729 SR=8000 FD=20 FO=20 FPP=2 PPS=50\n                       FMTP=\"annexb=no\"
        PLC=3 SSUP=on\n       JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120\n       PacketLoss:NLR=10.0
        JDR=2.0\n       BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16\n       Delay:RTD=200
        ESD=140 SOWD=200 IAJ=2 MAJ=10\n       Signal:SL=-21 NL=-50 RERL=55\n       QualityEst:RLQ=80
        RCQ=85 EXTRI=90 MOSLQ=3.5 MOSCQ=3.7\n                        QoEEstAlg=P.564\n
        \      RemoteMetrics:\n       Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z\n
        \      SessionDesc:PT=18 PD=G729 SR=8000 FD=20 FO=20 FPP=2 PPS=50\n                       FMTP=\"annexb=no\"
        PLC=3 SSUP=on\n       JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120\n       PacketLoss:NLR=5.0
        JDR=2.0\n       BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16\n       Delay:RTD=200
        ESD=140 SOWD=200 IAJ=2 MAJ=10\n       Signal:SL=-21 NL=-45 RERL=55\n       QualityEst:RLQ=90
        RCQ=85 MOSLQ=4.3 MOSCQ=4.2 QoEEstAlg=P.564\n       DialogID:1890463548@alice.example.org;to-tag=8472761;\n
        \         from-tag=9123dh311\n"
      title: 4.7.2.  Midsession Threshold Violation Using NOTIFY
    - contents:
      - "4.7.3.  End of Session Report Using PUBLISH\n      Alice            Proxy/Registrar
        \       Collector              Bob\n       |                    |                    |
        \                   |\n       |                    |                    |
        \                   |\n       | REGISTER Allow-Event:vq-rtcpxr  F1      |
        \                   |\n       |------------------->|                    |
        \                   |\n       |      200 OK F2     |                    |
        \                   |\n       |<-------------------|                    |
        \                   |\n       |      INVITE F3     |                    |
        \                   |\n       |------------------->|                    |
        \                   |\n       |                    |      INVITE F4     |
        \                   |\n       |                    |---------------------------------------->|\n
        \      |                    |      200 OK F5     |                    |\n
        \      |                    |<----------------------------------------|\n
        \      |     200 OK F6      |                    |                    |\n
        \      |<-------------------|                    |                    |\n
        \      |        ACK F7      |                    |                    |\n
        \      |------------------->|                    |                    |\n
        \      |                    |      ACK F8        |                    |\n
        \      |                    |---------------------------------------->|\n
        \      |        RTP         |                    |                    |\n
        \      |<============================================================>|\n
        \      |        RTCP        |                    |                    |\n
        \      |<============================================================>|\n
        \      |                    |                    |                    |\n
        \      |    BYE F9          |                    |                    |\n
        \      |------------------->|      BYE F10       |                    |\n
        \      |                    |---------------------------------------->|\n
        \      |                    |     200 OK F11     |                    |\n
        \      |                    |<----------------------------------------|\n
        \      |     200 OK F12     |                    |                    |\n
        \      |<-------------------|                    |                    |\n
        \      |  PUBLISH Event:vq-rtcpxr F13            |                    |\n
        \      |------------------->|                    |                    |\n
        \      |                    | PUBLISH Event:vq-rtcpxr F14             |\n
        \      |                    |------------------->|                    |\n
        \      |                    |     200 OK F15     |                    |\n
        \      |                    |<-------------------|                    |\n
        \      |     200 OK F16     |                    |                    |\n
        \      |<-------------------|                    |                    |\n
        \  Figure 3. End of session report sent after session termination.\n   In
        the message flow depicted in Figure 3, the following message is\n   sent in
        F13.\n       PUBLISH sip:collector@example.org SIP/2.0\n       Via: SIP/2.0/UDP
        pc22.example.org;branch=z9hG4bK3343d7\n       Max-Forwards: 70\n       To:
        <sip:proxy@example.org>\n       From: Alice <sip:alice@example.org>;tag=a3343df32\n
        \      Call-ID: 1890463548\n       CSeq: 4331 PUBLISH\n       Allow: INVITE,
        ACK, CANCEL, OPTIONS, BYE, REFER,\n        SUBSCRIBE, NOTIFY\n       Event:
        vq-rtcpxr\n       Accept: application/sdp, message/sipfrag\n       Content-Type:
        application/vq-rtcpxr\n       Content-Length: ...\n       VQSessionReport:
        CallTerm\n       CallID: 6dg37f1890463\n       LocalID: Alice <sip:alice@example.org>\n
        \      RemoteID: Bill <sip:bill@example.net>\n       OrigID: Alice <sip:alice@example.org>\n
        \      LocalGroup: example-phone-55671\n       RemoteGroup: example-gateway-09871\n
        \      LocalAddr: IP=10.10.1.100 PORT=5000 SSRC=1a3b5c7d\n       LocalMAC:
        00:1f:5b:cc:21:0f\n       RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=0x2468abcd\n
        \      RemoteMAC: 00:26:08:8e:95:02\n       LocalMetrics:\n       Timestamps:START=2004-10-10T18:23:43Z
        STOP=2004-10-01T18:26:02Z\n       SessionDesc:PT=18 PD=G729 SR=8000 FD=20
        FO=20 FPP=2 PPS=50\n                       FMTP=\"annexb=no\" PLC=3 SSUP=on\n
        \      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120\n       PacketLoss:NLR=5.0
        JDR=2.0\n       BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16\n       Delay:RTD=200
        ESD=140 SOWD=200 IAJ=2 MAJ=10\n       Signal:SL=-21 NL=-50 RERL=55\n       QualityEst:RLQ=90
        RCQ=85 EXTRI=90 MOSLQ=4.2 MOSCQ=4.3\n         QoEEstAlg=P.564\n       RemoteMetrics:\n
        \      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z\n       SessionDesc:PT=18
        PD=G729 SR=8000 FD=20 FO=20 FPP=2 PPS=50\n                       FMTP=\"annexb=no\"
        PLC=3 SSUP=on\n       JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120\n       PacketLoss:NLR=5.0
        JDR=2.0\n       BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16\n       Delay:RTD=200
        ESD=140 SOWD=200 IAJ=2 MAJ=10\n       Signal:SL=-21 NL=-45 RERL=55\n       QualityEst:RLQ=90
        RCQ=85 MOSLQ=4.3 MOSCQ=4.2 QoEEstAlg=P.564\n       DialogID:1890463548@alice.example.org;to-tag=8472761;\n
        \         from-tag=9123dh311\n"
      title: 4.7.3.  End of Session Report Using PUBLISH
    - contents:
      - "4.7.4.  Alert Report Using PUBLISH\n       Alice            Proxy/Registrar
        \       Collector             Bob\n       |                    |                    |
        \                   |\n       |      INVITE F1     |                    |
        \                   |\n       |------------------->|                    |
        \                   |\n       |                    |      INVITE F2     |
        \                   |\n       |                    |---------------------------------------->|\n
        \      |                    |      200 OK F3     |                    |\n
        \      |                    |<----------------------------------------|\n
        \      |     200 OK F4      |                    |                    |\n
        \      |<-------------------|                    |                    |\n
        \      |        ACK F5      |                    |                    |\n
        \      |------------------->|                    |                    |\n
        \      |                    |      ACK F6        |                    |\n
        \      |                    |---------------------------------------->|\n
        \      |        RTP         |                    |                    |\n
        \      |<============================================================>|\n
        \      |        RTCP        |                    |                    |\n
        \      |<============================================================>|\n
        \      |  PUBLISH Event:vq-rtcpxr F7             |                    |\n
        \      |------------------->|                    |                    |\n
        \      |                    | PUBLISH Event:vq-rtcpxr F8              |\n
        \      |                    |------------------->|                    |\n
        \      |                    |     200 OK F9      |                    |\n
        \      |                    |<-------------------|                    |\n
        \      |     200 OK F10     |                    |                    |\n
        \      |<-------------------|                    |                    |\n
        \      |                    |                    |                    |\n
        \      |      BYE F11       |                    |                    |\n
        \      |------------------->|      BYE F12       |                    |\n
        \      |                    |---------------------------------------->|\n
        \      |                    |     200 OK F13     |                    |\n
        \      |                    |<----------------------------------------|\n
        \      |     200 OK F14     |                    |                    |\n
        \      |<-------------------|                    |                    |\n
        \  Figure 4. Alert report message flow\n      In the message flow depicted
        in Figure 4, the following message is\n      sent in F7:\n       PUBLISH sip:collector@example.org
        SIP/2.0\n       Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7\n       Max-Forwards:
        70\n       To: <sip:collector@example.org>\n       From: Alice <sip:alice@example.org>;tag=a3343df32\n
        \      Call-ID: 1890463548\n       CSeq: 4321 PUBLISH\n       Allow: INVITE,
        ACK, CANCEL, OPTIONS, BYE, REFER,\n        SUBSCRIBE, NOTIFY\n       Event:
        vq-rtcpxr\n       Accept: application/sdp, message/sipfrag\n       Content-Type:
        application/vq-rtcpxr\n       Content-Length: ...\n       VQAlertReport: Type=RLQ
        Severity=Warning Dir=local\n       CallID: 6dg37f1890463\n       LocalID:
        Alice <sip:alice@example.org>\n       RemoteID: Bill <sip:bill@example.org>\n
        \      OrigID: Alice <sip:alice@example.org>\n       LocalGroup: example-phone-55671\n
        \      RemoteGroup: example-gateway-09871\n       LocalAddr: IP=10.10.1.100
        PORT=5000 SSRC=1a3b5c7d\n       LocalMAC: 00:1f:5b:cc:21:0f\n       RemoteAddr:IP=11.1.1.150
        PORT=5002 SSRC=0x2468abcd\n       RemoteMAC: 00:26:08:8e:95:02\n       Metrics:\n
        \      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z\n       SessionDesc:PT=0
        PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50\n                       PLC=3 SSUP=on\n
        \      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120\n       PacketLoss:NLR=5.0
        JDR=2.0\n       BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16\n       Delay:RTD=200
        ESD=140 SOWD=200 IAJ=2 MAJ=10\n       Signal:SL=-12 NL=-30 RERL=55\n       QualityEst:RLQ=60
        RCQ=55 EXTR=90 MOSLQ=2.4 MOSCQ=2.3\n          QoEEstAlg=P.564\n       RemoteMetrics:\n
        \      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z\n       SessionDesc:PT=0
        PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50\n                       PLC=3 SSUP=on\n
        \      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120\n       PacketLoss:NLR=5.0
        JDR=2.0\n       BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16\n       Delay:RTD=200
        ESD=140 SOWD=200 IAJ=2 MAJ=10\n       Signal:SL=-23 NL=-60 RERL=55\n       QualityEst:RLQ=90
        RCQ=85 EXTRI=90 MOSLQ=4.2 MOSCQ=4.3\n          QoEEstAlg=P.564\n       DialogID:1890463548@alice.example.org;to-tag=8472761;\n
        \              from-tag=9123dh3111\n"
      title: 4.7.4.  Alert Report Using PUBLISH
    title: 4.7.  Message Flow and Syntax Examples
  - contents:
    - "4.8.  Configuration Dataset for vq-rtcpxr Events\n   It is the suggestion of
      the authors that the SIP configuration\n   framework [15] be used to establish
      the necessary parameters for\n   usage of vq-rtcpxr events.  A dataset for this
      purpose should be\n   designed and documented in a separate document upon completion
      of the\n   framework.\n"
    title: 4.8.  Configuration Dataset for vq-rtcpxr Events
  title: 4.  Event Package Formal Definition
- contents:
  - "5.  IANA Considerations\n   This document registers a new SIP Event Package and
    a new media type.\n"
  - contents:
    - "5.1.  SIP Event Package Registration\n      Package name: vq-rtcpxr\n      Type:
      package\n      Contact: Amy Pendleton <aspen@telchemy.com>\n      Published
      Specification: This document\n"
    title: 5.1.  SIP Event Package Registration
  - contents:
    - "5.2.  application/vq-rtcpxr Media Type Registration\n   Type name: application\n
      \  Subtype name: vq-rtcpxr\n   Required parameters: none\n   Optional parameters:
      none\n   Encoding considerations: 7 bit\n   Security considerations: See next
      section.\n   Interoperability considerations: none.\n   Published specification:
      This document.\n   Applications that use this media type: This document type
      is\n      being used in notifications of VoIP quality reports.\n   Additional
      Information:\n      Magic Number: None\n      File Extension: None\n      Macintosh
      file type code: \"TEXT\"\n   Person and email address for further information:
      Amy Pendleton\n      <aspen@telchemy.com>\n   Intended usage: COMMON\n   Author
      / Change controller: The IETF.\n"
    title: 5.2.  application/vq-rtcpxr Media Type Registration
  title: 5.  IANA Considerations
- contents:
  - "6.  Security Considerations\n   RTCP reports can contain sensitive information
    since they can provide\n   information about the nature and duration of a session
    established\n   between two or more endpoints.  As a result, any third party wishing\n
    \  to obtain this information SHOULD be properly authenticated by the\n   SIP
    UA using standard SIP mechanisms and according to the\n   recommendations in [5].
    \ Additionally, the event content MAY be\n   encrypted to ensure confidentiality;
    the mechanisms for providing\n   confidentiality are detailed in [2].\n"
  title: 6.  Security Considerations
- contents:
  - "7.  Contributors\n   The authors would like to thank Rajesh Kumar, Dave Oran,
    Tom Redman,\n   Shane Holthaus, and Jack Ford for their comments and input.\n"
  title: 7.  Contributors
- contents:
  - '8.  References

    '
  - contents:
    - "8.1.  Normative References\n   [1]   Bradner, S., \"Key words for use in RFCs
      to Indicate Requirement\n         Levels\", BCP 14, RFC 2119, March 1997.\n
      \  [2]   Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,\n         Peterson,
      J., Sparks, R., Handley, M., and E. Schooler, \"SIP:\n         Session Initiation
      Protocol\", RFC 3261, June 2002.\n   [3]   Schulzrinne, H., Casner, S., Frederick,
      R., and V. Jacobson,\n         \"RTP: A Transport Protocol for Real-Time Applications\",
      STD 64,\n         RFC 3550, July 2003.\n   [4]   Friedman, T., Caceres, R.,
      and A. Clark, \"RTP Control Protocol\n         Extended Reports (RTCP XR)\",
      RFC 3611, November 2003.\n   [5]   Roach, A., \"Session Initiation Protocol
      (SIP)-Specific Event\n         Notification\", RFC 3265, June 2002.\n   [6]
      \  Crocker, D. and P. Overell, \"Augmented BNF for Syntax\n         Specifications:
      ABNF\", STD 68, RFC 5234, January 2008.\n   [7]   Klyne, G., Ed. and C. Newman,
      \"Date and Time on the Internet:\n         Timestamps\", RFC 3339, July 2002.\n
      \  [8]   Niemi, A., \"Session Initiation Protocol (SIP) Extension for\n         Event
      State Publication\", RFC 3903, October 2004.\n   [9]   ITU-T G.1020, \"Performance
      parameter definitions for quality of\n         speech and other voiceband applications
      utilizing IP networks\".\n   [10]  ITU-T P.564, \"Conformance testing for voice
      over IP\n         transmission quality assessment models\".\n   [11]  ITU-T
      G.107, \"The E-model, a computational model for use in\n         transmission
      planning\".\n   [12]  Almes, G., Kalidindi, S., and M. Zekauskas, \"A One-way
      Delay\n         Metric for IPPM\", RFC 2679, September 1999.\n"
    title: 8.1.  Normative References
  - contents:
    - "8.2.  Informative References\n   [13]  Westerlund, M. and S. Wenger, \"RTP
      Topologies\", RFC 5117,\n         January 2008.\n   [14]  Hilt, V., Noel, E.,
      Shen, C., and A. Abdelal, \"Design\n         Considerations for Session Initiation
      Protocol (SIP) Overload\n         Control\", Work in Progress, July 2009.\n
      \  [15]  Petrie, D. and S. Channabasappa, \"A Framework for Session\n         Initiation
      Protocol User Agent Profile Delivery\", Work\n         in Progress, October
      2010.\n   [16]  Rosenberg, J., Mahy, R., Matthews, P., and D. Wing, \"Session\n
      \        Traversal Utilities for NAT (STUN)\", RFC 5389, October 2008.\n"
    title: 8.2.  Informative References
  title: 8.  References
- contents:
  - "Authors' Addresses\n   Amy Pendleton\n   Telchemy Incorporated\n   EMail: aspen@telchemy.com\n
    \  Alan Clark\n   Telchemy Incorporated\n   EMail: alan.d.clark@telchemy.com\n
    \  Alan Johnston\n   Avaya\n   St. Louis, MO  63124\n   EMail: alan.b.johnston@gmail.com\n
    \  Henry Sinnreich\n   Unaffiliated\n   EMail: henry.sinnreich@gmail.com\n"
  title: Authors' Addresses
