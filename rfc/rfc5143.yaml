- title: __initial_text__
  contents:
  - ''
- title: 'Obsoleted by: 4842                                            J. Brayley'
  contents:
  - "Obsoleted by: 4842                                            J. Brayley\n Synchronous\
    \ Optical Network/Synchronous Digital Hierarchy (SONET/SDH)\n       Circuit Emulation\
    \ Service over MPLS (CEM) Encapsulation\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo defines a Historic Document for the Internet\
    \ community.  It\n   does not specify an Internet standard of any kind.  Distribution\
    \ of\n   this memo is unlimited.\n"
- title: IESG Note
  contents:
  - "IESG Note\n   The IESG thinks that this work is related to IETF work done in\
    \ WG\n   PWE3, but this does not prevent publishing.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document describes a historical method for encapsulating\n\
    \   Synchronous Optical Network/Synchronous Digital Hierarchy (SONET/SDH)\n  \
    \ Path signals for transport across packet-switched networks (PSNs).\n   The PSNs\
    \ explicitly supported by this document include MPLS and IP.\n   Note that RFC\
    \ 4842 describes the standards-track protocol for this\n   functionality, and\
    \ new implementations must use RFC 4842 rather than\n   this document except when\
    \ interoperability with older implementations\n   is desired.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Conventions Used in This Document ...............................3\n  \
    \ 3. Scope ...........................................................3\n   4.\
    \ CEM Encapsulation Format ........................................4\n      4.1.\
    \ Transport Encapsulation ....................................6\n           4.1.1.\
    \ MPLS Transport ......................................6\n           4.1.2. IP\
    \ Transport ........................................7\n   5. CEM Operation ...................................................8\n\
    \      5.1. Introduction and Terminology ...............................8\n  \
    \         5.1.1. CEM Packetizer and De-Packetizer ....................9\n    \
    \       5.1.2. CEM DBA .............................................9\n      5.2.\
    \ Description of Normal CEM Operation .......................10\n      5.3. Description\
    \ of CEM Operation during DBA ...................10\n      5.4. Packet Synchronization\
    \ ....................................11\n           5.4.1. Acquisition of Packet\
    \ Synchronization ..............11\n           5.4.2. Loss of Packet Synchronization\
    \ .....................11\n   6. SONET/SDH Maintenance Signals ..................................12\n\
    \      6.1. SONET/SDH to PSN ..........................................12\n  \
    \         6.1.1. AIS-P Indication ...................................13\n    \
    \       6.1.2. STS SPE Unequipped Indication ......................14\n      \
    \     6.1.3. CEM-RDI ............................................14\n      6.2.\
    \ PSN to SONET/SDH ..........................................15\n           6.2.1.\
    \ AIS-P Indication ...................................15\n           6.2.2. STS\
    \ SPE Unequipped Indication ......................15\n   7. Clocking Modes .................................................16\n\
    \      7.1. Synchronous ...............................................16\n  \
    \         7.1.1. Synchronous Unstructured CEM .......................16\n    \
    \       7.1.2. Synchronous Structured CEM .........................16\n      7.2.\
    \ Asynchronous ..............................................17\n   8. CEM LSP\
    \ Signaling ..............................................17\n   9. Security Considerations\
    \ ........................................18\n   10. IANA Considerations ...........................................18\n\
    \   11. References ....................................................18\n  \
    \    11.1. Normative References .....................................18\n    \
    \  11.2. Informative References ...................................19\n   Appendix\
    \ A. SONET/SDH Rates and Formats ...........................20\n   Appendix B.\
    \ ECC-6 Definition ......................................21\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This document describes a historical method for encapsulating\n\
    \   SONET/SDH Path signals for transport across packet-switched networks\n   (PSNs).\n\
    \   The native transmission system for circuit-oriented Time Division\n   Multiplexing\
    \ (TDM) signals is the Synchronous Optical Network (SONET)\n   [T1.105], [GR-253]/Synchronous\
    \ Digital Hierarchy (SDH) [G.707].  To\n   support TDM traffic (which includes\
    \ voice, data, and private leased\n   line services), PSNs must emulate the circuit\
    \ characteristics of\n   SONET/SDH payloads.  MPLS labels and a new circuit emulation\
    \ header\n   are used to encapsulate TDM signals and provide the Circuit Emulation\n\
    \   Service over MPLS (CEM) function.  The MPLS encapsulation may be\n   further\
    \ encapsulated in IP for carriage across IP PSNs [RFC4023].\n   This document\
    \ also describes an optional extension to CEM called\n   Dynamic Bandwidth Allocation\
    \ (DBA).  This is a method for dynamically\n   reducing the bandwidth utilized\
    \ by emulated SONET/SDH circuits in the\n   packet network.  This bandwidth reduction\
    \ is accomplished by not\n   sending the SONET/SDH payload through the packet\
    \ network under\n   certain conditions, such as Alarm Indication Signal - Path\
    \ (AIS-P) or\n   Synchronous Transport Signal Synchronous Payload Envelope (STS\
    \ SPE)\n   Unequipped.\n"
- title: 2.  Conventions Used in This Document
  contents:
  - "2.  Conventions Used in This Document\n   The key words \"MUST\", \"MUST NOT\"\
    , \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [RFC2119].\n"
- title: 3.  Scope
  contents:
  - "3.  Scope\n   This document describes how to provide CEM for the following digital\n\
    \   signals:\n   1. SONET STS-1 synchronous payload envelope (SPE)/SDH VC-3\n\
    \   2. STS-Nc SPE (N = 3, 12, or 48)/SDH VC-4, VC-4-4c, VC-4-16c\n   3. Unstructured\
    \ SONET Emulation, where the entire SONET bit-stream\n      (including the transport\
    \ overhead) is packetized and transported\n      across the PSN.\n   For the remainder\
    \ of this document, these constructs will be referred\n   to as SONET/SDH channels.\n\
    \   Other SONET/SDH signals, such as virtual tributary (VT) structured\n   sub-rate\
    \ mapping, are not explicitly discussed in this document;\n   however, it can\
    \ be extended in the future to support VT and lower\n   speed non-SONET/SDH services.\
    \  OC-192c SPE/VC-4-64c are also not\n   included at this point, since most PSNs\
    \ use OC-192c or slower trunks,\n   and thus would not have sufficient capacity.\
    \  As trunk capacities\n   increase in the future, the scope of this document\
    \ can be accordingly\n   extended.\n"
- title: 4.  CEM Encapsulation Format
  contents:
  - "4.  CEM Encapsulation Format\n   In order to transport SONET/SDH SPEs through\
    \ a packet-oriented\n   network, the SPE is broken into fragments.  A 32-bit CEM\
    \ header is\n   pre-pended to each fragment.  The Basic CEM packet appears in\
    \ Figure\n   1.\n   +-----------------------------------+\n   |            CEM\
    \ Header             |\n   +-----------------------------------+\n   |       \
    \                            |\n   |                                   |\n   |\
    \        SONET/SDH SPE Fragment     |\n   |                                  \
    \ |\n   |                                   |\n   +-----------------------------------+\n\
    \   Figure 1.  Basic CEM Packet\n   The 32-bit CEM header has the following format:\n\
    \    0                   1                   2                   3\n    0 1 2\
    \ 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |D|R|Rvd|   Sequence Num    | Structure Pointer |N|P|   ECC-6   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   Figure 2.  CEM Header Format\n   The above fields are defined as follows:\n\
    \   D-bit: This bit signals DBA Mode.  It MUST be set to zero for normal\n   operation,\
    \ and it MUST be set to one if CEM is currently in DBA mode.\n   DBA is an optional\
    \ mode during which trivial SPEs are not transmitted\n   into the packet network.\
    \  See Table 1 and sections 7 and 8 for\n   further details.\n      Note: for\
    \ unstructured CEM, the D-bit MUST be set to zero.\n   R bit: CEM-RDI (Remote\
    \ Defect Indicator).  This bit is set to one to\n   signal to the remote CEM function\
    \ that a loss of packet\n   synchronization has occurred.\n   Rvd: These bits\
    \ are reserved for future use, and MUST be set to zero.\n   Sequence Number: \
    \ This is a packet sequence number, which MUST\n   continuously cycle from 0 to\
    \ 1023.  It SHOULD begin at zero when a\n   CEM LSP (Label Switched Path) is created.\n\
    \   Structure Pointer: The Structure Pointer MUST contain the offset of\n   the\
    \ J1 byte within the CEM payload.  The value is from 0 to 1,022,\n   where 0 means\
    \ the first byte after the CEM header.  The Structure\n   Pointer MUST be set\
    \ to 0x3FF (1,023) if a packet does not carry the\n   J1 byte.  See [T1.105],\
    \ [G.707], and [GR-253] for more information On\n   the J1 byte and the SONET/SDH\
    \ payload pointer.\n      Note: for unstructured CEM, the Structure Pointer field\
    \ MUST be\n      set to 0x3FF.\n   The N and P bits: These bits indicate negative\
    \ and positive pointer\n   adjustment events.  They are also used to relay SONET/SDH\
    \ maintenance\n   signals, such as AIS-P.  See Table 1 and sections 7 and 8 for\
    \ more\n   details.\n      Note: for unstructured CEM, the N and P bits MUST both\
    \ be set to\n      zero.\n   +---+---+---+----------------------------------------------+\n\
    \   | D | N | P |         Interpretation                       |\n   +---+---+---+-------------+--------------------------------+\n\
    \   | 0 | 0 | 0 | Normal Mode | No Ptr Adjustment              |\n   | 0 | 0 |\
    \ 1 | Normal Mode | Positive Ptr Adjustment        |\n   | 0 | 1 | 0 | Normal\
    \ Mode | Negative Ptr Adjustment        |\n   | 0 | 1 | 1 | Normal Mode | AIS-P\
    \                          |\n   |   |   |   |             |                 \
    \               |\n   | 1 | 0 | 0 | DBA Mode    | STS SPE Unequipped         \
    \    |\n   | 1 | 0 | 1 | DBA Mode    | STS SPE Unequipped Pos Ptr Adj |\n   |\
    \ 1 | 1 | 0 | DBA Mode    | STS SPE Unequipped Neg Ptr Adj |\n   | 1 | 1 | 1 |\
    \ DBA Mode    | AIS-P                          |\n   +---+---+---+-------------+--------------------------------+\n\
    \   Table 1.  Interpretation of D, N, and P bits\n   ECC-6: An Error Correction\
    \ Code to protect the CEM header.  This\n   offers the ability to correct single\
    \ bit errors and detect up to two\n   bit errors.  The ECC algorithm is described\
    \ in Appendix B.  The ECC-6\n   can be optionally disabled at provisioning time.\
    \  If the ECC-6 is not\n   utilized, it MUST be set to zero.\n      Note: Normal\
    \ CEM packets are fixed in length for all of the\n      packets of a particular\
    \ emulated TDM stream.  This length is\n      signaled using the CEM Payload Bytes\
    \ parameter defined in\n      [RFC4447], or is statically provisioned for each\
    \ TDM stream.\n      Therefore, the length of each CEM packet does not need to\
    \ be\n      carried in the CEM header.\n      Note: Setting the D-bit to 0 and\
    \ the R bit to 1 violates the Best\n      Current Practice defined in [RFC4928]\
    \ when operating on MPLS\n      networks.  In this situation, MPLS networks could\
    \ mistake a CEM\n      payload as the first nibble of an IPv4 packet, potentially\
    \ causing\n      mis-ordering of packets on the pseudowire in the presence of\
    \ IP\n      Equal Cost Multi-Path (ECMP) in the MPLS network.  The use of this\n\
    \      CEM header preceded the use of MPLS ECMP.  As stated earlier,\n      [RFC4842]\
    \ describes the standards-track protocol for this\n      functionality, and it\
    \ does not share this violation.\n"
- title: 4.1.  Transport Encapsulation
  contents:
  - "4.1.  Transport Encapsulation\n   In principle, CEM packets can be transported\
    \ over any packet-oriented\n   network.  The following sections describe specifically\
    \ how CEM\n   packets MUST be encapsulated for transport over MPLS or IP networks.\n"
- title: 4.1.1.  MPLS Transport
  contents:
  - "4.1.1.  MPLS Transport\n   To transport a CEM packet over an MPLS network, an\
    \ MPLS label stack\n   MUST be pushed on top of the CEM packet.\n   The last two\
    \ labels prior to the CEM header are referred to as the\n   Tunnel and Virtual\
    \ Circuit (VC) labels.\n   The VC label is required, and is the last label prior\
    \ to the CEM\n   Header.  The VC label MUST be used to identify the CEM connection\n\
    \   within the MPLS tunnel.\n   The optional tunnel label is immediately above\
    \ the VC label on the\n   label stack.  If present, the tunnel label MUST be used\
    \ to identify\n   the MPLS LSP used to tunnel the TDM packets through the MPLS\
    \ network\n   (the tunnel LSP).\n   This is similar to the label stack usage defined\
    \ in [RFC4447].\n   +-----------------------------------+\n   | Additional MPLS\
    \ Labels (Optional) |\n   +-----------------------------------+\n   |       Tunnel\
    \ Label (Optional)     |\n   +-----------------------------------+\n   |     \
    \        VC Label              |\n   +-----------------------------------+\n \
    \  |            CEM Header             |\n   +-----------------------------------+\n\
    \   |                                   |\n   |                              \
    \     |\n   |       SONET/SDH SPE Fragment      |\n   |                      \
    \             |\n   |                                   |\n   +-----------------------------------+\n\
    \   Figure 3.  Typical MPLS Transport Encapsulation\n"
- title: 4.1.2.  IP Transport
  contents:
  - "4.1.2.  IP Transport\n   It is highly desirable to define a single encapsulation\
    \ format that\n   will work for both IP and MPLS.  Furthermore, it is desirable\
    \ that\n   the encapsulation mechanism be as efficient as possible.\n   One way\
    \ to achieve these goals is to map CEM directly onto IP by\n   mapping the previously\
    \ described MPLS packets onto IP.\n   A mechanism for carrying MPLS over IP is\
    \ described in [RFC4023].\n   Using this encapsulation scheme would result in\
    \ the packet format\n   illustrated in Figure 4.\n   +-----------------------------------+\n\
    \   |                                   |\n   |    IPv6/v4 Header [RFC4023]  \
    \     |\n   |                                   |\n   +-----------------------------------+\n\
    \   |      Tunnel Label (Optional)      |\n   +-----------------------------------+\n\
    \   |             VC Label              |\n   +-----------------------------------+\n\
    \   |            CEM Header             |\n   +-----------------------------------+\n\
    \   |                                   |\n   |                              \
    \     |\n   |       SONET/SDH SPE Fragment      |\n   |                      \
    \             |\n   |                                   |\n   +-----------------------------------+\n\
    \   Figure 4.  MPLS Transport Encapsulation\n"
- title: 5.  CEM Operation
  contents:
  - "5.  CEM Operation\n   The following sections describe CEM operation.\n"
- title: 5.1.  Introduction and Terminology
  contents:
  - "5.1.  Introduction and Terminology\n   There are two types of CEM: structured\
    \ and unstructured.\n   Unstructured CEM packetizes the entire SONET/SDH bit-stream\n\
    \   (including transport overhead).\n   Structured CEM terminates the transport\
    \ overhead and packetizes\n   individual channels (STS-1/Nc) within the SONET/SDH\
    \ frame.  Because\n   structured CEM terminates the transport overhead, structured\
    \ CEM\n   implementations SHOULD meet the generic requirements for SONET/SDH\n\
    \   Line Terminating Equipment as defined in [T1.105], [G.707], and\n   [GR-253].\n\
    \   Implementations MUST support structured CEM and MAY support\n   unstructured\
    \ CEM.\n   Structured CEM MUST support a normal mode of operation and MAY\n  \
    \ support an optional extension called Dynamic Bandwidth Allocation\n   (DBA).\
    \  During normal operation, SONET/SDH payloads are fragmented,\n   pre-pended\
    \ with the CEM header, the VC label, and the PSN header, and\n   then transmitted\
    \ into the packet network.  During DBA mode, only the\n   CEM header, the VC label,\
    \ and PSN header are transmitted.  This is\n   done to conserve bandwidth when\
    \ meaningful user data is not present\n   in the SPE, such as during AIS-P or\
    \ STS SPE Unequipped.\n"
- title: 5.1.1.  CEM Packetizer and De-Packetizer
  contents:
  - "5.1.1.  CEM Packetizer and De-Packetizer\n   As with all adaptation functions,\
    \ CEM has two distinct components:\n   adapting TDM SONET/SDH into a CEM packet\
    \ stream, and converting the\n   CEM packet stream back into a TDM SONET/SDH.\
    \  The first function will\n   be referred to as CEM packetizer and the second\
    \ as CEM de-packetizer.\n   This terminology is illustrated in Figure 5.\n   \
    \          +------------+              +---------------+\n             |     \
    \       |              |               |\n   SONET --> |    CEM     | --> PSN\
    \  --> |      CEM      | --> SONET\n    SDH      | Packetizer |              |\
    \ De-Packetizer |      SDH\n             |            |              |       \
    \        |\n             +------------+              +---------------+\n   Figure\
    \ 5.  CEM Terminology\n   Note: the CEM de-packetizer requires a buffering mechanism\
    \ to account\n   for delay variation in the CEM packet stream.  This buffering\n\
    \   mechanism will be generically referred to as the CEM jitter buffer.\n"
- title: 5.1.2.  CEM DBA
  contents:
  - "5.1.2.  CEM DBA\n   DBA is an optional mode of operation for structured CEM that\
    \ only\n   transmits the CEM header, the VC label, and PSN header into the\n \
    \  packet network under certain circumstances, such as AIS-P or STS SPE\n   Unequipped.\n\
    \   If DBA is supported by a CEM implementation, the user SHOULD be able\n   to\
    \ configure if DBA will be triggered by AIS-P, STS SPE Unequipped,\n   both, or\
    \ neither on a per channel basis.\n   If DBA is supported, the determination of\
    \ AIS-P and STS SPE\n   Unequipped MUST be based on the state of SONET/SDH Section,\
    \ Line, and\n   Path Overhead bytes.  DBA based on pattern detection within the\
    \ SPE\n   (i.e., all zeros, 7Es, or ATM idle cells) is for further study.\n  \
    \ During AIS-P, there is no valid payload pointer, so pointer\n   adjustments\
    \ cannot occur.  During STS SPE Unequipped, the SONET/SDH\n   payload pointer\
    \ is valid, and therefore pointer adjustments MUST be\n   supported even during\
    \ DBA.  See Table 1 for details.\n"
- title: 5.2.  Description of Normal CEM Operation
  contents:
  - "5.2.  Description of Normal CEM Operation\n   During normal operation, the CEM\
    \ packetizer will receive a fixed rate\n   byte stream from a SONET/SDH interface.\
    \  When a packet's worth of\n   data has been received from a SONET/SDH channel,\
    \ the CEM header, the\n   VC Label, and PSN header are pre-pended to the SPE fragment\
    \ and the\n   resulting CEM packet is transmitted into the packet network.  Because\n\
    \   all normal CEM packets associated with a specific SONET/SDH channel\n   will\
    \ have the same length, the transmission of CEM packets for that\n   channel SHOULD\
    \ occur at regular intervals.\n   At the far-end of the packet network, the CEM\
    \ de-packetizer will\n   receive packets into a jitter buffer and then play out\
    \ the received\n   byte stream at a fixed rate onto the corresponding SONET/SDH\
    \ channel.\n   The jitter buffer SHOULD be adjustable in length to account for\n\
    \   varying network delay behavior.  The received packet rate from the\n   packet\
    \ network should be exactly balanced by the transmission rate\n   onto the SONET/SDH\
    \ channel, on average.  The time over which this\n   average is taken corresponds\
    \ to the depth of the jitter buffer for a\n   specific CEM channel.\n   The CEM\
    \ sequence numbers provide a mechanism to detect lost and/or\n   mis-ordered packets.\
    \  The CEM de-packetizer MUST detect lost or\n   mis-ordered packets.  The CEM\
    \ de-packetizer MUST play out a\n   programmable byte pattern in place of any\
    \ dropped packets.  The CEM\n   de-packetizer MAY re-order packets received out\
    \ of order.  If the CEM\n   de-packetizer does not support re-ordering, it MUST\
    \ drop mis-ordered\n   packets.\n"
- title: 5.3.  Description of CEM Operation during DBA
  contents:
  - "5.3.  Description of CEM Operation during DBA\n   (Note: DBA is only applicable\
    \ to structured CEM.)\n   There are several issues that should be addressed by\
    \ a workable CEM\n   DBA mechanism.  First, when DBA is invoked, there should\
    \ be a\n   substantial savings in bandwidth utilization in the packet network.\n\
    \   The second issue is that the transition in and out of DBA should be\n   tightly\
    \ coordinated between the local CEM packetizer and CEM\n   de-packetizer at the\
    \ far side of the packet network.  A third is that\n   the transition in and out\
    \ of DBA should be accomplished with minimal\n   disruption to the adapted data\
    \ stream.\n   Another goal is that the reduction of CEM traffic due to DBA should\n\
    \   not be mistaken for a fault in the packet network or vice-versa.\n   Finally,\
    \ the implementation of DBA should require minimal\n   modifications beyond what\
    \ is necessary for the nominal CEM case.  The\n   mechanism described below is\
    \ a reasonable balance of these goals.\n   During DBA, packets MUST be emitted\
    \ at exactly the same rate as they\n   would be during normal operation.  This\
    \ SHOULD be accomplished by\n   transmitting each DBA packet after a complete\
    \ packet of data has been\n   received from the SONET/SDH channel.  The only change\
    \ from normal\n   operation is that the CEM packets during DBA MUST only carry\
    \ the CEM\n   header, the VC label, and the PSN header.\n   Because some links\
    \ have a minimum supported packet size, the CEM\n   packetizer MAY append a configurable\
    \ number of bytes immediately\n   after the CEM header to pad out the CEM packet\
    \ to reach the minimum\n   supported packet size.  The value of the padding bytes\
    \ is\n   implementation specific.  The D-bit MUST be set to one, to indicate\n\
    \   that DBA is active.\n   The CEM de-packetizer MUST assume that each packet\
    \ received with the\n   D-bit set represents a normal-sized packet containing\
    \ an AIS-P or STS\n   SPE Unequipped payload as noted by N and P, (see Table 1).\
    \  The CEM\n   de-packetizer MUST accept DBA packets with or without padding.\n\
    \   This allows the CEM packetization and de-packetization logic during\n   DBA\
    \ to be similar to the nominal case.  It insures that the correct\n   SONET/SDH\
    \ indication is reliably transmitted between CEM adaptation\n   points.  It minimizes\
    \ the risk of under or over running the jitter\n   buffer during the transition\
    \ in and out of DBA.  And, it guarantees\n   that faults in the packet network\
    \ are recognized as distinctly\n   different from line conditioning on the SONET/SDH\
    \ interfaces.\n"
- title: 5.4.  Packet Synchronization
  contents:
  - "5.4.  Packet Synchronization\n   A key component in declaring the state of a\
    \ CEM service is whether or\n   not the CEM de-packetizer is in or out of packet\
    \ synchronization.\n   The following paragraphs describe how that determination\
    \ is made.\n"
- title: 5.4.1.  Acquisition of Packet Synchronization
  contents:
  - "5.4.1.  Acquisition of Packet Synchronization\n   At startup, a CEM de-packetizer\
    \ will be out of packet synchronization\n   by default.  To declare packet synchronization\
    \ at startup or after a\n   loss of packet synchronization, the CEM de-packetizer\
    \ must receive a\n   configurable number of CEM packets with sequential sequence\
    \ numbers.\n"
- title: 5.4.2.  Loss of Packet Synchronization
  contents:
  - "5.4.2.  Loss of Packet Synchronization\n   Once a CEM de-packetizer is in packet\
    \ sync, it may encounter a set of\n   events that will cause it to lose packet\
    \ synchronization.\n   As discussed in section 5.2, a CEM de-packetizer MAY support\
    \ the\n   re-ordering of mis-ordered packets.\n   If a CEM de-packetizer supports\
    \ re-ordering, then the determination\n   that packet synchronization has been\
    \ lost cannot be made at the time\n   the packets are received from the PSN. \
    \ Instead, the determination\n   MUST be made as the packets are being played\
    \ out onto the SONET/SDH\n   interface.  This is because it is only at play-out\
    \ time that the\n   determination can be made as to whether the entire emulated\
    \ SONET/SDH\n   stream was received from the PSN.\n   If a CEM de-packetizer does\
    \ not support re-ordering, a number of\n   approaches may be used to minimize\
    \ the impact of mis-ordered or lost\n   packets on the final re-assembled SONET/SDH\
    \ stream.  For example, ATM\n   Adaptation Layer 1 (AAL1) [I.363.1] uses a simple\
    \ state-machine to\n   re-order packets in a subset of possible cases.  The algorithm\
    \ for\n   these state-machines is outside of the scope of CEM.  However, the\n\
    \   final determination as to whether or not to declare loss of packet\n   synchronization\
    \ MUST be based on the same criteria as for\n   implementations that do support\
    \ re-ordering.\n   Whether or not a CEM implementation supports re-ordering, the\n\
    \   declaration of loss of packet synchronization MUST be based on the\n   following\
    \ criteria.\n   As packets are played out towards the SONET/SDH interface, the\
    \ CEM\n   de-packetizer will encounter empty packets in the place of packets\n\
    \   that were dropped by the PSN, or effectively dropped due to\n   limitations\
    \ of the CEM implementation.  If the CEM de-packetizer\n   encounters more than\
    \ a configurable number of sequential dropped\n   packets, the CEM de-packetizer\
    \ MUST declare loss of packet\n   synchronization.\n"
- title: 6.  SONET/SDH Maintenance Signals
  contents:
  - "6.  SONET/SDH Maintenance Signals\n   There are several issues that must be considered\
    \ in the mapping of\n   maintenance signals between SONET/SDH and a PSN.  A description\
    \ of\n   how these signals and conditions are mapped between the two domains\n\
    \   is given below.\n   For clarity, the mappings are split into two groups: SONET/SDH\
    \ to PSN\n   and PSN to SONET/SDH.\n"
- title: 6.1.  SONET/SDH to PSN
  contents:
  - "6.1.  SONET/SDH to PSN\n   The following sections describe how SONET/SDH Maintenance\
    \ Signals and\n   Alarm conditions are mapped into a Packet-Switched Network.\n"
- title: 6.1.1.  AIS-P Indication
  contents:
  - "6.1.1.  AIS-P Indication\n   In a SONET/SDH network, SONET/SDH Path outages are\
    \ signaled using\n   maintenance alarms, such as Path AIS (AIS-P).  In particular,\
    \ AIS-P\n   indicates that the SONET/SDH Path is not currently transmitting valid\n\
    \   end-user data, and the SPE contains all ones.\n   It should be noted that\
    \ for structured CEM, nearly every type of\n   service-effecting section or line\
    \ defect will result in an AIS-P\n   condition.\n   The SONET/SDH hierarchy is\
    \ illustrated below.\n                              +----------+\n           \
    \                   |   PATH   |\n                              +----------+\n\
    \                                   ^\n                                   |\n\
    \                                 AIS-P\n                                   |\n\
    \                                   |\n                              +----------+\n\
    \                              |   LINE   |\n                              + ---------+\n\
    \                                 ^     ^\n                                 |\
    \     |\n                               AIS-L   +------ LOP\n                \
    \                 |\n                                 |\n                    \
    \          +----------+\n                              | SECTION  |\n        \
    \                      +----------+\n                                 ^    ^\n\
    \                                 |    |\n                                 | \
    \   |\n                                LOS  LOF\n                    Figure 6.\
    \  SONET/SDH Fault Hierarchy\n   Should the Section Layer detect a Loss of Signal\
    \ (LOS) or Loss of\n   Frame (LOF) condition, it sends AIS-L up to the Line Layer.\
    \  If the\n   Line Layer detects AIS-L or Loss of Path (LOP), it sends AIS-P to\
    \ the\n   Path Layer.\n   In normal mode during AIS-P, structured CEM packets\
    \ are generated as\n   usual.  The N and P bits MUST be set to 11 binary to signal\
    \ AIS-P\n   explicitly through the packet network.  The D-bit MUST be set to zero\n\
    \   to indicate that the SPE is being carried through the packet network.\n  \
    \ Normal CEM packets with the SPE fragment, CEM header, the VC label,\n   and\
    \ PSN header MUST be transmitted into the packet network.\n   However, to conserve\
    \ network bandwidth during AIS-P, DBA MAY be\n   employed.  If DBA has been enabled\
    \ for AIS-P and AIS-P is currently\n   occurring, the N and P bits MUST be set\
    \ to 11 binary to signal AIS,\n   and the D-bit MUST be set to one to indicate\
    \ that the SPE is not\n   being carried through the packet network.  Only the\
    \ CEM header, the\n   VC label, and the PSN header MUST be transmitted into the\
    \ packet\n   network.\n   Also note that this differs from the outage mechanism\
    \ in [RFC4447],\n   which withdraws the VC label as a result of an endpoint outage.\
    \  TDM\n   circuit emulation requires the ability to distinguish between the\n\
    \   de-provisioning of a circuit (which causes the VC label to be\n   withdrawn),\
    \ and temporary outages (which are signaled using AIS-P).\n"
- title: 6.1.2.  STS SPE Unequipped Indication
  contents:
  - "6.1.2.  STS SPE Unequipped Indication\n   The STS SPE Unequipped Indication is\
    \ a slightly different case than\n   AIS-P.  When byte C2 of the Path Overhead\
    \ (STS path signal label) is\n   00h and Byte B3 (STS Path BIP-8) is valid, it\
    \ indicates that the STS\n   SPE is unequipped.  Note: this is typically signaled\
    \ by setting the\n   entire SPE to zeros.\n   For normal structured CEM operation\
    \ during STS SPE Unequipped, the N\n   and P bits MUST be interpreted as usual.\
    \  The SPE MUST be transmitted\n   into the packet network along with the CEM\
    \ header, the VC label, and\n   PSN header, and the D-Bit MUST be set to zero.\n\
    \   If DBA has been enabled for STS SPE Unequipped and the Unequipped\n   condition\
    \ is occurring on the SONET/SDH channel, the D-bit MUST be\n   set to one to indicate\
    \ DBA is active.  Only the CEM header, the VC\n   Label, and PSN header MUST be\
    \ transmitted into the packet network.\n   The N and P bits MUST be used to signal\
    \ pointer adjustments as\n   normal.  See Table 1 and section 8 for details.\n"
- title: 6.1.3.  CEM-RDI
  contents:
  - "6.1.3.  CEM-RDI\n   The CEM function MUST send CEM-RDI towards the packet network\
    \ during\n   loss of packet synchronization.  This MUST be accomplished by setting\n\
    \   the R bit to one in the CEM header.  This applies for both structured\n  \
    \ and unstructured CEM.\n"
- title: 6.2.  PSN to SONET/SDH
  contents:
  - "6.2.  PSN to SONET/SDH\n   The following sections discuss how the various conditions\
    \ on the\n   packet network are converted into SONET/SDH indications.\n"
- title: 6.2.1.  AIS-P Indication
  contents:
  - "6.2.1.  AIS-P Indication\n   There are several conditions in the packet network\
    \ that will cause\n   the structured CEM de-packetization function to send an\
    \ AIS-P\n   indication onto a SONET/SDH channel.\n   The first of these is the\
    \ receipt of structured CEM packets with the\n   N and P bits set to one, and\
    \ the D-bit set to zero.  This is an\n   explicit indication of AIS-P being received\
    \ at the far-end of the\n   packet network, with DBA disabled for AIS-P.  The\
    \ CEM de-packetizer\n   MUST play out the received SPE fragment (which will incidentally\
    \ be\n   carrying all ones), and MUST configure the SONET/SDH Overhead to\n  \
    \ signal AIS-P as defined in [T1.105], [G.707], and [GR-253].\n   The second case\
    \ is the receipt of structured CEM packets with the N\n   and P bits set to one,\
    \ and the D-bit set to one.  This is an explicit\n   indication of AIS-P being\
    \ received at the far-end of the packet\n   network, with DBA enabled for AIS-P.\
    \  The CEM de-packetizer MUST play\n   out one packet's worth of all ones for\
    \ each packet received, and MUST\n   configure the SONET/SDH Overhead to signal\
    \ AIS-P as defined in\n   [T1.105], [G.707], and [GR-253].\n   A third case that\
    \ will cause a structured CEM de-packetization\n   function to send an AIS-P indication\
    \ onto a SONET/SDH channel is loss\n   of packet synchronization.\n"
- title: 6.2.2.  STS SPE Unequipped Indication
  contents:
  - "6.2.2.  STS SPE Unequipped Indication\n   There are three conditions in the packet\
    \ network that will cause the\n   CEM function to transmit STS SPE Unequipped\
    \ Indications onto the\n   SONET/SDH channel.\n   The first, which is transparent\
    \ to CEM, is the receipt of regular CEM\n   packets that happen to be carrying\
    \ an SPE that contains the\n   appropriate Path Overhead to signal STS SPE Unequipped.\
    \  This case\n   does not require any special processing on the part of the CEM\n\
    \   de-packetizer.\n   The second case is the receipt of structured CEM packets\
    \ that have\n   the D-bit set to one to indicate that DBA is active and the N\
    \ and P\n   bits set to 00 binary, 01 binary, or 10 binary to indicate STS SPE\n\
    \   Unequipped with or without pointer adjustments.  The CEM\n   de-packetizer\
    \ MUST use this information to transmit a packet of all\n   zeros onto the SONET/SDH\
    \ interface, and adjust the payload pointer as\n   necessary.\n   The third case\
    \ when a structured CEM de-packetizer MUST send an STS\n   SPE Unequipped Indication\
    \ towards the SONET/SDH interface is when the\n   VC-label has been withdrawn\
    \ due to de-provisioning of the circuit.\n"
- title: 7.  Clocking Modes
  contents:
  - "7.  Clocking Modes\n   It is necessary to be able to regenerate the input service\
    \ clock at\n   the output interface.  Two clocking modes are supported: synchronous\n\
    \   and asynchronous.  Selection of the clocking mode is made as part of\n   service\
    \ provisioning.  Both ends of the emulated circuit must be\n   configured with\
    \ the same clocking mode.\n"
- title: 7.1.  Synchronous
  contents:
  - "7.1.  Synchronous\n   When synchronous SONET/SDH timing is available at both\
    \ ends of the\n   circuit, the issue of clock recovery becomes much simpler.\n"
- title: 7.1.1.  Synchronous Unstructured CEM
  contents:
  - "7.1.1.  Synchronous Unstructured CEM\n   For unstructured CEM, the external clock\
    \ is used to clock each bit\n   onto the optical carrier.\n"
- title: 7.1.2.  Synchronous Structured CEM
  contents:
  - "7.1.2.  Synchronous Structured CEM\n   For structured CEM, the external clock\
    \ is used to clock the SONET/SDH\n   carrier.  The N and P bits are used to signal\
    \ negative or positive\n   pointer adjustment events between structured CEM endpoints.\n\
    \   If there is a frequency offset between the frame rate of the\n   transport\
    \ overhead and that of the SONET/SDH SPE, then the alignment\n   of the SPE shall\
    \ periodically slip back or advance in time through\n   positive or negative stuffing.\
    \  The N and P bits are used to replay\n   the pointer adjustment events and eliminate\
    \ transport jitter.\n   During a negative pointer adjustment event, the H3 byte\
    \ from the\n   SONET/SDH stream is incorporated into the CEM packet payload in\
    \ order\n   with the rest of the SPE.  During a positive pointer adjustment\n\
    \   event, the stuff byte is not included in the CEM packet payload.\n   The pointer\
    \ adjustment event MUST be transmitted in three consecutive\n   packets by the\
    \ packetizer.  The de-packetizer MUST play out the\n   pointer adjustment event\
    \ when the first packet of the three with the\n   N/P bits set is received.\n\
    \   The CEM de-packetizer MUST utilize the CEM sequence numbers to insure\n  \
    \ that SONET/SDH pointer adjustment events are not played any more\n   frequently\
    \ than once per every three CEM packets transmitted by the\n   remote CEM packetizer.\n\
    \   References [T1.105], [G.707], and [GR-253] specify that pointer\n   adjustment\
    \ events MUST be separated by three SONET/SDH frames without\n   a pointer adjustment\
    \ event.  In order to relay all legal pointer\n   adjustment events, the packet\
    \ size for a specific circuit MUST be no\n   larger than (783 * 4 * N)/3, where\
    \ N is the STS-Nc multiplier.\n   However, some SONET/SDH equipment allows pointer\
    \ adjustments to occur\n   in back-to-back SONET/SDH frames.  In order to support\
    \ this\n   possibility, the packet size for a particular circuit SHOULD be no\n\
    \   larger than (783*N)/3, where N is the STS-Nc multiplier.\n   Since the minimum\
    \ value of N is one, CEM implementations SHOULD\n   support a minimum payload\
    \ length of 783/3 or 261 bytes.  Smaller\n   payload lengths MAY be supported\
    \ as an option.\n"
- title: 7.2.  Asynchronous
  contents:
  - "7.2.  Asynchronous\n   If synchronous timing is not available, other methods\
    \ MAY be employed\n   to regenerate the circuit timing.\n   For structured CEM,\
    \ the CEM packetizer SHOULD generate the N and P\n   bits as usual.  However,\
    \ without external synchronization, this\n   information is not sufficient to\
    \ reliably justify the SPE within the\n   SONET/SDH transport framing at the CEM\
    \ de-packetizer.  The\n   de-packetizer MAY employ an adaptive algorithm to introduce\
    \ pointer\n   adjustment events to map the CEM SPE to the SONET/SDH transport\n\
    \   framing.  Regardless of whether the N and P bits are used by the\n   de-packetizer\
    \ as part of the adaptive clock recovery algorithm, they\n   MUST still be used\
    \ in conjunction with the D-bit to signal AIS-P, STS\n   SPE Unequipped, and DBA.\n\
    \   For unstructured CEM, the CEM de-packetizer MAY use an adaptive clock\n  \
    \ recovery technique to regenerate the SONET/SDH transport clock.\n   An example\
    \ adaptive clock recovery method can be found in section\n   3.4.2 of [VTOA].\n"
- title: 8.  CEM LSP Signaling
  contents:
  - "8.  CEM LSP Signaling\n   For maximum network scaling in MPLS applications, CEM\
    \ LSP signaling\n   may be performed using the Label Distribution Protocol (LDP)\
    \ Extended\n   Discovery mechanism as augmented by the Pseudo-Wire id Forward\
    \ Error\n   Correction (PWid FEC) Element defined in [RFC4447].  MPLS traffic\n\
    \   tunnels may be dedicated to CEM, or shared with other MPLS-based\n   services.\
    \  The value 0x8008 is used for the PWE3 PW Type in the PWid\n   FEC Element in\
    \ order to signify that the LSP being signaled is to\n   carry CEM.  Note that\
    \ the generic control word defined in [GR-253] is\n   not used, as its functionality\
    \ is included in the CEM encapsulation\n   header.\n   Alternatively, static label\
    \ assignment may be used, or a dedicated\n   traffic engineered LSP may be used\
    \ for each CEM service.\n   Normal CEM packets are fixed in length for all of\
    \ the packets of a\n   particular emulated TDM stream.  This length is signaled\
    \ using the\n   CEM Payload Bytes parameter defined in [RFC4447], or it is statically\n\
    \   provisioned for each CEM service.\n   At this time, other aspects of the CEM\
    \ service MUST be statically\n   provisioned.\n"
- title: 9.  Security Considerations
  contents:
  - "9.  Security Considerations\n   The CEM encapsulation is subject to all of the\
    \ general security\n   considerations discussed in [RFC3985] and [RFC4447].  In\
    \ addition,\n   this document specifies only encapsulations, and not the protocols\n\
    \   used to carry the encapsulated packets across the PSN.  Each such\n   protocol\
    \ may have its own set of security issues, but those issues\n   are not affected\
    \ by the encapsulations specified herein.  Note that\n   the security of the transported\
    \ CEM service will only be as good as\n   the security of the PSN.  This level\
    \ of security may be less rigorous\n   then that available from a native TDM service\
    \ due to the inherent\n   differences between circuit-switched and packet-switched\
    \ public\n   networks.\n"
- title: 10.  IANA Considerations
  contents:
  - "10.  IANA Considerations\n   IANA has already allocated the PWE3 PW Type value\
    \ 0x0008 for this\n   specification.  No further actions are required.\n"
- title: 11.  References
  contents:
  - '11.  References

    '
- title: 11.1.  Normative References
  contents:
  - "11.1.  Normative References\n   [G.707]     ITU Recommendation G.707, \"Network\
    \ Node Interface For The\n               Synchronous Digital Hierarchy\", 1996.\n\
    \   [GR-253]    Telcordia Technologies, \"Synchronous Optical Network\n      \
    \         (SONET) Transport Systems: Common Generic Criteria\", GR-\n        \
    \       253-CORE, Issue 3, September 2000.\n   [I.363.1]   ITU-T, \"Recommendation\
    \ I.363.1, B-ISDN Adaptation Layer\n               Specification: Type AAL1\"\
    , Appendix III, August 1996.\n   [RFC2119]   Bradner, S., \"Key words for use\
    \ in RFCs to Indicate\n               Requirement Levels\", BCP 14, RFC 2119,\
    \ March 1997.\n   [RFC4023]   Worster, T., Rekhter, Y., and E. Rosen, Ed.,\n \
    \              \"Encapsulating MPLS in IP or Generic Routing\n               Encapsulation\
    \ (GRE)\", RFC 4023, March 2005.\n   [RFC4447]   Martini, L., Ed., Rosen, E.,\
    \ El-Aawar, N., Smith, T., and\n               G. Heron, \"Pseudowire Setup and\
    \ Maintenance Using the\n               Label Distribution Protocol (LDP)\", RFC\
    \ 4447, April 2006.\n   [RFC4842]   Malis, A., Pate, P., Cohen, R., Ed., and D.\
    \ Zelig,\n               \"Synchronous Optical Network/Synchronous Digital\n \
    \              Hierarchy (SONET/SDH) Circuit Emulation over Packet\n         \
    \      (CEP)\", RFC 4842, April 2007.\n   [RFC4928]   Swallow, G., Bryant, S.,\
    \ and L. Andersson, \"Avoiding\n               Equal Cost Multipath Treatment\
    \ in MPLS Networks\", BCP\n               128, RFC 4928, June 2007.\n   [T1.105]\
    \    American National Standards Institute, \"Synchronous\n               Optical\
    \ Network (SONET) - Basic Description including\n               Multiplex Structure,\
    \ Rates and Formats,\" ANSI T1.105-\n               1995.\n   [VTOA]      ATM\
    \ Forum, \"Circuit Emulation Service Interoperability\n               Specification\
    \ Version 2.0\", af-vtoa-0078.000, January\n               1997.\n"
- title: 11.2.  Informative References
  contents:
  - "11.2.  Informative References\n   [RFC3985]   Bryant, S., Ed., and P. Pate, Ed.,\
    \ \"Pseudo Wire Emulation\n               Edge-to-Edge (PWE3) Architecture\",\
    \ RFC 3985, March 2005.\n"
- title: Appendix A.  SONET/SDH Rates and Formats
  contents:
  - "Appendix A.  SONET/SDH Rates and Formats\n   For simplicity, the discussion in\
    \ this section uses SONET\n   terminology, but it applies equally to SDH as well.\
    \  SDH-equivalent\n   terminology is shown in the tables.\n   The basic SONET\
    \ modular signal is the synchronous transport\n   signal-level 1 (STS-1).  A number\
    \ of STS-1s may be multiplexed into\n   higher-level signals denoted as STS-N,\
    \ with N synchronous payload\n   envelopes (SPEs).  The optical counterpart of\
    \ the STS-N is the\n   Optical Carrier-level N, or OC-N.  Table 2 lists standard\
    \ SONET line\n   rates discussed in this document.\n   OC Level          OC-1\
    \    OC-3    OC-12      OC-48     OC-192\n   SDH Term             -   STM-1  \
    \  STM-4     STM-16     STM-64\n   Line Rate(Mb/s) 51.840 155.520  622.080  2,488.320\
    \  9,953.280\n   Table 2.  Standard SONET Line Rates\n   Each SONET frame is 125\
    \ us and consists of nine rows.  An STS-N frame\n   has nine rows and N*90 columns.\
    \  Of the N*90 columns, the first N*3\n   columns are transport overhead and the\
    \ other N*87 columns are SPEs.\n   A number of STS-1s may also be linked together\
    \ to form a super-rate\n   signal with only one SPE.  The optical super-rate signal\
    \ is denoted\n   as OC-Nc, which has a higher payload capacity than OC-N.\n  \
    \ The first 9-byte column of each SPE is the Path Overhead (POH) and\n   the remaining\
    \ columns form the payload capacity with fixed stuff\n   (STS-Nc only).  The fixed\
    \ stuff, which is purely overhead, is N/3-1\n   columns for STS-Nc.  Thus, STS-1\
    \ and STS-3c do not have any fixed\n   stuff, STS-12c has three columns of fixed\
    \ stuff, and so on.\n   The POH of an STS-1 or STS-Nc is always nine bytes in\
    \ nine rows.  The\n   payload capacity of an STS-1 is 86 columns (774 bytes) per\
    \ frame.\n   The payload capacity of an STS-Nc is (N*87)-(N/3) columns per frame.\n\
    \   Thus, the payload capacity of an STS-3c is (3*87 - 1)*9 = 2,340 bytes\n  \
    \ per frame.  As another example, the payload capacity of an STS-192c\n   is 149,760\
    \ bytes, which is exactly 64 times larger than the STS-3c.\n   There are 8,000\
    \ SONET frames per second.  Therefore, the SPE size,\n   (POH plus payload capacity)\
    \ of an STS-1 is 783*8*8,000 = 50.112 Mb/s.\n   The SPE size of a concatenated\
    \ STS-3c is 2,349 bytes per frame or\n   150.336 Mb/s.  The payload capacity of\
    \ an STS-192c is 149,760 bytes\n   per frame, which is equivalent to 9,584.640\
    \ Mb/s.  Table 3 lists the\n   SPE and payload rates supported.\n   SONET STS\
    \ Level     STS-1   STS-3c  STS-12c    STS-48c   STS-192c\n   SDH VC Level   \
    \         -     VC-4  VC-4-4c   VC-4-16c   VC-4-64c\n   Payload Size(Bytes)  \
    \ 774    2,340    9,360     37,440    149,760\n   Payload Rate(Mb/s) 49.536  149.760\
    \  599.040  2,396.160  9,584.640\n   SPE Size(Bytes)       783    2,349    9,396\
    \     37,584    150,336\n   SPE Rate(Mb/s)     50.112  150.336  601.344  2,405.376\
    \  9,621.504\n   Table 3.  Payload Size and Rate\n   To support circuit emulation,\
    \ the entire SPE of a SONET STS or SDH VC\n   level is encapsulated into packets,\
    \ using the encapsulation defined\n   in section 5, for carriage across packet-switched\
    \ networks.\n"
- title: Appendix B.  ECC-6 Definition
  contents:
  - "Appendix B.  ECC-6 Definition\n   ECC-6 is an Error Correction Code to protect\
    \ the CEM header.  This\n   provides single bit correction and the ability to\
    \ detect up to two\n   bit errors.\n   Error Correction Code:\n   |---------------Header\
    \ bits 0-25 -------------------| ECC-6 code|\n    0                   1      \
    \             2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8\
    \ 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |1 1 1 1 1 0 0 0 1 0 0 0 1 1 1 1 1 0 1 0 0 0 1 0 1 1|1 0 0 0 0 0|\n   |1 1\
    \ 1 1 0 1 0 0 0 1 0 0 1 0 0 0 0 1 0 1 1 1 1 1 1 1|0 1 0 0 0 0|\n   |1 0 0 0 1\
    \ 1 1 1 0 0 1 0 1 1 1 0 0 0 1 1 1 1 0 0 1 1|0 0 1 0 0 0|\n   |0 1 0 0 1 1 1 1\
    \ 0 0 0 1 1 0 0 1 1 1 1 1 0 0 1 1 0 1|0 0 0 1 0 0|\n   |0 0 1 0 0 0 1 0 1 1 1\
    \ 1 1 1 0 0 1 1 1 1 1 0 1 0 1 0|0 0 0 0 1 0|\n   |0 0 0 1 0 0 0 1 1 1 1 1 0 0\
    \ 1 1 0 0 1 1 0 1 1 1 1 1|0 0 0 0 0 1|\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   Figure 7.  ECC-6 Check Matrix X\n   The ECC-6 code protects the 32-bit CEM\
    \ header as follows:\n   The encoder generates the 6-bit ECC using the matrix\
    \ shown in Figure\n   7.  In brief, the encoder builds another 26 column by 6\
    \ row matrix\n   and calculates even parity over the rows.  The matrix columns\n\
    \   represent CEM header bits 0 through 25.\n   Denote each column of the ECC-6\
    \ check matrix by X[], and each column\n   of the intermediate encoder matrix\
    \ as Y[].  CEM[] denotes the CEM\n   header and ECC[] is the error correction\
    \ code that is inserted into\n   CEM header bits 26 through 31.\n   for i = 0\
    \ to 25 {\n        if CEM[i] = 0 {\n                Y[i] = 0;\n        } else\
    \ {\n                Y[i] = X[i];\n        }\n   }\n   In other words, for each\
    \ CEM header bit (i) set to one, set the\n   resulting matrix column Y[i] according\
    \ to Figure 7.\n   The final ECC-6 code is calculated as even parity of each row\
    \ in Y\n   (i.e., ECC[k]=CEM[25+k]=even parity of row k).\n   The receiver also\
    \ uses matrix X to calculate an intermediate matrix\n   Y' based on all 32 bits\
    \ of the CEM header.  Therefore, Y' is 32\n   columns wide and includes the ECC-6\
    \ code.\n   for i = 0 to 31 {\n        if CEM[i] = 0 {\n                Y'[i]\
    \ = 0;\n        } else {\n                Y'[i] = X[i];\n        }\n   }\n   The\
    \ receiver then appends the incoming ECC-6 code to Y as column 32\n   (ECC[0]\
    \ should align with row 0) and calculates even parity for each\n   row.  The result\
    \ is a single 6-bit column Z.  If all 6 bits are 0,\n   there are no bit errors\
    \ (or at least no detectable errors).\n   Otherwise, it uses Z to perform a reverse\
    \ lookup on X[] from Figure\n   7.  If Z matches column X[i], then there is a\
    \ single bit error.  The\n   receiver should invert bit CEM[i] to correct the\
    \ header.  If Z fails\n   to match any column of X, then the CEM header contains\
    \ more than one\n   bit error and the CEM packet MUST be discarded.\n   Note that\
    \ the ECC-6 code provides single-bit correction and 2-bit\n   detection of errors\
    \ within the received ECC-6 code itself.\n"
- title: Acknowledgments
  contents:
  - "Acknowledgments\n   The authors would like to thank Mitri Halabi, Bob Colvin,\
    \ and Ken\n   Hsu, all formerly of Vivace Networks and Tellabs; Tom Johnson,\n\
    \   Marlene Drost, Ed Hallman, and Dave Danenberg, all formerly of\n   Litchfield\
    \ Communications, for their contributions to the document.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Andrew G. Malis\n   Verizon Communications\n   40 Sylvan\
    \ Road\n   Waltham, MA 02451\n   EMail: andrew.g.malis@verizon.com\n   Jeremy\
    \ Brayley\n   ECI Telecom Inc.\n   Omega Corporate Center\n   1300 Omega Drive\n\
    \   Pittsburgh, PA 15205\n   EMail: jeremy.brayley@ecitele.com\n   John Shirron\n\
    \   ECI Telecom Inc.\n   Omega Corporate Center\n   1300 Omega Drive\n   Pittsburgh,\
    \ PA 15205\n   EMail: john.shirron@ecitele.com\n   Luca Martini\n   Cisco Systems,\
    \ Inc.\n   9155 East Nichols Avenue, Suite 400\n   Englewood, CO, 80112\n   EMail:\
    \ lmartini@cisco.com\n   Steve Vogelsang\n   Alcatel-Lucent\n   600 March Road\n\
    \   Kanata, ON K2K 2T6\n   Canada\n   EMail: steve.vogelsang@alcatel-lucent.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2008).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78\
    \ and at www.rfc-editor.org/copyright.html, and\n   except as set forth therein,\
    \ the authors retain all their rights.\n   This document and the information contained\
    \ herein are provided on an\n   \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION\
    \ HE/SHE REPRESENTS\n   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE\
    \ IETF TRUST AND\n   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,\
    \ EXPRESS\n   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE\
    \ OF\n   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n\
    \   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
