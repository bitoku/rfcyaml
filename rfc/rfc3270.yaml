- title: __initial_text__
  contents:
  - "                 Multi-Protocol Label Switching (MPLS)\n                   Support\
    \ of Differentiated Services\n"
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2002).  All Rights Reserved.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document defines a flexible solution for support of\n   Differentiated\
    \ Services (Diff-Serv) over Multi-Protocol Label\n   Switching (MPLS) networks.\n\
    \   This solution allows the MPLS network administrator to select how\n   Diff-Serv\
    \ Behavior Aggregates (BAs) are mapped onto Label Switched\n   Paths (LSPs) so\
    \ that he/she can best match the Diff-Serv, Traffic\n   Engineering and protection\
    \ objectives within his/her particular\n   network.  For instance, this solution\
    \ allows the network\n   administrator to decide whether different sets of BAs\
    \ are to be\n   mapped onto the same LSP or mapped onto separate LSPs.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction . . . . . . . . . . . . . . . . . . . .\
    \ . . . . . . 3\n   1.1  Terminology. . . . . . . . . . . . . . . . . . . . .\
    \ . . . . . 5\n   1.2 EXP-Inferred-PSC LSPs (E-LSP) . . . . . . . . . . . . .\
    \ . . . . 6\n   1.3 Label-Only-Inferred-PSC LSPs (L-LSP). . . . . . . . . . .\
    \ . . . 7\n   1.4 Overall Operations. . . . . . . . . . . . . . . . . . . . .\
    \ . . 7\n   1.5 Relationship between Label and FEC. . . . . . . . . . . . . .\
    \ . 8\n   1.6 Bandwidth Reservation for E-LSPs and L-LSPs . . . . . . . . . .\
    \ 8\n   2. Label Forwarding Model for Diff-Serv LSRs and Tunneling Models . 9\n\
    \   2.1 Label Forwarding Model for Diff-Serv LSRs . . . . . . . . . . . 9\n  \
    \ 2.2 Incoming PHB Determination. . . . . . . . . . . . . . . . . . .10\n   2.3\
    \ Outgoing PHB Determination With Optional Traffic Conditioning .11\n   2.4 Label\
    \ Forwarding. . . . . . . . . . . . . . . . . . . . . . . .11\n   2.5 Encoding\
    \ Diff-Serv Information Into Encapsulation Layer . . . .13\n   2.6 Diff-Serv Tunneling\
    \ Models over MPLS. . . . . . . . . . . . . .13\n   3. Detailed Operations of\
    \ E-LSPs. . . . . . . . . . . . . . . . . .22\n   3.1 E-LSP Definition. . . .\
    \ . . . . . . . . . . . . . . . . . . . .22\n   3.2 Populating the `Encaps-->PHB\
    \ mapping' for an incoming E-LSP . .23\n   3.3 Incoming PHB Determination On Incoming\
    \ E-LSP. . . . . . . . . .23\n   3.4 Populating the `Set of PHB-->Encaps mappings'\
    \ for an outgoing\n       E-LSP . . . . . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .24\n   3.5 Encoding Diff-Serv information into Encapsulation Layer\
    \ On\n       Outgoing E-LSP. . . . . . . . . . . . . . . . . . . . . . . . .26\n\
    \   3.6 E-LSP Merging . . . . . . . . . . . . . . . . . . . . . . . . .27\n  \
    \ 4.  Detailed Operation of L-LSPs. . . . . . . . . . . . . . . . . .28\n   4.1\
    \ L-LSP Definition. . . . . . . . . . . . . . . . . . . . . . . .28\n   4.2 Populating\
    \ the `Encaps-->PHB mapping' for an incoming L-LSP . .28\n   4.3 Incoming PHB\
    \ Determination On Incoming L-LSP. . . . . . . . . .30\n   4.4 Populating the\
    \ `Set of PHB-->Encaps mappings' for an outgoing\n       L-LSP . . . . . . . .\
    \ . . . . . . . . . . . . . . . . . . . . .31\n   4.5 Encoding Diff-Serv Information\
    \ into Encapsulation Layer on\n       Outgoing L-LSP. . . . . . . . . . . . .\
    \ . . . . . . . . . . . .33\n   4.6 L-LSP Merging . . . . . . . . . . . . . .\
    \ . . . . . . . . . . .34\n   5. RSVP Extension for Diff-Serv Support . . . .\
    \ . . . . . . . . . .34\n   5.1 Diff-Serv related RSVP Messages Format. . . .\
    \ . . . . . . . . .34\n   5.2 DIFFSERV Object . . . . . . . . . . . . . . . .\
    \ . . . . . . . .35\n   5.3 Handling DIFFSERV Object. . . . . . . . . . . . .\
    \ . . . . . . .37\n   5.4 Non-support of the DIFFSERV Object. . . . . . . . .\
    \ . . . . . .40\n   5.5 Error Codes For Diff-Serv . . . . . . . . . . . . . .\
    \ . . . . .40\n   5.6 Intserv Service Type. . . . . . . . . . . . . . . . . .\
    \ . . . .41\n   6. LDP Extensions for Diff-Serv Support . . . . . . . . . . .\
    \ . . .41\n   6.1 Diff-Serv TLV . . . . . . . . . . . . . . . . . . . . . . .\
    \ . .42\n   6.2 Diff-Serv Status Code Values. . . . . . . . . . . . . . . . .\
    \ .44\n   6.3 Diff-Serv Related LDP Messages. . . . . . . . . . . . . . . . .44\n\
    \   6.4 Handling of the Diff-Serv TLV . . . . . . . . . . . . . . . . .46\n  \
    \ 6.5 Non-Handling of the Diff-Serv TLV . . . . . . . . . . . . . . .49\n   6.6\
    \ Bandwidth Information . . . . . . . . . . . . . . . . . . . . .49\n   7. MPLS\
    \ Support of Diff-Serv over PPP, LAN, Non-LC-ATM and\n      Non-LC-FR Interfaces\
    \ . . . . . . . . . . . . . . . . . . . . . .49\n   8. MPLS Support of Diff-Serv\
    \ over LC-ATM Interfaces . . . . . . . .50\n   8.1 Use of ATM Traffic Classes\
    \ and Traffic Management mechanisms. .50\n   8.2 LSR Implementation With LC-ATM\
    \ Interfaces . . . . . . . . . . .50\n   9. MPLS Support of Diff-Serv over LC-FR\
    \ Interfaces. . . . . . . . .51\n   9.1 Use of Frame Relay Traffic parameters\
    \ and Traffic Management\n       mechanisms. . . . . . . . . . . . . . . . . .\
    \ . . . . . . . . .51\n   9.2 LSR Implementation With LC-FR Interfaces. . . .\
    \ . . . . . . . .51\n   10. IANA Considerations . . . . . . . . . . . . . . .\
    \ . . . . . . .52\n   11. Security Considerations . . . . . . . . . . . . . .\
    \ . . . . . .52\n   12. Acknowledgments . . . . . . . . . . . . . . . . . . .\
    \ . . . . .52\n   APPENDIX A. Example Deployment Scenarios. . . . . . . . . .\
    \ . . . .53\n   APPENDIX B. Example Bandwidth Reservation Scenarios . . . . .\
    \ . . .58\n   References. . . . . . . . . . . . . . . . . . . . . . . . . . .\
    \ . .60\n   Authors' Addresses. . . . . . . . . . . . . . . . . . . . . . . .\
    \ .62\n   Full Copyright Statement. . . . . . . . . . . . . . . . . . . . . .64\n"
- title: 1. Introduction
  contents:
  - "1. Introduction\n   In an MPLS domain [MPLS_ARCH], when a stream of data traverses\
    \ a\n   common path, a Label Switched Path (LSP) can be established using\n  \
    \ MPLS signaling protocols.  At the ingress Label Switch Router (LSR),\n   each\
    \ packet is assigned a label and is transmitted downstream.  At\n   each LSR along\
    \ the LSP, the label is used to forward the packet to\n   the next hop.\n   In\
    \ a Differentiated Service (Diff-Serv) domain [DIFF_ARCH] all the IP\n   packets\
    \ crossing a link and requiring the same Diff-Serv behavior are\n   said to constitute\
    \ a Behavior Aggregate (BA).  At the ingress node of\n   the Diff-Serv domain,\
    \ the packets are classified and marked with a\n   Diff-Serv Code Point (DSCP)\
    \ which corresponds to their Behavior\n   Aggregate.  At each transit node, the\
    \ DSCP is used to select the Per\n   Hop Behavior (PHB) that determines the scheduling\
    \ treatment and, in\n   some cases, drop probability for each packet.\n   This\
    \ document specifies a solution for supporting the Diff-Serv\n   Behavior Aggregates\
    \ whose corresponding PHBs are currently defined\n   (in [DIFF_HEADER], [DIFF_AF],\
    \ [DIFF_EF]) over an MPLS network.  This\n   solution also offers flexibility\
    \ for easy support of PHBs that may be\n   defined in the future.\n   This solution\
    \ relies on the combined use of two types of LSPs:\n   -  LSPs which can transport\
    \ multiple Ordered Aggregates, so that the\n      EXP field of the MPLS Shim Header\
    \ conveys to the LSR the PHB to be\n      applied to the packet (covering both\
    \ information about the\n      packet's scheduling treatment and its drop precedence).\n\
    \   -  LSPs which only transport a single Ordered Aggregate, so that the\n   \
    \   packet's scheduling treatment is inferred by the LSR exclusively\n      from\
    \ the packet's label value while the packet's drop precedence\n      is conveyed\
    \ in the EXP field of the MPLS Shim Header or in the\n      encapsulating link\
    \ layer specific selective drop mechanism (ATM,\n      Frame Relay, 802.1).\n\
    \   As mentioned in [DIFF_HEADER], \"Service providers are not required to\n \
    \  use the same node mechanisms or configurations to enable service\n   differentiation\
    \ within their networks, and are free to configure the\n   node parameters in\
    \ whatever way that is appropriate for their service\n   offerings and traffic\
    \ engineering objectives\".  Thus, the solution\n   defined in this document gives\
    \ Service Providers flexibility in\n   selecting how Diff-Serv classes of service\
    \ are Routed or Traffic\n   Engineered within their domain (e.g., separate classes\
    \ of services\n   supported via separate LSPs and Routed separately, all classes\
    \ of\n   service supported on the same LSP and Routed together).\n   Because MPLS\
    \ is path-oriented it can potentially provide faster and\n   more predictable\
    \ protection and restoration capabilities in the face\n   of topology changes\
    \ than conventional hop by hop routed IP systems.\n   In this document we refer\
    \ to such capabilities as \"MPLS protection\".\n   Although such capabilities\
    \ and associated mechanisms are outside the\n   scope of this specification, we\
    \ note that they may offer different\n   levels of protection to different LSPs.\
    \  Since the solution presented\n   here allow Service Providers to choose how\
    \ Diff-Serv classes of\n   services are mapped onto LSPs, the solution also gives\
    \ Service\n   Providers flexibility in the level of protection provided to\n \
    \  different Diff-Serv classes of service (e.g., some classes of service\n   can\
    \ be supported by LSPs which are protected while some other classes\n   of service\
    \ are supported by LSPs which are not protected).\n   Furthermore, the solution\
    \ specified in this document achieves label\n   space conservation and reduces\
    \ the volume of label set-up/tear-down\n   signaling where possible by only resorting\
    \ to multiple LSPs for a\n   given Forwarding Equivalent Class (FEC) [MPLS_ARCH]\
    \ when useful or\n   required.\n   This specification allows support of Differentiated\
    \ Services for both\n   IPv4 and IPv6 traffic transported over an MPLS network.\
    \  This\n   document only describes operations for unicast.  Multicast support\
    \ is\n   for future study.\n   The solution described in this document does not\
    \ preclude the\n   signaled or configured use of the EXP bits to support Explicit\n\
    \   Congestion Notification [ECN] simultaneously with Diff-Serv over\n   MPLS.\
    \  However, techniques for supporting ECN in an MPLS environment\n   are outside\
    \ the scope of this document.\n"
- title: 1.1  Terminology
  contents:
  - "1.1  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\"\
    , \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and\
    \ \"OPTIONAL\" in this\n   document are to be interpreted as described in RFC\
    \ 2119.\n   The reader is assumed to be familiar with the terminology of\n   [MPLS_ARCH],\
    \ [MPLS_ENCAPS], [MPLS_ATM], [MPLS_FR], including the\n   following:\n      FEC\
    \        Forwarding Equivalency Class\n      FTN        FEC-To-NHLFE Map\n   \
    \   ILM        Incoming Label Map\n      LC-ATM     Label Switching Controlled-ATM\
    \ (interface)\n      LC-FR      Label Switching Controlled-Frame Relay (interface)\n\
    \      LSP        Label Switched Path\n      LSR        Label Switch Router\n\
    \      MPLS       Multi-Protocol Label Switching\n      NHLFE      Next Hop Label\
    \ Forwarding Entry\n   The reader is assumed to be familiar with the terminology\
    \ of\n   [DIFF_ARCH], [DIFF_HEADER], [DIFF_AF], [DIFF_EF], including the\n   following:\n\
    \      AF         Assured Forwarding\n      BA         Behavior Aggregate\n  \
    \    CS         Class Selector\n      DF         Default Forwarding\n      DSCP\
    \       Differentiated Services Code Point\n      EF         Expedited Forwarding\n\
    \      PHB        Per Hop Behavior\n   The reader is assumed to be familiar with\
    \ the terminology of\n   [DIFF_NEW], including the following:\n      OA      \
    \  Ordered Aggregate.  The set of Behavior Aggregates which\n                share\
    \ an ordering constraint.\n      PSC       PHB Scheduling Class.  The set of one\
    \ or more PHB(s)\n                that are applied to the Behavior Aggregate(s)\
    \ belonging\n                to a given OA.  For example, AF1x is a PSC comprising\n\
    \                the AF11, AF12 and AF13 PHBs.  EF is an example of PSC\n    \
    \            comprising a single PHB, the EF PHB.\n   The following acronyms are\
    \ also used:\n      CLP        Cell Loss Priority\n      DE         Discard Eligibility\n\
    \      SNMP       Simple Network Management Protocol\n   Finally, the following\
    \ acronyms are defined in this specification:\n      E-LSP      EXP-Inferred-PSC\
    \ LSP\n      L-LSP      Label-Only-Inferred-PSC LSP\n"
- title: 1.2 EXP-Inferred-PSC LSPs (E-LSP)
  contents:
  - "1.2 EXP-Inferred-PSC LSPs (E-LSP)\n   A single LSP can be used to support one\
    \ or more OAs.  Such LSPs can\n   support up to eight BAs of a given FEC, regardless\
    \ of how many OAs\n   these BAs span.  With such LSPs, the EXP field of the MPLS\
    \ Shim\n   Header is used by the LSR to determine the PHB to be applied to the\n\
    \   packet.  This includes both the PSC and the drop preference.\n   We refer\
    \ to such LSPs as \"EXP-inferred-PSC LSPs\" (E-LSP), since the\n   PSC of a packet\
    \ transported on this LSP depends on the EXP field\n   value for that packet.\n\
    \   The mapping from the EXP field to the PHB (i.e., to PSC and drop\n   precedence)\
    \ for a given such LSP, is either explicitly signaled at\n   label set-up or relies\
    \ on a pre-configured mapping.\n   Detailed operations of E-LSPs are specified\
    \ in section 3 below.\n"
- title: 1.3 Label-Only-Inferred-PSC LSPs (L-LSP)
  contents:
  - "1.3 Label-Only-Inferred-PSC LSPs (L-LSP)\n   A separate LSP can be established\
    \ for a single <FEC, OA> pair.  With\n   such LSPs, the PSC is explicitly signaled\
    \ at the time of label\n   establishment, so that after label establishment, the\
    \ LSR can infer\n   exclusively from the label value the PSC to be applied to\
    \ a labeled\n   packet.  When the Shim Header is used, the Drop Precedence to\
    \ be\n   applied by the LSR to the labeled packet, is conveyed inside the\n  \
    \ labeled packet MPLS Shim Header using the EXP field.  When the Shim\n   Header\
    \ is not used (e.g., MPLS Over ATM), the Drop Precedence to be\n   applied by\
    \ the LSR to the labeled packet is conveyed inside the link\n   layer header encapsulation\
    \ using link layer specific drop precedence\n   fields (e.g., ATM CLP).\n   We\
    \ refer to such LSPs as \"Label-Only-Inferred-PSC LSPs\" (L-LSP) since\n   the\
    \ PSC can be fully inferred from the label without any other\n   information (e.g.,\
    \ regardless of the EXP field value).  Detailed\n   operations of L-LSPs are specified\
    \ in section 4 below.\n"
- title: 1.4 Overall Operations
  contents:
  - "1.4 Overall Operations\n   For a given FEC, and unless media specific restrictions\
    \ apply as\n   identified in the sections 7, 8 and 9 below, this specification\n\
    \   allows any one of the following combinations within an MPLS Diff-Serv\n  \
    \ domain:\n      -  zero or any number of E-LSPs, and\n      -  zero or any number\
    \ of L-LSPs.\n   The network administrator selects the actual combination of LSPs\
    \ from\n   the set of allowed combinations and selects how the Behavior\n   Aggregates\
    \ are actually transported over this combination of LSPs, in\n   order to best\
    \ match his/her environment and objectives in terms of\n   Diff-Serv support,\
    \ Traffic Engineering and MPLS Protection.  Criteria\n   for selecting such a\
    \ combination are outside the scope of this\n   specification.\n   For a given\
    \ FEC, there may be more than one LSP carrying the same OA,\n   for example for\
    \ purposes of load balancing of the OA; However in\n   order to respect ordering\
    \ constraints, all packets of a given\n   microflow, possibly spanning multiple\
    \ BAs of a given Ordered\n   Aggregate, MUST be transported over the same LSP.\
    \  Conversely, each\n   LSP MUST be capable of supporting all the (active) BAs\
    \ of a given OA.\n   Examples of deployment scenarios are provided for information\
    \ in\n   APPENDIX A.\n"
- title: 1.5 Relationship between Label and FEC
  contents:
  - "1.5 Relationship between Label and FEC\n   [MPLS_ARCH] states in section `2.1.\
    \ Overview' that:  `Some routers\n   analyze a packet's network layer header not\
    \ merely to choose the\n   packet's next hop, but also to determine a packet's\
    \ \"precedence\" or\n   \"class of service\".  They may then apply different discard\
    \ thresholds\n   or scheduling disciplines to different packets.  MPLS allows\
    \ (but\n   does not require) the precedence or class of service to be fully or\n\
    \   partially inferred from the label.  In this case, one may say that\n   the\
    \ label represents the combination of a FEC and a precedence or\n   class of service.'\n\
    \   In line with this, we observe that:\n   -  With E-LSPs, the label represents\
    \ the combination of a FEC and the\n      set of BAs transported over the E-LSP.\
    \  Where all the supported\n      BAs are transported over an E-LSP, the label\
    \ then represents the\n      complete FEC.\n   -  With L-LSPs, the label represents\
    \ the combination of a FEC and an\n      OA.\n"
- title: 1.6 Bandwidth Reservation for E-LSPs and L-LSPs
  contents:
  - "1.6 Bandwidth Reservation for E-LSPs and L-LSPs\n   Regardless of which label\
    \ binding protocol is used, E-LSPs and L-LSPs\n   may be established with or without\
    \ bandwidth reservation.\n   Establishing an E-LSP or L-LSP with bandwidth reservation\
    \ means that\n   bandwidth requirements for the LSP are signaled at LSP establishment\n\
    \   time.  Such signaled bandwidth requirements may be used by LSRs at\n   establishment\
    \ time to perform admission control of the signaled LSP\n   over the Diff-Serv\
    \ resources provisioned (e.g., via configuration,\n   SNMP or policy protocols)\
    \ for the relevant PSC(s).  Such signaled\n   bandwidth requirements may also\
    \ be used by LSRs at establishment time\n   to perform adjustment to the Diff-Serv\
    \ resources associated with the\n   relevant PSC(s) (e.g., adjust PSC scheduling\
    \ weight).\n   Note that establishing an E-LSP or L-LSP with bandwidth reservation\n\
    \   does not mean that per-LSP scheduling is required.  Since E-LSPs and\n   L-LSPs\
    \ are specified in this document for support of Differentiated\n   Services, the\
    \ required forwarding treatment (scheduling and drop\n   policy) is defined by\
    \ the appropriate Diff-Serv PHB.  This forwarding\n   treatment MUST be applied\
    \ by the LSR at the granularity of the BA and\n   MUST be compliant with the relevant\
    \ PHB specification.\n   When bandwidth requirements are signaled at the establishment\
    \ of an\n   L-LSP, the signaled bandwidth is obviously associated with the L-\n\
    \   LSP's PSC.  Thus, LSRs which use the signaled bandwidth to perform\n   admission\
    \ control may perform admission control over Diff-Serv\n   resources, which are\
    \ dedicated to the PSC (e.g., over the bandwidth\n   guaranteed to the PSC through\
    \ its scheduling weight).\n   When bandwidth requirements are signaled at the\
    \ establishment of an\n   E-LSP, the signaled bandwidth is associated collectively\
    \ with the\n   whole LSP and therefore with the set of transported PSCs.  Thus,\
    \ LSRs\n   which use the signaled bandwidth to perform admission control may\n\
    \   perform admission control over global resources, which are shared by\n   the\
    \ set of PSCs (e.g., over the total bandwidth of the link).\n   Examples of scenarios\
    \ where bandwidth reservation is not used and\n   scenarios where bandwidth reservation\
    \ is used are provided for\n   information in APPENDIX B.\n"
- title: 2. Label Forwarding Model for Diff-Serv LSRs and Tunneling Models
  contents:
  - '2. Label Forwarding Model for Diff-Serv LSRs and Tunneling Models

    '
- title: 2.1 Label Forwarding Model for Diff-Serv LSRs
  contents:
  - "2.1 Label Forwarding Model for Diff-Serv LSRs\n   Since different Ordered Aggregates\
    \ of a given FEC may be transported\n   over different LSPs, the label swapping\
    \ decision of a Diff-Serv LSR\n   clearly depends on the forwarded packet's Behavior\
    \ Aggregate.  Also,\n   since the IP DS field of a forwarded packet may not be\
    \ directly\n   visible to an LSR, the way to determine the PHB to be applied to\
    \ a\n   received packet and to encode the PHB into a transmitted packet, is\n\
    \   different than a non-MPLS Diff-Serv Router.\n   Thus, in order to describe\
    \ Label Forwarding by Diff-Serv LSRs, we\n   model the LSR Diff-Serv label switching\
    \ behavior, comprised of four\n   stages:\n   -  Incoming PHB Determination (A)\n\
    \   -  Outgoing PHB Determination with Optional Traffic Conditioning(B)\n   -\
    \  Label Forwarding (C)\n   -  Encoding of Diff-Serv information into Encapsulation\
    \ Layer (EXP,\n      CLP, DE, User_Priority)  (D)\n   Each stage is described\
    \ in more detail in the following sections.\n   Obviously, to enforce the Diff-Serv\
    \ service differentiation the LSR\n   MUST also apply the forwarding treatment\
    \ corresponding to the\n   Outgoing PHB.\n   This model is illustrated below:\n\
    \   --Inc_label(s)(*)------------------------>I===I--Outg_label(s)(&)-->\n   \
    \  \\                                       I   I \\\n      \\---->I===I     \
    \                       I C I  \\-->I===I--Encaps->\n            I A I       \
    \    I===I--Outg_PHB->I===I      I D I   (&)\n   -Encaps->I===I--Inc_PHB->I B\
    \ I         \\          /->I===I\n      (*)                   I===I          \\\
    --------+\n                                                     \\----Forwarding-->\n\
    \                                                           Treatment\n      \
    \                                                       (PHB)\n   \"Encaps\" designates\
    \ the Diff-Serv related information encoded in the\n   MPLS Encapsulation layer\
    \ (e.g., EXP field, ATM CLP, Frame Relay DE,\n   802.1 User_Priority)\n   (*)\
    \ when the LSR behaves as an MPLS ingress node, the incoming packet\n   may be\
    \ received unlabelled.\n   (&) when the LSR behaves as an MPLS egress node, the\
    \ outgoing packet\n   may be transmitted unlabelled.\n   This model is presented\
    \ here to describe the functional operations of\n   Diff-Serv LSRs and does not\
    \ constrain actual implementation.\n"
- title: 2.2 Incoming PHB Determination
  contents:
  - "2.2 Incoming PHB Determination\n   This stage determines which Behavior Aggregate\
    \ the received packet\n   belongs to.\n"
- title: 2.2.1 Incoming PHB Determination Considering a Label Stack Entry
  contents:
  - "2.2.1 Incoming PHB Determination Considering a Label Stack Entry\n   Sections\
    \ 3.3 and 4.3 provide the details on how to perform incoming\n   PHB Determination\
    \ considering a given received label stack entry\n   and/or received incoming\
    \ MPLS encapsulation information depending on\n   the incoming LSP type and depending\
    \ on the incoming MPLS\n   encapsulation.\n   Section 2.6 provides the details\
    \ of which label stack entry to\n   consider for the Incoming PHB Determination\
    \ depending on the\n   supported Diff-Serv tunneling mode.\n"
- title: 2.2.2 Incoming PHB Determination Considering IP Header
  contents:
  - "2.2.2 Incoming PHB Determination Considering IP Header\n   Section 2.6 provides\
    \ the details of when the IP Header is to be\n   considered for incoming PHB determination,\
    \ depending on the supported\n   Diff-Serv tunneling model.  In those cases where\
    \ the IP header is to\n   be used, this stage operates exactly as with a non-MPLS\
    \ IP Diff-Serv\n   Router and uses the DS field to determine the incoming PHB.\n"
- title: 2.3 Outgoing PHB Determination With Optional Traffic Conditioning
  contents:
  - "2.3 Outgoing PHB Determination With Optional Traffic Conditioning\n   The traffic\
    \ conditioning stage is optional and may be used on an LSR\n   to perform traffic\
    \ conditioning including Behavior Aggregate demotion\n   or promotion.  It is\
    \ outside the scope of this specification.  For\n   the purpose of specifying\
    \ Diff-Serv over MPLS forwarding, we simply\n   note that the PHB to be actually\
    \ enforced and conveyed to downstream\n   LSRs by an LSR (referred to as \"outgoing\
    \ PHB\"), may be different to\n   the PHB which had been associated with the packet\
    \ by the previous LSR\n   (referred to as \"incoming PHB\").\n   When the traffic\
    \ conditioning stage is not present, the \"outgoing\n   PHB\" is simply identical\
    \ to the \"incoming PHB\".\n"
- title: 2.4 Label Forwarding
  contents:
  - "2.4 Label Forwarding\n   [MPLS_ARCH] describes how label swapping is performed\
    \ by LSRs on\n   incoming labeled packets using an Incoming Label Map (ILM), where\n\
    \   each incoming label is mapped to one or multiple NHLFEs.  [MPLS_ARCH]\n  \
    \ also describes how label imposition is performed by LSRs on incoming\n   unlabelled\
    \ packets using a FEC-to-NHLFEs Map (FTN), where each\n   incoming FEC is mapped\
    \ to one or multiple NHLFEs.\n   A Diff-Serv Context for a label is comprised\
    \ of:\n   -  `LSP type (i.e., E-LSP or L-LSP)'\n   -  `supported PHBs'\n   - \
    \ `Encaps-->PHB mapping' for an incoming label\n   -  `Set of PHB-->Encaps mappings'\
    \ for an outgoing label\n   The present specification defines that a Diff-Serv\
    \ Context is stored\n   in the ILM for each incoming label.\n   [MPLS_ARCH] states\
    \ that the `NHLFE may also contain any other\n   information needed in order to\
    \ properly dispose of the packet'.  In\n   accordance with this, the present specification\
    \ defines that a Diff-\n   Serv Context is stored in the NHLFE for each outgoing\
    \ label that is\n   swapped or pushed.\n   This Diff-Serv Context information\
    \ is populated into the ILM and the\n   FTN at label establishment time.\n   If\
    \ the label corresponds to an E-LSP for which no `EXP<-->PHB\n   mapping' has\
    \ been explicitly signaled at LSP setup, the `supported\n   PHBs' is populated\
    \ with the set of PHBs of the preconfigured\n   `EXP<-->PHB mapping', which is\
    \ discussed below in section 3.2.1.\n   If the label corresponds to an E-LSP for\
    \ which an `EXP<-->PHB\n   mapping' has been explicitly signaled at LSP setup,\
    \ the `supported\n   PHBs' is populated with the set of PHBs of the signaled `EXP<-->PHB\n\
    \   mapping'.\n   If the label corresponds to an L-LSP, the `supported PHBs' is\n\
    \   populated with the set of PHBs forming the PSC that is signaled at\n   LSP\
    \ set-up.\n   The details of how the `Encaps-->PHB mapping' or `Set of PHB-->Encaps\n\
    \   mappings' are populated are defined below in sections 3 and 4.\n   [MPLS_ARCH]\
    \ also states that:\n   \"If the ILM [respectively, FTN] maps a particular label\
    \ to a set of\n   NHLFEs that contain more than one element, exactly one element\
    \ of the\n   set must be chosen before the packet is forwarded.  The procedures\n\
    \   for choosing an element from the set are beyond the scope of this\n   document.\
    \  Having the ILM [respectively, FTN] map a label\n   [respectively, a FEC] to\
    \ a set containing more than one NHLFE may be\n   useful if, e.g., it is desired\
    \ to do load balancing over multiple\n   equal-cost paths.\"\n   In accordance\
    \ with this, the present specification allows that an\n   incoming label [respectively\
    \ FEC] may be mapped, for Diff-Serv\n   purposes, to multiple NHLFEs (for instance\
    \ where different NHLFEs\n   correspond to egress labels supporting different\
    \ sets of PHBs).  When\n   a label [respectively FEC] maps to multiple NHLFEs,\
    \ the Diff-Serv LSR\n   MUST choose one of the NHLFEs whose Diff-Serv Context\
    \ indicates that\n   it supports the Outgoing PHB of the forwarded packet.\n \
    \  When a label [respectively FEC] maps to multiple NHLFEs which support\n   the\
    \ Outgoing PHB, the procedure for choosing one among those is\n   outside the\
    \ scope of this document.  This situation may be\n   encountered where it is desired\
    \ to do load balancing of a Behavior\n   Aggregate over multiple LSPs.  In such\
    \ situations, in order to\n   respect ordering constraints, all packets of a given\
    \ microflow MUST\n   be transported over the same LSP.\n"
- title: 2.5 Encoding Diff-Serv Information Into Encapsulation Layer
  contents:
  - "2.5 Encoding Diff-Serv Information Into Encapsulation Layer\n   This stage determines\
    \ how to encode the fields which convey Diff-Serv\n   information in the transmitted\
    \ packet (e.g., MPLS Shim EXP, ATM CLP,\n   Frame Relay DE, 802.1 User_Priority).\n"
- title: 2.5.1 Encoding Diff-Serv Information Into Transmitted Label Entry
  contents:
  - "2.5.1 Encoding Diff-Serv Information Into Transmitted Label Entry\n   Sections\
    \ 3.5 and 4.5 provide the details on how to perform Diff-Serv\n   information\
    \ encoding into a given transmitted label stack entry\n   and/or transmitted MPLS\
    \ encapsulation information depending on the\n   corresponding outgoing LSP type\
    \ and depending on the MPLS\n   encapsulation.\n   Section 2.6 provides the details\
    \ in which label stack entry to\n   perform Diff-Serv information encoding into\
    \ depending on the\n   supported Diff-Serv tunneling mode.\n"
- title: 2.5.2 Encoding Diff-Serv Information Into Transmitted IP Header
  contents:
  - "2.5.2 Encoding Diff-Serv Information Into Transmitted IP Header\n   To perform\
    \ Diff-Serv Information Encoding into the transmitted packet\n   IP header, this\
    \ stage operates exactly as with a non-MPLS IP Diff-\n   Serv Router and encodes\
    \ the DSCP of the Outgoing PHB into the DS\n   field.\n   Section 2.6 provides\
    \ the details of when Diff-Serv Information\n   Encoding is to be performed into\
    \ transmitted IP header depending on\n   the supported Diff-Serv tunneling mode.\n"
- title: 2.6 Diff-Serv Tunneling Models over MPLS
  contents:
  - '2.6 Diff-Serv Tunneling Models over MPLS

    '
- title: 2.6.1 Diff-Serv Tunneling Models
  contents:
  - "2.6.1 Diff-Serv Tunneling Models\n   [DIFF_TUNNEL] considers the interaction\
    \ of Differentiated Services\n   with IP tunnels of various forms.  MPLS LSPs\
    \ are not a form of \"IP\n   tunnels\" since the MPLS encapsulating header does\
    \ not contain an IP\n   header and thus MPLS LSPs are not considered in [DIFF_TUNNEL].\n\
    \   However, although not a form of \"IP tunnel\", MPLS LSPs are a form of\n \
    \  \"tunnel\".\n   From the Diff-Serv standpoint, LSPs share a number of common\n\
    \   characteristics with IP Tunnels:\n   -  Intermediate nodes (i.e., Nodes somewhere\
    \ along the LSP span) only\n      see and operate on the \"outer\" Diff-Serv information.\n\
    \   -  LSPs are unidirectional.\n   -  The \"outer\" Diff-Serv information can\
    \ be modified at any of the\n      intermediate nodes.\n   However, from the Diff-Serv\
    \ standpoint, LSPs also have a distinctive\n   property compared to IP Tunnels:\n\
    \   -  There is generally no behavior analogous to Penultimate Hop\n      Popping\
    \ (PHP) used with IP Tunnels.  Furthermore, PHP results in\n      the \"outer\"\
    \ Diff-Serv information associated with the LSP not\n      being visible to the\
    \ LSP egress.  In situations where this\n      information is not meaningful at\
    \ the LSP Egress, this is obviously\n      not an issue at all.  In situations\
    \ where this information is\n      meaningful at the LSP Egress, then it must\
    \ somehow be carried in\n      some other means.\n   The two conceptual models\
    \ for Diff-Serv tunneling over IP Tunnels\n   defined in [DIFF_TUNNEL] are applicable\
    \ and useful to Diff-Serv over\n   MPLS but their respective detailed operations\
    \ is somewhat different\n   over MPLS.  These two models are the Pipe Model and\
    \ the Uniform\n   Model.  Their operations over MPLS are specified in the following\n\
    \   sections.  Discussion and definition of alternative tunneling models\n   are\
    \ outside the scope of this specification.\n"
- title: 2.6.2 Pipe Model
  contents:
  - "2.6.2 Pipe Model\n   With the Pipe Model, MPLS tunnels (aka LSPs) are used to\
    \ hide the\n   intermediate MPLS nodes between LSP Ingress and Egress from the\n\
    \   Diff-Serv perspective.\n   In this model, tunneled packets must convey two\
    \ meaningful pieces of\n   Diff-Serv information:\n   -  the Diff-Serv information\
    \ which is meaningful to intermediate\n      nodes along the LSP span including\
    \ the LSP Egress (which we refer\n      to as the \"LSP Diff-Serv Information\"\
    ).  This LSP Diff-Serv\n      Information is not meaningful beyond the LSP Egress:\
    \ Whether\n      Traffic Conditioning at intermediate nodes on the LSP span affects\n\
    \      the LSP Diff-Serv information or not, this updated Diff-Serv\n      information\
    \ is not considered meaningful beyond the LSP Egress and\n      is ignored.\n\
    \   -  the Diff-Serv information which is meaningful beyond the LSP\n      Egress\
    \ (which we refer to as the \"Tunneled Diff-Serv\n      Information\").  This\
    \ information is to be conveyed by the LSP\n      Ingress to the LSP Egress. \
    \ This Diff-Serv information is not\n      meaningful to the intermediate nodes\
    \ on the LSP span.\n   Operation of the Pipe Model without PHP is illustrated\
    \ below:\n            ========== LSP =============================>\n        \
    \        ---Swap--(M)--...--Swap--(M)--Swap----\n               /        (outer\
    \ header)                \\\n             (M)                                \
    \      (M)\n             /                                          \\\n   >--(m)-Push.................(m).....................Pop--(m)-->\n\
    \            I             (inner header)                E   (M*)\n   (M) represents\
    \ the \"LSP Diff-Serv information\"\n   (m) represents the \"Tunneled Diff-Serv\
    \ information\"\n   (*) The LSP Egress considers the LSP Diff-Serv information\
    \ received\n       in the outer header (i.e., before the pop) in order to apply\
    \ its\n       Diff-Serv forwarding treatment (i.e., actual PHB)\n    I  represents\
    \ the LSP ingress node\n    E  represents the LSP egress node\n   With the Pipe\
    \ Model, the \"LSP Diff-Serv Information\" needs to be\n   conveyed to the LSP\
    \ Egress so that it applies its forwarding\n   treatment based on it.  The \"\
    Tunneled Diff-Serv information\" also\n   needs to be conveyed to the LSP Egress\
    \ so it can be conveyed further\n   downstream.\n   Since both require that Diff-Serv\
    \ information be conveyed to the LSP\n   Egress, the Pipe Model operates only\
    \ without PHP.\n   The Pipe Model is particularly appropriate for environments\
    \ in which:\n   -  the cloud upstream of the incoming interface of the LSP Ingress\n\
    \      and the cloud downstream of the outgoing interface of the LSP\n      Egress\
    \ are in Diff-Serv domains which use a common set of Diff-\n      Serv service\
    \ provisioning policies and PHB definitions, while the\n      LSP spans one (or\
    \ more) Diff-Serv domain(s) which use(s) a\n      different set of Diff-Serv service\
    \ provisioning policies and PHB\n      definitions\n   -  the outgoing interface\
    \ of the LSP Egress is in the (last) Diff-\n      Serv domain spanned by the LSP.\n\
    \   As an example, consider the case where a service provider is offering\n  \
    \ an MPLS VPN service (see [MPLS_VPN] for an example of MPLS VPN\n   architecture)\
    \ including Diff-Serv differentiation.  Say that a\n   collection of sites is\
    \ interconnected via such an MPLS VPN service.\n   Now say that this collection\
    \ of sites is managed under a common\n   administration and is also supporting\
    \ Diff-Serv service\n   differentiation.  If the VPN site administration and the\
    \ Service\n   Provider are not sharing the exact same Diff-Serv policy (for\n\
    \   instance not supporting the same number of PHBs), then operation of\n   Diff-Serv\
    \ in the Pipe Model over the MPLS VPN service would allow the\n   VPN Sites Diff-Serv\
    \ policy to operate consistently throughout the\n   ingress VPN Site and Egress\
    \ VPN Site and transparently over the\n   Service Provider Diff-Serv domain. \
    \ It may be useful to view such\n   LSPs as linking the Diff-Serv domains at their\
    \ endpoints into a\n   single Diff-Serv region by making these endpoints virtually\n\
    \   contiguous even though they may be physically separated by\n   intermediate\
    \ network nodes.\n   The Pipe Model MUST be supported.\n   For support of the\
    \ Pipe Model over a given LSP without PHP, an LSR\n   performs the Incoming PHB\
    \ Determination and the Diff-Serv information\n   Encoding in the following manner:\n\
    \   -  when receiving an unlabelled packet, the LSR performs Incoming PHB\n  \
    \    Determination considering the received IP Header.\n   -  when receiving a\
    \ labeled packet, the LSR performs Incoming PHB\n      Determination considering\
    \ the outer label entry in the received\n      label stack.  In particular, when\
    \ a pop operation is to be\n      performed for the considered LSP, the LSR performs\
    \ Incoming PHB\n      Determination BEFORE the pop.\n   -  when performing a push\
    \ operation for the considered LSP, the LSR:\n      o  encodes Diff-Serv Information\
    \ corresponding to the OUTGOING PHB\n         in the transmitted label entry corresponding\
    \ to the pushed\n         label.\n      o  encodes Diff-Serv Information corresponding\
    \ to the INCOMING PHB\n         in the encapsulated header (swapped label entry\
    \ or IP header).\n   -  when performing a swap-only operation for the considered\
    \ LSP, the\n      LSR encodes Diff-Serv Information in the transmitted label entry\n\
    \      that contains the swapped label\n   -  when performing a pop operation\
    \ for the considered LSP, the LSR\n      does not perform Encoding of Diff-Serv\
    \ Information into the header\n      exposed by the pop operation (i.e., the LSR\
    \ leaves the exposed\n      header \"as is\").\n"
- title: 2.6.2.1 Short Pipe Model
  contents:
  - "2.6.2.1 Short Pipe Model\n   The Short Pipe Model is an optional variation of\
    \ the Pipe Model\n   described above.  The only difference is that, with the Short\
    \ Pipe\n   Model, the Diff-Serv forwarding treatment at the LSP Egress is\n  \
    \ applied based on the \"Tunneled Diff-Serv Information\" (i.e., Diff-\n   Serv\
    \ information conveyed in the encapsulated header) rather than on\n   the \"LSP\
    \ Diff-Serv information\" (i.e., Diff-Serv information conveyed\n   in the encapsulating\
    \ header).\n   Operation of the Short Pipe Model without PHP is illustrated below:\n\
    \            ========== LSP =============================>\n                ---Swap--(M)--...--Swap--(M)--Swap----\n\
    \               /        (outer header)                \\\n             (M)  \
    \                                    (M)\n             /                     \
    \                     \\\n   >--(m)-Push.................(m).....................Pop--(m)-->\n\
    \            I             (inner header)                E\n   (M) represents\
    \ the \"LSP Diff-Serv information\"\n   (m) represents the \"Tunneled Diff-Serv\
    \ information\"\n    I  represents the LSP ingress node\n    E  represents the\
    \ LSP egress node\n   Since the LSP Egress applies its forwarding treatment based\
    \ on the\n   \"Tunneled Diff-Serv Information\", the \"LSP Diff-Serv information\"\
    \n   does not need to be conveyed by the penultimate node to the LSP\n   Egress.\
    \  Thus the Short Pipe Model can also operate with PHP.\n   Operation of the Short\
    \ Pipe Model with PHP is illustrated below:\n           =========== LSP ============================>\n\
    \                ---Swap--(M)--...--Swap------\n               /       (outer\
    \ header)        \\\n             (M)                             (M)\n      \
    \       /                                 \\\n   >--(m)-Push.................(m).............Pop-(m)--E--(m)-->\n\
    \           I           (inner header)           P (M*)\n   (M) represents the\
    \ \"LSP Diff-Serv information\"\n   (m) represents the \"Tunneled Diff-Serv information\"\
    \n   (*) The Penultimate LSR considers the LSP Diff-Serv information\n       received\
    \ in the outer header (i.e., before the pop) in order to\n       apply its Diff-Serv\
    \ forwarding treatment (i.e., actual PHB)\n    I  represents the LSP ingress node\n\
    \    P  represents the LSP penultimate node\n    E  represents the LSP egress\
    \ node\n   The Short Pipe Model is particularly appropriate for environments in\n\
    \   which:\n   -  the cloud upstream of the incoming interface of the LSP Ingress\n\
    \      and the cloud downstream of the outgoing interface of the LSP\n      Egress\
    \ are in Diff-Serv domains which use a common set of Diff-\n      Serv service\
    \ provisioning policies and PHB definitions, while the\n      LSP spans one (or\
    \ more) Diff-Serv domain(s) which use(s) a\n      different set of Diff-Serv service\
    \ provisioning policies and PHB\n      definitions\n   -  the outgoing interface\
    \ of the LSP Egress is in the same Diff-Serv\n      domain as the cloud downstream\
    \ of it.\n   Since each outgoing interface of the LSP Egress is in the same Diff-\n\
    \   Serv domain as the cloud downstream of it, each outgoing interface\n   may\
    \ potentially be in a different Diff-Serv domain, and the LSP\n   Egress needs\
    \ to be configured with awareness of every corresponding\n   Diff-Serv policy.\
    \  This operational overhead is justified in some\n   situations where the respective\
    \ downstream Diff-Serv policies are\n   better suited to offering service differentiation\
    \ over each egress\n   interface than the common Diff-Serv policy used on the\
    \ LSP span.  An\n   example of such a situation is where a Service Provider offers\
    \ an\n   MPLS VPN service and where some VPN users request that their own VPN\n\
    \   Diff-Serv policy be applied to control service differentiation on the\n  \
    \ dedicated link from the LSP Egress to the destination VPN site,\n   rather than\
    \ the Service Provider's Diff-Serv policy.\n   The Short Pipe Model MAY be supported.\n\
    \   For support of the Short Pipe Model over a given LSP without PHP, an\n   LSR\
    \ performs the Incoming PHB Determination and the Diff-Serv\n   information Encoding\
    \ in the same manner as with the Pipe Model with\n   the following exception:\n\
    \   -  when receiving a labeled packet, the LSR performs Incoming PHB\n      Determination\
    \ considering the header (label entry or IP header)\n      which is used to do\
    \ the actual forwarding.  In particular, when a\n      pop operation is to be\
    \ performed for the considered LSP, the LSR\n      performs Incoming PHB Determination\
    \ AFTER the pop.\n   For support of the Short Pipe Model over a given LSP with\
    \ PHP, an LSR\n   performs Incoming PHB Determination and Diff-Serv information\n\
    \   Encoding in the same manner as without PHP with the following\n   exceptions:\n\
    \   -  the Penultimate LSR performs Incoming PHB Determination\n      considering\
    \ the outer label entry in the received label stack.  In\n      other words, when\
    \ a pop operation is to be performed for the\n      considered LSP, the Penultimate\
    \ LSR performs Incoming PHB\n      Determination BEFORE the pop.\n   Note that\
    \ the behavior of the Penultimate LSR in the Short Pipe Mode\n   with PHP, is\
    \ identical to the behavior of the LSP Egress in the Pipe\n   Mode (necessarily\
    \ without PHP).\n"
- title: 2.6.3 Uniform Model
  contents:
  - "2.6.3 Uniform Model\n   With the Uniform Model, MPLS tunnels (aka LSPs) are viewed\
    \ as\n   artifacts of the end-to-end path from the Diff-Serv standpoint.  MPLS\n\
    \   Tunnels may be used for forwarding purposes but have no significant\n   impact\
    \ on Diff-Serv.  In this model, any packet contains exactly one\n   piece of Diff-Serv\
    \ information which is meaningful and is always\n   encoded in the outer most\
    \ label entry (or in the IP DSCP where the IP\n   packet is transmitted unlabelled\
    \ for instance at the egress of the\n   LSP).  Any Diff-Serv information encoded\
    \ somewhere else (e.g., in\n   deeper label entries) is of no significance to\
    \ intermediate nodes or\n   to the tunnel egress and is ignored.  If Traffic Conditioning\
    \ at\n   intermediate nodes on the LSP span affects the \"outer\" Diff-Serv\n\
    \   information, the updated Diff-Serv information is the one considered\n   meaningful\
    \ at the egress of the LSP.\n   Operation of the Uniform Model without PHP is\
    \ illustrated below:\n             ========== LSP =============================>\n\
    \                 ---Swap--(M)--...-Swap--(M)--Swap----\n                /   \
    \      (outer header)              \\\n              (M)                     \
    \                (M)\n              /                                        \
    \ \\\n   >--(M)--Push...............(x).......................Pop--(M)->\n   \
    \         I            (inner header)                  E\n   (M) represents the\
    \ Meaningful Diff-Serv information encoded in the\n       corresponding header.\n\
    \   (x) represents non-meaningful Diff-Serv information.\n    I  represents the\
    \ LSP ingress node\n    E  represents the LSP egress node\n   Operation of the\
    \ Uniform Model with PHP is illustrated below:\n             ========== LSP =========================>\n\
    \                 ---Swap-(M)-...-Swap------\n                /        (outer\
    \ header)    \\\n              (M)                          (M)\n            \
    \  /                              \\\n   >--(M)--Push..............(x)............Pop-(M)--E--(M)->\n\
    \             I          (inner header)       P\n   (M) represents the Meaningful\
    \ Diff-Serv information encoded in the\n       corresponding header.\n   (x) represents\
    \ non-meaningful Diff-Serv information.\n    I  represents the LSP ingress node\n\
    \    P  represents the LSP penultimate node\n    E  represents the LSP egress\
    \ node\n   The Uniform Model for Diff-Serv over MPLS is such that, from the\n\
    \   Diff-Serv perspective, operations are exactly identical to the\n   operations\
    \ if MPLS was not used.  In other words, MPLS is entirely\n   transparent to the\
    \ Diff-Serv operations.\n   Use of the Uniform Model allows LSPs to span Diff-Serv\
    \ domain\n   boundaries without any other measure in place than an inter-domain\n\
    \   Traffic Conditioning Agreement at the physical boundary between the\n   Diff-Serv\
    \ domains and operating exclusively on the \"outer\" header,\n   since the meaningful\
    \ Diff-Serv information is always visible and\n   modifiable in the outmost label\
    \ entry.\n   The Uniform Model MAY be supported.\n   For support of the Uniform\
    \ Model over a given LSP, an LSR performs\n   Incoming PHB Determination and Diff-Serv\
    \ information Encoding in the\n   following manner:\n   -  when receiving an unlabelled\
    \ packet, the LSR performs Incoming PHB\n      Determination considering the received\
    \ IP Header.\n   -  when receiving a labeled packet, the LSR performs Incoming\
    \ PHB\n      Determination considering the outer label entry in the received\n\
    \      label stack.  In particular, when a pop operation is to be\n      performed\
    \ for the considered LSP, the LSR performs Incoming PHB\n      Determination BEFORE\
    \ the pop.\n   -  when performing a push operation for the considered LSP, the\
    \ LSR\n      encodes Diff-Serv Information in the transmitted label entry\n  \
    \    corresponding to the pushed label.  The Diff-Serv Information\n      encoded\
    \ in the encapsulated header (swapped label entry or IP\n      Header) is of no\
    \ importance.\n   -  when performing a swap-only operation for the considered\
    \ LSP, the\n      LSR encodes Diff-Serv Information in the transmitted label entry\n\
    \      that contains the swapped label.\n   -  when PHP is used, the Penultimate\
    \ LSR needs to be aware of the\n      \"Set of PHB-->Encaps mappings\" for the\
    \ label corresponding to the\n      exposed header (or the `PHB-->DSCP mapping')\
    \ in order to perform\n      Diff-Serv Information Encoding.  Methods for providing\
    \ this\n      mapping awareness are outside the scope of this specification. \
    \ As\n      an example, the \"PHB-->DSCP mapping\" may be locally configured.\n\
    \      As another example, in some environments, it may be appropriate\n     \
    \ for the Penultimate LSR to assume that the \"Set of PHB-->Encaps\n      mappings\"\
    \ to be used for the outgoing label in the exposed header\n      is the \"Set\
    \ of PHB-->Encaps mappings\" that would be used by the\n      LSR if the LSR was\
    \ not doing PHP.  Note also that this\n      specification assumes that the Penultimate\
    \ LSR does not perform\n      label swapping over the label entry exposed by the\
    \ pop operation\n      (and in fact that it does not even look at the exposed\
    \ label).\n      Consequently, restrictions may apply to the Diff-Serv Information\n\
    \      Encoding that can be performed by the Penultimate LSR.  For\n      example,\
    \ this specification does not allow situations where the\n      Penultimate LSR\
    \ pops a label corresponding to an E-LSP supporting\n      two PSCs, while the\
    \ header exposed by the pop contains label\n      values for two L-LSPs each supporting\
    \ one PSC, since the Diff-Serv\n      Information Encoding would require selecting\
    \ one label or the\n      other.\n   Note that LSR behaviors for the Pipe, the\
    \ Short Pipe and the Uniform\n   Model only differ when doing a push or a pop.\
    \  Thus, Intermediate\n   LSRs which perform swap only operations for an LSP,\
    \ behave in exactly\n   the same way, regardless of whether they are behaving\
    \ in the Pipe,\n   Short Pipe or the Uniform model.  With a Diff-Serv implementation\n\
    \   supporting multiple Tunneling Models, only LSRs behaving as LSP\n   Ingress,\
    \ Penultimate LSR or LSP Egress need to be configured to\n   operate in a particular\
    \ Model.  Signaling to associate a Diff-Serv\n   tunneling model on a per-LSP\
    \ basis is not within the scope of this\n   specification.\n"
- title: 2.6.4 Hierarchy
  contents:
  - "2.6.4 Hierarchy\n   Through the label stack mechanism, MPLS allows LSP tunneling\
    \ to nest\n   to any depth.  We observe that with such nesting, the push of level\n\
    \   N+1 takes place on a subsequent (or the same) LSR to the LSR doing\n   the\
    \ push for level N, while the pop of level N+1 takes place on a\n   previous (or\
    \ the same) LSR to the LSR doing the pop of level N.  For\n   a given level N\
    \ LSP, the Ingress LSR doing the push and the LSR doing\n   the pop (Penultimate\
    \ LSR or LSP Egress) must operate in the same\n   Tunneling Model (i.e., Pipe,\
    \ Short Pipe or Uniform).  However, there\n   is no requirement for consistent\
    \ tunneling models across levels so\n   that LSPs at different levels may be operating\
    \ in different Tunneling\n   Models.\n   Hierarchical operations are illustrated\
    \ below in the case of two\n   levels of tunnels:\n               +--------Swap--...---+\n\
    \              /    (outmost header)  \\\n             /                     \
    \   \\\n           Push(2).................(2)Pop\n           / (outer header)\
    \             \\\n          /                              \\\n   >>---Push(1)........................(1)Pop-->>\n\
    \             (inner header)\n   (1) Tunneling Model 1\n   (2) Tunneling Model\
    \ 2\n   Tunneling Model 2 may be the same as or may be different from\n   Tunneling\
    \ Model 1.\n   For a given LSP of level N, the LSR must perform the Incoming PHB\n\
    \   Determination and the Diff-Serv information Encoding as specified in\n   section\
    \ 2.6.2, 2.6.2.1 and 2.6.3 according to the Tunneling Model of\n   this level\
    \ N LSP and independently of the Tunneling Model of other\n   level LSPs.\n"
- title: 3. Detailed Operations of E-LSPs
  contents:
  - '3. Detailed Operations of E-LSPs

    '
- title: 3.1 E-LSP Definition
  contents:
  - "3.1 E-LSP Definition\n   E-LSPs are defined in section 1.2.\n   Within a given\
    \ MPLS Diff-Serv domain, all the E-LSPs relying on the\n   pre-configured mapping\
    \ are capable of transporting the same common\n   set of 8, or fewer, BAs.  Each\
    \ of those E-LSPs may actually transport\n   this full set of BAs or any arbitrary\
    \ subset of it.\n   For a given FEC, two given E-LSPs using a signaled `EXP<-->PHB\n\
    \   mapping' can support the same or different sets of Ordered\n   Aggregates.\n"
- title: 3.2 Populating the `Encaps-->PHB mapping' for an incoming E-LSP
  contents:
  - "3.2 Populating the `Encaps-->PHB mapping' for an incoming E-LSP\n   This section\
    \ defines how the `Encaps-->PHB mapping' of the Diff-Serv\n   Context is populated\
    \ for an incoming E-LSP in order to allow Incoming\n   PHB determination.\n  \
    \ The `Encaps-->PHB mapping' for an E-LSP is always of the form\n   `EXP-->PHB\
    \ mapping'.\n   If the label corresponds to an E-LSP for which no `EXP<-->PHB\n\
    \   mapping' has been explicitly signaled at LSP setup, the `EXP-->PHB\n   mapping'\
    \ is populated based on the Preconfigured `EXP<-->PHB mapping'\n   which is discussed\
    \ below in section 3.2.1.\n   If the label corresponds to an E-LSP for which an\
    \ `EXP<-->PHB\n   mapping' has been explicitly signaled at LSP setup, the `EXP-->PHB\n\
    \   mapping' is populated as per the signaled `EXP<-->PHB mapping'.\n"
- title: 3.2.1 Preconfigured `EXP<-->PHB mapping'
  contents:
  - "3.2.1 Preconfigured `EXP<-->PHB mapping'\n   LSRs supporting E-LSPs which use\
    \ the preconfigured `EXP<-->PHB\n   mapping' must allow local configuration of\
    \ this `EXP<-->PHB mapping'.\n   This mapping applies to all the E-LSPs established\
    \ on this LSR\n   without a mapping explicitly signaled at set-up time.\n   The\
    \ preconfigured `EXP<-->PHB mapping' must either be consistent at\n   every E-LSP\
    \ hop throughout the MPLS Diff-Serv domain spanned by the\n   LSP or appropriate\
    \ remarking of the EXP field must be performed by\n   the LSR whenever a different\
    \ preconfigured mapping is used on the\n   ingress and egress interfaces.\n  \
    \ In case, the preconfigured `EXP<-->PHB mapping' has not actually been\n   configured\
    \ by the Network Administrator, the LSR should use a default\n   preconfigured\
    \ `EXP<-->PHB mapping' which maps all EXP values to the\n   Default PHB.\n"
- title: 3.3 Incoming PHB Determination On Incoming E-LSP
  contents:
  - "3.3 Incoming PHB Determination On Incoming E-LSP\n   This section defines how\
    \ Incoming PHB Determination is carried out\n   when the considered label entry\
    \ in the received label stack\n   corresponds to an E-LSP.  This requires that\
    \ the `Encaps-->PHB\n   mapping' is populated as defined in section 3.2.\n   When\
    \ considering a label entry corresponding to an incoming E-LSP for\n   Incoming\
    \ PHB Determination, the LSR:\n   -  determines the `EXP-->PHB mapping' by looking\
    \ up the `Encaps-->PHB\n      mapping' of the Diff-Serv Context associated in\
    \ the ILM with the\n      considered incoming E-LSP label.\n   -  determines the\
    \ incoming PHB by looking up the EXP field of the\n      considered label entry\
    \ in the `EXP-->PHB mapping' table.\n"
- title: 3.4 Populating the `Set of PHB-->Encaps mappings' for an outgoing E-LSP
  contents:
  - "3.4 Populating the `Set of PHB-->Encaps mappings' for an outgoing E-LSP\n   This\
    \ section defines how the `Set of PHB-->Encaps mappings' of the\n   Diff-Serv\
    \ Context is populated at label setup for an outgoing E-LSP\n   in order to allow\
    \ Encoding of Diff-Serv information in the\n   Encapsulation Layer.\n"
- title: 3.4.1 `PHB-->EXP mapping'
  contents:
  - "3.4.1 `PHB-->EXP mapping'\n   An outgoing E-LSP must always have a `PHB-->EXP\
    \ mapping' as part of\n   the `Set of PHB-->Encaps mappings' of its Diff-Serv\
    \ Context.\n   If the label corresponds to an E-LSP for which no `EXP<-->PHB\n\
    \   mapping' has been explicitly signaled at LSP setup, this `PHB-->EXP\n   mapping'\
    \ is populated based on the Preconfigured `EXP<-->PHB mapping'\n   which is discussed\
    \ above in section 3.2.1.\n   If the label corresponds to an E-LSP for which an\
    \ `EXP<-->PHB\n   mapping' has been explicitly signaled at LSP setup, the `PHB-->EXP\n\
    \   mapping' is populated as per the signaled `EXP<-->PHB mapping'.\n"
- title: 3.4.2 `PHB-->CLP mapping'
  contents:
  - "3.4.2 `PHB-->CLP mapping'\n   If the LSP is egressing over an ATM interface which\
    \ is not label\n   switching controlled, then one `PHB-->CLP mapping' is added\
    \ to the\n   `Set of PHB-->Encaps mappings' for this outgoing LSP.  This\n   `PHB-->CLP\
    \ mapping' is populated in the following way:\n   -  it is a function of the PHBs\
    \ supported on this LSP, and may use\n      the relevant mapping entries for these\
    \ PHBs from the Default\n      `PHB-->CLP mapping' defined in section 3.4.2.1.\
    \  Mappings other\n      than the one defined in section 3.4.2.1 may be used.\
    \  In\n      particular, if a mapping from PHBs to CLP is standardized in the\n\
    \      future for operations of Diff-Serv over ATM, such a standardized\n    \
    \  mapping may then be used.\n   For example if the outgoing label corresponds\
    \ to an LSP supporting\n   the AF1 PSC, then the `PHB-->CLP mapping' may be populated\
    \ with:\n         PHB                CLP Field\n         AF11       ---->    \
    \  0\n         AF12       ---->      1\n         AF13       ---->      1\n   \
    \      EF         ---->      0\n   Notice that in this case the `Set of PHB-->Encaps\
    \ mappings' contains\n   both a `PHB-->EXP mapping' and a `PHB-->CLP mapping'.\n"
- title: 3.4.2.1 Default `PHB-->CLP mapping'
  contents:
  - "3.4.2.1 Default `PHB-->CLP mapping'\n         PHB                CLP Bit\n  \
    \       DF         ---->      0\n         CSn        ---->      0\n         AFn1\
    \       ---->      0\n         AFn2       ---->      1\n         AFn3       ---->\
    \      1\n         EF         ---->      0\n"
- title: 3.4.3 `PHB-->DE mapping'
  contents:
  - "3.4.3 `PHB-->DE mapping'\n   If the LSP is egressing over a Frame Relay interface\
    \ which is not\n   label switching controlled, one `PHB-->DE mapping' is added\
    \ to the\n   `Set of PHB-->Encaps mappings' for this outgoing LSP and is populated\n\
    \   in the following way:\n   -  it is a function of the PHBs supported on this\
    \ LSP, and may use\n      the relevant mapping entries for these PHBs from the\
    \ Default\n      `PHB-->DE mapping' defined in section 3.4.3.1.  Mappings other\n\
    \      than the one defined in section 3.4.3.1 may be used.  In\n      particular,\
    \ if a mapping from PHBs to DE is standardized in the\n      future for operations\
    \ of Diff-Serv over Frame Relay, such a\n      standardized mapping may then be\
    \ used.\n   Notice that in this case the `Set of PHB-->Encaps mappings' contains\n\
    \   both a `PHB-->EXP mapping' and a `PHB-->DE mapping'.\n"
- title: 3.4.3.1 `Default PHB-->DE mapping'
  contents:
  - "3.4.3.1 `Default PHB-->DE mapping'\n         PHB                 DE Bit\n   \
    \       DF       ---->       0\n          CSn      ---->       0\n          AFn1\
    \     ---->       0\n          AFn2     ---->       1\n          AFn3     ---->\
    \       1\n          EF       ---->       0\n"
- title: 3.4.4 `PHB-->802.1 mapping'
  contents:
  - "3.4.4 `PHB-->802.1 mapping'\n   If the LSP is egressing over a LAN interface\
    \ on which multiple 802.1\n   Traffic Classes are supported as per [IEEE_802.1],\
    \ then one\n   `PHB-->802.1 mapping' is added to the `Set of PHB-->Encaps mappings'\n\
    \   for this outgoing LSP.  This `PHB-->802.1 mapping' is populated in\n   the\
    \ following way:\n   -  it is a function of the PHBs supported on this LSP, and\
    \ uses the\n      relevant mapping entries for these PHBs from the Preconfigured\n\
    \      `PHB-->802.1 mapping' defined in section 3.4.4.1.\n   Notice that the `Set\
    \ of PHB-->Encaps mappings' then contains both a\n   `PHB-->EXP mapping' and a\
    \ `PHB-->802.1 mapping'.\n"
- title: 3.4.4.1 Preconfigured `PHB-->802.1 Mapping'
  contents:
  - "3.4.4.1 Preconfigured `PHB-->802.1 Mapping'\n   At the time of producing this\
    \ specification, there are no\n   standardized mapping from PHBs to 802.1 Traffic\
    \ Classes.\n   Consequently, an LSR supporting multiple 802.1 Traffic Classes\
    \ over\n   LAN interfaces must allow local configuration of a `PHB-->802.1\n \
    \  mapping'.  This mapping applies to all the outgoing LSPs established\n   by\
    \ the LSR on such LAN interfaces.\n"
- title: 3.5 Encoding Diff-Serv information into Encapsulation Layer On Outgoing
  contents:
  - "3.5 Encoding Diff-Serv information into Encapsulation Layer On Outgoing\n   \
    \ E-LSP\n   This section defines how to encode Diff-Serv information into the\n\
    \   MPLS encapsulation Layer for a given transmitted label entry\n   corresponding\
    \ to an outgoing E-LSP.  This requires that the `Set of\n   PHB-->Encaps mappings'\
    \ be populated as defined in section 3.4.\n   The LSR first determines the `Set\
    \ of PHB-->Encaps mappings' of the\n   Diff-Serv Context associated with the corresponding\
    \ label in the\n   NHLFE.\n"
- title: 3.5.1 `PHB-->EXP mapping'
  contents:
  - "3.5.1 `PHB-->EXP mapping'\n   If the `Set of PHB-->Encaps mappings' contains\
    \ a mapping of the form\n   `PHB-->EXP mapping', then the LSR:\n   -  determines\
    \ the value to be written in the EXP field of the\n      corresponding level label\
    \ entry by looking up the \"outgoing PHB\"\n      in this `PHB-->EXP mapping'\
    \ table.\n"
- title: 3.5.2 `PHB-->CLP mapping'
  contents:
  - "3.5.2 `PHB-->CLP mapping'\n   If the `Set of PHB-->Encaps mappings' contains\
    \ a mapping of the form\n   `PHB-->CLP mapping', then the LSR:\n   -  determines\
    \ the value to be written in the CLP field of the ATM\n      encapsulation header,\
    \ by looking up the \"outgoing PHB\" in this\n      `PHB-->CLP mapping' table.\n"
- title: 3.5.3 `PHB-->DE mapping'
  contents:
  - "3.5.3 `PHB-->DE mapping'\n   If the `Set of PHB-->Encaps mappings' contains a\
    \ mapping of the form\n   `PHB-->DE mapping', then the LSR:\n   -  determines\
    \ the value to be written in the DE field of the Frame\n      Relay encapsulation\
    \ header, by looking up the \"outgoing PHB\" in\n      this `PHB-->DE mapping'\
    \ table.\n"
- title: 3.5.4 `PHB-->802.1 mapping'
  contents:
  - "3.5.4 `PHB-->802.1 mapping'\n   If the `Set of PHB-->Encaps mappings' contains\
    \ a mapping of the form\n   `PHB-->802.1 mapping', then the LSR:\n   -  determines\
    \ the value to be written in the User_Priority field of\n      the Tag Control\
    \ Information of the 802.1 encapsulation header\n      [IEEE_802.1], by looking\
    \ up the \"outgoing PHB\" in this 'PHB--\n      >802.1 mapping' table.\n"
- title: 3.6 E-LSP Merging
  contents:
  - "3.6 E-LSP Merging\n   In an MPLS domain, two or more LSPs can be merged into\
    \ one LSP at one\n   LSR.  E-LSPs are compatible with LSP Merging under the following\n\
    \   condition:\n      E-LSPs can only be merged into one LSP if they support the\
    \ exact\n      same set of BAs.\n   For E-LSPs using a signaled `EXP<-->PHB mapping',\
    \ the above merge\n   condition MUST be enforced by LSRs through explicit checking\
    \ at label\n   setup that the exact same set of PHBs is supported on the merged\n\
    \   LSPs.\n   For E-LSPs using the preconfigured `EXP<-->PHB mapping', since the\n\
    \   PHBs supported over an E-LSP is not signaled at establishment time,\n   an\
    \ LSR can not rely on signaling information to enforce the above\n   merge.  However\
    \ all E-LSPs using the preconfigured `EXP<-->PHB\n   mapping' are required to\
    \ support the same set of Behavior Aggregates\n   within a given MPLS Diff-Serv\
    \ domain.  Thus, merging of E-LSPs using\n   the preconfigured `EXP<-->PHB mapping'\
    \ is allowed within a given MPLS\n   Diff-Serv domain.\n"
- title: 4.  Detailed Operation of L-LSPs
  contents:
  - '4.  Detailed Operation of L-LSPs

    '
- title: 4.1 L-LSP Definition
  contents:
  - "4.1 L-LSP Definition\n   L-LSPs are defined in section 1.3.\n"
- title: 4.2 Populating the `Encaps-->PHB mapping' for an incoming L-LSP
  contents:
  - "4.2 Populating the `Encaps-->PHB mapping' for an incoming L-LSP\n   This section\
    \ defines how the `Encaps-->PHB mapping' of the Diff-Serv\n   Context is populated\
    \ at label setup for an incoming L-LSP in order to\n   allow Incoming PHB determination.\n"
- title: 4.2.1 `EXP-->PHB mapping'
  contents:
  - "4.2.1 `EXP-->PHB mapping'\n   If the LSR terminates the MPLS Shim Layer over\
    \ this incoming L-LSP\n   and the L-LSP ingresses on an interface which is not\
    \ ATM nor Frame\n   Relay, then the `Encaps-->PHB mapping' is populated in the\
    \ following\n   way:\n   -  it is actually a `EXP-->PHB mapping'\n   -  this mapping\
    \ is a function of the PSC which is carried on this\n      LSP, and must use the\
    \ relevant mapping entries for this PSC from\n      the Mandatory `EXP/PSC-->PHB\
    \ mapping' defined in Section 4.2.1.1.\n   For example if the incoming label corresponds\
    \ to an L-LSP supporting\n   the AF1 PSC, then the `Encaps-->PHB mapping' will\
    \ be populated with:\n      EXP Field              PHB\n        001        ---->\
    \    AF11\n        010        ---->    AF12\n        011        ---->    AF13\n\
    \   An LSR, supporting L-LSPs over PPP interfaces and LAN interfaces, is\n   an\
    \ example of an LSR terminating the Shim layer over ingress\n   interfaces which\
    \ are not ATM nor Frame Relay.\n   If the LSR terminates the MPLS Shim Layer over\
    \ this incoming L-LSP\n   and the L-LSP ingresses on an ATM or Frame Relay interface,\
    \ then the\n   `Encaps-->PHB mapping' is populated in the following way:\n   -\
    \  it should actually be a `EXP-->PHB mapping'.  Alternative optional\n      ways\
    \ of populating the `Encaps-->PHB mapping' might be defined in\n      the future\
    \ (e.g., using a 'CLP/EXP--> PHB mapping' or a\n      'DE/EXP-->PHB mapping')\
    \ but are outside the scope of this\n      document.\n   -  when the `Encaps-->PHB\
    \ mapping' is an `EXP-->PHB mapping', this\n      `EXP-->PHB mapping' mapping\
    \ is a function of the PSC which is\n      carried on the L-LSP, and must use\
    \ the relevant mapping entries\n      for this PSC from the Mandatory `EXP/PSC-->PHB\
    \ mapping' defined in\n      Section 4.2.1.1.\n   An Edge-LSR of an ATM-MPLS domain\
    \ or of a FR-MPLS domain is an\n   example of an LSR terminating the shim layer\
    \ over an ingress ATM/FR\n   interface.\n"
- title: 4.2.1.1 Mandatory `EXP/PSC --> PHB mapping'
  contents:
  - "4.2.1.1 Mandatory `EXP/PSC --> PHB mapping'\n      EXP Field      PSC       \
    \      PHB\n        000          DF    ---->    DF\n        000          CSn \
    \  ---->    CSn\n        001          AFn   ---->    AFn1\n        010       \
    \   AFn   ---->    AFn2\n        011          AFn   ---->    AFn3\n        000\
    \          EF    ---->    EF\n"
- title: 4.2.2 `CLP-->PHB mapping'
  contents:
  - "4.2.2 `CLP-->PHB mapping'\n   If the LSR does not terminate an MPLS Shim Layer\
    \ over this incoming\n   label and uses ATM encapsulation (i.e., it is an ATM-LSR),\
    \ then the\n   `Encaps-->PHB mapping' for this incoming L-LSP is populated in\
    \ the\n   following way:\n   -  it is actually a `CLP-->PHB mapping'\n   -  the\
    \ mapping is a function of the PSC, which is carried on this\n      LSP, and should\
    \ use the relevant mapping entries for this PSC from\n      the Default `CLP/PSC-->PHB\
    \ mapping' defined in Section 4.2.2.1.\n   For example if the incoming label corresponds\
    \ to an L-LSP supporting\n   the AF1 PSC, then the `Encaps-->PHB mapping' should\
    \ be populated\n   with:\n      CLP Field              PHB\n        0        \
    \  ---->    AF11\n        1          ---->    AF12\n"
- title: 4.2.2.1 Default `CLP/PSC --> PHB mapping'
  contents:
  - "4.2.2.1 Default `CLP/PSC --> PHB mapping'\n      CLP Bit      PSC           \
    \  PHB\n         0          DF    ---->    DF\n         0          CSn   ---->\
    \    CSn\n         0          AFn   ---->    AFn1\n         1          AFn   ---->\
    \    AFn2\n         0          EF    ---->    EF\n"
- title: 4.2.3 `DE-->PHB mapping'
  contents:
  - "4.2.3 `DE-->PHB mapping'\n   If the LSR does not terminate an MPLS Shim Layer\
    \ over this incoming\n   label and uses Frame Relay encapsulation (i.e., it is\
    \ a FR-LSR), then\n   the `Encaps-->PHB mapping' for this incoming L-LSP is populated\
    \ in\n   the following way:\n   -  it is actually a `DE-->PHB mapping'\n   - \
    \ the mapping is a function of the PSC which is carried on this LSP,\n      and\
    \ should use the relevant mapping entries for this PSC from the\n      Default\
    \ `DE/PSC-->PHB mapping' defined in Section 4.2.3.1.\n"
- title: 4.2.3.1 Default `DE/PSC --> PHB mapping'
  contents:
  - "4.2.3.1 Default `DE/PSC --> PHB mapping'\n      DE Bit      PSC             PHB\n\
    \         0          DF    ---->    DF\n         0          CSn   ---->    CSn\n\
    \         0          AFn   ---->    AFn1\n         1          AFn   ---->    AFn2\n\
    \         0          EF    ---->    EF\n"
- title: 4.3 Incoming PHB Determination On Incoming L-LSP
  contents:
  - "4.3 Incoming PHB Determination On Incoming L-LSP\n   This section defines how\
    \ Incoming PHB determination is carried out\n   when the considered label entry\
    \ in the received label stack\n   corresponds to an L-LSP.  This requires that\
    \ the `Encaps-->PHB\n   mapping' is populated as defined in section 4.2.\n   When\
    \ considering a label entry corresponding to an incoming L-LSP\n   for Incoming\
    \ PHB Determination, the LSR first determines the\n   `Encaps-->PHB mapping' associated\
    \ with the corresponding label.\n"
- title: 4.3.1 `EXP-->PHB mapping'
  contents:
  - "4.3.1 `EXP-->PHB mapping'\n   If the `Encaps-->PHB mapping' is of the form `EXP-->PHB\
    \ mapping',\n   then the LSR:\n   -  determines the incoming PHB by looking at\
    \ the EXP field of the\n      considered label entry and using the `EXP-->PHB\
    \ mapping'.\n"
- title: 4.3.2 `CLP-->PHB mapping'
  contents:
  - "4.3.2 `CLP-->PHB mapping'\n   If the `Encaps-->PHB mapping' is of the form `CLP-->PHB\
    \ mapping',\n   then the LSR:\n   -  determines the incoming PHB by looking at\
    \ the CLP field of the\n      ATM Layer encapsulation and using the `CLP-->PHB\
    \ mapping'.\n"
- title: 4.3.3 `DE-->PHB mapping'
  contents:
  - "4.3.3 `DE-->PHB mapping'\n   If the `Encaps-->PHB mapping' is of the form `DE-->PHB\
    \ mapping',\n   then the LSR:\n   -  determines the incoming PHB by looking at\
    \ the DE field of the\n      Frame Relay encapsulation and by using the `DE-->PHB\
    \ mapping'.\n"
- title: 4.4 Populating the `Set of PHB-->Encaps mappings' for an outgoing L-LSP
  contents:
  - "4.4 Populating the `Set of PHB-->Encaps mappings' for an outgoing L-LSP\n   This\
    \ section defines how the `Set of PHB-->Encaps mappings' of the\n   Diff-Serv\
    \ Context is populated at label setup for an outgoing L-LSP\n   in order to allow\
    \ Encoding of Diff-Serv Information.\n"
- title: 4.4.1 `PHB-->EXP mapping'
  contents:
  - "4.4.1 `PHB-->EXP mapping'\n   If the LSR uses an MPLS Shim Layer over this outgoing\
    \ L-LSP, then\n   one `PHB-->EXP mapping' is added to the `Set of\n   PHB-->Encaps\
    \ mappings' for this outgoing\n   L-LSP.  This `PHB-->EXP mapping' is populated\
    \ in the following way:\n   -  it is a function of the PSC supported on this LSP,\
    \ and must use\n      the mapping entries relevant for this PSC from the Mandatory\n\
    \      `PHB-->EXP mapping' defined in section 4.4.1.1.\n   For example, if the\
    \ outgoing label corresponds to an L-LSP supporting\n   the AF1 PSC, then the\
    \ following `PHB-->EXP mapping' is added into\n   the `Set of PHB-->Encaps mappings':\n\
    \         PHB                EXP Field\n         AF11       ---->      001\n \
    \        AF12       ---->      010\n         AF13       ---->      011\n"
- title: 4.4.1.1 Mandatory `PHB-->EXP mapping'
  contents:
  - "4.4.1.1 Mandatory `PHB-->EXP mapping'\n         PHB                EXP Field\n\
    \         DF         ---->      000\n         CSn        ---->      000\n    \
    \     AFn1       ---->      001\n         AFn2       ---->      010\n        \
    \ AFn3       ---->      011\n         EF         ---->      000\n"
- title: 4.4.2 `PHB-->CLP mapping'
  contents:
  - "4.4.2 `PHB-->CLP mapping'\n   If the L-LSP is egressing on an ATM interface (i.e.,\
    \ it is an ATM-LSR\n   or it is a frame-based LSR sending packets on an LC-ATM\
    \ interface or\n   on an ATM interface which is not label switching controlled),\
    \ then\n   one `PHB-->CLP mapping' is added to the `Set of PHB-->Encaps\n   mappings'\
    \ for this outgoing L-LSP.\n   If the L-LSP is egressing over an ATM interface\
    \ which is not label-\n   controlled, the `PHB-->CLP mapping' is populated as\
    \ per section\n   3.4.2.\n   If the L-LSP is egressing over an LC-ATM interface,\
    \ the `PHB-->CLP\n   mapping' is populated in the following way:\n   -  it is\
    \ a function of the PSC supported on this LSP, and should use\n      the relevant\
    \ mapping entries for this PSC from the Default\n      `PHB-->CLP mapping' defined\
    \ in section 3.4.2.1.\n   Notice that if the LSR is a frame-based LSR supporting\
    \ an L-LSP\n   egressing over an ATM interface, then the `Set of PHB-->Encaps\n\
    \   mappings' contains both a `PHB-->EXP mapping' and a `PHB-->CLP\n   mapping'.\
    \  If the LSR is an ATM-LSR supporting an L-LSP, then the\n   `Set of PHB-->Encaps\
    \ mappings' only contains a `PHB-->CLP mapping'.\n"
- title: 4.4.3 `PHB-->DE mapping'
  contents:
  - "4.4.3 `PHB-->DE mapping'\n   If the L-LSP is egressing over a Frame Relay interface\
    \ (i.e., it is\n   an LSR sending packets on an LC-FR interface or on a Frame\
    \ Relay\n   interface which is not label switching controlled), one `PHB-->DE\n\
    \   mapping' is added to the `Set of PHB-->Encaps mappings' for this\n   outgoing\
    \ L-LSP.\n   If the L-LSP is egressing over a FR interface which is not label\n\
    \   switching controlled, the `PHB-->DE mapping' is populated as per\n   section\
    \ 3.4.3.\n   If the L-LSP is egressing over an LC-FR interface, the `PHB-->DE\n\
    \   mapping' is populated in the following way:\n   -  it is a function of the\
    \ PSC supported on this LSP, and should use\n      the relevant mapping entries\
    \ for this PSC from the Default\n      `PHB-->DE mapping' defined in section 3.4.3.1.\n\
    \   Notice that if the LSR is an Edge-LSR supporting an L-LSP egressing\n   over\
    \ a LC-FR interface, then the `Set of PHB-->Encaps mappings'\n   contains both\
    \ a `PHB-->EXP mapping' and a `PHB-->DE mapping'.  If the\n   LSR is a FR-LSR\
    \ supporting an L-LSP, then the `Set of PHB-->Encaps\n   mappings' only contains\
    \ a `PHB-->DE mapping'.\n"
- title: 4.4.4 `PHB-->802.1 mapping'
  contents:
  - "4.4.4 `PHB-->802.1 mapping'\n   If the LSP is egressing over a LAN interface\
    \ on which multiple 802.1\n   Traffic Classes are supported, as defined in [IEEE_802.1],\
    \ then one\n   `PHB-->802.1 mapping' is added as per section 3.4.4.\n"
- title: 4.5 Encoding Diff-Serv Information into Encapsulation Layer on Outgoing
  contents:
  - "4.5 Encoding Diff-Serv Information into Encapsulation Layer on Outgoing\n   \
    \ L-LSP\n   This section defines how to encode Diff-Serv information into the\n\
    \   MPLS encapsulation Layer for a transmitted label entry corresponding\n   to\
    \ an outgoing L-LSP.  This requires that the `Set of PHB-->Encaps\n   mappings'\
    \ is populated as defined in section 4.4.\n   The LSR first determines the `Set\
    \ of PHB-->Encaps mappings' of the\n   Diff-Serv Context associated with the corresponding\
    \ label in the\n   NHLFE and then performs corresponding encoding as specified\
    \ in\n   sections 3.5.1, 3.5.2, 3.5.3 and 3.5.4.\n"
- title: 4.6 L-LSP Merging
  contents:
  - "4.6 L-LSP Merging\n   In an MPLS domain, two or more LSPs can be merged into\
    \ one LSP at one\n   LSR.  L-LSPs are compatible with LSP Merging under the following\n\
    \   condition:\n      L-LSPs can only be merged into one L-LSP if they support\
    \ the same\n      PSC.\n   The above merge condition MUST be enforced by LSRs,\
    \ through explicit\n   checking at label setup, that the same PSC is supported\
    \ on the merged\n   LSPs.\n   Note that when L-LSPs merge, the bandwidth that\
    \ is available for the\n   PSC downstream of the merge point must be sufficient\
    \ to carry the sum\n   of the merged traffic.  This is particularly important\
    \ in the case of\n   EF traffic.  This can be ensured in multiple ways (for instance\
    \ via\n   provisioning, or via bandwidth signaling and explicit admission\n  \
    \ control).\n"
- title: 5. RSVP Extension for Diff-Serv Support
  contents:
  - "5. RSVP Extension for Diff-Serv Support\n   The MPLS architecture does not assume\
    \ a single label distribution\n   protocol.  [RSVP_MPLS_TE] defines the extension\
    \ to RSVP for\n   establishing LSPs in MPLS networks.  This section specifies\
    \ the\n   extensions to RSVP, beyond those defined in [RSVP_MPLS_TE], to\n   establish\
    \ LSPs supporting Differentiated Services in MPLS networks.\n"
- title: 5.1 Diff-Serv related RSVP Messages Format
  contents:
  - "5.1 Diff-Serv related RSVP Messages Format\n   One new RSVP Object is defined\
    \ in this document: the DIFFSERV Object.\n   Detailed description of this Object\
    \ is provided below.  This new\n   Object is applicable to Path messages.  This\
    \ specification only\n   defines the use of the DIFFSERV Object in Path messages\
    \ used to\n   establish LSP Tunnels in accordance with [RSVP_MPLS_TE] and thus\n\
    \   containing a Session Object with a C-Type equal to LSP_TUNNEL_IPv4\n   and\
    \ containing a LABEL_REQUEST object.\n   Restrictions defined in [RSVP_MPLS_TE]\
    \ for support of the\n   establishment of LSP Tunnels via RSVP are also applicable\
    \ to the\n   establishment of LSP Tunnels supporting Diff-Serv: for instance,\
    \ only\n   unicast LSPs are supported and Multicast LSPs are for further study.\n\
    \   This new DIFFSERV object is optional with respect to RSVP so that\n   general\
    \ RSVP implementations not concerned with MPLS LSP set up do\n   not have to support\
    \ this object.\n   The DIFFSERV Object is optional for support of LSP Tunnels\
    \ as defined\n   in [RSVP_MPLS_TE].  A Diff-Serv capable LSR supporting E-LSPs\
    \ using\n   the preconfigured `EXP<-->PHB mapping' in compliance with this\n \
    \  specification MAY support the DIFFSERV Object.  A Diff-Serv capable\n   LSR\
    \ supporting E-LSPs using a signaled `EXP<-->PHB mapping' in\n   compliance with\
    \ this specification MUST support the DIFFSERV Object.\n   A Diff-Serv capable\
    \ LSR supporting L-LSPs in compliance with this\n   specification MUST support\
    \ the DIFFSERV Object.\n"
- title: 5.1.1 Path Message Format
  contents:
  - "5.1.1 Path Message Format\n   The format of the Path message is as follows:\n\
    \         <Path Message> ::=       <Common Header> [ <INTEGRITY> ]\n         \
    \                         <SESSION> <RSVP_HOP>\n                             \
    \     <TIME_VALUES>\n                                  [ <EXPLICIT_ROUTE> ]\n\
    \                                  <LABEL_REQUEST>\n                         \
    \         [ <SESSION_ATTRIBUTE> ]\n                                  [ <DIFFSERV>\
    \ ]\n                                  [ <POLICY_DATA> ... ]\n               \
    \                   [ <sender descriptor> ]\n         <sender descriptor> ::=\
    \  <SENDER_TEMPLATE> <SENDER_TSPEC>\n                                  [ <ADSPEC>\
    \ ]\n                                  [ <RECORD_ROUTE> ]\n"
- title: 5.2 DIFFSERV Object
  contents:
  - "5.2 DIFFSERV Object\n   The DIFFSERV object formats are shown below.  Currently\
    \ there are two\n   possible C_Types.  Type 1 is a DIFFSERV object for an E-LSP.\
    \  Type 2\n   is a DIFFSERV object for an L-LSP.\n"
- title: '5.2.1. DIFFSERV object for an E-LSP:'
  contents:
  - "5.2.1. DIFFSERV object for an E-LSP:\n   class = 65, C_Type = 1\n       0   \
    \                1                   2                   3\n       0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |        Reserved                                       | MAPnb |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |\
    \                            MAP (1)                            |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |                                                               |\n   \
    \   //                               ...                            //\n     \
    \ |                                                               |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |                            MAP (MAPnb)                        |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      Reserved\
    \ : 28 bits\n         This field is reserved.  It must be set to zero on transmission\n\
    \         and must be ignored on receipt.\n      MAPnb : 4 bits\n         Indicates\
    \ the number of MAP entries included in the DIFFSERV\n         Object.  This can\
    \ be set to any value from 0 to 8.\n      MAP : 32 bits\n         Each MAP entry\
    \ defines the mapping between one EXP field value\n         and one PHB.  The\
    \ MAP entry has the following format:\n       0                   1          \
    \         2                   3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8\
    \ 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |            Reserved     | EXP |             PHBID             |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      Reserved\
    \ : 13 bits\n         This field is reserved.  It must be set to zero on transmission\n\
    \         and must be ignored on receipt.\n      EXP : 3 bits\n         This field\
    \ contains the value of the EXP field for the\n         `EXP<-->PHB mapping' defined\
    \ in this MAP entry.\n      PHBID : 16 bits\n         This field contains the\
    \ PHBID of the PHB for the `EXP<-->PHB\n         mapping' defined in this MAP\
    \ entry.  The PHBID is encoded as\n         specified in [PHBID].\n"
- title: '5.2.2 DIFFSERV object for an L-LSP:'
  contents:
  - "5.2.2 DIFFSERV object for an L-LSP:\n   class = 65, C_Type = 2\n       0    \
    \               1                   2                   3\n       0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |        Reserved               |             PSC               |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      Reserved\
    \ : 16 bits\n         This field is reserved.  It must be set to zero on transmission\n\
    \         and must be ignored on receipt.\n      PSC : 16 bits\n         The PSC\
    \ indicates a PHB Scheduling Class to be supported by the\n         LSP.  The\
    \ PSC is encoded as specified in [PHBID].\n"
- title: 5.3 Handling DIFFSERV Object
  contents:
  - "5.3 Handling DIFFSERV Object\n   To establish an LSP tunnel with RSVP, the sender\
    \ creates a Path\n   message with a session type of LSP_Tunnel_IPv4 and with a\n\
    \   LABEL_REQUEST object as per [RSVP_MPLS_TE].\n   To establish an E-LSP tunnel\
    \ with RSVP, which uses the Preconfigured\n   `EXP<-->PHB mapping', the sender\
    \ creates a Path message:\n   -  with a session type of LSP_Tunnel_IPv4,\n   -\
    \  with the LABEL_REQUEST object, and\n   -  without the DIFFSERV object.\n  \
    \ To establish an E-LSP tunnel with RSVP, which uses the Preconfigured\n   `EXP<-->PHB\
    \ mapping', the sender MAY alternatively create a Path\n   message:\n   -  with\
    \ a session type of LSP_Tunnel_IPv4,\n   -  with the LABEL_REQUEST object, and\n\
    \   -  with the DIFFSERV object for an E-LSP containing no MAP entries.\n   To\
    \ establish an E-LSP tunnel with RSVP, which uses a signaled\n   `EXP<-->PHB mapping',\
    \ the sender creates a Path message:\n   -  with a session type of LSP_Tunnel_IPv4,\n\
    \   -  with the LABEL_REQUEST object,\n   -  with the DIFFSERV object for an E-LSP\
    \ containing one MAP entry for\n      each EXP value to be supported on this E-LSP.\n\
    \   To establish with RSVP an L-LSP tunnel, the sender creates a Path\n   message:\n\
    \   -  with a session type of LSP_Tunnel_IPv4,\n   -  with the LABEL_REQUEST object,\n\
    \   -  with the DIFFSERV object for an L-LSP containing the PHB\n      Scheduling\
    \ Class (PSC) supported on this L-LSP.\n   If a path message contains multiple\
    \ DIFFSERV objects, only the first\n   one is meaningful; subsequent DIFFSERV\
    \ object(s) must be ignored and\n   not forwarded.\n   Each LSR along the path\
    \ records the DIFFSERV object, when present, in\n   its path state block.\n  \
    \ If a DIFFSERV object is not present in the Path message, the LSR\n   SHOULD\
    \ interpret this as a request for an E-LSP using the\n   Preconfigured `EXP<-->PHB\
    \ mapping'.  However, for backward\n   compatibility purposes, with other non-Diff-Serv\
    \ Quality of Service\n   options allowed by [RSVP_MPLS_TE] such as Integrated\
    \ Services\n   Controlled Load or Guaranteed Services, the LSR MAY support a\n\
    \   configurable \"override option\".  When this \"override option\" is\n   configured,\
    \ the LSR interprets a path message without a Diff-Serv\n   object as a request\
    \ for an LSP with such non-Diff-Serv Quality of\n   Service.\n   If a DIFFSERV\
    \ object for an E-LSP containing no MAP entry is present\n   in the Path message,\
    \ the LSR MUST interpret this as a request for an\n   E-LSP using the Preconfigured\
    \ `EXP<-->PHB mapping'.  In particular,\n   this allows an LSR with the \"override\
    \ option\" configured to support\n   E-LSPs with Preconfigured `EXP<-->PHB mapping',\
    \ simultaneously with\n   LSPs with non-Diff-Serv Quality of Service.\n   If a\
    \ DIFFSERV object for an E-LSP containing at least one MAP entry\n   is present\
    \ in the Path message, the LSR MUST interpret this as a\n   request for an E-LSP\
    \ with signaled `EXP<-->PHB mapping'.\n   If a DIFFSERV object for an L-LSP is\
    \ present in the Path message, the\n   LSR MUST interpret this as a request for\
    \ an L-LSP.\n   The destination LSR of an E-LSP or L-LSP responds to the Path\
    \ message\n   containing the LABEL_REQUEST object by sending a Resv message:\n\
    \   -  with the LABEL object\n   -  without a DIFFSERV object.\n   Assuming the\
    \ label request is accepted and a label is allocated, the\n   Diff-Serv LSRs (sender,\
    \ destination, intermediate nodes) must:\n   -  update the Diff-Serv Context associated\
    \ with the established LSPs\n      in their ILM/FTN as specified in previous sections\
    \ (incoming and\n      outgoing label),\n   -  install the required Diff-Serv\
    \ forwarding treatment (scheduling\n      and dropping behavior) for this NHLFE\
    \ (outgoing label).\n   An LSR that recognizes the DIFFSERV object and that receives\
    \ a path\n   message which contains the DIFFSERV object but which does not contain\n\
    \   a LABEL_REQUEST object or which does not have a session type of\n   LSP_Tunnel_IPv4,\
    \ sends a PathErr towards the sender with the error\n   code `Diff-Serv Error'\
    \ and an error value of `Unexpected DIFFSERV\n   object'.  Those are defined below\
    \ in section 5.5.\n   An LSR receiving a Path message with the DIFFSERV object\
    \ for E-LSP,\n   which recognizes the DIFFSERV object but does not support the\n\
    \   particular PHB encoded in one, or more, of the MAP entries, sends a\n   PathErr\
    \ towards the sender with the error code `Diff-Serv Error' and\n   an error value\
    \ of `Unsupported PHB'.  Those are defined below in\n   section 5.5.\n   An LSR\
    \ receiving a Path message with the DIFFSERV object for E-LSP,\n   which recognizes\
    \ the DIFFSERV object but determines that the signaled\n   `EXP<-->PHB mapping'\
    \ is invalid, sends a PathErr towards the sender\n   with the error code `Diff-Serv\
    \ Error' and an error value of Invalid\n   `EXP<-->PHB mapping'.  Those are defined\
    \ below in section 5.5.  `The\n   EXP<-->PHB mapping' signaled in the DIFFSERV\
    \ Object for an E-LSP is\n   invalid when:\n   -  the MAPnb field is not within\
    \ the range 0 to 8 or\n   -  a given EXP value appears in more than one MAP entry,\
    \ or\n   -  the PHBID encoding is invalid.\n   An LSR receiving a Path message\
    \ with the DIFFSERV object for L-LSP,\n   which recognizes the DIFFSERV object\
    \ but does not support the\n   particular PSC encoded in the PSC field, sends\
    \ a PathErr towards the\n   sender with the error code `Diff-Serv Error' and an\
    \ error value of\n   `Unsupported PSC'.  Those are defined below in section 5.5.\n\
    \   An LSR receiving a Path message with the DIFFSERV object, which\n   recognizes\
    \ the DIFFSERV object but that is unable to allocate the\n   required per-LSP\
    \ Diff-Serv context sends a PathErr with the error\n   code \"Diff-Serv Error\"\
    \ and the error value \"Per-LSP context\n   allocation failure\".  Those are defined\
    \ below in section 5.5.\n   A Diff-Serv LSR MUST handle the situations where the\
    \ label request\n   can not be accepted for reasons other than those already discussed\
    \ in\n   this section, in accordance with [RSVP_MPLS_TE] (e.g., reservation\n\
    \   rejected by admission control, a label can not be associated).\n"
- title: 5.4 Non-support of the DIFFSERV Object
  contents:
  - "5.4 Non-support of the DIFFSERV Object\n   An LSR that does not recognize the\
    \ DIFFSERV object Class-Num MUST\n   behave in accordance with the procedures\
    \ specified in [RSVP] for an\n   unknown Class-Num whose format is 0bbbbbbb i.e.,\
    \ it must send a\n   PathErr with the error code `Unknown object class' toward\
    \ the sender.\n   An LSR that recognize the DIFFSERV object Class-Num but does\
    \ not\n   recognize the DIFFSERV object C-Type, must behave in accordance with\n\
    \   the procedures specified in [RSVP] for an unknown C-type i.e., it\n   must\
    \ send a PathErr with the error code `Unknown object C-Type'\n   toward the sender.\n\
    \   In both situations, this causes the path set-up to fail.  The sender\n   should\
    \ notify management that a L-LSP cannot be established and\n   should possibly\
    \ take action to retry LSP establishment without the\n   DIFFSERV object (e.g.,\
    \ attempt to use E-LSPs with Preconfigured\n   `EXP<-->PHB mapping' as a fall-back\
    \ strategy).\n"
- title: 5.5 Error Codes For Diff-Serv
  contents:
  - "5.5 Error Codes For Diff-Serv\n   In the procedures described above, certain\
    \ errors must be reported as\n   a `Diff-Serv Error'.  The value of the `Diff-Serv\
    \ Error' error code\n   is 27.\n   The following defines error values for the\
    \ Diff-Serv Error:\n      Value    Error\n       1       Unexpected DIFFSERV object\n\
    \       2       Unsupported PHB\n       3       Invalid `EXP<-->PHB mapping'\n\
    \       4       Unsupported PSC\n       5       Per-LSP context allocation failure\n"
- title: 5.6 Intserv Service Type
  contents:
  - "5.6 Intserv Service Type\n   Both E-LSPs and L-LSPs can be established with or\
    \ without bandwidth\n   reservation.\n   As specified in [RSVP_MPLS_TE], to establish\
    \ an E-LSP or an L-LSP\n   with bandwidth reservation, Int-Serv's Controlled Load\
    \ service (or\n   possibly Guaranteed Service) is used and the bandwidth is signaled\
    \ in\n   the SENDER_TSPEC (respectively FLOWSPEC) of the path (respectively\n\
    \   Resv) message.\n   As specified in [RSVP_MPLS_TE],to establish an E-LSP or\
    \ an L-LSP\n   without bandwidth reservation, the Null Service specified in [NULL]\n\
    \   is used.\n   Note that this specification defines usage of E-LSPs and L-LSPs\
    \ for\n   support of the Diff-Serv service only.  Regardless of the Intserv\n\
    \   service (Controlled Load, Null Service, Guaranteed Service,...) and\n   regardless\
    \ of whether the reservation is with or without bandwidth\n   reservation, E-LSPs\
    \ and L-LSPs are defined here for support of Diff-\n   Serv services.  Support\
    \ of Int-Serv services over an MPLS Diff-Serv\n   backbone is outside the scope\
    \ of this specification.\n   Note also that this specification does not concern\
    \ itself with the\n   DCLASS object defined in [DCLASS], since this object conveys\n\
    \   information on DSCP values, which are not relevant inside the MPLS\n   network.\n"
- title: 6. LDP Extensions for Diff-Serv Support
  contents:
  - "6. LDP Extensions for Diff-Serv Support\n   The MPLS architecture does not assume\
    \ a single label distribution\n   protocol.  [LDP] defines the Label Distribution\
    \ Protocol and its\n   usage for establishment of label switched paths (LSPs)\
    \ in MPLS\n   networks.  This section specifies the extensions to LDP to establish\n\
    \   LSPs supporting Differentiated Services in MPLS networks.\n   One new LDP\
    \ TLV is defined in this document:\n   -  the Diff-Serv TLV\n   Detailed description\
    \ of this TLV is provided below.\n   The new Diff-Serv TLV is optional with respect\
    \ to LDP.  A Diff-Serv\n   capable LSR supporting E-LSPs which uses the Preconfigured\
    \ `EXP<--\n   >PHB mapping' in compliance with this specification MAY support\
    \ the\n   Diff-Serv TLV.  A Diff-Serv capable LSR supporting E-LSPs which uses\n\
    \   the signaled `EXP<-->PHB mapping' in compliance with this\n   specification\
    \ MUST support the Diff-Serv TLV.  A Diff-Serv capable\n   LSR supporting L-LSPs\
    \ in compliance with this specification MUST\n   support the Diff-Serv TLV.\n"
- title: 6.1 Diff-Serv TLV
  contents:
  - "6.1 Diff-Serv TLV\n   The Diff-Serv TLV has the following formats:\n   Diff-Serv\
    \ TLV for an E-LSP:\n       0                   1                   2        \
    \           3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7\
    \ 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |U|F|  Diff-Serv (0x0901)       |      Length                   |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |T|\
    \        Reserved                                     | MAPnb |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |                            MAP (1)                            |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      \
    \                               ...\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |                            MAP (MAPnb)                        |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      T:1\
    \ bit\n         LSP Type.  This is set to 0 for an E-LSP\n      Reserved : 27\
    \ bits\n         This field is reserved.  It must be set to zero on transmission\n\
    \         and must be ignored on receipt.\n      MAPnb : 4 bits\n         Indicates\
    \ the number of MAP entries included in the DIFFSERV\n         Object.  This can\
    \ be set to any value from 1 to 8.\n      MAP : 32 bits\n         Each MAP entry\
    \ defines the mapping between one EXP field value\n         and one PHB.  The\
    \ MAP entry has the following format:\n       0                   1          \
    \         2                   3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8\
    \ 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |            Reserved     | EXP |             PHBID             |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      Reserved\
    \ : 13 bits\n         This field is reserved.  It must be set to zero on transmission\n\
    \         and must be ignored on receipt.\n      EXP : 3 bits\n         This field\
    \ contains the value of the EXP field for the\n         `EXP<-->PHB mapping' defined\
    \ in this MAP entry.\n      PHBID : 16 bits\n         This field contains the\
    \ PHBID of the PHB for the `EXP<-->PHB\n         mapping' defined in this MAP\
    \ entry.  The PHBID is encoded as\n         specified in [PHBID].\n   Diff-Serv\
    \ TLV for an L-LSP:\n       0                   1                   2        \
    \           3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7\
    \ 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |U|F| Type = PSC (0x0901)       |      Length                   |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |T|\
    \        Reserved             |              PSC              |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      T:1 bit\n         LSP Type.  This is set to 1 for an L-LSP\n      Reserved\
    \ : 15 bits\n         This field is reserved.  It must be set to zero on transmission\n\
    \         and must be ignored on receipt.\n      PSC : 16 bits\n         The PSC\
    \ indicates a PHB Scheduling Class to be supported by the\n         LSP.  The\
    \ PSC is encoded as specified in [PHBID].\n"
- title: 6.2 Diff-Serv Status Code Values
  contents:
  - "6.2 Diff-Serv Status Code Values\n   The following values are defined for the\
    \ Status Code field of the\n   Status TLV:\n         Status Code             \
    \                E   Status Data\n         Unexpected Diff-Serv TLV          \
    \      0   0x01000001\n         Unsupported PHB                         0   0x01000002\n\
    \         Invalid `EXP<-->PHB mapping'            0   0x01000003\n         Unsupported\
    \ PSC                         0   0x01000004\n         Per-LSP context allocation\
    \ failure      0   0x01000005\n"
- title: 6.3 Diff-Serv Related LDP Messages
  contents:
  - '6.3 Diff-Serv Related LDP Messages

    '
- title: 6.3.1 Label Request Message
  contents:
  - "6.3.1 Label Request Message\n   The format of the Label Request message is extended\
    \ as follows, to\n   optionally include the Diff-Serv TLV:\n    0            \
    \       1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1\
    \ 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |0|   Label Request (0x0401)    |      Message Length           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Message ID                                |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     FEC TLV                                   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Diff-Serv TLV (optional)                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 6.3.2 Label Mapping Message
  contents:
  - "6.3.2 Label Mapping Message\n   The format of the Label Mapping message is extended\
    \ as follows, to\n   optionally include the Diff-Serv TLV:\n    0            \
    \       1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1\
    \ 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |0|   Label Mapping (0x0400)    |      Message Length           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Message ID                                |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     FEC TLV                                   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Label TLV                                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Diff-Serv TLV (optional)                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 6.3.3 Label Release Message
  contents:
  - "6.3.3 Label Release Message\n   The format of the Label Release message is extended\
    \ as follows, to\n   optionally include the Status TLV:\n       0            \
    \       1                   2                   3\n       0 1 2 3 4 5 6 7 8 9\
    \ 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |0|   Label Release (0x0403)   |      Message Length            |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |\
    \                     Message ID                                |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |                     FEC TLV                                   |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |\
    \                     Label TLV (optional)                      |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |                     Status TLV (optional)                     |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 6.3.4 Notification Message
  contents:
  - "6.3.4 Notification Message\n   The format of the Notification message is extended\
    \ as follows, to\n   optionally include the Diff-Serv TLV:\n    0            \
    \       1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1\
    \ 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |0|   Notification (0x0001)     |      Message Length           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Message ID                                |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Status TLV                                |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Optional Parameters                       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                 Diff-Serv TLV (optional)                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 6.4 Handling of the Diff-Serv TLV
  contents:
  - '6.4 Handling of the Diff-Serv TLV

    '
- title: 6.4.1 Handling of the Diff-Serv TLV in Downstream Unsolicited Mode
  contents:
  - "6.4.1 Handling of the Diff-Serv TLV in Downstream Unsolicited Mode\n   This section\
    \ describes operations when the Downstream Unsolicited\n   Mode is used.\n   When\
    \ allocating a label for an E-LSP which is to use the\n   preconfigured `EXP<-->PHB\
    \ mapping', a downstream Diff-Serv LSR issues\n   a Label Mapping message without\
    \ the Diff-Serv TLV.\n   When allocating a label for an E-LSP which is to use\
    \ a signaled\n   `EXP<-->PHB mapping', a downstream Diff-Serv LSR issues a Label\n\
    \   Mapping message with the Diff-Serv TLV for an E-LSP which contains\n   one\
    \ MAP entry for each EXP value to be supported on this E-LSP.\n   When allocating\
    \ a label for an L-LSP, a downstream Diff-Serv LSR\n   issues a Label Mapping\
    \ message with the Diff-Serv TLV for an L-LSP\n   which contains the PHB Scheduling\
    \ Class (PSC) to be supported on this\n   L-LSP.\n   Assuming the label set-up\
    \ is successful, the downstream and upstream\n   LSRs must:\n   -  update the\
    \ Diff-Serv Context associated with the established LSPs\n      in their ILM/FTN\
    \ as specified in previous sections (incoming and\n      outgoing label),\n  \
    \ -  install the required Diff-Serv forwarding treatment (scheduling\n      and\
    \ dropping behavior) for this NHLFE (outgoing label).\n   An upstream Diff-Serv\
    \ LSR receiving a Label Mapping message with\n   multiple Diff-Serv TLVs only\
    \ considers the first one as meaningful.\n   The LSR must ignore and not forward\
    \ the subsequent Diff-Serv TLV(s).\n   An upstream Diff-Serv LSR which receives\
    \ a Label Mapping message,\n   with the Diff-Serv TLV for an E-LSP and does not\
    \ support the\n   particular PHB encoded in one or more of the MAP entries, must\
    \ reject\n   the mapping by sending a Label Release message which includes the\n\
    \   Label TLV and the Status TLV with a Status Code of `Unsupported PHB'.\n  \
    \ An upstream Diff-Serv LSR receiving a Label Mapping message with the\n   Diff-Serv\
    \ TLV for an E-LSP and determining that the signaled\n   `EXP<-->PHB mapping'\
    \ is invalid, must reject the mapping by sending a\n   Label Release message which\
    \ includes the Label TLV and the Status TLV\n   with a Status Code of Invalid\
    \ `EXP<-->PHB mapping'.  The\n   `EXP<-->PHB mapping' signaled in the DIFFSERV\
    \ Object for an E-LSP is\n   invalid when:\n   -  the MAPnb field is not within\
    \ the range 1 to 8, or\n   -  a given EXP value appears in more than one MAP entry,\
    \ or\n   -  the PHBID encoding is invalid\n   An upstream Diff-Serv LSR receiving\
    \ a Label Mapping message with the\n   Diff-Serv TLV for an L-LSP containing a\
    \ PSC value which is not\n   supported, must reject the mapping by sending a Label\
    \ Release message\n   which includes the Label TLV and the Status TLV with a Status\
    \ Code of\n   `Unsupported PSC'.\n"
- title: 6.4.2 Handling of the Diff-Serv TLV in Downstream on Demand Mode
  contents:
  - "6.4.2 Handling of the Diff-Serv TLV in Downstream on Demand Mode\n   This section\
    \ describes operations when the Downstream on Demand Mode\n   is used.\n   When\
    \ requesting a label for an E-LSP which is to use the\n   preconfigured `EXP<-->PHB\
    \ mapping', an upstream Diff-Serv LSR sends a\n   Label Request message without\
    \ the Diff-Serv TLV.\n   When requesting a label for an E-LSP which is to use\
    \ a signaled\n   `EXP<-->PHB mapping', an upstream Diff-Serv LSR sends a Label\
    \ Request\n   message with the Diff-Serv TLV for an E-LSP which contains one MAP\n\
    \   entry for each EXP value to be supported on this E-LSP.\n   When requesting\
    \ a label for an L-LSP, an upstream Diff-Serv LSR sends\n   a Label Request message\
    \ with the Diff-Serv TLV for an L-LSP which\n   contains the PSC to be supported\
    \ on this L-LSP.\n   A downstream Diff-Serv LSR sending a Label Mapping message\
    \ in\n   response to a Label Request message for an E-LSP or an L-LSP must not\n\
    \   include a Diff-Serv TLV in this Label Mapping message.  Assuming the\n   label\
    \ set-up is successful, the downstream and upstream LSRs must:\n   -  update the\
    \ Diff-Serv Context associated with the established LSPs\n      in their ILM/FTN\
    \ as specified in previous sections (incoming and\n      outgoing label),\n  \
    \ -  install the required Diff-Serv forwarding treatment (scheduling\n      and\
    \ dropping behavior) for this NHLFE (outgoing label).\n   An upstream Diff-Serv\
    \ LSR receiving a Label Mapping message\n   containing a Diff-Serv TLV in response\
    \ to its Label Request message,\n   must reject the label mapping by sending a\
    \ Label Release message\n   which includes the Label TLV and the Status TLV with\
    \ a Status Code of\n   `Unexpected Diff-Serv TLV'.\n   A downstream Diff-Serv\
    \ LSR receiving a Label Request message with\n   multiple Diff-Serv TLVs only\
    \ considers the first one as meaningful.\n   The LSR must ignore and not forward\
    \ the subsequent Diff-Serv TLV(s).\n   A downstream Diff-Serv LSR which receives\
    \ a Label Request message\n   with the Diff-Serv TLV for an E-LSP and does not\
    \ support the\n   particular PHB encoded in one (or more) of the MAP entries,\
    \ must\n   reject the request by sending a Notification message which includes\n\
    \   the Status TLV with a Status Code of `Unsupported PHB'.\n   A downstream Diff-Serv\
    \ LSR receiving a Label Request message with the\n   Diff-Serv TLV for an E-LSP\
    \ and determining that the signaled\n   `EXP<-->PHB mapping' is invalid, must\
    \ reject the request by sending a\n   Notification message which includes the\
    \ Status TLV with a Status Code\n   of Invalid `EXP<-->PHB mapping'.  The `EXP<-->PHB\
    \ mapping' signaled\n   in the DIFFSERV TLV for an E-LSP is invalid when:\n  \
    \ -  the MAPnb field is not within the range 1 to 8, or\n   -  a given EXP value\
    \ appears in more than one MAP entry, or\n   -  the PHBID encoding is invalid\n\
    \   A downstream Diff-Serv LSR receiving a Label Request message with the\n  \
    \ Diff-Serv TLV for an L-LSP containing a PSC value which is not\n   supported,\
    \ must reject the request by sending a Notification message\n   which includes\
    \ the Status TLV with a Status Code of `Unsupported\n   PSC'.\n   A downstream\
    \ Diff-Serv LSR that recognizes the Diff-Serv TLV Type in\n   a Label Request\
    \ message but is unable to allocate the required per-\n   LSP context information,\
    \ must reject the request sending a\n   Notification message which includes the\
    \ Status TLV with a Status Code\n   of `Per-LSP context allocation failure'.\n\
    \   A downstream Diff-Serv LSR that recognizes the Diff-Serv TLV Type in\n   a\
    \ Label Request message and supports the requested PSC but is not\n   able to\
    \ satisfy the label request for other reasons (e.g., no label\n   available),\
    \ must send a Notification message in accordance with\n   existing LDP procedures\
    \ [LDP] (e.g., with a `No Label Resource'\n   Status Code).  This Notification\
    \ message must include the requested\n   Diff-Serv TLV.\n"
- title: 6.5 Non-Handling of the Diff-Serv TLV
  contents:
  - "6.5 Non-Handling of the Diff-Serv TLV\n   An LSR that does not recognize the\
    \ Diff-Serv TLV Type, on receipt of\n   a Label Request message or a Label Mapping\
    \ message containing the\n   Diff-Serv TLV, must behave in accordance with the\
    \ procedures\n   specified in [LDP] for an unknown TLV whose U Bit and F Bit are\
    \ set\n   to 0 i.e., it must ignore the message, return a Notification message\n\
    \   with `Unknown TLV' Status.\n"
- title: 6.6 Bandwidth Information
  contents:
  - "6.6 Bandwidth Information\n   Bandwidth information may also be signaled at the\
    \ establishment time\n   of E-LSP and L-LSP, for instance for the purpose of Traffic\n\
    \   Engineering, using the Traffic Parameters TLV as described in [MPLS\n   CR\
    \ LDP].\n"
- title: 7. MPLS Support of Diff-Serv over PPP, LAN, Non-LC-ATM and Non-LC-FR
  contents:
  - "7. MPLS Support of Diff-Serv over PPP, LAN, Non-LC-ATM and Non-LC-FR\n   Interfaces\n\
    \   The general operations for MPLS support of Diff-Serv, including label\n  \
    \ forwarding and LSP setup operations are specified in the previous\n   sections.\
    \  This section describes the specific operations required\n   for MPLS support\
    \ of Diff-Serv over PPP interfaces, LAN interfaces,\n   ATM Interfaces which are\
    \ not label controlled and Frame Relay\n   interfaces which are not label controlled.\n\
    \   On these interfaces, this specification allows any of the following\n   LSP\
    \ combinations per FEC:\n   -  Zero or any number of E-LSP, and\n   -  Zero or\
    \ any number of L-LSPs.\n   A Diff-Serv capable LSR MUST support E-LSPs which\
    \ use preconfigured\n   `EXP<-->PHB mapping' over these interfaces.\n   A Diff-Serv\
    \ capable LSR MAY support E-LSPs which use signaled\n   `EXP<-->PHB mapping' and\
    \ L-LSPs over these interfaces.\n"
- title: 8. MPLS Support of Diff-Serv over LC-ATM Interfaces
  contents:
  - "8. MPLS Support of Diff-Serv over LC-ATM Interfaces\n   This section describes\
    \ the specific operations required for MPLS\n   support of Diff-Serv over label\
    \ switching controlled ATM (LC-ATM)\n   interfaces.\n   This document allows any\
    \ number of L-LSPs per FEC within an MPLS ATM\n   Diff-Serv domain.  E-LSPs are\
    \ not supported over LC-ATM interfaces.\n"
- title: 8.1 Use of ATM Traffic Classes and Traffic Management mechanisms
  contents:
  - "8.1 Use of ATM Traffic Classes and Traffic Management mechanisms\n   The use\
    \ of the \"ATM service categories\" specified by the ATM Forum,\n   of the \"\
    ATM Transfer Capabilities\" specified by the ITU-T or of\n   vendor specific ATM\
    \ traffic classes is outside of the scope of this\n   specification.  The only\
    \ requirement for compliant implementation is\n   that the forwarding behavior\
    \ experienced by a Behavior Aggregate\n   forwarded over an L-LSP by the ATM LSR\
    \ MUST be compliant with the\n   corresponding Diff-Serv PHB specifications.\n\
    \   Since there is only one bit (CLP) for encoding the PHB drop\n   precedence\
    \ value over ATM links, only two different drop precedence\n   levels are supported\
    \ in ATM LSRs.  Sections 4.2.2 and 4.4.2 define\n   how the three drop precedence\
    \ levels of the AFn Ordered Aggregates\n   are mapped to these two ATM drop precedence\
    \ levels.  This mapping is\n   in accordance with the requirements specified in\
    \ [DIFF_AF] for the\n   case when only two drop precedence levels are supported.\n\
    \   To avoid discarding parts of the packets, frame discard mechanisms,\n   such\
    \ as Early Packet Discard (EPD) (see [ATMF_TM]) SHOULD be enabled\n   in the ATM-LSRs\
    \ for all PHBs described in this document.\n"
- title: 8.2 LSR Implementation With LC-ATM Interfaces
  contents:
  - "8.2 LSR Implementation With LC-ATM Interfaces\n   A Diff-Serv capable LSR MUST\
    \ support L-LSPs over LC-ATM interfaces.\n   This specification assumes that Edge-LSRs\
    \ of the ATM-LSR domain use\n   the \"shim header\" encapsulation method defined\
    \ in [MPLS_ATM].\n   Operations without the \"shim header\" encapsulation are\
    \ outside the\n   scope of this specification.\n"
- title: 9. MPLS Support of Diff-Serv over LC-FR Interfaces
  contents:
  - "9. MPLS Support of Diff-Serv over LC-FR Interfaces\n   This section describes\
    \ the specific operations required for MPLS\n   support of Diff-Serv over label\
    \ switching controlled Frame Relay\n   (LC-FR) interfaces.\n   This document allows\
    \ any number of L-LSPs per FEC within an MPLS\n   Frame Relay Diff-Serv domain.\
    \  E-LSPs are not supported over LC-FR\n   interfaces.\n"
- title: 9.1 Use of Frame Relay Traffic parameters and Traffic Management
  contents:
  - "9.1 Use of Frame Relay Traffic parameters and Traffic Management\n    mechanisms\n\
    \   The use of the Frame Relay traffic parameters as specified by ITU-T\n   and\
    \ Frame Relay-Forum or of vendor specific Frame Relay traffic\n   management mechanisms\
    \ is outside of the scope of this specification.\n   The only requirement for\
    \ compliant implementation is that the\n   forwarding behavior experienced by\
    \ a Behavior Aggregate forwarded\n   over an L-LSP by the Frame Relay LSR MUST\
    \ be compliant with the\n   corresponding Diff-Serv PHB specifications.\n   Since\
    \ there is only one bit (DE) for encoding the PHB drop precedence\n   value over\
    \ Frame Relay links, only two different drop precedence\n   levels are supported\
    \ in Frame Relay LSRs.  Sections 4.2.3 and 4.4.3\n   define how the three drop\
    \ precedence levels of the AFn Ordered\n   Aggregates are mapped to these two\
    \ Frame Relay drop precedence\n   levels.  This mapping is in accordance with\
    \ the requirements\n   specified in [DIFF_AF] for the case when only two drop\
    \ precedence\n   levels are supported.\n"
- title: 9.2 LSR Implementation With LC-FR Interfaces
  contents:
  - "9.2 LSR Implementation With LC-FR Interfaces\n   A Diff-Serv capable LSR MUST\
    \ support L-LSPs over LC-Frame Relay\n   interfaces.\n   This specification assumes\
    \ that Edge-LSRs of the FR-LSR domain use\n   the \"generic encapsulation\" method\
    \ as recommended in [MPLS_FR].\n   Operations without the \"generic encapsulation\"\
    \ are outside the scope\n   of this specification.\n"
- title: 10. IANA Considerations
  contents:
  - "10. IANA Considerations\n   This document defines a number of objects with implications\
    \ for IANA.\n   This document defines in section 5.2 a new RSVP object, the DIFFSERV\n\
    \   object.  This object required a number from the space defined in\n   [RSVP]\
    \ for those objects which, if not understood, cause the entire\n   RSVP message\
    \ to be rejected with an error code of \"Unknown Object\n   Class\".  Such objects\
    \ are identified by a zero in the most\n   significant bit of the class number.\
    \  Within that space, this object\n   required a number from the \"IETF Consensus\"\
    \ space. \"65\" has been\n   allocated by IANA for the DIFFSERV object.\n   This\
    \ document defines in section 5.5 a new RSVP error code, \"Diffserv\n   Error\"\
    .  Error code \"27\" has been assigned by IANA to the \"Diffserv\n   Error\".\
    \  This document defines values 1 through 5 of the value field\n   to be used\
    \ within the ERROR_SPEC object for this error code.  Future\n   allocations of\
    \ values in this space should be handled by IANA using\n   the First Come First\
    \ Served policy defined in [IANA].\n   This document defines in section 6.1 a\
    \ new LDP TLV, the Diffserv TLV.\n   The number for this TLV has been assigned\
    \ by working group consensus\n   according to the policies defined in [LDP].\n\
    \   This document defines in section 6.2 five new LDP Status Code values\n   for\
    \ Diffserv-related error conditions.  The values for the Status\n   Code have\
    \ been assigned by working group consensus according to the\n   policies defined\
    \ in [LDP].\n"
- title: 11. Security Considerations
  contents:
  - "11. Security Considerations\n   This document does not introduce any new security\
    \ issues beyond those\n   inherent in Diff-Serv, MPLS and RSVP, and may use the\
    \ same mechanisms\n   proposed for those technologies.\n"
- title: 12. Acknowledgments
  contents:
  - "12. Acknowledgments\n   This document has benefited from discussions with Eric\
    \ Rosen, Angela\n   Chiu and Carol Iturralde.  It has also borrowed from the work\
    \ done by\n   D. Black regarding Diff-Serv and IP Tunnels interaction.\n"
- title: APPENDIX A. Example Deployment Scenarios
  contents:
  - "APPENDIX A. Example Deployment Scenarios\n   This section does not provide additional\
    \ specification and is only\n   here to provide examples of how this flexible\
    \ approach for Diff-Serv\n   support over MPLS may be deployed.  Pros and cons\
    \ of various\n   deployment options for particular environments are beyond the\
    \ scope\n   of this document.\n"
- title: 'A.1 Scenario 1: 8 (or fewer) BAs, no Traffic Engineering, no MPLS'
  contents:
  - "A.1 Scenario 1: 8 (or fewer) BAs, no Traffic Engineering, no MPLS\n    Protection\n\
    \   A Service Provider running 8 (or fewer) BAs over MPLS, not performing\n  \
    \ Traffic engineering, not using MPLS protection and using MPLS Shim\n   Header\
    \ encapsulation in his/her network, may elect to run Diff-Serv\n   over MPLS using\
    \ a single E-LSP per FEC established via LDP.\n   Furthermore the Service Provider\
    \ may elect to use the preconfigured\n   `EXP<-->PHB mapping'.\n   Operations\
    \ can be summarized as follows:\n   -  the Service Provider configures at every\
    \ LSR, the bi-directional\n      mapping between each PHB and a value of the EXP\
    \ field\n      (e.g., 000<-->AF11, 001<-->AF12, 010<-->AF13)\n   -  the Service\
    \ Provider configures at every LSR, and for every\n      interface, the scheduling\
    \ behavior for each PSC (e.g., bandwidth\n      allocated to AF1) and the dropping\
    \ behavior for each PHB (e.g.,\n      drop profile for AF11, AF12, AF13)\n   -\
    \  LSRs signal establishment of a single E-LSP per FEC using LDP in\n      accordance\
    \ with the specification above (i.e., no Diff-Serv TLV in\n      LDP Label Request/Label\
    \ Mapping messages to implicitly indicate\n      that the LSP is an E-LSP and\
    \ that it uses the preconfigured\n      mapping)\n"
- title: 'A.2 Scenario 2: More than 8 BAs, no Traffic Engineering, no MPLS'
  contents:
  - "A.2 Scenario 2: More than 8 BAs, no Traffic Engineering, no MPLS\n    Protection\n\
    \   A Service Provider running more than 8 BAs over MPLS, not performing\n   Traffic\
    \ Engineering, not using MPLS protection and using MPLS Shim\n   encapsulation\
    \ in his/her network may elect to run Diff-Serv over MPLS\n   using for each FEC:\n\
    \   -  one E-LSP established via LDP and using the preconfigured mapping\n   \
    \   to support a set of 8 (or less) BAs, AND\n   -  one L-LSP per <FEC,OA> established\
    \ via LDP for support of the\n      other BAs.\n   Operations can be summarized\
    \ as follows:\n   -  the Service Provider configures at every LSR the bi-directional\n\
    \      mapping between each PHB and a value of the EXP field for the BAs\n   \
    \   transported over the E-LSP\n   -  the Service Provider configures at every\
    \ LSR, and for every\n      interface, the scheduling behavior for each PSC supported\
    \ over the\n      E-LSP and the dropping behavior for each corresponding PHB\n\
    \   -  the Service Provider configures at every LSR, and for every\n      interface,\
    \ the scheduling behavior for each PSC supported over the\n      L-LSPs and the\
    \ dropping behavior for each corresponding PHB\n   -  LSRs signal establishment\
    \ of a single E-LSP per FEC for the set of\n      E-LSP transported BAs using\
    \ LDP as specified above (i.e., no\n      Diff-Serv TLV in LDP Label Request/Label\
    \ Mapping messages to\n      implicitly indicate that the LSP is an E-LSP and\
    \ that it uses the\n      preconfigured mapping)\n   -  LSRs signal establishment\
    \ of one L-LSP per <FEC,OA> for the other\n      BAs using LDP as specified above\
    \ (i.e., Diff-Serv TLV in LDP Label\n      Request/Label Mapping messages to indicate\
    \ the L-LSP's PSC).\n"
- title: 'A.3 Scenario 3: 8 (or fewer) BAs, Aggregate Traffic Engineering,'
  contents:
  - "A.3 Scenario 3: 8 (or fewer) BAs, Aggregate Traffic Engineering,\n    Aggregate\
    \ MPLS Protection\n   A Service Provider running 8 (or fewer) BAs over MPLS, performing\n\
    \   aggregate Traffic Engineering (i.e., performing a single common path\n   selection\
    \ for all BAs), using aggregate MPLS protection (i.e.,\n   restoring service to\
    \ all PSCs jointly) and using MPLS Shim Header\n   encapsulation in his/her network,\
    \ may elect to run Diff-Serv over\n   MPLS using a single E-LSP per FEC established\
    \ via RSVP [RSVP_MPLS_TE]\n   or CR-LDP [CR-LDP_MPLS_TE] and using the preconfigured\
    \ mapping.\n   Operations can be summarized as follows:\n   -  the Service Provider\
    \ configures at every LSR the bi-directional\n      mapping between each PHB and\
    \ a value of the EXP field\n      (e.g., 000<-->AF11, 001<-->AF12, 010<-->AF13)\n\
    \   -  the Service Provider configures at every LSR, and for every\n      interface,\
    \ the scheduling behavior for each PSC (e.g., bandwidth\n      allocated to AF1)\
    \ and the dropping behavior for each PHB (eg drop\n      profile for AF11, AF12,\
    \ AF13)\n   -  LSRs signal establishment of a single E-LSP per FEC which will\
    \ use\n      the preconfigured mapping:\n      *  using the RSVP protocol as specified\
    \ above (i.e., no DIFFSERV\n         RSVP Object in the PATH message containing\
    \ the LABEL_REQUEST\n         Object), OR\n      *  using the CR-LDP protocol\
    \ as specified above (i.e., no Diff-\n         Serv TLV in LDP Label Request/Label\
    \ Mapping messages).\n   -  protection is activated on all the E-LSPs in order\
    \ to achieve MPLS\n      protection via mechanisms outside the scope of this document.\n"
- title: 'A.4 Scenario 4: per-OA Traffic Engineering/MPLS Protection'
  contents:
  - "A.4 Scenario 4: per-OA Traffic Engineering/MPLS Protection\n   A Service Provider\
    \ running any number of BAs over MPLS, performing\n   per-OA Traffic Engineering\
    \ (i.e., performing a separate path\n   selection for each OA) and performing\
    \ per-OA MPLS protection (i.e.,\n   performing protection with potentially different\
    \ levels of protection\n   for the different OAs) in his/her network, may elect\
    \ to run Diff-Serv\n   over MPLS using one L-LSP per <FEC,OA> pair established\
    \ via RSVP or\n   CR-LDP.\n   Operations can be summarized as follows:\n   - \
    \ the Service Provider configures at every LSR, and for every\n      interface,\
    \ the scheduling behavior for each PSC (e.g., bandwidth\n      allocated to AF1)\
    \ and the dropping behavior for each PHB (e.g.,\n      drop profile for AF11,\
    \ AF12, AF13)\n   -  LSRs signal establishment of one L-LSP per <FEC,OA>:\n  \
    \    *  using the RSVP as specified above to signal the L-LSP's PSC\n        \
    \ (i.e., DIFFSERV RSVP Object in the PATH message containing the\n         LABEL_REQUEST),\
    \ OR\n      *  using the CR-LDP protocol as specified above to signal the L-\n\
    \         LSP PSC (i.e., Diff-Serv TLV in LDP Label Request/Label Mapping\n  \
    \       messages).\n   -  the appropriate level of protection is activated on\
    \ the different\n      L-LSPs (potentially with a different level of protection\
    \ for each\n      PSC) via mechanisms outside the scope of this document.\n"
- title: 'A.5 Scenario 5: 8 (or fewer) BAs, per-OA Traffic Engineering/MPLS'
  contents:
  - "A.5 Scenario 5: 8 (or fewer) BAs, per-OA Traffic Engineering/MPLS\n    Protection\n\
    \   A Service Provider running 8 (or fewer) BAs over MPLS, performing\n   per-OA\
    \ Traffic Engineering (i.e., performing a separate path\n   selection for each\
    \ OA) and performing per-OA MPLS protection (i.e.,\n   performing protection with\
    \ potentially different levels of protection\n   for the different OAs) in his/her\
    \ network, may elect to run Diff-Serv\n   over MPLS using one E-LSP per <FEC,OA>\
    \ pair established via RSVP or\n   CR-LDP.  Furthermore, the Service Provider\
    \ may elect to use the\n   preconfigured mapping on all the E-LSPs.\n   Operations\
    \ can be summarized as follows:\n   -  the Service Provider configures at every\
    \ LSR the bi-directional\n      mapping between each PHB and a value of the EXP\
    \ field\n      (e.g., 000<-->AF11, 001<-->AF12, 010<-->AF13)\n   -  the Service\
    \ Provider configures at every LSR, and for every\n      interface, the scheduling\
    \ behavior for each PSC (e.g., bandwidth\n      allocated to AF1) and the dropping\
    \ behavior for each PHB (eg drop\n      profile for AF11, AF12, AF13)\n   -  LSRs\
    \ signal establishment of one E-LSP per <FEC,OA>:\n      *  using the RSVP protocol\
    \ as specified above to signal that the\n         LSP is an E-LSP which uses the\
    \ preconfigured mapping (i.e., no\n         DIFFSERV RSVP Object in the PATH message\
    \ containing the\n         LABEL_REQUEST), OR\n      *  using the CR-LDP protocol\
    \ as specified above to signal that the\n         LSP is an E-LSP which uses the\
    \ preconfigured mapping (i.e., no\n         Diff-Serv TLV in LDP Label Request/Label\
    \ Mapping messages)\n   -  the Service Provider configures, for each E-LSP, at\
    \ the head-end\n      of that E-LSP, a filtering/forwarding criteria so that only\
    \ the\n      packets belonging to a given OA are forwarded on the E-LSP\n    \
    \  established for the corresponding FEC and corresponding OA.\n   -  the appropriate\
    \ level of protection is activated on the different\n      E-LSPs (potentially\
    \ with a different level of protection depending\n      on the PSC actually transported\
    \ over each E-LSP) via mechanisms\n      outside the scope of this document.\n"
- title: 'A.6 Scenario 6: no Traffic Engineering/MPLS Protection on 8 BAs, per-OA'
  contents:
  - "A.6 Scenario 6: no Traffic Engineering/MPLS Protection on 8 BAs, per-OA\n   \
    \ Traffic Engineering/MPLS Protection on other BAs.\n   A Service Provider not\
    \ performing Traffic Engineering/MPLS Protection\n   on 8 (or fewer) BAs, performing\
    \ per-OA Traffic Engineering/MPLS\n   Protection on the other BAs (i.e., performing\
    \ a separate path\n   selection for each OA corresponding to the other BAs and\
    \ performing\n   MPLS Protection with a potentially different policy for each\
    \ of these\n   OA) and using the MPLS Shim encapsulation in his/her network may\n\
    \   elect to run Diff-Serv over MPLS, using for each FEC:\n   -  one E-LSP using\
    \ the preconfigured mapping established via LDP to\n      support the set of 8\
    \ (or fewer) non-traffic-engineered/non-\n      protected BAs, AND\n   -  one\
    \ L-LSP per <FEC,OA> pair established via RSVP or CR-LDP for\n      support of\
    \ the other BAs.\n   Operations can be summarized as follows:\n   -  the Service\
    \ Provider configures at every LSR the bi-directional\n      mapping between each\
    \ PHB and a value of the EXP field for the BAs\n      supported over the E-LSP\n\
    \   -  the Service Provider configures at every LSR, and for every\n      interface,\
    \ the scheduling behavior for each PSC supported over the\n      E-LSP and the\
    \ dropping behavior for each corresponding PHB\n   -  the Service Provider configures\
    \ at every LSR, and for every\n      interface, the scheduling behavior for each\
    \ PSC supported over the\n      L-LSPs and the dropping behavior for each corresponding\
    \ PHB\n   -  LSRs signal establishment of a single E-LSP per FEC for the non-\n\
    \      traffic engineered BAs using LDP as specified above (i.e., no\n      Diff-Serv\
    \ TLV in LDP Label Request/Label Mapping messages)\n   -  LSRs signal establishment\
    \ of one L-LSP per <FEC,OA> for the other\n      BAs:\n      *  using the RSVP\
    \ protocol as specified above to signal the L-LSP\n         PSC (i.e., DIFFSERV\
    \ RSVP Object in the PATH message containing\n         the LABEL_REQUEST Object),\
    \ OR\n      *  using the CR-LDP protocol as specified above to signal the L-\n\
    \         LSP PSC (i.e., Diff-Serv TLV in LDP Label Request/Label Mapping\n  \
    \       messages).\n   -  protection is not activated on the E-LSPs.\n   -  the\
    \ appropriate level of protection is activated on the different\n      L-LSPs\
    \ (potentially with a different level of protection depending\n      on the L-LSP's\
    \ PSC) via mechanisms outside the scope of this\n      document.\n"
- title: 'A.7 Scenario 7: More than 8 BAs, no Traffic Engineering, no MPLS'
  contents:
  - "A.7 Scenario 7: More than 8 BAs, no Traffic Engineering, no MPLS\n    Protection\n\
    \   A Service Provider running more than 8 BAs over MPLS, not performing\n   Traffic\
    \ engineering, not performing MPLS protection and using MPLS\n   Shim Header encapsulation\
    \ in his/her network, may elect to run Diff-\n   Serv over MPLS using two E-LSPs\
    \ per FEC established via LDP and using\n   signaled `EXP<-->PHB mapping'.\n \
    \  Operations can be summarized as follows:\n   -  the Service Provider configures\
    \ at every LSR, and for every\n      interface, the scheduling behavior for each\
    \ PSC (e.g., bandwidth\n      allocated to AF1) and the dropping behavior for\
    \ each PHB (e.g.,\n      drop profile for AF11, AF12, AF13)\n   -  LSRs signal\
    \ establishment of two E-LSPs per FEC using LDP in\n      accordance with the\
    \ specification above (i.e., Diff-Serv TLV in\n      LDP Label Request/Label Mapping\
    \ messages to explicitly indicate\n      that the LSP is an E-LSP and its `EXP<-->PHB\
    \ mapping').  The\n      signaled mapping will indicate the subset of 8 (or less)\
    \ BAs to be\n      transported on each E-LSP and what EXP values are mapped to\
    \ each\n      BA on each E-LSP.\n"
- title: APPENDIX B. Example Bandwidth Reservation Scenarios
  contents:
  - 'APPENDIX B. Example Bandwidth Reservation Scenarios

    '
- title: 'B.1 Scenario 1: No Bandwidth Reservation'
  contents:
  - "B.1 Scenario 1: No Bandwidth Reservation\n   Consider the case where a network\
    \ administrator elects to:\n   -  have Diff-Serv resources entirely provisioned\
    \ off-line (e.g., via\n      Command Line Interface, via SNMP, via COPS,...)\n\
    \   -  have Shortest Path Routing used for all the Diff-Serv traffic.\n   This\
    \ is the closest model to provisioned Diff-Serv over non-MPLS IP.\n   In that\
    \ case, E-LSPs and/or L-LSPs would be established without\n   signaled bandwidth.\n"
- title: 'B.2 Scenario 2: Bandwidth Reservation for per-PSC Admission Control'
  contents:
  - "B.2 Scenario 2: Bandwidth Reservation for per-PSC Admission Control\n   Consider\
    \ the case where a network administrator elects to:\n   -  have Diff-Serv resources\
    \ entirely provisioned off-line (e.g., via\n      Command Line Interface, via\
    \ SNMP, via COPS,...)\n   -  use L-LSPs\n   -  have Constraint Based Routing performed\
    \ separately for each PSC,\n      where one of the constraints is availability\
    \ of bandwidth from the\n      bandwidth allocated to the relevant PSC.\n   In\
    \ that case, L-LSPs would be established with signaled bandwidth.\n   The bandwidth\
    \ signaled at L-LSP establishment would be used by LSRs\n   to perform admission\
    \ control at every hop to ensure that the\n   constraint on availability of bandwidth\
    \ for the relevant PSC is met.\n"
- title: 'B.3 Scenario 3: Bandwidth Reservation for per-PSC Admission Control and'
  contents:
  - "B.3 Scenario 3: Bandwidth Reservation for per-PSC Admission Control and\n   \
    \ per-PSC Resource Adjustment\n   Consider the case where a network administrator\
    \ elects to:\n   -  use L-LSPs\n   -  have Constraint Based Routing performed\
    \ separately for each PSC,\n      where one of the constraints is availability\
    \ of bandwidth from the\n      bandwidth allocated to the relevant PSC.\n   -\
    \  have Diff-Serv resources dynamically adjusted\n   In that case, L-LSPs would\
    \ be established with signaled bandwidth.\n   The bandwidth signaled at L-LSP\
    \ establishment would be used by LSRs\n   to attempt to adjust the resources allocated\
    \ to the relevant PSC\n   (e.g., scheduling weight) and then perform admission\
    \ control to\n   ensure that the constraint on availability of bandwidth for the\n\
    \   relevant PSC is met after the adjustment.\n"
- title: References
  contents:
  - "References\n   [ANSI/IEEE]      ANSI/IEEE Std 802.1D, 1993 Edition, incorporating\n\
    \                    IEEE supplements P802.1p, 802.1j-1996, 802.6k-1992,\n   \
    \                 802.11c-1998, and P802.12e).\n   [ATMF_TM]        ATM Forum,\
    \ \"Traffic Management Specification Version\n                    4.1\", March\
    \ 1999.\n   [CR-LDP_MPLS_TE] Jamoussi, B., Editor, Andersson, L., Callon, R. and\n\
    \                    R. Dantu, \"Constraint-Based LSP Setup using LDP\",\n   \
    \                 RFC 3212, January 2002.\n   [DCLASS]         Bernet, Y., \"\
    Format of the RSVP DCLASS Object\", RFC\n                    2996, November 2000.\n\
    \   [DIFF_AF]        Heinanen, J., Baker, F., Weiss, W. and J.\n             \
    \       Wroclawski, \"Assured Forwarding PHB Group\", RFC\n                  \
    \  2597, June 1999.\n   [DIFF_ARCH]      Blake, S., Black, D., Carlson, M., Davies,\
    \ E., Wang,\n                    Z. and W. Weiss, \"An Architecture for Differentiated\n\
    \                    Services\", RFC 2475, December 1998.\n   [DIFF_EF]      \
    \  Davie, B., Charny, A., Baker, F., Bennet, J.,\n                    Benson,\
    \ K., Boudec, J., Chiu, A., Courtney, W.,\n                    Davari, S., Firoiu,\
    \ V., Kalmanek, C., Ramakrishnam,\n                    K. and D. Stiliadis, \"\
    An Expedited Forwarding PHB\n                    (Per-Hop Behavior)\", RFC 3246,\
    \ March 2002.\n   [DIFF_HEADER]    Nichols, K., Blake, S., Baker, F. and D. Black,\n\
    \                    \"Definition of the Differentiated Services Field (DS\n \
    \                   Field) in the IPv4 and IPv6 Headers\", RFC 2474,\n       \
    \             December 1998.\n   [DIFF_NEW]       Grossman, D., \"New Terminology\
    \ and Clarifications\n                    for Diffserv\", RFC 3260, April 2002.\n\
    \   [DIFF_TUNNEL]    Black, D., \"Differentiated Services and Tunnels\",\n   \
    \                 RFC 2983, October 2000.\n   [ECN]            Ramakrishnan, K.,\
    \ Floyd, S. and D. Black, \"The\n                    Addition of Explicit Congestion\
    \ Notification (ECN)\n                    to IP\", RFC 3168, September 2001.\n\
    \   [IANA]           Narten, T. and H. Alvestrand, \"Guidelines for\n        \
    \            Writing an IANA Considerations Section in RFCs\", BCP\n         \
    \           26, RFC 2434, October 1998.\n   [IEEE_802.1]     ISO/IEC 15802-3:\
    \ 1998 ANSI/IEEE Std 802.1D, 1998\n                    Edition (Revision and redesignation\
    \ of ISO/IEC\n                    10038:98.\n   [LDP]            Andersson, L.,\
    \ Doolan, D., Feldman, N., Fredette, A.\n                    and B. Thomas, \"\
    LDP Specification\", RFC 3036,\n                    January 2001.\n   [MPLS_ARCH]\
    \      Rosen, E., Viswanathan, A. and R. Callon,\n                    \"Multiprotocol\
    \ Label Switching Architecture\", RFC\n                    3031, January 2001.\n\
    \   [MPLS_ATM]       Davie, B., Lawrence, J., McCloghrie, K., Rosen, E.,\n   \
    \                 Swallow, G., Rekhter, Y. and P. Doolan, \"MPLS using\n     \
    \               LDP and ATM VC Switching\", RFC 3035, January 2001.\n   [MPLS_ENCAPS]\
    \    Rosen, E., Tappan, D., Fedorkow, G., Rekhter, Y.,\n                    Farinacci,\
    \ D., Li, T. and A. Conta, \"MPLS Label\n                    Stack Encoding\"\
    , RFC 3032, January 2001.\n   [MPLS_FR]        Conta, A., Doolan, P. and A. Malis,\
    \ \"Use of Label\n                    Switching on Frame Relay Networks Specification\"\
    ,\n                    RFC 3034, January 2001.\n   [MPLS_VPN]       Rosen, E.,\
    \ \"BGP/MPLS VPNs\", Work in Progress.\n   [NULL]           Bernet, Y., Smith,\
    \ A. and B. Davie, \"Specification\n                    of the Null Service Type\"\
    , RFC 2997, November 2000.\n   [PHBID]          Black, D., Brim, S., Carpenter,\
    \ B. and F. Le\n                    Faucheur, \"Per Hop Behavior Identification\
    \ Codes\"\n                    RFC 3140, June 2001.\n   [RSVP]           Braden,\
    \ R., Zhang, L., Berson, S., Herzog, S. and S.\n                    Jamin, \"\
    Resource ReSerVation Protocol (RSVP) -\n                    Version 1 Functional\
    \ Specification\", RFC 2205,\n                    September 1997.\n   [RSVP_MPLS_TE]\
    \   Awduche, D., Berger, L., Gan, D., Li, T.,\n                    Srinivasan,\
    \ V. and G. Swallow, \"Extensions to RSVP\n                    for LSP Tunnels\"\
    , RFC 3209, December 2001.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Francois Le Faucheur\n   Cisco Systems\n   Village d'Entreprise\
    \ Green Side - Batiment T3\n   400, Avenue de Roumanille\n   06410 Biot-Sophia\
    \ Antipolis\n   France\n   Phone: +33 4 97 23 26 19\n   EMail: flefauch@cisco.com\n\
    \   Liwen Wu\n   Cisco Systems\n   3550 Cisco Way\n   San Jose, CA 95134\n   USA\n\
    \   Phone: +1 (408) 853-4065\n   EMail: liwwu@cisco.com\n   Bruce Davie\n   Cisco\
    \ Systems\n   250 Apollo Drive, Chelmsford, MA 01824\n   USA\n   Phone: +1 (978)\
    \ 244-8000\n   EMail: bsd@cisco.com\n   Shahram Davari\n   PMC-Sierra Inc.\n \
    \  411 Legget Drive\n   Kanata, Ontario K2K 3C9\n   Canada\n   Phone: +1 (613)\
    \ 271-4018\n   EMail: davari@ieee.org\n   Pasi Vaananen\n   Nokia\n   3 Burlington\
    \ Woods Drive, Suit 250\n   Burlington, MA 01803\n   USA\n   Phone +1 (781) 993-4900\n\
    \   EMail: pasi.vaananen@nokia.com\n   Ram Krishnan\n   Axiowave Networks\n  \
    \ 200 Nickerson Road\n   Marlboro, MA 01752\n   EMail: ram@axiowave.com\n   Pierrick\
    \ Cheval\n   Alcatel\n   5 rue Noel-Pons\n   92737 Nanterre Cedex\n   France\n\
    \   EMail: pierrick.cheval@space.alcatel.fr\n   Juha Heinanen\n   Song Networks,\
    \ Inc.\n   Hallituskatu 16\n   33200 Tampere, Finland\n   EMail: jh@song.fi\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2002).  All\
    \ Rights Reserved.\n   This document and translations of it may be copied and\
    \ furnished to\n   others, and derivative works that comment on or otherwise explain\
    \ it\n   or assist in its implementation may be prepared, copied, published\n\
    \   and distributed, in whole or in part, without restriction of any\n   kind,\
    \ provided that the above copyright notice and this paragraph are\n   included\
    \ on all such copies and derivative works.  However, this\n   document itself\
    \ may not be modified in any way, such as by removing\n   the copyright notice\
    \ or references to the Internet Society or other\n   Internet organizations, except\
    \ as needed for the purpose of\n   developing Internet standards in which case\
    \ the procedures for\n   copyrights defined in the Internet Standards process\
    \ must be\n   followed, or as required to translate it into languages other than\n\
    \   English.\n   The limited permissions granted above are perpetual and will\
    \ not be\n   revoked by the Internet Society or its successors or assigns.\n \
    \  This document and the information contained herein is provided on an\n   \"\
    AS IS\" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING\n   TASK FORCE\
    \ DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING\n   BUT NOT LIMITED\
    \ TO ANY WARRANTY THAT THE USE OF THE INFORMATION\n   HEREIN WILL NOT INFRINGE\
    \ ANY RIGHTS OR ANY IMPLIED WARRANTIES OF\n   MERCHANTABILITY OR FITNESS FOR A\
    \ PARTICULAR PURPOSE.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
