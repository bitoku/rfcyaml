- title: __initial_text__
  contents:
  - "       Multicast Listener Extensions for Mobile IPv6 (MIPv6) and\n          \
    \     Proxy Mobile IPv6 (PMIPv6) Fast Handovers\n"
- title: Abstract
  contents:
  - "Abstract\n   Fast handover protocols for Mobile IPv6 (MIPv6) and Proxy Mobile\
    \ IPv6\n   (PMIPv6) define mobility management procedures that support unicast\n\
    \   communication at reduced handover latency.  Fast handover base\n   operations\
    \ do not affect multicast communication and, hence, do not\n   accelerate handover\
    \ management for native multicast listeners.  Many\n   multicast applications\
    \ like IPTV or conferencing, though, comprise\n   delay-sensitive, real-time traffic\
    \ and will benefit from fast\n   handover completion.  This document specifies\
    \ extension of the Mobile\n   IPv6 Fast Handovers (FMIPv6) and the Fast Handovers\
    \ for Proxy Mobile\n   IPv6 (PFMIPv6) protocols to include multicast traffic management\
    \ in\n   fast handover operations.  This multicast support is provided first\n\
    \   at the control plane by management of rapid context transfer between\n   access\
    \ routers and second at the data plane by optional fast traffic\n   forwarding\
    \ that may include buffering.  An FMIPv6 access router\n   indicates support for\
    \ multicast using an updated Proxy Router\n   Advertisements message format.\n\
    \   This document updates RFC 5568, \"Mobile IPv6 Fast Handovers\".\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for examination, experimental implementation, and\n   evaluation.\n\
    \   This document defines an Experimental Protocol for the Internet\n   community.\
    \  This document is a product of the Internet Engineering\n   Task Force (IETF).\
    \  It represents the consensus of the IETF\n   community.  It has received public\
    \ review and has been approved for\n   publication by the Internet Engineering\
    \ Steering Group (IESG).  Not\n   all documents approved by the IESG are a candidate\
    \ for any level of\n   Internet Standard; see Section 2 of RFC 5741.\n   Information\
    \ about the current status of this document, any errata,\n   and how to provide\
    \ feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7411.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n\
    \      1.1. Use Cases and Deployment Scenarios .........................5\n  \
    \ 2. Terminology .....................................................6\n   3.\
    \ Protocol Overview ...............................................6\n      3.1.\
    \ Multicast Context Transfer between Access Routers ..........7\n      3.2. Protocol\
    \ Operations Specific to FMIPv6 .....................9\n      3.3. Protocol Operations\
    \ Specific to PFMIPv6 ...................12\n   4. Protocol Details ...............................................15\n\
    \      4.1. Protocol Operations Specific to FMIPv6 ....................15\n  \
    \         4.1.1. Operations of the Mobile Node ......................15\n    \
    \       4.1.2. Operations of the Previous Access Router ...........15\n      \
    \     4.1.3. Operations of the New Access Router ................16\n        \
    \   4.1.4. Buffering Considerations ...........................17\n      4.2.\
    \ Protocol Operations Specific to PFMIPv6 ...................17\n           4.2.1.\
    \ Operations of the Mobile Node ......................17\n           4.2.2. Operations\
    \ of the Previous MAG .....................17\n           4.2.3. Operations of\
    \ the New MAG ..........................19\n           4.2.4. IPv4 Support Considerations\
    \ ........................20\n   5. Message Formats ................................................20\n\
    \      5.1. Multicast Indicator for Proxy Router Advertisement\n           (PrRtAdv)\
    \ .................................................20\n      5.2. Extensions to\
    \ Existing Mobility Header Messages ...........21\n      5.3. New Multicast Mobility\
    \ Option .............................21\n      5.4. New Multicast Acknowledgement\
    \ Option ......................24\n      5.5. Length Considerations: Number of\
    \ Records and Addresses ....25\n      5.6. MLD and IGMP Compatibility Requirements\
    \ ...................25\n   6. Security Considerations ........................................26\n\
    \   7. IANA Considerations ............................................26\n  \
    \ 8. References .....................................................26\n    \
    \  8.1. Normative References ......................................26\n      8.2.\
    \ Informative References ....................................27\n   Appendix A.\
    \  Considerations for Mobile Multicast Sources ..........29\n   Acknowledgments\
    \ ...................................................29\n   Authors' Addresses\
    \ ................................................30\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Mobile IPv6 [RFC6275] defines a network-layer mobility protocol\n\
    \   involving participation by Mobile Nodes, while Proxy Mobile IPv6\n   [RFC5213]\
    \ provides a mechanism without requiring mobility protocol\n   operations at a\
    \ Mobile Node (MN).  Both protocols introduce traffic\n   disruptions on handovers\
    \ that may be intolerable in many real-time\n   application scenarios such as\
    \ gaming or conferencing.  Mobile IPv6\n   Fast Handovers (FMIPv6) [RFC5568] and\
    \ Fast Handovers for Proxy Mobile\n   IPv6 (PFMIPv6) [RFC5949] improve the performance\
    \ of handovers for\n   unicast communication.  Delays are reduced to the order\
    \ of the\n   maximum of the link switching delay and the signaling delay between\n\
    \   Access Routers (ARs) or Mobile Access Gateways (MAGs)\n   [FMIPv6-Analysis].\n\
    \   No dedicated treatment of seamless IP multicast [RFC1112] data\n   service\
    \ has been proposed by any of the above protocols.  MIPv6 only\n   roughly defines\
    \ multicast for Mobile Nodes using a remote\n   subscription approach or a home\
    \ subscription through bidirectional\n   tunneling via the Home Agent (HA).  Multicast\
    \ forwarding services\n   have not been specified in [RFC5213] but are subject\
    \ to separate\n   specifications: [RFC6224] and [RFC7287].  It is assumed throughout\n\
    \   this document that mechanisms and protocol operations are in place to\n  \
    \ transport multicast traffic to ARs.  These operations are referred to\n   as\
    \ 'JOIN/LEAVE' of an AR, while the explicit techniques to manage\n   multicast\
    \ transmission are beyond the scope of this document.\n   Mobile multicast protocols\
    \ need to support applications such as IPTV\n   with high-volume content streams\
    \ and allow distribution to\n   potentially large numbers of receivers.  They\
    \ should thus preserve\n   the multicast nature of packet distribution and approximate\
    \ optimal\n   routing [RFC5757].  It is undesirable to rely on home tunneling\
    \ for\n   optimizing multicast.  Unencapsulated, native multicast transmission\n\
    \   requires establishing forwarding state, which will not be transferred\n  \
    \ between access routers by the unicast fast handover protocols.  Thus,\n   multicast\
    \ traffic will not experience expedited handover performance,\n   but an MN --\
    \ or its corresponding MAG in PMIPv6 -- can perform remote\n   subscriptions in\
    \ each visited network.\n   This document specifies extensions to FMIPv6 and PFMIPv6\
    \ that include\n   multicast traffic management for fast handover operations in\
    \ the\n   presence of any-source or source-specific multicast.  The protocol\n\
    \   extensions were designed under the requirements that\n   o  multicast context\
    \ transfer shall be transparently included in\n      unicast fast handover operations;\n\
    \   o  neither unicast mobility protocols nor multicast routing shall be\n   \
    \   modified or otherwise affected; and\n   o  no active participation of MNs\
    \ in PMIPv6 domains is defined.\n   The solution common to both underlying unicast\
    \ protocols defines the\n   per-group or per-channel transfer of multicast contexts\
    \ between ARs\n   or MAGs.  The protocol defines corresponding message extensions\n\
    \   necessary for carrying (*,G) or (S,G) context information independent\n  \
    \ of the particular handover protocol.  ARs or MAGs are then enabled to\n   treat\
    \ multicast traffic according to fast unicast handovers and with\n   similar performance.\
    \  No protocol changes are introduced that prevent\n   a multicast-unaware node\
    \ from performing fast handovers with\n   multicast-aware ARs or MAGs.\n   The\
    \ specified mechanisms apply when a Mobile Node has joined and\n   maintains one\
    \ or several multicast group subscriptions prior to\n   undergoing a fast handover.\
    \  It does not introduce any requirements\n   on the multicast routing protocols\
    \ in use, nor are the ARs or MAGs\n   assumed to be multicast routers.  It assumes\
    \ network conditions,\n   though, that allow native multicast reception in both\
    \ the previous\n   and new access network.  Methods to bridge regions without\
    \ native\n   multicast connectivity are beyond the scope of this document.\n \
    \  Section 5.1 of this memo updates the Proxy Router Advertisements\n   (PrRtAdv)\
    \ message format defined in Section 6.1.2 of [RFC5568] to\n   allow an FMIPv6\
    \ AR to indicate support for multicast.\n"
- title: 1.1.  Use Cases and Deployment Scenarios
  contents:
  - "1.1.  Use Cases and Deployment Scenarios\n   Multicast extensions for fast handovers\
    \ enable multicast services in\n   domains that operate either of the unicast\
    \ fast handover protocols:\n   [RFC5568] or [RFC5949].  Typically, fast handover\
    \ protocols are\n   activated within an operator network or within a dedicated\
    \ service\n   installation.\n   Multicast group communication has a variety of\
    \ dominant use cases.\n   One traditional application area is infotainment with\
    \ voluminous\n   multimedia streams delivered to a large number of receivers (e.g.,\n\
    \   IPTV).  Other time-critical services, such as news items or stock-\n   exchange\
    \ prices, are commonly transmitted via multicast to support\n   fair and fast\
    \ updates.  Both of these use cases may be mobile, and\n   both largely benefit\
    \ from fast handover operations.  Mobile operators\n   may therefore enhance their\
    \ operational quality or offer premium\n   services by enabling fast handovers.\n\
    \   Another traditional application area for multicast is conversational\n   group\
    \ communication in scenarios like conferencing or gaming as well\n   as in dedicated\
    \ collaborative environments or teams.  Machine-to-\n   machine communication\
    \ in the emerging Internet of Things is expected\n   to generate various additional\
    \ mobile use cases (e.g., among cars).\n   High demands on transmission quality\
    \ and rapidly moving parties may\n   require fast handovers.\n   Most of the deployment\
    \ scenarios above are bound to a fixed\n   infrastructure with consumer equipment\
    \ at the edge.  Today, they are\n   thus likely to follow an operator-centric\
    \ approach like PFMIPv6.\n   However, Internet technologies evolve for adoption\
    \ in\n   infrastructureless scenarios, for example, disaster recovery, rescue,\n\
    \   crisis prevention, and civil safety.  Mobile end-to-end communication\n  \
    \ in groups is needed in Public Protection and Disaster Relief (PPDR)\n   scenarios,\
    \ where mobile multicast communication needs to be supported\n   between members\
    \ of rescue teams, police officers, fire brigade teams,\n   paramedic teams, and\
    \ command control offices in order to support the\n   protection and health of\
    \ citizens.  These use cases require fast and\n   reliable mobile services that\
    \ cannot rely on operator infrastructure.\n   They are thus expected to benefit\
    \ from running multicast with FMIPv6.\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\"\
    , \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and\
    \ \"OPTIONAL\" in this\n   document are to be interpreted as described in RFC\
    \ 2119 [RFC2119].\n   This document uses the terminology for mobility entities\
    \ in\n   [RFC5568], [RFC5949], [RFC6275], and [RFC5213].\n   A multicast group\
    \ is any group (*,G) or (S,G) multicast channel\n   listed in a Multicast Listener\
    \ Report Message.\n"
- title: 3.  Protocol Overview
  contents:
  - "3.  Protocol Overview\n   This section provides an informative overview of the\
    \ protocol\n   mechanisms without normative specifications.\n   The reference\
    \ scenario for multicast fast handover is illustrated in\n   Figure 1.  A Mobile\
    \ Node is initially attached to the previous access\n   network (P-AN) via the\
    \ Previous Access Router (PAR) or Previous\n   Mobile Access Gateway (PMAG) and\
    \ moves to the new access network\n   (N-AN) connected via a New AR (NAR) or New\
    \ MAG (NMAG).\n                             ***  ***  ***  ***\n             \
    \               *   **   **   **   *\n                           *           \
    \         *\n                            *  Multicast Cloud *\n              \
    \             *                    *\n                            *   **   **\
    \   **   *\n                             ***  ***  ***  ***\n                \
    \                  /      \\\n                                 /        \\\n \
    \                               /          \\\n                    +........../..+\
    \      +..\\..........+\n                    . +-------+-+ .______. +-+-------+\
    \ .\n                    . |   PAR   |()_______)|   NAR   | .\n              \
    \      . |  (PMAG) | .      . |  (NMAG) | .\n                    . +----+----+\
    \ .      . +----+----+ .\n                    .      |      .      .      |  \
    \    .\n                    .   ___|___   .      .   ___|___   .\n           \
    \         .  /       \\  .      .  /       \\  .\n                    . (  P-AN\
    \   ) .      . (  N-AN   ) .\n                    .  \\_______/  .      .  \\\
    _______/  .\n                    .      |      .      .      |      .\n      \
    \              .   +----+    .      .   +----+    .\n                    .   |\
    \ MN |  ---------->  | MN |    .\n                    .   +----+    .      . \
    \  +----+    .\n                    +.............+      +.............+\n   \
    \            Figure 1: Reference Network for Fast Handover\n"
- title: 3.1.  Multicast Context Transfer between Access Routers
  contents:
  - "3.1.  Multicast Context Transfer between Access Routers\n   In a fast handover\
    \ scenario (see Figure 1), ARs/MAGs establish a\n   mutual binding and provide\
    \ the capability to exchange context\n   information concerning the MN.  This\
    \ context transfer will be\n   triggered by detecting the forthcoming movement\
    \ of an MN to a new AR\n   and assists the MN to immediately resume communication\
    \ on the new\n   subnet using its previous IP address.  In contrast to unicast,\n\
    \   multicast flow reception does not primarily depend on address and\n   binding\
    \ cache management but requires distribution trees to adapt so\n   that traffic\
    \ follows the movement of the MN.  This process may be\n   significantly slower\
    \ than fast handover management [RFC5757].  To\n   accelerate the handover, a\
    \ multicast listener may offer a twofold\n   advantage of including the multicast\
    \ groups under subscription in the\n   context transfer.  First, the NAR can proactively\
    \ join the subscribed\n   groups as soon as it gains knowledge of them.  Second,\
    \ multicast\n   flows can be included in traffic forwarding via the tunnel that\
    \ is\n   established from the PAR to the NAR by the unicast fast handover\n  \
    \ protocol.\n   There are two modes of operation in FMIPv6 and in PFMIPv6.  The\n\
    \   predictive mode allows for AR-binding and context transfer prior to\n   an\
    \ MN handover, while in the reactive mode, these steps are executed\n   after\
    \ detection that the MN has reattached to a NAR (NMAG).  Details\n   of the signaling\
    \ schemes differ between FMIPv6 and PFMIPv6 and are\n   outlined in Sections 3.2\
    \ and 3.3.\n   In a predictive fast handover, the access router (i.e., PAR (PMAG)\
    \ in\n   Figure 1) learns about the impending movement of the MN and\n   simultaneously\
    \ about the multicast group context as specified in\n   Sections 3.2 and 3.3.\
    \  Thereafter, the PAR will initiate an AR-\n   binding and context transfer by\
    \ transmitting a Handover Initiation\n   (HI) message to the NAR (NMAG).  The\
    \ HI message is extended by\n   multicast group states carried in mobility header\
    \ options, as defined\n   in Section 5.3.  On reception of the HI message, the\
    \ NAR returns a\n   multicast acknowledgement in its Handover Acknowledgement\
    \ (HAck)\n   answer that indicates its ability to support each requested group\n\
    \   (see Section 5.4).  The NAR (NMAG) expresses its willingness to\n   receive\
    \ multicast traffic forwarded by the PAR using standard\n   Multicast Listener\
    \ Discovery (MLD) signaling for IPv6 or the Internet\n   Group Management Protocol\
    \ (IGMP) for an IPv4 compatibility case.\n   Nodes normally create forwarding\
    \ state for each group requested.\n   There are several reasons why a node may\
    \ decide not to forward a\n   specific group, e.g., the NAR could already have\
    \ a native\n   subscription for the group(s) or capacity constraints can hinder\n\
    \   decapsulation of additional streams.  At the previous network, there\n   may\
    \ be policy or capacity constraints that make it undesirable to\n   forward the\
    \ multicast traffic.  The PAR can add the tunnel interface\n   obtained from the\
    \ underlying unicast protocol to its multicast\n   forwarding database for those\
    \ groups the MN wishes to receive, so\n   that multicast flows can be forwarded\
    \ in parallel to the unicast\n   traffic.\n   The NAR implements an MLD proxy\
    \ [RFC4605] providing host-side\n   behavior towards the upstream PAR.  The proxy\
    \ will submit an MLD\n   report to the upstream tunnel interface to signal the\
    \ set of groups\n   to be forwarded.  It will terminate multicast forwarding from\
    \ the\n   tunnel when the group is natively received.  In parallel, the NAR\n\
    \   joins all groups that are not already under subscription using its\n   native\
    \ multicast upstream interface.  While the MN has not arrived at\n   a downstream\
    \ interface of the NAR, multicast subscriptions on behalf\n   of the MN are associated\
    \ with a downstream loopback interface.\n   Reception of the Join at the NAR enables\
    \ downstream native multicast\n   forwarding of the subscribed group(s).\n   In\
    \ a reactive fast handover, the PAR will learn about the movement of\n   the MN\
    \ after the latter has re-associated with the new access\n   network.  Also, from\
    \ the new link, it will be informed about the\n   multicast context of the MN.\
    \  As group membership information is\n   present at the new access network prior\
    \ to context transfer, MLD join\n   signaling can proceed in parallel to HI/HAck\
    \ exchange.  Following the\n   context transfer, multicast data can be forwarded\
    \ to the new access\n   network using the PAR-NAR tunnel of the fast handover\
    \ protocol.\n   Depending on the specific network topology, multicast traffic\
    \ for\n   some groups may natively arrive before it is forwarded from the PAR.\n\
    \   In both modes of operation, it is the responsibility of the PAR\n   (PMAG)\
    \ to properly apply multicast state management when an MN leaves\n   (i.e., to\
    \ determine whether it can prune the traffic for any\n   unsubscribed group).\
    \  Depending on the link type and MLD parameter\n   settings, methods for observing\
    \ the departure of an MN need to be\n   applied (see [RFC5757]).  While considering\
    \ subscriptions of the\n   remaining nodes and from the tunnel interfaces, the\
    \ PAR uses normal\n   multicast forwarding rules to determine whether multicast\
    \ traffic can\n   be pruned.\n   This method allows an MN to participate in multicast\
    \ group\n   communication with a handover performance that is comparable to\n\
    \   unicast handover.  It is worth noting that tunnel management between\n   access\
    \ routers in all modes is inherited from the corresponding\n   unicast fast handover\
    \ protocols.  Tunnels thus remain active until\n   unicast handover operations\
    \ have been completed for the MN.\n"
- title: 3.2.  Protocol Operations Specific to FMIPv6
  contents:
  - "3.2.  Protocol Operations Specific to FMIPv6\n   ARs that provide multicast support\
    \ in FMIPv6 will advertise this\n   general service by setting an indicator bit\
    \ ('M' bit) in its PrRtAdv\n   message, as defined in Section 5.1.  Additional\
    \ details about the\n   multicast service support, e.g., flavors and groups, will\
    \ be\n   exchanged within HI/HAck dialogs later at handover.\n   An MN operating\
    \ FMIPv6 will actively initiate the handover management\n   by submitting a Fast\
    \ Binding Update (FBU).  The MN, which is aware of\n   the multicast groups it\
    \ wishes to maintain, will attach mobility\n   options containing its group states\
    \ (see Section 5.3) to the FBU and\n   thereby inform ARs about its multicast\
    \ context.  ARs will use these\n   multicast context options for inter-AR context\
    \ transfer.\n   In predictive mode, the FBU is issued on the previous link and\n\
    \   received by the PAR as displayed in Figure 2.  The PAR will extract\n   the\
    \ multicast context options and append them to its HI message.\n   From the HAck\
    \ message, the PAR will redistribute the multicast\n   acknowledgement by adding\
    \ the corresponding mobility options to its\n   Fast Binding ACK (FBack) message.\
    \  From receiving the FBack message,\n   the MN will learn about the multicast\
    \ support for each group in the\n   new access network.  If some groups or multicast\
    \ service models are\n   not supported, it can decide to take actions to overcome\
    \ a missing\n   service (e.g., by tunneling).  Note that the proactive multicast\n\
    \   context transfer may proceed successfully, even if the MN misses the\n   FBack\
    \ message on the previous link.\n            MN                    PAR       \
    \             NAR\n             |                     |                      |\n\
    \             |------RtSolPr------->|                      |\n             |<-----PrRtAdv--------|\
    \                      |\n             |                     |               \
    \       |\n             |                     |                      |\n     \
    \        |---------FBU-------->|----------HI--------->|\n             | (Multicast\
    \ MobOpt)  | (Multicast MobOpt)   |\n             |                     |    \
    \                  |\n             |                     |<--------HAck---------|\n\
    \             |                     | (Multicast AckOpt)   |\n             | \
    \                    |                   Join to\n             |             \
    \        |                  Multicast\n             |                     |  \
    \                 Groups\n             |                     |               \
    \       |\n             |       <-----FBack---|--FBack------>        |\n     \
    \        |  (Multicast AckOpt) | (Multicast AckOpt)   |\n             |      \
    \               |                      |\n          disconnect            optional\
    \                  |\n             |                   packet  ================>|\n\
    \             |                 forwarding                 |\n             | \
    \                    |                      |\n          connect             \
    \     |                      |\n             |                     |         \
    \             |\n             |------------UNA --------------------------->|\n\
    \             |<=================================== deliver packets\n        \
    \     |                                            |\n            Figure 2: Predictive\
    \ Multicast Handover for FMIPv6\n   The flow diagram for reactive mode is depicted\
    \ in Figure 3.  After\n   attaching to the new access link and performing an Unsolicited\n\
    \   Neighbor Advertisement (UNA), the MN issues an FBU that the NAR\n   forwards\
    \ to the PAR without processing.  At this time, the MN is able\n   to rejoin all\
    \ subscribed multicast groups without relying on AR\n   assistance.  Nevertheless,\
    \ multicast context options are exchanged in\n   the HI/HAck dialog to facilitate\
    \ intermediate forwarding of the\n   requested multicast flows.  The multicast\
    \ traffic could arrive from\n   an MN subscription at the same time that the NAR\
    \ receives the HI\n   message.  Such multicast flows may be transparently excluded\
    \ from\n   forwarding by setting an appropriate Multicast Acknowledgement\n  \
    \ Option.  In either case, to avoid duplication, the NAR MUST ensure\n   that\
    \ not more than one flow of the same group is forwarded to the MN.\n         \
    \    MN                    PAR                    NAR\n              |       \
    \              |                      |\n              |------RtSolPr------->|\
    \                      |\n              |<-----PrRtAdv--------|              \
    \        |\n              |                     |                      |\n   \
    \        disconnect               |                      |\n              |  \
    \                   |                      |\n              |                \
    \     |                      |\n           connect                  |        \
    \              |\n              |-------UNA-----------|--------------------->|\n\
    \              |-------FBU-----------|---------------------)|\n              |\
    \ (Multicast MobOpt)  |<-------FBU----------)|\n              |              \
    \       |                      |\n           Join to                  |      \
    \                |\n          Multicast                 |                    \
    \  |\n           Groups                   |                      |\n         \
    \     |                     |----------HI--------->|\n              |        \
    \             |  (Multicast MobOpt)  |\n              |                     |<-------HAck----------|\n\
    \              |                     |  (Multicast AckOpt)  |\n              |\
    \                     |                      |\n              |              \
    \       |(HI/HAck if necessary)|\n              |                     |      \
    \                |\n              |              FBack, optional             \
    \  |\n              |              packet forwarding  ==========>|\n         \
    \     |                     |                      |\n              |<===================================\
    \ deliver packets\n              |                                           \
    \ |\n             Figure 3: Reactive Multicast Handover for FMIPv6\n"
- title: 3.3.  Protocol Operations Specific to PFMIPv6
  contents:
  - "3.3.  Protocol Operations Specific to PFMIPv6\n   In a proxy mobile IPv6 environment,\
    \ the MN remains agnostic of\n   network layer changes, and fast handover procedures\
    \ are operated by\n   the access routers or MAGs to which MNs are connected via\
    \ node-\n   specific point-to-point links.  The handover initiation, or the re-\n\
    \   association, is managed by the access networks.  Consequently, access\n  \
    \ routers need to be aware of multicast membership state at the Mobile\n   Node.\
    \  There are two ways to obtain the multicast membership of an\n   MN.\n   o \
    \ MAGs may perform explicit tracking (see [RFC4605] and [RFC6224])\n      or extract\
    \ membership status from forwarding states at node-\n      specific links.\n \
    \  o  routers can issue a general MLD query at handovers.  Both methods\n    \
    \  are equally applicable.  However, a router that does not provide\n      explicit\
    \ membership tracking needs to query its downstream links\n      after a handover.\
    \  The MLD membership information then allows the\n      PMAG to learn the multicast\
    \ group subscriptions of the MN.\n   In predictive mode, the PMAG will learn about\
    \ the upcoming movement\n   of the Mobile Node, including its new Access Point\
    \ Identifier (New AP\n   ID).  Without explicit tracking, it will immediately\
    \ submit a general\n   MLD query and receive MLD reports indicating the multicast\
    \ address\n   listening state of the subscribed group(s).  As displayed in\n \
    \  Figure 4, it will initiate binding and context transfer with the NMAG\n   by\
    \ issuing a HI message that is augmented by multicast contexts in\n   the mobility\
    \ options defined in Section 5.3.  NMAG will extract\n   multicast context information\
    \ and act as described in Section 3.1.\n                                     \
    \          PMAG          NMAG\n           MN           P-AN       N-AN       \
    \ (PAR)         (NAR)\n           |             |          |            |    \
    \         |\n           |    Report   |          |            |             |\n\
    \           |---(MN ID,-->|          |            |             |\n          \
    \ |  New AP ID) |          |            |             |\n           |        \
    \     |    HO Indication      |             |\n           |             |--(MN\
    \ ID, New AP ID)-->|             |\n           |             |          |    \
    \        |             |\n           |             |          |         Optional:\
    \        |\n           |             |          |         MLD Query        |\n\
    \           |             |          |            |             |\n          \
    \ |             |          |            |------HI---->|\n           |        \
    \     |          |            |(Multicast MobOpt)\n           |             |\
    \          |            |             |\n           |             |          |\
    \            |<---HAck-----|\n           |             |          |          \
    \  |(Multicast AckOpt)\n           |             |          |            |   \
    \          |\n           |             |          |            |          Join\
    \ to\n           |             |          |            |         Multicast\n \
    \          |             |          |            |          Groups\n         \
    \  |             |          |            |             |\n           |       \
    \      |          |            |HI/HAck(optional)\n           |             |\
    \          |            |<- - - - - ->|\n           |             |          |\
    \            |             |\n           |             |          |     optional\
    \ packet      |\n           |             |          |       forwarding =======>|\n\
    \       disconnect        |          |            |             |\n          \
    \ |             |          |            |             |\n        connect     \
    \     |          |            |             |\n           |    MN-AN connection\
    \    |    AN-MAG connection     |\n           |<----establishment----->|<----establishment------->|\n\
    \           |             |          |  (substitute for UNA)    |\n          \
    \ |             |          |            |             |\n           |<==========================================\
    \ deliver packets\n           |             |          |            |        \
    \     |\n            Figure 4: Predictive Multicast Handover for PFMIPv6\n   In\
    \ reactive mode, the NMAG will learn the attachment of the MN to the\n   N-AN\
    \ and establish connectivity using the PMIPv6 protocol operations.\n   However,\
    \ it will have no knowledge about multicast state at the MN.\n   Triggered by\
    \ an MN attachment, the NMAG will send a general MLD query\n   and thereafter\
    \ join the groups for which it receives multicast\n   listener report messages.\
    \  In the case of a reactive handover, the\n   binding is initiated by the NMAG,\
    \ and the HI/HAck message semantic is\n   inverted (see [RFC5949]).  For multicast\
    \ context transfer, the NMAG\n   attaches to its HI message those group identifiers\
    \ it requests to be\n   forwarded from PMAG.  Using the identical syntax in its\
    \ Multicast\n   Mobility Option headers, as defined in Section 5.4, the PMAG\n\
    \   acknowledges the set of requested groups in a HAck answer, indicating\n  \
    \ the group(s) it is willing to forward.  The corresponding call flow\n   is displayed\
    \ in Figure 5.\n                                             PMAG          NMAG\n\
    \           MN         P-AN       N-AN        (PAR)         (NAR)\n          \
    \ |           |          |            |             |\n       disconnect     \
    \ |          |            |             |\n           |           |          |\
    \            |             |\n        connect        |          |            |\
    \             |\n           |           |          |            |            \
    \ |\n           |   MN-AN connection   |    AN-MAG connection     |\n        \
    \   |<---establishment---->|<----establishment------->|\n           |        \
    \   |          |(substitute for UNA & FBU)|\n           |           |        \
    \  |            |             |\n           |           |          |         \
    \   |         MLD Query\n           |           |          |            |    \
    \         |\n           |           |          |            |          Join to\n\
    \           |           |          |            |         Multicast\n        \
    \   |           |          |            |          Groups\n           |      \
    \     |          |                          |\n           |           |      \
    \    |            |<------HI----|\n           |           |          |       \
    \     |(Multicast MobOpt)\n           |           |          |            |  \
    \           |\n           |           |          |            |---HAck----->|\n\
    \           |           |          |            |(Multicast AckOpt)\n        \
    \   |           |          |            |             |\n           |        \
    \   |          |            |             |\n           |           |        \
    \  |            |HI/HAck(optional)\n           |           |          |      \
    \      |<- - - - - ->|\n           |           |          |            |     \
    \        |\n           |           |          |    optional packet       |\n \
    \          |           |          |       forwarding =======>|\n           | \
    \          |          |            |             |\n           |<========================================\
    \ deliver packets\n           |           |          |            |          \
    \   |\n             Figure 5: Reactive Multicast Handover for PFMIPv6\n"
- title: 4.  Protocol Details
  contents:
  - "4.  Protocol Details\n   This section provides a normative definition of the\
    \ protocol\n   operations.\n"
- title: 4.1.  Protocol Operations Specific to FMIPv6
  contents:
  - '4.1.  Protocol Operations Specific to FMIPv6

    '
- title: 4.1.1.  Operations of the Mobile Node
  contents:
  - "4.1.1.  Operations of the Mobile Node\n   A Mobile Node willing to manage multicast\
    \ traffic by fast handover\n   operations MUST transfer its MLD listener state\
    \ records within fast\n   handover negotiations.\n   When sensing a handover in\
    \ predictive mode, an MN MUST build a\n   Multicast Mobility Option, as described\
    \ in Section 5.3, that contains\n   the MLD or IGMP multicast listener state and\
    \ append it to the Fast\n   Binding Update (FBU) prior to signaling with PAR.\n\
    \   The MN will receive the Multicast Acknowledgement Option(s) as a part\n  \
    \ of the Fast Binding Acknowledge (FBack) (see Section 5.4) and learn\n   about\
    \ unsupported or prohibited groups at the NAR.  The MN MAY take\n   appropriate\
    \ actions such as home tunneling to enable reception of\n   groups that are not\
    \ available via the NAR.  Beyond standard FMIPv6\n   signaling, no multicast-specific\
    \ operation is required by the MN when\n   reattaching in the new network.\n \
    \  In reactive mode, the MN MUST append the identical Multicast Mobility\n   Option\
    \ to the FBU sent after its reconnect.  In response, it will\n   learn about the\
    \ Multicast Acknowledgement Option(s) from the FBack\n   and expect corresponding\
    \ multicast data.  Concurrently, it joins all\n   subscribed multicast groups\
    \ directly on its newly established access\n   link.\n"
- title: 4.1.2.  Operations of the Previous Access Router
  contents:
  - "4.1.2.  Operations of the Previous Access Router\n   A PAR that supports multicast\
    \ advertises that support by setting the\n   'M' bit in the Proxy Router Advertisement\
    \ (PrRtAdv) message, as\n   specified in Section 5.1 of this document.  This indicator\n\
    \   exclusively informs the MNs about the capability of the PAR to\n   process\
    \ and exchange Multicast Mobility Options during fast handover\n   operations.\n\
    \   In predictive mode, a PAR will receive the multicast listener state\n   of\
    \ an MN prior to handover from the Multicast Mobility Option\n   appended to the\
    \ FBU.  It forwards these records to the NAR within HI\n   messages and will expect\
    \ Multicast Acknowledgement Option(s) in a\n   HAck, which is itself returned\
    \ to the MN as an appendix to the FBack.\n   In performing the multicast context\
    \ exchange, the PAR is instructed\n   to include the PAR-to-NAR tunnel obtained\
    \ from unicast handover\n   management in its multicast downstream interfaces\
    \ and awaits\n   reception of multicast listener report messages from the NAR.\
    \  In\n   response to receiving multicast subscriptions, the PAR SHOULD forward\n\
    \   group data acting as a regular multicast router or proxy.  However,\n   the\
    \ PAR MAY refuse to forward some or all of the multicast flows\n   (e.g., due\
    \ to administrative configurations or load conditions).\n   In reactive mode,\
    \ the PAR will receive the FBU augmented by the\n   Multicast Mobility Option\
    \ from the new network but continues with an\n   identical multicast record exchange\
    \ in the HI/HAck dialog.  As in the\n   predictive case, it configures the PAR-to-NAR\
    \ tunnel for the\n   multicast downstream.  It then (if capable) forwards data\
    \ according\n   to the group membership indicated in the multicast listener report\n\
    \   messages received from NAR.\n   In both modes, the PAR MUST interpret the\
    \ first of the two events --\n   the departure of the MN or the reception of the\
    \ Multicast\n   Acknowledgement Option(s) -- as if the MN had sent a multicast\
    \ LEAVE\n   message and react according to the signaling scheme deployed in the\n\
    \   access network (i.e., MLD querying, explicit tracking).\n"
- title: 4.1.3.  Operations of the New Access Router
  contents:
  - "4.1.3.  Operations of the New Access Router\n   A NAR that supports multicast\
    \ advertises that support by setting the\n   'M' bit in PrRtAdv as specified in\
    \ Section 5.1 of this document.\n   This indicator exclusively serves the purpose\
    \ of informing MNs about\n   the capability of the NAR to process and exchange\
    \ Multicast Mobility\n   Options during fast handover operations.\n   In predictive\
    \ mode, a NAR will receive the multicast listener state\n   of an expected MN\
    \ from the Multicast Mobility Option appended to the\n   HI message.  It will\
    \ extract the multicast group membership records\n   from the message and match\
    \ the request subscription with its\n   multicast service offer.  Further on,\
    \ it will join the requested\n   groups using a downstream loopback interface.\
    \  This will lead to\n   suitable regular subscriptions to a native multicast\
    \ upstream\n   interface without additional forwarding.  Concurrently, the NAR\n\
    \   builds a Multicast Acknowledgement Option(s) (see Section 5.4)\n   listing\
    \ the set of groups that are unsupported on the new access link\n   and returns\
    \ this list within a HAck.  As soon as there is an\n   operational bidirectional\
    \ tunnel from the PAR to NAR, the NAR joins\n   the groups requested by the MN,\
    \ which are then forwarded by the PAR\n   using the tunnel link.\n   In reactive\
    \ mode, the NAR will learn about the multicast listener\n   state of a new MN\
    \ from the Multicast Mobility Option appended to each\n   HI message after the\
    \ MN has already performed local subscriptions of\n   the multicast service. \
    \ Thus, the NAR solely determines the\n   intersection of requested and supported\
    \ groups and issues a join\n   request for each group forwarding this on the PAR-NAR\
    \ tunnel\n   interface.\n   In both modes, the NAR MUST send a LEAVE message to\
    \ the tunnel when\n   it is no longer needed to forward a group, e.g., after arrival\
    \ of\n   native multicast traffic or termination of a group membership from\n\
    \   the MN.  Although the message can be delayed, immediately sending the\n  \
    \ LEAVE message eliminates the need for the PAR and NAR to process\n   traffic\
    \ that is not to be forwarded.\n"
- title: 4.1.4.  Buffering Considerations
  contents:
  - "4.1.4.  Buffering Considerations\n   Multicast packets may be lost during handover.\
    \  For example, in\n   predictive mode, as illustrated by Figure 2, packets may\
    \ be lost\n   while the MN is -- already or still -- detached from the networks,\n\
    \   even though they are forwarded to the NAR.  In reactive mode as\n   illustrated\
    \ by Figure 3, the situation may be worse, since there will\n   be a delay before\
    \ joining the multicast group after the MN reattaches\n   to the NAR.  Multicast\
    \ packets cannot be delivered during this time.\n   Buffering the multicast packets\
    \ at the PAR can reduce multicast\n   packet loss but may then increase resource\
    \ consumption and delay in\n   packet transmission.  Implementors should balance\
    \ the different\n   requirements in the context of predominant application demands\
    \ (e.g.,\n   real-time requirements or loss sensitivity).\n"
- title: 4.2.  Protocol Operations Specific to PFMIPv6
  contents:
  - '4.2.  Protocol Operations Specific to PFMIPv6

    '
- title: 4.2.1.  Operations of the Mobile Node
  contents:
  - "4.2.1.  Operations of the Mobile Node\n   A Mobile Node willing to participate\
    \ in multicast traffic will join,\n   maintain, and leave groups as if located\
    \ in the fixed Internet.  It\n   will cooperate in handover indication as specified\
    \ in [RFC5949] and\n   required by its access link-layer technology.  No multicast-specific\n\
    \   mobility actions nor implementations are required at the MN in a\n   PMIPv6\
    \ domain.\n"
- title: 4.2.2.  Operations of the Previous MAG
  contents:
  - "4.2.2.  Operations of the Previous MAG\n   A MAG receiving a handover indication\
    \ for one of its MNs follows the\n   same predictive fast handover mode as a PMAG.\
    \  It MUST issue an MLD\n   General Query immediately on its corresponding link\
    \ unless it\n   performs explicit membership tracking on that link.  After knowledge\n\
    \   of the multicast subscriptions of the MN is acquired, the PMAG builds\n  \
    \ a Multicast Mobility Option, as described in Section 5.3, that\n   contains\
    \ the MLD and IGMP multicast listener state.  If not empty,\n   this Mobility\
    \ Option is appended to the regular fast handover HI\n   messages.  In the case\
    \ when a unicast HI message is submitted prior\n   to multicast state detection,\
    \ the multicast listener state is sent in\n   an additional HI message to the\
    \ NMAG.\n   The PMAG then waits until it receives the Multicast Acknowledgement\n\
    \   Option(s) with a HAck message (see Section 5.4) and the bidirectional\n  \
    \ tunnel with the NMAG is created.  After the HAck message is received,\n   the\
    \ PMAG adds the tunnel to its downstream interfaces in the\n   multicast forwarding\
    \ database.  For those groups reported in the\n   Multicast Acknowledgement Option(s),\
    \ i.e., not supported in the new\n   access network, the PMAG normally takes appropriate\
    \ actions (e.g.,\n   forwarding and termination) according to the network policy.\
    \  It\n   SHOULD start forwarding multicast traffic down the tunnel interface\n\
    \   for the groups indicated in the multicast listener reports received\n   from\
    \ NMAG.  However, it MAY deny forwarding some or all groups\n   included in the\
    \ multicast listener reports (e.g., due to\n   administrative configurations or\
    \ load conditions).\n   After the departure of the MN and on the reception of\
    \ a LEAVE\n   message, it is RECOMMENDED that the PMAG terminates forwarding of\
    \ the\n   specified groups and updates its multicast forwarding database.  It\n\
    \   correspondingly sends a LEAVE message to its upstream link for any\n   group\
    \ where there are no longer any active listeners on any\n   downstream link.\n\
    \   A MAG receiving a HI message with the Multicast Mobility Option for a\n  \
    \ currently attached node follows the reactive fast handover mode as a\n   PMAG.\
    \  It will return a Multicast Acknowledgement Option(s) (see\n   Section 5.4)\
    \ within a HAck message listing the groups for which it\n   does not provide forwarding\
    \ support to the NMAG.  It will add the\n   bidirectional tunnel with NMAG to\
    \ its downstream interfaces and will\n   start forwarding multicast traffic for\
    \ the groups listed in the\n   multicast listener report messages from the NMAG.\
    \  On reception of a\n   LEAVE message for a group, the PMAG terminates forwarding\
    \ for the\n   specific group and updates its multicast forwarding database.\n\
    \   According to its multicast forwarding state, it sends a LEAVE message\n  \
    \ to its upstream link for any group where there are no longer any\n   active\
    \ listeners on any downstream link.\n   In both modes, the PMAG will interpret\
    \ the departure of the MN as a\n   multicast LEAVE message of the MN and react\
    \ according to the\n   signaling scheme deployed in the access network (i.e.,\
    \ MLD querying\n   and explicit tracking).\n"
- title: 4.2.3.  Operations of the New MAG
  contents:
  - "4.2.3.  Operations of the New MAG\n   A MAG receiving a HI message with a Multicast\
    \ Mobility Option for a\n   currently unattached node follows the same predictive\
    \ fast handover\n   mode as an NMAG.  It will decide the multicast groups to be\
    \ forwarded\n   from the PMAG and build a Multicast Acknowledgement Option (see\n\
    \   Section 5.4) that enumerates only unwanted groups.  This Mobility\n   Option\
    \ is appended to the regular fast handover HAck messages or, in\n   the case of\
    \ a unicast HAck message being submitted prior to multicast\n   state acknowledgement,\
    \ sent in an additional HAck message to the\n   PMAG.  Immediately thereafter,\
    \ the NMAG SHOULD update its MLD\n   membership state based on the membership\
    \ reported in the Multicast\n   Mobility Option.  Until the MN reattaches, the\
    \ NMAG uses its Loopback\n   interface for downstream and MUST NOT forward traffic\
    \ to the\n   potential link of the MN.  The NMAG SHOULD issue JOIN messages for\n\
    \   those newly selected groups to its regular multicast upstream\n   interface.\
    \  As soon as the bidirectional tunnel with PMAG is\n   established, the NMAG\
    \ additionally joins those groups on the tunnel\n   interface requested to be\
    \ forwarded from the PMAG.\n   A MAG experiencing a connection request for an\
    \ MN without prior\n   reception of a corresponding Multicast Mobility Option\
    \ is operating\n   in the reactive fast handover mode as an NMAG.  Following the\n\
    \   reattachment, it SHOULD immediately issue an MLD General Query to\n   learn\
    \ about multicast subscriptions of the newly arrived MN.  Using\n   standard multicast\
    \ operations, the NMAG joins groups not currently\n   forwarded using its regular\
    \ multicast upstream interface.\n   Concurrently, it selects groups for forwarding\
    \ from PMAG and builds a\n   Multicast Mobility Option, as described in Section\
    \ 5.3, that contains\n   the multicast listener state.  If not empty, this Mobility\
    \ Option is\n   appended to the regular fast handover HI messages with the F flag\
    \ set\n   or, in the case of unicast HI message being submitted prior to\n   multicast\
    \ state detection, sent in an additional HI message to the\n   PMAG.  Upon reception\
    \ of the Multicast Acknowledgement Option and\n   establishment of the bidirectional\
    \ tunnel, the NMAG additionally\n   joins the set of groups on the tunnel interface\
    \ that it wishes to\n   receive by forwarding from the PMAG.  When multicast flows\
    \ arrive,\n   the NMAG forwards data to the appropriate downlink(s).\n   In both\
    \ modes, the NMAG MUST send a LEAVE message to the tunnel when\n   forwarding\
    \ of a group is no longer needed, e.g., after native\n   multicast traffic arrives\
    \ or group membership of the MN terminates.\n   Although the message can be delayed,\
    \ immediately sending the LEAVE\n   message eliminates the need for PAR and NAR\
    \ to process traffic that\n   is not to be forwarded.\n"
- title: 4.2.4.  IPv4 Support Considerations
  contents:
  - "4.2.4.  IPv4 Support Considerations\n   An MN in a PMIPv6 domain MAY use an IPv4\
    \ address transparently for\n   communication, as specified in [RFC5844].  For\
    \ this purpose, Local\n   Mobility Anchors (LMAs) can register IPv4-Proxy-CoAs\
    \ in its binding\n   caches, and MAGs can provide IPv4 support in access networks.\n\
    \   Correspondingly, multicast membership management will be performed by\n  \
    \ the MN using IGMP.  For multiprotocol multicast support on the\n   network side,\
    \ IGMPv3 router functions are required at both MAGs (see\n   Section 5.6 for compatibility\
    \ considerations with previous IGMP\n   versions).  Context transfer between MAGs\
    \ can transparently proceed\n   in the HI/HAck message exchanges by encapsulating\
    \ IGMP multicast\n   state records within Multicast Mobility Options (see Sections\
    \ 5.3 and\n   5.4 for details on message formats).\n   The deployment of IPv4\
    \ multicast support SHOULD be homogeneous across\n   a PMIP domain.  This avoids\
    \ multicast service breaks during\n   handovers.\n   It is worth mentioning the\
    \ scenarios of a dual-stack IPv4/IPv6 access\n   network and the use of Generic\
    \ Routing Encapsulation (GRE) tunneling\n   as specified in [RFC5845].  Corresponding\
    \ implications and operations\n   are discussed in the PMIP Multicast Base Deployment\
    \ document (see\n   [RFC6224]).\n"
- title: 5.  Message Formats
  contents:
  - '5.  Message Formats

    '
- title: 5.1.  Multicast Indicator for Proxy Router Advertisement (PrRtAdv)
  contents:
  - "5.1.  Multicast Indicator for Proxy Router Advertisement (PrRtAdv)\n   This document\
    \ updates the Proxy Router Advertisements (PrRtAdv)\n   message format defined\
    \ in Section 6.1.2 of [RFC5568].  The update\n   assigns the first bit of the\
    \ Reserved field to carry the 'M' bit, as\n   defined in Figure 6.  An FMIPv6\
    \ AR indicates support for multicast by\n   setting the 'M' bit to a value of\
    \ 1.\n        0                   1                   2                   3\n\
    \        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   \
    \    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n     \
    \  |      Type     |      Code     |           Checksum            |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |    Subtype    |M|  Reserved   |           Identifier          |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |    Options ...\n       +-+-+-+-+-+-+-+-+-+-+-+-\n     Figure 6: Multicast\
    \ Indicator Bit for Proxy Router Advertisement\n                             (PrRtAdv)\
    \ Message\n   This document updates the Reserved field to include the 'M' bit.\
    \  It\n   is specified as follows.\n      M = 1 indicates that the specifications\
    \ of this document apply.\n      M = 0 indicates that the behavior during fast\
    \ handover proceeds\n      according to [RFC5568].\n   The default value (0) of\
    \ this bit indicates a non-multicast-capable\n   service.\n"
- title: 5.2.  Extensions to Existing Mobility Header Messages
  contents:
  - "5.2.  Extensions to Existing Mobility Header Messages\n   The fast handover protocols\
    \ use an IPv6 header type called Mobility\n   Header, as defined in [RFC6275].\
    \  Mobility Headers can carry variable\n   Mobility Options.\n   The multicast\
    \ listener context of an MN is transferred in fast\n   handover operations from\
    \ PAR/PMAG to NAR/NMAG within a new Multicast\n   Mobility Option and MUST be\
    \ acknowledged by a corresponding Multicast\n   Acknowledgement Option.  Depending\
    \ on the specific handover scenario\n   and protocol in use, the corresponding\
    \ option is included within the\n   mobility option list of HI/HAck only (PFMIPv6)\
    \ or of FBU/FBack/HI/\n   HAck (FMIPv6).\n"
- title: 5.3.  New Multicast Mobility Option
  contents:
  - "5.3.  New Multicast Mobility Option\n   This section defines the Multicast Mobility\
    \ Option.  It contains the\n   current listener state record of the MN obtained\
    \ from the MLD\n   Multicast Listener Report message and has the format displayed\
    \ in\n   Figure 7.\n        0                   1                   2        \
    \           3\n        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7\
    \ 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |   Length      | Option-Code   |   Reserved    |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |                                                               |\n      \
    \ +                                                               +\n       |\
    \                                                               |\n       +  \
    \                  MLD or IGMP Report Payload                 +\n       ~    \
    \                                                           ~\n       ~      \
    \                                                         ~\n       |        \
    \                                                       |\n       +          \
    \                                                     +\n       |            \
    \                                                   |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                Figure 7: Mobility Header Multicast Option\n   Type: 60\n   Length:\
    \ 8-bit unsigned integer.  The length of this option in 32-bit\n   words, not\
    \ including the Type, Length, Option-Code, and Reserved\n   fields.\n   Option-Code:\n\
    \      1: IGMPv3 Payload Type\n      2: MLDv2 Payload Type\n      3: IGMPv3 Payload\
    \ Type from IGMPv2 Compatibility Mode\n      4: MLDv2 Payload Type from MLDv1\
    \ Compatibility Mode\n   Reserved: MUST be set to zero by the sender and MUST\
    \ be ignored by\n   the receiver.\n   MLD or IGMP Report Payload: This field is\
    \ composed of the Membership\n   Report message after stripping its ICMP header.\
    \  This Report Payload\n   always contains an integer number of multicast records.\n\
    \   Corresponding message formats are defined for MLDv2 in [RFC3810] and\n   for\
    \ IGMPv3 in [RFC3376].  This field MUST always contain the first\n   header line\
    \ (Reserved field and No of Mcast Address Records).\n   Figure 8 shows the Report\
    \ Payload for MLDv2 (see Section 5.2 of\n   [RFC3810] for the definition of Multicast\
    \ Address Records).  When\n   IGMPv3 is used, the payload format is defined according\
    \ to IGMPv3\n   Group Records (see Section 4.2 of [RFC3376] for the definition\
    \ of\n   Group Records).\n        0                   1                   2  \
    \                 3\n        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4\
    \ 5 6 7 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |           Reserved            |No of Mcast Address Records (M)|\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |                                                               |\n      \
    \ .                  Multicast Address Record (1)                 .\n       .\
    \                                                               .\n       |  \
    \                                                             |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |                                                               |\n  \
    \     .                                                               .\n    \
    \   .                  Multicast Address Record (2)                 .\n      \
    \ .                                                               .\n       |\
    \                                                               |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |                               .                               |\n  \
    \     .                               .                               .\n    \
    \   |                               .                               |\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n       |\
    \                                                               |\n       .  \
    \                                                             .\n       .    \
    \              Multicast Address Record (M)                 .\n       .      \
    \                                                         .\n       |        \
    \                                                       |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                      Figure 8: MLDv2 Report Payload\n"
- title: 5.4.  New Multicast Acknowledgement Option
  contents:
  - "5.4.  New Multicast Acknowledgement Option\n   The Multicast Acknowledgement\
    \ Option reports the status of the\n   context transfer and contains the list\
    \ of state records that could\n   not be successfully transferred to the next\
    \ access network.  It has\n   the format displayed in Figure 9.\n        0   \
    \                1                   2                   3\n        0 1 2 3 4\
    \ 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |   Length      | Option-Code   |    Status     |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |                                                               |\n      \
    \ +                                                               +\n       |\
    \                                                               |\n       +  \
    \         MLD or IGMP Unsupported Report Payload              +\n       ~    \
    \                                                           ~\n       ~      \
    \                                                         ~\n       |        \
    \                                                       |\n       +          \
    \                                                     +\n       |            \
    \                                                   |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \        Figure 9: Mobility Header Multicast Acknowledgement Option\n   Type:\
    \ 61\n   Length: 8-bit unsigned integer.  The length of this option in 32-bit\n\
    \   words, not including the Type, Length, Option-Code, and Status\n   fields.\n\
    \   Option-Code: 0\n   Status:\n      1: Report Payload type unsupported\n   \
    \   2: Requested group service unsupported\n      3: Requested group service administratively\
    \ prohibited\n   MLD or IGMP Unsupported Report Payload: This field is syntactically\n\
    \   identical to the MLD and IGMP Report Payload field described in\n   Section\
    \ 5.3 but is only composed of those Multicast Address Records\n   that are not\
    \ supported or prohibited in the new access network.  This\n   field MUST always\
    \ contain the first header line (Reserved field and\n   No of Mcast Address Records)\
    \ but MUST NOT contain any Mcast Address\n   Records if the status code equals\
    \ 1.\n   Note that group subscriptions to specific sources may be rejected at\n\
    \   the destination network; thus, the composition of multicast address\n   records\
    \ may differ from initial requests within an MLD or IGMP Report\n   Payload option.\n"
- title: '5.5.  Length Considerations: Number of Records and Addresses'
  contents:
  - "5.5.  Length Considerations: Number of Records and Addresses\n   Mobility Header\
    \ messages exchanged in HI/HAck and FBU/FBack dialogs\n   impose length restrictions\
    \ on multicast context records due to the\n   8-bit Length field.  The maximal\
    \ payload length available in FBU/\n   FBack messages is 4 octets (Mobility Option\
    \ header line) + 1024\n   octets (MLD Report Payload).  For example, not more\
    \ than 51 Multicast\n   Address Records of minimal length (without source states)\
    \ may be\n   exchanged in one message pair.  In typical handover scenarios, this\n\
    \   number reduces further according to unicast context and Binding\n   Authorization\
    \ data.  A larger number of MLD reports that exceeds the\n   available payload\
    \ size MAY be sent within multiple HI/HAck or FBU/\n   FBack message pairs.  In\
    \ PFMIPv6, context information can be\n   fragmented over several HI/HAck messages.\
    \  However, a single MLDv2\n   Report Payload MUST NOT be fragmented.  Hence,\
    \ for a single Multicast\n   Address Record, the number of source addresses (S,.)\
    \ is limited to\n   62.\n"
- title: 5.6.  MLD and IGMP Compatibility Requirements
  contents:
  - "5.6.  MLD and IGMP Compatibility Requirements\n   Access routers (MAGs) MUST\
    \ support MLDv2 and IGMPv3.  To enable\n   multicast service for MLDv1 and IGMPv2\
    \ listeners, the routers MUST\n   follow the interoperability rules defined in\
    \ [RFC3810] and [RFC3376]\n   and appropriately set the Multicast Address Compatibility\
    \ Mode.\n   When the Multicast Address Compatibility Mode is MLDv1 or IGMPv2,\
    \ a\n   router internally translates the subsequent MLDv1 and IGMPv2 messages\n\
    \   for that multicast address to their MLDv2 and IGMPv3 equivalents and\n   uses\
    \ these messages in the context transfer.  The current state of\n   Compatibility\
    \ Mode is translated into the code of the Multicast\n   Mobility Option, as defined\
    \ in Section 5.3.  A NAR (NMAG) receiving a\n   Multicast Mobility Option during\
    \ handover will switch to the lowest\n   level of MLD and IGMP Compatibility Mode\
    \ that it learned from its\n   previous and new option values.  This minimal compatibility\
    \ agreement\n   is used to allow for continued operation.\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   Security vulnerabilities that exceed issues discussed\
    \ in the base\n   protocols mentioned in this document ([RFC5568], [RFC5949],\n\
    \   [RFC3810], and [RFC3376]) are identified as follows.\n   Multicast context\
    \ transfer at predictive handovers implements group\n   states at remote access\
    \ routers and may lead to group subscriptions\n   without further validation of\
    \ the multicast service requests.\n   Thereby, a NAR (NMAG) is requested to cooperate\
    \ in potentially\n   complex multicast rerouting and may receive large volumes\
    \ of traffic.\n   Malicious or inadvertent multicast context transfers may result\
    \ in a\n   significant burden of route establishment and traffic management onto\n\
    \   the backbone infrastructure and the access router itself.  Rapid\n   rerouting\
    \ or traffic overload can be mitigated by a rate control at\n   the AR that restricts\
    \ the frequency of traffic redirects and the\n   total number of subscriptions.\
    \  In addition, the wireless access\n   network remains protected from multicast\
    \ data injection until the\n   requesting MN attaches to the new location.\n"
- title: 7.  IANA Considerations
  contents:
  - "7.  IANA Considerations\n   This document defines two new mobility options that\
    \ have been\n   allocated from the \"Mobility Options\" registry at\n   <http://www.iana.org/assignments/mobility-parameters>:\n\
    \      60 Multicast Mobility Option, described in Section 5.3\n      61 Multicast\
    \ Acknowledgement Option, described in Section 5.4\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997,\n              <http://www.rfc-editor.org/info/rfc2119>.\n   [RFC6275]\
    \  Perkins, C., Johnson, D., and J. Arkko, \"Mobility Support\n              in\
    \ IPv6\", RFC 6275, July 2011,\n              <http://www.rfc-editor.org/info/rfc6275>.\n\
    \   [RFC5213]  Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K.,\n  \
    \            and B. Patil, \"Proxy Mobile IPv6\", RFC 5213, August 2008,\n   \
    \           <http://www.rfc-editor.org/info/rfc5213>.\n   [RFC5568]  Koodli, R.,\
    \ \"Mobile IPv6 Fast Handovers\", RFC 5568, July\n              2009, <http://www.rfc-editor.org/info/rfc5568>.\n\
    \   [RFC5949]  Yokota, H., Chowdhury, K., Koodli, R., Patil, B., and F.\n    \
    \          Xia, \"Fast Handovers for Proxy Mobile IPv6\", RFC 5949,\n        \
    \      September 2010, <http://www.rfc-editor.org/info/rfc5949>.\n   [RFC1112]\
    \  Deering, S., \"Host extensions for IP multicasting\", STD 5,\n            \
    \  RFC 1112, August 1989,\n              <http://www.rfc-editor.org/info/rfc1112>.\n\
    \   [RFC4605]  Fenner, B., He, H., Haberman, B., and H. Sandick,\n           \
    \   \"Internet Group Management Protocol (IGMP) / Multicast\n              Listener\
    \ Discovery (MLD)-Based Multicast Forwarding\n              (\"IGMP/MLD Proxying\"\
    )\", RFC 4605, August 2006,\n              <http://www.rfc-editor.org/info/rfc4605>.\n\
    \   [RFC3810]  Vida, R. and L. Costa, \"Multicast Listener Discovery\n       \
    \       Version 2 (MLDv2) for IPv6\", RFC 3810, June 2004,\n              <http://www.rfc-editor.org/info/rfc3810>.\n\
    \   [RFC3376]  Cain, B., Deering, S., Kouvelas, I., Fenner, B., and A.\n     \
    \         Thyagarajan, \"Internet Group Management Protocol, Version\n       \
    \       3\", RFC 3376, October 2002,\n              <http://www.rfc-editor.org/info/rfc3376>.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [RFC5757]  Schmidt, T., Waehlisch, M., and G.\
    \ Fairhurst, \"Multicast\n              Mobility in Mobile IP Version 6 (MIPv6):\
    \ Problem Statement\n              and Brief Survey\", RFC 5757, February 2010,\n\
    \              <http://www.rfc-editor.org/info/rfc5757>.\n   [FMCAST-MIP6]\n \
    \             Suh, K., Kwon, D., Suh, Y., and Y. Park, \"Fast Multicast\n    \
    \          Protocol for Mobile IPv6 in the fast handovers\n              environments\"\
    , Work in Progress, draft-suh-mipshop-fmcast-\n              mip6-00, February\
    \ 2004.\n   [FMIPv6-Analysis]\n              Schmidt, T. and M. Waehlisch, \"\
    Predictive versus Reactive\n              -- Analysis of Handover Performance\
    \ and Its Implications\n              on IPv6 and Multicast Mobility\", Telecommunication\n\
    \              Systems, Vol. 30, No. 1-3, pp. 123-142, November 2005,\n      \
    \        <http://dx.doi.org/10.1007/s11235-005-4321-4>.\n   [RFC6224]  Schmidt,\
    \ T., Waehlisch, M., and S. Krishnan, \"Base\n              Deployment for Multicast\
    \ Listener Support in Proxy Mobile\n              IPv6 (PMIPv6) Domains\", RFC\
    \ 6224, April 2011,\n              <http://www.rfc-editor.org/info/rfc6224>.\n\
    \   [RFC7287]  Schmidt, T., Gao, S., Zhang, H., and M. Waehlisch, \"Mobile\n \
    \             Multicast Sender Support in Proxy Mobile IPv6 (PMIPv6)\n       \
    \       Domains\", RFC 7287, June 2014,\n              <http://www.rfc-editor.org/info/rfc7287>.\n\
    \   [RFC5844]  Wakikawa, R. and S. Gundavelli, \"IPv4 Support for Proxy\n    \
    \          Mobile IPv6\", RFC 5844, May 2010,\n              <http://www.rfc-editor.org/info/rfc5844>.\n\
    \   [RFC5845]  Muhanna, A., Khalil, M., Gundavelli, S., and K. Leung,\n      \
    \        \"Generic Routing Encapsulation (GRE) Key Option for Proxy\n        \
    \      Mobile IPv6\", RFC 5845, June 2010,\n              <http://www.rfc-editor.org/info/rfc5845>.\n"
- title: Appendix A.  Considerations for Mobile Multicast Sources
  contents:
  - "Appendix A.  Considerations for Mobile Multicast Sources\n   This document only\
    \ specifies protocol operations for fast handovers\n   for mobile listeners. \
    \ In this appendix, we briefly discuss aspects\n   of supporting mobile multicast\
    \ sources.\n   In a multicast-enabled Proxy Mobile IPv6 domain, multicast sender\n\
    \   support is likely to be enabled by any one of the mechanisms\n   described\
    \ in [RFC7287].  In this case, multicast data packets from an\n   MN are transparently\
    \ forwarded either to its associated LMA or to a\n   multicast-enabled access\
    \ network.  In all cases, a mobile source can\n   continue to transmit multicast\
    \ packets after a handover from PMAG to\n   NMAG without additional management\
    \ operations.  Packets (with a\n   persistent source address) will continue to\
    \ flow via the LMA or the\n   access network into the previously established distribution\
    \ system.\n   In contrast, an MN will change its Care-of Address while performing\n\
    \   FMIPv6 handovers.  Even though MNs are enabled to send packets via\n   the\
    \ reverse NAR-PAR tunnel using their previous Care-of Address for a\n   limited\
    \ time, multicast sender support in such a Mobile IPv6 regime\n   will most likely\
    \ follow one of the basic mechanisms described in\n   Section 5.1 of [RFC5757]:\
    \ (1) bidirectional tunneling, (2) remote\n   subscription, or (3) agent-based\
    \ solutions.  A solution for multicast\n   senders that is homogeneously deployed\
    \ throughout the mobile access\n   network can support seamless services during\
    \ fast handovers, the\n   details of which are beyond the scope of this document.\n"
- title: Acknowledgments
  contents:
  - "Acknowledgments\n   Protocol extensions to support multicast in Fast Mobile IPv6\
    \ have\n   been loosely discussed for several years.  Repeated attempts have\n\
    \   been made to define corresponding protocol extensions.  The first\n   version\
    \ [FMCAST-MIP6] was presented by Kyungjoo Suh, Dong-Hee Kwon,\n   Young-Joo Suh,\
    \ and Youngjun Park in 2004.\n   This work was stimulated by many fruitful discussions\
    \ in the MobOpts\n   research group.  We would like to thank all active members\
    \ for\n   constructive thoughts and contributions on the subject of multicast\n\
    \   mobility.  The MULTIMOB working group has provided continuous\n   feedback\
    \ during the evolution of this work.  Comments, discussions,\n   and reviewing\
    \ remarks have been contributed by (in alphabetical\n   order) Carlos J. Bernardos,\
    \ Luis M. Contreras, Hui Deng, Shuai Gao,\n   Brian Haberman, Dirk von Hugo, Min\
    \ Hui, Georgios Karagian, Marco\n   Liebsch, Behcet Sarikaya, Stig Venaas, and\
    \ Juan Carlos Zuniga.\n   Funding has been provided by the German Federal Ministry\
    \ of Education\n   and Research within the projects Mindstone, SKIMS, and SAFEST.\
    \  This\n   is gratefully acknowledged.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Thomas C. Schmidt (editor)\n   HAW Hamburg\n   Dept. Informatik\n\
    \   Berliner Tor 7\n   Hamburg  D-20099\n   Germany\n   EMail: t.schmidt@haw-hamburg.de\n\
    \   Matthias Waehlisch\n   link-lab & FU Berlin\n   Hoenower Str. 35\n   Berlin\
    \  D-10318\n   Germany\n   EMail: mw@link-lab.net\n   Rajeev Koodli\n   Intel\n\
    \   3600 Juliette Lane\n   Santa Clara,  CA 95054\n   United States\n   EMail:\
    \ rajeev.koodli@intel.com\n   Godred Fairhurst\n   University of Aberdeen\n  \
    \ School of Engineering\n   Aberdeen  AB24 3UE\n   United Kingdom\n   EMail: gorry@erg.abdn.ac.uk\n\
    \   Dapeng Liu\n   China Mobile\n   Phone: +86-123-456-7890\n   EMail: liudapeng@chinamobile.com\n"
