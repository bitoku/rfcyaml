- title: __initial_text__
  contents:
  - ''
- title: Internet Research Task Force (IRTF)                             S. Kamei
  contents:
  - "Internet Research Task Force (IRTF)                             S. Kamei\n  The\
    \ P2P Network Experiment Council's Activities and Experiments with\n         Application-Layer\
    \ Traffic Optimization (ALTO) in Japan\n"
- title: Abstract
  contents:
  - "Abstract\n   This document describes experiments that clarify how an approach\n\
    \   similar to Application-Layer Traffic Optimization (ALTO) was\n   effective\
    \ in reducing network traffic.  These experiments were\n   performed in Japan\
    \ by the P2P Network Experiment Council in an\n   attempt to harmonize peer-to-peer\
    \ (P2P) technology with network\n   infrastructure.  Based on what was learned\
    \ from these experiments,\n   this document provides some suggestions that might\
    \ be useful for the\n   ALTO architecture and especially for application-independent\
    \ ALTO-\n   like server operation.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Research Task Force\n   (IRTF).  The IRTF publishes the results\
    \ of Internet-related research\n   and development activities.  These results\
    \ might not be suitable for\n   deployment.  This RFC represents the individual\
    \ opinion(s) of one or\n   more members of the Peer-to-Peer Research Group of\
    \ the Internet\n   Research Task Force (IRTF).  Documents approved for publication\
    \ by\n   the IRSG are not a candidate for any level of Internet Standard; see\n\
    \   Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc6875.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2013 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  3\n   2.  Background in Japan  . . . . . . . . . . . . . . . .\
    \ . . . . .  4\n     2.1.  P2P Traffic  . . . . . . . . . . . . . . . . . . .\
    \ . . . .  4\n     2.2.  Impact on Network Infrastructure . . . . . . . . . .\
    \ . . .  4\n     2.3.  Overview of the P2P Network Experiment Council . . . .\
    \ . .  5\n   3.  Objectives of the P2P Network Experiment Council . . . . . .\
    \ .  6\n   4.  Details of the Experiment  . . . . . . . . . . . . . . . . . .\
    \  7\n     4.1.  Dummy Node . . . . . . . . . . . . . . . . . . . . . . . .  7\n\
    \   5.  Hint Servers . . . . . . . . . . . . . . . . . . . . . . . . .  9\n  \
    \ 6.  High-Level Trial Results . . . . . . . . . . . . . . . . . . . 13\n    \
    \ 6.1.  Peer Selection with P2P  . . . . . . . . . . . . . . . . . 13\n     6.2.\
    \  Peer Selection with the Hint Server  . . . . . . . . . . . 13\n   7.  Considerations\
    \ . . . . . . . . . . . . . . . . . . . . . . . . 14\n     7.1.  Next Steps .\
    \ . . . . . . . . . . . . . . . . . . . . . . . 14\n     7.2.  Feedback to the\
    \ ALTO WG  . . . . . . . . . . . . . . . . . 15\n       7.2.1.  Hierarchical Architecture\
    \ for ALTO Servers . . . . . . 15\n       7.2.2.  Measurement Mechanism  . . .\
    \ . . . . . . . . . . . . . 15\n   8.  Security Considerations  . . . . . . .\
    \ . . . . . . . . . . . . 16\n   9.  Acknowledgments  . . . . . . . . . . . .\
    \ . . . . . . . . . . . 16\n   10. Informative References . . . . . . . . . .\
    \ . . . . . . . . . . 16\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   An overlay network, which is used by P2P and other applications,\n\
    \   offers the advantage of allowing flexible provisioning of services\n   while\
    \ hiding the lower-layer network.  The disadvantage is that\n   inefficient routing\
    \ without considering the lower-layer network may\n   cause increasing the network\
    \ load.  Several proposals have been made\n   to build an overlay network that\
    \ takes into account the information\n   about the lower-layer network [1] [2].\
    \  Since the management of the\n   Internet is highly distributed, it is difficult\
    \ to implement such\n   proposals, and thus to optimize a network, without the\
    \ cooperation of\n   network providers.\n   Recently, the controversy between\
    \ the overlay network and the network\n   providers about network resource wastefulness\
    \ has been rekindled.\n   Under these circumstances, some researchers have studied\
    \ overlay-\n   network control technology that takes into account the network\n\
    \   topology information obtained from network providers.\n   One research effort\
    \ regarding this issue were experiments planned and\n   performed by the P2P Network\
    \ Experiment Council in Japan.  This\n   document reports on these experiments\
    \ and the issues they addressed.\n   These experiments were performed from 2007\
    \ to 2008, because P2P\n   traffic decreased after Japanese copyright law was\
    \ revised.  While\n   more recently, the dominant traffic in Japan, the United\
    \ States, and\n   elsewhere has been HTTP-based flash streaming, a large amount\
    \ of\n   traffic in Asia (outside Japan) is still P2P traffic, like P2P\n   streaming\
    \ [3], and P2P technology is very useful in such a real-time\n   streaming area.\n\
    \   Our experience in this experiment might be useful for ALTO\n   architecture,\
    \ especially for application-independent and multi-\n   application ALTO-like\
    \ server operations.  We suggest that a generic\n   measurement mechanism is important\
    \ because each application has\n   different mechanism, which makes it difficult\
    \ to compare their\n   effectiveness.\n   This document is a product of the P2P\
    \ Research Group (RG).  The views\n   in this document were considered controversial\
    \ by the P2P RG, but the\n   RG reached a consensus that the document should still\
    \ be published.\n"
- title: 2.  Background in Japan
  contents:
  - '2.  Background in Japan

    '
- title: 2.1.  P2P Traffic
  contents:
  - "2.1.  P2P Traffic\n   As of 2008, the world's most popular P2P file-sharing application,\n\
    \   BitTorrent, was not widely deployed in Japan.  Instead, other file-\n   sharing\
    \ P2P applications specific to Japan, such as Winny [4] and\n   Share [5], still\
    \ account for 40% of the Internet traffic in Japan,\n   even though many those\
    \ P2P users were arrested for sharing illegal\n   files with these P2P applications.\n\
    \   Each P2P file-sharing application has a unique protocol and none have\n  \
    \ a large market share, therefore making it hard to control them\n   effectively.\n"
- title: 2.2.  Impact on Network Infrastructure
  contents:
  - "2.2.  Impact on Network Infrastructure\n   One advantage of using P2P technology\
    \ for content delivery is that\n   peers exchange content directly among themselves\
    \ without server\n   bottleneck.  This reduces the load on servers.  Also, P2P\n\
    \   applications can reduce upstream traffic from an origin content\n   server.\
    \  This reduces server cost dramatically.\n   It is also known that server cost\
    \ could be reduced with P2P\n   technology.  However, the story is quite different\
    \ for network\n   providers.  From the viewpoint of network providers, the traffic\
    \ that\n   content servers generate has shifted to the edge network and the\n\
    \   amount of traffic has not necessarily been reduced by using P2P\n   technology\
    \ for reducing server cost.  Another problem for network\n   providers is that\
    \ extremely inefficient routing may be selected\n   because overlay network systems\
    \ are configured without any regard to\n   the structure of the lower-layer network\
    \ or network geometry.\n   In some cases, the total amount of traffic on the Internet\
    \ used to be\n   limited by the capacity of servers.  For those cases, P2P technology\n\
    \   can improve the scalability of servers; however, it may exhaust\n   network\
    \ resources.  Moreover, using P2P applications remarkably\n   increases the volume\
    \ of traffic per user.\n   Faced with an increase in the load on network infrastructure,\
    \ network\n   providers are compelled to take actions to overcome the sudden\n\
    \   increase in facilities' costs.  Representative actions include\n   placing\
    \ content in Internet Exchanges (IXs) or data centers,\n   introducing bandwidth\
    \ control, and raising access fees [6].\n   As mentioned above, the dominant traffic\
    \ currently in Japan, the US,\n   and elsewhere, is HTTP-based flash streaming.\
    \  However, a large\n   amount of traffic in Asia (outside Japan) is P2P traffic,\
    \ like P2P\n   Streaming [3], and P2P technology is very useful in such real-time\n\
    \   streaming.  The increase in traffic arising from such a shift may be\n   a\
    \ great threat to the network.\n"
- title: 2.3.  Overview of the P2P Network Experiment Council
  contents:
  - "2.3.  Overview of the P2P Network Experiment Council\n   In order to reduce Internet\
    \ traffic and encourage legitimate use of\n   P2P technologies, in 2006 the Japanese\
    \ government established a new\n   council called the P2P Network Experiment Council,\
    \ in conjunction\n   with commercial P2P application vendors and ISPs.\n   The\
    \ council developed regulations that include guidelines such as\n   giving advance\
    \ notice to heavy users before restricting their\n   bandwidth.  In accordance\
    \ with the regulations, some ISPs introduced\n   solutions that reduce traffic\
    \ caused by P2P file-sharing\n   applications.\n   In addition, the council, along\
    \ with ISPs, carriers, contents\n   providers, and P2P system vendors, looked\
    \ for new ways to control\n   traffic by commercial P2P applications.  In this\
    \ work, the council\n   performed experiments that introduced an ALTO-like system\
    \ and\n   observed how the traffic was reduced when it was redirected to proper\n\
    \   peers on the real Internet in Japan.\n   In our experiment, the council deployed\
    \ hint servers, which are\n   described in Section 5.  Hint servers run a protocol\
    \ that offers\n   network distances to peers, and these distances are disclosed\
    \ to P2P\n   application vendors.\n   Using hint servers, P2P application vendors\
    \ can introduce ALTO\n   concepts easily into their P2P distribution systems.\
    \  Because the\n   protocol used by hint servers, as defined by the council, is\n\
    \   independent of specific P2P application vendors like BitTorrent.  The\n  \
    \ protocol needs to gather network information from ISPs so it can\n   provide\
    \ network distance to peers.  However, many ISPs dislike\n   disclosing such information\
    \ to others.  Therefore, hint servers are\n   designed to offer little information\
    \ about an ISP's network\n   architecture to P2P application vendors.\n   To monitor\
    \ the traffic of peers, the council also deployed a dummy\n   node, which is described\
    \ in Section 4.1.\n   The remainder of this memo provides an overview of the experiments.\n"
- title: 3.  Objectives of the P2P Network Experiment Council
  contents:
  - "3.  Objectives of the P2P Network Experiment Council\n   The Japanese Ministry\
    \ of Internal Affairs and Communications, which\n   has jurisdiction over information\
    \ and communication systems in Japan,\n   held meetings of an advisory panel on\
    \ network neutrality in 2006 and\n   2007 in order to study issues related to\
    \ next-generation networks,\n   such as how to ensure fairness in the use of networks\
    \ and how to\n   define fairness in the cost burden.  The panel took an interest\
    \ in\n   P2P technology as a solution to the impending traffic saturation in\n\
    \   the backbone network resulting from the rapid expansion of broadband\n   access\
    \ in Japan, and it formed a \"Working Group on the P2P Network\",\n   which carried\
    \ out an intensive study of P2P networks.\n   The working group reported that\
    \ it would be necessary to undertake\n   the following four activities, which\
    \ are intended to encourage the\n   government to adopt relevant policies [7]:\n\
    \   o  Formulate guidelines on P2P file-delivery applications to be self-\n  \
    \    imposed by the industry.\n   o  Promote feasibility tests of P2P networks.\n\
    \   o  Study the current state of traffic control and promote the sharing\n  \
    \    of information.\n   o  Hold working group meetings about traffic control.\n\
    \   The first two proposals led to the establishment of the P2P Network\n   Experiment\
    \ Council, supported by the Japanese Ministry of Internal\n   Affairs and Communications\
    \ [8] [9].  The Council, with membership\n   from P2P delivery providers, content\
    \ holders, and network providers,\n   began a variety of delivery experiments,\
    \ which were expected to\n   strengthen cooperative control between different\
    \ layers.  In contrast\n   to P4P (Proactive Network Provider Participation for\
    \ P2P), which\n   takes a relatively top-down approach of adopting an architecture\n\
    \   based on a proposal from a university, the Council is characterized\n   by\
    \ its bottom-up approach.  The aim of establishing the Council was\n   described\
    \ as follows (translated from [10]).\n      The rapid growth of broadband access\
    \ enables content delivery\n      systems to deliver high-quality and high-volume\
    \ videos securely\n      and efficiently.  Although P2P technology is an effective\n\
    \      technology for this requirement, it still has some issues to be\n     \
    \ coped with.  Therefore, the \"P2P Network Experiment Council\" was\n      established\
    \ with the support of the Japanese Ministry of Internal\n      Affairs and Communications,\
    \ with its secretariat set up within the\n      Foundation for MultiMedia Communications\
    \ (FMMC), in order to\n      formulate guidelines for providers and conduct feasibility\
    \ tests\n      so that users can receive video delivery services safely.\n   The\
    \ activities of the P2P Network Experiment Council can be\n   classified into\
    \ two categories.  The first is formulating guidelines\n   for promoting the commercial\
    \ use of P2P technology.  These guidelines\n   will enable users to use P2P technology\
    \ safely and will give\n   providers clear rules they must observe.  The second\
    \ is feasibility\n   testing of P2P technology.  Section 4 describes experiments\
    \ conducted\n   in 2007 and 2008.\n"
- title: 4.  Details of the Experiment
  contents:
  - "4.  Details of the Experiment\n   The Council investigated data offered by the\
    \ members of the Council\n   and learned that the server cost could be reduced\
    \ by using P2P\n   technology for content delivery.  For example, the data from\
    \ the\n   vendors showed the following:\n      Traffic was reduced by 90% with\
    \ UGLive by Utagoe, Inc. [11].\n      The cost of delivering to tens of thousands\
    \ of subscribers was\n      reduced by 80% with BBbroadcast with TV Bank Corp.\
    \ [12]\n   On the other hand, these reduced server costs may have affected the\n\
    \   network load.  One of the goals of our experiments was to visualize\n   the\
    \ impact and propose an architecture to reduce network load caused\n   by these\
    \ new technologies.\n   In order to visualize the reduction of network cost, we\
    \ modeled P2P\n   applications and a multi-ISP environment.  This model was also\
    \ needed\n   for visualizing the effectiveness of the ALTO-like approach.\n"
- title: 4.1.  Dummy Node
  contents:
  - "4.1.  Dummy Node\n   As mentioned above, while the effect of using P2P technology\
    \ to\n   reduce the traffic and the load on servers is well known; however,\n\
    \   traffic behavior in the inter-ISP area is not known.  In Japan, the\n   ISPs\
    \ and IXes cooperated to create a backbone traffic report [13].\n   However, the\
    \ measurements gathered for that report required capturing\n   packets on subscribers'\
    \ lines in order to determine the end users'\n   activities.  It is not realistic\
    \ to measure the behavior of P2P\n   applications at user terminals connected\
    \ to the Internet because that\n   would require a large-scale arrangement for\
    \ measurement, such as\n   using deep packet inspection (DPI) on aggregated lines.\n\
    \   To solve these problems, we put several nodes called 'dummy nodes' in\n  \
    \ the ISP's networks.  The dummy nodes emulate an end user's PC running\n   P2P\
    \ applications.  Every P2P node provided by participating vendors\n   in the experiment\
    \ was configured so it always contacted the hint\n   server.\n   By introducing\
    \ dummy nodes and measuring the traffic on them, we were\n   able to observe and\
    \ evaluate how much the P2P applications affected\n   the networks.  Since this\
    \ method can't measure every subscriber's\n   traffic, the accuracy is less than\
    \ other methods.  However, using\n   dummy nodes makes it possible to adapt to\
    \ situations in which many\n   different P2P applications coexist on a network.\
    \  We decided that\n   using dummy nodes was suitable for these experiments.\n\
    \   A dummy node consisted of an Intel PC server running Linux (CentOS),\n   VMWare,\
    \ and Windows XP on VMWare.  With this configuration, all\n   packets can be captured\
    \ without any impact on the behavior of the\n   network, nodes, or applications.\
    \  Also, this configuration enabled us\n   to use different P2P applications for\
    \ Windows and evaluate them\n   generally.\n   To see behaviors of the node, incoming\
    \ and outgoing packets are\n   captured on Linux because every packet is transmitted\
    \ through it.  To\n   see flow information in these experiments, we captured the\
    \ source and\n   destination addresses, port number, amount of traffic, and start\
    \ and\n   end times.\n   We placed 60 dummy nodes on access networks of 40 different\
    \ ISPs.\n   They were placed as close as possible to the subscriber in each\n\
    \   network.\n   +----------------------+\n   |+--------------------+|\n   ||+------------------+||\n\
    \   ||| P2P Application  |||\n   |||    Windows XP    |||\n   |||        +--+\
    \      |||\n   ||+--------|N |------+||\n   ||  VMware |e |       ||\n   |+---------|t\
    \ |-------+|\n   |   Linux  |IF| capture|\n   +----------|  |--------+\n     \
    \        +--+\n                           Figure 1: Dummy node\n"
- title: 5.  Hint Servers
  contents:
  - "5.  Hint Servers\n   Since fiber to the home (FTTH) has rapidly spread all over\
    \ Japan,\n   bottlenecks in IP networks have been shifting from access networks\
    \ to\n   backbone networks and equipment, such as bandwidth between ISPs and\n\
    \   capacity in IXs.  Under these circumstances, the Council proposed\n   less\
    \ restrictive and more flexible cooperation between ISPs than\n   existent P4P\
    \ experiments [14].  The proposed method consists of the\n   following elements:\
    \ (1) P2P clients, (2) P2P control servers, and (3)\n   a hint server (specifically,\
    \ a peer selection hint server).  P2P\n   clients and control servers are existing\
    \ systems, but whether the P2P\n   control servers exist is application dependent.\
    \  The hint server is a\n   server that provides a hint for peer selection and\
    \ plays a role\n   equivalent to that of the ALTO server.  Note that this proposal\
    \ was\n   based on results of experiments using dummy nodes.  The results\n  \
    \ showed that it was possible to reduce unnecessary traffic that flows\n   across\
    \ the boundaries of geographical districts or ISPs by providing\n   information\
    \ about the physical network to P2P applications.\n   When a peer joins the network,\
    \ it registers its location information\n   (IP address) and supplementary information\
    \ (line speed, etc.) with\n   the hint server.  The hint server calculates the\
    \ network distance\n   between peers (P2P clients) based on network topology information\n\
    \   obtained from the ISP and generates a priority table for peer\n   selection.\
    \  The hint server returns the table to the peer.\n   If all information is public,\
    \ the above procedure can produce results\n   that are nearly optimal.  However,\
    \ some information held by ISPs is\n   often confidential.  Also, in some cases,\
    \ the volume of calculation\n   required to process all information can be excessive.\
    \  To avoid these\n   problems, the plan is to conduct experiments with a limited\
    \ set of\n   functions, analyze the results, and gradually expand the scope of\n\
    \   optimization.\n   A control mechanism that makes use of all possible information\
    \ is\n   difficult not only technically but also because it requires\n   coordination\
    \ among providers.  In light of these difficulties, the\n   council has been limiting\
    \ the implementation and experiments to the\n   technical scope.\n   Figure 2\
    \ shows an outline of the hint server.\n   +---------+   GetLocation    +-------------GeoIP\
    \ DB Server---------+\n   |         |  +-----------+   |   +----------+      +-----------+\
    \   |\n   |         |--|IP Address |-->|   | GeoIP DB |      |BGP daemon |   |\n\
    \   |         |  +-----------+   |   +----------+      +-----------+   |\n   |\
    \         |                  | +-------------+  +----------------+ |\n   |   \
    \      |  +-----------+   | |  District   |  |    Routing     | |\n   |      \
    \   |--|AS Code:   |---| | Information |  |Information(BGP)| |\n   |         |\
    \  |Regional   |   | |             |  |                | |\n   |P2P Peers|  |Information|\
    \   | |   Range of  |  |AS Code(origin) | |\n   |   or    |  +-----------+   |\
    \ | IP Addresses|  |                | |\n   | Control |                  | +-------------+\
    \  +----------------+ |\n   | Server  |                  +-------------------------------------+\n\
    \   |         |                                  |      ^\n   |         |  PeerSelection\
    \                   v      |\n   |         |  +-----------+   +--------------------------------------+\n\
    \   |         |--|IP Address |-->| +--Priority Node Selection System--+ |\n  \
    \ |         |  |    List   |   | |                                  | |\n   |\
    \         |  +-----------+   | |     Peer Candidate Ranking       | |\n   |  \
    \       |  +-----------+   | |                                  | |\n   |    \
    \     |--|  Ranking  |-->| +----------------------------------+ |\n   |      \
    \   |  +-----------+   +--------------------------------------+\n   +---------+\n\
    \                 Figure 2: Hint server for peer selection\n   The network information\
    \ used by the hint server is not information\n   solicited from individual ISPs\
    \ but is the Autonomous System (AS)\n   number and district information, which\
    \ are more or less public\n   already.  Routing tables are not generated.  Instead,\
    \ peers within\n   the same ISP or the same district are selected with higher\
    \ priority\n   in order to confine traffic to within the same ISP or the same\n\
    \   district.\n   When the hint server receives an IP address, it returns its\
    \ attribute\n   information, in order to confine the traffic to within the nearer\
    \ ISP\n   or district.  A peer can select another based on the returned\n   information.\
    \  This operation is called GetLocation.  However, in\n   preparation for the\
    \ time when it becomes necessary to hide topology\n   information, an interface\
    \ is provided through which a priority order\n   is returned in response to an\
    \ input of a list of candidate peers.\n   This operation is called PeerSelection.\n\
    \   Although the target node is selected based on the criterion that it\n   is\
    \ within the same ISP or the same district, this type of selection\n   is not\
    \ very effective if the number of participating peers is small.\n   Table 1 shows\
    \ the percentage of peers within the same AS or the same\n   prefecture calculated\
    \ from the distribution of ASes and prefectures\n   in the IP address space from\
    \ one-day data on a Winny network.\n                    +--------------------+------------+\n\
    \                    | Conditions         | Percentage |\n                   \
    \ +--------------------+------------+\n                    | AS matches      \
    \   |    6.70%   |\n                    | Prefecture matches |   12.76%   |\n\
    \                    | Both match         |    2.09%   |\n                   \
    \ | Neither match      |   78.45%   |\n                    +--------------------+------------+\n\
    \                 Table 1: AS and prefecture distributions\n   Because, in addition\
    \ to the above, the presence or absence of content\n   affects the results, controlling\
    \ peer selection within the same\n   district may be inadequate.  Therefore, it\
    \ is necessary to introduce\n   the weight of a continuous quantity that reflects\
    \ the physical\n   distance or the AS path length as an indicator of the proximity\
    \ of\n   the areas involved.\n   In consideration of this, the following two measures\
    \ are used to\n   evaluate the proximity of peers in a hint server.\n   o  AS\
    \ path length (distance between ISPs)\n      AS path length is calculated from\
    \ BGP full routes.  Since a full\n      routing table retrieved at an ISP can\
    \ show only a best path, it\n      may not get an accurate length if the AS hop\
    \ count of both ISPs is\n      too large.  To avoid this, we use BGP information\
    \ received from\n      different ISPs and combine them.  Based on this concept,\
    \ we used\n      BGP routing information offered by three ISPs operated by big\n\
    \      telecommunication couriers and made a topology tree.  Then, we\n      were\
    \ able to calculate the shortest path between two given ASes.\n   o  Geographical\
    \ distance\n      Distances between peers are measured using the physical distance\n\
    \      between the capitals of the prefectures to which the peers belong.\n  \
    \    Distances between prefectural capitals are sorted into ascending\n      order,\
    \ and then into bands, with weights 1 to 15 assigned to them\n      so that each\
    \ band contains roughly the same number of \"capital\n      pairs\".  If either\
    \ of the peer's locations is indefinite, the\n      distance is equal to 15; if\
    \ they are in the same prefecture, the\n      distance is equal to 0.\n      Evaluation\
    \ of distances between peers showed that the distribution\n      of distances\
    \ was almost uniform when distances between peers are\n      normalized.  This\
    \ result suggests that using normalized distances\n      expands the area where\
    \ the control by a hint server is effective.\n      The geographical distance\
    \ is used only when the AS path length is\n      the same between some candidates.\n\
    \   An example of the request and the response follows.\n   o Request\n      POST\
    \ /PeerSelection HTTP/1.1\n      Host: ServerName\n      User-Agent: ClientName\n\
    \      Content-Type: text/plain; charset=utf-8\n      v=Version number\n     \
    \ [application=Application identifier]\n      ip=IP address of physical interface\n\
    \      port=Port number of physical interface\n      [nat={no|upnp|unknown}]\n\
    \      [nat_ip=Global IP address using UPnP]\n      [nat_port= Global port number\
    \ using UPnP]\n      [trans_id=transaction ID]\n      [pt=Flag of port type]\n\
    \      [ub=upload bandwidth]\n      [db=download bandwidth]\n   o Response\n \
    \    HTTP/1.1 200 OK\n     Date: Timestamp\n     Content-Type: text/plain; charset=utf-8\n\
    \     Cache-control: max-age=max age\n     Connection: close\n     v=Version number\n\
    \     ttl=ttl\n     server=hint server name\n     ...\n     trans_id=transaction\
    \ ID\n     pt=Flag of port type\n     client_ip=Peer IP address observed from\
    \ server\n     client_port=Peer port number observed from server\n     numpeers=number\
    \ of responding peers\n     n=[src address] dst address / cost / option\n"
- title: 6.  High-Level Trial Results
  contents:
  - '6.  High-Level Trial Results

    '
- title: 6.1.  Peer Selection with P2P
  contents:
  - "6.1.  Peer Selection with P2P\n   Table 2 shows the result of the analysis of\
    \ communication in a node\n   of an ISP in Tokyo, as an example of measurement\
    \ results.\n   In these two experiments, we evaluated different P2P applications.\n\
    \   In the first experiment, the P2P topology was generated by a tree\n   algorithm;\
    \ in the second experiment, it was generated by a mesh\n   algorithm.  Both resulted\
    \ in similar performance.\n   +-----------------------------------------+------------+------------+\n\
    \   | Conditions                              | Experiment | Experiment |\n  \
    \ |                                         |      1     |      2     |\n   +-----------------------------------------+------------+------------+\n\
    \   | Peers selected within the same ISP      |     22%    |     29%    |\n  \
    \ |                                         |            |            |\n   |\
    \ Peers selected within the same district |     19%    |     23%    |\n   |  \
    \                                       |            |            |\n   | Peers\
    \ selected within the same district |     5%     |     7%     |\n   | and the\
    \ same ISP                        |            |            |\n   +-----------------------------------------+------------+------------+\n\
    \         Table 2: Percentage of communication within the same ISP\n   Table 2\
    \ shows that the probability of communication with peers in the\n   same ISP is\
    \ proportional to the population size and the share of the\n   ISP in each district.\
    \  The data show that peers were selected at\n   random.  Note that the vendor\
    \ of a P2P application used in these\n   experiments demonstrated that the mechanism\
    \ for selecting a peer\n   using network information can be implemented.  However,\
    \ peer\n   selection is normally based on past information because users often\n\
    \   cannot actually perceive the effect of using network information.\n"
- title: 6.2.  Peer Selection with the Hint Server
  contents:
  - "6.2.  Peer Selection with the Hint Server\n   The main objective of these experiments\
    \ was to verify the operation\n   of the hint server and P2P applications.  The\
    \ distances between a\n   dummy node and a peer were obtained from data on the\
    \ dummy nodes.  An\n   examination of the distances between a dummy node and a\
    \ peer revealed\n   that the mean value of distance after the hint server was\
    \ introduced\n   was reduced by 10% and that the 95th percentile was reduced by\
    \ 5%.\n   The results show that introducing a hint server can reduce the\n   network\
    \ loads that result from P2P applications.\n"
- title: 7.  Considerations
  contents:
  - "7.  Considerations\n   We clarified the following during our experiments.\n \
    \  1.  Dispersed dummy nodes can determine the behavior of peers and\n       traffic\
    \ between inter-ISP networks and can determine the peer\n       that each peer\
    \ selects.  Therefore, this result proves the\n       importance of the peer-selection\
    \ control mechanism that is\n       proposed by ALTO.\n   2.  Using our peer-selection\
    \ control mechanism, called hint servers,\n       can result in significant differences.\
    \  Hint servers can lead\n       each peer to select a closer peer.\n   3.  The\
    \ 10% reduction of network cost is not satisfactory for ISPs,\n       but the\
    \ controllability of P2P applications is the most important\n       point.  When\
    \ ISPs apply this mechanism to their real networks,\n       they will set a very\
    \ large cost for the most expensive network\n       link.\n   In the experimental\
    \ results for peer-selection control, the selection\n   is smaller in intra-ISP\
    \ traffic than in other experiments [15].  We\n   think this is because there\
    \ are fewer peers in each area of traffic\n   control.  When there are many peers\
    \ in one ISP, it is easy to select\n   peers in the same ISP.  However, when there\
    \ are fewer peers in one\n   ISP, it is difficult to select peers in the same\
    \ ISP.  In our\n   experiments, most of the ISPs had many peers in their networks,\
    \ i.e.,\n   there were a small number of ISPs that had few peers in their\n  \
    \ networks.\n   Moreover, we didn't force P2P vendors to limit their implementation\n\
    \   policy; therefore, we observed differences in how each implementation\n  \
    \ weighs the information from the hint servers.  Specifically, in P2P\n   applications\
    \ when a tree topology is used, the hint-server mechanism\n   is very effective;\
    \ on the other hand, when a mesh topology is used,\n   it less effective.\n"
- title: 7.1.  Next Steps
  contents:
  - "7.1.  Next Steps\n   In recent research, we've changed to an ALTO-based communication\n\
    \   protocol on hint servers because the requirements of ALTO are\n   documented\
    \ in RFC 6708 [16] and the ALTO protocol is a work in\n   progress [17].  In our\
    \ implementation, protocol identifiers (PIDs)\n   and the cost value are mapped\
    \ to ISP subnets and to ISP distance,\n   respectively.  We also implement services\
    \ for compatibility required\n   by ALTO such as Map Services and Endpoint Cost\
    \ Service.  The Endpoint\n   Cost Service (defined in [17]) is mainly used because\
    \ of backward\n   compatibility with our experiments.\n   We are also studying\
    \ a hierarchical structure of hint servers, in\n   order to control traffic at\
    \ a coarse level (in inter-ISP areas) and\n   at a finer level (in intra-ISP areas).\
    \  It is also effective for\n   limiting the areas where information is disclosed.\n"
- title: 7.2.  Feedback to the ALTO WG
  contents:
  - "7.2.  Feedback to the ALTO WG\n   This section describes what the authors learned\
    \ from these\n   experiments that might be useful to the ALTO WG.\n"
- title: 7.2.1.  Hierarchical Architecture for ALTO Servers
  contents:
  - "7.2.1.  Hierarchical Architecture for ALTO Servers\n   In our experiments, we\
    \ present the possibility of traffic control\n   among multiple ISPs and multiple\
    \ P2P applications using an ALTO\n   mechanism.  We found several problems when\
    \ ISPs try to adopt the\n   mechanism.  One is the granularity of network information\
    \ from\n   Council members.  Among inter-ISP areas, it is relatively easy to\n\
    \   handle information for public purposes by using BGP full routes.  On\n   the\
    \ other hand, among the intra-ISP areas, it may be difficult to\n   disclose the\
    \ private information of each ISP.  Kiesel [18] proposes\n   some modifications\
    \ for the ALTO protocol in order to hide ISP\n   information.  We propose hierarchical\
    \ structures.  From the viewpoint\n   of cooperation between ISPs, fine-grained\
    \ information is not\n   necessarily required.  Moreover, it is difficult to exchange\
    \ the\n   fine-grained information between ISPs.  Considering this situation,\n\
    \   we used only coarse-grained information to control backbone traffic\n   in\
    \ these experiments; however, in the future, there may be a demand\n   for controlling\
    \ traffic within an ISP using fine-grained information.\n   Therefore, we decided\
    \ to introduce hierarchical structures into ALTO\n   in order to cope with both\
    \ situations.  Actually, adopting a\n   hierarchical control mechanism that includes\
    \ the following two steps\n   will be useful.\n   o  First, use coarse-grained\
    \ information about whole the network to\n      select ISPs.\n   o  Second, use\
    \ fine-grained information within the ISP to select a\n      peer.\n"
- title: 7.2.2.  Measurement Mechanisms
  contents:
  - "7.2.2.  Measurement Mechanisms\n   In these experiments, there were two difficulties\
    \ as follows.\n   o  Evaluating the effect of introducing a hint server was difficult\n\
    \      because the P2P applications had their own measurement mechanisms.\n  \
    \ o  How to treat the priority order of peers suggested by a hint\n      server\
    \ could not be predetermined for P2P applications.\n   From these experiences,\
    \ the authors consider that clarifying the\n   requirements about measurement\
    \ mechanisms for P2P applications is\n   necessary in ALTO.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   This document does not propose any kind of protocol,\
    \ practice, or\n   standard.\n"
- title: 9.  Acknowledgments
  contents:
  - "9.  Acknowledgments\n   The P2P Network Experiment Council was established thanks\
    \ to strong\n   support by the Japanese Ministry of Internal Affairs and\n   Communications.\
    \  These experiments were performed with cooperation\n   among the P2P Network\
    \ Experiment Council members.  DREAMBOAT Co.,\n   Ltd., Bitmedia, Inc., Utagoe,\
    \ Inc., and Toyama IX have especially\n   supported the analyses of the experiments.\
    \  The authors appreciate\n   Tohru Asami, Hiroshi Esaki, and Tatsuya Yamashita\
    \ for their\n   constructive comments.\n   The authors would also like to thank\
    \ Martin Stiemerling, Stefano\n   Previdi, and Vijay K. Gurbani for their comments\
    \ on this document.\n"
- title: 10.  Informative References
  contents:
  - "10.  Informative References\n   [1]   Kawahara, R., Lua, E., Uchida, M., Kamei,\
    \ S., and H. Yoshino,\n         \"On the Quality of Triangle Inequality Violation\
    \ Aware Routing\n         Overlay Architecture\", INFOCOM 2009, pages 2761-2765.\n\
    \   [2]   Li, Z. and P. Mohapatra, \"QRON: QoS-aware routing in overlay\n    \
    \     networks\", IEEE Journal on Selected Areas in\n         Communications,\
    \ Vol. 22, No. 1, January 2004.\n   [3]   Sandvine, Inc., \"Global Internet Phenomena\
    \ Report: 2H 2012\",\n         September 2012,\n         <http://www.sandvine.com/news/global_broadband_trends.asp>.\n\
    \   [4]   Wikipedia, \"Winny\", July 2012, <http://en.wikipedia.org/w/\n     \
    \    index.php?title=Winny&oldid=500744660>.\n   [5]   Wikipedia, \"Share (P2P)\"\
    , January 2013,\n         <http://en.wikipedia.org/w/\n         index.php?title=Share_(P2P)&oldid=532999898>.\n\
    \   [6]   Taniwaki, Y., \"Broadband Competition Policy in Japan\",\n         March\
    \ 2008, <http://unpan1.un.org/intradoc/groups/public/\n         documents/apcity/unpan040329.pdf>.\n\
    \   [7]   Ministry of Internal Affairs and Communications, \"Disclosure of\n \
    \        the Report 'Working Group on P2P Networks'\" (in Japanese),\n       \
    \  2007,\n         <http://www.soumu.go.jp/menu_news/s-news/2007/070629_11.html>.\n\
    \   [8]   The Foundation for MultiMedia Communications, \"The P2P Network\n  \
    \       Experiment Council\" (in Japanese), 2007,\n         <http://www.fmmc.or.jp/P2P/about.htm>.\n\
    \   [9]   Ministry of Internal Affairs and Communications, \"P2P Network\n   \
    \      Experiment Council Symposium to Be Held\", February 2008,\n         <http://www.soumu.go.jp/main_sosiki/joho_tsusin/eng/Releases/\n\
    \         Telecommunications/news080201_1.html>.\n   [10]  The Foundation for\
    \ MultiMedia Communications, \"The Aim of P2P\n         Network Experiment Council\"\
    \ (in Japanese), 2007,\n         <http://www.fmmc.or.jp/p2p_web/aim.html>.\n \
    \  [11]  Shudo, K., \"A Review of ALM Software in Practical Use\", IRTF\n    \
    \     SAMRG (Scalable Adaptive Multicast Research Group)\n         meeting, Proceedings\
    \ of IETF 76, November 2009,\n         <http://www.ietf.org/proceedings/76/slides/SAMRG-6.pdf>.\n\
    \   [12]  TV Bank Corp., \"Live Delivery Using 'BB Broadcast' Achieved a\n   \
    \      96% Saving in Traffic!\" (in Japanese), October 2008,\n         <http://www.tv-bank.com/jp/20081031.html>.\n\
    \   [13]  Cho, K., Fukuda, K., Esaki, H., and A. Kato, \"The Impact and\n    \
    \     Implications of the Growth in Residential User-to-User\n         Traffic\"\
    , SIGCOMM '06, pages 207-218, September 2006.\n   [14]  Xie, H., Yang, R., Krishnamurthy,\
    \ A., Liu, Y., and A.\n         Silberscatz, \"P4P: Provider Portal for Applications\"\
    , SIGCOMM\n         '08, pages 351-362, 2008, <http://www.cs.yale.edu/homes/yry/\n\
    \         projects/p4p/p4p-sigcomm08.pdf>.\n   [15]  Griffiths, C., Livingood,\
    \ J., Popkin, L., Woundy, R., and Y.\n         Yang, \"Comcast's ISP Experiences\
    \ in a Proactive Network\n         Provider Participation for P2P (P4P) Technical\
    \ Trial\",\n         RFC 5632, September 2009.\n   [16]  Kiesel, S., Previdi,\
    \ S., Stiemerling, M., Woundy, R., and Y.\n         Yang, \"Application-Layer\
    \ Traffic Optimization (ALTO)\n         Requirements\", RFC 6708, September 2012.\n\
    \   [17]  Alimi, R., Ed., Penno, R., Ed., and Y. Yang, Ed., \"ALTO\n         Protocol\"\
    , Work in Progress, September 2012.\n   [18]  Kiesel, S. and M. Stiemerling, \"\
    ALTO H12\", Work in Progress,\n         March 2010.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Satoshi Kamei\n   NTT Communications Corporation\n   Granpark\
    \ Tower 16F, 3-4-1 Shibaura\n   Minato-ku, Tokyo  108-8118\n   Japan\n   Phone:\
    \ +81-50-3812-4697\n   EMail: skame@nttv6.jp\n   Tsuyoshi Momose\n   Cisco Systems\
    \ G.K.\n   9-7-1 Akasaka\n   Minato-ku, Tokyo  107-6227\n   Japan\n   Phone: +81-3-6738-5154\n\
    \   EMail: tmomose@cisco.com\n   Takeshi Inoue\n   NTT Communications Corporation\n\
    \   Kuredo Hakushima Building 3F, 14-15 Higashihakushimacho\n   Chuo-ku, Hiroshima-City,\
    \ Hiroshima  730-0004\n   Japan\n   Phone: +81-82-563-5030\n   EMail: inoue@jp.ntt.net\n\
    \   Tomohiro Nishitani\n   NTT Communications Corporation\n   1-1-6, Uchisaiwaicho\n\
    \   Chiyodaku, Tokyo  100-8019\n   Japan\n   Phone: +81-50-3812-4742\n   EMail:\
    \ tomohiro.nishitani@ntt.com\n"
