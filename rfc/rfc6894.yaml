- title: __initial_text__
  contents:
  - "     Methodology for Benchmarking MPLS Traffic Engineered (MPLS-TE)\n       \
    \                 Fast Reroute Protection\n"
- title: Abstract
  contents:
  - "Abstract\n   This document describes the methodology for benchmarking MPLS Fast\n\
    \   Reroute (FRR) protection mechanisms for link and node protection.\n   This\
    \ document provides test methodologies and testbed setup for\n   measuring failover\
    \ times of Fast Reroute techniques while considering\n   factors (such as underlying\
    \ links) that might impact\n   recovery times for real-time applications bound\
    \ to MPLS Traffic\n   Engineered (MPLS-TE) tunnels.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any\n   errata, and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc6894.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2013 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n   This document\
    \ may contain material from IETF Documents or IETF\n   Contributions published\
    \ or made publicly available before November\n   10, 2008.  The person(s) controlling\
    \ the copyright in some of this\n   material may not have granted the IETF Trust\
    \ the right to allow\n   modifications of such material outside the IETF Standards\
    \ Process.\n   Without obtaining an adequate license from the person(s) controlling\n\
    \   the copyright in such materials, this document may not be modified\n   outside\
    \ the IETF Standards Process, and derivative works of it may\n   not be created\
    \ outside the IETF Standards Process, except to format\n   it for publication\
    \ as an RFC or to translate it into languages other\n   than English.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Document Scope ..................................................5\n  \
    \ 3. Existing Definitions and Requirements ...........................5\n   4.\
    \ General Reference Topology ......................................6\n   5. Test\
    \ Considerations .............................................7\n      5.1. Failover\
    \ Events ............................................7\n      5.2. Failure Detection\
    \ ..........................................8\n      5.3. Use of Data Traffic\
    \ for MPLS Protection Benchmarking .......8\n      5.4. LSP and Route Scaling\
    \ ......................................9\n      5.5. Selection of IGP ...........................................9\n\
    \      5.6. Restoration and Reversion ..................................9\n  \
    \    5.7. Offered Load ...............................................9\n    \
    \  5.8. Tester Capabilities .......................................10\n      5.9.\
    \ Failover Time Measurement Methods .........................10\n   6. Reference\
    \ Test Setup ...........................................11\n      6.1. Link Protection\
    \ ...........................................12\n           6.1.1. Link Protection:\
    \ 1-Hop Primary (from PLR)\n                  and 1-Hop Backup Tail-End Tunnels\
    \ ..................12\n           6.1.2. Link Protection: 1-Hop Primary (from\
    \ PLR)\n                  and 2-Hop Backup Tail-End Tunnels ..................13\n\
    \           6.1.3. Link Protection: 2-Hop (or More) Primary (from PLR)\n     \
    \             and 1-Hop Backup Tail-End Tunnels ..................14\n       \
    \    6.1.4. Link Protection: 2-Hop (or More) Primary (from PLR)\n            \
    \      and 2-Hop Backup Tail-End Tunnels ..................15\n      6.2. Node\
    \ Protection ...........................................16\n           6.2.1.\
    \ Node Protection: 2-Hop Primary (from PLR)\n                  and 1-Hop Backup\
    \ Tail-End Tunnels ..................16\n           6.2.2. Node Protection: 2-Hop\
    \ Primary (from PLR)\n                  and 2-Hop Backup Tail-End Tunnels ..................17\n\
    \           6.2.3. Node Protection: 3-Hop (or More) Primary (from PLR)\n     \
    \             and 1-Hop Backup Tail-End Tunnels ..................18\n       \
    \    6.2.4. Node Protection: 3-Hop (or More) Primary (from PLR)\n            \
    \      and 2-Hop Backup Tail-End Tunnels ..................19\n   7. Test Methodology\
    \ ...............................................19\n      7.1. MPLS-FRR Forwarding\
    \ Performance ...........................20\n           7.1.1. Head-End PLR Forwarding\
    \ Performance ................20\n           7.1.2. Midpoint PLR Forwarding Performance\
    \ ................21\n      7.2. Head-End PLR with Link Failure ............................22\n\
    \      7.3. Midpoint PLR with Link Failure ............................24\n  \
    \    7.4. Head-End PLR with Node Failure ............................25\n    \
    \  7.5. Midpoint PLR with Node Failure ............................26\n   8. Reporting\
    \ Format ...............................................27\n   9. Security Considerations\
    \ ........................................29\n   10. Acknowledgements ..............................................29\n\
    \   11. References ....................................................29\n  \
    \    11.1. Normative References .....................................29\n    \
    \  11.2. Informative References ...................................30\n   Appendix\
    \ A. Fast Reroute Scalability Table ........................31\n   Appendix B.\
    \ Abbreviations .........................................34\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This document describes the methodology for benchmarking\
    \ MPLS Fast\n   Reroute (FRR) protection mechanisms.  This document uses much\
    \ of the\n   terminology defined in [RFC6414].\n   Protection mechanisms provide\
    \ recovery of client services from a\n   planned or an unplanned link or node\
    \ failure.  MPLS-FRR protection\n   mechanisms are generally deployed in a network\
    \ infrastructure where\n   MPLS is used for the provisioning of point-to-point\
    \ traffic\n   engineered tunnels (tunnel).  MPLS-FRR protection mechanisms aim\
    \ to\n   reduce the service disruption period by minimizing recovery time from\n\
    \   most common failures.\n   Network elements from different manufacturers behave\
    \ differently to\n   network failures, which impacts the network's ability and\
    \ performance\n   for failure recovery.  Therefore, it becomes imperative for\
    \ service\n   providers to have a common benchmark to understand the performance\n\
    \   behaviors of network elements.\n   There are two factors impacting service\
    \ availability: frequency of\n   failures and duration for which the failures\
    \ persist.  Failures can\n   be classified further into two types: correlated\
    \ and uncorrelated.\n   Correlated and uncorrelated failures may be planned or\
    \ unplanned.\n   Planned failures are generally predictable.  Network implementations\n\
    \   should be able to handle both planned and unplanned failures and\n   recover\
    \ gracefully within a time frame to maintain service assurance.\n   Hence, failover\
    \ recovery time is one of the most important benchmarks\n   that a service provider\
    \ considers in choosing the building blocks for\n   their network infrastructure.\n\
    \   A correlated failure is a result of the occurrence of two or more\n   failures.\
    \  A typical example is failure of a logical resource (e.g.,\n   Layer-2 (L2)\
    \ links) due to a dependency on a common physical resource\n   (e.g., common conduit)\
    \ that fails.  Within the context of MPLS\n   protection mechanisms, failures\
    \ that arise due to Shared Risk Link\n   Groups (SRLGs) [RFC4202] can be considered\
    \ as correlated failures.\n   MPLS-FRR [RFC4090] allows for the possibility that\
    \ the Label Switched\n   Paths (LSPs) can be reoptimized in the minutes following\
    \ failover.\n   IP traffic would be rerouted according to the preferred path for\
    \ the\n   post-failure topology.  Thus, MPLS-FRR may include additional steps\n\
    \   following the occurrence of the failure detection and failover event\n   [RFC6414].\n\
    \   (1)  Failover Event - Primary path (working path) fails\n   (2)  Failure Detection\
    \ - Failover event is detected\n   (3a)  Failover - Working path switched to backup\
    \ path\n   (3b)  Reoptimization of working path (possible change from backup\n\
    \         path)\n   (4)  Restoration (see Section 3.3.5 of [RFC6414])\n   (5)\
    \  Reversion (see Section 3.3.6 of [RFC6414])\n"
- title: 2.  Document Scope
  contents:
  - "2.  Document Scope\n   This document provides detailed test cases along with\
    \ different\n   topologies and scenarios that should be considered to effectively\n\
    \   benchmark MPLS-FRR protection mechanisms and failover times on the\n   data\
    \ plane.  Different failover events and scaling considerations are\n   also provided\
    \ in this document.\n   All benchmarking test cases defined in this document apply\
    \ to\n   facility backup [RFC4090].  The test cases cover a set of interesting\n\
    \   failure scenarios and the associated procedures benchmark the\n   performance\
    \ of the Device Under Test (DUT) to recover from failures.\n   Data-plane traffic\
    \ is used to benchmark failover times.  Testing\n   scenarios related to MPLS-TE\
    \ protection mechanisms when applied to\n   MPLS Transport Profile and IP fast\
    \ reroute applied to MPLS networks\n   were not considered and are outside the\
    \ scope of this document.\n   However, the test setups considered for MPLS-based\
    \ L3 and L2 services\n   consider LDP over MPLS RSVP-TE configurations.\n   Benchmarking\
    \ of correlated failures is outside the scope of this\n   document.  Detection\
    \ using Bidirectional Forwarding Detection (BFD)\n   is outside the scope of this\
    \ document, but it is mentioned in\n   discussion sections.\n   The performance\
    \ of the control plane is outside the scope of this\n   document.\n   As described\
    \ above, MPLS-FRR may include a reoptimization of the\n   working path, with possible\
    \ packet transfer impairments.\n   Characterization of reoptimization is beyond\
    \ the scope of this memo.\n"
- title: 3.  Existing Definitions and Requirements
  contents:
  - "3.  Existing Definitions and Requirements\n   The key words \"MUST\", \"MUST\
    \ NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\"\
    , \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted\
    \ as described in BCP 14 [RFC2119].\n   While [RFC2119] defines the use of these\
    \ key words primarily for\n   Standards Track documents, this Informational document\
    \ uses some of\n   these key words.\n   The reader is assumed to be familiar with\
    \ the commonly used MPLS\n   terminology, some of which is defined in [RFC4090].\n\
    \   This document uses much of the terminology defined in [RFC6414].\n   This\
    \ document also uses existing terminology defined in other BMWG\n   documents\
    \ [RFC1242] [RFC2285] [RFC4689].  Appendix B provides\n   abbreviations used in\
    \ the document.\n"
- title: 4.  General Reference Topology
  contents:
  - "4.  General Reference Topology\n   Figure 1 illustrates the general reference\
    \ topology.  It shows the\n   basic reference testbed and is applicable to all\
    \ the test cases\n   defined in this document.  The Tester is comprised of a Traffic\n\
    \   Generator (TG) and Traffic Analyzer (TA) and Emulator.  A Tester is\n   connected\
    \ to the test network and, depending upon the test case, the\n   DUT could vary.\
    \  The Tester sends and receives IP traffic to the\n   tunnel ingress and performs\
    \ signaling protocol emulation to simulate\n   real network scenarios in a lab\
    \ environment.  The Tester may also\n   support MPLS-TE signaling to act as the\
    \ ingress node to the MPLS\n   tunnel.  The lines in figures represent physical\
    \ connections.\n        +---------------------------+\n        |             \
    \ +------------|---------------+\n        |              |            |      \
    \         |\n        |              |            |               |\n    +--------+\
    \     +--------+    +--------+    +--------+   +--------+\n"
- title: TG--|   R1   |-----|   R2   |----|   R3   |    |    R4  |   |  R5    |
  contents:
  - "TG--|   R1   |-----|   R2   |----|   R3   |    |    R4  |   |  R5    |\n    |\
    \        |-----|        |----|        |----|        |---|        |\n    +--------+\
    \     +--------+    +--------+    +--------+   +--------+\n        |         \
    \    |              |            |            |\n        |             |     \
    \         |            |            |\n        |         +--------+         |\
    \            |           TA\n        +---------|   R6   |---------+          \
    \  |\n                  |        |----------------------+\n                  +--------+\n\
    \                                Figure 1\n   The tester MUST record the number\
    \ of lost, duplicate, and out-of-\n   order packets.  It should further record\
    \ arrival and departure times\n   so that failover time, Additive Latency, and\
    \ Reversion Time can be\n   measured.  The tester may be a single device or a\
    \ test system\n   emulating all the different roles along a primary or backup\
    \ path.\n   The label stack is dependent on the following three entities:\n  \
    \ (1)  Type of protection (Link versus Node)\n   (2)  Number of remaining hops\
    \ of the primary tunnel from the Point of\n        Local Repair (PLR) [RFC6414]\n\
    \   (3)  Number of remaining hops of the backup tunnel from the PLR\n   Due to\
    \ this dependency, it is RECOMMENDED that the benchmarking of\n   failover times\
    \ be performed on all the topologies provided in Section\n   6.\n"
- title: 5.  Test Considerations
  contents:
  - "5.  Test Considerations\n   This section discusses the fundamentals of MPLS Protection\
    \ testing:\n      (1)  The types of network events that cause failover (Section\
    \ 5.1)\n      (2)  Indications for failover (Section 5.2)\n      (3)  The use\
    \ of data traffic (Section 5.3)\n      (4)  Label Switched Path Scaling (Section\
    \ 5.4)\n      (5)  IGP Selection (Section 5.5)\n      (6)  Reversion of LSP (Section\
    \ 5.6)\n      (7)  Traffic generation (Section 5.7)\n"
- title: 5.1.  Failover Events
  contents:
  - "5.1.  Failover Events\n   The failover to the backup tunnel is primarily triggered\
    \ by either\n   link or node failures observed downstream of the Point of Local\n\
    \   Repair (PLR).  The failure events [RFC6414] are listed below.\n   Link Failure\
    \ Events\n      - Interface Shutdown on PLR side with physical/link alarm\n  \
    \    - Interface Shutdown on remote side with physical/link alarm\n      - Interface\
    \ Shutdown on PLR side with RSVP hello enabled\n      - Interface Shutdown on\
    \ remote side with RSVP hello enabled\n      - Interface Shutdown on PLR side\
    \ with BFD\n      - Interface Shutdown on remote side with BFD\n      - Fiber\
    \ Pull on the PLR side (both Transmit (TX) and Receive (RX)\n        or just the\
    \ TX)\n      - Fiber Pull on the remote side (both TX and RX or just the RX)\n\
    \      - Online Insertion and Removal (OIR) on PLR side\n      - OIR on remote\
    \ side\n      - Sub-interface failure on PLR side (e.g., shutting down of a\n\
    \        VLAN)\n      - Sub-interface failure on remote side\n      - Parent interface\
    \ shutdown on PLR side (an interface bearing\n        multiple sub-interfaces)\n\
    \      - Parent interface shutdown on remote side\n   Node Failure Events\n  \
    \    - A System reload initiated by either a graceful shutdown or a\n        power\
    \ failure\n      - A system crash due to a software failure or an assert\n"
- title: 5.2.  Failure Detection
  contents:
  - "5.2.  Failure Detection\n   Link failure detection [RFC6414] time depends on\
    \ the link type and\n   failure detection protocols running.  For Synchronous\
    \ Optical Network\n   (SONET) / Synchronous Digital Hierarchy (SDH), the alarm\
    \ type (such\n   as LOS, AIS, or RDI) can be used.  Other link types have L2 alarms,\n\
    \   but they may not provide a short enough failure detection time.\n   Ethernet-based\
    \ links enabled with MPLS/IP do not have L2 failure\n   indicators; therefore,\
    \ they rely on L3 signaling for failure\n   detection.  However, for directly\
    \ connected devices, remote fault\n   indication in the ethernet auto-negotiation\
    \ scheme could be\n   considered as a type of L2 link failure indicator.\n   MPLS\
    \ has different failure detection techniques, such as BFD, or use\n   of RSVP\
    \ hellos.  These methods can be used for the L3 failure\n   indicators required\
    \ by ethernet-based links or for some other non-\n   ethernet-based links to help\
    \ improve failure detection time.\n   However, these fast failure detection mechanisms\
    \ are out of scope.\n   The test procedures in this document can be used for local\
    \ failure or\n   remote failure scenarios for comprehensive benchmarking and to\n\
    \   evaluate failover performance independent of the failure detection\n   techniques.\n"
- title: 5.3.  Use of Data Traffic for MPLS Protection Benchmarking
  contents:
  - "5.3.  Use of Data Traffic for MPLS Protection Benchmarking\n   Currently, end\
    \ customers use packet loss as a key metric for failover\n   time [RFC6414]. \
    \ Failover Packet Loss [RFC6414] is an externally\n   observable event and has\
    \ a direct impact on application performance.\n   MPLS protection is expected\
    \ to minimize packet loss in the event of a\n   failure.  For this reason, it\
    \ is important to develop a standard\n   router benchmarking methodology for measuring\
    \ MPLS protection that\n   uses packet loss as a metric.  At a known rate of forwarding,\
    \ packet\n   loss can be measured and the failover time can be determined.\n \
    \  Measurement of control-plane signaling to establish backup paths is\n   not\
    \ enough to verify failover.  Failover is best determined when\n   packets are\
    \ actually traversing the backup path.\n   An additional benefit of using packet\
    \ loss for calculation of\n   failover time is that it allows use of a black-box\
    \ test environment.\n   Data traffic is offered at line-rate to the DUT, an emulated\
    \ network\n   failure event is forced to occur, and packet loss is externally\n\
    \   measured to calculate the convergence time.  This setup is\n   independent\
    \ of the DUT architecture.\n   In addition, this methodology considers the packets\
    \ in error and\n   duplicate packets [RFC4689] that could have been generated\
    \ during the\n   failover process.  The methodologies consider lost, out-of-order\n\
    \   [RFC4689], and duplicate packets to be impaired packets that\n   contribute\
    \ to the failover time.\n"
- title: 5.4.  LSP and Route Scaling
  contents:
  - "5.4.  LSP and Route Scaling\n   Failover time performance may vary with the number\
    \ of established\n   primary and backup tunnel LSPs and installed routes.  However,\
    \ the\n   procedure outlined here should be used for any number of LSPs (L) and\n\
    \   any number of routes protected by the PLR (R).  The values of L and R\n  \
    \ must be recorded.\n"
- title: 5.5.  Selection of IGP
  contents:
  - "5.5.  Selection of IGP\n   The underlying IGP could be ISIS-TE or OSPF-TE for\
    \ the methodology\n   proposed here.  See [RFC6412] for IGP options to consider\
    \ and report.\n"
- title: 5.6.  Restoration and Reversion
  contents:
  - "5.6.  Restoration and Reversion\n   Path restoration [RFC6414] provides a method\
    \ to restore an alternate\n   primary LSP upon failure and to switch traffic from\
    \ the backup path\n   to the restored primary path (reversion).  In MPLS-FRR,\
    \ reversion\n   [RFC6414] can be implemented as Global Reversion or Local Reversion.\n\
    \   It is important to include restoration and reversion as a step in\n   each\
    \ test case to measure the amount of packet loss, out-of-order\n   packets, or\
    \ duplicate packets that are produced.\n   Note: In addition to restoration and\
    \ reversion, reoptimization can\n   take place while the failure is still not\
    \ recovered but it depends on\n   the user configuration and reoptimization timers.\n"
- title: 5.7.  Offered Load
  contents:
  - "5.7.  Offered Load\n   It is suggested that there be three or more traffic streams\
    \ as long\n   as there is a steady and constant rate of flow for all of the\n\
    \   streams.  In order to monitor the DUT performance for recovery times,\n  \
    \ a set of route prefixes should be advertised before traffic is sent.\n   The\
    \ traffic should be configured towards these routes.\n   Prefix-dependency behaviors\
    \ are key in IP, and tests with route-\n   specific flows spread across the routing\
    \ table will reveal this\n   dependency.  Generating traffic to all of the prefixes\
    \ reachable by\n   the protected tunnel (probably in a Round-Robin fashion, where\
    \ the\n   traffic is destined to all the prefixes but one prefix at a time in\
    \ a\n   cyclic manner) is not recommended.  Round-Robin traffic generation is\n\
    \   not recommended to all prefixes, as time to hit all the prefixes may\n   be\
    \ higher than the failover time.  This phenomenon will reduce the\n   granularity\
    \ of the measured results, and the results observed may not\n   be accurate.\n"
- title: 5.8.  Tester Capabilities
  contents:
  - "5.8.  Tester Capabilities\n   It is RECOMMENDED that the Tester used to execute\
    \ each test case have\n   the following capabilities:\n      1. Ability to establish\
    \ MPLS-TE tunnels and push/pop labels.\n      2. Ability to produce a failover\
    \ event [RFC6414].\n      3. Ability to insert a timestamp in each data packet's\
    \ IP payload.\n      4. An internal time clock to control timestamping, time\n\
    \         measurements, and time calculations.\n      5. Ability to disable or\
    \ tune specific L2 and L3 protocol\n         functions on any interface.\n   \
    \   6. Ability to react upon the receipt of path error from the PLR.\n   The Tester\
    \ MAY be capable of making non-data-plane convergence\n   observations and use\
    \ those observations for measurements.\n"
- title: 5.9.  Failover Time Measurement Methods
  contents:
  - "5.9.  Failover Time Measurement Methods\n   Failover time [RFC6414] is calculated\
    \ using one of the following\n   three methods:\n      1. Packet-Loss-Based Method\
    \ (PLBM): (Number of packets dropped/\n         packets per second * 1000) milliseconds.\
    \  This method could\n         also be referred to as the Loss-Derived method.\n\
    \      2. Time-Based Loss Method (TBLM): This method relies on the\n         ability\
    \ of the traffic generators to provide statistics that\n         reveal the duration\
    \ of failure in milliseconds based on when\n         the packet loss occurred\
    \ (interval between non-zero packet loss\n         and zero loss).\n      3. Timestamp-Based\
    \ Method (TBM): This method of failover\n         calculation is based on the\
    \ timestamp that gets transmitted as\n         payload in the packets originated\
    \ by the generator.  The\n         traffic analyzer records the timestamp of the\
    \ last packet\n         received before the failover event and the first packet\
    \ after\n         the failover and derives the time based on the difference\n\
    \         between these two timestamps.  Note: The payload could also\n      \
    \   contain sequence numbers for out-of-order packet calculation\n         and\
    \ duplicate packets.\n   TBM would be able to detect reversion impairments beyond\
    \ loss; thus,\n   it is RECOMMENDED as the failover time method.\n"
- title: 6.  Reference Test Setup
  contents:
  - "6.  Reference Test Setup\n   In addition to the general reference topology shown\
    \ in Figure 1, this\n   section provides detailed insight into various proposed\
    \ test setups\n   that should be considered for comprehensively benchmarking the\n\
    \   failover time in different roles along the primary tunnel.\n   This section\
    \ proposes a set of topologies that covers all the\n   scenarios for local protection.\
    \  All of these topologies can be\n   mapped to the reference topology shown in\
    \ Figure 1.  Topologies\n   provided in this section refer to the testbed required\
    \ to benchmark\n   failover time when the DUT is configured as a PLR in either\
    \ head-end\n   or midpoint role.  Provided with each topology below is the label\n\
    \   stack at the PLR.  Penultimate Hop Popping (PHP) MAY be used and must\n  \
    \ be reported when used.\n   Figures 2 through 9 use the following convention\
    \ and are subset of\n   Figure 1:\n      a) HE is Head-End\n      b) T/E is Tail-End\n\
    \      c) MID is Midpoint\n      d) MP is Merge Point\n      e) PLR is Point of\
    \ Local Repair\n      f) PRI is Primary Path\n      g) BKP denotes Backup Path\
    \ and Nodes\n      h) UR is Upstream Router\n"
- title: 6.1.  Link Protection
  contents:
  - '6.1.  Link Protection

    '
- title: '6.1.1.  Link Protection: 1-Hop Primary (from PLR) and 1-Hop Backup'
  contents:
  - "6.1.1.  Link Protection: 1-Hop Primary (from PLR) and 1-Hop Backup\n        Tail-End\
    \ Tunnels\n               +-------+  +--------+    +--------+\n              \
    \ |  R1   |  |   R2   | PRI|   R3   |\n               | UR/HE |--| HE/MID |----|\
    \ MP/T/E |\n               |       |  |  PLR   |----|        |\n             \
    \  +-------+  +--------+ BKP+--------+\n                             Figure 2\n\
    \          Traffic            No. of Labels   No. of labels\n                \
    \             before failure  after failure\n          IP TRAFFIC (P-P)      \
    \   0             0\n          Layer3 VPN (PE-PE)       1             1\n    \
    \      Layer3 VPN (PE-P)        2             2\n          Layer2 VC (PE-PE) \
    \       1             1\n          Layer2 VC (PE-P)         2             2\n\
    \          Midpoint LSPs            0             0\n   Please note the following:\n\
    \   a) For the P-P case, R2 and R3 act as P routers\n   b) For the PE-PE cases,\
    \ R2 acts as a PE and R3 acts as a remote PE\n   c) For the PE-P cases, R2 acts\
    \ as a PE router, R3 acts as a P router,\n      and R5 acts as a remote PE router\
    \ (please refer to Figure 1 for\n      complete setup)\n   d) For the midpoint\
    \ case, R1, R2, and R3 act as HE, midpoint/PLR, and\n      tail-end, respectively\
    \ (as shown in the figure above)\n"
- title: '6.1.2.  Link Protection: 1-Hop Primary (from PLR) and 2-Hop Backup'
  contents:
  - "6.1.2.  Link Protection: 1-Hop Primary (from PLR) and 2-Hop Backup\n        Tail-End\
    \ Tunnels\n             +-------+    +--------+    +--------+\n             |\
    \  R1   |    |  R2    |    |   R3   |\n             | UR/HE |    | HE/MID |PRI\
    \ | MP/T/E |\n             |       |----|  PLR   |----|        |\n           \
    \  +-------+    +--------+    +--------+\n                              |BKP \
    \              |\n                              |    +--------+    |\n       \
    \                       |    |   R6   |    |\n                              |----|\
    \  BKP   |----|\n                                   |   MID  |\n             \
    \                      +--------+\n                           Figure 3\n     \
    \     Traffic            No. of Labels   No. of labels\n                     \
    \        before failure  after failure\n          IP TRAFFIC (P-P)       0   \
    \           1\n          Layer3 VPN (PE-PE)     1              2\n          Layer3\
    \ VPN (PE-P)      2              3\n          Layer2 VC (PE-PE)      1       \
    \       2\n          Layer2 VC (PE-P)       2              3\n          Midpoint\
    \ LSPs          0              1\n   Please note the following:\n   a) For the\
    \ P-P case, R2 and R3 act as P routers\n   b) For PE-PE cases, R2 acts as a PE\
    \ and R3 acts as a remote PE\n   c) For PE-P cases, R2 acts as a PE router, R3\
    \ acts as a P router, and\n      R5 acts as a remote PE router (please refer to\
    \ Figure 1 for\n      complete setup)\n   d) For the midpoint case, R1, R2, and\
    \ R3 act as HE, midpoint/PLR, and\n      tail-end, respectively (as shown in the\
    \ figure above)\n"
- title: '6.1.3.  Link Protection: 2-Hop (or More) Primary (from PLR) and 1-Hop'
  contents:
  - "6.1.3.  Link Protection: 2-Hop (or More) Primary (from PLR) and 1-Hop\n     \
    \   Backup Tail-End Tunnels\n             +--------+    +--------+    +--------+\
    \      +--------+\n             |  R1    |    | R2     |PRI |   R3   |PRI   |\
    \   R4   |\n             |  UR/HE |----| HE/MID |----| MP/MID |------|  T/E  \
    \ |\n             |        |    | PLR    |----|        |      |        |\n   \
    \          +--------+    +--------+ BKP+--------+      +--------+\n          \
    \                         Figure 4\n          Traffic            No. of Labels\
    \   Num of labels\n                             before failure  after failure\n\
    \          IP TRAFFIC (P-P)       1                1\n          Layer3 VPN (PE-PE)\
    \     2                2\n          Layer3 VPN (PE-P)      3                3\n\
    \          Layer2 VC (PE-PE)      2                2\n          Layer2 VC (PE-P)\
    \       3                3\n          Midpoint LSPs          1               \
    \ 1\n   Please note the following:\n   a) For the P-P case, R2, R3, and R4 act\
    \ as P routers\n   b) For PE-PE cases, R2 acts as a PE and R4 acts as a remote\
    \ PE c) For\n      PE-P cases, R2 acts as a PE router, R3 acts as a P router,\
    \ and R5\n      acts as remote PE router (please refer to Figure 1 for complete\n\
    \      setup)\n   d) For the midpoint case, R1, R2, R3, and R4 act as HE, midpoint/PLR,\n\
    \      and tail-end, respectively (as shown in the figure above)\n"
- title: '6.1.4.  Link Protection: 2-Hop (or More) Primary (from PLR) and 2-Hop'
  contents:
  - "6.1.4.  Link Protection: 2-Hop (or More) Primary (from PLR) and 2-Hop\n     \
    \   Backup Tail-End Tunnels\n             +--------+    +--------+PRI +--------+\
    \  PRI +--------+\n             |  R1    |    |  R2    |    |   R3   |      |\
    \   R4   |\n             | UR/HE  |----| HE/MID |----|  MP/MID|------|  T/E  \
    \ |\n             |        |    | PLR    |    |        |      |        |\n   \
    \          +--------+    +--------+    +--------+      +--------+\n          \
    \                 BKP|              |\n                              |   +--------+\
    \ |\n                              |   |   R6   | |\n                        \
    \      +---|  BKP   |-\n                                  |  MID   |\n       \
    \                           +--------+\n                                   Figure\
    \ 5\n          Traffic            No. of Labels   No. of labels\n            \
    \                 before failure  after failure\n          IP TRAFFIC (P-P)  \
    \     1              2\n          Layer3 VPN (PE-PE)     2              3\n  \
    \        Layer3 VPN (PE-P)      3              4\n          Layer2 VC (PE-PE)\
    \      2              3\n          Layer2 VC (PE-P)       3              4\n \
    \         Midpoint LSPs          1              2\n   Please note the following:\n\
    \   a) For the P-P case, R2, R3, and R4 act as P routers\n   b) For PE-PE cases,\
    \ R2 acts as a PE and R4 acts as a remote PE\n   c) For PE-P cases, R2 acts as\
    \ a PE router, R3 acts as a P router, and\n      R5 acts as remote PE router (please\
    \ refer to Figure 1 for complete\n      setup)\n   d) For the midpoint case, R1,\
    \ R2, R3 and R4 act as HE, midpoint/PLR,\n      and tail-end, respectively (as\
    \ shown in the figure above)\n"
- title: 6.2.  Node Protection
  contents:
  - '6.2.  Node Protection

    '
- title: '6.2.1.  Node Protection: 2-Hop Primary (from PLR) and 1-Hop Backup'
  contents:
  - "6.2.1.  Node Protection: 2-Hop Primary (from PLR) and 1-Hop Backup\n        Tail-End\
    \ Tunnels\n             +--------+    +--------+    +--------+      +--------+\n\
    \             |  R1    |    |  R2    |PRI |   R3   | PRI  |   R4   |\n       \
    \      | UR/HE  |----| HE/MID |----|  MID   |------| MP/T/E |\n             |\
    \        |    |  PLR   |    |        |      |        |\n             +--------+\
    \    +--------+    +--------+      +--------+\n                             |BKP\
    \                          |\n                              -----------------------------\n\
    \                                  Figure 6\n          Traffic            No.\
    \ of Labels   No. of labels\n                             before failure  after\
    \ failure\n          IP TRAFFIC (P-P)       1             0\n          Layer3\
    \ VPN (PE-PE)     2             1\n          Layer3 VPN (PE-P)      3        \
    \     2\n          Layer2 VC (PE-PE)      2             1\n          Layer2 VC\
    \ (PE-P)       3             2\n          Midpoint LSPs          1           \
    \  0\n   Please note the following:\n   a) For the P-P case, R2, R3, and R4 act\
    \ as P routers\n   b) For PE-PE cases, R2 acts as a PE and R4 acts as a remote\
    \ PE\n   c) For PE-P cases, R2 acts as a PE router, R4 acts as a P router, and\n\
    \      R5 acts as remote PE router (please refer to Figure 1 for complete\n  \
    \    setup)\n   d) For the midpoint case, R1, R2, R3, and R4 act as HE, midpoint/PLR,\n\
    \      and tail-end, respectively (as shown in the figure above)\n"
- title: '6.2.2.  Node Protection: 2-Hop Primary (from PLR) and 2-Hop Backup'
  contents:
  - "6.2.2.  Node Protection: 2-Hop Primary (from PLR) and 2-Hop Backup\n        Tail-End\
    \ Tunnels\n             +--------+    +--------+    +--------+    +--------+\n\
    \             |  R1    |    |  R2    |    |   R3   |    |   R4   |\n         \
    \    | UR/HE  |    | HE/MID |PRI |  MID   |PRI | MP/T/E |\n             |    \
    \    |----|  PLR   |----|        |----|        |\n             +--------+    +--------+\
    \    +--------+    +--------+\n                             |                \
    \            |\n                          BKP|         +--------+         |\n\
    \                             |         |   R6   |         |\n               \
    \               ---------|  BKP   |---------\n                               \
    \        |  MID   |\n                                       +--------+\n     \
    \                              Figure 7\n          Traffic            No. of Labels\
    \   No. of labels\n                             before failure   after failure\n\
    \          IP TRAFFIC (P-P)       1              1\n          Layer3 VPN (PE-PE)\
    \     2              2\n          Layer3 VPN (PE-P)      3              3\n  \
    \        Layer2 VC (PE-PE)      2              2\n          Layer2 VC (PE-P) \
    \      3              3\n          Midpoint LSPs         1              1\n  \
    \ Please note the following:\n   a) For the P-P case, R2, R3, and R4 act as P\
    \ routers\n   b) For PE-PE cases, R2 acts as a PE and R4 acts as a remote PE\n\
    \   c) For PE-P cases, R2 acts as a PE router, R4 acts as a P router, and\n  \
    \    R5 acts as remote PE router (please refer to Figure 1 for complete\n    \
    \  setup)\n   d) For the midpoint case, R1, R2, R3, and R4 act as HE, midpoint/PLR,\n\
    \      and tail-end, respectively (as shown in the figure above)\n"
- title: '6.2.3.  Node Protection: 3-Hop (or More) Primary (from PLR) and 1-Hop'
  contents:
  - "6.2.3.  Node Protection: 3-Hop (or More) Primary (from PLR) and 1-Hop\n     \
    \   Backup Tail-End Tunnels\n         +--------+  +--------+PRI+--------+PRI+--------+PRI+--------+\n\
    \         |  R1    |  |  R2    |   |   R3   |   |   R4   |   |   R5   |\n    \
    \     | UR/HE  |--| HE/MID |---| MID    |---|  MP    |---|  T/E   |\n        \
    \ |        |  |  PLR   |   |        |   |        |   |        |\n         +--------+\
    \  +--------+   +--------+   +--------+   +--------+\n                     BKP|\
    \                          |\n                         --------------------------\n\
    \                                   Figure 8\n          Traffic            No.\
    \ of Labels  No. of labels\n                             before failure  after\
    \ failure\n          IP TRAFFIC (P-P)       1             1\n          Layer3\
    \ VPN (PE-PE)     2             2\n          Layer3 VPN (PE-P)      3        \
    \     3\n          Layer2 VC (PE-PE)      2             2\n          Layer2 VC\
    \ (PE-P)       3             3\n          Midpoint LSPs          1           \
    \  1\n   Please note the following:\n   a) For the P-P case, R2, R3, R4, and R5\
    \ act as P routers\n   b) For PE-PE cases, R2 acts as a PE and R5 acts as a remote\
    \ PE\n   c) For PE-P cases, R2 acts as a PE router, R4 acts as a P router, and\n\
    \      R5 acts as remote PE router (please refer to Figure 1 for complete\n  \
    \    setup)\n   d) For the midpoint case, R1, R2, R3, R4, and R5 act as HE,\n\
    \      midpoint/PLR, and tail-end, respectively (as shown in the figure\n    \
    \  above)\n"
- title: '6.2.4.  Node Protection: 3-Hop (or More) Primary (from PLR) and 2-Hop'
  contents:
  - "6.2.4.  Node Protection: 3-Hop (or More) Primary (from PLR) and 2-Hop\n     \
    \   Backup Tail-End Tunnels\n      +--------+   +--------+   +--------+   +--------+\
    \   +--------+\n      |  R1    |   |  R2    |   |   R3   |   |   R4   |   |  \
    \ R5   |\n      | UR/HE  |   | HE/MID |PRI|  MID   |PRI|  MP    |PRI|  T/E   |\n\
    \      |        |-- |  PLR   |---|        |---|        |---|        |\n      +--------+\
    \   +--------+   +--------+   +--------+   +--------+\n                    BKP|\
    \                          |\n                       |         +--------+    \
    \   |\n                       |         |  R6    |       |\n                 \
    \       ---------|  BKP   |-------\n                                 |  MID  \
    \ |\n                                 +--------+\n                           \
    \       Figure 9\n          Traffic            No. of Labels   No. of labels\n\
    \                             before failure   after failure\n          IP TRAFFIC\
    \ (P-P)       1             2\n          Layer3 VPN (PE-PE)     2            \
    \ 3\n          Layer3 VPN (PE-P)      3             4\n          Layer2 VC (PE-PE)\
    \      2             3\n          Layer2 VC (PE-P)       3             4\n   \
    \       Midpoint LSPs          1             2\n   Please note the following:\n\
    \   a) For the P-P case, R2, R3, R4, and R5 act as P routers\n   b) For PE-PE\
    \ cases, R2 acts as a PE and R5 acts as a remote PE\n   c) For PE-P cases, R2\
    \ acts as a PE router, R4 acts as a P router,\n      and R5 acts as remote PE\
    \ router (please refer to Figure 1 for\n      complete setup)\n   d) For the midpoint\
    \ case, R1, R2, R3, R4, and R5 act as HE,\n      midpoint/PLR, and tail-end, respectively\
    \ (as shown in the\n      figure above)\n"
- title: 7.  Test Methodology
  contents:
  - "7.  Test Methodology\n   The procedure described in this section can be applied\
    \ to all eight\n   base test cases and the associated topologies.  The backup\
    \ as well as\n   the primary tunnels are configured to be alike in terms of bandwidth\n\
    \   usage.  In order to benchmark failover with all possible label stack\n   depth\
    \ applicable (as seen with current deployments), it is\n   RECOMMENDED to perform\
    \ all of the test cases provided in this\n   section.  The forwarding performance\
    \ test cases in Section 7.1 MUST\n   be performed prior to performing the failover\
    \ test cases.\n   The considerations of Section 4 of [RFC2544] are applicable\
    \ when\n   evaluating the results obtained using these methodologies as well.\n"
- title: 7.1.  MPLS-FRR Forwarding Performance
  contents:
  - "7.1.  MPLS-FRR Forwarding Performance\n   Benchmarking failover time [RFC6414]\
    \ for MPLS protection first\n   requires a baseline measurement of the forwarding\
    \ performance of the\n   test topology, including the DUT.  Forwarding performance\
    \ is\n   benchmarked by the throughput as defined in [RFC5695] and measured in\n\
    \   units of packets per second (pps).  This section provides two test\n   cases\
    \ to benchmark forwarding performance.  These are with the DUT\n   configured\
    \ as a head-end PLR, midpoint PLR, and egress PLR.\n"
- title: 7.1.1.  Head-End PLR Forwarding Performance
  contents:
  - "7.1.1.  Head-End PLR Forwarding Performance\n   Objective:\n      To benchmark\
    \ the maximum rate (pps) on the PLR (as head-end) over\n      the primary LSP\
    \ and backup LSP.\n      Test Setup:\n      A.  Select any one topology out of\
    \ the eight from Section 6.\n      B.  Select or enable IP, L3 VPN, or L2 VPN\
    \ services with the DUT\n          as head-end PLR.\n      C.  The DUT will also\
    \ have two interfaces connected to the traffic\n          generator/analyzer.\
    \  (If the node downstream of the PLR is not\n          a simulated node, then\
    \ the ingress of the tunnel should have\n          one link connected to the traffic\
    \ generator, and the node\n          downstream of the PLR or the egress of the\
    \ tunnel should have\n          a link connected to the traffic analyzer).\n \
    \  Procedure:\n      1.   Establish the primary LSP on R2 required by the topology\n\
    \           selected.\n      2.   Establish the backup LSP on R2 required by the\
    \ selected\n           topology.\n      3.   Verify that primary and backup LSPs\
    \ are up and that the\n           primary is protected.\n      4.   Verify that\
    \ Fast Reroute protection is enabled and ready.\n      5.   Set up traffic streams\
    \ as described in Section 5.7.\n      6.   Send MPLS traffic over the primary\
    \ LSP at the throughput\n           supported by the DUT (Section 6 of [RFC2544]).\n\
    \      7.   Record the throughput over the primary LSP.\n      8.   Trigger a\
    \ link failure as described in Section 5.1.\n      9.   Verify that the offered\
    \ load gets mapped to the backup tunnel\n           and measure the Additive Backup\
    \ Delay [RFC6414].\n      10.  30 seconds after failover, stop the offered load\
    \ and measure\n           the throughput, packet loss, out-of-order packets, and\n\
    \           duplicate packets over the backup LSP.\n      11.  Adjust the offered\
    \ load and repeat steps 6 through 10 until\n           the throughput values for\
    \ the primary and backup LSPs are\n           equal.\n      12.  Record the final\
    \ throughput, which corresponds to the offered\n           load that will be used\
    \ for the head-end PLR failover test\n           cases.\n"
- title: 7.1.2.  Midpoint PLR Forwarding Performance
  contents:
  - "7.1.2.  Midpoint PLR Forwarding Performance\n   Objective:\n      To benchmark\
    \ the maximum rate (pps) on the PLR (as midpoint) over\n      the primary LSP\
    \ and backup LSP.\n   Test Setup:\n      A.  Select any one topology out of the\
    \ eight from Section 6.\n      B.  The DUT will also have two interfaces connected\
    \ to the traffic\n          generator.\n   Procedure:\n      1.   Establish the\
    \ primary LSP on R1 required by the topology\n           selected.\n      2. \
    \  Establish the backup LSP on R2 required by the selected\n           topology.\n\
    \      3.   Verify that primary and backup LSPs are up and that the\n        \
    \   primary is protected.\n      4.   Verify that Fast Reroute protection is enabled\
    \ and ready.\n      5.   Set up traffic streams as described in Section 5.7.\n\
    \      6.   Send MPLS traffic over the primary LSP at the throughput\n       \
    \    supported by the DUT (Section 6 of [RFC2544]).\n      7.   Record the throughput\
    \ over the primary LSP.\n      8.   Trigger a link failure as described in Section\
    \ 5.1.\n      9.   Verify that the offered load gets mapped to the backup tunnel\n\
    \           and measure the Additive Backup Delay [RFC6414].\n      10.  30 seconds\
    \ after failover, stop the offered load and measure\n           the throughput,\
    \ packet loss, out-of-order packets, and\n           duplicate packets over the\
    \ backup LSP.\n      11.  Adjust the offered load and repeat steps 6 through 10\
    \ until\n           the throughput values for the primary and backup LSPs are\n\
    \           equal.\n      12.  Record the final throughput, which corresponds\
    \ to the offered\n           load that will be used for the midpoint PLR failover\
    \ test\n           cases.\n"
- title: 7.2.  Head-End PLR with Link Failure
  contents:
  - "7.2.  Head-End PLR with Link Failure\n   Objective:\n      To benchmark the MPLS\
    \ failover time due to link failure events\n      described in Section 5.1 experienced\
    \ by the DUT, which is the\n      head-end PLR.\n   Test Setup:\n      A.  Select\
    \ any one topology out of the eight from Section 6.\n      B.  Select or enable\
    \ IP, L3 VPN, or L2 VPN services with the DUT\n          as head-end PLR.\n  \
    \    C.  The DUT will also have two interfaces connected to the traffic\n    \
    \      generator/analyzer.  (If the node downstream of the PLR is not\n      \
    \    a simulated node, then the ingress of the tunnel should have\n          one\
    \ link connected to the traffic generator, and the node\n          downstream\
    \ to the PLR or the egress of the tunnel should have\n          a link connected\
    \ to the traffic analyzer).\n   Test Configuration:\n      1.  Configure the number\
    \ of primaries on R2 and the backups on R2\n          as required by the topology\
    \ selected.\n      2.  Configure the test setup to support reversion.\n      3.\
    \  Advertise prefixes (as per the FRR Scalability Table in\n          Appendix\
    \ A) by the tail-end.\n   Procedure:\n      The test case in Section 7.1.1, \"\
    Head-End PLR Forwarding\n      Performance\", MUST be completed first to obtain\
    \ the throughput to\n      use as the offered load.\n      1.   Establish the\
    \ primary LSP on R2 required by the topology\n           selected.\n      2. \
    \  Establish the backup LSP on R2 required by the selected\n           topology.\n\
    \      3.   Verify that primary and backup LSPs are up and that the\n        \
    \   primary is protected.\n      4.   Verify that Fast Reroute protection is enabled\
    \ and ready.\n      5.   Set up traffic streams for the offered load as described\
    \ in\n           Section 5.7.\n      6.   Provide the offered load from the tester\
    \ at the throughput\n           [RFC1242] level obtained from the test case in\
    \ Section 7.1.1.\n      7.   Verify that traffic is switched over the primary\
    \ LSP without\n           packet loss.\n      8.   Trigger a link failure as described\
    \ in Section 5.1.\n      9.   Verify that the offered load gets mapped to the\
    \ backup tunnel\n           and measure the Additive Backup Delay [RFC6414].\n\
    \      10.  30 seconds after failover, stop the offered load and measure\n   \
    \        the total failover packet loss [RFC6414].\n      11.  Calculate the failover\
    \ time benchmark using the selected\n           failover time calculation method\
    \ (TBLM, PLBM, or TBM)\n           [RFC6414].\n      12.  Restart the offered\
    \ load and restore the primary LSP to\n           verify that reversion occurs\
    \ and measure the Reversion Packet\n           Loss [RFC6414].\n      13.  Calculate\
    \ the Reversion Time benchmark using the selected\n           failover time calculation\
    \ method (TBLM, PLBM, or TBM)\n           [RFC6414].\n      14.  Verify that the\
    \ head-end signals new LSP and protection\n           should be in place again.\n\
    \   It is RECOMMENDED that this procedure be repeated for each of the\n   link\
    \ failure triggers defined in Section 5.1.\n"
- title: 7.3.  Midpoint PLR with Link Failure
  contents:
  - "7.3.  Midpoint PLR with Link Failure\n   Objective:\n      To benchmark the MPLS\
    \ failover time due to link failure events\n      described in Section 5.1 experienced\
    \ by the DUT, which is the\n      midpoint PLR.\n   Test Setup:\n      A.  Select\
    \ any one topology out of the eight from Section 6.\n      B.  The DUT will also\
    \ have two interfaces connected to the traffic\n          generator.\n   Test\
    \ Configuration:\n      1.  Configure the number of primaries on R1 and the backups\
    \ on R2\n          as required by the topology selected.\n      2.  Configure\
    \ the test setup to support reversion.\n      3.  Advertise prefixes (as per the\
    \ FRR Scalability Table in\n          Appendix A) by the tail-end.\n   Procedure:\n\
    \      The test case in Section 7.1.2, \"Midpoint PLR Forwarding\n      Performance\"\
    , MUST be completed first to obtain the throughput to\n      use as the offered\
    \ load.\n      1.  Establish the primary LSP on R1 as required by the topology\n\
    \          selected.\n      2.  Establish the backup LSP on R2 as required by\
    \ the selected\n          topology.\n      3.  Perform steps 3 through 14 from\
    \ Section 7.2, \"Head-End PLR\n          with Link Failure\".\n   It is RECOMMENDED\
    \ that this procedure be repeated for each of the\n   link failure triggers defined\
    \ in section 5.1.\n"
- title: 7.4.  Head-End PLR with Node Failure
  contents:
  - "7.4.  Head-End PLR with Node Failure\n   Objective:\n      To benchmark the MPLS\
    \ failover time due to node failure events\n      described in Section 5.1 experienced\
    \ by the DUT, which is the\n      head-end PLR.\n   Test Setup:\n      A.  Select\
    \ any one topology out of the eight from Section 6.\n      B.  Select or enable\
    \ IP, L3 VPN, or L2 VPN services with the DUT\n          as head-end PLR.\n  \
    \    C.  The DUT will also have two interfaces connected to the traffic\n    \
    \      generator/analyzer.\n   Test Configuration:\n      1.  Configure the number\
    \ of primaries on R2 and the backups on R2\n          as required by the topology\
    \ selected.\n      2.  Configure the test setup to support reversion.\n      3.\
    \  Advertise prefixes (as per the FRR Scalability Table in\n          Appendix\
    \ A) by the tail-end.\n   Procedure:\n      The test case in Section 7.1.1, \"\
    Head-End PLR Forwarding\n      Performance\", MUST be completed first to obtain\
    \ the throughput to\n      use as the offered load.\n      1.  Establish the primary\
    \ LSP on R2 as required by the topology\n          selected.\n      2.  Establish\
    \ the backup LSP on R2 as required by the selected\n          topology.\n    \
    \  3.  Verify that the primary and backup LSPs are up and that the\n         \
    \ primary is protected.\n      4.  Verify that Fast Reroute protection is enabled\
    \ and ready.\n      5.  Set up traffic streams for the offered load as described\
    \ in\n          Section 5.7.\n      6.  Provide the offered load from the tester\
    \ at the throughput\n          [RFC1242] level obtained from the test case in\
    \ Section 7.1.1.\n      7.  Verify that traffic is switched over the primary LSP\
    \ without\n          packet loss.\n      8.  Trigger a node failure as described\
    \ in Section 5.1.\n      9.  Perform steps 9 through 14 in Section 7.2, \"Head-End\
    \ PLR with\n          Link Failure\".\n   It is RECOMMENDED that this procedure\
    \ be repeated for each of the\n   node failure triggers defined in Section 5.1.\n"
- title: 7.5.  Midpoint PLR with Node Failure
  contents:
  - "7.5.  Midpoint PLR with Node Failure\n   Objective:\n      To benchmark the MPLS\
    \ failover time due to node failure events\n      described in Section 5.1 experienced\
    \ by the DUT, which is the\n      midpoint PLR.\n   Test Setup:\n      A.  Select\
    \ any one topology from Sections 6.1 to 6.2.\n      B.  The DUT will also have\
    \ two interfaces connected to the traffic\n          generator.\n   Test Configuration:\n\
    \      1.  Configure the number of primaries on R1 and the backups on R2\n   \
    \       as required by the topology selected.\n      2.  Configure the test setup\
    \ to support reversion.\n      3.  Advertise prefixes (as per the FRR Scalability\
    \ Table in\n          Appendix A) by the tail-end.\n   Procedure:\n      The test\
    \ case in Section 7.1.1, \"Midpoint PLR Forwarding\n      Performance\", MUST\
    \ be completed first to obtain the throughput to\n      use as the offered load.\n\
    \      1.  Establish the primary LSP on R1 as required by the topology\n     \
    \     selected.\n      2.  Establish the backup LSP on R2 as required by the selected\n\
    \          topology.\n      3.  Verify that the primary and backup LSPs are up\
    \ and that the\n          primary is protected.\n      4.  Verify that Fast Reroute\
    \ protection is enabled and ready.\n      5.  Set up traffic streams for the offered\
    \ load as described in\n          Section 5.7.\n      6.  Provide the offered\
    \ load from the tester at the throughput\n          [RFC1242] level obtained from\
    \ the test case in Section 7.1.1.\n      7.  Verify that traffic is switched over\
    \ the primary LSP without\n          packet loss.\n      8.  Trigger a node failure\
    \ as described in Section 5.1.\n      9.  Perform steps 9 through 14 in Section\
    \ 7.2, \"Head-End PLR with\n          Link Failure\".\n   It is RECOMMENDED that\
    \ this procedure be repeated for each of the\n   node failure triggers defined\
    \ in Section 5.1.\n"
- title: 8.  Reporting Format
  contents:
  - "8.  Reporting Format\n   For each test, it is RECOMMENDED that the results be\
    \ reported in the\n   following format.\n         Parameter                  \
    \        Units\n         IGP used for the test              ISIS-TE / OSPF-TE\n\
    \         Interface types                    Gige,POS,ATM,VLAN, etc.\n       \
    \  Packet Sizes offered to the DUT    Bytes (at L3)\n         Offered Load (Throughput)\
    \          Packets per second\n         IGP routes advertised              Number\
    \ of IGP routes\n         Penultimate Hop Popping            Used/Not Used\n \
    \        RSVP hello timers                  Milliseconds\n         Number of Protected\
    \ tunnels        Number of tunnels\n         Number of VPN routes installed  \
    \   Number of VPN routes\n         on the head-end\n         Number of VC tunnels\
    \               Number of VC tunnels\n         Number of midpoint tunnels    \
    \     Number of tunnels\n         Number of Prefixes protected by    Number of\
    \ LSPs\n         Primary\n         Topology being used                Section\
    \ number, and\n                                            figure reference\n\
    \         Failover event                     Event type\n         Reoptimization\
    \                     Yes/No\n      Benchmarks (to be recorded for each test case):\n\
    \      Failover-\n          Failover Time                        seconds\n   \
    \       Failover Packet Loss                 packets\n          Additive Backup\
    \ Delay                seconds\n          Out-of-Order Packets               \
    \  packets\n          Duplicate Packets                    packets\n         \
    \ Failover Time Calculation Method     Method Used\n      Reversion-\n       \
    \   Reversion Time                       seconds\n          Reversion Packet Loss\
    \                packets\n          Additive Backup Delay                seconds\n\
    \          Out-of-Order Packets                 packets\n          Duplicate Packets\
    \                    packets\n          Failover Time Calculation Method     Method\
    \ Used\n"
- title: 9.  Security Considerations
  contents:
  - "9.  Security Considerations\n   Benchmarking activities as described in this\
    \ memo are limited to\n   technology characterization using controlled stimuli\
    \ in a laboratory\n   environment, with dedicated address space and the constraints\n\
    \   specified in the sections above.\n   The benchmarking network topology will\
    \ be an independent test setup\n   and MUST NOT be connected to devices that may\
    \ forward the test\n   traffic into a production network, or misroute traffic\
    \ to the test\n   management network.\n   Further, benchmarking is performed on\
    \ a \"black-box\" basis, relying\n   solely on measurements observable external\
    \ to the DUT/SUT.\n   Special capabilities SHOULD NOT exist in the DUT/SUT specifically\
    \ for\n   benchmarking purposes.  Any implications for network security arising\n\
    \   from the DUT/SUT SHOULD be identical in the lab and in production\n   networks.\n"
- title: 10.  Acknowledgements
  contents:
  - "10.  Acknowledgements\n   We would like to thank Jean Philip Vasseur for his\
    \ invaluable input\n   to the document, Curtis Villamizar for his contribution\
    \ in suggesting\n   text on the definition and need for benchmarking Correlated\
    \ failures,\n   and Bhavani Parise for his textual input and review.  Additionally,\n\
    \   we would like to thank Al Morton, Arun Gandhi, Amrit Hanspal, Karu\n   Ratnam,\
    \ Raveesh Janardan, Andrey Kiselev, and Mohan Nanduri for their\n   formal reviews\
    \ of this document.\n"
- title: 11.  References
  contents:
  - '11.  References

    '
- title: 11.1.  Normative References
  contents:
  - "11.1.  Normative References\n   [RFC1242]  Bradner, S., \"Benchmarking Terminology\
    \ for Network\n              Interconnection Devices\", RFC 1242, July 1991.\n\
    \   [RFC2119]  Bradner, S., \"Key words for use in RFCs to Indicate\n        \
    \      Requirement Levels\", BCP 14, RFC 2119, March 1997.\n   [RFC2544]  Bradner,\
    \ S. and J. McQuaid, \"Benchmarking Methodology for\n              Network Interconnect\
    \ Devices\", RFC 2544, March 1999.\n   [RFC4090]  Pan, P., Ed., Swallow, G., Ed.,\
    \ and A. Atlas, Ed., \"Fast\n              Reroute Extensions to RSVP-TE for LSP\
    \ Tunnels\", RFC 4090,\n              May 2005.\n   [RFC5695]  Akhter, A., Asati,\
    \ R., and C. Pignataro, \"MPLS Forwarding\n              Benchmarking Methodology\
    \ for IP Flows\", RFC 5695, November\n              2009.\n   [RFC6412]  Poretsky,\
    \ S., Imhoff, B., and K. Michielsen, \"Terminology\n              for Benchmarking\
    \ Link-State IGP Data-Plane Route\n              Convergence\", RFC 6412, November\
    \ 2011.\n   [RFC6414]  Poretsky, S., Papneja, R., Karthik, J., and S. Vapiwala,\n\
    \              \"Benchmarking Terminology for Protection Performance\", RFC\n\
    \              6414, November 2011.\n"
- title: 11.2.  Informative References
  contents:
  - "11.2.  Informative References\n   [RFC2285]  Mandeville, R., \"Benchmarking Terminology\
    \ for LAN\n              Switching Devices\", RFC 2285, February 1998.\n   [RFC4202]\
    \  Kompella, K., Ed., and Y. Rekhter, Ed., \"Routing\n              Extensions\
    \ in Support of Generalized Multi-Protocol Label\n              Switching (GMPLS)\"\
    , RFC 4202, October 2005.\n   [RFC4689]  Poretsky, S., Perser, J., Erramilli,\
    \ S., and S. Khurana,\n              \"Terminology for Benchmarking Network-layer\
    \ Traffic\n              Control Mechanisms\", RFC 4689, October 2006.\n"
- title: Appendix A.  Fast Reroute Scalability Table
  contents:
  - "Appendix A.  Fast Reroute Scalability Table\n   This section provides the recommended\
    \ numbers for evaluating the\n   scalability of fast reroute implementations.\
    \  It also recommends the\n   typical numbers for IGP/VPNv4 Prefixes, LSP Tunnels,\
    \ and VC entries.\n   Based on the features supported by the DUT, appropriate\
    \ scaling\n   limits can be used for the testbed.\n"
- title: A.1.  FRR IGP Table
  contents:
  - "A.1.  FRR IGP Table\n      No. of Head-End TE Tunnels      IGP Prefixes\n   \
    \   1                               100\n      1                             \
    \  500\n      1                               1000\n      1                  \
    \             2000\n      1                               5000\n      2 (Load\
    \ Balance)                100\n      2 (Load Balance)                500\n   \
    \   2 (Load Balance)                1000\n      2 (Load Balance)             \
    \   2000\n      2 (Load Balance)                5000\n      100              \
    \               100\n      500                             500\n      1000   \
    \                         1000\n      2000                            2000\n"
- title: A.2.  FRR VPN Table
  contents:
  - "A.2.  FRR VPN Table\n      No. of Head-End TE Tunnels      VPNv4 Prefixes\n \
    \     1                               100\n      1                           \
    \    500\n      1                               1000\n      1                \
    \               2000\n      1                               5000\n      1    \
    \                           10000\n      1                               20000\n\
    \      1                               Max\n      2 (Load Balance)           \
    \     100\n      2 (Load Balance)                500\n      2 (Load Balance) \
    \               1000\n      2 (Load Balance)                2000\n      2 (Load\
    \ Balance)                5000\n      2 (Load Balance)                10000\n\
    \      2 (Load Balance)                20000\n      2 (Load Balance)         \
    \       Max\n"
- title: A.3.  FRR Midpoint LSP Table
  contents:
  - "A.3.  FRR Midpoint LSP Table\n   The number of midpoint TE LSPs could be configured\
    \ at recommended\n   levels -- 100, 500, 1000, 2000, or max supported number.\n"
- title: A.4.  FRR VC Table
  contents:
  - "A.4.  FRR VC Table\n      No. of Head-End TE Tunnels      VC entries\n      1\
    \                               100\n      1                               500\n\
    \      1                               1000\n      1                         \
    \      2000\n      1                               Max\n      100            \
    \                 100\n      500                             500\n      1000 \
    \                           1000\n      2000                            2000\n"
- title: Appendix B.  Abbreviations
  contents:
  - "Appendix B.  Abbreviations\n   AIS      - Alarm Indication Signal\n   BFD   \
    \   - Bidirectional Fault Detection\n   BGP      - Border Gateway Protocol\n \
    \  BKP      - Backup Path and Nodes\n   CE       - Customer Edge\n   DUT     \
    \ - Device Under Test\n   FRR      - Fast Reroute\n   HE       - Head-End\n  \
    \ IGP      - Interior Gateway Protocol\n   IP       - Internet Protocol\n   LOS\
    \      - Loss of Signal\n   LSP      - Label Switched Path\n   MID      - Midpoint\n\
    \   MP       - Merge Point\n   MPLS     - Multiprotocol Label Switching\n   N-Nhop\
    \   - Next - Next Hop\n   Nhop     - Next Hop\n   OIR      - Online Insertion\
    \ and Removal\n   P        - Provider\n   PE       - Provider Edge\n   PHP   \
    \   - Penultimate Hop Popping\n   PLBM     - Packet-Loss-Based Method\n   PLR\
    \      - Point of Local Repair\n   PRI      - Primary Path\n   RSVP     - Resource\
    \ reSerVation Protocol\n   RX       - Receive\n   SRLG     - Shared Risk Link\
    \ Group\n   TA       - Traffic Analyzer\n   TBM      - Timestamp-Based Method\n\
    \   TE       - Traffic Engineering\n   TG       - Traffic Generator\n   TX   \
    \    - Transmit\n   UR       - Upstream Router\n   VC       - Virtual Circuit\n\
    \   VPN      - Virtual Private Network\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Rajiv Papneja\n   Huawei Technologies\n   2330 Central\
    \ Expressway\n   Santa Clara, CA  95050\n   USA\n   EMail: rajiv.papneja@huawei.com\n\
    \   Samir Vapiwala\n   Cisco Systems\n   300 Beaver Brook Road\n   Boxborough,\
    \ MA  01719\n   USA\n   EMail: svapiwal@cisco.com\n   Jay Karthik\n   Cisco Systems\n\
    \   300 Beaver Brook Road\n   Boxborough, MA  01719\n   USA\n   EMail: jkarthik@cisco.com\n\
    \   Scott Poretsky\n   Allot Communications\n   300 TradeCenter\n   Woburn, MA\
    \  01801\n   USA\n   EMail: sporetsky@allot.com\n   Shankar Rao\n   Qwest Communications\n\
    \   950 17th Street\n   Suite 1900\n   Denver, CO  80210\n   USA\n   EMail: shankar.rao@du.edu\n\
    \   JL. Le Roux\n   France Telecom\n   2 av Pierre Marzin\n   22300 Lannion\n\
    \   France\n   EMail: jeanlouis.leroux@orange.com\n"
