- title: __initial_text__
  contents:
  - '                Network Discovery and Selection Problem

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Abstract
  contents:
  - "Abstract\n   When multiple access networks are available, users may have\n  \
    \ difficulty in selecting which network to connect to and how to\n   authenticate\
    \ with that network.  This document defines the network\n   discovery and selection\
    \ problem, dividing it into multiple sub-\n   problems.  Some constraints on potential\
    \ solutions are outlined, and\n   the limitations of several solutions (including\
    \ existing ones) are\n   discussed.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  3\n     1.1.  Terminology Used in This Document  . . . . . . .\
    \ . . . . .  4\n   2.  Problem Definition . . . . . . . . . . . . . . . . . .\
    \ . . . .  7\n     2.1.  Discovery of Points of Attachment  . . . . . . . . .\
    \ . . .  8\n     2.2.  Identity Selection . . . . . . . . . . . . . . . . . .\
    \ . .  9\n     2.3.  AAA Routing  . . . . . . . . . . . . . . . . . . . . . .\
    \ . 11\n       2.3.1.  The Default Free Zone  . . . . . . . . . . . . . . . .\
    \ 13\n       2.3.2.  Route Selection and Policy . . . . . . . . . . . . . . 14\n\
    \       2.3.3.  Source Routing . . . . . . . . . . . . . . . . . . . . 15\n  \
    \   2.4.  Network Capabilities Discovery . . . . . . . . . . . . . . 17\n   3.\
    \  Design Issues  . . . . . . . . . . . . . . . . . . . . . . . . 18\n     3.1.\
    \  AAA Routing  . . . . . . . . . . . . . . . . . . . . . . . 18\n     3.2.  Backward\
    \ Compatibility . . . . . . . . . . . . . . . . . . 18\n     3.3.  Efficiency\
    \ Constraints . . . . . . . . . . . . . . . . . . 19\n     3.4.  Scalability \
    \ . . . . . . . . . . . . . . . . . . . . . . . 19\n     3.5.  Static Versus Dynamic\
    \ Discovery  . . . . . . . . . . . . . 21\n     3.6.  Security . . . . . . . .\
    \ . . . . . . . . . . . . . . . . . 21\n     3.7.  Management . . . . . . . .\
    \ . . . . . . . . . . . . . . . . 22\n   4.  Conclusions  . . . . . . . . . .\
    \ . . . . . . . . . . . . . . . 23\n   5.  Security Considerations  . . . . .\
    \ . . . . . . . . . . . . . . 25\n   6.  Informative References . . . . . . .\
    \ . . . . . . . . . . . . . 26\n   Appendix A.  Existing Work . . . . . . . .\
    \ . . . . . . . . . . . . 32\n     A.1.  IETF . . . . . . . . . . . . . . . .\
    \ . . . . . . . . . . . 32\n     A.2.  IEEE 802 . . . . . . . . . . . . . . .\
    \ . . . . . . . . . . 33\n     A.3.  3GPP . . . . . . . . . . . . . . . . . .\
    \ . . . . . . . . . 35\n     A.4.  Other  . . . . . . . . . . . . . . . . . .\
    \ . . . . . . . . 36\n   Appendix B.  Acknowledgements  . . . . . . . . . . .\
    \ . . . . . . . 37\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Today, network access clients are typically pre-configured\
    \ with a\n   list of access networks and corresponding identities and credentials.\n\
    \   However, as network access mechanisms and operators have\n   proliferated,\
    \ it has become increasingly likely that users will\n   encounter networks for\
    \ which no pre-configured settings are\n   available, yet which offer desired\
    \ services and the ability to\n   successfully authenticate with the user's home\
    \ realm.  It is also\n   possible that pre-configured settings will not be adequate\
    \ in some\n   situations.  In such a situation, users can have difficulty in\n\
    \   determining which network to connect to, and how to authenticate to\n   that\
    \ network.\n   The problem arises when any of the following conditions are true:\n\
    \   o  Within a single network, more than one network attachment point is\n  \
    \    available, and the attachment points differ in their roaming\n      arrangements,\
    \ or access to services.  While the link layer\n      capabilities of a point\
    \ of attachment may be advertised, higher-\n      layer capabilities, such as\
    \ roaming arrangements, end-to-end\n      quality of service, or Internet access\
    \ restrictions, may not be.\n      As a result, a user may have difficulty determining\
    \ which services\n      are available at each network attachment point, and which\n\
    \      attachment points it can successfully authenticate to.  For\n      example,\
    \ it is possible that a roaming agreement will only enable\n      a user to authenticate\
    \ to the home realm from some points of\n      attachment, but not others.  Similarly,\
    \ it is possible that access\n      to the Internet may be restricted at some\
    \ points of attachment,\n      but not others, or that end-to-end quality of service\
    \ may not be\n      available in all locations.  In these situations, the network\n\
    \      access client cannot assume that all points of attachment within a\n  \
    \    network offer identical capabilities.\n   o  Multiple networks are available\
    \ for which the user has no\n      corresponding pre-configuration.  The user\
    \ may not have pre-\n      configured an identity and associated credentials for\
    \ use with a\n      network, yet it is possible that the user's home realm is\n\
    \      reachable from that network, enabling the user to successfully\n      authenticate.\
    \  However, unless the roaming arrangements are\n      advertised, the network\
    \ access client cannot determine a priori\n      whether successful authentication\
    \ is likely.  In this situation,\n      it is possible that the user will need\
    \ to try multiple networks in\n      order to find one to which it can successfully\
    \ authenticate, or it\n      is possible that the user will not be able to obtain\
    \ access at\n      all, even though successful authentication is feasible.\n \
    \  o  The user has multiple sets of credentials.  Where no pre-\n      configuration\
    \ exists, it is possible that the user will not be\n      able to determine which\
    \ credentials to use with which attachment\n      point, or even whether any credentials\
    \ it possesses will allow it\n      to authenticate successfully.  An identity\
    \ and associated\n      credentials can be usable for authentication with multiple\n\
    \      networks, and not all of these networks will be pre-configured.\n     \
    \ For example, the user could have one set of credentials from a\n      public\
    \ service provider and another set from an employer, and a\n      network might\
    \ enable authentication with one or more of these\n      credentials.  Yet, without\
    \ pre-configuration, multiple\n      unsuccessful authentication attempts could\
    \ be needed for each\n      attachment point in order to determine what credentials\
    \ are\n      usable, wasting valuable time and resulting in user frustration.\n\
    \      In order to choose between multiple attachment points, it can be\n    \
    \  helpful to provide additional information to enable the correct\n      credentials\
    \ to be determined.\n   o  There are multiple potential roaming paths between\
    \ the visited\n      realm and the user's home realm, and service parameters or\
    \ pricing\n      differs between them.  In this situation, there could be multiple\n\
    \      ways for the user to successfully authenticate using the same\n      identity\
    \ and credentials, yet the cost of each approach might\n      differ.  In this\
    \ case, the access network may not be able to\n      determine the roaming path\
    \ that best matches the user's\n      preferences.  This can lead to the user\
    \ being charged more than\n      necessary, or not obtaining the desired services.\
    \  For example,\n      the visited access realm could have both a direct relationship\n\
    \      with the home realm and an indirect relationship through a roaming\n  \
    \    consortium.  Current Authentication, Authorization, and Accounting\n    \
    \  (AAA) protocols may not be able to route the access request to the\n      home\
    \ AAA sever purely based on the realm within the Network Access\n      Identifier\
    \ (NAI) [RFC4282].  In addition, payload packets can be\n      routed or tunneled\
    \ differently, based on the roaming relationship\n      path.  This may have an\
    \ impact on the available services or their\n      pricing.\n   In Section 2,\
    \ the network discovery and selection problem is defined\n   and divided into\
    \ sub-problems.  Some solution constraints are\n   outlined in Section 3.  Section\
    \ 4 provides conclusions and\n   suggestions for future work.  Appendix A discusses\
    \ existing solutions\n   to portions of the problem.\n"
- title: 1.1.  Terminology Used in This Document
  contents:
  - "1.1.  Terminology Used in This Document\n   The key words \"MUST\", \"MUST NOT\"\
    , \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [RFC2119].\n   Authentication, Authorization, and Accounting (AAA)\n    \
    \  AAA protocols with EAP support include Remote Authentication\n      Dial-In\
    \ User Service (RADIUS) [RFC3579] and Diameter [RFC4072].\n   Access Point (AP)\n\
    \      An entity that has station functionality and provides access to\n     \
    \ distribution services via the wireless medium (WM) for associated\n      stations.\n\
    \   Access Technology Selection\n      This refers to the selection between access\
    \ technologies, e.g.,\n      802.11, Universal Mobile Telecommunications System\
    \ (UMTS), WiMAX.\n      The selection will be dependent upon the access technologies\n\
    \      supported by the device and the availability of networks\n      supporting\
    \ those technologies.\n   Bearer Selection\n      For some access technologies\
    \ (e.g., UMTS), there can be a\n      possibility for delivery of a service (e.g.,\
    \ voice) by using\n      either a circuit-switched or packet-switched bearer.\
    \  Bearer\n      selection refers to selecting one of the bearer types for service\n\
    \      delivery.  The decision can be based on support of the bearer type\n  \
    \    by the device and the network as well as user subscription and\n      operator\
    \ preferences.\n   Basic Service Set (BSS)\n      A set of stations controlled\
    \ by a single coordination function.\n   Decorated NAI\n      A NAI specifying\
    \ a source route.  See Section 2.7 of RFC 4282\n      [RFC4282] for more information.\n\
    \   Extended Service Set (ESS)\n      A set of one or more interconnected basic\
    \ service sets (BSSs) with\n      the same Service Set Identifier (SSID) and integrated\
    \ local area\n      networks (LANs), which appears as a single BSS to the logical\
    \ link\n      control layer at any station associated with one of those BSSs.\n\
    \      This refers to a mechanism that a node uses to discover the\n      networks\
    \ that are reachable from a given access network.\n   Network Access Identifier\
    \ (NAI)\n      The Network Access Identifier (NAI) [RFC4282] is the user identity\n\
    \      submitted by the client during network access authentication.  In\n   \
    \   roaming, the purpose of the NAI is to identify the user as well as\n     \
    \ to assist in the routing of the authentication request.  Please\n      note\
    \ that the NAI may not necessarily be the same as the user's\n      e-mail address\
    \ or the user identity submitted in an application\n      layer authentication.\n\
    \   Network Access Server (NAS)\n      The device that peers connect to in order\
    \ to obtain access to the\n      network.  In Point-to-Point Tunneling Protocol\
    \ (PPTP) terminology,\n      this is referred to as the PPTP Access Concentrator\
    \ (PAC), and in\n      Layer 2 Tunneling Protocol (L2TP) terminology, it is referred\
    \ to\n      as the L2TP Access Concentrator (LAC).  In IEEE 802.11, it is\n  \
    \    referred to as an Access Point (AP).\n   Network Discovery\n      The mechanism\
    \ used to discover available networks.  The discovery\n      mechanism may be\
    \ passive or active, and depends on the access\n      technology.  In passive\
    \ network discovery, the node listens for\n      network announcements; in active\
    \ network discovery, the node\n      solicits network announcements.  It is possible\
    \ for an access\n      technology to utilize both passive and active network discovery\n\
    \      mechanisms.\n   Network Selection\n      Selection of an operator/ISP for\
    \ network access.  Network\n      selection occurs prior to network access authentication.\n\
    \   Realm\n      The realm portion of an NAI [RFC4282].\n   Realm Selection\n\
    \      The selection of the realm (and corresponding NAI) used to access\n   \
    \   the network.  A realm can be reachable from more than one access\n      network\
    \ type, and selection of a realm may not enable network\n      capabilities.\n\
    \   Roaming Capability\n      Roaming capability can be loosely defined as the\
    \ ability to use\n      any one of multiple Internet Service Providers (ISPs),\
    \ while\n      maintaining a formal, customer-vendor relationship with only one.\n\
    \      Examples of cases where roaming capability might be required\n      include\
    \ ISP \"confederations\" and ISP-provided corporate network\n      access support.\n\
    \   Station (STA)\n      A device that contains an IEEE 802.11 conformant medium\
    \ access\n      control (MAC) and physical layer (PHY) interface to the wireless\n\
    \      medium (WM).\n"
- title: 2.  Problem Definition
  contents:
  - "2.  Problem Definition\n   The network discovery and selection problem can be\
    \ broken down into\n   multiple sub-problems.  These include:\n   o  Discovery\
    \ of points of attachment.  This involves the discovery of\n      points of attachment\
    \ in the vicinity, as well as their\n      capabilities.\n   o  Identifier selection.\
    \  This involves selection of the NAI (and\n      credentials) used to authenticate\
    \ to the selected point of\n      attachment.\n   o  AAA routing.  This involves\
    \ routing of the AAA conversation back\n      to the home AAA server, based on\
    \ the realm of the selected NAI.\n   o  Payload routing.  This involves the routing\
    \ of data packets, in\n      the situation where mechanisms more advanced than\
    \ destination-\n      based routing are required.  While this problem is interesting,\
    \ it\n      is not discussed further in this document.\n   o  Network capability\
    \ discovery.  This involves discovering the\n      capabilities of an access network,\
    \ such as whether certain\n      services are reachable through the access network\
    \ and the charging\n      policy.\n   Alternatively, the problem can be divided\
    \ into discovery, decision,\n   and selection components.  The AAA routing problem,\
    \ for instance,\n   involves all components: discovery (which mediating networks\
    \ are\n   available), decision (choosing the \"best\" one), and selection\n  \
    \ (selecting which mediating network to use) components.\n"
- title: 2.1.  Discovery of Points of Attachment
  contents:
  - "2.1.  Discovery of Points of Attachment\n   Traditionally, the discovery of points\
    \ of attachment has been handled\n   by out-of-band mechanisms or link or network\
    \ layer advertisements.\n   RFC 2194 [RFC2194] describes the pre-provisioning\
    \ of dial-up roaming\n   clients, which typically included a list of potential\
    \ phone numbers\n   updated by the provider(s) with which the client had a contractual\n\
    \   relationship.  RFC 3017 [RFC3017] describes the IETF Proposed\n   Standard\
    \ for the Roaming Access eXtensible Markup Language (XML)\n   Document Type Definition\
    \ (DTD).  This covers not only the attributes\n   of the Points of Presence (PoP)\
    \ and Internet Service Providers\n   (ISPs), but also hints on the appropriate\
    \ NAI to be used with a\n   particular PoP.  The XML DTD supports dial-in and\
    \ X.25 access, but\n   has extensible address and media type fields.\n   As access\
    \ networks and the points of attachment have proliferated,\n   out-of-band pre-configuration\
    \ has become increasingly difficult.  For\n   networks with many points of attachment,\
    \ keeping a complete and up-\n   to-date list of points of attachment can be difficult.\
    \  As a result,\n   wireless network access clients typically only attempt to\
    \ pre-\n   configure information relating to access networks, rather than\n  \
    \ individual points of attachment.\n   In IEEE 802.11 Wireless Local Area Networks\
    \ (WLAN), the Beacon and\n   Probe Request/Response mechanism provides a way for\
    \ Stations to\n   discover Access Points (AP) and the capabilities of those APs.\
    \  The\n   IEEE 802.11 specification [IEEE.802.11-2003] provides support for\n\
    \   both passive (Beacon) and active (Probe Request/Response) discovery\n   mechanisms;\
    \ [Fixingapsel] studied the effectiveness of these\n   mechanisms.\n   Among the\
    \ Information Elements (IE) included within the Beacon and\n   Probe Response\
    \ is the Service Set Identifier (SSID), a non-unique\n   identifier of the network\
    \ to which an AP is attached.  The Beacon/\n   Probe facility therefore enables\
    \ network discovery, as well as the\n   discovery of points of attachment and\
    \ the capabilities of those\n   points of attachment.\n   The Global System for\
    \ Mobile Communications (GSM) specifications also\n   provide for discovery of\
    \ points of attachment, as does the Candidate\n   Access Router Discovery (CARD)\
    \ [RFC4066] protocol developed by the\n   IETF SEAMOBY Working Group (WG).\n \
    \  Along with discovery of points of attachment, the capabilities of\n   access\
    \ networks are also typically discovered.  These may include:\n   o  Access network\
    \ name (e.g., IEEE 802.11 SSID)\n   o  Lower layer security mechanism (e.g., IEEE\
    \ 802.11 Wired Equivalent\n      Privacy (WEP) vs. Wi-Fi Protected Access 2 (WPA2))\n\
    \   o  Quality of service capabilities (e.g., IEEE 802.11e support)\n   o  Bearer\
    \ capabilities (e.g., circuit-switched, packet-switched, or\n      both)\n   Even\
    \ though pre-configuration of access networks scales better than\n   pre-configuration\
    \ of points of attachment, where many access networks\n   can be used to authenticate\
    \ to a home realm, providing complete and\n   up-to-date information on each access\
    \ network can be challenging.\n   In such a situation, network access client configuration\
    \ can be\n   minimized by providing information relating to each home realm,\n\
    \   rather than each access network.  One way to enable this is for an\n   access\
    \ network to support \"virtual Access Points\" (virtual APs), and\n   for each\
    \ point of attachment to support virtual APs corresponding to\n   each reachable\
    \ home realm.\n   While a single IEEE 802.11 network may only utilize a single\
    \ SSID, it\n   may cover a wide geographical area, and as a result, may be\n \
    \  segmented, utilizing multiple prefixes.  It is possible that a single\n   SSID\
    \ may be advertised on multiple channels, and may support multiple\n   access\
    \ mechanisms (including Universal Access Method (UAM) and IEEE\n   802.1X [IEEE.8021X-2004])\
    \ which may differ between points of\n   attachment.  A single SSID may also support\
    \ dynamic VLAN access as\n   described in [RFC3580], or may support authentication\
    \ to multiple\n   home AAA servers supporting different realms.  As a result,\
    \ users of\n   a single point of attachment, connecting to the same SSID, may\
    \ not\n   have the same set of services available.\n"
- title: 2.2.  Identity Selection
  contents:
  - "2.2.  Identity Selection\n   As networks proliferate, it becomes more and more\
    \ likely that a user\n   may have multiple identities and credential sets, available\
    \ for use\n   in different situations.  For example, the user may have an account\n\
    \   with one or more Public WLAN providers, a corporate WLAN, and one or\n   more\
    \ wireless Wide Area Network (WAN) providers.\n   Typically, the user will choose\
    \ an identity and corresponding\n   credential set based on the selected network,\
    \ perhaps with additional\n   assistance provided by the chosen authentication\
    \ mechanism.  For\n   example, if Extensible Authentication Protocol - Transport\
    \ Layer\n   Security (EAP-TLS) is the authentication mechanism used with a\n \
    \  particular network, then the user will select the appropriate EAP-TLS\n   client\
    \ certificate based, in part, on the list of trust anchors\n   provided by the\
    \ EAP-TLS server.\n   However, in access networks where roaming is enabled, the\
    \ mapping\n   between an access network and an identity/credential set may not\
    \ be\n   one to one.  For example, it is possible for multiple identities to\n\
    \   be usable on an access network, or for a given identity to be usable\n   on\
    \ a single access network, which may or may not be available.\n   Figure 1 illustrates\
    \ a situation where a user identity may not be\n   usable on a potential access\
    \ network.  In this case, access network 1\n   enables access to users within\
    \ the realm \"isp1.example.com\", whereas\n   access network 3 enables access\
    \ to users within the realm\n   \"corp2.example.com\"; access network 2 enables\
    \ access to users within\n   both realms.\n          ?  ?                 +---------+\
    \       +------------------+\n           ?                   | Access  |     \
    \  |                  |\n           O_/             _-->| Network |------>|\"\
    isp1.example.com\"|\n          /|              /    |    1    |    _->|      \
    \            |\n           |              |    +---------+   /   +------------------+\n\
    \         _/ \\_            |                 /\n                          | \
    \   +---------+ /\n   User \"subscriber@isp1. |    | Access  |/\n     example.com\"\
    \      -- ? -->| Network |\n   also known as          |    |    2    |\\\n   \
    \  \"employee123@corp2.  |    +---------+ \\\n     example.com\"         |   \
    \              \\\n                          |    +---------+   \\_  +-------------------+\n\
    \                          \\_   | Access  |     ->|                   |\n   \
    \                         -->| Network |------>|\"corp2.example.com\"|\n     \
    \                          |   3     |       |                   |\n         \
    \                      +---------+       +-------------------+\n         Figure\
    \ 1: Two credentials, three possible access networks\n   In this situation, a\
    \ user only possessing an identity within the\n   \"corp2.example.com\" realm\
    \ can only successfully authenticate to\n   access networks 2 or 3; a user possessing\
    \ an identity within the\n   \"isp1.example.com\" realm can only successfully\
    \ authenticate to access\n   networks 1 or 2; a user possessing identities within\
    \ both realms can\n   connect to any of the access networks.  The question is:\
    \ how does the\n   user figure out which access networks it can successfully\n\
    \   authenticate to, preferably prior to choosing a point of attachment?\n   Traditionally,\
    \ hints useful in identity selection have been provided\n   out-of-band.  For\
    \ example, the XML DTD, described in [RFC3017],\n   enables a client to select\
    \ between potential points of attachment as\n   well as to select the NAI and\
    \ credentials to use in authenticating\n   with it.\n   Where all points of attachment\
    \ within an access network enable\n   authentication utilizing a set of realms,\
    \ selection of an access\n   network provides knowledge of the identities that\
    \ a client can use to\n   successfully authenticate.  For example, in an access\
    \ network, the\n   set of supported realms corresponding to network name can be\
    \ pre-\n   configured.\n   In some cases, it may not be possible to determine\
    \ the available\n   access networks prior to authentication.  For example,\n \
    \  [IEEE.8021X-2004] does not support network discovery on IEEE 802\n   wired\
    \ networks, so that the peer cannot determine which access\n   network it has\
    \ connected to prior to the initiation of the EAP\n   exchange.\n   It is also\
    \ possible for hints to be embedded within credentials.  In\n   [RFC4334], usage\
    \ hints are provided within certificates used for\n   wireless authentication.\
    \  This involves extending the client's\n   certificate to include the SSIDs with\
    \ which the certificate can be\n   used.\n   However, there may be situations\
    \ in which an access network may not\n   accept a static set of realms at every\
    \ point of attachment.  For\n   example, as part of a roaming agreement, only\
    \ points of attachment\n   within a given region or country may be made available.\
    \  In these\n   situations, mechanisms such as hints embedded within credentials\
    \ or\n   pre-configuration of access network to realm mappings may not be\n  \
    \ sufficient.  Instead, it is necessary for the client to discover\n   usable\
    \ identities dynamically.\n   This is the problem that RFC 4284 [RFC4284] attempts\
    \ to solve, using\n   the EAP-Request/Identity to communicate a list of supported\
    \ realms.\n   However, the problems inherent in this approach are many, as\n \
    \  discussed in Appendix A.1.\n   Note that identity selection also implies selection\
    \ of different\n   credentials, and potentially, selection of different EAP\n\
    \   authentication methods.  In some situations this may imply serious\n   security\
    \ vulnerabilities.  These are discussed in depth in Section 5.\n"
- title: 2.3.  AAA Routing
  contents:
  - "2.3.  AAA Routing\n   Once the identity has been selected, the AAA infrastructure\
    \ needs to\n   route the access request back to the home AAA server.  Typically,\
    \ the\n   routing is based on the Network Access Identifier (NAI) defined in\n\
    \   [RFC4282].\n   Where the NAI does not encode a source route, the routing of\
    \ requests\n   is determined by the AAA infrastructure.  As described in [RFC2194],\n\
    \   most roaming implementations are relatively simple, relying on a\n   static\
    \ realm routing table that determines the next hop based on the\n   NAI realm\
    \ included in the User-Name attribute within the Access-\n   Request.  Within\
    \ RADIUS, the IP address of the home AAA server is\n   typically determined based\
    \ on static mappings of realms to IP\n   addresses maintained within RADIUS proxies.\n\
    \   Diameter [RFC3588] supports mechanisms for intra- and inter-domain\n   service\
    \ discovery, including support for DNS as well as service\n   discovery protocols\
    \ such as Service Location Protocol version 2\n   (SLPv2) [RFC2608].  As a result,\
    \ it may not be necessary to configure\n   static tables mapping realms to the\
    \ IP addresses of Diameter agents.\n   However, while this simplifies maintenance\
    \ of the AAA routing\n   infrastructure, it does not necessarily simplify roaming-relationship\n\
    \   path selection.\n   As noted in RFC 2607 [RFC2607], RADIUS proxies are deployed\
    \ not only\n   for routing purposes, but also to mask a number of inadequacies\
    \ in\n   the RADIUS protocol design, such as the lack of standardized\n   retransmission\
    \ behavior and the need for shared secret provisioning\n   between each AAA client\
    \ and server.\n   Diameter [RFC3588] supports certificate-based authentication\
    \ (using\n   either TLS or IPsec) as well as Redirect functionality, enabling\
    \ a\n   Diameter client to obtain a referral to the home server from a\n   Diameter\
    \ redirect server, so that the client can contact the home\n   server directly.\
    \  In situations in which a trust model can be\n   established, these Diameter\
    \ capabilities can enable a reduction in\n   the length of the roaming relationship\
    \ path.\n   However, in practice there are a number of pitfalls.  In order for\n\
    \   certificate-based authentication to enable communication between a\n   Network\
    \ Access Server (NAS) or local proxy and the home AAA server,\n   trust anchors\
    \ need to be configured, and certificates need to be\n   selected.  The AAA server\
    \ certificate needs to chain to a trust\n   anchor configured on the AAA client,\
    \ and the AAA client certificate\n   needs to chain to a trust anchor configured\
    \ on the AAA server.  Where\n   multiple potential roaming relationship paths\
    \ are available, this\n   will reflect itself in multiple certificate choices,\
    \ transforming the\n   path selection problem into a certificate selection problem.\n\
    \   Depending on the functionality supported within the certificate\n   selection\
    \ implementation, this may not make the problem easier to\n   solve.  For example,\
    \ in order to provide the desired control over the\n   roaming path, it may be\
    \ necessary to implement custom certificate\n   selection logic, which may be\
    \ difficult to introduce within a\n   certificate handling implementation designed\
    \ for general-purpose\n   usage.\n   As noted in [RFC4284], it is also possible\
    \ to utilize an NAI for the\n   purposes of source routing.  In this case, the\
    \ client provides\n   guidance to the AAA infrastructure as to how it would like\
    \ the access\n   request to be routed.  An NAI including source-routing information\
    \ is\n   said to be \"decorated\"; the decoration format is defined in\n   [RFC4282].\n\
    \   When decoration is utilized, the EAP peer provides the decorated NAI\n   within\
    \ the EAP-Response/Identity, and as described in [RFC3579], the\n   NAS copies\
    \ the decorated NAI included in the EAP-Response/Identity\n   into the User-Name\
    \ attribute included within the access request.  As\n   the access request transits\
    \ the roaming relationship path, AAA\n   proxies determine the next hop based\
    \ on the realm included within the\n   User-Name attribute, in the process, successively\
    \ removing decoration\n   from the NAI included in the User-Name attribute.  In\
    \ contrast, the\n   decorated NAI included within the EAP-Response/Identity encapsulated\n\
    \   in the access request remains untouched.  As a result, when the\n   access\
    \ request arrives at the AAA home server, the decorated NAI\n   included in the\
    \ EAP-Response/Identity may differ from the NAI\n   included in the User-Name\
    \ attribute (which may have some or all of\n   the decoration removed).  For the\
    \ purpose of identity verification,\n   the EAP server utilizes the NAI in the\
    \ User-Name attribute, rather\n   than the NAI in the EAP-Response/Identity.\n\
    \   Over the long term, it is expected that the need for NAI \"decoration\"\n\
    \   and source routing will disappear.  This is somewhat analogous to the\n  \
    \ evolution of email delivery.  Prior to the widespread proliferation\n   of the\
    \ Internet, it was necessary to gateway between SMTP-based mail\n   systems and\
    \ alternative delivery technologies, such as Unix-to-Unix\n   CoPy Protocol (UUCP)\
    \ and FidoNet.  Prior to the implementation of\n   email gateways utilizing MX\
    \ RR routing, email address-based source-\n   routing was used extensively.  However,\
    \ over time the need for email\n   source-routing disappeared.\n"
- title: 2.3.1.  The Default Free Zone
  contents:
  - "2.3.1.  The Default Free Zone\n   AAA clients on the edge of the network, such\
    \ as NAS devices and local\n   AAA proxies, typically maintain a default realm\
    \ route, providing a\n   default next hop for realms not otherwise taken into\
    \ account within\n   the realm routing table.  This permits devices with limited\
    \ resources\n   to maintain a small realm routing table.  Deeper within the AAA\n\
    \   infrastructure, AAA proxies may be maintained with a \"default free\"\n  \
    \ realm table, listing next hops for all known realms, but not\n   providing a\
    \ default realm route.\n   While dynamic realm routing protocols are not in use\
    \ within AAA\n   infrastructure today, even if such protocols were to be introduced,\n\
    \   it is likely that they would be deployed solely within the core AAA\n   infrastructure,\
    \ but not on NAS devices, which are typically resource\n   constrained.\n   Since\
    \ NAS devices do not maintain a full realm routing table, they do\n   not have\
    \ knowledge of all the realms reachable from the local\n   network.  The situation\
    \ is analogous to that of Internet hosts or\n   edge routers that do not participate\
    \ in the BGP mesh.  In order for\n   an Internet host to determine whether it\
    \ can reach a destination on\n   the Internet, it is necessary to send a packet\
    \ to the destination.\n   Similarly, when a user provides an NAI to the NAS, the\
    \ NAS does not\n   know a priori whether or not the realm encoded in the NAI is\n\
    \   reachable; it simply forwards the access request to the next hop on\n   the\
    \ roaming relationship path.  Eventually, the access request\n   reaches the \"\
    default free\" zone, where a core AAA proxy determines\n   whether or not the\
    \ realm is reachable.  As described in [RFC4284],\n   where EAP authentication\
    \ is in use, the core AAA proxy can send an\n   Access-Reject, or it can send\
    \ an Access-Challenge encapsulating an\n   EAP-Request/Identity containing \"\
    realm hints\" based on the content of\n   the \"default free\" realm routing table.\n\
    \   There are a number of intrinsic problems with this approach.  Where\n   the\
    \ \"default free\" routing table is large, it may not fit within a\n   single\
    \ EAP packet, and the core AAA proxy may not have a mechanism\n   for selecting\
    \ the most promising entries to include.  Even where the\n   \"default free\"\
    \ realm routing table would fit within a single EAP-\n   Request/Identity packet,\
    \ the core AAA router may not choose to\n   include all entries, since the list\
    \ of realm routes could be\n   considered confidential information not appropriate\
    \ for disclosure to\n   hosts seeking network access.  Therefore, it cannot be\
    \ assumed that\n   the list of \"realm hints\" included within the EAP-Request/Identity\
    \ is\n   complete.  Given this, a NAS or local AAA proxy snooping the EAP-\n \
    \  Request/Identity cannot rely on it to provide a complete list of\n   reachable\
    \ realms.  The \"realm hint\" mechanism described in [RFC4284]\n   is not a dynamic\
    \ routing protocol.\n"
- title: 2.3.2.  Route Selection and Policy
  contents:
  - "2.3.2.  Route Selection and Policy\n   Along with lack of a dynamic AAA routing\
    \ protocol, today's AAA\n   infrastructure lacks mechanisms for route selection\
    \ and policy.  As a\n   result, multiple routes may exist to a destination realm,\
    \ without a\n   mechanism for the selection of a preferred route.\n   In Figure\
    \ 2, Roaming Groups 1 and 2 both include a route to the realm\n   \"a.example.com\"\
    .  However, these realm routes are not disseminated to\n   the NAS along with\
    \ associated metrics, and, as a result, there is no\n   mechanism for implementation\
    \ of dynamic routing policies (such as\n   selection of realm routes by shortest\
    \ path, or preference for routes\n   originating at a given proxy).\n        \
    \                               +---------+\n                                \
    \       |         |----> \"a.example.com\"\n                                 \
    \      | Roaming |\n                      +---------+      | Group 1 |\n     \
    \                 |         |----->| Proxy   |----> \"b.example.com\"\n   user\
    \ \"joe@         | Access  |      +---------+\n    a.example.com\"--->| Provider|\n\
    \                      |   NAS   |      +---------+\n                      | \
    \        |----->|         |----> \"a.example.com\"\n                      +---------+\
    \      | Roaming |\n                                       | Group 2 |\n     \
    \                                  | Proxy   |----> \"c.example.com\"\n      \
    \                                 +---------+\n                Figure 2: Multiple\
    \ routes to a destination realm\n   In the example in Figure 2, access through\
    \ Roaming Group 1 may be\n   less expensive than access through Roaming Group\
    \ 2, and as a result\n   it would be desirable to prefer Roaming Group 1 as a\
    \ next hop for an\n   NAI with a realm of \"a.example.com\".  However, the only\
    \ way to obtain\n   this result would be to manually configure the NAS realm routing\n\
    \   table with the following entries:\n      Realm            Next Hop\n     \
    \ -----            --------\n      b.example.com    Roaming Group 1\n      c.example.com\
    \    Roaming Group 2\n      Default          Roaming Group 1\n   While manual\
    \ configuration may be practical in situations where the\n   realm routing table\
    \ is small and entries are static, where the list\n   of supported realms change\
    \ frequently, or the preferences change\n   dynamically, manual configuration\
    \ will not be manageable.\n"
- title: 2.3.3.  Source Routing
  contents:
  - "2.3.3.  Source Routing\n   Due to the limitations of current AAA routing mechanisms,\
    \ there are\n   situations in which NAI-based source routing is used to influence\
    \ the\n   roaming relationship path.  However, since the AAA proxies on the\n\
    \   roaming relationship path are constrained by existing relationships,\n   NAI-based\
    \ source routing is not source routing in the classic sense;\n   it merely suggests\
    \ preferences that the AAA proxy can choose not to\n   accommodate.\n   Where\
    \ realm routes are set up as the result of pre-configuration and\n   dynamic route\
    \ establishment is not supported, if a realm route does\n   not exist, then NAI-based\
    \ source routing cannot establish it.  Even\n   where dynamic route establishment\
    \ is possible, such as where the AAA\n   client and server support certificate-based\
    \ authentication, and AAA\n   servers are discoverable (such as via the mechanisms\
    \ described in\n   [RFC3588]), an AAA proxy may choose not to establish a realm\
    \ route by\n   initiating the discovery process based on a suggestion in an NAI-\n\
    \   based source route.\n   Where the realm route does exist, or the AAA proxy\
    \ is capable of\n   establishing it dynamically, the AAA proxy may choose not\
    \ to\n   authorize the client to use it.\n   While, in principle, source routing\
    \ can provide users with better\n   control over AAA routing decisions, there\
    \ are a number of practical\n   problems to be overcome.  In order to enable the\
    \ client to construct\n   optimal source routes, it is necessary for it to be\
    \ provided with a\n   complete and up-to-date realm routing table.  However, if\
    \ a solution\n   to this problem were readily available, then it could be applied\
    \ to\n   the AAA routing infrastructure, enabling the selection of routes\n  \
    \ without the need for user intervention.\n   As noted in [Eronen04], only a limited\
    \ number of parameters can be\n   updated dynamically.  For example, quality of\
    \ service or pricing\n   information typically will be pre-provisioned or made\
    \ available on\n   the web rather than being updated on a continuous basis.  Where\
    \ realm\n   names are communicated dynamically, the \"default free\" realm list\
    \ is\n   unlikely to be provided in full since this table could be quite\n   large.\
    \  Given the constraints on the availability of information, the\n   construction\
    \ of source routes typically needs to occur in the face of\n   incomplete knowledge.\n\
    \   In addition, there are few mechanisms available to audit whether the\n   requested\
    \ source route is honored by the AAA infrastructure.  For\n   example, an access\
    \ network could advertise a realm route to\n   \"costsless.example.com\", while\
    \ instead routing the access-request\n   through \"costsmore.example.com\".  While\
    \ the decorated NAI would be\n   made available to the home AAA server in the\
    \ EAP-Response/Identity,\n   the home AAA server might have a difficult time verifying\
    \ that the\n   source route requested in the decorated NAI was actually honored\
    \ by\n   the AAA infrastructure.  Similarly, it could be difficult to\n   determine\
    \ whether quality of service (QoS) or other routing requests\n   were actually\
    \ provided as requested.  To some extent, this problem\n   may be addressed as\
    \ part of the business arrangements between roaming\n   partners, which may provide\
    \ minimum service-level guarantees.\n   Given the potential issues with source\
    \ routing, conventional AAA\n   routing mechanisms are to be preferred wherever\
    \ possible.  Where an\n   error is encountered, such as an attempt to authenticate\
    \ to an\n   unreachable realm, \"realm hints\" can be provided as described\n\
    \   [RFC4284].  However, this approach has severe scalability\n   limitations,\
    \ as outlined in Appendix A.1.\n"
- title: 2.4.  Network Capabilities Discovery
  contents:
  - "2.4.  Network Capabilities Discovery\n   Network capability discovery focuses\
    \ on discovery of the services\n   offered by networks, not just the capabilities\
    \ of individual points\n   of attachment.  By acquiring additional information\
    \ on access network\n   characteristics, it is possible for users to make a more\
    \ informed\n   access decision.  These characteristics may include:\n   o  Roaming\
    \ relationships between the access network provider and\n      other network providers\
    \ and associated costs.  Where the network\n      access client is not pre-configured\
    \ with an identity and\n      credentials corresponding to a local access network,\
    \ it will need\n      to be able to determine whether one or more home realms\
    \ are\n      reachable from an access network so that successful authentication\n\
    \      can be possible.\n   o  EAP authentication methods.  While the EAP authentication\
    \ methods\n      supported by a home realm can only be determined by contacting\
    \ the\n      home AAA server, it is possible that the local realm will also\n\
    \      support one or more EAP methods.  For example, a user may be able\n   \
    \   to utilize EAP-SIM (Extensible Authentication Protocol -\n      Subscriber\
    \ Identity Module) to authenticate to the access network\n      directly, rather\
    \ than having to authenticate to the home network.\n   o  End-to-end quality of\
    \ service capability.  While local quality of\n      service capabilities are\
    \ typically advertised by the access\n      network (e.g., support for Wi-Fi Multimedia\
    \ (WMM)), the\n      availability of end-to-end QoS services may not be advertised.\n\
    \   o  Service parameters, such as the existence of middleboxes or\n      firewalls.\
    \  If the network access client is not made aware of the\n      Internet access\
    \ that it will receive on connecting to a point of\n      attachment, it is possible\
    \ that the user may not be able to access\n      the desired services.\n   Reference\
    \ [IEEE.11-04-0624] classifies the possible steps at which\n   IEEE 802.11 networks\
    \ can acquire this information:\n   o  Pre-association\n   o  Post-association\
    \ (or pre-authentication)\n   o  Post-authentication\n   In the interest of minimizing\
    \ connectivity delays, all of the\n   information required for network selection\
    \ (including both access\n   network capabilities and global characteristics)\
    \ needs to be provided\n   prior to authentication.\n   By the time authentication\
    \ occurs, the node has typically selected\n   the access network, the NAI to be\
    \ used to authenticate, as well as\n   the point of attachment.  Should it learn\
    \ information during the\n   authentication process that would cause it to revise\
    \ one or more of\n   those decisions, the node will need to select a new network,\
    \ point of\n   attachment, and/or identity, and then go through the authentication\n\
    \   process all over again.  Such a process is likely to be both time\n   consuming\
    \ and unreliable.\n"
- title: 3.  Design Issues
  contents:
  - "3.  Design Issues\n   The following factors should be taken into consideration\
    \ while\n   evaluating solutions to the problem of network selection and\n   discovery.\n"
- title: 3.1.  AAA Routing
  contents:
  - "3.1.  AAA Routing\n   Solutions to the AAA routing issues discussed in Section\
    \ 2.3 need to\n   apply to a wide range of AAA messages, and should not restrict\
    \ the\n   introduction of new AAA or access network functionality.  For\n   example,\
    \ AAA routing mechanisms should work for access requests and\n   responses as\
    \ well as accounting requests and responses and server-\n   initiated messages.\
    \  Solutions should not restrict the development of\n   new AAA attributes, access\
    \ types, or performance optimizations (such\n   as fast handoff support).\n"
- title: 3.2.  Backward Compatibility
  contents:
  - "3.2.  Backward Compatibility\n   Solutions need to maintain backward compatibility.\
    \  In particular:\n   o  Selection-aware clients need to interoperate with legacy\
    \ NAS\n      devices and AAA servers.\n   o  Selection-aware AAA infrastructure\
    \ needs to interoperate with\n      legacy clients and NAS devices.\n   For example,\
    \ selection-aware clients should not transmit packets\n   larger than legacy NAS\
    \ devices or AAA servers can handle.  Where\n   protocol extensions are required,\
    \ changes should be required to as\n   few infrastructure elements as possible.\
    \  For example, extensions\n   that require upgrades to existing NAS devices will\
    \ be more difficult\n   to deploy than proposals that are incrementally deployable\
    \ based on\n   phased upgrades of clients or AAA servers.\n"
- title: 3.3.  Efficiency Constraints
  contents:
  - "3.3.  Efficiency Constraints\n   Solutions should be efficient as measured by\
    \ channel utilization,\n   bandwidth consumption, handoff delay, and energy utilization.\n\
    \   Mechanisms that depend on multicast frames need to be designed with\n   care\
    \ since multicast frames are often sent at the lowest supported\n   rate and therefore\
    \ consume considerable channel time as well as\n   energy on the part of listening\
    \ nodes.  Depending on the deployment,\n   it is possible for bandwidth to be\
    \ constrained both on the link, as\n   well as in the backend AAA infrastructure.\
    \  As a result, chatty\n   mechanisms such as keepalives or periodic probe packets\
    \ are to be\n   avoided.  Given the volume handled by AAA servers, solutions should\n\
    \   also be conscious of adding to the load, particularly in cases where\n   this\
    \ could enable denial-of-service attacks.  For example, it would\n   be a bad\
    \ idea for a NAS to attempt to obtain an updated realm routing\n   table by periodically\
    \ sending probe EAP-Response/Identity packets to\n   the AAA infrastructure in\
    \ order to obtain \"realm hints\" as described\n   in [RFC4284].  Not only would\
    \ this add significant load to the AAA\n   infrastructure (particularly in cases\
    \ where the AAA server was\n   already overloaded, thereby dropping packets resulting\
    \ in\n   retransmission by the NAS), but it would also not provide the NAS\n \
    \  with a complete realm routing table, for reasons described in\n   Section 2.3.\n\
    \   Battery consumption is a significant constraint for handheld devices.\n  \
    \ Therefore, mechanisms that require significant increases in packets\n   transmitted,\
    \ or the fraction of time during which the host needs to\n   listen (such as proposals\
    \ that require continuous scanning), are to\n   be discouraged.  In addition,\
    \ the solution should not significantly\n   impact the time required to complete\
    \ network attachment.\n"
- title: 3.4.  Scalability
  contents:
  - "3.4.  Scalability\n   Given limitations on frame sizes and channel utilization,\
    \ it is\n   important that solutions scale less than linearly in terms of the\n\
    \   number of networks and realms supported.  For example, solutions such\n  \
    \ as [RFC4284] increase the size of advertisements in proportion to the\n   number\
    \ of entries in the realm routing table.  This approach does not\n   scale to\
    \ support a large number of networks and realms.\n   Similarly, approaches that\
    \ utilize separate Beacons for each \"virtual\n   AP\" introduce additional Beacons\
    \ in proportion to the number of\n   networks being advertised.  While such an\
    \ approach may minimize the\n   pre-configuration required for network access\
    \ clients, the\n   proliferation of \"virtual APs\" can result in high utilization\
    \ of the\n   wireless medium.  For example, the 802.11 Beacon is sent only at\
    \ a\n   rate within the basic rate set, which typically consists of the\n   lowest\
    \ supported rates, or perhaps only the lowest supported rate.\n   As a result,\
    \ \"virtual AP\" mechanisms that require a separate Beacon\n   for each \"virtual\
    \ AP\" do not scale well.\n   For example, with a Beacon interval of 100 Time\
    \ Units (TUs) or 102.4\n   ms (9.8 Beacons/second), twenty 802.11b \"virtual APs\"\
    \ each announcing\n   their own Beacon of 170 octets would result in a channel\
    \ utilization\n   of 37.9 percent.  The calculation can be verified as follows:\n\
    \   1. A single 170-octet Beacon sent at 1 Mbps will utilize the channel\n   \
    \   for 1360 us (1360 bits @ 1 Mbps);\n   2. Adding 144 us for the Physical Layer\
    \ Convergence Procedure (PLCP)\n      long preamble (144 bits @ 1 Mbps), 48 us\
    \ for the PLCP header (48\n      bits @ 1 Mbps), 10 us for the Short Interframe\
    \ Space (SIFS), 50 us\n      for the Distributed Interframe Space (DIFS), and\
    \ 320 us for the\n      average minimum Contention Window without backoff (CWmin/2\
    \ *\n      aSlotTime = 32/2 * 20 us) implies that a single Beacon will\n     \
    \ utilize an 802.11b channel for 1932 us;\n   3. Multiply the channel time per\
    \ Beacon by 196 Beacons/second, and we\n      obtain a channel utilization of\
    \ 378672 us/second = 37.9 percent.\n   In addition, since Beacon/Probe Response\
    \ frames are sent by each AP\n   over the wireless medium, stations can only discover\
    \ APs within\n   range, which implies substantial coverage overlap for roaming\
    \ to\n   occur without interruption.  Another issue with the Beacon and Probe\n\
    \   Request/Response mechanism is that it is either insecure or its\n   security\
    \ can be assured only as part of authenticating to the network\n   (e.g., verifying\
    \ the advertised capabilities within the 4-way\n   handshake).\n   A number of\
    \ enhancements have been proposed to the Beacon/Probe\n   Response mechanism in\
    \ order to improve scalability and performance in\n   roaming scenarios.  These\
    \ include allowing APs to announce\n   capabilities of neighbor APs as well as\
    \ their own [IEEE.802.11k].\n   More scalable mechanisms for support of \"virtual\
    \ APs\" within IEEE\n   802.11 have also been proposed [IEEE.802.11v]; generally\
    \ these\n   proposals collapse multiple \"virtual AP\" advertisements into a single\n\
    \   advertisement.\n   Higher-layer mechanisms can also be used to improve scalability\n\
    \   since, by running over IP, they can utilize facilities, such as\n   fragmentation,\
    \ that may not be available at the link layer.  For\n   example, in IEEE 802.11,\
    \ Beacon frames cannot use fragmentation\n   because they are multicast frames.\n"
- title: 3.5.  Static Versus Dynamic Discovery
  contents:
  - "3.5.  Static Versus Dynamic Discovery\n   \"Phone-book\" based approaches such\
    \ as [RFC3017] can provide\n   information for automatic selection decisions.\
    \  While this approach\n   has been applied to wireless access, it typically can\
    \ only be used\n   successfully within a single operator or limited roaming partner\n\
    \   deployment.  For example, were a \"Phone-Book\" approach to attempt to\n \
    \  incorporate information from a large number of roaming partners, it\n   could\
    \ become quite difficult to keep the information simultaneously\n   comprehensive\
    \ and up to date.  As noted in [Priest04] and [GROETING],\n   a large fraction\
    \ of current WLAN access points operate on the default\n   SSID, which may make\
    \ it difficult to distinguish roaming partner\n   networks by SSID.  In any case,\
    \ in wireless networks, dynamic\n   discovery is a practical requirement since\
    \ a node needs to know which\n   APs are within range before it can connect.\n"
- title: 3.6.  Security
  contents:
  - "3.6.  Security\n   Network discovery and selection mechanisms may introduce new\
    \ security\n   vulnerabilities.  As noted in Section 2.3.1, network operators\
    \ may\n   consider the AAA routing table to be confidential information, and\n\
    \   therefore may not wish to provide it to unauthenticated peers via the\n  \
    \ mechanism described in RFC 4284.  While the peer could provide a list\n   of\
    \ the realms it supports, with the authenticator choosing one, this\n   approach\
    \ raises privacy concerns.  Since identity selection occurs\n   prior to authentication,\
    \ the peer's supported realms would be sent in\n   cleartext, enabling an attacker\
    \ to determine the realms for which a\n   potential victim has credentials.  This\
    \ risk can be mitigated by\n   restricting peer disclosure.  For example, a peer\
    \ may only disclose\n   additional realms in situations where an initially selected\
    \ identity\n   has proved unusable.\n   Since network selection occurs prior to\
    \ authentication, it is\n   typically not possible to secure mechanisms for network\
    \ discovery or\n   identity selection, although it may be possible to provide\
    \ for secure\n   confirmation after authentication is complete.  As an example,\
    \ some\n   parameters discovered during network discovery may be confirmable via\n\
    \   EAP Channel Bindings; others may be confirmed in a subsequent Secure\n   Association\
    \ Protocol handshake.\n   However, there are situations in which advertised parameters\
    \ may not\n   be confirmable.  This could lead to \"bidding down\" vulnerabilities.\n\
    \   Section 7.8 of [RFC3748] states:\n      Within or associated with each authenticator,\
    \ it is not\n      anticipated that a particular named peer will support a choice\
    \ of\n      methods.  This would make the peer vulnerable to attacks that\n  \
    \    negotiate the least secure method from among a set.  Instead, for\n     \
    \ each named peer, there SHOULD be an indication of exactly one\n      method\
    \ used to authenticate that peer name.  If a peer needs to\n      make use of\
    \ different authentication methods under different\n      circumstances, then\
    \ distinct identities SHOULD be employed, each\n      of which identifies exactly\
    \ one authentication method.\n   In practice, where the authenticator operates\
    \ in \"pass-through\" mode,\n   the EAP method negotiation will occur between\
    \ the EAP peer and\n   server, and therefore the peer will need to associate a\
    \ single EAP\n   method with a given EAP server.  Where multiple EAP servers and\n\
    \   corresponding identities may be reachable from the same selected\n   network,\
    \ the EAP peer may have difficulty determining which identity\n   (and corresponding\
    \ EAP method) should be used.  Unlike network\n   selection, which may be securely\
    \ confirmed within a Secure\n   Association Protocol handshake, identity selection\
    \ hints provided\n   within the EAP-Request/Identity are not secured.\n   As a\
    \ result, where the identity selection mechanism described in RFC\n   4284 is\
    \ used, the \"hints\" provided could be used by an attacker to\n   convince the\
    \ victim to select an identity corresponding to an EAP\n   method offering lesser\
    \ security (e.g., EAP MD5-Challenge).  One way\n   to mitigate this risk is for\
    \ the peer to only utilize EAP methods\n   satisfying the [RFC4017] security requirements,\
    \ and for the peer to\n   select the identity corresponding to the strongest authentication\n\
    \   method where a choice is available.\n"
- title: 3.7.  Management
  contents:
  - "3.7.  Management\n   From an operational point of view, a network device in control\
    \ of\n   network advertisement and providing \"realm hints\" for guiding the\n\
    \   network discovery and selection, should at least offer a management\n   interface\
    \ capable of providing status information for operators.\n   Status information,\
    \ such as counters of each selected network and\n   used realm, and when RFC 4284\
    \ is used, the count of delivered \"realm\n   hints\" might interest operators.\
    \  Especially the information related\n   to realms that fall into the \"default\
    \ free zone\" or the \"AAA fails to\n   route\" are of interest.\n   Larger deployments\
    \ would benefit from a management interface that\n   allow full remote configuration\
    \ capabilities, for example, of \"realm\n   hints\" in case of RFC 4284-conforming\
    \ network devices.  While changes\n   to \"realm hints\" and realm routing information\
    \ are not expected to be\n   frequent, centralized remote management tends to\
    \ lower the frequency\n   of misconfigured devices.\n"
- title: 4.  Conclusions
  contents:
  - "4.  Conclusions\n   This document describes the network selection and discovery\
    \ problem.\n   In the opinion of the authors, the major findings are as follows:\n\
    \   o  There is a need for additional work on access network discovery,\n    \
    \  identifier selection, AAA routing, and payload routing.\n   o  Credential selection\
    \ and AAA routing are aspects of the same\n      problem, namely identity selection.\n\
    \   o  When considering selection among a large number of potential\n      access\
    \ networks and points of attachment, the issues described in\n      the document\
    \ become much harder to solve in an automated way,\n      particularly if there\
    \ are constraints on handoff latency.\n   o  The proliferation of network discovery\
    \ technologies within IEEE\n      802, IETF, and 3rd Generation Partnership Project\
    \ (3GPP) has the\n      potential to become a significant problem going forward.\
    \  Without\n      a unified approach, multiple non-interoperable solutions may\
    \ be\n      deployed.\n   o  New link-layer designs should include efficient distribution\
    \ of\n      network and realm information as a design requirement.\n   o  It may\
    \ not be possible to solve all aspects of the problem for\n      legacy NAS devices\
    \ on existing link layers.  Therefore, a phased\n      approach may be more realistic.\
    \  For example, a partial solution\n      could be made available for existing\
    \ link layers, with a more\n      complete solution requiring support for link\
    \ layer extensions.\n   With respect to specific mechanisms for access network\
    \ discovery and\n   selection:\n   o  Studies such as [MACScale] and [Velayos],\
    \ as well as the\n      calculations described in Section 2.1, demonstrate that\
    \ the IEEE\n      802.11 Beacon/Probe Response mechanism has substantial scaling\n\
    \      issues in situations where a new Beacon is used for each \"virtual\n  \
    \    AP\".  As a result, a single channel is, in practice, limited to\n      less\
    \ than twenty Beacon announcements with IEEE 802.11b.\n      The situation is\
    \ improved substantially with successors, such as\n      IEEE 802.11a, that enable\
    \ additional channels, thus potentially\n      increasing the number of potential\
    \ virtual APs.\n      However, even with these enhancements, it is not feasible\
    \ to\n      advertise more than 50 different networks, and probably less in\n\
    \      most circumstances.\n      As a result, there appears to be a need to enhance\
    \ the scalability\n      of IEEE 802.11 network advertisements.\n   o  Work is\
    \ underway in IEEE 802.1, IEEE 802.21, and IEEE 802.11u\n      [IEEE.802.11u]\
    \ to provide enhanced discovery functionality.\n      Similarly, IEEE 802.1af\
    \ [IEEE.802.1af] has discussed the addition\n      of network discovery functionality\
    \ to IEEE 802.1X\n      [IEEE.8021X-2004].  However, neither IEEE 802.1AB [IEEE.802.1ab]\n\
    \      nor IEEE 802.1af is likely to support fragmentation of network\n      advertisement\
    \ frames so that the amount of data that can be\n      transported will be limited.\n\
    \   o  While IEEE 802.11k [IEEE.802.11k] provides support for the\n      Neighbor\
    \ Report, this only provides for gathering of information\n      on neighboring\
    \ 802.11 APs, not points of attachment supporting\n      other link layers.  Solution\
    \ to this problem would appear to\n      require coordination across IEEE 802\
    \ as well as between standards\n      bodies.\n   o  Given that EAP does not support\
    \ fragmentation of EAP-Request/\n      Identity packets, the volume of \"realm\
    \ hints\" that can be fit with\n      these packets is limited.  In addition,\
    \ within IEEE 802.11, EAP\n      packets can only be exchanged within State 3\
    \ (associated and\n      authenticated).  As a result, use of EAP for realm discovery\
    \ may\n      result in significant delays.  The extension of the realm\n     \
    \ advertisement mechanism defined in [RFC4284] to handle\n      advertisement\
    \ of realm capability information (such as QoS\n      provisioning) is not recommended\
    \ due to semantic and packet size\n      limitations [GROETING].  As a result,\
    \ we believe that extending\n      the mechanism described in [RFC4284] for discovery\
    \ of realm\n      capabilities is inappropriate.  Instead, we believe it is more\n\
    \      appropriate for this functionality to be handled within the link\n    \
    \  layer so that the information can be available early in the\n      handoff\
    \ process.\n   o  Where link-layer approaches are not available, higher-layer\n\
    \      approaches can be considered.  A limitation of higher-layer\n      solutions\
    \ is that they can only optimize the movement of already\n      connected hosts,\
    \ but cannot address scenarios where network\n      discovery is required for\
    \ successful attachment.\n      Higher-layer alternatives worth considering include\
    \ the SEAMOBY\n      CARD protocol [RFC4066], which enables advertisement of network\n\
    \      device capabilities over IP, and Device Discovery Protocol (DDP)\n    \
    \  [MARQUES], which provides functionality equivalent to IEEE 802.1AB\n      using\
    \ ASN.1 encoded advertisements sent to a link-local scope\n      multicast address.\n"
- title: 5.  Security Considerations
  contents:
  - "5.  Security Considerations\n   All aspects of the network discovery and selection\
    \ problem are\n   security related.  The security issues and requirements have\
    \ been\n   discussed in the previous sections.\n   The security requirements for\
    \ network discovery depend on the type of\n   information being discovered.  Some\
    \ of the parameters may have a\n   security impact, such as the claimed name of\
    \ the network to which the\n   user tries to attach.  Unfortunately, current EAP\
    \ methods do not\n   always make the verification of such parameters possible.\
    \  EAP\n   methods, such as Protected EAP (PEAP) [JOSEFSSON] and EAP-IKEv2\n \
    \  [IKEV2], may make this possible, however.  There is even an attempt\n   to\
    \ provide a backward-compatible extension to older methods [ARKKO].\n   The security\
    \ requirements for network selection depend on whether the\n   selection is considered\
    \ a mandate or a hint.  In general, treating\n   network advertisements as a hint\
    \ is a more secure approach, since it\n   reduces access client vulnerability\
    \ to forged network advertisements.\n   For example, \"realm hints\" may be ignored\
    \ by an EAP peer if they are\n   incompatible with the security policy corresponding\
    \ to a selected\n   access network.\n   Similarly, network access clients may\
    \ refuse to connect to a point of\n   attachment if the advertised security capabilities\
    \ do not match those\n   that have been pre-configured.  For example, if an IEEE\
    \ 802.11 access\n   client has been pre-configured to require WPA2 enterprise\
    \ support\n   within an access network, it may refuse to connect to access points\n\
    \   advertising support for WEP.\n   Where the use of methods that do not satisfy\
    \ the security\n   requirements of [RFC4017] is allowed, it may be possible for\
    \ an\n   attacker to trick a peer into using an insecure EAP method, leading\n\
    \   to the compromise of long-term credentials.  This can occur either\n   where\
    \ a network is pre-configured to allow use of an insecure EAP\n   method, or where\
    \ connection without pre-configuration is permitted\n   using such methods.\n\
    \   For example, an attacker can spoof a network advertisement, possibly\n   downgrading\
    \ the advertised security capabilities.  The rogue access\n   point would then\
    \ attempt to negotiate an insecure EAP method.  Such\n   an attack can be prevented\
    \ if the peer refuses to connect to access\n   points not meeting its security\
    \ requirements, which would include\n   requiring use of EAP methods satisfying\
    \ the [RFC4017] requirements.\n   Support for secure discovery could potentially\
    \ protect against\n   spoofing of network advertisements, enabling verifiable\
    \ information\n   to guide connection decisions.  However, development of these\n\
    \   mechanisms requires solving several difficult engineering and\n   deployment\
    \ problems.\n   Since discovery is a prerequisite for authentication, it is not\n\
    \   possible to protect initial discovery using dynamic keys derived in\n   the\
    \ authentication process.  On the other hand, integrity protection\n   of network\
    \ advertisements utilizing symmetric keys or digital\n   signatures would require\
    \ pre-configuration.\n"
- title: 6.  Informative References
  contents:
  - "6.  Informative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC1035]  Mockapetris, P., \"Domain names - implementation and\n\
    \              specification\", STD 13, RFC 1035, November 1987.\n   [RFC3588]\
    \  Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J.\n              Arkko,\
    \ \"Diameter Base Protocol\", RFC 3588, September 2003.\n   [RFC3017]  Riegel,\
    \ M. and G. Zorn, \"XML DTD for Roaming Access Phone\n              Book\", RFC\
    \ 3017, December 2000.\n   [RFC3748]  Aboba, B., Blunk, L., Vollbrecht, J., Carlson,\
    \ J., and H.\n              Levkowetz, \"Extensible Authentication Protocol (EAP)\"\
    ,\n              RFC 3748, June 2004.\n   [RFC4334]  Housley, R. and T. Moore,\
    \ \"Certificate Extensions and\n              Attributes Supporting Authentication\
    \ in Point-to-Point\n              Protocol (PPP) and Wireless Local Area Networks\
    \ (WLAN)\",\n              RFC 4334, February 2006.\n   [RFC4282]  Aboba, B.,\
    \ Beadles, M., Arkko, J., and P. Eronen, \"The\n              Network Access Identifier\"\
    , RFC 4282, December 2005.\n   [RFC3280]  Housley, R., Polk, W., Ford, W., and\
    \ D. Solo, \"Internet\n              X.509 Public Key Infrastructure Certificate\
    \ and\n              Certificate Revocation List (CRL) Profile\", RFC 3280,\n\
    \              April 2002.\n   [RFC4072]  Eronen, P., Hiller, T., and G. Zorn,\
    \ \"Diameter Extensible\n              Authentication Protocol (EAP) Application\"\
    , RFC 4072,\n              August 2005.\n   [RFC3579]  Aboba, B. and P. Calhoun,\
    \ \"RADIUS (Remote Authentication\n              Dial In User Service) Support\
    \ For Extensible\n              Authentication Protocol (EAP)\", RFC 3579, September\
    \ 2003.\n   [RFC2194]  Aboba, B., Lu, J., Alsop, J., Ding, J., and W. Wang,\n\
    \              \"Review of Roaming Implementations\", RFC 2194,\n            \
    \  September 1997.\n   [RFC2607]  Aboba, B. and J. Vollbrecht, \"Proxy Chaining\
    \ and Policy\n              Implementation in Roaming\", RFC 2607, June 1999.\n\
    \   [RFC2608]  Guttman, E., Perkins, C., Veizades, J., and M. Day,\n         \
    \     \"Service Location Protocol, Version 2\", RFC 2608,\n              June\
    \ 1999.\n   [RFC3580]  Congdon, P., Aboba, B., Smith, A., Zorn, G., and J. Roese,\n\
    \              \"IEEE 802.1X Remote Authentication Dial In User Service\n    \
    \          (RADIUS) Usage Guidelines\", RFC 3580, September 2003.\n   [RFC4284]\
    \  Adrangi, F., Lortz, V., Bari, F., and P. Eronen, \"Identity\n             \
    \ Selection Hints for the Extensible Authentication Protocol\n              (EAP)\"\
    , RFC 4284, January 2006.\n   [RFC4017]  Stanley, D., Walker, J., and B. Aboba,\
    \ \"Extensible\n              Authentication Protocol (EAP) Method Requirements\
    \ for\n              Wireless LANs\", RFC 4017, March 2005.\n   [RFC2486]  Aboba,\
    \ B. and M. Beadles, \"The Network Access Identifier\",\n              RFC 2486,\
    \ January 1999.\n   [RFC4066]  Liebsch, M., Singh, A., Chaskar, H., Funato, D.,\
    \ and E.\n              Shim, \"Candidate Access Router Discovery (CARD)\",\n\
    \              RFC 4066, July 2005.\n   [IKEV2]    Tschofenig, H., Kroeselberg,\
    \ D., Pashalidis, A., Ohba, Y.,\n              and F. Bersani, \"EAP-IKEv2 Method\"\
    , Work in Progress,\n              September 2007.\n   [ARKKO]    Arkko, J. and\
    \ P. Eronen, \"Authenticated Service\n              Information for the Extensible\
    \ Authentication Protocol\n              (EAP)\", Work in Progress, October 2005.\n\
    \   [GROETING] Groeting, W., Berg, S., Tschofenig, H., and M. Ness,\n        \
    \      \"Network Selection Implementation Results\", Work\n              in Progress,\
    \ July 2004.\n   [JOSEFSSON]\n              Palekar, A., Simon, D., Salowey, J.,\
    \ Zhou, H., Zorn, G.,\n              and S. Josefsson, \"Protected EAP Protocol\
    \ (PEAP) Version\n              2\", Work in Progress, October 2004.\n   [MARQUES]\
    \  Enns, R., Marques, P., and D. Morrell, \"Device Discovery\n              Protocol\
    \ (DDP)\", Work in Progress, May 2003.\n   [OHBA]     Taniuchi, K., Ohba, Y.,\
    \ and D. Subir, \"IEEE 802.21 Basic\n              Schema\", Work in Progress,\
    \ October 2007.\n   [IEEE.802.11-2003]\n              IEEE, \"Wireless LAN Medium\
    \ Access Control (MAC) and\n              Physical Layer (PHY) Specifications\"\
    , IEEE Standard\n              802.11, 2003.\n   [Fixingapsel]\n             \
    \ Judd, G. and P. Steenkiste, \"Fixing 802.11 Access Point\n              Selection\"\
    , Sigcomm Poster Session 2002.\n   [IEEE.802.11k]\n              IEEE, \"Draft\
    \ Ammendment to Standard for Telecommunications\n              and Information\
    \ Exchange Between Systems - LAN/MAN\n              Specific Requirements - Part\
    \ 11: Wireless LAN Medium\n              Access Control (MAC) and Physical Layer\
    \ (PHY)\n              Specifications: Radio Resource Management\", IEEE 802.11k,\n\
    \              D7.0, January 2007.\n   [IEEE.802.1ab]\n              IEEE, \"\
    Draft Standard for Local and Metropolitan Area\n              Networks -  Station\
    \ and Media Access Control Connectivity\n              Discovery\", IEEE 802.1AB,\
    \ D1.0, April 2007.\n   [IEEE.802.1af]\n              IEEE, \"Draft Standard for\
    \ Local and Metropolitan Area\n              Networks - Port-Based Network Access\
    \ Control - Amendment\n              1: Authenticated Key Agreement for Media\
    \ Access Control\n              (MAC) Security\", IEEE 802.1af, D1.2, January\
    \ 2007.\n   [IEEE.802.11v]\n              IEEE, \"Draft Amemdment to Standard\
    \  for Information\n              Technology - Telecommunications and Information\
    \ Exchange\n              Between Systems - LAN/MAN Specific Requirements - Part\
    \ 11:\n              Wireless Medium Access Control (MAC) and physical layer\n\
    \              (PHY) specifications: Wireless Network Management\",\n        \
    \      IEEE 802.11v, D0.09, March 2007.\n   [Eronen04]\n              Eronen,\
    \ P. and J. Arkko, \"Role of authorization in\n              wireless network\
    \ security\", Extended abstract presented in\n              the DIMACS workshop,\
    \ November 2004.\n   [IEEE.11-04-0624]\n              Berg, S., \"Information\
    \ to Support Network Selection\", IEEE\n              Contribution 11-04-0624\
    \ 2004.\n   [Priest04]\n              Priest, J., \"The State of Wireless London\"\
    , July 2004.\n   [MACScale]\n              Heusse, M., \"Performance Anomaly of\
    \ 802.11b\", LSR-IMAG\n              Laboratory, Grenoble, France, IEEE Infocom\
    \ 2003.\n   [Velayos]  Velayos, H. and G. Karlsson, \"Techniques to Reduce IEEE\n\
    \              802.11b MAC Layer Handover Time\", Laboratory for\n           \
    \   Communication Networks, KTH, Royal Institute of\n              Technology,\
    \ Stockholm, Sweden, TRITA-IMIT-LCN R 03:02,\n              April 2003.\n   [IEEE.802.11u]\n\
    \              IEEE, \"Draft Amendment to STANDARD FOR Information\n         \
    \     Technology -  LAN/MAN Specific Requirements - Part 11:\n              Interworking\
    \ with External Networks; Draft Amendment to\n              Standard; IEEE P802.11u/D0.04\"\
    , IEEE 802.11u, D0.04,\n              April 2007.\n   [IEEE-11-03-154r1]\n   \
    \           Aboba, B., \"Virtual Access Points\", IEEE Contribution 11-\n    \
    \          03-154r1, May 2003.\n   [IEEE-11-03-0827]\n              Hepworth,\
    \ E., \"Co-existence of Different Authentication\n              Models\", IEEE\
    \ Contribution 11-03-0827 2003.\n   [11-05-0822-03-000u-tgu-requirements]\n  \
    \            Moreton, M., \"TGu Requirements\", IEEE Contribution 11-05-\n   \
    \           0822-03-000u-tgu-requirements, August 2005.\n   [3GPPSA2WLANTS]\n\
    \              3GPP, \"3GPP System to Wireless Local Area Network (WLAN)\n   \
    \           interworking; System De scription; Release 6; Stage 2\",\n       \
    \       3GPP Technical Specification 23.234, September 2005.\n   [3GPP-SA3-030736]\n\
    \              Ericsson, \"Security of EAP and SSID based network\n          \
    \    advertisements\", 3GPP Contribution S3-030736,\n              November 2003.\n\
    \   [3GPP.23.122]\n              3GPP, \"Non-Access-Stratum (NAS) functions related\
    \ to\n              Mobile Station (MS) in idle mode\", 3GPP TS 23.122 6.5.0,\n\
    \              October 2005.\n   [WWRF-ANS]\n              Eijk, R., Brok, J.,\
    \ Bemmel, J., and B. Busropan, \"Access\n              Network Selection in a\
    \ 4G Environment and the Role of\n              Terminal and Service Platform\"\
    , 10th WWRF, New York,\n              October 2003.\n   [WLAN3G]   Ahmavaara,\
    \ K., Haverinen, H., and R. Pichna, \"Interworking\n              Architecture\
    \ between WLAN and 3G Systems\", IEEE\n              Communications Magazine,\
    \ November 2003.\n   [INTELe2e]\n              Intel, \"Wireless LAN (WLAN) End\
    \ to End Guidelines for\n              Enterprises and Public Hotspot Service\
    \ Providers\",\n              November 2003.\n   [Eronen03]\n              Eronen,\
    \ P., \"Network Selection Issues\", presentation to\n              EAP WG at IETF\
    \ 58, November 2003.\n   [3GPPSA3WLANTS]\n              3GPP, \"3GPP Technical\
    \ Specification Group Service and\n              System Aspects; 3G Security;\
    \ Wireless Local Area Network\n              (WLAN) interworking security (Release\
    \ 6); Stage 2\",\n              3GPP Technical Specification 33.234 v 6.6.0, October\
    \ 2005.\n   [3GPPCT1WLANTS]\n              3GPP, \"3GPP System to Wireless Local\
    \ Area Network (WLAN)\n              interworking; User Equipment (UE) to network\
    \ protocols;\n              Stage 3 (Release 6)\", 3GPP Technical Specification\
    \ 24.234\n              v 6.4.0, October 2005.\n   [IEEE.802.21]\n           \
    \   IEEE, \"Draft IEEE Standard for Local and Metropolitan Area\n            \
    \  Networks: Media Independent Handover Services\",\n              IEEE 802.21,\
    \ D05.00, April 2007.\n   [3GPPCT4WLANTS]\n              3GPP, \"3GPP system to\
    \ Wireless Local Area Network (WLAN)\n              interworking; Stage 3 (Release\
    \ 6)\", 3GPP Technical\n              Specification 29.234 v 6.4.0, October 2005.\n\
    \   [IEEE.8021X-2004]\n              IEEE, \"Local and Metropolitan Area Networks:\
    \ Port-Based\n              Network Access Control\", IEEE Standard 802.1X, July\
    \ 2004.\n"
- title: Appendix A.  Existing Work
  contents:
  - 'Appendix A.  Existing Work

    '
- title: A.1.  IETF
  contents:
  - "A.1.  IETF\n   Several IETF WGs have dealt with aspects of the network selection\n\
    \   problem, including the AAA, EAP, PPP, RADIUS, ROAMOPS, and RADEXT\n   WGs.\n\
    \   ROAMOPS WG developed the NAI, originally defined in [RFC2486], and\n   subsequently\
    \ updated in [RFC4282].  Initial roaming implementations\n   are described in\
    \ [RFC2194], and the use of proxies in roaming is\n   addressed in [RFC2607].\
    \  The SEAMOBY WG developed CARD [RFC4066],\n   which assists in discovery of\
    \ suitable base stations.  PKIX WG\n   produced [RFC3280], which addresses issues\
    \ of certificate selection.\n   The AAA WG developed more sophisticated access\
    \ routing,\n   authentication, and service discovery mechanisms within Diameter\n\
    \   [RFC3588].\n   Adrangi et al.  [RFC4284] defines the use of the EAP-Request/Identity\n\
    \   to provide \"realm hints\" useful for identity selection.  The NAI\n   syntax\
    \ described in [RFC4282] enables the construction of source\n   routes.  Together,\
    \ these mechanisms enable the user to determine\n   whether it possesses an identity\
    \ and corresponding credential\n   suitable for use with an EAP-capable NAS. \
    \ This is particularly\n   useful in situations where the lower layer provides\
    \ limited\n   information (such as in wired IEEE 802 networks where IEEE 802.1X\n\
    \   currently does not provide for advertisement of networks and their\n   capabilities).\n\
    \   However, advertisement mechanisms based on the use of the EAP-\n   Request/Identity\
    \ have scalability problems.  As noted in [RFC3748]\n   Section 3.1, the minimum\
    \ EAP Maximum Transmission Unit (MTU) is 1020\n   octets, so that an EAP-Request/Identity\
    \ is only guaranteed to be able\n   to include 1015 octets within the Type-Data\
    \ field.  Since RFC 1035\n   [RFC1035] enables Fully Qualified Domain Names (FQDN)\
    \ to be up to 255\n   octets in length, this may not enable the announcement of\
    \ many\n   realms.  The use of network identifiers other than domain names is\n\
    \   also possible.\n   As noted in [Eronen03], the use of the EAP-Request/Identity\
    \ for realm\n   discovery has substantial negative impact on handoff latency,\
    \ since\n   this may result in a station needing to initiate an EAP conversation\n\
    \   with each Access Point in order to receive an EAP-Request/Identity\n   describing\
    \ which realms are supported.  Since IEEE 802.11-2003 does\n   not support use\
    \ of Class 1 data frames in State 1 (unauthenticated,\n   unassociated) within\
    \ an Extended Service Set (ESS), this implies\n   either that the APs must support\
    \ 802.1X pre-authentication (optional\n   in IEEE 802.11i-2004), or that the station\
    \ must associate with each\n   AP prior to sending an EAPOL-Start to initiate\
    \ EAP (here, EAPOL\n   refers to EAP over LAN).  This will dramatically increase\
    \ handoff\n   latency.\n   Thus, rather than thinking of [RFC4284] as an effective\
    \ network\n   discovery mechanism, it is perhaps better to consider the use of\n\
    \   \"realm hints\" as an error recovery technique to be used to inform the\n\
    \   EAP peer that AAA routing has failed, and perhaps to enable selection\n  \
    \ of an alternate identity that can enable successful authentication.\n   Where\
    \ \"realm hints\" are only provided in event of a problem, rather\n   than as\
    \ a staple network discovery technique, it is probably best to\n   enable \"realm\
    \ hints\" to be sent by core AAA proxies in the \"default\n   free\" zone.  This\
    \ way, it will not be necessary for NASes to send\n   \"realm hints\", which would\
    \ require them to maintain a complete and\n   up-to-date realm routing table,\
    \ something that cannot be easily\n   accomplished given the existing state of\
    \ AAA routing technology.\n   If realm routing tables are manually configured\
    \ on the NAS, then\n   changes in the \"default free\" realm routing table will\
    \ not\n   automatically be reflected in the realm list advertised by the NAS.\n\
    \   As a result, a realm advertised by the NAS might not, in fact, be\n   reachable,\
    \ or the NAS might neglect to advertise one or more realms\n   that were reachable.\
    \  This could result in multiple EAP-Identity\n   exchanges, with the initial\
    \ set of \"realm hints\" supplied by the NAS\n   subsequently updated by \"realm\
    \ hints\" provided by a core AAA proxy.\n   In general, originating \"realm hints\"\
    \ on core AAA proxies appears to\n   be a more sound approach, since it provides\
    \ for \"fate sharing\" --\n   generation of \"realm hints\" by the same entity\
    \ (the core AAA proxy)\n   that will eventually need to route the request based\
    \ on the hints.\n   This approach is also preferred from a management perspective,\
    \ since\n   only core AAA proxies would need to be updated; no updates would be\n\
    \   required to NAS devices.\n"
- title: A.2.  IEEE 802
  contents:
  - "A.2.  IEEE 802\n   There has been work in several IEEE 802 working groups relating\
    \ to\n   network discovery:\n   o  [IEEE.802.11-2003] defines the Beacon and Probe\
    \ Response\n      mechanisms within IEEE 802.11.  Unfortunately, Beacons may be\
    \ sent\n      only at a rate within the base rate set, which typically consists\n\
    \      of the lowest supported rate, or perhaps the next lowest rate.\n      Studies\
    \ such as [MACScale] have identified MAC layer performance\n      problems, and\
    \ [Velayos] has identified scaling issues from a\n      lowering of the Beacon\
    \ interval.\n   o  [IEEE-11-03-0827] discusses the evolution of authentication\
    \ models\n      in WLANs and the need for the network to migrate from existing\n\
    \      models to new ones, based on either EAP layer indications or\n      through\
    \ the use of SSIDs to represent more than the local network.\n      It notes the\
    \ potential need for management or structuring of the\n      SSID space.\n   \
    \   The paper also notes that virtual APs have scalability issues.  It\n     \
    \ does not compare these scalability issues to those of alternative\n      solutions,\
    \ however.\n   o  [IEEE-11-03-154r1] discusses mechanisms currently used to provide\n\
    \      \"virtual AP\" capabilities within a single physical access point.\n  \
    \    A \"virtual AP\" appears at the MAC and IP layers to be a distinct\n    \
    \  physical AP.  As noted in the paper, full compatibility with\n      existing\
    \ 802.11 station implementations can only be maintained if\n      each \"virtual\
    \ AP\" uses a distinct MAC address (BSSID) for use in\n      Beacons and Probe\
    \ Responses.  This paper does not discuss scaling\n      issues in detail, but\
    \ recommends that only a limited number of\n      \"virtual APs\" be supported\
    \ by a single physical access point.\n   o  IEEE 802.11u is working on realm discovery\
    \ and network selection\n      [11-05-0822-03-000u-tgu-requirements] [IEEE.802.11u].\
    \  This\n      includes a mechanism for enabling a station to determine the\n\
    \      identities it can use to authenticate to an access network, prior\n   \
    \   to associating with that network.  As noted earlier, solving this\n      problem\
    \ requires the AP to maintain an up-to-date, \"default free\"\n      realm routing\
    \ table, which is not feasible without dynamic routing\n      support within the\
    \ AAA infrastructure.  Similarly, a priori\n      discovery of features supported\
    \ within home realms (such as\n      enrollment) is also difficult to implement\
    \ in a scalable way,\n      absent support for dynamic routing.  Determination\
    \ of network\n      capabilities (such as QoS support) is considerably simpler,\
    \ since\n      these depend solely on the hardware and software contained within\n\
    \      the AP.  However, 802.11u is working on Generic Advertisement\n      Service\
    \ (GAS) mechanism, which can be used to carry 802.21\n      Information Service\
    \ (IS) messages and, in that way, allow a more\n      sophisticated way of delivering\
    \ information from the network side.\n   o  IEEE 802.21 [IEEE.802.21] is developing\
    \ standards to enable\n      handover between heterogeneous link layers, including\
    \ both IEEE\n      802 and non-IEEE 802 networks.  To enable this, a general\n\
    \      mechanism for capability advertisement is being developed, which\n    \
    \  could conceivably benefit aspects of the network selection\n      problem,\
    \ such as realm discovery.  For example, IEEE 802.21 is\n      developing Information\
    \ Elements (IEs) that may assist with network\n      selection, including information\
    \ relevant to both layer 2 and\n      layer 3.  Query mechanisms (including both\
    \ XML and TLV support)\n      are also under development.  IEEE 802.21 also defines\
    \ a Resource\n      Description Framework (RDF) schema to allow use of a query\n\
    \      language (i.e., SPARQL).  The schema is a normative part of IEEE\n    \
    \  802.21 and also defined in [OHBA].\n"
- title: A.3.  3GPP
  contents:
  - "A.3.  3GPP\n   The 3GPP stage 2 technical specification [3GPPSA2WLANTS] covers\
    \ the\n   architecture of 3GPP Interworking WLAN (I-WLAN) with 2G and 3G\n   networks.\
    \  This specification also discusses realm discovery and\n   network selection\
    \ issues.  The I-WLAN realm discovery procedure\n   borrows ideas from the cellular\
    \ Public Land-based Mobile Network\n   (PLMN) selection principles, known as \"\
    PLMN Selection\".\n   In 3GPP PLMN selection [3GPP.23.122], the mobile node monitors\n\
    \   surrounding cells and prioritizes them based on signal strength\n   before\
    \ selecting a new potential target cell.  Each cell broadcasts\n   its PLMN. \
    \ A mobile node may automatically select cells that belong\n   to its Home PLMN,\
    \ Registered PLMN, or an allowed set of Visited\n   PLMNs.  The PLMN lists are\
    \ prioritized and stored in the Subscriber\n   Identity Module (SIM).  In the\
    \ case of manual PLMN selection, the\n   mobile node lists the PLMNs it learns\
    \ about from surrounding cells\n   and enables the user to choose the desired\
    \ PLMN.  After the PLMN has\n   been selected, cell prioritization takes place\
    \ in order to select the\n   appropriate target cell.\n   [WLAN3G] discusses the\
    \ new realm (PLMN) selection requirements\n   introduced by I-WLAN roaming, which\
    \ support automatic PLMN selection,\n   not just manual selection.  Multiple network\
    \ levels may be present,\n   and the hotspot owner may have a contract with a\
    \ provider who, in\n   turn, has a contract with a 3G network, which may have\
    \ a roaming\n   agreement with other networks.\n   The I-WLAN specification requires\
    \ that network discovery be performed\n   as specified in the relevant WLAN link\
    \ layer standards.  In addition\n   to network discovery, it is necessary to select\
    \ intermediary realms\n   to enable construction of source routes.  In 3GPP, the\
    \ intermediary\n   networks are PLMNs, and it is assumed that an access network\
    \ may have\n   a roaming agreement with more than one PLMN.  The PLMN may be a\
    \ Home\n   PLMN (HPLMN) or a Visited PLMN (VPLMN), where roaming is supported.\n\
    \   GSM/UMTS roaming principles are employed for routing AAA requests\n   from\
    \ the VPLMN to the Home Public Land-based Mobile Network (HPLMN)\n   using either\
    \ RADIUS or Diameter.  The procedure for selecting the\n   intermediary network\
    \ has been specified in the stage 3 technical\n   specifications [3GPPCT1WLANTS]\
    \ and [3GPPCT4WLANTS].\n   In order to select the PLMN, the following procedure\
    \ is required:\n   o  The user may choose the desired HPLMN or VPLMN manually\
    \ or let the\n      WLAN User Equipment (WLAN UE) choose the PLMN automatically,\
    \ based\n      on user and operator defined preferences.\n   o  AAA messages are\
    \ routed based on the decorated or undecorated NAI.\n   o  EAP is utilized as\
    \ defined in [RFC3748] and [RFC3579].\n   o  PLMN advertisement and selection\
    \ is based on [RFC4284], which\n      defines only realm advertisement.  The document\
    \ refers to the\n      potential need for extensibility, though EAP MTU restrictions\
    \ make\n      this difficult.\n   The I-WLAN specification states that \"realm\
    \ hints\" are only provided\n   when an unreachable realm is encountered.  Where\
    \ VPLMN control is\n   required, this is handled via NAI decoration.  The station\
    \ may\n   manually trigger PLMN advertisement by including an unknown realm\n\
    \   (known as the Alternative NAI) within the EAP-Response/Identity.  A\n   realm\
    \ guaranteed not to be reachable within 3GPP networks is utilized\n   for this\
    \ purpose.\n   The I-WLAN security requirements are described in the 3GPP stage\
    \ 3\n   technical specification [3GPPSA3WLANTS].  The security requirements\n\
    \   for PLMN selection are discussed in 3GPP contribution\n   [3GPP-SA3-030736],\
    \ which concludes that both SSID and EAP-based\n   mechanisms have similar security\
    \ weaknesses.  As a result, it\n   recommends that PLMN advertisements should\
    \ be considered as hints.\n"
- title: A.4.  Other
  contents:
  - "A.4.  Other\n   [INTELe2e] discusses the need for realm selection where an access\n\
    \   network may have more than one roaming relationship path to a home\n   realm.\
    \  It also describes solutions to the realm selection problem\n   based on EAP,\
    \ SSID and Protected EAP (PEAP) based mechanisms.\n   Eijk et al.  [WWRF-ANS]\
    \ discusses the realm and network selection\n   problem.  The authors concentrate\
    \ primarily on discovery of access\n   networks meeting a set of criteria, noting\
    \ that information on the\n   realm capabilities and reachability inherently resides\
    \ in home AAA\n   servers, and therefore it is not readily available in a central\n\
    \   location, and may not be easily obtained by NAS devices.\n"
- title: Appendix B.  Acknowledgements
  contents:
  - "Appendix B.  Acknowledgements\n   The authors of this document would like to\
    \ especially acknowledge the\n   contributions of Farid Adrangi, Michael Richardson,\
    \ Pasi Eronen, Mark\n   Watson, Mark Grayson, Johan Rune, and Tomas Goldbeck-Lowe.\n\
    \   Input for the early versions of this document has been gathered from\n   many\
    \ sources, including the above persons as well as 3GPP and IEEE\n   developments.\
    \  We would also like to thank Alper Yegin, Victor Lortz,\n   Stephen Hayes, and\
    \ David Johnston for comments.\n   Jouni Korhonen would like to thank the Academy\
    \ of Finland for\n   providing funding to work on this document.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Jari Arkko\n   Ericsson\n   Jorvas  02420\n   Finland\n\
    \   EMail: jari.arkko@ericsson.com\n   Bernard Aboba\n   Microsoft\n   One Microsoft\
    \ Way\n   Redmond, WA  98052\n   USA\n   EMail: bernarda@microsoft.com\n   Jouni\
    \ Korhonen\n   TeliaSonera\n   Teollisuuskatu 13\n   Sonera  FIN-00051\n   Finland\n\
    \   EMail: jouni.korhonen@teliasonera.com\n   Farooq Bari\n   AT&T\n   7277 164th\
    \ Avenue N.E.\n   Redmond  WA  98052\n   USA\n   EMail: farooq.bari@att.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2008).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
