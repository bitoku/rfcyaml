- title: __initial_text__
  contents:
  - '                 Ascend''s Multilink Protocol Plus (MP+)

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  This memo\n   does not specify an Internet standard of any kind.  Distribution\
    \ of\n   this memo is unlimited.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document proposes an extension to the PPP Multilink Protocol\n\
    \   (MP) [1]. Multilink Protocol Plus (MP+) is a new control protocol for\n  \
    \ managing multiple data links that are bundled by MP.\n"
- title: Table Of Contents
  contents:
  - 'Table Of Contents

    '
- title: 1.      Introduction.................................................2
  contents:
  - "1.      Introduction.................................................2\n    \
    \    1.1     Functional Description...............................2\n        1.2\
    \     Conventions..........................................3\n"
- title: 2.      General Overview.............................................3
  contents:
  - "2.      General Overview.............................................3\n    \
    \    2.1     Operation............................................4\n"
- title: 3.      MP+ Frame Formats............................................4
  contents:
  - "3.      MP+ Frame Formats............................................4\n    \
    \    3.1     Error Control (EC) Layer.............................6\n        \
    \        3.1.1   Error Control State Machine..................7\n        3.2 \
    \    Multilink Plus Control Messages......................9\n        3.3     Multilink\
    \ Plus Message Formats......................10\n                3.3.1   VERSION_EXCHANGE_REQ\
    \ Message Format.........10\n                3.3.2   VERSION_EXCHANGE_RSP Message\
    \ Format.........12\n                3.3.3   ADD_REQ Message Format......................13\n\
    \                3.3.4   ADD_RSP Message Format......................15\n    \
    \            3.3.5   ADD_COMPLETE Message Format.................16\n        \
    \        3.3.6   REMOVE_REQ Message Format...................17\n            \
    \    3.3.7   REMOVE_RSP Message Format...................17\n                3.3.8\
    \   REMOVE_COMPLETE Message Format..............18\n                3.3.9   CLOSE_REQ\
    \ Message Format....................19\n                3.3.10  CLOSE_RSP Message\
    \ Format....................19\n                3.3.11  REMOTE_MGMT_REQ Message\
    \ Format..............20\n                3.3.12  REMOTE_MGMT_RSP Message Format..............20\n\
    \                3.3.13  REMOTE_MGMT_RX_REQ Message Format...........21\n    \
    \            3.3.14  REMOTE_MGMT_TX_REQ Message Format...........22\n        \
    \        3.3.15  REMOTE_MGMT_TX_RSP Message Format...........22\n            \
    \    3.3.16  CLEAR_REQ Message Format....................23\n        3.4     Events..............................................23\n\
    \        3.5     State Machine.......................................25\n    \
    \            3.5.1   States......................................25\n        \
    \        3.5.2   Common Actions..............................26\n            \
    \    3.5.3   MP+STATE_INITIAL state machine..............32\n                3.5.4\
    \   MP+STATE_IDLE state machine.................35\n                3.5.5   MP+STATE_ADD\
    \ state machine..................37\n                3.5.6   MP+STATE_REMOVE state\
    \ machine...............41\n                3.5.7   MP+STATE_CLOSE state machine................44\n"
- title: 4.      PPP LCP Extensions..........................................46
  contents:
  - '4.      PPP LCP Extensions..........................................46

    '
- title: 5.      Security Considerations.....................................47
  contents:
  - '5.      Security Considerations.....................................47

    '
- title: 6.      References..................................................47
  contents:
  - '6.      References..................................................47

    '
- title: 7.      Author's Address............................................47
  contents:
  - '7.      Author''s Address............................................47

    '
- title: 1. Introduction
  contents:
  - "1. Introduction\n   The PPP Multilink Protocol (MP), is a set of features that\
    \ provide\n   inverse multiplexing at the packet/fragment level by bundling\n\
    \   multiple independent links between a fixed pair of systems, providing\n  \
    \ a virtual link with greater bandwidth than any of the constituent\n   members.\n\
    \   Once multiple channels have been established  MP is responsible for\n   managing\
    \ channel use to insure in-sequence delivery of user packets.\n   MP+ is an extension\
    \ to MP that adds an inband control channel to\n   provide a new level of session\
    \ management and control.\n   MP+ also allows remote device management of (unconfigured)\
    \ systems.\n   This feature allows a network operations center to dial into an\n\
    \   unconfigured system and remotely manage it, before ethernet\n   interface,\
    \ IP address, and other LCP and system configuration\n   information is entered.\
    \  (This does require local configuration of\n   the WAN interfaces to the extent\
    \ required to answer an incoming\n   call).\n"
- title: 1.1 Functional Description
  contents:
  - "1.1 Functional Description\n   The features of MP+ include:\n   * Ability to\
    \ negotiate to add and subtract channels when bandwidth\n     needs change.\n\
    \   * Phone number management so calling stations need not know every\n     possible\
    \ number; answering stations can manage their own resources.\n   * A simple remote\
    \ management interface.\n   To perform the above functions  MP+ is split into\
    \ a call management\n   layer and a reliable delivery layer.  The call management\
    \ layer is\n   the source and sink of  MP+ control messages.  The reliable delivery\n\
    \   layer adds a simple acknowledge and retry mechanism.\n   MP+ only takes network\
    \ bandwidth when in the process of performing a\n   user request, e.g. adding\
    \ and subtracting bandwidth.\n   NOTE: Neither MP, or MP+ define the process that\
    \ makes the bandwidth\n   requirement determination. That is outside the scope\
    \ of either of\n   these protocols and will likely be implementation dependent.\n"
- title: 1.2  Conventions
  contents:
  - "1.2  Conventions\n   The following language conventions are used in the items\
    \ of\n   specification in this document:\n      MUST,  SHALL or  MANDATORY --\
    \ the item is an absolute requirement\n      of the specification.\n      SHOULD\
    \ or RECOMMENDED --   the item should generally be followed\n      for all but\
    \ exceptional circumstances.\n      MAY or OPTIONAL --  the item is truly optional\
    \ and may be followed\n      or ignored according to the needs of the implementor.\n"
- title: 2.  General Overview
  contents:
  - "2.  General Overview\n   PPP\n      In order to establish communications over\
    \ a point-to-point link,\n      each end of the PPP [2] link must first send LCP\
    \ packets to\n      configure the data link during  link establishment  phase.\
    \  After\n      the link has been established, PPP provides for an  authentication\n\
    \      phase.\n   MP The goal of multilink operation is to  bundle  multiple\n\
    \      independent links between a fixed pair of systems, providing a\n      virtual\
    \ link with greater bandwidth than any of the constituent\n      members.\n  \
    \ MP+ MP+ is also negotiated during initial LCP option negotiation.  A\n     \
    \ system indicates to its peer that it is willing to do MP+ by\n      sending\
    \ the  MP+ option as part of the initial LCP option\n      negotiation.  The \
    \ MP+  option MUST NOT be negotiated unless MP is\n      also negotiated. When\
    \ used, MP+ adds a virtual unit-to-unit\n      control channel.\n   A peer may\
    \ elect to:\n   Acknowledge both the MP and MP+ options, indicating that both\
    \ MP and\n   MP+ will be used.\n   Acknowledge the MP option and reject the MP+\
    \ option. Operation will\n   fall back to MP.\n   Reject both options.  Standard\
    \ PPP will be used for this connection.\n"
- title: 2.1. Operation
  contents:
  - "2.1. Operation\n   Standard PPP\n      In standard PPP the LCP negotiation phase\
    \ is followed by an\n      optional authentication phase, and then one or more\
    \ NCPs are\n      initiated.\n   PPP with MP The LCP negotiation phase and authentication\
    \ phase are\n      identical to standard PPP.  The ability to initiate an MP\n\
    \      aggregate data link is indicated by sending an MP option - as\n      described\
    \ in [1].\n   PPP with MP and MP+ When MP+ is negotiated at LCP startup, the same\n\
    \      procedures are followed as when MP is negotiated alone.  The MP+\n    \
    \  LCP option is negotiated to indicate the ability to use the MP+\n      feature.The\
    \ first connection between endpoints causes the MP+\n      process to be started\
    \ for the connection.\n"
- title: 3.  MP+ Frame Formats
  contents:
  - "3.  MP+ Frame Formats\n                    +---------------+---------------+\n\
    \       PPP Header:  | Address 0xff  | Control 0x03  |\n                    +---------------+---------------+\n\
    \                    | PID(H)  0x00  | PID(L)  0x73  |\n                    +-+-+-+-+-------+---------------+\n\
    \       MP Header:   |1|1|0|0|0|0|0|1| seq # high    |\n                    +-+-+-+-+-------+---------------+\n\
    \                    |   sequence number low bits    |\n                    +---------------+---------------+\n\
    \                    |         control data          |\n                    |\
    \               .               |\n                    |               .     \
    \          |\n                    |               .               |\n        \
    \            +---------------+---------------+\n       PPP FCS:     |        \
    \      FCS              |\n                    +---------------+---------------+\n\
    \   Figure 1: Multilink Plus Frame Format (long sequence number format)\n    \
    \                +---------------+---------------+\n       PPP Header:  | Address\
    \ 0xff  | Control 0x03  |\n                    +---------------+---------------+\n\
    \                    | PID(H)  0x00  | PID(L)  0x73  |\n                    +-+-+-+-+-------+---------------+\n\
    \       MP Header:   |1|1|0|1|  sequence number      |\n                    +-+-+-+-+-------+---------------+\n\
    \                    |         control data          |\n                    |\
    \               .               |\n                    |               .     \
    \          |\n                    |               .               |\n        \
    \            +---------------+---------------+\n       PPP FCS:     |        \
    \      FCS              |\n                    +---------------+---------------+\n\
    \   Figure 2: Multilink Plus Frame Format (short sequence number format)\n   MP+\
    \ frames use a similar structure to MP fragments.\n   The MP+ assigned PID is\
    \ designated 00 73.\n   MP+ control uses the following two rules:\n  - MP+ control\
    \ frames have their own sequence number space,\n    controlled by MP+.\n  - MP+\
    \ control frames MUST NOT be fragmented.\n"
- title: 'NOTE: Implementations of this protocol prior to the date of submission'
  contents:
  - "NOTE: Implementations of this protocol prior to the date of submission\n    \
    \  of this specification to the IETF use the same PID as MP, but\n      sets the\
    \ LSB of the reserved bits in the MP header to 1 - this\n      is how the MP+\
    \ packets are discriminated from MP fragments.\n      So the header of the MP+\
    \ packet looks like:\n                00 3d c1 ......\n      As compared to an\
    \ MP packet that looks like:\n                00 3d c0 ......  or\n          \
    \      00 3d 80 ......  or\n                00 3d 40 ......\n"
- title: 3.1. Error Control (EC) Layer (MP+ control only)
  contents:
  - "3.1. Error Control (EC) Layer (MP+ control only)\n   The error control layer\
    \ that runs over the virtual inband channel is\n   as simple as it can get, while\
    \ handling the possibility of errors on\n   the line.\n   An assumption is made\
    \ that errors are infrequent, and that at the\n   same time messages are rarely,\
    \ if ever, dropped on the floor. The\n   implication of this is that \"timing\
    \ out\" on retransmission of\n   messages does no harm.  If a message cannot get\
    \ through, then it\n   simply is retried some number of times.  After giving up,\
    \ the only\n   recourse is to notify the call management layer (of MP) that the\n\
    \   session has died.\n                    +---------------+---------------+\n\
    \       PPP Header:  | Address 0xff  | Control 0x03  |\n                    +---------------+---------------+\n\
    \                    | PID(H)  0x00  | PID(L)  0x73  |\n                    +-+-+-+-+-------+---------------+\n\
    \       MP+ Header:  |1|1|0|0|0|0|0|1| seq # high    |\n                    +-+-+-+-+-------+---------------+\n\
    \                    |   sequence number low bits    |\n                    +---------------+---------------+\n\
    \        EC Header:  | Error Control Message Type    |\n                    |\
    \   32 bits reserved            |\n                    +---------------+---------------+\n\
    \         MP+ Data:  |    MP+ Message                |  May not be\n         \
    \           |                               |  present.\n   Figure 3: MP+ control\
    \ message format (shown long sequence number\n             format)\n  Error Control\
    \ Message Type:\n   1      DATA_MSG:         This message contains MP+ data transferred\n\
    \                            between the peers.\n   2      ACK_MSG:          An\
    \ acknowledgement of a previous data message.\n   When set to DATA_MSG, the remainder\
    \ of the frame contains an MP+\n   Control message.\n   When set to ACK_MSG, the\
    \ remainder of the frame consists only of the\n   PPP Frame Check Sum (FCS).\n"
- title: 3.1.1. Error Control State Machine
  contents:
  - "3.1.1. Error Control State Machine\n   This layer is controlled by a simple state\
    \ machine.  There are three\n   states:\n   Stopped        There is no connection\
    \ between peers.\n   Idle           There is a connection between peers;\n   \
    \               no unacknowledged messages pending.\n   Pending        There is\
    \ a connection between peers;\n                  awaiting an acknowledgement to\
    \ the\n                  last message sent.\n   Messages from the call management\
    \ layer are queued for transmission\n   whenever the link is in the  pending \
    \ state.  For simplicity, only\n   one outstanding message may be in the link\
    \ at any given time.  The\n   entire procedure is defined in table 1.\n"
- title: Event                           State
  contents:
  - 'Event                           State

    '
- title: ______________________________________________________________________
  contents:
  - "______________________________________________________________________\n    \
    \                            Stopped    Idle         Pending\n"
- title: ======================================================================
  contents:
  - '======================================================================

    '
- title: Start                           1,Idle     -,*          -,*
  contents:
  - 'Start                           1,Idle     -,*          -,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Received ACK_MSG                **         2,Start      5,Idle|Pending
  contents:
  - 'Received ACK_MSG                **         2,Start      5,Idle|Pending

    '
- title: current tx sequence number
  contents:
  - 'current tx sequence number

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Received ACK_MSG                **         -,*          -,*
  contents:
  - 'Received ACK_MSG                **         -,*          -,*

    '
- title: last tx sequence number
  contents:
  - 'last tx sequence number

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Received ACK_MSG                **         2,Start      2,Start
  contents:
  - 'Received ACK_MSG                **         2,Start      2,Start

    '
- title: other tx sequence number
  contents:
  - 'other tx sequence number

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Received DATA_MSG               **         6,*          6,*
  contents:
  - 'Received DATA_MSG               **         6,*          6,*

    '
- title: current rx sequence number
  contents:
  - 'current rx sequence number

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Received DATA_MSG               **         7,*          7,*
  contents:
  - 'Received DATA_MSG               **         7,*          7,*

    '
- title: previous rx sequence number
  contents:
  - 'previous rx sequence number

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Received DATA_MSG               **         2,Start      2,Start
  contents:
  - 'Received DATA_MSG               **         2,Start      2,Start

    '
- title: other rx sequence number
  contents:
  - 'other rx sequence number

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Receive Invalid Frame           **         2,Start      2,Start
  contents:
  - 'Receive Invalid Frame           **         2,Start      2,Start

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Retransmit Timer Expire         **         **           4,Start|*
  contents:
  - 'Retransmit Timer Expire         **         **           4,Start|*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Transmit Request from call      -,*        3,Pending    8,*
  contents:
  - 'Transmit Request from call      -,*        3,Pending    8,*

    '
- title: management layer
  contents:
  - 'management layer

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: Stop                            9,Start    9,Start      9,Start
  contents:
  - 'Stop                            9,Start    9,Start      9,Start

    '
- title: ______________________________________________________________________
  contents:
  - "______________________________________________________________________\n    \
    \              Table 1: Error Control State Machine\n"
- title: 'Legend:'
  contents:
  - "Legend:\n        -       No action\n        *       Stay in same state\n    \
    \    **      Invalid or meaningless event for state, ignored.\n"
- title: 'Notes:'
  contents:
  - "Notes:\n   [1] Data from the call management layer will always be copied before\n\
    \       being queued for transmission.  The call management layer is\n       responsible\
    \ for its own buffers.\n   [2] MP always copies data for transmission and returns\
    \ immediately.\n       Any buffers allocated to build control messages MUST be\
    \ released\n       immediately upon return from MP transmission requests.\n"
- title: 'Actions:'
  contents:
  - "Actions:\n   1       Reset rx sequence number\n           Reset tx sequence number\n\
    \           Reset tx retransmit count\n           Stop retransmit timer\n   2\
    \       Report error to user\n           Stop retransmit timer\n           Stop\
    \ frame transmit timer\n           Free buffers\n   3       Save call management\
    \ message in pending transmit queue\n           Build DATA_MSG from first message\
    \ in pending transmit\n           queue using current tx sequence number.\n  \
    \         Send message to MP for transmission.\n           Reset tx retransmit\
    \ count\n   4       Increment tx retransmit count\n           If tx retransmit\
    \ count >= RETRANSMIT_COUNT\n                   Action 2 (followed by state change\
    \ to the Start state)\n           else\n                   Build DATA_MSG from\
    \ first message in pending\n                   transmit queue using current tx\
    \ sequence number.\n                   Send message to MP for transmission.\n\
    \   5       Dequeue first element on pending transmit queue and release\n    \
    \       its buffer\n           Increment the tx sequence number\n           Stop\
    \ the retransmit timer\n           if pending transmit queue not empty\n     \
    \              Build DATA_MSG from first message in pending\n                \
    \   transmit queue using current tx sequence number.\n                   Send\
    \ message to MP for transmission.\n                   Reset tx retransmit count\n\
    \   6       Build ACK_MSG using the current rx sequence number\n           Send\
    \ ack message to MP for transmission\n           Pass message to call managment\
    \ layer\n           Increment rx sequence number\n   7       Build ACK_MSG using\
    \ the previous rx sequence number\n           Send the ack message to MP for transmission\n\
    \   8       Add the message to the end of the pending transmit queue\n   9   \
    \    Stop retransmit timer\n           Free buffers\n"
- title: 3.2. Multilink Plus Control Messages
  contents:
  - "3.2. Multilink Plus Control Messages\n    Message Type                Value\n\
    \    VERSION_EXCHANGE_REQ        1\n    VERSION_EXCHANGE_RSP        2\n    ADD_REQ\
    \                     3\n    ADD_RSP                     4\n    ADD_COMPLETE \
    \               5\n    REMOVE_REQ                  6\n    REMOVE_RSP         \
    \         7\n    REMOVE_COMPLETE             8\n    CLOSE_REQ                \
    \   9\n    CLOSE_RSP                   10\n    REMOTE_MGMT_REQ             11\n\
    \    REMOTE_MGMT_RSP             12\n    REMOTE_MGMT_RX_REQ          13\n    REMOTE_MGMT_TX_REQ\
    \          14\n    REMOTE_MGMT_TX_RSP          15\n    CLEAR_REQ             \
    \      16\n"
- title: 3.3. Multilink Plus Message Formats
  contents:
  - "3.3. Multilink Plus Message Formats\n   The fields of all messages defined here\
    \ MUST be encoded/decoded in\n   Network Byte Order (big endian).\n"
- title: 3.3.1. VERSION_EXCHANGE_REQ Message Format
  contents:
  - "3.3.1. VERSION_EXCHANGE_REQ Message Format\n   The version exchange message is\
    \ sent by the call originator to inform\n   the answerer the version of the MP+\
    \ protocol being used as well as\n   any other information that may need to be\
    \ conveyed outside of the\n   normal PPP parameter negotiation.\n   +---------------+---------------+\n\
    \   |         Message type          |\n   |          0x00000001           |\n\
    \   +---------------+---------------+\n   |       Protocol Version        |\n\
    \   +---------------+---------------+\n   |      Protocol Revision        |\n\
    \   +---------------+---------------+\n   |       Session Identifier      |\n\
    \   +---------------+---------------+\n   |         Hardware Type         |\n\
    \   +---------------+---------------+\n   |          Nailed Mode          |\n\
    \   +---------------+---------------+\n   |   Use Multiple Trunk Groups   |\n\
    \   +---------------+---------------+\n   |       Descriptor Length       |\n\
    \   +---------------+---------------+\n   |          Descriptor           |\n\
    \   +---------------+---------------+\n   Figure 4:  Version Exchange Request\n\
    \   A message sent from call originator to call answerer specifying the\n   callers\
    \ protocol version and other state info and requesting the\n   answerer to respond\
    \ with its version info.\n   Protocol Version:\n           caller MP+ protocol\
    \ version number.\n           2 octets fixed length (initially 1)\n   Protocol\
    \ Revision:\n           caller MP+ protocol revision number.\n           2 octets\
    \ fixed length (initially 4)\n   Session Identifier:\n           A non-zero identifier\
    \ unique to the caller.\n           2 octets fixed length.\n   Hardware Type:\n\
    \           caller hardware type (can be vendor defined).\n           2 octets\
    \ fixed length.\n   Nailed Mode:\n           caller nailed mode from the session\
    \ profile.\n           2 octets fixed length.\n   Use Multiple Trunk Groups:\n\
    \           non-zero if the call may use channels from multiple trunk\n      \
    \     groups.\n           2 octets fixed length\n   Descriptor Length:\n     \
    \      length of the end point descriptor.\n           2 octets fixed length\n\
    \   Descriptor:\n           the end point descriptor. This field allows for vendor\n\
    \           specific identification of the peer.\n           Variable length as\
    \ defined above.\n"
- title: 3.3.2. VERSION_EXCHANGE_RSP Message Format
  contents:
  - "3.3.2. VERSION_EXCHANGE_RSP Message Format\n   The version exchange response\
    \ message is sent by the call answerer in\n   response to a version exchange request\
    \ message.   The answerer uses\n   the message to inform the caller the version\
    \ of the MP+ protocol\n   being used as well as any other information that needs\
    \ to be conveyed\n   outside of the normal PPP parameter negotiation.\n   +---------------+---------------+\n\
    \   |         Message type          |\n   |          0x00000002           |\n\
    \   +---------------+---------------+\n   |      Protocol Version         |\n\
    \   +---------------+---------------+\n   |     Protocol Revision         |\n\
    \   +---------------+---------------+\n   |       Session Identifier      |\n\
    \   +---------------+---------------+\n   |         Hardware Type         |\n\
    \   +---------------+---------------+\n   |          Nailed Mode          |\n\
    \   +---------------+---------------+\n   |   Use Multiple Trunk Groups   |\n\
    \   +---------------+---------------+\n   |       Descriptor Length       |\n\
    \   +---------------+---------------+\n   |         Descriptor            |\n\
    \   +---------------+---------------+\n   Figure 5: Version Exchange Response\n\
    \   A message sent from call answerer to the call originator specifying\n   the\
    \ answerers protocol version and other state info.  Sent in\n   response to receiving\
    \ a version exchange request.\n   Protocol Version:\n           caller MP+ protocol\
    \ version number.\n           2 octets fixed length (initially 1)\n   Protocol\
    \ Revision:\n           caller MP+ protocol revision number.\n           2 octets\
    \ fixed length (initially 4)\n   Session Identifier:\n           A non-zero identifier\
    \ unique to the answerer.\n           2 octets fixed length.\n   Hardware Type:\n\
    \           caller hardware type (can be vendor defined).\n           2 octets\
    \ fixed length.\n   Nailed Mode:\n           caller nailed mode from the session\
    \ profile.\n           2 octets fixed length.\n   Use Multiple Trunk Groups:\n\
    \           non-zero if call may use channels from multiple trunk groups.\n  \
    \         2 octets fixed length\n   Descriptor Length:\n           length of the\
    \ remote descriptor in 4-octet units.\n           2 octets fixed length\n   Descriptor:\n\
    \           the remote unit descriptor. This field allows for vendor\n       \
    \    specific identification of the peer.\n           Variable length Nx4 octets\
    \ long - total length defined above.\n"
- title: 3.3.3. ADD_REQ Message Format
  contents:
  - "3.3.3. ADD_REQ Message Format\n   A message of this type is sent by either caller\
    \ or answerer to\n   initiate an increase of bandwidth.  When sent by the caller\
    \ the\n   request is asking for permission to dial a certain number of\n   channels;\
    \ the response will contain permission and the phone numbers\n   of the channels\
    \ to dial.  When sent by the answerer, this message\n   contains the phone numbers\
    \ to dial.  The message looks like:\n   +---------------+---------------+\n  \
    \ |         Message type          |\n   |          0x00000003           |\n  \
    \ +---------------+---------------+\n   | Number of channels requested  |\n  \
    \ +---------------+---------------+\n   |    Number of phone numbers    |\n  \
    \ +---------------+---------------+\n   |    A phone number list for    |\n  \
    \ |      each phone number        |\n   |               .               |\n  \
    \ |               .               |\n   |               .               |\n  \
    \ +---------------+---------------+\n   Figure 6: Add Request\n   A message sent\
    \ by either caller or answerer to request that additional\n   bandwidth be added\
    \ to a session.\n   Number of channels requested:\n           The maximum number\
    \ of channels to add.\n           2 octets fixed length.\n   Number of phone numbers:\n\
    \           The number of phone numbers provided.  This\n           value will\
    \ always be zero when the caller\n           initiates an add and will be at least\n\
    \           Number of channels requested when the answerer\n           initiates\
    \ the add.\n           2 octets fixed length.\n   Phone number list:\n       \
    \    A list of up to 32 phone number lists\n           containing the phone numbers\
    \ to call.\n           Each description is of fixed length as described below:\n\
    \           Each phone number is represented by a phone number list.\n       \
    \    The format of a phone number list is:\n   +---------------+---------------+\n\
    \   |          in use flag          |\n   +---------------+---------------+\n\
    \   |        call service type      |\n   +---------------+---------------+\n\
    \   |         Phone number          |\n   |          20 octets            |\n\
    \   |     plus null terminator      |\n   |       (21 octet total)        |\n\
    \   |                               |\n   |                               |\n\
    \   |                               |\n   |                               |\n\
    \   |                               |\n   |                               |\n\
    \   |               +---------------+\n   |               |  Must be 0    |\n\
    \   +---------------+---------------+\n   |           must be 0           |\n\
    \   +---------------+---------------+\n   Figure 7: Phone number list\n   A structure\
    \ containing information about a connection within the\n   system.\n   in use\
    \ flag:\n           non-zero if the phone number indicated\n           in this\
    \ descriptor is currently in use.\n           2 octets fixed length\n   call service\
    \ type:\n           Defines the type of service, switched, nailed,\n         \
    \  or other, associated with a phone number.\n           1       Nailed\n    \
    \       2       Switched\n           >=3     Undefined\n   Phone number:\n   \
    \        The null terminated phone number of this channel.\n           Fixed length\
    \ 21 octets. Each octet contains IA5 character\n           representation of a\
    \ digit (or #, *).\n   Must be 0:\n           Filler to force alignment to 32-bit\
    \ boundary.\n"
- title: 3.3.4 ADD_RSP Message Format
  contents:
  - "3.3.4 ADD_RSP Message Format\n   A message of this type gives permission to dial\
    \ some number of\n   channels and, when sent by the answerer of the original call,\
    \ gives\n   the phone numbers of channels to dial.\n   +---------------+---------------+\n\
    \   |         Message type          |\n   |          0x00000004           |\n\
    \   +---------------+---------------+\n   |  Number of channels allowed   |\n\
    \   +---------------+---------------+\n   |    Number of phone numbers    |\n\
    \   +---------------+---------------+\n   |   A  phone number list for    |\n\
    \   |      each phone number        |\n   |               .               |\n\
    \   |               .               |\n   |               .               |\n\
    \   +---------------+---------------+\n   Figure 8: Add Response\n   A message\
    \ sent by either caller or answerer to indicate the number of\n   channels that\
    \ may be added to a session.\n   Number of channels allowed:\n           The actual\
    \ number of channels to add.  This\n           may be less than the number requested.\n\
    \           2 octets fixed length.\n   Number of phone numbers:\n           The\
    \ number of phone numbers provided.  This\n           value will always be zero\
    \ when sent by the\n           caller and will be at least channelCount\n    \
    \       when sent by the answerer.\n           2 octets fixed length.\n   Phone\
    \ number list:\n           A list of up to 32 phone number lists\n           containing\
    \ the phone numbers to call.\n           Each description is of fixed length as\
    \ described above.\n"
- title: 3.3.5. ADD_COMPLETE Message Format
  contents:
  - "3.3.5. ADD_COMPLETE Message Format\n   This message is sent by the caller to\
    \ the answerer after all calls\n   have been placed.  The message is used to notify\
    \ the answerer that\n   the add transaction is complete and it may return to the\
    \ idle state.\n   +---------------+---------------+\n   |         Message type\
    \          |\n   |          0x00000005           |\n   +---------------+---------------+\n\
    \   |       Channels added          |\n   +---------------+---------------+\n\
    \   |          Must be zero         |\n   +---------------+---------------+\n\
    \   Figure 9: Add Complete\n   A message sent by caller to indicate the number\
    \ of channels that were\n   added successfully. This message was added in MP+\
    \ Version 1.1.\n   Channels added:\n           The actual number of channels added.\n\
    \           2 octets fixed length\n   Must be zero:\n           Padding to 32-bit\
    \ boundary.\n           2 octets fixed length\n"
- title: 3.3.6. REMOVE_REQ Message Format
  contents:
  - "3.3.6. REMOVE_REQ Message Format\n   A message of this type is sent when a peer\
    \ decides, for any reason,\n   to remove channels from use.  The purpose of the\
    \ message is to tell\n   the remote end of the remove and give it a chance to\
    \ adjust the\n   number of channels to remove.\n   +---------------+---------------+\n\
    \   |         Message type          |\n   |          0x00000006           |\n\
    \   +---------------+---------------+\n   | Number of channels to remove  |\n\
    \   +---------------+---------------+\n   |          Must be zero         |\n\
    \   +---------------+---------------+\n   Figure 10: Remove Request\n   A message\
    \ sent by either caller or answerer to request that bandwidth\n   be removed from\
    \ a session.\n   Number of channels to remove:\n           The maximum number\
    \ of channels to remove.\n           2 octets fixed length\n   Must be zero:\n\
    \           Padding to 32-bit boundary.\n           2 octets fixed length\n"
- title: 3.3.7. REMOVE_RSP Message Format
  contents:
  - "3.3.7. REMOVE_RSP Message Format\n   This message is sent in response to a remove\
    \ request.  The responder\n   specifies the number of channels that can be removed.\
    \  If the\n   response specifies 0 channels the remove is cancelled.\n   +---------------+---------------+\n\
    \   |         Message type          |\n   |          0x00000007           |\n\
    \   +---------------+---------------+\n   | Number of channels to remove  |\n\
    \   +---------------+---------------+\n   |          Must be zero         |\n\
    \   +---------------+---------------+\n   Figure 11: Remove Response\n   A message\
    \ sent in response to a remove request specifying the number\n   of channels that\
    \ the peer agrees can be removed.\n   Number of channels to remove:\n        \
    \   The maximum number of channels to remove.\n           May be zero, in which\
    \ case the remove is\n           cancelled.\n           2 octets fixed length\n\
    \   Must be zero:\n           Padding to 32-bit boundary.\n           2 octets\
    \ fixed length\n"
- title: 3.3.8. REMOVE_COMPLETE Message Format
  contents:
  - "3.3.8. REMOVE_COMPLETE Message Format\n   This message is sent by the initiator\
    \ of a remove transaction when\n   the agreed upon number of channels have been\
    \ removed.  The message is\n   used to notify the peer that the remove transaction\
    \ is complete and\n   it may return to the idle state.\n   +---------------+---------------+\n\
    \   |         Message type          |\n   |          0x00000008           |\n\
    \   +---------------+---------------+\n   | Number of channels removed    |\n\
    \   +---------------+---------------+\n   |          Must be zero         |\n\
    \   +---------------+---------------+\n   Figure 12: Remove Complete\n   A message\
    \ sent by the caller or answerer to indicate how many channels\n   were actually\
    \ removed. This message was added in MP+ CM version 1.1.\n   Number of channels\
    \ removed:\n           The number of channels that were removed.\n           2\
    \ octets fixed length\n   Must be zero:\n           Padding to 32-bit boundary.\n\
    \           2 octets fixed length\n"
- title: 3.3.9. CLOSE_REQ Message Format
  contents:
  - "3.3.9. CLOSE_REQ Message Format\n   This message is sent when the peer requests\
    \ to close the whole\n   session.  This is typically due to a configuration option\
    \ that\n   indicates when a system should request to close the session (an\n \
    \  example being, a link has been idle for greater than a preconfigured\n   time\
    \ period).\n   +---------------+---------------+\n   |         Message type  \
    \        |\n   |          0x00000009           |\n   +---------------+---------------+\n\
    \   Figure 13: MP+ close request.\n   There are no data fields associated with\
    \ this message.\n"
- title: 3.3.10. CLOSE_RSP Message Format
  contents:
  - "3.3.10. CLOSE_RSP Message Format\n   If the peer agrees that closing the session\
    \ is acceptable based on\n   it's own configuration (an example reject reason\
    \ would be that the\n   peer is configured with a *minimum* number of channels\
    \ to keep\n   active).\n   +---------------+---------------+\n   |         Message\
    \ type          |\n   |          0x0000000a           |\n   +---------------+---------------+\n\
    \   |          OK To Close          |\n   +---------------+---------------+\n\
    \   |          Must be zero         |\n   +---------------+---------------+\n\
    \   Figure 14: MP+ close response\n   The response to a close request. May be\
    \ sent by caller or answerer.\n   OK To Close:\n           If non-zero, peer said\
    \ I can close all channels.\n           2 octets fixed length\n   Must be zero:\n\
    \           Padding to 32-bit boundary.\n           2 octets fixed length\n"
- title: 3.3.11. REMOTE_MGMT_REQ Message Format
  contents:
  - "3.3.11. REMOTE_MGMT_REQ Message Format\n   This message is sent from a master\
    \ station to a slave station when\n   the master wishes to manage the remote station.\
    \  The message is also\n   used to cancel remote management once it's been started.\n\
    \   +---------------+---------------+\n   |         Message type          |\n\
    \   |          0x0000000b           |\n   +---------------+---------------+\n\
    \   |              Mode             |\n   +---------------+---------------+\n\
    \   |          Must be zero         |\n   +---------------+---------------+\n\
    \   Figure 15: Remote Management Request\n   A message sent from master to slave\
    \ to initiate or clear a remote\n   management session.\n   Mode:\n          \
    \ One to start session. Zero to stop session.\n           2 octets fixed length\n\
    \   Must be zero:\n           Padding to 32-bit boundary.\n           2 octets\
    \ fixed length\n"
- title: 3.3.12. REMOTE_MGMT_RSP Message Format
  contents:
  - "3.3.12. REMOTE_MGMT_RSP Message Format\n   The slave side of a remote management\
    \ session has the opportunity to\n   reject remote management.  The master side\
    \ is informed of accept/deny\n   status via the remote management response.\n\
    \   +---------------+---------------+\n   |         Message type          |\n\
    \   |          0x0000000c           |\n   +---------------+---------------+\n\
    \   |              Mode             |\n   +---------------+---------------+\n\
    \   Figure 16: Remote Management Response\n   A message sent from slave to master\
    \ to allow or deny initiation of a\n   remote management session.\n   Mode:\n\
    \           One to accept session. Zero to deny session.\n           2 octets\
    \ fixed length\n   Must be zero:\n           Padding to 32-bit boundary.\n   \
    \        2 octets fixed length\n"
- title: 3.3.13. REMOTE_MGMT_RX_REQ Message Format
  contents:
  - "3.3.13. REMOTE_MGMT_RX_REQ Message Format\n   This message type is used to convey\
    \ keyboard input from the\n   management master to be processed by the management\
    \ slave.  The\n   message format consists of an octet count (in network byte order)\
    \ and\n   then an array of octets to be processed.  It looks like:\n   +---------------+---------------+\n\
    \   |         Message type          |\n   |          0x0000000d           |\n\
    \   +---------------+---------------+\n   |         character count       |\n\
    \   +---------------+---------------+\n   |      array of characters      |\n\
    \   |               .               |\n   |               .               |\n\
    \   |               .               |\n   +---------------+---------------+\n\
    \   Figure 17: Remote Management Receive Request\n   A message sent from master\
    \ to slave, conveying keystrokes typed on the\n   masters keyboard that will be\
    \ processed by the slave.\n   character count:\n           Number of characters\
    \ to process.\n           2 octets fixed length\n   array of characters:\n   \
    \        Array of characters to process.\n"
- title: 3.3.14. REMOTE_MGMT_TX_REQ Message Format
  contents:
  - "3.3.14. REMOTE_MGMT_TX_REQ Message Format\n   The remote management slave conveys\
    \ output to be displayed on the\n   masters terminal with a remote management\
    \ transmit request message.\n   Only one message may be outstanding.  The next\
    \ transmit request may\n   not be sent until the previous has been acknowledged.\n\
    \   +---------------+---------------+\n   |         Message type          |\n\
    \   |          0x0000000e           |\n   +---------------+---------------+\n\
    \   |         character count       |\n   +---------------+---------------+\n\
    \   |      array of characters      |\n   |               .               |\n\
    \   |               .               |\n   |               .               |\n\
    \   +---------------+---------------+\n   Figure 18: Remote Management Transmit\
    \ Request\n   A message sent from slave to master, conveying output to be output\
    \ on\n   the master's display.\n   Character count:\n           Number of characters\
    \ to process.\n           2 octets fixed length\n   array of characters:\n   \
    \        Array of characters to process.\n"
- title: 3.3.15. REMOTE_MGMT_TX_RSP Message Format
  contents:
  - "3.3.15. REMOTE_MGMT_TX_RSP Message Format\n   This message is used to acknowledge\
    \ remote management transmit\n   requests.  The slave may send the next transmit\
    \ request once this\n   message has been received.\n   +---------------+---------------+\n\
    \   |         Message type          |\n   |          0x0000000f           |\n\
    \   +---------------+---------------+\n   Figure 19: Remote Management Transmit\
    \ Response\n   There are no data fields associated with this message.\n"
- title: 3.3.16. CLEAR_REQ Message Format
  contents:
  - "3.3.16. CLEAR_REQ Message Format\n   A message sent to initiate a friendly shutdown\
    \ of an  MP+ link.  The\n   sender will stop sending data immediately.  The receiver\
    \ of the\n   message will also stop sending user data and start a clean shutdown\n\
    \   of all NCPs and the LCP of each member link of the bundle.  When the\n   last\
    \ member link terminates, the session is completely closed.\n   +---------------+---------------+\n\
    \   |         Message type          |\n   |          0x00000010           |\n\
    \   +---------------+---------------+\n   Figure 20: Clear Request\n   There are\
    \ no data fields associated with this message.\n"
- title: 3.4. Events
  contents:
  - "3.4. Events\n   The MP+ state machine is event driven. Reception of an event\
    \ triggers\n   an action and possibly a state change. The events processed by\
    \ the\n   MP+ state machine can be roughly classed into two types:\n      Events\
    \ that originate within the unit, e.g. notification that a\n      call has cleared,\
    \ an  MP+ session may be started, etc.\n      Events that originate with the reception\
    \ of an  MP+ control\n      message from the peer unit.\n   Both types are processed\
    \ by the state machine in the sequence they\n   occurred. The events processed\
    \ are:\n   MP+START_SESSION:    Notification from PPP/MP that an\n           \
    \             MP+ session is starting.\n   MP+SESSION_DOWN:     Notification from\
    \ the error-control\n                        layer that end-to-end connectivity\n\
    \                        has been lost and control messages can\n            \
    \            not be delivered.\n   MP+SESSION_TERM:     Session termination notification\
    \ from\n                        PPP/MP.  This event is not sent until\n      \
    \                  the last channel of a multi-channel\n                     \
    \   session is cleared.\n   MP+TIMER_EXPIRED:    Timers are used in various states\
    \ and\n                        sub-states.  This event is signaled whenever\n\
    \                        a timer expires.\n   MP+CALL_COMPLETE:    A call placed\
    \ during an add request has\n                        completed.  The call may\
    \ have succeeded or\n                        failed.\n   MP+UTILIZATION:     \
    \ Notification from MP/PPP that link\n                        utilization has\
    \ crossed a threshold and that\n                        channels may need to be\
    \ added/removed.\n                        (The number of channels to add/remove\
    \ will be\n                         passed with the notification).\n   MP+RX_VERSION_REQ:\
    \   A Version Exchange request message has\n                        been received\
    \ from the peer.\n   MP+RX_VERSION_RSP:   A Version Exchange response message\
    \ has\n                        been received from the peer.\n   MP+ADD_REQ:  \
    \        An Add request message has been received\n                        from\
    \ the peer.\n   MP+ADD_RSP:          An Add response message has been received\n\
    \                        from the peer.\n   MP+ADD_COMP:         An Add Complete\
    \ message has been received\n                        from the peer.\n   MP+REMOVE_REQ:\
    \       A Remove request message has been received\n                        from\
    \ the peer.\n   MP+REMOVE_RSP:       A Remove response message has been\n    \
    \                    received from the peer.\n   MP+REMOVE_COMP:      A Remove\
    \ Complete message has been received\n                        from the peer.\n\
    \   MP+RX_RM_REQ:        A Remote Management request has been received\n     \
    \                   from the peer.\n   MP+RX_RM_RSP:        A Remote Management\
    \ response has been received\n                        from the peer.\n   MP+RX_RM_RX_REQ:\
    \     A Remote Management Receive Request has been\n                        received\
    \ from the far end.\n   MP+RX_RM_TX_REQ:     A Remote Management Transmit Request\
    \ has\n                        been received from the peer.\n   MP+RX_RM_TX_RSP:\
    \     A Remote Management Transmit Response has\n                        been\
    \ received from the peer.\n   MP+RX_CLEAR:         A request to shut down the\
    \ session has been\n                        received from the peer.\n   MP+CLOSE_REQ:\
    \        A Close Request message has been received\n                        from\
    \ the peer.\n   MP+CLOSE_RSP:        A Close Response message has been received\n\
    \                        from the peer.\n   MP+START_RM          Request to start\
    \ a remote management session\n                        with this station being\
    \ the master.\n   MP+SEND_RMS:         Request to send data to a remote management\n\
    \                        master from a slave.\n   MP+SEND_RMM:         Request\
    \ to send data to a remote management\n                        slave from a master.\n\
    \   MP+RECV_RMM:         Request to send an ack to a remote management\n     \
    \                   slave for data received from the slave.\n   MP+STOP_RM:  \
    \        Request to stop a remote management session.\n"
- title: 3.5. State Machine
  contents:
  - '3.5. State Machine

    '
- title: 3.5.1 States
  contents:
  - "3.5.1 States\n   To ease readability and understanding the major states are considered\n\
    \   as separate state machines, each having two to four sub-states. The\n   sub-states\
    \ are named by the letters, A, B, C, and D. State\n   information is maintained\
    \ for every interface.\n   The major states are:\n   MP+STATE_INITIAL: The state\
    \ of an unused session. Session table\n                     entries are intialized\
    \ to this state at startup\n                     and return to this state when\
    \ sessions are\n                     terminated.\n   MP+STATE_IDLE:    The state\
    \ of an active session that is not\n                     performing any MP+ function.\n\
    \   MP+STATE_ADD:     The state of a session when an add transaction is\n    \
    \                 in progress.\n   MP+STATE_REMOVE:  The state of a session when\
    \ a remove transaction is\n                     in progress.\n   MP+STATE_CLOSE:\
    \   The state of a session that is in the process of\n                     being\
    \ closed.\n   State transitions are triggered by the reception of an event.  Tables\n\
    \   2 through 6 contain the state tables for the major states.  All state\n  \
    \ tables use the following symbols.\n        -       No action\n        *    \
    \   Stay in same state\n        +       Target state is defined by the action\
    \ taken\n        **      An error has occurred, log an error message but no\n\
    \                state change.\n   States and sub-state transitions are noted\
    \ as state:sub-state, e.g.,\n   initial:A.  Alternative transitions are listed\
    \ on separate lines.\n"
- title: 3.5.2 Common Actions
  contents:
  - "3.5.2 Common Actions\n   Some actions are common to all states, they are defined\
    \ here.\n"
- title: Error Close Action
  contents:
  - "Error Close Action\n        Called to close a session when an error occurs. Actions\
    \ are:\n        [1]  Stop timer if running.\n        [2]  Log an error message.\n\
    \        [3]  Close the MP+EC layer for this session.\n        [4]  Close MP for\
    \ this session\n        [5]  Clean up, restore state variables to their initial\
    \ state.\n"
- title: Term Action
  contents:
  - "Term Action\n        Processed when a MP+SESSION_TERM event occurs in most states.\n\
    \        Actions are:\n        [1]  Stop timer if running.\n        [2]  Close\
    \ the  MP+EC layer for this session.\n        [3]  Call the passed termination\
    \ callback function if not null.\n        [4]  Clean up, restore state variables\
    \ to their initial state.\n"
- title: Ignore Action
  contents:
  - "Ignore Action\n        We don't care about this event in this state.  Do nothing.\n"
- title: Timer Action
  contents:
  - "Timer Action\n        This action is called when a timer expires in one of the\
    \ on-line\n        states. The timer is used to implement add and remove locks.\
    \  A\n        lock is set when an add or remove fails and is not cleared until\n\
    \        a bandwidth change or the timer expires. This keeps us from\n       \
    \ retrying add's and subtracts until there is a likelyhood that it\n        will\
    \ succeed.\n        [1]  Check add lock flag.\n                [1] If set an add\
    \ lock occured last timeout period so\n                triple the timeout value\
    \ (to a max of 81 minutes).\n                [2] If not set restore the timeout\
    \ value to its initial\n                value of one minute.\n        [2]  Clear\
    \ the add lock flag.\n        [3]  Clear the remove lock flag.\n        [4]  Restart\
    \ the retry timer.\n"
- title: Enter Remove [local] Action
  contents:
  - "Enter Remove [local] Action\n        The local unit is initiating a remove transaction.\
    \ The desired\n        bandwidth is given.\n        [1]  Restart the idle timer.\n\
    \        [2]  Calculate number of channels to remove (difference between\n   \
    \     number in use and number in desired).\n        [3]  Build and send a remove\
    \ request and send to remote.\n        [4]  Go to REMOVE:A.\n"
- title: Enter Remove [remote] Action
  contents:
  - "Enter Remove [remote] Action\n        The remote unit is initiating a remove\
    \ transaction. The incoming\n        message contains the number of channels to\
    \ remove.\n        [1]  Restart the idle timer.\n        [2]  Request the number\
    \ of channels required. If greater than the\n        number available after removing\
    \ the number of channels indicated\n        in the incoming message reduce the\
    \ number of channels to remove\n        and set a remove lock.\n        [3] Build\
    \ a remove response message indicating the number of\n        channels we will\
    \ allow the requester to remove and send to the\n        remote.\n        [4]\
    \  Go to  REMOVE:B.\n"
- title: Enter Add [local] Action
  contents:
  - "Enter Add [local] Action\n        The local unit is initiating an add transaction.\
    \  We are given\n        the number of channels desired.  The steps are:\n   \
    \     [1]  Restart the idle timer.\n        [2]  Calculate number of channels\
    \ to add (difference between\n        number desired and number in use).\n   \
    \     [3]  Reserve number of channels, retrieving their phone numbers.\n     \
    \   [4]  If number of channels reserved less than the number desired\n       \
    \ set an add lock.\n        [5]  If number of channels reserved greater than zero.\n\
    \                [1] Build an add request. If the answerer the request\n     \
    \           includes the phone numbers for the caller to dial.\n             \
    \   [2] If caller, go to ADD:A.\n                [3] If answerer, go to ADD:C.\n\
    \        [6]  Go to  IDLE state.\n"
- title: Enter Remove [remote] Action
  contents:
  - "Enter Remove [remote] Action\n        The remote unit is initiating a remove\
    \ transaction.  The\n        incoming  message contains the number of channels\
    \ to remove.\n        [1]  Clear the remove lock.\n        [2]  Restart the idle\
    \ timer.\n        [3]  Request the number of channels required.   If  greater\n\
    \        than the number available after removing the number of\n        channels\
    \ indicated in the incoming message reduce  the\n        number of channels to\
    \ remove.\n        [4]  Build  a remove response message indicating the number\n\
    \        of channels we will allow the requester to remove  and\n        send\
    \ to the remote.\n        [5]  Go to REMOVE, sub-state B.\n"
- title: Enter Add [remote answerer] Action
  contents:
  - "Enter Add [remote answerer] Action\n        We've received a message from  the\
    \  remote  requesting  that\n        bandwidth  be  added.   The  message  contains\
    \ the number of\n        channels to add.  Since the remote is the answerer, the\
    \ mes-\n        sage  also  contains the phone nubmers to dial.  We may dial\n\
    \        less than the number requested.\n        [1]  Restart idle timer.\n \
    \       [2]  If the number of channels requested will put  us  over\n        the\
    \ maximum number of channels allowed for the session\n        reduce the channel\
    \ count.\n        [3]  For each channel to add,\n                [1] Integrate\
    \ the phone  number  returned  from  the\n                answerer  with the original\
    \ phone number dialed.\n                [2] Request that a session be  extended\
    \  by  dialing\n                the  integrated  phone  number.   A  callback\
    \ is\n                passed with the request so call success or fail-\n     \
    \           ure can be reported back to MP+.\n        [4]  Go to ADD:B.  Note:\
    \  This change must actu-\n        ally occur before requesting the first outgoing\
    \  call.\n        If  not,  the  callback  could be called (and ignored)\n   \
    \     because the session is not in the correct state.\n"
- title: Enter Add [remote caller] Action
  contents:
  - "Enter Add [remote caller] Action\n        We've  received  a  message  from the\
    \ remote requesting that\n        bandwidth be added.  The  message  contains\
    \  the  number  of\n        channels  to  add.  Since the remote is the caller,\
    \ it needs\n        us to send the phone numbers to dial.   We  may  send  fewer\n\
    \        phone numbers than requested\n        [1]  Restart idle timer.\n    \
    \    [2]  If  the  number of channels requested will put us over\n        the\
    \ maximum number of channels allowed for the session\n        reduce the channel\
    \ count.\n        [3]  Reserve  the  adjusted  number of channels, retrieving\n\
    \        their phone numbers.\n        [4]  If the number of channels reserved\
    \ is  less  than  the\n        adjusted number requested.\n        [5]  Build\
    \ an add response  message,  including  the  phone\n        numbers  for  the\
    \  channels we will let the caller add\n        and send it to the far end.\n\
    \        [6]  Go to ADD:C.\n"
- title: Enter Idle Action
  contents:
  - "Enter Idle Action\n        The IDLE state is entered at the end of normal transactions.\n\
    \        At  entry  the  current  status  of the connection should be\n      \
    \  checked and new transactions initiated if necessary.  To  be\n        safe,\
    \  we  can  also  use this state as a catch all place to\n        release any\
    \ bandwidth reserved for adds.  The  functions  to\n        perform are:\n   \
    \     [1]  Restart  the idle timer using the current retry value.\n        [2]\
    \  Release any reserved bandwidth not actually in use.\n        [3]  Check if\
    \ bandwidth change reqested during last  trans-\n             action.  If change\
    \ indicated:\n                [1]  Query channel counts.\n                [2]\
    \  If  current  bandwidth less than suggested band-\n                     width\
    \ and removes  are  not  locked,  store  the\n                     requested bandwidth\
    \ and initiate a remove trans-\n                     action (Enter Remove Action).\n\
    \                [3]  If  current  bandwidth  greater  than  suggested\n     \
    \                bandwidth and adds are not locked:\n                       [1]\
    \  Store the requested bandwidth.\n                       [2]  Intiate  an  add\
    \  transaction  (Enter  Add\n                            [local] Action).\n  \
    \     [4]  Go to the IDLE state.\n"
- title: Remote Management Request Action
  contents:
  - "Remote Management Request Action\n        We received a request to start/stop\
    \ remote management.\n        If this is a start request\n                If we\
    \ can/allow remote management:\n                        Build and send a Remote\
    \ management response Allow\n                        message.\n              \
    \  Else\n                        Build and send a Remote management response Deny\n\
    \                        message.\n        Else (this is a stop)\n           \
    \     Notify the remote management slave process to terminate.\n"
- title: Remote Management Response Action
  contents:
  - "Remote Management Response Action\n        We received a response to our remote\
    \ management start request.\n        If the response was an Allow response\n \
    \               Notify the remote management master process, we can\n        \
    \        start sending keystrokes/commands\n        Else\n                The\
    \ peer denied the request, so notify the remote\n                management master\
    \ process of failure.\n"
- title: Remote Management Receive Data Action
  contents:
  - "Remote Management Receive Data Action\n        We (the slave) received data from\
    \ the remote management master.\n        Pass the received data to the remote\
    \ management slave process.\n        This is typically keystroke data received\
    \ from the remote user\n        interface.\n"
- title: Remote Management Transmit Data Action
  contents:
  - "Remote Management Transmit Data Action\n        We (the master) received data\
    \ from the remote management slave.\n        Pass the received data to the remote\
    \ management master process.\n        This is typically screen-updates to be passed\
    \ to the user\n        interface.\n"
- title: Remote Management Transmit Data Response Action
  contents:
  - "Remote Management Transmit Data Response Action\n        We (the slave) received\
    \ an ack to data we previously sent to the\n        master. Notify the remote\
    \ management slave process so that it\n        can queue further transmissions.\n"
- title: Remote management (Master) start Action
  contents:
  - "Remote management (Master) start Action\n        Build a REMOTE_MGMT_REQ start\
    \ message and send to the far end.\n        Send a proceeding message to the RM\
    \ master process.\n"
- title: Remote management (Slave) data Action
  contents:
  - "Remote management (Slave) data Action\n        Build a REMOTE_MGMT_TX_REQ message\
    \ with the data passed from\n        the remote management slave process, send\
    \ it to the far end.\n"
- title: Remote management (Master) data Action
  contents:
  - "Remote management (Master) data Action\n        Build a REMOTE_MGMT_RX_REQ message\
    \ with data passed from the\n        remote management master process, send it\
    \ to the far end.\n"
- title: Remote management data acknowledgement Action
  contents:
  - "Remote management data acknowledgement Action\n        Build a REMOTE_MGMT_TX_RSP\
    \ message and send it so the slave can\n        send the next block. There is\
    \ no data associated with this\n        message.\n"
- title: Remote management (Master) stop Action
  contents:
  - "Remote management (Master) stop Action\n        Build a REMOTE_MGMT_REQ stop\
    \ message and send to the far end.\n"
- title: 3.5.3. MP+STATE_INITIAL state machine
  contents:
  - "3.5.3. MP+STATE_INITIAL state machine\n   All sessions start from this state,\
    \ sub-state A. The state is not\n   exited until version exchange succeeds.\n\
    \   The sub-states are:\n        A       Initial state\n        B       Sent version\
    \ request, waiting for version response.\n        C       Waiting for version\
    \ request.\n"
- title: Event                                   Sub-state
  contents:
  - 'Event                                   Sub-state

    '
- title: ______________________________________________________________________
  contents:
  - "______________________________________________________________________\n    \
    \                       A                    B               C\n"
- title: ======================================================================
  contents:
  - '======================================================================

    '
- title: MP+START_SESSION           1,+                  **              **
  contents:
  - 'MP+START_SESSION           1,+                  **              **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+SESSION_DOWN            **              2,Initial:A    2,Initial:A
  contents:
  - 'MP+SESSION_DOWN            **              2,Initial:A    2,Initial:A

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+SESSION_TERM            **              3,Initial:A    3,Initial:A
  contents:
  - 'MP+SESSION_TERM            **              3,Initial:A    3,Initial:A

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+TIMER_EXPIRED           **              4,Initial:A    7,Initial:B
  contents:
  - 'MP+TIMER_EXPIRED           **              4,Initial:A    7,Initial:B

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RX_VERSION_REQ          **              8,Initial:A         5,+
  contents:
  - 'MP+RX_VERSION_REQ          **              8,Initial:A         5,+

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RX_VERSION_RSP          **                  6,+             **
  contents:
  - 'MP+RX_VERSION_RSP          **                  6,+             **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+START_RM               9,*                  9,*             9,*
  contents:
  - 'MP+START_RM               9,*                  9,*             9,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: All other events           **                  **              **
  contents:
  - 'All other events           **                  **              **

    '
- title: ______________________________________________________________________
  contents:
  - "______________________________________________________________________\n    \
    \                Table 2:  Initial State Machine\n"
- title: 'Actions:'
  contents:
  - 'Actions:

    '
- title: 1       Start timer, 60 seconds if originator, 30 seconds if answerer.
  contents:
  - "1       Start timer, 60 seconds if originator, 30 seconds if answerer.\n    \
    \    Start MP+\n        If originator\n                Build and send version\
    \ exchange request\n                Go to INITIAL, sub-state B.\n        Go to\
    \ INITIAL, sub-state C.\n"
- title: 2       Do  Error Close Action, go to INITIAL, sub-state A.
  contents:
  - '2       Do  Error Close Action, go to INITIAL, sub-state A.

    '
- title: 3       Do  Term Action, go to INITIAL, sub-state A.
  contents:
  - '3       Do  Term Action, go to INITIAL, sub-state A.

    '
- title: 4       Do  Error Close Action, go to INITIAL, sub-state A.
  contents:
  - '4       Do  Error Close Action, go to INITIAL, sub-state A.

    '
- title: 5       Stop the idle timer.
  contents:
  - "5       Stop the idle timer.\n        Compare protocol versions, if they do not\
    \ match Do Error Close\n        Action, go to  INITIAL, sub-state A.\n       \
    \ Store off info received from remote.\n        Build a version exchange response\
    \ and send to remote end.\n        Do  Enter Idle Action  which causes a state\
    \ change.\n"
- title: 6       Stop the retry timer.
  contents:
  - "6       Stop the retry timer.\n        Compare protocol versions, if they do\
    \ not match Do Error Close\n        Action, go to INITIAL, sub-state A.\n    \
    \    Store off info received from remote.\n        Check the base channel count\
    \ in the callers profile.\n        If greater than 1\n                Set the\
    \ requested bandwidth to the base channel count.\n                Do  Enter Add\
    \ Caller  action which causes a state change.\n        Do  Enter Idle Action \
    \ which causes a state change.\n"
- title: 7       Both sides think they are the answerer. This is possible if both
  contents:
  - "7       Both sides think they are the answerer. This is possible if both\n  \
    \      dial each other at the same time and the first channel that\n        completed\
    \ PPP negotiation happened to be the channel associated\n        with the incoming\
    \ call on both units. We resolve this by trying\n        to become the originator.\n\
    \        If both sides try to become the originator the one with the\n       \
    \ largest endpoint discriminator will fall back to being the\n        answerer.\n\
    \                Restart Idle timer at 60 seconds\n                Build and send\
    \ Version Exchange Request message\n                Go to Initial:B\n"
- title: 8       Both sides think they are the originator. This can happen if
  contents:
  - "8       Both sides think they are the originator. This can happen if\n      \
    \  both dial each other at the same time and the first channel\n        that completed\
    \ PPP negotiation happened to be the channel\n        associated with the originating\
    \ call on both units. MP+\n        determines which will be the caller and which\
    \ the answerer by\n        comparing the endpoind discriminator in the version\
    \ exchange\n        request with the local endpoint discriminator. The unit with\n\
    \        the smaller endpoint is arbitrarily called the originator. The\n    \
    \    actions are:\n        Compare local endpoint discriminator with endpoint\
    \ discrimator\n        in message.\n        If local endpoint discriminator is\
    \ less than the remote value\n        we are the caller, ignore the incoming message.\n\
    \        Otherwise, if local endpoint discriminator is greater than the\n    \
    \    remote value we are the answerer:\n                Compare protocol versions,\
    \ if they do not match\n                Do  Error Close Action, go to INITIAL,\
    \ sub-state A.\n                Store off info received from remote.\n       \
    \         Build a version exchange response and send to remote end.\n        \
    \        Do  Enter Idle Action  which causes a state change.\n        If the two\
    \ values match, there is a problem, Do Error Close\n        Action,go to INITIAL,\
    \ sub-state A.\n"
- title: 9       Log an error message.
  contents:
  - "9       Log an error message.\n        Notify the user interface of remote management\
    \ failure.\n"
- title: 3.5.4. MP+STATE_IDLE state machine
  contents:
  - "3.5.4. MP+STATE_IDLE state machine\n   The Idle state is the state of an active\
    \ session with no call\n   management activity in progress.\n   There are no sub-states.\n\
    \   Event                    State\n   _____________________________________________\n\
    \                               A\n   =============================================\n\
    \   MP+SESSION_DOWN         1,Initial:A\n   _____________________________________________\n\
    \   MP+SESSION_TERM         2,Initial:A\n   _____________________________________________\n\
    \   MP+TIMER_EXPIRED        3,*\n   _____________________________________________\n\
    \   MP+UTILIZATION          4,+\n   _____________________________________________\n\
    \   MP+RX_ADD_REQ           5,+\n   _____________________________________________\n\
    \   MP+RX_REMOVE_REQ        6,Remove:B\n   _____________________________________________\n\
    \   MP+RX_RM_REQ            7,+\n   _____________________________________________\n\
    \   MP+RX_RM_RSP            8,+\n   _____________________________________________\n\
    \   MP+RX_RM_RX_REQ         9,+\n   _____________________________________________\n\
    \   MP+RX_RM_TX_REQ         10,+\n   _____________________________________________\n\
    \   MP+RX_RM_TX_RSP         11,+\n   _____________________________________________\n\
    \   MP+RX_CLOSE_REQ         12,+\n   _____________________________________________\n\
    \   MP+START_RM             13,*\n   _____________________________________________\n\
    \   MP+SEND_RMS             14,*\n   _____________________________________________\n\
    \   MP+SEND_RMM             15,*\n   _____________________________________________\n\
    \   MP+RECV_RMM             16,*\n   _____________________________________________\n\
    \   MP+STOP_RM              17,*\n   _____________________________________________\n\
    \   All other events        **\n   _____________________________________________\n\
    \   Table 3:  Idle State Machine\n   Actions:\n   1       Do Error Close Action,\
    \ go to INITIAL, sub-state A.\n   2       Do Term Action, go to INITIAL, sub-state\
    \ A.\n   3       Do Timer Action.\n   4       Note that a bandwidth change has\
    \ been reqested.\n           Do Enter Idle Action which may cause a state change.\n\
    \   5       If we are the caller:\n                   Do Enter Add [remote answerer]\
    \ Action.\n           Else\n                   Do Enter Add [remote caller] Action.\n\
    \   6       Do Enter Remove [remote] Action\n   7       Do Remote Management Request\
    \ Action\n   8       Do Remote Management Response Action\n   9       Do Remote\
    \ Management Receive Data Action\n   10      Do Remote Management Transmit Data\
    \ Action\n   11      Do Remote Management Transmit Data Response Action\n   12\
    \      Clear remove lock.\n           If local recommended channels == 0, then:\n\
    \                   send a Close Response message with OK To Close\n         \
    \          set to TRUE.\n           Else\n                   send a Close Response\
    \ message with OK To Close\n                   set to FALSE.\n           Do Enter\
    \ Idle Action.\n   13      Do Remote management (Master) start Action\n   14 \
    \     Do Remote management (Slave) data Action\n   15      Do Remote management\
    \ (Master) data Action\n   16      Do Remote management data acknowledgement Action\n\
    \   17      Do Remote management (Master) stop Action\n"
- title: 3.5.5. MP+STATE_ADD state machine
  contents:
  - "3.5.5. MP+STATE_ADD state machine\n   The add state is used by both caller and\
    \ answerer when an add\n   transaction is in progress.\n   The sub-states are:\n\
    \        A       Add request sent to answerer, waiting for add response\n    \
    \            from the answerer.\n        B       Caller waiting for call complete\
    \ notification for calls\n                placed.\n        C       Answerer waiting\
    \ for add complete message from caller.\n"
- title: Event                                           Sub-state
  contents:
  - 'Event                                           Sub-state

    '
- title: ______________________________________________________________________
  contents:
  - "______________________________________________________________________\n    \
    \                            A               B               C\n"
- title: ======================================================================
  contents:
  - '======================================================================

    '
- title: MP+SESSION_DOWN         1,Initial:A      7,Closing:A    1,Initial:A
  contents:
  - 'MP+SESSION_DOWN         1,Initial:A      7,Closing:A    1,Initial:A

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+SESSION_TERM         2,Initial:A      7,Closing:B    2,Initial:A
  contents:
  - 'MP+SESSION_TERM         2,Initial:A      7,Closing:B    2,Initial:A

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+TIMER_EXPIRED           3,+              3,+            3,+
  contents:
  - 'MP+TIMER_EXPIRED           3,+              3,+            3,+

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+UTILIZATION             4,*              4,*            4,*
  contents:
  - 'MP+UTILIZATION             4,*              4,*            4,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+CALL_COMPLETE            **            8,Idle:A         **
  contents:
  - 'MP+CALL_COMPLETE            **            8,Idle:A         **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RX_VERSION_REQ          -,*              **             **
  contents:
  - 'MP+RX_VERSION_REQ          -,*              **             **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+ADD_REQ                5,Add:B           **             **
  contents:
  - 'MP+ADD_REQ                5,Add:B           **             **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+ADD_RSP                 6,+              **             **
  contents:
  - 'MP+ADD_RSP                 6,+              **             **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+ADD_COMP                 **              **           9,Idle:A
  contents:
  - 'MP+ADD_COMP                 **              **           9,Idle:A

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RX_RM_REQ              10,+             10,+           10,+
  contents:
  - 'MP+RX_RM_REQ              10,+             10,+           10,+

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RX_RM_RSP              11,+             11,+           11,+
  contents:
  - 'MP+RX_RM_RSP              11,+             11,+           11,+

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RX_RM_RX_REQ           12,+             12,+           12,+
  contents:
  - 'MP+RX_RM_RX_REQ           12,+             12,+           12,+

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RX_RM_TX_REQ           13,+             13,+           13,+
  contents:
  - 'MP+RX_RM_TX_REQ           13,+             13,+           13,+

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RX_RM_TX_RSP           14,+             14,+           14,+
  contents:
  - 'MP+RX_RM_TX_RSP           14,+             14,+           14,+

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RX_REMOVE_REQ           -,*              **             **
  contents:
  - 'MP+RX_REMOVE_REQ           -,*              **             **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+START_RM               15,*             15,*           15,*
  contents:
  - 'MP+START_RM               15,*             15,*           15,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+SEND_RMS               16,*             16,*           16,*
  contents:
  - 'MP+SEND_RMS               16,*             16,*           16,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+SEND_RMM               17,*             17,*           17,*
  contents:
  - 'MP+SEND_RMM               17,*             17,*           17,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+RECV_RMM               18,*             18,*           18,*
  contents:
  - 'MP+RECV_RMM               18,*             18,*           18,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+STOP_RM                19,*             19,*           19,*
  contents:
  - 'MP+STOP_RM                19,*             19,*           19,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: All other events            **              **             **
  contents:
  - 'All other events            **              **             **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: 'Table 4:  Add State Machine'
  contents:
  - 'Table 4:  Add State Machine

    '
- title: 'Actions:'
  contents:
  - 'Actions:

    '
- title: 1       Phone numbers (may) have been reserved, they must be released
  contents:
  - "1       Phone numbers (may) have been reserved, they must be released\n     \
    \   before the normal error processing occurs.\n                Release all reserved\
    \ phone numbers\n                Do  Error Close Action.\n"
- title: 2       Phone nubmers (may) have been reserved, they must be released
  contents:
  - "2       Phone nubmers (may) have been reserved, they must be released\n     \
    \   before the normal close processing occurs.\n                Release all reserved\
    \ phone numbers\n                Do  Term Action.\n"
- title: 3       Do  Timer Action
  contents:
  - '3       Do  Timer Action

    '
- title: 4       Note that a bandwidth change has been reqested. This will be
  contents:
  - "4       Note that a bandwidth change has been reqested. This will be\n      \
    \  processed the next time IDLE state is entered.\n"
- title: 5       An add collision has occured.  Since the answerer has sent phone
  contents:
  - "5       An add collision has occured.  Since the answerer has sent phone\n  \
    \      numbers we will try to use what he as sent, within the limits of\n    \
    \    the local system.\n                Compare local channels to add with current\
    \ channels to\n                add.\n                If the local channels to\
    \ add is less than the remote\n                channels to add\n             \
    \           If the remote number of channels requested will\n                \
    \        put us over the maximum number of channels\n                        allowed\
    \ for the session reduce the channel count\n                        and set an\
    \ add lock.\n                        Re-reserve the channels.  If the number reserved\n\
    \                        are less than the number of phone numbers\n         \
    \               provided by the far end, set an add lock and\n               \
    \         reduce the number of channels to add to what we\n                  \
    \      could reserve.\n                Now treat the remote add request as if\
    \ it were an add\n                response and process by:\n                 \
    \       Integrate the phone number returned from the\n                       \
    \ answerer with the original phone number dialed.\n                        Request\
    \ that a session be extended by dialing\n                        the integrated\
    \ phone number.  A callback is\n                        passed with the request\
    \ so call success or\n                        failure can be reported back to\
    \ MP+.\n                        Go to ADD:B.  Note:  This change must actually\n\
    \                        occur before requesting the first outgoing call.\n  \
    \                      If not, the callback could be called (and\n           \
    \             ignored) because the session is not in the\n                   \
    \     correct state.\n"
- title: 6       If the answerer provided fewer phone numbers than requested set
  contents:
  - "6       If the answerer provided fewer phone numbers than requested set\n   \
    \     an add lock.\n        If the number of channels is zero send an add complete\
    \ message\n        (there's nothing to do) and go to the IDLE state.\n       \
    \ For each phone number returned\n                Integrate the phone number returned\
    \ from the answerer\n                with the original phone number dialed.\n\
    \                Request that a session be extended by dialing the\n         \
    \       integrated phone number.  A callback is passed with the\n            \
    \    request so call success or failure can be reported back\n               \
    \ to MP+.\n        Go to ADD:B.  Note:  This change must actually occur before\n\
    \        requesting the first outgoing call.  If not, the callback could\n   \
    \     be called (and ignored) because the session is not in the correct\n    \
    \    state.\n"
- title: 7       Restart idle timer for abort.
  contents:
  - '7       Restart idle timer for abort.

    '
- title: 8       Increment the count of calls completed.
  contents:
  - "8       Increment the count of calls completed.\n        If the call succeeded,\
    \ increment the count of calls that\n        succeeded.\n        If the count\
    \ of calls completed equals the number of calls placed\n                If number\
    \ of calls completed is not the same as the\n                nubmer that succeeded\
    \ set an add lock.\n                Build an add complete message and send it\
    \ to the far end.\n                If at least one channel was added clear any\
    \ remove lock.\n                Go to the IDLE state.\n"
- title: 9       If number of channels requested not equal to number connected
  contents:
  - "9       If number of channels requested not equal to number connected\n     \
    \   set add lock.\n        If at least one channel was added clear any remove\
    \ lock.\n        Go to the IDLE state.\n"
- title: 10      Do Remote Management Request Action
  contents:
  - '10      Do Remote Management Request Action

    '
- title: 11      Do Remote Management Response Action
  contents:
  - '11      Do Remote Management Response Action

    '
- title: 12      Do Remote Management Receive Data Action
  contents:
  - '12      Do Remote Management Receive Data Action

    '
- title: 13      Do Remote Management Transmit Data Action
  contents:
  - '13      Do Remote Management Transmit Data Action

    '
- title: 14      Do Remote Management Transmit Data Response Action
  contents:
  - '14      Do Remote Management Transmit Data Response Action

    '
- title: 15      Do Remote management (Master) start Action
  contents:
  - '15      Do Remote management (Master) start Action

    '
- title: 16      Do Remote management (Slave) data Action
  contents:
  - '16      Do Remote management (Slave) data Action

    '
- title: 17      Do Remote management (Master) data Action
  contents:
  - '17      Do Remote management (Master) data Action

    '
- title: 18      Do Remote management data acknowledgement Action
  contents:
  - '18      Do Remote management data acknowledgement Action

    '
- title: 19      Do Remote management (Master) stop Action
  contents:
  - '19      Do Remote management (Master) stop Action

    '
- title: 3.5.6. MP+STATE_REMOVE state machine
  contents:
  - "3.5.6. MP+STATE_REMOVE state machine\n   The state of a session while processing\
    \ a remove transaction.\n   The sub-states are:\n        A       Remove request\
    \ sent, waiting for remove response\n        B       Remove response sent, waiting\
    \ for remove complete\n"
- title: Event                                   Sub-state
  contents:
  - 'Event                                   Sub-state

    '
- title: _________________________________________________________
  contents:
  - "_________________________________________________________\n                 \
    \               A               B\n"
- title: =========================================================
  contents:
  - '=========================================================

    '
- title: MP+SESSION_DOWN             1,Initial:A    1,Initial:A
  contents:
  - 'MP+SESSION_DOWN             1,Initial:A    1,Initial:A

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+SESSION_TERM             2,Initial:A    2,Initial:A
  contents:
  - 'MP+SESSION_TERM             2,Initial:A    2,Initial:A

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+TIMER_EXPIRED               3,+            3,+
  contents:
  - 'MP+TIMER_EXPIRED               3,+            3,+

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+UTILIZATION                 4,*            4,*
  contents:
  - 'MP+UTILIZATION                 4,*            4,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_ADD_REQ                  5,+             **
  contents:
  - 'MP+RX_ADD_REQ                  5,+             **

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_REMOVE_REQ               6,+             **
  contents:
  - 'MP+RX_REMOVE_REQ               6,+             **

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_REMOVE_RSP            7,Idle:A           **
  contents:
  - 'MP+RX_REMOVE_RSP            7,Idle:A           **

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_REMOVE_COMP              **           8,Idle:A
  contents:
  - 'MP+RX_REMOVE_COMP              **           8,Idle:A

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_CLOSE_REQ               -,*              **
  contents:
  - 'MP+RX_CLOSE_REQ               -,*              **

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_RM_REQ                  9,*             9,*
  contents:
  - 'MP+RX_RM_REQ                  9,*             9,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_RM_RSP                 10,*            10,*
  contents:
  - 'MP+RX_RM_RSP                 10,*            10,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_RM_RX_REQ              11,*            11,*
  contents:
  - 'MP+RX_RM_RX_REQ              11,*            11,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_RM_TX_REQ              12,*            12,*
  contents:
  - 'MP+RX_RM_TX_REQ              12,*            12,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RX_RM_TX_RSP              13,*            13,*
  contents:
  - 'MP+RX_RM_TX_RSP              13,*            13,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+START_RM                  14,*            14,*
  contents:
  - 'MP+START_RM                  14,*            14,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+SEND_RMS                  15,*            15,*
  contents:
  - 'MP+SEND_RMS                  15,*            15,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+SEND_RMM                  16,*            16,*
  contents:
  - 'MP+SEND_RMM                  16,*            16,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+RECV_RMM                  17,*            17,*
  contents:
  - 'MP+RECV_RMM                  17,*            17,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: MP+STOP_RM                   18,*            18,*
  contents:
  - 'MP+STOP_RM                   18,*            18,*

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: All other events              **               **
  contents:
  - 'All other events              **               **

    '
- title: _________________________________________________________
  contents:
  - '_________________________________________________________

    '
- title: 'Table 5: Remove State Machine'
  contents:
  - 'Table 5: Remove State Machine

    '
- title: 'Actions:'
  contents:
  - 'Actions:

    '
- title: 1       Do  Error Close Action
  contents:
  - '1       Do  Error Close Action

    '
- title: 2       Do  Term Action
  contents:
  - '2       Do  Term Action

    '
- title: 3       Do  Timer Action
  contents:
  - '3       Do  Timer Action

    '
- title: 4       Note that a bandwidth change has been reqested. This will be
  contents:
  - "4       Note that a bandwidth change has been reqested. This will be\n      \
    \  processed the next time IDLE state is entered.\n"
- title: 5       Our remove conflicted with the remote end Add.  The add takes
  contents:
  - "5       Our remove conflicted with the remote end Add.  The add takes\n     \
    \   preference.\n        Set a remove lock.\n        If we are the caller Do \
    \ Enter Add [remote answerer] Action  .\n        Otherwise Do  Enter Add [remote\
    \ caller] Action  .\n"
- title: 6       Two remove requests collided.  We give preference to the caller
  contents:
  - "6       Two remove requests collided.  We give preference to the caller\n   \
    \     (an arbitrary decision).\n        If caller, ignore message.\n        Else\n\
    \                Check maximum number of channels needed by the local end.\n \
    \               Reduce the requested remove count and set a remove lock if\n \
    \               necessary.\n                Build and send a remove response to\
    \ the remote.\n                Go to Remove:B.\n"
- title: 7       Compare the number of channels requested with the number allowed
  contents:
  - "7       Compare the number of channels requested with the number allowed\n  \
    \      in the response.  If fewer allowed set a remove lock.\n        Look at\
    \ the current bandwidth.  If the number to remove would\n        bring the current\
    \ bendwidth below requirements reduce the number\n        of channels to remove.\n\
    \        If still channels to remove:\n                Remove the channels.\n\
    \                Clear any add lock.\n        Send a remove complete indicating\
    \ the number of channels removed.\n"
- title: 8       If at least one channel was removed clear any add lock.
  contents:
  - '8       If at least one channel was removed clear any add lock.

    '
- title: 9       Do Remote Management Request Action
  contents:
  - '9       Do Remote Management Request Action

    '
- title: 10      Do Remote Management Response Action
  contents:
  - '10      Do Remote Management Response Action

    '
- title: 11      Do Remote Management Receive Data Action
  contents:
  - '11      Do Remote Management Receive Data Action

    '
- title: 12      Do Remote Management Transmit Data Action
  contents:
  - '12      Do Remote Management Transmit Data Action

    '
- title: 13      Do Remote Management Transmit Data Response Action
  contents:
  - '13      Do Remote Management Transmit Data Response Action

    '
- title: 14      Do Remote management (Master) start Action
  contents:
  - '14      Do Remote management (Master) start Action

    '
- title: 15      Do Remote management (Slave) data Action
  contents:
  - '15      Do Remote management (Slave) data Action

    '
- title: 16      Do Remote management (Master) data Action
  contents:
  - '16      Do Remote management (Master) data Action

    '
- title: 17      Do Remote management data acknowledgement Action
  contents:
  - '17      Do Remote management data acknowledgement Action

    '
- title: 18      Do Remote management (Master) stop Action
  contents:
  - '18      Do Remote management (Master) stop Action

    '
- title: 3.5.7. MP+STATE_CLOSE state machine
  contents:
  - "3.5.7. MP+STATE_CLOSE state machine\n   The close state is used when we are gracefully\
    \ closing a session or\n   when we were notified that a session terminated mid-transaction.\n\
    \   The sub-states are:\n        A       Waiting for call complete after session\
    \ down notification\n        B       Waiting for call complete after session terminate\n\
    \                notification.\n        C       Waiting for close response after\
    \ session close request\n                sent.\n"
- title: Event                                     Sub-state
  contents:
  - 'Event                                     Sub-state

    '
- title: ______________________________________________________________________
  contents:
  - "______________________________________________________________________\n    \
    \                            A               B               C\n"
- title: ======================================================================
  contents:
  - '======================================================================

    '
- title: MP+SESSION_DOWN                **            -,*        7,Initial:A
  contents:
  - 'MP+SESSION_DOWN                **            -,*        7,Initial:A

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+SESSION_TERM           1,Close:B           **        8,Initial:A
  contents:
  - 'MP+SESSION_TERM           1,Close:B           **        8,Initial:A

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+TIMER_EXPIRED          2,Initial:A     5,Initial:A       6,*
  contents:
  - 'MP+TIMER_EXPIRED          2,Initial:A     5,Initial:A       6,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+UTILIZATION                -,*            -,*            9,*
  contents:
  - 'MP+UTILIZATION                -,*            -,*            9,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+CALL_COMPLETE              3,+         6,Initial:A        **
  contents:
  - 'MP+CALL_COMPLETE              3,+         6,Initial:A        **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+ADD_REQ                    **             -,*           10,+
  contents:
  - 'MP+ADD_REQ                    **             -,*           10,+

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+REMOVE_REQ                 **              **        11,Remove:B
  contents:
  - 'MP+REMOVE_REQ                 **              **        11,Remove:B

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+CLOSE_REQ                  -,*            -,*           12,*
  contents:
  - 'MP+CLOSE_REQ                  -,*            -,*           12,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+CLOSE_RSP                  -,*            -,*           13,+
  contents:
  - 'MP+CLOSE_RSP                  -,*            -,*           13,+

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: MP+START_RM                   4,*            4,*           4,*
  contents:
  - 'MP+START_RM                   4,*            4,*           4,*

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: All other events              **              **            **
  contents:
  - 'All other events              **              **            **

    '
- title: ______________________________________________________________________
  contents:
  - '______________________________________________________________________

    '
- title: 'Table 6:  Close State Machine'
  contents:
  - 'Table 6:  Close State Machine

    '
- title: 'Actions:'
  contents:
  - 'Actions:

    '
- title: 1       The session was closed while waiting for call completes.
  contents:
  - "1       The session was closed while waiting for call completes.\n        Just\
    \ go to Close:B.\n"
- title: 2       We timed out waiting for completes.  Just process the link down,
  contents:
  - "2       We timed out waiting for completes.  Just process the link down,\n  \
    \      now.\n        Do Error Close Action.\n"
- title: 3       Increment the number of calls complete.
  contents:
  - "3       Increment the number of calls complete.\n        If equal to the number\
    \ of calls placed then:\n                Do Error Close Action, go to Initial:A.\n\
    \        Else\n                No state change.\n"
- title: 4       Log an error message.
  contents:
  - "4       Log an error message.\n        Notify the user interface of remote management\
    \ failure.\n"
- title: 5       We didn't get all the notifications that we expect.  Give up and
  contents:
  - "5       We didn't get all the notifications that we expect.  Give up and\n  \
    \      close the session anyway.  Do Term Action .\n"
- title: 6       Increment the number of calls complete.
  contents:
  - "6       Increment the number of calls complete.\n        If equal to the number\
    \ of calls placed then:\n                Do  Term Action, go to Initial:A.\n \
    \       Else\n                No state change\n"
- title: 7       Do Error Close Action
  contents:
  - '7       Do Error Close Action

    '
- title: 8       Do Term Action
  contents:
  - '8       Do Term Action

    '
- title: 9       Note that a bandwidth change has been reqested. This will be
  contents:
  - "9       Note that a bandwidth change has been reqested. This will be\n      \
    \  processed the next time IDLE state is entered.\n"
- title: 10      This is an Add & Close collision. Add wins. Perform current
  contents:
  - "10      This is an Add & Close collision. Add wins. Perform current\n       \
    \ remote add action.\n        If we are originator\n                Do Add [Remote\
    \ Answerer] Action\n        else\n                Do Add [Remote Caller] Action\n"
- title: '11      This is a Remove & Close collision, the Remove will win:'
  contents:
  - "11      This is a Remove & Close collision, the Remove will win:\n          \
    \      Set remove lock to FALSE\n                Do Remove [Remote] Action.\n"
- title: '12      This is a Close collision. But since we both agree:'
  contents:
  - "12      This is a Close collision. But since we both agree:\n        If we are\
    \ originator\n                Send a Close Response with okToClose set to TRUE.\n\
    \        Else\n                Send a Close Response with okToClose set to FALSE.\n"
- title: '13      If Close Response is received with okToClear is TRUE then:'
  contents:
  - "13      If Close Response is received with okToClear is TRUE then:\n        \
    \        Do Term Action\n        Else\n                set remove lock to TRUE\
    \ and do Enter Idle Action.\n"
- title: 4. PPP LCP Extensions
  contents:
  - '4. PPP LCP Extensions

    '
- title: MP+ Configuration Option
  contents:
  - "MP+ Configuration Option\n   The Multilink Protocol Plus introduces the use of\
    \ an additional LCP\n   Configuration Option:\n    0                   1     \
    \              2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7\
    \ 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |  type = 22    |  length = 4   |    Currently unused           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   Figure 21: MP+ Option\n   Type - 22.\n   NOTE: The current implementation\
    \ uses option 0. This is not an\n   assigned number, so an IANA assigned official\
    \ identifier has been\n   obtained (22).\n   The option, when sent to a peer,\
    \ advises the peer that:\n        the unit is capable of running the MP+ protocol;\n\
    \   The peer can accept or reject the option.\n   NOTE:  The MP+ option MUST NOT\
    \ be included unless MP is also\n   negotiated.\n"
- title: 5. Security Considerations
  contents:
  - "5. Security Considerations\n   Security issues are not discussed in this memo.\n"
- title: 6. References
  contents:
  - "6. References\n   [1] K. Sklower, B. Lloyd, G. McGregor, D. Carr, \"The PPP Multilink\n\
    \       Protocol (MP)\".\n   [2] Simpson, W., Editor, \"The Point-to-Point Protocol\
    \ (PPP)\", STD\n       51, RFC 1661, Daydreamer, July 1994.\n"
- title: 7. Author's Address
  contents:
  - "7. Author's Address\n   Kevin Smith\n   Ascend Communications\n   1275 Harbor\
    \ Bay Parkway\n   Alameda, CA 94502\n   Phone:  (510) 769-6001\n   FAX:    (510)\
    \ 814-2300\n   EMail:  ksmith@ascend.com\n"
