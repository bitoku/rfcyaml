- title: __initial_text__
  contents:
  - '                 Routing Bridges (RBridges): Adjacency

    '
- title: Abstract
  contents:
  - "Abstract\n   The IETF TRILL (TRansparent Interconnection of Lots of Links)\n\
    \   protocol provides optimal pair-wise data forwarding without\n   configuration,\
    \ safe forwarding even during periods of temporary\n   loops, and support for\
    \ multipathing of both unicast and multicast\n   traffic.  TRILL accomplishes\
    \ this by using IS-IS (Intermediate System\n   to Intermediate System) link state\
    \ routing and by encapsulating\n   traffic using a header that includes a hop\
    \ count.  Devices that\n   implement TRILL are called Routing Bridges (RBridges).\n\
    \   TRILL supports multi-access LAN (Local Area Network) links that can\n   have\
    \ multiple end stations and RBridges attached.  This document\n   describes four\
    \ aspects of the TRILL LAN Hello protocol used on such\n   links, particularly\
    \ adjacency, designated RBridge selection, and MTU\n   (Maximum Transmission Unit)\
    \ and pseudonode procedures, with state\n   machines.  There is no change for\
    \ IS-IS point-to-point Hellos used on\n   links configured as point-to-point in\
    \ TRILL.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc6327.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2011 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n\
    \      1.1. Content and Precedence .....................................4\n  \
    \    1.2. Terminology and Acronyms ...................................5\n   2.\
    \ The TRILL Hello Environment and Purposes ........................5\n      2.1.\
    \ Incrementally Replacing 802.1Q-2005 Bridges ................5\n      2.2. Handling\
    \ Native Frames .....................................6\n      2.3. Zero or Minimal\
    \ Configuration ..............................7\n      2.4. MTU Robustness .............................................7\n\
    \      2.5. Purposes of the TRILL Hello Protocol .......................8\n  \
    \ 3. Adjacency State Machinery .......................................9\n    \
    \  3.1. TRILL LAN Hellos, MTU Test, and VLANs ......................9\n      3.2.\
    \ Adjacency Table Entries and States ........................10\n      3.3. Adjacency\
    \ and Hello Events ................................11\n      3.4. Adjacency State\
    \ Diagram and Table .........................13\n      3.5. Multiple Parallel\
    \ Links ...................................14\n      3.6. Insufficient Space in\
    \ Adjacency Table .....................15\n   4. RBridge LAN Ports and DRB State\
    \ ................................15\n      4.1. Port Table Entries and DRB Election\
    \ State .................16\n      4.2. DRB Election Events .......................................16\n\
    \           4.2.1. DRB Election Details ...............................17\n  \
    \         4.2.2. Change in DRB ......................................18\n    \
    \       4.2.3. Change in Designated VLAN ..........................18\n      4.3.\
    \ State Table and Diagram ...................................18\n   5. MTU Matching\
    \ ...................................................20\n   6. Pseudonodes ....................................................21\n\
    \   7. TRILL Hello Reception and Transmission .........................21\n  \
    \    7.1. Transmitting TRILL Hellos .................................22\n    \
    \  7.2. Receiving TRILL Hellos ....................................23\n   8. Multiple\
    \ Ports on the Same Link ................................24\n   9. Security Considerations\
    \ ........................................24\n   10. References ....................................................24\n\
    \      10.1. Normative References .....................................24\n  \
    \    10.2. Informative References ...................................25\n   11.\
    \ Acknowledgements ..............................................25\n"
- title: 1. Introduction
  contents:
  - "1. Introduction\n   The IETF TRILL (TRansparent Interconnection of Lots of Links)\n\
    \   protocol [RFC6325] provides optimal pair-wise data frame forwarding\n   without\
    \ configuration, safe forwarding even during periods of\n   temporary loops, and\
    \ support for multipathing of both unicast and\n   multicast traffic.  TRILL accomplishes\
    \ this by using [IS-IS]\n   (Intermediate System to Intermediate System) link\
    \ state routing and\n   encapsulating traffic using a header that includes a hop\
    \ count.  The\n   design supports VLANs (Virtual Local Area Networks) and optimization\n\
    \   of the distribution of multi-destination frames based on VLANs and\n   IP-derived\
    \ multicast groups.  Devices that implement TRILL are called\n   RBridges (Routing\
    \ Bridges).\n   The purpose of this document is to improve the quality of the\n\
    \   description of four aspects of the TRILL LAN (Local Area Network)\n   Hello\
    \ protocol that RBridges use on broadcast (LAN) links.  It\n   includes reference\
    \ implementation details.  Alternative\n   implementations that interoperate on\
    \ the wire are permitted.  There\n   is no change for IS-IS point-to-point Hellos\
    \ used on links configured\n   as point-to-point in TRILL.\n   The scope of this\
    \ document is limited to the following aspects of the\n   TRILL LAN Hello protocol:\n\
    \      - Adjacency formation\n      - DRB (Designated RBridge aka DIS (Designated\
    \ Intermediate\n        System)) election\n      - Rules for 2-way and MTU (Maximum\
    \ Transmission Unit) matching for\n        advertisements\n      - Creation and\
    \ use of pseudonodes\n   For other aspects of the TRILL base protocol, see [RFC6325].\n"
- title: 1.1.  Content and Precedence
  contents:
  - "1.1.  Content and Precedence\n   Section 2 below explains the rationale for the\
    \ differences between\n   the TRILL LAN Hello protocol and the Layer 3 IS-IS LAN\
    \ Hello protocol\n   [IS-IS] [RFC1195] in light of the environment for which the\
    \ TRILL\n   protocol is designed.  It also describes the purposes of the TRILL\n\
    \   LAN Hello protocol.\n   Section 3 describes the adjacency state machine and\
    \ its states and\n   relevant events.\n   Section 4 describes the Designated RBridge\
    \ (DRB) election state\n   machine for RBridge ports and its states and relevant\
    \ events.\n   Section 5 describes MTU testing and matching on a TRILL link.\n\
    \   Section 6 discusses pseudonode creation and use.\n   Section 7 provides more\
    \ details on the reception and transmission of\n   TRILL LAN Hellos.\n   Section\
    \ 8 discusses multiple ports from one RBridge on the same link.\n   In case of\
    \ conflict between this document and [RFC6325], this\n   document prevails.\n"
- title: 1.2.  Terminology and Acronyms
  contents:
  - "1.2.  Terminology and Acronyms\n   This document uses the acronyms defined in\
    \ [RFC6325] supplemented by\n   the following additional acronym:\n      SNPA\
    \ - Subnetwork Point of Attachment\n   The key words \"MUST\", \"MUST NOT\", \"\
    REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [RFC2119].\n"
- title: 2.  The TRILL-Hello Environment and Purposes
  contents:
  - "2.  The TRILL-Hello Environment and Purposes\n   [IS-IS] has subnetwork-independent\
    \ functions and subnetwork-dependent\n   functions.  Currently, Layer 3 use of\
    \ IS-IS supports two types of\n   subnetworks: (1) point-to-point link subnetworks\
    \ between routers and\n   (2) general broadcast (LAN) subnetworks.  Because of\
    \ the differences\n   between the environment of Layer 3 routers and the environment\
    \ of\n   TRILL RBridges, instead of the broadcast (LAN) subnetwork-dependent\n\
    \   functions encountered at Layer 3, which are specified in [IS-IS]\n   Section\
    \ 8.4, the TRILL protocol uses modified subnetwork-dependent\n   functions for\
    \ a LAN subnetwork.  The environmental differences are\n   described in Sections\
    \ 2.1 through 2.4, followed by a summation, in\n   Section 2.5, of the purposes\
    \ of the TRILL LAN Hello protocol.\n"
- title: 2.1.  Incrementally Replacing 802.1Q-2005 Bridges
  contents:
  - "2.1.  Incrementally Replacing 802.1Q-2005 Bridges\n   RBridges can incrementally\
    \ replace IEEE [802.1Q-2005] bridges.  Thus,\n   RBridges need to provide similar\
    \ services, including delivery of\n   frames only to links in the frame's VLAN\
    \ and priority queuing of\n   frames, to the extent that multiple queues are implemented\
    \ at any\n   particular RBridge port.\n   RBridge ports are IEEE [802.1Q-2005]\
    \ ports in terms of their frame\n   VLAN and priority configuration and processing\
    \ as described in\n   Section 2.6 of [RFC6325].  When a frame is received through\
    \ an\n   RBridge port, like a frame received through any [802.1Q-2005] port,\n\
    \   it has an associated VLAN ID and frame priority.  When a frame is\n   presented\
    \ to an [802.1Q-2005] port for queuing and transmission, it\n   must be accompanied\
    \ by a VLAN ID and frame priority.  However,\n   whether the frame, if actually\
    \ transmitted, will be VLAN tagged is\n   determined by whether or not the port\
    \ is configured to \"strip VLAN\n   tags\".  Furthermore, in the general case,\
    \ a broadcast (LAN) link\n   between RBridges can be a VLAN-capable bridged LAN\
    \ that may be\n   configured to partition VLANs.\n   Because devices that restrict\
    \ VLAN connectivity, such as bridged LANs\n   or provider bridging equipment,\
    \ can be part of the link between\n   RBridges, TRILL Data and TRILL IS-IS frames\
    \ between RBridges use the\n   link's Designated VLAN.  The Designated VLAN is\
    \ dictated for a link\n   by the elected Designated RBridge (equivalent to the\
    \ Designated\n   Intermediate System at Layer 3).  Because TRILL Data frames flow\n\
    \   between RBridges on a link only in the link's Designated VLAN,\n   adjacency\
    \ for routing calculations is based only on connectivity\n   characteristics in\
    \ that VLAN.\n"
- title: 2.2.  Handling Native Frames
  contents:
  - "2.2.  Handling Native Frames\n   Ordinary Layer 3 data packets are already \"\
    tamed\" when they are\n   originated by an end station: they include a hop count\
    \ and Layer 3\n   source and destination address fields.  Furthermore, for ordinary\n\
    \   data packets, there is no requirement to preserve their outer Layer 2\n  \
    \ addressing and, at least if the packets are unicast, they are\n   addressed\
    \ to their first hop router.  In contrast, RBridges running\n   TRILL must accept,\
    \ transport, and deliver untamed \"native\" frames (as\n   defined in Section\
    \ 1.4 of [RFC6325]).  Native frames lack a TRILL hop\n   count field.  Native\
    \ frames also have Layer 2 addresses that indicate\n   their source and are used\
    \ as the basis for their forwarding.  These\n   Layer 2 addresses must be preserved\
    \ for delivery to the native\n   frame's Layer 2 destination.  One resulting difference\
    \ is that\n   RBridge ports providing native frame service must receive in\n \
    \  promiscuous MAC (Media Access Control) address mode, while Layer 3\n   router\
    \ ports typically receive in a regularly selective MAC address\n   mode.\n   TRILL\
    \ handles this by having, on the link where an end station\n   originated a native\
    \ frame, one RBridge \"ingress\" such a locally\n   originated native frame by\
    \ adding a TRILL Header that includes a hop\n   count, thus converting it to a\
    \ TRILL Data frame.  This augmented\n   frame is then routed to one RBridge on\
    \ the link having the\n   destination end station for the frame (or one RBridge\
    \ on each such\n   link if it is a multi-destination frame).  Such final RBridges\n\
    \   perform an \"egress\" function, removing the TRILL Header and\n   delivering\
    \ the original frame to its destination(s).  (For the\n   purposes of TRILL, a\
    \ Layer 3 router is an end station.)\n   Care must be taken to avoid a loop that\
    \ would involve egressing a\n   native frame and then re-ingressing it because,\
    \ while it is in native\n   form, it would not be protected by a hop count.  Such\
    \ a loop could\n   involve multiplication of the number of frames each time around\
    \ and\n   would likely saturate all links involved within milliseconds.  For\n\
    \   TRILL, safety against such loops for a link is more important than\n   data\
    \ connectivity on that link.\n   The primary TRILL defense mechanism against such\
    \ loops, which is\n   mandatory, is to assure that, as far as practically possible,\
    \ there\n   is only a single RBridge on each link that is in charge of ingressing\n\
    \   and egressing native frames from and to that link.  This is the\n   Designated\
    \ RBridge that is elected using TRILL LAN Hellos as further\n   described in Sections\
    \ 2.5 and 4 below.\n   Because bridged LANs between RBridges can be configured\
    \ in complex\n   ways (e.g., so that some VLANs pass frames unidirectionally)\
    \ and loop\n   safety is important, there are additional TRILL defenses against\n\
    \   loops that are beyond the scope of this document.  Specifically,\n   these\
    \ defend against the occurrence of looping traffic that is in\n   native format\
    \ for part of the loop.  These additional defenses have\n   no effect on adjacency\
    \ states or the receipt or forwarding of TRILL\n   Data frames; they only affect\
    \ native frame ingress and egress.\n"
- title: 2.3.  Zero or Minimal Configuration
  contents:
  - "2.3.  Zero or Minimal Configuration\n   RBridges are expected to provide service\
    \ with zero configuration,\n   except for services such as non-default VLAN or\
    \ priority that require\n   configuration when offered by [802.1Q-2005] bridges.\
    \  This differs\n   from Layer 3 routing where routers typically need to be configured\
    \ as\n   to the subnetworks connected to each port, etc., to provide service.\n"
- title: 2.4.  MTU Robustness
  contents:
  - "2.4.  MTU Robustness\n   TRILL IS-IS needs to be robust against links with reasonably\n\
    \   restricted MTUs, including links that accommodate only classic\n   Ethernet\
    \ frames, despite the addition of reasonable headers such as\n   VLAN tags.  This\
    \ is particularly true for TRILL LAN Hellos so as to\n   assure that a unique\
    \ DRB is elected.\n   TRILL will also be used inside data centers where it is\
    \ not uncommon\n   for all or most of the links and switches to support frames\n\
    \   substantially larger than the classic Ethernet maximum.  For example,\n  \
    \ they may have an MTU adequate to comfortably handle Fiber Channel\n   over Ethernet\
    \ frames, for which T11 recommends a 2,500-byte MTU\n   [FCoE].  It would be beneficial\
    \ for an RBridge campus with such a\n   large MTU to be able to safely make use\
    \ of it.\n   These needs are met by limiting the size of TRILL LAN Hellos and\
    \ by\n   the use of MTU testing as described below.\n"
- title: 2.5.  Purposes of the TRILL-Hello Protocol
  contents:
  - "2.5.  Purposes of the TRILL-Hello Protocol\n   There are three purposes for the\
    \ TRILL-Hello protocol as listed below\n   along with a reference to the section\
    \ of this document in which each\n   is discussed:\n   a) To determine which RBridge\
    \ neighbors have acceptable connectivity\n      to be reported as part of the\
    \ topology (Section 3)\n   b) To elect a unique Designated RBridge on the link\
    \ (Section 4)\n   c) To determine the MTU with which it is possible to communicate\
    \ with\n      each RBridge neighbor (Section 5)\n   In Layer 3 IS-IS, all three\
    \ of these functions are combined.  Hellos\n   may be padded to the maximum length\
    \ (see [RFC3719], Section 6) so\n   that a router neighbor is not even discovered\
    \ if it is impossible to\n   communicate with it using maximum-sized packets.\
    \  Also, even if\n   Hellos from a neighbor R2 are received by R1, if connectivity\
    \ to R2\n   is not 2-way (i.e., R2 does not list R1 in R2's Hello), then R1 does\n\
    \   not consider R2 as a Designated Router candidate.  Because of this\n   logic,\
    \ it is possible at Layer 3 for multiple Designated Routers to\n   be elected\
    \ on a LAN, with each representing the LAN as a pseudonode.\n   It appears to\
    \ the topology as if the LAN is now two or more separate\n   LANs.  Although this\
    \ is surprising, it does not disrupt Layer 3\n   IS-IS.\n   In contrast, this\
    \ behavior is not acceptable for TRILL, since in\n   TRILL it is important that\
    \ all RBridges on the link know about each\n   other, and choose a single RBridge\
    \ to be the DRB and to control the\n   native frame ingress and egress on that\
    \ link.  Otherwise, multiple\n   RBridges might encapsulate/decapsulate the same\
    \ native frame, forming\n   loops that are not protected by the hop count in the\
    \ TRILL header as\n   discussed above.\n   So, the TRILL-Hello protocol is best\
    \ understood by focusing on each\n   of these functions separately.\n   One other\
    \ issue with TRILL LAN Hellos is to ensure that subsets of\n   the information\
    \ can appear in any single message, and be processable,\n   in the spirit of IS-IS\
    \ Link State PDUs (LSPs) and Complete Sequence\n   Number PDUs (CSNPs).  TRILL-Hello\
    \ frames, even though they are not\n   padded, can become very large.  An example\
    \ where this might be the\n   case is when some sort of backbone technology interconnects\
    \ hundreds\n   of TRILL sites over what would appear to TRILL to be a giant\n\
    \   Ethernet, where the RBridges connected to that cloud will perceive\n   that\
    \ backbone to be a single link with hundreds of neighbors.  Thus,\n   the TRILL\
    \ Hello uses a different Neighbor TLV [RFC6326] that lists\n   neighbors seen\
    \ for a range of MAC (SNPA) addresses.\n"
- title: 3.  Adjacency State Machinery
  contents:
  - "3.  Adjacency State Machinery\n   Each RBridge port has associated with it a\
    \ port state, as discussed\n   in Section 4, and a table of zero or more adjacencies\
    \ as discussed in\n   this section.  The states such adjacencies can have, the\
    \ events that\n   cause state changes, the actions associated with those state\
    \ changes,\n   and a state table and diagram are given below.\n"
- title: 3.1.  TRILL LAN Hellos, MTU Test, and VLANs
  contents:
  - "3.1.  TRILL LAN Hellos, MTU Test, and VLANs\n   The determination of LSP-reported\
    \ adjacencies on links that are not\n   configured as point-to-point is made using\
    \ TRILL LAN Hellos (see also\n   Section 7) and an optional MTU test.  Appropriate\
    \ TRILL LAN Hello\n   exchange and the satisfaction of the MTU test, if the MTU\
    \ test is\n   enabled (see Section 5), is required for there to be an adjacency\n\
    \   that will be reported in an LSP of the RBridge in question.\n   Because bridges\
    \ acting as glue on the LAN might be configured in such\n   a way that some VLANs\
    \ are partitioned, it is necessary for RBridges\n   to transmit Hellos with multiple\
    \ VLAN tags.  The conceptually\n   simplest solution may have been to have all\
    \ RBridges transmit up to\n   4,094 times as many Hellos, one with each legal\
    \ VLAN ID enabled at\n   each port, but this would obviously have deleterious\
    \ performance\n   implications.  So, the TRILL protocol specifies that if RB1\
    \ knows it\n   is not the DRB, it transmits its Hellos on only a limited set of\n\
    \   VLANs, and only an RBridge that believes itself to be the DRB on a\n   port\
    \ \"sprays\" its TRILL Hellos on all of its enabled VLANs at a port\n   (with\
    \ the ability to configure to send on only a subset of those).\n   The details\
    \ are given in [RFC6325], Section 4.4.3.\n   If the MAC (SNPA) address of more\
    \ than one RBridge port on a link are\n   the same, all but one of such ports\
    \ are put in the Suspended state\n   (see Section 4) and do not participate in\
    \ the link except to monitor\n   whether they should stay suspended.\n   All TRILL\
    \ LAN Hellos issued by an RBridge on a particular port MUST\n   have the same\
    \ source MAC address, priority, desired Designated VLAN,\n   and Port ID, regardless\
    \ of the VLAN in which the Hello is sent.  Of\n   course, the priority and desired\
    \ Designated VLAN can change on\n   occasion, but then the new value must similarly\
    \ be used in all TRILL\n   Hellos on the port, regardless of VLAN.\n"
- title: 3.2.  Adjacency Table Entries and States
  contents:
  - "3.2.  Adjacency Table Entries and States\n   Each adjacency is in one of the\
    \ following four states:\n      Down:\n         This is a virtual state for convenience\
    \ in creating state\n         diagrams and tables.  It indicates that the adjacency\
    \ is non-\n         existent, and there is no entry in the adjacency table for\
    \ it.\n      Detect:\n         An adjacent neighbor has been detected either (1)\
    \ not on the\n         Designated VLAN or (2) on the Designated VLAN, but neither\n\
    \         2-way connectivity nor the MTU of such connectivity has been\n     \
    \    confirmed.\n      2-Way:\n         2-way connectivity to the neighbor has\
    \ been found on the\n         Designated VLAN but MTU testing is enabled and has\
    \ not yet\n         confirmed that the connectivity meets the campus minimum MTU\n\
    \         requirement.\n      Report:\n         There is 2-way connectivity to\
    \ the neighbor on the Designated\n         VLAN and either MTU testing has confirmed\
    \ that the connectivity\n         meets the campus minimum MTU requirement or\
    \ MTU testing is not\n         enabled.  This connectivity will be reported in\
    \ an LSP (with\n         appropriate provision for the link pseudonode, if any,\
    \ as\n         described in Section 6).\n   For an adjacency in any of the three\
    \ non-down states (Detect, 2-Way,\n   or Report), there will be an adjacency table\
    \ entry.  That entry will\n   give the state of the adjacency and will also include\
    \ the information\n   listed below.\n      o  The address of the neighbor (that\
    \ is, its SNPA address, usually\n         a 48-bit MAC address), and the Port\
    \ ID and the System ID in the\n         received Hellos.  Together, these three\
    \ quantities uniquely\n         identify the adjacency.\n      o  Exactly two\
    \ Hello holding timers, each consisting of a 16-bit\n         unsigned integer\
    \ number of seconds: a Designated VLAN holding\n         timer and a non-Designated\
    \ VLAN holding timer.\n      o  The 7-bit unsigned priority of the neighbor to\
    \ be the DRB.\n      o  The VLAN that the neighbor RBridge wants to be the Designated\n\
    \         VLAN on the link, called the desired Designated VLAN.\n"
- title: 3.3.  Adjacency and Hello Events
  contents:
  - "3.3.  Adjacency and Hello Events\n   The following events can change the state\
    \ of an adjacency:\n      A0.  Receive a TRILL Hello whose source MAC address\
    \ (SNPA) is\n           equal to that of the port on which it is received.  This\
    \ is a\n           special event that is handled as described immediately after\n\
    \           this list of events.  It does not appear in the state\n          \
    \ transition table or diagram.\n      A1.  Receive a TRILL Hello (other than an\
    \ A0 event) on the\n           Designated VLAN with a TRILL Neighbor TLV that\
    \ explicitly\n           lists the receiver's (SNPA) address.\n      A2.  Receive\
    \ a TRILL Hello (other than an A0 event) that either\n           (1) is not on\
    \ the Designated VLAN (any TRILL Neighbor TLV in\n           such a Hello is ignored)\
    \ or (2) is on the Designated VLAN but\n           does not contain a TRILL Neighbor\
    \ TLV covering an address\n           range that includes the receiver's (SNPA)\
    \ address.\n      A3.  Receive a TRILL Hello (other than an A0 event) on the\n\
    \           Designated VLAN with one or more TRILL Neighbor TLVs covering\n  \
    \         an address range that includes the receiver's (SNPA) address\n     \
    \      -- and none of which lists the receiver.\n      A4.  The expiration of\
    \ one or both Hello holding timers results in\n           them both being expired.\n\
    \      A5.  The Designated VLAN Hello holding timer expires, but the non-\n  \
    \         Designated VLAN Hello holding timer still has time left until\n    \
    \       it expires.\n      A6.  MTU test successful.\n      A7.  MTU test was\
    \ successful but now fails.\n      A8.  The RBridge port goes operationally down.\n\
    \   For the special A0 event, the Hello is examined to determine if it is\n  \
    \ higher priority to be the DRB than the port on which it is received\n   as described\
    \ in Section 4.2.1.  If the Hello is of lower priority\n   than the receiving\
    \ port, it is discarded with no further action.  If\n   it is of higher priority\
    \ than the receiving port, then any\n   adjacencies for that port are discarded\
    \ (transitioned to the Down\n   state), and the port is suspended as described\
    \ in Section 4.2.\n   The receipt of a TRILL LAN Hello with a source MAC (SNPA)\
    \ address\n   different from that of the receiving port (that is, the occurrence\
    \ of\n   events A1, A2, or A3), causes the following actions (except where the\n\
    \   Hello would create a new adjacency table entry, the table is full, or\n  \
    \ the Hello is too low priority to displace an existing entry as\n   described\
    \ in Section 3.6).  The Designated VLAN used in these actions\n   is the Designated\
    \ VLAN dictated by the DRB determined without taking\n   the received TRILL LAN\
    \ Hello into account (see Section 4).\n      o  If the receipt of the Hellos creates\
    \ a new adjacency table\n         entry, the neighbor RBridge MAC (SNPA) address,\
    \ Port ID, and\n         System ID are set from the Hello.\n      o  The appropriate\
    \ Hello holding timer for the adjacency,\n         depending on whether or not\
    \ the Hello was received on the\n         Designated VLAN, is set to the Holding\
    \ Time field of the Hello.\n         If the receipt of the Hello is creating a\
    \ new adjacency table\n         entry, the other timer is set to expired.\n  \
    \    o  The priority of the neighbor RBridge to be the DRB is set to\n       \
    \  the priority field of the Hello.\n      o  The VLAN that the neighbor RBridge\
    \ wants to be the Designated\n         VLAN on the link is set from the Hello.\n\
    \      o  If the creation of a new adjacency table entry or the priority\n   \
    \      update above changes the results of the DRB election on the\n         link,\
    \ the appropriate RBridge port event (D2 or D3) occurs,\n         after the above\
    \ actions, as described in Section 4.2.\n      o  If there is no change in the\
    \ DRB, but the neighbor Hello is\n         from the DRB and has a changed Designated\
    \ VLAN from the\n         previous Hello received from the DRB, the result is\
    \ a change in\n         Designated VLAN for the link as specified in Section 4.2.3.\n\
    \   An event A4 resulting in both Hello Holding timers for an adjacency\n   being\
    \ expired and the adjacency going Down may also result in an\n   event D3 as described\
    \ in Section 4.2.\n   Concerning events A6 and A7, if MTU testing is not enabled,\
    \ A6 is\n   considered to occur immediately upon the adjacency entering the 2-Way\n\
    \   state, and A7 cannot occur.\n   See further TRILL LAN Hello receipt details\
    \ in Section 7.\n"
- title: 3.4.  Adjacency State Diagram and Table
  contents:
  - "3.4.  Adjacency State Diagram and Table\n   The table below shows the transitions\
    \ between the states defined\n   above based on the events defined above:\n  \
    \             | Event |  Down  | Detect | 2-Way  | Report |\n               +-------+--------+--------+--------+--------+\n\
    \               |  A1   | 2-Way  | 2-Way  | 2-Way  | Report |\n              \
    \ |  A2   | Detect | Detect | 2-Way  | Report |\n               |  A3   | Detect\
    \ | Detect | Detect | Detect |\n               |  A4   |  N/A   | Down   | Down\
    \   | Down   |\n               |  A5   |  N/A   | Detect | Detect | Detect |\n\
    \               |  A6   |  N/A   |  N/A   | Report | Report |\n              \
    \ |  A7   |  N/A   |  N/A   | 2-Way  | 2-Way  |\n               |  A8   | Down\
    \   | Down   | Down   | Down   |\n   N/A indicates that the event to the left\
    \ is Not Applicable in the\n   state at the top of the column.  These events affect\
    \ only a single\n   adjacency.  The special A0 event transitions all adjacencies\
    \ to Down,\n   as explained immediately after the list of adjacency events above.\n\
    \   The diagram below presents the same information as that in the state\n   table:\n\
    \                            +---------------+\n                            |\
    \     Down      |<--------+\n                            +---------------+   \
    \      |\n                              |     |  ^  |           |\n          \
    \               A2,A3|     |A8|  |A1         |\n                             \
    \ |     +--+  |           |\n                              |           +-----------|---+\n\
    \                              V                       |   |\n               \
    \             +----------------+ A4,A8  |   |\n                     +----->| \
    \     Detect    |------->|   |\n                     |      +----------------+\
    \        |   |\n                     |        |  |         ^          |   |\n\
    \                     |      A1|  |A2,A3,A5 |          |   |\n               \
    \      |        |  +---------+          |   |\n                     |        |\
    \                       |   |\n                     |        |          +------------|---+\n\
    \                     |        |          |            |\n                   \
    \  |        V          V            |\n                     |A3,A5 +----------------+\
    \ A4,A8  |\n                     |<-----|     2-Way      |------->|\n        \
    \             |      +----------------+        |\n                     |     \
    \  |   ^ |        ^         |\n                     |     A6|   | |A1,A2,A7| \
    \        |\n                     |       |   | +--------+         |\n        \
    \             |       |   |                    |\n                     |     \
    \  |   |A7                  |\n                     |       V   |            \
    \        |\n                     |A3,A5 +-------------+ A4,A8     |\n        \
    \             |<-----|   Report    |---------->|\n                           \
    \ +-------------+\n                              |         ^\n               \
    \               |A1,A2,A6 |\n                              +---------+\n"
- title: 3.5.  Multiple Parallel Links
  contents:
  - "3.5.  Multiple Parallel Links\n   There can be multiple parallel adjacencies\
    \ between neighbor RBridges\n   that are visible to TRILL.  (Multiple low-level\
    \ links that have been\n   bonded together by technologies such as link aggregation\
    \ [802.1AX]\n   appear to TRILL as a single link over which only a single TRILL\n\
    \   adjacency could be established.)\n   Any such links that have pseudonodes\
    \ (see Section 6) are\n   distinguished in the topology; such adjacencies, if\
    \ they are in the\n   Report state, appear in LSPs as per Section 6.  However,\
    \ there can be\n   multiple parallel adjacencies without pseudonodes because they\
    \ are\n   point-to-point adjacencies or LAN adjacencies for which a pseudonode\n\
    \   is not being created.  Such parallel, non-pseudonode adjacencies in\n   the\
    \ Report state appear in LSPs as a single adjacency.  The cost of\n   such an\
    \ adjacency MAY be adjusted downwards to account for the\n   parallel paths. \
    \ Multipathing across such parallel connections can be\n   freely done for unicast\
    \ TRILL Data traffic on a per-flow basis but is\n   restricted for multi-destination\
    \ traffic, as described in Section\n   4.5.2 (point 3) and Appendix C of [RFC6325].\n"
- title: 3.6.  Insufficient Space in Adjacency Table
  contents:
  - "3.6.  Insufficient Space in Adjacency Table\n   If the receipt of a TRILL LAN\
    \ Hello would create a new adjacency\n   table entry (that is, would transition\
    \ an adjacency out of the Down\n   state), there may be no space for the new entry.\
    \  In that case, the\n   DRB election priority (see Section 4.2.1) of the new\
    \ entry that would\n   be created is compared with that priority for the existing\
    \ entries.\n   If the new entry is higher priority than the lowest priority existing\n\
    \   entry, it replaces the lowest priority existing entry, which is\n   transitioned\
    \ to the Down state.\n"
- title: 4.  RBridge LAN Ports and DRB State
  contents:
  - "4.  RBridge LAN Ports and DRB State\n   The information at an RBridge associated\
    \ with each of its LAN ports\n   includes the following:\n      o  Enablement\
    \ bit, which defaults to enabled.\n      o  SNPA address (usually a 48-bit MAC\
    \ address) of the port.\n      o  Port ID, used in TRILL Hellos sent on the port.\n\
    \      o  The Holding Time, used in TRILL Hellos sent on the port.\n      o  The\
    \ Priority to be the DRB, used in TRILL Hellos sent on the\n         port.\n \
    \     o  The DRB status of the port, determined as specified below.\n      o \
    \ A 16-bit unsigned Suspension timer, measured in seconds.\n      o  The desired\
    \ Designated VLAN.  The VLAN this RBridge wants to be\n         the Designated\
    \ VLAN for the link out this port, used in TRILL\n         Hellos sent on the\
    \ port.\n      o  A table of zero or more adjacencies (see Section 3).\n"
- title: 4.1.  Port Table Entries and DRB Election State
  contents:
  - "4.1.  Port Table Entries and DRB Election State\n   The TRILL equivalent of the\
    \ DIS (Designated Intermediate System) on a\n   link is the DRB or Designated\
    \ RBridge.  The DRB election state\n   machinery is described below.\n   Each\
    \ RBridge port is in one of the following four DRB states:\n      Down:\n    \
    \     The port is operationally down.  It might be administratively\n        \
    \ disabled or down at the link layer.  In this state, there will\n         be\
    \ no adjacency table entries for the port, and no TRILL Hellos\n         or other\
    \ IS-IS PDUs or TRILL Data frames are accepted or\n         transmitted.\n   \
    \   Suspended:\n         Operation of the port is suspended because there is a\
    \ higher\n         priority port on the link with the same MAC (SNPA) address.\n\
    \         This is the same as the down state with the exception that\n       \
    \  TRILL Hellos are accepted for the sole purpose of determining\n         whether\
    \ to change the value of the Suspension timer for the\n         port as described\
    \ below.\n      DRB:\n         The port is the DRB and can receive and transmit\
    \ TRILL Data\n         frames.\n      Not DRB:\n         The port is deferring\
    \ to another port on the link, which it\n         believes is the DRB, but can\
    \ still receive and transmit TRILL\n         Data frames.\n"
- title: 4.2.  DRB Election Events
  contents:
  - "4.2.  DRB Election Events\n   The following events can change the DRB state of\
    \ a port:\n      D1.  Expiration of the suspension timer while the port is in\
    \ the\n           Suspended state or the enablement of the port.\n      D2.  Adjacency\
    \ table for the port changes, and there are now\n           entries for one or\
    \ more other RBridge ports on the link that\n           appear to be higher priority\
    \ to be the DRB than the local\n           port.\n      D3.  The port is not Down\
    \ or Suspended, and the adjacency table\n           for the port changes, so there\
    \ are now no entries for other\n           RBridge ports on the link that appear\
    \ to be higher priority\n           to be the DRB than the local port.\n     \
    \ D4.  Receipt of a TRILL Hello with the same MAC address (SNPA) as\n        \
    \   the receiving port and higher priority to be the DRB as\n           described\
    \ for event A0.\n      D5.  The port becomes operationally down.\n   Event D1\
    \ is considered to occur on RBridge boot if the port is\n   administratively and\
    \ link-layer enabled.\n   Event D4 causes the port to enter the Suspended state\
    \ and all\n   adjacencies for the port to be discarded (transitioned to the Down\n\
    \   state).  If the port was in some state other than Suspended, the\n   suspension\
    \ timer is set to the Holding Time in the Hello that causes\n   event D4.  If\
    \ it was in the Suspended state, the suspension timer is\n   set to the maximum\
    \ of its current value and the Holding Time in the\n   Hello that causes event\
    \ D4.\n"
- title: 4.2.1.  DRB Election Details
  contents:
  - "4.2.1.  DRB Election Details\n   Events D2 and D3 constitute losing and winning\
    \ the DRB election at\n   the port, respectively.\n   The candidates for election\
    \ are the local RBridge and all RBridges\n   with which there is an adjacency\
    \ on the port in an adjacency state\n   other than Down state.  The winner is\
    \ the RBridge with highest\n   priority to be the DRB, as determined from the\
    \ 7-bit priority field\n   in that RBridge's Hellos received and the local port's\
    \ priority to be\n   the DRB field, with MAC (SNPA) address as a tiebreaker, Port\
    \ ID as a\n   secondary tiebreaker, and System ID as a tertiary tiebreaker.  These\n\
    \   fields are compared as unsigned integers with the larger magnitude\n   being\
    \ considered higher priority.\n   Resort to the secondary and tertiary tiebreakers\
    \ should only be\n   necessary in rare circumstances when multiple ports have\
    \ the same\n   priority and MAC (SNPA) address and some of them are not yet\n\
    \   suspended.  For example, RB1, that has low priority to be the DRB on\n   the\
    \ link, could receive Hellos from two other ports on the link that\n   have the\
    \ same MAC address as each other and are higher priority to be\n   the DRB.  One\
    \ of these two ports with the same MAC address will be\n   suspended, cease sending\
    \ Hellos, and the Hello from it received by\n   RB1 will eventually time out.\
    \  But, in the meantime, RB1 can use the\n   tiebreakers to determine which port\
    \ is the DRB and thus which port's\n   Hello to believe for such purposes as setting\
    \ the Designated VLAN on\n   the link.\n"
- title: 4.2.2.  Change in DRB
  contents:
  - "4.2.2.  Change in DRB\n   Events D2 and D3 result from a change in the apparent\
    \ DRB on the\n   link.  Unnecessary DRB changes should be avoided, especially\
    \ on links\n   offering native frame service, as a DRB change will generally cause\
    \ a\n   transient interruption to native frame service.\n   If a change in the\
    \ DRB on the link changes the Designated VLAN on the\n   link, the actions specified\
    \ in Section 4.2.3 are taken.\n   If an RBridge changes in either direction between\
    \ being the\n   Designated RBridge and not being the Designated RBridge at a port,\n\
    \   this will generally change the VLANs on which Hellos are sent by that\n  \
    \ RBridge on that port as specified in Section 4.4.3 of [RFC6325].\n"
- title: 4.2.3.  Change in Designated VLAN
  contents:
  - "4.2.3.  Change in Designated VLAN\n   Unnecessary changes in the Designated VLAN\
    \ on a link should be\n   avoided because a change in the Designated VLAN can\
    \ cause a transient\n   interruption to TRILL Data forwarding on the link.  When\
    \ practical,\n   all RBridge ports on a link should be configured with the same\n\
    \   desired Designated VLAN so that, in case the winner of the DRB\n   election\
    \ changes, for any reason, the Designated VLAN will remain the\n   same.\n   If\
    \ an RBridge detects a change in Designated VLAN on a link, then,\n   for all\
    \ adjacency table entries for a port to that link, the RBridge\n   takes the following\
    \ steps in the order given:\n      o  The non-Designated VLAN Hello Holding timer\
    \ is set to the\n         maximum of its time to expiration and the current time\
    \ to\n         expiration of the Designated VLAN Hello Holding timer.\n      o\
    \  The Designated VLAN Hello Holding timer is then set to expired\n         (if\
    \ necessary), and an event A5 occurs for the adjacency (see\n         Section\
    \ 3.3).\n   If the Designated VLAN for a link changes, this will generally change\n\
    \   the VLANs on which Hellos are sent by an RBridge port on that link as\n  \
    \ specified in Section 4.4.3 of [RFC6325].\n"
- title: 4.3.  State Table and Diagram
  contents:
  - "4.3.  State Table and Diagram\n   The table below shows the transitions between\
    \ the DRB states defined\n   above based on the events defined above:\n      \
    \       | Event | Down   | Suspend |  DRB    | Not DRB |\n             +-------+--------+---------+---------+---------+\n\
    \             |  D1   | DRB    | DRB     |  N/A    |  N/A    |\n             |\
    \  D2   |  N/A   |  N/A    | Not DRB | Not DRB |\n             |  D3   |  N/A\
    \   |  N/A    | DRB     | DRB     |\n             |  D4   |  N/A   | Suspend |\
    \ Suspend | Suspend |\n             |  D5   | Down   | Down    | Down    | Down\
    \    |\n   N/A indicates that the event to the left is Not Applicable in the\n\
    \   state at the top of the column.\n   The diagram below presents the same information\
    \ as in the state\n   table:\n                 +-------------+\n             \
    \    |  Down       |<--------------+\n                 +-+---+-------+     ^ \
    \        |\n                   |   |   ^         |         |\n               \
    \  D1|   |D5 |         |         |\n                   |   +---+         |D5 \
    \      |\n                   |                 |         |\n                 \
    \  |        +--------+----+    |\n                   |        |  Suspended  |<---|---+\n\
    \                   |        +-+-----+-----+    |   |\n                   |  \
    \      D1|  ^  |   ^      |   |\n                   |          |  |  |D4 |   \
    \   |   |\n                   |          |  |  +---+      |   |\n            \
    \       |          |  |             |   |\n                   |          |  |D4\
    \           |   |\n                   V          V  |             |   |\n    \
    \             +---------------+-+ D5        |   |\n                 |        \
    \  DRB    |---------->|   |\n                 +--------+--+-----+           |\
    \   |\n                     ^    |  |  ^              |   |\n                \
    \     |  D2|  |D3|              |   |\n                     |    |  +--+     \
    \         |   |\n                     |    |         D4         |   |\n      \
    \               |D3  |  +-----------------|---+\n                     |    V \
    \ |                 |\n                +----+-------+-+ D5            |\n    \
    \            |   Not DRB    |-------------->|\n                +----+---------+\n\
    \                     |    ^\n                     |D2  |\n                  \
    \   +----+\n"
- title: 5.  MTU Matching
  contents:
  - "5.  MTU Matching\n   The purpose of MTU testing is to ensure that the links used\
    \ in the\n   campus topology can pass TRILL IS-IS and Data frames at the RBridge\n\
    \   campus MTU.\n   An RBridge, RB1, determines the desired campus link MTU by\n\
    \   calculating the minimum of its originatingL1LSPBufferSize and the\n   originatingL1LSPBufferSize\
    \ of other RBridges in the campus, as\n   advertised in the link state database,\
    \ but not less than 1,470 bytes.\n   Although originatingL1LSPBufferSize in Layer\
    \ 3 [IS-IS] is limited to\n   the range 512 to 1,492 bytes inclusive, in TRILL\
    \ it is limited to the\n   range 1,470 to 65,535 bytes inclusive.\n   Although\
    \ MTU testing is optional, it is mandatory for an RBridge to\n   respond to an\
    \ MTU-probe PDU with an MTU-ack PDU [RFC6325] [RFC6326].\n   Use of multicast\
    \ or unicast for MTU-probe and MTU-ack is an\n   implementation choice.  However,\
    \ the burden on the link is generally\n   minimized by multicasting MTU-probes\
    \ when a response from all other\n   RBridges on the link is desired, such as\
    \ when initializing or re-\n   confirming MTU, unicasting MTU-probes when a response\
    \ from a single\n   RBridge is desired, such as one that has just been detected\
    \ on the\n   link, and unicasting all MTU-ack frames.\n   RB1 can test the MTU\
    \ size to RB2 as described in Section 4.3.2 of\n   [RFC6325].  For this purpose,\
    \ MTU testing is only done in the\n   Designated VLAN.  An adjacency that fails\
    \ the MTU test at the campus\n   MTU will not enter the Report state or, if the\
    \ adjacency is in that\n   state, it leaves that state.  Thus, an adjacency failing\
    \ the MTU test\n   will not be reported by the RBridge performing the test.  Since\n\
    \   inclusion in least-cost route computation requires the adjacency to\n   be\
    \ reported by both ends, as long as the MTU failure is noticed by\n   the RBridge\
    \ at either end of the adjacency, it will not be so used.\n   If it tests MTU,\
    \ RB1 reports the largest size for which the MTU test\n   succeeds or a flag indicating\
    \ that it fails at the campus MTU.  This\n   report always appears with the neighbor\
    \ in RB1's TRILL Neighbor TLV.\n   RB1 MAY also report this with the adjacency\
    \ in an Extended\n   Reachability TLV in RB1's LSP.  RB1 MAY choose to test MTU\
    \ sizes\n   greater than the desired campus MTU as well as the desired campus\n\
    \   MTU.\n   Most types of TRILL IS-IS frames, such as LSPs, can make use of the\n\
    \   campus MTU.  The exceptions are TRILL Hellos, which must be kept\n   small\
    \ for loop safety, and the MTU PDUs, whose size must be adjusted\n   appropriately\
    \ for the tests being performed.\n"
- title: 6.  Pseudonodes
  contents:
  - "6.  Pseudonodes\n   The Designated RBridge (DRB), determined as described above,\
    \ controls\n   whether a pseudonode will be used on a link.\n   If the DRB sets\
    \ the bypass pseudonode bit in its TRILL LAN Hellos,\n   the RBridges on the link\
    \ (including the DRB) just directly report all\n   their adjacencies on the LAN\
    \ that are in the Report state.  If the\n   DRB does not set the bypass pseudonode\
    \ bit in its TRILL Hellos, then\n   (1) the DRB reports in its LSP its adjacency\
    \ to the pseudonode, (2)\n   the DRB sends LSPs on behalf of the pseudonode in\
    \ which it reports\n   adjacency to all other RBridges on the link where it sees\
    \ that\n   adjacency in the Report state, and (3) all other RBridges on the link\n\
    \   report their adjacency to the pseudonode if they see their adjacency\n   to\
    \ the DRB as being in the Report state and do not report any other\n   adjacencies\
    \ on the link.  Setting the bypass pseudonode bit has no\n   effect on how LSPs\
    \ are flooded on a link.  It only affects what LSPs\n   are generated.\n   It\
    \ is anticipated that many links between RBridges will actually be\n   point-to-point,\
    \ in which case using a pseudonode merely adds to the\n   complexity.  For example,\
    \ if RB1 and RB2 are the only RBridges on the\n   link, and RB1 is DRB, then if\
    \ RB1 creates a pseudonode that is used,\n   there are 3 LSPs: for, say, RB1.25\
    \ (the pseudonode), RB1, and RB2,\n   where RB1.25 reports connectivity to RB1\
    \ and RB2, and RB1 and RB2\n   each just say they are connected to RB1.25.  Whereas\
    \ if DRB RB1 sets\n   the bypass pseudonode bit in its Hellos, then there will\
    \ be only 2\n   LSPs: RB1 and RB2 each reporting connectivity to each other.\n\
    \   A DRB SHOULD set the bypass pseudonode bit in its Hellos if it has\n   not\
    \ seen at least two simultaneous adjacencies in the Report state\n   since it\
    \ last rebooted or was reset by network management.\n"
- title: 7.  TRILL-Hello Reception and Transmission
  contents:
  - "7.  TRILL-Hello Reception and Transmission\n   This section provides further\
    \ details on the receipt and transmission\n   of TRILL LAN Hellos.\n   TRILL LAN\
    \ Hellos, like all TRILL IS-IS frames, are primarily\n   distinguished from Layer\
    \ 3 IS-IS frames by being sent to the\n   All-IS-IS-RBridges multicast address\
    \ (01-80-C2-00-00-41).  TRILL\n   IS-IS frames also have the L2-IS-IS Ethertype\
    \ (0x22F4) and are\n   Ethertype encoded.\n   Although future extensions to TRILL\
    \ may include use of Level 2 IS-IS,\n   [RFC6325] specifies TRILL using a single\
    \ Level 1 Area with Area\n   Address zero (see Section 4.2 of [RFC6326]).\n  \
    \ IS-IS Layer 3 routers are frequently connected to other Layer 3\n   routers\
    \ that are part of a different routing domain.  In that case,\n   the externalDomain\
    \ flag (see [IS-IS]) is normally set for the port\n   through which such a connection\
    \ is made.  The setting of this flag to\n   \"true\" causes no IS-IS PDUs to be\
    \ sent out the port and any IS-IS\n   PDUs received to be discarded, including\
    \ Hellos.  RBridges operate in\n   a different environment where all neighbor\
    \ RBridges merge into a\n   single campus.  For loop safety, RBridges do not implement\
    \ the\n   externalDomain flag or implement it with the fixed value \"false\".\n\
    \   They send and receive TRILL LAN Hellos on every port that is not\n   disabled\
    \ or configured as point-to-point.\n"
- title: 7.1.  Transmitting TRILL Hellos
  contents:
  - "7.1.  Transmitting TRILL Hellos\n   TRILL LAN Hellos are sent with the same timing\
    \ as Layer 3 IS-IS LAN\n   Hellos [IS-IS]; however, no Hellos are sent if a port\
    \ is in the\n   Suspended or Down states.\n   TRILL-Hello PDUs SHOULD NOT be padded\
    \ and MUST NOT be sent exceeding\n   1,470 octets; however, a received TRILL Hello\
    \ longer than 1,470\n   octets is processed normally.\n   TRILL-Hello PDU headers\
    \ MUST conform to the following:\n      o  Maximum Area Addresses equal to 1.\n\
    \      o  Circuit Type equal to 1.\n   Each TRILL Hello MUST contain an Area Addresses\
    \ TLV listing only the\n   single Area zero, and an MT Port Capabilities TLV containing\
    \ a VLAN-\n   FLAGS sub-TLV [RFC6326].  If a Protocols Supported TLV is present,\
    \ it\n   MUST list the TRILL NLPID (0xC0).\n   The TRILL Neighbor TLV sent in\
    \ a Hello MUST show the neighbor\n   information, as sensed by the transmitting\
    \ RBridge, for the VLAN on\n   which the Hello is sent.  Since implementations\
    \ conformant to this\n   document maintain such information on a per-VLAN basis\
    \ only for the\n   Designated VLAN, such implementations only send the TRILL Neighbor\n\
    \   TLV in TRILL Hellos on the Designated VLAN.\n   It is RECOMMENDED that, if\
    \ there is sufficient room, a TRILL Neighbor\n   TLV or TLVs, as described in\
    \ Section 4.4.2.1 of [RFC6325], covering\n   the entire range of MAC addresses\
    \ and listing all adjacencies with a\n   non-zero Designated VLAN Hello Holding\
    \ time, or an empty list of\n   neighbors if there are no such adjacencies, be\
    \ in TRILL Hellos sent\n   on the Designated VLAN.  If this is not possible, then\
    \ TRILL Neighbor\n   TLV's covering sub-ranges of MAC addresses should be sent\
    \ so that the\n   entire range is covered reasonably promptly.  Delays in sending\
    \ TRILL\n   Neighbor TLVs will delay the advancement of adjacencies to the Report\n\
    \   state and the discovery of some link failures.  Rapid (for example,\n   sub-second)\
    \ detection of link or node failures is best addressed with\n   a protocol designed\
    \ for that purpose, such as Bidirectional\n   Forwarding Detection (BFD) [RFC5880],\
    \ use of which with TRILL will be\n   specified in a separate document.\n   To\
    \ ensure that any RBridge RB2 can definitively determine whether RB1\n   can hear\
    \ RB2, RB1's neighbor list MUST eventually cover every\n   possible range of IDs,\
    \ that is, within a period that depends on RB1's\n   policy and not necessarily\
    \ within any specific period such as its\n   Holding Time.  In other words, if\
    \ X1 is the smallest ID reported in\n   one of RB1's neighbor lists, and the \"\
    smallest\" flag is not set, then\n   X1 MUST appear in a different neighbor list\
    \ as well, as the largest\n   ID reported in that fragment.  Or lists may overlap,\
    \ as long as there\n   is no gap, such that some range, say between Xi and Xj,\
    \ never appears\n   in any list.\n   A TRILL Hello MAY also contain any TLV permitted\
    \ in a Layer 3 IS-IS\n   Hello.  TLVs that are unsupported/unknown are ignored.\n"
- title: 7.2.  Receiving TRILL Hellos
  contents:
  - "7.2.  Receiving TRILL Hellos\n   Assuming a frame has the All-IS-IS-RBridges\
    \ multicast address and\n   L2-IS-IS Ethertype, it will be examined to see if\
    \ it appears to be an\n   IS-IS PDU.  If so, and it appears to be a LAN Hello\
    \ PDU, the\n   following tests are performed.\n      o  If the Circuit Type field\
    \ is not 1, the PDU is discarded.\n      o  If the PDU does not contain an Area\
    \ Address TLV or it contains\n         an Area Address TLV that is not the single\
    \ Area Address zero,\n         it is discarded.\n      o  If the Hello includes\
    \ a Protocols Supported TLV that does not\n         list the TRILL NLPID (0xC0),\
    \ it is discarded.  It is acceptable\n         if there is no Protocols Supported\
    \ TLV present.\n      o  If the Hello does not contain an MT Port Capabilities\
    \ TLV\n         containing a VLAN-FLAGS sub-TLV [RFC6326], it is discarded.\n\
    \      o  If the maximumAreaAddresses field of the PDU is not 1, it is\n     \
    \    discarded.\n      o  If IS-IS authentication is in use on the link and the\
    \ PDU\n         either has no Authentication TLV or validation of that\n     \
    \    Authentication TLV fails, it is discarded.\n   If none of the rules in the\
    \ list above has been satisfied, and the\n   frame is parseable, it is assumed\
    \ to be a well-formed TRILL Hello\n   received on the link.  It is treated as\
    \ an event A0, A1, A2, or A3\n   based on the criteria listed in Section 3.3.\n"
- title: 8.  Multiple Ports on the Same Link
  contents:
  - "8.  Multiple Ports on the Same Link\n   It is possible for an RBridge RB1 to\
    \ have multiple ports on the same\n   link that are not in the Suspended state.\
    \  It is important for RB1 to\n   recognize which of its ports are on the same\
    \ link.  RB1 can detect\n   this condition based on receiving TRILL LAN Hello\
    \ messages with the\n   same LAN ID on multiple ports.\n   The DRB election is\
    \ port-based (see Section 4) and only the Hellos\n   from the elected port can\
    \ perform certain functions such as dictating\n   the Designated VLAN or whether\
    \ a pseudonode will be used; however,\n   the election also designates the RBridge\
    \ with that port as DRB for\n   the link.  An RBridge may choose to load split\
    \ some tasks among its\n   ports on the link if it has more than one and it is\
    \ safe to do so as\n   described in Section 4.4.4 of [RFC6325].\n"
- title: 9.  Security Considerations
  contents:
  - "9.  Security Considerations\n   This memo provides improved documentation of\
    \ some aspects of the\n   TRILL base protocol standard, particularly four aspects\
    \ of the TRILL\n   LAN Hello protocol.  It does not change the security considerations\n\
    \   of the TRILL base protocol.  See Section 6 of [RFC6325].\n"
- title: 10.  References
  contents:
  - '10.  References

    '
- title: 10.1.  Normative References
  contents:
  - "10.1.  Normative References\n   [IS-IS]       ISO/IEC 10589:2002, Second Edition,\
    \ \"Intermediate\n                 System to Intermediate System Intra-Domain\
    \ Routing\n                 Exchange Protocol for use in Conjunction with the\n\
    \                 Protocol for Providing the Connectionless-mode Network\n   \
    \              Service (ISO 8473)\", 2002.\n   [RFC1195]     Callon, R., \"Use\
    \ of OSI IS-IS for routing in TCP/IP and\n                 dual environments\"\
    , RFC 1195, December 1990.\n   [RFC2119]     Bradner, S., \"Key words for use\
    \ in RFCs to Indicate\n                 Requirement Levels\", BCP 14, RFC 2119,\
    \ March 1997.\n   [RFC6325]     Perlman, R., D. Eastlake, D. Dutt, S. Gai, and\
    \ A.\n                 Ghanwani, \"RBridges: Base Protocol Specification\", RFC\n\
    \                 6325, July 2011.\n   [RFC6326]     Eastlake, D., Banerjee, A.,\
    \ Dutt, D., Perlman, R., and\n                 A. Ghanwani, \"TRILL Use of IS-IS\"\
    , RFC 6326, July 2011.\n"
- title: 10.2.  Informative References
  contents:
  - "10.2.  Informative References\n   [802.1AX]     \"IEEE Standard for Local and\
    \ metropolitan area networks\n                 / Link Aggregation\", 802.1AX-2008,\
    \ 1 January 2008.\n   [802.1Q-2005] \"IEEE Standard for Local and metropolitan\
    \ area networks\n                 / Virtual Bridged Local Area Networks\", 802.1Q-2005,\
    \ 19\n                 May 2006.\n   [FCoE]        From www.t11.org discussion\
    \ of \"FCoE Max Size\"\n                 generated from T11/09-251v1, 04/27/2009,\
    \ \"FCoE frame or\n                 FCoE PDU\".\n   [RFC3719]     Parker, J.,\
    \ Ed., \"Recommendations for Interoperable\n                 Networks using Intermediate\
    \ System to Intermediate\n                 System (IS-IS)\", February 2004.\n\
    \   [RFC5880]     Katz, D. and D. Ward, \"Bidirectional Forwarding\n         \
    \        Detection (BFD)\", RFC 5880, June 2010.\n"
- title: 11.  Acknowledgements
  contents:
  - "11.  Acknowledgements\n   The authors of [RFC6325], those listed in the Acknowledgements\n\
    \   section of [RFC6325], and the contributions of Jari Arkko, Ayan\n   Banerjee,\
    \ Les Ginsberg, Sujay Gupta, David Harrington, Pete McCann,\n   Erik Nordmark,\
    \ and Mike Shand, to this document, are hereby\n   acknowledged.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Donald E. Eastlake, 3rd\n   Huawei Technologies\n   155\
    \ Beaver Street\n   Milford, MA 01757 USA\n   Phone: +1-508-333-2270\n   EMail:\
    \ d3e3e3@gmail.com\n   Radia Perlman\n   Intel Labs\n   2200 Mission College Blvd.\n\
    \   Santa Clara, CA 95054-1549 USA\n   Phone: +1-408-765-8080\n   EMail: Radia@alum.mit.edu\n\
    \   Anoop Ghanwani\n   Brocade\n   130 Holger Way\n   San Jose, CA 95134 USA\n\
    \   Phone: +1-408-333-7149\n   EMail: anoop@alumni.duke.edu\n   Dinesh G. Dutt\n\
    \   Cisco Systems\n   170 Tasman Drive\n   San Jose, CA 95134-1706 USA\n   Phone:\
    \ +1-408-527-0955\n   EMail: ddutt@cisco.com\n   Vishwas Manral\n   Hewlett Packard\
    \ Co.\n   19111 Pruneridge Ave,\n   Cupertino, CA 95014 USA\n   Phone: +1-408-447-1497\n\
    \   EMail: vishwas.manral@hp.com\n"
