- title: __initial_text__
  contents:
  - ' Locator/ID Separation Protocol Alternative Logical Topology (LISP+ALT)

    '
- title: Abstract
  contents:
  - "Abstract\n   This document describes a simple distributed index system to be\
    \ used\n   by a Locator/ID Separation Protocol (LISP) Ingress Tunnel Router\n\
    \   (ITR) or Map-Resolver (MR) to find the Egress Tunnel Router (ETR)\n   that\
    \ holds the mapping information for a particular Endpoint\n   Identifier (EID).\
    \  The MR can then query that ETR to obtain the\n   actual mapping information,\
    \ which consists of a list of Routing\n   Locators (RLOCs) for the EID.  Termed\
    \ the Alternative Logical\n   Topology (ALT), the index is built as an overlay\
    \ network on the\n   public Internet using the Border Gateway Protocol (BGP) and\
    \ Generic\n   Routing Encapsulation (GRE).\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for examination, experimental implementation, and\n   evaluation.\n\
    \   This document defines an Experimental Protocol for the Internet\n   community.\
    \  This document is a product of the Internet Engineering\n   Task Force (IETF).\
    \  It represents the consensus of the IETF\n   community.  It has received public\
    \ review and has been approved for\n   publication by the Internet Engineering\
    \ Steering Group (IESG).  Not\n   all documents approved by the IESG are a candidate\
    \ for any level of\n   Internet Standard; see Section 2 of RFC 5741.\n   Information\
    \ about the current status of this document, any errata,\n   and how to provide\
    \ feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc6836.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2013 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Definition of Terms .............................................5\n  \
    \ 3. The LISP-ALT Model ..............................................8\n    \
    \  3.1. Routability of EIDs ........................................8\n      \
    \     3.1.1. Mechanisms for an ETR to Originate EID-Prefixes .....9\n        \
    \   3.1.2. Mechanisms for an ITR to Forward to EID-Prefixes ....9\n          \
    \ 3.1.3. Map-Server Model Preferred ..........................9\n      3.2. Connectivity\
    \ to Non-LISP Sites ............................10\n      3.3. Caveats on the\
    \ Use of Data-Probes .........................10\n   4. LISP+ALT: Overview .............................................10\n\
    \      4.1. ITR Traffic Handling ......................................11\n  \
    \    4.2. EID Assignment - Hierarchy and Topology ...................12\n    \
    \  4.3. Use of GRE and BGP between LISP-ALT Routers ...............14\n   5. EID-Prefix\
    \ Propagation and Map-Request Forwarding ..............14\n      5.1. Changes\
    \ to ITR Behavior with LISP+ALT .....................15\n      5.2. Changes to\
    \ ETR Behavior with LISP+ALT .....................15\n      5.3. ALT Datagram\
    \ Forwarding Failure ...........................16\n   6. BGP Configuration and\
    \ Protocol Considerations ..................16\n      6.1. Autonomous System Numbers\
    \ (ASNs) in LISP+ALT ..............16\n      6.2. Subsequent Address Family Identifier\
    \ (SAFI) for LISP+ALT ..17\n   7. EID-Prefix Aggregation .........................................17\n\
    \      7.1. Stability of the ALT ......................................18\n  \
    \    7.2. Traffic Engineering Using LISP ............................18\n    \
    \  7.3. Edge Aggregation and Dampening ............................19\n      7.4.\
    \ EID Assignment Flexibility vs. ALT Scaling ................19\n   8. Connecting\
    \ Sites to the ALT Network ............................20\n      8.1. ETRs Originating\
    \ Information into the ALT .................20\n      8.2. ITRs Using the ALT\
    \ ........................................21\n   9. Security Considerations ........................................22\n\
    \      9.1. Apparent LISP+ALT Vulnerabilities .........................22\n  \
    \    9.2. Survey of LISP+ALT Security Mechanisms ....................23\n    \
    \  9.3. Use of Additional BGP Security Mechanisms .................24\n   10.\
    \ Acknowledgments ...............................................24\n   11. References\
    \ ....................................................24\n      11.1. Normative\
    \ References .....................................24\n      11.2. Informative\
    \ References ...................................25\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This document describes the LISP+ALT system, used by an\
    \ [RFC6830]\n   Ingress Tunnel Router (ITR) or MR to find the Egress Tunnel Router\n\
    \   (ETR) that holds the RLOC mapping information for a particular\n   Endpoint\
    \ Identifier (EID).  The ALT network is built using the Border\n   Gateway Protocol\
    \ (BGP) [RFC4271], BGP multiprotocol extensions\n   [RFC4760], and Generic Routing\
    \ Encapsulation (GRE) [RFC2784] to\n   construct an overlay network of devices\
    \ (ALT-Routers) that operate on\n   EID-Prefixes and use EIDs as forwarding destinations.\n\
    \   ALT-Routers advertise hierarchically delegated segments of the EID\n   namespace\
    \ (i.e., prefixes) toward the rest of the ALT; they also\n   forward traffic destined\
    \ for an EID covered by one of those prefixes\n   toward the network element that\
    \ is authoritative for that EID and is\n   the origin of the BGP advertisement\
    \ for that EID-Prefix.  An ITR uses\n   this overlay to send a LISP Map-Request\
    \ (defined in [RFC6830]) to the\n   ETR that holds the EID-to-RLOC mapping for\
    \ a matching EID-Prefix.  In\n   most cases, an ITR does not connect directly\
    \ to the overlay network\n   but instead sends Map-Requests via a Map-Resolver\
    \ (described in\n   [RFC6833]) that does.  Likewise, in most cases, an ETR does\
    \ not\n   connect directly to the overlay network but instead registers its\n\
    \   EID-Prefixes with a Map-Server that advertises those EID-Prefixes on\n   to\
    \ the ALT and forwards Map-Requests for them to the ETR.\n   It is important to\
    \ note that the ALT does not distribute actual\n   EID-to-RLOC mappings.  What\
    \ it does provide is a forwarding path from\n   an ITR (or MR) that requires an\
    \ EID-to-RLOC mapping to an ETR that\n   holds that mapping.  The ITR/MR uses\
    \ this path to send an ALT\n   Datagram (see Section 3) to an ETR, which then\
    \ responds with a\n   Map-Reply containing the needed mapping information.\n \
    \  One design goal for LISP+ALT is to use existing technology wherever\n   possible.\
    \  To this end, the ALT is intended to be built using\n   off-the-shelf routers\
    \ that already implement the required protocols\n   (BGP and GRE); little, if\
    \ any, LISP-specific modifications should be\n   needed for such devices to be\
    \ deployed on the ALT (see Section 7 for\n   aggregation requirements).  Note,\
    \ though, that organizational and\n   operational considerations suggest that\
    \ ALT-Routers be both logically\n   and physically separate from the \"native\"\
    \ Internet packet transport\n   system; deploying this overlay on those routers\
    \ that are already\n   participating in the global routing system and actively\
    \ forwarding\n   Internet traffic is not recommended.\n   This specification is\
    \ experimental, and there are areas where further\n   experience is needed to\
    \ understand the best implementation strategy,\n   operational model, and effects\
    \ on Internet operations.  These areas\n   include:\n   o  application effects\
    \ of on-demand route map discovery\n   o  tradeoff in connection setup time vs.\
    \ ALT design and performance\n      when using a Map Request instead of carrying\
    \ initial user data in\n      a Data-Probe\n   o  best practical ways to build\
    \ ALT hierarchies\n   o  effects of route leakage from ALT to the current Internet,\n\
    \      particularly for LISP-to-non-LISP interworking\n   o  effects of exceptional\
    \ situations, such as denial-of-service (DoS)\n      attacks\n   Experimentation,\
    \ measurements, and deployment experience on these\n   aspects is appreciated.\
    \  While these issues are conceptually well-\n   understood (e.g., an ALT lookup\
    \ causes potential delay for the first\n   packet destined to a given network),\
    \ the real-world operational\n   effects are much less clear.\n   The remainder\
    \ of this document is organized as follows: Section 2\n   provides the definitions\
    \ of terms used in this document.  Section 3\n   outlines the LISP-ALT model,\
    \ where EID-Prefixes are advertised using\n   BGP on an overlay network (the \"\
    ALT\") and Map-Requests are forwarded\n   across it.  Section 4 provides a basic\
    \ overview of the LISP\n   Alternative Logical Topology architecture, and Section\
    \ 5 describes\n   how the ALT uses BGP to propagate EID reachability over the\
    \ overlay\n   network.  Section 6 describes other considerations for using BGP\
    \ on\n   the ALT.  Section 7 describes the construction of the ALT aggregation\n\
    \   hierarchy, and Section 8 discusses how LISP-ALT elements are\n   connected\
    \ to form the overlay network.  Section 9 discusses security\n   considerations\
    \ relevant to LISP+ALT.\n"
- title: 2.  Definition of Terms
  contents:
  - "2.  Definition of Terms\n   This section provides high-level definitions of LISP\
    \ concepts and\n   components involved with and affected by LISP+ALT.\n    Alternative\
    \ Logical Topology (ALT):  The virtual overlay network\n      made up of tunnels\
    \ between LISP-ALT Routers.  The Border Gateway\n      Protocol (BGP) runs between\
    \ ALT-Routers and is used to carry\n      reachability information for EID-Prefixes.\
    \  The ALT provides a way\n      to forward Map-Requests (and, if supported, Data-Probes)\
    \ toward\n      the ETR that \"owns\" an EID-Prefix.  As a tunneled overlay, its\n\
    \      performance is expected to be quite limited, so using it to\n      forward\
    \ high-bandwidth flows of Data-Probes is strongly\n      discouraged (see Section\
    \ 3.3 for additional discussion).\n    ALT-Router:  The device that runs on the\
    \ ALT.  The ALT is a static\n      network built using tunnels between ALT-Routers.\
    \  These routers\n      are deployed in a roughly hierarchical mesh in which routers\
    \ at\n      each level in the topology are responsible for aggregating\n     \
    \ EID-Prefixes learned from those logically \"below\" them and\n      advertising\
    \ summary prefixes to those logically \"above\" them.\n      Prefix learning and\
    \ propagation between ALT-Routers is done using\n      BGP.  An ALT-Router at\
    \ the lowest level, or \"edge\" of the ALT,\n      learns EID-Prefixes from its\
    \ \"client\" ETRs.  See Section 3.1 for a\n      description of how EID-Prefixes\
    \ are learned at the \"edge\" of the\n      ALT.  See also Section 6 for details\
    \ on how BGP is configured\n      between the different network elements.  When\
    \ an ALT-Router\n      receives an ALT Datagram, it looks up the destination EID\
    \ in its\n      forwarding table (composed of EID-Prefix routes it learned from\n\
    \      neighboring ALT-Routers) and forwards it to the logical next hop\n    \
    \  on the overlay network.\n    Endpoint ID (EID):  A 32-bit (for IPv4) or 128-bit\
    \ (for IPv6) value\n      used to identify the ultimate source or destination\
    \ for a LISP-\n      encapsulated packet.  See [RFC6830] for details.\n    EID-Prefix:\
    \  A set of EIDs delegated in a power-of-two block.\n      Information about EID-Prefixes\
    \ is exchanged among ALT-Routers (not\n      on the global Internet) using BGP,\
    \ and EID-Prefixes are expected\n      to be assigned in a hierarchical manner\
    \ such that they can be\n      aggregated by ALT-Routers.  Such a block is characterized\
    \ by a\n      prefix and a length.  Note that while the ALT routing system\n \
    \     considers an EID-Prefix to be an opaque block of EIDs, an end site\n   \
    \   may put site-local, topologically relevant structure (subnetting)\n      into\
    \ an EID-Prefix for intra-site routing.\n    Aggregated EID-Prefixes:  A set of\
    \ individual EID-Prefixes that have\n      been aggregated in the [RFC4632] sense.\n\
    \    Map-Server (MS):   An edge ALT-Router that provides a registration\n    \
    \  function for non-ALT-connected ETRs, originates EID-Prefixes into\n      the\
    \ ALT on behalf of those ETRs, and forwards Map-Requests to\n      them.  See\
    \ [RFC6833] for details.\n    Map-Resolver (MR):   An edge ALT-Router that accepts\
    \ an Encapsulated\n      Map-Request from a non-ALT-connected ITR, decapsulates\
    \ it, and\n      forwards it on to the ALT toward the ETR that owns the requested\n\
    \      EID-Prefix.  See [RFC6833] for details.\n    Ingress Tunnel Router (ITR):\
    \   A router that sends LISP Map-Requests\n      or encapsulates IP datagrams\
    \ with LISP headers, as defined in\n      [RFC6830].  In this document, \"ITR\"\
    \ refers to any device\n      implementing ITR functionality, including a Proxy-ITR\
    \ (see\n      [RFC6832]).  Under some circumstances, a LISP Map-Resolver may\n\
    \      also originate Map-Requests (see [RFC6833]).\n    Egress Tunnel Router\
    \ (ETR):   A router that sends LISP Map-Replies\n      in response to LISP Map-Requests\
    \ and decapsulates LISP-\n      encapsulated IP datagrams for delivery to end-systems,\
    \ as defined\n      in [RFC6830].  In this document, \"ETR\" refers to any device\n\
    \      implementing ETR functionality, including a Proxy-ETR (see\n      [RFC6832]).\
    \  Under some circumstances, a LISP Map-Server may also\n      respond to Map-Requests\
    \ (see [RFC6833]).\n    Routing Locator (RLOC):  A routable IP address for a LISP\
    \ Tunnel\n      Router (ITR or ETR).  Interchangeably referred to as a \"locator\"\
    \n      in this document.  An RLOC is also the output of an EID-to-RLOC\n    \
    \  mapping lookup; an EID-Prefix maps to one or more RLOCs.\n      Typically,\
    \ RLOCs are numbered from topologically aggregatable\n      blocks that are assigned\
    \ to a site at each point where it attaches\n      to the global Internet; where\
    \ the topology is defined by the\n      connectivity of provider networks, RLOCs\
    \ can be thought of as\n      Provider-Assigned (PA) addresses.  Routing for RLOCs\
    \ is not\n      carried on the ALT.\n    EID-to-RLOC Mapping:  A binding between\
    \ an EID-Prefix and the set of\n      RLOCs that can be used to reach it; sometimes\
    \ simply referred to\n      as a \"mapping\".\n    EID-Prefix Reachability:  An\
    \ EID-Prefix is said to be \"reachable\" if\n      at least one of its Locators\
    \ is reachable.  That is, an EID-Prefix\n      is reachable if the ETR that is\
    \ authoritative for a given\n      EID-to-RLOC mapping is reachable.\n    Default\
    \ Mapping:  A mapping entry for EID-Prefix 0.0.0.0/0 (::/0 for\n      IPv6). \
    \ It maps to a Locator-Set used for all EIDs in the\n      Internet.  If there\
    \ is a more-specific EID-Prefix in the\n      map-cache, it overrides the Default\
    \ Mapping entry.  The Default\n      Mapping entry can be learned by configuration\
    \ or from a Map-Reply\n      message.\n    ALT Default Route:  An EID-Prefix value\
    \ of 0.0.0.0/0 (or ::/0 for\n      IPv6) that may be learned from the ALT or statically\
    \ configured on\n      an edge ALT-Router.  The ALT Default Route defines a forwarding\n\
    \      path for a packet to be sent into the ALT on a router that does\n     \
    \ not have a full ALT forwarding database.\n"
- title: 3.  The LISP-ALT Model
  contents:
  - "3.  The LISP-ALT Model\n   The LISP-ALT model uses the same basic query/response\
    \ protocol that\n   is documented in [RFC6830].  In particular, LISP+ALT provides\
    \ two\n   types of packets that an ITR can originate to obtain EID-to-RLOC\n \
    \  mappings:\n   Map-Request:  A Map-Request message is sent into the ALT to request\n\
    \      an EID-to-RLOC mapping.  The ETR that owns the mapping will\n      respond\
    \ to the ITR with a Map-Reply message.  Since the ALT only\n      forwards on\
    \ EID destinations, the destination address of the\n      Map-Request sent on\
    \ the ALT must be an EID.\n   Data-Probe:  Alternatively, an ITR may encapsulate\
    \ and send the first\n      data packet destined for an EID with no known RLOCs\
    \ into the ALT\n      as a Data-Probe.  This might be done to minimize packet\
    \ loss and\n      to probe for the mapping.  As above, the authoritative ETR for\
    \ the\n      EID-Prefix will respond to the ITR with a Map-Reply message when\n\
    \      it receives the data packet over the ALT.  As a side-effect, the\n    \
    \  encapsulated data packet is delivered to the end-system at the ETR\n      site.\
    \  Note that the Data-Probe's inner IP destination address,\n      which is an\
    \ EID, is copied to the outer IP destination address so\n      that the resulting\
    \ packet can be routed over the ALT.  See\n      Section 3.3 for caveats on the\
    \ usability of Data-Probes.\n   The term \"ALT Datagram\" is shorthand for a Map-Request\
    \ or Data-Probe\n   to be sent into or forwarded on the ALT.  Note that such packets\
    \ use\n   an RLOC as the outer-header source IP address and an EID as the\n  \
    \ outer-header destination IP address.\n   Detailed descriptions of the LISP packet\
    \ types referenced by this\n   document may be found in [RFC6830].\n"
- title: 3.1.  Routability of EIDs
  contents:
  - "3.1.  Routability of EIDs\n   A LISP EID has the same syntax as an IP address\
    \ and can be used,\n   unaltered, as the source or destination of an IP datagram.\
    \  In\n   general, though, EIDs are not routable on the public Internet; LISP+\n\
    \   ALT provides a separate, virtual network, known as the LISP\n   Alternative\
    \ Logical Topology (ALT) on which a datagram using an EID\n   as an IP destination\
    \ address may be transmitted.  This network is\n   built as an overlay on the\
    \ public Internet using tunnels to\n   interconnect ALT-Routers.  BGP runs over\
    \ these tunnels to propagate\n   path information needed to forward ALT Datagrams.\
    \  Importantly, while\n   the ETRs are the source(s) of the unaggregated EID-Prefixes,\
    \ LISP+ALT\n   uses existing BGP mechanisms to aggregate this information.\n"
- title: 3.1.1.  Mechanisms for an ETR to Originate EID-Prefixes
  contents:
  - "3.1.1.  Mechanisms for an ETR to Originate EID-Prefixes\n   There are three ways\
    \ that an ETR may originate its mappings into\n   the ALT:\n   1.  By registration\
    \ with a Map-Server, as documented in [RFC6833].\n       This is the common case\
    \ and is expected to be used by the\n       majority of ETRs.\n   2.  Using a\
    \ \"static route\" on the ALT.  Where no Map-Server is\n       available, an edge\
    \ ALT-Router may be configured with a \"static\n       EID-Prefix route\" pointing\
    \ to an ETR.\n   3.  Edge connection to the ALT.  If a site requires fine-grained\n\
    \       control over how its EID-Prefixes are advertised into the ALT, it\n  \
    \     may configure its ETR(s) with tunnel and BGP connections to edge\n     \
    \  ALT-Routers.\n"
- title: 3.1.2.  Mechanisms for an ITR to Forward to EID-Prefixes
  contents:
  - "3.1.2.  Mechanisms for an ITR to Forward to EID-Prefixes\n   There are three\
    \ ways that an ITR may send ALT Datagrams:\n   1.  Through a Map-Resolver, as\
    \ documented in [RFC6833].  This is the\n       common case and is expected to\
    \ be used by the majority of ITRs.\n   2.  Using a \"default route\".  Where a\
    \ Map-Resolver is not available,\n       an ITR may be configured with a static\
    \ ALT Default Route pointing\n       to an edge ALT-Router.\n   3.  Edge connection\
    \ to the ALT.  If a site requires fine-grained\n       knowledge of what prefixes\
    \ exist on the ALT, it may configure its\n       ITR(s) with tunnel and BGP connections\
    \ to edge ALT-Routers.\n"
- title: 3.1.3.  Map-Server Model Preferred
  contents:
  - "3.1.3.  Map-Server Model Preferred\n   The ALT-connected ITR and ETR cases are\
    \ expected to be rare, as the\n   Map-Server/Map-Resolver model is simpler for\
    \ an ITR/ETR operator to\n   use and also provides a more general service interface\
    \ to not only\n   the ALT but to other mapping databases that may be developed\
    \ in the\n   future.\n"
- title: 3.2.  Connectivity to Non-LISP Sites
  contents:
  - "3.2.  Connectivity to Non-LISP Sites\n   As stated above, EIDs used as IP addresses\
    \ by LISP sites are not\n   routable on the public Internet.  This implies that,\
    \ absent a\n   mechanism for communication between LISP and non-LISP sites,\n\
    \   connectivity between them is not possible.  To resolve this problem,\n   an\
    \ \"interworking\" technology has been defined; see [RFC6832] for\n   details.\n"
- title: 3.3.  Caveats on the Use of Data-Probes
  contents:
  - "3.3.  Caveats on the Use of Data-Probes\n   It is worth noting that there has\
    \ been a great deal of discussion and\n   controversy about whether Data-Probes\
    \ are a good idea.  On the one\n   hand, using them offers a method of avoiding\
    \ the \"first packet drop\"\n   problem when an ITR does not have a mapping for\
    \ a particular\n   EID-Prefix.  On the other hand, forwarding data packets on\
    \ the ALT\n   would require that it either be engineered to support relatively\
    \ high\n   traffic rates, which is not generally feasible for a tunneled\n   network,\
    \ or that it be carefully designed to aggressively rate-limit\n   traffic to avoid\
    \ congestion or DoS attacks.  There may also be issues\n   caused by different\
    \ latency or other performance characteristics\n   between the ALT path taken\
    \ by an initial Data-Probe and the\n   \"Internet\" path taken by subsequent packets\
    \ on the same flow once a\n   mapping is in place on an ITR.  For these reasons,\
    \ the use of\n   Data-Probes is not recommended at this time; they should only\
    \ be\n   originated from an ITR when explicitly configured to do so, and such\n\
    \   configuration should only be enabled when performing experiments\n   intended\
    \ to test the viability of using Data-Probes.\n"
- title: '4.  LISP+ALT: Overview'
  contents:
  - "4.  LISP+ALT: Overview\n   LISP+ALT is a hybrid push/pull architecture.  Aggregated\
    \ EID-Prefixes\n   are advertised among the ALT-Routers and to those (rare) ITRs\
    \ that\n   are directly connected via a tunnel and BGP to the ALT.  Specific\n\
    \   EID-to-RLOC mappings are requested by an ITR (and returned by an ETR)\n  \
    \ using LISP when it sends a request either via a Map-Resolver or to an\n   edge\
    \ ALT-Router.\n   The basic idea embodied in LISP+ALT is to use BGP, running on\
    \ a\n   tunneled overlay network (the ALT), to establish reachability between\n\
    \   ALT-Routers.  The ALT BGP Routing Information Base (RIB) is comprised\n  \
    \ of EID-Prefixes and associated next hops.  ALT-Routers interconnect\n   using\
    \ BGP and propagate EID-Prefix updates among themselves.\n   EID-Prefix information\
    \ is learned from ETRs at the \"edge\" of the ALT\n   either through the use of\
    \ the Map-Server interface (the common case),\n   by static configuration, or\
    \ by BGP-speaking ETRs.\n   Map-Resolvers learns paths through the ALT to Map-Servers\
    \ for\n   EID-Prefixes.  An ITR will normally use a Map-Resolver to send its\n\
    \   ALT Datagrams on to the ALT but may, in unusual cases (see\n   Section 3.1.2),\
    \ use a static ALT Default Route or connect to the ALT\n   using BGP.  Likewise,\
    \ an ETR will normally register its prefixes in\n   the mapping database using\
    \ a Map-Server or can sometimes (see\n   Section 3.1.1) connect directly to the\
    \ ALT using BGP.  See [RFC6833]\n   for details on Map-Servers and Map-Resolvers.\n\
    \   Note that while this document specifies the use of Generic Routing\n   Encapsulation\
    \ (GRE) as a tunneling mechanism, there is no reason that\n   parts of the ALT\
    \ cannot be built using other tunneling technologies,\n   particularly in cases\
    \ where GRE does not meet security, management,\n   or other operational requirements.\
    \  References to \"GRE tunnel\" in\n   later sections of this document should\
    \ therefore not be taken as\n   prohibiting or precluding the use of other tunneling\
    \ mechanisms.\n   Note also that two ALT-Routers that are directly adjacent (with\
    \ no\n   layer-3 router hops between them) need not use a tunnel between them;\n\
    \   in this case, BGP may be configured across the interfaces that\n   connect\
    \ to their common subnet, and that subnet is then considered to\n   be part of\
    \ the ALT topology.  The use of techniques such as \"eBGP\n   multihop\" to connect\
    \ ALT-Routers that do not share a tunnel or common\n   subnet is not recommended,\
    \ as the non-ALT routers in between the\n   ALT-Routers in such a configuration\
    \ may not have information\n   necessary to forward ALT Datagrams destined to\
    \ EID-Prefixes exchanged\n   across that BGP session.\n   In summary, LISP+ALT\
    \ uses BGP to build paths through ALT-Routers so\n   that an ALT Datagram sent\
    \ into the ALT can be forwarded to the ETR\n   that holds the EID-to-RLOC mapping\
    \ for that EID-Prefix.  This\n   reachability is carried as IPv4 or IPv6 Network\
    \ Layer Reachability\n   Information (NLRI) without modification (since an EID-Prefix\
    \ has the\n   same syntax as an IPv4 or IPv6 address prefix).  ALT-Routers\n \
    \  establish BGP sessions with one another, forming the ALT.  An\n   ALT-Router\
    \ at the \"edge\" of the topology learns EID-Prefixes\n   originated by authoritative\
    \ ETRs.  Learning may be through the\n   Map-Server interface, by static configuration,\
    \ or via BGP with the\n   ETRs.  An ALT-Router may also be configured to aggregate\
    \ EID-Prefixes\n   received from ETRs or from other LISP-ALT Routers that are\n\
    \   topologically \"downstream\" from it.\n"
- title: 4.1.  ITR Traffic Handling
  contents:
  - "4.1.  ITR Traffic Handling\n   When an ITR receives a packet originated by an\
    \ end-system within its\n   site (i.e., a host for which the ITR is the exit path\
    \ out of the\n   site) and the destination EID for that packet is not known in\
    \ the\n   ITR's map-cache, the ITR creates either a Map-Request for the\n   destination\
    \ EID or the original packet encapsulated as a Data-Probe\n   (see Section 3.3\
    \ for caveats on the usability of Data-Probes).  The\n   result, known as an ALT\
    \ Datagram, is then sent to an ALT-Router (see\n   also [RFC6833] for non-ALT-connected\
    \ ITRs, noting that Data-Probes\n   cannot be sent to a Map-Resolver).  This \"\
    first-hop\" ALT-Router uses\n   EID-Prefix routing information learned from other\
    \ ALT-Routers via BGP\n   to guide the packet to the ETR that \"owns\" the prefix.\
    \  Upon receipt\n   by the ETR, normal LISP processing occurs: the ETR responds\
    \ to the\n   ITR with a LISP Map-Reply that lists the RLOCs (and, thus, the ETRs\n\
    \   to use) for the EID-Prefix.  For Data-Probes, the ETR also\n   decapsulates\
    \ the packet and transmits it toward its destination.\n   Upon receipt of the\
    \ Map-Reply, the ITR installs the RLOC information\n   for a given prefix into\
    \ a local mapping database.  With these mapping\n   entries stored, additional\
    \ packets destined to the given EID-Prefix\n   are routed directly to an RLOC\
    \ without use of the ALT, until either\n   the entry's Time to Live (TTL) has\
    \ expired or the ITR can otherwise\n   find no reachable ETR.  Note that a current\
    \ mapping may exist that\n   contains no reachable RLOCs; this is known as a Negative\
    \ Cache Entry,\n   and it indicates that packets destined to the EID-Prefix are\
    \ to be\n   dropped.\n   Full details on Map-Request/Map-Reply processing may\
    \ be found in\n   [RFC6830].\n   Traffic routed on to the ALT consists solely\
    \ of ALT Datagrams, i.e.,\n   Map-Requests and Data-Probes (if supported).  Given\
    \ the relatively\n   low performance expected of a tunneled topology, ALT-Routers\
    \ (and\n   Map-Resolvers) should aggressively rate-limit the ingress of ALT\n\
    \   Datagrams from ITRs and, if possible, should be configured to not\n   accept\
    \ packets that are not ALT Datagrams.\n"
- title: 4.2.  EID Assignment - Hierarchy and Topology
  contents:
  - "4.2.  EID Assignment - Hierarchy and Topology\n   The ALT database is organized\
    \ in a hierarchical manner with\n   EID-Prefixes aggregated on power-of-2 block\
    \ boundaries.  Where a LISP\n   site has multiple EID-Prefixes that are aligned\
    \ on a power-of-2 block\n   boundary, they should be aggregated into a single\
    \ EID-Prefix for\n   advertisement.  The ALT network is built in a roughly hierarchical,\n\
    \   partial mesh that is intended to allow aggregation where clearly\n   defined\
    \ hierarchical boundaries exist.  Building such a structure\n   should minimize\
    \ the number of EID-Prefixes carried by LISP+ALT nodes\n   near the top of the\
    \ hierarchy.\n   Routes on the ALT do not need to respond to changes in policy,\n\
    \   subscription, or underlying physical connectivity, so the topology\n   can\
    \ remain relatively static and aggregation can be sustained.\n   Because routing\
    \ on the ALT uses BGP, the same rules apply for\n   generating aggregates; in\
    \ particular, an ALT-Router should only be\n   configured to generate an aggregate\
    \ if it is configured with BGP\n   sessions to all of the originators of components\
    \ (more-specific\n   prefixes) of that aggregate.  Not all of the components need\
    \ to be\n   present for the aggregate to be originated (some may be holes in the\n\
    \   covering prefix, and some may be down), but the aggregating router\n   must\
    \ be configured to learn the state of all of the components.\n   Under what circumstances\
    \ the ALT-Router actually generates the\n   aggregate is a matter of local policy:\
    \ in some cases, it will be\n   statically configured to do so at all times with\
    \ a \"static discard\"\n   route.  In other cases, it may be configured to only\
    \ generate the\n   aggregate prefix if at least one of the components of the aggregate\n\
    \   is learned via BGP.\n   An ALT-Router must not generate an aggregate that\
    \ includes a\n   non-LISP-speaking hole unless it can be configured to return\
    \ a\n   Negative Map-Reply with action=\"Natively-Forward\" (see [RFC6830]) if\n\
    \   it receives an ALT Datagram that matches that hole.  If it receives\n   an\
    \ ALT Datagram that matches a LISP-speaking hole that is currently\n   not reachable,\
    \ it should return a Negative Map-Reply with\n   action=\"drop\".  Negative Map-Replies\
    \ should be returned with a short\n   TTL, as specified in [RFC6833].  Note that\
    \ an off-the-shelf,\n   non-LISP-speaking router configured as an aggregating\
    \ ALT-Router\n   cannot send Negative Map-Replies, so such a router must never\n\
    \   originate an aggregate that includes a non-LISP-speaking hole.\n   This implies\
    \ that two ALT-Routers that share an overlapping set of\n   prefixes must exchange\
    \ those prefixes if either is to generate and\n   export a covering aggregate\
    \ for those prefixes.  It also implies that\n   an ETR that connects to the ALT\
    \ using BGP must maintain BGP sessions\n   with all of the ALT-Routers that are\
    \ configured to originate an\n   aggregate that covers that prefix and that each\
    \ of those ALT-Routers\n   must be explicitly configured to know the set of EID-Prefixes\
    \ that\n   make up any aggregate that it originates.  See also [RFC6833] for an\n\
    \   example of other ways that prefix origin consistency and aggregation\n   can\
    \ be maintained.\n   As an example, consider ETRs that are originating EID-Prefixes\
    \ for\n   10.1.0.0/24, 10.1.64.0/24, 10.1.128.0/24, and 10.1.192.0/24.  An\n \
    \  ALT-Router should only be configured to generate an aggregate for\n   10.1.0.0/16\
    \ if it has BGP sessions configured with all of these ETRs,\n   in other words,\
    \ only if it has sufficient knowledge about the state\n   of those prefixes to\
    \ summarize them.  If the Router originating\n   10.1.0.0/16 receives an ALT Datagram\
    \ destined for 10.1.77.88, a\n   non-LISP destination covered by the aggregate,\
    \ it returns a Negative\n   Map-Reply with action \"Natively-Forward\".  If it\
    \ receives an ALT\n   Datagram destined for 10.1.128.199 but the configured LISP\
    \ prefix\n   10.1.128.0/24 is unreachable, it returns a Negative Map-Reply with\n\
    \   action \"drop\".\n   Note: Much is currently uncertain about the best way\
    \ to build the ALT\n   network; as testing and prototype deployment proceed, a\
    \ guide to how\n   to best build the ALT network will be developed.\n"
- title: 4.3.  Use of GRE and BGP between LISP-ALT Routers
  contents:
  - "4.3.  Use of GRE and BGP between LISP-ALT Routers\n   The ALT network is built\
    \ using GRE tunnels between ALT-Routers.  BGP\n   sessions are configured over\
    \ those tunnels, with each ALT-Router\n   acting as a separate Autonomous System\
    \ (AS) \"hop\" in a Path Vector\n   for BGP.  For the purposes of LISP+ALT, the\
    \ AS-path is used solely as\n   a shortest-path determination and loop-avoidance\
    \ mechanism.  Because\n   all next hops are on tunnel interfaces, no IGP is required\
    \ to resolve\n   those next hops to exit interfaces.\n   LISP+ALT's use of GRE\
    \ and BGP facilitates deployment and operation of\n   LISP because no new protocols\
    \ need to be defined, implemented, or\n   used on the overlay topology; existing\
    \ BGP/GRE tools and operational\n   expertise are also re-used.  Tunnel address\
    \ assignment is also easy:\n   since the addresses on an ALT tunnel are only used\
    \ by the pair of\n   routers connected to the tunnel, the only requirement of\
    \ the IP\n   addresses used to establish that tunnel is that the attached routers\n\
    \   be reachable by each other; any addressing plan, including private\n   addressing,\
    \ can therefore be used for ALT tunnels.\n"
- title: 5.  EID-Prefix Propagation and Map-Request Forwarding
  contents:
  - "5.  EID-Prefix Propagation and Map-Request Forwarding\n   As described in Section\
    \ 8.2, an ITR sends an ALT Datagram to a given\n   EID-to-RLOC mapping.  The ALT\
    \ provides the infrastructure that allows\n   these requests to reach the authoritative\
    \ ETR.\n   Note that under normal circumstances Map-Replies are not sent over\n\
    \   the ALT; an ETR sends a Map-Reply to one of the ITR RLOCs learned\n   from\
    \ the original Map-Request.  See Sections 6.1.2 and 6.2 of\n   [RFC6830] for more\
    \ information on the use of the Map-Request 'ITR\n   RLOC Address' field.  Keep\
    \ in mind that the 'ITR RLOC Address' field\n   supports multiple RLOCs in multiple\
    \ address families, so a Map-Reply\n   sent in response to a Map-Request is not\
    \ necessarily sent back to the\n   Map-Request RLOC source.\n   There may be scenarios,\
    \ perhaps to encourage caching of EID-to-RLOC\n   mappings by ALT-Routers, where\
    \ Map-Replies could be sent over the ALT\n   or where a \"first-hop\" ALT-Router\
    \ might modify the originating RLOC\n   on a Map-Request received from an ITR\
    \ to force the Map-Reply to be\n   returned to the \"first-hop\" ALT-Router. \
    \ These cases will not be\n   supported by initial LISP+ALT implementations but\
    \ may be subject to\n   future experimentation.\n   ALT-Routers propagate path\
    \ information via BGP ([RFC4271]) that is\n   used by ITRs to send ALT Datagrams\
    \ toward the appropriate ETR for\n   each EID-Prefix.  BGP is run on the inter-ALT-Router\
    \ links, and\n   possibly between an edge (\"last-hop\") ALT-Router and an ETR\
    \ or\n   between an edge (\"first-hop\") ALT-Router and an ITR.  The ALT BGP RIB\n\
    \   consists of aggregated EID-Prefixes and their next hops toward the\n   authoritative\
    \ ETR for that EID-Prefix.\n"
- title: 5.1.  Changes to ITR Behavior with LISP+ALT
  contents:
  - "5.1.  Changes to ITR Behavior with LISP+ALT\n   As previously described, an ITR\
    \ will usually use the Map-Resolver\n   interface and will send its Map Requests\
    \ to a Map-Resolver.  When an\n   ITR instead connects via tunnels and BGP to\
    \ the ALT, it sends ALT\n   Datagrams to one of its \"upstream\" ALT-Routers;\
    \ these are sent only\n   to obtain new EID-to-RLOC mappings -- RLOC probe and\
    \ cache TTL\n   refresh Map-Requests are not sent on the ALT.  As in basic LISP,\
    \ it\n   should use one of its RLOCs as the source address of these queries;\n\
    \   it should not use a tunnel interface as the source address, as doing\n   so\
    \ will cause replies to be forwarded over the tunneled topology and\n   may be\
    \ problematic if the tunnel interface address is not routed\n   throughout the\
    \ ALT.  If the ITR is running BGP with the LISP-ALT\n   Router(s), it selects\
    \ the appropriate ALT-Router based on the BGP\n   information received.  If it\
    \ is not running BGP, it uses a statically\n   configured ALT Default Route to\
    \ select an ALT-Router.\n"
- title: 5.2.  Changes to ETR Behavior with LISP+ALT
  contents:
  - "5.2.  Changes to ETR Behavior with LISP+ALT\n   As previously described, an ETR\
    \ will usually use the Map-Server\n   interface (see [RFC6833]) and will register\
    \ its EID-Prefixes with its\n   configured Map-Servers.  When an ETR instead connects\
    \ using BGP to\n   one or more ALT-Routers, it announces its EID-Prefix(es) to\
    \ those\n   ALT-Routers.\n   As documented in [RFC6830], when an ETR generates\
    \ a Map-Reply message\n   to return to a querying ITR, it sets the outer-header\
    \ IP destination\n   address to one of the requesting ITR's RLOCs so that the\
    \ Map-Reply\n   will be sent on the underlying Internet topology, not on the ALT;\n\
    \   this avoids any latency penalty (or \"stretch\") that might be incurred\n\
    \   by sending the Map-Reply via the ALT, reduces load on the ALT, and\n   ensures\
    \ that the Map-Reply can be routed even if the original ITR\n   does not have\
    \ an ALT-routed EID.  For details on how an ETR selects\n   which ITR RLOC to\
    \ use, see Section 6.1.5 of [RFC6830].\n"
- title: 5.3.  ALT Datagram Forwarding Failure
  contents:
  - "5.3.  ALT Datagram Forwarding Failure\n   Intermediate ALT-Routers forward ALT\
    \ Datagrams using normal,\n   hop-by-hop routing on the ALT overlay network. \
    \ Should an ALT-Router\n   not be able to forward an ALT Datagram, whether due\
    \ to an unreachable\n   next hop, TTL exceeded, or other problem, it has several\
    \ choices:\n   o  If the ALT-Router understands LISP, as is the case for a\n \
    \     Map-Resolver or Map-Server, it may respond to a forwarding failure\n   \
    \   by returning a Negative Map-Reply, as described in Section 4.2 and\n     \
    \ [RFC6833].\n   o  If the ALT-Router does not understand LISP, it may attempt\
    \ to\n      return an ICMP message to the source IP address of the packet that\n\
    \      cannot be forwarded.  Since the source address is an RLOC, an\n      ALT-Router\
    \ would send this ICMP message using \"native\" Internet\n      connectivity,\
    \ not via the ALT overlay.\n   o  A non-LISP-capable ALT-Router may also choose\
    \ to silently drop the\n      non-forwardable ALT Datagram.\n   [RFC6830] and\
    \ [RFC6833] define how the source of an ALT Datagram\n   should handle each of\
    \ these cases.  The last case, where an ALT\n   Datagram is silently discarded,\
    \ will generally result in several\n   retransmissions by the source, followed\
    \ by treating the destination\n   as unreachable via LISP when no Map-Reply is\
    \ received.  If a problem\n   on the ALT is severe enough to prevent ALT Datagrams\
    \ from being\n   delivered to a specific EID, this is probably the only sensible\
    \ way\n   to handle this case.\n   Note that the use of GRE tunnels should prevent\
    \ MTU problems from\n   ever occurring on the ALT; an ALT Datagram that exceeds\
    \ an\n   intermediate MTU will be fragmented at that point and will be\n   reassembled\
    \ by the target of the GRE tunnel.\n"
- title: 6.  BGP Configuration and Protocol Considerations
  contents:
  - '6.  BGP Configuration and Protocol Considerations

    '
- title: 6.1.  Autonomous System Numbers (ASNs) in LISP+ALT
  contents:
  - "6.1.  Autonomous System Numbers (ASNs) in LISP+ALT\n   The primary use of BGP\
    \ today is to define the global Internet routing\n   topology in terms of its\
    \ participants, known as Autonomous Systems.\n   LISP+ALT specifies the use of\
    \ BGP to create a global overlay network\n   (the ALT) for finding EID-to-RLOC\
    \ mappings.  While related to the\n   global routing database, the ALT serves\
    \ a very different purpose and\n   is organized into a very different hierarchy.\
    \  Because LISP+ALT does\n   use BGP, however, it uses ASNs in the paths that\
    \ are propagated among\n   ALT-Routers.  To avoid confusion, LISP+ALT should use\
    \ newly assigned\n   AS numbers that are unrelated to the ASNs used by the global\
    \ routing\n   system.  Exactly how this new space will be assigned and managed\
    \ will\n   be determined during the deployment of LISP+ALT.\n   Note that the\
    \ ALT-Routers that make up the \"core\" of the ALT will not\n   be associated\
    \ with any existing core-Internet ASN because the ALT\n   topology is completely\
    \ separate from, and independent of, the global\n   Internet routing system.\n"
- title: 6.2.  Subsequent Address Family Identifier (SAFI) for LISP+ALT
  contents:
  - "6.2.  Subsequent Address Family Identifier (SAFI) for LISP+ALT\n   As defined\
    \ by this document, LISP+ALT may be implemented using BGP\n   without modification.\
    \  Given the fundamental operational difference\n   between propagating global\
    \ Internet routing information (the current\n   dominant use of BGP) and creating\
    \ an overlay network for finding\n   EID-to-RLOC mappings (the use of BGP as proposed\
    \ by this document),\n   it may be desirable to assign a new SAFI [RFC4760] to\
    \ prevent\n   operational confusion and difficulties, including the inadvertent\n\
    \   leaking of information from one domain to the other.  The use of a\n   separate\
    \ SAFI would make it easier to debug many operational problems\n   but would come\
    \ at a significant cost: unmodified, off-the-shelf\n   routers that do not understand\
    \ the new SAFI could not be used to\n   build any part of the ALT network.  At\
    \ present, this document does\n   not request the assignment of a new SAFI; additional\
    \ experimentation\n   may suggest the need for one in the future.\n"
- title: 7.  EID-Prefix Aggregation
  contents:
  - "7.  EID-Prefix Aggregation\n   To facilitate EID-Prefix aggregation, the ALT\
    \ BGP topology is\n   provisioned in a hierarchical manner; the fact that all\
    \ inter-node\n   links are tunnels means that topology can be constrained to follow\n\
    \   the EID-Prefix assignment hierarchy.  Redundant links are provisioned\n  \
    \ to compensate for node and link failures.  A basic assumption is that\n   as\
    \ long as the routers are up and running, the underlying Internet\n   will provide\
    \ alternative routes to maintain tunnel and BGP\n   connectivity among ALT-Routers.\n\
    \   Note that, as mentioned in Section 4.2, the use of BGP by LISP+ALT\n   requires\
    \ that information only be aggregated where all active more-\n   specific prefixes\
    \ of a generated aggregate prefix are known.  This is\n   no different than the\
    \ way that BGP route aggregation works in the\n   existing global routing system:\
    \ a service provider only generates an\n   aggregate route if it is configured\
    \ to learn all prefixes that make\n   up that aggregate.\n"
- title: 7.1.  Stability of the ALT
  contents:
  - "7.1.  Stability of the ALT\n   It is worth noting that LISP+ALT does not directly\
    \ propagate\n   EID-to-RLOC mappings.  What it does is provide a mechanism for\
    \ an ITR\n   to communicate with the ETR that holds the mapping for a particular\n\
    \   EID-Prefix.  This distinction is important when considering the\n   stability\
    \ of BGP on the ALT network as compared to the global routing\n   system.  It\
    \ also has implications for how site-specific EID-Prefix\n   information may be\
    \ used by LISP but not propagated by LISP+ALT (see\n   Section 7.2 below).\n \
    \  RLOC prefixes are not propagated through the ALT, so their\n   reachability\
    \ is not determined through the use of LISP+ALT.  Instead,\n   reachability of\
    \ RLOCs is learned through the LISP ITR-ETR exchange.\n   This means that link\
    \ failures or other service disruptions that may\n   cause the reachability of\
    \ an RLOC to change are not known to the ALT.\n   Changes to the presence of an\
    \ EID-Prefix on the ALT occur much less\n   frequently: only at subscription time\
    \ or in the event of a failure of\n   the ALT infrastructure itself.  This means\
    \ that \"flapping\" (frequent\n   BGP updates and withdrawals due to prefix state\
    \ changes) is not\n   likely and mapping information cannot become \"stale\" due\
    \ to slow\n   propagation through the ALT BGP mesh.\n"
- title: 7.2.  Traffic Engineering Using LISP
  contents:
  - "7.2.  Traffic Engineering Using LISP\n   Since an ITR learns an EID-to-RLOC mapping\
    \ directly from the ETR that\n   owns it, it is possible to perform site-to-site\
    \ Traffic Engineering\n   by setting the preference and/or weight fields, and\
    \ by including\n   more-specific EID-to-RLOC information in Map-Reply messages.\n\
    \   This is a powerful mechanism that can conceivably replace the\n   traditional\
    \ practice of routing prefix deaggregation for Traffic\n   Engineering purposes.\
    \  Rather than propagating more-specific\n   information into the global routing\
    \ system for local or regional\n   optimization of traffic flows, such more-specific\
    \ information can be\n   exchanged, through LISP (not LISP+ALT), on an as-needed\
    \ basis between\n   only those ITRs/ETRs (and, thus, site pairs) that need it.\
    \  Such an\n   exchange of \"more-specifics\" between sites facilitates Traffic\n\
    \   Engineering by allowing richer and more fine-grained policies to be\n   applied\
    \ without advertising additional prefixes into either the ALT\n   or the global\
    \ routing system.\n   Note that these new Traffic Engineering capabilities are\
    \ an attribute\n   of LISP and are not specific to LISP+ALT; discussion is included\
    \ here\n   because the BGP-based global routing system has traditionally used\n\
    \   propagation of more-specific routes as a crude form of Traffic\n   Engineering.\n"
- title: 7.3.  Edge Aggregation and Dampening
  contents:
  - "7.3.  Edge Aggregation and Dampening\n   Normal BGP best common practices apply\
    \ to the ALT network.  In\n   particular, first-hop ALT-Routers will aggregate\
    \ EID-Prefixes and\n   dampen changes to them in the face of excessive updates.\
    \  Since\n   EID-Prefix assignments are not expected to change as frequently as\n\
    \   global routing BGP prefix reachability, such dampening should be very\n  \
    \ rare and might be worthy of logging as an exceptional event.  It is\n   again\
    \ worth noting that the ALT carries only EID-Prefixes, used to\n   construct a\
    \ BGP path to each ETR (or Map-Server) that originates each\n   prefix; the ALT\
    \ does not carry reachability information about RLOCs.\n   In addition, EID-Prefix\
    \ information may be aggregated as the topology\n   and address assignment hierarchy\
    \ allow.  Since the topology is all\n   tunneled and can be modified as needed,\
    \ reasonably good aggregation\n   should be possible.  In addition, since most\
    \ ETRs are expected to\n   connect to the ALT using the Map-Server interface,\
    \ Map-Servers will\n   implement a natural \"edge\" for the ALT where dampening\
    \ and\n   aggregation can be applied.  For these reasons, the set of prefix\n\
    \   information on the ALT can be expected to be both better aggregated\n   and\
    \ considerably less volatile than the actual EID-to-RLOC mappings.\n"
- title: 7.4.  EID Assignment Flexibility vs. ALT Scaling
  contents:
  - "7.4.  EID Assignment Flexibility vs. ALT Scaling\n   There are major open questions\
    \ regarding how the ALT will be deployed\n   and what organization(s) will operate\
    \ it.  In a simple,\n   non-distributed world, centralized administration of EID-Prefix\n\
    \   assignment and ALT network design would facilitate a well-aggregated\n   ALT\
    \ routing system.  Business and other realities will likely result\n   in a more\
    \ complex, distributed system involving multiple levels of\n   prefix delegation,\
    \ multiple operators of parts of the ALT\n   infrastructure, and a combination\
    \ of competition and cooperation\n   among the participants.  In addition, the\
    \ re-use of existing IP\n   address assignments, both Provider-Independent (\"\
    PI\") and Provider-\n   Assigned (\"PA\"), to avoid renumbering when sites transition\
    \ to LISP\n   will further complicate the processes of building and operating\n\
    \   the ALT.\n   A number of conflicting considerations need to be kept in mind\
    \ when\n   designing and building the ALT.  Among them are:\n   1.  Target ALT\
    \ routing state size and level of aggregation.  As\n       described in Section\
    \ 7.1, the ALT should not suffer from the same\n       performance constraints\
    \ or stability issues as does the Internet\n       global routing system, so some\
    \ reasonable level of deaggregation\n       and an increased number of EID-Prefixes\
    \ beyond what might be\n       considered ideal should be acceptable.  That said,\
    \ measures, such\n       as tunnel rehoming to preserve aggregation when sites\
    \ move from\n       one mapping provider to another and implementing aggregation\
    \ at\n       multiple levels in the hierarchy to collapse deaggregation at\n \
    \      lower levels, should be taken to reduce unnecessary explosion of\n    \
    \   ALT routing state.\n   2.  Number of operators of parts of the ALT and how\
    \ they will be\n       organized (hierarchical delegation vs. shared administration).\n\
    \       This will determine not only how EID-Prefixes are assigned but\n     \
    \  also how tunnels are configured and how EID-Prefixes can be\n       aggregated\
    \ between different parts of the ALT.\n   3.  Number of connections between different\
    \ parts of the ALT.\n       Tradeoffs will need to be made among resilience, performance,\
    \ and\n       placement of aggregation boundaries.\n   4.  EID-Prefix portability\
    \ between competing operators of the ALT\n       infrastructure.  A significant\
    \ benefit for an end site to adopt\n       LISP is the availability of EID space\
    \ that is not tied to a\n       specific connectivity provider; it is important\
    \ to ensure that an\n       end site doesn't trade lock-in to a connectivity provider\
    \ for\n       lock-in to a provider of its EID assignment, ALT connectivity, or\n\
    \       Map-Server facilities.\n   This is, by no means, an exhaustive list.\n\
    \   While resolving these issues is beyond the scope of this document,\n   the\
    \ authors recommend that existing distributed resource structures,\n   such as\
    \ the IANA/Regional Internet Registries and the ICANN/Domain\n   Registrar, be\
    \ carefully considered when designing and deploying the\n   ALT infrastructure.\n"
- title: 8.  Connecting Sites to the ALT Network
  contents:
  - '8.  Connecting Sites to the ALT Network

    '
- title: 8.1.  ETRs Originating Information into the ALT
  contents:
  - "8.1.  ETRs Originating Information into the ALT\n   EID-Prefix information is\
    \ originated into the ALT by three different\n   mechanisms:\n   Map-Server: \
    \ In most cases, a site will configure its ETR(s) to\n      register with one\
    \ or more Map-Servers (see [RFC6833]) and does not\n      participate directly\
    \ in the ALT.\n   BGP:  For sites requiring complex control over their EID-Prefix\n\
    \      origination into the ALT, an ETR may connect to the LISP+ALT\n      overlay\
    \ network by running BGP to one or more ALT-Routers over\n      tunnel(s).  The\
    \ ETR advertises reachability for its EID-Prefixes\n      over these BGP connection(s).\
    \  The edge ALT-Router(s) that\n      receive(s) these prefixes then propagate(s)\
    \ them into the ALT.\n      Here, the ETR is simply a BGP peer of ALT-Router(s)\
    \ at the edge of\n      the ALT.  Where possible, an ALT-Router that receives\
    \ EID-Prefixes\n      from an ETR via BGP should aggregate that information.\n\
    \   Configuration:  One or more ALT-Routers may be configured to\n      originate\
    \ an EID-Prefix on behalf of the non-BGP-speaking ETR that\n      is authoritative\
    \ for a prefix.  As in the case above, the ETR is\n      connected to ALT-Router(s)\
    \ using GRE tunnel(s), but rather than\n      BGP being used, the ALT-Router(s)\
    \ are configured with what are in\n      effect \"static routes\" for the EID-Prefixes\
    \ \"owned\" by the ETR.\n      The GRE tunnel is used to route Map-Requests to\
    \ the ETR.\n   Note:  In all cases, an ETR may register to multiple Map-Servers\
    \ or\n      connect to multiple ALT-Routers for the following reasons:\n     \
    \ *  redundancy, so that a particular ETR is still reachable even if\n       \
    \  one path or tunnel is unavailable.\n      *  to connect to different parts\
    \ of the ALT hierarchy if the ETR\n         \"owns\" multiple EID-to-RLOC mappings\
    \ for EID-Prefixes that\n         cannot be aggregated by the same ALT-Router\
    \ (i.e., are not\n         topologically \"close\" to each other in the ALT).\n"
- title: 8.2.  ITRs Using the ALT
  contents:
  - "8.2.  ITRs Using the ALT\n   In the common configuration, an ITR does not need\
    \ to know anything\n   about the ALT, since it sends Map-Requests to one of its\
    \ configured\n   Map-Resolvers (see [RFC6833]).  There are two exceptional cases:\n\
    \   Static default:  If a Map-Resolver is not available but an ITR is\n      adjacent\
    \ to an ALT-Router (either over a common subnet or through\n      the use of a\
    \ tunnel), it can use an ALT Default Route to cause all\n      ALT Datagrams to\
    \ be sent to that ALT-Router.  This case is\n      expected to be rare.\n   Connection\
    \ to ALT:  A site with complex Internet connectivity may\n      need more fine-grained\
    \ distinction between traffic to LISP-capable\n      and non-LISP-capable sites.\
    \  Such a site may configure each of its\n      ITRs to connect directly to the\
    \ ALT, using a tunnel and BGP\n      connection.  In this case, the ITR will receive\
    \ EID-Prefix routes\n      from its BGP connection to the ALT-Router and will\
    \ LISP-\n      encapsulate and send ALT Datagrams through the tunnel to the\n\
    \      ALT-Router.  Traffic to other destinations may be forwarded\n      (without\
    \ LISP encapsulation) to non-LISP next-hop routers that the\n      ITR knows.\n\
    \      In general, an ITR that connects to the ALT does so only to\n      ALT-Routers\
    \ at the \"edge\" of the ALT (typically two for\n      redundancy).  There may,\
    \ though, be situations where an ITR would\n      connect to other ALT-Routers\
    \ to receive additional, shorter-path\n      information about a portion of the\
    \ ALT of interest to it.  This\n      can be accomplished by establishing GRE\
    \ tunnels between the ITR\n      and the set of ALT-Routers with the additional\
    \ information.  This\n      is a purely local policy issue between the ITR and\
    \ the ALT-Routers\n      in question.\n   As described in [RFC6833], Map-Resolvers\
    \ do not accept or forward\n   Data-Probes; in the rare scenario that an ITR does\
    \ support and\n   originate Data-Probes, it must do so using one of the exceptional\n\
    \   configurations described above.  Note that the use of Data-Probes is\n   discouraged\
    \ at this time (see Section 3.3).\n"
- title: 9.  Security Considerations
  contents:
  - "9.  Security Considerations\n   LISP+ALT shares many of the security characteristics\
    \ of BGP.  Its\n   security mechanisms are comprised of existing technologies\
    \ in wide\n   operational use today, so securing the ALT should be mostly a matter\n\
    \   of applying the same technology that is used to secure the BGP-based\n   global\
    \ routing system (see Section 9.3 below).\n"
- title: 9.1.  Apparent LISP+ALT Vulnerabilities
  contents:
  - "9.1.  Apparent LISP+ALT Vulnerabilities\n   This section briefly lists the known\
    \ potential vulnerabilities of\n   LISP+ALT.\n   Mapping integrity:  Potential\
    \ for an attacker to insert bogus\n      mappings to black-hole (create a DoS\
    \ attack) or intercept LISP\n      data-plane packets.\n   ALT-Router availability:\
    \  Can an attacker DoS the ALT-Routers\n      connected to a given ETR?  If a\
    \ site's ETR cannot advertise its\n      EID-to-RLOC mappings, the site is essentially\
    \ unavailable.\n   ITR mapping/resources:  Can an attacker force an ITR or ALT-Router\
    \ to\n      drop legitimate mapping requests by flooding it with random\n    \
    \  destinations for which it will generate large numbers of\n      Map-Requests\
    \ and fill its map-cache?  Further study is required to\n      see the impact\
    \ of admission control on the overlay network.\n   EID Map-Request exploits for\
    \ reconnaissance:  Can an attacker learn\n      about a LISP site's TE policy\
    \ by sending legitimate mapping\n      requests and then observing the RLOC mapping\
    \ replies?  Is this\n      information useful in attacking or subverting peer\
    \ relationships?\n      Note that any public LISP mapping database will have similar\n\
    \      data-plane reconnaissance issues.\n   Scaling of ALT-Router resources:\
    \  Paths through the ALT may be of\n      lesser bandwidth than more \"direct\"\
    \ paths; this may make them more\n      prone to high-volume DoS attacks.  For\
    \ this reason, all components\n      of the ALT (ETRs and ALT-Routers) should\
    \ be prepared to rate-limit\n      traffic (ALT Datagrams) that could be received\
    \ across the ALT.\n   UDP Map-Reply from ETR:  Since Map-Replies are sent directly\
    \ from the\n      ETR to the ITR's RLOC, the ITR's RLOC may be vulnerable to various\n\
    \      types of DoS attacks (this is a general property of LISP, not a\n     \
    \ LISP+ALT vulnerability).\n   More-specific prefix leakage:  Because EID-Prefixes\
    \ on the ALT are\n      expected to be fairly well-aggregated and EID-Prefixes\
    \ propagated\n      out to the global Internet (see [RFC6832]) much more so,\n\
    \      accidental leaking or malicious advertisement of an EID-Prefix\n      into\
    \ the global routing system could cause traffic redirection\n      away from a\
    \ LISP site.  This is not really a new problem, though,\n      and its solution\
    \ can only be achieved by much more strict prefix\n      filtering and authentication\
    \ on the global routing system.\n      Section 9.3 describes an existing approach\
    \ to solving this\n      problem.\n"
- title: 9.2.  Survey of LISP+ALT Security Mechanisms
  contents:
  - "9.2.  Survey of LISP+ALT Security Mechanisms\n   Explicit peering:  The devices\
    \ themselves can prioritize incoming\n      packets as well as potentially do\
    \ key checks in hardware to\n      protect the control plane.\n   Use of TCP to\
    \ connect elements:  This makes it difficult for third\n      parties to inject\
    \ packets.\n   Use of HMAC to protect BGP/TCP connections:  Hashed Message\n \
    \     Authentication Code (HMAC) [RFC5925] is used to verify the\n      integrity\
    \ and authenticity of TCP connections used to exchange BGP\n      messages, making\
    \ it nearly impossible for third-party devices to\n      either insert or modify\
    \ messages.\n   Message sequence numbers and nonce values in messages:  This allows\n\
    \      an ITR to verify that the Map-Reply from an ETR is in response to\n   \
    \   a Map-Request originated by that ITR (this is a general property\n      of\
    \ LISP; LISP+ALT does not change this behavior).\n"
- title: 9.3.  Use of Additional BGP Security Mechanisms
  contents:
  - "9.3.  Use of Additional BGP Security Mechanisms\n   LISP+ALT's use of BGP allows\
    \ it to take advantage of BGP security\n   features designed for existing Internet\
    \ BGP use.  This means that\n   LISP+ALT can and should use technology developed\
    \ for adding security\n   to BGP (in the IETF SIDR working group or elsewhere)\
    \ to provide\n   authentication of EID-Prefix origination and EID-to-RLOC mappings.\n"
- title: 10.  Acknowledgments
  contents:
  - "10.  Acknowledgments\n   The authors would like to specially thank J. Noel Chiappa,\
    \ who was a\n   key contributor to the design of the Content distribution Overlay\n\
    \   Network Service for LISP (LISP-CONS) mapping database (many ideas\n   from\
    \ which made their way into LISP+ALT) and who has continued to\n   provide invaluable\
    \ insight as the LISP effort has evolved.  Others\n   who have provided valuable\
    \ contributions include John Zwiebel, Hannu\n   Flinck, Amit Jain, John Scudder,\
    \ Scott Brim, and Jari Arkko.\n"
- title: 11.  References
  contents:
  - '11.  References

    '
- title: 11.1.  Normative References
  contents:
  - "11.1.  Normative References\n   [RFC2784]  Farinacci, D., Li, T., Hanks, S.,\
    \ Meyer, D., and P.\n              Traina, \"Generic Routing Encapsulation (GRE)\"\
    , RFC 2784,\n              March 2000.\n   [RFC4271]  Rekhter, Y., Li, T., and\
    \ S. Hares, \"A Border Gateway\n              Protocol 4 (BGP-4)\", RFC 4271,\
    \ January 2006.\n   [RFC4632]  Fuller, V. and T. Li, \"Classless Inter-domain\
    \ Routing\n              (CIDR): The Internet Address Assignment and Aggregation\n\
    \              Plan\", BCP 122, RFC 4632, August 2006.\n   [RFC4760]  Bates, T.,\
    \ Chandra, R., Katz, D., and Y. Rekhter,\n              \"Multiprotocol Extensions\
    \ for BGP-4\", RFC 4760,\n              January 2007.\n   [RFC6830]  Farinacci,\
    \ D., Fuller, V., Meyer, D., and D. Lewis, \"The\n              Locator/ID Separation\
    \ Protocol (LISP)\", RFC 6830,\n              January 2013.\n   [RFC6833]  Fuller,\
    \ V. and D. Farinacci, \"Locator/ID Separation\n              Protocol (LISP)\
    \ Map-Server Interface\", RFC 6833,\n              January 2013.\n"
- title: 11.2.  Informative References
  contents:
  - "11.2.  Informative References\n   [RFC5925]  Touch, J., Mankin, A., and R. Bonica,\
    \ \"The TCP\n              Authentication Option\", RFC 5925, June 2010.\n   [RFC6832]\
    \  Lewis, D., Meyer, D., Farinacci, D., and V. Fuller,\n              \"Interworking\
    \ between Locator/ID Separation Protocol\n              (LISP) and Non-LISP Sites\"\
    , RFC 6832, January 2013.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Vince Fuller\n   EMail: vaf@vaf.net\n   Dino Farinacci\n\
    \   Cisco Systems\n   Tasman Drive\n   San Jose, CA  95134\n   USA\n   EMail:\
    \ farinacci@gmail.com\n   Dave Meyer\n   Cisco Systems\n   Tasman Drive\n   San\
    \ Jose, CA  95134\n   USA\n   EMail: dmm@1-4-5.net\n   Darrel Lewis\n   Cisco\
    \ Systems\n   Tasman Drive\n   San Jose, CA  95134\n   USA\n   EMail: darlewis@cisco.com\n"
