- title: __initial_text__
  contents:
  - '        Carrier-Grade NAT (CGN) Deployment with BGP/MPLS IP VPNs

    '
- title: Abstract
  contents:
  - "Abstract\n   This document specifies a framework to integrate a Network Address\n\
    \   Translation (NAT) layer into an operator's network to function as a\n   Carrier-Grade\
    \ NAT (also known as CGN or Large-Scale NAT).  The CGN\n   infrastructure will\
    \ often form a NAT444 environment as the subscriber\n   home network will likely\
    \ also maintain a subscriber-side NAT\n   function.  Exhaustion of the IPv4 address\
    \ pool is a major driver\n   compelling some operators to implement CGN.  Although\
    \ operators may\n   wish to deploy IPv6 to strategically overcome IPv4 exhaustion,\
    \ near-\n   term needs may not be satisfied with an IPv6 deployment alone.  This\n\
    \   document provides a practical integration model that allows the CGN\n   platform\
    \ to be integrated into the network, meeting the connectivity\n   needs of the\
    \ subscriber while being mindful of not disrupting\n   existing services and meeting\
    \ the technical challenges that CGN\n   brings.  The model included in this document\
    \ utilizes BGP/MPLS IP\n   VPNs, which allow for virtual routing separation, helping\
    \ ease the\n   CGN's impact on the network.  This document does not intend to\
    \ defend\n   the merits of CGN.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc7289.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n\
    \      1.1. Acronyms and Terms .........................................4\n  \
    \ 2. Existing Network Considerations .................................5\n   3.\
    \ CGN Network Deployment Requirements .............................5\n      3.1.\
    \ Centralized versus Distributed Deployment ..................6\n      3.2. CGN\
    \ and Traditional IPv4 Service Coexistence ...............7\n      3.3. CGN Bypass\
    \ .................................................7\n      3.4. Routing Plane\
    \ Separation ...................................8\n      3.5. Flexible Deployment\
    \ Options ................................8\n      3.6. IPv4 Overlap Space .........................................9\n\
    \      3.7. Transactional Logging for CGN Systems ......................9\n  \
    \    3.8. Base CGN Requirements ......................................9\n   4.\
    \ BGP/MPLS IP VPN-Based CGN Framework .............................9\n      4.1.\
    \ Service Separation ........................................11\n      4.2. Internal\
    \ Service Delivery .................................12\n           4.2.1. Dual-Stack\
    \ Operation ...............................14\n      4.3. Deployment Flexibility\
    \ ....................................16\n      4.4. Comparison of BGP/MPLS IP\
    \ VPN Option versus Other\n           CGN Attachment Options ....................................16\n\
    \           4.4.1. Policy-Based Routing ...............................16\n  \
    \         4.4.2. Traffic Engineering ................................17\n    \
    \       4.4.3. Multiple Routing Topologies ........................17\n      4.5.\
    \ Multicast Considerations ..................................17\n   5. Experiences\
    \ ....................................................17\n      5.1. Basic Integration\
    \ and Requirements Support ................17\n      5.2. Performance ...............................................18\n\
    \   6. Security Considerations ........................................18\n  \
    \ 7. BGP/MPLS IP VPN CGN Framework Discussion .......................18\n   8.\
    \ Acknowledgements ...............................................19\n   9. References\
    \ .....................................................19\n      9.1. Normative\
    \ Reference .......................................19\n      9.2. Informative\
    \ References ....................................19\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Operators are faced with near-term IPv4 address-exhaustion\n\
    \   challenges.  Many operators may not have a sufficient amount of IPv4\n   addresses\
    \ in the future to satisfy the needs of their growing\n   subscriber base.  This\
    \ challenge may also be present before or during\n   an active transition to IPv6,\
    \ somewhat complicating the overall\n   problem space.\n   To face this challenge,\
    \ operators may need to deploy CGN (Carrier-\n   Grade NAT) as described in [RFC6888]\
    \ to help extend the connectivity\n   matrix once IPv4 address caches run out\
    \ on the local operator.  CGN\n   deployments will most often be added into operator\
    \ networks that\n   already have active IPv4 and/or IPv6 services.\n   The addition\
    \ of the CGN introduces a translation layer that is\n   controlled and administered\
    \ by an operator and that should be added\n   in a manner that minimizes disruption\
    \ to existing services.  The CGN\n   system addition may also include interworking\
    \ in a dual-stack\n   environment where the IPv4 path requires translation.\n\
    \   This document shows how BGP/MPLS IP VPNs as described in [RFC4364]\n   can\
    \ be used to integrate the CGN infrastructure solving key\n   integration challenges\
    \ faced by the operator.  This model has also\n   been tested and validated in\
    \ real production-network models and\n   allows fluid operation with existing\
    \ IPv4 and IPv6 services.\n"
- title: 1.1.  Acronyms and Terms
  contents:
  - "1.1.  Acronyms and Terms\n   Acronyms and terms used in this document are defined\
    \ in the list\n   below.\n      CGN - Carrier-Grade NAT\n      DOCSIS - Data Over\
    \ Cable Service Interface Specification\n      CMTS - Cable Modem Termination\
    \ System\n      DSL - Digital Subscriber Line\n      BRAS - Broadband Remote Access\
    \ Server\n      GGSN - Gateway GPRS Support Node\n      GPRS - General Packet\
    \ Radio Service\n      ASN-GW - Access Service Network Gateway\n      GRT - Global\
    \ Routing Table\n      Internal Realm - Addressing and/or network zone between\
    \ the\n      Customer Premises Equipment (CPE) and CGN as specified in\n     \
    \ [RFC6888]\n      External Realm - Public-side network zone and addressing on\
    \ the\n      Internet-facing side of the CGN as specified in [RFC6888]\n"
- title: 2.  Existing Network Considerations
  contents:
  - "2.  Existing Network Considerations\n   The selection of CGN may be made by an\
    \ operator based on a number of\n   factors.  The overall driver to use CGN may\
    \ be the depletion of IPv4\n   address pools, which leaves little to no addresses\
    \ for a growing IPv4\n   service or connection demand growth.  IPv6 is considered\
    \ the\n   strategic answer for IPv4 address depletion; however, the operator\n\
    \   may independently decide that CGN is needed to supplement IPv6 and\n   address\
    \ their particular IPv4 service deployment needs.\n   If the operator has chosen\
    \ to deploy CGN, they should do this in a\n   manner as not to negatively impact\
    \ the existing IPv4 or IPv6\n   subscriber base.  This will include solving a\
    \ number of challenges\n   since subscribers whose connections require translation\
    \ will have\n   network routing and flow needs that are different from legacy\
    \ IPv4\n   connections.\n"
- title: 3.  CGN Network Deployment Requirements
  contents:
  - "3.  CGN Network Deployment Requirements\n   If a service provider is considering\
    \ a CGN deployment with a provider\n   NAT44 function, there are a number of basic\
    \ architectural\n   requirements that are of importance.  Preliminary architectural\n\
    \   requirements may require all or some of those captured in the list\n   below.\
    \  Each of the architectural requirement items listed is\n   expanded upon in\
    \ the following subsections.  It should be noted that\n   architectural CGN requirements\
    \ are additive to base CGN functional\n   requirements contained in [RFC6888].\
    \  The assessed architectural\n   requirements for deployment are:\n   -  Support\
    \ distributed (sparse) and centralized (dense) deployment\n      models.  See\
    \ Section 3.1\n   -  Allow coexistence with traditional IPv4-based deployments,\
    \ which\n      provide global-scoped IPv4 addresses to CPEs.  See Section 3.2.\n\
    \   -  Provide a framework for CGN bypass supporting non-translated flows\n  \
    \    between endpoints within a provider's network.  See Section 3.3.\n   -  Provide\
    \ a routing framework that allows the segmentation of\n      routing control and\
    \ forwarding paths between CGN-mediated and non-\n      CGN-mediated flows.  See\
    \ Section 3.4.\n   -  Provide flexibility for operators to modify their deployments\
    \ over\n      time as translation demands change (connections, bandwidth,\n  \
    \    translation realms/zones, and other vectors).  See Section 3.5.\n   -  Flexibility\
    \ should include integration options for common access\n      technologies such\
    \ as DSL (BRAS), DOCSIS (CMTS), Mobile (GGSN/PGW/\n      ASN-GW), and direct Ethernet.\
    \  See Section 3.5.\n   -  Support deployment modes that allow for IPv4 address\
    \ overlap\n      within the operator's network (between various translation realms\n\
    \      or zones).  See Section 3.6.\n   -  Allow for evolution to future dual-stack\
    \ and IPv4/IPv6 transition\n      deployment modes.  See Section 3.5.\n   -  Transactional\
    \ logging and export capabilities to support auxiliary\n      functions, including\
    \ abuse mitigation.  See Section 3.7.\n   -  Support for stateful connection synchronization\
    \ between\n      translation instances/elements (redundancy).  See Section 3.8.\n\
    \   -  Support for CGN Shared Address Space [RFC6598] deployment modes if\n  \
    \    applicable.  See Section 3.6.\n   -  Allow for the enablement of CGN functionality\
    \ (if required) while\n      still minimizing costs and subscriber impact to the\
    \ best extend\n      possible.  See Section 3.8.\n   Other requirements may be\
    \ assessed on an operator-by-operator basis,\n   but those listed above may be\
    \ considered for any given deployment\n   architecture.\n"
- title: 3.1.  Centralized versus Distributed Deployment
  contents:
  - "3.1.  Centralized versus Distributed Deployment\n   Centralized deployments of\
    \ CGN (longer proximity to end user and/or\n   higher densities of subscribers/connections\
    \ to CGN instances) differ\n   from distributed deployments of CGN (closer proximity\
    \ to end user\n   and/or lower densities of subscribers/connections to CGN instances).\n\
    \   Service providers may likely deploy CGN translation points more\n   centrally\
    \ during initial phases if the early system demand is low.\n   Early deployments\
    \ may see light loading on these new systems since\n   legacy IPv4 services will\
    \ continue to operate with most endpoints\n   using globally unique IPv4 addresses.\
    \  Exceptional cases that may\n   drive heavy usage in initial stages may include\
    \ operators that\n   already translate a significant portion of their IPv4 traffic,\n\
    \   operators that may transition to a CGN implementation from legacy\n   translation\
    \ mechanisms (i.e., traditional firewalls), or operators\n   that build a greenfield\
    \ deployment that may see quick growth in the\n   number of new IPv4 endpoints\
    \ that require Internet connectivity.\n   Over time, some providers may need to\
    \ expand and possibly distribute\n   the translation points if demand for the\
    \ CGN system increases.  The\n   extent of the expansion of the CGN infrastructure\
    \ will depend on\n   factors such as growth in the number of IPv4 endpoints, status\
    \ of\n   IPv6 content on the Internet, and the overall progress globally to an\n\
    \   IPv6-dominate Internet (reducing the demand for IPv4 connectivity).\n   The\
    \ overall demand for CGN resources will probably follow a bell-like\n   curve\
    \ with a growth, peak, and decline period.\n"
- title: 3.2.  CGN and Traditional IPv4 Service Coexistence
  contents:
  - "3.2.  CGN and Traditional IPv4 Service Coexistence\n   Newer CGN-serviced endpoints\
    \ will exist alongside endpoints served by\n   traditional IPv4 globally routed\
    \ addresses.  Operators will need to\n   rationalize these environments since\
    \ both have distinct forwarding\n   needs.  Traditional IPv4 services will likely\
    \ require (or be best\n   served by) direct forwarding toward Internet peering\
    \ points while\n   CGN-mediated flows require access to a translator.  CGN-mediated\
    \ and\n   non-CGN-mediated flows pose two fundamentally different forwarding\n\
    \   needs.\n   The new CGN environments should not negatively impact the existing\n\
    \   IPv4 service base by forcing all traffic to translation-enabled\n   network\
    \ points since many flows do not require translation and this\n   would reduce\
    \ performance of the existing flows.  This would also\n   require massive scaling\
    \ of the CGN, which is a cost and efficiency\n   concern as well.\n   Efficiency\
    \ of traffic flow and forwarding is considered important\n   since networks are\
    \ under considerable demand to deliver more and more\n   bandwidth without the\
    \ luxury of needless inefficiencies that can be\n   introduced with CGN.\n"
- title: 3.3.  CGN Bypass
  contents:
  - "3.3.  CGN Bypass\n   The CGN environment is only needed for flows with translation\n\
    \   requirements.  Many flows that remain within the operator's network\n   do\
    \ not require translation.  Such services include operator-offered\n   DNS services,\
    \ DHCP services, NTP services, web caching, email, news,\n   and other services\
    \ that are local to the operator's network.\n   The operator may want to leverage\
    \ opportunities to offer third\n   parties a platform to also provide services\
    \ without translation.  CGN\n   bypass can be accomplished in many ways, but a\
    \ simplistic,\n   deterministic, and scalable model is preferred.\n"
- title: 3.4.  Routing Plane Separation
  contents:
  - "3.4.  Routing Plane Separation\n   Many operators will want to engineer traffic\
    \ separately for CGN flows\n   versus flows that are part of the more traditional\
    \ IPv4 environment.\n   Many times, the routing of these two major flow types\
    \ differ;\n   therefore, route separation may be required.\n   Routing-plane separation\
    \ also allows the operator to utilize other\n   addressing techniques, which may\
    \ not be feasible on a single routing\n   plane.  Such examples include the use\
    \ of overlapping private address\n   space [RFC1918], Shared Address Space [RFC6598],\
    \ or other IPv4 space\n   that may overlap globally within the operator's network.\n"
- title: 3.5.  Flexible Deployment Options
  contents:
  - "3.5.  Flexible Deployment Options\n   Service providers operate complex routing\
    \ environments and offer a\n   variety of IPv4-based services.  Many operator\
    \ environments utilize\n   distributed external routing infrastructures for transit\
    \ and peering,\n   and these may span large geographical areas.  A CGN solution\
    \ should\n   offer operators the ability to place CGN translation points at\n\
    \   various points within their network.\n   The CGN deployment should also be\
    \ flexible enough to change over time\n   as demand for translation services increase\
    \ or change as noted in\n   [RFC6264].  In turn, the deployment will need to then\
    \ adapt as\n   translation demand decreases due to the transition of flows to\
    \ IPv6.\n   Translation points should be able to be placed and moved with as\n\
    \   little re-engineering effort as possible, minimizing the risks to the\n  \
    \ subscriber base.\n   Depending on hardware capabilities, security practices,\
    \ and IPv4\n   address availability, the translation environments may need to\
    \ be\n   segmented and/or scaled over time to meet organic IPv4 demand growth.\n\
    \   Operators may also want to choose models that support transition to\n   other\
    \ translation environments such as Dual-Stack Lite (DS-Lite)\n   [RFC6333] and/or\
    \ Network Address and Protocol Translation from IPv6\n   Clients to IPv4 Servers\
    \ (NAT64) [RFC6146].  Operators will want to\n   seek deployment models that are\
    \ conducive to meeting these goals as\n   well.\n"
- title: 3.6.  IPv4 Overlap Space
  contents:
  - "3.6.  IPv4 Overlap Space\n   IPv4 address overlap for CGN translation realms\
    \ may be required if\n   insufficient IPv4 addresses are available within the\
    \ operator\n   environment to assign internally unique IPv4 addresses to the CGN\n\
    \   subscriber base.  The CGN deployment should provide mechanisms to\n   manage\
    \ IPv4 overlap if required.\n"
- title: 3.7.  Transactional Logging for CGN Systems
  contents:
  - "3.7.  Transactional Logging for CGN Systems\n   CGNs may require transactional\
    \ logging since the source IP and\n   related transport-protocol information are\
    \ not easily visible to\n   external hosts and system.\n   If needed, CGN systems\
    \ should be able to generate logs that identify\n   internal-realm host parameters\
    \ (i.e., IP/Port) and associate them to\n   external-realm parameters imposed\
    \ by the translator.  The logged\n   information should be stored on the CGN hardware\
    \ and/or exported to\n   another system for processing.  The operator may choose\
    \ to also\n   enable mechanisms to help reduce logging, such as block allocation\
    \ of\n   UDP and TCP ports or deterministic translation options, e.g.,\n   [CGN-DEPLOYMENTS].\n\
    \   Operators may be legally obligated to keep track of translation\n   information.\
    \  The operator may need to utilize their standard\n   practices in handling sensitive\
    \ customer data when storing and/or\n   transporting such data.  Further information\
    \ regarding CGN logging\n   requirements can be found in Section 4 of [RFC6888].\n"
- title: 3.8.  Base CGN Requirements
  contents:
  - "3.8.  Base CGN Requirements\n   Whereas the requirements above represent assessed\
    \ architectural\n   requirements, the CGN platform will also need to meet the\
    \ base CGN\n   requirements of a CGN function.  Base requirements include functions\n\
    \   such as Bulk Port Allocation and other CGN device-specific functions.\n  \
    \ These base CGN platform requirements are captured in [RFC6888].\n"
- title: 4.  BGP/MPLS IP VPN-Based CGN Framework
  contents:
  - "4.  BGP/MPLS IP VPN-Based CGN Framework\n   The BGP/MPLS IP VPN [RFC4364] framework\
    \ for CGN segregates the\n   internal realms within the service-provider space\
    \ into Layer 3 MPLS-\n   based VPNs.  The operator can deploy a single realm for\
    \ all CGN-based\n   flows or can deploy multiple realms based on translation demand\
    \ and\n   other factors such as geographical proximity.  A realm in this model\n\
    \   refers to a \"VPN\", which shares a unique Route Distinguisher / Route\n \
    \  Target (RD/RT) combination, routing plane, and forwarding behaviors.\n   The\
    \ BGP/MPLS IP VPN infrastructure provides control-plane and\n   forwarding separation\
    \ for the traditional IPv4 service environment\n   and CGN environment(s).  The\
    \ separation allows for routing\n   information (such as default routes) to be\
    \ propagated separately for\n   CGN-based and non-CGN-based subscriber flows.\
    \  Traffic can be\n   efficiently routed to the Internet for normal flows and\
    \ routed\n   directly to translators for CGN-mediated flows.  Although many\n\
    \   operators may run a \"default-route-free\" core, IPv4 flows that\n   require\
    \ translation must obviously be routed first to a translator,\n   so a default\
    \ route is acceptable for the internal realms.\n   The physical location of the\
    \ Virtual Routing and Forwarding (VRF)\n   termination point for a BGP/MPLS IP\
    \ VPN-enabled CGN can vary and be\n   located anywhere within the operator's network.\
    \  This model fully\n   virtualizes the translation service from the base IPv4\
    \ forwarding\n   environment that will likely be carrying Internet-bound traffic.\
    \  The\n   base IPv4 environment can continue to service traditional IPv4\n  \
    \ subscriber flows plus post translated CGN flows.\n   Figure 1 provides a view\
    \ of the basic model.  The access node\n   provides CPE access to either the CGN\
    \ VRF or the Global Routing\n   Table (GRT), depending on whether the subscriber\
    \ receives a private\n   or public IP.  Translator-mediated traffic follows an\
    \ MPLS Label\n   Switched Path (LSP) that can be set up dynamically and can span\
    \ one\n   hop or many hops (with no need for complex routing policies).\n   Traffic\
    \ is then forwarded to the translator, which can be an external\n   appliance\
    \ or integrated into the VRF Termination (Provider Edge)\n   router.  Once traffic\
    \ is translated, it is forwarded to the GRT for\n   general Internet forwarding.\
    \  The GRT can also be a separate VRF\n   (Internet access VPN/VRF) should the\
    \ provider choose to implement\n   their Internet-based services in that fashion.\
    \  The translation\n   services are effectively overlaid onto the network but\
    \ are maintained\n   within a separate forwarding and control plane.\n       \
    \            Access Node     VRF Termination        CGN\n                  +-----------+\
    \     +-----------+    +-----------+\n                  |           |     |  \
    \         |    |           |\n          CPE     | +-------+ |     | +-------+\
    \ |    | +-------+ |\n         +----+   | |       | | LSP | |       | | IP | |\
    \       | |\n         |  --+---+-+->VRF--+-+-----+-+->VRF--+-+----+-+->     |\
    \ |\n         +----+   | |       | |     | |       | |    | |       | |\n    \
    \              | +-------+ |     | +-------+ |    | |       | |\n            \
    \      |           |     |           |    | | XLATE | |\n                  | \
    \          |     |           |    | |       | |\n         CPE-CGN  | +-------+\
    \ |     | +-------+ |    | |       | |\n         +----+   | |       | |     |\
    \ |       | | IP | |       | |\n         |  --+---+-+->GRT  | |     | |  GRT<-+-+----+-+--\
    \     | |\n         +----+   | |   |   | |     | |   |   | |    | |       | |\n\
    \                  | +---+---+ |     | +---+---+ |    | +-------+ |\n        \
    \          +-----+-----+     +-----+-----+    +-----------+\n                \
    \        |                 |\n                        |                 |    \
    \            IPv4\n                        |                 |   IP       +---------+\n\
    \                        |                 +------------+->       |\n        \
    \                |                     IP       |    GRT  |\n                \
    \        +------------------------------+->       |\n                        \
    \                               +---------+\n                 Figure 1: Basic\
    \ BGP/MPLS IP VPN CGN Model\n   If more then one VRF (translation realm) is used\
    \ within the\n   operator's network, each VPN instance can manage CGN flows\n\
    \   independently for the respective realm.  The described architecture\n   does\
    \ not prescribe a single redundancy model that ensures network\n   availability\
    \ as a result of CGN failure.  Deployments are able to\n   select a redundancy\
    \ model that fits best with their network design.\n   If state information needs\
    \ to be passed or maintained between\n   hardware instances, the vendor would\
    \ need to enable this feature in a\n   suitable manner.\n"
- title: 4.1.  Service Separation
  contents:
  - "4.1.  Service Separation\n   The MPLS/VPN CGN framework supports route separation.\
    \  The\n   traditional IPv4 flows can be separated at the access node (initial\n\
    \   Layer 3 service point) from those that require translation.  This\n   type\
    \ of service separation is possible on common technologies used\n   for Internet\
    \ access within many operator networks.  Service\n   separation can be accomplished\
    \ on common access technology, including\n   those used for DOCSIS (CMTS), Ethernet\
    \ access, DSL (BRAS), and mobile\n   access (GGSN/ASN-GW) architectures.\n"
- title: 4.2.  Internal Service Delivery
  contents:
  - "4.2.  Internal Service Delivery\n   Internal services can be delivered directly\
    \ to the privately\n   addressed endpoint within the CGN domain without translation.\
    \  This\n   can be accomplished in one of two methods.  The first method is the\n\
    \   use of \"route leaking\", a method of exchanging routes between the CGN\n\
    \   VRF and GRT; this method may also include reducing the overall number\n  \
    \ of VRFs in the system and exposing services in the GRT.  The second\n   method,\
    \ which is described in detail within this section, is the use\n   of a Services\
    \ VRF.  The second model is a more traditional extranet\n   services model but\
    \ requires more system resources to implement.\n   Using direct route exchange\
    \ (import/export) between the CGN VRFs and\n   the Services VRFs creates reachability\
    \ using the aforementioned\n   extranet model available in the BGP/MPLS IP VPN\
    \ structure.  This\n   model allows the provider to maintain separate forwarding\
    \ rules for\n   translated flows, which require a pass through the translator\
    \ to\n   reach external network entities, versus those flows that need to\n  \
    \ access internal services.  This operational detail can be\n   advantageous for\
    \ a number of reasons, such as service-access policies\n   and endpoint identification.\
    \  First, the provider can reduce the load\n   on the translator since internal\
    \ services do not need to be factored\n   into the scaling of the CGN hardware\
    \ (which may be quite large).\n   Second, more direct forwarding paths can be\
    \ maintained to provide\n   better network efficiency.  Third, geographic locations\
    \ of the\n   translators and the services infrastructure can be deployed in\n\
    \   locations in an independent manner.  Additionally, the operator can\n   allow\
    \ CGN subject endpoints to be accessible via an untranslated\n   path, reducing\
    \ the complexities of provider-initiated management\n   flows.  This last point\
    \ is of key interest since NAT removes\n   transparency to the end device in normal\
    \ cases.\n   Figure 2 below shows how internal services are provided untranslated\n\
    \   since flows are sent directly from the access node to the services\n   node/VRF\
    \ via an MPLS LSP.  This traffic is not forwarded to the CGN\n   translator and\
    \ therefore is not subject to problematic behaviors\n   related to NAT.  The Services\
    \ VRF contains routing information that\n   can be \"imported\" into the access\
    \ node VRF, and the CGN VRF routing\n   information can be \"imported\" into the\
    \ Services VRF.\n              Access Node     VRF Termination     CGN\n     \
    \       +-------------+    +-----------+  +----------+\n            |        \
    \     |    |           |  |          |\n     CPE    | +---------+ |    | +-------+\
    \ |  | +------+ |\n   +-----+  | |         | |    | |       | |  | |      | |\n\
    \   |   --+--+-+-> VRF --+-+--+ | |  VRF  | |  | |      | |\n   +-----+  | | \
    \        | |  | | |       | |  | |      | |\n            | +---------+ |  | |\
    \ +-------+ |  | |      | |\n            |             |  | |           |  | |XLATE\
    \ | |\n            |             |  | |           |  | |      | |\n   CPE-CGN\
    \  | +---------+ |  | | +-------+ |  | |      | |\n   +-----+  | |         | |\
    \  | | |       | |  | |      | |\n   |   --+--+-+-> GRT   | |  | | |  GRT  | |\
    \  | |      | |\n   +-----+  | |    |    | |  | | |       | |  | |      | |\n\
    \            | +----+----+ |  | | +-------+ |  | +------+ |\n            +------+------+\
    \  | +-----------+  +----------+\n                   |         |\n           \
    \        |         |                    IPv4\n                   |         | \
    \              +-----------+\n                   |         +---------------+->Services\
    \ |\n                   |                         |    VRF    |\n            \
    \       .-------------------------+->   |     |\n                            \
    \                 +-----+-----+\n                                            \
    \       |\n                                             +-----V-----+\n      \
    \                                       |           |\n                      \
    \                       |   Local   |\n                                      \
    \       |  Content  |\n                                             +-----------+\n\
    \                Figure 2: Internal Services and CGN Bypass\n   An extension to\
    \ the services delivery LSP is the ability to also\n   provide direct subscriber-to-subscriber\
    \ traffic flows between CGN\n   zones.  Each zone or realm may be fitted with\
    \ separate CGN resources,\n   but the subtending subscribers don't necessarily\
    \ need to be mediated\n   (translated) by the CGN translators.  This option, as\
    \ shown in\n   Figure 3, is easy to implement and can only be enabled if no IPv4\n\
    \   address overlap is used between communicating CGN zones.\n             Access\
    \ Node-1     VRF Termination   CGN-1\n            +-------------+    +-----------+\
    \  +----------+\n            |             |    |           |  |          |\n\
    \     CPE-1  | +---------+ |    | +-------+ |  | +------+ |\n   +-----+  | | \
    \        | |    | |       | |  | |      | |\n   |   --+--+-+-  VRF --+-+-+  |\
    \ |  VRF  | |  | |      | |\n   +-----+  | |         | | |  | |       | |  | |\
    \      | |\n            | +---------+ | |  | +-------+ |  | |      | |\n     \
    \       |             | |  |           |  | |XLATE | |\n            |        \
    \     | |  |           |  | |      | |\n   CPE-2-CGN| +---------+ | |  | +-------+\
    \ |  | |      | |\n   +-----+  | |         | | |  | |       | |  | |      | |\n\
    \   |   --+--+-+-  GRT   | | |  | |  GRT  | |  | |      | |\n   +-----+  | | \
    \        | | |  | |       | |  | |      | |\n            | +---------+ | |  |\
    \ +-------+ |  | +------+ |\n            +-------------+ |  +-----------+  +----------+\n\
    \                            |\n                        LSP |\n              \
    \              |\n             Access Node-2  |  VRF Termination   CGN-2\n   \
    \         +-------------+ |  +-----------+  +----------+\n            |      \
    \       | |  |           |  |          |\n   CPE-3-CGN| +---------+ | |  | +-------+\
    \ |  | +------+ |\n   +-----+  | |         | | |  | |       | |  | |      | |\n\
    \   |   --+--+-+-- VRF --+-+-+  | |  VRF  | |  | |      | |\n   +-----+  | | \
    \        | |    | |       | |  | |      | |\n            | +---------+ |    |\
    \ +-------+ |  | |      | |\n            |             |    |           |  | |XLATE\
    \ | |\n            |             |    |           |  | |      | |\n     CPE-4\
    \  | +---------+ |    | +-------+ |  | |      | |\n   +-----+  | |         | |\
    \    | |       | |  | |      | |\n   |   --+--+-+-  GRT   | |    | |  GRT  | |\
    \  | |      | |\n   +-----+  | |         | |    | |       | |  | |      | |\n\
    \            | +---------+ |    | +-------+ |  | +------+ |\n            +-------------+\
    \    +-----------+  +----------+\n               Figure 3: Subscriber-to-Subscriber\
    \ CGN Bypass\n   The inherent capabilities of the BGP/MPLS IP VPN model demonstrates\n\
    \   the ability to offer CGN bypass in a standard and deterministic\n   manner\
    \ without the need of policy-based routing or traffic\n   engineering.\n"
- title: 4.2.1.  Dual-Stack Operation
  contents:
  - "4.2.1.  Dual-Stack Operation\n   The BGP/MPLS IP VPN CGN model can also be used\
    \ in conjunction with\n   IPv4/IPv6 dual-stack service modes.  Since many providers\
    \ will use\n   CGNs on an interim basis while IPv6 matures within the global\n\
    \   Internet or due to technical constraints, a dual-stack option is of\n   strategic\
    \ importance.  Operators can offer this dual-stack service\n   for both traditional\
    \ IPv4 (global IP) endpoints and CGN-mediated\n   endpoints.\n   Operators can\
    \ separate the IP flows for IPv4 and IPv6 traffic, or\n   they can use other routing\
    \ techniques to move IPv6-based flows toward\n   the GRT (Global Routing Table)\
    \ while allowing IPv4 flows to remain\n   within the IPv4 CGN VRF for translator\
    \ services.\n   Figure 4 shows how IPv4 translation services can be provided\n\
    \   alongside IPv6-based services.  This model allows the provider to\n   enable\
    \ CGN to manage IPv4 flows (translated), and IPv6 flows are\n   routed without\
    \ translation efficiently toward the Internet.  Once\n   again, forwarding of\
    \ flows to the translator does not impact IPv6\n   flows, which do not require\
    \ this service.\n             Access Node   VRF Termination        CGN\n     \
    \       +-----------+   +-----------+    +-----------+\n            |        \
    \   |   |           |    |           |\n    CPE-CG  | +-------+ |   | +-------+\
    \ |    | +-------+ |\n   +-----+  | |       | |LSP| |       | | IP | |       |\
    \ |\n   |   --+--+-+->VRF--+-+---+-+->VRF--+-+----+-+>      | |\n   |IPv4 |  |\
    \ |       | |   | |       | |    | |       | |\n   |     |  | +-------+ |   |\
    \ +-------+ |    | |       | |\n   +-----|  |           |   |           |    |\
    \ | XLATE | |\n   |IPv6 |  |           |   |           |    | |       | |\n  \
    \ |     |  | +-------+ |   | +-------+ |    | |       | |\n   |     |  | |  IPv6\
    \ | |   | |  IPv4 | | IP | |       | |\n   |   --+--+-+->GRT  | |   | |  GRT<-+-+----+-+--\
    \     | |\n   +-----+  | |   |   | |   | |   |   | |    | |       | |\n      \
    \      | +---+---+ |   | +---+---+ |    | +-------+ |\n            +-----+-----+\
    \   +-----+-----+    +-----------+\n                  |               |\n    \
    \              |               |          +-----------+\n                  | \
    \              |    IP    |    IPv4   |\n                  |               +----------+->\
    \  GRT    |\n                  |                          +-----------+\n    \
    \              |\n                  |\n                  |\n                 \
    \ |               IP         +-----------+\n                  +--------------------------+->\
    \  IPv6   |\n                                             |    GRT    |\n    \
    \                                         +-----------+\n               Figure\
    \ 4: CGN with IPv6 Dual-Stack Operation\n"
- title: 4.3.  Deployment Flexibility
  contents:
  - "4.3.  Deployment Flexibility\n   The CGN translator services can be moved, separated\
    \ or segmented (new\n   translation realms) without the need to change the overall\n\
    \   translation design.  Since dynamic LSPs are used to forward traffic\n   from\
    \ the access nodes to the translation points, the physical\n   location of the\
    \ VRF termination points can vary and be changed\n   easily.\n   This type of\
    \ flexibility allows the service provider to initially\n   deploy more centralized\
    \ translation services based on relatively low\n   loading factors and distribute\
    \ the translation points over time to\n   improve network-traffic efficiencies\
    \ and support higher translation\n   load.\n   Although traffic-engineered paths\
    \ are not required within the MPLS/\n   VPN deployment model, nothing precludes\
    \ an operator from using\n   technologies like MPLS with Traffic Engineering [RFC3031].\n\
    \   Additional routing mechanisms can be used as desired by the provider\n   and\
    \ can be seen as independent.  There is no specific need to\n   diversify the\
    \ existing infrastructure in most cases.\n"
- title: 4.4.  Comparison of BGP/MPLS IP VPN Option versus Other CGN Attachment
  contents:
  - "4.4.  Comparison of BGP/MPLS IP VPN Option versus Other CGN Attachment\n    \
    \  Options\n   Other integration architecture options exist that can attach CGN\n\
    \   based service flows to a translator instance.  Alternate options that\n  \
    \ can be used to attach such services include:\n   -  policy-based routing (static)\
    \ to direct translation-bound traffic\n      to a network-based translator;\n\
    \   -  traffic engineering; and\n   -  multiple routing topologies.\n"
- title: 4.4.1.  Policy-Based Routing
  contents:
  - "4.4.1.  Policy-Based Routing\n   Policy-based routing (PBR) provides another\
    \ option to direct CGN-\n   mediated flows to a translator.  PBR options, although\
    \ possible, are\n   difficult to maintain (due to static policy) and must be configured\n\
    \   throughout the network with considerable maintenance overhead.\n   More centralized\
    \ deployments may be difficult or too onerous to\n   deploy using policy-based\
    \ routing methods.  Policy-based routing\n   would not achieve route separation\
    \ (unless used with others options)\n   and may add complexities to the providers'\
    \ routing environment.\n"
- title: 4.4.2.  Traffic Engineering
  contents:
  - "4.4.2.  Traffic Engineering\n   Traffic engineering can also be used to direct\
    \ traffic from an access\n   node toward a translator.  Traffic engineering, like\
    \ MPLS-TE, may be\n   difficult to set up and maintain.  Traffic engineering provides\n\
    \   additional benefits if used with MPLS by adding potential for faster\n   path\
    \ re-convergence.  Traffic engineering paths would need to be\n   updated and\
    \ redefined over time as CGN translation points are\n   augmented or moved.\n"
- title: 4.4.3.  Multiple Routing Topologies
  contents:
  - "4.4.3.  Multiple Routing Topologies\n   Multiple routing topologies can be used\
    \ to direct CGN-based flows to\n   translators.  This option would achieve the\
    \ same basic goal as the\n   MPLS/VPN option but with additional implementation\
    \ overhead and\n   platform configuration complexity.  Since operator based translation\n\
    \   is expected to have an unknown lifecycle, and may see various degrees\n  \
    \ of demand (dependent on operator IPv4 Global space availability and\n   shift\
    \ of traffic to IPv6), it may be too large of an undertaking for\n   the provider\
    \ to enabled this as their primary option for CGN.\n"
- title: 4.5.  Multicast Considerations
  contents:
  - "4.5.  Multicast Considerations\n   When deploying BGP/MPLS IP VPNs as a service\
    \ method for user-plane\n   traffic to access CGN, one needs to be cognizant of\
    \ current or future\n   IP multicast requirements.  User-plane IP Multicast that\
    \ may\n   originate outside of the VRF requires specific consideration.  Adding\n\
    \   the requirement for user plane IP multicast can potentially cause\n   additional\
    \ complexity related to importing and exporting the IP\n   multicast routes in\
    \ addition to suboptimal scaling and bandwidth\n   utilization.\n   It is recommended\
    \ to reference best practice and designs from\n   [RFC6037], [RFC6513], and [RFC5332].\n"
- title: 5.  Experiences
  contents:
  - '5.  Experiences

    '
- title: 5.1.  Basic Integration and Requirements Support
  contents:
  - "5.1.  Basic Integration and Requirements Support\n   The MPLS/VPN CGN environment\
    \ has been successfully integrated into\n   real network environments utilizing\
    \ existing network service delivery\n   mechanisms.  It solves many issues related\
    \ to provider-based\n   translation environments while still subject to problematic\
    \ behaviors\n   inherent within NAT.\n   The key issues that are solved or managed\
    \ with the MPLS/VPN option\n   include:\n   -  Support for the centralized and\
    \ distributed deployment model\n   -  Routing plane separation for CGN flows versus\
    \ traditional IPv4\n      flows\n   -  Flexible translation point design (can\
    \ relocate translators and\n      split translation zones easily)\n   -  Low maintenance\
    \ overhead (dynamic routing environment with little\n      maintenance of separate\
    \ routing infrastructure other than\n      management of MPLS/VPNs)\n   -  CGN\
    \ bypass options (for internal and third-party services that\n      exist within\
    \ the provider domain)\n   -  IPv4 translation realm overlap support (can reuse\
    \ IP addresses\n      between zones with some impact to extranet service model)\n\
    \   -  Simple failover techniques can be implemented with redundant\n      translators,\
    \ such as using a second default route\n"
- title: 5.2.  Performance
  contents:
  - "5.2.  Performance\n   The MPLS/VPN CGN model was observed to support basic functions\
    \ that\n   are typically used by subscribers within an operator environment. \
    \ A\n   full review of the observed impacts related to CGN (NAT444) are\n   covered\
    \ in [RFC7021].\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   An operator implementing CGN using BGP/MPLS IP\
    \ VPNs should refer to\n   Section 7 of [RFC6888] for security considerations\
    \ related to CGN\n   deployments.  The operator should continue to employ the\
    \ standard\n   security methods in place for their standard MPLS deployment and\
    \ can\n   also refer to the Security Considerations section in [RFC4364], which\n\
    \   discusses both control-plane and data-plane security.\n"
- title: 7.  BGP/MPLS IP VPN CGN Framework Discussion
  contents:
  - "7.  BGP/MPLS IP VPN CGN Framework Discussion\n   The MPLS/VPN delivery method\
    \ for a CGN deployment is an effective and\n   scalable way to deliver mass translation\
    \ services.  The architecture\n   avoids the complex requirements of traffic engineering\
    \ and policy-\n   based routing when combining these new service flows to existing\
    \ IPv4\n   operation.  This is advantageous since the NAT444/CGN environments\n\
    \   should be introduced with as little impact as possible, and these\n   environments\
    \ are expected to change over time.\n   The MPLS/VPN-based CGN architecture solves\
    \ many of the issues related\n   to deploying this technology in existing operator\
    \ networks.\n"
- title: 8.  Acknowledgements
  contents:
  - "8.  Acknowledgements\n   Thanks to the following people for their comments and\
    \ feedback: Dan\n   Wing, Chris Metz, Chris Donley, Tina TSOU, Christopher Liljenstolpe,\n\
    \   and Tom Taylor.\n   Thanks to the following people for their participation\
    \ in integrating\n   and testing the CGN environment and for their guidance in\
    \ regard to\n   IPv6 transition: Syd Alam, Richard Lawson, John E. Spence, John\
    \ Jason\n   Brzozowski, Chris Donley, Jason Weil, Lee Howard, and Jean-Francois\n\
    \   Tremblay.\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative Reference
  contents:
  - "9.1.  Normative Reference\n   [RFC4364]  Rosen, E. and Y. Rekhter, \"BGP/MPLS\
    \ IP Virtual Private\n              Networks (VPNs)\", RFC 4364, February 2006.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [CGN-DEPLOYMENTS]\n              Donley, C.,\
    \ Grundemann, C., Sarawat, V., Sundaresan, K.,\n              and O. Vautrin,\
    \ \"Deterministic Address Mapping to Reduce\n              Logging in Carrier\
    \ Grade NAT Deployments\", Work in\n              Progress, January 2014.\n  \
    \ [RFC1918]  Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G., and\n    \
    \          E. Lear, \"Address Allocation for Private Internets\", BCP\n      \
    \        5, RFC 1918, February 1996.\n   [RFC3031]  Rosen, E., Viswanathan, A.,\
    \ and R. Callon, \"Multiprotocol\n              Label Switching Architecture\"\
    , RFC 3031, January 2001.\n   [RFC5332]  Eckert, T., Rosen, E., Aggarwal, R.,\
    \ and Y. Rekhter, \"MPLS\n              Multicast Encapsulations\", RFC 5332,\
    \ August 2008.\n   [RFC6037]  Rosen, E., Cai, Y., and IJ. Wijnands, \"Cisco Systems'\n\
    \              Solution for Multicast in BGP/MPLS IP VPNs\", RFC 6037,\n     \
    \         October 2010.\n   [RFC6146]  Bagnulo, M., Matthews, P., and I. van Beijnum,\
    \ \"Stateful\n              NAT64: Network Address and Protocol Translation from\
    \ IPv6\n              Clients to IPv4 Servers\", RFC 6146, April 2011.\n   [RFC6264]\
    \  Jiang, S., Guo, D., and B. Carpenter, \"An Incremental\n              Carrier-Grade\
    \ NAT (CGN) for IPv6 Transition\", RFC 6264,\n              June 2011.\n   [RFC6333]\
    \  Durand, A., Droms, R., Woodyatt, J., and Y. Lee, \"Dual-\n              Stack\
    \ Lite Broadband Deployments Following IPv4\n              Exhaustion\", RFC 6333,\
    \ August 2011.\n   [RFC6513]  Rosen, E. and R. Aggarwal, \"Multicast in MPLS/BGP\
    \ IP\n              VPNs\", RFC 6513, February 2012.\n   [RFC6598]  Weil, J.,\
    \ Kuarsingh, V., Donley, C., Liljenstolpe, C., and\n              M. Azinger,\
    \ \"IANA-Reserved IPv4 Prefix for Shared Address\n              Space\", BCP 153,\
    \ RFC 6598, April 2012.\n   [RFC6888]  Perreault, S., Yamagata, I., Miyakawa,\
    \ S., Nakagawa, A.,\n              and H. Ashida, \"Common Requirements for Carrier-Grade\
    \ NATs\n              (CGNs)\", BCP 127, RFC 6888, April 2013.\n   [RFC7021] \
    \ Donley, C., Howard, L., Kuarsingh, V., Berg, J., and J.\n              Doshi,\
    \ \"Assessing the Impact of Carrier-Grade NAT on\n              Network Applications\"\
    , RFC 7021, September 2013.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Victor Kuarsingh (editor)\n   Rogers Communications\n\
    \   8200 Dixie Road\n   Brampton, Ontario  L6T 0C1\n   Canada\n   EMail: victor@jvknet.com\n\
    \   URI:   http://www.rogers.com\n   John Cianfarani\n   Rogers Communications\n\
    \   8200 Dixie Road\n   Brampton, Ontario  L6T 0C1\n   Canada\n   EMail: john.cianfarani@rci.rogers.com\n\
    \   URI:   http://www.rogers.com\n"
