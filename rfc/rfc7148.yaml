- title: __initial_text__
  contents:
  - '            Prefix Delegation Support for Proxy Mobile IPv6

    '
- title: Abstract
  contents:
  - "Abstract\n   This specification defines extensions to the Proxy Mobile IPv6\n\
    \   protocol for allowing a mobile router in a Proxy Mobile IPv6 domain\n   to\
    \ obtain IP prefixes for its attached mobile networks using DHCPv6\n   prefix\
    \ delegation.  Network-based mobility management support is\n   provided for those\
    \ delegated IP prefixes just as it is provided for\n   the mobile node's home\
    \ address.  Even if the mobile router performs a\n   handoff and changes its network\
    \ point of attachment, mobility support\n   is ensured for all the delegated IP\
    \ prefixes and for all the IP nodes\n   in the mobile network that use IP address\
    \ configuration from those\n   delegated IP prefixes.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7148.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n\
    \   2. Terminology .....................................................6\n  \
    \ 3. Solution Overview ...............................................7\n    \
    \  3.1. Stated Assumptions .........................................7\n      3.2.\
    \ Deployment Models ..........................................8\n           3.2.1.\
    \ Delegating Router Co-located with Mobile\n                  Access Gateway ......................................8\n\
    \           3.2.2. Delegating Router Co-located with Local\n                 \
    \ Mobility Anchor .....................................9\n           3.2.3. Static\
    \ Configuration of Delegated Mobile\n                  Network Prefixes ...................................12\n\
    \   4. Message Formats ................................................12\n  \
    \    4.1. Delegated Mobile Network Prefix Option ....................12\n    \
    \  4.2. Status Codes ..............................................14\n   5. Operational\
    \ Details ............................................14\n      5.1. MAG Considerations\
    \ ........................................14\n           5.1.1. Extension to Binding\
    \ Update List Entry Data\n                  Structure ..........................................14\n\
    \           5.1.2. Signaling Considerations ...........................14\n  \
    \         5.1.3. DHCP -- MAG Interactions ...........................16\n    \
    \              5.1.3.1. Delegating Router Co-located with\n                  \
    \         Mobile Access Gateway .....................17\n                  5.1.3.2.\
    \ Delegating Router Co-Located with\n                           Local Mobility\
    \ Anchor .....................18\n           5.1.4. Packet Forwarding ..................................19\n\
    \      5.2. LMA Considerations ........................................20\n  \
    \         5.2.1. Extensions to Binding Cache Entry Data Structure ...20\n    \
    \       5.2.2. Signaling Considerations ...........................20\n      \
    \     5.2.3. Packet Forwarding ..................................22\n      5.3.\
    \ Security Policy Database (SPD) Example Entries ............22\n   6. Security\
    \ Considerations ........................................23\n   7. IANA Considerations\
    \ ............................................24\n   8. Acknowledgements ...............................................24\n\
    \   9. References .....................................................25\n  \
    \    9.1. Normative References ......................................25\n    \
    \  9.2. Informative References ....................................26\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Proxy Mobile IPv6 [RFC5213] enables network-based mobility\
    \ management\n   support for an IP host without requiring its participation in\
    \ any IP\n   mobility signaling.  In Proxy Mobile IPv6 (PMIPv6), the mobile access\n\
    \   gateway (MAG) performs the mobility management function on behalf of\n   the\
    \ mobile node (MN).  The local mobility anchor (LMA) is the home\n   agent for\
    \ the MN and the topological anchor point.  The mobility\n   elements (LMA and\
    \ MAGs) in the network allow an IP host to obtain an\n   IPv4 address and/or a\
    \ set of IPv6 addresses and be able to obtain IP\n   mobility support for those\
    \ IP address(es) within the Proxy Mobile\n   IPv6 domain.  In this context, the\
    \ mobility management support is\n   enabled for an individual IP host, which\
    \ is the mobile node.  The\n   IPv4 home address or the IPv6 home network prefixes\
    \ are logically\n   bound to the link shared between the mobile access gateway\
    \ and the\n   mobile node, and only the mobile node can use those IP address(es)\
    \ by\n   configuring them on the interface attached to that link.  Currently,\n\
    \   there is no mobility support for the mobile networks attached to a\n   mobile\
    \ router (MR) in a Proxy Mobile IPv6 domain.\n   This specification defines extensions\
    \ to the Proxy Mobile IPv6\n   protocol for allowing mobility support to the mobile\
    \ networks\n   attached to a mobile router.  These extension include definition\
    \ of a\n   new mobility option that can be exchanged in the signaling messages\n\
    \   between the mobile access gateway and the local mobility anchor.  The\n  \
    \ mobile router can request the mobility entities in the Proxy Mobile\n   IPv6\
    \ domain for delegated IP prefix(es) using DHCP prefix delegation\n   extensions\
    \ [RFC3633], static configuration of the prefixes, or\n   mechanisms specific\
    \ to the access technology.  The mobility entities\n   in the PMIPv6 network provide\
    \ network-based mobility management\n   support for those delegated prefixes just\
    \ as it is supported for a\n   home address.  The delegated prefixes are hosted\
    \ in the mobile\n   network attached to the mobile router.  IP mobility is ensured\
    \ for\n   all the IP nodes in the mobile network, even as the mobile router\n\
    \   performs a handoff by changing its point of network attachment within\n  \
    \ the Proxy Mobile IPv6 domain.  The local mobility anchor in the Proxy\n   Mobile\
    \ IPv6 domain will not track the individual IP nodes in the\n   mobile network;\
    \ it only tracks a single mobile router session that is\n   hosting the mobile\
    \ network and associates the delegated IP prefixes\n   with that session.  Although\
    \ the protocol solution defined in this\n   specification also allows signaling\
    \ IPv4 subnets between the mobile\n   access gateway and the local mobility anchor,\
    \ the delegation of IPv4\n   subnets to the mobile router is out of the scope\
    \ of this\n   specification.\n                                      _----_\n \
    \                      +-------+    _(      )_\n                       |     \
    \  |---( Internet )\n                       |  LMA  |    (_      _)\n        \
    \               |       |      '----'\n                       +-------+\n    \
    \                       |\n                      === === ===\n               \
    \    ==    Proxy    ==\n                ==    Mobile IPv6    ==\n            \
    \       ==    Domain   ==\n                      === === ===\n               \
    \ ___________|___________\n               |                       |\n        \
    \   +-------+               +-------+\n           |  MAG  |               |  MAG\
    \  |\n           +-------+               +-------+\n               .\n       \
    \        .\n        - - - - - - - -\n       |   +------+    |\n       |   |  MR\
    \  |    |\n       |   +------+    |\n       |       |       |\n       |    -------\
    \    |\n       |    |     |    |\n       |   LFN   LFN   |\n        - - - - -\
    \ - - -\n            Figure 1: Mobile Router in Proxy Mobile IPv6 Domain\n   Within\
    \ the context of this document, the definition of a mobile\n   router extends\
    \ the definition of a mobile node from [RFC5213]  by\n   adding routing capability\
    \ between the mobile network and the point of\n   attachment of the mobile router.\
    \  Local fixed nodes (LFNs) are IP\n   nodes in the mobile network; LFNs all move\
    \ with the mobile router as\n   a single cluster.  As the mobile router moves,\
    \ the LFNs are not aware\n   of the mobility of the MR to a new point of attachment.\
    \  Figure 1\n   illustrates a mobile router in a Proxy Mobile IPv6 domain.\n \
    \  The rest of this document identifies the protocol extensions and the\n   operational\
    \ details of the local mobility anchor and mobile access\n   gateway for realizing\
    \ prefix delegation support for Proxy Mobile\n   IPv6.\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\"\
    , \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and\
    \ \"OPTIONAL\" in this\n   document are to be interpreted as described in [RFC2119].\n\
    \   All the mobility-related terms used in this document are to be\n   interpreted\
    \ as defined in Proxy Mobile IPv6 specifications [RFC5213]\n   and [RFC5844].\
    \  All the DHCP-related terms are to be interpreted as\n   defined in DHCPv6 Prefix\
    \ Delegation for Network Mobility (NEMO)\n   [RFC6276], DHCPv6 Prefix Delegation\
    \ (DHCPv6PD) [RFC3633], and Subnet\n   Allocation Option for DHCPv4 [RFC6656].\
    \  This document also provides\n   a context-specific explanation of the following\
    \ terms used here and\n   originally defined in the Mobile Network terminology\
    \ document\n   [RFC4885].\n   Mobile Router (MR)\n      The term \"mobile router\"\
    \ is used to refer to an IP router whose\n      mobility is managed by the network\
    \ while being attached to a Proxy\n      Mobile IPv6 domain.  The mobile router\
    \ is a mobile node as defined\n      in [RFC5213] but with additional capabilities\
    \ for supporting an\n      attached mobile network.  The MR's interface used for\
    \ attachment\n      to the mobile access gateway is referred to as the \"egress\n\
    \      interface\".  Any MR's interface used for attachment to the mobile\n  \
    \    network is referred to as the \"ingress interface\".  The mobility\n    \
    \  entities in the Proxy Mobile IPv6 domain provide mobility for the\n      IPv4/IPv6\
    \ address(es) assigned to the mobile node's egress link\n      and also mobility\
    \ support to the network prefixes hosted in the\n      network attached to the\
    \ mobile router.\n   Mobile Network\n      A mobile network is an IP network attached\
    \ to a mobile router.\n      There can be many IP nodes in this IP network.  The\
    \ mobile router\n      is a gateway for these IP nodes for reaching other IP networks\
    \ or\n      the Internet.  The mobile router and the attached IP networks move\n\
    \      as a single cluster.\n   Delegated Mobile Network Prefix (DMNP)\n     \
    \ The Delegated Mobile Network Prefix is an IPv4/IPv6 prefix\n      delegated\
    \ to a mobile router and is hosted in the mobile network.\n      The IP nodes\
    \ in the mobile network will be able to obtain IP\n      address configuration\
    \ from the DMNP and will have IP mobility\n      support for that address configuration.\
    \  The DMNP is topologically\n      anchored on the local mobility anchor, and\
    \ the mobility elements\n      in the Proxy Mobile IPv6 domain provide IP mobility\
    \ support for\n      the prefix by forwarding the mobile network traffic to the\
    \ mobile\n      router.\n   Local Fixed Node (LFN)\n      A local fixed node is\
    \ an IP node in the mobile network.  As the\n      mobile router performs a handoff\
    \ and changes its network point of\n      attachment, the local fixed node moves\
    \ along with the mobile\n      router.\n"
- title: 3.  Solution Overview
  contents:
  - "3.  Solution Overview\n   This section lists the stated assumptions and provides\
    \ an overview of\n   the operation of this specification.  This document references\
    \ three\n   different deployment scenarios and explains the protocol operation.\n"
- title: 3.1.  Stated Assumptions
  contents:
  - "3.1.  Stated Assumptions\n   o  The mobile router is a mobile node as defined\
    \ in [RFC5213] but\n      with additional capabilities for routing IP packets\
    \ between its\n      egress interface (interface used for attachment to the mobile\n\
    \      access gateway) and any of its ingress interfaces (interfaces used\n  \
    \    for attachment to the mobile network).\n   o  This specification assumes\
    \ that a mobile router is an IPv4 and/or\n      IPv6 router without any capability\
    \ for mobility management.\n   o  The mobile router can obtain the delegated IP\
    \ prefix(es) for its\n      attached mobile networks using DHCPv6 prefix delegation,\
    \ static\n      configuration, or mechanisms specific to access technology.  This\n\
    \      document assumes DHCPv6 prefix delegation [RFC3633] in conjunction\n  \
    \    with the Prefix Exclude Option [RFC6603] as the default mechanism\n     \
    \ for prefix assignment to the mobile node.  It defines an\n      interworking\
    \ between the mobility entities and the DHCPv6\n      functional elements in a\
    \ non-normative way.  The mechanism that\n      delegates IPv4 subnets to a mobile\
    \ router is out of the scope of\n      this specification.\n   o  The mobile router\
    \ obtains the IP address configuration for its\n      egress roaming interface\
    \ as specified in [RFC5213] and [RFC5844].\n      The mobile router, along with\
    \ its mobile networks, will be able to\n      perform handoff, change its point\
    \ of attachment in the network,\n      and retain IP mobility support.\n   o \
    \ When using DHCPv6 prefix delegation, this document assumes that\n      the mobile\
    \ router uses its egress interface when making DHCPv6\n      requests.\n"
- title: 3.2.  Deployment Models
  contents:
  - "3.2.  Deployment Models\n   This section explains the protocol operation used\
    \ to support prefix\n   delegation in Proxy Mobile IPv6 for the following three\
    \ deployment\n   models: i) delegating router co-located with mobile access gateway,\n\
    \   ii) delegating router co-located with local mobility anchor, and iii)\n  \
    \ static configuration of delegated prefixes.  High-level message call\n   flows\
    \ between the mobile router, mobile access gateway, and the local\n   mobility\
    \ anchor are presented while explaining the protocol\n   operation.\n"
- title: 3.2.1.  Delegating Router Co-located with Mobile Access Gateway
  contents:
  - "3.2.1.  Delegating Router Co-located with Mobile Access Gateway\n   In this deployment\
    \ scenario, the delegating router (DR) function, as\n   specified in [RFC3633],\
    \ is co-located with the mobile access gateway,\n   and a requesting router (RR)\
    \ function is enabled on the mobile\n   router.\n   Figure 2 shows the high-level\
    \ message call flow for this case.  The\n   mobile router attaches to the mobile\
    \ access gateway, which triggers\n   the Proxy Mobile IPv6 signaling between the\
    \ mobile access gateway and\n   the local mobility anchor, setting up the bidirectional\
    \ tunnel\n   between them (regular Proxy Mobile IPv6 registration).  After that,\n\
    \   the DHCPv6 requesting router function running on the mobile router\n   sends\
    \ a Solicit message requesting a prefix.  This message is\n   received by the\
    \ DHCPv6 delegating router function running on the\n   mobile access gateway.\
    \  The mobile access gateway then sends a Proxy\n   Binding Update message including\
    \ a Delegated Mobile Network Prefix\n   (DMNP) option carrying the ALL_ZERO value\
    \ [RFC5213].  This serves as\n   a request for the local mobility anchor to allocate\
    \ a set of\n   delegated prefixes, conveyed back in one or more DMNP options in\
    \ a\n   Proxy Binding Acknowledgement message.  The DHCPv6-PD procedure is\n \
    \  then completed as described in [RFC3633], ending with the delegating\n   router\
    \ sending a Reply message conveying the delegated prefixes.  If\n   the requesting\
    \ router includes a Rapid Commit option in its Solicit\n   message, it is preferable\
    \ that the MAG respond directly with a Reply\n   message rather than with an Advertise\
    \ message, as described in\n   [RFC3315], Section 17.2.3.\n      +-----+     \
    \       +-----+                      +-----+\n      | MR  |            | MAG |\
    \                      | LMA |\n      |(RR) |            | (DR)|             \
    \         |     |\n      +-----+            +-----+                      +-----+\n\
    \   1)    |-- MN Attach -----|                            |\n         |      \
    \            |--Proxy Binding Update----->|\n         |                  |   \
    \                         |\n         |                  |<-------Proxy Binding\
    \ Ack.--|\n         |                  |                            |\n      \
    \   |                  |o==========================o|\n   2)    |            \
    \      |       PMIPv6 tunnel        |\n         |                  |o==========================o|\n\
    \   3)    |--Solicit for---->|                            |\n         | delegated\
    \ prefix |                            |\n   4)    |                  |--Proxy\
    \ Binding Update----->|\n         |                  |                       \
    \     |\n   5)    |                  |<--Proxy Binding Ack.(DMNP)-|\n        \
    \ |                  |                            |\n         -              \
    \    -<---+                       |\n   6)    |<------Advertise--|    |      \
    \                 |\n         |                  |    |                      \
    \ |\n   7)    |--Request-------->| Optional                   |\n         |  \
    \                |    |                       |\n         -                  -<---+\
    \                       |\n   8)    |<---Reply (DMNP)--|                     \
    \       |\n         |                  |                            |\n     Figure\
    \ 2: Delegating Router Co-located with Mobile Access Gateway\n   From an operational\
    \ point of view, this is the simplest deployment\n   option, as it keeps a single\
    \ protocol interface between the mobile\n   access gateway and the local mobility\
    \ anchor.\n"
- title: 3.2.2.  Delegating Router Co-located with Local Mobility Anchor
  contents:
  - "3.2.2.  Delegating Router Co-located with Local Mobility Anchor\n   In this deployment\
    \ scenario, the delegating router (DR) function, as\n   specified in [RFC3633],\
    \ is co-located with the local mobility anchor;\n   the requesting router (RR)\
    \ function is enabled on the mobile router;\n   and a DHCPv6 relay agent (DRA)\
    \ function is co-located on the mobile\n   access gateway.\n   Figure 3 shows\
    \ the high-level message call flow for this case.  The\n   mobile router attaches\
    \ to the mobile access gateway, which triggers\n   the Proxy Mobile IPv6 signaling\
    \ between the mobile access gateway and\n   the local mobility anchor, setting\
    \ up the bidirectional tunnel\n   between them (regular Proxy Mobile IPv6 registration).\
    \  After that,\n   the DHCPv6 requesting router function running on the mobile\
    \ router\n   requests a prefix by sending a Solicit message.  This message is\n\
    \   received by the DHCPv6 relay agent function running on the mobile\n   access\
    \ gateway, which then completes the DHCPv6 signaling, according\n   to [RFC3315].\
    \  The relay agent function SHOULD include the relay\n   agent remote-id option\
    \ [RFC4649] into Relay-forward messages with\n   appropriate identity information\
    \ to enable correlation of mobile\n   router identities used over DHCPv6 and PMIPv6.\n\
    \   Once the mobile access gateway gets the set of delegated prefixes\n   from\
    \ the delegating router function running on the local mobility\n   anchor, the\
    \ MAG conveys the delegated prefixes in a Proxy Binding\n   Update.  This ensures\
    \ that the local mobility anchor properly routes\n   the traffic addressed to\
    \ the delegated prefixes via the PMIPv6 tunnel\n   established with the mobile\
    \ access gateway and that mobility is\n   provided to these prefixes while the\
    \ mobile router roams within the\n   PMIPv6 domain.  Note that the relay agent\
    \ function in the mobile\n   access gateway has to queue the Reply message for\
    \ the duration of the\n   PMIPv6 signaling (steps 10 and 11) before forwarding\
    \ the Reply\n   message to the requesting router.  While this does not change\n\
    \   anything from the DHCPv6-PD protocol's point of view, implementations\n  \
    \ will need to account for interactions between the timing of PMIPv6\n   signaling\
    \ and the DHCPv6 timeout/retry logic.\n      +-----+            +-----+      \
    \              +-----+\n      | MR  |            | MAG |                    |\
    \ LMA |\n      |(RR) |            |(DRA)|                    |(DR) |\n      +-----+\
    \            +-----+                    +-----+\n   1)    |-- MN Attach -----|\
    \                          |\n         |                  |--------- PBU ----------->|\n\
    \         |                  |                          |\n         |        \
    \          |<-------- PBA ------------|\n         |                  |       \
    \                   |\n         |                  |o========================o|\n\
    \   2)    |                  |      PMIPv6 tunnel       |\n         |        \
    \          |o========================o|\n   3)    |-- Solicit for -->|       \
    \                   |\n         | delegated prefix |                         \
    \ |\n   4)    |                  |--- Solicit ------------->|\n         -    \
    \              -                          - <---+\n   5)    |                \
    \  |<-- Advertise ------------|     |\n         |                  |         \
    \                 |     |\n   6)    |<- Advertise -----|                     \
    \     |     |\n         |                  |                          |  Optional\n\
    \   7)    |-- Request ------>|                          |     |\n         |  \
    \                |                          |     |\n   8)    |              \
    \    |--- Request ------------->|     |\n         -                  -       \
    \                   - <---+\n   9)    |                  |<-- Reply (DMNP) ---------|\n\
    \         |                  |                          |\n   10)   |        \
    \          |----------PBU (DMNP)----->|\n         |                  |       \
    \                   |\n   11)   |                  |<---------PBA (DMNP)------|\n\
    \         |                  |                          |\n   12)   |<-- Reply\
    \ (DMNP) -|                          |\n         |                  |        \
    \                  |\n     Figure 3: Delegating Router Co-located with Local Mobility\
    \ Anchor\n   The DR function can also be located in other entities of the home\n\
    \   network aside from the LMA.  This deployment model requires some\n   interworking\
    \ between the DR and the LMA and is out of the scope of\n   this specification.\
    \  Note that this additional interworking would\n   have no impact on the protocol\
    \ between the LMA and MAG defined in\n   this document.\n"
- title: 3.2.3.  Static Configuration of Delegated Mobile Network Prefixes
  contents:
  - "3.2.3.  Static Configuration of Delegated Mobile Network Prefixes\n   In this\
    \ deployment scenario, the DMNPs of the mobile router are\n   statically configured\
    \ in the mobile node's policy profile [RFC5213].\n   The DMNPs are statically\
    \ configured in the mobile network attached to\n   the mobile router.  The mobile\
    \ router is the default-router for the\n   mobile networks.\n   Figure 4 shows\
    \ a high-level message call flow for this example.  The\n   mobile access gateway\
    \ obtains statically configured mobile network\n   prefixes from the policy profile\
    \ and registers them with the local\n   mobility anchor using the extensions specified\
    \ in this document, that\n   is, the use of the Delegated Mobile Network Prefix\
    \ (DMNP) option in\n   the Proxy Mobile IPv6 signaling.  There is no explicit\
    \ trigger from\n   the mobile router for registering or de-registering those prefixes.\n\
    \   As long as there is a mobility session for the mobile router's home\n   address,\
    \ the local mobility anchor enables mobility support for the\n   mobile network\
    \ prefixes.\n      +-----+            +-----+                    +-----+\n   \
    \   | MR  |            | MAG |                    | LMA |\n      |     |     \
    \       |     |                    |     |\n      +-----+            +-----+ \
    \                   +-----+\n   1)    |-- MN Attach -----|                   \
    \       |\n   2)    |                  - (Policy Profile)         |\n        \
    \ |                  |                          |\n   3)    |                \
    \  |--------- PBU (DMNP) ---->|\n         |                  |               \
    \           |\n   4)    |                  |<-------- PBA (DMNP) -----|\n    \
    \     |                  |                          |\n         |            \
    \      |o========================o|\n   5)    |                  |      PMIPv6\
    \ tunnel       |\n         |                  |o========================o|\n \
    \        |                  |                          |\n    Figure 4: Static\
    \ Configuration of Delegated Mobile Network Prefixes\n"
- title: 4.  Message Formats
  contents:
  - "4.  Message Formats\n   This section defines extensions to Proxy Mobile IPv6\
    \ [RFC5213]\n   protocol messages.\n"
- title: 4.1.  Delegated Mobile Network Prefix Option
  contents:
  - "4.1.  Delegated Mobile Network Prefix Option\n   A new mobility header option,\
    \ the Delegated Mobile Network Prefix\n   option, is defined for use with Proxy\
    \ Binding Update and Proxy\n   Binding Acknowledgement messages exchanged between\
    \ a local mobility\n   anchor and a mobile access gateway.  This option is used\
    \ for\n   exchanging the mobile router's IPv4/IPv6 DMNP.  There can be multiple\n\
    \   instances of the Delegated Mobile Network Prefix option present in a\n   message.\n\
    \   The Delegated Mobile Network Prefix option has an alignment\n   requirement\
    \ of 8n+2.  Its format is as follows:\n   0                   1              \
    \     2                   3\n   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2\
    \ 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |      Type     |   Length      |V|  Reserved   | Prefix Length |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                                                               |\n   +  \
    \                                                             +\n   |        \
    \                                                       |\n   .              \
    \                                                 .\n   +           IPv4 or IPv6\
    \ Delegated Mobile Network Prefix        +\n   |                         (DMNP)\
    \                                |\n   +                                     \
    \                          +\n   |                                           \
    \                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   Type\n      55\n   Length\n      8-bit unsigned integer indicating the length\
    \ of the option in\n      octets, excluding the Type and Length fields.\n   IPv4\
    \ Prefix (V)\n      If the IPv4 Prefix (V) flag is set to a value of (1), then\
    \ it\n      indicates that the prefix that is included in the DMNP field is an\n\
    \      IPv4 prefix.  If the IPv4 Prefix (V) flag is set to a value of\n      (0),\
    \ then it indicates that the prefix that is included in the\n      DMNP field\
    \ is an IPv6 prefix.\n   Reserved\n      This field is unused for now.  The value\
    \ MUST be initialized to 0\n      by the sender and MUST be ignored by the receiver.\n\
    \   Prefix Length\n      8-bit unsigned integer indicating the number of leftmost\
    \ bits\n      covering the network part of the address contained in the Prefix\n\
    \      field.\n   Delegated Mobile Network Prefix\n      Contains a mobile router's\
    \ 4-byte IPv4 or a 16-byte IPv6 Delegated\n      Mobile Network Prefix.\n"
- title: 4.2.  Status Codes
  contents:
  - "4.2.  Status Codes\n   This document defines the following new status code values\
    \ for use in\n   the Proxy Binding Acknowledgement message.  These values have\
    \ been\n   allocated from the same number space as defined in Section 6.1.8 of\n\
    \   [RFC6275].\n   NOT_AUTHORIZED_FOR_DELEGATED_MNP: 177\n      Not authorized\
    \ for DMNP\n   REQUESTED_DMNP_IN_USE: 178\n      Requested DMNP is in use\n"
- title: 5.  Operational Details
  contents:
  - '5.  Operational Details

    '
- title: 5.1.  MAG Considerations
  contents:
  - '5.1.  MAG Considerations

    '
- title: 5.1.1.  Extension to Binding Update List Entry Data Structure
  contents:
  - "5.1.1.  Extension to Binding Update List Entry Data Structure\n   In order to\
    \ support this specification, the conceptual Binding Update\n   List Entry (BULE)\
    \ data structure [RFC5213] needs to be extended to\n   include a Delegated Mobile\
    \ Network Prefix (DMNP) list.  Each entry in\n   the list is used for storing\
    \ an IPv4/IPv6 mobile network prefix\n   delegated to the mobile router.\n"
- title: 5.1.2.  Signaling Considerations
  contents:
  - "5.1.2.  Signaling Considerations\n   During the mobile router's initial attachment\
    \ procedure, the mobile\n   access gateway obtains the mobile router's policy\
    \ profile, as per the\n   procedures defined in [RFC5213].  The mobile node's\
    \ policy profile\n   defined in [RFC5213] is extended to include a parameter that\n\
    \   indicates Delegated Prefix support.  If the policy profile indicates\n   that\
    \ the mobile router is authorized for Delegated Prefix support,\n   then the considerations\
    \ described next apply.\n   The mobile access gateway MUST include one or more\
    \ Delegated Mobile\n   Network Prefix (DMNP) options in the Proxy Binding Update\
    \ message in\n   order to request the local mobility anchor to allocate DMNP(s)\
    \ for\n   the mobile router.\n   If the mobile access gateway requests the local\
    \ mobility anchor to\n   perform the prefix assignment, then:\n   o  There MUST\
    \ be exactly one instance of the Delegated Mobile Network\n      Prefix option\
    \ with an ALL_ZERO value and with the (V) flag set to\n      a value of (0). \
    \ This serves as a request to the local mobility\n      anchor to allocate a set\
    \ of IPv6 DMNPs.\n   o  There MUST be exactly one instance of the Delegated Mobile\
    \ Network\n      Prefix option with an ALL_ZERO value and with the (V) flag set\
    \ to\n      a value of (1).  This serves as a request to the local mobility\n\
    \      anchor to allocate a set of IPv4 DMNP.\n   o  If the received Proxy Binding\
    \ Acknowledgement message has the\n      status field value set to NOT_AUTHORIZED_FOR_DELEGATED_MNP\
    \ (not\n      authorized for DMNP), the mobile access gateway MUST NOT enable\n\
    \      mobility support for any of the prefixes in the mobile network,\n     \
    \ and prefix delegation support has to be disabled.\n   o  If the received Proxy\
    \ Binding Acknowledgement message has the\n      status field value set to REQUESTED_DMNP_IN_USE\
    \ (Requested DMNP is\n      in use), the mobile access gateway MUST NOT enable\
    \ mobility\n      support for the requested prefixes.  The mobile access gateway\
    \ MAY\n      choose to send Proxy Binding Update message requesting the local\n\
    \      mobility anchor to perform the prefix assignment.\n   If the mobile access\
    \ gateway provides the local mobility anchor with\n   the prefix(es) to be allocated,\
    \ then:\n   o  There MUST be exactly one instance of the Delegated Mobile Network\n\
    \      Prefix option with NON_ZERO prefix value [RFC5213] for each of the\n  \
    \    mobile network prefixes that the mobile access gateway is\n      requesting\
    \ the local mobility anchor to allocate.  The prefix\n      value in the option\
    \ is the prefix that is either statically\n      configured for that mobile router\
    \ in the mobile node's policy\n      profile or obtained via interactions with\
    \ the DHCP PD functions.\n      This serves as a request to the local mobility\
    \ anchor to allocate\n      the requested IPv4/IPv6 prefix.\n   If the received\
    \ Proxy Binding Acknowledgement message has the status\n   field value set to\
    \ 0 (Proxy Binding Update accepted), the mobile\n   access gateway has to apply\
    \ the following considerations.\n   o  The Delegated Mobile Network Prefix (DMNP)\
    \ list in the mobile\n      router's Binding Update List entry has to be updated\
    \ with the\n      allocated prefix(es).  However, if the received message was\
    \ in\n      response to a de-registration request with a lifetime value of\n \
    \     (0), then the DMNP list has to be removed along with the Binding\n     \
    \ Update List entry.\n   o  The mobile access gateway has to set up a policy-based\
    \ route for\n      forwarding the IP packets received from the mobile network\
    \ (with\n      the source IP address from any of the IPv4/IPv6 DMNPs) through\
    \ the\n      bidirectional tunnel set up for that mobile router.  However, if\n\
    \      the received message was in response to a de-registration request\n   \
    \   with a lifetime value of (0), then the created forwarding state\n      has\
    \ to be removed.\n   This specification assumes that all the mobile access gateways\
    \ of a\n   PMIPv6 domain support the same prefix delegation mechanism.  Any\n\
    \   differences will result in DMNPs getting de-registered and the mobile\n  \
    \ network losing the prefix(es).  This would result in the attached\n   local\
    \ fixed nodes losing the assigned IP addresses.  The mobile\n   router MAY explicitly\
    \ deprecate these prefixes.  Alternatively, the\n   lifetime of the addresses\
    \ may expire.\n"
- title: 5.1.3.  DHCP -- MAG Interactions
  contents:
  - "5.1.3.  DHCP -- MAG Interactions\n   This section describes the interactions\
    \ between the DHCP and PMIPv6\n   logical entities running on the mobile access\
    \ gateway.  This section\n   is applicable only for deployments that use DHCPv6-based\
    \ prefix\n   delegation (i.e., it does not apply if static configuration is used).\n\
    \   As described next, these interactions vary slightly depending on the\n   considered\
    \ deployment model at the mobile access gateway (described\n   in Section 3.2).\n\
    \   The mobile router, acting as a requesting router as described in\n   [RFC3633],\
    \ sends a Solicit message including one or more IA_PD\n   option(s) to the delegating\
    \ router / DHCPv6 relay agent co-located on\n   the mobile access gateway.  This\
    \ message provides the needed trigger\n   for the mobile access gateway to request\
    \ the local mobility anchor to\n   enable DMNP support for that mobility session.\
    \  We next describe the\n   subsequent interactions depending on the deployment\
    \ model.\n"
- title: 5.1.3.1.  Delegating Router Co-located with Mobile Access Gateway
  contents:
  - "5.1.3.1.  Delegating Router Co-located with Mobile Access Gateway\n   The mobile\
    \ access gateway applies the considerations in Section 5.1.2\n   for requesting\
    \ the local mobility anchor to enable delegated prefix\n   support.  For example,\
    \ if the mobile router is soliciting an IPv4\n   prefix, the mobile access gateway\
    \ includes in the Proxy Binding\n   Update signaling a Delegated Mobile Network\
    \ Prefix option with an\n   ALL_ZERO value and with the (V) flag set to a value\
    \ of (1).\n   The mobile access gateway, upon successfully completing the Proxy\n\
    \   Binding Update signaling with the local mobility anchor (following\n   the\
    \ considerations described in Section 5.1.2), adds the DMNPs to the\n   Binding\
    \ Update List.  Then, the mobile access gateway provides the\n   obtained prefixes\
    \ to the DHCPv6 delegating router for prefix\n   assignment.  The way in which\
    \ these prefixes are passed to the DHCPv6\n   delegating router function is beyond\
    \ the scope of this document.\n   o  In case the Proxy Binding Update signaling\
    \ with the local mobility\n      anchor is not completed successfully, for example,\
    \ because the\n      local mobility anchor is not authorized for DMNP or the requested\n\
    \      prefix is in use, the DHCPv6 delegating router will send a Reply\n    \
    \  message to the requesting router with no IA_PREFIX suboptions and\n      with\
    \ a Status Code option as described in [RFC3633], Section 11.2.\n   The standard\
    \ DHCPv6 considerations will be applied with respect to\n   the interactions between\
    \ the delegating router and the requesting\n   router.  The requesting router\
    \ is provided with the delegated\n   prefix(es), which can then be then advertised\
    \ in the mobile network\n   and therefore used by the local fixed nodes to autoconfigure\
    \ IP\n   addresses, allowing them to gain access to the Internet.\n   Any time\
    \ the requesting router releases the delegated prefixes, the\n   delegating router\
    \ removes the assigned prefixes.  To do so, the\n   mobile access gateway will\
    \ send an Updated Proxy Binding Update\n   following the considerations described\
    \ in Section 5.1.2 for\n   de-registering those prefixes.  The way in which the\
    \ DHCPv6\n   delegating router triggers the mobile access gateway in order to\n\
    \   de-register the prefixes is beyond the scope of this document.\n   In case\
    \ the mobile router performs a handover and attaches to a\n   different mobile\
    \ access gateway, the following cases are possible:\n   o  The new mobile access\
    \ gateway does not support the delegation of\n      mobile network prefixes described\
    \ in this specification.  In this\n      case, forwarding of the previously DMNPs\
    \ is no longer performed.\n   o  The new mobile access gateway supports the delegation\
    \ of mobile\n      network prefixes described in this specification.  There are\
    \ two\n      possible cases upon the reception of the Solicit message by the\n\
    \      delegating router.  If the MAG already knows the DMNPs, it conveys\n  \
    \    them in a DMNP option included in the Proxy Binding Update sent to\n    \
    \  the local mobility anchor, which then authorizes them based on: a)\n      the\
    \ content of the associated Binding Cache entry (if one exists),\n      b) the\
    \ user profile (if the allocation is static), or c) checking\n      that the DMNPs\
    \ are not already allocated.  On the other hand, if\n      the mobile access gateway\
    \ is not aware of the DMNPs, it will\n      include 0.0.0.0 / :: in a DMNP option\
    \ included in the Proxy\n      Binding Update sent to the LMA, which will provide\
    \ the right\n      prefixes back in the Proxy Binding Acknowledgement based on\
    \ a) the\n      content of the associated Binding Cache entry (if one exits),\
    \ b)\n      the profile (if static allocation is used), or c) dynamic\n      assignment.\n"
- title: 5.1.3.2.  Delegating Router Co-Located with Local Mobility Anchor
  contents:
  - "5.1.3.2.  Delegating Router Co-Located with Local Mobility Anchor\n   A DHCPv6\
    \ relay agent function running on the mobile access gateway\n   will forward the\
    \ DHCP messages to the local mobility anchor that has\n   the co-located delegating\
    \ router function.  The requesting router and\n   the delegating router complete\
    \ the DHCP messages related to prefix\n   delegation.\n   During the DHCPv6 exchange,\
    \ the standard DHCPv6 considerations apply\n   with respect to the interactions\
    \ between the delegating router,\n   DHCPv6 relay agent, and requesting router.\n\
    \   The mobile access gateway learns from the co-located DHCPv6 relay\n   agent\
    \ the prefixes allocated by the delegating router.  The way in\n   which the mobile\
    \ access gateway obtains this information from the\n   DHCPv6 relay agent function\
    \ is beyond the scope of this document.\n   The mobile access gateway will apply\
    \ the considerations in\n   Section 5.1.2 for requesting the local mobility anchor\
    \ to enable\n   delegated prefix support.  The mobile access gateway will include\n\
    \   exactly one instance of the Delegated Mobile Network Prefix option\n   with\
    \ NON_ZERO prefix value for each of the mobile network prefixes\n   that the mobile\
    \ access gateway is requesting the local mobility\n   anchor to allocate.  The\
    \ prefix value(s) in the option will be the\n   prefix(es) obtained via DHCP prefix\
    \ delegation.\n   The mobile access gateway, upon successfully completing the\
    \ Proxy\n   Binding Update signaling with the local mobility anchor, will provide\n\
    \   the obtained prefixes to the DHCPv6 relay agent for prefix\n   assignment.\
    \  The delegating router is provided with the delegated\n   prefix(es) completing\
    \ the standard DHCPv6 signaling.  These prefixes\n   can then be advertised in\
    \ the mobile network and therefore used by\n   the local fixed nodes to autoconfigure\
    \ IP addresses, allowing them to\n   gain access to the Internet.\n   o  In case\
    \ the Proxy Binding Update signaling with the local mobility\n      anchor is\
    \ not completed successfully, for example, because the\n      local mobility anchor\
    \ is not authorized for DMNP, the requested\n      prefix is in use, or the delegated\
    \ prefix(es) do not match the\n      ones allocated by DHCP prefix delegation,\
    \ the DHCPv6 relay agent\n      MAY send a Reply message to the requesting router\
    \ with no\n      IA_PREFIX suboptions and with a Status Code option as described\
    \ in\n      [RFC3633], Section 11.2.\n   In case the mobile router performs a\
    \ handover and attaches to a\n   different mobile access gateway, the following\
    \ cases are possible:\n   o  The new mobile access gateway does not support the\
    \ delegation of\n      mobile network prefixes described in this specification.\
    \  In this\n      case, forwarding of the previously delegated mobile network\n\
    \      prefixes is no longer performed.\n   o  The new mobile access gateway supports\
    \ the delegation of mobile\n      network prefixes described in this specification.\
    \  There are two\n      possible cases upon the reception of the Solicit message\
    \ by the\n      DHCPv6 relay agent.  If the MAG already knows the DMNPs, it\n\
    \      conveys them in a DMNP option included in the Proxy Binding Update\n  \
    \    sent to the local mobility anchor, which then authorizes them\n      based\
    \ on: a) the content of the associated Binding Cache entry (if\n      one exists),\
    \ b) the user profile (if the allocation is static), or\n      c) checking that\
    \ the DMNPs are not already allocated.  On the\n      other hand, if the mobile\
    \ access gateway is not aware of the\n      DMNPs, it will include 0.0.0.0 / ::\
    \ in a DMNP option included in\n      the Proxy Binding Update sent to the LMA,\
    \ which will provide the\n      right prefixes back in the Proxy Binding Acknowledgement\
    \ based on\n      a) the content of the associated Binding Cache entry (if one\n\
    \      exits), b) the profile (if static allocation is used), or c)\n      dynamic\
    \ assignment.\n"
- title: 5.1.4.  Packet Forwarding
  contents:
  - "5.1.4.  Packet Forwarding\n   On receiving an IP packet from a mobile router,\
    \ the mobile access\n   gateway MUST ensure, before tunneling the packet to the\
    \ local\n   mobility anchor, that there is an established binding for the mobile\n\
    \   router and that the source IP address of the packet is a prefix\n   delegated\
    \ to that mobile router.  If the source address of the\n   received IP packet\
    \ is not part of the DMNP, then the mobile access\n   gateway MUST NOT tunnel\
    \ the packet to the local mobility anchor.\n   On receiving an IP packet from\
    \ the bidirectional tunnel established\n   with the local mobility anchor, the\
    \ mobile access gateway MUST first\n   decapsulate the packet (remove the outer\
    \ header) and then use the\n   destination address of the (inner) packet to forward\
    \ it on the\n   interface through which the mobile router is reachable.\n   The\
    \ above forwarding considerations are not applicable to the IP\n   traffic sent/received\
    \ to/from the mobile router's home address (IPv4\n   HoA / Home Network Prefix\
    \ (HNP)).  For the mobile router's home\n   address traffic, forwarding considerations\
    \ from [RFC5213] and\n   [RFC5844] continue to apply.\n"
- title: 5.2.  LMA Considerations
  contents:
  - '5.2.  LMA Considerations

    '
- title: 5.2.1.  Extensions to Binding Cache Entry Data Structure
  contents:
  - "5.2.1.  Extensions to Binding Cache Entry Data Structure\n   In order to support\
    \ this specification, the conceptual Binding Cache\n   entry (BCE) data structure\
    \ [RFC5213] needs to be extended to include\n   the Delegated Mobile Network Prefix\
    \ (DMNP) list.  Each entry in the\n   list represents a DMNP.\n"
- title: 5.2.2.  Signaling Considerations
  contents:
  - "5.2.2.  Signaling Considerations\n   If the Proxy Binding Update message does\
    \ not include any Delegated\n   Mobile Network Prefix option(s) (Section 4.1),\
    \ then the local\n   mobility anchor MUST NOT enable Delegated Prefix support\
    \ for the\n   mobility session, and the Proxy Binding Acknowledgement message\
    \ that\n   is sent in response MUST NOT contain any Delegated Mobile Network\n\
    \   Prefix option(s).\n   If the Proxy Binding Update message includes one or\
    \ more Delegated\n   Mobile Network Prefix options, but the local mobility anchor\
    \ is not\n   configured with Delegated Prefix support, then the local mobility\n\
    \   anchor will ignore the option(s) and process the rest of the option\n   as\
    \ specified in [RFC5213].  This would have no effect on the\n   operation of the\
    \ rest of the protocol.  The Proxy Binding\n   Acknowledgement message that is\
    \ sent in response will not include any\n   Delegated Mobile Network Prefix option(s).\n\
    \   If the Proxy Binding Update message has the Delegated Mobile Network\n   Prefix\
    \ option(s) and if the local mobility anchor is configured for\n   Delegated Prefix\
    \ support, then the local mobility anchor MUST enable\n   the Delegated Mobile\
    \ Network Prefix option for that mobility session.\n   The Proxy Binding Acknowledgement\
    \ message that is sent in response\n   MUST include the Delegated Mobile Network\
    \ Prefix option(s).  The\n   following considerations apply.\n   o  If there is\
    \ at least one instance of the Delegated Mobile Network\n      Prefix option with\
    \ an ALL_ZERO [RFC5213] prefix value, then this\n      serves as a request for\
    \ the local mobility anchor to perform the\n      assignment of one or more DMNPs.\n\
    \      *  A Delegated Mobile Network option with an ALL_ZERO value and\n     \
    \    with the (V) flag set to a value of (0) is a request for the\n         local\
    \ mobility anchor to allocate one or more IPv6 prefixes.\n      *  A Delegated\
    \ Mobile Network option with an ALL_ZERO value and\n         with the (V) flag\
    \ set to a value of (1) is a request for the\n         local mobility anchor to\
    \ allocate one or more IPv4 prefixes.\n      *  Inclusion of multiple instances\
    \ of Delegated Mobile Network\n         options with ALL_ZERO values, one with\
    \ the (V) flag set to a\n         value of (1) and another instance with the (V)\
    \ flag set to a\n         value of (0), is a request to allocate both IPv4 and\
    \ IPv6\n         prefixes.\n   o  If there are no instances of the Delegated Mobile\
    \ Network Prefix\n      option present in the request with an ALL_ZERO value but\
    \ a\n      specific prefix value exists, then this serves as a request for\n \
    \     the local mobility anchor to perform the allocation of the\n      requested\
    \ prefix(es).\n      *  If any one of the requested prefixes are assigned to some\
    \ other\n         mobility node, or not from an authorized pool that the local\n\
    \         mobility can allocate for that mobility session, then the Proxy\n  \
    \       Binding Update MUST be rejected by sending a Proxy Binding\n         Acknowledgement\
    \ message with the Status field set to\n         REQUESTED_DMNP_IN_USE (Requested\
    \ DMNP is in use).\n   Upon accepting the Proxy Binding Update, the local mobility\
    \ anchor\n   MUST send a Proxy Binding Acknowledgement message with the Status\n\
    \   field set to 0 (Proxy Binding Update accepted).\n   o  The message MUST include\
    \ one instance of the Delegated Mobile\n      Network Prefix option for each of\
    \ the allocated IPv4/IPv6 DMNPs.\n   o  The Delegated Mobile Network Prefix (DMNP)\
    \ list in the mobile\n      router's Binding Cache entry has to be updated with\
    \ the allocated\n      prefix(es).  However, if the request is a de-registration\
    \ request\n      with a lifetime value of (0), the DMNP list has to be removed\n\
    \      along with the Binding Cache entry.\n   o  A route (or a platform-specific\
    \ equivalent function that sets up\n      the forwarding) for each of the allocated\
    \ prefixes over the tunnel\n      has to be added.  However, if the request is\
    \ a de-registration\n      request, with a lifetime value of (0), all the IPv4/IPv6\
    \ delegated\n      prefix routes created for that session have to be removed.\n"
- title: 5.2.3.  Packet Forwarding
  contents:
  - "5.2.3.  Packet Forwarding\n   The local mobility anchor MUST advertise a connected\
    \ route into the\n   routing infrastructure for the IP prefixes delegated to all\
    \ of the\n   mobile routers that it is serving.  This step essentially enables\
    \ the\n   local mobility anchor to be a routing anchor for those IP prefixes\n\
    \   and be able to intercept IP packets sent to those mobile networks.\n   On\
    \ receiving a packet from a correspondent node with the destination\n   address\
    \ matching any of the mobile router's DMNPs, the local mobility\n   anchor MUST\
    \ forward the packet through the bidirectional tunnel set\n   up with the mobile\
    \ access gateway where the mobile router is\n   attached.\n   On receiving an\
    \ IP packet from the bidirectional tunnel established\n   with the mobile access\
    \ gateway, the local mobility anchor MUST first\n   decapsulate the packet (remove\
    \ the outer header) and then use the\n   destination address of the (inner) packet\
    \ for forwarding decisions.\n   The local mobility anchor MUST ensure that there\
    \ is an established\n   binding for the mobile router and that the source IP address\
    \ of the\n   packet is a prefix delegated to a mobile router reachable over that\n\
    \   bidirectional tunnel.\n   The above forwarding considerations are not applicable\
    \ to the IP\n   traffic sent/received to/from the mobile router's home address\
    \ (IPv4\n   HoA/HNP).  For the mobile router's home address traffic, forwarding\n\
    \   considerations from [RFC5213] and [RFC5844] continue to apply.\n"
- title: 5.3.  Security Policy Database (SPD) Example Entries
  contents:
  - "5.3.  Security Policy Database (SPD) Example Entries\n   The use of DHCPv6, as\
    \ described in this document, requires message\n   integrity protection and source\
    \ authentication.  The IPsec security\n   mechanism used by Proxy Mobile IPv6\
    \ [RFC5213] for securing the\n   signaling messages between the mobile access\
    \ gateway and the local\n   mobility anchor can be used for securing the DHCP\
    \ signaling between\n   the mobile access gateway and the local mobility anchor.\n\
    \   The Security Policy Database (SPD) and Security Association Database\n   (SAD)\
    \ entries necessary to protect the DHCP signaling is specified\n   below.  The\
    \ format of these entries is based on [RFC4877]\n   conventions.  The SPD and\
    \ SAD entries are only example\n   configurations.  A particular implementation\
    \ of mobile access gateway\n   and local mobility anchor implementation can configure\
    \ different SPD\n   and SAD entries as long as they provide the required security\
    \ for\n   protecting DHCP signaling messages.\n   For the examples described in\
    \ this document, a mobile access gateway\n   with address \"mag_address_1\" and\
    \ a local mobility anchor with address\n   \"lma_address_1\" are assumed.\n  \
    \    mobile access gateway SPD-S:\n        - IF local_address = mag_address_1\
    \ &\n             remote_address = lma_address_1 & proto = UDP &\n           \
    \  local_port = any & remote_port = DHCP\n          Then use SA1 (OUT) and SA2\
    \ (IN)\n      mobile access gateway SAD:\n        - SA1(OUT, spi_a, lma_address_1,\
    \ ESP, TRANSPORT):\n              local_address = mag_address_1 &\n          \
    \    remote_address = lma_address_1 &\n              proto = UDP & remote_port\
    \ = DHCP\n        - SA2(IN, spi_b, mag_address_1, ESP, TRANSPORT):\n         \
    \     local_address = lma_address_1 &\n              remote_address = mag_address_1\
    \ &\n              proto = UDP & local_port = DHCP\n      local mobility anchor\
    \ SPD-S:\n        - IF local_address = lma_address_1 &\n             remote_address\
    \ = mag_address_1 & proto = UDP &\n             local_port = DHCP & remote_port\
    \ = any\n          Then use SA2 (OUT) and SA1 (IN)\n      local mobility anchor\
    \ SAD:\n        - SA2(OUT, spi_b, mag_address_1, ESP, TRANSPORT):\n          \
    \    local_address = lma_address_1 &\n              remote_address = mag_address_1\
    \ &\n              proto = UDP & local_port = DHCP\n        - SA1(IN, spi_a, lma_address_1,\
    \ ESP, TRANSPORT):\n              local_address = mag_address_1 &\n          \
    \    remote_address = lma_address_1 &\n              proto = UDP & remote_port\
    \ = DHCP\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   The Delegated Mobile Network Prefix option defined\
    \ in this\n   specification is for use in Proxy Binding Update and Proxy Binding\n\
    \   Acknowledgement messages.  This option is carried like any other\n   mobility\
    \ header option as specified in [RFC5213].  Therefore, it\n   inherits from [RFC5213]\
    \ its security guidelines and does not require\n   any additional security considerations.\n\
    \   The use of DHCPv6 in this specification is as defined in the DHCPv6\n   base\
    \ specification [RFC3315] and DHCPv6 prefix delegation\n   specification [RFC3633].\
    \  The security considerations specified in\n   those specifications apply to\
    \ this document.\n   If IPsec is used, the IPsec security association that is\
    \ used for\n   protecting the Proxy Binding Update and Proxy Binding Acknowledgement\n\
    \   also needs to be used for protecting the DHCPv6 signaling between the\n  \
    \ mobile access gateway and the local mobility anchor.  Considerations\n   specified\
    \ in Section 5.3 identify the extensions to security policy\n   entries [RFC4301]\n"
- title: 7.  IANA Considerations
  contents:
  - "7.  IANA Considerations\n   o  This specification defines a new mobility header\
    \ option, the\n      Delegated Mobile Network Prefix option.  This mobility option\
    \ is\n      described in Section 4.1.  The type value 55 for this message has\n\
    \      been allocated from the \"Mobility Options\" registry at http://\n    \
    \  www.iana.org/assignments/mobility-parameters.\n   o  This document also defines\
    \ two new status code values for use in\n      the Proxy Binding Acknowledgement\
    \ message, as described in\n      Section 4.2.  These status codes are\n     \
    \ NOT_AUTHORIZED_FOR_DELEGATED_MNP (not authorized for DMNP) with a\n      status\
    \ code value of 177 and REQUESTED_DMNP_IN_USE (Requested DMNP\n      is in use)\
    \ with a status code value of 178.  These values have\n      been assigned from\
    \ the same number space as allocated for other\n      status codes [RFC6275].\n"
- title: 8.  Acknowledgements
  contents:
  - "8.  Acknowledgements\n   The authors would like to acknowledge Ryuji Wakikawa,\
    \ Alexandru\n   Petrescu, Behcet Sarikaya, Seil Jeon, Basavaraj Patil, Brian\n\
    \   Haberman, and Michal Hoeft for all the discussions and reviews of\n   this\
    \ document.\n   The work of Carlos J. Bernardos has also been partially supported\
    \ by\n   the European Community's Seventh Framework Programme (FP7-ICT-2009-5)\n\
    \   under grant agreement n. 258053 (MEDIEVAL project) and by the\n   Ministry\
    \ of Science and Innovation of Spain under the QUARTET project\n   (TIN2009-13992-C02-01).\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,\n\
    \              and M. Carney, \"Dynamic Host Configuration Protocol for\n    \
    \          IPv6 (DHCPv6)\", RFC 3315, July 2003.\n   [RFC3633]  Troan, O. and\
    \ R. Droms, \"IPv6 Prefix Options for Dynamic\n              Host Configuration\
    \ Protocol (DHCP) version 6\", RFC 3633,\n              December 2003.\n   [RFC4301]\
    \  Kent, S. and K. Seo, \"Security Architecture for the\n              Internet\
    \ Protocol\", RFC 4301, December 2005.\n   [RFC4649]  Volz, B., \"Dynamic Host\
    \ Configuration Protocol for IPv6\n              (DHCPv6) Relay Agent Remote-ID\
    \ Option\", RFC 4649, August\n              2006.\n   [RFC4877]  Devarapalli,\
    \ V. and F. Dupont, \"Mobile IPv6 Operation with\n              IKEv2 and the\
    \ Revised IPsec Architecture\", RFC 4877, April\n              2007.\n   [RFC5213]\
    \  Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K.,\n              and\
    \ B. Patil, \"Proxy Mobile IPv6\", RFC 5213, August 2008.\n   [RFC5844]  Wakikawa,\
    \ R. and S. Gundavelli, \"IPv4 Support for Proxy\n              Mobile IPv6\"\
    , RFC 5844, May 2010.\n   [RFC6275]  Perkins, C., Johnson, D., and J. Arkko, \"\
    Mobility Support\n              in IPv6\", RFC 6275, July 2011.\n   [RFC6276]\
    \  Droms, R., Thubert, P., Dupont, F., Haddad, W., and C.\n              Bernardos,\
    \ \"DHCPv6 Prefix Delegation for Network Mobility\n              (NEMO)\", RFC\
    \ 6276, July 2011.\n   [RFC6603]  Korhonen, J., Savolainen, T., Krishnan, S.,\
    \ and O. Troan,\n              \"Prefix Exclude Option for DHCPv6-based Prefix\n\
    \              Delegation\", RFC 6603, May 2012.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [RFC4885]  Ernst, T. and H-Y. Lach, \"Network\
    \ Mobility Support\n              Terminology\", RFC 4885, July 2007.\n   [RFC6656]\
    \  Johnson, R., Kinnear, K., and M. Stapp, \"Description of\n              Cisco\
    \ Systems' Subnet Allocation Option for DHCPv4\", RFC\n              6656, July\
    \ 2012.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Xingyue Zhou\n   ZTE Corporation\n   No.50 Software Avenue,\
    \ Yuhuatai District\n   Nanjing\n   China\n   Phone: +86-25-8801-4634\n   EMail:\
    \ zhou.xingyue@zte.com.cn\n   Jouni Korhonen\n   Broadcom\n   Porkkalankatu 24\n\
    \   Helsinki  FIN-00180\n   Finland\n   EMail: jouni.nospam@gmail.com\n   Carl\
    \ Williams\n   Consultant\n   San Jose, CA\n   USA\n   EMail: carlw@mcsr-labs.org\n\
    \   Sri Gundavelli\n   Cisco\n   170 West Tasman Drive\n   San Jose, CA  95134\n\
    \   USA\n   EMail: sgundave@cisco.com\n   Carlos J. Bernardos\n   Universidad\
    \ Carlos III de Madrid\n   Av. Universidad, 30\n   Leganes, Madrid  28911\n  \
    \ Spain\n   Phone: +34 91624 6236\n   EMail: cjbc@it.uc3m.es\n   URI:   http://www.it.uc3m.es/cjbc/\n"
