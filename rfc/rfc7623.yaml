- title: __initial_text__
  contents:
  - '    Provider Backbone Bridging Combined with Ethernet VPN (PBB-EVPN)

    '
- title: Abstract
  contents:
  - "Abstract\n   This document discusses how Ethernet Provider Backbone Bridging\
    \ (PBB)\n   can be combined with Ethernet VPN (EVPN) in order to reduce the\n\
    \   number of BGP MAC Advertisement routes by aggregating Customer/Client\n  \
    \ MAC (C-MAC) addresses via Provider Backbone MAC (B-MAC) address,\n   provide\
    \ client MAC address mobility using C-MAC aggregation, confine\n   the scope of\
    \ C-MAC learning to only active flows, offer per-site\n   policies, and avoid\
    \ C-MAC address flushing on topology changes.  The\n   combined solution is referred\
    \ to as PBB-EVPN.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7623.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2015 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Terminology .....................................................4\n  \
    \ 3. Requirements ....................................................4\n    \
    \  3.1. MAC Advertisement Route Scalability ........................5\n      3.2.\
    \ C-MAC Mobility Independent of B-MAC Advertisements .........5\n      3.3. C-MAC\
    \ Address Learning and Confinement .....................5\n      3.4. Per-Site\
    \ Policy Support ....................................6\n      3.5. No C-MAC Address\
    \ Flushing for All-Active Multihoming .......6\n   4. Solution Overview ...............................................6\n\
    \   5. BGP Encoding ....................................................7\n  \
    \    5.1. Ethernet Auto-Discovery Route ..............................7\n    \
    \  5.2. MAC/IP Advertisement Route .................................7\n      5.3.\
    \ Inclusive Multicast Ethernet Tag Route .....................8\n      5.4. Ethernet\
    \ Segment Route .....................................8\n      5.5. ESI Label Extended\
    \ Community ...............................8\n      5.6. ES-Import Route Target\
    \ .....................................9\n      5.7. MAC Mobility Extended Community\
    \ ............................9\n      5.8. Default Gateway Extended Community\
    \ .........................9\n   6. Operation .......................................................9\n\
    \      6.1. MAC Address Distribution over Core .........................9\n  \
    \    6.2. Device Multihoming .........................................9\n    \
    \       6.2.1. Flow-Based Load-Balancing ...........................9\n      \
    \            6.2.1.1. PE B-MAC Address Assignment ...............10\n        \
    \          6.2.1.2. Automating B-MAC Address Assignment .......11\n          \
    \        6.2.1.3. Split Horizon and Designated\n                           Forwarder\
    \ Election ........................12\n           6.2.2. Load-Balancing based\
    \ on I-SID ......................12\n                  6.2.2.1. PE B-MAC Address\
    \ Assignment ...............12\n                  6.2.2.2. Split Horizon and Designated\n\
    \                           Forwarder Election ........................13\n  \
    \                6.2.2.3. Handling Failure Scenarios ................13\n    \
    \  6.3. Network Multihoming .......................................14\n      6.4.\
    \ Frame Forwarding ..........................................14\n           6.4.1.\
    \ Unicast ............................................15\n           6.4.2. Multicast/Broadcast\
    \ ................................15\n      6.5. MPLS Encapsulation of PBB Frames\
    \ ..........................16\n   7. Minimizing ARP/ND Broadcast ....................................16\n\
    \   8. Seamless Interworking with IEEE 802.1aq / 802.1Qbp .............17\n  \
    \    8.1. B-MAC Address Assignment ..................................17\n    \
    \  8.2. IEEE 802.1aq / 802.1Qbp B-MAC Address Advertisement .......17\n      8.3.\
    \ Operation: ................................................17\n   9. Solution\
    \ Advantages ............................................18\n      9.1. MAC Advertisement\
    \ Route Scalability .......................18\n      9.2. C-MAC Mobility Independent\
    \ of B-MAC Advertisements ........18\n      9.3. C-MAC Address Learning and Confinement\
    \ ....................19\n      9.4. Seamless Interworking with 802.1aq Access\
    \ Networks ........19\n      9.5. Per-Site Policy Support ...................................20\n\
    \      9.6. No C-MAC Address Flushing for All-Active Multihoming ......20\n  \
    \ 10. Security Considerations .......................................20\n   11.\
    \ IANA Considerations ...........................................20\n   12. References\
    \ ....................................................21\n      12.1. Normative\
    \ References .....................................21\n      12.2. Informative\
    \ References ...................................21\n   Acknowledgements ..................................................22\n\
    \   Contributors ......................................................22\n  \
    \ Authors' Addresses ................................................23\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   [RFC7432] introduces a solution for multipoint Layer 2 Virtual\n\
    \   Private Network (L2VPN) services, with advanced multihoming\n   capabilities,\
    \ using BGP for distributing customer/client MAC address\n   reachability information\
    \ over the core MPLS/IP network.  [PBB]\n   defines an architecture for Ethernet\
    \ Provider Backbone Bridging\n   (PBB), where MAC tunneling is employed to improve\
    \ service instance\n   and MAC address scalability in Ethernet as well as VPLS\
    \ networks\n   [RFC7080].\n   In this document, we discuss how PBB can be combined\
    \ with EVPN in\n   order to: reduce the number of BGP MAC Advertisement routes\
    \ by\n   aggregating Customer/Client MAC (C-MAC) addresses via Provider\n   Backbone\
    \ MAC (B-MAC) address, provide client MAC address mobility\n   using C-MAC aggregation,\
    \ confine the scope of C-MAC learning to only\n   active flows, offer per-site\
    \ policies, and avoid C-MAC address\n   flushing on topology changes.  The combined\
    \ solution is referred to\n   as PBB-EVPN.\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   ARP: Address Resolution Protocol\n   BEB: Backbone Edge Bridge\n\
    \   B-MAC: Backbone MAC\n   B-VID: Backbone VLAN ID\n   CE: Customer Edge\n  \
    \ C-MAC: Customer/Client MAC\n   ES: Ethernet Segment\n   ESI: Ethernet Segment\
    \ Identifier\n   EVI: EVPN Instance\n   EVPN: Ethernet VPN\n   I-SID: Service\
    \ Instance Identifier (24 bits and global within a PBB\n          network see\
    \ [RFC7080])\n   LSP: Label Switched Path\n   MP2MP: Multipoint to Multipoint\n\
    \   MP2P: Multipoint to Point\n   NA: Neighbor Advertisement\n   ND: Neighbor\
    \ Discovery\n   P2MP: Point to Multipoint\n   P2P: Point to Point\n   PBB: Provider\
    \ Backbone Bridge\n   PE: Provider Edge\n   RT: Route Target\n   VPLS: Virtual\
    \ Private LAN Service\n   Single-Active Redundancy Mode: When only a single PE,\
    \ among a group\n   of PEs attached to an Ethernet segment, is allowed to forward\
    \ traffic\n   to/from that Ethernet segment, then the Ethernet segment is defined\n\
    \   to be operating in Single-Active redundancy mode.\n   All-Active Redundancy\
    \ Mode: When all PEs attached to an Ethernet\n   segment are allowed to forward\
    \ traffic to/from that Ethernet segment,\n   then the Ethernet segment is defined\
    \ to be operating in All-Active\n   redundancy mode.\n   The key words \"MUST\"\
    , \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD\
    \ NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this\n   document are to\
    \ be interpreted as described in BCP 14 [RFC2119].\n"
- title: 3.  Requirements
  contents:
  - "3.  Requirements\n   The requirements for PBB-EVPN include all the requirements\
    \ for EVPN\n   that were described in [RFC7209], in addition to the following:\n"
- title: 3.1.  MAC Advertisement Route Scalability
  contents:
  - "3.1.  MAC Advertisement Route Scalability\n   In typical operation, an EVPN PE\
    \ sends a BGP MAC Advertisement route\n   per C-MAC address.  In certain applications,\
    \ this poses scalability\n   challenges, as is the case in data center interconnect\
    \ (DCI)\n   scenarios where the number of virtual machines (VMs), and hence the\n\
    \   number of C-MAC addresses, can be in the millions.  In such\n   scenarios,\
    \ it is required to reduce the number of BGP MAC\n   Advertisement routes by relying\
    \ on a 'MAC summarization' scheme, as\n   is provided by PBB.\n"
- title: 3.2.  C-MAC Mobility Independent of B-MAC Advertisements
  contents:
  - "3.2.  C-MAC Mobility Independent of B-MAC Advertisements\n   Certain applications,\
    \ such as virtual machine mobility, require\n   support for fast C-MAC address\
    \ mobility.  For these applications,\n   when using EVPN, the virtual machine\
    \ MAC address needs to be\n   transmitted in BGP MAC Advertisement route.  Otherwise,\
    \ traffic would\n   be forwarded to the wrong segment when a virtual machine moves\
    \ from\n   one ES to another.  This means MAC address prefixes cannot be used\
    \ in\n   data center applications.\n   In order to support C-MAC address mobility,\
    \ while retaining the\n   scalability benefits of MAC summarization, PBB technology\
    \ is used.\n   It defines a B-MAC address space that is independent of the C-MAC\n\
    \   address space, and aggregates C-MAC addresses via a single B-MAC\n   address.\n"
- title: 3.3.  C-MAC Address Learning and Confinement
  contents:
  - "3.3.  C-MAC Address Learning and Confinement\n   In EVPN, all the PE nodes participating\
    \ in the same EVPN instance are\n   exposed to all the C-MAC addresses learned\
    \ by any one of these PE\n   nodes because a C-MAC learned by one of the PE nodes\
    \ is advertised in\n   BGP to other PE nodes in that EVPN instance.  This is the\
    \ case even\n   if some of the PE nodes for that EVPN instance are not involved\
    \ in\n   forwarding traffic to, or from, these C-MAC addresses.  Even if an\n\
    \   implementation does not install hardware forwarding entries for C-MAC\n  \
    \ addresses that are not part of active traffic flows on that PE, the\n   device\
    \ memory is still consumed by keeping record of the C-MAC\n   addresses in the\
    \ routing information base (RIB) table.  In network\n   applications with millions\
    \ of C-MAC addresses, this introduces a non-\n   trivial waste of PE resources.\
    \  As such, it is required to confine\n   the scope of visibility of C-MAC addresses\
    \ to only those PE nodes\n   that are actively involved in forwarding traffic\
    \ to, or from, these\n   addresses.\n"
- title: 3.4.  Per-Site Policy Support
  contents:
  - "3.4.  Per-Site Policy Support\n   In many applications, it is required to be\
    \ able to enforce\n   connectivity policy rules at the granularity of a site (or\
    \ segment).\n   This includes the ability to control which PE nodes in the network\n\
    \   can forward traffic to, or from, a given site.  Both EVPN and PBB-\n   EVPN\
    \ are capable of providing this granularity of policy control.  In\n   the case\
    \ where the policy needs to be at the granularity of per C-MAC\n   address, then\
    \ the C-MAC address should be learned in the control\n   plane (in BGP) per [RFC7432].\n"
- title: 3.5.  No C-MAC Address Flushing for All-Active Multihoming
  contents:
  - "3.5.  No C-MAC Address Flushing for All-Active Multihoming\n   Just as in [RFC7432],\
    \ it is required to avoid C-MAC address flushing\n   upon link, port, or node\
    \ failure for All-Active multihomed segments.\n"
- title: 4.  Solution Overview
  contents:
  - "4.  Solution Overview\n   The solution involves incorporating IEEE Backbone Edge\
    \ Bridge (BEB)\n   functionality on the EVPN PE nodes similar to PBB-VPLS, where\
    \ BEB\n   functionality is incorporated in the VPLS PE nodes.  The PE devices\n\
    \   would then receive 802.1Q Ethernet frames from their attachment\n   circuits,\
    \ encapsulate them in the PBB header, and forward the frames\n   over the IP/MPLS\
    \ core.  On the egress EVPN PE, the PBB header is\n   removed following the MPLS\
    \ disposition, and the original 802.1Q\n   Ethernet frame is delivered to the\
    \ customer equipment.\n                   BEB   +--------------+  BEB\n      \
    \             ||    |              |  ||\n                   \\/    |        \
    \      |  \\/\n       +----+ AC1 +----+ |              | +----+   +----+\n   \
    \    | CE1|-----|    | |              | |    |---| CE2|\n       +----+\\    |\
    \ PE1| |   IP/MPLS    | | PE3|   +----+\n              \\   +----+ |   Network\
    \    | +----+\n               \\         |              |\n             AC2\\\
    \ +----+ |              |\n                 \\|    | |              |\n      \
    \            | PE2| |              |\n                  +----+ |             \
    \ |\n                    /\\   +--------------+\n                    ||\n    \
    \                BEB\n         <-802.1Q-> <------PBB over MPLS------> <-802.1Q->\n\
    \                        Figure 1: PBB-EVPN Network\n   The PE nodes perform the\
    \ following functions:\n   -  Learn customer/client MAC addresses (C-MACs) over\
    \ the attachment\n      circuits in the data plane, per normal bridge operation.\n\
    \   -  Learn remote C-MAC to B-MAC bindings in the data plane for traffic\n  \
    \    received from the core per the bridging operation described in\n      [PBB].\n\
    \   -  Advertise local B-MAC address reachability information in BGP to\n    \
    \  all other PE nodes in the same set of service instances.  Note\n      that\
    \ every PE has a set of B-MAC addresses that uniquely\n      identifies the device.\
    \  B-MAC address assignment is described in\n      details in Section 6.2.2.\n\
    \   -  Build a forwarding table from remote BGP advertisements received\n    \
    \  associating remote B-MAC addresses with remote PE IP addresses and\n      the\
    \ associated MPLS label(s).\n"
- title: 5.  BGP Encoding
  contents:
  - "5.  BGP Encoding\n   PBB-EVPN leverages the same BGP routes and attributes defined\
    \ in\n   [RFC7432], adapted as described below.\n"
- title: 5.1.  Ethernet Auto-Discovery Route
  contents:
  - "5.1.  Ethernet Auto-Discovery Route\n   This route and all of its associated\
    \ modes are not needed in PBB-EVPN\n   because PBB encapsulation provides the\
    \ required level of indirection\n   for C-MAC addresses -- i.e., an ES can be\
    \ represented by a B-MAC\n   address for the purpose of data-plane learning/forwarding.\n\
    \   The receiving PE knows that it need not wait for the receipt of the\n   Ethernet\
    \ A-D (auto-discovery) route for route resolution by means of\n   the reserved\
    \ ESI encoded in the MAC Advertisement route: the ESI\n   values of 0 and MAX-ESI\
    \ indicate that the receiving PE can resolve\n   the path without an Ethernet\
    \ A-D route.\n"
- title: 5.2.  MAC/IP Advertisement Route
  contents:
  - "5.2.  MAC/IP Advertisement Route\n   The EVPN MAC/IP Advertisement route is used\
    \ to distribute B-MAC\n   addresses of the PE nodes instead of the C-MAC addresses\
    \ of end-\n   stations/hosts.  This is because the C-MAC addresses are learned\
    \ in\n   the data plane for traffic arriving from the core.  The MAC\n   Advertisement\
    \ route is encoded as follows:\n   -  The MAC address field contains the B-MAC\
    \ address.\n   -  The Ethernet Tag field is set to 0.\n   -  The Ethernet Segment\
    \ Identifier field must be set to either 0 (for\n      single-homed segments or\
    \ multihomed segments with per-I-SID load-\n      balancing) or to MAX-ESI (for\
    \ multihomed segments with per-flow\n      load-balancing).  All other values\
    \ are not permitted.\n   -  All other fields are set as defined in [RFC7432].\n\
    \   This route is tagged with the RT corresponding to its EVI.  This EVI\n   is\
    \ analogous to a B-VID.\n"
- title: 5.3.  Inclusive Multicast Ethernet Tag Route
  contents:
  - "5.3.  Inclusive Multicast Ethernet Tag Route\n   This route is used for multicast\
    \ pruning per I-SID.  It is used for\n   auto-discovery of PEs participating in\
    \ a given I-SID so that a\n   multicast tunnel (MP2P, P2P, P2MP, or MP2MP LSP)\
    \ can be set up for\n   that I-SID.  [RFC7080] uses multicast pruning per I-SID\
    \ based on\n   [MMRP], which is a soft-state protocol.  The advantages of multicast\n\
    \   pruning using this BGP route over [MMRP] are that a) it scales very\n   well\
    \ for a large number of PEs and b) it works with any type of LSP\n   (MP2P, P2P,\
    \ P2MP, or MP2MP); whereas, [MMRP] only works over P2P\n   pseudowires.  The Inclusive\
    \ Multicast Ethernet Tag route is encoded\n   as follows:\n   -  The Ethernet\
    \ Tag field is set with the appropriate I-SID value.\n   -  All other fields are\
    \ set as defined in [RFC7432].\n   This route is tagged with an RT.  This RT SHOULD\
    \ be set to a value\n   corresponding to its EVI (which is analogous to a B-VID).\
    \  The RT for\n   this route MAY also be auto-derived from the corresponding Ethernet\n\
    \   Tag (I-SID) based on the procedure specified in Section 5.1.2.1 of\n   [OVERLAY].\n"
- title: 5.4.  Ethernet Segment Route
  contents:
  - "5.4.  Ethernet Segment Route\n   This route is used for auto-discovery of PEs\
    \ belonging to a given\n   redundancy group (e.g., attached to a given ES) per\
    \ [RFC7432].\n"
- title: 5.5.  ESI Label Extended Community
  contents:
  - "5.5.  ESI Label Extended Community\n   This extended community is not used in\
    \ PBB-EVPN.  In [RFC7432], this\n   extended community is used along with the\
    \ Ethernet A-D route to\n   advertise an MPLS label for the purpose of split-horizon\
    \ filtering.\n   Since in PBB-EVPN, the split-horizon filtering is performed natively\n\
    \   using B-MAC source address, there is no need for this extended\n   community.\n"
- title: 5.6.  ES-Import Route Target
  contents:
  - "5.6.  ES-Import Route Target\n   This RT is used as defined in [RFC7432].\n"
- title: 5.7.  MAC Mobility Extended Community
  contents:
  - "5.7.  MAC Mobility Extended Community\n   This extended community is defined\
    \ in [RFC7432] and it is used with a\n   MAC route (B-MAC route in case of PBB-EVPN).\
    \  The B-MAC route is\n   tagged with the RT corresponding to its EVI (which is\
    \ analogous to a\n   B-VID).  When this extended community is used along with\
    \ a B-MAC\n   route in PBB-EVPN, it indicates that all C-MAC addresses associated\n\
    \   with that B-MAC address across all corresponding I-SIDs must be\n   flushed.\n\
    \   When a PE first advertises a B-MAC, it MAY advertise it with this\n   extended\
    \ community where the sticky/static flag is set to 1 and the\n   sequence number\
    \ is set to zero.  In such cases where the PE wants to\n   signal the stickiness\
    \ of a B-MAC, then when a flush indication is\n   needed, the PE advertises the\
    \ B-MAC along with the MAC Mobility\n   extended community where the sticky/static\
    \ flag remains set and the\n   sequence number is incremented.\n"
- title: 5.8.  Default Gateway Extended Community
  contents:
  - "5.8.  Default Gateway Extended Community\n   This extended community is not used\
    \ in PBB-EVPN.\n"
- title: 6.  Operation
  contents:
  - "6.  Operation\n   This section discusses the operation of PBB-EVPN, specifically\
    \ in\n   areas where it differs from [RFC7432].\n"
- title: 6.1.  MAC Address Distribution over Core
  contents:
  - "6.1.  MAC Address Distribution over Core\n   In PBB-EVPN, host MAC addresses\
    \ (i.e., C-MAC addresses) need not be\n   distributed in BGP.  Rather, every PE\
    \ independently learns the C-MAC\n   addresses in the data plane via normal bridging\
    \ operation.  Every PE\n   has a set of one or more unicast B-MAC addresses associated\
    \ with it,\n   and those are the addresses distributed over the core in MAC\n\
    \   Advertisement routes.\n"
- title: 6.2.  Device Multihoming
  contents:
  - '6.2.  Device Multihoming

    '
- title: 6.2.1.  Flow-Based Load-Balancing
  contents:
  - "6.2.1.  Flow-Based Load-Balancing\n   This section describes the procedures for\
    \ supporting device\n   multihoming in an All-Active redundancy mode (i.e., flow-based\
    \ load-\n   balancing).\n"
- title: 6.2.1.1.  PE B-MAC Address Assignment
  contents:
  - "6.2.1.1.  PE B-MAC Address Assignment\n   In [PBB], every BEB is uniquely identified\
    \ by one or more B-MAC\n   addresses.  These addresses are usually locally administered\
    \ by the\n   service provider.  For PBB-EVPN, the choice of B-MAC address(es)\
    \ for\n   the PE nodes must be examined carefully as it has implications on the\n\
    \   proper operation of multihoming.  In particular, for the scenario\n   where\
    \ a CE is multihomed to a number of PE nodes with All-Active\n   redundancy mode,\
    \ a given C-MAC address would be reachable via\n   multiple PE nodes concurrently.\
    \  Given that any given remote PE will\n   bind the C-MAC address to a single\
    \ B-MAC address, then the various PE\n   nodes connected to the same CE must share\
    \ the same B-MAC address.\n   Otherwise, the MAC address table of the remote PE\
    \ nodes will keep\n   oscillating between the B-MAC addresses of the various PE\
    \ devices.\n   For example, consider the network of Figure 1, and assume that\
    \ PE1\n   has B-MAC address BM1 and PE2 has B-MAC address BM2.  Also, assume\n\
    \   that both links from CE1 to the PE nodes are part of the same\n   Ethernet\
    \ link aggregation group.  If BM1 is not equal to BM2, the\n   consequence is\
    \ that the MAC address table on PE3 will keep\n   oscillating such that the C-MAC\
    \ address M1 of CE1 would flip-flop\n   between BM1 or BM2, depending on the load-balancing\
    \ decision on CE1\n   for traffic destined to the core.\n   Considering that there\
    \ could be multiple sites (e.g., CEs) that are\n   multihomed to the same set\
    \ of PE nodes, then it is required for all\n   the PE devices in a redundancy\
    \ group to have a unique B-MAC address\n   per site.  This way, it is possible\
    \ to achieve fast convergence in\n   the case where a link or port failure impacts\
    \ the attachment circuit\n   connecting a single site to a given PE.\n       \
    \                        +---------+\n                +-------+  PE1 | IP/MPLS\
    \ |\n               /               |         |\n            CE1             \
    \   | Network |     PEr\n           M1  \\               |         |\n       \
    \         +-------+  PE2 |         |\n                /-------+      |       \
    \  |\n               /               |         |\n            CE2            \
    \    |         |\n          M2   \\               |         |\n              \
    \  \\              |         |\n                 +------+  PE3 +---------+\n \
    \                   Figure 2: B-MAC Address Assignment\n   In the example network\
    \ shown in Figure 2 above, two sites\n   corresponding to CE1 and CE2 are dual-homed\
    \ to PE1/PE2 and PE2/PE3,\n   respectively.  Assume that BM1 is the B-MAC used\
    \ for the site\n   corresponding to CE1.  Similarly, BM2 is the B-MAC used for\
    \ the site\n   corresponding to CE2.  On PE1, a single B-MAC address (BM1) is\n\
    \   required for the site corresponding to CE1.  On PE2, two B-MAC\n   addresses\
    \ (BM1 and BM2) are required, one per site.  Whereas on PE3,\n   a single B-MAC\
    \ address (BM2) is required for the site corresponding\n   to CE2.  All three\
    \ PE nodes would advertise their respective B-MAC\n   addresses in BGP using the\
    \ MAC Advertisement routes defined in\n   [RFC7432].  The remote PE, PEr, would\
    \ learn via BGP that BM1 is\n   reachable via PE1 and PE2, whereas BM2 is reachable\
    \ via both PE2 and\n   PE3.  Furthermore, PEr establishes, via the PBB bridge\
    \ learning\n   procedure, that C-MAC M1 is reachable via BM1, and C-MAC M2 is\n\
    \   reachable via BM2.  As a result, PEr can load-balance traffic\n   destined\
    \ to M1 between PE1 and PE2, as well as traffic destined to M2\n   between both\
    \ PE2 and PE3.  In the case of a failure that causes, for\n   example, CE1 to\
    \ be isolated from PE1, the latter can withdraw the\n   route it has advertised\
    \ for BM1.  This way, PEr would update its path\n   list for BM1 and will send\
    \ all traffic destined to M1 over to PE2\n   only.\n"
- title: 6.2.1.2.  Automating B-MAC Address Assignment
  contents:
  - "6.2.1.2.  Automating B-MAC Address Assignment\n   The PE B-MAC address used for\
    \ single-homed or Single-Active sites can\n   be automatically derived from the\
    \ hardware (using for example the\n   backplane's address and/or PE's reserved\
    \ MAC pool ).  However, the\n   B-MAC address used for All-Active sites must be\
    \ coordinated among the\n   redundancy group members.  To automate the assignment\
    \ of this latter\n   address, the PE can derive this B-MAC address from the MAC\
    \ address\n   portion of the CE's Link Aggregation Control Protocol (LACP) System\n\
    \   Identifier by flipping the 'Locally Administered' bit of the CE's\n   address.\
    \  This guarantees the uniqueness of the B-MAC address within\n   the network,\
    \ and ensures that all PE nodes connected to the same All-\n   Active CE use the\
    \ same value for the B-MAC address.\n   Note that with this automatic provisioning\
    \ of the B-MAC address\n   associated with All-Active CEs, it is not possible\
    \ to support the\n   uncommon scenario where a CE has multiple link bundles within\
    \ the\n   same LACP session towards the PE nodes, and the service involves\n \
    \  hair-pinning traffic from one bundle to another.  This is because the\n   split-horizon\
    \ filtering relies on B-MAC addresses rather than Site-ID\n   Labels (as will\
    \ be described in the next section).  The operator must\n   explicitly configure\
    \ the B-MAC address for this fairly uncommon\n   service scenario.\n   Whenever\
    \ a B-MAC address is provisioned on the PE, either manually or\n   automatically\
    \ (as an outcome of CE auto-discovery), the PE MUST\n   transmit a MAC Advertisement\
    \ route for the B-MAC address with a\n   downstream assigned MPLS label that uniquely\
    \ identifies that address\n   on the advertising PE.  The route is tagged with\
    \ the RTs of the\n   associated EVIs as described above.\n"
- title: 6.2.1.3.  Split Horizon and Designated Forwarder Election
  contents:
  - "6.2.1.3.  Split Horizon and Designated Forwarder Election\n   [RFC7432] relies\
    \ on split-horizon filtering for a multi-homed ES,\n   where the ES label is used\
    \ for egress filtering on the attachment\n   circuit in order to prevent forwarding\
    \ loops.  In PBB-EVPN, the B-MAC\n   source address can be used for the same purpose,\
    \ as it uniquely\n   identifies the originating site of a given frame.  As such,\
    \ ES labels\n   are not used in PBB-EVPN, and the egress split-horizon filtering\
    \ is\n   done based on the B-MAC source address.  It is worth noting here that\n\
    \   [PBB] defines this B-MAC address-based filtering function as part of\n   the\
    \ I-Component options; hence, no new functions are required to\n   support split-horizon\
    \ filtering beyond what is already defined in\n   [PBB].\n   The Designated Forwarder\
    \ (DF) election procedures are defined in\n   [RFC7432].\n"
- title: 6.2.2.  Load-Balancing based on I-SID
  contents:
  - "6.2.2.  Load-Balancing based on I-SID\n   This section describes the procedures\
    \ for supporting device\n   multihoming in a Single-Active redundancy mode with\
    \ per-I-SID load-\n   balancing.\n"
- title: 6.2.2.1.  PE B-MAC Address Assignment
  contents:
  - "6.2.2.1.  PE B-MAC Address Assignment\n   In the case where per-I-SID load-balancing\
    \ is desired among the PE\n   nodes in a given redundancy group, multiple unicast\
    \ B-MAC addresses\n   are allocated per multihomed ES: Each PE connected to the\
    \ multihomed\n   segment is assigned a unique B-MAC.  Every PE then advertises\
    \ its\n   B-MAC address using the BGP MAC Advertisement route.  In this mode of\n\
    \   operation, two B-MAC address-assignment models are possible:\n   -  The PE\
    \ may use a shared B-MAC address for all its single-homed\n      segments and/or\
    \ all its multi-homed Single-Active segments (e.g.,\n      segments operating\
    \ in per-I-SID load-balancing mode).\n   -  The PE may use a dedicated B-MAC address\
    \ for each ES operating\n      with per-I-SID load-balancing mode.\n   A PE implementation\
    \ MAY choose to support either the shared B-MAC\n   address model or the dedicated\
    \ B-MAC address model without causing\n   any interoperability issues.  The advantage\
    \ of the dedicated B-MAC\n   over the shared B-MAC address for multi-homed Single-Active\
    \ segments,\n   is that when C-MAC flushing is needed, fewer C-MAC addresses are\n\
    \   impacted.  Furthermore, it gives the disposition PE the ability to\n   avoid\
    \ C-MAC destination address lookup even though source C-MAC\n   learning is still\
    \ required in the data plane.  Its disadvantage is\n   that there are additional\
    \ B-MAC advertisements in BGP.\n   A remote PE initially floods traffic to a destination\
    \ C-MAC address,\n   located in a given multihomed ES, to all the PE nodes configured\
    \ with\n   that I-SID.  Then, when reply traffic arrives at the remote PE, it\n\
    \   learns (in the data path) the B-MAC address and associated next-hop\n   PE\
    \ to use for said C-MAC address.\n"
- title: 6.2.2.2.  Split Horizon and Designated Forwarder Election
  contents:
  - "6.2.2.2.  Split Horizon and Designated Forwarder Election\n   The procedures\
    \ are similar to the flow-based load-balancing case,\n   with the only difference\
    \ being that the DF filtering must be applied\n   to unicast as well as multicast\
    \ traffic, and in both core-to-segment\n   as well as segment-to-core directions.\n"
- title: 6.2.2.3.  Handling Failure Scenarios
  contents:
  - "6.2.2.3.  Handling Failure Scenarios\n   When a PE connected to a multihomed\
    \ ES loses connectivity to the\n   segment, due to link or port failure, it needs\
    \ to notify the remote\n   PEs to trigger C-MAC address flushing.  This can be\
    \ achieved in one\n   of two ways, depending on the B-MAC assignment model:\n\
    \   -  If the PE uses a shared B-MAC address for multiple Ethernet\n      segments,\
    \ then the C-MAC flushing is signaled by means of having\n      the failed PE\
    \ re-advertise the MAC Advertisement route for the\n      associated B-MAC, tagged\
    \ with the MAC Mobility extended community\n      attribute.  The value of the\
    \ Counter field in that attribute must\n      be incremented prior to advertisement.\
    \  This causes the remote PE\n      nodes to flush all C-MAC addresses associated\
    \ with the B-MAC in\n      question.  This is done across all I-SIDs that are\
    \ mapped to the\n      EVI of the withdrawn MAC route.\n   -  If the PE uses a\
    \ dedicated B-MAC address for each ES operating\n      under per-I-SID load-balancing\
    \ mode, the failed PE simply\n      withdraws the B-MAC route previously advertised\
    \ for that segment.\n      This causes the remote PE nodes to flush all C-MAC\
    \ addresses\n      associated with the B-MAC in question.  This is done across\
    \ all\n      I-SIDs that are mapped to the EVI of the withdrawn MAC route.\n \
    \  When a PE connected to a multihomed ES fails (i.e., node failure) or\n   when\
    \ the PE becomes completely isolated from the EVPN network, the\n   remote PEs\
    \ will start purging the MAC Advertisement routes that were\n   advertised by\
    \ the failed PE.  This is done either as an outcome of\n   the remote PEs detecting\
    \ that the BGP session to the failed PE has\n   gone down, or by having a Route\
    \ Reflector withdrawing all the routes\n   that were advertised by the failed\
    \ PE.  The remote PEs, in this case,\n   will perform C-MAC address flushing as\
    \ an outcome of the MAC\n   Advertisement route withdrawals.\n   For all failure\
    \ scenarios (link/port failure, node failure, and PE\n   node isolation), when\
    \ the fault condition clears, the recovered PE\n   re-advertises the associated\
    \ ES route to other members of its\n   redundancy group.  This triggers the backup\
    \ PE(s) in the redundancy\n   group to block the I-SIDs for which the recovered\
    \ PE is a DF.  When a\n   backup PE blocks the I-SIDs, it triggers a C-MAC address\
    \ flush\n   notification to the remote PEs by re-advertising the MAC\n   Advertisement\
    \ route for the associated B-MAC, with the MAC Mobility\n   extended community\
    \ attribute.  The value of the Counter field in that\n   attribute must be incremented\
    \ prior to advertisement.  This causes\n   the remote PE nodes to flush all C-MAC\
    \ addresses associated with the\n   B-MAC in question.  This is done across all\
    \ I-SIDs that are mapped to\n   the EVI of the withdrawn/re-advertised MAC route.\n"
- title: 6.3.  Network Multihoming
  contents:
  - "6.3.  Network Multihoming\n   When an Ethernet network is multihomed to a set\
    \ of PE nodes running\n   PBB-EVPN, Single-Active redundancy model can be supported\
    \ with per-\n   service instance (i.e., I-SID) load-balancing.  In this model,\
    \ DF\n   election is performed to ensure that a single PE node in the\n   redundancy\
    \ group is responsible for forwarding traffic associated\n   with a given I-SID.\
    \  This guarantees that no forwarding loops are\n   created.  Filtering based\
    \ on DF state applies to both unicast and\n   multicast traffic, and in both access-to-core\
    \ as well as core-to-\n   access directions just like a Single-Active multihomed\
    \ device\n   scenario (but unlike an All-Active multihomed device scenario where\n\
    \   DF filtering is limited to multi-destination frames in the core-to-\n   access\
    \ direction).  Similar to a Single-Active multihomed device\n   scenario, with\
    \ load-balancing based on I-SID, a unique B-MAC address\n   is assigned to each\
    \ of the PE nodes connected to the multihomed\n   network (segment).\n"
- title: 6.4.  Frame Forwarding
  contents:
  - "6.4.  Frame Forwarding\n   The frame-forwarding functions are divided in between\
    \ the Bridge\n   Module, which hosts the [PBB] BEB functionality, and the MPLS\n\
    \   Forwarder which handles the MPLS imposition/disposition.  The details\n  \
    \ of frame forwarding for unicast and multi-destination frames are\n   discussed\
    \ next.\n"
- title: 6.4.1.  Unicast
  contents:
  - "6.4.1.  Unicast\n   Known unicast traffic received from the Attachment Circuit\
    \ (AC) will\n   be PBB-encapsulated by the PE using the B-MAC source address\n\
    \   corresponding to the originating site.  The unicast B-MAC destination\n  \
    \ address is determined based on a lookup of the C-MAC destination\n   address\
    \ (the binding of the two is done via transparent learning of\n   reverse traffic).\
    \  The resulting frame is then encapsulated with an\n   LSP tunnel label and an\
    \ EVPN label associated with the B-MAC\n   destination address.  If per flow load-balancing\
    \ over ECMPs in the\n   MPLS core is required, then a flow label is added below\
    \ the label\n   associated with the B-MAC address in the label stack.\n   For\
    \ unknown unicast traffic, the PE forwards these frames over the\n   MPLS core.\
    \  When these frames are to be forwarded, then the same set\n   of options used\
    \ for forwarding multicast/broadcast frames (as\n   described in next section)\
    \ are used.\n"
- title: 6.4.2.  Multicast/Broadcast
  contents:
  - "6.4.2.  Multicast/Broadcast\n   Multi-destination frames received from the AC\
    \ will be PBB-\n   encapsulated by the PE using the B-MAC source address corresponding\n\
    \   to the originating site.  The multicast B-MAC destination address is\n   selected\
    \ based on the value of the I-SID as defined in [PBB].  The\n   resulting frame\
    \ is then forwarded over the MPLS core using one of the\n   following two options:\n\
    \   Option 1: the MPLS Forwarder can perform ingress replication over a\n    \
    \  set of MP2P or P2P tunnel LSPs.  The frame is encapsulated with a\n      tunnel\
    \ LSP label and the EVPN ingress replication label advertised\n      in the Inclusive\
    \ Multicast Ethernet Tag [RFC7432].\n   Option 2: the MPLS Forwarder can use P2MP\
    \ tunnel LSP per the\n      procedures defined in [RFC7432].  This includes either\
    \ the use of\n      Inclusive or Aggregate Inclusive trees.  Furthermore, the\
    \ MPLS\n      Forwarder can use MP2MP tunnel LSP if Inclusive trees are used.\n\
    \   Note that the same procedures for advertising and handling the\n   Inclusive\
    \ Multicast Ethernet Tag defined in [RFC7432] apply here.\n"
- title: 6.5.  MPLS Encapsulation of PBB Frames
  contents:
  - "6.5.  MPLS Encapsulation of PBB Frames\n   The encapsulation for the transport\
    \ of PBB frames over MPLS is\n   similar to that of classical Ethernet, albeit\
    \ with the additional PBB\n   header, as shown in the figure below:\n        \
    \                   +------------------+\n                           | IP/MPLS\
    \ Header   |\n                           +------------------+\n              \
    \             | PBB Header       |\n                           +------------------+\n\
    \                           | Ethernet Header  |\n                           +------------------+\n\
    \                           | Ethernet Payload |\n                           +------------------+\n\
    \                           | Ethernet FCS     |\n                           +------------------+\n\
    \                   Figure 3: PBB over MPLS Encapsulation\n"
- title: 7.  Minimizing ARP/ND Broadcast
  contents:
  - "7.  Minimizing ARP/ND Broadcast\n   The PE nodes MAY implement an ARP/ND-proxy\
    \ function in order to\n   minimize the volume of ARP/ND traffic that is broadcasted\
    \ over the\n   MPLS network.  In case of ARP proxy, this is achieved by having\
    \ each\n   PE node snoop on ARP request and response messages received over the\n\
    \   access interfaces or the MPLS core.  The PE builds a cache of IP/MAC\n   address\
    \ bindings from these snooped messages.  The PE then uses this\n   cache to respond\
    \ to ARP requests ingress on access ports and target\n   hosts that are in remote\
    \ sites.  If the PE finds a match for the IP\n   address in its ARP cache, it\
    \ responds back to the requesting host and\n   drops the request.  Otherwise,\
    \ if it does not find a match, then the\n   request is flooded over the MPLS network\
    \ using either ingress\n   replication or P2MP LSPs.  In case of ND proxy, this\
    \ is achieved\n   similar to the above but with ND/NA messages per [RFC4389].\n"
- title: 8.  Seamless Interworking with IEEE 802.1aq / 802.1Qbp
  contents:
  - "8.  Seamless Interworking with IEEE 802.1aq / 802.1Qbp\n                    \
    \       +--------------+\n                           |              |\n      \
    \     +---------+     |     MPLS     |    +---------+\n   +----+  |         |\
    \   +----+        +----+  |         |  +----+\n   |SW1 |--|         |   | PE1|\
    \        | PE2|  |         |--| SW3|\n   +----+  | 802.1aq |---|    |        |\
    \    |--| 802.1aq |  +----+\n   +----+  |  .1Qbp  |   +----+        +----+  |\
    \  .1Qbp  |  +----+\n   |SW2 |--|         |     |   Backbone   |    |        \
    \ |--| SW4|\n   +----+  +---------+     +--------------+    +---------+  +----+\n\
    \   |<------ IS-IS -------->|<-----BGP----->|<------ IS-IS ------>|  CP\n   |<-------------------------\
    \   PBB  -------------------------->|  DP\n                           |<----MPLS----->|\n\
    \   Legend: CP = Control-Plane View\n           DP = Data-Plane View\n    Figure\
    \ 4: Interconnecting 802.1aq / 802.1Qbp Networks with PBB-EVPN\n"
- title: 8.1.  B-MAC Address Assignment
  contents:
  - "8.1.  B-MAC Address Assignment\n   The B-MAC addresses need to be globally unique\
    \ across all networks\n   including PBB-EVPN and IEEE 802.1aq / 802.1Qbp networks.\
    \  The B-MAC\n   addresses used for single-homed and Single-Active Ethernet segments\n\
    \   should be unique because they are typically auto-derived from the\n   PE's\
    \ pools of reserved MAC addresses that are unique.  The B-MAC\n   addresses used\
    \ for All-Active Ethernet segments should also be unique\n   given that each network\
    \ operator typically has its own assigned\n   Organizationally Unique Identifier\
    \ (OUI) and thus can assign its own\n   unique MAC addresses.\n"
- title: 8.2.  IEEE 802.1aq / 802.1Qbp B-MAC Address Advertisement
  contents:
  - "8.2.  IEEE 802.1aq / 802.1Qbp B-MAC Address Advertisement\n   B-MAC addresses\
    \ associated with 802.1aq / 802.1Qbp switches are\n   advertised using the EVPN\
    \ MAC/IP route advertisement already defined\n   in [RFC7432].\n"
- title: '8.3.  Operation:'
  contents:
  - "8.3.  Operation:\n   When a PE receives a PBB-encapsulated Ethernet frame from\
    \ the access\n   side, it performs a lookup on the B-MAC destination address to\n\
    \   identify the next hop.  If the lookup yields that the next hop is a\n   remote\
    \ PE, the local PE would then encapsulate the PBB frame in MPLS.\n   The label\
    \ stack comprises of the VPN label (advertised by the remote\n   PE), followed\
    \ by an LSP/IGP label.  From that point onwards, regular\n   MPLS forwarding is\
    \ applied.\n   On the disposition PE, assuming penultimate-hop-popping is employed,\n\
    \   the PE receives the MPLS-encapsulated PBB frame with a single label:\n   the\
    \ VPN label.  The value of the label indicates to the disposition\n   PE that\
    \ this is a PBB frame, so the label is popped, the TTL field\n   (in the 802.1Qbp\
    \ F-Tag) is reinitialized, and normal PBB processing\n   is employed from this\
    \ point onwards.\n"
- title: 9.  Solution Advantages
  contents:
  - "9.  Solution Advantages\n   In this section, we discuss the advantages of the\
    \ PBB-EVPN solution\n   in the context of the requirements set forth in Section\
    \ 3.\n"
- title: 9.1.  MAC Advertisement Route Scalability
  contents:
  - "9.1.  MAC Advertisement Route Scalability\n   In PBB-EVPN, the number of MAC\
    \ Advertisement routes is a function of\n   the number of Ethernet segments (e.g.,\
    \ sites) rather than the number\n   of hosts/servers.  This is because the B-MAC\
    \ addresses of the PEs,\n   rather than C-MAC addresses (of hosts/servers), are\
    \ being advertised\n   in BGP.  As discussed above, there's a one-to-one mapping\
    \ between\n   All-Active multihomed segments and their associated B-MAC addresses;\n\
    \   there can be either a one-to-one or many-to-one mapping between\n   Single-Active\
    \ multihomed segments and their associated B-MAC\n   addresses; and finally there\
    \ is a many-to-one mapping between single-\n   home sites and their associated\
    \ B-MAC addresses on a given PE.  This\n   means a single B-MAC is associated\
    \ with one or more segments where\n   each segment can be associated with many\
    \ C-MAC addresses.  As a\n   result, the volume of MAC Advertisement routes in\
    \ PBB-EVPN may be\n   multiple orders of magnitude less than EVPN.\n"
- title: 9.2.  C-MAC Mobility Independent of B-MAC Advertisements
  contents:
  - "9.2.  C-MAC Mobility Independent of B-MAC Advertisements\n   As described above,\
    \ in PBB-EVPN, a single B-MAC address can aggregate\n   many C-MAC addresses.\
    \  Given that B-MAC addresses are associated with\n   segments attached to a PE\
    \ or to the PE itself, their locations are\n   fixed and thus not impacted what\
    \ so ever by C-MAC mobility.\n   Therefore, C-MAC mobility does not affect B-MAC\
    \ addresses (e.g., any\n   re-advertisements of them).  This is because the association\
    \ of C-MAC\n   address to B-MAC address is learned in the data-plane and C-MAC\n\
    \   addresses are not advertised in BGP.  Aggregation via B-MAC addresses\n  \
    \ in PBB-EVPN performs much better than EVPN.\n   To illustrate how this compares\
    \ to EVPN, consider the following\n   example:\n      If a PE running EVPN advertises\
    \ reachability for N MAC addresses\n      via a particular segment, and then 50%\
    \ of the MAC addresses in\n      that segment move to other segments (e.g., due\
    \ to virtual machine\n      mobility), then N/2 additional MAC Advertisement routes\
    \ need to be\n      sent for the MAC addresses that have moved.  With PBB-EVPN,\
    \ on the\n      other hand, the B-MAC addresses that are statically associated\n\
    \      with PE nodes are not subject to mobility.  As C-MAC addresses\n      move\
    \ from one segment to another, the binding of C-MAC to B-MAC\n      addresses\
    \ is updated via data-plane learning in PBB-EVPN.\n"
- title: 9.3.  C-MAC Address Learning and Confinement
  contents:
  - "9.3.  C-MAC Address Learning and Confinement\n   In PBB-EVPN, C-MAC address reachability\
    \ information is built via\n   data-plane learning.  As such, PE nodes not participating\
    \ in active\n   conversations involving a particular C-MAC address will purge\
    \ that\n   address from their forwarding tables.  Furthermore, since C-MAC\n \
    \  addresses are not distributed in BGP, PE nodes will not maintain any\n   record\
    \ of them in the control-plane routing table.\n"
- title: 9.4.  Seamless Interworking with 802.1aq Access Networks
  contents:
  - "9.4.  Seamless Interworking with 802.1aq Access Networks\n   Consider the scenario\
    \ where two access networks, one running MPLS and\n   the other running 802.1aq,\
    \ are interconnected via an MPLS backbone\n   network.  The figure below shows\
    \ such an example network.\n                               +--------------+\n\
    \                               |              |\n               +---------+ \
    \    |     MPLS     |    +---------+\n       +----+  |         |   +----+    \
    \    +----+  |         |  +----+\n       | CE |--|         |   | PE1|        |\
    \ PE2|  |         |--| CE |\n       +----+  | 802.1aq |---|    |        |    |--|\
    \  MPLS   |  +----+\n       +----+  |         |   +----+        +----+  |    \
    \     |  +----+\n       | CE |--|         |     |   Backbone   |    |        \
    \ |--| CE |\n       +----+  +---------+     +--------------+    +---------+  +----+\n\
    \                  Figure 5: Interoperability with 802.1aq\n   If the MPLS backbone\
    \ network employs EVPN, then the 802.1aq data-\n   plane encapsulation must be\
    \ terminated on PE1 or the edge device\n   connecting to PE1.  Either way, all\
    \ the PE nodes that are part of the\n   associated service instances will be exposed\
    \ to all the C-MAC\n   addresses of all hosts/servers connected to the access\
    \ networks.\n   However, if the MPLS backbone network employs PBB-EVPN, then the\n\
    \   802.1aq encapsulation can be extended over the MPLS backbone, thereby\n  \
    \ maintaining C-MAC address transparency on PE1.  If PBB-EVPN is also\n   extended\
    \ over the MPLS access network on the right, then C-MAC\n   addresses would be\
    \ transparent to PE2 as well.\n"
- title: 9.5.  Per-Site Policy Support
  contents:
  - "9.5.  Per-Site Policy Support\n   In PBB-EVPN, the per-site policy can be supported\
    \ via B-MAC addresses\n   via assigning a unique B-MAC address for every site/segment\n\
    \   (typically multihomed but can also be single-homed).  Given that the\n   B-MAC\
    \ addresses are sent in BGP MAC/IP route advertisement, it is\n   possible to\
    \ define per-site (i.e., B-MAC) forwarding policies\n   including policies for\
    \ E-TREE service.\n"
- title: 9.6.  No C-MAC Address Flushing for All-Active Multihoming
  contents:
  - "9.6.  No C-MAC Address Flushing for All-Active Multihoming\n   Just as in [RFC7432],\
    \ with PBB-EVPN, it is possible to avoid C-MAC\n   address flushing upon topology\
    \ change affecting an All-Active\n   multihomed segment.  To illustrate this,\
    \ consider the example network\n   of Figure 1.  Both PE1 and PE2 advertise the\
    \ same B-MAC address (BM1)\n   to PE3.  PE3 then learns the C-MAC addresses of\
    \ the servers/hosts\n   behind CE1 via data-plane learning.  If AC1 fails, then\
    \ PE3 does not\n   need to flush any of the C-MAC addresses learned and associated\
    \ with\n   BM1.  This is because PE1 will withdraw the MAC Advertisement routes\n\
    \   associated with BM1, thereby leading PE3 to have a single adjacency\n   (to\
    \ PE2) for this B-MAC address.  Therefore, the topology change is\n   communicated\
    \ to PE3 and no C-MAC address flushing is required.\n"
- title: 10.  Security Considerations
  contents:
  - "10.  Security Considerations\n   All the security considerations in [RFC7432]\
    \ apply directly to this\n   document because this document leverages the control\
    \ plane described\n   in [RFC7432] and their associated procedures -- although\
    \ not the\n   complete set but rather a subset.\n   This document does not introduce\
    \ any new security considerations\n   beyond that of [RFC7432] and [RFC4761] because\
    \ advertisements and\n   processing of B-MAC addresses follow that of [RFC7432]\
    \ and processing\n   of C-MAC addresses follow that of [RFC4761] -- i.e, B-MAC\
    \ addresses\n   are learned in the control plane and C-MAC addresses are learned\
    \ in\n   data plane.\n"
- title: 11.  IANA Considerations
  contents:
  - "11.  IANA Considerations\n   There are no additional IANA considerations for\
    \ PBB-EVPN beyond what\n   is already described in [RFC7432].\n"
- title: 12.  References
  contents:
  - '12.  References

    '
- title: 12.1.  Normative References
  contents:
  - "12.1.  Normative References\n   [PBB]      IEEE, \"IEEE Standard for Local and\
    \ metropolitan area\n              networks - Media Access Control (MAC) Bridges\
    \ and Virtual\n              Bridged Local Area Networks\", Clauses 25 and 26,\
    \ IEEE Std\n              802.1Q, DOI 10.1109/IEEESTD.2011.6009146.\n   [RFC2119]\
    \  Bradner, S., \"Key words for use in RFCs to Indicate\n              Requirement\
    \ Levels\", BCP 14, RFC 2119,\n              DOI 10.17487/RFC2119, March 1997,\n\
    \              <http://www.rfc-editor.org/info/rfc2119>.\n   [RFC7432]  Sajassi,\
    \ A., Ed., Aggarwal, R., Bitar, N., Isaac, A.,\n              Uttaro, J., Drake,\
    \ J., and W. Henderickx, \"BGP MPLS-Based\n              Ethernet VPN\", RFC 7432,\
    \ DOI 10.17487/RFC7432, February\n              2015, <http://www.rfc-editor.org/info/rfc7432>.\n"
- title: 12.2.  Informative References
  contents:
  - "12.2.  Informative References\n   [MMRP]     IEEE, \"IEEE Standard for Local\
    \ and metropolitan area\n              networks - Media Access Control (MAC) Bridges\
    \ and Virtual\n              Bridged Local Area Networks\", Clause 10, IEEE Std\
    \ 802.1Q,\n              DOI 10.1109/IEEESTD.2011.6009146.\n   [OVERLAY]  Sajassi,\
    \ A., Ed., Drake, J., Ed., Bitar, N., Isaac, A.,\n              Uttaro, J., Henderickx,\
    \ W., Shekhar, R., Salam, S., Patel,\n              K., Rao, D., and S. Thoria,\
    \ \"A Network Virtualization\n              Overlay Solution using EVPN\",\n \
    \             draft-ietf-bess-evpn-overlay-01, February 2015.\n   [RFC4389]  Thaler,\
    \ D., Talwar, M., and C. Patel, \"Neighbor Discovery\n              Proxies (ND\
    \ Proxy)\", RFC 4389, DOI 10.17487/RFC4389, April\n              2006, <http://www.rfc-editor.org/info/rfc4389>.\n\
    \   [RFC4761]  Kompella, K., Ed., and Y. Rekhter, Ed., \"Virtual Private\n   \
    \           LAN Service (VPLS) Using BGP for Auto-Discovery and\n            \
    \  Signaling\", RFC 4761, DOI 10.17487/RFC4761, January 2007,\n              <http://www.rfc-editor.org/info/rfc4761>.\n\
    \   [RFC7080]  Sajassi, A., Salam, S., Bitar, N., and F. Balus, \"Virtual\n  \
    \            Private LAN Service (VPLS) Interoperability with Provider\n     \
    \         Backbone Bridges\", RFC 7080, DOI 10.17487/RFC7080,\n              December\
    \ 2013, <http://www.rfc-editor.org/info/rfc7080>.\n   [RFC7209]  Sajassi, A.,\
    \ Aggarwal, R., Uttaro, J., Bitar, N.,\n              Henderickx, W., and A. Isaac,\
    \ \"Requirements for Ethernet\n              VPN (EVPN)\", RFC 7209, DOI 10.17487/RFC7209,\
    \ May 2014,\n              <http://www.rfc-editor.org/info/rfc7209>.\n"
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   The authors would like to thank Jose Liste and Patrice Brissette\
    \ for\n   their reviews and comments of this document.  We would also like to\n\
    \   thank Giles Heron for several rounds of reviews and providing\n   valuable\
    \ inputs to get this document ready for IESG submission.\n"
- title: Contributors
  contents:
  - "Contributors\n   In addition to the authors listed, the following individuals\
    \ also\n   contributed to this document.\n   Lizhong Jin, ZTE\n   Sami Boutros,\
    \ Cisco\n   Dennis Cai, Cisco\n   Keyur Patel, Cisco\n   Sam Aldrin, Huawei\n\
    \   Himanshu Shah, Ciena\n   Jorge Rabadan, ALU\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Ali Sajassi, editor\n   Cisco\n   170 West Tasman Drive\n\
    \   San Jose, CA  95134\n   United States\n   Email: sajassi@cisco.com\n   Samer\
    \ Salam\n   Cisco\n   595 Burrard Street, Suite # 2123\n   Vancouver, BC V7X 1J1\n\
    \   Canada\n   Email: ssalam@cisco.com\n   Nabil Bitar\n   Verizon Communications\n\
    \   Email: nabil.n.bitar@verizon.com\n   Aldrin Isaac\n   Juniper\n   Email: aisaac@juniper.net\n\
    \   Wim Henderickx\n   Alcatel-Lucent\n   Email: wim.henderickx@alcatel-lucent.com\n"
