- contents:
  - '         Loss Episode Metrics for IP Performance Metrics (IPPM)

    '
  title: __initial_text__
- contents:
  - "Abstract\n   The IETF has developed a one-way packet loss metric that measures
    the\n   loss rate on a Poisson and Periodic probe streams between two hosts.\n
    \  However, the impact of packet loss on applications is, in general,\n   sensitive
    not just to the average loss rate but also to the way in\n   which packet losses
    are distributed in loss episodes (i.e., maximal\n   sets of consecutively lost
    probe packets).  This document defines\n   one-way packet loss episode metrics,
    specifically, the frequency and\n   average duration of loss episodes and a probing
    methodology under\n   which the loss episode metrics are to be measured.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    5741.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc6534.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2012 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (http://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n   This document may contain
    material from IETF Documents or IETF\n   Contributions published or made publicly
    available before November\n   10, 2008.  The person(s) controlling the copyright
    in some of this\n   material may not have granted the IETF Trust the right to
    allow\n   modifications of such material outside the IETF Standards Process.\n
    \  Without obtaining an adequate license from the person(s) controlling\n   the
    copyright in such materials, this document may not be modified\n   outside the
    IETF Standards Process, and derivative works of it may\n   not be created outside
    the IETF Standards Process, except to format\n   it for publication as an RFC
    or to translate it into languages other\n   than English.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n
    \     1.1. Background and Motivation ..................................4\n           1.1.1.
    Requirements Language ...............................5\n      1.2. Loss Episode
    Metrics and Bi-Packet Probes ..................5\n      1.3. Outline and Contents
    .......................................6\n   2. Singleton Definition for Type-P-One-way
    Bi-Packet Loss ..........7\n      2.1. Metric Name ................................................7\n
    \     2.2. Metric Parameters ..........................................7\n      2.3.
    Metric Units ...............................................7\n      2.4. Metric
    Definition ..........................................7\n      2.5. Discussion
    .................................................8\n      2.6. Methodologies ..............................................8\n
    \     2.7. Errors and Uncertainties ...................................8\n      2.8.
    Reporting the Metric .......................................8\n   3. General Definition
    of Samples for\n      Type-P-One-way-Bi-Packet-Loss ...................................8\n
    \     3.1. Metric Name ................................................9\n      3.2.
    Metric Parameters ..........................................9\n      3.3. Metric
    Units ...............................................9\n      3.4. Metric Definition
    ..........................................9\n      3.5. Discussion .................................................9\n
    \     3.6. Methodologies .............................................10\n      3.7.
    Errors and Uncertainties ..................................10\n      3.8. Reporting
    the Metric ......................................10\n   4. An Active Probing Methodology
    for Bi-Packet Loss ...............10\n      4.1. Metric Name ...............................................10\n
    \     4.2. Metric Parameters .........................................10\n      4.3.
    Metric Units ..............................................11\n      4.4. Metric
    Definition .........................................11\n      4.5. Discussion
    ................................................11\n      4.6. Methodologies .............................................11\n
    \     4.7. Errors and Uncertainties ..................................12\n      4.8.
    Reporting the Metric ......................................12\n   5. Loss Episode
    Proto-Metrics .....................................12\n      5.1. Loss-Pair-Counts
    ..........................................13\n      5.2. Bi-Packet-Loss-Ratio
    ......................................13\n      5.3. Bi-Packet-Loss-Episode-Duration-Number
    ....................13\n      5.4. Bi-Packet-Loss-Episode-Frequency-Number ...................13\n
    \  6. Loss Episode Metrics Derived from Bi-Packet Loss Probing .......14\n      6.1.
    Geometric Stream: Loss Ratio ..............................14\n           6.1.1.
    Metric Name ........................................14\n           6.1.2. Metric
    Parameters ..................................14\n           6.1.3. Metric Units
    .......................................15\n           6.1.4. Metric Definition
    ..................................15\n           6.1.5. Discussion .........................................15\n
    \          6.1.6. Methodologies ......................................15\n           6.1.7.
    Errors and Uncertainties ...........................15\n           6.1.8. Reporting
    the Metric ...............................15\n      6.2. Geometric Stream: Loss
    Episode Duration ...................16\n           6.2.1. Metric Name ........................................16\n
    \          6.2.2. Metric Parameters ..................................16\n           6.2.3.
    Metric Units .......................................16\n           6.2.4. Metric
    Definition ..................................16\n           6.2.5. Discussion
    .........................................16\n           6.2.6. Methodologies ......................................16\n
    \          6.2.7. Errors and Uncertainties ...........................17\n           6.2.8.
    Reporting the Metric ...............................17\n      6.3. Geometric Stream:
    Loss Episode Frequency ..................17\n           6.3.1. Metric Name ........................................17\n
    \          6.3.2. Metric Parameters ..................................17\n           6.3.3.
    Metric Units .......................................17\n           6.3.4. Metric
    Definition ..................................18\n           6.3.5. Discussion
    .........................................18\n           6.3.6. Methodologies ......................................18\n
    \          6.3.7. Errors and Uncertainties ...........................18\n           6.3.8.
    Reporting the Metric ...............................18\n   7. Applicability of
    Loss Episode Metrics ..........................18\n      7.1. Relation to Gilbert
    Model .................................18\n   8. Security Considerations ........................................19\n
    \  9. References .....................................................20\n      9.1.
    Normative References ......................................20\n      9.2. Informative
    References ....................................20\n"
  title: Table of Contents
- contents:
  - '1.  Introduction

    '
  - contents:
    - "1.1.  Background and Motivation\n   Packet loss in the Internet is a complex
      phenomenon due to the bursty\n   nature of traffic and congestion processes,
      influenced by both end-\n   users and applications and the operation of transport
      protocols such\n   as TCP.  For these reasons, the simplest model of packet
      loss -- the\n   single parameter Bernoulli (independent) loss model -- does
      not\n   represent the complexity of packet loss over periods of time.\n   Correspondingly,
      a single loss metric -- the average packet loss\n   ratio over some period of
      time -- arising, e.g., from a stream of\n   Poisson probes as in [RFC2680] is
      not sufficient to determine the\n   effect of packet loss on traffic in general.\n
      \  Moving beyond single parameter loss models, Markovian and Markov-\n   modulated
      loss models involving transitions between a good and bad\n   state, each with
      an associated loss rate, have been proposed by\n   Gilbert [Gilbert] and more
      generally by Elliot [Elliot].  In\n   principle, Markovian models can be formulated
      over state spaces\n   involving patterns of loss of any desired number of packets.\n
      \  However, further increase in the size of the state space makes such\n   models
      cumbersome both for parameter estimation (accuracy decreases)\n   and prediction
      in practice (due to computational complexity and\n   sensitivity to parameter
      inaccuracy).  In general, the relevance and\n   importance of particular models
      can change in time, e.g., in response\n   to the advent of new applications
      and services.  For this reason, we\n   are drawn to empirical metrics that do
      not depend on a particular\n   model for their interpretation.\n   An empirical
      measure of packet loss complexity, the index of\n   dispersion of counts (IDC),
      comprise, for each t >0, the ratio v(t) /\n   a(t) of the variance v(t) and
      average a(t) of the number of losses\n   over successive measurement windows
      of a duration t.  However, a full\n   characterization of packet loss over time
      requires specification of\n   the IDC for each window size t>0.\n   In the standards
      arena, loss pattern sample metrics are defined in\n   [RFC3357].  Following
      the Gilbert-Elliot model, burst metrics\n   specific for Voice over IP (VoIP)
      that characterize complete episodes\n   of lost, transmitted, and discarded
      packets are defined in [RFC3611].\n   The above considerations motivate the
      formulation of empirical\n   metrics of one-way packet loss that provide the
      simplest\n   generalization of [RFC2680] (which is widely adopted but only defines\n
      \  a single loss-to-total ratio metric).  The metrics defined here\n   capture
      deviations from independent packet loss in a robust model-\n   independent manner.
      \ The document also defines efficient measurement\n   methodologies for these
      metrics.\n"
    - contents:
      - "1.1.1.  Requirements Language\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\",
        \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\",
        \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described
        in RFC 2119 [RFC2119].\n"
      title: 1.1.1.  Requirements Language
    title: 1.1.  Background and Motivation
  - contents:
    - "1.2.  Loss Episode Metrics and Bi-Packet Probes\n   The losses experienced
      by the packet stream can be viewed as\n   occurring in loss episodes, i.e.,
      a maximal set of consecutively lost\n   packets.  This memo describes one-way
      loss episode metrics: their\n   frequency and average duration.  Although the
      average loss ratio can\n   be expressed in terms of these quantities, they go
      further in\n   characterizing the statistics of the patterns of packet loss
      within\n   the stream of probes.  This is useful information in understanding\n
      \  the effect of packet losses on application performance, since\n   different
      applications can have different sensitivities to patterns\n   of loss, being
      sensitive not only to the long-term average loss rate,\n   but how losses are
      distributed in time.  As an example, MPEG video\n   traffic may be sensitive
      to loss involving the I-frame in a group of\n   pictures, but further losses
      within an episode of sufficiently short\n   duration have no further impact;
      the damage is already done.\n   The loss episode metrics presented here have
      the following useful\n   properties:\n   1.  the metrics are empirical and do
      not depend on an underlying\n       model; e.g., the loss process is not assumed
      to be Markovian.  On\n       the other hand, it turns out that the metrics of
      this memo can be\n       related to the special case of the Gilbert Model parameters;
      see\n       Section 7.\n   2.  the metric units can be directly compared with
      applications or\n       user requirements or tolerance for network loss performance,
      in\n       the frequency and duration of loss episodes, as well as the usual\n
      \      packet loss ratio, which can be recovered from the loss episode\n       metrics
      upon dividing the average loss episode duration by the\n       loss episode
      frequency.\n   3.  the metrics provide the smallest possible increment in complexity\n
      \      beyond, but in the spirit of, the IP Performance Metrics (IPPM)\n       average
      packet loss ratio metrics [RFC2680], i.e., moving from a\n       single metric
      (average packet loss ratio) to a pair of metrics\n       (loss episode frequency
      and average loss episode duration).\n   The document also describes a probing
      methodology under which loss\n   episode metrics are to be measured.  The methodology
      comprises\n   sending probe packets in pairs, where packets within each probe
      pair\n   have a fixed separation, and the time between pairs takes the form
      of\n   a geometric distributed number multiplied by the same separation.\n   This
      can be regarded a generalization of Poisson probing where the\n   probes are
      pairs rather than single packets as in [RFC2680], and also\n   of geometric
      probing described in [RFC2330].  However, it should be\n   distinguished from
      back-to-back packet pairs whose change in\n   separation on traversing a link
      is used to probe bandwidth.  In this\n   document, the separation between the
      packets in a pair is the\n   temporal resolution at which different loss episodes
      are to be\n   distinguished.  The methodology does not measure episodes of loss
      of\n   consecutive background packets on the measured path.  One key feature\n
      \  of this methodology is its efficiency: it estimates the average\n   length
      of loss episodes without directly measuring the complete\n   episodes themselves.
      \ Instead, this information is encoded in the\n   observed relative frequencies
      of the four possible outcomes arising\n   from the loss or successful transmission
      of each of the two packets\n   of the probe pairs.  This is distinct from the
      approach of [RFC3611],\n   which reports on directly measured episodes.\n   The
      metrics defined in this memo are \"derived metrics\", according to\n   Section
      6.1 of [RFC2330] (the IPPM framework).  They are based on the\n   singleton
      loss metric defined in Section 2 of [RFC2680] .\n"
    title: 1.2.  Loss Episode Metrics and Bi-Packet Probes
  - contents:
    - "1.3.  Outline and Contents\n   o  Section 2 defines the fundamental singleton
      metric for the\n      possible outcomes of a probe pair: Type-P-One-way-Bi-Packet-Loss.\n
      \  o  Section 3 defines sample sets of this metric derived from a\n      general
      probe stream: Type-P-One-way-Bi-Packet-Loss-Stream.\n   o  Section 4 defines
      the prime example of the Bi-Packet-Loss-Stream\n      metrics, specifically
      Type-P-One-way-Bi-Packet-Loss-Geometric-\n      Stream arising from the geometric
      stream of packet-pair probes\n      that was described informally in Section
      1.\n   o  Section 5 defines loss episode proto-metrics that summarize the\n
      \     outcomes from a stream metrics as an intermediate step to forming\n      the
      loss episode metrics; they need not be reported in general.\n   o  Section 6
      defines the final loss episode metrics that are the\n      focus of this memo,
      the new metrics:\n      *  Type-P-One-way-Bi-Packet-Loss-Geometric-Stream-Episode-\n
      \        Duration, the average duration, in seconds, of a loss episode.\n      *
      \ Type-P-One-way-Bi-Packet-Loss-Geometric-Stream-Episode-\n         Frequency,
      the average frequency, per second, at which loss\n         episodes start.\n
      \     *  Type-P-One-way-Bi-Packet-Loss-Geometric-Stream-Ratio, which is\n         the
      average packet loss ratio metric arising from the geometric\n         stream
      probing methodology\n   o  Section 7 details applications and relations to existing
      loss\n      models.\n"
    title: 1.3.  Outline and Contents
  title: 1.  Introduction
- contents:
  - '2.   Singleton Definition for Type-P-One-way Bi-Packet Loss

    '
  - contents:
    - "2.1.  Metric Name\n   Type-P-One-way-Bi-Packet-Loss\n"
    title: 2.1.  Metric Name
  - contents:
    - "2.2.  Metric Parameters\n   o  Src, the IP address of a source host\n   o  Dst,
      the IP address of a destination host\n   o  T1, a sending time of the first
      packet\n   o  T2, a sending time of the second packet, with T2>T1\n   o  F,
      a selection function defining unambiguously the two packets\n      from the
      stream selected for the metric\n   o  P, the specification of the packet type,
      over and above the source\n      and destination addresses\n"
    title: 2.2.  Metric Parameters
  - contents:
    - "2.3.  Metric Units\n   A Loss Pair is pair (l1, l2) where each of l1 and l2
      is a binary\n   value 0 or 1, where 0 signifies successful transmission of a
      packet\n   and 1 signifies loss.\n   The metric unit of Type-P-One-way-Bi-Packet-Loss
      is a Loss Pair.\n"
    title: 2.3.  Metric Units
  - contents:
    - "2.4.  Metric Definition\n   1.  \"The Type-P-One-way-Bi-Packet-Loss with parameters
      (Src, Dst, T1,\n       T2, F, P) is (1,1)\" means that Src sent the first bit
      of a Type-P\n       packet to Dst at wire-time T1 and the first bit of a Type-P\n
      \      packet to Dst at wire-time T2>T1 and that neither packet was\n       received
      at Dst.\n   2.  \"The Type-P-One-way-Bi-Packet-Loss with parameters (Src, Dst,
      T1,\n       T2, F, P) is (1,0)\" means that Src sent the first bit of a Type-P\n
      \      packet to Dst at wire-time T1 and the first bit of a Type-P\n       packet
      to Dst at wire-time T2>T1 and that the first packet was\n       not received
      at Dst, and the second packet was received at Dst\n   3.  \"The Type-P-One-way-Bi-Packet-Loss
      with parameters (Src, Dst, T1,\n       T2, F, P) is (0,1)\" means that Src sent
      the first bit of a Type-P\n       packet to Dst at wire-time T1 and the first
      bit of a Type-P\n       packet to Dst at wire-time T2>T1 and that the first
      packet was\n       received at Dst, and the second packet was not received at
      Dst\n   4.  \"The Type-P-One-way-Bi-Packet-Loss with parameters (Src, Dst, T1,\n
      \      T2, F, P) is (0,0)\" means that Src sent the first bit of a Type-P\n
      \      packet to Dst at wire-time T1 and the first bit of a Type-P\n       packet
      to Dst at wire-time T2>T1 and that both packets were\n       received at Dst.\n"
    title: 2.4.  Metric Definition
  - contents:
    - "2.5.  Discussion\n   The purpose of the selection function is to specify exactly
      which\n   packets are to be used for measurement.  The notion is taken from\n
      \  Section 2.5 of [RFC3393], where examples are discussed.\n"
    title: 2.5.  Discussion
  - contents:
    - "2.6.  Methodologies\n   The methodologies related to the Type-P-One-way-Packet-Loss
      metric in\n   Section 2.6 of [RFC2680] are similar for the Type-P-One-way-Bi-\n
      \  Packet-Loss metric described above.  In particular, the methodologies\n   described
      in RFC 2680 apply to both packets of the pair.\n"
    title: 2.6.  Methodologies
  - contents:
    - "2.7.  Errors and Uncertainties\n   Sources of error for the Type-P-One-way-Packet-Loss
      metric in Section\n   2.7 of [RFC2680] apply to each packet of the pair for
      the Type-P-One-\n   way-Bi-Packet-Loss metric.\n"
    title: 2.7.  Errors and Uncertainties
  - contents:
    - "2.8.  Reporting the Metric\n   Refer to Section 2.8 of [RFC2680].\n"
    title: 2.8.  Reporting the Metric
  title: 2.   Singleton Definition for Type-P-One-way Bi-Packet Loss
- contents:
  - "3.  General Definition of Samples for Type-P-One-way-Bi-Packet-Loss\n   Given
    the singleton metric for Type-P-One-way-Bi-Packet-Loss, we now\n   define examples
    of samples of singletons.  The basic idea is as\n   follows.  We first specify
    a set of times T1 < T2 <...<Tn, each of\n   which acts as the first time of a
    packet pair for a single Type-P-\n   One-way-Bi-Packet-Loss measurement.  This
    results is a set of n\n   metric values of Type-P-One-way-Bi-Packet-Loss.\n"
  - contents:
    - "3.1.  Metric Name\n   Type-P-One-way-Bi-Packet-Loss-Stream\n"
    title: 3.1.  Metric Name
  - contents:
    - "3.2.  Metric Parameters\n   o  Src, the IP address of a source host\n   o  Dst,
      the IP address of a destination host\n   o  (T11,T12), (T21,T22)....,(Tn1,Tn2)
      a set of n times of sending\n      times for packet pairs, with T11 < T12 <=
      T21 < T22 <=...<= Tn1 <\n      Tn2\n   o  F, a selection function defining unambiguously
      the two packets\n      from the stream selected for the metric\n   o  P, the
      specification of the packet type, over and above the source\n      and destination
      address\n"
    title: 3.2.  Metric Parameters
  - contents:
    - "3.3.  Metric Units\n   A set L1,L2,...,Ln of Loss Pairs\n"
    title: 3.3.  Metric Units
  - contents:
    - "3.4.  Metric Definition\n   Each Loss Pair Li for i = 1,....n is the Type-P-One-way-Bi-Packet-\n
      \  Loss with parameters (Src, Dst, Ti1, Ti2, Fi, P) where Fi is the\n   restriction
      of the selection function F to the packet pair at time\n   Ti1, Ti2.\n"
    title: 3.4.  Metric Definition
  - contents:
    - "3.5.  Discussion\n   The metric definition of Type-P-One-way-Bi-Packet-Loss-Stream
      is\n   sufficiently general to describe the case where packets are sampled\n
      \  from a preexisting stream.  This is useful in the case in which there\n   is
      a general purpose measurement stream set up between two hosts, and\n   we wish
      to select a substream from it for the purposes of loss\n   episode measurement.
      \ Packet pairs selected as bi-packet loss probes\n   need not be consecutive
      within such a stream.  In the next section,\n   we specialize this somewhat
      to more concretely describe a purpose\n   built packet stream for loss episode
      measurement.\n"
    title: 3.5.  Discussion
  - contents:
    - "3.6.  Methodologies\n   The methodologies related to the Type-P-One-way-Packet-Loss
      metric in\n   Section 2.6 of [RFC2680] are similar for the Type-P-One-way-Bi-\n
      \  Packet-Loss-Stream metric described above.  In particular, the\n   methodologies
      described in RFC 2680 apply to both packets of each\n   pair.\n"
    title: 3.6.  Methodologies
  - contents:
    - "3.7.  Errors and Uncertainties\n   Sources of error for the Type-P-One-way-Packet-Loss
      metric in Section\n   2.7 of [RFC2680] apply to each packet of each pair for
      the Type-P-\n   One-way-Bi-Packet-Loss-Stream metric.\n"
    title: 3.7.  Errors and Uncertainties
  - contents:
    - "3.8.  Reporting the Metric\n   Refer to Section 2.8 of [RFC2680].\n"
    title: 3.8.  Reporting the Metric
  title: 3.  General Definition of Samples for Type-P-One-way-Bi-Packet-Loss
- contents:
  - "4.  An Active Probing Methodology for Bi-Packet Loss\n   This section specializes
    the preceding section for an active probing\n   methodology.  The basic idea is
    a follows.  We set up a sequence of\n   evenly spaced times T1 < T2 < ... < Tn.
    \ Each time Ti is potentially\n   the first packet time for a packet pair measurement.
    \ We make an\n   independent random decision at each time, whether to initiate
    such a\n   measurement.  Hence, the interval count between successive times at\n
    \  which a pair is initiated follows a geometric distribution.  We also\n   specify
    that the spacing between successive times Ti is the same as\n   the spacing between
    packets in a given pair.  Thus, if pairs happen\n   to be launched at the successive
    times Ti and T(i+1), the second\n   packet of the first pair is actually used
    as the first packet of the\n   second pair.\n"
  - contents:
    - "4.1.  Metric Name\n   Type-P-One-way-Bi-Packet-Loss-Geometric-Stream\n"
    title: 4.1.  Metric Name
  - contents:
    - "4.2.  Metric Parameters\n   o  Src, the IP address of a source host\n   o  Dst,
      the IP address of a destination host\n   o  T0, the randomly selected starting
      time [RFC3432] for periodic\n      launch opportunities\n   o  d, the time spacing
      between potential launch times, Ti and T(i+1)\n   o  n, a count of potential
      measurement instants\n   o  q, a launch probability\n   o  F, a selection function
      defining unambiguously the two packets\n      from the stream selected for the
      metric\n   o  P, the specification of the packet type, over and above the source\n
      \     and destination address\n"
    title: 4.2.  Metric Parameters
  - contents:
    - "4.3.  Metric Units\n   A set of Loss Pairs L1, L2, ..., Lm for some m <= n\n"
    title: 4.3.  Metric Units
  - contents:
    - "4.4.  Metric Definition\n   For each i = 0, 1, ..., n-1 we form the potential
      measurement time Ti\n   = T0 + i*d.  With probability q, a packet pair measurement
      is\n   launched at Ti, resulting in a Type-P-One-way-Bi-Packet-Loss with\n   parameters
      (Src, Dst, Ti, T(i+1), Fi, P) where Fi is the restriction\n   of the selection
      function F to the packet pair at times Ti, T(i+1).\n   L1, L2,...Lm are the
      resulting Loss Pairs; m can be less than n since\n   not all times Ti have an
      associated measurement.\n"
    title: 4.4.  Metric Definition
  - contents:
    - "4.5.  Discussion\n   The above definition of Type-P-One-way-Bi-Packet-Loss-Geometric-\n
      \  Stream is equivalent to using Type-P-One-way-Bi-Packet-Loss-Stream\n   with
      an appropriate statistical definition of the selection function\n   F.\n   The
      number m of Loss Pairs in the metric can be less than the number\n   of potential
      measurement instants because not all instants may\n   generate a probe when
      the launch probability q is strictly less than\n   1.\n"
    title: 4.5.  Discussion
  - contents:
    - "4.6.  Methodologies\n   The methodologies follow from:\n   o  the specific
      time T0, from which all successive Ti follow, and\n   o  the specific time spacing,
      and\n   o  the methodologies discussion given above for the singleton Type-P-\n
      \     One-way-Bi-Packet-Loss metric.\n   The issue of choosing an appropriate
      time spacing (e.g., one that is\n   matched to expected characteristics of loss
      episodes) is outside the\n   scope of this document.\n   Note that as with any
      active measurement methodology, consideration\n   must be made to handle out-of-order
      arrival of packets; see also\n   Section 3.6. of [RFC2680].\n"
    title: 4.6.  Methodologies
  - contents:
    - "4.7.  Errors and Uncertainties\n   In addition to sources of errors and uncertainties
      related to\n   methodologies for measuring the singleton Type-P-One-way-Bi-Packet-\n
      \  Loss metric, a key source of error when emitting packets for Bi-\n   Packet
      Loss relates to resource limits on the host used to send the\n   packets.  In
      particular, the choice of T0, the choice of the time\n   spacing, and the choice
      of the launch probability results in a\n   schedule for sending packets.  Insufficient
      CPU resources on the\n   sending host may result in an inability to send packets
      according to\n   schedule.  Note that the choice of time spacing directly affects
      the\n   ability of the host CPU to meet the required schedule (e.g., consider\n
      \  a 100 microsecond spacing versus a 100 millisecond spacing).\n   For other
      considerations, refer to Section 3.7 of [RFC2680].\n"
    title: 4.7.  Errors and Uncertainties
  - contents:
    - "4.8.  Reporting the Metric\n   Refer to Section 3.8. of [RFC2680].\n"
    title: 4.8.  Reporting the Metric
  title: 4.  An Active Probing Methodology for Bi-Packet Loss
- contents:
  - "5.  Loss Episode Proto-Metrics\n   This section describes four generic proto-metric
    quantities\n   associated with an arbitrary set of Loss Pairs.  These are the
    Loss-\n   Pair-Counts, Bi-Packet-Loss-Ratio, Bi-Packet-Loss-Episode-Duration-\n
    \  Number, Bi-Packet-Loss-Episode-Frequency-Number.  Specific loss\n   episode
    metrics can then be constructed when these proto-metrics\n   take, as their input,
    sets of Loss Pairs samples generated by the\n   Type-P-One-way-Bi-Packet-Loss-Stream
    and Type-P-One-way-Bi-Packet-\n   Loss-Geometric-Stream.  The second of these
    is described in\n   Section 4.  It is not expected that these proto-metrics would
    be\n   reported themselves.  Rather, they are intermediate quantities in the\n
    \  production of the final metrics of Section 6 below, and could be\n   rolled
    up into metrics in implementations.  The metrics report loss\n   episode durations
    and frequencies in terms of packet counts, since\n   they do not depend on the
    actual time between probe packets.  The\n   final metrics of Section 6 incorporate
    timescales and yield durations\n   in seconds and frequencies as per second.\n"
  - contents:
    - "5.1.  Loss-Pair-Counts\n   Loss-Pair-Counts are the absolute frequencies of
      the four types of\n   Loss Pair outcome in a sample.  More precisely, the Loss-Pair-Counts\n
      \  associated with a set of Loss Pairs L1,,,,Ln are the numbers N(i,j)\n   of
      such Loss Pairs that take each possible value (i,j) in the set (\n   (0,0),
      (0,1), (1,0), (1,1)).\n"
    title: 5.1.  Loss-Pair-Counts
  - contents:
    - "5.2.  Bi-Packet-Loss-Ratio\n   The Bi-Packet-Loss-Ratio associated with a set
      of n Loss Pairs\n   L1,,,,Ln is defined in terms of their Loss-Pair-Counts by
      the\n   quantity (N(1,0) + N(1,1))/n.\n   Note this is formally equivalent to
      the loss metric Type-P-One-way-\n   Packet-Loss-Average from [RFC2680], since
      it averages single packet\n   losses.\n"
    title: 5.2.  Bi-Packet-Loss-Ratio
  - contents:
    - "5.3.  Bi-Packet-Loss-Episode-Duration-Number\n   The Bi-Packet-Loss-Episode-Duration-Number
      associated with a set of n\n   Loss Pairs L1,,,,Ln is defined in terms of their
      Loss-Pair-Counts in\n   the following cases:\n   o  (2*N(1,1) + N(0,1) + N(1,0))
      / (N(0,1) + N(1,0)) if N(0,1) +\n      N(1,0) > 0\n   o  0 if N(0,1) + N(1,0)
      + N(1,1) = 0 (no probe packets lost)\n   o  Undefined if N(0,1) + N(1,0) + N(0,0)
      = 0 (all probe packets lost)\n   Note N(0,1) + N(1,0) is zero if there are no
      transitions between loss\n   and no-loss outcomes.\n"
    title: 5.3.  Bi-Packet-Loss-Episode-Duration-Number
  - contents:
    - "5.4.  Bi-Packet-Loss-Episode-Frequency-Number\n   The Bi-Packet-Loss-Episode-Frequency-Number
      associated with a set of\n   n Loss Pairs L1,,,,Ln is defined in terms of their
      Loss-Pair-Counts\n   as Bi-Packet-Loss-Ratio / Bi-Packet-Loss-Episode-Duration-Number,\n
      \  when this can be defined, specifically, it is as follows:\n   o  (N(1,0)
      + N(1,1)) * (N(0,1) + N(1,0)) / (2*N(1,1) + N(0,1) +\n      N(1,0) ) / n if
      N(0,1) + N(1,0) > 0\n   o  0 if N(0,1) + N(1,0) + N(1,1) = 0 (no probe packets
      lost)\n   o  1 if N(0,1) + N(1,0) + N(0,0) = 0 (all probe packets lost)\n"
    title: 5.4.  Bi-Packet-Loss-Episode-Frequency-Number
  title: 5.  Loss Episode Proto-Metrics
- contents:
  - "6.  Loss Episode Metrics Derived from Bi-Packet Loss Probing\n   Metrics for
    the time frequency and time duration of loss episodes are\n   now defined as functions
    of the set of n Loss Pairs L1,....,Ln.\n   Although a loss episode is defined
    as a maximal set of successive\n   lost packets, the loss episode metrics are
    not defined directly in\n   terms of the sequential patterns of packet loss exhibited
    by Loss\n   Pairs.  This is because samples, including Type-P-One-way-Bi-Packet-\n
    \  Loss-Geometric-Stream, generally do not report all lost packets in\n   each
    episode.  Instead, the metrics are defined as functions of the\n   Loss-Pair-Counts
    of the sample, for reasons that are now described.\n   Consider an idealized Type-P-One-way-Bi-Packet-Loss-Geometric-Stream\n
    \  sample in which the launch probability q =1.  It is shown in [SBDR08]\n   that
    the average number of packets in a loss episode of this ideal\n   sample is exactly
    the Bi-Packet-Loss-Episode-Duration derived from\n   its set of Loss Pairs.  Note
    this computation makes no reference to\n   the position of lost packet in the
    sequence of probes.\n   A general Type-P-One-way-Bi-Packet-Loss-Geometric-Stream
    sample with\n   launch probability q < 1, independently samples, with probability
    q,\n   each Loss Pair of an idealized sample.  On average, the Loss-Pair-\n   Counts
    (if normalized by the total number of pairs) will be the same\n   as in the idealized
    sample.  The loss episode metrics in the general\n   case are thus estimators
    of those for the idealized case; the\n   statistical properties of this estimation,
    including a derivation of\n   the estimation variance, is provided in [SBDR08].\n"
  - contents:
    - '6.1.  Geometric Stream: Loss Ratio

      '
    - contents:
      - "6.1.1.  Metric Name\n   Type-P-One-way-Bi-Packet-Loss-Geometric-Stream-Ratio\n"
      title: 6.1.1.  Metric Name
    - contents:
      - "6.1.2.  Metric Parameters\n   o  Src, the IP address of a source host\n   o
        \ Dst, the IP address of a destination host\n   o  T0, the randomly selected
        starting time [RFC3432] for periodic\n      launch opportunities\n   o  d,
        the time spacing between potential launch times, Ti and T(i+1)\n   o  n, a
        count of potential measurement instants\n   o  q, a launch probability\n   o
        \ F, a selection function defining unambiguously the two packets\n      from
        the stream selected for the metric\n   o  P, the specification of the packet
        type, over and above the source\n      and destination address\n"
      title: 6.1.2.  Metric Parameters
    - contents:
      - "6.1.3.  Metric Units\n   A decimal number in the interval [0,1]\n"
      title: 6.1.3.  Metric Units
    - contents:
      - "6.1.4.  Metric Definition\n   The result obtained by computing the Bi-Packet-Loss-Ratio
        over a\n   Type-P-One-way-Bi-Packet-Loss-Geometric-Stream sample with the
        metric\n   parameters.\n"
      title: 6.1.4.  Metric Definition
    - contents:
      - "6.1.5.  Discussion\n   Type-P-One-way-Bi-Packet-Loss-Geometric-Stream-Ratio
        estimates the\n   fraction of packets lost from the geometric stream of Bi-Packet\n
        \  probes.\n"
      title: 6.1.5.  Discussion
    - contents:
      - "6.1.6.  Methodologies\n   Refer to Section 4.6.\n"
      title: 6.1.6.  Methodologies
    - contents:
      - "6.1.7.  Errors and Uncertainties\n   Because Type-P-One-way-Bi-Packet-Loss-Geometric-Stream
        is sampled in\n   general (when the launch probability q <1), the metrics
        described in\n   this section can be regarded as statistical estimators of
        the\n   corresponding idealized version corresponding to q = 1.  Estimation\n
        \  variance as it applies to Type-P-One-way-Bi-Packet-Loss-Geometric-\n   Stream-Loss-Ratio
        is described in [SBDR08].\n   For other issues, refer to Section 4.7\n"
      title: 6.1.7.  Errors and Uncertainties
    - contents:
      - "6.1.8.  Reporting the Metric\n   Refer to Section 4.8.\n"
      title: 6.1.8.  Reporting the Metric
    title: '6.1.  Geometric Stream: Loss Ratio'
  - contents:
    - '6.2.  Geometric Stream: Loss Episode Duration

      '
    - contents:
      - "6.2.1.  Metric Name\n   Type-P-One-way-Bi-Packet-Loss-Geometric-Stream-Episode-Duration\n"
      title: 6.2.1.  Metric Name
    - contents:
      - "6.2.2.  Metric Parameters\n   o  Src, the IP address of a source host\n   o
        \ Dst, the IP address of a destination host\n   o  T0, the randomly selected
        starting time [RFC3432] for periodic\n      launch opportunities\n   o  d,
        the time spacing between potential launch times, Ti and T(i+1)\n   o  n, a
        count of potential measurement instants\n   o  q, a launch probability\n   o
        \ F, a selection function defining unambiguously the two packets\n      from
        the stream selected for the metric\n   o  P, the specification of the packet
        type, over and above the source\n      and destination address\n"
      title: 6.2.2.  Metric Parameters
    - contents:
      - "6.2.3.  Metric Units\n   A non-negative number of seconds\n"
      title: 6.2.3.  Metric Units
    - contents:
      - "6.2.4.  Metric Definition\n   The result obtained by computing the Bi-Packet-Loss-Episode-Duration-\n
        \  Number over a Type-P-One-way-Bi-Packet-Loss-Geometric-Stream sample\n   with
        the metric parameters, then multiplying the result by the launch\n   spacing
        parameter d.\n"
      title: 6.2.4.  Metric Definition
    - contents:
      - "6.2.5.  Discussion\n   Type-P-One-way-Bi-Packet-Loss-Geometric-Stream-Episode-Duration\n
        \  estimates the average duration of a loss episode, measured in\n   seconds.
        \ The duration measured in packets is obtained by dividing\n   the metric
        value by the packet launch spacing parameter d.\n"
      title: 6.2.5.  Discussion
    - contents:
      - "6.2.6.  Methodologies\n   Refer to Section 4.6.\n"
      title: 6.2.6.  Methodologies
    - contents:
      - "6.2.7.  Errors and Uncertainties\n   Because Type-P-One-way-Bi-Packet-Loss-Geometric-Stream
        is sampled in\n   general (when the launch probability q <1), the metrics
        described in\n   this section can be regarded as statistical estimators of
        the\n   corresponding idealized version corresponding to q = 1.  Estimation\n
        \  variance as it applies to Type-P-One-way-Bi-Packet-Loss-Geometric-\n   Stream-Episode-Duration
        is described in [SBDR08].\n   For other issues, refer to Section 4.7\n"
      title: 6.2.7.  Errors and Uncertainties
    - contents:
      - "6.2.8.  Reporting the Metric\n   Refer to Section 4.8.\n"
      title: 6.2.8.  Reporting the Metric
    title: '6.2.  Geometric Stream: Loss Episode Duration'
  - contents:
    - '6.3.  Geometric Stream: Loss Episode Frequency

      '
    - contents:
      - "6.3.1.  Metric Name\n   Type-P-One-way-Bi-Packet-Loss-Geometric-Stream-Episode-Frequency\n"
      title: 6.3.1.  Metric Name
    - contents:
      - "6.3.2.  Metric Parameters\n   o  Src, the IP address of a source host\n   o
        \ Dst, the IP address of a destination host\n   o  T0, the randomly selected
        starting time [RFC3432] for periodic\n      launch opportunities\n   o  d,
        the time spacing between potential launch times, Ti and T(i+1)\n   o  n, a
        count of potential measurement instants\n   o  q, a launch probability\n   o
        \ F, a selection function defining unambiguously the two packets\n      from
        the stream selected for the metric\n   o  P, the specification of the packet
        type, over and above the source\n      and destination address\n"
      title: 6.3.2.  Metric Parameters
    - contents:
      - "6.3.3.  Metric Units\n   A positive number\n"
      title: 6.3.3.  Metric Units
    - contents:
      - "6.3.4.  Metric Definition\n   The result obtained by computing the Bi-Packet-Loss-Episode-\n
        \  Frequency-Number over a Type-P-One-way-Bi-Packet-Loss-Geometric-\n   Stream
        sample with the metric parameters, then dividing the result by\n   the launch
        spacing parameter d.\n"
      title: 6.3.4.  Metric Definition
    - contents:
      - "6.3.5.  Discussion\n   Type-P-One-way-Bi-Packet-Loss-Geometric-Stream-Episode-Frequency\n
        \  estimates the average frequency per unit time with which loss\n   episodes
        start (or finish).  The frequency relative to the count of\n   potential probe
        launches is obtained by multiplying the metric value\n   by the packet launch
        spacing parameter d.\n"
      title: 6.3.5.  Discussion
    - contents:
      - "6.3.6.  Methodologies\n   Refer to Section 4.6.\n"
      title: 6.3.6.  Methodologies
    - contents:
      - "6.3.7.  Errors and Uncertainties\n   Because Type-P-One-way-Bi-Packet-Loss-Geometric-Stream
        is sampled in\n   general (when the launch probability q <1), the metrics
        described in\n   this section can be regarded as statistical estimators of
        the\n   corresponding idealized version corresponding to q = 1.  Estimation\n
        \  variance as it applies to Type-P-One-way-Bi-Packet-Loss-Geometric-\n   Stream-Episode-Frequency
        is described in [SBDR08].\n   For other issues, refer to Section 4.7\n"
      title: 6.3.7.  Errors and Uncertainties
    - contents:
      - "6.3.8.  Reporting the Metric\n   Refer to Section 4.8.\n"
      title: 6.3.8.  Reporting the Metric
    title: '6.3.  Geometric Stream: Loss Episode Frequency'
  title: 6.  Loss Episode Metrics Derived from Bi-Packet Loss Probing
- contents:
  - '7.  Applicability of Loss Episode Metrics

    '
  - contents:
    - "7.1.  Relation to Gilbert Model\n   The general Gilbert-Elliot model is a discrete
      time Markov chain over\n   two states, Good (g) and Bad (b), each with its own
      independent\n   packet loss ratio.  In the simplest case, the Good loss ratio
      is 0,\n   while the Bad loss ratio is 1.  Correspondingly, there are two\n   independent
      parameters, the Markov transition probabilities P(g|b) =\n   1- P(b|b) and P(b|g)
      = 1- P(g|g), where P(i|j) is the probability to\n   transition from state j
      and step n to state i at step n+1.  With\n   these parameters, the fraction
      of steps spent in the bad state is\n   P(b|g)/(P(b|g) + P(g|b)), while the average
      duration of a sojourn in\n   the bad state is 1/P(g|b) steps.\n   Now identify
      the steps of the Markov chain with the possible sending\n   times of packets
      for a Type-P-One-way-Bi-Packet-Loss-Geometric-Stream\n   with launch spacing
      d.  Suppose the loss episode metrics Type-P-One-\n   way-Bi-Packet-Loss-Geometric-Stream-Ratio
      and Type-P-One-way-Bi-\n   Packet-Loss-Geometric-Stream-Episode-Duration take
      the values r and\n   m, respectively.  Then, from the discussion in Section
      6.1.5, the\n   following can be equated:\n   r = P(b|g)/(P(b|g) + P(g|b)) and
      m/d = 1/P(g|b).\n   These relationships can be inverted in order to recover
      the Gilbert\n   model parameters:\n   P(g|b) = d/m and P(b|g)=d/m/(1/r - 1)\n"
    title: 7.1.  Relation to Gilbert Model
  title: 7.  Applicability of Loss Episode Metrics
- contents:
  - "8.  Security Considerations\n   Conducting Internet measurements raises both
    security and privacy\n   concerns.  This memo does not specify an implementation
    of the\n   metrics, so it does not directly affect the security of the Internet\n
    \  or of applications that run on the Internet.  However,implementations\n   of
    these metrics must be mindful of security and privacy concerns.\n   There are
    two types of security concerns: potential harm caused by\n   the measurements
    and potential harm to the measurements.  The\n   measurements could cause harm
    because they are active and inject\n   packets into the network.  The measurement
    parameters MUST be\n   carefully selected so that the measurements inject trivial
    amounts of\n   additional traffic into the networks they measure.  If they inject\n
    \  \"too much\" traffic, they can skew the results of the measurement and,\n   in
    extreme cases, cause congestion and denial of service.  The\n   measurements themselves
    could be harmed by routers giving measurement\n   traffic a different priority
    than \"normal\" traffic, or by an attacker\n   injecting artificial measurement
    traffic.  If routers can recognize\n   measurement traffic and treat it separately,
    the measurements may not\n   reflect actual user traffic.  If an attacker injects
    artificial\n   traffic that is accepted as legitimate, the loss rate will be\n
    \  artificially lowered.  Therefore, the measurement methodologies\n   SHOULD
    include appropriate techniques to reduce the probability that\n   measurement
    traffic can be distinguished from \"normal\" traffic.\n   Authentication techniques,
    such as digital signatures, may be used\n   where appropriate to guard against
    injected traffic attacks.  The\n   privacy concerns of network measurement are
    limited by the active\n   measurements described in this memo: they involve no
    release of user\n   data.\n"
  title: 8.  Security Considerations
- contents:
  - '9.  References

    '
  - contents:
    - "9.1.  Normative References\n   [RFC2680]  Almes, G., Kalidindi, S., and M.
      Zekauskas, \"A One-way\n              Packet Loss Metric for IPPM\", RFC 2680,
      September 1999.\n   [RFC3393]  Demichelis, C. and P. Chimento, \"IP Packet Delay
      Variation\n              Metric for IP Performance Metrics (IPPM)\", RFC 3393,\n
      \             November 2002.\n   [RFC3611]  Friedman, T., Caceres, R., and A.
      Clark, \"RTP Control\n              Protocol Extended Reports (RTCP XR)\", RFC
      3611,\n              November 2003.\n   [RFC2119]  Bradner, S., \"Key words
      for use in RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC
      2119, March 1997.\n   [RFC3432]  Raisanen, V., Grotefeld, G., and A. Morton,
      \"Network\n              performance measurement with periodic streams\", RFC
      3432,\n              November 2002.\n"
    title: 9.1.  Normative References
  - contents:
    - "9.2.  Informative References\n   [RFC2330]  Paxson, V., Almes, G., Mahdavi,
      J., and M. Mathis,\n              \"Framework for IP Performance Metrics\",
      RFC 2330,\n              May 1998.\n   [RFC3357]  Koodli, R. and R. Ravikanth,
      \"One-way Loss Pattern Sample\n              Metrics\", RFC 3357, August 2002.\n
      \  [SBDR08]   IEEE/ACM Transactions on Networking, 16(2): 307-320, \"A\n              Geometric
      Approach to Improving Active Packet Loss\n              Measurement\", 2008.\n
      \  [Gilbert]  Gilbert, E.N., \"Capacity of a Burst-Noise Channel. Bell\n              System
      Technical Journal 39 pp 1253-1265\", 1960.\n   [Elliot]   Elliott, E.O., \"Estimates
      of Error Rates for Codes on\n              Burst-Noise Channels. Bell System
      Technical Journal 42 pp\n              1977-1997\", 1963.\n"
    title: 9.2.  Informative References
  title: 9.  References
- contents:
  - "Authors' Addresses\n   Nick Duffield\n   AT&T Labs-Research\n   180 Park Avenue\n
    \  Florham Park, NJ  07932\n   USA\n   Phone: +1 973 360 8726\n   Fax:   +1 973
    360 8871\n   EMail: duffield@research.att.com\n   URI:   http://www.research.att.com/people/Duffield_Nicholas_G\n
    \  Al Morton\n   AT&T Labs\n   200 Laurel Avenue South\n   Middletown,, NJ  07748\n
    \  USA\n   Phone: +1 732 420 1571\n   Fax:   +1 732 368 1192\n   EMail: acmorton@att.com\n
    \  URI:   http://home.comcast.net/~acmacm/\n   Joel Sommers\n   Colgate University\n
    \  304 McGregory Hall\n   Hamilton, NY  13346\n   USA\n   Phone: +1 315 228 7587\n
    \  Fax:\n   EMail: jsommers@colgate.edu\n   URI:   http://cs.colgate.edu/faculty/jsommers\n"
  title: Authors' Addresses
