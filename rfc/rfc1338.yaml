- title: __initial_text__
  contents:
  - '      Supernetting: an Address Assignment and Aggregation Strategy

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This memo provides information for the Internet community.\
    \ It does\n   not specify an Internet standard.  Distribution of this memo is\n\
    \   unlimited.\n"
- title: Abstract
  contents:
  - "Abstract\n   This memo discusses strategies for address assignment of the existing\n\
    \   IP address space with a view to conserve the address space and stem\n   the\
    \ explosive growth of routing tables in default-route-free routers\n   run by\
    \ transit routing domain providers.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   Acknowledgements .................................................\
    \  2\n   1.  Problem, goal, and motivation ................................  2\n\
    \   2.  Scheme plan ..................................................  3\n  \
    \ 2.1.  Aggregation and its limitations ............................  3\n   2.2.\
    \  Distributed network number allocation ......................  5\n   3.  Cost-benefit\
    \ analysis ........................................  6\n   3.1.  Present allocation\
    \ figures .................................  7\n   3.2.  Historic growth rates\
    \ ......................................  8\n   3.3.  Detailed analysis ..........................................\
    \  8\n   3.3.1.  Benefits of new addressing plan ..........................  9\n\
    \   3.3.2.  Growth rate projections ..................................  9\n  \
    \ 4.  Changes to Inter-Domain routing protocols .................... 11\n   4.1.\
    \  General semantic changes ................................... 11\n   4.2.  Rules\
    \ for route advertisement .............................. 11\n   4.3.  How the\
    \ rules work ......................................... 13\n   4.4.  Responsibility\
    \ for and configuration of aggregation ........ 14\n   5.  Example of new allocation\
    \ and routing ........................ 15\n   5.1.  Address allocation .........................................\
    \ 15\n   5.2.  Routing advertisements ..................................... 17\n\
    \   6.  Transitioning to a long term solution ........................ 18\n  \
    \ 7.  Conclusions .................................................. 18\n   8.\
    \  Recommendations .............................................. 18\n   9.  Bibliography\
    \ ................................................. 19\n   10. Security Considerations\
    \ ...................................... 19\n   11. Authors' Addresses ...........................................\
    \ 19\n"
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   The authors wish to express their appreciation to the members\
    \ of the\n   ROAD group with whom many of the ideas contained in this document\n\
    \   were inspired and developed.\n"
- title: 1.    Problem, Goal, and Motivation
  contents:
  - "1.    Problem, Goal, and Motivation\n   As the Internet has evolved and grown\
    \ over in recent years, it has\n   become painfully evident that it is soon to\
    \ face several serious\n   scaling problems. These include:\n        1.   Exhaustion\
    \ of the class-B network address space. One\n             fundamental cause of\
    \ this problem is the lack of a network\n             class of a size which is\
    \ appropriate for mid-sized\n             organization; class-C, with a maximum\
    \ of 254 host\n             addresses, is too small while class-B, which allows\
    \ up to\n             65534 addresses, is to large to be widely allocated.\n \
    \       2.   Growth of routing tables in Internet routers beyond the\n       \
    \      ability of current software (and people) to effectively\n             manage.\n\
    \        3.   Eventual exhaustion of the 32-bit IP address space.\n   It has become\
    \ clear that the first two of these problems are likely\n   to become critical\
    \ within the next one to three years.  This memo\n   attempts to deal with these\
    \ problems by proposing a mechanism to slow\n   the growth of the routing table\
    \ and the need for allocating new IP\n   network numbers. It does not attempt\
    \ to solve the third problem,\n   which is of a more long-term nature, but instead\
    \ endeavors to ease\n   enough of the short to mid-term difficulties to allow\
    \ the Internet to\n   continue to function efficiently while progress is made\
    \ on a longer-\n   term solution.\n   The proposed solution is to hierarchically\
    \ allocate future IP address\n   assignment, by delegating control of segments\
    \ of the IP address space\n   to the various network service providers.\n   It\
    \ is proposed that this scheme of allocating IP addresses be\n   undertaken as\
    \ soon as possible.  It is also believed that the scheme\n   will suffice as a\
    \ short term strategy, to fill the gap between now\n   and the time when a viable\
    \ long term plan can be put into place and\n   deployed effectively.  It is believed\
    \ that this scheme would be\n   viable for at least three (3) years, in which\
    \ time frame, a suitable\n   long term solution would be expected to be deployed.\n\
    \   Note that this plan neither requires nor assumes that already\n   assigned\
    \ addresses will be reassigned, though if doing so were\n   possible, it would\
    \ further reduce routing table sizes. It is assumed\n   that routing technology\
    \ will be capable of dealing with the current\n   routing table size and with\
    \ some reasonably-small rate of growth.\n   The emphasis of this plan is on significantly\
    \ slowing the rate of\n   this growth.\n   This scheme will not affect the deployment\
    \ of any specific long term\n   plan, and therefore, this document will not discuss\
    \ any long term\n   plans for routing and address architectures.\n"
- title: 2.    Scheme Plan
  contents:
  - "2.    Scheme Plan\n   There are two basic components of this addressing and routing\
    \ scheme:\n   one, to distribute the allocation of Internet address space and\
    \ two,\n   to provide a mechanism for the aggregation of routing information.\n\
    \   2.1.  Aggregation and its limitations\n   One major goal of this addressing\
    \ plan is to allocate Internet\n   address space in such a manner as to allow\
    \ aggregation of routing\n   information along topological lines. For simple,\
    \ single-homed\n   clients, the allocation of their address space out of a service\n\
    \   provider's space will accomplish this automatically - rather than\n   advertise\
    \ a separate route for each such client, the service provider\n   may advertise\
    \ a single, aggregate, route which describes all of the\n   destinations contained\
    \ within it. Unfortunately, not all sites are\n   singly-connected to the network,\
    \ so some loss of ability to aggregate\n   is realized for the non simple cases.\n\
    \   There are two situations that cause a loss of aggregation efficiency.\n  \
    \   o    Organizations which are multi-homed. Because multi-homed\n          organizations\
    \ must be advertised into the system by each of\n          their service providers,\
    \ it is often not feasible to aggregate\n          their routing information into\
    \ the address space any one of\n          those providers. Note that they still\
    \ may receive their\n          address allocation out of a service provider's\
    \ address space\n          (which has other advantages), but their routing information\n\
    \          must still be explicitly advertised by most of their service\n    \
    \      providers (the exception being that if the site's allocation\n        \
    \  comes out of its least-preferable service provider, then that\n          service\
    \ provider need not advertise the explicit route -\n          longest-match will\
    \ insure that its aggregated route is used to\n          get to the site on a\
    \ non-primary basis).  For this reason, the\n          routing cost for these\
    \ organizations will typically be about\n          the same as it is today.\n\
    \     o    Organizations which move from one service provider to another.\n  \
    \        This has the effect of \"punching a hole\" in the aggregation of\n  \
    \        the original service provider's advertisement. This plan will\n     \
    \     handle the situation by requiring the newer service provider\n         \
    \ to advertise a specific advertisement for the new client,\n          which is\
    \ preferred by virtue of being the longest match.  To\n          maintain efficiency\
    \ of aggregation, it is recommended that\n          organizations which do change\
    \ service providers plan to\n          eventually migrate their address assignments\
    \ from the old\n          provider's space to that of the new provider. To this\
    \ end, it\n          is recommended that mechanisms to facilitate such migration,\n\
    \          including improved protocols and procedures for dynamic host\n    \
    \      address assignment, be developed.\n     Note that some aggregation efficiency\
    \ gain can still be had for\n     multi-homed sites (and, in general, for any\
    \ site composed of\n     multiple, logical IP network numbers) - by allocating\
    \ a contiguous\n     block of network numbers to the client (as opposed to multiple,\n\
    \     independently represented network numbers) the client's routing\n     information\
    \ may be aggregated into a single (net, mask) pair. Also,\n     since the routing\
    \ cost associated with assigning a multi-homed site\n     out of a service provider's\
    \ address space is no greater than the\n     current method of a random allocation\
    \ by a central authority, it\n     makes sense to allocate all address space out\
    \ of blocks assigned to\n     service providers.\n     It is also worthwhile to\
    \ mention that since aggregation may occur\n     at multiple levels in the system,\
    \ it may still be possible to\n     aggregate these anomalous routes at higher\
    \ levels of whatever\n     hierarchy may be present. For example, if a site is\
    \ multi-homed to\n     two NSFNet regional networks both of whom obtain their\
    \ address\n     space from the NSFNet, then aggregation by the NSFNet of routes\n\
    \     from the regionals will include all routes to the multi-homed site.\n  \
    \   Finally, it should also be noted that deployment of the new\n     addressing\
    \ plan described in this document may (and should) begin\n     almost immediately\
    \ but effective use of the plan to aggregate\n     routing information will require\
    \ changes to some Inter-Domain\n     routing protocols. Likewise, deploying the\
    \ supernet-capable Inter-\n     Domain protocols without deployment of the new\
    \ address plan will\n     not allow useful aggregation to occur (in other words,\
    \ the\n     addressing plan and routing protocol changes are both required for\n\
    \     supernetting, and its resulting reduction in table growth, to be\n     effective.)\
    \ Note, however, that during the period of time between\n     deployment of the\
    \ addressing plan and deployment of the new\n     protocols, the size of routing\
    \ tables may temporarily grow very\n     rapidly. This must be considered when\
    \ planning the deployment of\n     the two plans.\n     Note: in the discussion\
    \ and examples which follow, the network+mask\n     notation is used to represent\
    \ routing destinations. This is used\n     for illustration only and does not\
    \ require that routing protocols\n     use this representation in their updates.\n\
    \     2.2.  Distributed allocation of address space\n     The basic idea of the\
    \ plan is to allocate one or more blocks of\n     Class-C network numbers to each\
    \ network service provider.\n     Organizations using the network service provider\
    \ for Internet\n     connectivity are allocated bitmask-oriented subsets of the\n\
    \     provider's address space as required.\n     Note that in contrast to a previously\
    \ described scheme of\n     subnetting a class-A network number, this plan should\
    \ not require\n     difficult host changes to work around domain system limitations\
    \ -\n     since each sub-allocated piece of the address space looks like a\n \
    \    class-C network number, delegation of authority for the IN-\n     ADDR.ARPA\
    \ domain works much the same as it does today - there will\n     just be a lot\
    \ of class-C network numbers whose IN-ADDR.ARPA\n     delegations all point to\
    \ the same servers (the same will be true of\n     the root delegating a large\
    \ block of class-Cs to the network\n     provider, unless the delegation just\
    \ happens to fall on a byte\n     boundary). It is also the case that this method\
    \ of aggregating\n     class-C's is somewhat easier to deploy, since it does not\
    \ require\n     the ability to split a class-A across a routing domain boundary\n\
    \     (i.e., non-contiguous subnets).\n     It is also worthy to mention that\
    \ once Inter-Domain protocols which\n     support classless network destinations\
    \ are widely deployed, the\n     rules described by the \"supernetting\" plan\
    \ generalize to permit\n     arbitrary super/subnetting of the remaining class-A\
    \ and class-B\n     address space (the assumption being that classless Inter-Domain\n\
    \     protocols will either allow for non-contiguous subnets to exist in\n   \
    \  the system or that all components of a sub-allocated class-A/B will\n     be\
    \ contained within a single routing domain). This will allow this\n     plan to\
    \ continue to be used in the event that the class-C space is\n     exhausted before\
    \ implementation of a long-term solution is deployed\n     (there may, however,\
    \ be further implementation considerations\n     before doing this).\n     Hierarchical\
    \ sub-allocation of addresses in this manner implies\n     that clients with addresses\
    \ allocated out of a given service\n     provider are, for routing purposes, part\
    \ of that service provider\n     and will be routed via its infrastructure. This\
    \ implies that\n     routing information about multi-homed organizations, i.e.,\n\
    \     organizations connected to more than one network service provider,\n   \
    \  will still need to be known by higher levels in the hierarchy.\n     The advantages\
    \ of hierarchical assignment in this fashion are\n     a)   It is expected to\
    \ be easier for a relatively small number of\n          service providers to obtain\
    \ addresses from the central\n          authority, rather than a much larger,\
    \ and monotonically\n          increasing, number of individual clients.  This\
    \ is not to be\n          considered as a loss of part of the service providers'\
    \ address\n          space.\n     b)   Given the current growth of the Internet,\
    \ a scalable and\n          delegatable method of future allocation of network\
    \ numbers has\n          to be achieved.\n   For these reasons, and in the interest\
    \ of providing a consistent\n   procedure for obtaining Internet addresses, it\
    \ is recommended that\n   most, if not all, network numbers be distributed through\
    \ service\n   providers.\n"
- title: 3.  Cost-benefit analysis
  contents:
  - "3.  Cost-benefit analysis\n   This new method of assigning address through service\
    \ providers can be\n   put into effect immediately and will, from the start, have\
    \ the\n   benefit of distributing the currently centralized process of\n   assigning\
    \ new addresses. Unfortunately, before the benefit of\n   reducing the size of\
    \ globally-known routing destinations can be\n   achieved, it will be necessary\
    \ to deploy an Inter-Domain routing\n   protocol capable of handling arbitrary\
    \ network+mask pairs. Only then\n   will it be possible to aggregate individual\
    \ class-C networks into\n   larger blocks represented by single routing table\
    \ entries.\n   This means that upon introduction, the new addressing plan will\
    \ not\n   in and of itself help solve the routing table size problem. Once the\n\
    \   new Inter-Domain routing protocol is deployed, however, an immediate\n   drop\
    \ in the number of destinations which clients of the new protocol\n   must carry\
    \ will occur.  A detailed analysis of the magnitude of this\n   expected drop\
    \ and the permanent reduction in rate of growth is given\n   in the next section.\n\
    \   In should also be noted that the present method of flat address\n   allocations\
    \ imposes a large bureaucratic cost on the central address\n   allocation authority.\
    \ For scaling reasons unrelated to address space\n   exhaustion or routing table\
    \ overflow, this should be changed. Using\n   the mechanism proposed in this paper\
    \ will have the happy side effect\n   of distributing the address allocation procedure,\
    \ greatly reducing\n   the load on the central authority.\n   3.1.  Present Allocation\
    \ Figures\n      A back-of-the-envelope analysis of \"network-contacts.txt\"\n\
    \      (available from the DDN NIC) indicates that as of 2/25/92, 46 of\n    \
    \  126 class-A network numbers have been allocated (leaving 81) and\n      5467\
    \ of 16256 class-B numbers have been allocated, leaving 10789.\n      Assuming\
    \ that recent trends continue, the number of allocated\n      class-B's will continue\
    \ to double approximately once a year. At\n      this rate of grown, all class-B's\
    \ will be exhausted within about\n      15 months.\n   3.2.  Historic growth rates\n\
    \      MM/YY     ROUTES                        MM/YY     ROUTES\n            \
    \    ADVERTISED                              ADVERTISED\n      ------------------------\
    \                -----------------------\n      Feb-92    4775               \
    \           Apr-90    1525\n      Jan-92    4526                          Mar-90\
    \    1038\n      Dec-91    4305                          Feb-90    997\n     \
    \ Nov-91    3751                          Jan-90    927\n      Oct-91    3556\
    \                          Dec-89    897\n      Sep-91    3389               \
    \           Nov-89    837\n      Aug-91    3258                          Oct-89\
    \    809\n      Jul-91    3086                          Sep-89    745\n      Jun-91\
    \    2982                          Aug-89    650\n      May-91    2763       \
    \                   Jul-89    603\n      Apr-91    2622                      \
    \    Jun-89    564\n      Mar-91    2501                          May-89    516\n\
    \      Feb-91    2417                          Apr-89    467\n      Jan-91   \
    \ 2338                          Mar-89    410\n      Dec-90    2190          \
    \                Feb-89    384\n      Nov-90    2125                         \
    \ Jan-89    346\n      Oct-90    2063                          Dec-88    334\n\
    \      Sep-90    1988                          Nov-88    313\n      Aug-90   \
    \ 1894                          Oct-88    291\n      Jul-90    1727          \
    \                Sep-88    244\n      Jun-90    1639                         \
    \ Aug-88    217\n      May-90    1580                          Jul-88    173\n\
    \            Table I : Growth in routing table size, total numbers\n         \
    \             Source for the routing table size data is MERIT\n   3.3.   Detailed\
    \ Analysis\n      There is no technical cost and minimal administrative cost\n\
    \      associated with deployment of the new address assignment plan. The\n  \
    \    administrative cost is basically that of convincing the NIC, the\n      IANA,\
    \ and the network service providers to agree to this plan,\n      which is not\
    \ expected to be too difficult. In addition,\n      administrative cost for the\
    \ central numbering authorities (the NIC\n      and the IANA) will be greatly\
    \ decreased by the deployment of this\n      plan. To take advantage of aggregation\
    \ of routing information,\n      however, it is necessary that the capability\
    \ to represent routes\n      as arbitrary network+mask fields (as opposed to the\
    \ current\n      class-A/B/C distinction) be added to the common Internet inter-\n\
    \      domain routing protocol(s).\n   3.3.1. Benefits of the new addressing plan\n\
    \      There are two benefits to be had by deploying this plan:\n      o    The\
    \ current problem with depletion of the available class-B\n           address\
    \ space can be ameliorated by assigning more-\n           appropriately sized\
    \ blocks of class-C's to mid-sized\n           organizations (in the 200-4000\
    \ host range).\n      o    When the improved inter-domain routing protocol is\
    \ deployed,\n           an immediate decrease in the number routing table entries\n\
    \           followed by a significant reduction in the rate growth of\n      \
    \     routing table size should occur (for default-free routers).\n   3.3.2. Growth\
    \ rate projections\n      Currently, a default-free routing table (for example,\
    \ the routing\n      tables maintained by the routers in the NSFNET backbone)\
    \ contains\n      approximately 4700 entries. This number reflects the current\
    \ size\n      of the NSFNET routing database. Historic data shows that this\n\
    \      number, on average, has doubled every 10 months between 1988 and\n    \
    \  1991. Assuming that this growth rate is going to persist in the\n      foreseeable\
    \ future (and there is no reason to assume otherwise),\n      we expect the number\
    \ of entries in a default-free routing table to\n      grow to approximately 30000\
    \ in two(2) years time.  In the\n      following analysis, we assume that the\
    \ growth of the Internet has\n      been, and will continue to be, exponential.\n\
    \      It should be stressed that these projections do not consider that\n   \
    \   the current shortage of class-B network numbers may increase the\n      number\
    \ of instances where many class-C's are used rather than a\n      class-B. Using\
    \ an assumption that new organizations which formerly\n      obtained class-B's\
    \ will now obtain somewhere between 4 and 16\n      class-C's, the rate of routing\
    \ table growth can conservatively be\n      expected to at least double and probably\
    \ quadruple. This means the\n      number of entries in a default-free routing\
    \ table may well exceed\n      10,000 entries within six months and 20,000 entries\
    \ in less than a\n      year.\n      Under the proposed plan, growth of the routing\
    \ table in a\n      default-free router is greatly reduced since most new address\n\
    \      assignment will come from one of the large blocks allocated to the\n  \
    \    service providers.  For the sake of this analysis, we assume\n      prompt\
    \ implementation of this proposal and deployment of the\n      revised routing\
    \ protocols. We make the initial assumption that any\n      initial block given\
    \ to a provider is sufficient to satisfy its\n      needs for two years.\n   \
    \   Since under this plan, multi-homed networks must continue to be\n      explicitly\
    \ advertised throughout the system (according to Rule#1\n      described in section\
    \ 4.2), the number multi-homed routes is\n      expected to be the dominant factor\
    \ in future growth of routing\n      table size, once the supernetting plan is\
    \ applied.\n      Presently, it is estimated that there are fewer than 100 multi-\n\
    \      homed organizations connected to the Internet. Each such\n      organization's\
    \ network is comprised of one or more network\n      numbers.  In many cases (and\
    \ in all future cases under this plan),\n      the network numbers used by an\
    \ organization are consecutive,\n      meaning that aggregation of those networks\
    \ during route\n      advertisement may be possible. This means that the number\
    \ of\n      routes advertised within the Internet for multi-homed networks may\n\
    \      be approximated as the total number of multi-homed organizations.\n   \
    \   Assuming that the number of multi-homed organization will double\n      every\
    \ year (which may be a over-estimation, given that every\n      connection costs\
    \ money), the number of routes for multi-homed\n      networks would be expected\
    \ to grow to approximately 800 in three\n      years.\n      If we further assume\
    \ that there are approximately 100 service\n      providers, then each service\
    \ provider will also need to advertise\n      its block of addresses.  However,\
    \ due to aggregation, these\n      advertisements will be reduced to only 100\
    \ additional routes.  We\n      assume that after the initial two years, new service\
    \ providers\n      combined with additional requests from existing providers will\n\
    \      require an additional 50 routes per year.  Thus, the total is 4700\n  \
    \    + 800 + 150 = 5650.  This represents an annual grown rate of\n      approximately\
    \ 6%.  This is in clear contrast to the current annual\n      growth of 150%.\
    \  This analysis also assumes an immediate\n      deployment of this plan with\
    \ full compliance. Note that this\n      analysis assumes only a single level\
    \ of route aggregation in the\n      current Internet - intelligent address allocation\
    \ should\n      significantly improve this.\n      Clearly, this is not a very\
    \ conservative assumption in the\n      Internet environment nor can 100% adoption\
    \ of this proposal be\n      expected. Still, with only a 90% participation in\
    \ this proposal by\n      service providers, at the end of the target three years,\
    \ global\n      routing table size will be \"only\" 4700 + 800 + 145 + 7500 =\
    \ 13145\n      routes -- without any action, the routing table will grow to\n\
    \      approximately 75000 routes during that time period.\n"
- title: 4.    Changes to Inter-Domain routing protocols
  contents:
  - "4.    Changes to Inter-Domain routing protocols\n   In order to support supernetting\
    \ efficiently, it is clear that some\n   changes will need to be made to both\
    \ routing protocols themselves and\n   to the way in which routing information\
    \ is interpreted. In the case\n   of \"new\" inter-domain protocols, the actual\
    \ protocol syntax changes\n   should be relatively minor. This mechanism will\
    \ not work with older\n   inter-domain protocols such as EGP2; the only ways to\
    \ interoperate\n   with old systems using such protocols are either to use existing\n\
    \   mechanisms for providing \"default\" routes or b) require that new\n   routers\
    \ talking to old routers \"explode\" supernet information into\n   individual\
    \ network numbers.  Since the first of these is trivial\n   while the latter is\
    \ cumbersome (at best -- consider the memory\n   requirements it imposes on the\
    \ receiver of the exploded information),\n   it is recommended that the first\
    \ approach be used -- that older\n   systems to continue to the mechanisms they\
    \ currently employ for\n   default handling.\n   Note that a basic assumption\
    \ of this plan is that those organizations\n   which need to import \"supernet\"\
    \ information into their routing\n   systems must run IGPs (such as OSPF[RFC1267])\
    \ which support classless\n   routes. Systems running older IGPs may still advertise\
    \ and receive\n   \"supernet\" information, but they will not be able to propagate\
    \ such\n   information through their routing domains.\n   4.1.  Protocol-independent\
    \ semantic changes\n   There are two fundamental changes which must be applied\
    \ to Inter-\n   Domain routing protocols in order for this plan to work. First,\
    \ the\n   concept of network \"class\" needs to be deprecated - this plan assumes\n\
    \   that routing destinations are represented by network+mask pairs and\n   that\
    \ routing is done on a longest-match basis (i.e., for a given\n   destination\
    \ which matches multiple network+mask pairs, the match with\n   the longest mask\
    \ is used). Second, current Inter-Domain protocols\n   generally do not support\
    \ the concept of route aggregation, so the new\n   semantics need to be implemented\
    \ mechanisms that routers use to\n   interpret routing information returned by\
    \ the Inter-Domain protocols.\n   In particular, when doing aggregation, dealing\
    \ with multi-homed sites\n   or destinations which change service providers is\
    \ difficult.\n   Fortunately, it is possible to define several fairly simple rules\
    \ for\n   dealing with such cases.\n   4.2.  Rules for route advertisement\n \
    \    1.   Routing to all destinations must be done on a longest-match\n      \
    \    basis only.  This implies that destinations which are multi-\n          homed\
    \ relative to a routing domain must always be explicitly\n          announced\
    \ into that routing domain - they cannot be summarized\n          (this makes\
    \ intuitive sense - if a network is multi-homed, all\n          of its paths into\
    \ a routing domain which is \"higher\" in the\n          hierarchy of networks\
    \ must be known to the \"higher\" network).\n     2.   A routing domain which\
    \ performs summarization of multiple\n          routes must discard packets which\
    \ match the summarization but\n          do not match any of the explicit routes\
    \ which makes up the\n          summarization. This is necessary to prevent routing\
    \ loops in\n          the presence of less-specific information (such as a default\n\
    \          route).  Implementation note - one simple way to implement\n      \
    \    this rule would be for the border router to maintain a \"sink\"\n       \
    \   route for each of its aggregations. By the rule of longest\n          match,\
    \ this would cause all traffic destined to components of\n          the aggregation\
    \ which are not explicitly known to be\n          discarded.\n   Note that during\
    \ failures, partial routing of traffic to a site which\n   takes its address space\
    \ from one service provider but which is\n   actually reachable only through another\
    \ (i.e., the case of a site\n   which has change service providers) may occur\
    \ because such traffic\n   will be routed along the path advertised by the aggregated\
    \ route.\n   Rule #2 will prevent any real problem from occurring by forcing such\n\
    \   traffic to be discarded by the advertiser of the aggregated route,\n   but\
    \ the output of \"traceroute\" and other similar tools will suggest\n   that a\
    \ problem exists within the service provider advertising the\n   aggregate, which\
    \ may be confusing to network operators (see the\n   example in section 5.2 for\
    \ details). Solutions to this problem appear\n   to be challenging and not likely\
    \ to be implementable by current\n   Inter-Domain protocols within the time-frame\
    \ suggested by this\n   document. This decision may need to be revisited as Inter-Domain\n\
    \   protocols evolve.\n   An implementation following these rules should also\
    \ make the\n   implementation be generalized, so that arbitrary network number\
    \ and\n   mask are accepted for all routing destinations.  The only outstanding\n\
    \   constraint is that the mask must be left contiguous.  Note that the\n   degenerate\
    \ route 0.0.0.0 mask 0.0.0.0 is used as a default route and\n   MUST be accepted\
    \ by all implementations.  Further, to protect against\n   accidental advertisements\
    \ of this route via the inter-domain\n   protocol, this route should never be\
    \ advertised unless there is\n   specific configuration information indicating\
    \ to do so.\n   Systems which process route announcements must also be able to\
    \ verify\n   that information which they receive is correct. Thus, implementations\n\
    \   of this plan which filter route advertisements must also allow masks\n   in\
    \ the filter elements.  To simplify administration, it would be\n   useful if\
    \ filter elements automatically allowed more specific network\n   numbers and\
    \ masks to pass in filter elements given for a more general\n   mask.  Thus, filter\
    \ elements which looked like:\n        accept 128.32.0.0\n        accept 128.120.0.0\n\
    \        accept 134.139.0.0\n        accept 36.0.0.0\n   would look something\
    \ like:\n        accept 128.32.0.0 255.255.0.0\n        accept 128.120.0.0 255.255.0.0\n\
    \        accept 134.139.0.0 255.255.0.0\n        deny 36.2.0.0 255.255.0.0\n \
    \       accept 36.0.0.0 255.0.0.0\n   This is merely making explicit the network\
    \ mask which was implied by\n   the class-A/B/C classification of network numbers.\n\
    \   4.3.  How the rules work\n   Rule #1 guarantees that the routing algorithm\
    \ used is consistent\n   across implementations and consistent with other routing\
    \ protocols,\n   such as OSPF. Multi-homed networks are always explicitly advertised\n\
    \   by every service provider through which they are routed even if they\n   are\
    \ a specific subset of one service provider's aggregate (if they\n   are not,\
    \ they clearly must be explicitly advertised). It may seem as\n   if the \"primary\"\
    \ service provider could advertise the multi-homed\n   site implicitly as part\
    \ of its aggregate, but the assumption that\n   longest-match routing is always\
    \ done causes this not to work.\n   Rule #2 guarantees that no routing loops form\
    \ due to aggregation.\n   Consider a mid-level network which has been allocated\
    \ the 2048\n   class-C networks starting with 192.24.0.0 (see the example in section\n\
    \   5 for more on this).  The mid-level advertises to a \"backbone\"\n   192.24.0.0/255.248.0.0.\
    \ Assume that the \"backbone\", in turn, has been\n   allocated the block of networks\
    \ 192.0.0.0/255.0.0.0. The backbone\n   will then advertise this aggregate route\
    \ to the mid-level. Now, if\n   the mid-level loses internal connectivity to the\
    \ network\n   192.24.1.0/255.255.255.0 (which is part of its aggregate), traffic\n\
    \   from the \"backbone\" to the mid-level to destination 192.24.1.1 will\n  \
    \ follow the mid-level's advertised route. When that traffic gets to\n   the mid-level,\
    \ however, the mid-level *must not* follow the route\n   192.0.0.0/255.0.0.0 it\
    \ learned from the backbone, since that would\n   result in a routing loop. Rule\
    \ #2 says that the mid-level may not\n   follow a less-specific route for a destination\
    \ which matches one of\n   its own aggregated routes. Note that handling of the\
    \ \"default\" route\n   (0.0.0.0/0.0.0.0) is a special case of this rule - a network\
    \ must not\n   follow the default to destinations which are part of one of it's\n\
    \   aggregated advertisements.\n   4.4.  Responsibility for and configuration\
    \ of aggregation\n   The AS which owns a range of addresses has the sole authority\
    \ for\n   aggregation of its address space.  In the usual case, the AS will\n\
    \   install manual configuration commands in its border routers to\n   aggregate\
    \ some portion of its address space.  As AS can also delegate\n   aggregation\
    \ authority to another AS.  In this case, aggregation is\n   done in the other\
    \ AS by one of its border routers.\n   When an inter-domain border router performs\
    \ route aggregation, it\n   needs to know the range of the block of IP addresses\
    \ to be\n   aggregated.  The basic principle is that it should aggregate as much\n\
    \   as possible but not to aggregate those routes which cannot be treated\n  \
    \ as part of a single unit due to multi-homing, policy, or other\n   constraints.\n\
    \   One mechanism is to do aggregation solely based on dynamically\n   learned\
    \ routing information. This has the danger of not specifying a\n   precise enough\
    \ range since when a route is not present, it is not\n   always possible to distinguish\
    \ whether it is temporarily unreachable\n   or that it does not belong in the\
    \ aggregate. Purely dynamic routing\n   also does not allow the flexibility of\
    \ defining what to aggregate\n   within a range. The other mechanism is to do\
    \ all aggregation based on\n   ranges of blocks of IP addresses preconfigured\
    \ in the router.  It is\n   recommended that preconfiguration be used, since it\
    \ more flexible and\n   allows precise specification of the range of destinations\
    \ to\n   aggregate.\n   Preconfiguration does require some manually-maintained\
    \ configuration\n   information, but not excessively more so than what router\n\
    \   administrators already maintain today. As an addition to the amount\n   of\
    \ information that must be typed in and maintained by a human,\n   preconfiguration\
    \ is just a line or two defining the range of the\n   block of IP addresses to\
    \ aggregate. In terms of gathering the\n   information, if the advertising router\
    \ is doing the aggregation, its\n   administrator knows the information because\
    \ the aggregation ranges\n   are assigned to its domain.  If the receiving domain\
    \ has been granted\n   the authority to and task of performing aggregation, the\
    \ information\n   would be known as part of the agreement to delegate aggregation.\n\
    \   Given that it is common practice that a network administrator learns\n   from\
    \ its neighbor which routes it should be willing to accept,\n   preconfiguration\
    \ of aggregation information does not introduce\n   additional administrative\
    \ overhead.\n"
- title: 5.    Example of new allocation and routing
  contents:
  - "5.    Example of new allocation and routing\n   5.1.  Address allocation\n  \
    \ Consider the block of 2048 class-C network numbers beginning with\n   192.24.0.0\
    \ (0xC0180000 and ending with 192.31.255.0 (0xC01FFF00)\n   allocated to a single\
    \ network provider, \"RA\". A \"supernetted\" route\n   to this block of network\
    \ numbers would be described as 192.24.0.0\n   with mask of 255.248.0.0 (0xFFF80000).\n\
    \   Assume this service provider connects six clients in the following\n   order\
    \ (significant because it demonstrates how temporary \"holes\" may\n   form in\
    \ the service provider's address space):\n       \"C1\" requiring fewer than 2048\
    \ addresses (8 class-C networks)\n       \"C2\" requiring fewer than 4096 addresses\
    \ (16 class-C networks)\n       \"C3\" requiring fewer than 1024 addresses (4\
    \ class-C networks)\n       \"C4\" requiring fewer than 1024 addresses (4 class-C\
    \ networks)\n       \"C5\" requiring fewer than 512 addresses (2 class-C networks)\n\
    \       \"C6\" requiring fewer than 512 addresses (2 class-C networks)\n   In\
    \ all cases, the number of IP addresses \"required\" by each client is\n   assumed\
    \ to allow for significant growth. The service provider\n   allocates its address\
    \ space as follows:\n       C1: allocate 192.24.0 through 192.24.7. This block\
    \ of networks is\n           described by the \"supernet\" route 192.24.0.0 and\
    \ mask\n           255.255.248.0\n       C2: allocate 192.24.16 through 192.24.31.\
    \ This block is described\n           by the route 192.24.16.0, mask 255.255.240.0\n\
    \       C3: allocate 192.24.8 through 192.24.11. This block is described\n   \
    \        by the route 192.24.8.0, mask 255.255.252.0\n       C4: allocate 192.24.12\
    \ through 192.24.15. This block is described\n           by the route 192.24.12.0,\
    \ mask 255.255.252.0\n       C5: allocate 192.24.32 and 192.24.33. This block\
    \ is described by\n           the route 192.24.32.0, mask 255.255.254.0\n    \
    \   C6: allocate 192.24.34 and 192.24.35. This block is described by\n       \
    \    the route 192.24.34.0, mask 255.255.254.0\n   Note that if the network provider\
    \ uses an IGP which can support\n   classless networks, he can (but doesn't have\
    \ to) perform\n   \"supernetting\" at the point where he connects to his clients\
    \ and\n   therefore only maintain six distinct routes for the 36 class-C\n   network\
    \ numbers. If not, explicit routes to all 36 class-C networks\n   will have to\
    \ be carried by the IGP.\n   To make this example more realistic, assume that\
    \ C4 and C5 are multi-\n   homed through some other service provider, \"RB\".\
    \ Further assume the\n   existence of a client \"C7\" which was originally connected\
    \ to \"RB\" but\n   has moved to \"RA\". For this reason, it has a block of network\
    \ numbers\n   which are allocated out \"RB\"'s block of (the next) 2048 class-C\n\
    \   network numbers:\n       C7: allocate 192.32.0 through 192.32.15. This block\
    \ is described\n           by the route 192.32.0, mask 255.255.240.0\n   For the\
    \ multi-homed clients, we will assume that C4 is advertised as\n   primary via\
    \ \"RA\" and secondary via \"RB\"; C5 is primary via \"RB\" and\n   secondary\
    \ via \"RA\". To connect this mess together, we will assume\n   that \"RA\" and\
    \ \"RB\" are connected via some common \"backbone\" provider\n   \"BB\".\n   Graphically,\
    \ this simple topology looks something like this:\n                       C1\n"
- title: 192.24.0.0 -- 192.24.7.0 \         _ 192.32.0.0 - 192.32.15.0
  contents:
  - '192.24.0.0 -- 192.24.7.0 \         _ 192.32.0.0 - 192.32.15.0

    '
- title: 192.24.0.0/255.255.248.0  \       /  192.32.0.0/255.255.240.0
  contents:
  - "192.24.0.0/255.255.248.0  \\       /  192.32.0.0/255.255.240.0\n            \
    \               \\     /             C7\n                       C2  +----+   \
    \                              +----+\n"
- title: 192.24.16.0 - 192.24.31.0 \|    |                                 |    |
  contents:
  - '192.24.16.0 - 192.24.31.0 \|    |                                 |    |

    '
- title: 192.24.16.0/255.255.240.0  |    |  _ 192.24.12.0 - 192.24.15.0 _  |    |
  contents:
  - "192.24.16.0/255.255.240.0  |    |  _ 192.24.12.0 - 192.24.15.0 _  |    |\n  \
    \                         |    | /  192.24.12.0/255.255.252.0  \\ |    |\n   \
    \                    C3 -|    |/              C4               \\|    |\n"
- title: 192.24.8.0 - 192.24.11.0   | RA |                                 | RB |
  contents:
  - '192.24.8.0 - 192.24.11.0   | RA |                                 | RB |

    '
- title: 192.24.8.0/255.255.252.0   |    |___ 192.24.32.0 - 192.24.33.0 ___|    |
  contents:
  - "192.24.8.0/255.255.252.0   |    |___ 192.24.32.0 - 192.24.33.0 ___|    |\n  \
    \                        /|    |    192.24.32.0/255.255.254.0    |    |\n    \
    \                   C6  |    |               C5                |    |\n"
- title: 192.24.34.0 - 192.24.35.0  |    |                                 |    |
  contents:
  - '192.24.34.0 - 192.24.35.0  |    |                                 |    |

    '
- title: 192.24.34.0/255.255.254.0  |    |                                 |    |
  contents:
  - "192.24.34.0/255.255.254.0  |    |                                 |    |\n  \
    \                         +----+                                 +----+\n    \
    \                          \\\\                                     \\\\\n"
- title: 192.24.12.0/255.255.252.0 (C4) ||      192.32.12.0/255.255.252.0 (C4) ||
  contents:
  - '192.24.12.0/255.255.252.0 (C4) ||      192.32.12.0/255.255.252.0 (C4) ||

    '
- title: 192.24.32.0/255.255.254.0 (C5) ||      192.32.32.0/255.255.192.0 (C5) ||
  contents:
  - '192.24.32.0/255.255.254.0 (C5) ||      192.32.32.0/255.255.192.0 (C5) ||

    '
- title: 192.32.0.0/255.255.240.0  (C7) ||      192.32.0.0/255.248.0.0 (RB)    ||
  contents:
  - '192.32.0.0/255.255.240.0  (C7) ||      192.32.0.0/255.248.0.0 (RB)    ||

    '
- title: 192.24.0.0/255.248.0.0 (RA)    ||                                     ||
  contents:
  - "192.24.0.0/255.248.0.0 (RA)    ||                                     ||\n  \
    \                             VV                                     VV\n    \
    \                 +--------------- BACKBONE PEER  BB ---------------+\n   5.2.\
    \  Routing advertisements\n   To follow rule #1, RA will need to advertise the\
    \ block of addresses\n   that it was given and C7.  Since C4 and C5 are multi-homed,\
    \ they must\n   also be advertised.\n   Advertisements from \"RA\" to \"BB\" will\
    \ be:\n       192.24.12.0/255.255.252.0 primary    (advertises C4)\n       192.24.32.0/255.255.254.0\
    \ secondary  (advertises C5)\n       192.32.0.0/255.255.240.0 primary     (advertises\
    \ C7)\n       192.24.0.0/255.248.0.0 primary       (advertises remainder of RA)\n\
    \   For RB, the advertisements must also include C4 and C5 as well as\n   it's\
    \ block of addresses.  Further, RB may advertise that C7 is\n   unreachable.\n\
    \   Advertisements from \"RB\" to \"BB\" will be:\n       192.24.12.0/255.255.252.0\
    \ secondary  (advertises C4)\n       192.24.32.0/255.255.254.0 primary    (advertises\
    \ C5)\n       192.32.0.0/255.248.0.0 primary       (advertises remainder of RB)\n\
    \   To illustrate the problem alluded to by the \"note\" in section 4.2,\n   consider\
    \ what happens if RA loses connectivity to C7 (the client\n   which is allocated\
    \ out of RB's space). In a stateful protocol, RA\n   will announce to BB that\
    \ 192.32.0.0/255.255.240.0 has become\n   unreachable. Now, when BB flushes this\
    \ information out of its routing\n   table, any future traffic sent through it\
    \ for this destination will\n   be forwarded to RB (where it will be dropped according\
    \ to Rule #2) by\n   virtue of RB's less specific match 192.32.0.0/255.248.0.0.\
    \  While\n   this does not cause an operational problem (C7 is unreachable in\
    \ any\n   case), it does create some extra traffic across \"BB\" (and may also\n\
    \   prove confusing to a network manager debugging the outage with\n   \"traceroute\"\
    ). A mechanism to cache such unreachability information\n   would help here, but\
    \ is beyond the scope of this document (such a\n   mechanism is also not implementable\
    \ in the near-term).\n"
- title: 6.  Transitioning to a long term solution
  contents:
  - "6.  Transitioning to a long term solution\n   This solution does not change the\
    \ Internet routing and addressing\n   architectures.  Hence, transitioning to\
    \ a more long term solution is\n   not affected by the deployment of this plan.\n"
- title: 7.  Conclusions
  contents:
  - "7.  Conclusions\n   We are all aware of the growth in routing complexity, and\
    \ the rapid\n   increase in allocation of network numbers.  Given the rate at\
    \ which\n   this growth is being observed, we expect to run out in a few short\n\
    \   years.\n   If the inter-domain routing protocol supports carrying network\
    \ routes\n   with associated masks, all of the major concerns demonstrated in\
    \ this\n   paper would be eliminated.\n   One of the influential factors which\
    \ permits maximal exploitation of\n   the advantages of this plan is the number\
    \ of people who agree to use\n   it.  It is hoped that having the IAB and the\
    \ Internet society bless\n   this plan would go a long way in the wide deployment,\
    \ and hence\n   benefit of this plan.\n   If service providers start charging\
    \ networks for advertising network\n   numbers, this would be a very great incentive\
    \ to share the address\n   space, and hence the associated costs of advertising\
    \ routes to\n   service providers.\n"
- title: 8.  Recommendations
  contents:
  - "8.  Recommendations\n   The NIC should begin to hand out large blocks of class-C\
    \ addresses to\n   network service providers.  Each block must fall on bit boundaries\n\
    \   and should be large enough to serve the provider for two years.\n   Further,\
    \ the NIC should distribute very large blocks to continental\n   and national\
    \ network service organizations to allow additional levels\n   of aggregation\
    \ to take place at the major backbone networks.\n   Service providers will further\
    \ allocate power-of-two blocks of\n   class-C addresses from their address space\
    \ to their subscribers.\n   All organizations, including those which are multi-homed,\
    \ should\n   obtain address space from their provider (or one of their providers,\n\
    \   in the case of the multi-homed).  These blocks should also fall on\n   bit\
    \ boundaries to permit easy route aggregation.\n   To allow effective use of this\
    \ new addressing plan to reduce\n   propagated routing information, appropriate\
    \ IETF WGs will specify the\n   modifications needed to Inter-Domain routing protocols.\n\
    \   Implementation and deployment of these modifications should occur as\n   quickly\
    \ as possible.\n"
- title: 9.  Bibliography
  contents:
  - "9.  Bibliography\n   [RFC1247]  Moy, J, \"The OSPF Specification  Version 2\"\
    , January 1991.\n"
- title: 10.  Security Considerations
  contents:
  - "10.  Security Considerations\n   Security issues are not discussed in this memo.\n"
- title: 11.  Authors' Addresses
  contents:
  - "11.  Authors' Addresses\n      Vince Fuller\n      BARRNet\n      Pine Hall 115\n\
    \      Stanford, CA, 94305-4122\n      email: vaf@Stanford.EDU\n      Tony Li\n\
    \      cisco Systems, Inc.\n      1525 O'Brien Drive\n      Menlo Park, CA 94025\n\
    \      email: tli@cisco.com\n      Jessica (Jie Yun) Yu\n      Merit Network,\
    \ Inc.\n      1071 Beal Ave.\n      Ann Arbor, MI 48109\n      email: jyy@merit.edu\n\
    \      Kannan Varadhan\n      Internet Engineer, OARnet\n      1224, Kinnear Road,\n\
    \      Columbus, OH 43212\n      email: kannan@oar.net\n"
