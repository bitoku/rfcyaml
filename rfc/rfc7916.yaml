- title: __initial_text__
  contents:
  - '             Operational Management of Loop-Free Alternates

    '
- title: Abstract
  contents:
  - "Abstract\n   Loop-Free Alternates (LFAs), as defined in RFC 5286, constitute\
    \ an IP\n   Fast Reroute (IP FRR) mechanism enabling traffic protection for IP\n\
    \   traffic (and, by extension, MPLS LDP traffic).  Following early\n   deployment\
    \ experiences, this document provides operational feedback\n   on LFAs, highlights\
    \ some limitations, and proposes a set of\n   refinements to address those limitations.\
    \  It also proposes required\n   management specifications.\n   This proposal\
    \ is also applicable to remote-LFA solutions.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 7841.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7916.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2016 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n\
    \      1.1. Requirements Language ......................................4\n  \
    \ 2. Definitions .....................................................4\n   3.\
    \ Operational Issues with Default LFA Tiebreakers .................5\n      3.1.\
    \ Case 1: PE Router Protecting against Failures\n           within Core Network\
    \ ........................................5\n      3.2. Case 2: PE Router Chosen\
    \ to Protect against Core\n           Failures while P Router LFA Exists .........................7\n\
    \      3.3. Case 3: Suboptimal P Router Alternate Choice ...............8\n  \
    \    3.4. Case 4: No-Transit LFA Computing Node ......................9\n   4.\
    \ Need for Coverage Monitoring ....................................9\n   5. Need\
    \ for LFA Activation Granularity ............................10\n   6. Configuration\
    \ Requirements .....................................11\n      6.1. LFA Enabling/Disabling\
    \ Scope ..............................11\n      6.2. Policy-Based LFA Selection\
    \ ................................12\n           6.2.1. Connected versus Remote\
    \ Alternates .................12\n           6.2.2. Mandatory Criteria .................................13\n\
    \           6.2.3. Additional Criteria ................................14\n  \
    \         6.2.4. Evaluation of Criteria .............................14\n    \
    \       6.2.5. Retrieving Alternate Path Attributes ...............18\n      \
    \     6.2.6. ECMP LFAs ..........................................23\n   7. Operational\
    \ Aspects ............................................24\n      7.1. No-Transit\
    \ Condition on LFA Computing Node ................24\n      7.2. Manual Triggering\
    \ of FRR ..................................25\n      7.3. Required Local Information\
    \ ................................26\n      7.4. Coverage Monitoring .......................................26\n\
    \      7.5. LFAs and Network Planning .................................27\n  \
    \ 8. Security Considerations ........................................28\n   9.\
    \ References .....................................................28\n      9.1.\
    \ Normative References ......................................28\n      9.2. Informative\
    \ References ....................................30\n   Contributors ......................................................31\n\
    \   Authors' Addresses ................................................31\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Following the first deployments of Loop-Free Alternates\
    \ (LFAs), this\n   document provides feedback to the community about the management\n\
    \   of LFAs.\n   o  Section 3 provides real use cases illustrating some limitations\n\
    \      and suboptimal behavior.\n   o  Section 4 provides requirements for LFA\
    \ simulations.\n   o  Section 5 proposes requirements for activation granularity\
    \ and\n      policy-based selection of the alternate.\n   o  Section 6 expresses\
    \ requirements for the operational management of\n      LFAs and, in particular,\
    \ a policy framework to manage alternates.\n   o  Section 7 details some operational\
    \ considerations of LFAs, such as\n      IS-IS overload bit management and troubleshooting\
    \ information.\n"
- title: 1.1.  Requirements Language
  contents:
  - "1.1.  Requirements Language\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\"\
    , \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"\
    MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [RFC2119].\n"
- title: 2.  Definitions
  contents:
  - "2.  Definitions\n   o  Per-prefix LFA computation: Evaluation for the best alternate\
    \ is\n      done for each destination prefix, as opposed to the \"per-next-hop\"\
    \n      simplification technique proposed in Section 3.8 of [RFC5286].\n   o \
    \ PE router: Provider Edge router.  These routers connect customers\n      to\
    \ each other.\n   o  P router: Provider router.  These routers are core routers\
    \ without\n      customer connections.  They provide transit between PE routers,\n\
    \      and they form the core network.\n   o  Core network: subset of the network\
    \ composed of P routers and\n      links between them.\n   o  Core link: network\
    \ link part of the core network, i.e., a link\n      between P routers.\n   o\
    \  Link-protecting LFA: alternate providing protection against link\n      failure.\n\
    \   o  Node-protecting LFA: alternate providing protection against node\n    \
    \  failure.\n   o  Connected alternate: alternate adjacent (at the IGP level)\
    \ to the\n      Point of Local Repair (PLR) (i.e., an IGP neighbor).\n   o  Remote\
    \ alternate: alternate that does not share an IGP adjacency\n      with the PLR.\n"
- title: 3.  Operational Issues with Default LFA Tiebreakers
  contents:
  - "3.  Operational Issues with Default LFA Tiebreakers\n   [RFC5286] introduces\
    \ the notion of tiebreakers when selecting the LFA\n   among multiple candidate\
    \ alternate next hops.  When multiple LFAs\n   exist, [RFC5286] has favored the\
    \ selection of the LFA that provides\n   the best coverage against the failure\
    \ cases.  While this is indeed a\n   goal, it is one among multiple goals, and\
    \ in some deployments this\n   leads to the selection of a suboptimal LFA.  The\
    \ following sections\n   detail real use cases related to such limitations.\n\
    \   Note that the use case for LFA computation per destination\n   (per-prefix\
    \ LFA) is assumed throughout this analysis.  We also assume\n   in the network\
    \ figures that all IP prefixes are advertised with\n   zero cost.\n"
- title: '3.1.  Case 1: PE Router Protecting against Failures within Core Network'
  contents:
  - "3.1.  Case 1: PE Router Protecting against Failures within Core Network\n   \
    \      P1 --------- P2 ---------- P3 --------- P4\n         |      1         \
    \  100           1       |\n         |                                       \
    \ |\n         | 100                                    | 100\n         |     \
    \                                   |\n         |      1           100       \
    \    1       |  1     5k\n         P5 --------- P6 ---------- P7 --------- P8\
    \ --- P9 -- PE1\n         | |         | |            |             |\n       5k|\
    \ |5k     5k| |5k          | 5k          | 5k\n         | |         | |      \
    \      |             |\n         | +-- PE4 --+ |            +---- PE2 ----+\n\
    \         |             |                   |\n         +---- PE5 ----+      \
    \             | 5k\n                                           |\n           \
    \                               PE3\n         Px routers are P routers using n\
    \ * 10 Gbps links.\n         PEs are connected using links with lower bandwidth.\n\
    \                                 Figure 1\n   In Figure 1, let us consider the\
    \ traffic flowing from PE1 to PE4.\n   The nominal path is P9-P8-P7-P6-PE4.  Let\
    \ us now consider the failure\n   of link P7-P8.  As the P4 primary path to PE4\
    \ is P8-P7-P6-PE4, P4 is\n   not an LFA for P8 (because P4 will loop traffic back\
    \ to P8), and the\n   only available LFA is PE2.\n   When the core link P8-P7\
    \ fails, P8 switches all traffic destined to\n   PE4/PE5 towards the node PE2.\
    \  Hence, a PE node and PE links are used\n   to protect against the failure of\
    \ a core link.  Typically, PE links\n   have less capacity than core links, and\
    \ congestion may occur on PE2\n   links.  Note that although PE2 is not directly\
    \ affected by the\n   failure, its links become congested, and its traffic will\
    \ suffer from\n   the congestion.\n   In summary, in the case of P8-P7 link failure,\
    \ the impact on customer\n   traffic is:\n   o  From PE2's point of view:\n  \
    \    *  without LFA: no impact.\n      *  with LFA: traffic is partially dropped\
    \ (but possibly\n         prioritized by a QoS mechanism).  It must be highlighted\
    \ that\n         in such a situation, traffic not affected by the failure may\
    \ be\n         affected by the congestion.\n   o  From P8's point of view:\n \
    \     *  without LFA: traffic is totally dropped until convergence\n         occurs.\n\
    \      *  with LFA: traffic is partially dropped (but possibly\n         prioritized\
    \ by a QoS mechanism).\n   Besides the congestion aspects of using a PE router\
    \ as an alternate\n   to protect against a core failure, a service provider may\
    \ consider\n   this to be a bad routing design and would want to prevent it.\n"
- title: '3.2.  Case 2: PE Router Chosen to Protect against Core Failures while'
  contents:
  - "3.2.  Case 2: PE Router Chosen to Protect against Core Failures while\n     \
    \ P Router LFA Exists\n          P1 --------- P2 ------------ P3 ------- P4\n\
    \          |      1           100       |     1    |\n          |            \
    \                |          |\n          | 100                        | 30   \
    \    | 30\n          |                            |          |\n          |  \
    \   1         50       50  |    10    |   1    5k\n          P5 --------- P6 ---\
    \ P10 ---- P7 ------- P8 --- P9 -- PE1\n          | |         | |        \\  \
    \              |\n        5k| |5k     5k| |5k       \\ 5k            | 5k\n  \
    \        | |         | |          \\              |\n          | +-- PE4 --+ |\
    \           +---- PE2 ----+\n          |             |                  |\n  \
    \        +---- PE5 ----+                  | 5k\n                             \
    \              |\n                                          PE3\n            \
    \ Px routers are P routers meshed with n * 10 Gbps links.\n             PEs are\
    \ meshed using links with lower bandwidth.\n                                 Figure\
    \ 2\n   In Figure 2, let us consider the traffic coming from PE1 to PE4.  The\n\
    \   nominal path is P9-P8-P7-P10-P6-PE4.  Let us now consider the failure\n  \
    \ of the link P7-P8.  For P8, P4 is a link-protecting LFA and PE2 is a\n   node-protecting\
    \ LFA.  PE2 is chosen as the best LFA, due to the\n   better type of protection\
    \ that it provides.  Just as in case 1, this\n   may lead to congestion on PE2\
    \ links upon LFA activation.\n"
- title: '3.3.  Case 3: Suboptimal P Router Alternate Choice'
  contents:
  - "3.3.  Case 3: Suboptimal P Router Alternate Choice\n                        \
    \     +--- PE3 ---+\n                            /             \\\n          \
    \            1000 /               \\ 1000\n                          /       \
    \          \\\n                  +----- P1 ---------------- P2 ----+\n       \
    \           |      |        500        |      |\n                  | 10   |  \
    \                 |      | 10\n                  |      |                   |\
    \      |\n                  R5     | 10                | 10   R7\n           \
    \       |      |                   |      |\n                  | 10   |      \
    \             |      | 10\n                  |      |        500        |    \
    \  |\n                  +---- P3 ----------------- P4 ----+\n                \
    \          \\                 /\n                      1000 \\               /\
    \ 1000\n                            \\             /\n                       \
    \      +--- PE1 ---+\n                   Px routers are P routers.\n         \
    \          P1-P2 and P3-P4 links are 1 Gbps links.\n                   All other\
    \ inter-Px links are 10 Gbps links.\n                                 Figure 3\n\
    \   In Figure 3, let us consider the failure of link P1-P3.  For\n   destination\
    \ PE3, P3 has two possible alternates:\n   o  P4, which is node-protecting\n \
    \  o  R5, which is link-protecting\n   P4 is chosen as the best LFA, due to the\
    \ better type of protection\n   that it provides.  However, for bandwidth capacity\
    \ reasons, it\n   may not be desirable to use P4.  A service provider may prefer\
    \ to use\n   high-bandwidth links as the preferred LFA.  In this example,\n  \
    \ preferring the shortest path over the type of protection may achieve\n   the\
    \ expected behavior, but in cases where metrics do not reflect the\n   bandwidth,\
    \ this technique would not work and some other criteria\n   would need to be involved\
    \ when selecting the best LFA.\n"
- title: '3.4.  Case 4: No-Transit LFA Computing Node'
  contents:
  - "3.4.  Case 4: No-Transit LFA Computing Node\n                               P1\
    \       P2\n                               |   \\  /   |\n                   \
    \         50 | 50 \\/ 50 | 50\n                               |    /\\    |\n\
    \                               PE1-+  +-- PE2\n                             \
    \   \\        /\n                              45 \\      / 45\n             \
    \                     -PE3-\n                         (No-transit condition set)\n\
    \                                 Figure 4\n   The IS-IS and OSPF protocols define\
    \ some way to prevent a router from\n   being used for transit.\n   The IS-IS\
    \ overload bit is defined in [ISO10589], and the OSPF R-bit\n   is defined in\
    \ [RFC5340].  Also, the OSPF stub router is defined in\n   [RFC6987] as a method\
    \ to prevent transit on a node by advertising\n   MaxLinkMetric on all non-stub\
    \ links.\n   In Figure 4, PE3 has its no-transit condition set (permanently, for\n\
    \   design reasons) and wants to protect traffic using an LFA for\n   destination\
    \ PE2.\n   On PE3, the loop-free condition is not satisfied: 100 !< 45 + 45.\n\
    \   PE1 is thus not considered as an LFA.  However, thanks to the\n   no-transit\
    \ condition on PE3, we know that PE1 will not loop the\n   traffic back to PE3.\
    \  So, PE1 is an LFA to reach PE2.\n   In the case of a no-transit condition set\
    \ on a node, LFA behavior\n   must be clarified.\n"
- title: 4.  Need for Coverage Monitoring
  contents:
  - "4.  Need for Coverage Monitoring\n   As per [RFC6571], LFA coverage depends strongly\
    \ on the network\n   topology that is in use.  Even if the remote-LFA mechanism\
    \ [RFC7490]\n   significantly extends the coverage of the basic LFA specification,\n\
    \   there are still some cases where protection would not be available.\n   As\
    \ network topologies are constantly evolving (network extension,\n   additional\
    \ capacity, latency optimization, etc.), the protection\n   coverage may change.\
    \  Fast Reroute (FRR) functionality may be\n   critical for some services supported\
    \ by the network; a service\n   provider must always know what type of protection\
    \ coverage is\n   currently available on the network.  Moreover, predicting protection\n\
    \   coverage in the event of network topology changes is mandatory.\n   Today,\
    \ network simulation tools associated with \"what if\" scenarios\n   are often\
    \ used by service providers for the overall network design\n   (capacity, path\
    \ optimization, etc.).  Sections 7.3, 7.4, and 7.5 of\n   this document propose\
    \ the addition of LFA information into such tools\n   and within routers, so that\
    \ a service provider may be able to:\n   o  evaluate protection coverage after\
    \ a topology change.\n   o  adjust the topology change to cover the primary need\
    \ (e.g.,\n      latency optimization, bandwidth increase) as well as LFA\n   \
    \   protection.\n   o  constantly monitor the LFA coverage in the live network\
    \ and\n      receive alerts.\n   Documentation of LFA selection algorithms by\
    \ implementers (default\n   and tuning options) is important in order to make\
    \ it possible for\n   third-party modules to model these policy-based LFA selection\n\
    \   algorithms.\n"
- title: 5.  Need for LFA Activation Granularity
  contents:
  - "5.  Need for LFA Activation Granularity\n   As in all FRR mechanisms, an LFA\
    \ installs backup paths in the\n   Forwarding Information Base (FIB).  Depending\
    \ on the hardware used by\n   a service provider, FIB resources may be critical.\
    \  Activating LFAs\n   by default on all available components (IGP topologies,\
    \ interfaces,\n   address families, etc.) may lead to a waste of FIB resources,\
    \ as\n   generally only a few destinations in a network should be protected\n\
    \   (e.g., loopback addresses supporting MPLS services) compared to the\n   number\
    \ of destinations in the Routing Information Base (RIB).\n   Moreover, a service\
    \ provider may implement multiple different FRR\n   mechanisms in its networks\
    \ for different applications (e.g.,\n   Maximally Redundant Trees (MRTs), TE FRR).\
    \  In this scenario, an\n   implementation MAY allow the computation of alternates\
    \ for a specific\n   destination even if the destination is already protected\
    \ by another\n   mechanism.  This will provide redundancy and permit the operator\
    \ to\n   select the best option for FRR, using a policy language.\n   Section\
    \ 6 provides some implementation guidelines.\n"
- title: 6.  Configuration Requirements
  contents:
  - "6.  Configuration Requirements\n   Controlling the selection of the best alternate\
    \ and the granularity\n   of LFA activation is a requirement for service providers.\
    \  This\n   section defines configuration requirements for LFAs.\n"
- title: 6.1.  LFA Enabling/Disabling Scope
  contents:
  - "6.1.  LFA Enabling/Disabling Scope\n   The granularity of LFA activation SHOULD\
    \ be controlled (as alternate\n   next hops consume memory in the forwarding plane).\n\
    \   An implementation of an LFA SHOULD allow its activation, with the\n   following\
    \ granularities:\n   o  Per routing context: Virtual Routing and Forwarding (VRF),\n\
    \      virtual/logical router, global routing table, etc.\n   o  Per interface.\n\
    \   o  Per protocol instance, topology, area.\n   o  Per prefix: Prefix protection\
    \ SHOULD have a higher priority\n      compared to interface protection.  This\
    \ means that if a specific\n      prefix must be protected due to a configuration\
    \ request, an LFA\n      MUST be computed and installed for that prefix even if\
    \ the primary\n      outgoing interface is not configured for protection.\n  \
    \ An implementation of an LFA MAY allow its activation, with the\n   following\
    \ criteria:\n   o  Per address family: IPv4 unicast, IPv6 unicast.\n   o  Per\
    \ MPLS control plane: For MPLS control planes that inherit\n      routing decisions\
    \ from the IGP routing protocol, the MPLS\n      data plane may be protected by\
    \ an LFA.  The implementation may\n      allow an operator to control this inheritance\
    \ of protection from\n      the IP prefix to the MPLS label bound to this prefix.\
    \  The\n      inheritance of protection will concern IP-to-MPLS, MPLS-to-MPLS,\n\
    \      and MPLS-to-IP entries.  As an example, LDP and Segment Routing\n     \
    \ extensions [SEG-RTG-ARCH] for IS-IS and OSPF are control-plane\n      eligible\
    \ for this inheritance of protection.\n"
- title: 6.2.  Policy-Based LFA Selection
  contents:
  - "6.2.  Policy-Based LFA Selection\n   When multiple alternates exist, the LFA\
    \ selection algorithm is based\n   on tiebreakers.  Current tiebreakers do not\
    \ provide sufficient\n   control regarding how the best alternate is chosen. \
    \ This document\n   proposes an enhanced tiebreaker allowing service providers\
    \ to manage\n   all specific cases:\n   1.  An LFA implementation SHOULD support\
    \ policy-based decisions for\n       determining the best LFA.\n   2.  Policy-based\
    \ decisions SHOULD be based on multiple criteria, with\n       each criterion\
    \ having a level of preference.\n   3.  If the defined policy does not allow the\
    \ determination of a\n       unique best LFA, an implementation SHOULD pick only\
    \ one based on\n       its own decision.  For load-balancing purposes, an implementation\n\
    \       SHOULD also support the election of multiple LFAs.\n   4.  The policy\
    \ SHOULD be applicable to a protected interface or a\n       specific set of destinations.\
    \  In the case of applicability to\n       the protected interface, all destinations\
    \ primarily routed on\n       that interface SHOULD use the policy for that interface.\n\
    \   5.  The choice of whether or not to dynamically re-evaluate policy\n     \
    \  (in the event of a policy change) is left to the implementation.\n       If\
    \ a dynamic approach is chosen, the implementation SHOULD\n       recompute the\
    \ best LFAs and reinstall them in the FIB without\n       service disruption.\
    \  If a non-dynamic approach is chosen, the\n       policy would be taken into\
    \ account upon the next IGP event.  In\n       this case, the implementation SHOULD\
    \ support a command to\n       manually force the recomputation/reinstallation\
    \ of LFAs.\n"
- title: 6.2.1.  Connected versus Remote Alternates
  contents:
  - "6.2.1.  Connected versus Remote Alternates\n   In addition to connected LFAs,\
    \ tunnels (e.g., IP, LDP, RSVP-TE,\n   Segment Routing) to distant routers may\
    \ be used to complement LFA\n   coverage (tunnel tail used as virtual neighbor).\
    \  When a router has\n   multiple alternate candidates for a specific destination,\
    \ it may have\n   connected alternates and remote alternates (reachable via a\
    \ tunnel).\n   Connected alternates may not always provide an optimal routing\
    \ path,\n   and it may be preferable to select a remote alternate over a\n   connected\
    \ alternate.  Some uses of tunnels to extend LFA [RFC5286]\n   coverage are described\
    \ in [RFC7490] and [TI-LFA].  [RFC7490] and\n   [TI-LFA] present some use cases\
    \ for LDP tunnels and Segment Routing\n   tunnels, respectively.  This document\
    \ considers any type of tunneling\n   techniques to reach remote alternates (IP,\
    \ Generic Routing\n   Encapsulation (GRE), LDP, RSVP-TE, the Layer 2 Tunneling\
    \ Protocol\n   (L2TP), Segment Routing, etc.) and does not restrict the remote\n\
    \   alternates to the uses presented in these other documents.\n   In Figure 1,\
    \ there is no P router alternate for P8 to reach PE4 or\n   PE5, so P8 is using\
    \ PE2 as an alternate; this may generate congestion\n   when FRR is activated.\
    \  Instead, we could have a remote alternate for\n   P8 to protect traffic to\
    \ PE4 and PE5.  For example, a tunnel from P8\n   to P3 (following the shortest\
    \ path) can be set up, and P8 would be\n   able to use P3 as a remote alternate\
    \ to protect traffic to PE4 and\n   PE5.  In this scenario, traffic will not use\
    \ a PE link during FRR\n   activation.\n   When selecting the best alternate,\
    \ the selection algorithm MUST\n   consider all available alternates (connected\
    \ or tunnel).  For\n   example, with remote LFAs, computation of PQ sets [RFC7490]\
    \ SHOULD be\n   performed before the selection of the best alternate.\n"
- title: 6.2.2.  Mandatory Criteria
  contents:
  - "6.2.2.  Mandatory Criteria\n   An LFA implementation MUST support the following\
    \ criteria:\n   o  Non-candidate link: A link marked as \"non-candidate\" will\
    \ never be\n      used as an LFA.\n   o  A primary next hop being protected by\
    \ another primary next hop of\n      the same prefix (ECMP case).\n   o  Type\
    \ of protection provided by the alternate: link protection or\n      node protection.\
    \  In the case of preference for node protection,\n      an implementation SHOULD\
    \ support fallback to link protection if\n      node protection is not available.\n\
    \   o  Shortest path: lowest IGP metric used to reach the destination.\n   o \
    \ Shared Risk Link Groups (SRLGs) (as defined in Section 3 of\n      [RFC5286];\
    \ see also Section 6.2.4.1 for more details).\n"
- title: 6.2.3.  Additional Criteria
  contents:
  - "6.2.3.  Additional Criteria\n   An LFA implementation SHOULD support the following\
    \ criteria:\n   o  A downstream alternate: Preference for a downstream path over\
    \ a\n      non-downstream path SHOULD be configurable.\n   o  Link coloring with\
    \ \"include\", \"exclude\", and preference-based\n      systems (see Section 6.2.4.2).\n\
    \   o  Link bandwidth (see Section 6.2.4.3).\n   o  Alternate preference / node\
    \ coloring (see Section 6.2.4.4).\n"
- title: 6.2.4.  Evaluation of Criteria
  contents:
  - '6.2.4.  Evaluation of Criteria

    '
- title: 6.2.4.1.  SRLGs
  contents:
  - "6.2.4.1.  SRLGs\n   Section 3 of [RFC5286] proposes the reuse of GMPLS IGP extensions\
    \ to\n   encode SRLGs [RFC5307] [RFC4203].  Section 3 of [RFC5286] also\n   describes\
    \ the algorithm to compute SRLG protection.\n   When SRLG protection is computed,\
    \ an implementation SHOULD allow the\n   following:\n   o  Exclusion of alternates\
    \ in violation of SRLGs.\n   o  Maintenance of a preference system between alternates\
    \ based on\n      SRLG violations.  How the preference system is implemented is\
    \ out\n      of scope for this document, but here are two examples:\n      * \
    \ Preference based on the number of violations.  In this case,\n         more\
    \ violations = less preferred.\n      *  Preference based on violation cost. \
    \ In this case, each SRLG\n         violation has an associated cost.  The lower\
    \ violation costs\n         are preferred.\n   When applying SRLG criteria, the\
    \ SRLG violation check SHOULD be\n   performed on sources to alternates as well\
    \ as alternates to\n   destination paths, based on the SRLG set of the primary\
    \ path.  In the\n   case of remote LFAs, PQ-to-destination path attributes would\
    \ be\n   retrieved from the Shortest Path Tree (SPT) rooted at the PQ.\n"
- title: 6.2.4.2.  Link Coloring
  contents:
  - "6.2.4.2.  Link Coloring\n   Link coloring is a powerful system to control the\
    \ choice of\n   alternates.  Link colors are markers that will allow the encoding\
    \ of\n   properties of a particular link.  Protecting interfaces are tagged\n\
    \   with colors.  Protected interfaces are configured to include some\n   colors\
    \ with a preference level and exclude others.\n   Link color information SHOULD\
    \ be signaled in the IGP, and\n   administrative-group IGP extensions [RFC5305]\
    \ [RFC3630] that are\n   already standardized, implemented, and widely used SHOULD\
    \ be used for\n   encoding and signaling link colors.\n                      \
    \              PE2\n                                    |  +---- P4\n        \
    \                            | /\n                           PE1 ---- P1 ---------\
    \ P2\n                                    |     10 Gbps\n                    \
    \         1 Gbps |\n                                    |\n                  \
    \                  P3\n                                 Figure 5\n   In the example\
    \ in Figure 5, the P1 router is connected to three P\n   routers and two PEs.\
    \  P1 is configured to protect the P1-P4 link.  We\n   assume that, given the\
    \ topology, all neighbors are candidate LFAs.\n   We would like to enforce a policy\
    \ in the network where only a core\n   router may protect against the failure\
    \ of a core link and where\n   high-capacity links are preferred.\n   In this\
    \ example, we can use the proposed link coloring by:\n   o  Marking the PE links\
    \ with the color RED.\n   o  Marking the 10 Gbps core link with the color BLUE.\n\
    \   o  Marking the 1 Gbps core link with the color YELLOW.\n   o  Configuring\
    \ the protected interface P1->P4 as follows:\n      *  Include BLUE, preference\
    \ 200.\n      *  Include YELLOW, preference 100.\n      *  Exclude RED.\n   Using\
    \ this, PE links will never be used to protect against P1-P4 link\n   failure,\
    \ and the 10 Gbps link will be preferred.\n   The main advantage of this solution\
    \ is that it can easily be\n   duplicated on other interfaces and other nodes\
    \ without change.  A\n   service provider has only to define the color system\
    \ (associate a\n   color with a level of significance), as it is done already\
    \ for TE\n   affinities or BGP communities.\n   An implementation of link coloring:\n\
    \   o  SHOULD support multiple \"include\" and \"exclude\" colors on a single\n\
    \      protected interface.\n   o  SHOULD provide a level of preference between\
    \ included colors.\n   o  SHOULD support the configuration of multiple colors\
    \ on a single\n      protecting interface.\n"
- title: 6.2.4.3.  Bandwidth
  contents:
  - "6.2.4.3.  Bandwidth\n   As mentioned in previous sections, not taking into account\
    \ the\n   bandwidth of an alternate could lead to congestion during FRR\n   activation.\
    \  We propose that the bandwidth criteria be based on the\n   link speed information,\
    \ for the following reasons:\n   o  If a router S has a set of X destinations\
    \ primarily forwarded to\n      N, using per-prefix LFAs may lead to having a\
    \ subset of X\n      protected by a neighbor N1, another subset by N2, another\
    \ subset\n      by Nx, etc.\n   o  S is not aware of traffic flows to each destination,\
    \ so in the\n      case of FRR activation, S is not able to evaluate how much\
    \ traffic\n      will be sent to N1, N2, Nx, etc.\n   Based on this, it is not\
    \ useful to gather available bandwidth on\n   alternate paths, as the router does\
    \ not know how much bandwidth it\n   requires for protection.  The proposed link\
    \ speed approach provides a\n   good approximation at low cost, as information\
    \ is easily available.\n   The bandwidth criteria of the policy framework SHOULD\
    \ work in at\n   least the following two ways:\n   o  Prune: Exclude an LFA if\
    \ the link speed to reach it is lower than\n      the link speed of the primary\
    \ next-hop interface.\n   o  Prefer: Prefer an LFA based on its bandwidth to reach\
    \ it compared\n      to the link speed of the primary next-hop interface.\n"
- title: 6.2.4.4.  Alternate Preference / Node Coloring
  contents:
  - "6.2.4.4.  Alternate Preference / Node Coloring\n   Rather than tagging interfaces\
    \ on each node (using link colors) to\n   identify the types of alternate nodes\
    \ (as an example), it would be\n   helpful if routers could be identified in the\
    \ IGP.  This would allow\n   grouped processing on multiple nodes.  As an implementation\
    \ needs to\n   exclude some specific alternates (see Section 6.2.3), an\n   implementation\
    \ SHOULD be able to:\n   o  give preference to a specific alternate.\n   o  give\
    \ preference to a group of alternates.\n   o  exclude a specific alternate.\n\
    \   o  exclude a group of alternates.\n   A specific alternate may be identified\
    \ by its interface, IP address,\n   or router ID, and a group of alternates may\
    \ be identified by a marker\n   (tag) advertised in IGP.  The IGP encoding and\
    \ signaling for marking\n   groups of alternates SHOULD be done according to [RFC7917]\
    \ and\n   [RFC7777].  Using a tag/marker is referred to as \"node coloring\",\
    \ as\n   compared to the link coloring option presented in Section 6.2.4.2.\n\
    \   Consider the following network:\n                                  PE3\n \
    \                                 |\n                                  |\n   \
    \                               PE2\n                                  |   +----\
    \ P4\n                                  |  /\n                         PE1 ----\
    \ P1 -------- P2\n                                  |    10 Gbps\n           \
    \                1 Gbps |\n                                  |\n             \
    \                     P3\n                                 Figure 6\n   In the\
    \ example above, each node is configured with a specific tag\n   flooded through\
    \ the IGP.\n   o  PE1,PE3: 200 (non-candidate).\n   o  PE2: 100 (edge/core).\n\
    \   o  P1,P2,P3: 50 (core).\n   A simple policy could be configured on P1 to choose\
    \ the best\n   alternate for P1->P4 based on the function or role of the router,\n\
    \   as follows:\n   o  criterion 1 -> alternate preference: exclude tags 100 and\
    \ 200.\n   o  criterion 2 -> bandwidth.\n"
- title: 6.2.5.  Retrieving Alternate Path Attributes
  contents:
  - '6.2.5.  Retrieving Alternate Path Attributes

    '
- title: 6.2.5.1.  Alternate Path
  contents:
  - "6.2.5.1.  Alternate Path\n   The alternate path is composed of two distinct parts:\
    \ PLR to\n   alternate and alternate to destination.\n                       \
    \      N1 -- R1 ---- R2\n                            /50     \\       \\\n   \
    \                        /         R3 --- R4\n                          /    \
    \               \\\n                          S -------- E ------- D\n       \
    \                   \\\\                  //\n                           \\\\\
    \                //\n                            N2 ---- PQ ---- R5\n        \
    \                         Figure 7\n   In Figure 7, we consider a primary path\
    \ from S to D, with S using E\n   as the primary next hop.  All metrics are 1,\
    \ except that {S,N1} = 50.\n   Two alternate paths are available:\n   o  {S,N1,R1,R2|R3,R4,D},\
    \ where N1 is a connected alternate.  This\n      consists of two sub-paths:\n\
    \      *  {S,N1}: path from the PLR to the alternate.\n      *  {N1,R1,R2|R3,R4,D}:\
    \ path from the alternate to the destination.\n   o  {S,N2,PQ,R5,D}, where the\
    \ PQ is a remote alternate.  Again, the\n      path consists of two sub-paths:\n\
    \      *  {S,N2,PQ}: path from the PLR to the alternate.\n      *  {PQ,R5,D}:\
    \ path from the alternate to the destination.\n   As displayed in Figure 7, some\
    \ parts of the alternate path may fan\n   out to multiple paths due to ECMP.\n"
- title: 6.2.5.2.  Alternate Path Attributes
  contents:
  - "6.2.5.2.  Alternate Path Attributes\n   Some criteria listed in the previous\
    \ sections require the retrieval\n   of some characteristics of the alternate\
    \ path (SRLG, bandwidth,\n   color, tag, etc.).  We call these characteristics\
    \ \"path attributes\".\n   A path attribute can record a list of node properties\
    \ (e.g., node\n   tag) or link properties (e.g., link color).\n   This document\
    \ defines two types of path attributes:\n   o  Cumulative attribute: When a path\
    \ attribute is cumulative, the\n      implementation SHOULD record the value of\
    \ the attribute on each\n      element (link and node) along the alternate path.\
    \  SRLG, link\n      color, and node color are cumulative attributes.\n   o  Unitary\
    \ attribute: When a path attribute is unitary, the\n      implementation SHOULD\
    \ record the value of the attribute only on\n      the first element along the\
    \ alternate path (first node, or first\n      link).  Bandwidth is a unitary attribute.\n\
    \                             N1 -- R1 ---- R2\n                            /\
    \               \\\n                           / 50              R4\n        \
    \                  /                   \\\n                          S --------\
    \ E ------- D\n                                 Figure 8\n   In Figure 8, N1 is\
    \ a connected alternate to reach D from S.  We\n   consider that all links have\
    \ a RED color except {R1,R2}, which is\n   BLUE.  We consider all links to be\
    \ 10 Gbps except {N1,R1}, which is\n   2.5 Gbps.  The bandwidth attribute collected\
    \ for the alternate path\n   will be 10 Gbps.  As the attribute is unitary, only\
    \ the link speed of\n   the first link {S,N1} is recorded.  The link color attribute\n\
    \   collected for the alternate path will be {RED,RED,BLUE,RED,RED}.  As\n   the\
    \ attribute is cumulative, the value of the attribute on each link\n   along the\
    \ path is recorded.\n"
- title: 6.2.5.3.  Connected Alternate
  contents:
  - "6.2.5.3.  Connected Alternate\n   For an alternate path using a connected alternate:\n\
    \   o  Attributes from the PLR to the alternate are retrieved from the\n     \
    \ interface connected to the alternate.  If the alternate is\n      connected\
    \ through multiple interfaces, the evaluation of\n      attributes SHOULD be done\
    \ once per interface (each interface is\n      considered as a separate alternate)\
    \ and once per ECMP group of\n      interfaces (Layer 3 bundle).\n   o  Path attributes\
    \ from the alternate to the destination are\n      retrieved from the SPT rooted\
    \ at the alternate.  As the alternate\n      is a connected alternate, the SPT\
    \ has already been computed to\n      find the alternate, so there is no need\
    \ for additional\n      computation.\n                             N1 -- R1 ----\
    \ R2\n                          50//50             \\\n                      \
    \     //                 \\\n                        i1//i2                 \\\
    \n                         S -------- E -------- D\n                         \
    \        Figure 9\n   In Figure 9, we consider a primary path from S to D, with\
    \ S using E\n   as the primary next hop.  All metrics are considered as 1 except\n\
    \   {S,N1} links, which are using a metric of 50.  We consider the\n   following\
    \ SRLGs on links:\n   o  {S,N1} using i1: SRLG1,SRLG10.\n   o  {S,N1} using i2:\
    \ SRLG2,SRLG20.\n   o  {N1,R1}: SRLG3.\n   o  {R1,R2}: SRLG4.\n   o  {R2,D}: SRLG5.\n\
    \   o  {S,E}: SRLG10.\n   o  {E,D}: SRLG6.\n   S is connected to the alternate\
    \ using two interfaces: i1 and i2.\n   If i1 and i2 are not part of an ECMP group,\
    \ the evaluation of\n   attributes is done once per interface, and each interface\
    \ is\n   considered as a separate alternate path.  Two alternate paths will be\n\
    \   available with the associated SRLG attributes:\n   o  Alternate path #1: {S,N1\
    \ using if1,R1,R2,D}:\n      SRLG1,SRLG10,SRLG3,SRLG4,SRLG5.\n   o  Alternate\
    \ path #2: {S,N1 using if2,R1,R2,D}:\n      SRLG2,SRLG20,SRLG3,SRLG4,SRLG5.\n\
    \   Alternate path #1 is sharing risks with the primary path and may be\n   pruned,\
    \ or its preference may be revoked, per user-defined policy.\n   If i1 and i2\
    \ are part of an ECMP group, the evaluation of attributes\n   is done once per\
    \ ECMP group, and the implementation considers a\n   single alternate path {S,N1\
    \ using if1|if2,R1,R2,D} with the following\n   SRLG attributes: SRLG1,SRLG10,SRLG2,SRLG20,SRLG3,SRLG4,SRLG5.\
    \  The\n   alternate path is sharing risks with the primary path and may be\n\
    \   pruned, or its preference may be revoked, per user-defined policy.\n"
- title: 6.2.5.4.  Remote Alternate
  contents:
  - "6.2.5.4.  Remote Alternate\n   For alternate path using a remote alternate (tunnel):\n\
    \   o  Attributes on the path from the PLR to the alternate are retrieved\n  \
    \    using the PLR's primary SPT (when using a PQ node from the\n      P-space)\
    \ or the immediate neighbor's SPT (when using a PQ from the\n      extended P-space).\
    \  These are then combined with the attributes of\n      the link(s) to reach\
    \ the immediate neighbor.  In both cases, no\n      additional SPT is required.\n\
    \   o  Attributes from the remote alternate to the destination path may\n    \
    \  be retrieved from the SPT rooted at the remote alternate.  An\n      additional\
    \ forward SPT is required for each remote alternate\n      (PQ node), as indicated\
    \ in Section 2.3.2 of [REMOTE-LFA-NODE].  In\n      some remote-alternate scenarios,\
    \ like [TI-LFA], alternate-to-\n      destination path attributes may be obtained\
    \ using a different\n      technique.\n   The number of remote alternates may\
    \ be very high.  In the case of\n   remote LFAs, simulations of real-world network\
    \ topologies have shown\n   that as many as hundreds of PQs are possible.  The\
    \ computational\n   overhead of collecting all path attributes of all such PQs\
    \ to\n   destination paths could grow beyond reasonable levels.\n   To handle\
    \ this situation, implementations need to limit the number of\n   remote alternates\
    \ to be evaluated to a finite number before\n   collecting alternate path attributes\
    \ and running the policy\n   evaluation.  Section 2.3.3 of [REMOTE-LFA-NODE] provides\
    \ a way to\n   reduce the number of PQs to be evaluated.\n   Some other remote\
    \ alternate techniques using static or dynamic\n   tunnels may not require this\
    \ pruning.\n                  Link            Remote              Remote\n   \
    \               alternate       alternate           alternate\n              \
    \   -------------  ------------------   -------------\n   Alternates    |  LFA\
    \      |  |   rLFA (PQs)   |   |  Static/  |\n                 |           | \
    \ |                |   |  Dynamic  |\n   sources       |           |  |      \
    \          |   |  tunnels  |\n                 -------------  ------------------\
    \   -------------\n                      |                   |               \
    \   |\n                      |                   |                  |\n      \
    \                |        --------------------------    |\n                  \
    \    |        |  Prune some alternates |    |\n                      |       \
    \ | (sorting strategy)     |    |\n                      |        --------------------------\
    \    |\n                      |                   |                  |\n     \
    \                 |                   |                  |\n                 \
    \ ------------------------------------------------\n                  |      \
    \    Collect alternate attributes        |\n                  ------------------------------------------------\n\
    \                                          |\n                               \
    \           |\n                               -------------------------\n    \
    \                           |    Evaluate policy    |\n                      \
    \         -------------------------\n                                        \
    \  |\n                                          |\n                          \
    \         Best alternates\n                                 Figure 10\n"
- title: 6.2.5.5.  Collecting Attributes in the Case of Multiple Paths
  contents:
  - "6.2.5.5.  Collecting Attributes in the Case of Multiple Paths\n   As described\
    \ in Section 6.2.5, there may be some situations where an\n   alternate path or\
    \ part of an alternate path fans out to multiple\n   paths (e.g., ECMP).  When\
    \ collecting path attributes in such a case,\n   an implementation SHOULD consider\
    \ the union of attributes of each\n   sub-path.\n   In Figure 7 (in Section 6.2.5.1),\
    \ S has two alternate paths to\n   reach D.  Each alternate path fans out to multiple\
    \ paths due to ECMP.\n   Consider the following link color attributes: all links\
    \ are RED\n   except {R1,R3}, which is BLUE.  The user wants to use an alternate\n\
    \   path with only RED links.  The first alternate path\n   {S,N1,R1,R2|R3,R4,D}\
    \ does not fit the constraint, as {R1,R3} is BLUE.\n   The second alternate path\
    \ {S,N2,PQ,R5,D} fits the constraint and will\n   be preferred, as it uses only\
    \ RED links.\n"
- title: 6.2.6.  ECMP LFAs
  contents:
  - "6.2.6.  ECMP LFAs\n                                     10\n                \
    \                PE2 - PE3\n                                 |     |\n       \
    \                       50 |  5  | 50\n                                 P1----P2\n\
    \                                 \\\\    //\n                              50\
    \  \\\\  // 50\n                                   PE1\n                 Links\
    \ between P1 and PE1 are L1 and L2.\n                 Links between P2 and PE1\
    \ are L3 and L4.\n                                 Figure 11\n   In Figure 11,\
    \ the primary path from PE1 to PE2 is through P1, using\n   ECMP on two parallel\
    \ links -- L1 and L2.  In the case of standard\n   ECMP behavior, if L1 is failing,\
    \ the post-convergence next hop would\n   become L2 and ECMP would no longer be\
    \ in use.  If an LFA is\n   activated, as stated in Section 3.4 of [RFC5286],\
    \ \"alternate\n   next-hops may themselves also be primary next-hops, but need\
    \ not be\"\n   and \"alternate next-hops should maximize the coverage of the failure\n\
    \   cases.\"  In this scenario, there is no alternate providing node\n   protection,\
    \ so PE1 will prefer L2 as the alternate to protect L1;\n   this makes sense compared\
    \ to post-convergence behavior.\n   Consider a different scenario, again referring\
    \ to Figure 11, where L1\n   and L2 are configured as a Layer 3 bundle using a\
    \ local feature and\n   L3/L4 comprise a second Layer 3 bundle.  Layer 3 bundles\
    \ are\n   configured as if a link in the bundle is failing; the traffic must be\n\
    \   rerouted out of the bundle.  Layer 3 bundles are generally introduced\n  \
    \ to increase bandwidth between nodes.  In a nominal situation, ECMP is\n   still\
    \ available from PE1 to PE2, but if L1 is failing, the\n   post-convergence next\
    \ hop would become the ECMP on L3 and L4.  In\n   this case, LFA behavior SHOULD\
    \ be adapted in order to reflect the\n   bandwidth requirement.\n   We would expect\
    \ the following FIB entry on PE1:\n                   On PE1: PE2 +--> ECMP ->\
    \ L1\n                                |     |\n                              \
    \  |     +----> L2\n                                |\n                      \
    \          +--> LFA (ECMP) -> L3\n                                      |\n  \
    \                                    +----------> L4\n                       \
    \          Figure 12\n   If L1 or L2 is failing, traffic must be switched on the\
    \ LFA ECMP\n   bundle rather than using the other primary next hop.\n   As mentioned\
    \ in Section 3.4 of [RFC5286], protecting a link within an\n   ECMP by another\
    \ primary next hop is not a MUST.  Moreover, as already\n   discussed in this\
    \ document, maximizing coverage against the failure\n   cases may not be the right\
    \ approach, and a policy-based choice of an\n   alternate may be preferred.\n\
    \   An implementation SHOULD allow setting a preference to protect a\n   primary\
    \ next hop with another primary next hop.  An implementation\n   SHOULD also allow\
    \ setting a preference to protect a primary next hop\n   with a NON-primary next\
    \ hop.  An implementation SHOULD allow the use\n   of an ECMP bundle as an LFA.\n"
- title: 7.  Operational Aspects
  contents:
  - '7.  Operational Aspects

    '
- title: 7.1.  No-Transit Condition on LFA Computing Node
  contents:
  - "7.1.  No-Transit Condition on LFA Computing Node\n   In Section 3.5 of [RFC5286],\
    \ the setting of the no-transit condition\n   (through the IS-IS overload bit\
    \ or the OSPF R-bit) in an LFA\n   computation is only taken into account for\
    \ the case where a neighbor\n   has the no-transit condition set.\n   In addition\
    \ to Inequality 1 (Loop-Free Criterion)\n   (Distance_opt(N, D) < Distance_opt(N,\
    \ S) + Distance_opt(S, D))\n   [RFC5286], the IS-IS overload bit or the OSPF R-bit\
    \ of the LFA\n   calculating neighbor (S) SHOULD be taken into account.  Indeed,\
    \ if it\n   has the IS-IS overload bit set or the OSPF R-bit clear, no neighbor\n\
    \   will loop traffic back to itself.\n   An OSPF router acting as a stub router\
    \ [RFC6987] SHOULD behave as if\n   the R-bit was clear regarding the LFA computation.\n"
- title: 7.2.  Manual Triggering of FRR
  contents:
  - "7.2.  Manual Triggering of FRR\n   Service providers often perform manual link\
    \ shutdown (using a\n   router's command-line interface (CLI)) to perform network\n\
    \   changes/tests.  A manual link shutdown may be done at multiple\n   levels:\
    \ physical interface, logical interface, IGP interface,\n   Bidirectional Forwarding\
    \ Detection (BFD) session, etc.  In\n   particular, testing or troubleshooting\
    \ FRR requires that manual\n   shutdown be performed on the remote end of the\
    \ link, as a local\n   shutdown would not generally trigger FRR.\n   To permit\
    \ such a situation, an implementation SHOULD support\n   triggering/activating\
    \ LFA FRR for a given link when a manual shutdown\n   is done on a component that\
    \ currently supports FRR activation.\n   An implementation MAY also support FRR\
    \ activation for a specific\n   interface or a specific prefix on a primary next-hop\
    \ interface and\n   revert without any action on any running component of the\
    \ node (links\n   or protocols).  In this use case, the FRR activation time needs\
    \ to be\n   controlled by a timer in case the operator forgot to revert the\n\
    \   traffic to the primary path.  When the timer expires, the traffic is\n   automatically\
    \ reverted to the primary path.  This will simplify the\n   testing of the FRR\
    \ path; traffic can then be reverted back to the\n   primary path without causing\
    \ a global network convergence.\n   For example:\n   o  If an implementation supports\
    \ FRR activation upon a BFD\n      session-down event, that implementation SHOULD\
    \ support FRR\n      activation when a manual shutdown is done on the BFD session.\
    \  But\n      if an implementation does not support FRR activation upon a BFD\n\
    \      session-down event, there is no need for that implementation to\n     \
    \ support FRR activation upon manual shutdown of a BFD session.\n   o  If an implementation\
    \ supports FRR activation upon a physical\n      link-down event (e.g., Rx laser\
    \ \"off\" detection, error threshold\n      raised), that implementation SHOULD\
    \ support FRR activation when a\n      manual shutdown of a physical interface\
    \ is done.  But if an\n      implementation does not support FRR activation upon\
    \ a physical\n      link-down event, there is no need for that implementation\
    \ to\n      support FRR activation upon manual shutdown of a physical link.\n\
    \   o  A CLI command may allow switching from the primary path to the FRR\n  \
    \    path to test the FRR path for a specific interface or prefix.\n      There\
    \ is no impact on the control plane; only the data plane of\n      the local node\
    \ may be changed.  A similar command may allow\n      switching traffic back from\
    \ the FRR path to the primary path.\n"
- title: 7.3.  Required Local Information
  contents:
  - "7.3.  Required Local Information\n   The introduction of LFAs in a network requires\
    \ some enhancements to\n   standard routing information provided by implementations.\
    \  Moreover,\n   due to \"non-100%\" coverage, coverage information is also required.\n\
    \   Hence, an implementation:\n   o  MUST be able to display, for every prefix,\
    \ the primary next hop as\n      well as the alternate next-hop information.\n\
    \   o  MUST provide coverage information per LFA activation domain (area,\n  \
    \    level, topology, instance, virtual router, address family, etc.).\n   o \
    \ MUST provide the number of protected prefixes as well as\n      non-protected\
    \ prefixes globally.\n   o  SHOULD provide the number of protected prefixes as\
    \ well as\n      non-protected prefixes per link.\n   o  MAY provide the number\
    \ of protected prefixes as well as\n      non-protected prefixes per priority\
    \ if the implementation supports\n      prefix-priority insertion in the RIB/FIB.\n\
    \   o  SHOULD provide a reason for choosing an alternate (policy and\n      criteria)\
    \ and for excluding an alternate.\n   o  SHOULD provide the list of non-protected\
    \ prefixes and the reason\n      why they are not protected (e.g., no protection\
    \ required, no\n      alternate available).\n"
- title: 7.4.  Coverage Monitoring
  contents:
  - "7.4.  Coverage Monitoring\n   It is pretty easy to evaluate the coverage of a\
    \ network in a nominal\n   situation, but topology changes may change the level\
    \ of coverage.  In\n   some situations, the network may no longer be able to provide\
    \ the\n   required level of protection.  Hence, it becomes very important for\n\
    \   service providers to receive alerts regarding changes in coverage.\n   An\
    \ implementation SHOULD:\n   o  provide an alert system if total coverage (for\
    \ a node) is below a\n      defined threshold or when coverage returns to normal.\n\
    \   o  provide an alert system if coverage for a specific link is below a\n  \
    \    defined threshold or when coverage returns to normal.\n   An implementation\
    \ MAY:\n   o  trigger an alert if a specific destination is not protected\n  \
    \    anymore or when protection comes back up for this destination.\n   Although\
    \ the procedures for providing alerts are beyond the scope of\n   this document,\
    \ we recommend that implementations consider standard\n   and well-used mechanisms\
    \ like syslog or SNMP traps.\n"
- title: 7.5.  LFAs and Network Planning
  contents:
  - "7.5.  LFAs and Network Planning\n   The operator may choose to run simulations\
    \ in order to ensure a\n   certain type of full coverage for the whole network\
    \ or a given subset\n   of the network.  This is particularly likely if he operates\
    \ the\n   network in the sense of the third backbone profile described in\n  \
    \ Section 4 of [RFC6571]; that is, he seeks to design and engineer the\n   network\
    \ topology in such a way that a certain level of coverage is\n   always achieved.\
    \  Obviously, a complete and exact simulation of the\n   IP FRR coverage can only\
    \ be achieved if the behavior is deterministic\n   and the algorithm used is available\
    \ to the simulation tool.  Thus, an\n   implementation SHOULD:\n   o  Behave deterministically\
    \ in its LFA selection process.  That is,\n      in the same topology and with\
    \ the same policy configuration, the\n      implementation MUST always choose\
    \ the same alternate for a given\n      prefix.\n   o  Document its behavior.\
    \  The implementation SHOULD provide enough\n      documentation regarding its\
    \ behavior to allow an implementer of a\n      simulation tool to foresee the\
    \ exact choice of the LFA\n      implementation for every prefix in a given topology.\
    \  This SHOULD\n      take into account all possible policy configuration options.\
    \  One\n      possible way to document this behavior is to disclose the\n    \
    \  algorithm used to choose alternates.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   The policy mechanism introduced in this document\
    \ allows the tuning of\n   the selection of the alternate.  This is not seen as\
    \ a security\n   threat, because:\n   o  all candidates are already eligible as\
    \ per [RFC5286] and\n      considered usable.\n   o  the policy is based on information\
    \ from the router's own\n      configuration and from the IGP, both of which are\
    \ considered\n      trusted.\n   Hence, this document does not introduce any new\
    \ security\n   considerations as compared to [RFC5286].\n   As noted above, the\
    \ policy mechanism introduced in this document\n   allows the tuning of the selection\
    \ of the best alternate but does not\n   change the list of alternates that are\
    \ eligible.  As described in\n   Section 7 of [RFC5286], this best alternate \"\
    can be used anyway when\n   a different topological change occurs, and hence this\
    \ can't be viewed\n   as a new security threat.\"\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [ISO10589] International Organization for Standardization,\n\
    \              \"Intermediate System to Intermediate System intra-domain\n   \
    \           routeing information exchange protocol for use in\n              conjunction\
    \ with the protocol for providing the\n              connectionless-mode network\
    \ service (ISO 8473)\",\n              ISO Standard 10589, 2002.\n   [RFC2119]\
    \  Bradner, S., \"Key words for use in RFCs to Indicate\n              Requirement\
    \ Levels\", BCP 14, RFC 2119,\n              DOI 10.17487/RFC2119, March 1997,\n\
    \              <http://www.rfc-editor.org/info/rfc2119>.\n   [RFC3630]  Katz,\
    \ D., Kompella, K., and D. Yeung, \"Traffic Engineering\n              (TE) Extensions\
    \ to OSPF Version 2\", RFC 3630,\n              DOI 10.17487/RFC3630, September\
    \ 2003,\n              <http://www.rfc-editor.org/info/rfc3630>.\n   [RFC4203]\
    \  Kompella, K., Ed., and Y. Rekhter, Ed., \"OSPF Extensions\n              in\
    \ Support of Generalized Multi-Protocol Label Switching\n              (GMPLS)\"\
    , RFC 4203, DOI 10.17487/RFC4203, October 2005,\n              <http://www.rfc-editor.org/info/rfc4203>.\n\
    \   [RFC5286]  Atlas, A., Ed., and A. Zinin, Ed., \"Basic Specification\n    \
    \          for IP Fast Reroute: Loop-Free Alternates\", RFC 5286,\n          \
    \    DOI 10.17487/RFC5286, September 2008,\n              <http://www.rfc-editor.org/info/rfc5286>.\n\
    \   [RFC5305]  Li, T. and H. Smit, \"IS-IS Extensions for Traffic\n          \
    \    Engineering\", RFC 5305, DOI 10.17487/RFC5305,\n              October 2008,\
    \ <http://www.rfc-editor.org/info/rfc5305>.\n   [RFC5307]  Kompella, K., Ed.,\
    \ and Y. Rekhter, Ed., \"IS-IS Extensions\n              in Support of Generalized\
    \ Multi-Protocol Label Switching\n              (GMPLS)\", RFC 5307, DOI 10.17487/RFC5307,\
    \ October 2008,\n              <http://www.rfc-editor.org/info/rfc5307>.\n   [RFC5340]\
    \  Coltun, R., Ferguson, D., Moy, J., and A. Lindem, \"OSPF\n              for\
    \ IPv6\", RFC 5340, DOI 10.17487/RFC5340, July 2008,\n              <http://www.rfc-editor.org/info/rfc5340>.\n\
    \   [RFC6571]  Filsfils, C., Ed., Francois, P., Ed., Shand, M., Decraene,\n  \
    \            B., Uttaro, J., Leymann, N., and M. Horneffer, \"Loop-Free\n    \
    \          Alternate (LFA) Applicability in Service Provider (SP)\n          \
    \    Networks\", RFC 6571, DOI 10.17487/RFC6571, June 2012,\n              <http://www.rfc-editor.org/info/rfc6571>.\n\
    \   [RFC6987]  Retana, A., Nguyen, L., Zinin, A., White, R., and D.\n        \
    \      McPherson, \"OSPF Stub Router Advertisement\", RFC 6987,\n            \
    \  DOI 10.17487/RFC6987, September 2013,\n              <http://www.rfc-editor.org/info/rfc6987>.\n\
    \   [RFC7490]  Bryant, S., Filsfils, C., Previdi, S., Shand, M., and N.\n    \
    \          So, \"Remote Loop-Free Alternate (LFA) Fast Reroute (FRR)\",\n    \
    \          RFC 7490, DOI 10.17487/RFC7490, April 2015,\n              <http://www.rfc-editor.org/info/rfc7490>.\n\
    \   [RFC7777]  Hegde, S., Shakir, R., Smirnov, A., Li, Z., and B.\n          \
    \    Decraene, \"Advertising Node Administrative Tags in OSPF\",\n           \
    \   RFC 7777, DOI 10.17487/RFC7777, March 2016,\n              <http://www.rfc-editor.org/info/rfc7777>.\n\
    \   [RFC7917]  Sarkar, P., Ed., Gredler, H., Hegde, S., Litkowski, S.,\n     \
    \         and B. Decraene, \"Advertising Node Administrative Tags in\n       \
    \       IS-IS\", RFC 7917, DOI 10.17487/RFC7917, July 2016,\n              <http://www.rfc-editor.org/info/rfc7917>.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [REMOTE-LFA-NODE]\n              Sarkar, P.,\
    \ Ed., Hegde, S., Bowers, C., Gredler, H., and\n              S. Litkowski, \"\
    Remote-LFA Node Protection and\n              Manageability\", Work in Progress,\n\
    \              draft-ietf-rtgwg-rlfa-node-protection-05, December 2015.\n   [SEG-RTG-ARCH]\n\
    \              Filsfils, C., Ed., Previdi, S., Ed., Decraene, B.,\n          \
    \    Litkowski, S., and R. Shakir, \"Segment Routing\n              Architecture\"\
    , Work in Progress,\n              draft-ietf-spring-segment-routing-09, July\
    \ 2016.\n   [TI-LFA]   Francois, P., Filsfils, C., Bashandy, A., Decraene, B.,\n\
    \              and S. Litkowski, \"Topology Independent Fast Reroute using\n \
    \             Segment Routing\", Work in Progress,\n              draft-francois-segment-routing-ti-lfa-00,\
    \ November 2013.\n"
- title: Contributors
  contents:
  - "Contributors\n   Significant contributions were made by Pierre Francois, Hannes\n\
    \   Gredler, Chris Bowers, Jeff Tantsura, Uma Chunduri, Acee Lindem, and\n   Mustapha\
    \ Aissaoui, whom the authors would like to acknowledge.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Stephane Litkowski (editor)\n   Orange\n   Email: stephane.litkowski@orange.com\n\
    \   Bruno Decraene\n   Orange\n   Email: bruno.decraene@orange.com\n   Clarence\
    \ Filsfils\n   Cisco Systems\n   Email: cfilsfil@cisco.com\n   Kamran Raza\n \
    \  Cisco Systems\n   Email: skraza@cisco.com\n   Martin Horneffer\n   Deutsche\
    \ Telekom\n   Email: Martin.Horneffer@telekom.de\n   Pushpasis Sarkar\n   Individual\
    \ Contributor\n   Email: pushpasis.ietf@gmail.com\n"
