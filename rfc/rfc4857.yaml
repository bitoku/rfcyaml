- title: __initial_text__
  contents:
  - '                   Mobile IPv4 Regional Registration

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo defines an Experimental Protocol for the Internet\n\
    \   community.  It does not specify an Internet standard of any kind.\n   Discussion\
    \ and suggestions for improvement are requested.\n   Distribution of this memo\
    \ is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The IETF Trust (2007).\n"
- title: Abstract
  contents:
  - "Abstract\n   Using Mobile IP, a mobile node registers with its home agent each\n\
    \   time it changes care-of address.  This document describes a new kind\n   of\
    \ \"regional registrations\", i.e., registrations local to the visited\n   domain.\
    \  The regional registrations are performed via a new network\n   entity called\
    \ a Gateway Foreign Agent (GFA) and introduce a layer of\n   hierarchy in the\
    \ visited domain.  Regional registrations reduce the\n   number of signaling messages\
    \ to the home network, and reduce the\n   signaling delay when a mobile node moves\
    \ from one foreign agent to\n   another within the same visited domain.  This\
    \ document is an optional\n   extension to the Mobile IPv4 protocol.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n      5.2. Foreign Agent Considerations ..............................12\n\
    \      5.3. GFA Considerations ........................................13\n  \
    \    5.4. Home Agent Considerations .................................14\n   6.\
    \ Regional Registration ..........................................14\n      6.1.\
    \ Mobile Node Considerations ................................15\n      6.2. Foreign\
    \ Agent Considerations ..............................16\n      6.3. GFA Considerations\
    \ ........................................16\n   7. Dynamic GFA Assignment .........................................17\n\
    \      7.1. Mobile Node Considerations for Dynamic GFA Assignment .....17\n  \
    \    7.2. Foreign Agent Considerations for Dynamic GFA Assignment ...17\n    \
    \  7.3. GFA Considerations for Dynamic GFA Assignment .............18\n      7.4.\
    \ Home Agent Considerations for Dynamic GFA Assignment ......18\n      7.5. Regional\
    \ Registration .....................................19\n   8. Router Discovery\
    \ Extensions ....................................19\n      8.1. Regional Registration\
    \ Flag ................................19\n      8.2. Foreign Agent NAI Extension\
    \ ...............................19\n   9. Regional Extensions to Mobile IPv4\
    \ Registration Messages .......20\n      9.1. GFA IP Address Extension ..................................20\n\
    \      9.2. Hierarchical Foreign Agent Extension ......................21\n  \
    \    9.3. Replay Protection Style ...................................22\n    \
    \  9.4. Regional Registration Lifetime Extension ..................23\n      9.5.\
    \ New Code Values for Registration Reply ....................24\n   10. Regional\
    \ Registration Message Formats .........................25\n      10.1. Regional\
    \ Registration Request ............................26\n      10.2. Regional Registration\
    \ Reply ..............................27\n      10.3. New Regional Registration\
    \ Reply Code Values ..............28\n   11. Authentication Extensions .....................................29\n\
    \   12. Security Considerations .......................................29\n  \
    \ 13. IANA Considerations ...........................................30\n   14.\
    \ Acknowledgements ..............................................31\n   15. References\
    \ ....................................................32\n      15.1. Normative\
    \ References .....................................32\n      15.2. Informative\
    \ References ...................................32\n   Appendix A. Authentication,\
    \ Authorization, and Accounting (AAA)\n               Interactions ..........................................33\n\
    \   Appendix B. Anchoring at a GFA ....................................33\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This document is an optional extension to the Mobile IPv4\
    \ protocol,\n   and proposes a means for mobile nodes to register locally within\
    \ a\n   visited domain.  By registering locally, the number of signaling\n   messages\
    \ to the home network are kept to a minimum, and the signaling\n   delay is reduced.\n\
    \   In Mobile IP, as specified in [RFC3344], a mobile node registers with\n  \
    \ its home agent each time it changes care-of address.  If the distance\n   between\
    \ the visited network and the home network of the mobile node\n   is large, the\
    \ signaling delay for these registrations may be long.\n   We propose a solution\
    \ for performing registrations locally in the\n   visited domain: regional registrations.\
    \  Regional registrations\n   minimize the number of signaling messages to the\
    \ home network, and\n   reduce the signaling delay when a mobile node moves from\
    \ one foreign\n   agent to another within the same visited domain.  This will\
    \ both\n   decrease the load on the home network, and speed up the process of\n\
    \   handover within the visited domain.\n   Regional registrations introduce a\
    \ new network node: the Gateway\n   Foreign Agent (GFA).  The address of the GFA\
    \ is advertised by the\n   foreign agents in a visited domain.  When a mobile\
    \ node first arrives\n   at this visited domain, it performs a home registration\
    \ -- that is, a\n   registration with its home agent.  At this registration, the\
    \ mobile\n   node registers the address of the GFA as its care-of address with\
    \ its\n   home agent.  When moving between different foreign agents within the\n\
    \   same visited domain, the mobile node only needs to make a regional\n   registration\
    \ to the GFA.\n   In their simplest form, regional registrations are performed\n\
    \   transparently to the home agent.  Additionally, regional\n   registrations\
    \ may also allow dynamic assignment of GFA.  The solution\n   for dynamic GFA\
    \ assignment requires support in the mobile node, the\n   foreign agent, the GFA,\
    \ and the home agent.\n   The proposed regional registration protocol supports\
    \ one level of\n   foreign agent hierarchy beneath the GFA, but the protocol may\
    \ be\n   utilized to support several levels of hierarchy.  Multiple levels of\n\
    \   hierarchy are not discussed in this document.\n   Although this document focuses\
    \ on regional registrations in visited\n   domains, regional registrations are\
    \ also possible in the home domain.\n   Foreign agents that support regional registrations\
    \ are also required\n   to support registrations according to Mobile IPv4 [RFC3344].\n\
    \   The following section gives an overview of regional registrations.\n"
- title: 2.  Overview of Regional Registrations
  contents:
  - "2.  Overview of Regional Registrations\n   In standard Mobile IP, there are three\
    \ entities of interest.  The\n   Mobile Node (MN), the Foreign Agent (FA), and\
    \ the Home Agent (HA).\n   The MN communicates with the HA, either through an\
    \ FA or directly (if\n   it has a co-located care-of address).  With Regional\
    \ Registrations, a\n   new entity is defined: the Gateway Foreign Agent (GFA).\
    \  The GFA sits\n   between the MN/FA and HA, and to the HA, it appears as if\
    \ the MN's\n   temporary care-of address is that of the GFA.  When a MN moves\
    \ within\n   a site, it only need interact with the GFA, so that the GFA knows\
    \ at\n   what temporary address the MN is currently reachable.\n   Two types of\
    \ registration messages are used.  Regular [RFC3344]\n   Registration Requests/Replies\
    \ are still used for when the MN\n   exchanges Registration Requests/Replies with\
    \ the HA, but these\n   messages get forwarded through a GFA, and include new\
    \ extensions.\n   In addition, a new pair of registration messages, Regional\n\
    \   Registration Requests/Replies, are used between MNs/FAs/GFAs for\n   intra-site\
    \ signaling.  A MN uses these messages to communicate its\n   new addresses to\
    \ the GFA as it moves around within a site.\n   There are two models of how the\
    \ MN uses Regional Registrations.  The\n   FA can advertise a GFA to the MN. \
    \ Alternatively, the FA can indicate\n   that dynamic assignment of GFA is to\
    \ be used.  With dynamic GFA\n   assignment, the MN does not choose the GFA, rather\
    \ the FA (or GFA)\n   does so after receiving a Registration Request from the\
    \ MN.  However,\n   in this mode the HA must understand (and support) Regional\n\
    \   Registrations in order for them to be used.  This last form is not\n   transparent\
    \ because the MN doesn't know in advance what GFA will be\n   used, and cannot\
    \ include it in a signed message to the HA.\n   When a MN moves to a new domain\
    \ (determined by comparing its Network\n   Access Identifier (NAI) [RFC4282] with\
    \ the FA-NAI included in\n   received Agent Advertisements), it can opt to use\
    \ Regional\n   Registrations.  A site indicates support for Regional Registrations\n\
    \   by setting the I-bit of the Mobile IP Agent Advertisement extension.\n   In\
    \ addition, such advertisements include a list of one or more care-\n   of addresses.\
    \  If there is only one care-of address, this is the\n   address of the FA itself.\
    \  In addition, the advertisement may include\n   the address of the GFA.  A GFA\
    \ care-of address of all-ones indicates\n   that dynamic assignment of GFA is\
    \ supported.\n   A MN requests initial Regional Registration by sending a normal\n\
    \   Registration Request to the FA, but setting the care-of address to\n   that\
    \ of the GFA (i.e., if it has selected it wishes to use this GFA)\n   or all-zeros\
    \ (which signals a dynamic GFA assignment request).  The\n   FA adds a Hierarchical\
    \ FA (HFA) extension and relays the request to\n   the appropriate GFA.  The HFA\
    \ extension contains a single field: the\n   IP address of the FA.\n   Note: the\
    \ algorithm for MNs with co-located care-of addresses is\n   similar, except that\
    \ there is no FA, so the MN behaves as the FA in\n   terms of the messages it\
    \ sends.\n   A GFA receives Registration Requests relayed from an FA.  If the\n\
    \   care-of address in the received Registration Request is zero, the GFA\n  \
    \ assigns one.  A GFA IP Address extension is then added to the\n   Registration\
    \ Request, and the message is forwarded to the HA.  The\n   GFA IP Address extension\
    \ contains a single field: the IP address of\n   the GFA.  (A separate field is\
    \ needed for this because the\n   Registration Request message between the MN/HA\
    \ is signed and cannot\n   be modified.)\n   HAs process received Registration\
    \ Requests in the same way as before,\n   except in the case of dynamic GFA assignment.\
    \  In this case, the HA\n   uses the GFA address from the GFA IP Address extension\
    \ as the MN's\n   current care-of address.  In addition, the Registration Reply\
    \ message\n   must include the GFA IP Address extension.\n   The regular Registration\
    \ Requests/Replies are protected as described\n   in [RFC3344], by use of the\
    \ mobility security association between the\n   MN and the HA.  For regional registrations,\
    \ it is assumed that a\n   mobility security association is established between\
    \ the MN and GFA\n   during registration with the HA.  Regional Registration Requests/\n\
    \   Replies are protected by use of this security association between the\n  \
    \ MN and the GFA, e.g., by use of a MN-GFA Authentication extension.\n   HFA extensions,\
    \ added by an FA to a Registration Request or Regional\n   Registration Request,\
    \ are protected by an FA-FA Authentication\n   extension.  Security associations\
    \ between FAs and GFAs within a\n   domain are assumed to exist prior to regional\
    \ registrations.\n   Dynamic GFA assignment requires means for securely sending\n\
    \   Registration Requests from the GFA to the HA, in order to protect the\n  \
    \ GFA IP Address extension.\n"
- title: 3.  Terminology
  contents:
  - "3.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\"\
    , \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and\
    \ \"OPTIONAL\" in this\n   document are to be interpreted as described in RFC\
    \ 2119 [RFC2119].\n   This document uses the following terms:\n   Critical type\n\
    \      A type value for an extension in the range 0-127, which indicates\n   \
    \   that the extension MUST either be known to the recipient, or that\n      the\
    \ message containing the extension MUST be rejected.  In other\n      words, an\
    \ extension with a critical type value is non-skippable.\n   Domain\n      A collection\
    \ of networks sharing a common network administration.\n   Foreign Agent (FA)\n\
    \      As defined in [RFC3344].\n   Gateway Foreign Agent (GFA)\n      A Foreign\
    \ Agent which has a publicly routable IP address.  A GFA\n      may, for instance,\
    \ be placed in or near a firewall.\n   Home Agent (HA)\n      As defined in [RFC3344].\n\
    \   Home domain\n      The domain where the home network and home agent are located.\n\
    \   Home network\n      As defined in [RFC3344].\n   Home Registration\n     \
    \ A registration, processed by the home agent and the GFA, using the\n      specification\
    \ in [RFC3344] possibly with additional extensions\n      defined in this document.\n\
    \   Local Care-of Address\n      A care-of address that is assigned to either\
    \ a mobile node or a\n      foreign agent offering local connectivity to a mobile\
    \ node.  A\n      registration message from the mobile node is subsequently sent\
    \ to\n      a GFA via the local care-of address.\n   Mobile Node (MN)\n      As\
    \ defined in [RFC3344].\n   Mobility Agent (MA)\n      As defined in [RFC3344].\n\
    \   Network Access Identifier(NAI)\n      Some features of this protocol specification\
    \ rely on use of the\n      Network Access Identifier (NAI) [RFC2794].\n   Regional\
    \ Registration\n      A mobile node performs registration locally at the visited\
    \ domain,\n      by sending a Regional Registration Request to a GFA, and receiving\n\
    \      a Regional Registration Reply in return.\n   Registration Key\n      A\
    \ key used by mobile nodes and mobility agents to secure certain\n      signals\
    \ and control messages specified by Mobile IP.\n   Visited domain\n      The domain\
    \ where the visited network, the current foreign agent,\n      and the GFA are\
    \ located.\n   Visited network\n      As defined in [RFC3344].\n"
- title: 4.  Description of the Protocol
  contents:
  - "4.  Description of the Protocol\n   This section provides an overview of the\
    \ regional registration\n   protocol.\n"
- title: 4.1.  General Assumptions
  contents:
  - "4.1.  General Assumptions\n   Our general model of operation is illustrated in\
    \ Figure 1, showing a\n   visited domain with FA and GFA, and a home network with\
    \ a HA:\n        +---------------------------+                 +----------------+\n\
    \        |       Visited Domain      |                 |      Home      |\n  \
    \      |                           |   +---------+   |     Network    |\n    \
    \    |                           |   |         |   |                |\n      \
    \  |  +------+      +-------+  |   | Public  |   |    +------+    |\n        |\
    \  |  FA  |------|  GFA  |-------------------------|  HA  |    |\n        |  +--+---+\
    \      +-------+  |   | Network |   |    +------+    |\n        |     |      \
    \               |   |         |   |                |\n        +-----|---------------------+\
    \   +---------+   +----------------+\n              |\n           +--+---+\n \
    \          |  MN  |\n           +------+\n                          Figure 1:\
    \ Model of Operation\n   For MNs that cannot process a NAI, or with mobility agents\
    \ that are\n   not configured to advertise their NAI, regional registration is\
    \ still\n   useful, but processing the NAI makes it easier for the mobile node\
    \ to\n   reliably detect domain changes.\n"
- title: 4.1.1.  Visited Domain
  contents:
  - "4.1.1.  Visited Domain\n   We assume two hierarchy levels of FAs in the visited\
    \ domain.  At the\n   top level of the hierarchy, there is at least one GFA, which\
    \ is an FA\n   with additional features.  A GFA must have a publicly routable\n\
    \   address.  Beneath a GFA, there are one or more FAs.  We assume that\n   there\
    \ exist established security associations between a GFA and the\n   FAs beneath\
    \ it.  When designing a domain supporting regional\n   registrations, the FAs\
    \ and GFAs in this domain must be compatible.\n   That is, they should support\
    \ the same encapsulation types,\n   compression mechanisms, etc.\n   When a MN\
    \ changes care-of address under the same GFA, it MAY perform\n   a regional registration.\
    \  If the MN changes GFA, within a visited\n   domain or between visited domains,\
    \ it MUST perform a home\n   registration.\n"
- title: 4.1.2.  Authentication
  contents:
  - "4.1.2.  Authentication\n   With regional registrations, a GFA address is registered\
    \ at the HA as\n   the care-of address of the MN.  If a Mobile-Foreign (MN-FA)\n\
    \   Authentication extension is present in a Registration Request message\n  \
    \ directed to the HA, the GFA will perform the authentication.\n   Similarly,\
    \ if a Foreign-Home (FA-HA) Authentication extension is\n   present in a Registration\
    \ Request message, the authentication is\n   performed between the GFA and the\
    \ HA.  To summarize, the GFA takes\n   the role of an FA with regard to security\
    \ associations in the home\n   registrations.\n   Regional registration messages\
    \ also need to be protected with\n   authentication extensions in the same way\
    \ as registrations with the\n   HA.  This means that the MN and the GFA MUST have\
    \ received the keys\n   needed to construct the authentication extensions before\
    \ any regional\n   registration is performed.  As described above, since the GFA\
    \ address\n   is the registered care-of address of the MN at its home network,\
    \ the\n   GFA is the agent within the visited domain that has to have the\n  \
    \ appropriate security associations with the HA and the MN.  The GFA's\n   security\
    \ association with the MN is then used to enable proper\n   authentication for\
    \ regional registrations (see Section 6).  How the\n   keys are distributed is\
    \ outside the scope of this draft.  One example\n   is to distribute the keys\
    \ as part of the home registration, for\n   example according to [RFC4004] and\
    \ [RFC3957].  Another example is\n   pre-configured keys.\n"
- title: 4.2.  Protocol Overview
  contents:
  - "4.2.  Protocol Overview\n   When a MN first arrives at a visited domain, it performs\
    \ a\n   registration with its home network.  During this registration, the HA\n\
    \   registers the care-of address of the MN.  In case the visited domain\n   supports\
    \ regional registrations, the care-of address that is\n   registered at the HA\
    \ is the address of a GFA.  The GFA keeps a\n   visitor list of all the MNs currently\
    \ registered with it.\n   Since the care-of address registered at the HA is the\
    \ GFA address, it\n   will not change when the MN changes FA under the same GFA.\
    \  Thus, the\n   HA does not need to be informed of further MN movements within\
    \ the\n   visited domain.\n   Figure 2 illustrates the signaling message flow\
    \ for home\n   registration.  During the home registration, the HA records the\
    \ GFA\n   address as the care-of address of the MN.\n     MN                 \
    \    FA1                     GFA              HA\n     |                     \
    \  |                       |                |\n     | Registration Request  |\
    \                       |                |\n     |---------------------->|  Reg.\
    \  Request        |                |\n     |                       |---------------------->|\
    \  Reg.  Request |\n     |                       |                       |--------------->|\n\
    \     |                       |                       |   Reg.  Reply  |\n   \
    \  |                       |  Reg.  Reply          |<---------------|\n     |\
    \  Registration Reply   |<----------------------|                |\n     |<----------------------|\
    \                       |                |\n     |                       |   \
    \                    |                |\n                        Figure 2:  Home\
    \ Registration\n   Figure 3 illustrates the signaling message flow for regional\n\
    \   registration.  Even though the MN's local care-of address changes,\n   the\
    \ HA continues to use the GFA address as the care-of address of the\n   MN.  We\
    \ introduce two new message types for regional registrations:\n   Regional Registration\
    \ Request and Regional Registration Reply.\n     MN                     FA2  \
    \                          GFA       HA\n     |                       |      \
    \                        |         |\n     | Regional Reg.  Req.   |         \
    \                     |         |\n     |---------------------->| Regional Registration\
    \  Req.  |         |\n     |                       |----------------------------->|\
    \         |\n     |                       | Regional Registration Reply  |   \
    \      |\n     | Regional Reg.  Reply  |<-----------------------------|      \
    \   |\n     |<----------------------|                              |         |\n\
    \     |                       |                              |         |\n   \
    \                     Figure 3: Regional Registration\n"
- title: 4.3.  Advertising Foreign Agent and GFA
  contents:
  - "4.3.  Advertising Foreign Agent and GFA\n   A FA typically announces its presence\
    \ via an Agent Advertisement\n   message [RFC3344].  If the domain to which an\
    \ FA belongs supports\n   regional registrations, the following changes apply\
    \ to the Agent\n   Advertisement.\n   The 'I' flag (see Section 8.1) MUST be set\
    \ to indicate that the\n   domain supports regional registrations.  If the 'I'\
    \ flag is set,\n   there MUST be at least one care-of address in the Agent\n \
    \  Advertisement.  If the 'I' flag is set and there is only one care-of\n   address,\
    \ it is the address of the FA.  If the 'I' flag is set, and\n   there is more\
    \ than one care-of address, the first care-of address is\n   the local FA, and\
    \ the last care-of address is the GFA.  (Any care-of\n   addresses advertised\
    \ in addition to these two are out of scope for\n   this document).\n   The FA-NAI\
    \ (see Section 8.2) SHOULD also be present in the Agent\n   Advertisement to enable\
    \ the MN to decide whether or not it has moved\n   to a new domain since its last\
    \ registration.  The decision is based\n   on whether the realm part of the advertised\
    \ FA-NAI matches the realm\n   of the FA-NAI advertised by the MN's previous FA.\n"
- title: 4.4.  Backwards Compatibility with RFC 3344
  contents:
  - "4.4.  Backwards Compatibility with RFC 3344\n   A domain that supports regional\
    \ registrations should also be\n   backwards compatible.\n   An FA MUST support\
    \ registrations according to Mobile IPv4 as defined\n   in [RFC3344].  This allows\
    \ MNs that don't support regional\n   registrations to register via this FA using\
    \ standard Mobile IPv4.  If\n   the FA advertises both its own care-of address\
    \ and a GFA care-of\n   address, a MN that supports regional registrations but\
    \ has a HA that\n   doesn't, will still be able to make use of regional registrations\n\
    \   through that GFA care-of address.\n   The advertised GFA care-of address MAY\
    \ be set to all-ones, to\n   indicate dynamic GFA assignment.  If the MN supports\
    \ regional\n   registrations, and an all-ones GFA care-of address is advertised,\
    \ the\n   MN SHOULD use dynamic GFA assignment (see Section 7.1).\n"
- title: 5.  Home Registration
  contents:
  - "5.  Home Registration\n   This section gives a detailed description of home registration,\
    \ i.e.,\n   registration with the HA (on the home network).  Home registration\
    \ is\n   performed when a MN first arrives at a visited domain, when it\n   requests\
    \ a new HA, or when it changes GFA.  Home registration is also\n   performed to\
    \ renew bindings which would otherwise expire.\n"
- title: 5.1.  Mobile Node Considerations
  contents:
  - "5.1.  Mobile Node Considerations\n   Upon receipt of an Agent Advertisement message\
    \ with the 'I' flag set\n   and an FA-NAI extension, the MN compares the domain\
    \ part of the FA\n   NAI with the one received in the previous Agent Advertisement,\
    \ to\n   determine whether it has moved to a new domain since its last\n   registration.\
    \  If the NAIs do not match, the MN MUST assume it has\n   moved to a new domain.\n\
    \   If the MN determines that it has moved to a new domain, it SHOULD\n   insert\
    \ the advertised GFA address in the care-of address field in the\n   Registration\
    \ Request message.  For dynamic GFA assignment, see\n   Section 7.1.\n   A MN\
    \ with a co-located care-of address might also want to use\n   regional registrations.\
    \  It then finds out the address of a GFA,\n   either from Agent Advertisements\
    \ sent by an FA, or by some means not\n   described in this document.  The MN\
    \ MAY then generate a Registration\n   Request message, with the GFA address in\
    \ the care-of address field,\n   and send it directly to the GFA (not via an FA).\
    \  In this case, the\n   MN MUST add a Hierarchical Foreign Agent (HFA) extension\
    \ (see Section\n   9.2), including its co-located care-of address, to the Registration\n\
    \   Request before sending it.  The HFA extension MUST be protected by an\n  \
    \ authentication extension.  If the MN has established a mobility\n   security\
    \ association with the GFA, the HFA extension MUST be placed\n   before the MN-FA\
    \ Authentication extension, and it SHOULD be placed\n   after the Mobile-Home\
    \ (MN-HA) Authentication extension.  Otherwise,\n   if the MN has no established\
    \ mobility security association with the\n   GFA, the HFA extension MUST be placed\
    \ before the MN-HA authentication\n   extension.\n   If the MN receives an Agent\
    \ Advertisement with the 'R' bit set, even\n   if it has a co-located care-of\
    \ address, it still formulates the same\n   Registration Request message with\
    \ extensions, but it sends the\n   message to the advertising FA instead of to\
    \ the GFA.\n   If the home registration is about to expire, the MN performs a\
    \ new\n   home registration using the same GFA care-of address to refresh the\n\
    \   binding [RFC3344].  If the MN has just moved to a new FA and not yet\n   sent\
    \ a Regional Registration Request when the home registration is\n   due to expire,\
    \ the MN sends only a Registration Request, as this will\n   update both the GFA\
    \ and the HA.\n   If the Registration Reply includes a Replay Protection Style\n\
    \   extension, the value in the Initial Identification field is the value\n  \
    \ to be used for replay protection in the next Regional Registration\n   Request\
    \ (see Section 6.1).\n"
- title: 5.2.  Foreign Agent Considerations
  contents:
  - "5.2.  Foreign Agent Considerations\n   When the FA receives a Registration Request\
    \ message from a MN, it\n   extracts the care-of address field to find the GFA\
    \ to which the\n   message shall be relayed.  All FAs that advertise the 'I' flag\
    \ MUST\n   also be able to handle Registration Requests with an all-zeros care-\n\
    \   of address (used for dynamic GFA assignment).\n   If the FA receives a Registration\
    \ Request where the care-of address\n   is set to all-ones (which could happen\
    \ if a MN that doesn't support\n   Regional Registrations copied an all-ones care-of\
    \ address from an\n   Agent Advertisement), it MUST reply with the Code field\
    \ set to\n   \"poorly formed request\" [RFC3344].\n   If the Registration Request\
    \ has the 'T' bit set, the MN is requesting\n   Reverse Tunneling [RFC3024]. \
    \ In this case, the FA has to tunnel\n   packets from the MN to the GFA for further\
    \ handling.\n   If the care-of address in the Registration Request is the address\
    \ of\n   the FA, the FA relays the message directly to the HA, as described in\n\
    \   [RFC3344].  For each pending or current home registration, the FA\n   maintains\
    \ a visitor list entry as described in [RFC3344].  If reverse\n   tunneling is\
    \ being used, the visitor list MUST contain the address of\n   the GFA, in addition\
    \ to the fields required in [RFC3344].\n   Otherwise, if the care-of address in\
    \ the Registration Request is the\n   address of a GFA (or all-zeros), the FA\
    \ adds a Hierarchical Foreign\n   Agent (HFA) extension, including its own address,\
    \ to the Registration\n   Request, and relays it to the GFA.  The HFA extension\
    \ MUST be\n   appended at the end of all previous extensions that were included\
    \ in\n   the Registration Request when the FA received it, and it MUST be\n  \
    \ protected by a Foreign-Foreign (FA-FA) Authentication extension (see\n   Section\
    \ 11).\n"
- title: 5.3.  GFA Considerations
  contents:
  - "5.3.  GFA Considerations\n   For each pending or current home registration, the\
    \ GFA maintains a\n   visitor list entry as described in [RFC3344].  This visitor\
    \ list\n   entry is also updated for the regional registrations performed by the\n\
    \   MN.  In addition to the fields required in [RFC3344], the list entry\n   MUST\
    \ contain:\n   o  the current care-of address of the MN (i.e., the FA or co-located\n\
    \      address) received in the HFA extension\n   o  the remaining Lifetime of\
    \ the regional registration\n   o  the style of replay protection in use for the\
    \ regional\n      registration\n   o  the Identification value for the regional\
    \ registration.\n   The default replay protection style for regional registrations\
    \ is\n   timestamp-based replay protection, as defined in Mobile IPv4\n   [RFC3344].\
    \  If the timestamp sent by the MN in the Registration\n   Request is not close\
    \ enough to the GFA's time-of-day clock, the GFA\n   adds a Replay Protection\
    \ Style extension (see Section 9.3) to the\n   Registration Reply, with the GFA's\
    \ time of day in the Identification\n   field to synchronize the MN with the GFA\
    \ for the regional\n   registrations.\n   If nonce-based replay protection is\
    \ used, the GFA adds a Replay\n   Protection Style extension to the Registration\
    \ Reply, where the high-\n   order 32 bits in the Identification fields is the\
    \ nonce that should\n   be used by the MN in the following regional registration.\n\
    \   If the Registration Request contains a Replay Protection Style\n   extension\
    \ (see Section 9.3) requesting a style of replay protection\n   not supported\
    \ by the GFA, the GFA MUST reject the Registration\n   Request and send a Registration\
    \ Reply with the value in the Code\n   field set to REPLAY_PROT_UNAVAIL (see Section\
    \ 9.5).\n   If the Hierarchical Foreign Agent (HFA) extension comes after the\n\
    \   MN-FA Authentication extension, the GFA MUST remove it from the\n   Registration\
    \ Request.  The GFA then sends the Registration Request to\n   the HA.  Upon receipt\
    \ of the Registration Reply, the GFA consults its\n   pending registration record\
    \ to find the care-of address within its\n   domain that is currently used by\
    \ the MN, and sends the Registration\n   Reply to that care-of address.\n   If\
    \ the Replay Protection Style extension (see Section 9.3) is present\n   in a\
    \ Registration Request, and follows the MN-HA Authentication\n   extension, the\
    \ GFA SHOULD remove the Replay Protection Style\n   extension after performing\
    \ any necessary processing and before\n   sending the Registration Request to\
    \ the HA.\n   If the GFA receives a Registration Request from a MN that it already\n\
    \   has a mobility binding for, this is an update of a binding that is\n   about\
    \ to expire.  If the address in the Hierarchical Foreign Agent\n   (HFA) extension\
    \ is the same as the current care-of address in the\n   visitor list for the MN,\
    \ the entries in the visitor list concerning\n   regional registrations are not\
    \ changed, except to update the\n   lifetime.  If the address in the HFA extension\
    \ is a new address, the\n   values for the regional registration are updated.\n\
    \   If the Registration Request has the 'T' bit set, the GFA has to\n   decapsulate\
    \ the packets from the FA and re-encapsulate them for\n   further delivery back\
    \ to the HA.  These actions are required because\n   the HA has to receive such\
    \ packets from the expected care-of address\n   (i.e., that of the GFA) instead\
    \ of the local care-of address (i.e.,\n   that of the FA).\n   When receiving\
    \ a Registration Reply from the HA, the GFA MAY add a\n   Regional Registration\
    \ Lifetime extension to the message before\n   relaying it to the FA.  The extension\
    \ defines the lifetime that the\n   GFA allows the MN before it has to renew its\
    \ regional registration.\n   The GFA MUST set the lifetime of the regional registration\
    \ to be no\n   greater than the remaining lifetime of the MN's registration with\
    \ its\n   HA.  If used, the Regional Registration Lifetime extension MUST be\n\
    \   added after any other extensions, and MUST be protected by an MN-FA\n   Authentication\
    \ extension.\n"
- title: 5.4.  Home Agent Considerations
  contents:
  - "5.4.  Home Agent Considerations\n   The Registration Request is processed by\
    \ the HA as described in\n   [RFC3344].\n"
- title: 6.  Regional Registration
  contents:
  - "6.  Regional Registration\n   This section describes regional registrations.\
    \  Once the HA has\n   registered the GFA address as the care-of address of the\
    \ MN, the MN\n   may perform regional registrations.  When performing regional\n\
    \   registrations, the MN may either register an FA care-of address or a\n   co-located\
    \ address with the GFA.  In the following, we assume that a\n   home registration\
    \ has already occurred, as described in Section 5,\n   and that the GFA has a\
    \ mobility security association with the MN.\n   Suppose the MN moves from one\
    \ FA to another FA within the same\n   visited domain.  It will then receive an\
    \ Agent Advertisement from the\n   new FA.  Suppose further that the Agent Advertisement\
    \ indicates that\n   the visited domain supports regional registrations, and either\
    \ that\n   the advertised GFA address is the same as the one the MN has\n   registered\
    \ as its care-of address during its last home registration,\n   or that the realm\
    \ part of the newly advertised FA-NAI matches the FA-\n   NAI advertised by the\
    \ MN's previous FA.  Then, the MN can perform a\n   regional registration with\
    \ this FA and GFA.  The MN issues a Regional\n   Registration Request to the GFA\
    \ via the new FA.  The request is\n   authenticated using the existing mobility\
    \ security association\n   between the GFA and the MN and the message is authenticated\
    \ by the\n   MN-GFA Authentication extension (see Section 11).  The care-of\n\
    \   address should be set to the address of the local FA.\n   If the Regional\
    \ Registration Request contains a care-of address field\n   of all-zeros, the\
    \ FA adds a Hierarchical Foreign Agent (HFA)\n   extension to the message and\
    \ relays it to the GFA.  Based on the\n   information in the HFA extension, the\
    \ GFA updates the MN's current\n   point of attachment in its visitor list.  The\
    \ GFA then issues a\n   Regional Registration Reply to the MN via the FA.\n  \
    \ If the advertised GFA is not the same as the one the MN has\n   registered as\
    \ its care-of address, and if the MN is still within the\n   same domain as it\
    \ was when it registered that care-of address, the MN\n   MAY try to perform a\
    \ regional registration with its registered GFA.\n   If the FA cannot support\
    \ regional registration to a GFA, other than\n   advertised, the FA denies the\
    \ Regional Registration Request with code\n   UNKNOWN_GFA (see Section 10.3).\
    \  In this case, the MN has to do a new\n   home registration via the new GFA.\n\
    \   New message types are introduced for the Regional Registration\n   Request\
    \ and Reply.  The motivation for introducing new message types,\n   rather than\
    \ using the Registration Request and Reply defined in\n   [RFC3344] is: (1) the\
    \ MN must be able to distinguish regional\n   registrations from home registrations,\
    \ since in the former case the\n   timestamps/nonces are synchronized with its\
    \ GFA and in the latter\n   with its HA; and (2) a home registration MUST be directed\
    \ to the home\n   network before the lifetime of the GFA care-of address expires.\n"
- title: 6.1.  Mobile Node Considerations
  contents:
  - "6.1.  Mobile Node Considerations\n   For each pending or current home registration,\
    \ the MN maintains the\n   information described in [RFC3344].  The information\
    \ is also updated\n   for the regional registrations performed by the MN.  In\
    \ addition to\n   the information described in [RFC3344], the MN MUST maintain\
    \ the\n   following information, if present:\n   o  the GFA address\n   o  the\
    \ remaining Lifetime of the regional registration\n   o  the style of replay protection\
    \ in use for the regional\n      registration\n   o  the Identification value\
    \ for the regional registration.\n   The replay protection for home registrations\
    \ and regional\n   registrations is performed as described in [RFC3344].  Since\
    \ the MN\n   performs regional registrations at the GFA in parallel with home\n\
    \   registrations at the HA, the MN MUST be able to keep one replay\n   protection\
    \ mechanism and sequence for the GFA, and a separate\n   mechanism and sequence\
    \ for the HA.\n   For regional registrations, replay protection may also be provided\
    \ at\n   the FA by the challenge-response mechanism, as described in\n   [RFC4721].\n"
- title: 6.2.  Foreign Agent Considerations
  contents:
  - "6.2.  Foreign Agent Considerations\n   When the FA receives a Regional Registration\
    \ Request from a MN,\n   addressed to a GFA, it generally processes the message\
    \ according to\n   the rules of processing a Registration Request addressed to\
    \ a HA (see\n   Section 5.2).  The only difference is that the GFA IP address\
    \ field\n   replaces the HA address field.  If that address belongs to a known\n\
    \   GFA, the FA forwards the request to the indicated GFA.  Otherwise,\n   the\
    \ FA MUST generate a Regional Registration Reply with error code\n   UNKNOWN_GFA.\n\
    \   For each pending or current registration, the FA maintains a visitor\n   list\
    \ entry as described in [RFC3344].  If reverse tunneling is being\n   used, the\
    \ visitor list MUST contain the address of the GFA, in\n   addition to the fields\
    \ required in [RFC3344].  This is required so\n   that the FA can tunnel datagrams,\
    \ sent by the MN, to the GFA.  The\n   GFA then decapsulates the datagrams, re-encapsulates\
    \ them, and sends\n   them to the HA.\n"
- title: 6.3.  GFA Considerations
  contents:
  - "6.3.  GFA Considerations\n   If the GFA accepts a Regional Registration Request,\
    \ it MUST set the\n   lifetime of the regional registration to be no greater than\
    \ the\n   remaining lifetime of the MN's registration with its HA, and put this\n\
    \   lifetime into the corresponding Regional Registration Reply.  The GFA\n  \
    \ MUST NOT accept a request for a regional registration if the lifetime\n   of\
    \ the MN's registration with its HA has expired.  In that case, the\n   GFA sends\
    \ a Regional Registration Reply with the value in the Code\n   field set to NO_HOME_REG.\n\
    \   If the GFA receives a tunneled packet from an FA in its domain, then\n   after\
    \ decapsulation the GFA looks to see whether it has an entry in\n   its visitor\
    \ list for the source IP address of the inner IP header\n   after decapsulation.\
    \  If so, it checks the visitor list to see\n   whether reverse tunneling has\
    \ been requested; if it was requested,\n   the GFA re-encapsulates the packet\
    \ with its own address as the source\n   IP address, and the address of the HA\
    \ as the destination IP address.\n"
- title: 7.  Dynamic GFA Assignment
  contents:
  - "7.  Dynamic GFA Assignment\n   Regional registrations may also allow dynamic\
    \ assignment of a GFA to\n   a MN.  The visited network (i.e., the FA) indicates\
    \ support for\n   dynamic GFA assignment by advertising an all-ones care-of address\
    \ in\n   the Agent Advertisement.  The MN then sets the care-of address in the\n\
    \   Registration Request to all-zeros to request a dynamically assigned\n   GFA.\
    \  Upon receiving this Registration Request, the FA relays it to\n   the appropriate\
    \ GFA, and the GFA assigns its address to the MN by\n   means of a GFA IP Address\
    \ extension added to the Registration\n   Request.\n   In order for dynamic GFA\
    \ assignment to work, the MN, GFA, and HA,\n   respectively, MUST support the\
    \ GFA IP Address extension.  Also, the\n   FA MUST be able to advertise an all-ones\
    \ care-of address and handle a\n   Registration Request with an all-zeros care-of\
    \ address.\n   Note also that protection of the GFA IP Address extension, added\
    \ to\n   the Registration Request, requires either the use of an FA-HA\n   Authentication\
    \ extension or other means to secure the Registration\n   Request when forwarded\
    \ from the GFA to the HA.\n"
- title: 7.1.  Mobile Node Considerations for Dynamic GFA Assignment
  contents:
  - "7.1.  Mobile Node Considerations for Dynamic GFA Assignment\n   If the 'I' flag\
    \ in the Agent Advertisement sent out by the FA is set,\n   and the care-of address\
    \ indicating the GFA is set to all-ones, this\n   indicates support for dynamic\
    \ GFA assignment.\n   If the MN supports dynamic GFA assignment, and if the advertised\
    \ GFA\n   address is all-ones, the MN SHOULD set the care-of address field in\n\
    \   the Registration Request to all-zeros to request to be assigned a\n   GFA.\n\
    \   When requesting dynamic GFA assignment, the MN MUST check to make\n   sure\
    \ that it receives a GFA IP Address extension in the Registration\n   Reply.\n"
- title: 7.2.  Foreign Agent Considerations for Dynamic GFA Assignment
  contents:
  - "7.2.  Foreign Agent Considerations for Dynamic GFA Assignment\n   If an FA supports\
    \ dynamic GFA assignment, and receives a Registration\n   Request with the care-of\
    \ address field set to all-zeros, the FA\n   assigns a GFA to the MN.  A FA can\
    \ either have a default GFA that it\n   assigns to all MNs or it can assign a\
    \ GFA by some means not described\n   in this specification.\n   If an FA that\
    \ does not support dynamic GFA assignment receives a\n   Registration Request\
    \ with the care-of address field set to all-zeros,\n   the FA will deny the request\
    \ as described in [RFC3344], i.e., by\n   sending a Registration Reply with the\
    \ Code field set to \"invalid\n   care-of address\".\n"
- title: 7.3.  GFA Considerations for Dynamic GFA Assignment
  contents:
  - "7.3.  GFA Considerations for Dynamic GFA Assignment\n   If a GFA supports dynamic\
    \ GFA assignment, and receives a Registration\n   Request with the care-of address\
    \ field set to all-zeros, the GFA\n   assigns its own IP address as care-of address\
    \ for this MN, and adds a\n   GFA IP Address extension with this address to the\
    \ Registration\n   Request.  The GFA MUST NOT insert the GFA IP address directly\
    \ in the\n   care-of address field in the Registration Request, since that would\n\
    \   cause the MN-HA authentication to fail.\n   The GFA IP Address extension has\
    \ to be protected so that it cannot be\n   changed by a malicious node when the\
    \ Registration Request is\n   forwarded to the HA.  If the HA and the GFA have\
    \ a mobility security\n   association, the GFA IP Address extension MUST be protected\
    \ by the\n   FA-HA authentication extension.  Otherwise, the Registration Request\n\
    \   MUST be sent to the HA in a secure way, for example via a secure AAA\n   protocol\
    \ (e.g., [RFC4004], [RFC3957]).\n   If the GFA does not support dynamic GFA assignment,\
    \ it will deny the\n   request by sending a Registration Reply with the Code field\
    \ set to\n   ZERO_COA_NOT_SUPP (see Section 9.5).\n"
- title: 7.4.  Home Agent Considerations for Dynamic GFA Assignment
  contents:
  - "7.4.  Home Agent Considerations for Dynamic GFA Assignment\n   If a HA receives\
    \ a Registration Request with a GFA IP Address\n   extension, and the HA does\
    \ not allow the use of this extension, the\n   HA MUST return a Registration Reply\
    \ with the Code value set to\n   DYN_GFA_NOT_SUPP (see Section 9.5).\n   If a\
    \ HA receives a Registration Request message with the care-of\n   address set\
    \ to all-zeros, but no GFA IP Address extension, it MUST\n   deny the request\
    \ by sending a Registration Reply message with the\n   Code field set to ZERO_CAREOF_ADDRESS\
    \ (see Section 9.5).\n   If a HA that does not support dynamic GFA assignment\
    \ receives a\n   Registration Request with a GFA IP Address extension, the request\n\
    \   will be denied by the HA, as described in [RFC3344].\n   If a HA that supports\
    \ dynamic GFA assignment receives a Registration\n   Request with the care-of\
    \ address set to all-zeros and a GFA IP\n   Address extension, it MUST register\
    \ the IP address of the GFA as the\n   care-of address of the MN in its mobility\
    \ binding list.  If the\n   Registration Request is accepted, the HA MUST include\
    \ the GFA IP\n   Address extension in the Registration Reply, before the MN-HA\n\
    \   Authentication extension.\n"
- title: 7.5.  Regional Registration
  contents:
  - "7.5.  Regional Registration\n   If the MN receives an Agent Advertisement with\
    \ the care-of address\n   field indicating the GFA set to all-ones, and if the\
    \ MN determines\n   that it is within the same visited domain as when it did its\
    \ last\n   home registration, it MAY send a Regional Registration Request to its\n\
    \   current GFA.  Otherwise, it MUST send a Registration Request to its\n   HA\
    \ as described in Section 7.1.\n"
- title: 8.  Router Discovery Extensions
  contents:
  - "8.  Router Discovery Extensions\n   This section specifies a new flag within\
    \ the Mobile IP Agent\n   Advertisement, and an optional extension to the ICMP\
    \ Router Discovery\n   Protocol [RFC1256].\n"
- title: 8.1.  Regional Registration Flag
  contents:
  - "8.1.  Regional Registration Flag\n   The only change to the Mobility Agent Advertisement\
    \ Extension defined\n   in [RFC3344] is a flag indicating that the domain, to\
    \ which the FA\n   generating the Agent Advertisement belongs, supports regional\n\
    \   registrations.  The flag is inserted after the flags defined in\n   [RFC3344],\
    \ [RFC3024], and [RFC3519].\n   Regional Registration flag:\n        0       \
    \            1                   2                   3\n        0 1 2 3 4 5 6\
    \ 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |    Length     |        Sequence Number        |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |           Lifetime            |R|B|H|F|M|G|r|T|U|I| reserved  |\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n       |\
    \                  zero or more Care-of Addresses               |\n       |  \
    \                            ...                              |\n   The flag is\
    \ defined as follows:\n            Type    16 (Mobility Agent Advertisement)\n\
    \            I       Regional Registration.  This domain supports\n          \
    \          regional registration as specified in this document.\n"
- title: 8.2.  Foreign Agent NAI Extension
  contents:
  - "8.2.  Foreign Agent NAI Extension\n   The FA-NAI extension is defined as subtype\
    \ 3 of the NAI Carrying\n   Extension [RFC3846].\n   The FA SHOULD include its\
    \ NAI in the Agent Advertisement message.  If\n   present, the Foreign Agent NAI\
    \ (FA-NAI) extension MUST appear in the\n   Agent Advertisement message after\
    \ any of the advertisement extensions\n   defined in [RFC3344].\n   By comparing\
    \ the domain part of the FA-NAI with the domain part of\n   the FA-NAI it received\
    \ in the previous Agent Advertisement, the MN\n   can determine whether it has\
    \ moved to a new domain since it last\n   registered.\n"
- title: 9.  Regional Extensions to Mobile IPv4 Registration Messages
  contents:
  - "9.  Regional Extensions to Mobile IPv4 Registration Messages\n   In this section,\
    \ we specify new Mobile IP registration extensions for\n   the purpose of managing\
    \ regional registrations.\n"
- title: 9.1.  GFA IP Address Extension
  contents:
  - "9.1.  GFA IP Address Extension\n   The GFA IP Address extension is defined for\
    \ the purpose of supporting\n   dynamic GFA assignment.  If the MN requests a\
    \ dynamically assigned\n   GFA, the GFA adds a GFA IP Address extension to the\
    \ Registration\n   Request before relaying it to the HA.  The MN indicates that\
    \ it wants\n   a GFA to be assigned by sending a Registration Request with the\n\
    \   care-of address field set to all-zeros.  The GFA IP Address extension\n  \
    \ MUST appear in the Registration Request before the FA-HA\n   Authentication\
    \ extension, if present.\n   If a HA receives a Registration Request message with\
    \ the care-of\n   address set to all-zeros, and a GFA IP Address extension, it\
    \ MUST\n   register the IP address of the GFA as the care-of address of the MN.\n\
    \   When generating a Registration Reply message, the HA MUST include the\n  \
    \ GFA IP Address extension from the Registration Request in the\n   Registration\
    \ Reply message.  The GFA IP Address extension MUST appear\n   in the Registration\
    \ Reply message before the MN-HA Authentication\n   extension.\n   The GFA IP\
    \ Address Extension is defined as follows:\n        0                   1    \
    \               2                   3\n        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |     Length    |           reserved            |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |                         GFA IP Address                        |\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   Type\n\
    \      46 (GFA IP Address) (non-skippable)\n   Length\n      6\n   GFA IP Address\n\
    \      The GFA IP Address field contains the Gateway Foreign Agent's\n      (GFA)\
    \ publicly routable address.\n"
- title: 9.2.  Hierarchical Foreign Agent Extension
  contents:
  - "9.2.  Hierarchical Foreign Agent Extension\n   The Hierarchical Foreign Agent\
    \ (HFA) extension may be present in a\n   Registration Request or Regional Registration\
    \ Request.  When an FA\n   adds this extension to a Registration Request, the\
    \ receiving mobility\n   agent (GFA) sets up a pending registration record for\
    \ the MN, using\n   the IP address in the HFA extension as the care-of address\
    \ for the\n   MN.  Furthermore, in this case, the extension MUST be appended at\
    \ the\n   end of all previous extensions that had been included in the\n   registration\
    \ message as received by the FA.  The HFA extension MUST\n   be protected by an\
    \ FA-FA Authentication extension.  When the\n   receiving mobility agent (GFA)\
    \ receives the registration message, it\n   MUST remove the HFA extension added\
    \ by the sending FA.\n   If a MN with a co-located care-of address adds the HFA\
    \ extension to a\n   Registration Request, the receiving mobility agent (GFA)\
    \ sets up a\n   pending registration record for the MN, using the IP address in\
    \ the\n   HFA extension as the care-of address for the MN.  The extension MUST\n\
    \   be protected by an authentication extension.  If the MN has\n   established\
    \ a mobility security association with the GFA, the HFA\n   extension MUST be\
    \ placed before the MN-FA Authentication extension,\n   and it SHOULD be placed\
    \ after the Mobile-Home (MN-HA) Authentication\n   extension.  Otherwise, if the\
    \ MN has no established mobility security\n   association with the GFA, the HFA\
    \ extension MUST be placed before the\n   MN-HA authentication extension.  If\
    \ the HFA extension is placed after\n   all other extensions, the receiving mobility\
    \ agent (GFA) MUST remove\n   the HFA extension added by the MN.  Otherwise, when\
    \ the HA receives\n   the registration message, it ignores the HFA extension.\n\
    \   The Hierarchical Foreign Agent (HFA) Extension is defined as follows:\n  \
    \      0                   1                   2                   3\n       \
    \ 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |     Length    |           reserved            |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |                         FA IP Address                         |\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   Type\n\
    \      140 (Hierarchical Foreign Agent) (skippable)\n   Length\n      6\n   FA\
    \ IP Address\n      The IP Address of the FA relaying the Registration Request.\n"
- title: 9.3.  Replay Protection Style
  contents:
  - "9.3.  Replay Protection Style\n   When a MN uses Mobile IPv4 to register a care-of\
    \ address with its HA,\n   the style of replay protection used for the registration\
    \ messages is\n   assumed to be known by way of a mobility security association\
    \ that is\n   required to exist between the MN and the HA receiving the request.\n\
    \   No such pre-existing security association between the MN and the GFA\n   is\
    \ likely to be available.  By default, the MN SHOULD treat replay\n   protection\
    \ for Regional Registration messages exactly as specified in\n   Mobile IPv4 [RFC3344]\
    \ for timestamp-based replay protection.\n   If the MN requires nonce-based replay\
    \ protection, also as specified\n   in Mobile IPv4, it MAY append a Replay Protection\
    \ Style extension to\n   a Registration Request.  Since Registration Requests\
    \ are forwarded to\n   the HA by way of the GFA, the GFA will be able to establish\
    \ the\n   selected replay protection (see Section 5.3).\n   The GFA also uses\
    \ this extension by adding a Replay Protection Style\n   extension to a Registration\
    \ Reply to synchronize the replay\n   protection for Regional Registrations (see\
    \ Section 5.3).\n   The format of the Replay Protection Style extension is:\n\
    \        0                   1                   2                   3\n     \
    \   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |     Length    |    Replay Protection Style    |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |                                                               |\n      \
    \ +                   Initial Identification                      +\n       |\
    \                                                               |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   Type\n      141 (Replay Protection Style) (skippable)\n   Length\n      2\n\
    \   Replay Protection Style\n      An integer specifying the style of replay protection\
    \ desired by\n      the MN.\n   Initial Identification\n      The timestamp or\
    \ nonce to be used for initial synchronization for\n      the replay mechanism.\n\
    \   Admissible values for the Replay Protection Style are as follows:\n      \
    \              +-------+-------------------------+\n                    | Value\
    \ | Replay Protection Style |\n                    +-------+-------------------------+\n\
    \                    | 0     | timestamp [RFC3344]     |\n                   \
    \ | 1     | nonce [RFC3344]         |\n                    +-------+-------------------------+\n\
    \   The Replay Protection Style extension MUST be protected by an\n   authentication\
    \ extension.  If the MN has an established mobility\n   security association with\
    \ the GFA, the Replay Protection Style\n   extension MUST be placed before the\
    \ MN-FA Authentication extension in\n   the Registration Request, and SHOULD be\
    \ placed after the MN-HA\n   Authentication extension.  Otherwise, the Replay\
    \ Protection Style\n   extension MUST be placed before the MN-HA Authentication\
    \ extension in\n   the Registration Request.\n   If the GFA adds a Replay Protection\
    \ Style extension to a Registration\n   Reply, it SHOULD be placed before the\
    \ MN-FA Authentication extension.\n   The MN-FA Authentication extension should\
    \ be based on security\n   associations between the MN and GFA established during\
    \ home\n   registration.\n   Replay protection MAY also be provided through a\
    \ challenge-response\n   mechanism, at the FA issuing the Agent Advertisement,\
    \ as described in\n   [RFC4721].\n"
- title: 9.4.  Regional Registration Lifetime Extension
  contents:
  - "9.4.  Regional Registration Lifetime Extension\n   The Regional Registration\
    \ Lifetime extension allows the GFA to set a\n   lifetime for the regional registration\
    \ with an MN during its home\n   registration.  When receiving a Registration\
    \ Reply from the HA, the\n   GFA MAY add this extension to the Registration Reply\
    \ before relaying\n   it to the FA.  The GFA MUST set the Regional Registration\
    \ Lifetime to\n   be no greater than the remaining lifetime of the MN's home\n\
    \   registration.\n   The Regional Registration Lifetime Extension is defined\
    \ as follows:\n       0                   1                   2              \
    \     3\n        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0\
    \ 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |     Length    |           reserved            |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |                Regional Registration Lifetime                 |\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   Type\n\
    \      142 (Regional Registration Lifetime) (skippable)\n   Length\n      6\n\
    \   Regional Registration Lifetime\n      If the Code field indicates that the\
    \ registration was accepted,\n      the Regional Registration Lifetime field is\
    \ set to the number of\n      seconds remaining before the regional registration\
    \ is considered\n      expired.  A value of zero indicates that the MN has been\n\
    \      deregistered with the GFA.  A value of 0xffff indicates infinity.\n   \
    \   If the Code field indicates that the home registration was denied,\n     \
    \ the contents of the Regional Registration Lifetime field are\n      unspecified\
    \ and MUST be ignored on reception.\n   If the GFA adds a Regional Registration\
    \ Lifetime extension to a\n   Registration Reply, it MUST be placed before the\
    \ MN-FA Authentication\n   extension.  The MN-FA Authentication extension should\
    \ be based on\n   security associations between the MN and GFA established during\
    \ home\n   registration.\n"
- title: 9.5.  New Code Values for Registration Reply
  contents:
  - "9.5.  New Code Values for Registration Reply\n   The values to use within the\
    \ Code field of the Registration Reply are\n   defined in [RFC3344].  In addition,\
    \ the following values are defined:\n                      Registration denied\
    \ by the GFA:\n           +---------------------+-------+---------------------+\n\
    \           | Error Name          | Value | Section of Document |\n          \
    \ +---------------------+-------+---------------------+\n           | REPLAY_PROT_UNAVAIL\
    \ | 110   | Section 5.3         |\n           | ZERO_COA_NOT_SUPP   | 111   |\
    \ Section 7.3         |\n           +---------------------+-------+---------------------+\n\
    \        Registration denied by the HA (for dynamic GFA assignment):\n       \
    \    +---------------------+-------+---------------------+\n           | Error\
    \ Name          | Value | Section of Document |\n           +---------------------+-------+---------------------+\n\
    \           | ZERO_CAREOF_ADDRESS | 145   | Section 7.4         |\n          \
    \ | DYN_GFA_NOT_SUPP    | 146   | Section 7.4         |\n           +---------------------+-------+---------------------+\n"
- title: 10.  Regional Registration Message Formats
  contents:
  - "10.  Regional Registration Message Formats\n   This section specifies two new\
    \ registration message types: Regional\n   Registration Request and Regional Registration\
    \ Reply.  These messages\n   are used by the MN instead of the existing Mobile\
    \ IPv4 Registration\n   Request and Registration Reply, as described in Section\
    \ 6.\n   Regional registration messages are protected by required\n   authentication\
    \ extensions, in the same way as the existing Mobile\n   IPv4 registration messages\
    \ are protected.  The following rules apply\n   to authentication extensions:\n\
    \   o  The MN-GFA Authentication extension [RFC3344] MUST be included in\n   \
    \   all regional registration messages.\n   o  The MN-FA Authentication extension\
    \ [RFC3344] MAY be included in\n      regional registration messages.\n   o  The\
    \ FA-HA Authentication extension [RFC3344] MUST NOT be included\n      in any\
    \ regional registration message.\n"
- title: 10.1.  Regional Registration Request
  contents:
  - "10.1.  Regional Registration Request\n   The Regional Registration Request is\
    \ used by a MN to register with\n   its current GFA.\n   Regional Registration\
    \ Request:\n        0                   1                   2                \
    \   3\n        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n\
    \       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  \
    \     |     Type      |S|B|D|M|G|r|T|x|          Lifetime             |\n    \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      \
    \ |                          Home Address                         |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |                         GFA IP Address                        |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |                        Care-of Address                        |\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n       |\
    \                                                               |\n       +  \
    \                       Identification                        +\n       |    \
    \                                                           |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       | Extensions ...\n       +-+-+-+-+-+-+-+-\n   The Regional Registration\
    \ Request is defined as the Registration\n   Request in [RFC3344], but with the\
    \ following changes:\n   Type\n      18 (Regional Registration Request)\n   Lifetime\n\
    \      The number of seconds remaining before the Regional Registration\n    \
    \  is considered expired.  A value of zero indicates a request for\n      deregistration\
    \ with the GFA.  A value of 0xffff indicates\n      infinity.\n   GFA IP Address\n\
    \      The IP address of the Gateway Foreign Agent (GFA).  (Replaces Home\n  \
    \    Agent field in Registration Request message in [RFC3344].)\n   Care-of Address\n\
    \      Care-of address of local FA; MAY be set to all-ones.\n   Identification\n\
    \      A 64-bit number, constructed by the MN, used for matching Regional\n  \
    \    Registration Requests with Regional Registration Replies, and for\n     \
    \ protecting against replay attacks of regional registration\n      messages.\n\
    \   Extensions\n      For the Regional Registration Request, the Hierarchical\
    \ Foreign\n      Agent (HFA) Extension is an allowable extension (in addition\
    \ to\n      those which are allowable for the Registration Request).\n"
- title: 10.2.  Regional Registration Reply
  contents:
  - "10.2.  Regional Registration Reply\n   The Regional Registration Reply delivers\
    \ the indication of regional\n   registration acceptance or denial to a MN.\n\
    \   In the Regional Registration Reply, the UDP header is followed by the\n  \
    \ Mobile IP fields shown below:\n        0                   1               \
    \    2                   3\n        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0\
    \ 1 2 3 4 5 6 7 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |     Code      |           Lifetime            |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |                          Home Address                         |\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n       |\
    \                        GFA IP Address                         |\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |                                                               |\n  \
    \     +                         Identification                        +\n    \
    \   |                                                               |\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n       |\
    \ Extensions ...\n       +-+-+-+-+-+-+-+-\n   This message is defined as the Registration\
    \ Reply message in\n   [RFC3344], but with the following changes:\n   Type\n \
    \     19 (Regional Registration Reply)\n   Code\n      A value indicating the\
    \ result of the Regional Registration\n      Request.  See [RFC3344] for a list\
    \ of currently defined Code\n      values.\n   Lifetime\n      If the Code field\
    \ indicates that the regional registration was\n      accepted, the Lifetime field\
    \ is set to the number of seconds\n      remaining before the regional registration\
    \ is considered expired.\n      A value of zero indicates that the MN has been\
    \ deregistered with\n      the GFA.  A value of 0xffff indicates infinity.  If\
    \ the Code field\n      indicates that the regional registration was denied, the\
    \ contents\n      of the Lifetime field are unspecified and MUST be ignored on\n\
    \      reception.\n   GFA IP Address\n      The IP address of the Gateway Foreign\
    \ Agent (GFA) generating the\n      Regional Registration Reply.  (Replaces Home\
    \ Agent field specified\n      in Mobile IPv4 [RFC3344].)\n   Identification\n\
    \      A 64-bit number used for matching Regional Registration Requests\n    \
    \  with Regional Registration Replies, and for protecting against\n      replay\
    \ attacks of regional registration messages.  The value is\n      based on the\
    \ Identification field from the Regional Registration\n      Request message from\
    \ the MN, and on the style of replay protection\n      used in the security context\
    \ between the MN and its GFA (defined\n      by the mobility security association\
    \ between them).\n"
- title: 10.3.  New Regional Registration Reply Code Values
  contents:
  - "10.3.  New Regional Registration Reply Code Values\n   For a Regional Registration\
    \ Reply, the following additional Code\n   values are defined in addition to those\
    \ specified in Mobile IPv4\n   [RFC3344].\n                      Registration\
    \ denied by the FA:\n          +----------------------+-------+---------------------+\n\
    \          | Error Name           | Value | Section of Document |\n          +----------------------+-------+---------------------+\n\
    \          | UNKNOWN_GFA          | 112   | Section 6.2         |\n          |\
    \ GFA_UNREACHABLE      | 113   |                     |\n          | GFA_HOST_UNREACHABLE\
    \ | 114   |                     |\n          | GFA_PORT_UNREACHABLE | 115   |\
    \                     |\n          +----------------------+-------+---------------------+\n\
    \                      Registration denied by the GFA:\n               +-------------+-------+---------------------+\n\
    \               | Error Name  | Value | Section of Document |\n              \
    \ +-------------+-------+---------------------+\n               | NO_HOME_REG\
    \ | 193   | Section 6.3         |\n               +-------------+-------+---------------------+\n\
    \   The four first Code values are returned to the MN in response to ICMP\n  \
    \ errors that may be received by the FA.\n"
- title: 11.  Authentication Extensions
  contents:
  - "11.  Authentication Extensions\n   In this section, two new subtypes for the\
    \ Generalized Authentication\n   Extension [RFC4721] are specified.  First, the\
    \ FA-FA Authentication\n   extension is used by FAs to secure the HFA extension\
    \ to the\n   Registration Request and Regional Registration Request messages.\
    \  A\n   new authentication extension is necessary because the HFA extension\n\
    \   is typically added after the MN-HA Authentication extension or, e.g.,\n  \
    \ the MN-AAA Authentication extension [RFC4721].\n   The MN-GFA Authentication\
    \ extension is used whenever the MN has a co-\n   located address.  The MN-GFA\
    \ Authentication extension is also used to\n   provide authentication for a Regional\
    \ Registration Request.\n         The subtype values for these new subtypes are\
    \ as follows:\n                     +-----------------------+-------+\n      \
    \               | Subtype Name          | Value |\n                     +-----------------------+-------+\n\
    \                     | FA-FA authentication  |  2    |\n                    \
    \ | MN-GFA authentication |  3    |\n                     +-----------------------+-------+\n\
    \   The default algorithm for computation of the authenticator is the\n   same\
    \ as for the MN-AAA Authentication subtype defined in [RFC4721].\n"
- title: 12.  Security Considerations
  contents:
  - "12.  Security Considerations\n   This document proposes a method for a MN to\
    \ register locally in a\n   visited domain.  The authentication extensions to\
    \ be used are those\n   defined in [RFC3344] and [RFC4721].  Key distribution,\
    \ assumed to\n   take place during home registration, is to be performed, for\n\
    \   instance, according to [RFC4004] or [RFC3957].  Alternatively, the\n   keys\
    \ can be pre-configured.\n   If the Hierarchical Foreign Agent (HFA) extension\
    \ is appended to a\n   Registration Request, this extension is to be followed\
    \ by an FA-FA\n   Authentication extension (see Section 11) to prevent any modification\n\
    \   to the data.  Security associations between FAs and GFAs within a\n   domain\
    \ are assumed to exist prior to regional registrations.\n   If the GFA IP Address\
    \ extension is added to a registration message,\n   it is to be followed by a\
    \ authentication extension.  In case of the\n   GFA IP Address extension being\
    \ added to a Registration Request, it\n   should be protected by an FA-HA Authentication\
    \ extension.  If no\n   security association exists between the GFA and the HA,\
    \ the\n   Registration Request needs to be protected by other means not defined\n\
    \   in this document.  When a GFA IP Address extension is added to a\n   Registration\
    \ Reply, it is protected by the Mobile-Home Authentication\n   extension as defined\
    \ in [RFC3344].\n   Replay protection for regional registrations is defined similarly\
    \ to\n   [RFC3344], with the addition of a Replay Protection Style extension.\n\
    \   If this extension is added to a Registration Reply by a GFA, it needs\n  \
    \ to be protected by a MN-FA Authentication extension.\n   A co-operating malicious\
    \ MN-HA pair can trick the GFA into setting up\n   state for an incorrect MN home\
    \ address.  This would result in\n   redirection of data of the node that actually\
    \ owns that IP address to\n   the malicious MN.  Given that the forwarding happens\
    \ based on the\n   home address at the GFA, such an attack is scoped to the prefix\
    \ of\n   the HA, not that of the GFA.  This type of attack, or its\n   consequences,\
    \ is not considered in this document.\n"
- title: 13.  IANA Considerations
  contents:
  - "13.  IANA Considerations\n   This document defines:\n   o  A subtype for the\
    \ NAI Carrying Extension [RFC3846] is specified in\n      Section 8.2, which needs\
    \ to have a value assigned from the space\n      of NAI Carrying Extension subtypes.\n\
    \   o  Four new extensions to Mobile IP Registration messages: GFA IP\n      Address,\
    \ Hierarchical Foreign Agent, Replay Protection Style, and\n      Regional Registration\
    \ Lifetime (see Sections 9.1, 9.2, 9.3, and\n      9.4).  The Type values for\
    \ the GFA IP Address extension must be\n      within the range 0 through 127,\
    \ while the other three must be\n      within the range 128 through 255.\n   o\
    \  New Code values for Registration Reply messages (see Section 9.5).\n   o  Two\
    \ new subtypes for the Generalized Authentication Extension\n      [RFC4721];\
    \ see Section 11.\n   o  Two new message types for Mobile IP: Regional Registration\
    \ Request\n      and Regional Registration Reply (see Sections 10.1 and 10.2).\n\
    \   o  Code values for Regional Registration Reply messages (see Section\n   \
    \   10.3).\n"
- title: 14.  Acknowledgements
  contents:
  - "14.  Acknowledgements\n   This document is a logical successor to documents written\
    \ with Pat\n   Calhoun and Gabriel Montenegro; thanks to them and their many efforts\n\
    \   to help explore this problem space.  Many thanks also to Jari Malinen\n  \
    \ for his commentary on a rough version of this document.\n"
- title: 15.  References
  contents:
  - '15.  References

    '
- title: 15.1.  Normative References
  contents:
  - "15.1.  Normative References\n   [RFC1256]  Deering, S., \"ICMP Router Discovery\
    \ Messages\", RFC 1256,\n              September 1991.\n   [RFC2119]  Bradner,\
    \ S., \"Key words for use in RFCs to Indicate\n              Requirement Levels\"\
    , BCP 14, RFC 2119, March 1997.\n   [RFC4282]  Aboba, B., Beadles, M., Arkko,\
    \ J., and P. Eronen, \"The\n              Network Access Identifier\", RFC 4282,\
    \ December 2005.\n   [RFC2794]  Calhoun, P. and C. Perkins, \"Mobile IP Network\
    \ Access\n              Identifier Extension for IPv4\", RFC 2794, March 2000.\n\
    \   [RFC3024]  Montenegro, G., \"Reverse Tunneling for Mobile IP,\n          \
    \    revised\", RFC 3024, January 2001.\n   [RFC3344]  Perkins, C., \"IP Mobility\
    \ Support for IPv4\", RFC 3344,\n              August 2002.\n   [RFC3519]  Levkowetz,\
    \ H. and S. Vaarala, \"Mobile IP Traversal of\n              Network Address Translation\
    \ (NAT) Devices\", RFC 3519, May\n              2003.\n   [RFC3846]  Johansson,\
    \ F. and T. Johansson, \"Mobile IPv4 Extension for\n              Carrying Network\
    \ Access Identifiers\", RFC 3846, June 2004.\n   [RFC4721]  Perkins, C., Calhoun,\
    \ P., and J. Bharatia, \"Mobile IPv4\n              Challenge/Response Extensions\
    \ (Revised)\", RFC 4721,\n              January 2007.\n"
- title: 15.2.  Informative References
  contents:
  - "15.2.  Informative References\n   [RFC3957]  Perkins, C. and P. Calhoun, \"Authentication,\n\
    \              Authorization, and Accounting (AAA) Registration Keys for\n   \
    \           Mobile IPv4\", RFC 3957, March 2005.\n   [RFC4004]  Calhoun, P., Johansson,\
    \ T., Perkins, C., Hiller, T., and\n              P. McCann, \"Diameter Mobile\
    \ IPv4 Application\", RFC 4004,\n              August 2005.\n"
- title: Appendix A.  Authentication, Authorization, and Accounting (AAA)
  contents:
  - "Appendix A.  Authentication, Authorization, and Accounting (AAA)\n          \
    \   Interactions\n   When the mobile node has to obtain authorization by way of\n\
    \   Authentication, Authorization, and Accounting (AAA) infrastructure\n   services,\
    \ the control flow implicit in the main body of this\n   specification is likely\
    \ to be modified.  Typically, the mobile node\n   will supply credentials for\
    \ authorization by AAA as part of its\n   registration messages.  The GFA will\
    \ parse the credentials supplied\n   by the mobile and forward the appropriate\
    \ authorization request to a\n   local AAA server (see [RFC3012] and [RFC4004]).\n\
    \   Concretely, this means that:\n   o  The GFA MAY include the Mobile IP Registration\
    \ Request data inside\n      an authorization request, directed to a local AAA\
    \ server.\n   o  The GFA MAY receive the Mobile IP Registration Reply data from\
    \ a\n      message granting authorization, received from the AAA\n      infrastructure.\n"
- title: Appendix B.  Anchoring at a GFA
  contents:
  - "Appendix B.  Anchoring at a GFA\n   As described earlier in this draft, once\
    \ a mobile node has registered\n   the address of a GFA as its care-of address\
    \ with its home agent, it\n   MAY perform regional registrations when changing\
    \ foreign agent under\n   the same GFA.  When detecting that is has changed foreign\
    \ agent, and\n   if the new foreign agent advertises the 'I' flag, the mobile\
    \ node MAY\n   address a Regional Registration Request message to its registered\n\
    \   GFA, even if the address of that particular GFA is not advertised by\n   the\
    \ new foreign agent.  The foreign agent MAY then relay the request\n   to the\
    \ GFA in question, or deny the request with error code\n   UNKNOWN_GFA.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Eva Fogelstroem\n   Ericsson\n   Torshamnsgatan 23\n \
    \  SE-164 80 Stockholm\n   Sweden\n   EMail: eva.fogelstrom@ericsson.com\n   Annika\
    \ Jonsson\n   Ericsson\n   Tellusborgsvagen 83-87\n   S-126 37 Hagersten\n   Sweden\n\
    \   EMail: annika.jonsson@ericsson.com\n   Charles E. Perkins\n   Nokia Siemens\
    \ Networks\n   313 Fairchild Drive\n   Mountain View, California 94043\n   USA\n\
    \   EMail: charles.perkins@nsn.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2007).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
