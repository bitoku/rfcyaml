- title: __initial_text__
  contents:
  - '                  BGP4/IDRP for IP---OSPF Interaction

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Abstract
  contents:
  - "Abstract\n   This memo defines the various criteria to be used when designing\
    \ an\n   Autonomous System Border Router (ASBR) that will run either BGP4 or\n\
    \   IDRP for IP with other ASBRs external to the AS and OSPF as its IGP.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   5.  Setting OSPF Forwarding Address and BGP NEXT_HOP attribute\
    \ ... 14\n   10.  Appendix ....................................................\
    \ 18\n   11.  Authors' Present Addresses .................................. 19\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This document defines the various criteria to be used when\
    \ designing\n   an Autonomous System Border Router (ASBR) that will run BGP4\n\
    \   [RFC1654] or IDRP for IP [IDRP] with other ASBRs external to the AS,\n   and\
    \ OSPF [RFC1583] as its IGP.\n   All future references of BGP in this document\
    \ will refer to BGP\n   version 4, as defined in [RFC1654].  All reference to\
    \ IDRP are\n   references to the Inter-Domain Routing Protocol (ISO 10747) which\
    \ has\n   been defined by the IDRP for IP document [IDRP] for use in Autonomous\n\
    \   Systems.\n   This document defines how the following fields in OSPF and attributes\n\
    \   in BGP/IDRP are to be set when interfacing between BGP/IDRP and OSPF\n   at\
    \ an ASBR:\n   IDRP came out of the same work as BGP, and may be consider a follow\n\
    \   on to BGP-3 and BGP-4.  Most fields defined in the interaction\n   between\
    \ BGP and IDRP are named the same.  Where different, the IDRP\n   fields are shown\
    \ separately.\n           BGP/IDRP MULTI_EXIT_DISC\n           BGP ORIGIN and\
    \ AS_PATH/AS_SET     vs. OSPF tag\n           IDRP EXT_INFO and RD_PATH/RD_SET\n\
    \           BGP/IDRP NEXT_HOP                 vs. OSPF Forwarding Address\n  \
    \         BGP/IDRP LOCAL_PREF               vs. OSPF cost and type\n   IDRP contains\
    \ RD_PATH and RD_SET fields which serves the same purpose\n   as AS_PATH and AS_SET\
    \ fields for IDRP for IP.  In this document, we\n   will use the terms PATH and\
    \ SET to refer to the BGP AS_PATH and\n   AS_SET, or the IDRP RD_PATH and RD_SET\
    \ fields respectively, depending\n   on the context of the protocol being used.\n\
    \   Both IDRP and BGP provide a mechanism to indicate whether the routing\n  \
    \ information was originated via an IGP, or some other means.  In IDRP,\n   if\
    \ route information is originated by means other than an IGP, then\n   the EXT_INFO\
    \ attribute is present.  Likewise, in BGP, if a route\n   information is originated\
    \ by means other than an IGP, then the ORIGIN\n   attribute is set to <EGP> or\
    \ <INCOMPLETE>.  For the purpose of this\n   document, we need to distinguish\
    \ between the two cases:\n        (a)  Route information was originated via an\
    \ IGP,\n        (b)  Route information was originated by some other means.\n \
    \  The former case is realized in IDRP by not including the EXT_INFO\n   attribute,\
    \ and in BGP by setting the BGP ORIGIN=<IGP>;  The latter\n   case is realized\
    \ by including the EXT_INFO attribute in IDRP, and by\n   setting the BGP ORIGIN=<EGP>.\
    \  For the rest of the document, we will\n   use the BGP ORIGIN=<IGP> to refer\
    \ to the former scenario, and BGP\n   ORIGIN=<EGP> to refer to the latter.\n \
    \  One other difference between IDRP and BGP remains.  IDRP for IP\n   identifies\
    \ an autonomous system by an identifier of variable length\n   that is syntactically\
    \ identical to an NSAP address prefix, and\n   explicitly embeds the autonomous\
    \ system number [IDRP].  BGP\n   identifies an autonomous system just by an autonomous\
    \ system number.\n   Since there is a one-to-one mapping between how an autonomous\
    \ system\n   is identified in IDRP and in BGP, in this document, we shall identify\n\
    \   an autonomous system by its autonomous system number.\n   For a more general\
    \ treatise on routing and route exchange problems,\n   please refer to [ROUTE-LEAKING]\
    \ and [NEXT-HOP] by Philip Almquist.\n   This document uses the two terms \"Autonomous\
    \ System\" and \"Routing\n   Domain\".  The definitions for the two are below:\n\
    \   The term Autonomous System is the same as is used in the BGP RFC\n   [RFC1267],\
    \ given below:\n      \"The use of the term Autonomous System here stresses the\
    \ fact\n      that, even when multiple IGPs and metrics are used, the\n      administration\
    \ of an AS appears to other ASs to have a single\n      coherent interior routing\
    \ plan and presents a consistent picture\n      of what destinations are reachable\
    \ through it.  From the\n      standpoint of exterior routing, an AS can be viewed\
    \ as monolithic:\n      reachability to destinations directly connected to the\
    \ AS must be\n      equivalent from all border gateways of the AS.\"\n   The term\
    \ Routing Domain was first used in [ROUTE-LEAKING] and is\n   given below:\n \
    \     \"A Routing Domain is a collection of routers which coordinate\n      their\
    \ routing knowledge using a single [instance of a] routing\n      protocol.\"\n\
    \   By definition, a Routing Domain forms a single Autonomous System, but\n  \
    \ an Autonomous System may be composed of a collection of Routing\n   Domains.\n\
    \   BGP, IDRP and OSPF have the concept of a set of reachable\n   destinations.\
    \  This set is called NLRI or Network Layer Reachability\n   Information.  The\
    \ set can be represented either as an IP address\n   prefix, or an address, mask\
    \ pair.  Note that if the mask is\n   contiguous in the latter, then the two representations\
    \ are\n   equivalent.  In this document, we use the term \"address/mask pair\"\
    \ in\n   the context of OSPF, and \"destination\" or \"set of reachable\n   destinations\"\
    \ in the context of BGP or IDRP.\n   This document follows the conventions embodied\
    \ in the Host\n   Requirements RFCs [RFC1122, RFC1123], when using the terms \"\
    MUST\",\n   \"SHOULD,\" and \"MAY\" for the various requirements.\n   A minimal\
    \ implementation of BGP/IDRP OSPF exchange MUST not advertise\n   a route containing\
    \ a set of reachable destinations when none of the\n   destinations in the address/mask\
    \ pair is reachable via OSPF (section\n   2.1, bullet 3), MUST merge the PATH\
    \ into a SET when multiple exit\n   points exist within the same autonomous system\
    \ for the same external\n   destination (section 3), MUST set the OSPF tag accurately\
    \ (section\n   4).  This subset is chosen so as to cause minimal havoc to the\n\
    \   Internet at large.  It is strongly recommended that implementors\n   implement\
    \ more than a minimalistic specification.\n"
- title: 2.  Reachability Information Exchange
  contents:
  - "2.  Reachability Information Exchange\n   This section discusses the constraints\
    \ that must be met to exchange\n   the set of reachable destinations between an\
    \ external BGP/IDRP peer\n   from another AS and internal OSPF address/mask pairs.\n\
    \   2.1.  Exporting OSPF information into BGP\n      1.   The administrator MUST\
    \ be able to selectively export\n           address/mask pairs into BGP/IDRP via\
    \ an appropriate filter\n           mechanism.\n           This filter mechanism\
    \ MUST support such control with the\n           granularity of an address/mask\
    \ pair.\n           This filter mechanism will be the primary method of\n    \
    \       aggregation of OSPF internal and type 1 and type 2 external\n        \
    \   routes within the AS into BGP/IDRP.\n           Additionally, the administrator\
    \ MUST be able to filter based\n           on the OSPF tag and the various sub-fields\
    \ of the OSPF tag.\n           The settings of the tag and the sub-fields are\
    \ defined in\n           section 4 in more detail.\n           o    The default\
    \ MUST be to export no routes from OSPF into\n                BGP/IDRP.  A single\
    \ configuration parameter MUST permit\n                all OSPF inter-area and\
    \ intra-area address/mask pairs to\n                be exported into BGP/IDRP.\n\
    \                OSPF external address/mask pairs of type 1 and type 2\n     \
    \           MUST never be exported into BGP/IDRP unless they are\n           \
    \     explicitly configured.\n      2.   An address/mask pair having a non-contiguous\
    \ mask MUST not be\n           exported to BGP/IDRP.\n      3.   When configured\
    \ to export an address/mask pair from OSPF into\n           BGP/IDRP, the ASBR\
    \ MAY advertise the route containing the set\n           of reachable destinations\
    \ via BGP/IDRP as soon as at least\n           one of the destinations in the\
    \ address/mask pair is\n           determined to be reachable via OSPF; it MUST\
    \ stop advertising\n           the route containing the set of reachable destinations\
    \ when\n           none of the destinations in the address/mask pair is\n    \
    \       reachable via OSPF.\n      4.   The network administrator MUST be able\
    \ to statically\n           configure the BGP/IDRP attribute MULTI_EXIT_DISC attribute\
    \ to\n           be used for any route.\n           o    The default MUST be to\
    \ omit the MULTI_EXIT_DISC in the\n                route advertised via BGP/IDRP.\n\
    \      5.   An implementation of BGP/IDRP and OSPF on an ASBR MUST have a\n  \
    \         mechanism to set up a minimum amount of time that must elapse\n    \
    \       between the learning of a new address/mask pair via OSPF and\n       \
    \    subsequent advertisement of the address/mask pair via\n           BGP/IDRP\
    \ to the external neighbours.\n           o    The default value for this setting\
    \ MUST be 0, indicating\n                that the address/mask pair is to be advertised\
    \ to the\n                neighbour BGP/IDRP peers instantly.\n              \
    \  Note that BGP and IDRP mandate a mechanism to dampen the\n                inbound\
    \ advertisements from adjacent neighbours.  See\n                the variable\
    \ MinRouteAdvertisementInterval in section\n                9.2.3.1, [RFC1654]\
    \ or in section 7.17.3.1, [IS10747].\n      6.   LOCAL_PREF is not used when exporting\
    \ OSPF information into\n           BGP/IDRP, as it is not applicable.\n   2.2.\
    \  Importing BGP/IDRP information into OSPF\n      1.   BGP/IDRP implementations\
    \ SHOULD allow an AS to control\n           announcements of BGP/IDRP learned\
    \ set of reachable\n           destinations into OSPF.  Implementations SHOULD\
    \ support such\n           control with the granularity of a single destination.\n\
    \           Implementations SHOULD also support such control with the\n      \
    \     granularity of an autonomous system, where the autonomous\n           system\
    \ may be either the autonomous system that originated\n           the information\
    \ or the autonomous system that advertised the\n           information to the\
    \ local system (adjacent autonomous system).\n           o    The default MUST\
    \ be to import nothing from BGP/IDRP into\n                OSPF.  Administrators\
    \ must configure every destination\n                they wish to import.\n   \
    \             A configuration parameter MAY allow an administrator to\n      \
    \          configure an ASBR to import all the set of reachable\n            \
    \    destinations from BGP/IDRP into the OSPF routing domain.\n      2.   The\
    \ administrator MUST be able to configure the OSPF cost and\n           the OSPF\
    \ metric type of every destination imported into OSPF.\n           The OSPF metric\
    \ type MUST default to type 2. If the\n           LOCAL_PREF value is used to\
    \ construct the OSPF cost, one must\n           be extremely careful with such\
    \ a conversion. In OSPF the\n           lower cost is preferred, while in BGP/IDRP\
    \ the higher value\n           of the LOCAL_PREF is preferred.  In addition, the\
    \ OSPF cost\n           ranges between 1 and 2^24, while the LOCAL_PREF value\
    \ ranges\n           between 0 and 2^32.  Note that if ASBRs within a domain are\n\
    \           configured to correlate BGP/IDRP and OSPF information (as\n      \
    \     described in Section 3), then the route selection by the\n           ASBRs\
    \ is determined solely by the OSPF cost, and the value\n           carried by\
    \ the LOCAL_PREF attribute has no impact on the\n           route selection.\n\
    \      3.   Information learned via BGP/IDRP from peers within the same\n    \
    \       AS MUST not be imported into OSPF.\n      4.   The ASBR MUST never generate\
    \ a default destination into the\n           OSPF routing domain unless explicitly\
    \ configured to do so.\n           A default destination is a set of all possible\
    \ destinations.\n           By convention, it is represented as a prefix of 0\
    \ length or a\n           mask of all zeroes.\n           A possible criterion\
    \ for generating default into an IGP is to\n           allow the administrator\
    \ to specify a set of (set of reachable\n           destinations, PATH, default\
    \ cost, default type) tuples.  If\n           the ASBR learns of at least one\
    \ of the destinations in the\n           set of reachable destinations, with the\
    \ corresponding PATH,\n           then it generates a default destination into\
    \ the OSPF routing\n           domain, with the appropriate cost and type.  The\
    \ lowest cost\n           route will then be injected into the OSPF routing domain.\n\
    \           This is the recommended method for originating default\n         \
    \  destinations in the OSPF routing domain.\n      5.   Note that [RFC1247] requires\
    \ the network number to be used as\n           the Link State ID.  This will produce\
    \ a conflict if the ASBR\n           tries to import two destinations, differing\
    \ only in their\n           prefix length.  This problem is fixed in [RFC1583],\
    \ which\n           obsoletes [RFC1247].\n           An implementation conforming\
    \ to the older [RFC1247] MUST, in\n           this case, drop the more specific\
    \ route, i.e. the route\n           corresponding to the longer prefix in the\
    \ reachability\n           information.\n      6.   MULTI_EXIT_DISC is not used\
    \ to import BGP/IDRP information\n           into OSPF, as it is not applicable.\n"
- title: 3.  BGP/IDRP Identifier and OSPF router ID
  contents:
  - "3.  BGP/IDRP Identifier and OSPF router ID\n   The BGP/IDRP identifier MUST be\
    \ the same as the OSPF router id at all\n   times that the router is up.\n   Note\
    \ that [RFC1654] requires that the BGP identifier be an address\n   assigned to\
    \ the BGP speaker.\n   In the case of IDRP, the IDRP protocol does not explicitly\
    \ carry the\n   identity of the IDRP speaker.  An implicit notion of the identity\
    \ of\n   the IDRP speaker can be obtained by examining the source address in\n\
    \   the IP packets carrying the IDRP information.  Therefore, all IDRP\n   speakers\
    \ participating in the OSPF protocol MUST bind the IDRP\n   identifier to be the\
    \ address of the OSPF router id.\n   This characteristic makes it convenient for\
    \ the network administrator\n   looking at an ASBR to correlate different BGP/IDRP\
    \ and OSPF\n   information based on the identifier.  There is another more important\n\
    \   reason for this characteristic.\n   Consider the scenario in which 3 ASBRs,\
    \ RT1, RT2, and RT3, belong to\n   the same autonomous system.\n             \
    \                        +-----+\n                                     | RT3 |\n\
    \                                     +-----+\n                              \
    \          |\n                          Autonomous System running OSPF\n     \
    \                            /               \\\n                            \
    \ +-----+          +-----+\n                             | RT1 |          | RT2\
    \ |\n                             +-----+          +-----+\n   Both RT1 and RT2\
    \ can reach an external destination X and import this\n   information into the\
    \ OSPF routing domain.  RT3 is advertising this\n   information about destination\
    \ X to other external BGP/IDRP speakers.\n   The following rule specifies how\
    \ RT3 can generate the correct\n   advertisement.\n   RT3 MUST determine which\
    \ ASBR(s) it is using to reach destination X\n   by matching the OSPF router ID\
    \ for its route to destination with the\n   BGP identifier of the ASBR(s), or\
    \ the IP source address of the IDRP\n   protocol packet from the ASBR(s).\n  \
    \   o    If RT3 has equal cost routes to X through RT1 and RT2, then,\n      \
    \    RT3 MUST merge the PATH through RT1 and RT2 into a SET.\n     o    Otherwise,\
    \ RT3 MAY merge the PATH through RT1 and RT2.\n     It MAY then generate the corresponding\
    \ network layer reachability\n     information for further advertisement to external\
    \ BGP/IDRP peers.\n"
- title: 4.  Setting OSPF tags, ORIGIN and PATH attributes
  contents:
  - "4.  Setting OSPF tags, ORIGIN and PATH attributes\n   The OSPF external route\
    \ tag is a \"32-bit field attached to each\n   external route . . . It may be\
    \ used to communicate information\n   between AS boundary routers; the precise\
    \ nature of such information\n   is outside the scope of [the] specification\"\
    \ [RFC1583].\n   We use the external route tag field in OSPF to intelligently\
    \ set the\n   ORIGIN and PATH attributes in BGP/IDRP.  These attributes are well-\n\
    \   known, mandatory attributes in BGP/IDRP.  The exact mechanism for\n   setting\
    \ the tags is defined in sections 4.2 and 4.3.  Every\n   combination of tag bits\
    \ is described in two parts:\n     import  This describes when an ASBR imports\
    \ an AS external LSA into\n             the OSPF domain with the given tag setting.\n\
    \     export  This indicates how the BGP/IDRP path attribues should be\n     \
    \        formatted when an ASBR, having a given type 1 or type 2\n           \
    \  OSPF external route in its routing table, decides to export\n             according\
    \ to the considerations in section 2.1.\n     The tag is broken up into sub-fields\
    \ shown below.  The various\n     sub-fields specify the characteristics of the\
    \ set of reachable\n     destinations imported into the OSPF routing domain.\n\
    \     The high bit of the OSPF tag is known as the \"Automatic\" bit.\n     Setting\
    \ this bit indicates that the tag has been generated\n     automatically by an\
    \ ASBR.\n     When the network administrator configures the tag, this bit MUST\
    \ be\n     0.  This setting is the default tag setting, and is described in\n\
    \     section 4.2.\n     When the tag is automatically generated, this bit is\
    \ set to 1.  The\n     other bits are defined below:\n      0 0 0 0 0 0 0 0 0\
    \ 0 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3\n      0 1 2 3 4 5 6 7 8 9 0 1\
    \ 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \     |1|c|p l|     ArbitraryTag      |       AutonomousSystem        |\n    \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n     c  \
    \  1 bit of Completeness information, set when the ORIGIN of the\n          route\
    \ is either <EGP> or <IGP>.\n     pl   2 bits of PathLength information;  this\
    \ field is set depending\n          on the length of the PATH that the protocol\
    \ could have carried\n          when importing the reachability information into\
    \ the OSPF\n          routing domain.\n     ArbitraryTag\n          12 bits of\
    \ tag information, defaults to 0 but can be\n          configured to anything\
    \ else.\n     AutonomousSystem (or \"AS\")\n          16 bits, indicating the\
    \ AS number corresponding to the set of\n          reachable destinations, 0 if\
    \ the set of reachable destinations\n          is to be considered as part of\
    \ the local AS.\n          local_AS:     The AS number of the local OSPF routing\
    \ domain.\n          next_hop_AS:  The AS number of an external BGP peer.\n  \
    \ 4.1.  Configuration parameters for setting the OSPF tag\n      o    There MUST\
    \ be a mechanism to enable automatic generation of\n           the tag characteristic\
    \ bits.\n      o    Configuration of an ASBR running OSPF MUST include the\n \
    \          capability to associate a tag value, for the ArbitraryTag, or\n   \
    \        LocalInfo sub-field of the OSPF tag, with each instance of a\n      \
    \     routing domain.\n      o    Configuration of an ASBR running OSPF MUST include\
    \ the\n           capability to associate an AS number with each instance of a\n\
    \           routing domain.\n           Associating an AS number with an instance\
    \ of an IGP is\n           equivalent to flagging those set of reachable destinations\n\
    \           imported from the IGP to be external destinations outside the\n  \
    \         local autonomous system.\n   4.2.  Manually configured tags\n      \
    \ 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3\n       0 1\
    \ 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |0|                          LocalInfo                          |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      import\
    \  This tag setting corresponds to the administrator manually\n              setting\
    \ the OSPF tag bits.\n      export  The route SHOULD be exported into BGP with\
    \ the attributes\n              ORIGIN=<EGP>, PATH=<local_AS>.\n      Nothing\
    \ MUST inferred about the characteristics of the set of\n      reachable destinations\
    \ corresponding to this tag setting.\n      For backward compatibility with existing\
    \ implementations of OSPF\n      currently deployed in the field, this MUST be\
    \ the default setting\n      for importing destinations into the OSPF routing\
    \ domain.  There\n      MUST be a mechanism to enable automatic tag generation\
    \ for\n      imported destinations.\n   4.3.  Automatically generated tags\n \
    \     4.3.1. Tag = <Automatic = 1, Complete = 0, PathLength = 00>\n       0 0\
    \ 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3\n       0 1 2 3\
    \ 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |1|0|0|0|     ArbitraryTag      |       AutonomousSystem        |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      \
    \   import  These are reachable destinations imported from routing\n         \
    \        protocols with incomplete path information and cannot\n             \
    \    or may not carry the neighbour AS or AS path (and hence\n               \
    \  the IDRP RD_PATH) as part of the routing information.\n                 This\
    \ setting SHOULD be used to import reachable\n                 destinations from\
    \ an IGP that the network administrator\n                 has configured as external\
    \ routes, without specifying\n                 the next_hop_AS.\n         export\
    \  The route SHOULD be exported into BGP/IDRP with the\n                 attributes\
    \ ORIGIN=<EGP>, PATH=<Local_AS>.\n      4.3.2. Tag = <Automatic = 1, Complete\
    \ = 0, PathLength = 01>\n       0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 2 2 2\
    \ 2 2 2 2 2 2 2 3 3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4\
    \ 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |1|0|0|1|     ArbitraryTag      |       AutonomousSystem        |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      \
    \   import  These are reachable destinations imported from routing\n         \
    \        protocols with incomplete path information.  The\n                 neighbour\
    \ AS (and therefore IDRP RD) is carried in the\n                 routing information.\n\
    \                 This setting SHOULD be used for importing reachable\n      \
    \           destinations from EGP into the OSPF routing domain.\n            \
    \     This setting MAY also be used when importing reachable\n               \
    \  destinations from BGP/IDRP whose ORIGIN=<EGP> and\n                 PATH=<next_hop_AS>;\
    \ if the BGP/IDRP learned route has\n                 no other transitive attributes,\
    \ then its propagation\n                 via BGP/IDRP to ASBRs internal to the\
    \ autonomous system\n                 MAY be suppressed.\n         export  The\
    \ route SHOULD be exported into BGP/IDRP with\n                 ORIGIN=<EGP> and\
    \ PATH=<local_AS, next_hop_AS>.\n      4.3.3. Tag = <Automatic = 1, Complete =\
    \ 0, PathLength = 10>\n       0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 2 2 2 2\
    \ 2 2 2 2 2 2 3 3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |1|0|1|0|     ArbitraryTag      |       AutonomousSystem        |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      \
    \   import  These are reachable destinations imported from routing\n         \
    \        protocols with truncated path information.\n                 These are\
    \ imported by a border router, which is running\n                 BGP/IDRP to\
    \ a stub domain, and not running BGP/IDRP to\n                 other ASBRs in\
    \ the same autonomous system.  This causes\n                 a truncation of the\
    \ PATH.  These destinations MUST not\n                 be re-exported into BGP/IDRP\
    \ at another ASBR.\n         export  The route MUST never be exported into BGP/IDRP.\n\
    \      4.3.4. Tag = <Automatic = 1, Complete = 1, PathLength = 00>\n       0 0\
    \ 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3\n       0 1 2 3\
    \ 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |1|1|0|0|     ArbitraryTag      |       AutonomousSystem        |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      \
    \   import  These are reachable destinations imported from routing\n         \
    \        protocols with either complete path information or are\n            \
    \     known to be complete through means other than that\n                 carried\
    \ by the routing protocol.\n                 This setting SHOULD be used for importing\
    \ reachable\n                 destinations into OSPF from an IGP.\n         export\
    \  The route SHOULD be exported to BGP/IDRP with\n                 ORIGIN=<IGP>,\
    \ PATH=<Local_AS>.\n      4.3.5. Tag = <Automatic = 1, Complete = 1, PathLength\
    \ = 01>\n       0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3\
    \ 3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n\
    \      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   \
    \   |1|1|0|1|     ArbitraryTag      |       AutonomousSystem        |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \         import  These are reachable destinations imported from routing\n   \
    \              protocols with either complete path information, or are\n     \
    \            known to be complete through means other than that\n            \
    \     carried by the routing protocol.  The routing protocol\n               \
    \  also has additional information about the next hop AS\n                 or\
    \ RD, the destination was learned from.\n                 This setting SHOULD\
    \ be used when the administrator\n                 explicitly associates an AS\
    \ number with an instance of\n                 an IGP.  This setting MAY also\
    \ be used when importing\n                 reachable destinations from BGP/IDRP\
    \ whose ORIGIN=<IGP>\n                 and PATH=<next_hop_AS>; if the BGP/IDRP\
    \ learned route\n                 has no other transitive attributes, then its\n\
    \                 propagation via BGP/IDRP to other ASBRs internal to the\n  \
    \               autonomous system MAY be suppressed.\n         export  OSPF routes\
    \ with this tag setting SHOULD be exported\n                 with the BGP/IDRP\
    \ attributes, ORIGIN=<IGP>,\n                 PATH=<local_AS, next_hop_AS>.\n\
    \      4.3.6. Tag = <Automatic = 1, Complete = 1, PathLength = 10>\n       0 0\
    \ 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3\n       0 1 2 3\
    \ 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |1|1|1|0|     ArbitraryTag      |       AutonomousSystem        |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      \
    \   import  These are reachable destinations imported from routing\n         \
    \        protocols with complete path information and carry the\n            \
    \     AS path information as part of the routing information.\n              \
    \   These destinations MUST not be exported into BGP/IDRP\n                 because\
    \ these are destinations that are already\n                 imported from BGP/IDRP\
    \ into the OSPF RD.  Hence, it is\n                 assumed that the BGP/IDRP\
    \ speaker will convey these\n                 routes to other BGP/IDRP speakers\
    \ within the same\n                 autonomous system via BGP/IDRP.  An ASBR learning\
    \ of\n                 such a destination MUST wait for the BGP update from\n\
    \                 its internal neighbours before advertising it to\n         \
    \        external BGP/IDRP peers.\n         export  These routes MUST not be exported\
    \ into BGP/IDRP.\n   4.4.  Miscellaneous tag settings\n       0 0 0 0 0 0 0 0\
    \ 0 0 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3\n       0 1 2 3 4 5 6 7 8 9\
    \ 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |1|x|1|1|              Reserved  for  future  use               |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      The\
    \ value of PathLength=11 is reserved during automatic tag\n      generation. \
    \ Routers MUST NOT generate such a tag when importing\n      reachable destinations\
    \ into the OSPF routing domain.  ASBRs must\n      ignore tags which indicate\
    \ a PathLength=11.\n"
- title: 5.  Setting OSPF Forwarding Address and BGP/IDRP NEXT_HOP attribute
  contents:
  - "5.  Setting OSPF Forwarding Address and BGP/IDRP NEXT_HOP attribute\n   Forwarding\
    \ addresses are used to avoid extra hops between multiple\n   routers that share\
    \ a common network and that speak different routing\n   protocols with each other\
    \ on the common network.\n   Both BGP/IDRP and OSPF have equivalents of forwarding\
    \ addresses.  In\n   BGP and IDRP, the NEXT_HOP attribute is a well-known, mandatory\n\
    \   attribute.  OSPF has a Forwarding address field.  We will discuss how\n  \
    \ these are to be filled in various situations.\n   Consider the 4 router situation\
    \ below:\n   RT1 and RT2 are in one autonomous system, RT3 and RT4 are in another.\n\
    \   RT1 and RT3 are talking BGP/IDRP with each other.  RT3 and RT4 are\n   talking\
    \ OSPF with each other.\n            +-----+                 +-----+\n       \
    \     | RT1 |                 | RT2 |\n            +-----+                 +-----+\n\
    \               |                       |            common network\n        \
    \    ---+-----------------------+--------------------------\n            <BGP/IDRP>\
    \ |                       |\n                    +-----+     <OSPF>      +-----+\n\
    \                    | RT3 |                 | RT4 |\n                    +-----+\
    \                 +-----+\n     - Importing a reachable destination into OSPF:\n\
    \          When importing a destination from BGP/IDRP into OSPF, RT3 MUST\n  \
    \        always fill the OSPF Forwarding Address with the BGP/IDRP\n         \
    \ NEXT_HOP attribute for the destination.\n     - Exporting a reachable destination\
    \ into BGP:\n          When exporting set of reachable destinations internal to\
    \ the\n          OSPF routing domain from OSPF to BGP/IDRP, if all the\n     \
    \     destinations in the set of reachable destinations are through\n        \
    \  RT4, then RT3 MAY fill the NEXT_HOP attribute for the set of\n          reachable\
    \ destinations with the address of RT4.  This is to\n          avoid requiring\
    \ packets to take an extra hop through RT3 when\n          traversing the AS boundary.\
    \  This is similar to the concept of\n          indirect neighbour support in\
    \ EGP [RFC888, RFC827].\n"
- title: 6.  Changes from the BGP 3 - OSPF interactions document
  contents:
  - "6.  Changes from the BGP 3 - OSPF interactions document\n     o    The use of\
    \ the term \"route\" has attained a more complicated\n          structure in BGP\
    \ 4.  This document follows the constraint in\n          the manner shown below:\n\
    \          -    The term \"set of reachable destinations\" is called a NLRI\n\
    \               in [RFC1654].\n          -    The term \"route\" in the BGP context\
    \ refers to a set of\n               reachable destinations, and the associated\
    \ attributes for\n               the set.\n          -    The term \"route\" in\
    \ the OSPF context refers to the set of\n               reachable destinations,\
    \ and the cost and the type to\n               reach destinations.  This is to\
    \ keep the definitions\n               consistent in the document.\n     o   \
    \ The notion of exchanging reachability information between BGP\n          4 and\
    \ OSPF has been updated to handle variable length net mask\n          information.\n\
    \     o    The previous term INTER_AS_METRIC in BGP 3 has now been\n         \
    \ changed to MULTI_EXIT_DISC.\n     o    The default metric to be used for importing\
    \ BGP information\n          into the OSPF RD is now the LOCAL_PREF attribute,\
    \ instead of a\n          constant value.\n     o    Section 3 which requires\
    \ an ASBR to match the OSPF tag\n          corresponding to a route to the BGP\
    \ Identifier, can cause\n          potential loops if the AS has equal cost multipath\
    \ routing\n          amongst the ASBRs.  This scenario is outlined in the Appendix\n\
    \          below.  This is fixed in BGP4 by requiring the ASBR seeing\n      \
    \    equal cost multi-path routes to merge the PATHs through the\n          various\
    \ ASBRs into appropriate SETs.\n     o    BGP 4 requires that the BGP identifier\
    \ be an address assigned\n          to the BGP speaker.  This is dealt with in\
    \ section 3.\n     o    Section 5 on setting NEXT_HOP attributes and Forwarding\n\
    \          Address field has been updated to account for variable length\n   \
    \       net information.\n     o    This section, 6, has been added.\n"
- title: 7.  Security Considerations
  contents:
  - "7.  Security Considerations\n   Security issues are not discussed in this memo.\n"
- title: 8.  Acknowledgements
  contents:
  - "8.  Acknowledgements\n   We would like to thank Jeff Honig (Cornell University),\
    \ John Moy\n   (Cascade Communications Corp.), Tony Li (cisco Systems), Rob Coltun\n\
    \   (Consultant), Dennis Ferguson (ANS, Inc.), Phil Almquist\n   (Consultant),\
    \ Scott Bradner (Harvard University), and Joel Halpern\n   (Newbridge Networks\
    \ Inc.) for their help and suggestions in writing\n   this document.  Cengiz Aleattinoglu\
    \ (USC/ISI) and Steve Hotz\n   (USC/ISI) provided fresh insights into the packet\
    \ looping problem\n   described in the appendix.\n   We would also like to thank\
    \ the countless number of people from the\n   OSPF and BGP working groups who\
    \ have offered numerous suggestions and\n   comments on the different stages of\
    \ this document.\n   Thanks also to Bob Braden (ISI), whose suggestions on the\
    \ earlier\n   BGP-OSPF document, [RFC1403] were useful even for this one, and\
    \ have\n   been carried through.\n   We would also like to thank OARnet, where\
    \ one of the authors did most\n   of his work on this document, before moving\
    \ to USC to resurrect his\n   PhD.\n"
- title: 9.  Bibliography
  contents:
  - "9.  Bibliography\n   [RFC827]  Rosen, E., \"Exterior Gateway Protocol (EGP)\"\
    , RFC 827,\n             BBN, October 1982.\n   [RFC888]  Seamonson, L., and E.\
    \ Rosen, \"`STUB' Exterior Gateway\n             Protocol\", RFC 888, BBN, January\
    \ 1984.\n   [RFC1058] Hedrick, C, \"Routing Information Protocol\", RFC 1058,\n\
    \             Rutgers University, June 1988.\n   [RFC1122] Braden, R., Editor,\
    \ \"Requirements for Internet Hosts -\n             Communication Layers\", STD\
    \ 3, RFC 1122, USC/Information\n             Sciences Institute, October 1989.\n\
    \   [RFC1123] Braden, R., Editor, \"Requirements for Internet Hosts -\n      \
    \       Application and Support\", STD 3, RFC 1123,\n             USC/Information\
    \ Sciences Institute, October 1989.\n   [RFC1247] Moy, J., \"The OSPF Specification\
    \ Version 2\", RFC 1247,\n             Proteon, January 1991.\n   [RFC1403] Varadhan,\
    \ K., \"BGP OSPF Interaction\", RFC 1403,\n             OARnet, January 1993.\n\
    \   [RFC1519] Fuller, V., Li, T., Yu, J., and K. Varadhan, \"Supernetting:\n \
    \            an Address Assignment and Aggregation Strategy\", RFC 1519,\n   \
    \          BARRNet, cisco, Merit, OARnet, September 1993.\n   [RFC1583] Moy, J.,\
    \ \"The OSPF Specification Version 2\", RFC 1583,\n             (Obsoletes [RFC1247]),\
    \ Proteon, March 1994.\n   [RFC1654] Rekhter, Y., and T. Li, Editors, \"A Border\
    \ Gateway\n             Protocol 4 (BGP-4)\", RFC 1654, T.J. Watson Research Center,\n\
    \             IBM Corp., cisco Systems, July 1994.\n   [ROUTE-LEAKING] Almquist,\
    \ P., \"Ruminations on Route Leaking\",\n                   Work in Progress.\n\
    \   [NEXT-HOP] Almquist, P., \"Ruminations on the Next Hop,\n              Work\
    \ in Progress.\n   [IDRP] Hares, S., \"IDRP for IP\", Work in Progress.\n   [IS10747]\
    \ ISO/IEC IS 10747 - Information Processing Systems -\n             Telecommunications\
    \ and Information Exchange between\n             Systems - Protocol for Exchange\
    \ of Inter-domain Routeing\n             Information among Intermediate Systems\
    \ to Support\n             Forwarding of ISO 8473 PDUs, 1993.\n"
- title: 10.  Appendix
  contents:
  - "10.  Appendix\n   This is an example of how the two routing protocols, BGP/IDRP\
    \ and\n   OSPF, might both be consistent in their behaviour, and yet packets\n\
    \   from a source domain, S, to a destination in domain X might be stuck\n   in\
    \ a forwarding loop.\n                                       +--------+\n    \
    \                       X ----------| C1     |\n                           | \
    \          |Domain C|\n                           |           | C3  C2 |\n   \
    \                        |           +--------+\n                           B\
    \             /   \\\n                            \\           /     \\\n    \
    \                         \\         /      S\n                              \\\
    \       /      /\n                               \\     /      /\n           \
    \                  +--------+    /\n                             | A1  A2 |  \
    \ /\n                             |Domain A|  /\n                            \
    \ |     A3 |-/\n                             +--------+\n   Given the domains,\
    \ X, A, B, C and S, let domains A and C be running\n   OSPF, and ASBRs A3 and\
    \ C3 have equal cost multipath routes to A1, A2\n   and C1, C2 respectively. \
    \ The picture above shows the internal\n   structure of domains A and C only.\n\
    \   During steady state, the following are the route advertisements:\n     o \
    \   Domain B advertises to A path <B,X>\n     o    ASBR A3 in domain A advertises\
    \ path <A,B,X> to domain C, at\n          ASBR C2.\n     o    Domain C has two\
    \ equal cost paths to X: one direct <C,X>, and\n          another through A <C,A,B,X>\n\
    \     o    BR C3 in domain C advertises to A2 path <C,X>\n     o    Domain A has\
    \ two equal cost paths to X: <A,C,X> and <A,B,X>\n   Both C1 and C2 inject a route\
    \ to X within the domain C, and likewise\n   A1 and A2 inject a route to X within\
    \ the domain A.  Since A3 and C3\n   see equal cost routes to X through A1, A2\
    \ and C1, C2 respectively, a\n   stable loop through ASBRs <A3, A2, C3, C2, A3>\
    \ exists.\n   Section 4 specifies that A3 and C3 that advertise a PATH to\n  \
    \ destination X, MUST aggregate all the PATHs through A1 and A2, and C1\n   and\
    \ C2 respectively.  This has the consequence of constraining the\n   BGP/IDRP\
    \ speaker in either domain A or domain C from choosing\n   multiple routes to\
    \ destination X, and importing only one route into\n   OSPF.  This breaks the\
    \ multiple paths seen in one domain.  The exact\n   domain in which the multiple\
    \ paths are broken is nondeterministic.\n"
- title: 11.  Authors' Present Addresses
  contents:
  - "11.  Authors' Present Addresses\n   Kannan Varadhan\n   USC/Information Sciences\
    \ Institute\n   4676 Admiralty Way\n   Marina Del Rey, CA 90292-6695\n   Phone:\
    \ +1 310 822 1511 x 402\n   EMail: kannan@isi.edu\n   Susan Hares\n   Merit, Inc.\n\
    \   1071 Beal Avenue,\n   Ann Arbor, MI 48109\n   Phone: +1 313 936 2095\n   EMail:\
    \ skh@merit.edu\n   Yakov Rekhter\n   T.J. Watson Research Center, IBM Corporation\n\
    \   P.O. Box 704,\n   Yorktown Heights, NY 10598.\n   Phone: +1 914 784 7361\n\
    \   EMail: yakov@watson.ibm.com\n"
