- title: __initial_text__
  contents:
  - '                 The CCSO Nameserver (Ph) Architecture

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (1998).  All Rights Reserved.\n"
- title: Abstract
  contents:
  - "Abstract\n   The Ph Nameserver from the Computing and Communications Services\n\
    \   Office (CCSO), University of Illinois at Urbana-Champaign has for\n   some\
    \ time now been used by several organizations as their choice of\n   publicly\
    \ available database for information about people as well as\n   other things.\
    \  This document provides a formal definition of the\n   client-server protocol.\
    \  The Ph service as specified in this document\n   is built around an information\
    \ model, a client command language and\n   the server responses.\n"
- title: 1.  Overview
  contents:
  - '1.  Overview

    '
- title: 1.1.  Basic Information Model
  contents:
  - "1.1.  Basic Information Model\n   At its simplest the Ph database can be thought\
    \ of as a computer-\n   resident \"phone book\".  However, it can be used to collect\
    \ arbitrary\n   information about people, and in response to a query about an\
    \ object\n   named in the database, return information about that entity.  It\
    \ is\n   in short a nameserver for people and objects.  It was designed to\n \
    \  keep a relatively small amount of arbitrary information about a\n   relatively\
    \ large number of people or things, and provide access to\n   that information\
    \ over the Internet.  In order to structure the\n   information the manager of\
    \ the database has to decide which views to\n   present of the real-world objects\
    \ that are to be represented in the\n   database.  Each view is then composed\
    \ of a number of fields and their\n   values.  To support this concept Ph has\
    \ the notion of named\n   information, i.e., categorizing information into what\
    \ are called\n   fields and assigning descriptive names to those fields.\n   Even\
    \ if the database resides and is reachable from the Internet it is\n   local in\
    \ the meaning that no server is supposed to be able to refer a\n   client to another\
    \ server which might hold the wanted information.\n   However a server may contain\
    \ a list of other Nameservers which can be\n   used by clients to query other\
    \ Nameservers for information.\n"
- title: 1.1.1.  Fields
  contents:
  - "1.1.1.  Fields\n   A field descriptor is associated with each field and is used\
    \ to\n   describe the type and behavior of the field.  A field descriptor\n  \
    \ includes the fieldname, the maximum length of information the field\n   can\
    \ store before truncation, keywords describing the properties of\n   the field\
    \ as well as free text describing what kind of information\n   the field is supposed\
    \ to hold.\n   The keywords can be any of the following:\n   Always:   Forces\
    \ the field's contents to be always printed in\n             addition to whatever\
    \ fields specified by the query.\n   Any:      This field is always searched by\
    \ queries. To be most\n             use ful, a field marked as Any should also\
    \ have the Indexed\n             and Lookup keywords as well.\n   Change:   Can\
    \ be changed by the owner of the entry.\n   Default:  Printed if no return clause\
    \ is given in the query.\n   Encrypt:  Must be encrypted before transmission.\n\
    \   ForcePub: Viewable/searchable regardless of the content of the\n         \
    \    suppress field\n   Indexed:  Fields that are kept track of in the database's\
    \ index for\n             efficient lookups.  At least one indexed field must\
    \ be\n             present in each query.\n   LocalPub: May be viewed by anyone\
    \ in the \"local\" domain or address\n             space.  Fields with this keyword\
    \ are completely invisible\n             outside of the \"local\" domain.  They\
    \ will not be shown with\n             the fields command (section 3.3), and are\
    \ disallowed in\n             query commands or return clauses (section 3.8).\n\
    \   Lookup:   May be used in the selection part of a query.  A Field\n       \
    \      without this keyword may not be used to select entries.\n   NoMeta:   Wildcard\
    \ searches are disallowed.\n   NoPeople: No entry of type \"person\" may include\
    \ this field.\n   Private:  Field may be viewed by Heros (section 1.4) only.\n\
    \   Public:   May be viewed by anyone.  Fields not marked with this\n        \
    \     keyword may only be viewed by the entry's owner or a Hero.\n   Sacred: \
    \  Changes to the field are prohibited except via non-network\n             invocations\
    \ of the server, i.e., from a tty, file, or pipe.\n   Turn:     Users may turn\
    \ off visibility of a field to everyone except\n             themselves and Heros\
    \ by prefixing the field text with '*'.\n   Unique:   Any change to the field\
    \ will be rejected if the change\n             causes the modified field to match\
    \ the same field in any\n             other entry.\n"
- title: 1.1.2.  Character Sets
  contents:
  - "1.1.2.  Character Sets\n   Historically Ph has been restricted to only handle\
    \ printable\n   characters, that is characters with hexadecimal values between\
    \ 0x20\n   and 0x7f.  Lately with the spreading of 8-bit clean Operating Systems\n\
    \   there is no reason to keep this limitation.\n   This document therefore proposes\
    \ that ISO-8859-1 shall be regarded as\n   an alternative character set for Ph,\
    \ the default still being US-\n   ASCII.\n   Clients that utilize ISO-8859-1 should\
    \ request that the server return\n   ISO-8859-1 by using the \"set\"-command.\n\
    \   In the instance that values are stored using ISO-8859-1 and are to be\n  \
    \ shown to a client expecting US-ASCII, the characters with character\n   codes\
    \ outside of the US-ASCII range should be displayed in the\n   \"Quoted-Printable\"\
    \ content-transfer-encoding form defined in RFC-2045\n   [MIME].\n   1.2.  Standardization\
    \ issues\n   Each Nameserver manager is in essence free to name new fields to\
    \ suit\n   the special needs of his/her organization.  But in order to make the\n\
    \   directory service useful outside of the organization it is\n   recommended\
    \ that a core set of standard fields always should be\n   present.\n   Therefore\
    \ this document defines a couple of standard collections of\n   fields (Appendix\
    \ A).\n   Also note that the architecture makes no assumption about the search\n\
    \   and retrieval mechanisms used within individual servers.  Operators\n   are\
    \ thereby free to use any kind of dedicated databases, fast\n   indexing software\
    \ or even gateways to other directory services to\n   store and retrieve the information,\
    \ if desired.\n   Ph simply functions as a known front-end, offering a simple\
    \ data\n   model in addition to a well known port and simple query language.\n"
- title: 1.3.  Conventions Used in this Document
  contents:
  - "1.3.  Conventions Used in this Document\n   In examples, \"C:\" and \"S:\" indicate\
    \ lines sent by the client and\n   server respectively.\n"
- title: 1.4.  Heros
  contents:
  - "1.4.  Heros\n   For Ph a Hero is equivalent to a superuser or operator.  Being\
    \ in\n   Hero mode means that some or all artificial limits are removed; full\n\
    \   Heros may change any field in any entry in the database, as well as\n   view\
    \ as many entries as they wish.  Heros can also be limited to one\n   field of\
    \ one other entry.  Hero mode is used mostly for\n   administrative purposes,\
    \ delegation of group authority over selected\n   fields, and is controlled by\
    \ the acl field.\n"
- title: 2.  Basic Operation
  contents:
  - "2.  Basic Operation\n   Initially, the server host starts the Ph service by listening\
    \ on TCP\n   port 105.  When a client host wishes to make use of the service,\
    \ it\n   establishes a TCP connection to the server host.  The client and the\n\
    \   Ph server then exchange commands and responses (respectively) until\n   the\
    \ connection is closed or aborted.\n"
- title: 2.1.  Command syntax
  contents:
  - "2.1.  Command syntax\n   Commands in Ph consist of a keyword optionally followed\
    \ by zero or\n   more keywords or values, separated by spaces, tabs or newlines,\
    \ and\n   followed by a carriage return-linefeed (CRLF) pair. A more thorough\n\
    \   description using BNF is given in Appendix C.\n   Values containing spaces,\
    \ tabs or newlines must be enclosed in double\n   quotes ('\"').  In addition\
    \ the sequences \"\\n\", \"\\t\",\"\\\"\" and \"\\\\\" may\n   be used to mean\
    \ newline, tab, double quote and backslash,\n   respectively.\n   Keywords must\
    \ be given in lower case; case in the values of fields is\n   preserved, although\
    \ queries are not case-sensitive.\n"
- title: 2.2.  Response syntax
  contents:
  - "2.2.  Response syntax\n   Responses consist of a result code followed by additional\
    \ information\n   possibly separated by entry index and/or field name and are\n\
    \   terminated by a CRLF pair.\n      result code:[entry index:][field name:]text\n\
    \   Responses to some commands might be multi-lined.  In these cases each\n  \
    \ line in the response, except the last, has the appropriate result\n   code negated\
    \ (prefaced with \"-\").  The last line then starts with the\n   appropriate result\
    \ code without negation.  Each line must be\n   terminated by a CRLF pair.\n \
    \  If a particular command can apply to more than one entry, then the\n   multilined\
    \ response must be so organized that all information\n   pertaining to each entry\
    \ is returned on consecutive lines, and that\n   each of those lines must have\
    \ one and the same entry index directly\n   following the resultcode.  The first\
    \ entry index should be 1 and\n   incremented each time a new entry is referred\
    \ to.\n      C: query hedberg return email name title\n      S: 102:There were\
    \ 3 matches to your request.\n      S: -200:1:        email: canheg95@student.umu.se\n\
    \      S: -200:1:         name: Carl Johan Hedberg\n      S: -200:1:        title:\
    \ Student\n      S: -200:2:        email: parheg95@student.umu.se\n      S: -200:2:\
    \         name: Par Hedberg\n      S: -200:2:        title: Student\n      S:\
    \ -200:3:        email: Roland.Hedberg@umdac.umu.se\n      S: -200:3:        \
    \ name: Roland Hedberg\n      S: -200:3:        title: Boss of the Network group\n\
    \      S: 200:Ok\n   Commands that can apply to more than one field must have\
    \ the name of\n   the field to which the response applies directly following the\
    \ entry\n   index.\n   The text of the response will be either an error message\
    \ in human\n   readable format, or data from the Nameserver.  Whitespace (spaces\
    \ or\n   tabs) may appear anywhere in the response, but the field name and\n \
    \  text columns if present must each begin with a whitespace character.\n   Since\
    \ more than one specific piece of information may be manipulated\n   by a particular\
    \ command, it is possible for parts of a command to\n   succeed, while other parts\
    \ of the same command fail.  This situation\n   is handled as a single multi-line\
    \ response with the result code\n   changing as appropriate.\n   As for FTP, the\
    \ result codes are in the range 100-699 (or from -699\n   to -100 for multiline\
    \ responses), where the leading digit has the\n   following significance:\n  \
    \    1: In progress\n      2: Success\n      3: More information needed\n    \
    \  4: Temporary failure; it may be worthwhile to try again.\n      5: Permanent\
    \ failure\n      6: Phquery specific codes\n   Many commands generate more than\
    \ one line of response; every client\n   should be prepared to deal with such\
    \ continued responses.  Note that\n   a command is finished when and only when\
    \ the result code on a\n   response line (treated as a signed integer) is greater\
    \ than or equal\n   to 200.\n   Clients should assume that any numeric response,\
    \ within the above\n   mentioned ranges, are valid.  Also note that the server\
    \ is allowed to\n   send one or more lines with result codes between -199 - -100\
    \ (the\n   leading \"-\" indicates a continuation line) and 100 - 199, as status\n\
    \   information, before the actual results are transmitted.\n"
- title: 2.3.  Format of a search string
  contents:
  - "2.3.  Format of a search string\n   Matching is not sensitive to upper or lower\
    \ case letters and is\n   normally done on a word-by-word basis. That is, both\
    \ the query\n   expression and the entry information is broken up into words,\
    \ and\n   individual words are compared using exact matching.  If the order of\n\
    \   the words is important in a query, then the query string can be\n   surrounded\
    \ by '\"' (double quotes), whereby the complete search string\n   is matched against\
    \ the information in the Nameserver database.\n   Word delimiters are the following\
    \ characters: <SPACE>, <TAB>, <NEW-\n   LINE>, \",\", \";\" and \":\" .  These\
    \ characters are not indexed and\n   should not be part of the search string.\n\
    \   However, special symbols, called \"wildcard\" characters, can be used\n  \
    \ if the exact spelling is unknown.  The '*' (asterisk, 0x2A) is used\n   in place\
    \ of zero or more characters, '+' (plus, 0x2B) in place of one\n   or more unknown\
    \ characters, and '?' (question mark, 0x3F) can be used\n   when exactly one character\
    \ is unknown.  If the unknown character can\n   be one of a limited set this can\
    \ be specified by surrounding the set\n   with brackets, e.g., [ei] means that\
    \ in that place an 'e' or an 'i'\n   would match.\n"
- title: 3.  Commands
  contents:
  - '3.  Commands

    '
- title: 3.1.  status
  contents:
  - "3.1.  status\n   status\n   Prints the message of the day and the current status\
    \ of the\n   nameserver.\n      C: status\n      S: 100:Qi server $Revision: 1.6\
    \ $\n      S: 100:Ph passwords may be obtained at CCSO Accounting,\n      S: 100:1420\
    \ Digital Computer Lab, between 8:30 and 5 Monday-Friday.\n      S: 100:Be sure\
    \ to bring your U of I ID card.\n      S: 200:Database ready\n"
- title: 3.2.  siteinfo
  contents:
  - "3.2.  siteinfo\n   siteinfo\n   Returns information about the servers site. Possible\
    \ fields are\n   Version        Version information for the server.\n   Maildomain\
    \     The mail domain to use for phquery-type mail.\n   Mailfield      The field\
    \ containing the specific email address.\n   Mailbox        Mandatory entry that\
    \ names the field to use as\n                  maildrop.\n   Administrator  Guru\
    \ in charge of service.\n   Passwords      Person in charge of ordinary password/change\
    \ requests.\n   Authenticate   Authentication methods supported by the server,\n\
    \                  ordered in the site-preferred way.  Presently the\n       \
    \           following options are defined:\n                    1   attempt auto\
    \ login\n                    2   allowed to be interactive if needed\n       \
    \             4   use ANSI X9.9 challenge/response\n                    8   use\
    \ v4 Kerberos login\n                    16  use v5 Kerberos [KRB5] login\n  \
    \                  32  use GSS-API [GSS-API] login\n                    64  use\
    \ email login\n                    128 password encrypted response to challenge\n\
    \                    256 use clear-text password\n                    512 use\
    \ HMAC [HMAC] with SHA-1 of challenge string\n   Example\n        C: siteinfo\n\
    \        S: -200:1:version:3.1\n        S: -200:2:maildomain:umu.se\n        S:\
    \ -200:3:mailfield:alias\n        S: -200:4:mailbox:email\n        S: -200:5:administrator:roland.hedberg@umdac.umu.se\n\
    \        S: -200:6:passwords:roland.hedberg@umdac.umu.se\n        S: -200:7:authenticate:64:32:128\n\
    \        S: 200: Ok.\n   The mail fields in the siteinfo command direct how address\n\
    \   information stored in the Nameserver is to be used for delivering\n   mail.\n\
    \   The specific (username, host) pair to where a user's mail should be\n   sent\
    \ for final delivery is stored in the field named by {mailbox}.\n   Phquery and\
    \ like utilities will use this field.\n   To construct a useable email address\
    \ from Nameserver information, the\n   algorithm below is followed:\n        if\
    \ ({maildomain} is not null) then\n             address = (contents of {mailfield})@{maildomain}\n\
    \        else\n             address = (contents of {mailfield})\n   Some existing\
    \ client software will not format email addresses\n   correctly if the value of\
    \ {mailbox} is set to anything other than\n   \"email\" when {maildomain} is non-empty.\n\
    \   If {mailbox} is set to anything other than {email}, {maildomain} must\n  \
    \ be reported empty by the siteinfo command.  Also reformatting of each\n   record's\
    \ {mailfield} must be done by the server before reporting it\n   to the client.\n"
- title: 3.3.  fields
  contents:
  - "3.3.  fields\n   fields [field ...]\n   Without an argument, a list of all available\
    \ field descriptors should\n   be delivered.  Any space-separated argument(s)\
    \ restricts the list to\n   the named fields.  Fields marked with the \"LocalPub\"\
    \ keyword (section\n   1.1.1) should not be delivered outside of the local domain.\n\
    \   The output of the command consists of two lines describing each\n   field.\
    \  The first line defines the field in technical terms (max\n   length and field\
    \ attributes), while the second line is a brief\n   description of what the field\
    \ is intended to    hold.  The second\n   number of each response is the field\
    \ id number.\n      C: fields\n      S: -200:6:alias:max 32 Indexed Lookup Public\
    \ Default\n      S: -200:6:alias:Unique name for user.\n      S: -200:3:name:max\
    \ 64 Indexed Lookup Public Default\n      S: -200:3:name:Fullname\n      S: -200:2:email:max\
    \ 128 Lookup Public Default\n      S: -200:2:email:Account to receive electronic\
    \ mail.\n      S: -200:16:other:max 256 Lookup Public Default Change\n      S:\
    \ -200:16:other:Other info the user finds important.\n      S: -200:33:home_phone:max\
    \ 60 Lookup Public Change Turn\n      S: -200:33:home_phone:Home telephone number.\n\
    \      S: 200:Ok.\n"
- title: 3.4.  id
  contents:
  - "3.4.  id\n   id information\n   Enters the given information in the Nameserver's\
    \ log.  This command\n   is used by the Ph client to enter the user id of the\
    \ person running\n   it.\n"
- title: 3.5.  set
  contents:
  - "3.5.  set\n   set [option[=value] ...]\n   Sets the named option for this nameserver\
    \ session to a value.  The\n   default string \"on\" is used if no value is supplied.\
    \  Used without\n   arguments it return the settable options and their current\
    \ value.\n   Some common options are\n   echo      If on, echo the client's commands\
    \ back to the client.\n   limit     Changes that affect more than the specified\
    \ number of\n                entries results in an error.\n   charset   Return\
    \ responses to the client in the character set\n                specified.\n \
    \  verbose   If on, report interim progress messages to the client.\n   addonly\
    \   If on, change commands can only create fields in entries,\n              \
    \  not modify them.\n   nolog     If on, disable logging.\n   external  If on,\
    \ make Fields marked as \"LocalPub\" invisible.\n   Example\n      C: set verbose=off\n\
    \      S: 200:Done.\n      C: set\n      S: -200:echo:off\n      S: -200:limit:2\n\
    \      S: -200:charset:iso-8859-1\n      S: -200:verbose:off\n      S: -200:addonly:off\n\
    \      S: -200:nolog:off\n      S: -200:external:on\n      S: 200:Done.\n"
- title: 3.6.  login, logout, answer, clear, email, and xlogin
  contents:
  - '3.6.  login, logout, answer, clear, email, and xlogin

    '
- title: 3.6.1.  login
  contents:
  - "3.6.1.  login\n   login [alias]\n   The \"login\" command allows client users\
    \ to identify themselves to the\n   Nameserver. More specifically it identifies\
    \ a client user with a\n   particular entry in the Nameserver and allows them\
    \ to change fields\n   in that entry and possibly other entries.  It is also necessary\
    \ to be\n   logged in to the Nameserver to view certain sensitive fields in the\n\
    \   user's own entry.\n   In order to use the \"login\" command the client must\
    \ prompt the user\n   for their ph alias and password.  The client is then responsible\
    \ for\n   (optionally) encrypting the password and sending it to the server.\n\
    \   This will be covered in sections 3.6.3 (answer) and 3.6.4 (clear).\n     \
    \ C: login foo\n      S: 301:,:P\"_Y$ONU%\"SDUQ6&^`ZZ'?*#Y`A_.Z/A>?@SH>*-\n"
- title: 3.6.2.  logout
  contents:
  - "3.6.2.  logout\n   logout\n   The \"logout\" command allows a user who is logged\
    \ in to the Nameserver\n   to logout.\n      C: logout S: 200:Ok.\n"
- title: 3.6.3.  answer
  contents:
  - "3.6.3.  answer\n   answer encrypted-response\n   In response to the login command,\
    \ the Nameserver responds with a\n   random challenge string.  The Nameserver\
    \ client encrypts the\n   challenge with the password supplied by the user, uuencodes\
    \ the\n   result into US-ASCII, and returns the printable result in the\n   \"\
    answer\" command:\n   C: login ppomes\n   S: 301:.%$&.D^67$*1?<.2S@DR:Z@M*)AV-<:4QM>#R>M*HT\n\
    \   C: answer M5K'F:NI(a?M?O2+-a9`48RA#ZF=L9)G)/XRS7Q^0>0@-R7X$WGb`50B]\n   S:\
    \ 200:ppomes:Hi how are you?\n   The encryption algorithm is based on a three\
    \ rotor Enigma engine.\n   There are known attacks on the security of this approach.\n\
    \   The answer command is also used to return method-specific responses\n   to\
    \ the xlogin command (section 3.6.6).\n"
- title: 3.6.4.  clear
  contents:
  - "3.6.4.  clear\n   clear cleartext-password\n   The \"clear\" command can be used\
    \ instead of the \"answer\" command to\n   complete a login sequence.  It's argument\
    \ is the user's cleartext\n   password.  This command is supplied only to support\
    \ those clients\n   that have not implemented one of the encryption engines used\
    \ by the\n   \"answer\" command.  It's use is strongly discouraged.\n      C:\
    \ login ppomes\n      S: 301:E=@Y&VW^_9YVI;D5.[EB0:B)9Z#_&X$:2)/eL$VJC87\n   \
    \   C: clear MySecret\n      S: 200:ppomes:Hi how are you?\n"
- title: 3.6.5.  email
  contents:
  - "3.6.5.  email\n   email local-userid\n   The \"email\" command can also be used\
    \ instead of the \"answer\" command\n   to complete a login sequence.  The value\
    \ of local-userid is the\n   user's login name on the local machine.  If all of\
    \ the following\n   conditions are true, then the email command will be accepted\
    \ by the\n   server:\n   1) The connection to the server originates on port 1023\
    \ or less on\n      the client.  Note: This is a system port.  Port 1023 is not\n\
    \      allocated to this use.\n   2) The canonical name of the client's host matches\
    \ the right-hand\n      side of the email address of the requested alias specified\
    \ in the\n      \"login\" command.\n   3) The \"local-userid\" matches the left-hand\
    \ side of the email\n      address belonging to the requested alias.\n   This\
    \ is a weak but convenient form of authentication.  Depending on\n   the information\
    \ users are allowed to change about themselves and the\n   threat environment\
    \ the server operates in, this method may be\n   appropriate.  Servers should\
    \ take care to avoid DNS spoofing.\n"
- title: 3.6.6.  xlogin
  contents:
  - "3.6.6.  xlogin\n   xlogin option alias\n   Extended login command for GSS, Kerberos\
    \ v4 and v5, ANSI X9.9 token\n   devices (e.g., SNK/4), etc. The option is one\
    \ of the values returned\n   in the Authenticate field of the \"siteinfo\" command\
    \ (section 3.2).\n   Alias is the user's alias.\n      C: xlogin 16 ppomes\n \
    \     S: 301:DoKrbLogin started; send Kerberos mutual authenticator.\n      C:\
    \ answer MJa8QO1cJHYz2IdWyg7uhAnixVqgCZQBWr64ciXYku1ktdu....\n      S: 200:ppomes:Hi\
    \ how are you?\n      C: xlogin 4 ppomes\n      S: 302:SNK Challenge \"024142\"\
    :\n      C: answer 82344338\n      S: 200:ppomes:Hi how are you?\n   The answer\
    \ command returns the requested quantity, Kerberos\n   authenticator, X9.9 device\
    \ response, etc.  Binary quantities are\n   first uuencoded into US-ASCII.\n"
- title: 3.7.  add
  contents:
  - "3.7.  add\n   add field=value...\n   This command is used to add new entries\
    \ to the database.  You must be\n   logged in and have full Hero privileges (section\
    \ 1.4) to use \"add\".\n      C: add name=\"doe john\" id=\"123456789\" alias=\"\
    j-doe\"\n      S: 200:Ok.\n"
- title: 3.8.  query
  contents:
  - "3.8.  query\n   query [field=]value [field=value] . . . [return field1 [field2]]\n\
    \   If no field is specified together with a value then the field is\n   assumed\
    \ to be \"name\" and/or \"nickname\".  When more than one field-\n   value specification\
    \ are given in a query, entries matching all\n   specifications are returned (implicit\
    \ AND).\n   It is possible to define which fields should be returned by adding\
    \ a\n   \"return\" clause.  If no return clause is defined the Ph server will\n\
    \   return a default list of fields.  Typical default fields are \"alias\",\n\
    \   \"name\", \"title\", \"email\", \"phone\", \"address\", \"department\", \"\
    www\",\n   and \"other\".  A return clause consists of the word \"return\" followed\n\
    \   by a list of fields or the word \"all\".  If the word \"all\" is used\n  \
    \ then all viewable fields will be returned.\n      C: query name=doe name=john\n\
    \      S: 102:There was 1 match to your request.\n      S: -200:1:           \
    \ alias: j-doe\n      S: -200:1:             name: doe john\n      S: 200:Ok.\n"
- title: 3.9.  delete
  contents:
  - "3.9.  delete\n   delete [field=]value...\n   This command is used to delete entire\
    \ entries from the database.  You\n   must be logged in and have full Hero (section\
    \ 1.4) privileges to use\n   \"delete\".\n   The arguments to the \"delete\" command\
    \ are the same as the selection\n   part of a \"query\" command.  \"Delete\" finds\
    \ all the entries that match\n   the argument(s) and deletes them.\n   The \"\
    delete\" command obeys the Nameserver \"limit\" option, which can\n   be used\
    \ to prevent deletion of more entries than intended.\n      C: delete name=\"\
    doe john\" id=\"123456789\" alias=\"j-doe\"\n      S: 200:1 entries deleted.\n"
- title: 3.10.  change
  contents:
  - "3.10.  change\n   change [field=]value    [make|force] field=\"value\"...\n \
    \  This command is used to change one or more fields in one or more\n   entries\
    \ to the values specified.  The \"change\" command consists of\n   two clauses,\
    \ the \"change\" clause and the \"make\" or \"force\" clause.\n   The \"change\"\
    \ clause determines which entries will be affected by the\n   command.  It uses\
    \ the same arguments as the selection clause of a\n   \"query\" command.  The\
    \ \"make\" or \"force\" clause specifies which\n   field(s) will be changed and\
    \ the new value(s) of the specified\n   field(s).  The \"force\" clause is only\
    \ used to make non-encrypted\n   changes to fields marked \"Encrypt\".\n   You\
    \ must be logged in to use \"change\".\n   The \"change\" command obeys the Nameserver\
    \ \"limit\" option, which can\n   be used to prevent changing the field contents\
    \ of more entries than\n   intended.\n      C: change alias=j-doe force password=NewSecret\n\
    \      S: 200:1 entry changed.\n      C: set limit=500\n      S: 200:Done.\n \
    \     C: change fax=\"(619) 555-1212\" make fax=\"(760) 555-1212\"\n      S: 200:\
    \ 113 entries changed.\n"
- title: 3.11.  help
  contents:
  - "3.11.  help\n   help    [{native|client} [topic ...]]\n   Prints help on the\
    \ Nameserver or on specific clients.  If client is\n   specified, it should be\
    \ a valid Nameserver client identifier, such as\n   \"ph\".  The client-specific\
    \ help will first be searched for topic, and\n   then the native help will be\
    \ searched.  If topic is omitted, a list\n   of all available help texts will\
    \ be returned.  If \"native\" or client\n   are also omitted, a list of clients\
    \ will be returned.\n"
- title: 'C: help native 101'
  contents:
  - 'C: help native 101

    '
- title: '-200:1:101:'
  contents:
  - '-200:1:101:

    '
- title: '-200:1: The Nameserver echo option is set.  The text of this response is'
  contents:
  - '-200:1: The Nameserver echo option is set.  The text of this response is

    '
- title: '-200:1: the command you just gave, which has not (yet) been executed.'
  contents:
  - '-200:1: the command you just gave, which has not (yet) been executed.

    '
- title: 200:Ok.
  contents:
  - '200:Ok.

    '
- title: 3.12.  quit/exit/stop
  contents:
  - "3.12.  quit/exit/stop\n   quit\n   Terminates the session with the Nameserver\
    \ and causes the client to\n   exit.\n      C: quit\n      S: 200:Bye!\n"
- title: 4.  Security
  contents:
  - '4.  Security

    '
- title: 4.1.  Transport Layer
  contents:
  - "4.1.  Transport Layer\n   In the absence of encryption between client and server,\
    \ all\n   Nameserver traffic is unsecure.  Kerberos v4, v5, and the GSS-API all\n\
    \   provide encryption mechanisms, however the Nameserver protocol does\n   not\
    \ support the means to negotiate encryption between client and\n   server.  This\
    \ implies that all traffic can be seen by other machines\n   having access to\
    \ the network linking the client and server.\n   Furthermore clear-text traffic\
    \ is subject to modification in transit\n   between client and server.  Possible\
    \ ways of augmenting this would be\n   to use something like TLS [TLS] or IPSec\
    \ [IPSEC].\n"
- title: 4.2.  Server Authentication
  contents:
  - "4.2.  Server Authentication\n   Unless one of the mutual authentication mechanisms\
    \ is used, e.g.,\n   Kerberos 4/5 or GSS-API, there is no way to prove the identity\
    \ of a\n   server.  Further, there is no mechanism to prove a given server is\n\
    \   authoritative for a set of information.\n"
- title: 4.3.  Secure User Authentication
  contents:
  - "4.3.  Secure User Authentication\n   The Ph protocol allows the negotiation of\
    \ several authentication\n   protocols between client and server, some weak and\
    \ some strong.  It\n   does not prohibit the use of cleartext passwords, something\
    \ which\n   should be depreciated, but is useful when dealing with some clients.\n"
- title: 4.4.  Privacy and Access Lists
  contents:
  - "4.4.  Privacy and Access Lists\n   Directory services like the CCSO white pages\
    \ server that contain\n   information on persons have to consider privacy issues.\
    \  This paper\n   describes one way of partitioning specific attributes from unwanted\n\
    \   access by designating them visible only to the \"local\" community,\n   visible\
    \ only to the person connected with the information, or visible\n   only to the\
    \ database administrator.\n"
- title: 4.5.  References
  contents:
  - "4.5.  References\n   [GSS-API] Linn, J., \"Generic Security Service Application\
    \ Program\n             Interface, Version 2\", RFC 2078, January 1997.\n   [HMAC]\
    \    Krawczyk, H., Bellare, M., and R. Canetti, \"HMAC: Keyed-\n             Hashing\
    \ for Message Authentication\", RFC 2104, February\n             1997.\n   [IPSEC]\
    \   Atkinson, R., \"Security Architecture for the Internet\n             Protocol\"\
    , RFC 1825, August 1995.\n   [KRB5]    Kohl, J., and C. Neuman, \"The Kerberos\
    \ Network\n             Authentication Service (V5)\", RFC 1510, September 1993.\n\
    \   [TLS]     Dierks, T., and C. Allen, \"The TLS Protocol,\n             Version\
    \ 1.0\", Work in Progress.\n   [MIME]    Freed, N., and N. Borenstein, \"Multipurpose\
    \ Internet Mail\n             Extensions, (MIME) Part One: Format of Internet\
    \ Message\n             Bodies\", RFC 2045, November 1996.\n"
- title: 5.  Miscellaneous
  contents:
  - '5.  Miscellaneous

    '
- title: 5.1.  Authors' Addresses
  contents:
  - "5.1.  Authors' Addresses\n   Roland Hedberg\n   Umdac\n   Umea University\n \
    \  901 87 Umea\n   Sweden\n   EMail: Roland.Hedberg@umdac.umu.se\n   Paul Pomes\n\
    \   Qualcomm Inc\n   6455 Lusk Blvd\n   San Diego, CA\n   USA\n   EMail: ppomes@qualcomm.com\n"
- title: Appendix A
  contents:
  - "Appendix A\n   Default fields and suggested lengths connected to different object\n\
    \   types.\n   All entries:  Information common to all entries\n   type      \
    \        64\n   name              256\n   address           128\n   proxy    \
    \         32\n   password          32\n   type=phone:   Information found in a\
    \ phonebook\n   phone             64\n   fax               64\n   type=person:\
    \  Information about a human being\n   alias             32\n   forename     \
    \     64\n   surname           64\n   group             32\n   email         \
    \    128\n   public_key        4096\n   nickname          128\n   www        \
    \       256\n   acl               128\n   type=staff:   Information about an employee\n\
    \   empno             16\n   department        64\n   supervisor        64\n \
    \  secretary         64\n   office_location   128\n   office_address    128\n\
    \   office_phone      64\n   title             64\n   pager             64\n \
    \  hours             128\n   type=unit:   Information about an organizational\
    \ unit\n   email             128\n   www               256\n   public_key    \
    \    4096\n"
- title: Appendix B
  contents:
  - "Appendix B\n   Result codes\n   100 In progress (general).\n   101 Echo of current\
    \ command.\n   102 Count of number of matches to query.\n   103 No hostname found\
    \ for IP address.\n   200 Success (general).\n   201 Database ready, but read-only.\n\
    \   300 More information (general).\n   301 Encrypt this string.\n   302 Print\
    \ this prompt.\n   400 Temporary error (general).\n   401 Internal database error.\n\
    \   402 Lock not obtained within timeout period.\n   403 Login would have been\
    \ OK, but database read-only\n   475 Database unavailable; try later.\n   500\
    \ Permanent error (general).\n   501 No matches to query.\n   502 Too many matches\
    \ to query.\n   503 Not authorized for requested information.\n   504 Not authorized\
    \ for requested search criteria.\n   505 Not authorized to change requested field.\n\
    \   506 Request refused; must be logged in to execute.\n   507 Field does not\
    \ exist.\n   508 Field is not present in requested entry.\n   509 Alias already\
    \ in use.\n   510 Not authorized to change this entry.\n   511 Not authorized\
    \ to add entries.\n   512 Illegal value.\n   513 Unknown option.\n   514 Unknown\
    \ command.\n   515 No indexed field in query.\n   516 No authorization for request.\n\
    \   517 Operation failed because database is read-only.\n   518 To many entries\
    \ selected by change command.\n   520 CPU usage limit exceeded.\n   521 Change\
    \ command would have overridden existing field,\n   and the \"addonly\" option\
    \ is on.\n   522 Attempt to view \"Encrypted\" field.\n   523 Expecting \"answer\"\
    \ or \"clear\".\n   524 Names of help topics may not contain \"/\".\n   525 Email\
    \ authentication failed\n   526 Host name address not found in DNS\n   527 Reverse\
    \ DNS lookup does not match forward DNS lookup\n   528 General Kerberos database\
    \ error.\n   529 Selected authentication method not available\n   590 Remote queries\
    \ not allowed.\n   598 Command unknown.\n   599 Syntax error.\n   600 Ambiguous\
    \ or multiple match\n"
- title: Appendix  C
  contents:
  - "Appendix  C\n   Description of the client command language using the augmented\n\
    \   Backus-Naur Form (RFC822).\n   response = code [index] [field] text CRLF\n\
    \   code     = [-] LDIG 2DIGIT \":\"\n   index    = number \":\"\n   field   \
    \ = 1*SPACE attribute \":\" 1*SPACE\n   text     = 1*( CHAR / LWSP-char )\n  \
    \ command     = ph-command CRLF\n   ph-command  =  \"status\" / a-command / oa-command\n\
    \   ph-command  =/ av-command / answer-command / query-command\n   ph-command\
    \  =/ delete-command / change-command / \"help\" / quit-command\n   a-command\
    \       = (\"siteinfo\"/\"fields\"/\"id\"/\"login\"/\"help\"/\"email\"/\n    \
    \          \"clear\") [attribute]\n   oa-command      = (\"xlogin\") number attribute\n\
    \   av-command      = (\"set\"/\"add\"/\"make\") 1*attribute-value\n   answer-command\
    \  = (\"answer\") 1*printable\n   query-command   = (\"query\"/\"ph\") 1*selection\
    \ [\"return\" 1*attribute]\n   quit-command    = \"quit\" / \"exit\" / \"stop\"\
    \n   change-command  = \"change\" 1*selection make 1*attribute-value\n   delete-command\
    \  = \"delete\" selection\n   selection       = value / attribute-value\n   attribute-value\
    \ = attribute \"=\" value\n   value           = 1*(cstring / quoted-string / set)\n\
    \   cstring         = 1*( ALPHA / DIGIT / S_SPEC / set / quoted-pair )\n   attribute\
    \       = 1*( ALPHA / DIGIT / \"_\" / \"-\" )\n   number          = 1*(DIGIT)\n\
    \   quoted-string   = <\"> 1*(qtext/quoted-pair) <\">\n   quoted-pair  =  \"\\\
    \" CHAR\n   qtext        = 1*( CHAR / CR / SPEC1 / DELIMIT1 / DELIMIT2 / LWS )\n\
    \   set          = '[' 1*(ALPHA/DIGIT) ']'\n   LWSP-char    = SPACE / HTAB\n \
    \  LWS          = 1*([CRLF] (LWSP-char))\n   CRLF         = CR LF\n   S_SPEC \
    \      = '*'/'+'/'?'\n   SPEC1        = \"=\" / \"*\" / \"?\" / \"+\" / \"[\"\
    \ / \"]\"\n   SPEC2        = \"\\\" / \"\"\"\n   DELIMIT1     = SPACE / HTAB /\
    \ LF\n   DELIMIT2     = \",\" / \";\" / \":\"\n   PRINTABLE    = %d32..%d126\n\
    \   CTL          = %d0..%d31 / %d127..%d160\n   ALPHA        = %d65..%d90 / %d97..%d122\n\
    \   DIGIT        = %d48..%d57\n   LDIG         = %d49..%d54\n   SPACE        =\
    \ %d32\n   SEP          = (CR LF) / LF\n   CR           = %d13\n   LF        \
    \   = %d10\n   HTAB         = %d9\n   CHAR         = %d33..%d126 / %d160..%d255\n\
    \   OTHER        = \"(\" / \")\" / \"-\" / \".\" / \"/\"\n          \"@\" / \"\
    $\" / \"_\" / \"!\" / \"~\" /\n          \"'\" / \"#\" / \"&\" / \"<\" / \">\"\
    \ /\n          \"^\" / \"`\" / \"{\" / \"|\" / \"}\"\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (1998).  All\
    \ Rights Reserved.\n   This document and translations of it may be copied and\
    \ furnished to\n   others, and derivative works that comment on or otherwise explain\
    \ it\n   or assist in its implementation may be prepared, copied, published\n\
    \   and distributed, in whole or in part, without restriction of any\n   kind,\
    \ provided that the above copyright notice and this paragraph are\n   included\
    \ on all such copies and derivative works.  However, this\n   document itself\
    \ may not be modified in any way, such as by removing\n   the copyright notice\
    \ or references to the Internet Society or other\n   Internet organizations, except\
    \ as needed for the purpose of\n   developing Internet standards in which case\
    \ the procedures for\n   copyrights defined in the Internet Standards process\
    \ must be\n   followed, or as required to translate it into languages other than\n\
    \   English.\n   The limited permissions granted above are perpetual and will\
    \ not be\n   revoked by the Internet Society or its successors or assigns.\n \
    \  This document and the information contained herein is provided on an\n   \"\
    AS IS\" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING\n   TASK FORCE\
    \ DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING\n   BUT NOT LIMITED\
    \ TO ANY WARRANTY THAT THE USE OF THE INFORMATION\n   HEREIN WILL NOT INFRINGE\
    \ ANY RIGHTS OR ANY IMPLIED WARRANTIES OF\n   MERCHANTABILITY OR FITNESS FOR A\
    \ PARTICULAR PURPOSE.\n"
