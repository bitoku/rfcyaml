- title: __initial_text__
  contents:
  - '            SMTP and MIME Extensions for Content Conversion

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2005).\n"
- title: Abstract
  contents:
  - "Abstract\n   A message originator sometimes sends content in a form the recipient\n\
    \   cannot process or would prefer not to process a form of lower quality\n  \
    \ than is preferred.  Such content needs to be converted to an\n   acceptable\
    \ form, with the same information or constrained information\n   (e.g., changing\
    \ from color to black and white).  In a store-and-\n   forward environment, it\
    \ may be convenient to have this conversion\n   performed by an intermediary.\
    \  This specification integrates two\n   ESMTP extensions and three MIME content\
    \ header fields, which defines\n   a cooperative service that permits authorized,\
    \ accountable content\n   form conversion by intermediaries.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  2\n       1.1. Background. . . . . . . . . . . . . . . . . . .\
    \ . . . . .  3\n       1.2. Overview. . . . . . . . . . . . . . . . . . . . .\
    \ . . . .  3\n       1.3. Notational Conventions. . . . . . . . . . . . . . .\
    \ . . .  5\n   2.  Applicability. . . . . . . . . . . . . . . . . . . . . . .\
    \ . .  5\n   3.  Service Specification. . . . . . . . . . . . . . . . . . . .\
    \ .  5\n       3.1. Sending Permission. . . . . . . . . . . . . . . . . . . .\
    \  9\n       3.2. Returning Capabilities. . . . . . . . . . . . . . . . . . 10\n\
    \       3.3. Next-Hop Non-Support of Service . . . . . . . . . . . . . 12\n  \
    \ 4.  Content Conversion Permission SMTP Extension . . . . . . . . . 12\n    \
    \   4.1. Content Conversion Permission Service Extension\n            Definition.\
    \ . . . . . . . . . . . . . . . . . . . . . . . 12\n       4.2. CONPERM Parameter\
    \ to Mail-From. . . . . . . . . . . . . . 13\n       4.3. Syntax. . . . . . .\
    \ . . . . . . . . . . . . . . . . . . . 13\n   5.  Content Negotiation SMTP Extension\
    \ . . . . . . . . . . . . . . 13\n       5.1. Content Negotiation Service Extension\
    \ Definition. . . . . 13\n       5.2. CONNEG Parameter to RCPT-TO . . . . . .\
    \ . . . . . . . . . 14\n       5.3. Syntax. . . . . . . . . . . . . . . . . .\
    \ . . . . . . . . 15\n   6.  MIME Content-Features Header Field . . . . . . .\
    \ . . . . . . . 16\n   7.  MIME Content-Convert Header Field. . . . . . . . .\
    \ . . . . . . 16\n   8.  MIME Content-Previous Header Field . . . . . . . . .\
    \ . . . . . 16\n   9.  Examples . . . . . . . . . . . . . . . . . . . . . . .\
    \ . . . . 17\n       9.1. CONPERM Negotiation . . . . . . . . . . . . . . . .\
    \ . . . 17\n       9.2. Example CONNEG Negotiation. . . . . . . . . . . . . .\
    \ . . 18\n       9.3. Content-Previous. . . . . . . . . . . . . . . . . . . .\
    \ . 19\n   10. Security Considerations. . . . . . . . . . . . . . . . . . . .\
    \ 19\n   11. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 20\n\
    \   12. References . . . . . . . . . . . . . . . . . . . . . . . . . . 20\n  \
    \ Appendix A. CONNEG with Direct SMTP. . . . . . . . . . . . . . . . 22\n   Appendix\
    \ B. USING Combinations of the Extensions . . . . . . . . . 23\n   Appendix C.\
    \ MIME Content-Type Registrations. . . . . . . . . . . . 24\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Internet specifications typically define common capabilities\
    \ for a\n   particular service that are supported by all participants.  This\n\
    \   permits the sending of basic data without knowing which additional\n   capabilities\
    \ individual recipients support.  However, knowing those\n   capabilities permits\
    \ the sending of additional types of data and data\n   of enhanced richness. \
    \ Otherwise, a message originator will send\n   content in a form the recipient\
    \ cannot process or will send multiple\n   forms of data.  This specification\
    \ extends the work of [CONMSG],\n   which permits a recipient to solicit alternative\
    \ content forms from\n   the originator.  The current specification enables MIME\
    \ content\n   conversion by intermediaries, on behalf of a message originator\
    \ and a\n   message recipient.\n"
- title: 1.1.  Background
  contents:
  - "1.1.  Background\n   MIME enables the distinguishing and labeling of different\
    \ types of\n   content [IMF, MEDTYP].  However, an email originator cannot know\n\
    \   whether a recipient is able to support (interpret) a particular data\n   type.\
    \  To permit the basic use of MIME, a minimum set of data types\n   is specified\
    \ as its support base.  How will an originator know\n   whether a recipient can\
    \ support any other data types?\n   A mechanism for describing MIME types is specified\
    \ in [FEAT].\n   [CONMSG] specifies a mechanism that permits an originator to\
    \ query a\n   recipient about the types it supports using email messages for the\n\
    \   control exchange.  This permits a recipient to propagate information\n   about\
    \ its capabilities back to an originator.  For the control\n   exchange, using\
    \ end-to-end email messages introduces considerable\n   latency and some unreliability.\n\
    \   An alternative approach is for an originator to use the \"best\" form\n  \
    \ of data that it can, and to include the same types of permitted\n   representation\
    \ information used in [CONMSG].  Hopefully, the\n   recipient, or an intermediary,\
    \ can translate this into a form\n   supported by a limited recipient.  This specification\
    \ defines such a\n   mechanism.  It defines a means of matching message content\
    \ form to\n   the capabilities of a recipient device or system, by using MIME\n\
    \   content descriptors and the optional use of an SMTP-based negotiation\n  \
    \ mechanism [ESMTP1, ESMTP2].\n"
- title: 1.2.  Overview
  contents:
  - "1.2.  Overview\n   An originator describes desirable content forms in MIME content\n\
    \   descriptors.  It may give \"permission\", to any intermediary or the\n   recipient,\
    \ to convert the content to one of those forms.  Separately,\n   an SMTP server\
    \ may report the target's content capabilities back to\n   the SMTP client.  The\
    \ client is then able to convert the message\n   content into a form that is both\
    \ supported by the target system and\n   acceptable to the originator.\n   A conversion\
    \ service needs to balance between directions provided by\n   the originator,\
    \ directions provided on behalf of the recipient, and\n   capabilities of the\
    \ intermediary that performs the conversions.  This\n   is complicated by the\
    \ need to determine whether the directions are\n   advisory or whether they are\
    \ intended to be requirements.\n   Conversions specified as advisory are performed\
    \ if possible, but they\n   do not alter message delivery.  In contrast, conversion\n\
    \   specifications that are treated as a requirement will prohibit\n   delivery\
    \ if the recipient will not be able to process the content.\n   These possibilities\
    \ interact to form different processing scenarios,\n   in the event that the intermediary\
    \ cannot satisfy the desires of both\n   the originator and the recipient:\n \
    \                Table 1: FAILURE HANDLING\n            \\  RECEIVER|        \
    \  |          |\n             +-------+ |  Advise  | Require  |\n            ORIGINATOR\\\
    |          |          |\n            -----------+----------+----------+\n    \
    \                   | Deliver  | Deliver  |\n            Advise     | original\
    \ | original |\n                       | content  | content  |\n            -----------+----------+----------+\n\
    \                       | Return   | Return   |\n            Require    | w/out\
    \    | w/out    |\n                       | delivery | delivery |\n          \
    \  -----------+----------+----------+\n   This table reflects a policy that determines\
    \ failure handling solely\n   based on the direction provided by the originator.\
    \  Thus, information\n   on behalf of the recipient is used to guide the details\
    \ of\n   conversion, but not delivery of the message.\n   This is intended to\
    \ continue the existing email practice of\n   delivering content that a recipient\
    \ might not be able to process.\n   Clearly, the above table could be modified\
    \ to reflect a different\n   policy.  However, that would limit backward compatibility\
    \ experienced\n   by users.\n   This specification provides mechanisms to support\
    \ a controlled,\n   transit-time mail content conversion service, through a series\
    \ of\n   mechanisms.  These include:\n      *  an optional ESMTP hop-by-hop service\
    \ that uses the CONPERM SMTP\n         service extensions, issued by the originator,\n\
    \      *  an optional ESMTP hop-by-hop service that uses the CONNEG SMTP\n   \
    \      service extensions, issued on behalf of the recipient, and\n      *  three\
    \ MIME Content header fields (Content-Convert, Content-\n         Previous and\
    \ *  Content-Features) that specify appropriate\n         content header fields\
    \ and record conversions that have been\n         performed.\n              Figure\
    \ 1:  EXAMPLE RELAY ENVIRONMENT\n         +------------+                     \
    \ +-----------+\n         | Originator |                      | Recipient |\n\
    \         +------------+                      +-----------+\n              ||Posting\
    \                   Delivering/\\\n              \\/                         \
    \           ||\n          +--------+    +-----------------+    +--------+\n  \
    \        |  SMTP  |    |    SMTP Relay   |    |  SMTP  |\n          | Client |--->|\
    \ Server | Client |--->| Server |\n          +--------+    +--------+--------+\
    \    +--------+\n"
- title: 1.3.  Notational Conventions
  contents:
  - "1.3.  Notational Conventions\n   In examples, \"C:\" and \"S:\" indicate lines\
    \ sent by the client and\n   server respectively.\n   The key words \"MUST\",\
    \ \"MUST NOT\", \"SHOULD\", \"SHOULD NOT\" and \"MAY\" in\n   this document are\
    \ to be interpreted as defined in \"Key words for use\n   in RFCs to Indicate\
    \ Requirement Levels\" [KEYWORDS].\n"
- title: 2.  Applicability
  contents:
  - "2.  Applicability\n   This specification defines a cooperative mechanism that\
    \ facilitates\n   early transformation of content.  The mechanism can be used\
    \ to save\n   bandwidth and to permit rendering on recipient devices that have\n\
    \   limited capabilities.  In the first case, the assumption is that\n   conversion\
    \ will produce smaller content.  In the latter case, the\n   assumption is that\
    \ the recipient device can render content in a form\n   derived from the original,\
    \ but cannot render the original form.\n   The mechanism can impose significant\
    \ resource requirements on\n   intermediaries performing conversions.  Further,\
    \ the intermediary\n   accepts responsibility for conversion prior to knowing\
    \ whether it can\n   perform the conversion.  Also note that conversion is not\
    \ possible\n   for content that has been digitally signed or encrypted, unless\
    \ the\n   converting intermediary can decode and re-code the content.\n"
- title: 3.  Service Specification
  contents:
  - "3.  Service Specification\n   This service integrates two ESMTP extensions and\
    \ three MIME content\n   header fields, in order to permit authorized, accountable\
    \ content\n   form conversion by intermediaries.  Intermediaries are ESMTP hosts\n\
    \   (clients and servers) along the transmission path between an\n   originator\
    \ and a recipient.\n   An originator specifies preferred content-types through\
    \ the Content-\n   Convert MIME content header field.  The content header fields\
    \ occur\n   in each MIME body-part to which they apply.  That is, each MIME\n\
    \   body-part contains its own record of conversion guidance and history.\n  \
    \ The originator's preferences are raised to the level of requirement\n   through\
    \ the ESMTP CONPERM service extension.  The CONPERM mechanism\n   is only needed\
    \ when an originator requires that conversion\n   limitations be enforced by the\
    \ mail transfer service.  If an\n   acceptable content type cannot be delivered,\
    \ then no delivery is to\n   take place.\n   Target system capabilities are communicated\
    \ in SMTP sessions through\n   the ESMTP CONNEG service extension.  This information\
    \ is used to\n   restrict the range of conversions that may be performed, but\
    \ does not\n   affect delivery.\n   When CONPERM is used, conversions are performed\
    \ by the first ESMTP\n   host that can obtain both the originator's permission\
    \ and information\n   about the capabilities supported by the recipient.  If a\
    \ relay or\n   client is unable to transmit the message to a next-hop that supports\n\
    \   CONPERM or to perform appropriate conversion, then it terminates\n   message\
    \ transmission and returns a [DSNSMTP, DSNFMT, SYSCOD] to the\n   originator,\
    \ with status code 5.6.3 (Conversion required but not\n   supported).\n   When\
    \ an SMTP relay or server performs content conversion, it records\n   which specific\
    \ conversions are made into Content-Previous and\n   Content-Features MIME header\
    \ fields associated with each converted\n   MIME body-part.\n   If a message is\
    \ protected by strong content authentication or privacy\n   techniques, then an\
    \ intermediary that converts message content MUST\n   ensure that the results\
    \ of its processing are similarly protected.\n   Otherwise it MUST NOT perform\
    \ conversion.\n   Originator Action:\n           An originator specifies desired\
    \ conversion results through\n      the MIME Content-Convert header field.  If\
    \ the originator includes\n      a Content-Convert header field, then it must\
    \ also include a\n      Content-Feature header field, to indicate the current\
    \ form of the\n      content.  Intermediaries MAY interpret the presence of this\
    \ header\n      field as authorization to perform conversions.  When Content-\n\
    \      Convert header fields are the sole means for guiding conversions\n    \
    \  by intermediaries, then they serve only as advisories.  Failure to\n      satisfy\
    \ the guidance of these header fields does not affect final\n      delivery.\n\
    \           When posting a new message, the originator MAY specify\n      transit-service\
    \ enforcement of conversion limitations by using the\n      ESMTP CONPERM service\
    \ extension.  In each of the MIME body-parts\n      for which conversion is authorized,\
    \ conversions MUST be limited to\n      those specified in MIME Content-Convert\
    \ header fields.  If\n      conversion is needed, but an authorized conversion\
    \ cannot be\n      performed, then the message will be returned to the originator.\n\
    \      If CONPERM is not used, then failure to perform an authorized\n      conversion\
    \ will not affect normal delivery handling.\n                          Figure\
    \ 2: CONPERM USAGE\n               +------------+\n               | Originator\
    \ |\n               +------------+\n                SMTP  ||\n               \
    \  or   || CONPERM\n               SUBMIT \\/\n                  +--------+  \
    \          +----------------+\n                  |  SMTP  |   SMTP     |    SMTP\
    \ Relay  |\n                  | Client |----------->| Server |       |\n     \
    \             +--------+  CONPERM   +--------+-------+\n   Recipient Action:\n\
    \           With the ESMTP mail transfer service, capabilities that can\n    \
    \  be supported on behalf of the recipient SHOULD be communicated to\n      intermediaries\
    \ by the ESMTP CONNEG service extension.\n                      Figure 3: CONNEG\
    \ USAGE\n                                        +-----------+\n             \
    \                           | Recipient |\n                                  \
    \      +-----------+\n                                  Capabilities||\n     \
    \                                         \\/\n               +----------------+\
    \         +--------+\n               |   SMTP Relay   |  CONNEG |  SMTP  |\n \
    \              |       | Client |<--------| Server |\n               +-------+--------+\
    \         +--------+\n   Intermediary Actions:\n           An intermediary MAY\
    \ be given CONPERM direction when receiving\n      a message, and MAY be given\
    \ CONNEG guidance before sending the\n      message.  CONPERM and CONNEG operate\
    \ on a per-message basis and\n      are issued through the ESMTP MAIL-FROM request.\
    \  CONNEG response\n      information is provided on a per-recipient basis, through\
    \ the\n      response to ESMTP RCPT-TO.\n           Conversion MUST be performed\
    \ by the first CONPERM\n      intermediary that obtains the CONNEG capability\
    \ information.  The\n      MIME Content-Type MUST conform to the result of the\
    \ converted\n      content, as per [MEDTYP].  When an intermediary obtains different\n\
    \      capability information for different recipients of the same\n      message,\
    \ it MAY either:\n         *  Create a single, converted copy of the content that\
    \ can be\n            supported by all of the recipients, or\n         *  Create\
    \ multiple converted copies, matching the capabilities\n            of subsets\
    \ of the recipients.  Each version is then sent\n            separately to an\
    \ appropriate subset of the recipients, using\n            separate, standard\
    \ SMTP sessions with separate, standard\n            RFC2821.Rcpt-To lists of\
    \ addresses.\n           A record of conversions is placed into MIME Content-Previous\n\
    \      header fields.  The current form of the content is described in\n     \
    \ MIME Content-Features header fields.\n           A special case of differential\
    \ capabilities occurs when an\n      intermediary receives capability information\
    \ about some\n      recipients, but no information about others.  An example of\
    \ this\n      scenario can occur when sending a message to some recipients\n \
    \     within one's own organization, along with recipients located\n      elsewhere.\
    \  The intermediary might have capability information\n      about the local recipients,\
    \ but will not have any for distant\n      recipients.  This is treated as a variation\
    \ of the handling that\n      is required for situations in which the permissible\
    \ conversions\n      are the null set -- that is, no valid conversions are possible\
    \ for\n      a recipient.\n      Rather than simply failing transmission to the\
    \ recipients for\n      which there is no capability information, the intermediary\
    \ MAY\n      choose to split the list of addressees into subsets of separate,\n\
    \      standard RFC2821.Rcpt-To lists and separate, standard SMTP\n      sessions,\
    \ and then continue the transmission of the original\n      content to those recipients\
    \ via the continued use of the CONPERM\n      mechanism.  Hence, the handling\
    \ for such recipients is performed\n      as if no CONNEG transaction took place.\n\
    \           Once an intermediary has performed conversion, it MAY\n      terminate\
    \ use of CONPERM.  However, some relay environments, such\n      as those re-directing\
    \ mail to a new target device, will benefit\n      from further conversion.  Intermediaries\
    \ MAY continue to use\n      CONPERM or MAY re-initiate CONPERM use when they\
    \ have knowledge of\n      possible variations in a target device.\n         NOTE:\
    \ A new, transformed version of content may have less\n         information than\
    \ the earlier version.  Of course, a sequence of\n         transformations may\
    \ lose additional information at each step.\n         Perhaps surprisingly, this\
    \ can result in more loss than might\n         be necessary.  For example, transformation\
    \ x could change\n         content form A to content form B; then transformation\
    \ y changes\n         B to C.  However, it is possible that transformation y might\n\
    \         have accepted form A directly and produced form D, which has\n     \
    \    more of the original information than C.\n         NOTE: An originator MAY\
    \ validate any conversions that are made\n         by requesting a positive [DSNSMTP].\
    \  If the DSN request\n         includes the \"RET\" parameter, the delivery agent\
    \ SHOULD return\n         an exact copy of the delivered (converted) message content.\n\
    \         This will permit the originator to inspect the results of any\n    \
    \     conversion(s).\n"
- title: 3.1.  Sending Permission
  contents:
  - "3.1.  Sending Permission\n   A message originator that permits content conversion\
    \ by\n   intermediaries MAY use the CONPERM ESMTP service extension and\n   Content-Convert\
    \ MIME header fields to indicate what conversions are\n   permitted by intermediaries.\
    \  Other mechanisms, by which a message\n   originator communicates this permission\
    \ to the SMTP message transfer\n   service, are outside the scope of this specification.\n\
    \         NOTE: This option requires that a server make an open-ended\n      \
    \   commitment to ensure that acceptable conversions are performed.\n        \
    \ In particular, it is possible that an intermediary will be\n         required\
    \ to perform conversion, but be unable to do so.  The\n         result will be\
    \ that the intermediary will be required to\n         perform conversion, but\
    \ it will be performed in undelivered\n         mail.\n   When an ESMTP client\
    \ is authorized to participate in the CONPERM\n   service, it MUST interact with\
    \ the next SMTP hop server about:\n      *  The server's ability to enforce authorized\
    \ conversions, through\n         ESMTP CONPERM\n      *  The capabilities supported\
    \ for the target device or system,\n         through ESMTP CONNEG\n   Successful\
    \ use of CONPERM does not require that conversion take place\n   along the message\
    \ transfer path.  Rather, it requires that conversion\n   take place when a next-hop\
    \ server reports capabilities that can be\n   supported on behalf of the recipient\
    \ (through CONNEG) and that those\n   capabilities do not include support for\
    \ the current representation of\n   the content.\n            NOTE: It is acceptable\
    \ to have every SMTP server --\n            including the last-hop server -- support\
    \ CONPERM, with none\n            offering CONNEG.  In this case, the message\
    \ is delivered to\n            the recipient in its original form.  Any possible\n\
    \            conversions to be performed are left to the recipient.\n        \
    \    Thus, the recipient is given the original form of the\n            content,\
    \ along with an explicit list of conversions deemed\n            acceptable by\
    \ the originator.\n   An SMTP server MAY offer ESMTP CONPERM, without being able\
    \ to perform\n   conversions, if it knows conversions can be performed along the\n\
    \   remainder of the transfer path, or by the target device or system.\n"
- title: 3.2.  Returning Capabilities
  contents:
  - "3.2.  Returning Capabilities\n   A target recipient device or system arranges\
    \ announcements of its\n   content form capabilities to the SMTP service through\
    \ a means outside\n   the scope of this specification.  Note that enabling a server\
    \ to\n   issue CONNEG information on behalf of the recipient may require a\n \
    \  substantial mechanism between the recipient and server.  When an\n   ESMTP\
    \ server knows a target's capabilities, it MAY offer the CONNEG\n   ESMTP service\
    \ extension.\n            NOTE: One aspect of that mechanism, between the recipient\n\
    \            and an ESMTP server offering the CONNEG ESMTP service\n         \
    \   extension could include offering capabilities beyond those\n            directly\
    \ supported by the recipient.  In particular, the\n            server -- or other\
    \ intermediaries between the server and the\n            recipient -- could support\
    \ capabilities that they can\n            convert to a recipient's capability.\
    \  As long as the result\n            is acceptable to the set specified in the\
    \ relevant Content-\n            Convert header fields of the message being converted,\
    \ the\n            details of these conversions are part of the\n            recipient/server\
    \ mechanism, and fall outside the scope of\n            the current specification.\n\
    \   If a next-hop ESMTP server responds that it supports CONNEG when a\n   message\
    \ is being processed according to the CONPERM mechanism, then\n   the SMTP client:\n\
    \      1) MUST request CONNEG information\n      2) MUST perform the requisite\
    \ conversions, if possible, before\n         sending the message to the next-hop\
    \ SMTP server\n      3) MUST fail message processing, if any conversion for the\
    \ message\n         fails, and MUST return a failure DSN to the originator with\n\
    \         status code 5.6.5  (Conversion failed).\n   When performing conversions,\
    \ as specified in Content-Convert MIME\n   header fields, the Client MUST:\n \
    \     1) Add a Content-Previous header field and a Content-Features\n        \
    \ header field to each MIME body-part that has been converted,\n         removing\
    \ any existing Content-Features header fields.\n      2) Either:\n           \
    \ *  Send a single copy to the next-hop SMTP server, using the\n             \
    \  best capabilities supported by all recipients along that\n               path,\
    \ or\n            *  Separate the transfers into multiple, standard\n        \
    \       RFC2821.Rcpt-To and ESMTP sessions, in order to provide\n            \
    \   the best conversions possible for subsets of the\n               recipients.\n\
    \   If the transfers are to be separated, then the current session MUST\n   be\
    \ terminated, and new sessions conducted for each subset.\n   The conversions\
    \ to be performed are determined by the intersection of\n   three lists:\n   \
    \   *  Conversions permitted by the originator\n      *  Content capabilities\
    \ of the target\n      *  Conversions that can be performed by the SMTP client\
    \ host\n   Failed Conversion\n      If the result of this intersection is the\
    \ null set of\n      representations, for an addressee, then delivery to that\
    \ addressee\n      MUST be handled as a conversion failure.\n      If handling\
    \ is subject to the CONPERM mechanism and:\n         *  the next-hop SMTP host\
    \ does not indicate that it can\n            represent the target's capabilities\
    \ through CONNEG, but\n         *  does respond that it can support CONPERM, then\
    \ the client\n            SMTP MUST send the existing content, if all other SMTP\n\
    \            transmission requirements are satisfied.\n      If handling is not\
    \ subject to the CONPERM mechanism, then\n      conversion failures do not affect\
    \ message delivery.\n"
- title: 3.3.  Next-Hop Non-Support of Service
  contents:
  - "3.3.  Next-Hop Non-Support of Service\n   If a Client is participating in the\
    \ CONPERM mechanism, but the next-\n   hop SMTP server does not support CONPERM\
    \ or CONNEG, then the SMTP\n   client\n      1) MUST terminate the session to\
    \ the next-hop SMTP server, without\n         sending the message\n      2) MUST\
    \ return a DSN notification to the originator, with status\n         code 5.6.3\
    \ (Conversion required but not supported).  [DSNSMTP,\n         DSNFMT, SYSCOD]\n\
    \   If a Client is participating in the CONPERM mechanism and the next-\n   hop\
    \ SMTP server supports CONNEG, but provides no capabilities for an\n   individual\
    \ RCPT-TO addressee, then the SMTP client's processing for\n   that recipient\
    \ MUST be either to:\n      1) Treat the addressee as a conversion failure, or\n\
    \      2) Separate the addressee from the address list that is processed\n   \
    \      according to CONNEG, and continue to process the addressee\n         according\
    \ to CONPERM.\n"
- title: 4.  Content Conversion Permission SMTP Extension
  contents:
  - '4.  Content Conversion Permission SMTP Extension

    '
- title: 4.1.  Content Conversion Permission Service Extension Definition
  contents:
  - "4.1.  Content Conversion Permission Service Extension Definition\n   1) The name\
    \ of the SMTP service extension is\n      \"Content-Conversion-Permission\"\n\
    \   2) The EHLO keyword value associated with this extension is\n      \"CONPERM\"\
    \n   3) A parameter using the keyword \"CONPERM\" is added to the MAIL-FROM\n\
    \      command.\n   4) The server responds with acceptance or rejection of support\
    \ for\n      CONPERM, for this message.\n"
- title: 4.2.  CONPERM Parameter to Mail-From
  contents:
  - "4.2.  CONPERM Parameter to Mail-From\n   Parameter:\n      CONPERM\n   Arguments:\n\
    \           There are no arguments.  Specification of permitted\n      conversions\
    \ is located in a Content-Convert header field for each\n      MIME body-part\
    \ in which conversion is permitted.\n   Client Action:\n           If the server\
    \ issued a 250-CONPERM as part of its EHLO\n      response for the current session,\
    \ and the client is participating\n      in the CONPERM service for this message\
    \ -- such as by having\n      received the message with a CONPERM requirement\
    \ -- then the client\n      MUST issue the CONPERM parameter in the MAIL-FROM.\
    \  If the server\n      does not issue 250-CONPERM, and the client is participating\
    \ in the\n      CONPERM service for this message, then the client MUST treat the\n\
    \      transmission as permanently rejected.\n   Server Action:\n           If\
    \ the client specifies CONPERM in the MAIL-FROM, but the\n      server does not\
    \ support the CONPERM parameter, the server MUST\n      reject the MAIL-FROM command\
    \ with a 504-CONPERM reply.\n           If the client issues the CONPERM parameter\
    \ in the MAIL-FROM,\n      then the server MUST conform to this specification.\
    \  Either it\n      MUST relay the message according to CONPERM, or it MUST convert\n\
    \      the message according to CONNEG information.\n"
- title: 4.3.  Syntax
  contents:
  - "4.3.  Syntax\n   Content-Conversion-Permission =    \"CONPERM\"\n"
- title: 5.  Content Negotiation SMTP Extension
  contents:
  - '5.  Content Negotiation SMTP Extension

    '
- title: 5.1.  Content Negotiation Service Extension Definition
  contents:
  - "5.1.  Content Negotiation Service Extension Definition\n   1) The name of the\
    \ SMTP service extension is:\n      \"Content-Negotiation\"\n   2) The EHLO keyword\
    \ value associated with this extension is:\n      \"CONNEG\"\n   3) A parameter,\
    \ using the keyword \"CONNEG\", is added to the RCPT-TO\n      command.\n   4)\
    \ The server responds with a report indicating the content\n      capabilities\
    \ that can be received on behalf of the recipient\n      device or system, associated\
    \ with the target RCPT-TO address.\n"
- title: 5.2.  CONNEG Parameter to RCPT-TO
  contents:
  - "5.2.  CONNEG Parameter to RCPT-TO\n   Parameter:\n      CONNEG\n   Arguments:\n\
    \      There are no arguments.\n   Client Action:\n           If a message is\
    \ subject to CONPERM requirements and the\n      server issues a 250-CONNEG, as\
    \ part of its EHLO response for the\n      current session, the client MUST issue\
    \ the CONNEG parameter in the\n      RCPT-TO request.  If the message is not subject\
    \ to CONPERM\n      requirements, and the server issues a 250-CONNEG, the client\
    \ MAY\n      issue the CONNEG parameter with RCPT-TO.\n           If the client\
    \ issues the CONNEG parameter with RCPT-TO, then\n      it MUST honor the capabilities\
    \ returned in the CONNEG RCPT-TO\n      replies for that message.  In addition,\
    \ it MUST convert the\n      message content, if the current form of the content\
    \ is not\n      included in the capabilities listed, on behalf of the recipient.\n\
    \           The conversions that are performed are determined by the\n      intersection\
    \ of the:\n         *  Conversions permitted by the originator\n         *  Content\
    \ capabilities of the target\n         *  Conversions that can be performed by\
    \ the SMTP client host\n      If the result of this intersection is the null set\
    \ of\n      representations, then the Client processing depends upon whether\n\
    \      the next-hop server has offered CONPERM, as well as CONNEG:\n         1)\
    \ If the message will be subject to CONPERM at the next hop,\n            the\
    \ Client MAY transmit the original content to the next hop\n            and continue\
    \ CONPERM requirements.\n         2) Otherwise, the Client MUST treat the conversion\
    \ as failed.\n           If the result of the intersection is not null, the client\n\
    \      SHOULD convert the data to the \"highest\" level of capability of\n   \
    \   the server.  Determination of the level that is highest is left to\n     \
    \ the discretion of the host performing the conversion.\n           Each converted\
    \ MIME body-part MUST have a Content-Previous\n      header field that indicates\
    \ the previous body-part form and a\n      Content-Features header field, indicating\
    \ the new body-part form.\n   Server Action:\n           If the client specifies\
    \ CONNEG in the RCPT-TO, but the server\n      does not support the CONNEG parameter,\
    \ the server MUST reject the\n      RCPT-TO addressees with 504 replies.\n   \
    \        If the server does support the CONNEG parameter, and it knows\n     \
    \ the capabilities of the target device or system, then it MUST\n      provide\
    \ that information through CONNEG.  The server MAY provide a\n      broader list\
    \ than is supported by the recipient if the server can\n      ensure that the\
    \ form of content delivered can be processed by the\n      recipient, while still\
    \ satisfying the constraints of the author's\n      Content-Convert specification(s).\n\
    \           The response to a CONNEG RCPT-TO request will be multi-line\n    \
    \  RCPT-TO replies.  For successful (250) responses, at least the\n      first\
    \ line of the response must contain RCPT-TO information other\n      than CONNEG.\
    \  Additional response lines are for CONNEG.  To avoid\n      problems due to\
    \ variations in line buffer sizes, the total\n      parametric listing must be\
    \ provided as a series of lines, each\n      beginning with \"250-CONNEG\", except\
    \ for the last line, which is\n      \"250 CONNEG\".\n           The contents\
    \ of the capability listing MUST conform to the\n      specifications in [SYN]\
    \ and cover the same range of specifications\n      permitted in [CONMSG].\n"
- title: 5.3.  Syntax
  contents:
  - "5.3.  Syntax\n      Content-Negotiation =    \"CONNEG\"\n      Capability = \
    \            { <filter> specification,\n                                 as per\
    \ [SYN] }\n"
- title: 6.  MIME Content-Features Header Field
  contents:
  - "6.  MIME Content-Features Header Field\n   The Content-Features header field\
    \ describes the characteristics of\n   the current version of the content for\
    \ the MIME body-part in which\n   the header field occurs.  There is a separate\
    \ Content-Features header\n   field for each MIME body-part.  The specification\
    \ for this header\n   field is contained in [FEAT].\n"
- title: 7.  MIME Content-Convert Header Field
  contents:
  - "7.  MIME Content-Convert Header Field\n   Content-Convert is a header field that\
    \ specifies preferred\n   conversions for the associated content.  It MAY be used\
    \ without the\n   other mechanisms defined in this document.  If present, this\
    \ header\n   field MUST be carried unmodified and delivered to the recipient.\
    \  In\n   its absence, the content originator provides no guidance about\n   content\
    \ conversions, and intermediaries SHOULD NOT perform content\n   conversion.\n\
    \   In the extended ABNF notation, the Content-Convert header field is\n   defined\
    \ as follows:\n      Convert =                \"Content-convert\" \":\"\n    \
    \                           permitted\n      Permitted =              \"ANY\"\
    \ / \"NONE\" / permitted-list\n      permitted-list =         { explicit list\
    \ of permitted\n                                  final forms, using <filter>\n\
    \                                  syntax in [SYN] }\n   If the permitted conversions\
    \ are specified as \"ANY\", then the\n   intermediary may perform any conversions\
    \ it deems appropriate.\n   If the permitted conversions are specified as \"NONE\"\
    , then the\n   intermediary SHOULD NOT perform any conversions to this MIME body-\n\
    \   part, even when the target device or system does not support the\n   original\
    \ form of the content.\n   If a Content-Convert header field is present, then\
    \ a Content-Features\n   header field MUST also be present to describe the current\
    \ form of the\n   Content.\n"
- title: 8.  MIME Content-Previous Header Field
  contents:
  - "8.  MIME Content-Previous Header Field\n   When an intermediary has performed\
    \ conversion of the associated\n   content, the intermediary MUST record details\
    \ of the previous\n   representation, from which the conversion was performed.\
    \  This\n   information is placed in a Content-Previous header field that is part\n\
    \   of the MIME body-part with the converted content.  There is a\n   separate\
    \ header field for each converted MIME body-part.\n   When an intermediary has\
    \ performed conversion, the intermediary MUST\n   record details of the result\
    \ of the conversion by creating or\n   revising the Content-Features header field\
    \ for the converted MIME\n   body-part.\n   In the extended [ABNF] notation, the\
    \ Content-Previous header field is\n   defined as follows:\n      previous = \
    \         \"Content-Previous\" [CFWS] \":\"\n                          [CFWS]\n\
    \                          date by type\n      date =              \"Date \" [CFWS]\
    \ date-time [CFWS] \";\"\n                          [CFWS]\n      by =       \
    \         \"By \" [CFWS] domain [CFWS] \";\"\n                          [CFWS]\n\
    \      type =              { content characteristics, using\n                \
    \            <filter> syntax in [SYN] }\n   The Date field specifies the date\
    \ and time at which the indicated\n   representation was converted into a newer\
    \ representation.\n   The By field specifies the domain name of the intermediary\
    \ that\n   performed the conversion.\n   An intermediary MAY choose to derive\
    \ the Content-Previous header\n   field, for a body-part, from an already-existing\
    \ Content-Features\n   header field in that body-part, before that header field\
    \ is replaced\n   with the description of the current representation.\n"
- title: 9.  Examples
  contents:
  - '9.  Examples

    '
- title: 9.1.  CONPERM Negotiation
  contents:
  - "9.1.  CONPERM Negotiation\n   S: 220 example.com IFAX\n   C: EHLO example.com\n\
    \   S: 250- example.com\n   S: 250-DSN\n   S: 250 CONPERM\n   C: MAIL FROM:May@some.example.com\
    \ CONPERM\n   S: 250 <May@some.example.com> originator ok\n   C: RCPT TO:<June@some.example.com>\n\
    \   S: 250-<June@some.example.com> recipient ok\n   C: DATA\n   S: 354 okay, send\
    \ data\n   C: <<RFC 2822 message with MIME Content-Type:TIFF-FX\n      Per:\n\
    \      (  image-file-structure=TIFF-minimal\n         dpi=400\n         image-coding=JBIG\n\
    \         size-x=2150/254\n         paper-size=letter\n      )\n      with MIME\
    \ body-parts including:\n      Content-Convert:\n         (&(image-file-structure=TIFF-minimal)\n\
    \           (MRC-mode=0)\n           (color=Binary)\n           (|(&(dpi=204)\n\
    \               (dpi-xyratio=[204/98,204/196]) )\n             (&(dpi=200)\n \
    \              (dpi-xyratio=[200/100,1]) )\n             (&(dpi=400)\n       \
    \        (dpi-xyratio=1) ) )\n           (|(image-coding=[MH,MR,MMR])\n      \
    \       (&(image-coding=JBIG)\n               (image-coding-constraint=JBIG-T85)\n\
    \               (JBIG-stripe-size=128) ) )\n           (size-x<=2150/254)\n  \
    \         (paper-size=[letter,A4])\n           (ua-media=stationery) )\n     \
    \ >>\n   S: 250 message accepted\n   C: QUIT\n   S: 221 goodbye\n"
- title: 9.2.  Example CONNEG Negotiation
  contents:
  - "9.2.  Example CONNEG Negotiation\n   S: 220 example.com IFAX\n   C: EHLO example.com\n\
    \   S: 250- example.com\n   S: 250-DSN\n   S: 250 CONNEG\n   C: MAIL FROM:<May@some.example.com>\n\
    \   S: 250 <May@some.example.com> originator ok\n   C: RCPT TO:<June@ifax1.jp>\
    \ CONNEG\n   S: 250-<June@some.example.com> recipient ok\n   S: 250-CONNEG (&(image-file-structure=TIFF-minimal)\n\
    \   S: 250-CONNEG   (MRC-mode=0)\n   S: 250-CONNEG   (color=Binary)\n   S: 250-CONNEG\
    \   (|(&(dpi=204)\n   S: 250-CONNEG       (dpi-xyratio=[204/98,204/196]) )\n \
    \  S: 250-CONNEG     (&(dpi=200)\n   S: 250-CONNEG       (dpi-xyratio=[200/100,1])\
    \ ) )\n   S: 250-CONNEG   (image-coding=[MH,MR,MMR])\n   S: 250-CONNEG   (size-x<=2150/254)\n\
    \   S: 250-CONNEG   (paper-size=[letter,A4])\n   S: 250 CONNEG   (ua-media=stationery)\
    \ )\n   C: DATA\n   S: 354 okay, send data\n   C: <<RFC 2822 message with MIME\
    \ Content-Type:TIFF-FX\n        Per:\n        (  image-file-structure=TIFF-minimal\n\
    \           dpi=400\n           image-coding=JBIG\n           size-x=2150/254\n\
    \           paper-size=letter\n         )\n      >>\n   S: 250 message accepted\n\
    \   C: QUIT\n   S: 221 goodbye\n"
- title: 9.3.  Content-Previous
  contents:
  - "9.3.  Content-Previous\n   Content-Previous:\n      Date  Tue, 1 Jul 2001 10:52:37\
    \ +0200;\n      By    relay.example.com;\n      (&(image-file-structure=TIFF-minimal)\n\
    \        (MRC-mode=0)\n        (color=Binary)\n        (&(dpi=400)\n         \
    \ (dpi-xyratio=1) )\n        (&(image-coding=JBIG)\n          (image-coding-constraint=JBIG-T85)\n\
    \          (JBIG-stripe-size=128) )\n        (size-x=2150/254)\n        (paper-size=A4)\n\
    \        (ua-media=stationery) )\n"
- title: 10.  Security Considerations
  contents:
  - "10.  Security Considerations\n   This service calls for disclosure of capabilities,\
    \ on behalf of\n   recipients.  Mechanisms for determining the requestor's and\
    \ the\n   respondent's authenticated identity are outside the scope of this\n\
    \   specification.  These mechanisms are intended to permit disclosure of\n  \
    \ information that is safe for public distribution; hence, there is no\n   inherent\
    \ need for security measures.\n   Information that should have restricted distribution\
    \ is still able to\n   be disclosed.  Therefore, it is the responsibility of the\
    \ disclosing\n   ESMTP server or disclosing ESMTP client to determine whether\n\
    \   additional security measures should be applied to the use of this\n   ESMTP\
    \ option.\n   Use of the ESMTP CONNEG option permits content transformation by\
    \ an\n   intermediary, along the mail transfer path.  When the contents are\n\
    \   encrypted, the intermediary cannot perform the conversion, because it\n  \
    \ is not expected to have access to the relevant secret keying\n   material. \
    \ When the contents are signed, but not encrypted,\n   conversion will invalidate\
    \ the signature.  This specification\n   provides for potentially unbounded computation\
    \ by intermediary MTAs,\n   depending on the nature and amount of conversion required.\
    \  Further,\n   this computation burden might provide an opportunity for denial-of-\n\
    \   service attacks, given that Internet mail typically permits\n   intermediaries\
    \ to receive messages from all Internet sources.\n   This specification provides\
    \ for content conversion by unspecified\n   intermediaries.  Use of this mechanism\
    \ carries significant risk.\n   Although intermediaries always have the ability\
    \ to perform damaging\n   transformations, use of this specification could result\
    \ in more\n   exploration of that potential and, therefore, more misbehavior.\
    \  Use\n   of intermediaries is discussed in [RFC3238].\n   CONPERM/CONNEG provide\
    \ a cooperative mechanism, rather than enabling\n   intermediary actions that\
    \ were not previously possible.\n   Intermediaries already make conversions on\
    \ their own initiative.\n   Hence, the mechanism introduces essentially no security\
    \ concerns,\n   other than divulging recipient preferences.\n"
- title: 11.  Acknowledgements
  contents:
  - "11.  Acknowledgements\n   Graham Klyne and Eric Burger provided extensive, diligent\
    \ reviews and\n   suggestions.  Keith Moore, Giat Hana, and Joel Halpern provided\n\
    \   feedback that resulted in improving the specification's integration\n   into\
    \ established email practice.\n"
- title: 12.  References
  contents:
  - '12.  References

    '
- title: 12.1.  Normative References
  contents:
  - "12.1.  Normative References\n   [ABNF]     Crocker, D. and P. Overell, \"Augmented\
    \ BNF for Syntax\n              Specifications: ABNF\", RFC 4234, October 2005.\n\
    \   [KEYWORDS] Bradner, S., \"Key words for use in RFCs to Indicate\n        \
    \      Requirement Levels\", BCP 14, RFC 2119, March 1997.\n   [CONMSG]   Klyne,\
    \ G., Iwazaki, R., and D. Crocker, \"Content\n              Negotiation for Messaging\
    \ Services based on Email\", RFC\n              3297, July 2002.\n   [DSNSMTP]\
    \  Moore, K., \"Simple Mail Transfer Protocol (SMTP) Service\n              Extension\
    \ for Delivery Status Notifications (DSNs)\", RFC\n              3461, January\
    \ 2003.\n   [DSNFMT]   Moore, K. and G. Vaudreuil, \"An Extensible Message Format\n\
    \              for Delivery Status Notifications\", RFC 3464, January\n      \
    \        2003.\n   [SYSCOD]   Vaudreuil, G., \"Enhanced Mail System Status Codes\"\
    , RFC\n              3463, January 2003.\n   [ESMTP1]   Klensin, J., Freed, N.,\
    \ Rose, M., Stefferud, E., and D.\n              Crocker, \"SMTP Service Extensions\"\
    , STD 10, RFC 1869,\n              November 1995.\n   [ESMTP2]   Klensin, J.,\
    \ \"Simple Mail Transfer Protocol\", RFC 2821,\n              April 2001.\n  \
    \ [FEAT]     Klyne, G., \"Indicating Media Features for MIME Content\",\n    \
    \          RFC 2912, September 2000.\n   [IMF]      Resnick, P., \"Internet Message\
    \ Format\", RFC 2822, April\n              2001.\n   [SYN]      Klyne, G., \"\
    A Syntax for Describing Media Feature Sets\",\n              RFC 2533, March 1999.\n\
    \   [MEDTYP]   IANA, \"MIME Media Types\",\n              <http://www.iana.org/assignments/media-types>\n\
    \   [CFWS]     Alvestrand, H., \"Content Language Headers\", RFC 3282, May\n \
    \             2002.\n"
- title: 12.2.  Informative References
  contents:
  - "12.2.  Informative References\n   [RFC3238]  Floyd, S. and L. Daigle, \"IAB Architectural\
    \ and Policy\n              Considerations for Open Pluggable Edge Services\"\
    , RFC\n              3238, January 2002.\n"
- title: Appendix A.  CONNEG with Direct SMTP
  contents:
  - "Appendix A.  CONNEG with Direct SMTP\n   This Appendix is descriptive.  It only\
    \ provides discussion of usage\n   issues permitted or required by the normative\
    \ text\n   In some configurations, it is possible to have direct, email-based\n\
    \   interactions, where the originator's system conducts a direct,\n   interactive\
    \ TCP connection with the recipient's system.  This\n   configuration permits\
    \ a use of the content form negotiation service\n   that conforms to the specification\
    \ here, but permits some\n   simplifications.  This single SMTP session does not\
    \ have the\n   complexity of multiple, relaying sessions and therefore does not\
    \ have\n   the requirement for propagating permissions to intermediaries.\n  \
    \ The Originator's system provides user-level functions for the\n   originator,\
    \ and it contains the SMTP Client for sending messages.\n   Hence, the formal\
    \ step of email \"posting\" is a process that is\n   internal or virtual, within\
    \ the Originating system.  The recipient's\n   service contains the user-level\
    \ functions for the recipient, and\n   contains the SMTP server for receiving\
    \ messages.  Hence, the formal\n   steps of email \"delivering\" and \"receipt\"\
    \ are internal or virtual,\n   within the Receiving system.\n                \
    \    Figure 4: DIRECT CONNEG\n         Originating system          Receiving system\n\
    \        +------------------+       +------------------+\n        |  +------------+\
    \  |       |   +-----------+  |\n        |  | Originator |  |       |   | Recipient\
    \ |  |\n        |  +------------+  |       |   +-----------+  |\n        |   \
    \    ||Posting  |       |      /\\Receiving |\n        |       \\/         | \
    \      |      ||          |\n        |   +---------+    |       |    +--------+\
    \    |\n        |   |  SMTP   |<---|-------|----|  SMTP  |    |\n        |   |\
    \ Client  |----|-------|--->| Server |    |\n        |   +---------+    |    \
    \   |    +--------+    |\n        +------------------+       +------------------+\n\
    \   In this case, CONPERM is not needed because the SMTP Client is part\n   of\
    \ the originating system and already has the necessary permission.\n   Similarly,\
    \ the SMTP server will be certain to know the recipient's\n   capabilities, because\
    \ the server is part of the receiving system.\n   Therefore, Direct Mode email\
    \ transmission can achieve content\n   capability and form matching by having:\n\
    \      *  Originating systems that conform to this specification and a\n     \
    \    communication process between originator and recipient that is\n        \
    \ the same as would take place between a last-hop SMTP Relay and\n         the\
    \ Delivering SMTP server to which it is connected.\n      *  That is, the Client\
    \ and Server MUST employ CONNEG and the\n         Client MUST perform any requisite\
    \ conversions.\n"
- title: Appendix B.  Using Combinations of the Extensions
  contents:
  - "Appendix B.  Using Combinations of the Extensions\n   This specification defines\
    \ a number of mechanisms.  It is not\n   required that they all be used together.\
    \  For example, the difference\n   between listing preferred conversions -- versus\
    \ specifying enforced\n   limitations to conversions -- is discussed in the Introduction.\
    \  This\n   Appendix further describes scenarios that might call for using fewer\n\
    \   than the complete set defined in this specification.  It also\n   summarizes\
    \ the conditions which mandate that an intermediary perform\n   conversion.\n\
    \   This Appendix is descriptive.  It only provides discussion of usage\n   issues\
    \ permitted or required by the normative text\n   The available mechanisms are:\n\
    \      1. CONPERM Parameter to Mail-From\n      2. CONNEG parameter to RCPT-TO\n\
    \      3. MIME Content-Convert Header Field\n      4. MIME Content-Previous Header\
    \ Field\n      5. MIME Content-Features Header Field\n"
- title: B.1.  Specifying Suggested Conversion Constraints
  contents:
  - "B.1.  Specifying Suggested Conversion Constraints\n   Use of the MIME Content-Convert\
    \ header field specifies the\n   originator's preferences, should conversion be\
    \ performed.  This does\n   not impose any requirements on the conversion; it\
    \ is merely advisory.\n"
- title: B.2.  Specifying Required Conversion Constraints
  contents:
  - "B.2.  Specifying Required Conversion Constraints\n   When the MIME Content-Convert\
    \ specification is coupled with the ESMTP\n   CONPERM option, then the originator's\
    \ specification of preferred\n   conversions rises to the level of requirement.\
    \  No other conversions\n   are permitted, except those specified in the Content-Convert\
    \ header\n   field.\n      Note that the presence of both mechanisms does not\
    \ require that\n      conversions be performed.  Rather, it constrains conversions,\n\
    \      should they occur.\n"
- title: B.3.  Accepting All Forms of Content
  contents:
  - "B.3.  Accepting All Forms of Content\n   Although it is unlikely that any device\
    \ will always able to process\n   every type of existing content, some devices\
    \ can be upgraded easily\n   (e.g., adding plug-in).  Hence, such a device is\
    \ able to process all\n   content effectively.\n   For such devices, it is better\
    \ to refrain from issuing a CONNEG\n   assertion.  Instead, the CONPERM request\
    \ should be propagated to the\n   target device.\n"
- title: B.4.  When Conversion is Required
  contents:
  - "B.4.  When Conversion is Required\n   A node is required to perform conversion\
    \ when:\n      1. At least one MIME Content-Covert header field is present in\
    \ the\n         message,\n      2. ESMTP CONPERM is in force at the node processing\
    \ the message,\n      3. ESMTP CONNEG is also in force at the same node,\n   \
    \   4. The current content form is not cited in the CONNEG list,\n      5. At\
    \ least one content form is present, both in the Content-\n         Convert list\
    \ and the CONNEG list, and\n      6. The intermediary is able to convert from\
    \ the current form to\n         one of the forms listed in both Content-Convert\
    \ and CONNEG.\n"
- title: Appendix C.  MIME Content-Type Registrations
  contents:
  - 'Appendix C.  MIME Content-Type Registrations

    '
- title: C.1.  Content-Convert
  contents:
  - "C.1.  Content-Convert\n   Header field name:\n      Content-Convert\n   Applicable\
    \ protocol:\n      Mail (RFC 2822)\n   Status:\n      Proposed Standard\n   Author/Change\
    \ controller:\n      IETF\n   Specification document(s):\n      RFC 4141.\n  \
    \ Related information:\n      None.\n"
- title: C.2.  Content-Previous
  contents:
  - "C.2.  Content-Previous\n   Header field name:\n      Content-Previous\n   Applicable\
    \ protocol:\n      Mail (RFC 2822)\n   Status:\n      Proposed Standard\n   Author/Change\
    \ controller:\n      IETF\n   Specification document(s):\n      RFC 4141, Section\
    \ 8\n   Related information:\n      None.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Kiyoshi Toyoda\n   Panasonic Communications Co., Ltd.\n\
    \   4-1-62 Minoshima Hakata-ku, Fukuoka 812-8531 Japan\n   EMail: toyoda.kiyoshi@jp.panasonic.com\n\
    \   Dave Crocker\n   Brandenburg InternetWorking\n   675 Spruce Drive\n   Sunnyvale,\
    \ CA  94086  USA\n   Phone: +1.408.246.8253\n   EMail: dcrocker@bbiw.net\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2005).\n   This\
    \ document is subject to the rights, licenses and restrictions\n   contained in\
    \ BCP 78, and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET\n   ENGINEERING\
    \ TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,\n   INCLUDING BUT NOT\
    \ LIMITED TO ANY WARRANTY THAT THE USE OF THE\n   INFORMATION HEREIN WILL NOT\
    \ INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY OR FITNESS\
    \ FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at ietf-\n   ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
