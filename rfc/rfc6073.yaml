- title: __initial_text__
  contents:
  - '                          Segmented Pseudowire

    '
- title: Abstract
  contents:
  - "Abstract\n   This document describes how to connect pseudowires (PWs) between\n\
    \   different Packet Switched Network (PSN) domains or between two or\n   more\
    \ distinct PW control plane domains, where a control plane domain\n   uses a common\
    \ control plane protocol or instance of that protocol for\n   a given PW.  The\
    \ different PW control plane domains may belong to\n   independent autonomous\
    \ systems, or the PSN technology is\n   heterogeneous, or a PW might need to be\
    \ aggregated at a specific PSN\n   point.  The PW packet data units are simply\
    \ switched from one PW to\n   another without changing the PW payload.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc6073.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2011 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n   This document\
    \ may contain material from IETF Documents or IETF\n   Contributions published\
    \ or made publicly available before November\n   10, 2008.  The person(s) controlling\
    \ the copyright in some of this\n   material may not have granted the IETF Trust\
    \ the right to allow\n   modifications of such material outside the IETF Standards\
    \ Process.\n   Without obtaining an adequate license from the person(s) controlling\n\
    \   the copyright in such materials, this document may not be modified\n   outside\
    \ the IETF Standards Process, and derivative works of it may\n   not be created\
    \ outside the IETF Standards Process, except to format\n   it for publication\
    \ as an RFC or to translate it into languages other\n   than English.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n\
    \   2. Specification of Requirements ...................................5\n  \
    \ 3. Terminology .....................................................5\n   4.\
    \ General Description .............................................6\n   5. PW\
    \ Switching and Attachment Circuit Type ........................9\n   6. Applicability\
    \ ...................................................9\n   7. MPLS-PW to MPLS-PW\
    \ Switching ...................................10\n      7.1. Static Control Plane\
    \ Switching ............................10\n      7.2. Two LDP Control Planes\
    \ Using the Same FEC Type ............11\n           7.2.1. FEC 129 Active/Passive\
    \ T-PE Election Procedure .....11\n      7.3. LDP Using FEC 128 to LDP Using the\
    \ Generalized FEC 129 ....12\n      7.4. LDP SP-PE TLV .............................................12\n\
    \           7.4.1. PW Switching Point PE Sub-TLVs .....................14\n  \
    \         7.4.2. Adaptation of Interface Parameters .................15\n    \
    \  7.5. Group ID ..................................................16\n      7.6.\
    \ PW Loop Detection .........................................16\n   8. MPLS-PW\
    \ to L2TPv3-PW Control Plane Switching ...................16\n      8.1. Static\
    \ MPLS and L2TPv3 PWs ................................17\n      8.2. Static MPLS\
    \ PW and Dynamic L2TPv3 PW ......................17\n      8.3. Static L2TPv3\
    \ PW and Dynamic LDP/MPLS PW ..................17\n      8.4. Dynamic LDP/MPLS\
    \ and L2TPv3 PWs ...........................17\n           8.4.1. Session Establishment\
    \ ..............................18\n           8.4.2. Adaptation of PW Status\
    \ message ....................18\n           8.4.3. Session Tear Down ..................................18\n\
    \      8.5. Adaptation of L2TPv3 AVPs to Interface Parameters .........19\n  \
    \    8.6. Switching Point TLV in L2TPv3 .............................20\n    \
    \  8.7. L2TPv3 and MPLS PW Data Plane .............................20\n      \
    \     8.7.1. Mapping the MPLS Control Word to L2TP ..............21\n   9. Operations,\
    \ Administration, and Maintenance (OAM) ..............22\n      9.1. Extensions\
    \ to VCCV to Support MS-PWs ......................22\n      9.2. OAM from MPLS\
    \ PW to L2TPv3 PW .............................22\n      9.3. OAM Data Plane Indication\
    \ from MPLS PW to MPLS PW .........22\n      9.4. Signaling OAM Capabilities for\
    \ Switched Pseudowires .......23\n      9.5. OAM Capability for MS-PWs Demultiplexed\
    \ Using MPLS ........23\n           9.5.1. MS-PW and VCCV CC Type 1 ...........................24\n\
    \           9.5.2. MS-PW and VCCV CC Type 2 ...........................24\n  \
    \         9.5.3. MS-PW and VCCV CC Type 3 ...........................24\n    \
    \  9.6. MS-PW VCCV Operations .....................................24\n      \
    \     9.6.1. VCCV Echo Message Processing .......................25\n        \
    \   9.6.2. Detailed VCCV Procedures ...........................27\n   10. Mapping\
    \ Switched Pseudowire Status ............................31\n      10.1. PW Status\
    \ Messages Initiated by the S-PE .................32\n           10.1.1. Local\
    \ PW2 Transmit Direction Fault ................33\n           10.1.2. Local PW1\
    \ Transmit Direction Fault ................34\n           10.1.3. Local PW2 Receive\
    \ Direction Fault .................34\n           10.1.4. Local PW1 Receive Direction\
    \ Fault .................34\n           10.1.5. Clearing Faults ...................................34\n\
    \      10.2. PW Status Messages and SP-PE TLV Processing ..............35\n  \
    \    10.3. T-PE Processing of PW Status Messages ....................35\n    \
    \  10.4. Pseudowire Status Negotiation Procedures .................35\n      10.5.\
    \ Status Dampening .........................................35\n   11. Peering\
    \ between Autonomous Systems ............................35\n   12. Congestion\
    \ Considerations .....................................36\n   13. Security Considerations\
    \ .......................................36\n      13.1. Data Plane Security ......................................36\n\
    \           13.1.1. VCCV Security Considerations ......................36\n  \
    \    13.2. Control Protocol Security ................................37\n   14.\
    \ IANA Considerations ...........................................38\n      14.1.\
    \ L2TPv3 AVP ...............................................38\n      14.2. LDP\
    \ TLV TYPE .............................................38\n      14.3. LDP Status\
    \ Codes .........................................38\n      14.4. L2TPv3 Result\
    \ Codes ......................................38\n      14.5. New IANA Registries\
    \ ......................................39\n   15. Normative References ..........................................39\n\
    \   16. Informative References ........................................40\n  \
    \ 17. Acknowledgments ...............................................42\n   18.\
    \ Contributors ..................................................42\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The PWE3 Architecture [RFC3985] defines the signaling and\n\
    \   encapsulation techniques for establishing Single-Segment Pseudowires\n   (SS-PWs)\
    \ between a pair of terminating PEs.  Multi-Segment\n   Pseudowires (MS-PWs) are\
    \ most useful in two general cases:\n       -i. In some cases it is not possible,\
    \ desirable, or feasible to\n           establish a PW control channel between\
    \ the terminating source\n           and destination PEs.  At a minimum, PW control\
    \ channel\n           establishment requires knowledge of and reachability to\
    \ the\n           remote (terminating) PE IP address.  The local (terminating)\n\
    \           PE may not have access to this information because of\n          \
    \ topology, operational, or security constraints.\n           An example is the\
    \ inter-AS L2VPN scenario where the\n           terminating PEs reside in different\
    \ provider networks (ASes)\n           and it is the practice to cryptographically\
    \ sign all control\n           traffic exchanged between two networks.  Technically,\
    \ an\n           SS-PW could be used but this would require cryptographic\n  \
    \         signatures on ALL terminating source and destination PE\n          \
    \ nodes.  An MS-PW allows the providers to confine key\n           administration\
    \ to just the PW switching points connecting the\n           two domains.\n  \
    \         A second example might involve a single AS where the PW setup\n    \
    \       path between the terminating PEs is computed by an external\n        \
    \   entity.  Assume that a full mesh of PWE3 control channels is\n           established\
    \ between PE-A, PE-B, and PE-C.  A client-layer L2\n           connection tunneled\
    \ through a PW is required between\n           terminating PE-A and PE-C.  The\
    \ external entity computes a PW\n           setup path that passes through PE-B.\
    \  This results in two\n           discrete PW segments being built: one between\
    \ PE-A and PE-B\n           and one between PE-B and PE-C.  The successful client-layer\n\
    \           L2 connection between terminating PE-A and terminating PE-C\n    \
    \       requires that PE-B performs the PWE3 switching process.\n           A\
    \ third example involves the use of PWs in hierarchical\n           IP/MPLS networks.\
    \  Access networks connected to a backbone\n           use PWs to transport customer\
    \ payloads between customer sites\n           serviced by the same access network\
    \ and up to the edge of the\n           backbone where they can be terminated\
    \ or switched onto a\n           succeeding PW segment crossing the backbone.\
    \  The use of PWE3\n           switching between the access and backbone networks\
    \ can\n           potentially reduce the PWE3 control channels and routing\n \
    \          information processed by the access network T-PEs.\n           It should\
    \ be noted that PWE3 switching does not help in any\n           way to reduce\
    \ the amount of PW state supported by each access\n           network T-PE.\n\
    \      -ii. In some applications, the signaling protocol and\n           encapsulation\
    \ on each segment of the PW are different.  The\n           terminating PEs are\
    \ connected to networks employing different\n           PW signaling and encapsulation\
    \ protocols.  In this case, it\n           is not possible to use an SS-PW.  An\
    \ MS-PW with the\n           appropriate signaling protocol interworking performed\
    \ at the\n           PW switching points can enable PW connectivity between the\n\
    \           terminating PEs in this scenario.\n   A more detailed discussion of\
    \ the requirements pertaining to MS-PWs\n   can be found in [RFC5254].\n   There\
    \ are four different mechanisms to establish PWs:\n        -i. Static configuration\
    \ of the PW (MPLS or Layer 2 Tunneling\n            Protocol version 3 (L2TPv3))\n\
    \       -ii. LDP using FEC 128 (PWid FEC Element)\n      -iii. LDP using FEC 129\
    \ (Generalized PWid FEC Element)\n       -iv. L2TPv3\n   While MS-PWs are composed\
    \ of PW segments, each PW segment cannot\n   function independently, as the PW\
    \ service is always instantiated\n   across the complete MS-PW.  Hence, no PW\
    \ segments can be signaled or\n   be operational without the complete MS-PW being\
    \ signaled at once.\n"
- title: 2.  Specification of Requirements
  contents:
  - "2.  Specification of Requirements\n   The key words \"MUST\", \"MUST NOT\", \"\
    REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [RFC2119].\n"
- title: 3.  Terminology
  contents:
  - "3.  Terminology\n   - PW Terminating Provider Edge (T-PE).  A PE where the customer-\n\
    \     facing attachment circuits (ACs) are bound to a PW forwarder.  A\n     Terminating\
    \ PE is present in the first and last segments of a\n     MS-PW.  This incorporates\
    \ the functionality of a PE as defined in\n     [RFC3985].\n   - Single-Segment\
    \ Pseudowire (SS-PW).  A PW set up directly between\n     two T-PE devices.  The\
    \ PW label is unchanged between the\n     originating and terminating T-PEs.\n\
    \   - Multi-Segment Pseudowire (MS-PW).  A static or dynamically\n     configured\
    \ set of two or more contiguous PW segments that behave\n     and function as\
    \ a single point-to-point PW.  Each end of an MS-PW\n     by definition MUST terminate\
    \ on a T-PE.\n   - PW Segment.  A part of a single-segment or multi-segment PW,\
    \ which\n     traverses one PSN tunnel in each direction between two PE devices,\n\
    \     T-PEs and/or S-PEs (switching PE).\n   - PW Switching Provider Edge (S-PE).\
    \  A PE capable of switching the\n     control and data planes of the preceding\
    \ and succeeding PW segments\n     in an MS-PW.  The S-PE terminates the PSN tunnels\
    \ of the preceding\n     and succeeding segments of the MS-PW.  It therefore includes\
    \ a PW\n     switching point for an MS-PW.  A PW switching point is never the\n\
    \     S-PE and the T-PE for the same MS-PW.  A PW switching point runs\n     necessary\
    \ protocols to set up and manage PW segments with other PW\n     switching points\
    \ and terminating PEs.  An S-PE can exist anywhere a\n     PW must be processed\
    \ or policy applied.  It is therefore not\n     limited to the edge of a provider\
    \ network.\n   - MS-PW path.  The set of S-PEs that will be traversed in sequence\
    \ to\n     form the MS-PW.\n"
- title: 4.  General Description
  contents:
  - "4.  General Description\n   A pseudowire (PW) is a mechanism that carries the\
    \ essential elements\n   of an emulated service from one PE to one or more other\
    \ PEs over a\n   PSN as described in Figure 1 and in [RFC3985].  Many providers\
    \ have\n   deployed PWs as a means of migrating existing (or building new) L2VPN\n\
    \   services (e.g., Frame Relay, ATM, or Ethernet) onto a PSN.\n   PWs may span\
    \ multiple domains of the same or different provider\n   networks.  In these scenarios,\
    \ PW control channels (i.e., targeted\n   LDP, L2TPv3) and PWs will cross AS boundaries.\n\
    \   Inter-AS L2VPN functionality is currently supported, and several\n   techniques\
    \ employing MPLS encapsulation and LDP signaling have been\n   documented [RFC4364].\
    \  It is also straightforward to support the same\n   inter-AS L2VPN functionality\
    \ employing L2TPv3.  In this document, we\n   define a methodology to switch a\
    \ PW between different Packet Switched\n   Network (PSN) domains or between two\
    \ or more distinct PW control\n   plane domains.\n         |<-------------- Emulated\
    \ Service ---------------->|\n         |                                     \
    \             |\n         |          |<-------- Pseudowire ------>|          |\n\
    \         |          |                            |          |\n         |   \
    \       |    |<-- PSN Tunnel -->|    |          |\n         |          V    V\
    \                  V    V          |\n         V    AC    +----+             \
    \     +----+     AC   V\n   +-----+    |     | PE1|==================| PE2|  \
    \   |    +-----+\n   |     |----------|............PW1.............|----------|\
    \     |\n   | CE1 |    |     |    |                  |    |     |    | CE2 |\n\
    \   |     |----------|............PW2.............|----------|     |\n   +-----+\
    \  ^ |     |    |==================|    |     | ^  +-----+\n         ^  |    \
    \   +----+                  +----+     | |  ^\n         |  |   Provider Edge 1\
    \         Provider Edge 2  |  |\n         |  |                               \
    \             |  |\n   Customer |                                            |\
    \ Customer\n   Edge 1   |                                            | Edge 2\n\
    \            |                                            |\n      native service\
    \                               native service\n                     Figure 1:\
    \ PWE3 Reference Model\n   There are two methods for switching a PW between two\
    \ PW domains.  In\n   the first method (Figure 2), the two separate control plane\
    \ domains\n   terminate on different PEs.\n                |<-------Multi-Segment\
    \ Pseudowire------->|\n                |      PSN                      PSN   \
    \   |\n            AC  |    |<-1->|                  |<-2->|    |  AC\n      \
    \      |   V    V     V                  V     V    V  |\n            |   +----+\
    \     +-----+       +----+     +----+  |\n   +----+   |   |    |=====|     | \
    \      |    |=====|    |  |    +----+\n   |    |-------|......PW1.......|--AC1--|......PW2......|-------|\
    \    |\n   | CE1|   |   |    |     |     |       |    |     |    |  |    |CE2\
    \ |\n   |    |-------|......PW3.......|--AC2--|......PW4......|-------|    |\n\
    \   +----+   |   |    |=====|     |       |    |=====|    |  |    +----+\n   \
    \     ^       +----+     +-----+       +----+     +----+       ^\n        |  \
    \       PE1        PE2          PE3         PE4        |\n        |          \
    \           ^            ^                     |\n        |                  \
    \   |            |                     |\n        |                  PW switching\
    \ points                   |\n        |                                      \
    \                  |\n        |                                              \
    \          |\n        |<-------------------- Emulated Service ---------------->|\n\
    \            Figure 2: PW Switching Using AC Reference Model\n   In Figure 2,\
    \ pseudowires in two separate PSNs are stitched together\n   using native service\
    \ attachment circuits.  PE2 and PE3 only run the\n   control plane for the PSN\
    \ to which they are directly attached.  At\n   PE2 and PE3, PW1 and PW2 are connected\
    \ using attachment circuit AC1,\n   while PW3 and PW4 are connected using attachment\
    \ circuit AC2.\n          Native  |<-----Multi-Segment Pseudowire------>|  Native\n\
    \          Service |         PSN             PSN         |  Service\n        \
    \   (AC)   |    |<-Tunnel->|     |<-Tunnel->|    |   (AC)\n             |    V\
    \    V     1    V     V    2     V    V     |\n             |    +----+      \
    \    +-----+          +----+     |\n      +----+ |    |TPE1|==========|SPE1 |==========|TPE2|\
    \     | +----+\n      |    |------|.....PW.Seg't1....X....PW.Seg't3.....|-------|\
    \    |\n      | CE1| |    |    |          |     |          |    |     | |CE2 |\n\
    \      |    |------|.....PW.Seg't2....X....PW.Seg't4.....|-------|    |\n    \
    \  +----+ |    |    |==========|     |==========|    |     | +----+\n        \
    \   ^      +----+          +-----+          +----+       ^\n           |   Provider\
    \ Edge 1       ^        Provider Edge 2   |\n           |                    \
    \     |                          |\n           |                         |   \
    \                       |\n           |                 PW switching point   \
    \              |\n           |                                               \
    \     |\n           |<----------------- Emulated Service --------------->|\n \
    \                     Figure 3: MS-PW Reference Model\n   In Figure 3, SPE1 runs\
    \ two separate control planes: one toward TPE1,\n   and one toward TPE2.  The\
    \ PW switching point (S-PE) is configured to\n   connect PW Segment 1 and PW Segment\
    \ 3 together to complete the multi-\n   segment PW between TPE1 and TPE2.  PW\
    \ Segment 1 and PW Segment 3 MUST\n   be of the same PW type, but PSN Tunnel 1\
    \ and PSN Tunnel 2 need not be\n   the same technology.  In the latter case, if\
    \ the PW is switched to a\n   different technology, the PEs must adapt the PDU\
    \ encapsulation\n   between the different PSN technologies.  In the case where\
    \ PSN Tunnel\n   1 and PSN Tunnel 2 are the same technology, the PW PDU does not\
    \ need\n   to be modified, and PDUs are then switched between the pseudowires\
    \ at\n   the PW label level.\n   It should be noted that it is possible to adapt\
    \ one PSN technology to\n   a different one, for example, MPLS over an IP encapsulation\
    \ or\n   Generic Routing Encapsulation (GRE) [RFC4023], but this is outside\n\
    \   the scope of this document.  Further, one could perform an\n   interworking\
    \ function on the PWs themselves at the S-PE, allowing\n   conversion from one\
    \ PW type to another, but this is also outside the\n   scope of this document.\n\
    \   This document describes procedures for building multi-segment\n   pseudowires\
    \ using manual configuration of the switching point PE1.\n   Other documents may\
    \ build on this base specification to automate the\n   configuration and selection\
    \ of S-PE1.  All elements of the\n   establishment of end-to-end MS-PWs including\
    \ routing and signaling\n   are out of scope of this document, and any discussion\
    \ in this\n   document serves purely as examples.  It should also be noted that\
    \ a\n   PW can traverse multiple PW switching points along it's path, and the\n\
    \   edge PEs will not require any specific knowledge of how many S-PEs\n   the\
    \ PW has traversed (though this may be reported for troubleshooting\n   purposes).\n\
    \   The general approach taken for MS-PWs is to connect the individual\n   control\
    \ planes by passing along any signaling information immediately\n   upon reception.\
    \  First, the S-PE is configured to switch a PW segment\n   from a specific peer\
    \ to another PW segment destined for a different\n   peer.  No control messages\
    \ are exchanged yet, as the S-PE does not\n   have enough information to actually\
    \ initiate the PW setup messages.\n   However, if a session does not already exist,\
    \ a control protocol\n   (LDP/L2TP) session MAY be setup.  In this model, the\
    \ MS-PW setup is\n   starting from the T-PE devices.  Once the T-PE is configured,\
    \ it\n   sends the PW control setup messages.  These messages are received by\n\
    \   the S-PE, and immediately used to form the PW setup messages for the\n   next\
    \ SS-PW of the MS-PW.\n"
- title: 5.  PW Switching and Attachment Circuit Type
  contents:
  - "5.  PW Switching and Attachment Circuit Type\n   The PWs in each PSN are established\
    \ independently, with each PSN\n   being treated as a separate PW domain.  For\
    \ example, in Figure 2 for\n   the case of MPLS PSNs, PW1 is setup between PE1\
    \ and PE2 using the LDP\n   targeted session as described in [RFC4447], and at\
    \ the same time a\n   separate pseudowire, PW2, is setup between PE3 and PE4.\
    \  The ACs for\n   PW1 and PW2 at PE2 and PE3 MUST be configured such that they\
    \ are the\n   same PW type, e.g., ATM Virtual Channel Connection (VCC), Ethernet\n\
    \   VLAN, etc.\n"
- title: 6.  Applicability
  contents:
  - "6.  Applicability\n   The general applicability of MS-PWs and their relationship\
    \ to L2VPNs\n   are described in [RFC5659].  The applicability of a PW type, as\n\
    \   specified in the relevant RFC for that encapsulation (e.g., [RFC4717]\n  \
    \ for ATM), applies to each segment.  This section describes further\n   applicability\
    \ considerations.\n   As with SS-PWs, the performance of any segment will be limited\
    \ by the\n   performance of the underlying PSN.  The performance may be further\n\
    \   degraded by the emulation process, and performance degradation may be\n  \
    \ further increased by traversing multiple PW segments.  Furthermore,\n   the\
    \ overall performance of an MS-PW is no better than the worst-\n   performing\
    \ segment of that MS-PW.\n   Since different PSN types may be able to achieve\
    \ different maximum\n   performance objectives, it is necessary to carefully consider\
    \ which\n   PSN types are used along the path of an MS-PW.\n"
- title: 7.  MPLS-PW to MPLS-PW Switching
  contents:
  - "7.  MPLS-PW to MPLS-PW Switching\n   Referencing Figure 3, T-PE1 set up PW Segment\
    \ 1 using the LDP\n   targeted session as described in [RFC4447], at the same\
    \ time a\n   separate pseudowire, PW Segment 3, is setup to T-PE2.  Each PW is\n\
    \   configured independently on the PEs, but on S-PE1, PW Segment 1 is\n   connected\
    \ to PW Segment 3.  PDUs are then switched between the\n   pseudowires at the\
    \ PW label level.  Hence, the data plane does not\n   need any special knowledge\
    \ of the specific pseudowire type.  A simple\n   standard MPLS label swap operation\
    \ is sufficient to connect the two\n   PWs, and in this case the PW adaptation\
    \ function cannot be used.\n   However, when pushing a new PSN label, the Time\
    \ to Live (TTL) SHOULD\n   be set to 255, or some other locally configured fixed\
    \ value.\n   This process can be repeated as many times as necessary; the only\n\
    \   limitation to the number of S-PEs traversed is imposed by the TTL\n   field\
    \ of the PW MPLS label.  The setting of the TTL of the PW MPLS\n   label is a\
    \ matter of local policy on the originating PE, but SHOULD\n   be set to 255.\
    \  However, if the PW PDU contains an Operations,\n   Administration, and Maintenance\
    \ (OAM) packet, then the TTL can be set\n   to the required value as explained\
    \ later in this document.\n   There are three different mechanisms for MPLS-to-MPLS\
    \ PW setup:\n        -i. Static configuration of the PW\n       -ii. LDP using\
    \ FEC 128\n      -iii. LDP using the generalized FEC 129\n      This results in\
    \ four distinct PW switching situations that are\n      significantly different\
    \ and must be considered in detail:\n        -i. Switching between two static\
    \ control planes\n       -ii. Switching between a static and a dynamic LDP control\
    \ plane\n      -iii. Switching between two LDP control planes using the same FEC\n\
    \            type\n       -iv. Switching between LDP using FEC 128 and LDP using\
    \ the\n            generalized FEC 129\n"
- title: 7.1.  Static Control Plane Switching
  contents:
  - "7.1.  Static Control Plane Switching\n   In the case of two static control planes,\
    \ the S-PE MUST be configured\n   to direct the MPLS packets from one PW into\
    \ the other.  There is no\n   control protocol involved in this case.  When one\
    \ of the control\n   planes is a simple static PW configuration and the other\
    \ control\n   plane is a dynamic LDP FEC 128 or generalized PW FEC, then the static\n\
    \   control plane should be considered similar to an attachment circuit\n   (AC)\
    \ in the reference model of Figure 1.  The switching point PE\n   SHOULD signal\
    \ the appropriate PW status if it detects a failure in\n   sending or receiving\
    \ packets over the static PW segment.  In the\n   absence of a PW status communication\
    \ mechanism when the PW is\n   statically configured, the status communicated\
    \ to the dynamic LDP PW\n   will be limited to local interface failures.  In this\
    \ case, the S-PE\n   PE behaves in a very similar manner to a T-PE, assuming an\
    \ active\n   signaling role.  This means that the S-PE will immediately send the\n\
    \   LDP Label Mapping message if the static PW is deemed to be UP.\n"
- title: 7.2.  Two LDP Control Planes Using the Same FEC Type
  contents:
  - "7.2.  Two LDP Control Planes Using the Same FEC Type\n   The S-PE SHOULD assume\
    \ an initial passive role.  This means that when\n   independent PWs are configured\
    \ on the switching point, the Label\n   Switching Router (LSR) does not advertise\
    \ the LDP PW FEC mapping\n   until it has received at least one of the two PW\
    \ LDP FECs from a\n   remote PE.  This is necessary because the switching point\
    \ LSR does\n   not know a priori what the interface parameter field in the initial\n\
    \   FEC advertisement will contain.\n   If one of the S-PEs doesn't accept an\
    \ LDP Label Mapping message, then\n   a Label Release message may be sent back\
    \ to the originator T-PE\n   depending on the cause of the error.  LDP liberal\
    \ label retention\n   mode still applies; hence, if a PE is simply not configured\
    \ yet, the\n   label mapping is stored for future use.  An MS-PW is declared UP\
    \ only\n   when all the constituent SS-PWs are UP.\n   The Pseudowire Identifier\
    \ (PWid), as defined in [RFC4447], is a\n   unique number between each pair of\
    \ PEs.  Hence, each SS-PW that forms\n   an MS-PW may have a different PWid. \
    \ In the case of the generalized\n   PW FEC, the Attachment Group Identifier (AGI)\
    \ / Source Attachment\n   Identifier (SAI) / Target Attachment Identifier (TAI)\
    \ may have to\n   also be different for some, or sometimes all, SS-PWs.\n"
- title: 7.2.1.  FEC 129 Active/Passive T-PE Election Procedure
  contents:
  - "7.2.1.  FEC 129 Active/Passive T-PE Election Procedure\n   When an MS-PW is signaled\
    \ using FEC 129, each T-PE might\n   independently start signaling the MS-PW.\
    \  If the MS-PW path is not\n   statically configured, in certain cases the signaling\
    \ procedure could\n   result in an attempt to set up each direction of the MS-PW\
    \ through\n   different S-PEs.  If an operator wishes to avoid this situation,\
    \ one\n   of the T-PEs MUST start the PW signaling (active role), while the\n\
    \   other waits to receive the LDP label mapping before sending the\n   respective\
    \ PW LDP Label Mapping message (passive role).  When the\n   MS-PW path is not\
    \ statically configured, the active T-PE (the Source\n   T-PE) and the passive\
    \ T-PE (the Target T-PE) MUST be identified\n   before signaling is initiated\
    \ for a given MS-PW.\n   The determination of which T-PE assumes the active role\
    \ SHOULD be\n   done as follows:\n   The SAII and TAII are compared as unsigned\
    \ integers; if the SAII is\n   larger, then the T-PE assumes the active role.\n\
    \   The selection process to determine which T-PE assumes the active role\n  \
    \ MAY be superseded by manual provisioning.  In this case, one of the\n   T-PEs\
    \ MUST be set to the active role, and the other one MUST be set\n   to the passive\
    \ role.\n"
- title: 7.3.  LDP Using FEC 128 to LDP Using the Generalized FEC 129
  contents:
  - "7.3.  LDP Using FEC 128 to LDP Using the Generalized FEC 129\n   When a PE is\
    \ using the generalized FEC 129, there are two distinct\n   roles that a PE can\
    \ assume: active and passive.  A PE that assumes\n   the active role will send\
    \ the LDP PW setup message, while a passive\n   role PE will simply reply to an\
    \ incoming LDP PW setup message.  The\n   S-PE will always remain passive until\
    \ a PWid FEC 128 LDP message is\n   received, which will cause the corresponding\
    \ generalized PW FEC LDP\n   message to be formed and sent.  If a generalized\
    \ FEC PW LDP message\n   is received while the switching point PE is in a passive\
    \ role, the\n   corresponding PW FEC 128 LDP message will be formed and sent.\n\
    \   PWids need to be mapped to the corresponding AGI/TAI/SAI and vice\n   versa.\
    \  This can be accomplished by local S-PE configuration, or by\n   some other\
    \ means, such as some form of auto discovery.  Such other\n   means are outside\
    \ the scope of this document.\n"
- title: 7.4.  LDP SP-PE TLV
  contents:
  - "7.4.  LDP SP-PE TLV\n   The edge-to-edge PW might traverse several switching\
    \ points, in\n   separate administrative domains.  For management and troubleshooting\n\
    \   reasons, it is useful to record information about the switching\n   points\
    \ at the S-PEs that the PW traverses.  This is accomplished by\n   using a PW\
    \ Switching Point PE TLV (SP-PE TLV).\n   Sending the SP-PE TLV is OPTIONAL; however,\
    \ the PE or S-PE MUST\n   process the TLV upon reception.  The \"U\" bit MUST\
    \ be set for backward\n   compatibility with T-PEs that do not support the MS-PW\
    \ extensions\n   described in the document.  The SP-PE TLV MAY appear only once\
    \ for\n   each switching point traversed, and it cannot be of length zero.  The\n\
    \   SP-PE TLV is appended to the PW FEC at each S-PE, and the order of\n   the\
    \ SP-PE TLVs in the LDP message MUST be preserved.  The SP-PE TLV\n   is necessary\
    \ to support some of the Virtual Circuit Connectivity\n   Verification (VCCV)\
    \ functions for MS-PWs.  See Section 9.5 for more\n   details.  The SP-PE TLV\
    \ is encoded as follows:\n    0                   1                   2      \
    \             3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8\
    \ 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |1|0|      SP-PE TLV (0x096D)   |        SP-PE TLV Length       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   | Sub-TLV Type  |    Length     |    Variable Length Value      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                       Variable Length Value                   |\n   |  \
    \                         \"      \"      \"                     |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      - SP-PE TLV Length\n        Specifies the total length of all the following\
    \ SP-PE TLV fields\n        in octets.\n      - Sub-TLV Type\n        Encodes\
    \ how the Value field is to be interpreted.\n      - Length\n        Specifies\
    \ the length of the Value field in octets.\n      - Value\n        Octet string\
    \ of Length octets that encodes information to be\n        interpreted as specified\
    \ by the Type field.\n   PW Switching Point PE sub-TLV Types are assigned by IANA\
    \ according to\n        the process defined in Section 14 (IANA Considerations)\
    \ below.\n        For local policy reasons, a particular S-PE can filter out all\n\
    \        SP-PE TLVs in a Label Mapping message that traverses it and not\n   \
    \     include its own SP-PE TLV.  In this case, from any upstream PE,\n      \
    \  it will appear as if this particular S-PE is the T-PE.  This\n        might\
    \ be necessary, depending on local policy, if the S-PE is at\n        the service\
    \ provider administrative boundary.  It should also be\n        noted that because\
    \ there are no SP-PE TLVs describing the path\n        beyond the S-PE that removed\
    \ them, VCCV will only work as far as\n        that S-PE.\n"
- title: 7.4.1.  PW Switching Point PE Sub-TLVs
  contents:
  - "7.4.1.  PW Switching Point PE Sub-TLVs\n   The SP-PE TLV contains sub-TLVs that\
    \ describe various characteristics\n   of the S-PE traversed.  The SP-PE TLV MUST\
    \ contain the appropriate\n   mandatory sub-TLVs specified below.  The definitions\
    \ of the PW\n   Switching Point PE sub-TLVs are as follows:\n      - PWid of last\
    \ PW segment traversed.\n        This is only applicable if the last PW segment\
    \ traversed used\n        LDP FEC 128 to signal the PW.  This sub-TLV type contains\
    \ a PWid\n        in the format of the PWid described in [RFC4447].  This is just\n\
    \        a 32-bit unsigned integer number.\n      - PW Switching Point description\
    \ string.\n        An OPTIONAL description string of text up to 80 characters\
    \ long.\n        Human-readable text MUST be provided in the UTF-8 character set\n\
    \        using the Default Language [RFC2277].\n      - Local IP address of PW\
    \ Switching Point.\n        The local IPv4 or IPv6 address of the PW Switching\
    \ Point.  This\n        is an OPTIONAL Sub-TLV.  In most cases, this will be the\
    \ local\n        LDP session IP address of the S-PE.\n      - Remote IP address\
    \ of the last PW Switching Point traversed or of\n        the T-PE.\n        The\
    \ IPv4 or IPv6 address of the last PW Switching Point\n        traversed or of\
    \ the T-PE.  This is an OPTIONAL Sub-TLV.  In most\n        cases, this will be\
    \ the remote IP address of the LDP session.\n        This Sub-TLV SHOULD only\
    \ be included if there are no other SP-PE\n        TLVs present from other S-PEs,\
    \ or if the remote IP address of\n        the LDP session does not correspond\
    \ to the \"Local IP address of\n        PW Switching Point\" TLV value contained\
    \ in the last SP-PE TLV.\n      - The FEC element of last PW segment traversed.\n\
    \        This is only applicable if the last PW segment traversed used\n     \
    \   LDP FEC 129 to signal the PW.\n   The FEC element of the last PW segment traversed.\
    \  This is encoded in\n   the following format:\n    0                   1   \
    \                2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6\
    \ 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |   AGI Type    |    Length     |      Value                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   ~                    AGI Value (contd.)                         ~\n   |  \
    \                                                             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |   AII Type    |    Length     |      Value                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   ~                   SAII Value (contd.)                         ~\n   |  \
    \                                                             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |   AII Type    |    Length     |      Value                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   ~                   TAII Value (contd.)                         ~\n   |  \
    \                                                             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      - L2 PW address of the PW Switching Point (recommended format).\n     \
    \   This sub-TLV type contains an L2 PW address of PW Switching\n        Point\
    \ in the format described in Section 3.2 of [RFC5003].  This\n        includes\
    \ the AII type field and length, as well as the L2 PW\n        address with the\
    \ AC ID field set to zero.\n"
- title: 7.4.2.  Adaptation of Interface Parameters
  contents:
  - "7.4.2.  Adaptation of Interface Parameters\n   [RFC4447] defines several interface\
    \ parameters, which are used by the\n   Network Service Processing (NSP) to adapt\
    \ the PW to the attachment\n   circuit (AC).  The interface parameters are only\
    \ used at the\n   endpoints, and MUST be passed unchanged across the S-PE.  However,\n\
    \   the following interface parameters MAY be modified as follows:\n      - 0x03\
    \ Optional Interface Description string\n        This Interface parameter MAY\
    \ be modified or altogether removed\n        from the FEC element depending on\
    \ local configuration policies.\n      - 0x09 Fragmentation indicator\n      \
    \  This parameter MAY be inserted in the FEC by the switching point\n        if\
    \ it is capable of re-assembly of fragmented PW frames\n        according to [RFC4623].\n\
    \      - 0x0C VCCV parameter\n        This Parameter contains the Control Channel\
    \ (CC) type and\n        Connectivity Verification (CV) type bit fields.  The\
    \ CV type bit\n        field MUST be reset to reflect the CV type supported by\
    \ the\n        S-PE.  The CC type bit field MUST have bit 1 \"Type 2: MPLS\n \
    \       Router Alert Label\" set to 0.  The other bit fields MUST be\n       \
    \ reset to reflect the CC type supported by the S-PE.\n"
- title: 7.5.  Group ID
  contents:
  - "7.5.  Group ID\n   The Group ID (GR ID) is used to reduce the number of status\
    \ messages\n   that need to be sent by the PE advertising the PW FEC.  The GR\
    \ ID has\n   local significance only, and therefore MUST be mapped to a unique\
    \ GR\n   ID allocated by the S-PE.\n"
- title: 7.6.  PW Loop Detection
  contents:
  - "7.6.  PW Loop Detection\n   A switching point PE SHOULD inspect the PW Switching\
    \ Point PE TLV, to\n   verify that its own IP address does not appear in it. \
    \ If the PE's IP\n   address appears in a received PW Switching Point PE TLV,\
    \ the PE\n   SHOULD break the loop and send a label release message with the\n\
    \   following error code:\n      Value        E   Description\n      0x0000003A\
    \   0   PW Loop Detected\n   If an S-PE along the MS-PW removed all SP-PE TLVs,\
    \ as mentioned\n   above, this loop detection method will fail.\n"
- title: 8.  MPLS-PW to L2TPv3-PW Control Plane Switching
  contents:
  - "8.  MPLS-PW to L2TPv3-PW Control Plane Switching\n   Both MPLS and L2TPv3 PWs\
    \ may be static or dynamic.  This results in\n   four possibilities when switching\
    \ between L2TPv3 and MPLS.\n        -i. Switching between static MPLS and L2TPv3\
    \ PWs\n       -ii. Switching between a static MPLS PW and a dynamic L2TPv3 PW\n\
    \      -iii. Switching between a static L2TPv3 PW and a dynamic LDP/MPLS\n   \
    \         PW\n       -iv. Switching between a dynamic LDP/MPLS PW and a dynamic\
    \ L2TPv3\n            PW\n"
- title: 8.1.  Static MPLS and L2TPv3 PWs
  contents:
  - "8.1.  Static MPLS and L2TPv3 PWs\n   In the case of two static control planes,\
    \ the S-PE MUST be configured\n   to direct packets from one PW into the other.\
    \  There is no control\n   protocol involved in this case.  The configuration\
    \ MUST include which\n   MPLS PW Label maps to which L2TPv3 Session ID (and associated\
    \ Cookie,\n   if present) as well as which MPLS Tunnel Label maps to which PE\n\
    \   destination IP address.\n"
- title: 8.2.  Static MPLS PW and Dynamic L2TPv3 PW
  contents:
  - "8.2.  Static MPLS PW and Dynamic L2TPv3 PW\n   When a statically configured MPLS\
    \ PW is switched to a dynamic L2TPv3\n   PW, the static control plane should be\
    \ considered identical to an\n   attachment circuit (AC) in the reference model\
    \ of Figure 1.  The\n   switching point PE SHOULD signal the appropriate PW status\
    \ if it\n   detects a failure in sending or receiving packets over the static\
    \ PW.\n   Because the PW is statically configured, the status communicated to\n\
    \   the dynamic L2TPv3 PW will be limited to local interface failures.\n   In\
    \ this case, the S-PE behaves in a very similar manner to a T-PE,\n   assuming\
    \ an active role.\n"
- title: 8.3.  Static L2TPv3 PW and Dynamic LDP/MPLS PW
  contents:
  - "8.3.  Static L2TPv3 PW and Dynamic LDP/MPLS PW\n   When a statically configured\
    \ L2TPv3 PW is switched to a dynamic\n   LDP/MPLS PW, then the static control\
    \ plane should be considered\n   identical to an attachment circuit (AC) in the\
    \ reference model of\n   Figure 1.  The switching point PE SHOULD signal the appropriate\
    \ PW\n   status (via an L2TPv3 Set-Link-Info (SLI) message) if it detects a\n\
    \   failure in sending or receiving packets over the static PW.  Because\n   the\
    \ PW is statically configured, the status communicated to the\n   dynamic LDP/MPLS\
    \ PW will be limited to local interface failures.  In\n   this case, the S-PE\
    \ behaves in a very similar manner to a T-PE,\n   assuming an active role.\n"
- title: 8.4.  Dynamic LDP/MPLS and L2TPv3 PWs
  contents:
  - "8.4.  Dynamic LDP/MPLS and L2TPv3 PWs\n   When switching between dynamic PWs,\
    \ the switching point always\n   assumes an initial passive role.  Thus, it does\
    \ not initiate an\n   LDP/MPLS or L2TPv3 PW until it has received a connection\
    \ request\n   (Label Mapping or Incoming-Call-Request (ICRQ)) from one side of\
    \ the\n   node.  Note that while MPLS PWs are made up of two unidirectional\n\
    \   Label Switched Paths (LSPs) bonded together by FEC identifiers,\n   L2TPv3\
    \ PWs are bidirectional in nature, setup via a three-message\n   exchange (ICRQ,\
    \ Incoming-Call-Reply (ICRP), and Incoming-Call-\n   Connected (ICCN)).  Details\
    \ of Session Establishment, Tear Down, and\n   PW Status signaling are detailed\
    \ below.\n"
- title: 8.4.1.  Session Establishment
  contents:
  - "8.4.1.  Session Establishment\n   When the S-PE receives an L2TPv3 ICRQ message,\
    \ the identifying AVPs\n   included in the message are mapped to FEC identifiers\
    \ and sent in an\n   LDP Label Mapping message.  Conversely, if an LDP Label Mapping\n\
    \   message is received, it is either mapped to an ICRP message or causes\n  \
    \ an L2TPv3 session to be initiated by sending an ICRQ.\n   Following are two\
    \ example exchanges of messages between LDP and\n   L2TPv3.  The first is a case\
    \ where an L2TPv3 T-PE initiates an MS-PW;\n   the second is a case where an MPLS\
    \ T-PE initiates an MS-PW.\n         PE 1 (L2TPv3)      PW Switching Node    \
    \   PE3 (MPLS/LDP)\n           AC \"Up\"\n           L2TPv3 ICRQ --->\n      \
    \                      LDP Label Mapping  --->\n                             \
    \                          AC \"Up\"\n                                       \
    \       <--- LDP Label Mapping\n                      <--- L2TPv3 ICRP\n     \
    \      L2TPv3 ICCN  --->\n         <-------------------- MS-PW Established ------------------>\n\
    \         PE 1 (MPLS/LDP)      PW Switching Node       PE3 (L2TPv3)\n        \
    \   AC \"Up\"\n           LDP Label Mapping --->\n                           \
    \      L2TPv3 ICRQ  --->\n                                                 <---\
    \ L2TPv3 ICRP\n                            <--- LDP Label Mapping\n          \
    \                       L2TPv3 ICCN --->\n                                   \
    \                   AC \"Up\"\n         <-------------------- MS-PW Established\
    \ ------------------>\n"
- title: 8.4.2.  Adaptation of PW Status Message
  contents:
  - "8.4.2.  Adaptation of PW Status Message\n   L2TPv3 uses the SLI message to indicate\
    \ an interface status change\n   (such as the interface transitioning from \"\
    Up\" or \"Down\").  MPLS/LDP\n   PWs either signal this via an LDP Label Withdraw\
    \ or the PW Status\n   Notification message defined in Section 4.4 of [RFC4447].\
    \  The LDP\n   status TLV bit SHOULD be mapped to the L2TPv3 equivalent Extended\n\
    \   Circuit Status Values TLV specified in [RFC5641].\n"
- title: 8.4.3.  Session Tear Down
  contents:
  - "8.4.3.  Session Tear Down\n   L2TPv3 uses a single message, Call-Disconnect-Notify\
    \ (CDN), to tear\n   down a pseudowire.  The CDN message translates to a Label\
    \ Withdraw\n   message in LDP.  Following are two example exchanges of messages\n\
    \   between LDP and L2TPv3.  The first is a case where an L2TPv3 T-PE\n   initiates\
    \ the termination of an MS-PW; the second is a case where an\n   MPLS T-PE initiates\
    \ the termination of an MS-PW.\n      PE 1 (L2TPv3)      PW Switching Node   \
    \    PE3 (MPLS/LDP)\n      AC \"Down\"\n        L2TPv3 CDN --->\n            \
    \             LDP Label Withdraw  --->\n                                     \
    \               AC \"Down\"\n                                         <-- LDP\
    \ Label Release\n      <--------------- MS-PW Data Path Down ------------------>\n\
    \      PE 1 (MPLS LDP)     PW Switching Node       PE3 (L2TPv3)\n      AC \"Down\"\
    \n      LDP Label Withdraw  --->\n                              L2TPv3 CDN -->\n\
    \                          <-- LDP Label Release\n                           \
    \                         AC \"Down\"\n      <---------------- MS-PW Data Path\
    \ Down ------------------>\n"
- title: 8.5.  Adaptation of L2TPv3 AVPs to Interface Parameters
  contents:
  - "8.5.  Adaptation of L2TPv3 AVPs to Interface Parameters\n   [RFC4447] defines\
    \ several interface parameters that MUST be mapped to\n   the equivalent AVPs\
    \ in L2TPv3 setup messages.\n      * Interface MTU\n        The Interface MTU\
    \ parameter is mapped directly to the L2TP\n        \"Interface Maximum Transmission\
    \ Unit\" AVP defined in [RFC4667].\n      * Max Number of Concatenated ATM cells\n\
    \        This interface parameter is mapped directly to the L2TP \"ATM\n     \
    \   Maximum Concatenated Cells AVP\" described in Section 6 of\n        [RFC4454].\n\
    \      * PW Type\n        The PW Type defined in [RFC4446] is mapped to the L2TPv3\n\
    \        \"Pseudowire Type\" AVP defined in [RFC3931].\n      * PWid (FEC 128)\n\
    \        For FEC 128, the PWid is mapped directly to the L2TPv3 \"Remote\n   \
    \     End ID\" AVP defined in [RFC3931].\n      * Generalized FEC 129 SAI/TAI\n\
    \        Section 4.3 of [RFC4667] defines how to encode the SAI and TAI\n    \
    \    parameters.  These can be mapped directly.\n   Other interface parameter\
    \ mappings are unsupported when switching\n   between LDP/MPLS and L2TPv3 PWs.\n"
- title: 8.6.  PW Switching Point PE TLV in L2TPv3
  contents:
  - "8.6.  PW Switching Point PE TLV in L2TPv3\n   When translating between LDP and\
    \ L2TPv3 control messages, the PW\n   Switching Point PE TLV described earlier\
    \ in this document is carried\n   in a single variable-length L2TP AVP present\
    \ in the ICRQ and ICRP\n   messages, and optionally in the ICCN message.\n   The\
    \ L2TP \"PW Switching Point AVP\" is Attribute Type 101.  The AVP MAY\n   be hidden\
    \ (the L2TP AVP H-bit may be 0 or 1), the length of the AVP\n   is 6 plus the\
    \ length of the series of Switching Point PE sub-TLVs\n   included in the AVP,\
    \ and the AVP MUST NOT be marked Mandatory (the\n   L2TP AVP M-bit MUST be 0).\n"
- title: 8.7.  L2TPv3 and MPLS PW Data Plane
  contents:
  - "8.7.  L2TPv3 and MPLS PW Data Plane\n   When switching between an MPLS and L2TP\
    \ PW, packets are sent in their\n   entirety from one PW to the other, replacing\
    \ the MPLS label stack\n   with the L2TPv3 and IP header or vice versa.\n   Section\
    \ 5.4 of [RFC3985] discusses the purpose of the various shim\n   headers necessary\
    \ for enabling a pseudowire over an IP or MPLS PSN.\n   For L2TPv3, the Payload\
    \ Convergence and Sequencing function is\n   carried out via the Default L2-Specific\
    \ Sublayer defined in\n   [RFC3931].  For MPLS, these two functions (together\
    \ with PSN\n   Convergence) are carried out via the MPLS Control Word.  Since\
    \ these\n   functions are different between MPLS and L2TPv3, interworking between\n\
    \   the two may be necessary.\n   The L2TP L2-Specific Sublayer and MPLS Control\
    \ Word are shim headers,\n   which in some cases are not necessary to be present\
    \ at all.  For\n   example, an Ethernet PW with sequencing disabled will generally\
    \ not\n   require an MPLS Control Word or L2TP Default L2-Specific Sublayer to\n\
    \   be present at all.  In this case, Ethernet frames are simply sent\n   from\
    \ one PW to the other without any modification beyond the MPLS and\n   L2TP/IP\
    \ encapsulation and decapsulation.\n   The following section offers guidelines\
    \ for how to interwork between\n   L2TP and MPLS for those cases where the Payload\
    \ Convergence,\n   Sequencing, or PSN Convergence functions are necessary on one\
    \ or both\n   sides of the switching node.\n"
- title: 8.7.1.  Mapping the MPLS Control Word to L2TP
  contents:
  - "8.7.1.  Mapping the MPLS Control Word to L2TP\n   The MPLS Control Word consists\
    \ of (from left to right):\n    0                   1                   2    \
    \               3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7\
    \ 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |0 0 0 0|  Reserved |   Length  |     Sequence Number           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \        -i. These bits are always zero in an MPLS PW PDU.  It is not\n      \
    \      necessary to map them to L2TP.\n       -ii. These six bits may be used\
    \ for Payload Convergence depending\n            on the PW type.  For ATM, the\
    \ first four of these bits are\n            defined in [RFC4717].  These map directly\
    \ to the bits\n            defined in [RFC4454].  For Frame Relay, these bits\
    \ indicate\n            how to set the bits in the Frame Relay header that must\
    \ be\n            regenerated for L2TP as it carries the Frame Relay header\n\
    \            intact.\n      -iii. L2TP determines its payload length from IP.\
    \  Thus, this\n            Length field need not be carried directly to L2TP.\
    \  This\n            Length field will have to be calculated and inserted for\n\
    \            MPLS when necessary.\n       -iv. The Default L2-Specific Sublayer\
    \ has a sequence number with\n            different semantics than that of the\
    \ MPLS Control Word.\n            This difference eliminates the possibility of\
    \ supporting\n            sequencing across the MS-PW by simply carrying the sequence\n\
    \            number through the switching point transparently.  As such,\n   \
    \         sequence numbers MAY be supported by checking the sequence\n       \
    \     numbers of packets arriving at the switching point and\n            regenerating\
    \ a new sequence number in the appropriate format\n            for the PW on egress.\
    \  If this type of sequence interworking\n            at the switching node is\
    \ not supported, and a T-PE requests\n            sequencing of all packets via\
    \ the L2TP control channel\n            during session setup, the switching node\
    \ SHOULD NOT allow\n            the session to be established by sending a CDN\
    \ message with\n            Result Code set to 31 \"Sequencing not supported\"\
    .\n"
- title: 9.  Operations, Administration, and Maintenance (OAM)
  contents:
  - '9.  Operations, Administration, and Maintenance (OAM)

    '
- title: 9.1.  Extensions to VCCV to Support MS-PWs
  contents:
  - "9.1.  Extensions to VCCV to Support MS-PWs\n   Single-segment pseudowires are\
    \ signaled using the Virtual Circuit\n   Connectivity Verification (VCCV) parameter\
    \ included in the interface\n   parameter field of the PWid FEC TLV or the interface\
    \ parameter sub-\n   TLV of the Generalized PWid FEC TLV as described in [RFC5085].\
    \  When\n   a switching point exists between PE nodes, it is required to be able\n\
    \   to continue operating VCCV end-to-end across a switching point and to\n  \
    \ provide the ability to trace the path of the MS-PW over any number of\n   segments.\n\
    \   This document provides a method for achieving these two objectives.\n   This\
    \ method is based on reusing the existing VCCV Control Word (CW)\n   and decrementing\
    \ the TTL of the PW label at each S-PE in the path of\n   the MS-PW.\n"
- title: 9.2.  OAM from MPLS PW to L2TPv3 PW
  contents:
  - "9.2.  OAM from MPLS PW to L2TPv3 PW\n   When an MS-PW includes SS-PWs that use\
    \ the L2TPv3, the MPLS PW OAM\n   MUST be terminated at the S-PE connecting the\
    \ L2TPv3 and MPLS\n   segments.  Status information received in a particular PW\
    \ segment can\n   then be used to generate the appropriate status messages on\
    \ the\n   following PW segment.  In the case of L2TPV3, the status bits in the\n\
    \   circuit status AVP defined in Section 5.4.5 of [RFC3931] and Extended\n  \
    \ Circuit Status Values defined in [RFC5641] can be mapped directly to\n   the\
    \ PW status bits defined in Section 5.4.3 of [RFC4447].\n   VCCV messages are\
    \ specific to the MPLS data plane and cannot be used\n   for an L2TPv3 PW segment.\
    \  Therefore, the S-PE MUST NOT send the VCCV\n   parameter included in the interface\
    \ parameter field of the PWid FEC\n   TLV or the sub-TLV interface parameter of\
    \ the Generalized PWid FEC\n   TLV.  It might be possible to translate VCCV messages\
    \ from L2TPv3 PW\n   segments to MPLS PW segments and vice versa; however, this\
    \ topic is\n   left for further study.\n"
- title: 9.3.  OAM Data Plane Indication from MPLS PW to MPLS PW
  contents:
  - "9.3.  OAM Data Plane Indication from MPLS PW to MPLS PW\n   As stated above,\
    \ the S-PE MUST perform a standard MPLS label swap\n   operation on the MPLS PW\
    \ label.  By the rules defined in [RFC3032],\n   the PW label TTL MUST be decreased\
    \ at every S-PE.  Once the PW label\n   TTL reaches the value of 0, the packet\
    \ is sent to the control plane\n   to be processed.  Hence, by controlling the\
    \ PW TTL value of the PW\n   label, it is possible to select exactly which S-PE\
    \ will respond to\n   the VCCV packet.\n"
- title: 9.4.  Signaling OAM Capabilities for Switched Pseudowires
  contents:
  - "9.4.  Signaling OAM Capabilities for Switched Pseudowires\n   Similarly to SS-PW,\
    \ MS-PW VCCV capabilities are signaled using the\n   VCCV parameter included in\
    \ the interface parameter field of the PWid\n   FEC TLV or the sub-TLV interface\
    \ parameter of the Generalized PWid\n   FEC TLV as described in [RFC5085].\n \
    \  In Figure 3, T-PE1 uses the VCCV parameter included in the interface\n   parameter\
    \ field of the PWid FEC TLV or the sub-TLV interface\n   parameter of the Generalized\
    \ PWid FEC TLV to indicate to the far-end\n   T-PE2 what VCCV capabilities T-PE1\
    \ supports.  This is the same VCCV\n   parameter as would be used if T-PE1 and\
    \ T-PE2 were connected\n   directly.  S-PE2, which is a PW switching point, as\
    \ part of the\n   adaptation function for interface parameters, processes locally\
    \ the\n   VCCV parameter then passes it to T-PE2.  If there were multiple S-PEs\n\
    \   on the path between T-PE1 and T-PE2, each would carry out the same\n   processing,\
    \ passing along the VCCV parameter.  The local processing\n   of the VCCV parameter\
    \ removes CC Types specified by the originating\n   T-PE that are not supported\
    \ on the S-PE.  For example, if T-PE1\n   indicates that it supports CC Types\
    \ 1, 2, and 3, then the S-PE\n   removes the Router Alert CC Type 2, leaving the\
    \ rest of the TLV\n   unchanged, and passes the modified VCCV parameter to the\
    \ next S-PE\n   along the path.\n   The far end T-PE (T-PE2) receives the VCCV\
    \ parameter indicating only\n   the CC Types that are supported by the initial\
    \ T-PE (T-PE1) and all\n   S-PEs along the PW path.\n"
- title: 9.5.  OAM Capability for MS-PWs Demultiplexed Using MPLS
  contents:
  - "9.5.  OAM Capability for MS-PWs Demultiplexed Using MPLS\n   The VCCV parameter\
    \ ID is defined as follows in [RFC4446]:\n      Parameter ID   Length     Description\n\
    \        0x0c           4           VCCV\n   The format of the VCCV parameter\
    \ field is as follows:\n    0                   1                   2        \
    \           3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9\
    \ 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |      0x0c     |       0x04    |   CC Types    |   CV Types    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      Bit 0 (0x01) - Type 1: PWE3 Control Word with 0001b as\n              \
    \       first nibble as defined in [RFC4385]\n      Bit 1 (0x02) - Type 2: MPLS\
    \ Router Alert Label\n      Bit 2 (0x04) - Type 3: MPLS Demultiplexor PW Label\
    \ with\n                     TTL == 1 (Type 3).\n"
- title: 9.5.1.  MS-PW and VCCV CC Type 1
  contents:
  - "9.5.1.  MS-PW and VCCV CC Type 1\n   VCCV CC Type 1 can be used for MS-PWs. \
    \ However, if the CW is enabled\n   on user packets, VCCV CC Type 1 MUST be used\
    \ according to the rules\n   in [RFC5085].  When using CC Type 1 for MS-PWs, the\
    \ PE transmitting\n   the VCCV packet MUST set the TTL to the appropriate value\
    \ to reach\n   the destination S-PE.  However, if the packet is destined for the\n\
    \   T-PE, the TTL can be set to any value that is sufficient for the\n   packet\
    \ to reach the T-PE.\n"
- title: 9.5.2.  MS-PW and VCCV CC Type 2
  contents:
  - "9.5.2.  MS-PW and VCCV CC Type 2\n   VCCV CC Type 2 is not supported for MS-PWs\
    \ and MUST be removed from a\n   VCCV parameter field by the S-PE.\n"
- title: 9.5.3.  MS-PW and VCCV CC Type 3
  contents:
  - "9.5.3.  MS-PW and VCCV CC Type 3\n   VCCV CC Type 3 can be used for MS-PWs; however,\
    \ if the CW is enabled,\n   VCCV Type 1 is preferred according to the rules in\
    \ [RFC5085].  Note\n   that for using the VCCV Type 3, TTL method, the PE will\
    \ set the PW\n   label TTL to the appropriate value necessary to reach the target\
    \ PE;\n   otherwise, the VCCV packet might be forwarded over the AC to the\n \
    \  Customer Premise Equipment (CPE).\n"
- title: 9.6.  MS-PW VCCV Operations
  contents:
  - "9.6.  MS-PW VCCV Operations\n   This document specifies four VCCV operations:\n\
    \        -i. End-to-end MS-PW connectivity verification.  This operation\n   \
    \         enables the connectivity of the MS-PW to be tested from\n          \
    \  source T-PE to destination T-PE.  In order to do this, the\n            sending\
    \ T-PE must include the FEC used in the last segment\n            of the MS-PW\
    \ to the destination T-PE in the VCCV-Ping echo\n            request.  This information\
    \ is either configured at the\n            sending T-PE or is obtained by processing\
    \ the corresponding\n            sub-TLVs of the optional SP-PE TLV, as described\
    \ below.\n       -ii. Partial MS-PW connectivity verification.  This operation\n\
    \            enables the connectivity of any contiguous subset of the\n      \
    \      segments of an MS-PW to be tested from the source T-PE or a\n         \
    \   source S-PE to a destination S-PE or T-PE.  Again, the FEC\n            used\
    \ on the last segment to be tested must be included in\n            the VCCV-Ping\
    \ echo request message.  This information is\n            determined by the sending\
    \ T-PE or S-PE as in (i) above.\n      -iii. MS-PW path verification.  This operation\
    \ verifies the path\n            of the MS-PW, as returned by the SP-PE TLV, against\
    \ the\n            actual data path of the MS-PW.  The sending T-PE or S-PE\n\
    \            iteratively sends a VCCV echo request to each S-PE along the\n  \
    \          MS-PW path, using the FEC for the corresponding MS-PW\n           \
    \ segment in the SP-PE TLV.  If the SP-PE TLV information is\n            correct,\
    \ then a VCCV echo reply showing that this is a valid\n            router for\
    \ the FEC will be received.  However, if the SP-PE\n            TLV information\
    \ is incorrect, then this operation enables\n            the first incorrect switching\
    \ point to be determined, but\n            not the actual path of the MS-PW beyond\
    \ that.  This\n            operation cannot be used when the MS-PW is statically\n\
    \            configured or when the SP-PE TLV is not supported.  The\n       \
    \     processing of the PW Switching Point PE TLV used for this\n            operation\
    \ is described below.  This operation is OPTIONAL.\n       -iv. MS-PW path trace.\
    \  This operation traces the data path of\n            the MS-PW using FECs included\
    \ in the Target FEC stack TLV\n            [RFC4379] returned by S-PEs or T-PEs\
    \ in an echo reply\n            message.  The sending T-PE or S-PE uses this information\
    \ to\n            recursively test each S-PE along the path of the MS-PW in a\n\
    \            single operation in a similar manner to LSP trace.  This\n      \
    \      operation is able to determine the actual data path of the\n          \
    \  MS-PW, and can be used for both statically configured and\n            signaled\
    \ MS-PWs.  Support for this operation is OPTIONAL.\n   Note that the above operations\
    \ rely on intermediate S-PEs and/or the\n   destination T-PE to include the PW\
    \ Switching Point PE TLV as a part\n   of the MS-PW setup process, or to include\
    \ the Target FEC stack TLV in\n   the VCCV echo reply message.  For various reasons,\
    \ e.g., privacy or\n   security of the S-PE/T-PE, this information may not be\
    \ available to\n   the source T-PE.  In these cases, manual configuration of the\
    \ FEC MAY\n   still be used.\n"
- title: 9.6.1.  VCCV Echo Message Processing
  contents:
  - "9.6.1.  VCCV Echo Message Processing\n   The challenge for the control plane\
    \ is to be able to build the VCCV\n   echo request packet with the necessary information\
    \ to reach the\n   desired S-PE or T-PE, for example, the target FEC 128 PW sub-TLV\
    \ of\n   the downstream PW segment that the packet is destined for.  This\n  \
    \ could be even more difficult in situations in which the MS-PW spans\n   different\
    \ providers and Autonomous Systems.\n   For example, in Figure 3, T-PE1 has the\
    \ FEC 128 of the segment (PW\n   segment 1), but it does not readily have the\
    \ information required to\n   compose the FEC 128 of the following segment (PW\
    \ segment 3), if a\n   VCCV echo request is to be sent to T-PE2.  This can be\
    \ achieved by\n   the methods described in the following subsections.\n"
- title: 9.6.1.1.  Sending a VCCV Echo Request
  contents:
  - "9.6.1.1.  Sending a VCCV Echo Request\n   When performing a partial or end-to-end\
    \ connectivity or path\n   verification, the sender of the echo request message\
    \ requires the FEC\n   of the last segment to the target S-PE/T-PE node.  This\
    \ information\n   can either be configured manually or be obtained by inspecting\
    \ the\n   corresponding sub-TLVs of the PW Switching Point PE TLV.\n   The necessary\
    \ SP-PE sub-TLVs are:\n      Type Description\n      0x01 PWid of last PW segment\
    \ traversed\n      0x03 Local IP address of PW Switching Point\n      0x04 Remote\
    \ IP address of last PW Switching Point traversed or\n           of the T-PE\n\
    \   When performing an OPTIONAL MS-PW path trace operation, the T-PE will\n  \
    \ automatically learn the target FEC by probing, one by one, the S-PEs\n   of\
    \ the MS-PW path, using the FEC returned in the Target FEC stack of\n   the previous\
    \ VCCV echo reply.\n"
- title: 9.6.1.2.  Receiving a VCCV Echo Request
  contents:
  - "9.6.1.2.  Receiving a VCCV Echo Request\n   Upon receiving a VCCV echo request,\
    \ the control plane on S-PEs (or\n   the target node of each segment of the MS-PW)\
    \ validates the request\n   and responds to the request with an echo reply consisting\
    \ of a return\n   code of 8 (label switched at stack depth) indicating that it\
    \ is an\n   S-PE and not the egress router for the MS-PW.\n   S-PEs that wish\
    \ to reveal their downstream next-hop in a trace\n   operation should include\
    \ the FEC of the downstream PW segment in the\n   Target FEC stack (as per Sections\
    \ 3.2 and 4.5 of [RFC4379]) of the\n   echo reply message.  FEC 128 PWs MUST use\
    \ the format shown in Section\n   3.2.9 of [RFC4379] for the sub-TLV in the Target\
    \ FEC stack, while FEC\n   129 PWs MUST use the format shown in Section 3.2.10\
    \ of [RFC4379] for\n   the sub-TLV in the Target FEC stack.  Note that an S-PE\
    \ MUST NOT\n   include this FEC information in the reply if it has been configured\n\
    \   not to do so for administrative reasons or for reasons explained\n   previously.\n\
    \   If the node is the T-PE or the egress node of the MS-PW, it responds\n   to\
    \ the echo request with an echo reply with a return code of 3\n   (Egress Router).\n"
- title: 9.6.1.3.  Receiving a VCCV Echo Reply
  contents:
  - "9.6.1.3.  Receiving a VCCV Echo Reply\n   The operation to be taken by the node\
    \ receiving the echo reply in\n   response to an echo request depends on the VCCV\
    \ mode of operation\n   described above.  See Section 9.5.2 for detailed procedures.\n"
- title: 9.6.2.  Detailed VCCV Procedures
  contents:
  - "9.6.2.  Detailed VCCV Procedures\n   There are two similar methods of verifying\
    \ the MS-PW path: Path Trace\n   and Path Verification.  Path Trace does not use\
    \ the LDP control plane\n   to obtain information on the path to verify, so this\
    \ method is well\n   suited if portions of the MS-PW are statically configured\
    \ SS-PWs.\n   The Path Verification method relies on information obtained from\
    \ the\n   LDP control plane, and hence offers better verification of the\n   current\
    \ forwarding behavior compared to the LDP signaled forwarding\n   information\
    \ of the MS-PW path.  However, in the case where there are\n   statically signaled\
    \ SS-PWs in the MS-PW path, the path information is\n   unavailable and must be\
    \ programmed manually.\n"
- title: 9.6.2.1.  End-to-End Connectivity Verification between T-PEs
  contents:
  - "9.6.2.1.  End-to-End Connectivity Verification between T-PEs\n   In Figure 3,\
    \ if T-PE1, S-PE, and T-PE2 support Control Word, the PW\n   control plane will\
    \ automatically negotiate the use of the CW.  VCCV\n   CC Type 3 will function\
    \ correctly whether or not the CW is enabled on\n   the PW.  However, VCCV Type\
    \ 1 (which can be use for end-to-end\n   verification only) is only supported\
    \ if the CW is enabled.\n   At the S-PE, the data path operations include an outer\
    \ label pop,\n   inner label swap, and new outer label push.  Note that there\
    \ is no\n   requirement for the S-PE to inspect the CW.  Thus, the end-to-end\n\
    \   connectivity of the multi-segment pseudowire can be verified by\n   performing\
    \ all of the following steps:\n        -i. The T-PE forms a VCCV-Ping echo request\
    \ message with the FEC\n            matching that of the last PW segment to the\
    \ destination\n            T-PE.\n       -ii. The T-PE sets the inner PW label\
    \ TTL to the exact value to\n            allow the packet to reach the far-end\
    \ T-PE.  (The value is\n            determined by counting the number of S-PEs\
    \ from the control\n            plane information.)  Alternatively, if CC Type\
    \ 1 is\n            supported, the packet can be encapsulated according to CC\n\
    \            Type 1 in [RFC5085].\n      -iii. The T-PE sends a VCCV packet that\
    \ will follow the exact same\n            data path at each S-PE as that taken\
    \ by data packets.\n       -iv. The S-PE may perform an outer label pop, if Penultimate\
    \ Hop\n            Popping (PHP) is disabled, and will perform an inner label\n\
    \            swap with TTL decrement and a new outer label push.\n        -v.\
    \ There is no requirement for the S-PE to inspect the CW.\n       -vi. The VCCV\
    \ packet is diverted to VCCV control processing at\n            the destination\
    \ T-PE.\n      -vii. The destination T-PE replies using the specified reply mode,\n\
    \            i.e., reverse PW path or IP path.\n"
- title: 9.6.2.2.  Partial Connectivity Verification from T-PE
  contents:
  - "9.6.2.2.  Partial Connectivity Verification from T-PE\n   In order to trace part\
    \ of the multi-segment pseudowire, the TTL of\n   the PW label may be used to\
    \ force the VCCV message to 'pop out' at an\n   intermediate node.  When the TTL\
    \ expires, the S-PE can determine that\n   the packet is a VCCV packet either\
    \ by checking the CW or (if the CW\n   is not in use) by checking for a valid\
    \ IP header with UDP destination\n   port 3503.  The packet should then be diverted\
    \ to VCCV processing.\n   In Figure 3, if T-PE1 sends a VCCV message with the\
    \ TTL of the PW\n   label equal to 1, the TTL will expire at the S-PE.  T-PE1\
    \ can thus\n   verify the first segment of the pseudowire.\n   The VCCV packet\
    \ is built according to [RFC4379], Section 3.2.9 for\n   FEC 128, or Section 3.2.10\
    \ for FEC 129.  All the information\n   necessary to build the VCCV LSP ping packet\
    \ is collected by\n   inspecting the S-PE TLVs.\n   Note that this use of the\
    \ TTL is subject to the caution expressed in\n   [RFC5085].  If a penultimate\
    \ LSR between S-PEs or between an S-PE and\n   a T-PE manipulates the PW label\
    \ TTL, the VCCV message may not emerge\n   from the MS-PW at the correct S-PE.\n"
- title: 9.6.2.3.  Partial Connectivity Verification between S-PEs
  contents:
  - "9.6.2.3.  Partial Connectivity Verification between S-PEs\n   Assuming that all\
    \ nodes along an MS-PW support the Control Word CC\n   Type 3, VCCV between S-PEs\
    \ may be accomplished using the PW label TTL\n   as described above.  In Figure\
    \ 3, the S-PE may verify the path\n   between it and T-PE2 by sending a VCCV message\
    \ with the PW label TTL\n   set to 1.  Given a more complex network with multiple\
    \ S-PEs, an S-PE\n   may verify the connectivity between it and an S-PE two segments\
    \ away\n   by sending a VCCV message with the PW label TTL set to 2.  Thus, an\n\
    \   S-PE can diagnose connectivity problems by successively increasing\n   the\
    \ TTL.  All the information needed to build the proper VCCV echo\n   request packet\
    \ (as described in [RFC4379], Sections 3.2.9 or 3.2.10)\n   is obtained automatically\
    \ from the LDP label mapping that contains\n   S-PE TLVs.\n"
- title: 9.6.2.4.  MS-PW Path Verification
  contents:
  - "9.6.2.4.  MS-PW Path Verification\n   As an example, in Figure 3, VCCV trace\
    \ can be performed on the MS-PW\n   originating from T-PE1 by a single operational\
    \ command.  The\n   following process ensues:\n        -i. T-PE1 sends a VCCV\
    \ echo request with TTL set to 1 and a FEC\n            containing the pseudowire\
    \ information of the first segment\n            (PW1 between T-PE1 and S-PE) to\
    \ S-PE for validation.  If FEC\n            Stack Validation is enabled, the request\
    \ may also include an\n            additional sub-TLV such as LDP Prefix and/or\
    \ RSVP LSP,\n            dependent on the type of transport tunnel the segmented\
    \ PW\n            is riding on.\n       -ii. S-PE validates the echo request with\
    \ the FEC.  Since it is a\n            switching point between the first and second\
    \ segment, it\n            builds an echo reply with a return code of 8 and sends\
    \ the\n            echo reply back to T-PE1.\n      -iii. T-PE1 builds a second\
    \ VCCV echo request based on the\n            information obtained from the control\
    \ plane (SP-PE TLV).  It\n            then increments the TTL and sends it out\
    \ to T-PE2.  Note\n            that the VCCV echo request packet is switched at\
    \ the S-PE\n            data path and forwarded to the next downstream segment\n\
    \            without any involvement from the control plane.\n       -iv. T-PE2\
    \ receives and validates the echo request with the FEC.\n            Since T-PE2\
    \ is the destination node or the egress node of\n            the MS-PW, it replies\
    \ to T-PE1 with an echo reply with a\n            return code of 3 (Egress Router).\n\
    \        -v. T-PE1 receives the echo reply from T-PE2.  T-PE1 is made\n      \
    \      aware that T-PE2 is the destination of the MS-PW because the\n        \
    \    echo reply has a return code of 3.  The trace process is\n            completed.\n\
    \   If no echo reply is received, or an error code is received from a\n   particular\
    \ PE, the trace process MUST stop immediately, and packets\n   MUST NOT be sent\
    \ further along the MS-PW.\n   For more detail on the format of the VCCV echo\
    \ packet, refer to\n   [RFC5085] and [RFC4379].  The TTL here refers to that of\
    \ the inner\n   (PW) label TTL.\n"
- title: 9.6.2.5.  MS-PW Path Trace
  contents:
  - "9.6.2.5.  MS-PW Path Trace\n   As an example, in Figure 3, VCCV trace can be\
    \ performed on the MS-PW\n   originating from T-PE1 by a single operational command.\
    \  The\n   following OPTIONAL process ensues:\n        -i. T-PE1 sends a VCCV\
    \ echo request with TTL set to 1 and a FEC\n            containing the pseudowire\
    \ information of the first segment\n            (PW1 between T-PE1 and S-PE) to\
    \ S-PE for validation.  If FEC\n            Stack Validation is enabled, the request\
    \ may also include an\n            additional sub-TLV such as LDP Prefix and/or\
    \ RSVP LSP,\n            dependent on the type of transport tunnel the segmented\
    \ PW\n            is riding on.\n       -ii. The S-PE validates the echo request\
    \ with the FEC.\n      -iii. The S-PE builds an echo reply with a return code\
    \ of 8 and\n            sends the echo reply back to T-PE1, appending the FEC\
    \ 128\n            information for the next segment along the MS-PW to the VCCV\n\
    \            echo reply packet using the Target FEC stack TLV (as per\n      \
    \      Sections 3.2 and 4.5 of [RFC4379]).\n       -iv. T-PE1 builds a second\
    \ VCCV echo request based on the\n            information obtained from the FEC\
    \ stack TLV received in the\n            previous VCCV echo reply.  It then increments\
    \ the TTL and\n            sends it out to T-PE2.  Note that the VCCV echo request\n\
    \            packet is switched at the S-PE data path and forwarded to\n     \
    \       the next downstream segment without any involvement from the\n       \
    \     control plane.\n        -v. T-PE2 receives and validates the echo request\
    \ with the FEC.\n            Since T-PE2 is the destination node or the egress\
    \ node of\n            the MS-PW, it replies to T-PE1 with an echo reply with\
    \ a\n            return code of 3 (Egress Router).\n       -vi. T-PE1 receives\
    \ the echo reply from T-PE2.  T-PE1 is made\n            aware that T-PE2 is the\
    \ destination of the MS-PW because the\n            echo reply has a return code\
    \ of 3.  The trace process is\n            completed.\n   If no echo reply is\
    \ received, or an error code is received from a\n   particular PE, the trace process\
    \ MUST stop immediately, and packets\n   MUST NOT be sent further along the MS-PW.\n\
    \   For more detail on the format of the VCCV echo packet, refer to\n   [RFC5085]\
    \ and [RFC4379].  The TTL here refers to that of the inner\n   (PW) label TTL.\n"
- title: 10.  Mapping Switched Pseudowire Status
  contents:
  - "10.  Mapping Switched Pseudowire Status\n   In the PW switching with attachment\
    \ circuits case (Figure 2), PW\n   status messages indicating PW or attachment\
    \ circuit faults MUST be\n   mapped to fault indications or OAM messages on the\
    \ connecting AC as\n   defined in [PW-MSG-MAP].\n   In the PW control plane switching\
    \ case (Figure 3), there is no\n   attachment circuit at the S-PE, but the two\
    \ PWs are connected\n   together.  Similarly, the status of the PWs is forwarded\
    \ unchanged\n   from one PW to the other by the control plane switching function.\n\
    \   However, it may sometimes be necessary to communicate fault status of\n  \
    \ one of the locally attached PW segments at an S-PE.  For LDP, this\n   can be\
    \ accomplished by sending an LDP notification message containing\n   the PW status\
    \ TLV, as well as an OPTIONAL PW Switching Point PE TLV\n   as follows:\n    0\
    \                   1                   2                   3\n    0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |0|   Notification   (0x0001)   |      Message Length           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                           Message ID                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |0|1| Status (0x0300)           |      Length                   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |0|1|                 Status Code=0x00000028                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Message ID=0                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |      Message Type=0           |      PW Status TLV            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                         PW Status TLV                         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |         PW Status TLV         | PWid FEC or Generalized ID FEC|\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   ~                                                               ~\n   |  \
    \           PWid FEC or Generalized ID FEC (contd.)           |\n   |        \
    \                                                       |\n   |              \
    \                                                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |1|0|    SP-PE TLV   (0x096D)   |     SP-PE TLV   Length        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |    Length     |    Variable Length Value      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   Only one SP-PE TLV can be present in this message.  This message is\n   then\
    \ relayed by each S-PE unchanged.  The T-PE decodes the status\n   message and\
    \ the included SP-PE TLV to detect exactly where the fault\n   occurred.  At the\
    \ T-PE, if there is no SP-PE TLV included in the LDP\n   status notification,\
    \ then the status message can be assumed to have\n   originated at the remote\
    \ T-PE.\n   The merging of the received LDP status and the local status for the\n\
    \   PW segments at an S-PE can be summarized as follows:\n        -i. When the\
    \ local status for both PW segments is UP, the S-PE\n            passes any received\
    \ AC or PW status bits unchanged, i.e.,\n            the status notification TLV\
    \ is unchanged, but the PWid in\n            the case of a FEC 128 TLV is set\
    \ to the value of the PW\n            segment of the next hop.\n       -ii. When\
    \ the local status for any of the PW segments is at\n            fault, the S-PE\
    \ always sends the local status bits\n            regardless of whether the received\
    \ status bits from the\n            remote node indicated that an upstream fault\
    \ has cleared.\n            AC status bits are passed along unchanged.\n"
- title: 10.1.  PW Status Messages Initiated by the S-PE
  contents:
  - "10.1.  PW Status Messages Initiated by the S-PE\n   The PW fault directions are\
    \ defined as follows:\n                            +-------+\n         ---PW1\
    \ Receive---->|       |-----PW2 Transmit---->\n      S-PE1                 | S-PE2\
    \ |                   S-PE3\n         <--PW1 Transmit----|       |<----PW2 Receive------\n\
    \                            +-------+\n      Figure 4: S-PE and PW Transmission/Reception\
    \ Directions\n   When a local fault is detected by the S-PE, a PW status message\
    \ is\n   sent in both directions along the PW.  Since there are no attachment\n\
    \   circuits on an S-PE, only the following status messages are relevant:\n  \
    \       0x00000008 - Local PSN-facing PW (ingress) Receive Fault\n         0x00000010\
    \ - Local PSN-facing PW (egress) Transmit Fault\n   Each S-PE needs to store only\
    \ two 32-bit PW status words for each PW\n   segment: one for local failures and\
    \ one for remote failures (normally\n   received from another PE).  The first\
    \ failure will set the\n   appropriate bit in the 32-bit status word, and each\
    \ subsequent\n   failure will be ORed to the appropriate PW status word.  In the\
    \ case\n   that the PW status word stores remote failures, this rule has the\n\
    \   effect of a logical OR operation with the first failure received on\n   the\
    \ particular PW segment.\n   It should be noted that remote failures received\
    \ on an S-PE are just\n   passed along the MS-PW unchanged, while local failures\
    \ detected an\n   S-PE are signaled on both PW segments.\n   A T-PE can receive\
    \ multiple failures from S-PEs along the MS-PW;\n   however, only the failure\
    \ from the remote closest S-PE will be stored\n   (last PW status message received).\
    \  The PW status word received is\n   just ORed to any existing remote PW status\
    \ already stored on the\n   T-PE.\n   Given that there are two PW segments at\
    \ a particular S-PE for a\n   particular MS-PW (referring to Figure 4), there\
    \ are four possible\n   failure cases as follows:\n        -i. PW2 Transmit direction\
    \ fault\n       -ii. PW1 Transmit direction fault\n      -iii. PW2 Receive direction\
    \ fault\n       -iv. PW1 Receive direction fault\n   Once a PW status notification\
    \ message is initiated at an S-PE for a\n   particular PW status bit, any further\
    \ status message for the same\n   status bit (and received from an upstream neighbor)\
    \ is processed\n   locally and not forwarded until the S-PE original status error\
    \ state\n   is cleared.\n   Each S-PE along the MS-PW MUST store any PW status\
    \ messages\n   transiting it.  If more than one status message with the same PW\n\
    \   status bit set is received by a T-PE or S-PE, only the last PW status\n  \
    \ message is stored.\n"
- title: 10.1.1.  Local PW2 Transmit Direction Fault
  contents:
  - "10.1.1.  Local PW2 Transmit Direction Fault\n   When this failure occurs, the\
    \ S-PE will take the following actions:\n      * Send a PW status message to S-PE3\
    \ containing \"0x00000010 - Local\n        PSN-facing PW (egress) Transmit Fault\"\
    .\n      * Send a PW status message to S-PE1 containing \"0x00000008 - Local\n\
    \        PSN-facing PW (ingress) Receive Fault\".\n      * Store 0x00000010 in\
    \ the local PW status word for the PW segment\n        toward S-PE3.\n"
- title: 10.1.2.  Local PW1 Transmit Direction Fault
  contents:
  - "10.1.2.  Local PW1 Transmit Direction Fault\n   When this failure occurs, the\
    \ S-PE will take the following actions:\n      * Send a PW status message to S-PE1\
    \ containing \"0x00000010 - Local\n        PSN-facing PW (egress) Transmit Fault\"\
    .\n      * Send a PW status message to S-PE3 containing \"0x00000008 - Local\n\
    \        PSN-facing PW (ingress) Receive Fault\".\n      * Store 0x00000010 in\
    \ the local PW status word for the PW segment\n        toward S-PE1.\n"
- title: 10.1.3.  Local PW2 Receive Direction Fault
  contents:
  - "10.1.3.  Local PW2 Receive Direction Fault\n   When this failure occurs, the\
    \ S-PE will take the following actions:\n      * Send a PW status message to S-PE3\
    \ containing \"0x00000008 - Local\n        PSN-facing PW (ingress) Receive Fault\"\
    .\n      * Send a PW status message to S-PE1 containing \"0x00000010 - Local\n\
    \        PSN-facing PW (egress) Transmit Fault\".\n      * Store 0x00000008 in\
    \ the local PW status word for the PW segment\n        toward S-PE3.\n"
- title: 10.1.4.  Local PW1 Receive Direction Fault
  contents:
  - "10.1.4.  Local PW1 Receive Direction Fault\n   When this failure occurs, the\
    \ S-PE will take the following actions:\n      * Send a PW status message to S-PE1\
    \ containing \"0x00000008 - Local\n        PSN-facing PW (ingress) Receive Fault\"\
    .\n      * Send a PW status message to S-PE3 containing \"0x00000010 - Local\n\
    \        PSN-facing PW (egress) Transmit Fault\".\n      * Store 0x00000008 in\
    \ the local PW status word for the PW segment\n        toward S-PE1.\n"
- title: 10.1.5.  Clearing Faults
  contents:
  - "10.1.5.  Clearing Faults\n   Remote PW status fault clearing messages received\
    \ by an S-PE will\n   only be forwarded if there are no corresponding local faults\
    \ on the\n   S-PE.  (Local faults always supersede remote faults.)\n   Once the\
    \ local fault has cleared, and there is no corresponding (same\n   PW status bit\
    \ set) remote fault, a PW status message is sent out to\n   the adjacent PEs,\
    \ clearing the fault.\n   When a PW status fault clearing message is forwarded,\
    \ the S-PE will\n   always send the SP-PE TLV associated with the PE that cleared\
    \ the\n   fault.\n"
- title: 10.2.  PW Status Messages and SP-PE TLV Processing
  contents:
  - "10.2.  PW Status Messages and SP-PE TLV Processing\n   When a PW status message\
    \ is received that includes an SP-PE TLV, the\n   SP-PE TLV information MAY be\
    \ stored, along with the contents of the\n   PW status Word according to the procedures\
    \ described above.  The\n   SP-PE TLV stored is always the SP-PE TLV that is associated\
    \ with the\n   PE that set that particular last fault.  If subsequent PW status\n\
    \   messages for the same PW status bit are received, the SP-PE TLV will\n   overwrite\
    \ the previously stored SP-PE TLV.\n"
- title: 10.3.  T-PE Processing of PW Status Messages
  contents:
  - "10.3.  T-PE Processing of PW Status Messages\n   The PW switching architecture\
    \ is based on the concept that the T-PE\n   should process the PW LDP messages\
    \ in the same manner as if it were\n   participating in the setup of a PW segment.\
    \  However, a T-PE\n   participating in an MS-PW SHOULD be able to process the\
    \ SP-PE TLV.\n   Otherwise, the processing of PW status messages and other PW\
    \ setup\n   messages is exactly as described in [RFC4447].\n"
- title: 10.4.  Pseudowire Status Negotiation Procedures
  contents:
  - "10.4.  Pseudowire Status Negotiation Procedures\n   Pseudowire status signaling\
    \ methodology, defined in [RFC4447], SHOULD\n   be transparent to the switching\
    \ point.\n"
- title: 10.5.  Status Dampening
  contents:
  - "10.5.  Status Dampening\n   When the PW control plane switching methodology is\
    \ used to cross an\n   administrative boundary, it might be necessary to prevent\
    \ excessive\n   status signaling changes from being propagated across the\n  \
    \ administrative boundary.  This can be achieved by using a similar\n   method\
    \ as commonly employed for the BGP route advertisement\n   dampening.  The details\
    \ of this OPTIONAL algorithm are a matter of\n   implementation and are outside\
    \ the scope of this document.\n"
- title: 11.  Peering between Autonomous Systems
  contents:
  - "11.  Peering between Autonomous Systems\n   The procedures outlined in this document\
    \ can be employed to provision\n   and manage MS-PWs crossing AS boundaries. \
    \ The use of more advanced\n   mechanisms involving auto-discovery and ordered\
    \ PWE3 MS-PW signaling\n   will be covered in a separate document.\n"
- title: 12.  Congestion Considerations
  contents:
  - "12.  Congestion Considerations\n   Each PSN carrying the PW may be subject to\
    \ congestion.  The\n   congestion considerations in [RFC3985] apply to PW segments\
    \ as well.\n   Each PW segment will handle any congestion experienced by the PW\n\
    \   traffic independently of the other MS-PW segments.  It is possible\n   that\
    \ passing knowledge of congestion between segments and to the\n   T-PEs can result\
    \ in more efficient edge-to-edge congestion mitigation\n   systems.  However,\
    \ any specific methods of congestion mitigation are\n   outside the scope of this\
    \ document and left for further study.\n"
- title: 13.  Security Considerations
  contents:
  - "13.  Security Considerations\n   This document specifies the LDP, L2TPv3, and\
    \ VCCV extensions that are\n   needed for setting up and maintaining pseudowires.\
    \  The purpose of\n   setting up pseudowires is to enable Layer 2 frames to be\
    \ encapsulated\n   and transmitted from one end of a pseudowire to the other.\n\
    \   Therefore, we discuss the security considerations for both the data\n   plane\
    \ and the control plane in the following sections.  The\n   guidelines and security\
    \ considerations specified in [RFC5920] also\n   apply to MS-PW when the PSN is\
    \ MPLS.\n"
- title: 13.1.  Data Plane Security
  contents:
  - "13.1.  Data Plane Security\n   Data plane security considerations as discussed\
    \ in [RFC4447],\n   [RFC3931], and [RFC3985] apply to this extension without any\
    \ changes.\n"
- title: 13.1.1.  VCCV Security Considerations
  contents:
  - "13.1.1.  VCCV Security Considerations\n   The VCCV technology for MS-PW offers\
    \ a method for the service\n   provider to verify the data path of a specific\
    \ PW.  This involves\n   sending a packet to a specific PE and receiving an answer\
    \ that either\n   confirms the information contained in the packet or indicates\
    \ that it\n   is incorrect.  This is a very similar process to the commonly used\
    \ IP\n   ICMP ping and TTL expired methods for IP networks.  It should be\n  \
    \ noted that when using VCCV Type 3 for PW when the CW is not enabled,\n   if\
    \ a packet is crafted with a TTL greater than the number of hops\n   along the\
    \ MS-PW path, or an S-PE along the path mis-processes the\n   TTL, the packet\
    \ could mistakenly be forwarded out of the attachment\n   circuit as a native\
    \ PW packet.  This packet would most likely be\n   treated as an error packet\
    \ by the CE.  However, if this possibility\n   is not acceptable, the CW should\
    \ be enabled to guarantee that a VCCV\n   packet will never be mistakenly forwarded\
    \ to the AC.\n"
- title: 13.2.  Control Protocol Security
  contents:
  - "13.2.  Control Protocol Security\n   General security considerations with regard\
    \ to the use of LDP are\n   specified in Section 5 of RFC 5036.  Security considerations\
    \ with\n   regard to the L2TPv3 control plane are specified in [RFC3931].  These\n\
    \   considerations apply as well to the case where LDP or L2TPv3 is used\n   to\
    \ set up PWs.\n   A pseudowire connects two attachment circuits.  It is important\
    \ to\n   make sure that LDP connections are not arbitrarily accepted from\n  \
    \ anywhere, or else a local attachment circuit might get connected to\n   an arbitrary\
    \ remote attachment circuit.  Therefore, an incoming\n   session request MUST\
    \ NOT be accepted unless its IP source address is\n   known to be the source of\
    \ an \"eligible\" peer.  The set of eligible\n   peers could be pre-configured\
    \ (either as a list of IP addresses or as\n   a list of address/mask combinations),\
    \ or it could be discovered\n   dynamically via an auto-discovery protocol that\
    \ is itself trusted.\n   (Note that if the auto-discovery protocol were not trusted,\
    \ the set\n   of \"eligible peers\" it produces could not be trusted.)\n   Even\
    \ if a connection request appears to come from an eligible peer,\n   its source\
    \ address may have been spoofed.  So some means of\n   preventing source address\
    \ spoofing must be in place.  For example, if\n   all the eligible peers are in\
    \ the same network, source address\n   filtering at the border routers of that\
    \ network could eliminate the\n   possibility of source address spoofing.\n  \
    \ For a greater degree of security, the LDP authentication option, as\n   described\
    \ in Section 2.9 of [RFC5036], or the Control Message\n   Authentication option\
    \ of [RFC3931], MAY be used.  This provides\n   integrity and authentication for\
    \ the control messages, and eliminates\n   the possibility of source address spoofing.\
    \  Use of the message\n   authentication option does not provide privacy, but\
    \ privacy of\n   control messages is not usually considered to be highly important.\n\
    \   Both the LDP and L2TPv3 message authentication options rely on the\n   configuration\
    \ of pre-shared keys, making it difficult to deploy when\n   the set of eligible\
    \ neighbors is determined by an auto-configuration\n   protocol.\n   The protocol\
    \ described in this document relies on the LDP MD5\n   authentication key option,\
    \ as described in Section 2.9 of [RFC5036],\n   to provide integrity and authentication\
    \ for the LDP messages and\n   protect against source address spoofing.  This\
    \ mechanism relies on\n   the configuration of pre-shared keys, which typically\
    \ introduces some\n   fragility.  In the specific case of MS-PW, the number of\
    \ links that\n   leave an organization will be limited in practice, so the reliance\
    \ on\n   pre-shared keys should be manageable.\n   When the Generalized PWid FEC\
    \ Element is used, it is possible that a\n   particular peer may be one of the\
    \ eligible peers, but may not be the\n   right one to connect to the particular\
    \ attachment circuit identified\n   by the particular instance of the Generalized\
    \ ID FEC element.\n   However, given that the peer is known to be one of the eligible\
    \ peers\n   (as discussed above), this would be the result of a configuration\n\
    \   error, rather than a security problem.  Nevertheless, it may be\n   advisable\
    \ for a PE to associate each of its local attachment circuits\n   with a set of\
    \ eligible peers, rather than have just a single set of\n   eligible peers associated\
    \ with the PE as a whole.\n"
- title: 14.  IANA Considerations
  contents:
  - '14.  IANA Considerations

    '
- title: 14.1.  L2TPv3 AVP
  contents:
  - "14.1.  L2TPv3 AVP\n   This document uses a new L2TP parameter; IANA already maintains\
    \ the\n   registry \"Control Message Attribute Value Pairs\" defined by\n   [RFC3438].\
    \  The following new value has been assigned:\n         101  PW Switching Point\
    \ AVP\n"
- title: 14.2.  LDP TLV TYPE
  contents:
  - "14.2.  LDP TLV TYPE\n   This document uses a new LDP TLV type; IANA already maintains\
    \ the\n   registry \"TLV TYPE NAME SPACE\" defined by RFC 5036.  The following\n\
    \   value has been assigned:\n         TLV type  Description\n          0x096D\
    \   Pseudowire Switching Point PE TLV\n"
- title: 14.3.  LDP Status Codes
  contents:
  - "14.3.  LDP Status Codes\n   This document uses a new LDP status code; IANA already\
    \ maintains the\n   registry \"STATUS CODE NAME SPACE\" defined by RFC 5036. \
    \ The following\n   value has been assigned:\n         Assignment E  Description\n\
    \         0x0000003A 0  PW Loop Detected\n"
- title: 14.4.  L2TPv3 Result Codes
  contents:
  - "14.4.  L2TPv3 Result Codes\n   This document uses a new L2TPv3 Result Code for\
    \ the CDN message, as\n   assigned by IANA in the \"Result Code AVP (Attribute\
    \ Type 1) Values\"\n   registry.\n      Registry Name: Result Code AVP (Attribute\
    \ Type 1) Values Defined\n      Result Code values for the CDN message are:\n\
    \         Assignment  Description\n             31      Sequencing not supported\n"
- title: 14.5.  New IANA Registries
  contents:
  - "14.5.  New IANA Registries\n   IANA has set up a registry named \"Pseudowire\
    \ Switching Point PE sub-\n   TLV Type\".  These are 8-bit values.  Type values\
    \ 1 through 6 are\n   defined in this document.  Type values 7 through 64 are\
    \ to be\n   assigned by IANA using the \"Expert Review\" policy defined in\n \
    \  [RFC5226].  Type values 65 through 127, as well as 0 and 255, are to\n   be\
    \ allocated using the IETF consensus policy defined in RFC 5226.\n   Type values\
    \ 128 through 254 are reserved for vendor proprietary\n   extensions and are to\
    \ be assigned by IANA, using the \"First Come\n   First Served\" policy defined\
    \ in RFC 5226.\n   The Type Values are assigned as follows:\n      Type  Length\
    \   Description\n      0x01     4     PWid of last PW segment traversed\n    \
    \  0x02  variable PW Switching Point description string\n      0x03    4/16  \
    \ Local IP address of PW Switching Point\n      0x04    4/16   Remote IP address\
    \ of last PW Switching Point\n                     traversed or of the T-PE\n\
    \      0x05  variable FEC Element of last PW segment traversed\n      0x06   \
    \  12    L2 PW address of PW Switching Point\n"
- title: 15.  Normative References
  contents:
  - "15.  Normative References\n   [RFC2119]    Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n                Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC2277]    Alvestrand, H., \"IETF Policy on Character Sets and\n\
    \                Languages\", BCP 18, RFC 2277, January 1998.\n   [RFC3931]  \
    \  Lau, J., Ed., Townsley, M., Ed., and I. Goyret, Ed.,\n                \"Layer\
    \ Two Tunneling Protocol - Version 3 (L2TPv3)\", RFC\n                3931, March\
    \ 2005.\n   [RFC4364]    Rosen, E. and Y. Rekhter, \"BGP/MPLS IP Virtual Private\n\
    \                Networks (VPNs)\", RFC 4364, February 2006.\n   [RFC4379]   \
    \ Kompella, K. and G. Swallow, \"Detecting Multi-Protocol\n                Label\
    \ Switched (MPLS) Data Plane Failures\", RFC 4379,\n                February 2006.\n\
    \   [RFC4385]    Bryant, S., Swallow, G., Martini, L., and D. McPherson,\n   \
    \             \"Pseudowire Emulation Edge-to-Edge (PWE3) Control Word\n      \
    \          for Use over an MPLS PSN\", RFC 4385, February 2006.\n   [RFC4446]\
    \    Martini, L., \"IANA Allocations for Pseudowire Edge to\n                Edge\
    \ Emulation (PWE3)\", BCP 116, RFC 4446, April 2006.\n   [RFC4447]    Martini,\
    \ L., Ed., Rosen, E., El-Aawar, N., Smith, T.,\n                and G. Heron,\
    \ \"Pseudowire Setup and Maintenance Using\n                the Label Distribution\
    \ Protocol (LDP)\", RFC 4447, April\n                2006.\n   [RFC5003]    Metz,\
    \ C., Martini, L., Balus, F., and J. Sugimoto,\n                \"Attachment Individual\
    \ Identifier (AII) Types for\n                Aggregation\", RFC 5003, September\
    \ 2007.\n   [RFC5036]    Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,\n\
    \                \"LDP Specification\", RFC 5036, October 2007.\n   [RFC5085]\
    \    Nadeau, T., Ed., and C. Pignataro, Ed., \"Pseudowire\n                Virtual\
    \ Circuit Connectivity Verification (VCCV): A\n                Control Channel\
    \ for Pseudowires\", RFC 5085, December\n                2007.\n   [RFC5226] \
    \   Narten, T. and H. Alvestrand, \"Guidelines for Writing an\n              \
    \  IANA Considerations Section in RFCs\", BCP 26, RFC 5226,\n                May\
    \ 2008.\n   [RFC5641]    McGill, N. and C. Pignataro, \"Layer 2 Tunneling Protocol\n\
    \                Version 3 (L2TPv3) Extended Circuit Status Values\", RFC\n  \
    \              5641, August 2009.\n"
- title: 16. Informative References
  contents:
  - "16. Informative References\n   [PW-MSG-MAP] Aissaoui, M., Busschbach, P., Morrow,\
    \ M., Martini, L.,\n                Stein, Y(J)., Allan, D., and T. Nadeau, \"\
    Pseudowire (PW)\n                OAM Message Mapping\", Work in Progress, October\
    \ 2010.\n   [RFC3032]    Rosen, E., Tappan, D., Fedorkow, G., Rekhter, Y.,\n \
    \               Farinacci, D., Li, T., and A. Conta, \"MPLS Label Stack\n    \
    \            Encoding\", RFC 3032, January 2001.\n   [RFC3438]    Townsley, W.,\
    \ \"Layer Two Tunneling Protocol (L2TP)\n                Internet Assigned Numbers\
    \ Authority (IANA)\n                Considerations Update\", BCP 68, RFC 3438,\
    \ December 2002.\n   [RFC3985]    Bryant, S., Ed., and P. Pate, Ed., \"Pseudo\
    \ Wire\n                Emulation Edge-to-Edge (PWE3) Architecture\", RFC 3985,\n\
    \                March 2005.\n   [RFC4023]    Worster, T., Rekhter, Y., and E.\
    \ Rosen, Ed.,\n                \"Encapsulating MPLS in IP or Generic Routing\n\
    \                Encapsulation (GRE)\", RFC 4023, March 2005.\n   [RFC4454]  \
    \  Singh, S., Townsley, M., and C. Pignataro, \"Asynchronous\n               \
    \ Transfer Mode (ATM) over Layer 2 Tunneling Protocol\n                Version\
    \ 3 (L2TPv3)\", RFC 4454, May 2006.\n   [RFC4623]    Malis, A. and M. Townsley,\
    \ \"Pseudowire Emulation Edge-\n                to-Edge (PWE3) Fragmentation and\
    \ Reassembly\", RFC 4623,\n                August 2006.\n   [RFC4667]    Luo,\
    \ W., \"Layer 2 Virtual Private Network (L2VPN)\n                Extensions for\
    \ Layer 2 Tunneling Protocol (L2TP)\", RFC\n                4667, September 2006.\n\
    \   [RFC4717]    Martini, L., Jayakumar, J., Bocci, M., El-Aawar, N.,\n      \
    \          Brayley, J., and G. Koleyni, \"Encapsulation Methods for\n        \
    \        Transport of Asynchronous Transfer Mode (ATM) over MPLS\n           \
    \     Networks\", RFC 4717, December 2006.\n   [RFC5254]    Bitar, N., Ed., Bocci,\
    \ M., Ed., and L. Martini, Ed.,\n                \"Requirements for Multi-Segment\
    \ Pseudowire Emulation\n                Edge-to-Edge (PWE3)\", RFC 5254, October\
    \ 2008.\n   [RFC5659]    Bocci, M. and S. Bryant, \"An Architecture for Multi-\n\
    \                Segment Pseudowire Emulation Edge-to-Edge\", RFC 5659,\n    \
    \            October 2009.\n   [RFC5920]    Fang, L., Ed., \"Security Framework\
    \ for MPLS and GMPLS\n                Networks\", RFC 5920, July 2010.\n"
- title: 17.  Acknowledgments
  contents:
  - "17.  Acknowledgments\n   The authors wish to acknowledge the contributions of\
    \ Satoru\n   Matsushima, Wei Luo, Neil Mcgill, Skip Booth, Neil Hart, Michael\
    \ Hua,\n   and Tiberiu Grigoriu.\n"
- title: 18.  Contributors
  contents:
  - "18.  Contributors\n   The following people also contributed text to this document:\n\
    \   Florin Balus\n   Alcatel-Lucent\n   701 East Middlefield Rd.\n   Mountain\
    \ View, CA  94043\n   US\n   EMail: florin.balus@alcatel-lucent.com\n   Mike Duckett\n\
    \   Bellsouth\n   Lindbergh Center, D481\n   575 Morosgo Dr\n   Atlanta, GA  30324\n\
    \   US\n   EMail: mduckett@bellsouth.net\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Luca Martini\n   Cisco Systems, Inc.\n   9155 East Nichols\
    \ Avenue, Suite 400\n   Englewood, CO  80112\n   US\n   EMail: lmartini@cisco.com\n\
    \   Chris Metz\n   Cisco Systems, Inc.\n   EMail: chmetz@cisco.com\n   Thomas\
    \ D. Nadeau\n   EMail: tnadeau@lucidvision.com\n   Matthew Bocci\n   Alcatel-Lucent\n\
    \   Grove House, Waltham Road Rd\n   White Waltham, Berks  SL6 3TN\n   UK\n  \
    \ EMail: matthew.bocci@alcatel-lucent.co.uk\n   Mustapha Aissaoui\n   Alcatel-Lucent\n\
    \   600, March Road,\n   Kanata, ON\n   Canada\n   EMail: mustapha.aissaoui@alcatel-lucent.com\n"
