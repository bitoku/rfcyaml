- title: __initial_text__
  contents:
  - '    Requirements for a Mechanism Identifying a Name Server Instance

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The IETF Trust (2007).\n"
- title: Abstract
  contents:
  - "Abstract\n   With the increased use of DNS anycast, load balancing, and other\n\
    \   mechanisms allowing more than one DNS name server to share a single\n   IP\
    \ address, it is sometimes difficult to tell which of a pool of name\n   servers\
    \ has answered a particular query.  A standardized mechanism to\n   determine\
    \ the identity of a name server responding to a particular\n   query would be\
    \ useful, particularly as a diagnostic aid for\n   administrators.  Existing ad\
    \ hoc mechanisms for addressing this need\n   have some shortcomings, not the\
    \ least of which is the lack of prior\n   analysis of exactly how such a mechanism\
    \ should be designed and\n   deployed.  This document describes the existing convention\
    \ used in\n   some widely deployed implementations of the DNS protocol, including\n\
    \   advantages and disadvantages, and discusses some attributes of an\n   improved\
    \ mechanism.\n"
- title: 1.  Introduction and Rationale
  contents:
  - "1.  Introduction and Rationale\n   Identifying which name server is responding\
    \ to queries is often\n   useful, particularly in attempting to diagnose name\
    \ server\n   difficulties.  This is most obviously useful for authoritative\n\
    \   nameservers in the attempt to diagnose the source or prevalence of\n   inaccurate\
    \ data, but can also conceivably be useful for caching\n   resolvers in similar\
    \ and other situations.  Furthermore, the ability\n   to identify which server\
    \ is responding to a query has become more\n   useful as DNS has become more critical\
    \ to more Internet users, and as\n   network and server deployment topologies\
    \ have become more complex.\n   The conventional means for determining which of\
    \ several possible\n   servers is answering a query has traditionally been based\
    \ on the use\n   of the server's IP address as a unique identifier.  However,\
    \ the\n   modern Internet has seen the deployment of various load balancing,\n\
    \   fault-tolerance, or attack-resistance schemes such as shared use of\n   unicast\
    \ IP addresses as documented in [RFC3258].  An unfortunate side\n   effect of\
    \ these schemes has been to make the use of IP addresses as\n   identifiers associated\
    \ with DNS (or any other) service somewhat\n   problematic.  Specifically, multiple\
    \ dedicated DNS queries may not go\n   to the same server even though sent to\
    \ the same IP address.  Non-DNS\n   methods such as ICMP ping, TCP connections,\
    \ or non-DNS UDP packets\n   (such as those generated by tools like \"traceroute\"\
    ), etc., may well\n   be even less certain to reach the same server as the one\
    \ which\n   receives the DNS queries.\n   There is a well-known and frequently-used\
    \ technique for determining\n   an identity for a nameserver more specific than\
    \ the possibly-non-\n   unique \"server that answered the query I sent to IP address\
    \ A.B.C.D\".\n   The widespread use of the existing convention suggests a need\
    \ for a\n   documented, interoperable means of querying the identity of a\n  \
    \ nameserver that may be part of an anycast or load-balancing cluster.\n   At\
    \ the same time, however, it also has some drawbacks that argue\n   against standardizing\
    \ it as it's been practiced so far.\n"
- title: 2.  Existing Conventions
  contents:
  - "2.  Existing Conventions\n   For some time, the commonly deployed Berkeley Internet\
    \ Name Domain\n   (BIND) implementation of the DNS protocol suite from the Internet\n\
    \   Systems Consortium [BIND] has supported a way of identifying a\n   particular\
    \ server via the use of a standards-compliant, if somewhat\n   unusual, DNS query.\
    \  Specifically, a query to a recent BIND server\n   for a TXT resource record\
    \ in class 3 (CHAOS) for the domain name\n   \"HOSTNAME.BIND.\" will return a\
    \ string that can be configured by the\n   name server administrator to provide\
    \ a unique identifier for the\n   responding server.  (The value defaults to the\
    \ result of a\n   gethostname() call).  This mechanism, which is an extension\
    \ of the\n   BIND convention of using CHAOS class TXT RR queries to sub-domains\
    \ of\n   the \"BIND.\" domain for version information, has been copied by\n  \
    \ several name server vendors.\n   A refinement to the BIND-based mechanism, which\
    \ dropped the\n   implementation-specific label, replaces \"BIND.\" with \"SERVER.\"\
    .  Thus\n   the query label to learn the unique name of a server may appear as\n\
    \   \"ID.SERVER.\".\n   (For reference, the other well-known name used by recent\
    \ versions of\n   BIND within the CHAOS class \"BIND.\" domain is \"VERSION.BIND.\"\
    .  A\n   query for a CHAOS TXT RR for this name will return an\n   administratively\
    \ defined string which defaults to the software\n   version of the server responding.\
    \  This is, however, not generally\n   implemented by other vendors.)\n"
- title: 2.1.  Advantages
  contents:
  - "2.1.  Advantages\n   There are several valuable attributes to this mechanism,\
    \ which\n   account for its usefulness.\n   1.  The \"HOSTNAME.BIND.\" or \"ID.SERVER.\"\
    \ query response mechanism is\n       within the DNS protocol itself.  An identification\
    \ mechanism that\n       relies on the DNS protocol is more likely to be successful\n\
    \       (although not guaranteed) in going to the same system as a\n       \"\
    normal\" DNS query.\n   2.  Since the identity information is requested and returned\
    \ within\n       the DNS protocol, it doesn't require allowing any other query\n\
    \       mechanism to the server, such as holes in firewalls for\n       otherwise-unallowed\
    \ ICMP Echo requests.  Thus it is likely to\n       reach the same server over\
    \ a path subject to the same routing,\n       resource, and security policy as\
    \ the query, without any special\n       exceptions to site security policy.\n\
    \   3.  It is simple to configure.  An administrator can easily turn on\n    \
    \   this feature and control the results of the relevant query.\n   4.  It allows\
    \ the administrator complete control of what information\n       is given out\
    \ in the response, minimizing passive leakage of\n       implementation or configuration\
    \ details.  Such details are often\n       considered sensitive by infrastructure\
    \ operators.\n"
- title: 2.2.  Disadvantages
  contents:
  - "2.2.  Disadvantages\n   At the same time, there are some serious drawbacks to\
    \ the CHAOS/TXT\n   query mechanism that argue against standardizing it as it\
    \ currently\n   operates.\n   1.  It requires an additional query to correlate\
    \ between the answer\n       to a DNS query under normal conditions and the supposed\
    \ identity\n       of the server receiving the query.  There are a number of\n\
    \       situations in which this simply isn't reliable.\n   2.  It reserves an\
    \ entire class in the DNS (CHAOS) for what amounts\n       to one zone.  While\
    \ CHAOS class is defined in [RFC1034] and\n       [RFC1035], it's not clear that\
    \ supporting it solely for this\n       purpose is a good use of the namespace\
    \ or of implementation\n       effort.\n   3.  The initial and still common form,\
    \ using \"BIND.\", is\n       implementation specific.  BIND is one DNS implementation.\
    \  At the\n       time of this writing, it is probably most prevalent for\n  \
    \     authoritative servers.  This does not justify standardizing on\n       its\
    \ ad hoc solution to a problem shared across many operators and\n       implementors.\
    \  Meanwhile, the aforementioned refinement changes\n       the query label but\
    \ preserves the ad hoc CHAOS/TXT mechanism.\n   4.  There is no convention or\
    \ shared understanding of what\n       information an answer to such a query for\
    \ a server identity could\n       or should contain, including a possible encoding\
    \ or\n       authentication mechanism.\n   5.  Hypothetically, since DNSSEC has\
    \ been defined to cover all DNS\n       classes, the TXT RRs returned in response\
    \ to the \"ID.SERVER.\"\n       query could be signed, which has the advantages\
    \ described in\n       [RFC4033].  However, since DNSSEC deployment for the CHAOS\
    \ class\n       is neither existent nor foreseeable, and since the \"ID.SERVER.\"\
    \n       TXT RR is expected to be unique per server, this would be\n       impossible\
    \ in practice.\n   The first of the listed disadvantages may be technically the\
    \ most\n   serious.  It argues for an attempt to design a good answer to the\n\
    \   problem, \"I need to know what nameserver is answering my queries\",\n   not\
    \ simply a convenient one.\n"
- title: 3.  Characteristics of an Implementation Neutral Convention
  contents:
  - "3.  Characteristics of an Implementation Neutral Convention\n   The discussion\
    \ above of advantages and disadvantages to the\n   \"HOSTNAME.BIND.\" mechanism\
    \ suggest some requirements for a better\n   solution to the server identification\
    \ problem.  These are summarized\n   here as guidelines for any effort to provide\
    \ appropriate protocol\n   extensions:\n   1.  The mechanism adopted must be in-band\
    \ for the DNS protocol.  That\n       is, it needs to allow the query for the\
    \ server's identifying\n       information to be part of a normal, operational\
    \ query.  It should\n       also permit a separate, dedicated query for the server's\n\
    \       identifying information.  But it should preserve the ability of\n    \
    \   the CHAOS/TXT query-based mechanism to work through firewalls and\n      \
    \ in other situations where only DNS can be relied upon to reach\n       the server\
    \ of interest.\n   2.  The new mechanism should not require dedicated namespaces\
    \ or\n       other reserved values outside of the existing protocol mechanisms\n\
    \       for these, i.e., the OPT pseudo-RR.  In particular, it should not\n  \
    \     propagate the existing drawback of requiring support for a CLASS\n     \
    \  and top level domain in the authoritative server (or the querying\n       tool)\
    \ to be useful.\n   3.  Support for the identification functionality should be\
    \ easy to\n       implement and easy to enable.  It must be easy to disable and\n\
    \       should lend itself to access controls on who can query for it.\n   4.\
    \  It should be possible to return a unique identifier for a server\n       without\
    \ requiring the exposure of information that may be non-\n       public and considered\
    \ sensitive by the operator, such as a\n       hostname or unicast IP address\
    \ maintained for administrative\n       purposes.\n   5.  It should be possible\
    \ to authenticate the received data by some\n       mechanism analogous to those\
    \ provided by DNSSEC.  In this\n       context, the need could be met by including\
    \ encryption options in\n       the specification of a new mechanism.\n   6. \
    \ The identification mechanism should not be implementation-\n       specific.\n"
- title: 4.  IANA Considerations
  contents:
  - "4.  IANA Considerations\n   This document proposes no specific IANA action. \
    \ Protocol extensions,\n   if any, to meet the requirements described are out\
    \ of scope for this\n   document.  A proposed extension, specified and adopted\
    \ by normal IETF\n   process, is described in [NSID], including relevant IANA\
    \ action.\n"
- title: 5.  Security Considerations
  contents:
  - "5.  Security Considerations\n   Providing identifying information as to which\
    \ server is responding to\n   a particular query from a particular location in\
    \ the Internet can be\n   seen as information leakage and thus a security risk.\
    \  This motivates\n   the suggestion above that a new mechanism for server identification\n\
    \   allow the administrator to disable the functionality altogether or\n   partially\
    \ restrict availability of the data.  It also suggests that\n   the server identification\
    \ data should not be readily correlated with\n   a hostname or unicast IP address\
    \ that may be considered private to\n   the nameserver operator's management infrastructure.\n\
    \   Propagation of protocol or service meta-data can sometimes expose the\n  \
    \ application to denial of service or other attack.  As the DNS is a\n   critically\
    \ important infrastructure service for the production\n   Internet, extra care\
    \ needs to be taken against this risk for\n   designers, implementors, and operators\
    \ of a new mechanism for server\n   identification.\n   Both authentication and\
    \ confidentiality of server identification data\n   are potentially of interest\
    \ to administrators -- that is, operators\n   may wish to make such data available\
    \ and reliable to themselves and\n   their chosen associates only.  This constraint\
    \ would imply both an\n   ability to authenticate it to themselves and to keep\
    \ it private from\n   arbitrary other parties, which leads to characteristics\
    \ 4 and 5 of an\n   improved solution.\n"
- title: 6.  Acknowledgements
  contents:
  - "6.  Acknowledgements\n   The technique for host identification documented here\
    \ was initially\n   implemented by Paul Vixie of the Internet Software Consortium\
    \ in the\n   Berkeley Internet Name Daemon package.  Comments and questions on\n\
    \   earlier versions were provided by Bob Halley, Brian Wellington,\n   Andreas\
    \ Gustafsson, Ted Hardie, Chris Yarnell, Randy Bush, and\n   members of the ICANN\
    \ Root Server System Advisory Committee.  The\n   newest version takes a significantly\
    \ different direction from\n   previous versions, owing to discussion among contributors\
    \ to the\n   DNSOP working group and others, particularly Olafur Gudmundsson,\
    \ Ed\n   Lewis, Bill Manning, Sam Weiler, and Rob Austein.\n"
- title: 7.  References
  contents:
  - '7.  References

    '
- title: 7.1.  Normative References
  contents:
  - "7.1.  Normative References\n   [RFC1034]  Mockapetris, P., \"Domain Names - Concepts\
    \ and Facilities\",\n              STD 13, RFC 1034, November 1987.\n   [RFC1035]\
    \  Mockapetris, P., \"Domain Names - Implementation and\n              Specification\"\
    , STD 13, RFC 1035, November 1987.\n   [RFC3258]  Hardie, T., \"Distributing Authoritative\
    \ Name Servers via\n              Shared Unicast Addresses\", RFC 3258, April\
    \ 2002.\n"
- title: 7.2.  Informative References
  contents:
  - "7.2.  Informative References\n   [BIND]     ISC, \"BIND 9 Configuration Reference\"\
    .\n   [NSID]     Austein, R., \"DNS Name Server Identifier Option (NSID)\",\n\
    \              Work in Progress, June 2006.\n   [RFC4033]  Arends, R., Austein,\
    \ R., Larson, M., Massey, D., and S.\n              Rose, \"DNS Security Introduction\
    \ and Requirements\", RFC\n              4033, March 2005.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Suzanne Woolf\n   Internet Systems Consortium, Inc.\n\
    \   950 Charter Street\n   Redwood City, CA  94063\n   US\n   Phone: +1 650 423-1333\n\
    \   EMail: woolf@isc.org\n   URI:   http://www.isc.org/\n   David Conrad\n   ICANN\n\
    \   4676 Admiralty Way\n   Marina del Rey, CA  90292\n   US\n   Phone: +1 310\
    \ 823 9358\n   EMail: david.conrad@icann.org\n   URI:   http://www.iana.org/\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2007).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
