- title: __initial_text__
  contents:
  - '     Scenarios and Analysis for Introducing IPv6 into ISP Networks

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2005).\n"
- title: Abstract
  contents:
  - "Abstract\n   This document describes different scenarios for the introduction\
    \ of\n   IPv6 into an ISP's existing IPv4 network without disrupting the IPv4\n\
    \   service.  The scenarios for introducing IPv6 are analyzed, and the\n   relevance\
    \ of already defined transition mechanisms are evaluated.\n   Known challenges\
    \ are also identified.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.   Introduction. . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  2\n        1.1.  Goal and Scope of the Document. . . . . . . .\
    \ . . . . .  2\n   2.   Brief Description of a Generic ISP Network. . . . . .\
    \ . . . .  3\n   3.   Transition Scenarios. . . . . . . . . . . . . . . . . .\
    \ . . .  4\n        3.1.  Identification of Stages and Scenarios. . . . . . .\
    \ . .  4\n        3.2.  Stages. . . . . . . . . . . . . . . . . . . . . . . .\
    \ .  5\n              3.2.1.  Stage 1 Scenarios: Launch . . . . . . . . . . .\
    \  5\n              3.2.2.  Stage 2a Scenarios: Backbone. . . . . . . . . .  6\n\
    \              3.2.3.  Stage 2b Scenarios: Customer Connection . . . .  6\n  \
    \            3.2.4.  Stage 3 Scenarios: Complete . . . . . . . . . .  7\n    \
    \          3.2.5.  Stages 2a and 3: Combination Scenarios. . . . .  7\n      \
    \  3.3.  Transition Scenarios. . . . . . . . . . . . . . . . . .  7\n        3.4.\
    \  Actions Needed When Deploying IPv6 in an ISP's Network.  8\n   4.   Backbone\
    \ Transition Actions . . . . . . . . . . . . . . . . .  9\n        4.1.  Steps\
    \ in the Transition of Backbone Networks. . . . . .  9\n              4.1.1. \
    \ MPLS Backbone . . . . . . . . . . . . . . . . .  9\n        4.2.  Configuration\
    \ of Backbone Equipment . . . . . . . . . . 10\n        4.3.  Routing . . . .\
    \ . . . . . . . . . . . . . . . . . . . . 10\n              4.3.1.  IGP . . .\
    \ . . . . . . . . . . . . . . . . . . . 11\n              4.3.2.  EGP . . . .\
    \ . . . . . . . . . . . . . . . . . . 12\n              4.3.3.  Transport of Routing\
    \ Protocols. . . . . . . . . 12\n        4.4.  Multicast . . . . . . . . . . .\
    \ . . . . . . . . . . . . 13\n   5.   Customer Connection Transition Actions.\
    \ . . . . . . . . . . . 13\n        5.1.  Steps in the Transition of Customer\
    \ Connection Networks 13\n              5.1.1.  Small End Sites . . . . . . .\
    \ . . . . . . . . . 14\n              5.1.2.  Large End Sites . . . . . . . .\
    \ . . . . . . . . 15\n        5.2.  User Authentication/Access Control Requirements\
    \ . . . . 15\n        5.3.  Configuration of Customer Equipment . . . . . . .\
    \ . . . 16\n        5.4.  Requirements for Traceability . . . . . . . . . . .\
    \ . . 16\n        5.5.  Ingress Filtering in the Customer Connection Network.\
    \ . 17\n        5.6.  Multihoming . . . . . . . . . . . . . . . . . . . . . .\
    \ 17\n        5.7.  Quality of Service. . . . . . . . . . . . . . . . . . . 17\n\
    \   6.   Network and Service Operation Actions . . . . . . . . . . . . 18\n  \
    \ 7.   Future Stages . . . . . . . . . . . . . . . . . . . . . . . . 18\n   8.\
    \   Requirements for Follow-On Work . . . . . . . . . . . . . . . 19\n   9.  \
    \ Example Networks. . . . . . . . . . . . . . . . . . . . . . . 19\n        9.1.\
    \  Example 1 . . . . . . . . . . . . . . . . . . . . . . . 21\n        9.2.  Example\
    \ 2 . . . . . . . . . . . . . . . . . . . . . . . 22\n        9.3.  Example 3\
    \ . . . . . . . . . . . . . . . . . . . . . . . 23\n   10.  Security Considerations\
    \ . . . . . . . . . . . . . . . . . . . 23\n   11.  Acknowledgments . . . . .\
    \ . . . . . . . . . . . . . . . . . . 24\n   12.  Informative References. . .\
    \ . . . . . . . . . . . . . . . . . 24\n        Appendix A. . . . . . . . . .\
    \ . . . . . . . . . . . . . . . . 26\n        Authors' Addresses. . . . . . .\
    \ . . . . . . . . . . . . . . . 27\n        Full Copyright Statement. . . . .\
    \ . . . . . . . . . . . . . . 28\n"
- title: 1.  Introduction
  contents:
  - '1.  Introduction

    '
- title: 1.1.  Goal and Scope of the Document
  contents:
  - "1.1.  Goal and Scope of the Document\n   When an ISP deploys IPv6, its goal is\
    \ to provide IPv6 connectivity\n   and global address space to its customers.\
    \  The new IPv6 service must\n   be added to an existing IPv4 service, and the\
    \ introduction of IPv6\n   must not interrupt this IPv4 service.\n   An ISP offering\
    \ IPv4 service will find different ways to add IPv6 to\n   this service.  This\
    \ document discusses a small set of scenarios for\n   the introduction of IPv6\
    \ into an ISP's IPv4 network.  It evaluates\n   the relevance of the existing\
    \ transition mechanisms in the context of\n   these deployment scenarios and points\
    \ out the lack of essential\n   functionality in these methods.\n   The document\
    \ is focused on services that include both IPv6 and IPv4\n   and does not cover\
    \ issues surrounding IPv6-only service.  It is also\n   outside the scope of this\
    \ document to describe different types of\n   access or network technologies.\n"
- title: 2.  Brief Description of a Generic ISP Network
  contents:
  - "2.  Brief Description of a Generic ISP Network\n   A generic network topology\
    \ for an ISP can be divided into two main\n   parts: the backbone network and\
    \ customer connection networks.  In\n   addition, it includes building blocks\
    \ such as network and service\n   operations.  The additional building blocks\
    \ used in this document are\n   defined as follows:\n   \"CPE\"         : Customer\
    \ Premises Equipment\n   \"PE\"          : Provider Edge Equipment\n   \"Network\
    \ and service operation\"\n                 : This is the part of the ISP's network\
    \ that hosts the\n                   services required for the correct operation\
    \ of the\n                   ISP's network.  These services usually include\n\
    \                   management, supervision, accounting, billing, and\n      \
    \             customer management applications.\n   \"Customer connection\"\n\
    \                 : This is the part of the network used by a customer\n     \
    \              when connecting to an ISP's network.  It includes the\n       \
    \            CPE, the last hop link, and the parts of the PE\n               \
    \    interfacing to the last hop link.\n   \"Backbone\"    : This is the rest\
    \ of the ISP's network infrastructure.\n                   It includes the parts\
    \ of the PE interfacing to the\n                   core, the core routers of the\
    \ ISP, and the border\n                   routers used to exchange routing information\
    \ with\n                   other ISPs (or other administrative entities).\n  \
    \ \"Dual-stack network\"\n                 : A network that natively supports\
    \ both IPv4 and IPv6.\n   In some cases (e.g., incumbent national or regional\
    \ operators), a\n   given customer connection network may have to be shared between\
    \ or\n   among different ISPs.  According to the type of customer connection\n\
    \   network used (e.g., one involving only layer 2 devices or one\n   involving\
    \ non-IP technology), this constraint may result in\n   architectural considerations\
    \ relevant to this document.\n   The basic components in the ISP's network are\
    \ depicted in Figure 1.\n        ------------    ----------\n       | Network\
    \ and|  |          |\n       |  Service   |--| Backbone |\n       | Operation\
    \  |  |          |\\\n        ------------    ----------  \\\n               \
    \          / |  \\      \\\n                        /  |   \\      \\_Peering\
    \ (Direct and\n                       /   |    \\                exchange points)\n\
    \                      /    |     \\\n                     /     |      \\\n \
    \    ----------     /   ---------- \\     ----------\n    | Customer |   /   |\
    \ Customer | \\   | Customer |\n    |Connection|--/    |Connection|  \\--|Connection|\n\
    \    |     1    |       |     2    |     |     3    |\n     ----------       \
    \  ----------       ----------\n          |                  |               |\
    \         ISP's Network\n     -------------------------------------------------------\n\
    \          |                  |               |     Customers' Networks\n    \
    \ +--------+        +--------+      +--------+\n     |        |        |     \
    \   |      |        |\n     |Customer|        |Customer|      |Customer|\n   \
    \  |        |        |        |      |        |\n     +--------+        +--------+\
    \      +--------+\n                      Figure 1: ISP Network Topology\n"
- title: 3.  Transition Scenarios
  contents:
  - '3.  Transition Scenarios

    '
- title: 3.1.  Identification of Stages and Scenarios
  contents:
  - "3.1.  Identification of Stages and Scenarios\n   This section describes different\
    \ stages an ISP might consider when\n   introducing IPv6 connectivity into its\
    \ existing IPv4 network and the\n   different scenarios of what might occur in\
    \ the respective stages.\n   The stages here are snapshots of the ISP's network\
    \ with respect to\n   IPv6 maturity.  Because the ISP's network is continually\
    \ evolving, a\n   stage is a measure of how far along the ISP has come in terms\
    \ of\n   implementing the functionality necessary to offer IPv6 to its\n   customers.\n\
    \   It is possible for a transition to occur freely between different\n   stages.\
    \  Although a network segment can only be in one stage at a\n   time, the ISP's\
    \ network as a whole can be in different stages.\n   Different transition paths\
    \ can be followed from the first to the\n   final stage.  The transition between\
    \ two stages does not have to be\n   instantaneous; it can occur gradually.\n\
    \   Each stage has different IPv6 properties.  Therefore, based on its\n   requirements,\
    \ an ISP can decide which set of stages it will follow\n   and in what order to\
    \ transform its network.\n   This document is not aimed at covering small ISPs,\
    \ hosting providers,\n   or data centers; only the scenarios applicable to ISPs\
    \ eligible for\n   at least a /32 IPv6 prefix allocation from an RIR are covered.\n"
- title: 3.2.  Stages
  contents:
  - "3.2.  Stages\n   The stages are derived from the generic description of an ISP's\n\
    \   network in Section 2.  Combinations of different building blocks that\n  \
    \ constitute an ISP's environment lead to a number of scenarios from\n   which\
    \ the ISP can choose.  The scenarios most relevant to this\n   document are those\
    \ that maximize an ISP's ability to offer IPv6 to\n   its customers in the most\
    \ efficient and feasible way.  The assumption\n   in all stages is that the ISP's\
    \ goal is to offer both IPv4 and IPv6\n   to the customer.\n   The four most probable\
    \ stages are as follows:\n         o Stage 1      Launch\n         o Stage 2a\
    \     Backbone\n         o Stage 2b     Customer connection\n         o Stage\
    \ 3      Complete\n   Generally, an ISP is able to upgrade a current IPv4 network\
    \ to an\n   IPv4/IPv6 dual-stack network via Stage 2b, but the IPv6 service can\n\
    \   also be implemented at a small cost by adding simple tunnel\n   mechanisms\
    \ to the existing configuration.  When a new network is\n   designed, Stage 3\
    \ might be the first or last step because there are\n   no legacy concerns.  Nevertheless,\
    \ the absence of IPv6 capability in\n   the network equipment can still be a limiting\
    \ factor.\n   Note that in every stage except Stage 1, the ISP can offer both\
    \ IPv4\n   and IPv6 services to its customers.\n"
- title: '3.2.1.  Stage 1 Scenarios: Launch'
  contents:
  - "3.2.1.  Stage 1 Scenarios: Launch\n   The first stage is an IPv4-only ISP with\
    \ an IPv4 customer.  This is\n   the most common case today and is the natural\
    \ starting point for the\n   introduction of IPv6.  From this stage, the ISP can\
    \ move (undergo a\n   transition) from Stage 1 to any other stage with the goal\
    \ of offering\n   IPv6 to its customer.\n   The immediate first step consists\
    \ of obtaining a prefix allocation\n   (typically a /32) from the appropriate\
    \ RIR (e.g., AfriNIC, APNIC,\n   ARIN, LACNIC, RIPE) according to allocation procedures.\n\
    \   The ISP will also need to establish IPv6 connectivity to its upstream\n  \
    \ providers and peers; it is of utmost importance to require IPv6\n   transit\
    \ when negotiating IP transit deals with the upstream ISPs.  If\n   the upstream\
    \ is not providing IPv6 connectivity at the moment, it may\n   be possible to\
    \ obtain temporary connectivity from a nearby ISP,\n   possibly using a short\
    \ configured tunnel.  However, the longer-term\n   goal must be to require and\
    \ to obtain IPv6 connectivity from the\n   transit ISPs, because otherwise the\
    \ quality of IPv6 connectivity will\n   likely be poor.\n   Connectivity to peers\
    \ can typically be established either directly or\n   at Internet Exchange Points\
    \ (IX).  Most IXs use techniques where IPv6\n   is easy to use, and many IXs already\
    \ provide infrastructure for IPv6\n   peerings.  Such peerings can be done natively\
    \ by using IPv6.\n   Peerings over IPv6-in-IPv4 tunnels is also possible but not\n\
    \   recommended, at least in the long term.  Direct connectivity to peers\n  \
    \ may be feasible when there is direct connectivity to the peer for\n   IPv4.\n"
- title: '3.2.2.  Stage 2a Scenarios: Backbone'
  contents:
  - "3.2.2.  Stage 2a Scenarios: Backbone\n   Stage 2a deals with an ISP with IPv4-only\
    \ customer connection\n   networks and a backbone that supports both IPv4 and\
    \ IPv6.  In\n   particular, the ISP has the possibility of making the backbone\
    \ IPv6-\n   capable through software upgrades, hardware upgrades, or a\n   combination\
    \ of both.\n   Since the customer connections have not yet been upgraded, a\n\
    \   tunneling mechanism has to be used to provide IPv6 connectivity\n   through\
    \ the IPv4 customer connection networks.  The customer can\n   terminate the tunnel\
    \ at the CPE (if it has IPv6 support) or at some\n   set of devices internal to\
    \ its network.  That is, either the CPE or a\n   device inside the network could\
    \ provide global IPv6 connectivity to\n   the rest of the devices in the customer's\
    \ network.\n"
- title: '3.2.3.  Stage 2b Scenarios: Customer Connection'
  contents:
  - "3.2.3.  Stage 2b Scenarios: Customer Connection\n   Stage 2b consists of an ISP\
    \ with an IPv4 backbone network and a\n   customer connection network that supports\
    \ both IPv4 and IPv6.\n   Because the service to the customer is native IPv6,\
    \ the customer is\n   not required to support both IPv4 and IPv6.  This is the\
    \ biggest\n   difference from the previous stage.  The need to exchange IPv6\n\
    \   traffic still exists but might be more complicated than in the\n   previous\
    \ case because the backbone is not IPv6-enabled.  After\n   completing Stage 2b,\
    \ the original IPv4 backbone is unchanged.  This\n   means that the IPv6 traffic\
    \ is transported either by tunneling over\n   the existing IPv4 backbone, or in\
    \ an IPv6 overlay network more or\n   less separated from the IPv4 backbone.\n\
    \   Normally, the ISP will continue to provide IPv4 connectivity by using\n  \
    \ private (NATted by the ISP) or public IPv4 address.  In many cases,\n   the\
    \ customer also has a NAT of his/her own; if so, this likely\n   continues to\
    \ be used for IPv4 connectivity.\n"
- title: '3.2.4.  Stage 3 Scenarios: Complete'
  contents:
  - "3.2.4.  Stage 3 Scenarios: Complete\n   Stage 3 could be considered the final\
    \ step in introducing IPv6, at\n   least within the scope of this document.  This\
    \ stage consists of\n   ubiquitous IPv6 service with native support for IPv6 and\
    \ IPv4 in both\n   backbone and customer connection networks.  From the customer's\n\
    \   perspective, it is identical to the previous stage because the\n   customer\
    \ connection network has not changed.  The requirement for\n   exchanging IPv6\
    \ traffic is identical to that of Stage 2.\n"
- title: '3.2.5.  Stages 2a and 3: Combination Scenarios'
  contents:
  - "3.2.5.  Stages 2a and 3: Combination Scenarios\n   Some ISPs may use different\
    \ access technologies of varying IPv6\n   maturity.  This may result in a combination\
    \ of the Stages 2a and 3:\n   some customer connections do not support IPv6, but\
    \ others do; in both\n   cases the backbone is dual-stack.\n   This scenario is\
    \ equivalent to Stage 2a, but it requires support for\n   native IPv6 customer\
    \ connections on some access technologies.\n"
- title: 3.3.  Transition Scenarios
  contents:
  - "3.3.  Transition Scenarios\n   Given the different stages, it is clear that an\
    \ ISP has to be able to\n   make a transition from one stage to another.  The\
    \ initial stage in\n   this document is an IPv4-only service and network.  The\
    \ end stage is\n   a dual IPv4/IPv6 service and network.\n   The transition starts\
    \ with an IPv4 ISP and then moves in one of three\n   directions.  This choice\
    \ corresponds to the different transition\n   scenarios.  Stage 2a consists of\
    \ upgrading the backbone first.  Stage\n   2b consists of upgrading the customer\
    \ connection network.  Finally,\n   Stage 3 consists of introducing IPv6 in both\
    \ the backbone and\n   customer connections as needed.\n   Because most ISP backbone\
    \ IPv4 networks continually evolve (firmware\n   replacements in routers, new\
    \ routers, etc.), they can be made ready\n   for IPv6 without additional investment\
    \ (except staff training).  This\n   transition path may be slower but still useful,\
    \ as it allows for the\n   introduction of IPv6 without any actual customer demand.\
    \  This\n   approach may be superior to doing everything at the last minute,\n\
    \   which may entail a higher investment.  However, it is important to\n   consider\
    \ (and to request from vendors) IPv6 features in all new\n   equipment from the\
    \ outset.  Otherwise, the time and effort required\n   to remove non-IPv6-capable\
    \ hardware from the network may be\n   significant.\n"
- title: 3.4.  Actions Needed When Deploying IPv6 in an ISP's Network
  contents:
  - "3.4.  Actions Needed When Deploying IPv6 in an ISP's Network\n   Examination\
    \ of the transitions described above reveals that it is\n   possible to split\
    \ the work required for each transition into a small\n   set of actions.  Each\
    \ action is largely independent of the others,\n   and some actions may be common\
    \ to multiple transitions.\n   Analysis of the possible transitions leads to a\
    \ small list of\n   actions:\n      *  Actions required for backbone transition:\n\
    \         -  Connect dual-stack customer connection networks to other\n      \
    \      IPv6 networks through an IPv4 backbone.\n         -  Transform an IPv4\
    \ backbone into a dual-stack one.  This\n            action can be performed directly\
    \ or through intermediate\n            steps.\n      *  Actions required for customer\
    \ connection transition:\n         -  Connect IPv6 customers to an IPv6 backbone\
    \ through an IPv4\n            network.\n         -  Transform an IPv4 customer\
    \ connection network into a dual-\n            stack one.\n      *  Actions required\
    \ for network and service operation transition:\n         -  Set up IPv6 connectivity\
    \ to upstream providers and peers.\n         -  Configure IPv6 functions into\
    \ network components.\n         -  Upgrade regular network management and monitoring\n\
    \            applications to take IPv6 into account.\n         -  Extend customer\
    \ management (e.g., RADIUS) mechanisms to be\n            able to supply IPv6\
    \ prefixes and other information to\n            customers.\n         -  Enhance\
    \ accounting, billing, and so on to work with IPv6 as\n            needed. (Note:\
    \ If dual-stack service is offered, this may\n            not be necessary.)\n\
    \         -  Implement security for network and service operation.\n   Sections\
    \ 4, 5, and 6 contain detailed descriptions of each action.\n"
- title: 4.  Backbone Transition Actions
  contents:
  - '4.  Backbone Transition Actions

    '
- title: 4.1.  Steps in the Transition of Backbone Networks
  contents:
  - "4.1.  Steps in the Transition of Backbone Networks\n   In terms of physical equipment,\
    \ backbone networks mainly consist of\n   high-speed core and edge routers.  Border\
    \ routers provide peering\n   with other providers.  Filtering, routing policy,\
    \ and policing\n   functions are generally managed on border routers.\n   In the\
    \ beginning, an ISP has an IPv4-only backbone.  In the end, the\n   backbone is\
    \ completely dual-stack.  In between, intermediate steps\n   may be identified:\n\
    \                     Tunnels         Tunnels        Dual        Full\n   IPv4-only\
    \ ---->      or      --->   or         + Stack --> Dual Stack\n              \
    \    dedicated IPv6   dedicated IPv6  routers\n                      links   \
    \        links\n                        Figure 2: Transition Path\n   The first\
    \ step involves tunnels or dedicated links but leaves\n   existing routers unchanged.\
    \  Only a small set of routers then have\n   IPv6 capabilities.  The use of configured\
    \ tunnels is adequate during\n   this step.\n   In the second step, some dual-stack\
    \ routers are added, progressively,\n   to this network.\n   The final step is\
    \ reached when all or almost all routers are\n   dual-stack.\n   For many reasons\
    \ (technical, financial, etc.), the ISP may progress\n   step by step or jump\
    \ directly to the final one.  One important\n   criterion in planning this evolution\
    \ is the number of IPv6 customers\n   the ISP expects during its initial deployments.\
    \  If few customers\n   connect to the original IPv6 infrastructure, then the\
    \ ISP is likely\n   to remain in the initial steps for a long time.\n   In short,\
    \ each intermediate step is possible, but none is mandatory.\n"
- title: 4.1.1.  MPLS Backbone
  contents:
  - "4.1.1.  MPLS Backbone\n   If MPLS is already deployed in the backbone, it may\
    \ be desirable to\n   provide IPv6-over-MPLS connectivity.  However, setting up\
    \ an IPv6\n   Label Switched Path (LSP) requires signaling through the MPLS\n\
    \   network; both LDP and RSVP-TE can set up IPv6 LSPs, but this might\n   require\
    \ upgrade/change in the MPLS core network.\n   An alternative approach is to use\
    \ BGP for signaling or to perform;\n   for example, IPv6-over-IPv4/MPLS, as described\
    \ in [BGPTUNNEL].  Some\n   possibilities are preferable to others, depending\
    \ on the specific\n   environment under consideration.  The approaches seem to\
    \ be as\n   follows:\n         1) Require that MPLS networks deploy native IPv6\
    \ routing and\n            forwarding support.\n         2) Require that MPLS\
    \ networks support native routing and\n            setting up of IPv6 LSPs, used\
    \ for IPv6 connectivity.\n         3) Use only configured tunneling over IPv4\
    \ LSPs.\n         4) Use [BGPTUNNEL] to perform IPv6-over-IPv4/MPLS encapsulation\n\
    \            for IPv6 connectivity.\n   Approaches 1) and 2) are clearly the best\
    \ target approaches.\n   However, approach 1) may not be possible if the ISP is\
    \ not willing to\n   add IPv6 support in the network, or if the installed equipment\
    \ is not\n   capable of high performance native IPv6 forwarding.  Approach 2)\
    \ may\n   not be possible if the ISP is unwilling or unable to add IPv6 LSP\n\
    \   set-up support in the MPLS control plane.\n   Approach 4) can be used as an\
    \ interim mechanism when other options\n   are unfeasible or undesirable for the\
    \ reasons discussed above.\n   Approach 3) is roughly equivalent to approach 4)\
    \ except that it does\n   not require additional mechanisms but may lack scalability\
    \ in the\n   larger networks, especially if IPv6 is widely deployed.\n"
- title: 4.2.  Configuration of Backbone Equipment
  contents:
  - "4.2.  Configuration of Backbone Equipment\n   In the backbone, the number of\
    \ devices is small, and IPv6\n   configuration mainly deals with routing protocol\
    \ parameters,\n   interface addresses, loop-back addresses, access control lists,\
    \ and\n   so on.\n   These IPv6 parameters need to be configured manually.\n"
- title: 4.3.  Routing
  contents:
  - "4.3.  Routing\n   ISPs need routing protocols to advertise reachability and to\
    \ find the\n   shortest working paths, both internally and externally.\n   Either\
    \ OSPFv2 or IS-IS is typically used as the IPv4 IGP.  RIPv2 is\n   not usually\
    \ used in service provider networks, as OSPF and IS-IS are\n   superior IGPs.\
    \  BGP is the only IPv4 EGP.  Static routes also are\n   used in both cases.\n\
    \   Note that it is possible to configure a given network so that it has\n   an\
    \ IPv6 topology different from its IPv4 topology.  For example, some\n   links\
    \ or interfaces may be dedicated to IPv4-only or IPv6-only\n   traffic, or some\
    \ routers may be dual-stack whereas others may be\n   IPv4- or IPv6-only.  In\
    \ this case, routing protocols must be able to\n   understand and cope with multiple\
    \ topologies.\n"
- title: 4.3.1.  IGP
  contents:
  - "4.3.1.  IGP\n   Once the IPv6 topology has been determined, the choice of IPv6\
    \ IGP\n   must be made: either OSPFv3 or IS-IS for IPv6.  RIPng is not\n   appropriate\
    \ in most contexts, due to RIPv2 not being appropriate for\n   IPv4 either, and\
    \ is therefore not discussed here.  The IGP typically\n   includes the routers'\
    \ point-to-point and loop-back addresses.\n   The most important decision is whether\
    \ one wishes to have separate\n   routing protocol processes for IPv4 and IPv6.\
    \  Separating them\n   requires more memory and CPU for route calculations, e.g.,\
    \ when the\n   links flap.  But separation provides a measure of assurance that\n\
    \   should problems arise with IPv6 routing, they will not affect the\n   IPv4\
    \ routing protocol.  In the initial phases, if it is uncertain\n   whether joint\
    \ IPv4-IPv6 networking is working as intended, running\n   separate processes\
    \ may be desirable and easier to manage.\n   The possible combinations are as\
    \ follows:\n   -  With separate processes:\n         o OSPFv2 for IPv4, IS-IS\
    \ for IPv6 (only)\n         o OSPFv2 for IPv4, OSPFv3 for IPv6, or\n         o\
    \ IS-IS for IPv4, OSPFv3 for IPv6\n   -  With the same process:\n         o IS-IS\
    \ for both IPv4 and IPv6\n   Note that if IS-IS is used for both IPv4 and IPv6,\
    \ the IPv4/IPv6\n   topologies must be \"convex\", unless the multiple-topology\
    \ IS-IS\n   extensions [MTISIS] have been implemented (using IS-IS for only IPv4\n\
    \   or only IPv6 requires no convexity).  In simpler networks or with\n   careful\
    \ planning of IS-IS link costs, it is possible to keep even\n   incongruent IPv4/IPv6\
    \ topologies \"convex\".  The convexity problem is\n   explained in more detail\
    \ with an example in Appendix A.\n   When deploying full dual-stack in the short-term,\
    \ using single-\n   topology IS-IS is recommended.  This may be particularly applicable\n\
    \   for some larger ISPs.  In other scenarios, choosing between one or\n   two\
    \ separate processes often depends on the perceived risk to the\n   IPv4 routing\
    \ infrastructure, i.e., whether one wishes to keep them\n   separate for the time\
    \ being.  If this is not a factor, using a single\n   process is usually preferable\
    \ for operational reasons: not having to\n   manage two protocols and topologies.\n\
    \   The IGP is typically only used to carry loopback and point-to-point\n   addresses\
    \ and doesn't include customer prefixes or external routes.\n   Internal BGP (iBGP),\
    \ as described in the next section, is most often\n   deployed in all routers\
    \ (PE and core) to distribute routing\n   information about customer prefixes\
    \ and external routes.\n   Some of the simplest devices (e.g., CPE routers) may\
    \ not implement\n   routing protocols other than RIPng.  In some cases, therefore,\
    \ it may\n   be necessary to run RIPng in addition to one of the above IGPs, at\n\
    \   least in a limited fashion, and then, by some mechanism, to\n   redistribute\
    \ routing information between the routing protocols.\n"
- title: 4.3.2.  EGP
  contents:
  - "4.3.2.  EGP\n   BGP is used for both internal and external BGP sessions.\n  \
    \ BGP with multiprotocol extensions [RFC2858] can be used for IPv6\n   [RFC2545].\
    \  These extensions enable the exchange of IPv6 routing\n   information and the\
    \ establishment of BGP sessions using TCP over\n   IPv6.\n   It is possible to\
    \ use a single BGP session to advertise both IPv4 and\n   IPv6 prefixes between\
    \ two peers.  However, the most common practice\n   today is to use separate BGP\
    \ sessions.\n"
- title: 4.3.3.  Transport of Routing Protocols
  contents:
  - "4.3.3.  Transport of Routing Protocols\n   IPv4 routing information should be\
    \ carried by IPv4 transport and,\n   similarly, IPv6 routing information by IPv6\
    \ for several reasons:\n      *  IPv6 connectivity may work when IPv4 connectivity\
    \ is down (or\n         vice-versa).\n      *  The best route for IPv4 is not\
    \ always the best one for IPv6.\n      *  The IPv4 and IPv6 logical topologies\
    \ may be different because\n         the administrator may want to assign different\
    \ metrics to a\n         physical link for load balancing or because tunnels may\
    \ be in\n         use.\n"
- title: 4.4.  Multicast
  contents:
  - "4.4.  Multicast\n   Currently, IPv6 multicast is not a major concern for most\
    \ ISPs.\n   However, some of them are considering deploying it.  Multicast is\n\
    \   achieved by using the PIM-SM and PIM-SSM protocols.  These also work\n   with\
    \ IPv6.\n   Information about multicast sources is exchanged by using MSDP in\n\
    \   IPv4, but MSDP is intentionally not defined for IPv6.  Instead, one\n   should\
    \ use only PIM-SSM or an alternative mechanism for conveying the\n   information\
    \ [EMBEDRP].\n"
- title: 5.  Customer Connection Transition Actions
  contents:
  - '5.  Customer Connection Transition Actions

    '
- title: 5.1.  Steps in the Transition of Customer Connection Networks
  contents:
  - "5.1.  Steps in the Transition of Customer Connection Networks\n   Customer connection\
    \ networks are generally composed of a small set of\n   PEs connected to a large\
    \ set of CPEs and may be based on different\n   technologies depending on the\
    \ customer type or size, as well as the\n   required bandwidth or even quality\
    \ of service.  Small unmanaged\n   connection networks used for public customers\
    \ usually rely on\n   different technologies (e.g., dial-up or DSL) than the ones\
    \ used for\n   large customers, which typically run managed networks.  Transitioning\n\
    \   these infrastructures to IPv6 can be accomplished in several steps,\n   but\
    \ some ISPs, depending on their perception of the risks, may avoid\n   some of\
    \ the steps.\n   Connecting IPv6 customers to an IPv6 backbone through an IPv4\
    \ network\n   can be considered a first careful step taken by an ISP to provide\n\
    \   IPv6 services to its IPv4 customers.  Some ISPs may also choose to\n   provide\
    \ IPv6 service independently from the regular IPv4 service.\n   In any case, IPv6\
    \ service can be provided by using tunneling\n   techniques.  The tunnel may terminate\
    \ at the CPE corresponding to the\n   IPv4 service or in some other part of the\
    \ customer's infrastructure\n   (for instance, on IPv6-specific CPE or even on\
    \ a host).\n   Several tunneling techniques have already been defined: configured\n\
    \   tunnels with tunnel broker, 6to4 [RFC3056], Teredo [TEREDO], and so\n   on.\
    \  Some of these are based on a specific addressing plan\n   independent of the\
    \ ISP's allocated prefix(es), while others use a\n   part of the ISP's prefix.\
    \  In most cases, using the ISP's address\n   space is preferable.\n   A key factor\
    \ is the presence or absence of NATs between the two\n   tunnel end-points.  In\
    \ most cases, 6to4 and ISATAP are incompatible\n   with NATs, and UDP encapsulation\
    \ for configured tunnels has not been\n   specified.\n   Dynamic and non-permanent\
    \ IPv4 address allocation is another factor a\n   tunneling technique may have\
    \ to deal with.  In this case, the\n   tunneling techniques may be more difficult\
    \ to deploy at the ISP's\n   end, especially if a protocol including authentication\
    \ (like PPP for\n   IPv6) is not used.  This may need to be considered in more\
    \ detail.\n   However, NAT traversal can be avoided if the NAT supports forwarding\n\
    \   protocol-41 [PROTO41] and is configured to do so.\n   Firewalls in the path\
    \ can also break tunnels of these types.  The\n   administrator of the firewall\
    \ needs to create a hole for the tunnel.\n   This is usually manageable, as long\
    \ as the firewall is controlled by\n   either the customer or the ISP, which is\
    \ almost always the case.\n   When the CPE is performing NAT or firewall functions,\
    \ terminating the\n   tunnels directly at the CPE typically simplifies the scenario\n\
    \   considerably, avoiding the NAT and firewall traversal.  If such an\n   approach\
    \ is adopted, the CPE has to support the tunneling mechanism\n   used, or be upgraded\
    \ to do so.\n"
- title: 5.1.1.  Small End Sites
  contents:
  - "5.1.1.  Small End Sites\n   Tunneling considerations for small end sites are\
    \ discussed in\n   [UNMANEVA].  These identify solutions relevant to the first\
    \ category\n   of unmanaged networks.  The tunneling requirements applicable in\n\
    \   these scenarios are described in [TUNREQS].\n   The connectivity mechanisms\
    \ can be categorized as \"managed\" or\n   \"opportunistic\".  The former consist\
    \ of native service or a\n   configured tunnel (with or without a tunnel broker);\
    \ the latter\n   include 6to4 and, e.g., Teredo -- they provide \"short-cuts\"\
    \ between\n   nodes using the same mechanisms and are available without contracts\n\
    \   with the ISP.\n   The ISP may offer opportunistic services, mainly a 6to4\
    \ relay,\n   especially as a test when no actual service is offered yet.  At the\n\
    \   later phases, ISPs might also deploy 6to4 relays and Teredo servers\n   (or\
    \ similar) to optimize their customers' connectivity to 6to4 and\n   Teredo nodes.\n\
    \   Opportunistic services are typically based on techniques that don't\n   use\
    \ IPv6 addresses from the ISP's allocated prefix(es), and the\n   services have\
    \ very limited functions to control the origin and the\n   number of customers\
    \ connected to a given relay.\n   Most interesting are the managed services. \
    \ When dual-stack is not an\n   option, a form of tunneling must be used.  When\
    \ configured tunneling\n   is not an option (e.g., due to dynamic IPv4 addressing),\
    \ some form of\n   automation has to be used.  Basically, the options are either\
    \ to\n   deploy an L2TP architecture (whereby the customers would run L2TP\n \
    \  clients and PPP over it to initiate IPv6 sessions) or to deploy a\n   tunnel\
    \ configuration service.  The prime candidates for tunnel\n   configuration are\
    \ STEP [STEP] and TSP [TSP], which both also work in\n   the presence of NATs.\
    \  Neither is analyzed further in this document.\n"
- title: 5.1.2.  Large End Sites
  contents:
  - "5.1.2.  Large End Sites\n   Large end sites usually have a managed network.\n\
    \   Dual-stack access service is often a possibility, as the customer\n   network\
    \ is managed (although CPE upgrades may be necessary).\n   Configured tunnels,\
    \ as-is, are a good solution when a NAT is not in\n   the way and the IPv4 end-point\
    \ addresses are static.  In this\n   scenario, NAT traversal is not typically\
    \ required.  If fine-grained\n   access control is needed, an authentication protocol\
    \ needs to be\n   implemented.\n   Tunnel brokering solutions have been proposed\
    \ to help facilitate the\n   set-up of a bi-directional tunnel.  Such mechanisms\
    \ are typically\n   unnecessary for large end-sites, as simple configured tunneling\
    \ or\n   native access can be used instead.  However, if such mechanisms would\n\
    \   already be deployed, large sites starting to deploy IPv6 might\n   benefit\
    \ from them in any case.\n   Teredo is not applicable in this scenario, as it\
    \ can only provide\n   IPv6 connectivity to a single host, not the whole site.\
    \  6to4 is not\n   recommended due to its reliance on the relays and provider-\n\
    \   independent address space, which makes it impossible to guarantee the\n  \
    \ required service quality and manageability large sites typically\n   want.\n"
- title: 5.2.  User Authentication/Access Control Requirements
  contents:
  - "5.2.  User Authentication/Access Control Requirements\n   User authentication\
    \ can be used to control who can use the IPv6\n   connectivity service in the\
    \ first place or who can access specific\n   IPv6 services (e.g., NNTP servers\
    \ meant for customers only).  The\n   former is described at more length below.\
    \  The latter can be achieved\n   by ensuring that for all the service-specific\
    \ IPv4 access lists,\n   there are also equivalent IPv6 access lists.\n   IPv6-specific\
    \ user authentication is not always required.  An example\n   would be a customer\
    \ of the IPv4 service automatically having access\n   to the IPv6 service.  In\
    \ this case, the IPv4 access control also\n   provides access to the IPv6 services.\n\
    \   When a provider does not wish to give its IPv4 customers automatic\n   access\
    \ to IPv6 services, specific IPv6 access control must be\n   performed parallel\
    \ with the IPv4 access control.  This does not imply\n   that different user authentication\
    \ must be performed for IPv6, but\n   merely that the authentication process may\
    \ lead to different results\n   for IPv4 and IPv6 access.\n   Access control traffic\
    \ may use IPv4 or IPv6 transport.  For instance,\n   RADIUS [RFC2865] traffic\
    \ related to IPv6 service can be transported\n   over IPv4.\n"
- title: 5.3.  Configuration of Customer Equipment
  contents:
  - "5.3.  Configuration of Customer Equipment\n   The customer connection networks\
    \ are composed of PE and CPE(s).\n   Usually, each PE connects multiple CPE components\
    \ to the backbone\n   network infrastructure.  This number may reach tens of thousands\
    \ of\n   customers, or more.  The configuration of CPE is difficult for the\n\
    \   ISP, and it is even more difficult when it must be done remotely.  In\n  \
    \ this context, the use of auto-configuration mechanisms is beneficial,\n   even\
    \ if manual configuration is still an option.\n   The parameters that usually\
    \ need to be provided to customers\n   automatically are as follows:\n       \
    \  -  The network prefix delegated by the ISP\n         -  The address of the\
    \ Domain Name System server (DNS)\n         -  Possibly other parameters (e.g.,\
    \ the address of an NTP\n            server)\n   When user identification is required\
    \ on the ISP's network, DHCPv6 may\n   be used to provide configurations; otherwise,\
    \ either DHCPv6 or a\n   stateless mechanism may be used.  This is discussed in\
    \ more detail in\n   [DUAL-ACCESS].\n   Note that when the customer connection\
    \ network is shared between the\n   users or the ISPs and is not just a point-to-point\
    \ link,\n   authenticating the configuration of the parameters (especially prefix\n\
    \   delegation) requires further study.\n   As long as IPv4 service is available\
    \ alongside IPv6, it is not\n   required to auto configure IPv6 parameters in\
    \ the CPE, except the\n   prefix, because the IPv4 settings may be used.\n"
- title: 5.4.  Requirements for Traceability
  contents:
  - "5.4.  Requirements for Traceability\n   Most ISPs have some kind of mechanism\
    \ to trace the origin of traffic\n   in their networks.  This also has to be available\
    \ for IPv6 traffic,\n   meaning that a specific IPv6 address or prefix has to\
    \ be tied to a\n   certain customer, or that records must be maintained of which\n\
    \   customer had which address or prefix.  This also applies to the\n   customers\
    \ with tunneled connectivity.\n   This can be done, for example, by mapping a\
    \ DHCP response to a\n   physical connection and storing the result in a database.\
    \  It can\n   also be done by assigning a static address or prefix to the customer.\n\
    \   A tunnel server could also provide this mapping.\n"
- title: 5.5.  Ingress Filtering in the Customer Connection Network
  contents:
  - "5.5.  Ingress Filtering in the Customer Connection Network\n   Ingress filtering\
    \ must be deployed toward the customers, everywhere,\n   to ensure traceability,\
    \ to prevent DoS attacks using spoofed\n   addresses, to prevent illegitimate\
    \ access to the management\n   infrastructure, and so on.\n   Ingress filtering\
    \ can be done, for example, by using access lists or\n   Unicast Reverse Path\
    \ Forwarding (uRPF).  Mechanisms for these are\n   described in [RFC3704].\n"
- title: 5.6.  Multihoming
  contents:
  - "5.6.  Multihoming\n   Customers may desire multihoming or multi-connecting for\
    \ a number of\n   reasons [RFC3582].\n   Mechanisms for multihoming to more than\
    \ one ISP are still under\n   discussion.  One working model would deploy at least\
    \ one prefix per\n   ISP and choose the prefix from the ISP to which traffic is\
    \ sent.  In\n   addition, tunnels may be used for robustness [RFC3178].  Currently,\n\
    \   there are no provider-independent addresses for end-sites.  Such\n   addresses\
    \ would enable IPv4-style multihoming, with associated\n   disadvantages.\n  \
    \ Multi-connecting more than once to one ISP is a simple practice, and\n   this\
    \ can be done, for example, by using BGP with public or private AS\n   numbers\
    \ and a prefix assigned to the customer.\n"
- title: 5.7.  Quality of Service
  contents:
  - "5.7.  Quality of Service\n   In most networks, quality of service in one form\
    \ or another is\n   important.\n   Naturally, the introduction of IPv6 should\
    \ not impair existing\n   Service Level Agreements (SLAs) or similar quality assurances.\n\
    \   During the deployment of the IPv6 service, the service could be best\n   effort\
    \ or similar, even if the IPv4 service has an SLA.  In the end,\n   both IP versions\
    \ should be treated equally.\n   IntServ and DiffServ are equally applicable to\
    \ IPv6 and IPv4 and work\n   similarly regardless of IP version.  Of the two,\
    \ typically only\n   DiffServ has been implemented.\n   Many bandwidth provisioning\
    \ systems operate with IPv4 assumptions,\n   e.g., taking an IPv4 address or (set\
    \ of) prefixes for which traffic\n   is reserved or preferred.  These systems\
    \ require special attention\n   when introducing IPv6 support in the networks.\n"
- title: 6.  Network and Service Operation Actions
  contents:
  - "6.  Network and Service Operation Actions\n   The network and service operation\
    \ actions fall into different\n   categories as listed below:\n      -  Set up\
    \ IPv6 connectivity to upstream providers and peers\n      -  IPv6 network device\
    \ configuration: for initial configuration\n         and updates\n      -  IPv6\
    \ network management\n      -  IPv6 monitoring\n      -  IPv6 customer management\n\
    \      -  IPv6 network and service operation security\n   Some of these items\
    \ will require an available IPv6 native transport\n   layer and others will not.\n\
    \   As a first step, network device configuration and regular network\n   management\
    \ operations can be performed over an IPv4 transport,\n   because IPv6 MIBs are\
    \ also available.  Nevertheless, some monitoring\n   functions require the availability\
    \ of IPv6 transport.  This is the\n   case, for instance, when ICMPv6 messages\
    \ are used by the monitoring\n   applications.\n   On many platforms, the current\
    \ inability to retrieve separate IPv4\n   and IPv6 traffic statistics from dual-stack\
    \ interfaces for management\n   purposes by using SNMP is an issue.\n   As a second\
    \ step, IPv6 transport can be provided for any of these\n   network and service\
    \ operation facilities.\n"
- title: 7.  Future Stages
  contents:
  - "7.  Future Stages\n   At some point, an ISP may want to change to a service that\
    \ is IPv6\n   only, at least in certain parts of its network.  This transition\n\
    \   creates many new cases into which continued maintenance of the IPv4\n   service\
    \ must be factored.  Providing an IPv6-only service is not much\n   different\
    \ from the dual IPv4/IPv6 service described in stage 3 except\n   for the need\
    \ to phase out the IPv4 service.  The delivery of IPv4\n   services over an IPv6\
    \ network and the phaseout of IPv4 are issues\n   left for a subsequent document.\
    \  Note that there are some services\n   which will need to maintain IPv4 connectivity\
    \ (e.g., authorative and\n   some recursive DNS servers [DNSGUIDE]).\n"
- title: 8.  Requirements for Follow-On Work
  contents:
  - "8.  Requirements for Follow-On Work\n   This section tries to summarize the potential\
    \ items requiring\n   specification in the IETF.\n   Work items for which an approach\
    \ was not yet apparent as of this\n   writing are as follows:\n   -  A tunnel\
    \ server/broker mechanism, for the cases where the customer\n      connection\
    \ networks cannot be upgraded, needs to be specified\n      [TUNREQS].\n   - \
    \ An IPv6 site multihoming mechanism (or multiple ones) needs to be\n      developed.\n\
    \   Work items which were already fast in progress, as of this writing,\n   are\
    \ as follows:\n   -  6PE for MPLS was identified as a required mechanism, and\
    \ this is\n      already in progress [BGPTUNNEL].\n   -  IS-IS for Multiple Topologies\
    \ was noted as a helpful mechanism in\n      certain environments; however, it\
    \ is possible to use alternative\n      methods to achieve the same end, so specifying\
    \ this is not\n      strictly required.\n"
- title: 9.  Example Networks
  contents:
  - "9.  Example Networks\n   This section presents a number of different example\
    \ networks.  These\n   will not necessarily match any existing networks but are\
    \ intended to\n   be useful even when they do not correspond to specific target\n\
    \   networks.  The purpose is to exemplify the applicability of the\n   transition\
    \ mechanisms described in this document to a number of\n   different situations\
    \ with different prerequisites.\n   The sample network layout will be the same\
    \ in each network example.\n   This should be viewed as a specific representation\
    \ of a generic\n   network with a limited number of network devices.  A small\
    \ number of\n   routers have been used in the examples.  However, because the\
    \ network\n   examples follow the implementation strategies recommended for the\n\
    \   generic network scenario, it should be possible to scale the examples\n  \
    \ to fit a network with an arbitrary number, e.g., several hundreds or\n   thousands\
    \ of routers.\n   The routers in the sample network layout are interconnected\
    \ with each\n   other and with another ISP.  The connection to another ISP can\
    \ be\n   either direct or through an exchange point.  A number of customer\n \
    \  connection networks are also connected to the routers.  Customer\n   connection\
    \ networks can be, for example, xDSL or cable network\n   equipment.\n       \
    \             ISP1 | ISP2\n               +------+  |  +------+\n            \
    \   |      |  |  |      |\n               |Router|--|--|Router|\n            \
    \   |      |  |  |      |\n               +------+  |  +------+\n            \
    \   /      \\  +-----------------------\n              /        \\\n         \
    \    /          \\\n         +------+    +------+\n         |      |    |    \
    \  |\n         |Router|----|Router|\n         |      |    |      |\n         +------+\
    \    +------+\\\n             |           |    \\             | Exchange point\n\
    \         +------+    +------+  \\  +------+  |  +------+\n         |      | \
    \   |      |   \\_|      |  |  |      |--\n         |Router|----|Router|----\\\
    |Router|--|--|Switch|--\n         |      |    |      |     |      |  |  |    \
    \  |--\n         +------+   /+------+     +------+  |  +------+\n            \
    \ |     /     |                  |\n         +-------+/  +-------+           \
    \   |\n         |       |   |       |\n         |Access1|   |Access2|\n      \
    \   |       |   |       |\n         +-------+   +-------+\n           |||||  \
    \     |||||  ISP Network\n         ----|-----------|----------------------\n \
    \            |           |    Customer Networks\n         +--------+  +--------+\n\
    \         |        |  |        |\n         |Customer|  |Customer|\n         |\
    \        |  |        |\n         +--------+  +--------+\n               Figure\
    \ 3: ISP Sample Network Layout\n"
- title: 9.1.  Example 1
  contents:
  - "9.1.  Example 1\n   Example 1 presents a network built according to the sample\
    \ network\n   layout with a native IPv4 backbone.  The backbone is running IS-IS\n\
    \   and IBGP as routing protocols for internal and external routes,\n   respectively.\
    \  Multiprotocol BGP is used to exchange routes over the\n   connections to ISP2\
    \ and the exchange point.  Multicast using PIM-SM\n   routing is present.  QoS\
    \ using DiffServ is deployed.\n   Access 1 is xDSL connected to the backbone through\
    \ an access router.\n   The xDSL equipment, except for the access router, is considered\
    \ to be\n   layer 2 only, e.g., Ethernet or ATM.  IPv4 addresses are dynamically\n\
    \   assigned to the customer with DHCP.  No routing information is\n   exchanged\
    \ with the customer.  Access control and traceability are\n   performed in the\
    \ access router.  Customers are separated into VLANs\n   or separate ATM PVCs\
    \ up to the access router.\n   Access 2 is \"fiber to the building or home\" (FTTB/H)\
    \ connected\n   directly to the backbone router.  This connection is considered\n\
    \   layer-3-aware, because it uses layer 3 switches and performs access\n   control\
    \ and traceability through its layer 3 awareness by using DHCP\n   snooping. \
    \ IPv4 addresses are dynamically assigned to the customers\n   with DHCP.  No\
    \ routing information is exchanged with the customer.\n   The actual IPv6 deployment\
    \ might start by enabling IPv6 on a couple\n   of backbone routers, configuring\
    \ tunnels between them (if not\n   adjacent) and connecting to a few peers or\
    \ upstream providers (either\n   through tunnels or at an internet exchange).\n\
    \   After a trial period, the rest of the backbone is upgraded to dual-\n   stack,\
    \ and IS-IS, without multi-topology extensions (the upgrade\n   order is considered\
    \ with care), is used as an IPv6 and IPv4 IGP.\n   During an upgrade until IPv6\
    \ customers are connected behind a\n   backbone router, the convexity requirement\
    \ is not critical: The\n   routers will just not be reachable with IPv6.  Software\
    \ supporting\n   IPv6 could be installed even though the routers would not be\
    \ used for\n   (customer) IPv6 traffic yet.  That way, IPv6 could be enabled in\
    \ the\n   backbone as needed.\n   Separate IPv6 BGP sessions are built similarly\
    \ to IPv4.  Multicast\n   (through SSM and Embedded-RP) and DiffServ are offered\
    \ at a later\n   phase of the network, e.g., after a year of stable IPv6 unicast\n\
    \   operations.\n   Offering native service as quickly as possible is important.\
    \  In the\n   meantime, however, a 6to4 relay may be provided in the meantime\
    \ for\n   optimized 6to4 connectivity and may also be combined with a tunnel\n\
    \   broker for extended functionality.  Operating as bridges at Layer 2\n   only,\
    \ xDSL equipment does not require changes in CPE: IPv6\n   connectivity can be\
    \ offered to the customers by upgrading the PE\n   router to IPv6.  In the initial\
    \ phase, only Router Advertisements are\n   used; DHCPv6 Prefix Delegation can\
    \ be added as the next step if no\n   other mechanisms are available.\n   The\
    \ FTTB/H access has to be upgraded to support access control and\n   traceability\
    \ in the switches, probably by using DHCP snooping or a\n   similar IPv6 capability,\
    \ but it also has to be compatible with prefix\n   delegation, not just address\
    \ assignment.  This could, however, lead\n   to the necessity to use DHCPv6 for\
    \ address assignment.\n"
- title: 9.2.  Example 2
  contents:
  - "9.2.  Example 2\n   In example 2, the backbone is running IPv4 with MPLS and\
    \ is using\n   OSPF and IBGP for internal and external routes, respectively. \
    \ The\n   connections to ISP2 and the exchange point run BGP to exchange\n   routes.\
    \  Multicast and QoS are not deployed.\n   Access 1 is a fixed line, e.g., fiber,\
    \ connected directly to the\n   backbone.  Routing information is in some cases\
    \ exchanged with CPE at\n   the customer's site; otherwise static routing is used.\
    \  Access 1 can\n   also be connected to a BGP/MPLS-VPN running in the backbone.\n\
    \   Access 2 is xDSL connected directly to the backbone router.  The xDSL\n  \
    \ is layer 2 only, and access control and traceability are achieved\n   through\
    \ PPPoE/PPPoA.  PPP also provides address assignment.  No\n   routing information\
    \ is exchanged with the customer.\n   IPv6 deployment might start with an upgrade\
    \ of a couple of PE routers\n   to support [BGPTUNNEL], as this will allow large-scale\
    \ IPv6 support\n   without hardware or software upgrades in the core.  In a later\
    \ phase,\n   native IPv6 traffic or IPv6 LSPs would be used in the whole network.\n\
    \   In this case, IS-IS or OSPF could be used for the internal routing,\n   and\
    \ a separate IPv6 BGP session would be run.\n   For the fixed-line customers,\
    \ the CPE has to be upgraded, and prefix\n   delegation using DHCPv6 or static\
    \ assignment would be used.  An IPv6\n   MBGP session would be used when routing\
    \ information has to be\n   exchanged.  In the xDSL case, the same conditions\
    \ for IP-tunneling\n   apply as in Example 1.  In addition to IP-tunneling,  a\
    \ PPP session\n   can be used to offer IPv6 access to a limited number of customers.\n\
    \   Later, when clients and servers have been updated, the IPv6 PPP\n   session\
    \ can be replaced with a combined PPP session for both IPv4 and\n   IPv6.  PPP\
    \ has to be used for address and prefix assignment.\n"
- title: 9.3.  Example 3
  contents:
  - "9.3.  Example 3\n   A transit provider offers IP connectivity to other providers,\
    \ but not\n   to end users or enterprises.  IS-IS and IBGP are used internally,\
    \ and\n   BGP is used externally.  Its accesses connect Tier-2 provider cores.\n\
    \   No multicast or QoS is used.\n   As this type of transit provider has a number\
    \ of customers, who have\n   a large number of customers in turn, it obtains an\
    \ address allocation\n   from an RIR.  The whole backbone can be upgraded to dual-stack\
    \ in a\n   reasonably short time after a trial with a couple of routers.  IPv6\n\
    \   routing is performed by using the same IS-IS process and separate\n   IPv6\
    \ BGP sessions.\n   The ISP provides IPv6 transit to its customers for free, as\
    \ a\n   competitive advantage.  It also provides, at the first phase only, a\n\
    \   configured tunnel service with BGP peering to the significant sites\n   and\
    \ customers (those with an AS number) who are the customers of its\n   customers\
    \ whenever its own customer networks are not offering IPv6.\n   This is done both\
    \ to introduce them to IPv6 and to create a\n   beneficial side effect: A bit\
    \ of extra revenue is generated from its\n   direct customers as the total amount\
    \ of transited traffic grows.\n"
- title: 10.  Security Considerations
  contents:
  - "10.  Security Considerations\n   This document analyzes scenarios and identifies\
    \ transition mechanisms\n   that could be used for the scenarios.  It does not\
    \ introduce any new\n   security issues.  Security considerations of each mechanism\
    \ are\n   described in the respective documents.\n   However, a few generic observations\
    \ are in order.\n      o  Introducing IPv6 adds new classes of security threats\
    \ or\n         requires adopting new protocols or operational models than\n  \
    \       those for IPv4; typically these are generic issues, to be\n         discussed\
    \ further in other documents, for example, [V6SEC].\n      o  The more complex\
    \ the transition mechanisms employed become, the\n         more difficult it will\
    \ be to manage or analyze their impact on\n         security.  Consequently, simple\
    \ mechanisms are preferable.\n      o  This document has identified a number of\
    \ requirements for\n         analysis or further work that should be explicitly\
    \ considered\n         when adopting IPv6: how to perform access control over\
    \ shared\n         media or shared ISP customer connection media, how to manage\n\
    \         the configuration management security on such environments\n       \
    \  (e.g., DHCPv6 authentication keying), and how to manage\n         customer\
    \ traceability if stateless address autoconfiguration is\n         used.\n"
- title: 11.  Acknowledgments
  contents:
  - "11.  Acknowledgments\n   This document has greatly benefited from input by Marc\
    \ Blanchet,\n   Jordi Palet, Francois Le Faucheur, Ronald van der Pol, and Cleve\n\
    \   Mickles.\n   Special thanks to Richard Graveman and Michael Lambert for\n\
    \   proofreading the document.\n"
- title: 12.  Informative References
  contents:
  - "12.  Informative References\n   [EMBEDRP]      Savola, P. and B. Haberman, \"\
    Embedding the Rendezvous\n                  Point (RP) Address in an IPv6 Multicast\
    \ Address\", RFC\n                  3956, November 2004.\n   [MTISIS]       Przygienda,\
    \ T., Naiming Shen, Nischal Sheth, \"M-ISIS:\n                  Multi Topology\
    \ (MT) Routing in IS-IS\", Work in\n                  Progress.\n   [RFC2858]\
    \      Bates, T., Rekhter, Y., Chandra, R., and D. Katz,\n                  \"\
    Multiprotocol Extensions for BGP-4\", RFC 2858, June\n                  2000.\n\
    \   [RFC2545]      Marques, P. and F. Dupont, \"Use of BGP-4 Multiprotocol\n \
    \                 Extensions for IPv6 Inter-Domain Routing\", RFC 2545,\n    \
    \              March 1999.\n   [RFC3704]      Baker, F. and P. Savola, \"Ingress\
    \ Filtering for\n                  Multihomed Networks\", BCP 84, RFC 3704, March\
    \ 2004.\n   [RFC3582]      Abley, J., Black, B., and V. Gill, \"Goals for IPv6\n\
    \                  Site-Multihoming Architectures\", RFC 3582, August\n      \
    \            2003.\n   [RFC3178]      Hagino, J. and H. Snyder, \"IPv6 Multihoming\
    \ Support at\n                  Site Exit Routers\", RFC 3178, October 2001.\n\
    \   [RFC3056]      Carpenter, B. and K. Moore, \"Connection of IPv6\n        \
    \          Domains via IPv4 Clouds\", RFC 3056, February 2001.\n   [RFC2865] \
    \     Rigney, C., Willens, S., Rubens, A., and W. Simpson,\n                 \
    \ \"Remote Authentication Dial In User Service (RADIUS)\",\n                 \
    \ RFC 2865, June 2000.\n   [BGPTUNNEL]    De Clercq, J., Gastaud, G., Ooms, D.,\
    \ Prevost, S., Le\n                  Faucheur, F., \"Connecting IPv6 Islands across\
    \ IPv4\n                  Clouds with BGP\", Work in Progress.\n   [DUAL-ACCESS]\
    \  Shirasaki, Y., Miyakawa, S., Yamasaki, T., Takenouchi,\n                  A.,\
    \ \"A Model of IPv6/IPv4 Dual Stack Internet Access\n                  Service\"\
    , Work in Progress.\n   [STEP]         Savola, P., \"Simple IPv6-in-IPv4 Tunnel\
    \ Establishment\n                  Procedure (STEP)\", Work in Progress.\n   [TSP]\
    \          Blanchet, M., \"IPv6 Tunnel Broker with Tunnel Setup\n            \
    \      Protocol (TSP)\", Work in Progress.\n   [TUNREQS]      Palet, J., Nielsen,\
    \ K., Parent, F., Durand, A.,\n                  Suryanarayanan, R., and P. Savola,\
    \ \"Goals for\n                  Tunneling Configuration\", Work in Progress,\
    \ February\n                  2005.\n   [UNMANEVA]     Huitema, C., Austein, R.,\
    \ Satapati, S., van der Pol,\n                  R., \"Evaluation of Transition\
    \ Mechanisms for Unmanaged\n                  Networks\", Work in Progress.\n\
    \   [PROTO41]      Palet, J., Olvera, C., Fernandez, D., \"Forwarding\n      \
    \            Protocol 41 in NAT Boxes\", Work in Progress.\n   [V6SEC]       \
    \ Savola, P., \"IPv6 Transition/Co-existence Security\n                  Considerations\"\
    , Work in Progress.\n   [DNSGUIDE]     Durand, A., Ihren, J., \"DNS IPv6 transport\
    \ operational\n                  guidelines\", Work in Progress.\n   [TEREDO]\
    \       Huitema, C., \"Teredo: Tunneling IPv6 over UDP through\n             \
    \     NATs\", Work in Progress.\n"
- title: 'Appendix A:  Convexity Requirements in Single Topology IS-IS'
  contents:
  - "Appendix A:  Convexity Requirements in Single Topology IS-IS\n   The single-topology\
    \ IS-IS convexity requirements could be summarized,\n   from IPv4/6 perspective,\
    \ as follows:\n   1) \"any IP-independent path from an IPv4 router to any other\
    \ IPv4\n      router must only go through routers which are IPv4-capable\", and\n\
    \   2) \"any IP-independent path from an IPv6 router to any other IPv6\n     \
    \ router must only go through routers which are IPv6-capable\".\n   As IS-IS is\
    \ based upon CLNS, these are not trivially accomplished.\n   The single-topology\
    \ IS-IS builds paths which are agnostic of IP\n   versions.\n   Consider an example\
    \ scenario of three IPv4/IPv6-capable routers and\n   an IPv4-only router:\n \
    \          cost 5     R4   cost 5\n           ,------- [v4/v6] -----.\n      \
    \    /                       \\\n     [v4/v6] ------ [ v4 ] -----[v4/v6]\n   \
    \    R1   cost 3    R3  cost 3  R2\n   Here the second requirement would not hold.\
    \  IPv6 packets from R1 to\n   R2 (or vice versa) would go through R3, which does\
    \ not support IPv6,\n   and the packets would get discarded.  By reversing the\
    \ costs between\n   R1-R3, R3-R2 and R1-R4,R4-R2 the traffic would work in the\
    \ normal\n   case, but if a link fails and the routing changes to go through R3,\n\
    \   the packets would start being discarded again.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Mikael Lind\n   TeliaSonera\n   Vitsandsgatan 9B\n   SE-12386\
    \ Farsta, Sweden\n   EMail: mikael.lind@teliasonera.com\n   Vladimir Ksinant\n\
    \   Thales Communications\n   160, boulevard de Valmy\n   92704 Colombes, France\n\
    \   EMail: vladimir.ksinant@fr.thalesgroup.com\n   Soohong Daniel Park\n   Mobile\
    \ Platform Laboratory, SAMSUNG Electronics.\n   416, Maetan-3dong, Paldal-Gu,\n\
    \   Suwon, Gyeonggi-do, Korea\n   EMail: soohong.park@samsung.com\n   Alain Baudot\n\
    \   France Telecom R&D Division\n   42, rue des coutures\n   14066 Caen - FRANCE\n\
    \   EMail: alain.baudot@francetelecom.com\n   Pekka Savola\n   CSC/FUNET\n   Espoo,\
    \ Finland\n   EMail: psavola@funet.fi\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2005).\n   This\
    \ document is subject to the rights, licenses and restrictions\n   contained in\
    \ BCP 78, and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET\n   ENGINEERING\
    \ TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,\n   INCLUDING BUT NOT\
    \ LIMITED TO ANY WARRANTY THAT THE USE OF THE\n   INFORMATION HEREIN WILL NOT\
    \ INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY OR FITNESS\
    \ FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at ietf-\n   ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
