- title: __initial_text__
  contents:
  - ''
- title: 1;2c.
  contents:
  - "1;2c.\n  Ethernet-Tree (E-Tree) Support in Virtual Private LAN Service (VPLS)\n"
- title: Abstract
  contents:
  - "Abstract\n   This document specifies a generic Virtual Private LAN Service (VPLS)\n\
    \   solution, which uses VLANs to indicate root or leaf traffic to\n   support\
    \ Ethernet-Tree (E-Tree) services.  A VPLS Provider Edge (PE)\n   model is illustrated\
    \ as an example for the solution.  In the\n   solution, E-Tree VPLS PEs are interconnected\
    \ by Pseudowires (PWs),\n   which carry the VLAN indicating the E-Tree attribute.\
    \  The MAC\n   address-based Ethernet forwarding engine and the PW work in the\
    \ same\n   way as specified in RFC 4762 and RFC 4448, respectively.  A signaling\n\
    \   mechanism is described to support E-Tree capability and VLAN mapping\n   negotiation.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7796.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2016 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .\
    \ . . . . .   3\n   2.  Conventions Used in This Document . . . . . . . . . .\
    \ . . . .   4\n   3.  Terminology . . . . . . . . . . . . . . . . . . . . . .\
    \ . . .   4\n   4.  PE Model with E-Tree Support  . . . . . . . . . . . . . .\
    \ . .   5\n     4.1.  Existing PE Models  . . . . . . . . . . . . . . . . . .\
    \ .   5\n     4.2.  A New PE Model with E-Tree Support  . . . . . . . . . . .\
    \   8\n   5.  PW for E-Tree Support . . . . . . . . . . . . . . . . . . . .  \
    \ 9\n     5.1.  PW Encapsulation  . . . . . . . . . . . . . . . . . . . .   9\n\
    \     5.2.  VLAN Mapping  . . . . . . . . . . . . . . . . . . . . . .  10\n  \
    \   5.3.  PW Processing . . . . . . . . . . . . . . . . . . . . . .  11\n    \
    \   5.3.1.  PW Processing in the VLAN Mapping Mode  . . . . . . .  11\n      \
    \ 5.3.2.  PW Processing in the Compatible Mode  . . . . . . . .  12\n       5.3.3.\
    \  PW Processing in the Optimized Mode . . . . . . . . .  13\n   6.  Signaling\
    \ for E-Tree Support  . . . . . . . . . . . . . . . .  14\n     6.1.  LDP Extensions\
    \ for E-Tree Support . . . . . . . . . . . .  14\n     6.2.  BGP Extensions for\
    \ E-Tree Support . . . . . . . . . . . .  17\n   7.  OAM Considerations  . . .\
    \ . . . . . . . . . . . . . . . . . .  19\n   8.  Applicability . . . . . . .\
    \ . . . . . . . . . . . . . . . . .  19\n   9.  IANA Considerations . . . . .\
    \ . . . . . . . . . . . . . . . .  19\n   10. Security Considerations . . . .\
    \ . . . . . . . . . . . . . . .  20\n   11. References  . . . . . . . . . . .\
    \ . . . . . . . . . . . . . .  20\n     11.1.  Normative References . . . . .\
    \ . . . . . . . . . . . . .  20\n     11.2.  Informative References . . . . .\
    \ . . . . . . . . . . . .  21\n   Appendix A.  Other PE Models for E-Tree . .\
    \ . . . . . . . . . . .  23\n     A.1.  A PE Model with a VSI and No Bridge .\
    \ . . . . . . . . . .  23\n     A.2.  A PE Model with External E-Tree Interface\
    \ . . . . . . . .  24\n   Acknowledgements  . . . . . . . . . . . . . . . . .\
    \ . . . . . . .  25\n   Contributors  . . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  25\n   Authors' Addresses  . . . . . . . . . . . . . . . . . .\
    \ . . . . .  26\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The Ethernet-Tree (E-Tree) service is defined in the Metro\
    \ Ethernet\n   Forum (MEF) Technical Specification MEF 6.2 [MEF6.2] as a Rooted-\n\
    \   Multipoint Ethernet Virtual Connection (EVC) service.  An MEF 6.2\n   E-Tree\
    \ solution must meet the following design requirements: the\n   Ethernet frames\
    \ from a root may be received by any other root or\n   leaf, and the frames from\
    \ a leaf may be received by any root, but\n   must not be received by a leaf.\
    \  Further, an E-Tree service may\n   include multiple roots and multiple leaves.\
    \  Although Virtual Private\n   Multicast Service (VPMS) [VPMS] and Point-to-Multipoint\
    \ (P2MP)\n   multicast are somewhat simplified versions of this service, in fact,\n\
    \   they are both multicast services and are different from an E-Tree\n   service\
    \ that may include both unicast and multicast traffic.\n   [RFC7152] gives the\
    \ requirements for providing E-Tree solutions in\n   the VPLS and the need to\
    \ filter leaf-to-leaf traffic.  [RFC7387]\n   further describes a Multiprotocol\
    \ Label Switching (MPLS) framework\n   for providing E-Tree.  Though there were\
    \ proposals for using the\n   Pseudowire (PW) control word or PWs to indicate\
    \ the root/leaf\n   attribute of an E-Tree frame, both methods are limited in\
    \ that they\n   are only applicable to \"VPLS only\" networks.\n   A VPLS PE usually\
    \ consists of a bridge module itself (see [RFC4664]\n   and [RFC6246]); and moreover,\
    \ E-Tree services may cross both Ethernet\n   and VPLS domains.  Therefore, it\
    \ is necessary to develop an E-Tree\n   solution both for \"VPLS only\" scenarios\
    \ and for interworking between\n   Ethernet and VPLS.\n   IEEE 802.1 has incorporated\
    \ the generic E-Tree solution into 802.1Q\n   [IEEE-802.1Q-2014], which is an\
    \ improvement on the traditional\n   asymmetric VLAN mechanism.  In the asymmetric\
    \ VLAN mechanism as\n   described in Section B.1.3 of IEEE 802.1Q [IEEE-802.1Q-2003],\
    \ a VLAN\n   ID is used to indicate the traffic from a server, and multiple VLAN\n\
    \   IDs are used to indicate the traffic from the clients (one VLAN ID\n   per\
    \ client).  In the new IEEE 802.1Q solution, only two VLANs are\n   used to indicate\
    \ root/leaf attributes of a frame: one VLAN ID is used\n   to indicate the frames\
    \ originated from the roots and another VLAN ID\n   is used to indicate the frames\
    \ originated from the leaves.  At a leaf\n   port, the bridge can then filter\
    \ out all the frames from other leaf\n   ports based on the VLAN ID.  It is better\
    \ to reuse the same mechanism\n   in VPLS than to develop a new mechanism.  A\
    \ new mechanism would\n   introduce more complexity to interwork with the new\
    \ IEEE 802.1Q\n   solution.\n   This document specifies how the Ethernet VLAN\
    \ solution can be used to\n   support generic E-Tree services in VPLS.  The solution\
    \ specified here\n   is fully compatible with the IEEE bridge architecture and\
    \ with IETF\n   Pseudowire Emulation Edge-to-Edge (PWE3) technology, thus it will\
    \ not\n   change the FIB (such as installing E-Tree attributes in the FIB) or\n\
    \   need any specially tailored implementation.  Furthermore, VPLS\n   scalability\
    \ and simplicity are also maintained.  With this mechanism,\n   it is also convenient\
    \ to deploy a converged E-Tree service across\n   both Ethernet and MPLS networks.\n\
    \   A typical VPLS PE model is introduced as an example; the model is\n   then\
    \ extended in which a Tree VSI is connected to a VLAN bridge with\n   a dual-VLAN\
    \ interface.\n   This document then discusses the PW encapsulation and PW processing\n\
    \   such as VLAN mapping options for transporting E-Tree services in\n   VPLS.\n\
    \   Finally, this document describes the signaling extensions and\n   processing\
    \ procedures for E-Tree support in VPLS.\n"
- title: 2.  Conventions Used in This Document
  contents:
  - "2.  Conventions Used in This Document\n   The key words \"MUST\", \"MUST NOT\"\
    , \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [RFC2119].\n"
- title: 3.  Terminology
  contents:
  - "3.  Terminology\n   AC:  Attachment Circuit\n   B-VLAN:  Backbone VLAN\n   C-VLAN:\
    \  Customer VLAN\n   E-Tree:  Ethernet Tree, a Rooted-Multipoint EVC service as\
    \ defined in\n      [MEF6.2]\n   EVC:  Ethernet Virtual Connection, as defined\
    \ in [MEF4]\n   FIB:  Forwarding Information Base, also known as \"forwarding\
    \ table\"\n   I-SID:  Backbone Service Instance Identifier, as defined in IEEE\n\
    \      802.1ah [IEEE-802.1Q-2014]\n   Leaf AC:  An AC attached with a leaf\n \
    \  Leaf VLAN:  A VLAN Identifier (ID) used to indicate all the frames\n      that\
    \ are originated at a leaf AC.  It may be a C-VLAN, an S-VLAN,\n      or a B-VLAN\n\
    \   OAM:  Operations, Administration, and Maintenance\n   PBB:  Provider Backbone\
    \ Bridge\n   PE:  Provider Edge\n   PW:  Pseudowire\n   Root AC:  An AC attached\
    \ with a root\n   Root VLAN:  A VLAN ID used to indicate all the frames that are\n\
    \      originated at a root AC.  It may be a C-VLAN, an S-VLAN, or a\n      B-VLAN\n\
    \   S-VLAN:  Service VLAN\n   T-VSI:  Tree VSI, a VSI with E-Tree support\n  \
    \ VLAN:  Virtual Local Area Network\n   VPLS:  Virtual Private LAN Service\n \
    \  VSI:  Virtual Switching Instance as defined in [RFC4664], also known\n    \
    \  as \"VPLS Forwarder\" in [RFC7041]\n"
- title: 4.  PE Model with E-Tree Support
  contents:
  - "4.  PE Model with E-Tree Support\n   The problem scenario of E-Tree as shown\
    \ in Figure 1 of [RFC7152] is a\n   simplification of the L2VPN architecture.\
    \  Several common VPLS PE\n   architectures are discussed in more detail in [RFC4664]\
    \ and\n   [RFC6246].\n   Below, an E-Tree solution in VPLS is demonstrated with\
    \ the help of a\n   typical VPLS PE model.  Its use in other PE models is discussed\
    \ in\n   Appendix A.\n"
- title: 4.1.  Existing PE Models
  contents:
  - "4.1.  Existing PE Models\n   According to [RFC4664], there are at least three\
    \ models possible for\n   a VPLS PE, including:\n   o  A single bridge module,\
    \ a single VSI;\n   o  A single bridge module, multiple VSIs;\n   o  Multiple\
    \ bridge modules, each attaches to a VSI.\n   The second PE model is commonly\
    \ used.  A typical example is further\n   depicted in Figure 1 and Figure 2 (both\
    \ figures are extracted from\n   [RFC6246]), where an S-VLAN bridge module is\
    \ connected to multiple\n   VSIs each with a single VLAN virtual interface.\n\
    \                      +-------------------------------+\n                   \
    \   |  802.1ad Bridge Module Model  |\n                      |               \
    \                |\n           +---+  AC  |  +------+      +-----------+  |\n\
    \           |CE |---------|C-VLAN|------|           |  |\n           +---+   \
    \   |  |bridge|------|           |  |\n                      |  +------+     \
    \ |           |  |\n                      |     o          |   S-VLAN  |  |\n\
    \                      |     o          |           |  | ---> to VSI\n       \
    \               |     o          |   Bridge  |  |\n           +---+  AC  |  +------+\
    \      |           |  |\n           |CE |---------|C-VLAN|------|           |\
    \  |\n           +---+      |  |bridge|------|           |  |\n              \
    \        |  +------+      +-----------+  |\n                      +-------------------------------+\n\
    \                Figure 1: A Model of 802.1ad Bridge Module\n           +----------------------------------------+\n\
    \           |           VPLS-Capable PE Model        |\n           |   +---------------+\
    \          +------+  |\n           |   |               |          |VSI-1 |------------\n\
    \           |   |               |==========|      |------------ PWs\n        \
    \   |   |     Bridge    ------------      |------------\n           |   |    \
    \           | S-VLAN-1 +------+  |\n           |   |     Module    |         \
    \    o      |\n           |   |               |             o      |\n       \
    \    |   |   (802.1ad    |             o      |\n           |   |    bridge) \
    \   |             o      |\n           |   |               |             o   \
    \   |\n           |   |               | S-VLAN-n +------+  |\n           |   |\
    \               ------------VSI-n |-------------\n           |   |           \
    \    |==========|      |------------- PWs\n           |   |               |  \
    \   ^    |      |-------------\n           |   +---------------+     |    +------+\
    \  |\n           |                         |              |\n           +-------------------------|--------------+\n\
    \                            LAN Emulation Interface\n                     Figure\
    \ 2: A VPLS-Capable PE Model\n   In this PE model, Ethernet frames from Customer\
    \ Edges (CEs) will\n   cross multiple stages of bridge modules (i.e., C-VLAN and\
    \ S-VLAN\n   bridge), and a VSI in a PE before being sent on the PW to a remote\n\
    \   PE.  Therefore, the association between an AC port and a PW on a VSI\n   is\
    \ difficult.\n   This model could be further enhanced: when Ethernet frames arrive\
    \ at\n   an ingress PE, a root VLAN or a leaf VLAN tag is added.  At an egress\n\
    \   PE, the frames with the root VLAN tag are transmitted both to the\n   roots\
    \ and the leaves, while the frames with the leaf VLAN tag are\n   transmitted\
    \ to the roots but dropped for the leaves (these VLAN tags\n   are removed before\
    \ the frames are transmitted over the ACs).  It was\n   demonstrated in [IEEE-802.1Q-2014]\
    \ that the E-Tree service in\n   Ethernet networks can be well supported with\
    \ this mechanism.\n   Assuming this mechanism is implemented in the bridge module,\
    \ it is\n   quite straightforward to infer a VPLS PE model with two VSIs to\n\
    \   support the E-Tree (as shown in Figure 3).  But this model will\n   require\
    \ two VSIs per PE and two sets of PWs per E-Tree service, which\n   is poorly\
    \ scalable in a large MPLS/VPLS network; in addition, both of\n   these VSIs have\
    \ to share their learned MAC addresses.\n           +----------------------------------------+\n\
    \           |           VPLS-Capable PE Model        |\n           |   +---------------+\
    \          +------+  |\n           |   |               |          |VSI-1 |------------\n\
    \           |   |               |==========|      |------------ PWs\n        \
    \   |   |     Bridge    ------------      |------------\n           |   |    \
    \           | Root     +------+  |\n           |   |     Module    | S-VLAN  \
    \           |\n           |   |               |                    |\n       \
    \    |   |   (802.1ad    |                    |\n           |   |    bridge) \
    \   |                    |\n           |   |               | Leaf            \
    \   |\n           |   |               | S-VLAN   +------+  |\n           |   |\
    \               ------------VSI-2 |-------------\n           |   |           \
    \    |==========|      |------------- PWs\n           |   |               |  \
    \   ^    |      |-------------\n           |   +---------------+     |    +------+\
    \  |\n           |                         |              |\n           +-------------------------|--------------+\n\
    \                            LAN Emulation Interface\n              Figure 3:\
    \ A VPLS PE Model for E-Tree with 2VSIs\n"
- title: 4.2.  A New PE Model with E-Tree Support
  contents:
  - "4.2.  A New PE Model with E-Tree Support\n   In order to support the E-Tree in\
    \ a more scalable way, a new VPLS PE\n   model with a single Tree VSI (T-VSI,\
    \ a VSI with E-Tree support) is\n   specified.  As depicted in Figure 4, the bridge\
    \ module is connected\n   to the T-VSI with a dual-VLAN virtual interface, i.e.,\
    \ both the root\n   VLAN and the leaf VLAN are connected to the same T-VSI, and\
    \ they\n   share the same FIB and work in shared VLAN learning.  In this way,\n\
    \   only one VPLS instance and one set of PWs is needed per E-Tree\n   service,\
    \ and the scalability of VPLS is improved.\n            +----------------------------------------+\n\
    \            |           VPLS-Capable PE Model        |\n            |   +---------------+\
    \          +------+  |\n            |   |               |==========|TVSI-1|------------\n\
    \   +---+ AC |   |               ------------      |------------ PWs\n   |CE |--------|\
    \     Bridge    ------------      |------------\n   +---+    |   |           \
    \    | Root &   +------+  |\n            |   |     Module    | Leaf VLAN   o \
    \     |\n            |   |               |             o      |\n            |\
    \   |               |             o      |\n            |   |               |\
    \             o      |\n            |   |               |             o      |\n\
    \   +---+ AC |   |               |   VLAN-n +------+  |\n   |CE |--------|   \
    \            ------------VSI-n |-------------\n   +---+    |   |             \
    \  |==========|      |------------- PWs\n            |   |               |   \
    \  ^    |      |-------------\n            |   +---------------+     |    +------+\
    \  |\n            |                         |              |\n            +-------------------------|--------------+\n\
    \                            LAN Emulation Interface\n         Figure 4: A VPLS\
    \ PE Model for E-Tree with a Single T-VSI\n   For an untagged AC port (frames\
    \ over this port are untagged) or a\n   VLAN unaware port (VLAN tags in the frames\
    \ are ignored), where the\n   bridge module is a C-VLAN bridge, the Ethernet frames\
    \ received from\n   the root ACs MUST be tagged with a root C-VLAN.  When the\
    \ bridge\n   module is an 802.1ad bridge [IEEE-802.1Q-2014], the Ethernet frames\n\
    \   received from the root ACs MUST be tagged with a root S-VLAN.  Note,\n   this\
    \ can be done by adding a root C-VLAN first in a C-VLAN bridge,\n   but this is\
    \ out of the scope of this document.\n   For a C-VLAN tagged port, the Ethernet\
    \ frames received from the root\n   ACs MUST be tagged with a root S-VLAN.\n \
    \  For an S-VLAN tagged port, the S-VLAN tag in the Ethernet frames\n   received\
    \ from the root ACs SHOULD be translated to the root S-VLAN in\n   the VPLS network\
    \ domain.\n   Alternatively, for an S-VLAN tagged port, the PBB VPLS PE model\n\
    \   (where an IEEE 802.1ah bridge module is embedded in the PE) as\n   described\
    \ in [RFC7041] MAY be used.  A root B-VLAN or a leaf B-VLAN\n   MAY be added.\
    \  The E-Tree attribute may also be indicated with two\n   I-SID tags in the bridge\
    \ module, and the frames are then encapsulated\n   and transported transparently\
    \ over a single B-VLAN.  Thus, the PBB\n   VPLS works in the same way as described\
    \ in [RFC7041] and will not be\n   discussed further in this document.  When many\
    \ S-VLANs are\n   multiplexed in a single AC, PBB VPLS has the advantages of both\
    \ VLAN\n   scalability and MAC address scalability.\n   In a similar way, the\
    \ traffic from the leaf ACs is tagged and\n   transported on the leaf C-VLAN,\
    \ S-VLAN, or B-VLAN.\n   In all cases, the outermost VLAN in the resulting Ethernet\
    \ header is\n   used to indicate the E-Tree attribute of an Ethernet frame; this\n\
    \   document uses VLAN to refer to this outermost VLAN for simplicity in\n   the\
    \ latter sections.\n"
- title: 5.  PW for E-Tree Support
  contents:
  - '5.  PW for E-Tree Support

    '
- title: 5.1.  PW Encapsulation
  contents:
  - "5.1.  PW Encapsulation\n   To support an E-Tree service, T-VSIs in a VPLS MUST\
    \ be interconnected\n   with a bidirectional Ethernet PW.  The Ethernet PW SHOULD\
    \ work in the\n   tagged mode (PW type 0x0004) as described in [RFC4448], in which\
    \ case\n   a VLAN tag MUST be carried in each frame in the PW to indicate the\n\
    \   frame originated from either root or leaf (the VLAN tag indicating\n   the\
    \ frame originated from either root or leaf can be translated by a\n   bridge\
    \ module in the PE or added by an outside Ethernet edge device,\n   even by a\
    \ customer device).  In the tagged PW mode, two service-\n   delimiting VLANs\
    \ MUST be allocated in the VPLS domain for an E-Tree.\n   PW processing for the\
    \ tagged PW will be described in Section 5.3 of\n   this document.\n   A raw mode\
    \ PW (PW type 0x0005 in [RFC4448]) MAY also be used to carry\n   an E-Tree service\
    \ for a PW in Compatible mode as shown in\n   Section 5.3.2.  As defined in [RFC4448],\
    \ for a raw mode PW, an\n   Ethernet frame's 802.1Q VLAN tag is not meaningful\
    \ to the PEs and it\n   passes transparently through them.\n"
- title: 5.2.  VLAN Mapping
  contents:
  - "5.2.  VLAN Mapping\n   There are two ways of manipulating VLANs for an E-Tree\
    \ in VPLS:\n   o  Global VLAN based, that is, provisioning two global VLANs (Root\n\
    \      VLAN and Leaf VLAN) across the VPLS network, thus no VLAN mapping\n   \
    \   is needed at all, or the VLAN mapping is done completely in the\n      Ethernet\
    \ domains.\n   o  Local VLAN based, that is, provisioning two local VLANs for\
    \ each\n      PE (that participates in the E-Tree) in the VPLS network\n     \
    \ independently.\n   The first method requires no VLAN mapping in the PW, but\
    \ two unique\n   service-delimiting VLANs must be allocated across the VPLS domain.\n\
    \   The second method is more scalable in the use of VLANs, but needs a\n   VLAN\
    \ mapping mechanism in the PW similar to what is already described\n   in Section\
    \ 4.3 of [RFC4448].\n   Global or local VLANs can be manually configured or provisioned\
    \ by an\n   Operational Support System.  Alternatively, some automatic VLAN\n\
    \   allocation algorithm may be provided in the management plane, but it\n   is\
    \ out of scope of this document.\n   For both methods, VLAN mapping parameters\
    \ from a remote PE can be\n   provisioned or determined by a signaling protocol\
    \ as described in\n   Section 6 when a PW is being established.\n"
- title: 5.3.  PW Processing
  contents:
  - '5.3.  PW Processing

    '
- title: 5.3.1.  PW Processing in the VLAN Mapping Mode
  contents:
  - "5.3.1.  PW Processing in the VLAN Mapping Mode\n   In the VLAN mapping mode,\
    \ two VPLS PEs with E-Tree capability are\n   inter-connected with a PW (for example,\
    \ the scenario of Figure 5\n   depicts the interconnection of two PEs attached\
    \ with both root and\n   leaf nodes).\n                  +----------------------------+\n\
    \                  |  VPLS PE with T-VSI        |\n                  |       \
    \                     |\n        +----+    | +------+ Root VLAN +-----+ |    PW\n\
    \        |Root|------| VLAN |-----------|T-VSI|----------\n        +----+    |\
    \ | BRG  | Leaf VLAN |     |----------\n        +----+    | |      |-----------|\
    \     |----------\n        |Leaf|------|      |           |     |-----+\n    \
    \    +----+    | +------+           +-----+ |   |\n                  |       \
    \                     |   |\n                  +----------------------------+\
    \   |\n                                                   |\n                \
    \  +----------------------------+   |\n                  |  VPLS PE with T-VSI\
    \        |   |\n                  |                            |   |\n       \
    \ +----+    | +------+ Root VLAN +-----+ |   | PW\n        |Root|------| VLAN\
    \ |-----------|T-VSI|-----+\n        +----+    | | BRG  | Leaf VLAN |     |----------\n\
    \        +----+    | |      |-----------|     |----------\n        |Leaf|------|\
    \      |           |     |----------\n        +----+    | +------+           +-----+\
    \ |\n                  |                            |  BRG: Bridge Module\n  \
    \                +----------------------------+\n             Figure 5: T-VSI\
    \ Interconnected in the Normal Mode\n   If a PE is in the VLAN mapping mode for\
    \ a PW, then in the data plane,\n   the PE MUST map the VLAN in each frame as\
    \ follows:\n   o  Upon transmitting frames on the PW, map from the local VLAN\
    \ to the\n      remote VLAN (i.e., the local leaf VLAN in a frame is translated\
    \ to\n      the remote leaf VLAN; the local root VLAN in a frame is translated\n\
    \      to the remote root VLAN).\n   o  Upon receiving frames on the PW, map from\
    \ the remote VLAN to the\n      local VLAN, and the frames are further forwarded\
    \ or dropped in the\n      egress bridge module using the filtering mechanism\
    \ as described in\n      [IEEE-802.1Q-2014].\n   The signaling for VLANs used\
    \ by E-Tree is specified in Section 6.\n"
- title: 5.3.2.  PW Processing in the Compatible Mode
  contents:
  - "5.3.2.  PW Processing in the Compatible Mode\n   The new VPLS PE model can work\
    \ in a traditional VPLS network\n   seamlessly in the compatibility mode.  As\
    \ shown in Figure 6, the VPLS\n   PE with T-VSI can be attached with root and/or\
    \ leaf nodes, while the\n   VPLS PE with a traditional VSI can only be attached\
    \ with root nodes.\n   A raw PW SHOULD be used to connect them.\n            \
    \      +------------------------+\n                  |  VPLS PE with T-VSI   \
    \ |\n                  |                        |\n        +----+    | +------+\
    \       +-----+ |  PW\n        |Root|------| VLAN |-------|T-VSI|----------\n\
    \        +----+    | | BRG  |       |     |----------\n        +----+    | | \
    \     |-------|     |----------\n        |Leaf|------|      |       |     |---------+\n\
    \        +----+    | +------+       +-----+ |       |\n                  |   \
    \                     |       |\n                  +------------------------+\
    \       |\n                                                   |\n            \
    \      +------------------------+       |\n                  |  VPLS PE with VSI\
    \      |       |\n                  |                        |       |\n     \
    \   +----+    | +------+       +-----+ |  PW   |\n        |Root|------| VLAN |-------|VSI\
    \  |---------+\n        +----+    | | BRG  |       |     |----------\n       \
    \ +----+    | |      |       |     |----------\n        |Root|------|      | \
    \      |     |----------\n        +----+    | +------+       +-----+ |\n     \
    \             |                        |\n                  +------------------------+\n\
    \            Figure 6: T-VSI Interconnected with Traditional VSI\n   If a PE is\
    \ in the Compatible mode for a PW, then in the data plane,\n   the PE MUST process\
    \ the frame as follows:\n   o  Upon transmitting frames on the PW, remove the\
    \ root or leaf VLAN\n      in the frames.\n   o  Upon receiving frames on the\
    \ PW, add a VLAN tag with a value of\n      the local root VLAN to the frames.\n"
- title: 5.3.3.  PW Processing in the Optimized Mode
  contents:
  - "5.3.3.  PW Processing in the Optimized Mode\n   When two PEs (both with E-Tree\
    \ capability) are inter-connected with a\n   PW and one of them (e.g., PE2) is\
    \ attached with only leaf nodes, as\n   shown in the scenario of Figure 7, its\
    \ peer PE (e.g., PE1) should\n   then work in the Optimized mode for this PW.\
    \  In this case, PE1\n   should not send the frames originated from the local\
    \ leaf VLAN to\n   PE2, i.e., these frames are dropped rather than transported\
    \ over the\n   PW.  The bandwidth efficiency of the VPLS can thus be improved.\
    \  The\n   signaling for the PE attached with only leaf nodes is specified in\n\
    \   Section 6.\n                  +------------------------+\n               \
    \   |VPLS PE with T-VSI (PE1)|\n                  |                        |\n\
    \        +----+    | +------+       +-----+ |  PW\n        |Root|------| VLAN\
    \ |-------|T-VSI|----------\n        +----+    | | BRG  |       |     |----------\n\
    \        +----+    | |      |-------|     |----------\n        |Leaf|------| \
    \     |       |     |---------+\n        +----+    | +------+       +-----+ |\
    \       |\n                  |                        |       |\n            \
    \      +------------------------+       |\n                                  \
    \                 |\n                  +------------------------+       |\n  \
    \                |VPLS PE with T-VSI (PE2)|       |\n                  |     \
    \                   |       |\n        +----+    | +------+       +-----+ |  PW\
    \   |\n        |Leaf|------| VLAN |-------|T-VSI|---------+\n        +----+  \
    \  | | BRG  |       |     |----------\n        +----+    | |      |-------|  \
    \   |----------\n        |Leaf|------|      |       |     |----------\n      \
    \  +----+    | +------+       +-----+ |\n                  |                 \
    \       |\n                  +------------------------+\n   Figure 7: T-VSI Interconnected\
    \ with PE Attached with Only Leaf Nodes\n   If a PE is in the Optimized Mode for\
    \ a PW, upon transmit, the PE\n   SHOULD drop a frame if its VLAN ID matches the\
    \ local leaf VLAN ID.\n"
- title: 6.  Signaling for E-Tree Support
  contents:
  - '6.  Signaling for E-Tree Support

    '
- title: 6.1.  LDP Extensions for E-Tree Support
  contents:
  - "6.1.  LDP Extensions for E-Tree Support\n   In addition to the signaling procedures\
    \ as specified in Section 5.3.3\n   of [RFC4447], this document specifies a new\
    \ interface parameter sub-\n   TLV to provision an E-Tree service and negotiate\
    \ the VLAN mapping\n   function, as follows:\n     0                   1     \
    \              2                   3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7\
    \ 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \    |  E-Tree(0x1A) |   Length=8    |           Reserved        |P|V|\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \    |  MBZ  |   Root VLAN ID        |  MBZ  |   Leaf VLAN ID        |\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                         Figure 8: E-Tree Sub-TLV\n   Where:\n   o  E-Tree is\
    \ the sub-TLV identifier (0x1A) as assigned by IANA.\n   o  Length is the length\
    \ of the sub-TLV in octets.\n   o  Reserved, bits MUST be set to zero on transmit\
    \ and be ignored on\n      receive.\n   o  P is a leaf-only bit, it is set to\
    \ 1 to indicate that the PE is\n      attached with only leaf nodes, and set to\
    \ 0 otherwise.\n   o  V is a bit indicating the sender's VLAN mapping capability.\
    \  A PE\n      capable of VLAN mapping MUST set this bit, and clear it otherwise.\n\
    \   o  Must Be Zero (MBZ), 4 bits MUST be set to zero on transmit and be\n   \
    \   ignored on receive.\n   o  Root VLAN ID is the value of the local root VLAN.\n\
    \   o  Leaf VLAN ID is the value of the local leaf VLAN.\n   When setting up a\
    \ PW for the E-Tree based VPLS, two peer PEs\n   negotiate the E-Tree support\
    \ using the above E-Tree sub-TLV.  Note\n   that the PW type of 0x0004 SHOULD\
    \ be used during the PW negotiation.\n   A PE that wishes to support an E-Tree\
    \ service MUST include an E-Tree\n   sub-TLV in its PW Label Mapping message and\
    \ include its local root\n   VLAN ID and leaf VLAN ID in the TLV.  A PE that has\
    \ the VLAN mapping\n   capability MUST set the V bit to 1, and a PE attached with\
    \ only leaf\n   nodes SHOULD set the P bit to 1.\n   A PE that receives a PW Label\
    \ Mapping message with an E-Tree sub-TLV\n   from its peer PE, after saving the\
    \ VLAN information for the PW, MUST\n   process it as follows:\n      1) For this\
    \ PW, set VLAN-Mapping-Mode, Compatible-Mode, and\n         Optimized-Mode to\
    \ FALSE.\n      2) If either the root VLAN ID in the message is not equal to the\n\
    \         local root VLAN ID, or the leaf VLAN ID in the message is not\n    \
    \     equal to the local leaf VLAN ID {\n             If the bit V is cleared\
    \ {\n                   If the PE is capable of VLAN mapping, it MUST set\n  \
    \                 VLAN-Mapping-Mode to TRUE;\n                   Else {\n    \
    \                    A Label Release message with the error code \"E-\n      \
    \                  Tree VLAN mapping not supported\" is sent to the\n        \
    \                peer PE and exit the process;\n                        }\n  \
    \           }\n             If the bit V is set, and the PE is capable of VLAN\
    \ mapping,\n             the PE with the minimum IP address MUST set\n       \
    \      VLAN-Mapping-Mode to TRUE;\n         }\n      3) If the P bit is set\n\
    \         {\n             If the PE is a leaf-only node itself, a Label Release\n\
    \             message with a status code \"Leaf-to-Leaf PW released\" is\n   \
    \          sent to the peer PE and exits the process;\n             Else the PE\
    \ SHOULD set the Optimized-Mode to TRUE.\n         }\n   A PE SHOULD send a Label\
    \ Mapping message with an E-Tree sub-TLV as\n   per Section 5.3.3 of [RFC4447].\
    \  A PE MUST send a Label Mapping\n   message with an updated E-Tree sub-TLV to\
    \ all other PEs over\n   corresponding LDP sessions when its role changes from\
    \ leaf-only to\n   not leaf-only (i.e., when a root node is added to a PE attached\
    \ with\n   only leaf nodes).\n   If a PE has sent a Label Mapping message with\
    \ an E-Tree sub-TLV but\n   does not receive any E-Tree sub-TLV in its peer's\
    \ PW Label Mapping\n   message, the PE SHOULD then establish a raw PW with this\
    \ peer as in\n   traditional VPLS and set Compatible-Mode to TRUE for this PW.\n\
    \   Data plane processing for this PW is as follows:\n   o  If Optimized-Mode\
    \ is TRUE, then data plane processing as described\n      in Section 5.3.3 applies.\n\
    \   o  If VLAN-Mapping-Mode is TRUE, then data plane processing as\n      described\
    \ in Section 5.3.1 applies.\n   o  If Compatible-Mode is TRUE, then data plane\
    \ processing as\n      described in Section 5.3.2 applies.\n   o  PW processing\
    \ as described in [RFC4448] proceeds as usual for all\n      cases.\n   When VPLS\
    \ is set up using the Pseudowire ID (PWid) Forwarding\n   Equivalence Class (FEC)\
    \ Element (see Appendix A of [RFC4762]), its\n   E-Tree signaling is similar to\
    \ the above process.  Dynamic\n   re-configuration of E-Tree should be avoided\
    \ for this case.  However,\n   when re-configuration of E-Tree is forced on a\
    \ PE for some reason\n   (e.g., a configuration error), the PE may close the LDP\
    \ sessions with\n   its peer PEs for this VPLS instance and re-install its PW\
    \ labels, so\n   that its peer PEs can send out the LDP Label Mapping messages\
    \ again.\n"
- title: 6.2.  BGP Extensions for E-Tree Support
  contents:
  - "6.2.  BGP Extensions for E-Tree Support\n   A new E-Tree extended community (0x800b)\
    \ has been allocated by IANA\n   for E-Tree signaling in BGP VPLS:\n         \
    \         +------------------------------------+\n                  | Extended\
    \ community type (2 octets) |\n                  +------------------------------------+\n\
    \                  |  MBZ  |   Root VLAN (12 bits)      |\n                  +------------------------------------+\n\
    \                  |  MBZ  |   Leaf VLAN (12 bits)      |\n                  +------------------------------------+\n\
    \                  |  Reserved                      |P|V|\n                  +------------------------------------+\n\
    \                    Figure 9: E-Tree Extended Community\n   Where:\n   o  Must\
    \ Be Zero (MBZ), 4 bits MUST be set to zero on transmit and be\n      ignored\
    \ on receive.\n   o  Root VLAN ID is the value of the local root VLAN.\n   o \
    \ Leaf VLAN ID is the value of the local leaf VLAN.\n   o  Reserved, 14 bits MUST\
    \ be set to zero on transmit and be ignored\n      on receive.\n   o  P is a leaf-only\
    \ bit, it is set to 1 to indicate that the PE is\n      attached with only leaf\
    \ nodes, and set to 0 otherwise.\n   o  V is a bit indicating the sender's VLAN\
    \ mapping capability.  A PE\n      capable of VLAN mapping MUST set this bit,\
    \ and clear it otherwise.\n   The PEs attached with both leaf and root nodes MUST\
    \ support BGP\n   E-Tree signaling as described in this document, and SHOULD support\n\
    \   VLAN mapping in their data planes.  The traditional PE attached with\n   only\
    \ root nodes may also participate in an E-Tree service.  If some\n   PEs don't\
    \ support VLAN mapping, global VLANs as per Section 5.2 MUST\n   be provisioned\
    \ for an E-Tree service.\n   In BGP VPLS signaling, besides attaching a Layer2\
    \ Info Extended\n   Community as detailed in [RFC4761], an E-Tree Extended Community\
    \ MUST\n   be further attached if a PE wishes to participate in an E-Tree\n  \
    \ service.  The PE MUST include its local root VLAN ID and leaf VLAN ID\n   in\
    \ the E-Tree Extended Community.  A PE attached with only leaf nodes\n   of an\
    \ E-Tree SHOULD set the P bit in the E-Tree Extended Community to\n   1.\n   A\
    \ PE that receives a BGP UPDATE message with an E-Tree Extended\n   Community\
    \ from its peer PE, after saving the VLAN information for the\n   PW, MUST process\
    \ it as follows (after processing procedures as\n   specified in Section 3.2 of\
    \ [RFC4761]):\n   1) For this PW, set VLAN-Mapping-Mode, Compatible-Mode, and\n\
    \      Optimized-Mode to FALSE.\n   2) If either the root VLAN ID in the E-Tree\
    \ Extended Community is\n      not equal to the local root VLAN ID, or the leaf\
    \ VLAN ID in the\n      E-Tree Extended Community is not equal to the local leaf\
    \ VLAN ID {\n          If the bit V is cleared {\n                If the PE is\
    \ capable of VLAN mapping, it MUST set VLAN-\n                Mapping-Mode to\
    \ TRUE;\n                Else {\n                     Log with a message \"E-Tree\
    \ VLAN mapping not\n                     supported\" and exit the process;\n \
    \                    }\n          }\n          If the bit V is set, and the PE\
    \ is capable of VLAN mapping,\n          the PE with the minimum IP address MUST\
    \ set VLAN-Mapping-Mode\n          to TRUE;\n      }\n   3) If the P bit is set\
    \ {\n          If the PE is a leaf-only PE itself, forbids any traffic on the\n\
    \          PW;\n          Else the PE SHOULD set the Optimized-Mode to TRUE.\n\
    \      }\n   A PE that does not recognize this attribute SHALL ignore it silently.\n\
    \   If a PE has sent an E-Tree Extended Community but does not receive\n   any\
    \ E-Tree Extended Community from its peer, the PE SHOULD then\n   establish a\
    \ raw PW with this peer as in traditional VPLS and set\n   Compatible-Mode to\
    \ TRUE for this PW.\n   The data plane in the VPLS is the same as described in\
    \ Section 4.2 of\n   [RFC4761], and data plane processing for a PW is the same\
    \ as\n   described at the end of Section 6.1 in this document.\n"
- title: 7.  OAM Considerations
  contents:
  - "7.  OAM Considerations\n   The VPLS OAM requirements and framework as specified\
    \ in [RFC6136] are\n   applicable to E-Tree, as both Ethernet OAM frames and data\
    \ traffic\n   are transported over the same PW.\n   Ethernet OAM for E-Tree including\
    \ both service OAM and segment OAM\n   frames SHALL undergo the same VLAN mapping\
    \ as the data traffic; and\n   root VLAN SHOULD be applied to segment OAM frames\
    \ so that they are\n   not filtered.\n"
- title: 8.  Applicability
  contents:
  - "8.  Applicability\n   The solution specified in this document is applicable to\
    \ both LDP\n   VPLS [RFC4762] and BGP VPLS [RFC4761].\n   This solution is applicable\
    \ to both \"VPLS Only\" networks and VPLS\n   with Ethernet aggregation networks.\n\
    \   This solution is also applicable to PBB VPLS networks.\n"
- title: 9.  IANA Considerations
  contents:
  - "9.  IANA Considerations\n   IANA allocated the following value for E-Tree in\
    \ the \"Pseudowire\n   Interface Parameters Sub-TLV type Registry\".\n   Parameter\
    \ ID   Length       Description\n   =======================================\n\
    \   0x1A            8            E-Tree\n   IANA allocated the two following new\
    \ LDP status codes in the \"Status\n   Code Name Space\" registry.\n   Range/Value\
    \     E     Description\n   ------------- -----   ----------------------\n   0x20000003\
    \      1     E-Tree VLAN mapping not supported\n   0x20000004      0     Leaf-to-Leaf\
    \ PW released\n   IANA allocated the following value for E-tree in the \"Generic\n\
    \   Transitive Experimental Use Extended Community Sub-Types\" registry\n   within\
    \ the BGP Extended Community registry.\n   Type Value   Sub-Type Value   Name\n\
    \   ==========   ==============   ============\n   0x80         0x0b         \
    \    E-Tree Info\n"
- title: 10.  Security Considerations
  contents:
  - "10.  Security Considerations\n   This solution requires implementations to prevent\
    \ leaf-to-leaf\n   communication in the data plane of VPLS when its PEs are\n\
    \   interconnected with PWs.  If all PEs enforce that, then network\n   attacks\
    \ from one leaf to another leaf are avoided, and security can\n   be enhanced\
    \ for customers with this solution.  However, if a PE is\n   compromised or inappropriately\
    \ configured, a leaf node may be taken\n   as a root node and may receive traffic\
    \ from other leaf nodes\n   inappropriately.  Authenticity and integrity measures\
    \ for LDP need to\n   be considered as in RFC 5036 [RFC5036].  Security considerations\
    \ as\n   described in [RFC4448], [RFC4761], and [RFC4762] also apply.\n"
- title: 11.  References
  contents:
  - '11.  References

    '
- title: 11.1.  Normative References
  contents:
  - "11.1.  Normative References\n   [IEEE-802.1Q-2014]\n              IEEE, \"Bridges\
    \ and Bridged Networks\", IEEE 802.1Q,\n              DOI 10.1109/ieeestd.2014.6991462,\
    \ November 2014.\n   [MEF6.2]   Metro Ethernet Forum 6.2, \"EVC Ethernet Services\n\
    \              Definitions Phase 3\", August 2014.\n   [RFC2119]  Bradner, S.,\
    \ \"Key words for use in RFCs to Indicate\n              Requirement Levels\"\
    , BCP 14, RFC 2119,\n              DOI 10.17487/RFC2119, March 1997,\n       \
    \       <http://www.rfc-editor.org/info/rfc2119>.\n   [RFC4447]  Martini, L.,\
    \ Ed., Rosen, E., El-Aawar, N., Smith, T., and\n              G. Heron, \"Pseudowire\
    \ Setup and Maintenance Using the\n              Label Distribution Protocol (LDP)\"\
    , RFC 4447,\n              DOI 10.17487/RFC4447, April 2006,\n              <http://www.rfc-editor.org/info/rfc4447>.\n\
    \   [RFC4448]  Martini, L., Ed., Rosen, E., El-Aawar, N., and G. Heron,\n    \
    \          \"Encapsulation Methods for Transport of Ethernet over MPLS\n     \
    \         Networks\", RFC 4448, DOI 10.17487/RFC4448, April 2006,\n          \
    \    <http://www.rfc-editor.org/info/rfc4448>.\n   [RFC4761]  Kompella, K., Ed.\
    \ and Y. Rekhter, Ed., \"Virtual Private\n              LAN Service (VPLS) Using\
    \ BGP for Auto-Discovery and\n              Signaling\", RFC 4761, DOI 10.17487/RFC4761,\
    \ January 2007,\n              <http://www.rfc-editor.org/info/rfc4761>.\n   [RFC4762]\
    \  Lasserre, M., Ed. and V. Kompella, Ed., \"Virtual Private\n              LAN\
    \ Service (VPLS) Using Label Distribution Protocol (LDP)\n              Signaling\"\
    , RFC 4762, DOI 10.17487/RFC4762, January 2007,\n              <http://www.rfc-editor.org/info/rfc4762>.\n\
    \   [RFC5036]  Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,\n     \
    \         \"LDP Specification\", RFC 5036, DOI 10.17487/RFC5036,\n           \
    \   October 2007, <http://www.rfc-editor.org/info/rfc5036>.\n"
- title: 11.2.  Informative References
  contents:
  - "11.2.  Informative References\n   [IEEE-802.1Q-2003]\n              IEEE, \"\
    Virtual Bridged Local Area Networks\", IEEE 802.1,\n              DOI 10.1109/IEEESTD.2003.94280,\
    \ May 2003.\n   [MEF4]     Metro Ethernet Forum 4, \"Metro Ethernet Network\n\
    \              Architecture Framework - Part 1: Generic Framework\", May\n   \
    \           2004.\n   [RFC3985]  Bryant, S., Ed. and P. Pate, Ed., \"Pseudo Wire\
    \ Emulation\n              Edge-to-Edge (PWE3) Architecture\", RFC 3985,\n   \
    \           DOI 10.17487/RFC3985, March 2005,\n              <http://www.rfc-editor.org/info/rfc3985>.\n\
    \   [RFC4664]  Andersson, L., Ed. and E. Rosen, Ed., \"Framework for Layer\n \
    \             2 Virtual Private Networks (L2VPNs)\", RFC 4664,\n             \
    \ DOI 10.17487/RFC4664, September 2006,\n              <http://www.rfc-editor.org/info/rfc4664>.\n\
    \   [RFC6136]  Sajassi, A., Ed. and D. Mohan, Ed., \"Layer 2 Virtual\n       \
    \       Private Network (L2VPN) Operations, Administration, and\n            \
    \  Maintenance (OAM) Requirements and Framework\", RFC 6136,\n              DOI\
    \ 10.17487/RFC6136, March 2011,\n              <http://www.rfc-editor.org/info/rfc6136>.\n\
    \   [RFC6246]  Sajassi, A., Ed., Brockners, F., Mohan, D., Ed., and Y.\n     \
    \         Serbest, \"Virtual Private LAN Service (VPLS)\n              Interoperability\
    \ with Customer Edge (CE) Bridges\",\n              RFC 6246, DOI 10.17487/RFC6246,\
    \ June 2011,\n              <http://www.rfc-editor.org/info/rfc6246>.\n   [RFC7041]\
    \  Balus, F., Ed., Sajassi, A., Ed., and N. Bitar, Ed.,\n              \"Extensions\
    \ to the Virtual Private LAN Service (VPLS)\n              Provider Edge (PE)\
    \ Model for Provider Backbone Bridging\",\n              RFC 7041, DOI 10.17487/RFC7041,\
    \ November 2013,\n              <http://www.rfc-editor.org/info/rfc7041>.\n  \
    \ [RFC7152]  Key, R., Ed., DeLord, S., Jounay, F., Huang, L., Liu, Z.,\n     \
    \         and M. Paul, \"Requirements for Metro Ethernet Forum (MEF)\n       \
    \       Ethernet-Tree (E-Tree) Support in Layer 2 Virtual Private\n          \
    \    Network (L2VPN)\", RFC 7152, DOI 10.17487/RFC7152, March\n              2014,\
    \ <http://www.rfc-editor.org/info/rfc7152>.\n   [RFC7387]  Key, R., Ed., Yong,\
    \ L., Ed., Delord, S., Jounay, F., and\n              L. Jin, \"A Framework for\
    \ Ethernet Tree (E-Tree) Service\n              over a Multiprotocol Label Switching\
    \ (MPLS) Network\",\n              RFC 7387, DOI 10.17487/RFC7387, October 2014,\n\
    \              <http://www.rfc-editor.org/info/rfc7387>.\n   [VPMS]     Kamite,\
    \ Y., JOUNAY, F., Niven-Jenkins, B., Brungard, D.,\n              and L. Jin,\
    \ \"Framework and Requirements for Virtual\n              Private Multicast Service\
    \ (VPMS)\", Work in Progress,\n              draft-ietf-l2vpn-vpms-frmwk-requirements-05,\
    \ October 2012.\n"
- title: Appendix A.  Other PE Models for E-Tree
  contents:
  - 'Appendix A.  Other PE Models for E-Tree

    '
- title: A.1.  A PE Model with a VSI and No Bridge
  contents:
  - "A.1.  A PE Model with a VSI and No Bridge\n   If there is no bridge module in\
    \ a PE, the PE may consist of Native\n   Service Processors (NSPs) as shown in\
    \ Figure 10 (adapted from\n   Figure 5 of [RFC3985]) where any transformation\
    \ operation for VLANs\n   (e.g., VLAN insertion/removal or VLAN mapping) may be\
    \ applied.  Thus,\n   a root VLAN or leaf VLAN can be added by the NSP depending\
    \ on the\n   User Network Interface (UNI) type (root/leaf) associated with the\
    \ AC\n   over which the packet arrives.\n   Further, when a packet with a leaf\
    \ VLAN exits a forwarder and arrives\n   at the NSP, the NSP must drop the packet\
    \ if the egress AC is\n   associated with a leaf UNI.\n   Tagged PW and VLAN mapping\
    \ work in the same way as in the typical PE\n   model.\n              +----------------------------------------+\n\
    \              |                PE Device               |\n      Multiple+----------------------------------------+\n\
    \      AC      |      |          |        Single        | PW Instance\n      <------>o\
    \  NSP #          +      PW Instance     X<---------->\n              |      |\
    \          |                      |\n              |------|  VSI     |----------------------|\n\
    \              |      |          |        Single        | PW Instance\n      <------>o\
    \  NSP #Forwarder +      PW Instance     X<---------->\n              |      |\
    \          |                      |\n              |------|          |----------------------|\n\
    \              |      |          |        Single        | PW Instance\n      <------>o\
    \  NSP #          +      PW Instance     X<---------->\n              |      |\
    \          |                      |\n              +----------------------------------------+\n\
    \           Figure 10: A PE Model with a VSI and No Bridge Module\n   This PE\
    \ model may be used by a Multi-Tenant Unit switch (MTU-s) in a\n   Hierarchical\
    \ VPLS (H-VPLS) network or a Network-facing PE (N-PE) in\n   an H-VPLS network\
    \ with non-bridging edge devices, wherein a spoke PW\n   can be treated as an\
    \ AC in this model.\n"
- title: A.2.  A PE Model with External E-Tree Interface
  contents:
  - "A.2.  A PE Model with External E-Tree Interface\n             +----------------------------------------+\n\
    \              |                PE Device               |\n      Root    +----------------------------------------+\n\
    \      VLAN    |                 |        Single        | PW Instance\n      <------>o\
    \                 +      PW Instance     X<---------->\n              |      \
    \           |                      |\n              |       VSI       |----------------------|\n\
    \              |                 |        Single        | PW Instance\n      \
    \        |    Forwarder    +      PW Instance     X<---------->\n            \
    \  |                 |                      |\n      Leaf    |               \
    \  |----------------------|\n      VLAN    |                 |        Single \
    \       | PW Instance\n      <------>o                 +      PW Instance    \
    \ X<---------->\n              |                 |                      |\n  \
    \            +----------------------------------------+\n           Figure 11:\
    \ A PE Model with External E-Tree Interface\n   A more simplified PE model is\
    \ depicted in A.2, where Root/Leaf VLANs\n   are directly or indirectly connected\
    \ over a single PW to the same VSI\n   forwarder in a PE, any transformation of\
    \ E-Tree VLANs, e.g., VLAN\n   insertion/removal or VLAN mapping, can be performed\
    \ by some outer\n   equipment, and the PE may further translate these VLANs into\
    \ its own\n   local VLANs.  This PE model may be used by an N-PE in an H-VPLS\n\
    \   network with bridging-capable devices, or scenarios such as providing\n  \
    \ E-Tree Network-to-Network interfaces.\n"
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   The authors would like to thank Stewart Bryant, Lizhong\
    \ Jin, Deborah\n   Brungard, Russ Housley, Stephen Farrell, Sheng Jiang, Alvaro\
    \ Retana,\n   and Ben Campbell for their detailed reviews and suggestions, and\n\
    \   Adrian Farrel, Susan Hares, Shane Amante, and Andrew Malis for their\n   valuable\
    \ advice.  In addition, the authors would like to thank Ben\n   Mack-crane, Edwin\
    \ Mallette, Donald Fedyk, Dave Allan, Giles Heron,\n   Raymond Key, Josh Rogers,\
    \ Sam Cao, and Daniel Cohn for their valuable\n   comments and discussions.\n"
- title: Contributors
  contents:
  - "Contributors\n   The following people made significant contributions to this\
    \ document:\n   Frederic Jounay\n   Salt Mobile SA\n   Rue du Caudray 4\n   1020\
    \ Renens\n   Switzerland\n   Email: frederic.jounay@salt.ch\n   Florin Balus\n\
    \   Alcatel-Lucent\n   701 East Middlefield Road\n   Mountain View, CA 94043\n\
    \   United States\n   Email: florin.balus@alcatel-lucent.com\n   Wim Henderickx\n\
    \   Alcatel-Lucent\n   Copernicuslaan 50\n   2018 Antwerp\n   Belgium\n   Email:\
    \ wim.henderickx@alcatel-lucent.com\n   Ali Sajassi\n   Cisco\n   170 West Tasman\
    \ Drive\n   San Jose, CA 95134\n   United States\n   Email: sajassi@cisco.com\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Yuanlong Jiang (editor)\n   Huawei\n   Bantian, Longgang\
    \ district\n   Shenzhen  518129\n   China\n   Email: jiangyuanlong@huawei.com\n\
    \   Lucy Yong\n   Huawei\n   207 Estrella Xing\n   Georgetown, TX  78628\n   United\
    \ States\n   Email: lucyyong@huawei.com\n   Manuel Paul\n   Deutsche Telekom\n\
    \   Winterfeldtstrasse 21\n   Berlin  10781\n   Germany\n   Email: manuel.paul@telekom.de\n"
