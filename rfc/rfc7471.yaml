- title: __initial_text__
  contents:
  - '            OSPF Traffic Engineering (TE) Metric Extensions

    '
- title: Abstract
  contents:
  - "Abstract\n   In certain networks, such as, but not limited to, financial\n  \
    \ information networks (e.g., stock market data providers), network\n   performance\
    \ information (e.g., link propagation delay) is becoming\n   critical to data\
    \ path selection.\n   This document describes common extensions to RFC 3630 \"\
    Traffic\n   Engineering (TE) Extensions to OSPF Version 2\" and RFC 5329 \"Traffic\n\
    \   Engineering Extensions to OSPF Version 3\" to enable network\n   performance\
    \ information to be distributed in a scalable fashion.  The\n   information distributed\
    \ using OSPF TE Metric Extensions can then be\n   used to make path selection\
    \ decisions based on network performance.\n   Note that this document only covers\
    \ the mechanisms by which network\n   performance information is distributed.\
    \  The mechanisms for measuring\n   network performance information or using that\
    \ information, once\n   distributed, are outside the scope of this document.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7471.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2015 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Conventions Used in This Document ...............................4\n  \
    \ 3. TE Metric Extensions to OSPF TE .................................4\n   4.\
    \ Sub-TLV Details .................................................6\n      4.1.\
    \ Unidirectional Link Delay Sub-TLV ..........................6\n           4.1.1.\
    \ Type ................................................6\n           4.1.2. Length\
    \ ..............................................6\n           4.1.3. Anomalous\
    \ (A) Bit ...................................7\n           4.1.4. Reserved ............................................7\n\
    \           4.1.5. Delay Value .........................................7\n  \
    \    4.2. Min/Max Unidirectional Link Delay Sub-TLV ..................7\n    \
    \       4.2.1. Type ................................................7\n      \
    \     4.2.2. Length ..............................................7\n        \
    \   4.2.3. Anomalous (A) Bit ...................................8\n          \
    \ 4.2.4. Reserved ............................................8\n           4.2.5.\
    \ Min Delay ...........................................8\n           4.2.6. Reserved\
    \ ............................................8\n           4.2.7. Max Delay ...........................................8\n\
    \      4.3. Unidirectional Delay Variation Sub-TLV .....................9\n  \
    \         4.3.1. Type ................................................9\n    \
    \       4.3.2. Length ..............................................9\n      \
    \     4.3.3. Reserved ............................................9\n        \
    \   4.3.4. Delay Variation .....................................9\n      4.4.\
    \ Unidirectional Link Loss Sub-TLV ...........................9\n           4.4.1.\
    \ Type ...............................................10\n           4.4.2. Length\
    \ .............................................10\n           4.4.3. Anomalous\
    \ (A) Bit ..................................10\n           4.4.4. Reserved ...........................................10\n\
    \           4.4.5. Link Loss ..........................................10\n  \
    \    4.5. Unidirectional Residual Bandwidth Sub-TLV .................10\n    \
    \       4.5.1. Type ...............................................11\n      \
    \     4.5.2. Length .............................................11\n        \
    \   4.5.3. Residual Bandwidth .................................11\n      4.6.\
    \ Unidirectional Available Bandwidth Sub-TLV ................11\n           4.6.1.\
    \ Type ...............................................12\n           4.6.2. Length\
    \ .............................................12\n           4.6.3. Available\
    \ Bandwidth ................................12\n      4.7. Unidirectional Utilized\
    \ Bandwidth Sub-TLV .................12\n           4.7.1. Type ...............................................12\n\
    \           4.7.2. Length .............................................13\n  \
    \         4.7.3. Utilized Bandwidth .................................13\n   5.\
    \ Announcement Thresholds and Filters ............................13\n   6. Announcement\
    \ Suppression .......................................14\n   7. Network Stability\
    \ and Announcement Periodicity .................14\n   8. Enabling and Disabling\
    \ Sub-TLVs ................................15\n   9. Static Metric Override .........................................15\n\
    \   10. Compatibility .................................................15\n  \
    \ 11. Security Considerations .......................................15\n   12.\
    \ IANA Considerations ...........................................16\n   13. References\
    \ ....................................................16\n      13.1. Normative\
    \ References .....................................16\n      13.2. Informative\
    \ References ...................................17\n   Acknowledgments ...................................................18\n\
    \   Authors' Addresses ................................................19\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   In certain networks, such as, but not limited to, financial\n\
    \   information networks (e.g., stock market data providers), network\n   performance\
    \ information (e.g., link propagation delay) is becoming as\n   critical to data\
    \ path selection as other metrics.\n   Because of this, using metrics such as\
    \ hop count or cost as routing\n   metrics is becoming only tangentially important.\
    \  Rather, it would be\n   beneficial to be able to make path selection decisions\
    \ based on\n   network performance information (such as link propagation delay)\
    \ in a\n   cost-effective and scalable way.\n   This document describes extensions\
    \ to OSPFv2 and OSPFv3 TE (hereafter\n   called \"OSPF TE Metric Extensions\"\
    ), that can be used to distribute\n   network performance information (viz link\
    \ propagation delay, delay\n   variation, link loss, residual bandwidth, available\
    \ bandwidth, and\n   utilized bandwidth).\n   The data distributed by OSPF TE\
    \ Metric Extensions is meant to be used\n   as part of the operation of the routing\
    \ protocol (e.g., by replacing\n   cost with link propagation delay or considering\
    \ bandwidth as well as\n   cost), by enhancing Constrained Shortest Path First\
    \ (CSPF), or for\n   use by a PCE [RFC4655] or an Application-Layer Traffic Optimization\n\
    \   (ALTO) server [RFC7285].  With respect to CSPF, the data distributed\n   by\
    \ OSPF TE Metric Extensions can be used to set up, fail over, and\n   fail back\
    \ data paths using protocols such as RSVP-TE [RFC3209].\n   Note that the mechanisms\
    \ described in this document only distribute\n   network performance information.\
    \  The methods for measuring that\n   information or acting on it once it is distributed\
    \ are outside the\n   scope of this document.  A method for measuring loss and\
    \ delay in an\n   MPLS network is described in [RFC6374].\n   While this document\
    \ does not specify the method for measuring network\n   performance information,\
    \ any measurement of link propagation delay\n   SHOULD NOT vary significantly\
    \ based upon the offered traffic load\n   and, hence, SHOULD NOT include queuing\
    \ delays.  For a forwarding\n   adjacency (FA) [RFC4206], care must be taken that\
    \ measurement of the\n   link propagation delay avoids significant queuing delay;\
    \ this can be\n   accomplished in a variety of ways, e.g., measuring with a traffic\n\
    \   class that experiences minimal queuing or summing the measured link\n   propagation\
    \ delay of the links on the FA's path.\n"
- title: 2.  Conventions Used in This Document
  contents:
  - "2.  Conventions Used in This Document\n   The key words \"MUST\", \"MUST NOT\"\
    , \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in RFC 2119 [RFC2119].\n   In this document, these words should convey that\
    \ interpretation only\n   when in ALL CAPS.  Lowercase uses of these words are\
    \ not to be\n   interpreted as carrying this significance.\n"
- title: 3.  TE Metric Extensions to OSPF TE
  contents:
  - "3.  TE Metric Extensions to OSPF TE\n   This document defines new OSPF TE sub-TLVs\
    \ that are used to\n   distribute network performance information.  The extensions\
    \ in this\n   document build on the ones provided in OSPFv2 TE [RFC3630] and OSPFv3\n\
    \   TE [RFC5329].\n   OSPFv2 TE Link State Advertisements (LSAs) [RFC3630] are\
    \ opaque LSAs\n   [RFC5250] with area flooding scope while OSPFv3 Intra-Area-TE-LSAs\n\
    \   have their own LSA type, also with area flooding scope; both consist\n   of\
    \ a single TLV with one or more nested sub-TLVs.  The Link TLV is\n   common to\
    \ both and describes the characteristics of a link between\n   OSPF neighbors.\n\
    \   This document defines several additional sub-TLVs for the Link TLV:\n    \
    \  Type  Length   Value\n      27    4        Unidirectional Link Delay\n    \
    \  28    8        Min/Max Unidirectional Link Delay\n      29    4        Unidirectional\
    \ Delay Variation\n      30    4        Unidirectional Link Loss\n      31   \
    \ 4        Unidirectional Residual Bandwidth\n      32    4        Unidirectional\
    \ Available Bandwidth\n      33    4        Unidirectional Utilized Bandwidth\n\
    \   As can be seen in the list above, the sub-TLVs described in this\n   document\
    \ carry different types of network performance information.\n   Many (but not\
    \ all) of the sub-TLVs include a bit called the Anomalous\n   (or A) bit.  When\
    \ the A bit is clear (or when the sub-TLV does not\n   include an A bit), the\
    \ sub-TLV describes steady state link\n   performance.  This information could\
    \ conceivably be used to construct\n   a steady state performance topology for\
    \ initial tunnel path\n   computation, or to verify alternative failover paths.\n\
    \   When network performance violates configurable link-local thresholds\n   a\
    \ sub-TLV with the A bit set is advertised.  These sub-TLVs could be\n   used\
    \ by the receiving node to determine whether to move traffic to a\n   backup path\
    \ or whether to calculate an entirely new path.  From an\n   MPLS perspective,\
    \ the intent of the A bit is to permit LSP ingress\n   nodes to:\n   A) Determine\
    \ whether the link referenced in the sub-TLV affects any\n      of the LSPs for\
    \ which it is ingress.  If there are, then:\n   B) The node determines whether\
    \ those LSPs still meet end-to-end\n      performance objectives.  If not, then:\n\
    \   C) The node could then conceivably move affected traffic to a pre-\n     \
    \ established protection LSP or establish a new LSP and place the\n      traffic\
    \ in it.\n   If link performance then improves beyond a configurable minimum value\n\
    \   (reuse threshold), that sub-TLV can be re-advertised with the\n   Anomalous\
    \ bit cleared.  In this case, a receiving node can\n   conceivably do whatever\
    \ re-optimization (or failback) it wishes\n   (including nothing).\n   The A bit\
    \ was intentionally omitted from some sub-TLVs to help\n   mitigate oscillations.\
    \  See Section 7.1 for more information.\n   Link delay, delay variation, and\
    \ link loss MUST be encoded as\n   integers.  Consistent with existing OSPF TE\
    \ specifications [RFC3630],\n   residual, available, and utilized bandwidth MUST\
    \ be encoded in IEEE\n   single precision floating point [IEEE754].  Link delay\
    \ and delay\n   variation MUST be in units of microseconds, link loss MUST be\
    \ a\n   percentage, and bandwidth MUST be in units of bytes per second.  All\n\
    \   values (except residual bandwidth) MUST be calculated as rolling\n   averages\
    \ where the averaging period MUST be a configurable period of\n   time.  See Section\
    \ 5 for more information.\n"
- title: 4.  Sub-TLV Details
  contents:
  - '4.  Sub-TLV Details

    '
- title: 4.1.  Unidirectional Link Delay Sub-TLV
  contents:
  - "4.1.  Unidirectional Link Delay Sub-TLV\n   This sub-TLV advertises the average\
    \ link delay between two directly\n   connected OSPF neighbors.  The delay advertised\
    \ by this sub-TLV MUST\n   be the delay from the advertising node to its neighbor\
    \ (i.e., the\n   forward path delay).  The format of this sub-TLV is shown in\
    \ the\n   following diagram:\n     0                   1                   2 \
    \                  3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \     |              27               |               4               |\n    \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n     |A|\
    \  RESERVED   |                     Delay                     |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 4.1.1.  Type
  contents:
  - "4.1.1.  Type\n   This sub-TLV has a type of 27.\n"
- title: 4.1.2.  Length
  contents:
  - "4.1.2.  Length\n   The length is 4.\n"
- title: 4.1.3.  Anomalous (A) Bit
  contents:
  - "4.1.3.  Anomalous (A) Bit\n   This field represents the Anomalous (A) bit.  The\
    \ A bit is set when\n   the measured value of this parameter exceeds its configured\
    \ maximum\n   threshold.  The A bit is cleared when the measured value falls below\n\
    \   its configured reuse threshold.  If the A bit is clear, the sub-TLV\n   represents\
    \ steady state link performance.\n"
- title: 4.1.4.  Reserved
  contents:
  - "4.1.4.  Reserved\n   This field is reserved for future use.  It MUST be set to\
    \ 0 when sent\n   and MUST be ignored when received.\n"
- title: 4.1.5.  Delay Value
  contents:
  - "4.1.5.  Delay Value\n   This 24-bit field carries the average link delay over\
    \ a configurable\n   interval in microseconds, encoded as an integer value.  When\
    \ set to\n   the maximum value 16,777,215 (16.777215 sec), then the delay is at\n\
    \   least that value, and it may be larger.\n"
- title: 4.2.  Min/Max Unidirectional Link Delay Sub-TLV
  contents:
  - "4.2.  Min/Max Unidirectional Link Delay Sub-TLV\n   This sub-TLV advertises the\
    \ minimum and maximum delay values between\n   two directly connected OSPF neighbors.\
    \  The delay advertised by this\n   sub-TLV MUST be the delay from the advertising\
    \ node to its neighbor\n   (i.e., the forward path delay).  The format of this\
    \ sub-TLV is shown\n   in the following diagram:\n     0                   1 \
    \                  2                   3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \     |              28               |               8               |\n    \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n     |A|\
    \  RESERVED   |                   Min Delay                   |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \     |   RESERVED    |                   Max Delay                   |\n    \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 4.2.1.  Type
  contents:
  - "4.2.1.  Type\n   This sub-TLV has a type of 28.\n"
- title: 4.2.2.  Length
  contents:
  - "4.2.2.  Length\n   The length is 8.\n"
- title: 4.2.3.  Anomalous (A) Bit
  contents:
  - "4.2.3.  Anomalous (A) Bit\n   This field represents the Anomalous (A) bit.  The\
    \ A bit is set when\n   one or more measured values exceed a configured maximum\
    \ threshold.\n   The A bit is cleared when the measured value falls below its\n\
    \   configured reuse threshold.  If the A bit is clear, the sub-TLV\n   represents\
    \ steady state link performance.\n"
- title: 4.2.4.  Reserved
  contents:
  - "4.2.4.  Reserved\n   This field is reserved for future use.  It MUST be set to\
    \ 0 when sent\n   and MUST be ignored when received.\n"
- title: 4.2.5.  Min Delay
  contents:
  - "4.2.5.  Min Delay\n   This 24-bit field carries minimum measured link delay value\
    \ (in\n   microseconds) over a configurable interval, encoded as an integer\n\
    \   value.\n   Implementations MAY also permit the configuration of an offset\
    \ value\n   (in microseconds) to be added to the measured delay value to\n   advertise\
    \ operator specific delay constraints.\n   When set to the maximum value 16,777,215\
    \ (16.777215 sec), then the\n   delay is at least that value, and it may be larger.\n"
- title: 4.2.6.  Reserved
  contents:
  - "4.2.6.  Reserved\n   This field is reserved for future use.  It MUST be set to\
    \ 0 when sent\n   and MUST be ignored when received.\n"
- title: 4.2.7.  Max Delay
  contents:
  - "4.2.7.  Max Delay\n   This 24-bit field carries the maximum measured link delay\
    \ value (in\n   microseconds) over a configurable interval, encoded as an integer\n\
    \   value.\n   Implementations may also permit the configuration of an offset\
    \ value\n   (in microseconds) to be added to the measured delay value to\n   advertise\
    \ operator specific delay constraints.\n   It is possible for min delay and max\
    \ delay to be the same value.\n   When the delay value is set to the maximum value\
    \ 16,777,215\n   (16.777215 sec), then the delay is at least that value, and it\
    \ may be\n   larger.\n"
- title: 4.3.  Unidirectional Delay Variation Sub-TLV
  contents:
  - "4.3.  Unidirectional Delay Variation Sub-TLV\n   This sub-TLV advertises the\
    \ average link delay variation between two\n   directly connected OSPF neighbors.\
    \  The delay variation advertised by\n   this sub-TLV MUST be the delay from the\
    \ advertising node to its\n   neighbor (i.e., the forward path delay variation).\
    \  The format of\n   this sub-TLV is shown in the following diagram:\n      0\
    \                   1                   2                   3\n      0 1 2 3 4\
    \ 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |              29               |               4               |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |\
    \    RESERVED   |              Delay Variation                  |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 4.3.1.  Type
  contents:
  - "4.3.1.  Type\n   This sub-TLV has a type of 29.\n"
- title: 4.3.2.  Length
  contents:
  - "4.3.2.  Length\n   The length is 4.\n"
- title: 4.3.3.  Reserved
  contents:
  - "4.3.3.  Reserved\n   This field is reserved for future use.  It MUST be set to\
    \ 0 when sent\n   and MUST be ignored when received.\n"
- title: 4.3.4.  Delay Variation
  contents:
  - "4.3.4.  Delay Variation\n   This 24-bit field carries the average link delay\
    \ variation over a\n   configurable interval in microseconds, encoded as an integer\
    \ value.\n   When set to 0, it has not been measured.  When set to the maximum\n\
    \   value 16,777,215 (16.777215 sec), then the delay is at least that\n   value,\
    \ and it may be larger.\n"
- title: 4.4.  Unidirectional Link Loss Sub-TLV
  contents:
  - "4.4.  Unidirectional Link Loss Sub-TLV\n   This sub-TLV advertises the loss (as\
    \ a packet percentage) between two\n   directly connected OSPF neighbors.  The\
    \ link loss advertised by this\n   sub-TLV MUST be the packet loss from the advertising\
    \ node to its\n   neighbor (i.e., the forward path loss).  The format of this\
    \ sub-TLV\n   is shown in the following diagram:\n     0                   1 \
    \                  2                   3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \     |              30               |               4               |\n    \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n     |A|\
    \  RESERVED   |                 Link Loss                     |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 4.4.1.  Type
  contents:
  - "4.4.1.  Type\n   This sub-TLV has a type of 30\n"
- title: 4.4.2.  Length
  contents:
  - "4.4.2.  Length\n   The length is 4.\n"
- title: 4.4.3.  Anomalous (A) Bit
  contents:
  - "4.4.3.  Anomalous (A) Bit\n   This field represents the Anomalous (A) bit.  The\
    \ A bit is set when\n   the measured value of this parameter exceeds its configured\
    \ maximum\n   threshold.  The A bit is cleared when the measured value falls below\n\
    \   its configured reuse threshold.  If the A bit is clear, the sub-TLV\n   represents\
    \ steady state link performance.\n"
- title: 4.4.4.  Reserved
  contents:
  - "4.4.4.  Reserved\n   This field is reserved for future use.  It MUST be set to\
    \ 0 when sent\n   and MUST be ignored when received.\n"
- title: 4.4.5.  Link Loss
  contents:
  - "4.4.5.  Link Loss\n   This 24-bit field carries link packet loss as a percentage\
    \ of the\n   total traffic sent over a configurable interval.  The basic unit\
    \ is\n   0.000003%, where (2^24 - 2) is 50.331642%.  This value is the highest\n\
    \   packet loss percentage that can be expressed (the assumption being\n   that\
    \ precision is more important on high speed links than the ability\n   to advertise\
    \ loss rates greater than this, and that high speed links\n   with over 50% loss\
    \ are unusable).  Therefore, measured values that\n   are larger than the field\
    \ maximum SHOULD be encoded as the maximum\n   value.\n"
- title: 4.5.  Unidirectional Residual Bandwidth Sub-TLV
  contents:
  - "4.5.  Unidirectional Residual Bandwidth Sub-TLV\n   This sub-TLV advertises the\
    \ residual bandwidth between two directly\n   connected OSPF neighbors.  The residual\
    \ bandwidth advertised by this\n   sub-TLV MUST be the residual bandwidth from\
    \ the advertising node to\n   its neighbor.\n   The format of this sub-TLV is\
    \ shown in the following diagram:\n     0                   1                \
    \   2                   3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2\
    \ 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \     |              31               |               4               |\n    \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n     |  \
    \                     Residual Bandwidth                      |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 4.5.1.  Type
  contents:
  - "4.5.1.  Type\n   This sub-TLV has a type of 31.\n"
- title: 4.5.2.  Length
  contents:
  - "4.5.2.  Length\n   The length is 4.\n"
- title: 4.5.3.  Residual Bandwidth
  contents:
  - "4.5.3.  Residual Bandwidth\n   This field carries the residual bandwidth on a\
    \ link, forwarding\n   adjacency [RFC4206], or bundled link in IEEE floating point\
    \ format\n   with units of bytes per second.  For a link or forwarding adjacency,\n\
    \   residual bandwidth is defined to be Maximum Bandwidth [RFC3630] minus\n  \
    \ the bandwidth currently allocated to RSVP-TE LSPs.  For a bundled\n   link,\
    \ residual bandwidth is defined to be the sum of the component\n   link residual\
    \ bandwidths.\n   The calculation of Residual Bandwidth is different than that\
    \ of\n   Unreserved Bandwidth [RFC3630].  Residual Bandwidth subtracts tunnel\n\
    \   reservations from Maximum Bandwidth (i.e., the link capacity)\n   [RFC3630]\
    \ and provides an aggregated remainder across priorities.\n   Unreserved Bandwidth,\
    \ on the other hand, is subtracted from the\n   Maximum Reservable Bandwidth (the\
    \ bandwidth that can theoretically be\n   reserved) and provides per priority\
    \ remainders.  Residual Bandwidth\n   and Unreserved Bandwidth [RFC3630] can be\
    \ used concurrently, and each\n   has a separate use case (e.g., the former can\
    \ be used for\n   applications like Weighted ECMP while the latter can be used\
    \ for call\n   admission control).\n"
- title: 4.6.  Unidirectional Available Bandwidth Sub-TLV
  contents:
  - "4.6.  Unidirectional Available Bandwidth Sub-TLV\n   This sub-TLV advertises\
    \ the available bandwidth between two directly\n   connected OSPF neighbors. \
    \ The available bandwidth advertised by this\n   sub-TLV MUST be the available\
    \ bandwidth from the advertising node to\n   its neighbor.  The format of this\
    \ sub-TLV is shown in the following\n   diagram:\n     0                   1 \
    \                  2                   3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \     |              32               |               4               |\n    \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n     |  \
    \                    Available Bandwidth                      |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 4.6.1.  Type
  contents:
  - "4.6.1.  Type\n   This sub-TLV has a type of 32.\n"
- title: 4.6.2.  Length
  contents:
  - "4.6.2.  Length\n   The length is 4.\n"
- title: 4.6.3.  Available Bandwidth
  contents:
  - "4.6.3.  Available Bandwidth\n   This field carries the available bandwidth on\
    \ a link, forwarding\n   adjacency, or bundled link in IEEE floating point format\
    \ with units\n   of bytes per second.  For a link or forwarding adjacency, available\n\
    \   bandwidth is defined to be residual bandwidth (see Section 4.5) minus\n  \
    \ the measured bandwidth used for the actual forwarding of non-RSVP-TE\n   LSP\
    \ packets.  For a bundled link, available bandwidth is defined to\n   be the sum\
    \ of the component link available bandwidths.\n"
- title: 4.7.  Unidirectional Utilized Bandwidth Sub-TLV
  contents:
  - "4.7.  Unidirectional Utilized Bandwidth Sub-TLV\n   This Sub-TLV advertises the\
    \ bandwidth utilization between two\n   directly connected OSPF neighbors.  The\
    \ bandwidth utilization\n   advertised by this sub-TLV MUST be the bandwidth from\
    \ the advertising\n   node to its neighbor.  The format of this Sub-TLV is shown\
    \ in the\n   following diagram:\n     0                   1                  \
    \ 2                   3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3\
    \ 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \     |              33               |               4               |\n    \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n     |  \
    \                    Utilized Bandwidth                       |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 4.7.1.  Type
  contents:
  - "4.7.1.  Type\n   This sub-TLV has a type of 33.\n"
- title: 4.7.2.  Length
  contents:
  - "4.7.2.  Length\n   The length is 4.\n"
- title: 4.7.3.  Utilized Bandwidth
  contents:
  - "4.7.3.  Utilized Bandwidth\n   This field carries the bandwidth utilization on\
    \ a link, forwarding\n   adjacency, or bundled link in IEEE floating-point format\
    \ with units\n   of bytes per second.  For a link or forwarding adjacency, bandwidth\n\
    \   utilization represents the actual utilization of the link (i.e., as\n   measured\
    \ by the advertising node).  For a bundled link, bandwidth\n   utilization is\
    \ defined to be the sum of the component link bandwidth\n   utilizations.\n"
- title: 5.  Announcement Thresholds and Filters
  contents:
  - "5.  Announcement Thresholds and Filters\n   The values advertised in all sub-TLVs\
    \ (except min/max delay and\n   residual bandwidth) MUST represent an average\
    \ over a period or be\n   obtained by a filter that is reasonably representative\
    \ of an average.\n   For example, a rolling average is one such filter.\n   Min\
    \ and max delay MAY be the lowest and/or highest measured value\n   over a measurement\
    \ interval or MAY make use of a filter, or other\n   technique, to obtain a reasonable\
    \ representation of a min and max\n   value representative of the interval with\
    \ compensation for outliers.\n   The measurement interval, any filter coefficients,\
    \ and any\n   advertisement intervals MUST be configurable for each sub-TLV.\n\
    \   In addition to the measurement intervals governing re-advertisement,\n   implementations\
    \ SHOULD provide for each sub-TLV configurable\n   accelerated advertisement thresholds,\
    \ such that:\n   1. If the measured parameter falls outside a configured upper\
    \ bound\n      for all but the min delay metric (or lower bound for min delay\n\
    \      metric only) and the advertised sub-TLV is not already outside\n      that\
    \ bound, or\n   2. If the difference between the last advertised value and current\n\
    \      measured value exceed a configured threshold, then\n   3. The advertisement\
    \ is made immediately.\n   4. For sub-TLVs, which include an A bit (except min/max\
    \ delay), an\n      additional threshold SHOULD be included corresponding to the\n\
    \      threshold for which the performance is considered anomalous (and\n    \
    \  sub-TLVs with the A bit are sent).  The A bit is cleared when the\n      sub-TLV's\
    \ performance has been below (or re-crosses) this\n      threshold for an advertisement\
    \ interval(s) to permit fail back.\n   To prevent oscillations, only the high\
    \ threshold or the low threshold\n   (but not both) may be used to trigger any\
    \ given sub-TLV that supports\n   both.\n   Additionally, once outside of the\
    \ bounds of the threshold, any re-\n   advertisement of a measurement within the\
    \ bounds would remain\n   governed solely by the measurement interval for that\
    \ sub-TLV.\n"
- title: 6.  Announcement Suppression
  contents:
  - "6.  Announcement Suppression\n   When link performance values change by small\
    \ amounts that fall under\n   thresholds that would cause the announcement of\
    \ a sub-TLV,\n   implementations SHOULD suppress sub-TLV re-advertisement and/or\n\
    \   lengthen the period within which they are refreshed.\n   Only the accelerated\
    \ advertisement threshold mechanism described in\n   Section 5 may shorten the\
    \ re-advertisement interval.\n   All suppression and re-advertisement interval\
    \ back-off timer features\n   SHOULD be configurable.\n"
- title: 7.  Network Stability and Announcement Periodicity
  contents:
  - "7.  Network Stability and Announcement Periodicity\n   Sections 5 and 6 provide\
    \ configurable mechanisms to bound the number\n   of re-advertisements.  Instability\
    \ might occur in very large networks\n   if measurement intervals are set low\
    \ enough to overwhelm the\n   processing of flooded information at some of the\
    \ routers in the\n   topology.  Therefore, care should be taken in setting these\
    \ values.\n   Additionally, the default measurement interval for all sub-TLVs\n\
    \   should be 30 seconds.\n   Announcements must also be able to be throttled\
    \ using configurable\n   inter-update throttle timers.  The minimum announcement\
    \ periodicity\n   is 1 announcement per second.  The default value should be set\
    \ to 120\n   seconds.\n   Implementations should not permit the inter-update timer\
    \ to be lower\n   than the measurement interval.\n   Furthermore, it is recommended\
    \ that any underlying performance\n   measurement mechanisms not include any significant\
    \ buffer delay, any\n   significant buffer induced delay variation, or any significant\
    \ loss\n   due to buffer overflow or due to active queue management.\n"
- title: 8.  Enabling and Disabling Sub-TLVs
  contents:
  - "8.  Enabling and Disabling Sub-TLVs\n   Implementations MUST make it possible\
    \ to individually enable or\n   disable the advertisement of each sub-TLV.\n"
- title: 9.  Static Metric Override
  contents:
  - "9.  Static Metric Override\n   Implementations SHOULD permit the static configuration\
    \ and/or manual\n   override of dynamic measurements for each sub-TLV in order\
    \ to\n   simplify migration and to mitigate scenarios where dynamic\n   measurements\
    \ are not possible.\n"
- title: 10.  Compatibility
  contents:
  - "10.  Compatibility\n   As per [RFC3630], an unrecognized TLV should be silently\
    \ ignored.\n   That is, it should not be processed but it should be included in\
    \ LSAs\n   sent to OSPF neighbors.\n"
- title: 11.  Security Considerations
  contents:
  - "11.  Security Considerations\n   This document does not introduce security issues\
    \ beyond those\n   discussed in [RFC3630].  OSPFv2 HMAC-SHA [RFC5709] provides\n\
    \   additional protection for OSPFv2.  OSPFv3 IPsec [RFC4552] and OSPFv3\n   Authentication\
    \ Trailer [RFC7166] provide additional protection for\n   OSPFv3.\n   OSPF Keying\
    \ and Authentication for Routing Protocols (KARP) [RFC6863]\n   provides an analysis\
    \ of OSPFv2 and OSPFv3 routing security, and\n   OSPFv2 Security Extensions [OSPFSEC]\
    \ provides extensions designed to\n   address the identified gaps in OSPFv2.\n"
- title: 12.  IANA Considerations
  contents:
  - "12.  IANA Considerations\n   IANA maintains the registry for the Link TLV sub-TLVs.\
    \  For OSPF TE\n   Metric Extensions, one new type code for each sub-TLV defined\
    \ in this\n   document has been registered, as follows:\n   Value  Sub-TLV\n \
    \    27   Unidirectional Link Delay\n     28   Min/Max Unidirectional Link Delay\n\
    \     29   Unidirectional Delay Variation\n     30   Unidirectional Link Loss\n\
    \     31   Unidirectional Residual Bandwidth\n     32   Unidirectional Available\
    \ Bandwidth\n     33   Unidirectional Utilized Bandwidth\n"
- title: 13.  References
  contents:
  - '13.  References

    '
- title: 13.1.  Normative References
  contents:
  - "13.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997,\n              <http://www.rfc-editor.org/info/rfc2119>.\n   [RFC3630]\
    \  Katz, D., Kompella, K., and D. Yeung, \"Traffic Engineering\n             \
    \ (TE) Extensions to OSPF Version 2\", RFC 3630, September\n              2003,\
    \ <http://www.rfc-editor.org/info/rfc3630>.\n   [RFC5329]  Ishiguro, K., Manral,\
    \ V., Davey, A., and A. Lindem, Ed.,\n              \"Traffic Engineering Extensions\
    \ to OSPF Version 3\", RFC\n              5329, September 2008,\n            \
    \  <http://www.rfc-editor.org/info/rfc5329>.\n   [IEEE754]  Institute of Electrical\
    \ and Electronics Engineers,\n              \"Standard for Floating-Point Arithmetic\"\
    , IEEE Standard\n              754, August 2008.\n"
- title: 13.2.  Informative References
  contents:
  - "13.2.  Informative References\n   [RFC3209]  Awduche, D., Berger, L., Gan, D.,\
    \ Li, T., Srinivasan, V.,\n              and G. Swallow, \"RSVP-TE: Extensions\
    \ to RSVP for LSP\n              Tunnels\", RFC 3209, December 2001,\n       \
    \       <http://www.rfc-editor.org/info/rfc3209>.\n   [RFC4206]  Kompella, K.\
    \ and Y. Rekhter, \"Label Switched Paths (LSP)\n              Hierarchy with Generalized\
    \ Multi-Protocol Label Switching\n              (GMPLS) Traffic Engineering (TE)\"\
    , RFC 4206, October 2005,\n              <http://www.rfc-editor.org/info/rfc4206>.\n\
    \   [RFC4552]  Gupta, M. and N. Melam, \"Authentication/Confidentiality\n    \
    \          for OSPFv3\", RFC 4552, June 2006,\n              <http://www.rfc-editor.org/info/rfc4552>.\n\
    \   [RFC4655]  Farrel, A., Vasseur, J.-P., and J. Ash, \"A Path\n            \
    \  Computation Element (PCE)-Based Architecture\", RFC 4655,\n              August\
    \ 2006, <http://www.rfc-editor.org/info/rfc4655>.\n   [RFC5250]  Berger, L., Bryskin,\
    \ I., Zinin, A., and R. Coltun, \"The\n              OSPF Opaque LSA Option\"\
    , RFC 5250, July 2008,\n              <http://www.rfc-editor.org/info/rfc5250>.\n\
    \   [RFC5709]  Bhatia, M., Manral, V., Fanto, M., White, R., Barnes, M.,\n   \
    \           Li, T., and R. Atkinson, \"OSPFv2 HMAC-SHA Cryptographic\n       \
    \       Authentication\", RFC 5709, October 2009,\n              <http://www.rfc-editor.org/info/rfc5709>.\n\
    \   [RFC6374]  Frost, D. and S. Bryant, \"Packet Loss and Delay\n            \
    \  Measurement for MPLS Networks\", RFC 6374, September 2011,\n              <http://www.rfc-editor.org/info/rfc6374>.\n\
    \   [RFC6863]  Hartman, S. and D. Zhang, \"Analysis of OSPF Security\n       \
    \       According to the Keying and Authentication for Routing\n             \
    \ Protocols (KARP) Design Guide\", RFC 6863, March 2013,\n              <http://www.rfc-editor.org/info/rfc6863>.\n\
    \   [RFC7166]  Bhatia, M., Manral, V., and A. Lindem, \"Supporting\n         \
    \     Authentication Trailer for OSPFv3\", RFC 7166, March 2014,\n           \
    \   <http://www.rfc-editor.org/info/rfc7166>.\n   [RFC7285]  Alimi, R., Ed., Penno,\
    \ R., Ed., Yang, Y., Ed., Kiesel, S.,\n              Previdi, S., Roome, W., Shalunov,\
    \ S., and R. Woundy,\n              \"Application-Layer Traffic Optimization (ALTO)\
    \ Protocol\",\n              RFC 7285, September 2014,\n              <http://www.rfc-editor.org/info/rfc7285>.\n\
    \   [OSPFSEC]  Bhatia, M., Hartman, S., Zhang, D., and A. Lindem, Ed.,\n     \
    \         \"Security Extension for OSPFv2 when Using Manual Key\n            \
    \  Management\", Work in Progress, draft-ietf-ospf-security-\n              extension-manual-keying,\
    \ November 2014.\n"
- title: Acknowledgments
  contents:
  - "Acknowledgments\n   The authors would like to recognize Nabil Bitar, Edward Crabbe,\
    \ Don\n   Fedyk, Acee Lindem, David McDysan, and Ayman Soliman for their\n   contributions\
    \ to this document.\n   The authors would also like to acknowledge Curtis Villamizar\
    \ for his\n   significant comments and direct content collaboration.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Spencer Giacalone\n   Unaffiliated\n   EMail: spencer.giacalone@gmail.com\n\
    \   Dave Ward\n   Cisco Systems\n   170 West Tasman Dr.\n   San Jose, CA  95134\n\
    \   United States\n   EMail: dward@cisco.com\n   John Drake\n   Juniper Networks\n\
    \   1194 N. Mathilda Ave.\n   Sunnyvale, CA  94089\n   United States\n   EMail:\
    \ jdrake@juniper.net\n   Alia Atlas\n   Juniper Networks\n   1194 N. Mathilda\
    \ Ave.\n   Sunnyvale, CA  94089\n   United States\n   EMail: akatlas@juniper.net\n\
    \   Stefano Previdi\n   Cisco Systems\n   Via Del Serafico 200\n   00142 Rome\n\
    \   Italy\n   EMail: sprevidi@cisco.com\n"
