- title: __initial_text__
  contents:
  - "            Extending the Session Initiation Protocol (SIP)\n               \
    \   Reason Header for Preemption Events\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2006).\n"
- title: Abstract
  contents:
  - "Abstract\n   This document proposes an IANA Registration extension to the Session\n\
    \   Initiation Protocol (SIP) Reason Header to be included in a BYE\n   Method\
    \ Request as a result of a session preemption event, either at a\n   user agent\
    \ (UA), or somewhere in the network involving a\n   reservation-based protocol\
    \ such as the Resource ReSerVation Protocol\n   (RSVP) or Next Steps in Signaling\
    \ (NSIS).  This document does not\n   attempt to address routers failing in the\
    \ packet path; instead, it\n   addresses a deliberate tear down of a flow between\
    \ UAs, and informs\n   the terminated UA(s) with an indication of what occurred.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................2\n\
    \      1.1. Conventions Used in This Document ..........................4\n  \
    \ 2. Access Preemption Events ........................................4\n    \
    \  2.1. Effects of Preemption at the User Agent ....................6\n      2.2.\
    \ Reason Header Requirements for Access Preemption Events ....6\n   3. Network\
    \ Preemption Events .......................................7\n      3.1. Reason\
    \ Header Requirements for Network Preemption Events ..10\n   4. Including a Hybrid\
    \ Infrastructure ..............................10\n      4.1. Hybrid Infrastructure\
    \ Requirements ........................11\n   5. Preemption Reason Header Cause\
    \ Codes and Semantics .............11\n      5.1. Access Preemption Event Reason\
    \ Code .......................12\n           5.1.1. Access Preemption Event Call\
    \ Flow ..................12\n      5.2. Network Preemption Events Reason Code\
    \ .....................14\n           5.2.1. Network Preemption Event Call Flow\
    \ .................15\n      5.3. Generic Preemption Event Reason Code ......................16\n\
    \      5.4. Non-IP Preemption Event Reason Code .......................16\n  \
    \         5.4.1. Non-IP Preemption Event Call Flow ..................17\n   6.\
    \ Security Considerations ........................................17\n   7. IANA\
    \ Considerations ............................................17\n      7.1. \"\
    Preemption\" Namespace Registry ...........................18\n      7.2. Default\
    \ Reason-Text IANA Registry for the SIP\n           Reason Header .............................................20\n\
    \   8. Contributions ..................................................20\n  \
    \ 9. Acknowledgements ...............................................20\n   10.\
    \ References ....................................................21\n      10.1.\
    \ Normative References .....................................21\n      10.2. Informative\
    \ References ...................................21\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   With the introduction of the SIP Resource-Priority (R-P)\
    \ header [4],\n   there became the possibility of sessions being torn down for\
    \ (scarce)\n   resource reasons, meaning there weren't enough resources for a\n\
    \   particular session to continue.  Certain domains will implement this\n   mechanism\
    \ where resources may become constrained either at the user\n   agent (UA) or\
    \ at congested router interfaces where more important\n   sessions are to be completed\
    \ at the expense of less important\n   sessions.  Which sessions are more or less\
    \ important than others will\n   not be discussed here.  What is proposed here\
    \ is a SIP [2] extension\n   to synchronize SIP elements as to why a preemption\
    \ event occurred and\n   which type of preemption event occurred, as viewed by\
    \ the element\n   that performed the preemption of a session.\n   The SIP Reason\
    \ Header is an application layer feedback mechanism to\n   synchronize SIP elements\
    \ of events; the particular event explained\n   here deals with preemption of\
    \ a session.  Q.850 [5] provides an\n   indication for preemption (cause=8) and\
    \ for preemption \"circuit\n   reserved for reuse\" (cause=9).  Q.850 Cause=9\
    \ does not apply to IP,\n   as IP has no concept of circuits.  Some domains wish\
    \ to differentiate\n   appropriate IP reasons for preemption of sessions and to\
    \ indicate\n   topologically where the preemption event occurred.  No other means\n\
    \   exists today to give feedback as to why a session was torn down on\n   preemption\
    \ grounds.\n   In the event that a session is terminated for a specific reason\
    \ that\n   can (or should) be shared with SIP Servers and UAs sharing dialog,\n\
    \   the Reason Header [1] was created to be included in the BYE Request.\n   This\
    \ was not the only Method for this new Header; [1] also discusses\n   the CANCEL\
    \ Method usage.\n   This document will define two use cases in which new preemption\n\
    \   Reason values are necessary:\n      Access Preemption Event - This is when\
    \ a UA receives a new SIP\n            session request message with a valid R-P\
    \ value that is\n            higher than the one associated with the currently\
    \ active\n            session at that UA.  The UA must discontinue the existing\n\
    \            session in order to accept the new one (according to local\n    \
    \        policy of some domains).\n      Network Preemption Event - This is when\
    \ a network element - such\n            as a router - reaches capacity on a particular\
    \ interface and\n            has the ability to statefully choose which session(s)\
    \ will\n            remain active when a new session/reservation is signaled for\n\
    \            under the parameters outlined in SIP Preconditions per [3]\n    \
    \        that would otherwise overload that interface (perhaps\n            adversely\
    \ affecting all sessions).  In this case, the router\n            must terminate\
    \ one or more reservations of lower priority in\n            order to allow this\
    \ higher priority reservation access to\n            the requested amount of bandwidth\
    \ (according to local policy\n            of some domains).\n   This document\
    \ will cover the semantics for these two cases and\n   request IANA registration\
    \ of the new protocol value \"Preemption\" for\n   the Reason Header field, with\
    \ 4 cause values for the above preemption\n   conditions.  Additionally, this\
    \ document will create a new IANA\n   Registry for reason-text strings that are\
    \ not currently defined\n   through existing SIP Response codes or Q.850 cause\
    \ codes.  This new\n   Registry will be useful for future protocols used by the\
    \ SIP Reason\n   header.\n   This document will emphasize an existing SIP RFC\
    \ [3] as the starting\n   point for network preemption events.  RFC 3312 set rules\
    \ surrounding\n   SIP interaction using a reservation protocol for QoS preconditions,\n\
    \   using RSVP as the example protocol.  That effort did not preclude\n   other\
    \ preconditions or future protocol work from becoming a means of\n   preconditions.\
    \  NSIS is a new reservation protocol effort that\n   specifies a preemption operation\
    \ similar to RSVP's ResvErr message\n   involving the NSIS NOTIFY message in [8]\
    \ with a Transient error code\n   0x04000005 (Resources Pre-empted).\n   Note\
    \ that SIP itself does not cause RSVP or NSIS reservation\n   signaling to start\
    \ or end.  That operation is part of a separate API\n   within each UA.\n"
- title: 1.1.  Conventions Used in This Document
  contents:
  - "1.1.  Conventions Used in This Document\n   The key words \"MUST\", \"MUST NOT\"\
    , \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [6].\n"
- title: 2.  Access Preemption Events
  contents:
  - "2.  Access Preemption Events\n   As mentioned previously, Access Preemption Events\
    \ (APE) occur at the\n   user agent.  It does not matter which UA in a unicast\
    \ or multicast\n   session this happens to (the UAC or UAS of a session).  If\
    \ local\n   policy dictates in a particular domain rules regarding the\n   functionality\
    \ of a UA, there must be a means by which that UA (not\n   the user) informs the\
    \ other UA(s) why a session was just torn down\n   prematurely.  The appropriate\
    \ mechanism is the BYE Method.  The user\n   of the other far side UA will not\
    \ understand why that session \"just\n   went away\" without there being a means\
    \ of informing the UA of what\n   occurred (if this event was purposeful).  Through\
    \ this type of\n   indication to the preempted UA, it can indicate to the user\
    \ of that\n   device appropriately.\n   The rules within a domain surrounding\
    \ the UA to be informed can be\n   different from the rules for informing the\
    \ user.  Local policy should\n   determine if the user should be informed of the\
    \ specific reason.\n   This indication in SIP will provide a means for the UA\
    \ to react in a\n   locally determined way, if appropriate (play a certain tone\
    \ or tone\n   sequence, point towards a special announcement uri, cause the UA's\n\
    \   visual display to do something, etc.).\n   Figure 1 illustrates the scenario.\
    \  UA1 invites UA2 to a session with\n   the Resource Priority level of 3 (levels\
    \ 1 and 2 are higher is this\n   domain, and the namespace element is not necessary\
    \ for this\n   discussion).\n      UA1                      UA2              \
    \         UA3\n       |                        |                         |\n \
    \      |      INVITE (R-P:3)    |                         |\n       |----------------------->|\
    \                         |\n       |         200 OK         |               \
    \          |\n       |<-----------------------|                         |\n  \
    \     |          ACK           |                         |\n       |----------------------->|\
    \                         |\n       |          RTP           |               \
    \          |\n       |<======================>|                         |\n  \
    \     |                        |      INVITE (R-P:2)     |\n       |         \
    \               |<------------------------|\n       |    BYE (Reason : ? )   |\
    \                         |\n       |<-----------------------|               \
    \          |\n       |                        |         200 OK          |\n  \
    \     |                        |------------------------>|\n       |         200\
    \ OK         |                         |\n       |----------------------->|  \
    \                       |\n       |                        |          ACK    \
    \        |\n       |                        |<------------------------|\n    \
    \   |                        |          RTP            |\n       |           \
    \             |<=======================>|\n       |                        | \
    \                        |\n          Figure 1. Access Preemption with obscure\
    \ Reason\n   After the session between UA1 and UA2 is established, UA3 invites\
    \ UA2\n   to a new session with an R-P of 2 (a higher priority than the current\n\
    \   session between UA1 and UA2).  Local policy within this domain\n   dictates\
    \ that UA2 must preempt all existing calls of lower priority\n   in order to accept\
    \ a higher priority call.\n   What Reason value could be inserted above to mean\
    \ \"preemption\" at a\n   UA?  There are several choices: 410 \"Gone\", 480 \"\
    Temporarily\n   Unavailable\", 486 \"Busy Here\", and 503 \"Service Unavailable\"\
    .  The\n   use of any of these here is questionable because the session is\n \
    \  already established.  It is further complicated if there needs to be\n   a\
    \ difference in the Reason value for an Access versus a Network\n   Preemption\
    \ Event (which is a requirement here).  The limits of Q.850\n   [5] have been\
    \ stated previously in this document.\n   It should be possible to configure UAs\
    \ receiving a preemption\n   indication to indicate to the user that no particular\
    \ type of\n   preemption occurred.  There are some domains that might prefer their\n\
    \   users to remain unaware of the specifics of network behavior.  This\n   should\
    \ not ever prevent a known preemption indication from being sent\n   in a BYE\
    \ from a UA.\n"
- title: 2.1.  Effects of Preemption at the User Agent
  contents:
  - "2.1.  Effects of Preemption at the User Agent\n   If 2 UAs are in a session and\
    \ one UA must preempt that session to\n   accept another session, a BYE Method\
    \ message is the appropriate\n   mechanism to perform this task.  However, taking\
    \ this a step further,\n   if a UA is the common point of a 3-way (or more) ad\
    \ hoc conference\n   and must preempt all sessions in that conference due to receipt\
    \ of a\n   higher-priority session request (that this UA must accept), then a\n\
    \   BYE message must be sent to all UAs in that ad hoc conference.\n"
- title: 2.2.  Reason Header Requirements for Access Preemption Events
  contents:
  - "2.2.  Reason Header Requirements for Access Preemption Events\n   The following\
    \ is a list of requirements for adding an appropriate\n   Reason value for an\
    \ Access Preemption Event (APE) as described above\n   and shown in Figure 1:\n\
    \      APE_REQ#1 - create a means by which one UA can inform another UA\n    \
    \              (within the same active session) that the active\n            \
    \      session between the two devices is being purposely\n                  preempted\
    \ at one UA for a higher-priority session\n                  request from another\
    \ UA.\n      APE_REQ#2 - create a means by which all relevant SIP elements can\n\
    \                  be informed of this Access Preemption Event to a\n        \
    \          specific session.\n   For example: perhaps SIP Servers that have incorporated\
    \ a Record-\n   Route header into that session set up need to be informed of this\n\
    \   occurrence.\n      APE_REQ#3 - create a means of informing all participants\
    \ in an ad\n                  hoc conference that the primary UA (the mixer) has\n\
    \                  preempted the conference by accepting a higher-\n         \
    \         priority session request.\n      APE_REQ#4 - create a separate indication\
    \ for the access preemption\n                  event than the one used for a Network\
    \ Preemption Event\n                  (described in the next section) in the session\
    \ BYE\n                  message.\n      APE_REQ#5 - create a means to generate\
    \ a specific indication of a\n                  preemption event at the user agent\
    \ to inform all\n                  relevant SIP entities, yet have the ability\
    \ to\n                  generalize this indication (based on local policy) to\n\
    \                  the receiving UA such that this UA cannot display more\n  \
    \                information than the domain wants the user to see.\n"
- title: 3.  Network Preemption Events
  contents:
  - "3.  Network Preemption Events\n   Network Preemption Events (NPE) are instances\
    \ in which an\n   intermediate router between SIP user agents preempts one or\
    \ more\n   sessions at one of its interfaces to place a higher-priority session\n\
    \   through that interface.  Within RSVP, there exists a means to execute\n  \
    \ this functionality per [7]: ResvErr messages, which travel downstream\n   towards\
    \ appropriate receivers.  The ResvErr message has the ability\n   to carry within\
    \ it a code indicating why a reservation is being torn\n   down.  The ResvErr\
    \ does not travel upstream to the other UA.  This\n   document proposes that a\
    \ SIP message be generated to synchronize all\n   relevant SIP elements to this\
    \ preemption event, including the\n   upstream UA.  Creating another Reason value\
    \ describing that a network\n   element preempted the session is necessary in\
    \ certain domains.\n   Figures 2 and 3 illustrate a network preemption scenario\
    \ with RSVP.\n   NSIS, not shown in examples here, can be imagined from [8] with\
    \ a\n   NOTIFY error message indicating that a reservation has been preempted\n\
    \   with the Transient ERROR_SPEC 0x04000005.  SIP behavior will be\n   identical\
    \ using either reservation protocol.\n   UA1 invites UA2 to a session with the\
    \ Resource Priority level of 3\n   (levels 1 and 2 are higher in this domain)\
    \ and is accepted.  This SIP\n   signaling translated the Resource Priority value\
    \ to an appropriate\n   RSVP priority level for that flow.  The link between Router\
    \ 1 and\n   Router 2 became saturated with this session reservation between UA1\n\
    \   and UA2 (in this example).\n             UA1                             \
    \     UA2\n                \\                                /\n             \
    \    \\                              /\n                  +--------+         \
    \ +--------+\n                  |        |          |        |\n             \
    \     | RTR1   |          |  RTR2  |\n                  |       Int7-------Int5\
    \      |\n                  |        |          |        |\n                 \
    \ +--------+          +--------+\n                 /                         \
    \     \\\n                /                                \\\n             UA3\
    \                                  UA4\n                Figure 2. Network Diagram\
    \ Scenario A\n   After the session between UA1 and UA2 is established, UA3 invites\
    \ UA4\n   to a new session with a Resource Priority level of 2 (a higher\n   priority\
    \ than the current reservation between UA1 and UA2).  Again,\n   the priority\
    \ value within the Resource-Priority header of this INVITE\n   is translated into\
    \ an appropriate RSVP priority (that is also higher\n   in relative priority to\
    \ the UA1_UA2 session/RSVP flow).  When this\n   second, higher-priority session\
    \ is signaled, one Path message goes\n   from UA3 to UA4, resulting in the RESV\
    \ message going from UA4 back to\n   UA3.  Because this link between the two routers\
    \ is at capacity (at\n   Int7 in Figure 5), Router 1 will (in this example) make\
    \ the decision\n   or will communicate with another network entity that will make\
    \ the\n   decision to preempt lower-priority BW to ensure that this higher-\n\
    \   priority session reservation is completed.  A ResvErr message is sent\n  \
    \ to UA2.  The result is that UA2 will know that there has been a\n   preemption\
    \ event in a router (because the ResvErr message has a error\n   code within it,\
    \ stating \"preemption\").  At this point, UA1 will not\n   know anything of this\
    \ preemption.  If there are any SIP Proxies\n   between UAs 1 and 2 (perhaps that\
    \ inserted a Record-Route Header),\n   each will also need to be informed as to\
    \ why this reservation was\n   torn down.\n   Figure 3 shows the call flow with\
    \ Router 2 from Figure 2 included at\n   the RSVP layer sending the ResvErr message.\
    \  A complete call flow\n   including all UAs and Routers is not shown here for\
    \ diagram\n   complexity reasons.  The complete signaling between UA3 and UA4\
    \ is\n   also not included.\n      UA1                      Rtr2             \
    \         UA2\n       |                        |                         |\n \
    \      |         INVITE with QoS Preconditions (R-P:3)    |\n       |------------------------------------------------->|\n\
    \       |    ********************************************  |\n       |    *  -\
    \ QoS Preconditions established UA1-UA2 *  |\n       |    *  - SIP signaling continues...\
    \            *  |\n       |    ********************************************  |\n\
    \       |         200 OK                                   |\n       |<-------------------------------------------------|\n\
    \       |          ACK                                     |\n       |------------------------------------------------->|\n\
    \       |          RTP                                     |\n       |<================================================>|\n\
    \       |    ********************************************  |\n       |    *  -UA3\
    \ sends INV with QoS Preconditions   *  |\n       |    *     to UA4 w/ RP:2; \
    \                     *  |\n       |    *  -Reservation set-up occurs between\
    \ UA3  *  |\n       |    *     and UA4                              *  |\n   \
    \    |    *  -Router 2 in Figure 2 must preempt      *  |\n       |    *     reservation\
    \ between UA1 & UA2        *  |\n       |    * ******************************************\
    \  |\n       |                                                  |\n       |  \
    \                      |     ResvErr             |\n       |                 \
    \       |------------------------>|\n       |                        |       \
    \                  |\n       |                                               \
    \   |\n       |                          BYE (Reason : ? )       |\n       |<-------------------------------------------------|\n\
    \       |                              200 OK              |\n       |------------------------------------------------->|\n\
    \       |                                                  |\n          Figure\
    \ 3. Network Preemption with obscure Reason\n   What Reason value could be inserted\
    \ above to mean \"preemption at a\n   router interface\"?  There are several choices:\
    \ 410 \"Gone\", 480\n   \"Temporarily Unavailable\", 486 \"Busy Here\", and 503\
    \ \"Service\n   Unavailable\".  The use of any of these here is questionable because\n\
    \   the session is already established.  It is further complicated if\n   there\
    \ needs to be a difference between the Reason value for an Access\n   Preemption\
    \ Event versus a Network Preemption Event.  The limits of\n   Q.850 [5] have already\
    \ been stated previously, showing there is\n   nothing in that spec to indicate\
    \ a problem in an IP network.\n   To state that all preemptions are equal is possible,\
    \ but will not\n   provide adequate information.  Therefore, another Reason Header\
    \ value\n   is necessary to differentiate the APE from the NPE.\n"
- title: 3.1.  Reason Header Requirements for Network Preemption Events
  contents:
  - "3.1.  Reason Header Requirements for Network Preemption Events\n   The following\
    \ are the requirements for the appropriate SIP signaling\n   in reaction to a\
    \ Network Preemption Event (NPE):\n      NPE_REQ#1 - create a means of informing\
    \ the far-end UA that a\n                  Network Preemption Event has occurred\
    \ in an\n                  intermediate router.\n      NPE_REQ#2 - create a means\
    \ by which all relevant SIP elements can\n                  be informed of a Network\
    \ Preemption Event to a\n                  specific session.\n   For example:\
    \ perhaps SIP Servers have incorporated a Record-Route\n   header into that session\
    \ set up.\n      NPE_REQ#3 - create a means of informing all participants in an\
    \ ad\n                  hoc conference that the primary UA (the mixer) has\n \
    \                 been preempted by a Network Preemption Event.\n      NPE_REQ#4\
    \ - create a separate description of the Network\n                  Preemption\
    \ Event relative to an Access Preemption\n                  Event in SIP.\n"
- title: 4.  Including a Hybrid Infrastructure
  contents:
  - "4.  Including a Hybrid Infrastructure\n   If User 1 is in a non-IP portion of\
    \ infrastructure (using a TDM\n   phone) in a session with a UA through a SIP\
    \ gateway, and if the TDM\n   portion had the ability to preempt the session and\
    \ indicate to the\n   SIP gateway when it did such a preemption, the SIP GW would\
    \ need to\n   be able to convey this preemption event into the SIP portion of\
    \ this\n   session just as if User 1 were a UA in the session.  Below is a\n \
    \  diagram of this:\n       **************************\n       *       TDM network\
    \      *\n       *                    +---------+\n       *   User 1         \
    \  |         |\n       *     O   ==========>| SIP GW1 |================> UA2\n\
    \       *    /|\\  ^          |         |                   |\n       *    / \\\
    \  |          +---------+                   |\n       *         |            \
    \  *                         |\n       **********|***************  |         \
    \             |\n                 |                 |   Preemption         |\n\
    \            Preemption  ---------> |--------------------->|\n               Event\
    \                   Indication\n                 Figure 4. TDM/IP Preemption Event\n"
- title: 4.1.  Hybrid Infrastructure Requirements
  contents:
  - "4.1.  Hybrid Infrastructure Requirements\n   The following are the requirements\
    \ unique to the topology involving\n   both IP infrastructure and TDM (or non-IP)\
    \ infrastructure.\n      HYB_REQ#1 - create a means of informing the far-end UA\
    \ in a dialog\n                  through a SIP gateway with a non-IP phone that\
    \ the TDM\n                  portion of the session indicated to the SIP gateway\n\
    \                  that a preemption event terminated the session.\n      HYB_REQ#2\
    \ - create a means of identifying this preemption event\n                  uniquely\
    \ with respect to an access preemption and\n                  network preemption\
    \ event.\n"
- title: 5.  Preemption Reason Header Cause Codes and Semantics
  contents:
  - "5.  Preemption Reason Header Cause Codes and Semantics\n   This document defines\
    \ the following new protocol value for the\n   protocol field of the Reason header\
    \ field in RFC 3326 [1]:\n      Preemption: The cause parameter contains a preemption\
    \ cause code.\n   We define the following preemption cause codes:\n   Value  \
    \  Default Text        Description\n     1      UA Preemption       The session\
    \ has been preempted by a UA.\n     2      Reserved Resources  The session preemption\
    \ has been\n            Preempted           initiated within the network via a\n\
    \                                purposeful RSVP preemption occurrence,\n    \
    \                            and not a link error.\n     3      Generic Preemption\
    \  This is a limited-use preemption\n                                indication\
    \ to be used on the final leg\n                                to the preempted\
    \ UA to generalize the\n                                event.\n     4      Non-IP\
    \ Preemption   The session preemption has occurred in\n                      \
    \          a non-IP portion of the infrastructure,\n                         \
    \       and this is the Reason cause code given\n                            \
    \    by the SIP Gateway.\n   Example syntax for the above preemption types are\
    \ as follows:\n      Reason: preemption ;cause=1 ;text=\"UA Preemption\"\n   \
    \   Reason: preemption ;cause=2 ;text=\"Reserved Resources Preempted\"\n     \
    \ Reason: preemption ;cause=3 ;text=\"Generic Preemption\"\n      Reason: preemption\
    \ ;cause=4 ;text=\"Non-IP Preemption\"\n   Sections 5.1, 5.2, 5.3, and 5.4 provide\
    \ use cases and extended\n   definitions for the above four cause codes with message\
    \ flow\n   diagrams.\n"
- title: 5.1.  Access Preemption Event Reason Code
  contents:
  - "5.1.  Access Preemption Event Reason Code\n   A more elaborate description of\
    \ the Access Preemption Event cause=1\n   is as follows:\n      A user agent in\
    \ a session has purposely preempted a session and is\n      informing the far-end\
    \ user agent, or user agents (if part of a\n      conference), and SIP Proxies\
    \ (if stateful of the session's\n      transactions)\n   An example usage of this\
    \ header value would be:\n      Reason: preemption ;cause=1 ;text=\"UA Preemption\"\
    \n"
- title: 5.1.1.  Access Preemption Event Call Flow
  contents:
  - "5.1.1.  Access Preemption Event Call Flow\n   Figure 5 replicates the call flow\
    \ from Figure 1, but with an\n   appropriate Reason value indication that was\
    \ proposed in Section 4.1,\n   above:\n      UA1                             \
    \    UA2                  UA3\n       |                                   |  \
    \                  |\n       |         INVITE (R-P:3)            |           \
    \         |\n       |---------------------------------->|                    |\n\
    \       |           200 OK                  |                    |\n       |<----------------------------------|\
    \                    |\n       |            ACK                    |         \
    \           |\n       |---------------------------------->|                  \
    \  |\n       |            RTP                    |                    |\n    \
    \   |<=================================>|                    |\n       |     \
    \                              |    INVITE (R-P:2)  |\n       |              \
    \                     |<-------------------|\n       |    BYE (Reason: Preemption\
    \ ;      |                    |\n       |    cause=1 ;text=\"UA Preemption\")\
    \ |                    |\n       |<----------------------------------|       \
    \             |\n       |                                   |        200 OK  \
    \    |\n       |                                   |------------------->|\n  \
    \     |         200 OK                    |                    |\n       |---------------------------------->|\
    \                    |\n       |                                   |        ACK\
    \         |\n       |                                   |<-------------------|\n\
    \       |                                   |        RTP         |\n       | \
    \                                  |<==================>|\n       |          \
    \                         |                    |\n        Figure 5. Access Preemption\
    \ with Reason: UA Preemption\n   UA1 invites UA2 to a session with the Resource\
    \ Priority level of 3\n   (levels 1 and 2 are higher in this domain).  After the\
    \ session\n   between UA1 and UA2 is established, UA3 invites UA2 to a new session\n\
    \   with an R-P of 2 (a higher priority than the current session to UA1).\n  \
    \ Local policy within this domain dictates that UA2 must preempt all\n   existing\
    \ calls of lower priority in order to accept a higher-priority\n   call.\n   UA2\
    \ sends a BYE Request message with a Reason header with a value of\n   UA Preemption.\
    \  This will inform the far-end UA (UA1) and all\n   relevant SIP elements (for\
    \ example, SIP Proxies).  The cause code is\n   unique to what is proposed in\
    \ the RSVP Preemption Event for\n   differentiation purposes.\n"
- title: 5.2.  Network Preemption Events Reason Code
  contents:
  - "5.2.  Network Preemption Events Reason Code\n   A more elaborate description\
    \ of the Reserved Resources Preempted\n   Event cause=2 is as follows:\n     \
    \ A router has preempted a reservation flow and generated a\n      reservation\
    \ error message: a ResvErr traveling downstream in RSVP,\n      and a NOTIFY in\
    \ NSIS.  The UA receiving the preemption error\n      message generates a BYE\
    \ request towards the far-side UA with a\n      Reason Header with this value\
    \ indicating that somewhere between\n      two or more UAs, a router has administratively\
    \ preempted this\n      session.\n   An example usage of this header value would\
    \ be:\n      Reason: Preemption :cause=2 ;text=\"Reserved Resources Preempted\"\
    \n"
- title: 5.2.1.  Network Preemption Event Call Flow
  contents:
  - "5.2.1.  Network Preemption Event Call Flow\n   Figure 6 replicates the call flow\
    \ from Figure 5, but with an\n   appropriate Reason value indication that was\
    \ proposed in Section 4.2,\n   above.\n      UA1                         Rtr2\
    \                      UA2\n       |                           |             \
    \            |\n       |         INVITE with QoS Preconditions (R-P:3)       |\n\
    \       |---------------------------------------------------->|\n       |    ********************************************\
    \     |\n       |    *  - QoS Preconditions established UA1-UA2 *     |\n    \
    \   |    *  - SIP signaling continues...              *   |\n       |    ********************************************\
    \     |\n       |         200 OK                                      |\n    \
    \   |<----------------------------------------------------|\n       |        \
    \  ACK                                        |\n       |---------------------------------------------------->|\n\
    \       |          RTP                                        |\n       |<===================================================>|\n\
    \       |    ********************************************     |\n       |    *\
    \  -UA3 sends INV with QoS Preconditions   *     |\n       |    *     to UA4 w/\
    \ RP:2;                      *     |\n       |    *  -Reservation set-up occurs\
    \ between UA3  *     |\n       |    *     and UA4                            \
    \  *     |\n       |    *  -Router 2 in Figure 2 must preempt      *     |\n \
    \      |    *     reservation between UA1 & UA2        *     |\n       |    *\
    \ *********************************************  |\n       |                 \
    \                                    |\n       |                           | \
    \    ResvErr             |\n       |                           |------------------------>|\n\
    \       |                           |                         |\n       |    \
    \                                                 |\n       |           BYE (Reason\
    \ : Preemption ;cause=2 ;       |\n       |                text=\"Reserved Resources\
    \ Preempted\") |\n       |<----------------------------------------------------|\n\
    \       |                         200 OK                      |\n       |---------------------------------------------------->|\n\
    \       |                                                     |\n      Figure\
    \ 6. Network Preemption with \"Reserved Resources Preempted\"\n   Above is the\
    \ call flow with Router 2 from Figure 2 included at the\n   RSVP layer sending\
    \ the Resv messages.  A complete call flow including\n   all UAs and Routers is\
    \ not included for diagram complexity reasons.\n   The signaling between UA3 and\
    \ UA4 is also not included.\n   Upon receipt of the ResvErr message with the preemption\
    \ error code,\n   UA2 can now appropriately inform UA1 why this event occurred.\
    \  This\n   BYE message will also inform all relevant SIP elements, synchronizing\n\
    \   them.  The cause value is unique to that proposed in Section 4.1 for\n   Access\
    \ Preemption Events for differentiation purposes.\n"
- title: 5.3.  Generic Preemption Event Reason Code
  contents:
  - "5.3.  Generic Preemption Event Reason Code\n   A more elaborate description of\
    \ the Generic Preemption Event cause=3\n   is as follows:\n      This cause code\
    \ is for infrastructures that do not wish to provide\n      the preempted UA with\
    \ a more precise reason than just\n      \"preemption\".  It is possible that\
    \ UAs will have code that will\n      indicate the type of preemption event that\
    \ is contained in the\n      Reason header, and certain domains have expressed\
    \ this as not\n      being optimal, and wanted to generalize the indication. \
    \ This MUST\n      NOT be the initial indication within these domains, as valuable\n\
    \      traffic analysis and other NM applications will be generalized as\n   \
    \   well.  If this cause value is to be implemented, it SHOULD only be\n     \
    \ done at the final SIP Proxy in such a way that the cause value\n      indicating\
    \ which type of preemption event actually occurred is\n      changed to this generalized\
    \ preemption indication to be received\n      by the preempted UA.\n   An example\
    \ usage of this header value would be:\n      Reason: preemption ;cause=3 ;text=\"\
    Generic Preemption\"\n"
- title: 5.4.  Non-IP Preemption Event Reason Code
  contents:
  - "5.4.  Non-IP Preemption Event Reason Code\n   A more elaborate description of\
    \ the Non-IP Preemption Event cause=4\n   is as follows:\n      A session exists\
    \ in a hybrid IP/non-IP infrastructure and the\n      preemption event occurs\
    \ in the non-IP portion, and was indicated\n      by that portion that this call\
    \ termination was due to preemption.\n      This is the indication that would\
    \ be generated by a SIP Gateway\n      towards the SIP UA that is being preempted,\
    \ traversing whichever\n      SIP Proxies are involved in session signaling (a\
    \ question of\n      server state).\n   An example usage of this header value\
    \ would be:\n      Reason: preemption ;cause=4 ;text=\"Non-IP Preemption\"\n"
- title: 5.4.1.  Non-IP Preemption Event Call Flow
  contents:
  - "5.4.1.  Non-IP Preemption Event Call Flow\n   Figure 7 is a simple call flow\
    \ diagram of the Non-IP Preemption\n   Event.\n                              \
    \                             ............\n      UA1                        \
    \           SIP GW1        .  User3   .\n       |                            \
    \           |           .          .\n       |         INVITE (R-P:1)        \
    \        |           .          .\n       |-------------------------------------->|\
    \           .  Non-IP  .\n       |           200 OK                      |   \
    \        .          .\n       |<--------------------------------------|      \
    \     .  Network .\n       |            ACK                        |         \
    \  .          .\n       |-------------------------------------->|           .\
    \          .\n       |            RTP                        |           .   \
    \       .\n       |<=====================================>|           .      \
    \    .\n       |                                       |           .         \
    \ .\n       |    BYE (Reason: Preemption ;          |<==Preemption Indication\n\
    \       |    cause=4 ;text=\"Non-IP Preemption\") |           .          .\n \
    \      |<--------------------------------------|           .          .\n    \
    \   |                                       |           ............\n       \
    \           Figure 7. Non-IP Preemption Flow\n   In this case, UA1 signals User3\
    \ to a session.  Once established,\n   there is a preemption event in the non-IP\
    \ portion of the\n   session/call, and the TDM portion has the ability to inform\
    \ the SIP\n   GW of this type of event.  This non-IP signal can be translated\
    \ into\n   SIP signaling (into the BYE session termination message).  Within\n\
    \   this BYE, there should be a Reason header indicating such an event to\n  \
    \ synchronize all SIP elements.\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   Eavesdropping on this header field should not\
    \ prevent proper\n   operation of the SIP protocol, although some domains utilizing\
    \ this\n   mechanism for notifying and synchronizing SIP elements will likely\n\
    \   want the integrity to be assured.  It is therefore RECOMMENDED that\n   integrity\
    \ protection be applied when using this header to prevent\n   unwanted changes\
    \ to the field and snooping of the messages.  The\n   accepted choices for providing\
    \ integrity protection in SIP are TLS\n   and S/MIME.\n"
- title: 7.  IANA Considerations
  contents:
  - "7.  IANA Considerations\n   This document adds to one existing IANA Registry\
    \ and creates one new\n   Registry.  The existing IANA Registry for the SIP Reason\
    \ Header is as\n   follows:\n   Protocol Value   Protocol Cause            Reference\n\
    \   --------------   --------------            ---------\n   SIP             \
    \ Status code               RFC 3261\n   Q.850            Cause value in decimal\
    \    ITU-T Q.850\n   This document adds to that Registry with the following entry\n\
    \   (including the '*' comment):\n   Protocol Value   Protocol Cause         \
    \   Reference\n   --------------   --------------            ---------\n   Preemption\
    \       Cause value in decimal*   RFC 4411\n   * See the separate \"Preemption\"\
    \ Registry for default reason-text\n     strings.\n   The cause values created\
    \ by the Preemption Protocol namespace in this\n   document are defined in Section\
    \ 7.1.  Each cause value has a Reason-\n   text string as a general description\
    \ of what the cause value is for.\n   This is shown for the existing Reason header\
    \ in Section 2 of RFC\n   3326.  Before this document, the Reason-text was taken\
    \ from the SIP\n   Response code string from all SIP Response codes, or the default\n\
    \   description from Q.850 cause codes.  Currently, there is no place to\n   register\
    \ new reason-text strings other than from those two sources.\n   Because this\
    \ document defines a new Reason header protocol namespace,\n   a new IANA Registry\
    \ is created in Section 7.2 just for this and\n   future Reason header protocol\
    \ namespaces (other than SIP Response\n   codes or Q.850 cause values) to register\
    \ their respective general\n   descriptive text strings.  These text strings are\
    \ non-binding and\n   merely the default for human understanding, but they are\
    \ deemed\n   important enough to have their own Registry.\n"
- title: 7.1.  "Preemption" Namespace Registry
  contents:
  - "7.1.  \"Preemption\" Namespace Registry\n   RFC 4411 creates the new SIP \"Reason\
    \ Header\" [1] protocol namespace:\n   \"Preemption\", with 4 defined cause codes:\n\
    \      In instances where this namespace is used to indicate preemption\n    \
    \  at a UA, the following syntax shall be used (the reason-text is a\n      default\
    \ string; it is not mandatory, and may be different):\n         Reason: preemption\
    \ ;cause=1 ;text=\"UA Preemption\"\n         Section 5.1 of this document describes\
    \ in detail the semantics\n         of this cause code.\n         The default\
    \ text above is part of a new IANA Registry for\n         default text strings\
    \ for any new protocol namespace cause code.\n         See Section 7.2 for details.\n\
    \      In instances where this namespace is used to indicate preemption\n    \
    \  because an RSVP ResvErr message was received at a SIP UA, the\n      following\
    \ syntax shall be used (the reason-text is a default\n      string; it is not\
    \ mandatory, and may be different):\n      Reason: preemption ;cause=2 ;text=\"\
    Reserved Resources Preempted\"\n         Section 5.2 of this document describes\
    \ in detail the semantics\n         of this cause code.\n         The default\
    \ text above is part of a new IANA Registry for\n         default text strings\
    \ for any new protocol namespace cause code.\n         See section 7.2 for details.\n\
    \      In instances where this namespace is used to indicate a\n      generalized\
    \ preemption event to the destination UA from a Proxy\n      that modifies the\
    \ Reason value only during this last SIP hop, the\n      following syntax shall\
    \ be used (the reason-text is a default\n      string; it is not mandatory, and\
    \ may be different):\n         Reason: preemption ;cause=3 ;text=\"Generic Preemption\"\
    \n         Section 5.3 of this document describes in detail the semantics\n  \
    \       of this cause code.\n         The default text above is part of a new\
    \ IANA Registry for\n         default text strings for any new protocol namespace\
    \ cause code.\n         See Section 7.2 for details.\n      In instances where\
    \ this namespace is used to indicate preemption\n      from a non-IP portion of\
    \ a call leg, a SIP Gateway shall use the\n      following syntax to inform the\
    \ SIP infrastructure of this event\n      (the reason-text is a default string;\
    \ it is not mandatory, and may\n      be different):\n         Reason: preemption\
    \ ;cause=4 ;text=\" Non-IP Preemption\"\n         Section 5.4 of this document\
    \ describes in detail the semantics\n         of this cause code.\n         The\
    \ default text above is part of a new IANA Registry for\n         default text\
    \ strings for any new protocol namespace cause code.\n         See Section 7.2\
    \ for details.\n   Additional definitions of the preemption namespace and its\
    \ cause\n   codes MUST be defined in Standards Track documents.\n"
- title: 7.2.  Default Reason-Text IANA Registry for the SIP Reason Header
  contents:
  - "7.2.  Default Reason-Text IANA Registry for the SIP Reason Header\n   Below is\
    \ a new IANA Registry for SIP Reason Header reason-text\n   strings, associated\
    \ with their respective protocol type and Reason-\n   param cause values.  Per\
    \ RFC 3326, the Reason-text string is a quoted\n   default string with only human\
    \ understandability meant.  These\n   strings can be changed by local policy.\n\
    \                Reason-\n   Protocol     param      Reason-Text         Reference\n\
    \   --------     -------    ------------        ---------\n   Preemption   Cause=1\
    \    UA Preemption       RFC 4411\n   Preemption   Cause=2    Reserved Resources\
    \  RFC 4411\n                             Preempted\n   Preemption   Cause=3 \
    \   Generic Preemption  RFC 4411\n   Preemption   Cause=4    Non-IP Preemption\
    \   RFC 4411\n"
- title: 8.  Contributions
  contents:
  - "8.  Contributions\n   The following individuals contributed to this effort:\n\
    \      Subhasri Dhesikan\n      Gonzalo Camarillo\n      Dave Oran\n   The author\
    \ thanks these individuals greatly for their aid in this\n   effort.\n"
- title: 9.  Acknowledgements
  contents:
  - "9.  Acknowledgements\n   To Haluk Keskiner for providing a valued sanity check.\
    \  To Dean\n   Willis, Rohan Mahy, and Allison Mankin for their belief in and\n\
    \   backing of this effort.  To Adam Roach and Arun Kumar for helpful\n   comments\
    \ to this document.\n   Thanks to Mike Pierce for helpful comments and catching\
    \ a flaw in\n   this spec late in the process (before it was too late).\n"
- title: 10.  References
  contents:
  - '10.  References

    '
- title: 10.1.  Normative References
  contents:
  - "10.1.  Normative References\n   [1] Schulzrinne, H., Oran, D., and G. Camarillo,\
    \ \"The Reason Header\n       Field for the Session Initiation Protocol (SIP)\"\
    , RFC 3326,\n       December 2002.\n   [2] Rosenberg, J., Schulzrinne, H., Camarillo,\
    \ G., Johnston, A.,\n       Peterson, J., Sparks, R., Handley, M., and E. Schooler,\
    \ \"SIP:\n       Session Initiation Protocol\", RFC 3261, June 2002.\n   [3] Camarillo,\
    \ G., Marshall, W., and J. Rosenberg, \"Integration of\n       Resource Management\
    \ and Session Initiation Protocol (SIP)\", RFC\n       3312, October 2002.\n \
    \  [4] Schulzrinne, H. and J. Polk, \"Communications Resource-Priority\n     \
    \  Header in the Session Initiation Protocol (SIP)\", RFC 4412,\n       February\
    \ 2006.\n   [5] ITU-T Recommendation Q.850 (1993)\n   [6] Bradner, S., \"Key words\
    \ for use in RFCs to Indicate Requirement\n       Levels\", BCP 14, RFC 2119,\
    \ March 1997.\n   [7] Braden, R., Zhang, L., Berson, S., Herzog, S., and S. Jamin,\n\
    \       \"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional\n     \
    \  Specification\", RFC 2205, September 1997.\n"
- title: 10.2.  Informative References
  contents:
  - "10.2.  Informative References\n   [8] J. Manner, G. Karagiannis, A. McDonald,\
    \ S. Van den Bosch, \"NSLP\n       for Quality-of-Service signalling\", Work in\
    \ Progress, September\n       2005.\n"
- title: Author Information
  contents:
  - "Author Information\n   James M. Polk\n   Cisco Systems\n   2200 East President\
    \ George Bush Turnpike\n   Richardson, Texas 75082 USA\n   EMail: jmpolk@cisco.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2006).\n   This\
    \ document is subject to the rights, licenses and restrictions\n   contained in\
    \ BCP 78, and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET\n   ENGINEERING\
    \ TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,\n   INCLUDING BUT NOT\
    \ LIMITED TO ANY WARRANTY THAT THE USE OF THE\n   INFORMATION HEREIN WILL NOT\
    \ INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY OR FITNESS\
    \ FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is provided by the IETF\n\
    \   Administrative Support Activity (IASA).\n"
