- title: __initial_text__
  contents:
  - '                       Multi-Link Subnet Issues

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The IETF Trust (2007).\n"
- title: Abstract
  contents:
  - "Abstract\n   There have been several proposals around the notion that a subnet\
    \ may\n   span multiple links connected by routers.  This memo documents the\n\
    \   issues and potential problems that have been raised with such an\n   approach.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................2\n\
    \   2. Issues ..........................................................3\n  \
    \    2.1. IP Model ...................................................3\n    \
    \  2.2. TTL/Hop Limit Issues .......................................4\n      2.3.\
    \ Link-scoped Multicast and Broadcast ........................6\n      2.4. Duplicate\
    \ Address Detection Issues .........................7\n   3. Security Considerations\
    \ .........................................8\n   4. Recommendations .................................................9\n\
    \      4.1. IP Link Model ..............................................9\n  \
    \    4.2. IPv6 Address Assignment ...................................10\n    \
    \  4.3. Duplicate Address Detection Optimizations .................12\n   5. Normative\
    \ References ...........................................12\n   6. Informative\
    \ References .........................................13\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The original IPv4 address definition [RFC791] consisted\
    \ of a Network\n   field, identifying a network number, and a Local Address field,\n\
    \   identifying a host within that network.  As organizations grew to\n   want\
    \ many links within their network, their choices were (from\n   [RFC950]) to:\n\
    \      1. Acquire a distinct Internet network number for each cable;\n       \
    \  subnets are not used at all.\n      2. Use a single network number for the\
    \ entire organization, but\n         assign host numbers without regard to which\
    \ LAN a host is on\n         (\"transparent subnets\").\n      3. Use a single\
    \ network number, and partition the host address\n         space by assigning\
    \ subnet numbers to the LANs (\"explicit\n         subnets\").\n   [RFC925] was\
    \ a proposal for option 2 that defined a specific type of\n   Address Resolution\
    \ Protocol (ARP) proxy behavior, where the\n   forwarding plane had the properties\
    \ of decrementing the Time To Live\n   (TTL) to prevent loops when forwarding,\
    \ not forwarding packets\n   destined to 255.255.255.255, and supporting subnet\
    \ broadcast by\n   requiring that the ARP-based bridge maintain a list of recent\n\
    \   broadcast packets.  This approach was never standardized, although\n   [RFC1027]\
    \ later documented an implementation of a subset of [RFC925].\n   Instead, the\
    \ IETF standardized option 3 with [RFC950], whereby hosts\n   were required to\
    \ learn a subnet mask, and this became the IPv4 model.\n   Over the recent past,\
    \ there have been several newer protocols\n   proposing to extend the notion of\
    \ a subnet to be able to span\n   multiple links, similar to [RFC925].\n   Early\
    \ versions of the IPv6 scoped address architecture [SCOPID]\n   proposed a subnet\
    \ scope above the link scope, to allow for multi-link\n   subnets.  This notion\
    \ was rejected by the WG due to the issues\n   discussed in this memo, and as\
    \ a result the final version [RFC4007]\n   has no such notion.\n   There was also\
    \ a proposal to define multi-link subnets [MLSR] for\n   IPv6.  However, this\
    \ notion was abandoned by the IPv6 WG due to the\n   issues discussed in this\
    \ memo, and that proposal was replaced by a\n   different mechanism that preserves\
    \ the notion that a subnet spans\n   only one link [RFC4389].\n   However, other\
    \ WGs continued to allow for this concept even though it\n   had been rejected\
    \ in the IPv6 WG.  Mobile IPv6 [RFC3775] allows\n   tunnels to mobile nodes to\
    \ use the same subnet as a home link, with\n   the Home Agent doing layer 3 forwarding\
    \ between them.\n   The notion also arises in Mobile Ad-hoc NETworks (MANETs)\
    \ with\n   proposals that an entire MANET is a subnet, with routers doing layer\n\
    \   3 forwarding within it.\n   The use of multi-link subnets has also been considered\
    \ by other\n   working groups, including NetLMM, 16ng, and Autoconf, and by other\n\
    \   external organizations such as WiMax.\n   In this memo, we document the issues\
    \ raised in the IPv6 WG which\n   motivated the abandonment of the multi-link\
    \ subnet concept, so that\n   designers of other protocols can (and should) be\
    \ aware of the issues.\n   The key words \"MUST\", \"RECOMMENDED\", and \"SHOULD\"\
    \ in this document\n   are to be interpreted as described in [RFC2119].\n"
- title: 2.  Issues
  contents:
  - '2.  Issues

    '
- title: 2.1.  IP Model
  contents:
  - "2.1.  IP Model\n   The term \"link\" is generally used to refer to a topological\
    \ area\n   bounded by routers that decrement the IPv4 TTL or IPv6 Hop Limit when\n\
    \   forwarding the packet.  A link-local address prefix is defined in\n   both\
    \ IPv4 [RFC3927] and IPv6 [RFC4291].\n   The term \"subnet\" is generally used\
    \ to refer to a topological area\n   that uses the same address prefix, where\
    \ that prefix is not further\n   subdivided except into individual addresses.\n\
    \   In December 1995, the original IP Version 6 Addressing Architecture\n   [RFC1884]\
    \ was published, stating: \"IPv6 continues the IPv4 model that\n   a subnet is\
    \ associated with one link.  Multiple subnets may be\n   assigned to the same\
    \ link.\"\n   Thus, it explicitly acknowledges that the current IPv4 model has\
    \ been\n   that a subnet is associated with one link and that IPv6 does not\n\
    \   change this model.  Furthermore, a subnet is sometimes considered to\n   be\
    \ only a subset of a link, when multiple subnets are assigned to the\n   same\
    \ link.\n   The IPv6 addressing architecture has since been updated three times,\n\
    \   first in July 1998 [RFC2373], then April 2003 [RFC3513], and finally\n   in\
    \ February 2006 [RFC4291].  All updates include the language:\n   \"Currently\
    \ IPv6 continues the IPv4 model that a subnet prefix is\n   associated with one\
    \ link.  Multiple subnet prefixes may be assigned\n   to the same link.\"\n  \
    \ Clearly, the notion of a multi-link subnet would be a change to the\n   existing\
    \ IP model.\n   Similarly, the Mobility Related Terminology [RFC3753] defines\
    \ a\n   Foreign subnet prefix as \"a bit string that consists of some number\n\
    \   of initial bits of an IP address which identifies a node's foreign\n   link\
    \ within the Internet topology\" with a similar definition for a\n   Home subnet\
    \ prefix.  These both state that the subnet prefix\n   identifies a (singular)\
    \ link.\n"
- title: 2.2.  TTL/Hop Limit Issues
  contents:
  - "2.2.  TTL/Hop Limit Issues\n   Since a link is bounded by routers that decrement\
    \ the IPv4 TTL or\n   IPv6 Hop Limit, there may be issues with applications and\
    \ protocols\n   that make any assumption about the relationship between TTL/Hop\
    \ Limit\n   and subnet prefix.\n   There are two main cases that may arise.  Some\
    \ applications and\n   protocols may send packets with a TTL/Hop Limit of 1. \
    \ Other\n   applications and protocols may send packets with a TTL/Hop Limit of\n\
    \   255 and verify that the value is 255 on receipt.  Both are ways of\n   limiting\
    \ communication to within a single link, although the effects\n   of these two\
    \ approaches are quite different.  Setting TTL/Hop Limit\n   to 1 ensures that\
    \ packets that are sent do not leave the link, but it\n   does not prevent an\
    \ off-link attacker from sending a packet that can\n   reach the link.  Checking\
    \ that TTL/Hop Limit is 255 on receipt\n   prevents a receiver from accepting\
    \ packets from an off-link sender,\n   but it doesn't prevent a sent packet from\
    \ being forwarded off-link.\n   As for assumptions about the relationship between\
    \ TTL/Hop Limit and\n   subnet, let's look at some example references familiar\
    \ to many\n   protocol and application developers.\n   Stevens' \"Unix Network\
    \ Programming\", 2nd ed. [UNP], states on page\n   490, \"A TTL of 0 means node-local,\
    \ 1 means link-local\" (this of\n   course being true by the definition of link).\
    \  Then page 498 states,\n   regarding IP_MULTICAST_TTL and IPV6_MULTICAST_HOPS,\
    \ \"If this is not\n   specified, both default to 1, which restricts the datagram\
    \ to the\n   local subnet.\"  Here, Unix programmers learn that TTL=1 packets\
    \ are\n   restricted to a subnet (as opposed to a link).  This is typical of\n\
    \   many documents that use the terms interchangeably due to the IP model\n  \
    \ described earlier.\n   Similarly, \"TCP/IP Illustrated\", Volume 1 [TCPILL],\
    \ states on page\n   182: \"By default, multicast datagrams are sent with a TTL\
    \ of 1.  This\n   restricts the datagram to the same subnet.\"\n   Steve Deering's\
    \ original multicast README file [DEERING] contained\n   the statement \"multicast\
    \ datagrams with initial TTL 1 are restricted\n   to the same subnet\", and similar\
    \ statements now appear in many\n   vendors' documentation, including documentation\
    \ for Windows (e.g.,\n   [TCPIP2K]) and Linux (e.g., [LINUX] says a TTL of 1 is\
    \ \"restricted to\n   the same subnet.  Won't be forwarded by a router.\")\n \
    \  The above are only some examples.  There is no shortage of places\n   where\
    \ application developers are being taught that a subnet is\n   confined to a single\
    \ link, and so we must expect that arbitrary\n   applications may embed such assumptions.\n\
    \   Some examples of protocols today that are known to embed some\n   assumption\
    \ about the relationship between TTL and subnet prefix are\n   the following:\n\
    \      o  Neighbor Discovery (ND) [RFC2461] uses messages with Hop Limit\n   \
    \      255 checked on receipt, to resolve the link-layer address of\n        \
    \ any IP address in the subnet.\n      o  Older clients of Apple's Bonjour [MDNS]\
    \ use messages with TTL\n         255 checked on receipt, and only respond to\
    \ queries from\n         addresses in the same subnet.  (Note that multi-link\
    \ subnets do\n         not necessarily break this, as this behavior is to constrain\n\
    \         communication to within a subnet, where a subnet is only a\n       \
    \  subset of a link.  However, it will not work across a multi-\n         link\
    \ subnet.)\n   Some other examples of protocols today that are known to use a\
    \ TTL 1\n   or 255, but do not appear to explicitly have any assumption about\
    \ the\n   relationship to subnet prefixes (other than the well-known link-local\n\
    \   prefix) include the following:\n      o  Link-Local Multicast Name Resolution\
    \ [LLMNR] uses a TTL/Hop\n         Limit of 1 for TCP.\n      o  Multicast Listener\
    \ Discovery (MLD) [RFC3810] uses a Hop Limit\n         of 1.\n      o  Reverse\
    \ tunneling for Mobile IPv4 [RFC3024] uses TTL 255\n         checked on receipt\
    \ for Registration Requests sent to foreign\n         agents.\n      o  [RFC3927]\
    \ discusses the use of TTL=1 and TTL=255 within the\n         IPv4 link-local\
    \ address prefix.\n   It is unknown whether any implementations of such protocols\
    \ exist\n   that add such assumptions about the relationship to subnet prefixes\n\
    \   for other reasons.\n"
- title: 2.3.  Link-scoped Multicast and Broadcast
  contents:
  - "2.3.  Link-scoped Multicast and Broadcast\n   Because multicast routing is not\
    \ ubiquitous, the notion of a subnet\n   that spans multiple links tends to result\
    \ in cases where multicast\n   does not work across the subnet.  Per [RFC2644],\
    \ the default behavior\n   is that routers do not forward directed broadcast packets\
    \ either, nor\n   do they forward limited broadcasts (see [RFC1812], Section 4.2.2.11).\n\
    \   There are many protocols and applications today that use link-scoped\n   multicast.\
    \  The list of such applications and protocols that have\n   been assigned their\
    \ own link-scoped multicast group address (and may\n   also have assumptions about\
    \ the TTL/Hop Limit as noted above) can be\n   found at:\n      http://www.iana.org/assignments/multicast-addresses\n\
    \      http://www.iana.org/assignments/ipv6-multicast-addresses\n   In addition,\
    \ an arbitrarily large number of other applications may be\n   using the all-1's\
    \ broadcast address, or the all-hosts link-scoped\n   multicast address, rather\
    \ than their own group address.\n   The well-known examples of protocols using\
    \ link-scoped multicast or\n   broadcast generally fall into one of the following\
    \ groups:\n      o  Routing protocols: Distance Vector Multicast Routing Protocol\n\
    \         (DVMRP) [RFC1075], OSPF [RFC2328], RIP  [RFC2453][RFC2080],\n      \
    \   Enhanced Interior Gateway Routing Protocol (EIGRP) [EIGRP],\n         etc.\
    \  These protocols exchange routes to subnet prefixes.\n      o  Address management\
    \ protocols: Neighbor Discovery, DHCPv4\n         [RFC2131], Dynamic Host Configuration\
    \ Protocol for IPv6\n         (DHCPv6) [RFC3315], Teredo [RFC4380], etc.  By their\
    \ nature,\n         this group tends to embed assumptions about the relationship\n\
    \         between a link and a subnet prefix.  For example, ND uses\n        \
    \ link-scoped multicast to resolve the link-layer address of an\n         IP address\
    \ in the same subnet prefix, and to do duplicate\n         address detection (see\
    \ Section 2.4 below) within the subnet.\n         DHCP uses link-scoped multicast\
    \ or broadcast to obtain an\n         address in the subnet.  Teredo states that\
    \ the Teredo IPv4\n         Discovery Address is \"an IPv4 multicast address used\
    \ to\n         discover other Teredo clients on the same IPv4 subnet.  The\n \
    \        value of this address is 224.0.0.253\", which is a link-scoped\n    \
    \     multicast address.  It also says that \"the client MUST silently\n     \
    \    discard all local discovery bubbles [...] whose IPv4 source\n         address\
    \ does not belong to the local IPv4 subnet\".\n      o  Service discovery protocols:\
    \ Simple Service Discovery Protocol\n         (SSDP) [SSDP], Bonjour, WS-Discovery\
    \ [WSDISC], etc.  These\n         often do not define any explicit assumption\
    \ about the\n         relationship to subnet prefix.\n      o  Name resolution\
    \ protocols: NetBios [RFC1001], Bonjour, LLMNR,\n         etc.  Most often these\
    \ do not define any explicit assumption\n         about the relationship to subnet\
    \ prefix, but Bonjour only\n         responds to queries from addresses within\
    \ the same subnet\n         prefix.\n   Note that protocols such as Bonjour and\
    \ Teredo that drop packets that\n   don't come from an address within the subnet\
    \ are not necessarily\n   broken by multi-link subnets, as this behavior is meant\
    \ to constrain\n   the behavior to within a subnet, when a link is larger than\
    \ a single\n   subnet.\n   However, regardless of whether any assumption about\
    \ the relationship\n   to subnet prefixes exists, all protocols mentioned above\
    \ or on the\n   IANA assignments lists will not work across a multi-link subnet\n\
    \   without protocol-specific proxying functionality in routers, and\n   adding\
    \ proxying for an arbitrary number of protocols and applications\n   does not\
    \ scale.  Furthermore, it may hinder the development and use\n   of future protocols\
    \ using link-scoped multicast.\n"
- title: 2.4.  Duplicate Address Detection Issues
  contents:
  - "2.4.  Duplicate Address Detection Issues\n   Duplicate Address Detection (DAD)\
    \ uses link-scoped multicast in IPv6\n   and link-scoped broadcast in IPv4 and\
    \ so has the issues mentioned in\n   Section 2.3 above.\n   In addition, [RFC2462]\
    \ contains the statement:\n      \"Thus, for a set of addresses formed from the\
    \ same interface\n      identifier, it is sufficient to check that the link-local\
    \ address\n      generated from the identifier is unique on the link.  In such\n\
    \      cases, the link-local address MUST be tested for uniqueness, and\n    \
    \  if no duplicate address is detected, an implementation MAY choose\n      to\
    \ skip Duplicate Address Detection for additional addresses\n      derived from\
    \ the same interface identifier.\"\n   The last possibility, sometimes referred\
    \ to as Duplicate Interface\n   Identifier Detection (DIID), has been a matter\
    \ of much debate, and\n   the current work in progress [2462BIS] states:\n   \
    \   Each individual unicast address SHOULD be tested for uniqueness.\n      Note\
    \ that there are implementations deployed that only perform\n      Duplicate Address\
    \ Detection for the link-local address and skip\n      the test for the global\
    \ address using the same interface\n      identifier as that of the link-local\
    \ address.  Whereas this\n      document does not invalidate such implementations,\
    \ this kind of\n      \"optimization\" is NOT RECOMMENDED, and new implementations\
    \ MUST\n      NOT do that optimization.\n   The existence of such implementations\
    \ also causes problems with\n   multi-link subnets.  Specifically, a link-local\
    \ address is only valid\n   within a link, and hence is only tested for uniqueness\
    \ within a\n   single link.  If the same interface identifier is then assumed\
    \ to be\n   unique across all links within a multi-link subnet, address conflicts\n\
    \   can occur.\n"
- title: 3.  Security Considerations
  contents:
  - "3.  Security Considerations\n   The notion of multi-link subnets can cause problems\
    \ with any security\n   protocols that either rely on the assumption that a subnet\
    \ only spans\n   a single link or can leave gaps in the security solution where\n\
    \   protocols are only defined for use on a single link.\n   Secure Neighbor Discovery\
    \ (SEND) [RFC3971], in particular, is\n   currently only defined within a single\
    \ link.  If a subnet were to\n   span multiple links, SEND would not work as currently\
    \ specified,\n   since it secures Neighbor Discovery messages that include link-layer\n\
    \   addresses, and if forwarded to other links, the link-layer address of\n  \
    \ the sender will be different.  This same problem also exists in cases\n   where\
    \ a subnet does not span multiple links but where Neighbor\n   Discovery is proxied\
    \ within a link.  Section 9 of [RFC4389] discusses\n   some possible future directions\
    \ in this regard.\n   Furthermore, as noted above some applications and protocols\
    \ (ND,\n   Bonjour, Mobile IPv4, etc.) mitigate against off-link spoofing\n  \
    \ attempts by requiring a TTL or Hop Limit of 255 on receipt.  If this\n   restriction\
    \ were removed, or if alternative protocols were used, then\n   off-link spoofing\
    \ attempts would become easier, and some alternative\n   way to mitigate such\
    \ attacks would be needed.\n"
- title: 4.  Recommendations
  contents:
  - '4.  Recommendations

    '
- title: 4.1.  IP Link Model
  contents:
  - "4.1.  IP Link Model\n   There are two models that do not have the issues pointed\
    \ out in the\n   rest of the document.\n   The IAB recommends that protocol designers\
    \ use one of the following\n   two models:\n      o  Multi-access link model:\
    \ In this model, there can be multiple\n         nodes on the same link, including\
    \ zero or more routers.  Data\n         packets sent to the IPv4 link-local broadcast\
    \ address\n         (255.255.255.255) or to a link-local multicast address can\
    \ be\n         received by all other interested nodes on the link.  Two nodes\n\
    \         on the link are able to communicate without any IPv4 TTL or\n      \
    \   IPv6 Hop Limit decrement.  There can be any number of layer 2\n         devices\
    \ (bridges, switches, access points, etc.) in the middle\n         of the link.\n\
    \      o  Point-to-point link model: In this model, there are exactly two\n  \
    \       nodes on the same link.  Data packets sent to the IPv4 link-\n       \
    \  local broadcast address or to a link-local multicast address\n         can\
    \ be received by the other node on the link.  The two nodes\n         are able\
    \ to communicate without any IPv4 TTL or IPv6 Hop Limit\n         decrement. \
    \ There can be any number of layer 2 devices\n         (bridges, switches, access\
    \ points, etc.) in the middle of the\n         link.\n   A variant of the multi-access\
    \ link model, which has fewer issues, but\n   still some, is the following:\n\
    \      o  Non-broadcast multi-access (NBMA) model: Same as the multi-\n      \
    \   access link model, except that no broadcast or multicast\n         packets\
    \ can be sent, even between two nodes on the same link.\n         As a result,\
    \ no protocols or applications that make use of\n         broadcast or multicast\
    \ will work.\n   Links that appear as NBMA links at layer 3 are problematic. \
    \ Instead,\n   if a link is an NBMA link at layer 2, then protocol designers should\n\
    \   define some mechanism such that it appears as either the multi-access\n  \
    \ link model or point-to-point link model at layer 3.\n   One use of an NBMA link\
    \ is when the link itself is intended as a\n   wide-area link (e.g., a tunnel\
    \ such as 6to4 [RFC3056]) where none of\n   the groups of functionality in Section\
    \ 2.3 are required across the\n   wide area.  Admittedly, the definition of wide-area\
    \ is somewhat\n   subjective.  Support for multicast on a wide-area link would\
    \ be\n   analogous to supporting multicast routing across a series of local-\n\
    \   area links.  The issues discussed in Section 2.3 will arise, but may\n   be\
    \ acceptable over a wide area until multicast routing is also\n   supported.\n\
    \   Note that the distinction of whether or not a link is a tunnel is\n   orthogonal\
    \ to the choice of model; there exist tunnel links for all\n   link models mentioned\
    \ above.\n   A multi-link subnet model should be avoided.  IETF working groups\n\
    \   using, or considering using, multi-link subnets today should\n   investigate\
    \ moving to one of the other models.  For example, the\n   Mobile IPv6 WG should\
    \ investigate having the Home Agent not decrement\n   the Hop Limit, and forward\
    \ multicast traffic.\n   When considering changing an existing multi-link subnet\
    \ solution to\n   another model, the following issues should be considered:\n\
    \   Loop prevention: If physical loops cannot exist within the subnet,\n     \
    \ then removing the TTL/Hop Limit decrement is not an issue.\n      Otherwise,\
    \ protocol designers can (for example) retain the\n      decrement but use a separate\
    \ prefix per link, or use some form of\n      bridging protocol instead (e.g.,\
    \ [BRIDGE] or [RBRIDGE]).\n   Limiting broadcast (including all-hosts multicast):\
    \ If there is no\n      efficiency requirement to prevent broadcast from going\
    \ to other\n      on-link hosts, then flooding it within the subnet is not an\
    \ issue.\n      Otherwise, protocol designers can (for example) use a separate\n\
    \      prefix per link, or flood broadcast other than ARP within the\n      subnet\
    \ (ARP is covered below in Section 4.3).\n   Limiting the scope of other multicast\
    \ (including IPv6 Neighbor\n      Discovery): If there is no efficiency requirement\
    \ to prevent\n      multicast from going to other on-link hosts, then flooding\n\
    \      multicast within the subnet is not an issue.  Otherwise, protocol\n   \
    \   designers can (for example) use a separate prefix per link, or use\n     \
    \ Internet Group Management Protocol (IGMP)/MLD snooping [RFC4541]\n      instead.\n"
- title: 4.2.  IPv6 Address Assignment
  contents:
  - "4.2.  IPv6 Address Assignment\n   In IPv6, the Prefix Information Option in a\
    \ Router Advertisement (RA)\n   is defined for use by a router to advertise an\
    \ on-link prefix.  That\n   is, it indicates that a prefix is assigned to the\
    \ link over which the\n   RA is sent/received.  That is, the router and the node\
    \ both have an\n   on-link route in their routing table (or on-link Prefix List,\
    \ in the\n   conceptual model of a host in [RFC2461]), and any addresses used\
    \ in\n   the prefix are assigned to an interface (on any node) attached to\n \
    \  that.\n   In contrast, DHCPv6 Prefix Delegation (DHCP-PD) [RFC3633] is defined\n\
    \   for use by a client to request a prefix for use on a different link.\n   Section\
    \ 12.1 of RFC 3633 states:\n      Upon the receipt of a valid Reply message, for\
    \ each IA_PD the\n      requesting router assigns a subnet from each of the delegated\n\
    \      prefixes to each of the links to which the associated interfaces\n    \
    \  are attached, with the following exception: the requesting router\n      MUST\
    \ NOT assign any delegated prefixes or subnets from the\n      delegated prefix(es)\
    \ to the link through which it received the\n      DHCP message from the delegating\
    \ router.\n   Hence, the upstream router has a route in its routing table that\
    \ is\n   not on-link, but points to the client; the prefix is assigned to a\n\
    \   link other than the one over which DHCP-PD was done; and any\n   addresses\
    \ used in the prefix are assigned to an interface (on any\n   node) attached to\
    \ that other link.\n   The IAB believes that the distinction between these two\
    \ cases\n   (assigning a prefix to the same link vs. another link) is important,\n\
    \   and that the IETF protocols noted above are appropriate for the two\n   scenarios\
    \ noted.  The IAB recommends that other protocol designers\n   remain consistent\
    \ with the IETF-defined scopes of these protocols\n   (e.g., not using DHCP-PD\
    \ to assign a prefix to the same link, or\n   using RAs to assign a prefix to\
    \ another link).\n   In addition, the Prefix Information Option contains an L\
    \ (on-link)\n   flag.  Normally, this flag is set, indicating that this prefix\
    \ can be\n   used for on-link determination.  When not set, the advertisement\n\
    \   makes no statement about on-link or off-link properties of the\n   prefix.\
    \  For instance, the prefix might be used for address\n   configuration with some\
    \ of the addresses belonging to the prefix\n   being on-link and others being\
    \ off-link.  Care must be taken when the\n   L flag is not set.  Specifically,\
    \ some platforms allow applications\n   to retrieve the prefix length associated\
    \ with each address of the\n   node.  If an implementation were to return the\
    \ prefix length used for\n   address configuration, then applications may incorrectly\
    \ assume that\n   TTL=1 is sufficient for communication, and that link-scoped\
    \ multicast\n   will reach other addresses in the prefix.  As a result, the IAB\n\
    \   recommends that designers and maintainers of APIs that provide a\n   prefix\
    \ length to applications address this issue.  For example, they\n   might indicate\
    \ that no prefix length exists when the prefix is not\n   on-link.  If the API\
    \ is not capable of reporting that one does not\n   exist, then they might choose\
    \ to report a value of 128 when the\n   prefix is not on-link.  This would result\
    \ in such applications\n   believing they are on separate subnets, rather than\
    \ on a multi-link\n   subnet.\n"
- title: 4.3.  Duplicate Address Detection Optimizations
  contents:
  - "4.3.  Duplicate Address Detection Optimizations\n   One of the reasons sometimes\
    \ cited for wanting a multi-link subnet\n   model (rather than a multi-access\
    \ link model), is to minimize the\n   ARP/ND traffic between end-nodes.  This\
    \ is primarily a concern in\n   IPv4 where ARP results in a broadcast that would\
    \ be seen by all\n   nodes, not just the node with the IPv4 address being resolved.\
    \  Even\n   if this is a significant concern, the use of a multi-link subnet\n\
    \   model is not necessary.  The point-to-point link model is one way to\n   avoid\
    \ this issue entirely.\n   In the multi-access link model, IPv6 ND traffic can\
    \ be reduced by\n   using well-known multicast learning techniques (e.g., [RFC4541]\
    \ at a\n   layer 2 intermediate device (bridge, switch, access point, etc.).\n\
    \   Some have suggested that a layer 2 device could maintain an ARP or ND\n  \
    \ cache and service requests from that cache.  However, such a cache\n   prevents\
    \ any type of fast mobility between layer 2 ports, and breaks\n   Secure Neighbor\
    \ Discovery [RFC3971].  As a result, the IAB recommends\n   to protocol designers\
    \ that this approach be avoided, instead using an\n   alternative such as layer\
    \ 2 learning.  For IPv4 (where no Secure ARP\n   exists), the IAB recommends that\
    \ protocol designers avoid having a\n   device respond from its cache in cases\
    \ where a node can legitimately\n   move between layer 2 segments of the link\
    \ without any layer 2\n   indications at the layer 2 intermediate device.  Also,\
    \ since\n   currently there is no guarantee that any device other than the end-\n\
    \   host knows all addresses of the end-host, protocol designers should\n   avoid\
    \ any dependency on such an assumption.  For example, when no\n   cache entry\
    \ for a given request is found, protocol designers may\n   specify that a node\
    \ broadcast the request to all nodes.\n"
- title: 5.  Normative References
  contents:
  - "5.  Normative References\n   [RFC791]  Postel, J., \"Internet Protocol\", STD\
    \ 5, RFC 791, September\n             1981.\n   [RFC950]  Mogul, J. and J. Postel,\
    \ \"Internet Standard Subnetting\n             Procedure\", STD 5, RFC 950, August\
    \ 1985.\n   [RFC1812] Baker, F., Ed., \"Requirements for IP Version 4 Routers\"\
    ,\n             RFC 1812, June 1995.\n   [RFC2119] Bradner, S., \"Key words for\
    \ use in RFCs to Indicate\n             Requirement Levels\", BCP 14, RFC 2119,\
    \ March 1997.\n   [RFC2461] Narten, T., Nordmark, E., and W. Simpson, \"Neighbor\n\
    \             Discovery for IP Version 6 (IPv6)\", RFC 2461, December\n      \
    \       1998.\n   [RFC2462] Thomson, S. and T. Narten, \"IPv6 Stateless Address\n\
    \             Autoconfiguration\", RFC 2462, December 1998.\n   [RFC2644] Senie,\
    \ D., \"Changing the Default for Directed Broadcasts in\n             Routers\"\
    , BCP 34, RFC 2644, August 1999.\n   [RFC3633] Troan, O. and R. Droms, \"IPv6\
    \ Prefix Options for Dynamic\n             Host Configuration Protocol (DHCP)\
    \ version 6\", RFC 3633,\n             December 2003.\n   [RFC3927] Cheshire,\
    \ S., Aboba, B., and E. Guttman, \"Dynamic\n             Configuration of IPv4\
    \ Link-Local Addresses\", RFC 3927, May\n             2005.\n   [RFC3971] Arkko,\
    \ J., Ed., Kempf, J., Zill, B., and P. Nikander,\n             \"SEcure Neighbor\
    \ Discovery (SEND)\", RFC 3971, March 2005.\n   [RFC4007] Deering, S., Haberman,\
    \ B., Jinmei, T., Nordmark, E., and B.\n             Zill, \"IPv6 Scoped Address\
    \ Architecture\", RFC 4007, March\n             2005.\n   [RFC4291] Hinden, R.\
    \ and S. Deering, \"IP Version 6 Addressing\n             Architecture\", RFC\
    \ 4291, February 2006.\n   [RFC4541] Christensen, M., Kimball, K., and F. Solensky,\n\
    \             \"Considerations for Internet Group Management Protocol\n      \
    \       (IGMP) and Multicast Listener Discovery (MLD) Snooping\n             Switches\"\
    , RFC 4541, May 2006.\n"
- title: 6.  Informative References
  contents:
  - "6.  Informative References\n   [2462BIS] Thomson, S., Narten, T., and T. Jinmei,\
    \ \"IPv6 Stateless\n             Address Autoconfiguration\", Work in Progress,\
    \ May 2005.\n   [BRIDGE]  T. Jeffree, editor, \"Media Access Control (MAC) Bridges\"\
    ,\n             ANSI/IEEE Std 802.1D, 2004, http://standards.ieee.org/\n     \
    \        getieee802/download/802.1D-2004.pdf.\n   [DEERING] Deering, S., \"IP\
    \ Multicast Extensions for 4.3BSD UNIX and\n             related systems (MULTICAST\
    \ 1.2 Release)\", June 1989.\n             http://www.kohala.com/start/mcast.api.txt\n\
    \   [EIGRP]   Cisco, \"Enhanced Interior Gateway Routing Protocol\", Cisco\n \
    \            Document ID 16406, September 2005.\n             http://www.cisco.com/warp/public/103/eigrp-toc.html\n\
    \   [LINUX]   Juan-Mariano de Goyeneche, \"Multicast over TCP/IP HOWTO\",\n  \
    \           March 1998.  http://www.linux.com/howtos/Multicast-HOWTO-\n      \
    \       2.shtml\n   [LLMNR]   Aboba, B., Thaler, D., and L. Esibov, \"Link-local\
    \ Multicast\n             Name Resolution (LLMNR)\", RFC 4795, January 2007.\n\
    \   [MDNS]    Cheshire, S. and M. Krochmal, \"Multicast DNS\", June 2005.\n  \
    \           http://files.multicastdns.org/draft-cheshire-dnsext-\n           \
    \  multicastdns.txt\n   [MLSR]    Thaler, D. and C. Huitema, \"Multi-link Subnet\
    \ Support in\n             IPv6\", Proceedings of IETF 54, June 2002.\n      \
    \       http://www.ietf.org/proceedings/02jul/I-D/draft-ietf-ipv6-\n         \
    \    multilink-subnets-00.txt\n   [RBRIDGE] Perlman, R., Gai, S., and D. Dutt,\
    \ \"Rbridges: Base Protocol\n             Specification\", Work in Progress, March\
    \ 2007.\n   [RFC925]  Postel, J., \"Multi-LAN address resolution\", RFC 925,\n\
    \             October 1984.\n   [RFC1001] NetBIOS Working Group in the Defense\
    \ Advanced Research\n             Projects Agency, Internet Activities Board,\
    \ and End-to-End\n             Services Task Force, \"Protocol Standard for a\
    \ NetBIOS\n             Service on a TCP/UDP Transport: Concepts and Methods\"\
    , STD\n             19, RFC 1001, March 1987.\n   [RFC1027] Carl-Mitchell, S.\
    \ and J. Quarterman, \"Using ARP to\n             Implement Transparent Subnet\
    \ Gateways\", RFC 1027, October\n             1987.\n   [RFC1075] Waitzman, D.,\
    \ Partridge, C., and S. Deering, \"Distance\n             Vector Multicast Routing\
    \ Protocol\", RFC 1075, November\n             1988.\n   [RFC1884] Hinden, R.,\
    \ Ed., and S. Deering, Ed., \"IP Version 6\n             Addressing Architecture\"\
    , RFC 1884, December 1995.\n   [RFC2080] Malkin, G. and R. Minnear, \"RIPng for\
    \ IPv6\", RFC 2080,\n             January 1997.\n   [RFC2131] Droms, R., \"Dynamic\
    \ Host Configuration Protocol\", RFC 2131,\n             March 1997.\n   [RFC2328]\
    \ Moy, J., \"OSPF Version 2\", STD 54, RFC 2328, April 1998.\n   [RFC2373] Hinden,\
    \ R. and S. Deering, \"IP Version 6 Addressing\n             Architecture\", RFC\
    \ 2373, July 1998.\n   [RFC2453] Malkin, G., \"RIP Version 2\", STD 56, RFC 2453,\
    \ November\n             1998.\n   [RFC3024] Montenegro, G., Ed., \"Reverse Tunneling\
    \ for Mobile IP,\n             revised\", RFC 3024, January 2001.\n   [RFC3056]\
    \ Carpenter, B. and K. Moore, \"Connection of IPv6 Domains via\n             IPv4\
    \ Clouds\", RFC 3056, February 2001.\n   [RFC3315] Droms, R., Ed., Bound, J.,\
    \ Volz, B., Lemon, T., Perkins,\n             C., and M. Carney, \"Dynamic Host\
    \ Configuration Protocol for\n             IPv6 (DHCPv6)\", RFC 3315, July 2003.\n\
    \   [RFC3513] Hinden, R. and S. Deering, \"Internet Protocol Version 6\n     \
    \        (IPv6) Addressing Architecture\", RFC 3513, April 2003.\n   [RFC3753]\
    \ Manner, J., Ed., and M. Kojo, Ed., \"Mobility Related\n             Terminology\"\
    , RFC 3753, June 2004.\n   [RFC3775] Johnson, D., Perkins, C., and J. Arkko, \"\
    Mobility Support\n             in IPv6\", RFC 3775, June 2004.\n   [RFC3810] Vida,\
    \ R., Ed., and L. Costa, Ed., \"Multicast Listener\n             Discovery Version\
    \ 2 (MLDv2) for IPv6\", RFC 3810, June 2004.\n   [RFC4380] Huitema, C., \"Teredo:\
    \ Tunneling IPv6 over UDP through\n             Network Address Translations (NATs)\"\
    , RFC 4380, February\n             2006.\n   [RFC4389] Thaler, D., Talwar, M.,\
    \ and C. Patel, \"Neighbor Discovery\n             Proxies (ND Proxy)\", RFC 4389,\
    \ April 2006.\n   [SCOPID]  Deering, S., Haberman, B., Jinmei, T., Nordmark, E.,\
    \ Onoe,\n             A., and B. Zill, \"IPv6 Scoped Address Architecture\",\n\
    \             Proceedings of IETF 54, July 2002.\n             http://www.ietf.org/proceedings/02jul/I-D/draft-ietf-\n\
    \             ipngwg-scoping-arch-04.txt\n   [SSDP]    Goland, Yaron Y., Cai,\
    \ T., Leach, P., Gu, Y., and S.\n             Albright, \"Simple Service Discovery\
    \ Protocol (SSDP)\", 1999.\n             http://www.upnp.org/resources/specifications.asp\n\
    \   [TCPILL]  Stevens, W. Richard, \"TCP/IP Illustrated, Volume 1\",\n       \
    \      Addison-Wesley, 1994.\n   [TCPIP2K] MacDonald, D. and W. Barkley, \"Microsoft\
    \ Windows 2000\n             TCP/IP Implementation Details\". http://www.microsoft.com/\n\
    \             technet/itsolutions/network/deploy/depovg/tcpip2k.mspx\n   [UNP]\
    \     Stevens, W. Richard, \"Unix Network Programming, Volume 1,\n           \
    \  Second Edition\", Prentice Hall, 1998.\n   [WSDISC]  Microsoft, \"Web Services\
    \ Dynamic Discovery (WS-Discovery)\",\n             2005.  http://specs.xmlsoap.org/ws/2005/04/discovery/ws-\n\
    \             discovery.pdf\n"
- title: IAB Members at the time of this writing
  contents:
  - "IAB Members at the time of this writing\n   Bernard Aboba\n   Loa Andersson\n\
    \   Brian Carpenter\n   Leslie Daigle\n   Elwyn Davies\n   Kevin Fall\n   Olaf\
    \ Kolkman\n   Kurtis Lindqvist\n   David Meyer\n   David Oran\n   Eric Rescorla\n\
    \   Dave Thaler\n   Lixia Zhang\n"
- title: Author's Address
  contents:
  - "Author's Address\n   Dave Thaler\n   Microsoft\n   One Microsoft Way\n   Redmond,\
    \ WA 98052\n   Phone: +1 425 703 8835\n   EMail: dthaler@microsoft.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2007).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
