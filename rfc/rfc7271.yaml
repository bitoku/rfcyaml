- contents:
  - "    MPLS Transport Profile (MPLS-TP) Linear Protection to Match the\n       Operational
    Expectations of Synchronous Digital Hierarchy,\n  Optical Transport Network, and
    Ethernet Transport Network Operators\n"
  title: __initial_text__
- contents:
  - "Abstract\n   This document describes alternate mechanisms to perform some of
    the\n   functions of MPLS Transport Profile (MPLS-TP) linear protection\n   defined
    in RFC 6378, and also defines additional mechanisms.  The\n   purpose of these
    alternate and additional mechanisms is to provide\n   operator control and experience
    that more closely models the behavior\n   of linear protection seen in other transport
    networks.\n   This document also introduces capabilities and modes for linear\n
    \  protection.  A capability is an individual behavior, and a mode is a\n   particular
    combination of capabilities.  Two modes are defined in\n   this document: Protection
    State Coordination (PSC) mode and Automatic\n   Protection Switching (APS) mode.\n
    \  This document describes the behavior of the PSC protocol including\n   priority
    logic and state machine when all the capabilities associated\n   with the APS
    mode are enabled.\n   This document updates RFC 6378 in that the capability advertisement\n
    \  method defined here is an addition to that document.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    5741.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7271.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (http://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .
    . . . . .   4\n   2.  Conventions Used in This Document . . . . . . . . . . .
    . . .   5\n   3.  Acronyms  . . . . . . . . . . . . . . . . . . . . . . . . .
    .   6\n   4.  Capability 1: Priority Modification . . . . . . . . . . . . .   6\n
    \    4.1.  Motivation for Swapping Priorities of FS and SF-P . . . .   6\n     4.2.
    \ Motivation for Raising the Priority of SFc  . . . . . . .   7\n     4.3.  Motivation
    for Introducing the Freeze Command . . . . . .   7\n     4.4.  Procedures in Support
    of Priority Modification  . . . . .   8\n   5.  Capability 2: Non-revertive Behavior
    Modification . . . . . .   8\n   6.  Capability 3: Support of the MS-W Command
    . . . . . . . . . .   8\n     6.1.  Motivation for adding MS-W  . . . . . . .
    . . . . . . . .   8\n     6.2.  Terminology to Support MS-W . . . . . . . . .
    . . . . . .   9\n     6.3.  Behavior of MS-P and MS-W . . . . . . . . . . . .
    . . . .   9\n     6.4.  Equal-Priority Resolution for MS  . . . . . . . . . .
    . .  10\n   7.  Capability 4: Support of Protection against SD  . . . . . . .
    \ 10\n     7.1.  Motivation for Supporting Protection against SD . . . . .  10\n
    \    7.2.  Terminology to Support SD . . . . . . . . . . . . . . . .  10\n     7.3.
    \ Behavior of Protection against SD . . . . . . . . . . . .  11\n     7.4.  Equal-Priority
    Resolution . . . . . . . . . . . . . . . .  12\n   8.  Capability 5: Support of
    EXER Command . . . . . . . . . . . .  13\n   9.  Capabilities and Modes  . . .
    . . . . . . . . . . . . . . . .  14\n     9.1.  Capabilities  . . . . . . . .
    . . . . . . . . . . . . . .  14\n       9.1.1.  Sending and Receiving the Capabilities
    TLV  . . . . .  15\n     9.2.  Modes . . . . . . . . . . . . . . . . . . . . .
    . . . . .  16\n       9.2.1.  PSC Mode  . . . . . . . . . . . . . . . . . . .
    . . .  16\n       9.2.2.  APS Mode  . . . . . . . . . . . . . . . . . . . . .
    .  16\n   10. PSC Protocol in APS Mode  . . . . . . . . . . . . . . . . . .  17\n
    \    10.1.  Request Field in PSC Protocol Message  . . . . . . . . .  17\n     10.2.
    \ Priorities of Local Inputs and Remote Requests . . . . .  17\n       10.2.1.
    \ Equal-Priority Requests  . . . . . . . . . . . . . .  18\n     10.3.  Acceptance
    and Retention of Local Inputs . . . . . . . .  20\n   11. State Transition Tables
    in APS Mode . . . . . . . . . . . . .  20\n     11.1.  State Transition by Local
    Inputs . . . . . . . . . . . .  23\n     11.2.  State Transition by Remote Messages
    \ . . . . . . . . . .  25\n     11.3.  State Transition for 1+1 Unidirectional
    Protection . . .  27\n   12. Provisioning Mismatch and Protocol Failure in APS
    Mode  . . .  27\n   13. Security Considerations . . . . . . . . . . . . . . .
    . . . .  28\n   14. IANA Considerations . . . . . . . . . . . . . . . . . . .
    . .  29\n     14.1.  MPLS PSC Request Registry  . . . . . . . . . . . . . . .
    \ 29\n     14.2.  MPLS PSC TLV Registry  . . . . . . . . . . . . . . . . .  29\n
    \    14.3.  MPLS PSC Capability Flag Registry  . . . . . . . . . . .  29\n   15.
    Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  30\n   16. References
    \ . . . . . . . . . . . . . . . . . . . . . . . . .  30\n     16.1.  Normative
    References . . . . . . . . . . . . . . . . . .  30\n     16.2.  Informative References
    . . . . . . . . . . . . . . . . .  30\n   Appendix A.  An Example of an Out-of-Service
    Scenario . . . . . .  32\n   Appendix B.  An Example of a Sequence Diagram Showing\n
    \               the Problem with the Priority Level of SFc . . . . .  33\n   Appendix
    C.  Freeze Command . . . . . . . . . . . . . . . . . . .  34\n   Appendix D.  Operation
    Examples of the APS Mode . . . . . . . . .  35\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   Linear protection mechanisms for the MPLS Transport Profile
    (MPLS-TP)\n   are described in RFC 6378 [RFC6378] to meet the requirements\n   described
    in RFC 5654 [RFC5654].\n   This document describes alternate mechanisms to perform
    some of the\n   functions of linear protection, and also defines additional\n
    \  mechanisms.  The purpose of these alternate and additional mechanisms\n   is
    to provide operator control and experience that more closely\n   models the behavior
    of linear protection seen in other transport\n   networks, such as Synchronous
    Digital Hierarchy (SDH), Optical\n   Transport Network (OTN), and Ethernet transport
    networks.  Linear\n   protection for SDH, OTN, and Ethernet transport networks
    is defined\n   in ITU-T Recommendations G.841 [G841], G.873.1 [G873.1], and G.8031\n
    \  [G8031], respectively.\n   The reader of this document is assumed to be familiar
    with [RFC6378].\n   The alternative mechanisms described in this document are
    for the\n   following capabilities:\n   1.  Priority modification,\n   2.  non-revertive
    behavior modification,\n   and the following capabilities have been added to define
    additional\n   mechanisms:\n   3.  support of the Manual Switch to Working path
    (MS-W) command,\n   4.  support of protection against Signal Degrade (SD), and\n
    \  5.  support of the Exercise (EXER) command.\n   The priority modification includes
    raising the priority of Signal\n   Fail on Protection path (SF-P) relative to
    Forced Switch (FS), and\n   raising the priority level of Clear Signal Fail (SFc)
    above SF-P.\n   Non-revertive behavior is modified to align with the behavior
    defined\n   in RFC 4427 [RFC4427] as well as to follow the behavior of linear\n
    \  protection seen in other transport networks.\n   Support of the MS-W command
    to revert traffic to the working path in\n   non-revertive operation is covered
    in this document.\n   Support of the protection-switching protocol against SD
    is covered in\n   this document.  The specifics for the method of identifying
    SD are\n   out of the scope for this document and are treated similarly to\n   Signal
    Fail (SF) in [RFC6378].\n   Support of the EXER command to test if the Protection
    State\n   Coordination (PSC) communication is operating correctly is also\n   covered
    in this document.  Without actually switching traffic, the\n   EXER command tests
    and validates the linear protection mechanism and\n   PSC protocol including the
    aliveness of the priority logic, the PSC\n   state machine, the PSC message generation
    and reception, and the\n   integrity of the protection path.\n   This document
    introduces capabilities and modes.  A capability is an\n   individual behavior.
    \ The capabilities of a node are advertised using\n   the method given in this
    document.  A mode is a particular\n   combination of capabilities.  Two modes
    are defined in this document:\n   PSC mode and Automatic Protection Switching
    (APS) mode.\n   Other modes may be defined as new combinations of the capabilities\n
    \  defined in this document or through the definition of additional\n   capabilities.
    \ In either case, the specification defining a new mode\n   will be responsible
    for documenting the behavior, the priority logic,\n   and the state machine of
    the PSC protocol when the set of\n   capabilities in the new mode is enabled.\n
    \  This document describes the behavior, the priority logic, and the\n   state
    machine of the PSC protocol when all the capabilities\n   associated with the
    APS mode are enabled.  The PSC protocol behavior\n   for the PSC mode is as defined
    in [RFC6378].\n   This document updates [RFC6378] by adding a capability advertisement\n
    \  mechanism.  It is recommended that existing implementations of the\n   PSC
    protocol be updated to support this capability.  Backward\n   compatibility with
    existing implementations that do not support this\n   mechanism is described in
    Section 9.2.1.\n   Implementations are expected to be configured to support a
    specific\n   set of capabilities (a mode) and to reject messages that indicate
    the\n   use of a different set of capabilities (a different mode).  Thus, the\n
    \  capability advertisement is not a negotiation but a verification that\n   peers
    are using the same mode.\n"
  title: 1.  Introduction
- contents:
  - "2.  Conventions Used in This Document\n   The key words \"MUST\", \"MUST NOT\",
    \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\",
    \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described
    in RFC 2119 [RFC2119].\n"
  title: 2.  Conventions Used in This Document
- contents:
  - "3.  Acronyms\n   This document uses the following acronyms:\n   APS     Automatic
    Protection Switching\n   DNR     Do-not-Revert\n   EXER    Exercise\n   FS      Forced
    Switch\n   LO      Lockout of protection\n   MS      Manual Switch\n   MS-P    Manual
    Switch to Protection path\n   MS-W    Manual Switch to Working path\n   MPLS-TP
    MPLS Transport Profile\n   NR      No Request\n   OC      Operator Clear\n   OTN
    \    Optical Transport Network\n   PSC     Protection State Coordination\n   RR
    \     Reverse Request\n   SD      Signal Degrade\n   SD-P    Signal Degrade on
    Protection path\n   SD-W    Signal Degrade on Working path\n   SDH     Synchronous
    Digital Hierarchy\n   SF      Signal Fail\n   SF-P    Signal Fail on Protection
    path\n   SF-W    Signal Fail on Working path\n   SFc     Clear Signal Fail\n   SFDc
    \   Clear Signal Fail or Degrade\n   WTR     Wait-to-Restore\n"
  title: 3.  Acronyms
- contents:
  - "4.  Capability 1: Priority Modification\n   [RFC6378] defines the priority of
    FS to be higher than that of SF-P.\n   That document also defines the priority
    of Clear SF (SFc) to be low.\n   This document defines the priority modification
    capability whereby\n   the relative priorities of FS and SF-P are swapped, and
    the priority\n   of Clear SF (SFc) is raised.  In addition, this capability introduces\n
    \  the Freeze command as described in Appendix C.  The rationale for\n   these
    changes is detailed in the following subsections from both the\n   technical and
    network operational aspects.\n"
  - contents:
    - "4.1.  Motivation for Swapping Priorities of FS and SF-P\n   Defining the priority
      of FS higher than that of SF-P can result in a\n   situation where the protected
      traffic is taken out of service.  When\n   the protection path fails, PSC communication
      may stop as a result.\n   In this case, if any input that is supposed to be
      signaled to the\n   other end has a higher priority than SF-P, then this can
      result in an\n   unpredictable protection-switching state.  An example scenario
      that\n   may result in an out-of-service situation is presented in Appendix
      A\n   of this document.\n   According to Section 2.4 of [RFC5654], it MUST be
      possible to operate\n   an MPLS-TP network without using a control plane.  This
      means that\n   the PSC communication channel is very important for the transfer
      of\n   external switching commands (e.g., FS), and these commands should not\n
      \  rely on the presence of a control plane.  In consequence, the failure\n   of
      the PSC communication channel has higher priority than FS.\n   In other transport
      networks (such as SDH, OTN, and Ethernet transport\n   networks), the priority
      of SF-P has been higher than that of FS.  It\n   is therefore important to offer
      network operators the option of\n   having the same behavior in their MPLS-TP
      networks so that they can\n   have the same operational protection-switching
      behavior to which they\n   have become accustomed.  Typically, an FS command
      is issued before\n   network maintenance jobs (e.g., replacing optical cables
      or other\n   network components).  When an operator pulls out a cable on the\n
      \  protection path, by mistake, the traffic should continue to be\n   protected,
      and the operator expects this behavior based on his/her\n   experience with
      traditional transport network operations.\n"
    title: 4.1.  Motivation for Swapping Priorities of FS and SF-P
  - contents:
    - "4.2.  Motivation for Raising the Priority of SFc\n   The priority level of
      SFc defined in [RFC6378] can cause traffic\n   disruption when a node that has
      experienced local signal fails on\n   both the working and the protection paths
      is recovering from these\n   failures.\n   A sequence diagram highlighting the
      problem with the priority level\n   of SFc as defined in [RFC6378] is presented
      in Appendix B.\n"
    title: 4.2.  Motivation for Raising the Priority of SFc
  - contents:
    - "4.3.  Motivation for Introducing the Freeze Command\n   With the priority swapping
      between FS and SF-P, the traffic is always\n   moved back to the working path
      when SF-P occurs in Protecting\n   Administrative state.  In case network operators
      need an option to\n   control their networks so that the traffic can remain
      on the\n   protection path even when the PSC communication channel is broken,\n
      \  the Freeze command can be used.  Freeze is defined to be a \"local\"\n   command
      that is not signaled to the remote node.  The use of the\n   Freeze command
      is described in Appendix C.\n"
    title: 4.3.  Motivation for Introducing the Freeze Command
  - contents:
    - "4.4.  Procedures in Support of Priority Modification\n   When the modified
      priority order specified in this document is in\n   use, the list of local requests
      in order of priority SHALL be as\n   follows (from highest to lowest):\n   o
      \ Clear Signal Fail\n   o  Signal Fail on Protection path\n   o  Forced Switch\n
      \  o  Signal Fail on Working path\n   This requires modification of the PSC
      Control Logic (including the\n   state machine) relative to that described in
      [RFC6378].  Sections 10\n   and 11 present the PSC Control Logic when all capabilities
      of APS\n   mode are enabled.\n"
    title: 4.4.  Procedures in Support of Priority Modification
  title: '4.  Capability 1: Priority Modification'
- contents:
  - "5.  Capability 2: Non-revertive Behavior Modification\n   Non-revertive operation
    of protection switching is defined in\n   [RFC4427].  In this operation, the traffic
    does not return to the\n   working path when switch-over requests are terminated.\n
    \  However, the PSC protocol defined in [RFC6378] supports this\n   operation
    only when recovering from a defect condition: it does not\n   support the non-revertive
    function when an operator's switch-over\n   command, such as FS or Manual Switch
    (MS), is cleared.  To be aligned\n   with the behavior in other transport networks
    and to be consistent\n   with [RFC4427], a node should go into the Do-not-Revert
    (DNR) state\n   not only when a failure condition on the working path is cleared,
    but\n   also when an operator command that requested switch-over is cleared.\n
    \  This requires modification to the PSC Control Logic (including the\n   state
    machine) relative to that described in [RFC6378].  Sections 10\n   and 11 present
    the PSC Control Logic when all capabilities of APS\n   mode are enabled.\n"
  title: '5.  Capability 2: Non-revertive Behavior Modification'
- contents:
  - '6.  Capability 3: Support of the MS-W Command

    '
  - contents:
    - "6.1.  Motivation for adding MS-W\n   Changing the non-revertive operation as
      described in Section 5\n   introduces the necessity of a new operator command
      to revert traffic\n   to the working path in the DNR state.  When the traffic
      is on the\n   protection path in the DNR state, a Manual Switch to Working (MS-W)\n
      \  command is issued to switch the normal traffic back to the working\n   path.
      \ According to Section 4.3.3.6 (Do-not-Revert State) in\n   [RFC6378], \"To
      revert back to the Normal state, the administrator\n   SHALL issue a Lockout
      of protection command followed by a Clear\n   command.\"  However, using the
      Lockout of protection (LO) command\n   introduces the potential risk of an unprotected
      situation while the\n   LO is in effect.\n   The \"Manual switch-over for recovery
      LSP/span\" command is defined in\n   [RFC4427].  Requirement 83 in [RFC5654]
      states that the external\n   commands defined in [RFC4427] MUST be supported.
      \ Since there is no\n   support for this external command in [RFC6378], this
      functionality\n   should be added to PSC.  This support is provided by introducing
      the\n   MS-W command.  The MS-W command, as described here, corresponds to\n
      \  the \"Manual switch-over for recovery LSP/span\" command.\n"
    title: 6.1.  Motivation for adding MS-W
  - contents:
    - "6.2.  Terminology to Support MS-W\n   [RFC6378] uses the term \"Manual Switch\"
      and its acronym \"MS\".  This\n   document uses the term \"Manual Switch to
      Protection path\" and \"MS-P\"\n   to have the same meaning, while avoiding
      confusion with \"Manual\n   Switch to Working path\" and its acronym \"MS-W\".\n
      \  Similarly, we modify the name of \"Protecting Administrative\" state\n   (as
      defined in [RFC6378]) to be \"Switching Administrative\" state to\n   include
      the case where traffic is switched to the working path as a\n   result of the
      external MS-W command.\n"
    title: 6.2.  Terminology to Support MS-W
  - contents:
    - "6.3.  Behavior of MS-P and MS-W\n   MS-P and MS-W SHALL have the same priority.
      \ We consider different\n   instances of determining the priority of the commands
      when they are\n   received either in succession or simultaneously.\n   o  When
      two commands are received in succession, the command that is\n      received
      after the initial command SHALL be cancelled.\n   o  If two nodes simultaneously
      receive commands that indicate\n      opposite operations (i.e., one node receives
      MS-P and the other\n      node receives MS-W) and transmit the indications to
      the remote\n      node, the MS-W SHALL be considered to have a higher priority,
      and\n      the MS-P SHALL be cancelled and discarded.\n   Two commands, MS-P
      and MS-W, are transmitted using the same Request\n   field value but SHALL indicate
      in the Fault Path (FPath) value the\n   path from which the traffic is being
      diverted.  When traffic is\n   switched to the protection path, the FPath field
      value SHALL be set\n   to 1, indicating that traffic is being diverted from
      the working\n   path.  When traffic is switched to the working path, the FPath
      field\n   value SHALL be set to 0, indicating that traffic is being diverted\n
      \  from the protection path.  The Data Path (Path) field SHALL indicate\n   where
      user data traffic is being transported (i.e., if the working\n   path is selected,
      then Path is set to 0; if the protection path is\n   selected, then Path is
      set to 1).\n   When an MS command is in effect at a node, any subsequent MS
      or EXER\n   command and any other lower-priority requests SHALL be ignored.\n"
    title: 6.3.  Behavior of MS-P and MS-W
  - contents:
    - "6.4.  Equal-Priority Resolution for MS\n   [RFC6378] defines only one rule
      for the equal-priority condition in\n   Section 4.3.2 as \"The remote message
      from the far-end LER is assigned\n   a priority just below the similar local
      input.\"  In order to support\n   the Manual Switch behavior described in Section
      6.3, additional rules\n   for equal-priority resolution are required.  Since
      the support of\n   protection against signal degrade also requires a similar
      equal-\n   priority resolution, the rules are described in Section 7.4.\n   Support
      of this function requires changes to the PSC Control Logic\n   (including the
      state machine) relative to that shown in [RFC6378].\n   Sections 10 and 11 present
      the PSC Control Logic when all\n   capabilities of APS mode are enabled.\n"
    title: 6.4.  Equal-Priority Resolution for MS
  title: '6.  Capability 3: Support of the MS-W Command'
- contents:
  - '7.  Capability 4: Support of Protection against SD

    '
  - contents:
    - "7.1.  Motivation for Supporting Protection against SD\n   In the MPLS-TP Survivability
      Framework [RFC6372], both SF and SD\n   fault conditions can be used to trigger
      protection switching.\n   [RFC6378], which defines the protection-switching
      protocol for\n   MPLS-TP, does not specify how the SF and SD are detected, and\n
      \  specifies the protection-switching protocol associated with SF only.\n   The
      PSC protocol associated with SD is covered in this document, but\n   the specifics
      for the method of identifying SD is out of scope for\n   the protection protocol
      in the same way that SF detection and MS or\n   FS command initiation are out
      of scope.\n"
    title: 7.1.  Motivation for Supporting Protection against SD
  - contents:
    - "7.2.  Terminology to Support SD\n   In this document, the term Clear Signal
      Fail or Degrade (SFDc) is\n   used to indicate the clearance of either a degraded
      condition or a\n   failure condition.\n   The second paragraph of Section 4.3.3.2
      (Unavailable State) in\n   [RFC6378] shows the intention of including Signal
      Degrade on\n   Protection path (SD-P) in the Unavailable state.  Even though
      the\n   protection path can be partially available under the condition of\n
      \  SD-P, this document follows the same state grouping as [RFC6378] for\n   SD-P.\n
      \  The bulleted item on the Protecting Failure state in Section 3.6 of\n   [RFC6378]
      includes the degraded condition in the Protecting Failure\n   state.  This document
      follows the same state grouping as [RFC6378]\n   for Signal Degrade on Working
      path (SD-W).\n"
    title: 7.2.  Terminology to Support SD
  - contents:
    - "7.3.  Behavior of Protection against SD\n   To better align the behavior of
      MPLS-TP networks with that of other\n   transport networks (such as SDH, OTN,
      and Ethernet transport\n   networks), we define the following:\n   o  The priorities
      of SD-P and SD-W SHALL be equal.\n   o  Once a switch has been completed due
      to SD on one path, it will\n      not be overridden by SD on the other path
      (first come, first\n      served behavior), to avoid protection switching that
      cannot\n      improve signal quality.\n   The SD message indicates that the
      transmitting node has identified\n   degradation of the signal or integrity
      of the packet received on\n   either the working path or the protection path.
      \ The FPath field\n   SHALL identify the path that is reporting the degraded
      condition\n   (i.e., if the protection path, then FPath is set to 0; if the
      working\n   path, then FPath is set to 1), and the Path field SHALL indicate\n
      \  where the data traffic is being transported (i.e., if the working\n   path
      is selected, then Path is set to 0; if the protection path is\n   selected,
      then Path is set to 1).\n   When the SD condition is cleared and the protected
      domain is\n   recovering from the situation, the Wait-to-Restore (WTR) timer
      SHALL\n   be used if the protected domain is configured for revertive behavior.\n
      \  The WTR timer SHALL be started at the node that recovers from a local\n   degraded
      condition on the working path.\n   Protection switching against SD is always
      provided by a selector\n   bridge duplicating user data traffic and feeding
      it to both the\n   working path and the protection path under SD condition.
      \ When a\n   local or remote SD occurs on either the working path or the\n   protection
      path, the node SHALL duplicate user data traffic and SHALL\n   feed it to both
      the working path and the protection path.  The packet\n   duplication SHALL
      continue as long as any SD condition exists in the\n   protected domain.  When
      the SD condition is cleared, in revertive\n   operation, the packet duplication
      SHALL continue in the WTR state and\n   SHALL stop when the node leaves the
      WTR state; while in non-revertive\n   operation, the packet duplication SHALL
      stop immediately.\n   The selector bridge with the packet duplication under
      SD condition,\n   which is a non-permanent bridge, is considered to be a 1:1
      protection\n   architecture.\n   Protection switching against SD does not introduce
      any modification\n   to the operation of the selector at the sink node described
      in\n   [RFC6378].  The selector chooses either the working or protection\n   path
      from which to receive the normal traffic in both 1:1 and 1+1\n   architectures.
      \ The position of the selector, i.e., which path to\n   receive the traffic,
      is determined by the PSC protocol in\n   bidirectional switching or by the local
      input in unidirectional\n   switching.\n"
    title: 7.3.  Behavior of Protection against SD
  - contents:
    - "7.4.  Equal-Priority Resolution\n   In order to support the MS behavior described
      in Section 6.3 and the\n   protection against SD described in Section 7.3, it
      is necessary to\n   expand rules for treating equal-priority inputs.\n   For
      equal-priority local inputs, such as MS and SD, apply a simple\n   first-come,
      first-served rule.  Once a local input is determined as\n   the highest priority
      local input, then a subsequent equal-priority\n   local input requesting a different
      action, i.e., the action results\n   in the same PSC Request field but different
      FPath value, will not be\n   presented to the PSC Control Logic as the highest
      local request.\n   Furthermore, in the case of an MS command, the subsequent
      local MS\n   command requesting a different action will be cancelled.\n   If
      a node is in a remote state due to a remote SD (or MS) message, a\n   subsequent
      local input having the same priority but requesting a\n   different action to
      the PSC Control Logic will be considered as\n   having lower priority than the
      remote message and will be ignored.\n   For example, if a node is in remote
      Switching Administrative state\n   due to a remote MS-P, then any subsequent
      local MS-W SHALL be ignored\n   and automatically cancelled.  If a node is in
      remote Unavailable\n   state due to a remote SD-P, then any subsequent local
      SD-W input will\n   be ignored.  However, the local SD-W SHALL continue to appear
      in the\n   Local Request Logic as long as the SD condition exists, but it SHALL\n
      \  NOT be the top-priority global request, which determines the state\n   transition
      at the PSC Control Logic.\n   Cases where two end-points of the protected domain
      simultaneously\n   receive local triggers of the same priority that request
      different\n   actions may occur (for example, one node receives SD-P and the
      other\n   receives SD-W).  Subsequently, each node will receive a remote\n   message
      with the opposing action indication.  To address these cases,\n   we define
      the following priority resolution rules:\n   o  When MS-W and MS-P occur simultaneously
      at both nodes, MS-W SHALL\n      be considered as having higher priority than
      MS-P at both nodes.\n   o  When SD-W and SD-P occur simultaneously at both nodes,
      the SD on\n      the standby path (the path from which the selector does not
      select\n      the user data traffic) is considered as having higher priority\n
      \     than the SD on the active path (the path from which the selector\n      selects
      the user data traffic) regardless of its origin (local or\n      remote message).
      \ Therefore, no unnecessary protection switching\n      is performed, and the
      user data traffic continues to be selected\n      from the active path.\n   In
      the preceding paragraphs, \"simultaneously\" refers to the case a\n   sent SD
      (or MS) request has not been confirmed by the remote end in\n   bidirectional
      protection switching.  When a local node that has\n   transmitted an SD message
      receives an SD (or MS) message that\n   indicates a different value of Path
      field from the value of Path\n   field in the transmitted SD (or MS) message,
      both the local and\n   remote SD requests are considered to occur simultaneously.\n
      \  The addition of support for protection against SD requires\n   modification
      to the PSC Control Logic (including the state machine)\n   relative to that
      described in [RFC6378].  Sections 10 and 11 present\n   the PSC Control Logic
      when all capabilities of APS mode are enabled.\n"
    title: 7.4.  Equal-Priority Resolution
  title: '7.  Capability 4: Support of Protection against SD'
- contents:
  - "8.  Capability 5: Support of EXER Command\n   The EXER command is used to verify
    the correct operation of the PSC\n   communication, such as the aliveness of the
    Local Request Logic, the\n   integrity of the PSC Control Logic, the PSC message
    generation and\n   reception mechanism, and the integrity of the protection path.
    \ EXER\n   does not trigger any actual traffic switching.\n   The command is only
    relevant for bidirectional protection switching,\n   since it is dependent upon
    receiving a response from the remote node.\n   The EXER command is assigned lower
    priority than any switching\n   message.  It may be used regardless of the traffic
    usage of the\n   working path.\n   When a node receives a remote EXER message,
    it SHOULD respond with a\n   Reverse Request (RR) message with the FPath and Path
    fields set\n   according to the current condition of the node.  The RR message
    SHALL\n   be generated only in response to a remote EXER message.\n   This command
    is documented in R84 of [RFC5654].\n   If EXER commands are input at both ends,
    then a race condition may\n   arise.  This is resolved as follows:\n   o  If a
    node has issued EXER and receives EXER before receiving RR,\n      it MUST treat
    the received EXER as it would an RR, and it SHOULD\n      NOT respond with RR.\n
    \  The following PSC Requests are added to the PSC Request field to\n   support
    the Exercise command (see also Section 14.1):\n      (3) Exercise - indicates
    that the transmitting end-point is\n      exercising the protection channel and
    mechanism.  FPath and Path\n      are set to the same value of the No Request
    (NR), RR, or DNR\n      message whose transmission is stopped by EXER.\n      (2)
    Reverse Request - indicates that the transmitting end-point is\n      responding
    to an EXER command from the remote node.  FPath and\n      Path are set to the
    same value of the NR or DNR message whose\n      transmission is stopped by RR.\n
    \  The relative priorities of EXER and RR are defined in Section 10.2.\n"
  title: '8.  Capability 5: Support of EXER Command'
- contents:
  - '9.  Capabilities and Modes

    '
  - contents:
    - "9.1.  Capabilities\n   A Capability is an individual behavior whose use is
      signaled in a\n   Capabilities TLV, which is placed in Optional TLVs field inside
      the\n   PSC message shown in Figure 2 of [RFC6378].  The format of the\n   Capabilities
      TLV is:\n   0                   1                   2                   3\n
      \  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |  Type = Capabilities          |    Length                     |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |                        Value = Flags                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \                  Figure 1: Format of Capabilities TLV\n   The value of the
      Type field is 1.\n   The value of the Length field is the length of the Flags
      field in\n   octets.  The length of the Flags field MUST be a multiple of 4
      octets\n   and MUST be the minimum required to signal all the required\n   capabilities.\n
      \  Section 4 to Section 8 discuss five capabilities that are signaled\n   using
      the five most significant bits; if a node wishes to signal\n   these five capabilities,
      it MUST send a Flags field of 4 octets.  A\n   node would send a Flags field
      greater than 4 octets only if it had\n   more than 32 Capabilities to indicate.
      \ All unused bits MUST be set\n   to zero.\n   If the bit assigned for an individual
      capability is set to 1, it\n   indicates the sending node's intent to use that
      capability in the\n   protected domain.  If a bit is set to 0, the sending node
      does not\n   intend to use the indicated capability in the protected domain.
      \ Note\n   that it is not possible to distinguish between the intent not to
      use\n   a capability and a node's complete non-support (i.e., lack of\n   implementation)
      of a given capability.\n   This document defines five specific capabilities
      that are described\n   in Section 4 to Section 8.  Each capability is assigned
      bit as\n   follows:\n      0x80000000: priority modification\n      0x40000000:
      non-revertive behavior modification\n      0x20000000: support of MS-W command\n
      \     0x10000000: support of protection against SD\n      0x08000000: support
      of EXER command\n   If all the five capabilities should be used, a node SHALL
      set the\n   Flags field to 0xF8000000.\n"
    - contents:
      - "9.1.1.  Sending and Receiving the Capabilities TLV\n   A node MUST include
        its Capabilities TLV in every PSC message that it\n   transmits.  The transmission
        and acceptance of the PSC message is\n   described in Section 4.1 of [RFC6378].\n
        \  When a node receives a Capabilities TLV, it MUST compare the Flags\n   value
        to its most recent Flags value transmitted by the node.  If the\n   two are
        equal, the protected domain is said to be running in the mode\n   indicated
        by that set of capabilities (see Section 9.2).  If the sent\n   and received
        Capabilities TLVs are not equal, this indicates a\n   Capabilities TLV mismatch.
        \ When this happens, the node MUST alert\n   the operator and MUST NOT perform
        any protection switching until the\n   operator resolves the mismatch between
        the two end-points.\n"
      title: 9.1.1.  Sending and Receiving the Capabilities TLV
    title: 9.1.  Capabilities
  - contents:
    - "9.2.  Modes\n   A mode is a given set of Capabilities.  Modes are shorthand;\n
      \  referring to a set of capabilities by their individual values or by\n   the
      name of their mode does not change the protocol behavior.  This\n   document
      defines two modes -- PSC and APS.  Capabilities TLVs with\n   other combinations
      than the one specified by a mode are not supported\n   in this specification.\n"
    - contents:
      - "9.2.1.  PSC Mode\n   PSC mode is defined as the lack of support for any of
        the additional\n   capabilities defined in this document -- that is, a Capabilities
        set\n   of 0x0.  It is the behavior specified in [RFC6378].\n   There are
        two ways to declare PSC mode.  A node can send no\n   Capabilities TLV at
        all since there are no TLV units defined in\n   [RFC6378], or it can send
        a Capabilities TLV with Flags value set to\n   0x0.  In order to allow backward
        compatibility between two end-points\n   -- one which supports sending the
        Capabilities TLV, and one which\n   does not, the node that has the ability
        to send and process the PSC\n   mode Capabilities TLV MUST be able to both
        send the PSC mode\n   Capabilities TLV and send no Capabilities TLV at all.
        \ An\n   implementation MUST be configurable between these two options.\n"
      title: 9.2.1.  PSC Mode
    - contents:
      - "9.2.2.  APS Mode\n   APS mode is defined as the use of all the five specific
        capabilities,\n   which are described in Sections 4 to 8 in this document.
        \ APS mode is\n   indicated with the Flags value of 0xF8000000.\n"
      title: 9.2.2.  APS Mode
    title: 9.2.  Modes
  title: 9.  Capabilities and Modes
- contents:
  - "10.  PSC Protocol in APS Mode\n   This section and the following section define
    the behavior of the PSC\n   protocol when all of the aforementioned capabilities
    are enabled,\n   i.e., APS mode.\n"
  - contents:
    - "10.1.  Request Field in PSC Protocol Message\n   This document defines two
      new values for the \"Request\" field in the\n   PSC protocol message that is
      shown in Figure 2 of [RFC6378] as\n   follows:\n      (2) Reverse Request\n
      \     (3) Exercise\n   See also Section 14.1 of this document.\n"
    title: 10.1.  Request Field in PSC Protocol Message
  - contents:
    - "10.2.  Priorities of Local Inputs and Remote Requests\n   Based on the description
      in Sections 3 and 4.3.2 in [RFC6378], the\n   priorities of multiple outstanding
      local inputs are evaluated in the\n   Local Request Logic, where the highest
      priority local input (highest\n   local request) is determined.  This highest
      local request is passed\n   to the PSC Control Logic that will determine the
      higher-priority\n   input (top-priority global request) between the highest
      local request\n   and the last received remote message.  When a remote message
      comes to\n   the PSC Control Logic, the top-priority global request is determined\n
      \  between this remote message and the highest local request that is\n   present.
      \ The top-priority global request is used to determine the\n   state transition,
      which is described in Section 11.  In this\n   document, in order to simplify
      the description on the PSC Control\n   Logic, we strictly decouple the priority
      evaluation from the state\n   transition table lookup.\n   The priorities for
      both local and remote requests are defined as\n   follows from highest to lowest:\n
      \  o  Operator Clear (Local only)\n   o  Lockout of protection (Local and Remote)\n
      \  o  Clear Signal Fail or Degrade (Local only)\n   o  Signal Fail on Protection
      path (Local and Remote)\n   o  Forced Switch (Local and Remote)\n   o  Signal
      Fail on Working path (Local and Remote)\n   o  Signal Degrade on either Protection
      path or Working path (Local\n      and Remote)\n   o  Manual Switch to either
      Protection path or Working path (Local and\n      Remote)\n   o  WTR Timer Expiry
      (Local only)\n   o  WTR (Remote only)\n   o  Exercise (Local and Remote)\n   o
      \ Reverse Request (Remote only)\n   o  Do-Not-Revert (Remote only)\n   o  No
      Request (Remote and Local)\n   Note that the \"Local only\" requests are not
      transmitted to the remote\n   node.  Likewise, the \"Remote only\" requests
      do not exist in the Local\n   Request Logic as local inputs.  For example, the
      priority of WTR only\n   applies to the received WTR message, which is generated
      from the\n   remote node.  The remote node that is running the WTR timer in
      the\n   WTR state has no local request.\n   The remote SF and SD on either the
      working path or the protection\n   path and the remote MS to either the working
      path or the protection\n   path are indicated by the values of the Request and
      FPath fields in\n   the PSC message.\n   The remote request from the remote
      node is assigned a priority just\n   below the same local request except for
      NR and equal-priority\n   requests, such as SD and MS.  Since a received NR
      message needs to be\n   used in the state transition table lookup when there
      is no\n   outstanding local request, the remote NR request SHALL have a higher\n
      \  priority than the local NR.  For the equal-priority requests, see\n   Section
      10.2.1.\n"
    - contents:
      - "10.2.1.  Equal-Priority Requests\n   As stated in Section 10.2, the remote
        request from the remote node is\n   assigned a priority just below the same
        local request.  However, for\n   equal-priority requests, such as SD and MS,
        the priority SHALL be\n   evaluated as described in this section.\n   For
        equal-priority local requests, the first-come, first-served rule\n   SHALL
        be applied.  Once a local request appears in the Local Request\n   Logic,
        a subsequent equal-priority local request requesting a\n   different action,
        i.e., the action results in the same Request value\n   but a different FPath
        value, SHALL be considered to have a lower\n   priority.  Furthermore, in
        the case of an MS command, the subsequent\n   local MS command requesting
        a different action SHALL be rejected and\n   cleared.\n   When the priority
        is evaluated in the PSC Control Logic between the\n   highest local request
        and a remote request, the following equal-\n   priority resolution rules SHALL
        be applied:\n   o  If two requests request the same action, i.e., the same
        Request\n      and FPath values, then the local request SHALL be considered
        to\n      have a higher priority than the remote request.\n   o  When the
        highest local request comes to the PSC Control Logic, if\n      the remote
        request that requests a different action exists, then\n      the highest local
        request SHALL be ignored and the remote request\n      SHALL remain to be
        the top-priority global request.  In the case\n      of an MS command, the
        local MS command requesting a different\n      action SHALL be cancelled.\n
        \  o  When the remote request comes to the PSC Control Logic, if the\n      highest
        local request that requests a different action exists,\n      then the top-priority
        global request SHALL be determined by the\n      following rules:\n      *
        \ For MS requests, the MS-W request SHALL be considered to have a\n         higher
        priority than the MS-P request.  The node that has the\n         local MS-W
        request SHALL maintain the local MS-W request as the\n         top-priority
        global request.  The other node that has the local\n         MS-P request
        SHALL cancel the MS-P command and SHALL generate\n         \"Operator Clear\"
        internally as the top-priority global request.\n      *  For SD requests,
        the SD on the standby path (the path from\n         which the selector does
        not select the user data traffic) SHALL\n         be considered to have a
        higher priority than the SD on the\n         active path (the path from which
        the selector selects the user\n         data traffic) regardless of its origin
        (local or remote\n         message).  The node that has the SD on the standby
        path SHALL\n         maintain the local SD on the standby path request as
        the top-\n         priority global request.  The other node that has local
        SD on\n         the active path SHALL use the remote SD on the standby path
        as\n         the top-priority global request to lookup the state transition\n
        \        table.  The differentiation of the active and standby paths is\n
        \        based upon which path had been selected for the user data\n         traffic
        when each node detected its local SD.\n"
      title: 10.2.1.  Equal-Priority Requests
    title: 10.2.  Priorities of Local Inputs and Remote Requests
  - contents:
    - "10.3.  Acceptance and Retention of Local Inputs\n   A local input indicating
      a defect, such as SF-P, SF-W, SD-P, and\n   SD-W, SHALL be accepted and retained
      persistently in the Local\n   Request Logic as long as the defect condition
      exists.  If there is\n   any higher-priority local input than the local defect
      input, the\n   higher-priority local input is passed to the PSC Control Logic
      as the\n   highest local request, but the local defect input cannot be removed\n
      \  but remains in the Local Request Logic.  When the higher-priority\n   local
      input is cleared, the local defect will become the highest\n   local request
      if the defect condition still exists.\n   The Operator Clear (OC) command, SFDc,
      and WTR Timer Expiry are not\n   persistent.  Once they appear to the Local
      Request Logic and complete\n   all the operations in the protection-switching
      control, they SHALL\n   disappear.\n   The LO, FS, MS, and EXER commands SHALL
      be rejected if there is any\n   higher-priority local input in the Local Request
      Logic.  If a new\n   higher-priority local request (including an operator command)
      is\n   accepted, any previous lower-priority local operator command SHALL be\n
      \  cancelled.  When any higher-priority remote request is received, a\n   lower-priority
      local operator command SHALL be cancelled.  The\n   cancelled operator command
      is cleared.  If the operators wish to\n   renew the cancelled command, then
      they should reissue the command.\n"
    title: 10.3.  Acceptance and Retention of Local Inputs
  title: 10.  PSC Protocol in APS Mode
- contents:
  - "11.  State Transition Tables in APS Mode\n   When there is a change in the highest
    local request or in remote PSC\n   messages, the top-priority global request SHALL
    be evaluated, and the\n   state transition tables SHALL be looked up in the PSC
    Control Logic.\n   The following rules are applied to the operation related to
    the state\n   transition table lookup.\n   o  If the top-priority global request,
    which determines the state\n      transition, is the highest local request, the
    local state\n      transition table in Section 11.1 SHALL be used to decide the
    next\n      state of the node.  Otherwise, the remote state transition table\n
    \     in Section 11.2 SHALL be used.\n   o  If in remote state, the highest local
    defect condition (SF-P,\n      SF-W, SD-P, or SD-W) SHALL always be reflected
    in the Request and\n      FPath fields.\n   o  For the node currently in the local
    state, if the top-priority\n      global request is changed to OC or SFDc, causing
    the next state to\n      be Normal, WTR, or DNR, then all the local and remote
    requests\n      SHALL be re-evaluated as if the node is in the state specified
    in\n      the footnotes to the state transition tables, before deciding the\n
    \     final state.  If there are no active requests, the node enters the\n      state
    specified in the footnotes to the state transition tables.\n      This re-evaluation
    is an internal operation confined within the\n      local node, and the PSC messages
    are generated according to the\n      final state.\n   o  The WTR timer is started
    only when the node that has recovered\n      from a local failure or degradation
    enters the WTR state.  A node\n      that is entering into the WTR state due to
    a remote WTR message\n      does not start the WTR timer.  The WTR timer SHALL
    be stopped when\n      any local or remote request triggers the state change out
    of the\n      WTR state.\n   The extended states, as they appear in the table,
    are as follows:\n   N        Normal state\n   UA:LO:L  Unavailable state due to
    local LO command\n   UA:P:L   Unavailable state due to local SF-P\n   UA:DP:L
    \ Unavailable state due to local SD-P\n   UA:LO:R  Unavailable state due to remote
    LO message\n   UA:P:R   Unavailable state due to remote SF-P message\n   UA:DP:R
    \ Unavailable state due to remote SD-P message\n   PF:W:L   Protecting Failure
    state due to local SF-W\n   PF:DW:L  Protecting Failure state due to local SD-W\n
    \  PF:W:R   Protecting Failure state due to remote SF-W message\n   PF:DW:R  Protecting
    Failure state due to remote SD-W message\n   SA:F:L   Switching Administrative
    state due to local FS command\n   SA:MW:L  Switching Administrative state due
    to local MS-W command\n   SA:MP:L  Switching Administrative state due to local
    MS-P command\n   SA:F:R   Switching Administrative state due to remote FS message\n
    \  SA:MW:R  Switching Administrative state due to remote MS-W message\n   SA:MP:R
    \ Switching Administrative state due to remote MS-P message\n   WTR      Wait-to-Restore
    state\n   DNR      Do-not-Revert state\n   E::L     Exercise state due to local
    EXER command\n   E::R     Exercise state due to remote EXER message\n   Each state
    corresponds to the transmission of a particular set of\n   Request, FPath, and
    Path fields.  The table below lists the message\n   that is generally sent in
    each particular state.  If the message to\n   be sent in a particular state deviates
    from the table below, it is\n   noted in the footnotes of the state transition
    tables.\n   State    Request(FPath,Path)\n   -------  ------------------------------------\n
    \  N        NR(0,0)\n   UA:LO:L  LO(0,0)\n   UA:P:L   SF(0,0)\n   UA:DP:L  SD(0,0)\n
    \  UA:LO:R  highest local request(local FPath,0)\n   UA:P:R   highest local request(local
    FPath,0)\n   UA:DP:R  highest local request(local FPath,0)\n   PF:W:L   SF(1,1)\n
    \  PF:DW:L  SD(1,1)\n   PF:W:R   highest local request(local FPath,1)\n   PF:DW:R
    \ highest local request(local FPath,1)\n   SA:F:L   FS(1,1)\n   SA:MW:L  MS(0,0)\n
    \  SA:MP:L  MS(1,1)\n   SA:F:R   highest local request(local FPath,1)\n   SA:MW:R
    \ NR(0,0)\n   SA:MP:R  NR(0,1)\n   WTR      WTR(0,1)\n   DNR      DNR(0,1)\n   E::L
    \    EXER(0,x), where x is the existing Path value\n                       when
    Exercise command is issued.\n   E::R     RR(0,x), where x is the existing Path
    value\n                     when RR message is generated.\n   Some operation examples
    of APS mode are shown in Appendix D.\n   In the state transition tables below,
    the letter 'i' stands for\n   \"ignore\" and is an indication to remain in the
    current state and\n   continue transmitting the current PSC message\n"
  - contents:
    - "11.1.  State Transition by Local Inputs\n           | OC  | LO      | SFDc
      | SF-P   | FS     | SF-W   |\n   --------+-----+---------+------+--------+--------+--------+\n
      \  N       | i   | UA:LO:L | i    | UA:P:L | SA:F:L | PF:W:L |\n   UA:LO:L |
      (1) | i       | i    | i      | i      | i      |\n   UA:P:L  | i   | UA:LO:L
      | (1)  | i      | i      | i      |\n   UA:DP:L | i   | UA:LO:L | (1)  | UA:P:L
      | SA:F:L | PF:W:L |\n   UA:LO:R | i   | UA:LO:L | i    | UA:P:L | i      | PF:W:L
      |\n   UA:P:R  | i   | UA:LO:L | i    | UA:P:L | i      | PF:W:L |\n   UA:DP:R
      | i   | UA:LO:L | i    | UA:P:L | SA:F:L | PF:W:L |\n   PF:W:L  | i   | UA:LO:L
      | (2)  | UA:P:L | SA:F:L | i      |\n   PF:DW:L | i   | UA:LO:L | (2)  | UA:P:L
      | SA:F:L | PF:W:L |\n   PF:W:R  | i   | UA:LO:L | i    | UA:P:L | SA:F:L | PF:W:L
      |\n   PF:DW:R | i   | UA:LO:L | i    | UA:P:L | SA:F:L | PF:W:L |\n   SA:F:L
      \ | (3) | UA:LO:L | i    | UA:P:L | i      | i      |\n   SA:MW:L | (1) | UA:LO:L
      | i    | UA:P:L | SA:F:L | PF:W:L |\n   SA:MP:L | (3) | UA:LO:L | i    | UA:P:L
      | SA:F:L | PF:W:L |\n   SA:F:R  | i   | UA:LO:L | i    | UA:P:L | SA:F:L | PF:W:L
      |\n   SA:MW:R | i   | UA:LO:L | i    | UA:P:L | SA:F:L | PF:W:L |\n   SA:MP:R
      | i   | UA:LO:L | i    | UA:P:L | SA:F:L | PF:W:L |\n   WTR     | (4) | UA:LO:L
      | i    | UA:P:L | SA:F:L | PF:W:L |\n   DNR     | i   | UA:LO:L | i    | UA:P:L
      | SA:F:L | PF:W:L |\n   E::L    | (5) | UA:LO:L | i    | UA:P:L | SA:F:L | PF:W:L
      |\n   E::R    | i   | UA:LO:L | i    | UA:P:L | SA:F:L | PF:W:L |\n"
    - "(Continued)\n           | SD-P    | SD-W    | MS-W    | MS-P    | WTRExp |
      EXER\n   --------+---------+---------+---------+---------+--------+------\n
      \  N       | UA:DP:L | PF:DW:L | SA:MW:L | SA:MP:L | i      | E::L\n   UA:LO:L
      | i       | i       | i       | i       | i      | i\n   UA:P:L  | i       |
      i       | i       | i       | i      | i\n   UA:DP:L | i       | i       | i
      \      | i       | i      | i\n   UA:LO:R | UA:DP:L | PF:DW:L | i       | i
      \      | i      | i\n   UA:P:R  | UA:DP:L | PF:DW:L | i       | i       | i
      \     | i\n   UA:DP:R | UA:DP:L | PF:DW:L | i       | i       | i      | i\n
      \  PF:W:L  | i       | i       | i       | i       | i      | i\n   PF:DW:L
      | i       | i       | i       | i       | i      | i\n   PF:W:R  | UA:DP:L |
      PF:DW:L | i       | i       | i      | i\n   PF:DW:R | UA:DP:L | PF:DW:L | i
      \      | i       | i      | i\n   SA:F:L  | i       | i       | i       | i
      \      | i      | i\n   SA:MW:L | UA:DP:L | PF:DW:L | i       | i       | i
      \     | i\n   SA:MP:L | UA:DP:L | PF:DW:L | i       | i       | i      | i\n
      \  SA:F:R  | UA:DP:L | PF:DW:L | i       | i       | i      | i\n   SA:MW:R
      | UA:DP:L | PF:DW:L | SA:MW:L | i       | i      | i\n   SA:MP:R | UA:DP:L |
      PF:DW:L | i       | SA:MP:L | i      | i\n   WTR     | UA:DP:L | PF:DW:L | SA:MW:L
      | SA:MP:L | (6)    | i\n   DNR     | UA:DP:L | PF:DW:L | SA:MW:L | SA:MP:L |
      i      | E::L\n   E::L    | UA:DP:L | PF:DW:L | SA:MW:L | SA:MP:L | i      |
      i\n   E::R    | UA:DP:L | PF:DW:L | SA:MW:L | SA:MP:L | i      | E::L\n   NOTES:\n
      \  (1)  Re-evaluate to determine the final state as if the node is in\n        the
      Normal state.  If there are no active requests, the node\n        enters the
      Normal State.\n   (2)  In the case that both local input after SFDc and the
      last\n        received remote message are NR, the node enters into the WTR\n
      \       state when the domain is configured for revertive behavior, or\n        the
      node enters into the DNR state when the domain is configured\n        for non-revertive
      behavior.  In all the other cases, where one\n        or more active requests
      exist, re-evaluate to determine the\n        final state as if the node is in
      the Normal state.\n   (3)  Re-evaluate to determine final state as if the node
      is in the\n        Normal state when the domain is configured for revertive\n
      \       behavior, or as if the node is in the DNR state when the domain\n        is
      configured for non-revertive behavior.  If there are no\n        active requests,
      the node enters either the Normal state when\n        the domain is configured
      for revertive behavior or the DNR state\n        when the domain is configured
      for non-revertive behavior.\n   (4)  Remain in the WTR state and send an NR(0,1)
      message.  Stop the\n        WTR timer if it is running.  In APS mode, OC can
      cancel the WTR\n        timer and hasten the state transition to the Normal
      state as in\n        other transport networks.\n   (5)  If Path value is 0,
      re-evaluate to determine final state as if\n        the node is in the Normal
      state.  If Path value is 1,\n        re-evaluate to determine final state as
      if the node is in the\n        DNR state.  If there are no active requests,
      the node enters the\n        Normal state when Path value is 0, or the DNR state
      when Path\n        value is 1.\n   (6)  Remain in the WTR state and send an
      NR(0,1) message.\n"
    title: 11.1.  State Transition by Local Inputs
  - contents:
    - "11.2.  State Transition by Remote Messages\n           | LO      | SF-P   |
      FS     | SF-W   | SD-P    | SD-W    |\n   --------+---------+--------+--------+--------+---------+---------+\n
      \  N       | UA:LO:R | UA:P:R | SA:F:R | PF:W:R | UA:DP:R | PF:DW:R |\n   UA:LO:L
      | i       | i      | i      | i      | i       | i       |\n   UA:P:L  | UA:LO:R
      | i      | i      | i      | i       | i       |\n   UA:DP:L | UA:LO:R | UA:P:R
      | SA:F:R | PF:W:R | i       | (7)     |\n   UA:LO:R | i       | UA:P:R | SA:F:R
      | PF:W:R | UA:DP:R | PF:DW:R |\n   UA:P:R  | UA:LO:R | i      | SA:F:R | PF:W:R
      | UA:DP:R | PF:DW:R |\n   UA:DP:R | UA:LO:R | UA:P:R | SA:F:R | PF:W:R | i       |
      PF:DW:R |\n   PF:W:L  | UA:LO:R | UA:P:R | SA:F:R | i      | i       | i       |\n
      \  PF:DW:L | UA:LO:R | UA:P:R | SA:F:R | PF:W:R | (8)     | i       |\n   PF:W:R
      \ | UA:LO:R | UA:P:R | SA:F:R | i      | UA:DP:R | PF:DW:R |\n   PF:DW:R | UA:LO:R
      | UA:P:R | SA:F:R | PF:W:R | UA:DP:R | i       |\n   SA:F:L  | UA:LO:R | UA:P:R
      | i      | i      | i       | i       |\n   SA:MW:L | UA:LO:R | UA:P:R | SA:F:R
      | PF:W:R | UA:DP:R | PF:DW:R |\n   SA:MP:L | UA:LO:R | UA:P:R | SA:F:R | PF:W:R
      | UA:DP:R | PF:DW:R |\n   SA:F:R  | UA:LO:R | UA:P:R | i      | PF:W:R | UA:DP:R
      | PF:DW:R |\n   SA:MW:R | UA:LO:R | UA:P:R | SA:F:R | PF:W:R | UA:DP:R | PF:DW:R
      |\n   SA:MP:R | UA:LO:R | UA:P:R | SA:F:R | PF:W:R | UA:DP:R | PF:DW:R |\n   WTR
      \    | UA:LO:R | UA:P:R | SA:F:R | PF:W:R | UA:DP:R | PF:DW:R |\n   DNR     |
      UA:LO:R | UA:P:R | SA:F:R | PF:W:R | UA:DP:R | PF:DW:R |\n   E::L    | UA:LO:R
      | UA:P:R | SA:F:R | PF:W:R | UA:DP:R | PF:DW:R |\n   E::R    | UA:LO:R | UA:P:R
      | SA:F:R | PF:W:R | UA:DP:R | PF:DW:R |\n"
    - "(Continued)\n           | MS-W    | MS-P    | WTR | EXER | RR | DNR  | NR\n
      \  --------+---------+---------+-----+------+----+------+----\n   N       |
      SA:MW:R | SA:MP:R | i   | E::R | i  | i    | i\n   UA:LO:L | i       | i       |
      i   | i    | i  | i    | i\n   UA:P:L  | i       | i       | i   | i    | i
      \ | i    | i\n   UA:DP:L | i       | i       | i   | i    | i  | i    | i\n
      \  UA:LO:R | SA:MW:R | SA:MP:R | i   | E::R | i  | i    | N\n   UA:P:R  | SA:MW:R
      | SA:MP:R | i   | E::R | i  | i    | N\n   UA:DP:R | SA:MW:R | SA:MP:R | i   |
      E::R | i  | i    | N\n   PF:W:L  | i       | i       | i   | i    | i  | i    |
      i\n   PF:DW:L | i       | i       | i   | i    | i  | i    | i\n   PF:W:R  |
      SA:MW:R | SA:MP:R | (9) | E::R | i  | (10) | (11)\n   PF:DW:R | SA:MW:R | SA:MP:R
      | (9) | E::R | i  | (10) | (11)\n   SA:F:L  | i       | i       | i   | i    |
      i  | i    | i\n   SA:MW:L | i       | i       | i   | i    | i  | i    | i\n
      \  SA:MP:L | i       | i       | i   | i    | i  | i    | i\n   SA:F:R  | SA:MW:R
      | SA:MP:R | i   | E::R | i  | DNR  | N\n   SA:MW:R | i       | SA:MP:R | i   |
      E::R | i  | i    | N\n   SA:MP:R | SA:MW:R | i       | i   | E::R | i  | DNR
      \ | N\n   WTR     | SA:MW:R | SA:MP:R | i   | i    | i  | i    | (12)\n   DNR
      \    | SA:MW:R | SA:MP:R | (13)| E::R | i  | i    | i\n   E::L    | SA:MW:R
      | SA:MP:R | i   | i    | i  | i    | i\n   E::R    | SA:MW:R | SA:MP:R | i   |
      i    | i  | DNR  | N\n   NOTES:\n   (7)  If the received SD-W message has Path=0,
      ignore the message.  If\n        the received SD-W message has Path=1, go to
      the PF:DW:R state\n        and transmit an SD(0,1) message.\n   (8)  If the
      received SD-P message has Path=1, ignore the message.  If\n        the received
      SD-P message has Path=0, go to the UA:DP:R state\n        and transmit an SD(1,0)
      message.\n   (9)  Transition to the WTR state and continue to send the current\n
      \       message.\n   (10) Transition to the DNR state and continue to send the
      current\n        message.\n   (11) If the received NR message has Path=1, transition
      to the WTR\n        state if the domain is configured for revertive behavior,
      else\n        transition to the DNR state.  If the received NR message has\n
      \       Path=0, transition to the Normal state.\n   (12) If the receiving node's
      WTR timer is running, maintain the\n        current state and message.  If the
      WTR timer is not running,\n        transition to the Normal state.\n   (13)
      Transit to the WTR state and send an NR(0,1) message.  The WTR\n        timer
      is not initiated.\n"
    title: 11.2.  State Transition by Remote Messages
  - contents:
    - "11.3.  State Transition for 1+1 Unidirectional Protection\n   The state transition
      tables given in Sections 11.1 and 11.2 are for\n   bidirectional protection
      switching, where remote PSC protocol\n   messages are used to determine the
      protection-switching actions.  1+1\n   unidirectional protection switching does
      not require the remote\n   information in the PSC protocol message and acts
      upon local inputs\n   only.  The state transition by local inputs in Section
      11.1 SHALL be\n   reused for 1+1 unidirectional protection under the following\n
      \  conditions:\n   o  The value of Request field in the received remote message
      is\n      ignored and always assumed to be no request.\n   o  Replace footnote
      (4) with \"Stop the WTR timer and transit to the\n      Normal state.\"\n   o
      \ Replace footnote (6) with \"Transit to the Normal state.\"\n   o  Exercise
      command is not relevant.\n"
    title: 11.3.  State Transition for 1+1 Unidirectional Protection
  title: 11.  State Transition Tables in APS Mode
- contents:
  - "12.  Provisioning Mismatch and Protocol Failure in APS Mode\n   The remote PSC
    message that is received from the remote node is\n   subject to the detection
    of provisioning mismatch and protocol\n   failure conditions.  In APS mode, provisioning
    mismatches are handled\n   as follows:\n   o  If the PSC message is received from
    the working path due to\n      working/protection path configuration mismatch,
    the node MUST\n      alert the operator and MUST NOT perform any protection switching\n
    \     until the operator resolves this path configuration mismatch.\n   o  In
    the case that the mismatch happens in the two-bit \"Protection\n      Type (PT)\"
    field, which indicates permanent/selector bridge type\n      and uni/bidirectional
    switching type:\n      *  If the value of the PT field of one side is 2 (i.e.,
    selector\n         bridge) and that of the other side is 1 or 3 (i.e., permanent\n
    \        bridge), then this event MUST be notified to the operator and\n         each
    node MUST NOT perform any protection switching until the\n         operator resolves
    this bridge type mismatch.\n      *  If the bridge type matches but the switching
    type mismatches,\n         i.e., one side has PT=1 (unidirectional switching)
    while the\n         other side has PT=2 or 3 (bidirectional switching), then the\n
    \        node provisioned for bidirectional switching SHOULD fall back\n         to
    unidirectional switching to allow interworking.  The node\n         SHOULD notify
    the operator of this event.\n   o  If the \"Revertive (R)\" bit mismatches, two
    sides will interwork\n      and traffic is protected according to the state transition\n
    \     definition given in Section 11.  The node SHOULD notify the\n      operator
    of this event.\n   o  If the Capabilities TLV mismatches, the node MUST alert
    the\n      operator and MUST NOT perform any protection switching until the\n
    \     operator resolves the mismatch in the Capabilities TLV.\n   The following
    are the protocol failure situations and the actions to\n   be taken:\n   o  No
    match in sent \"Data Path (Path)\" and received \"Data Path\n      (Path)\" for
    more than 50 ms: The node MAY continue to perform\n      protection switching
    and SHOULD notify the operator of this event.\n   o  No PSC message is received
    on the protection path during at least\n      3.5 times the long PSC message interval
    (e.g., at least 17.5\n      seconds with a default message interval of 5 seconds),
    and there\n      is no defect on the protection path: The node MUST alert the\n
    \     operator and MUST NOT perform any protection switching until the\n      operator
    resolves this defect.\n"
  title: 12.  Provisioning Mismatch and Protocol Failure in APS Mode
- contents:
  - "13.  Security Considerations\n   This document introduces no new security risks.
    \ [RFC6378] points out\n   that MPLS relies on assumptions about the difficulty
    of traffic\n   injection and assumes that the control plane does not have end-to-end\n
    \  security.  [RFC5920] describes MPLS security issues and generic\n   methods
    for securing traffic privacy and integrity.  MPLS use should\n   conform to such
    advice.\n"
  title: 13.  Security Considerations
- contents:
  - '14.  IANA Considerations

    '
  - contents:
    - "14.1.  MPLS PSC Request Registry\n   In the \"Generic Associated Channel (G-ACh)
      Parameters\" registry, IANA\n   maintains the \"MPLS PSC Request Registry\".\n
      \  IANA has assigned the following two new code points from this\n   registry.\n
      \     Value Description           Reference\n      ----- ---------------------
      ---------------\n       2    Reverse Request       (this document)\n       3
      \   Exercise              (this document)\n"
    title: 14.1.  MPLS PSC Request Registry
  - contents:
    - "14.2.  MPLS PSC TLV Registry\n   In the \"Generic Associated Channel (G-ACh)
      Parameters\" registry, IANA\n   maintains the \"MPLS PSC TLV Registry\".\n   This
      document defines the following new value for the Capabilities\n   TLV type in
      the \"MPLS PSC TLV Registry\".\n      Value  Description           Reference\n
      \     ------ --------------------- ---------------\n        1    Capabilities
      \         (this document)\n"
    title: 14.2.  MPLS PSC TLV Registry
  - contents:
    - "14.3.  MPLS PSC Capability Flag Registry\n   IANA has created and now maintains
      a new registry within the \"Generic\n   Associated Channel (G-ACh) Parameters\"
      registry called \"MPLS PSC\n   Capability Flag Registry\".  All flags within
      this registry SHALL be\n   allocated according to the \"Standards Action\" procedures
      as specified\n   in RFC 5226 [RFC5226].\n   The length of each flag MUST be
      a multiple of 4 octets.  This\n   document defines 4-octet flags.  Flags greater
      than 4 octets SHALL be\n   used only if more than 32 Capabilities need to be
      defined.  The flags\n   defined in this document are:\n   Bit  Hex Value  Capability
      \                         Reference\n   ---- ---------- -----------------------------------
      ---------------\n    0   0x80000000 priority modification               (this
      document)\n    1   0x40000000 non-revertive behavior modification (this document)\n
      \   2   0x20000000 support of MS-W command             (this document)\n    3
      \  0x10000000 support of protection against SD    (this document)\n    4   0x08000000
      support of EXER command             (this document)\n   5-31            Unassigned
      \                         (this document)\n"
    title: 14.3.  MPLS PSC Capability Flag Registry
  title: 14.  IANA Considerations
- contents:
  - "15.  Acknowledgements\n   The authors would like to thank Yaacov Weingarten,
    Yuji Tochio,\n   Malcolm Betts, Ross Callon, Qin Wu, and Xian Zhang for their
    valuable\n   comments and suggestions on this document.\n   We would also like
    to acknowledge explicit text provided by Loa\n   Andersson and Adrian Farrel.\n"
  title: 15.  Acknowledgements
- contents:
  - '16.  References

    '
  - contents:
    - "16.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use
      in RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March
      1997.\n   [RFC5226]  Narten, T. and H. Alvestrand, \"Guidelines for Writing
      an\n              IANA Considerations Section in RFCs\", BCP 26, RFC 5226,\n
      \             May 2008.\n   [RFC5654]  Niven-Jenkins, B., Brungard, D., Betts,
      M., Sprecher, N.,\n              and S. Ueno, \"Requirements of an MPLS Transport
      Profile\",\n              RFC 5654, September 2009.\n   [RFC6378]  Weingarten,
      Y., Bryant, S., Osborne, E., Sprecher, N., and\n              A. Fulignoli,
      \"MPLS Transport Profile (MPLS-TP) Linear\n              Protection\", RFC 6378,
      October 2011.\n"
    title: 16.1.  Normative References
  - contents:
    - "16.2.  Informative References\n   [G8031]    International Telecommunication
      Union, \"Ethernet Linear\n              Protection Switching\", ITU-T Recommendation
      G.8031/Y.1342,\n              June 2011.\n   [G841]     International Telecommunication
      Union, \"Types and\n              characteristics of SDH network protection
      architectures\",\n              ITU-T Recommendation G.841, October 1998.\n
      \  [G873.1]   International Telecommunication Union, \"Optical Transport\n              Network
      (OTN): Linear protection\", ITU-T Recommendation\n              G.873.1, July
      2011.\n   [RFC4427]  Mannie, E. and D. Papadimitriou, \"Recovery (Protection
      and\n              Restoration) Terminology for Generalized Multi-Protocol\n
      \             Label Switching (GMPLS)\", RFC 4427, March 2006.\n   [RFC5920]
      \ Fang, L., \"Security Framework for MPLS and GMPLS\n              Networks\",
      RFC 5920, July 2010.\n   [RFC6372]  Sprecher, N. and A. Farrel, \"MPLS Transport
      Profile\n              (MPLS-TP) Survivability Framework\", RFC 6372, September\n
      \             2011.\n"
    title: 16.2.  Informative References
  title: 16.  References
- contents:
  - "Appendix A.  An Example of an Out-of-Service Scenario\n   The sequence diagram
    shown is an example of the out-of-service\n   scenarios based on the priority
    level defined in [RFC6378].  The\n   first PSC message that differs from the previous
    PSC message is\n   shown.\n                       A                  Z\n                       |
    \                 |\n                   (1) |-- NR(0,0) ------>| (1)\n                       |<-----
    NR(0,0) ---|\n                       |                  |\n                       |
    \                 |\n                       | (FS issued at Z) | (2)\n                   (3)
    |<------ FS(1,1) --|\n                       |-- NR(0,1) ------>|\n                       |
    \                 |\n                       |                  |\n                   (4)
    | (SF on P(A<-Z))  |\n                       |                  |\n                       |
    \                 |\n                       | (Clear FS at Z)  | (5)\n                   (6)
    |   X <- NR(0,0) --|\n                       |                  |\n                       |
    \                 |\n   (1)  Each end is in the Normal state and transmits NR(0,0)
    messages.\n   (2)  When a FS command is issued at node Z, node Z goes into local\n
    \       Protecting Administrative state (PA:F:L) and begins transmission\n        of
    an FS(1,1) message.\n   (3)  A remote FS message causes node A to go into remote
    Protecting\n        Administrative state (PA:F:R), and node A begins transmitting\n
    \       NR(0,1) messages.\n   (4)  When node A detects a unidirectional SF-P,
    node A keeps sending\n        an NR(0,1) message because SF-P is ignored under
    the PA:F:R\n        state.\n   (5)  When a Clear command is issued at node Z,
    node Z goes into the\n        Normal state and begins transmission of NR(0,0)
    messages.\n   (6)  But, node A cannot receive PSC message because of local\n        unidirectional
    SF-P.  Because no valid PSC message is received\n        over a period of several
    successive message intervals, the last\n        valid received message remains
    applicable, and the node A\n        continue to transmit an NR(0,1) message in
    the PA:F:R state.\n   Now, there exists a mismatch between the selector and bridge\n
    \  positions of node A (transmitting an NR(0,1) message) and node Z\n   (transmitting
    an NR(0,0) message).  It results in an out-of-service\n   situation even when
    there is neither SF-W nor FS.\n"
  title: Appendix A.  An Example of an Out-of-Service Scenario
- contents:
  - "Appendix B.  An Example of a Sequence Diagram Showing the Problem with\n             the
    Priority Level of SFc\n   An example of a sequence diagram showing the problem
    with the\n   priority level of SFc defined in [RFC6378] is given below.  The\n
    \  following sequence diagram depicts the case when the bidirectional\n   signal
    fails.  However, other cases with unidirectional signal fails\n   can result in
    the same problem.  The first PSC message that differs\n   from the previous PSC
    message is shown.\n                       A                  Z\n                       |
    \                 |\n                   (1) |-- NR(0,0) ------>| (1)\n                       |<-----
    NR(0,0) ---|\n                       |                  |\n                       |
    \                 |\n                   (2) | (SF on P(A<->Z)) | (2)\n                       |--
    SF(0,0) ------>|\n                       |<------ SF(0,0) --|\n                       |
    \                 |\n                       |                  |\n                   (3)
    | (SF on W(A<->Z)) | (3)\n                       |                  |\n                       |
    \                 |\n                   (4) |   (Clear SF-P)   | (4)\n                       |
    \                 |\n                       |                  |\n                   (5)
    |   (Clear SF-W)   | (5)\n                       |                  |\n                       |
    \                 |\n   (1)  Each end is in the Normal state and transmits NR(0,0)
    messages.\n   (2)  When SF-P occurs, each node enters into the UA:P:L state and\n
    \       transmits SF(0,0) messages.  Traffic remains on the working\n        path.\n
    \  (3)  When SF-W occurs, each node remains in the UA:P:L state as SF-W\n        has
    a lower priority than SF-P.  Traffic is still on the working\n        path.  Traffic
    cannot be delivered, as both the working path and\n        the protection path
    are experiencing signal fails.\n   (4)  When SF-P is cleared, the local \"Clear
    SF-P\" request cannot be\n        presented to the PSC Control Logic, which takes
    the highest\n        local request and runs the PSC state machine, since the priority\n
    \       of \"Clear SF-P\" is lower than that of SF-W.  Consequently, there\n        is
    no change in state, and the selector and/or bridge keep\n        pointing at the
    working path, which has SF condition.\n   Now, traffic cannot be delivered while
    the protection path is\n   recovered and available.  It should be noted that the
    same problem\n   will occur in the case that the sequence of SF-P and SF-W events
    is\n   changed.\n   If we further continue with this sequence to see what will
    happen\n   after SF-W is cleared:\n   (5)  When SF-W is cleared, the local \"Clear
    SF-W\" request can be\n        passed to the PSC Control Logic, as there is no
    higher-priority\n        local input, but it will be ignored in the PSC Control
    Logic\n        according to the state transition definition in [RFC6378].\n        There
    will be no change in state or protocol message\n        transmitted.\n   As SF-W
    is now cleared and the selector and/or bridge are still\n   pointing at the working
    path, traffic delivery is resumed.  However,\n   each node is in the UA:P:L state
    and transmitting SF(0,0) messages,\n   while there exists no outstanding request
    for protection switching.\n   Moreover, any future legitimate protection-switching
    requests, such\n   as SF-W, will be rejected as each node thinks the protection
    path is\n   unavailable.\n"
  title: Appendix B.  An Example of a Sequence Diagram Showing the Problem with
- contents:
  - "Appendix C.  Freeze Command\n   The \"Freeze\" command applies only to the local
    node of the protection\n   group and is not signaled to the remote node.  This
    command freezes\n   the state of the protection group.  Until the Freeze is cleared,\n
    \  additional local commands are rejected, and condition changes and\n   received
    PSC information are ignored.\n   The \"Clear Freeze\" command clears the local
    freeze.  When the Freeze\n   command is cleared, the state of the protection group
    is recomputed\n   based on the persistent condition of the local triggers.\n   Because
    the freeze is local, if the freeze is issued at one end only,\n   a failure of
    protocol can occur as the other end is open to accept\n   any operator command
    or a fault condition.\n"
  title: Appendix C.  Freeze Command
- contents:
  - "Appendix D.  Operation Examples of the APS Mode\n   The sequence diagrams shown
    in this section are only a few examples\n   of the APS mode operations.  The first
    PSC protocol message that\n   differs from the previous message is shown.  The
    operation of the\n   hold-off timer is omitted.  The Request, FPath, and Path
    fields whose\n   values are changed during PSC message exchange are shown.  For
    an\n   example, SF(1,0) represents a PSC message with the following field\n   values:
    Request=SF, FPath=1, and Path=0.  The values of the other\n   fields remain unchanged
    from the initial configuration.  W(A->Z) and\n   P(A->Z) indicate the working
    path and the protection path in the\n   direction of A to Z, respectively.\n   Example
    1.  1:1 bidirectional protection switching (revertive\n   operation) - Unidirectional
    SF case\n                       A                  Z\n                       |
    \                 |\n                   (1) |<---- NR(0,0)---->| (1)\n                       |
    \                 |\n                       |                  |\n                   (2)
    | (SF on W(Z->A))  |\n                       |---- SF(1,1)----->| (3)\n                   (4)
    |<----- NR(0,1)----|\n                       |                  |\n                       |
    \                 |\n                   (5) |  (Clear SF-W)    |\n                       |----
    WTR(0,1)---->|\n                      /|                  |\n                     |
    |                  |\n             WTR timer |                  |\n                     |
    |                  |\n                      \\|                  |\n                   (6)
    |---- NR(0,1)----->| (7)\n                   (8) |<----- NR(0,0)----|\n                       |----
    NR(0,0)----->| (9)\n                       |                  |\n   (1)  The protected
    domain is operating without any defect, and the\n        working path is used
    for delivering the traffic in the Normal\n        state.\n   (2)  SF-W occurs
    in the Z to A direction.  Node A enters into the\n        PF:W:L state and generates
    an SF(1,1) message.  Both the\n        selector and bridge of node A are pointing
    at the protection\n        path.\n   (3)  Upon receiving an SF(1,1) message, node
    Z sets both the selector\n        and bridge to the protection path.  As there
    is no local request\n        in node Z, node Z generates an NR(0,1) message in
    the PF:W:R\n        state.\n   (4)  Node A confirms that the remote node is also
    selecting the\n        protection path.\n   (5)  Node A detects clearing of SF
    condition, starts the WTR timer,\n        and sends a WTR(0,1) message in the
    WTR state.\n   (6)  Upon expiration of the WTR timer, node A sets both the selector\n
    \       and bridge to the working path and sends an NR(0,1) message.\n   (7)  Node
    Z is notified that the remote request has been cleared.\n        Node Z transits
    to the Normal state and sends an NR(0,0)\n        message.\n   (8)  Upon receiving
    an NR(0,0) message, node A transits to the Normal\n        state and sends an
    NR(0,0) message.\n   (9)  It is confirmed that the remote node is also selecting
    the\n        working path.\n   Example 2.  1:1 bidirectional protection switching
    (revertive\n   operation) - Bidirectional SF case - Inconsistent WTR timers\n
    \                      A                  Z\n                       |                  |\n
    \                  (1) |<---- NR(0,0)---->| (1)\n                       |                  |\n
    \                      |                  |\n                   (2) | (SF on W(A<->Z))
    | (2)\n                       |<---- SF(1,1)---->|\n                       |                  |\n
    \                      |                  |\n                   (3) |   (Clear
    SF-W)   | (3)\n                       |<---- NR(0,1)---->|\n                   (4)
    |<--- WTR(0,1) --->| (4)\n                      /|                  |\\\n                     |
    |                  | |\n             WTR timer |                  | WTR timer\n
    \                    | |                  | |\n                     | |                  |/\n
    \                    | |<------ NR(0,1)---| (5)\n                     | |                  |\n
    \                     \\|                  |\n                   (6) |--- NR(0,1)------>|\n
    \                      |<------ NR(0,0)---| (7)\n                   (8) |--- NR(0,0)------>|\n
    \                      |                  |\n   (1)  Each end is in the Normal
    state and transmits NR(0,0) messages.\n   (2)  When SF-W occurs, each node enters
    into the PF:W:L state and\n        transmits SF(1,1) messages.  Traffic is switched
    to the\n        protection path.  Upon receiving an SF(1,1) message, each node\n
    \       confirms that the remote node is also sending and receiving the\n        traffic
    from the protection path.\n   (3)  When SF-W is cleared, each node transits to
    the PF:W:R state and\n        transmits NR(0,1) messages as the last received
    message is SF-W.\n   (4)  Upon receiving NR(0,1) messages, each node goes into
    the WTR\n        state, starts the WTR timer, and sends the WTR(0,1) messages.\n
    \  (5)  Upon expiration of the WTR timer in node Z, node Z sends an\n        NR(0,1)
    message as the last received APS message was WTR.  When\n        the NR(0,1) message
    arrives at node A, node A maintains the WTR\n        state and keeps sending current
    WTR messages as described in the\n        state transition table.\n   (6)  Upon
    expiration of the WTR timer in node A, node A sends an\n        NR(0,1) message.\n
    \  (7)  When the NR(0,1) message arrives at node Z, node Z moves to the\n        Normal
    state, sets both the selector and bridge to the working\n        path, and sends
    an NR(0,0) message.\n   (8)  The received NR(0,0) message causes node A to go
    to the Normal\n        state.  Now, the traffic is switched back to the working
    path.\n   Example 3.  1:1 bidirectional protection switching - R bit mismatch\n
    \  This example shows that both sides will interwork and the traffic is\n   protected
    when one side (node A) is configured as revertive operation\n   and the other
    (node Z) is configured as non-revertive operation.  The\n   interworking is covered
    in the state transition tables.\n           (revertive) A                  Z (non-revertive)\n
    \                      |                  |\n                   (1) |<---- NR(0,0)---->|
    (1)\n                       |                  |\n                       |                  |\n
    \                  (2) | (SF on W(A<->Z)) | (2)\n                       |<----
    SF(1,1)---->|\n                       |                  |\n                       |
    \                 |\n                   (3) |   (Clear SF-W)   | (3)\n                       |<----
    NR(0,1)---->|\n                   (4) |<----- DNR(0,1)---| (4)\n                      /|--
    WTR(0,1)------>|\n                     | |<----- NR(0,1)----| (5)\n                     |
    |                  |\n             WTR timer |                  |\n                     |
    |                  |\n                     | |                  |\n                      \\|
    \                 |\n                   (6) |--- NR(0,1)------>|\n                       |<------
    NR(0,0)---| (7)\n                   (8) |--- NR(0,0)------>|\n                       |
    \                 |\n   (1)  Each end is in the Normal state and transmits NR(0,0)
    messages.\n   (2)  When SF-W occurs, each node enters into the PF:W:L state and\n
    \       transmits SF(l,l) messages.  Traffic is switched to the\n        protection
    path.  Upon receiving an SF(1,1) message, each node\n        confirms that the
    remote node is also sending and receiving the\n        traffic on the protection
    path.\n   (3)  When SF-W is cleared, each node transits to the PF:W:R state and\n
    \       transmits NR(0,1) messages as the last received message is SF-W.\n   (4)
    \ Upon receiving NR(0,1) messages, node A goes into the WTR state,\n        starts
    the WTR timer, and sends WTR(0,1) messages.  At the same\n        time, node Z
    transits to the DNR state and sends a DNR(0,1)\n        message.\n   (5)  When
    the WTR message arrives at node Z, node Z transits to the\n        WTR state and
    sends an NR(0,1) message according to the state\n        transition table.  At
    the same time, the DNR message arrived at\n        node Z is ignored according
    to the state transition table.\n        Therefore, node Z, which is configured
    as non-revertive\n        operation, is operating as if in revertive operation.\n
    \  (6)  Upon expiration of the WTR timer in node A, node A sends an\n        NR(0,1)
    message.\n   (7)  When the NR(0,1) message arrives at node Z, node Z moves to
    the\n        Normal state, sets both the selector and bridge to the working\n
    \       path, and sends an NR(0,0) message.\n   (8)  The received NR(0,0) message
    causes node A to transit to the\n        Normal state.  Now, the traffic is switched
    back to the working\n        path.\n"
  title: Appendix D.  Operation Examples of the APS Mode
- contents:
  - "Authors' Addresses\n   Jeong-dong Ryoo (editor)\n   ETRI\n   218 Gajeongno\n
    \  Yuseong-gu, Daejeon  305-700\n   South Korea\n   Phone: +82-42-860-5384\n   EMail:
    ryoo@etri.re.kr\n   Eric Gray (editor)\n   Ericsson\n   EMail: eric.gray@ericsson.com\n
    \  Huub van Helvoort\n   Huawei Technologies\n   Karspeldreef 4,\n   Amsterdam
    1101 CJ\n   The Netherlands\n   Phone: +31 20 4300936\n   EMail: huub.van.helvoort@huawei.com\n
    \  Alessandro D'Alessandro\n   Telecom Italia\n   via Reiss Romoli, 274\n   Torino
    \ 10148\n   Italy\n   Phone: +39 011 2285887\n   EMail: alessandro.dalessandro@telecomitalia.it\n
    \  Taesik Cheung\n   ETRI\n   218 Gajeongno\n   Yuseong-gu, Daejeon  305-700\n
    \  South Korea\n   Phone: +82-42-860-5646\n   EMail: cts@etri.re.kr\n   Eric Osborne\n
    \  EMail: eric.osborne@notcom.com\n"
  title: Authors' Addresses
