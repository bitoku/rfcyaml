- title: __initial_text__
  contents:
  - '   Signaling Root-Initiated Point-to-Multipoint Pseudowire Using LDP

    '
- title: Abstract
  contents:
  - "Abstract\n   This document specifies a mechanism to signal Point-to-Multipoint\n\
    \   (P2MP) Pseudowire (PW) trees using LDP.  Such a mechanism is suitable\n  \
    \ for any Layer 2 VPN service requiring P2MP connectivity over an IP or\n   MPLS-enabled\
    \ PSN.  A P2MP PW established via the proposed mechanism\n   is root initiated.\
    \  This document updates RFC 7385 by reassigning the\n   reserved value 0xFF to\
    \ be the wildcard transport tunnel type.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 7841.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   https://www.rfc-editor.org/info/rfc8338.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2018 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (https://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .\
    \ . . . . .   2\n   2.  Terminology . . . . . . . . . . . . . . . . . . . . .\
    \ . . . .   4\n     2.1.  Requirements Language . . . . . . . . . . . . . . .\
    \ . . .   4\n     2.2.  Abbreviations . . . . . . . . . . . . . . . . . . . .\
    \ . .   4\n   3.  Signaling P2MP PW . . . . . . . . . . . . . . . . . . . . .\
    \ .   5\n     3.1.  PW Ingress-to-Egress Incompatibility Issues . . . . . . .\
    \   6\n     3.2.  P2MP PW FEC . . . . . . . . . . . . . . . . . . . . . . .  \
    \ 6\n       3.2.1.  P2MP PW Upstream FEC Element  . . . . . . . . . . . .   7\n\
    \       3.2.2.  P2P PW Downstream FEC Element . . . . . . . . . . . .  11\n  \
    \   3.3.  Typed Wildcard FEC Format for a New FEC . . . . . . . . .  11\n    \
    \ 3.4.  Group ID Usage  . . . . . . . . . . . . . . . . . . . . .  12\n     3.5.\
    \  Generic Label TLV . . . . . . . . . . . . . . . . . . . .  12\n   4.  LDP Capability\
    \ Negotiation  . . . . . . . . . . . . . . . . .  12\n   5.  P2MP PW Status  .\
    \ . . . . . . . . . . . . . . . . . . . . . .  14\n   6.  Security Considerations\
    \ . . . . . . . . . . . . . . . . . . .  14\n   7.  IANA Considerations . . .\
    \ . . . . . . . . . . . . . . . . . .  14\n     7.1.  FEC Type Name Space . .\
    \ . . . . . . . . . . . . . . . . .  15\n     7.2.  LDP TLV Type  . . . . . .\
    \ . . . . . . . . . . . . . . . .  15\n     7.3.  mLDP Opaque Value Element TLV\
    \ Type  . . . . . . . . . . .  15\n     7.4.  Selective Tree Interface Parameter\
    \ Sub-TLV Type . . . . .  15\n     7.5.  Wildcard PMSI Tunnel Type . . . . . .\
    \ . . . . . . . . . .  15\n   8.  References  . . . . . . . . . . . . . . . .\
    \ . . . . . . . . .  16\n     8.1.  Normative References  . . . . . . . . . .\
    \ . . . . . . . .  16\n     8.2.  Informative References  . . . . . . . . . .\
    \ . . . . . . .  17\n   Acknowledgments . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  18\n   Contributors  . . . . . . . . . . . . . . . . . . . . .\
    \ . . . . .  18\n   Authors' Addresses  . . . . . . . . . . . . . . . . . . .\
    \ . . . .  20\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   A Point-to-Multipoint (P2MP) Pseudowire (PW) emulates the\
    \ essential\n   attributes of a unidirectional P2MP Telecommunications service\
    \ such\n   as P2MP ATM over PSN.  A major difference between a Point-to-Point\n\
    \   (P2P) PW outlined in [RFC3985] and a P2MP PW is that the former is\n   intended\
    \ for bidirectional service whereas the latter is intended for\n   both unidirectional\
    \ and, optionally, bidirectional service.\n   Requirements for P2MP PWs are described\
    \ in [RFC7338].  P2MP PWs can\n   be constructed as either Single Segment Pseudowires\
    \ (P2MP SS-PWs) or\n   Multi-Segment Pseudowires (P2MP MS-PWs) as mentioned in\
    \ [RFC7338].\n   P2MP MS-PW is outside the scope of this document.  A reference\
    \ model\n   or a P2MP PW is depicted in Figure 1.  A transport Label Switched\n\
    \   Path (LSP) associated with a P2MP SS-PW SHOULD be a P2MP MPLS LSP\n   (i.e.,\
    \ P2MP Traffic Engineering (TE) tunnel established via RSVP-TE\n   [RFC4875] or\
    \ P2MP LSP established via Multipoint LDP (mLDP)\n   [RFC6388]) spanning from\
    \ the Root PE (Provider Edge) to the Leaf\n   PE(s) of the P2MP SS-PW tree.  For\
    \ example, in Figure 1, PW1 can be\n   associated with a P2MP TE tunnel or P2MP\
    \ LSP setup using mLDP\n   originating from PE1 and terminating at PE2, PE3, and\
    \ PE4.\n                 |<--------------P2MP PW---------------->|\n         \
    \ Native |                                       |  Native\n         Service |\
    \     |<--PSN1->|      |<--PSN2->|      |  Service\n          (AC)   V     V \
    \        V      V         V      V   (AC)\n            |    +-----+         +------+\
    \         +------+    |\n            |    |     |         |   P1 |=========|T-PE2\
    \ |AC3 |    +---+\n            |    |     |         |   .......PW1.........>|-------->|CE3|\n\
    \            |    |T-PE1|=========|   .  |=========|      |    |    +---+\n  \
    \          |    |  .......PW1........  |         +------+    |\n            |\
    \    |  .  |=========|   .  |         +------+    |\n            |    |  .  |\
    \         |   .  |=========|T-PE3 |AC4 |    +---+\n    +---+   |AC1 |  .  |  \
    \       |   .......PW1.........>|-------->|CE4|\n    |CE1|------->|...  |    \
    \     |      |=========|      |    |    +---+\n    +---+   |    |  .  |      \
    \   +------+         +------+    |\n            |    |  .  |         +------+\
    \         +------+    |\n            |    |  .  |=========|   P2 |=========|T-PE4\
    \ |AC5 |    +---+\n            |    |  .......PW1..............PW1.........>|-------->|CE5|\n\
    \            |    |     |=========|      |=========|      |    |    +---+\n  \
    \          |    +-----+         +------+         +------+    |\n             \
    \                Figure 1: P2MP PW\n   Mechanisms for establishing a P2P SS-PW\
    \ using LDP are described in\n   [RFC8077].  This document specifies a method\
    \ of signaling P2MP PW\n   using LDP.  In particular, this document defines a\
    \ new Forwarding\n   Equivalence Class (FEC), TLVs, parameters, and status codes\
    \ to\n   facilitate LDP signaling and maintaining P2MP PWs.\n   As outlined in\
    \ [RFC7338], even though the traffic flow from a Root PE\n   (R-PE) to Leaf PE(s)\
    \ (L-PEs) is P2MP in nature, it may be desirable\n   for any L-PE to send unidirectional\
    \ P2P traffic destined only to the\n   R-PE.  The proposed mechanism takes such\
    \ an option into\n   consideration.\n   The P2MP PW requires an MPLS LSP to carry\
    \ the PW traffic, and the\n   MPLS packets carrying the PW upstream label will\
    \ be encapsulated\n   according to the methods described in [RFC5332].\n"
- title: 2.  Terminology
  contents:
  - '2.  Terminology

    '
- title: 2.1.  Requirements Language
  contents:
  - "2.1.  Requirements Language\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\"\
    , \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"\
    NOT RECOMMENDED\", \"MAY\", and\n   \"OPTIONAL\" in this document are to be interpreted\
    \ as described in\n   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear\
    \ in all\n   capitals, as shown here.\n"
- title: 2.2.  Abbreviations
  contents:
  - "2.2.  Abbreviations\n   AGI:    Attachment Group Identifier\n   CE:     Customer\
    \ Edge\n   FEC:    Forwarding Equivalence Class\n   L-PE:   Leaf PE (egress PE)\n\
    \   LDP:    Label Distribution Protocol\n   LSP:    Label Switched Path\n   mLDP:\
    \   Multipoint Label Distribution Protocol (for P2MP/MP2MP LSP)\n   MS-PW:  Multi-Segment\
    \ Pseudowire\n   P2MP:   Point-to-Multipoint\n   P2P:    Point-to-Point\n   PE:\
    \     Provider Edge\n   PSN:    Packet Switched Network\n   PW:     Pseudowire\n\
    \   R-PE:   Root PE (ingress PE, PE initiating P2MP PW setup)\n   S-PE:   Switching\
    \ Provider Edge (of MS-PW)\n   SS-PW:  Single-Segment Pseudowire\n   TE:     Traffic\
    \ Engineering\n"
- title: 3.  Signaling P2MP PW
  contents:
  - "3.  Signaling P2MP PW\n   In order to advertise labels as well as exchange PW-related\
    \ LDP\n   messages, PEs must establish LDP sessions among themselves.  A PE\n\
    \   discovers other PEs that are to be connected via P2MP PWs either via\n   manual\
    \ configuration or autodiscovery [RFC6074].\n   An R-PE and each L-PE MUST be\
    \ configured with the same FEC as defined\n   in Section 3.2.\n   P2MP PW requires\
    \ that there be an active P2MP PSN LSP set up between\n   an R-PE and L-PE(s).\
    \  Note that the procedure to set up the P2MP PSN\n   LSP is different depending\
    \ on the signaling protocol used (RSVP-TE or\n   mLDP).\n   In the case of mLDP,\
    \ a Leaf PE can decide to join the P2MP LSP at any\n   time.  In the case of RSVP-TE,\
    \ the P2MP LSP is set up by the R-PE,\n   generally at the initial service provisioning\
    \ time.  It should be\n   noted that local policy can override any decision to\
    \ join, add, or\n   prune existing or new L-PEs from the tree.  In any case, the\
    \ PW setup\n   can ignore these differences and simply assume that the P2MP PSN\
    \ LSP\n   is available when needed.\n   P2MP PW signaling is initiated by the\
    \ R-PE, which sends a separate\n   P2MP PW LDP Label Mapping Message to each of\
    \ the L-PE(s) belonging to\n   that P2MP PW.  This Label Mapping Message will\
    \ contain the following:\n   1.  A FEC TLV containing a P2MP PW Upstream FEC Element\
    \ that includes\n       a Transport LSP sub-TLV.\n   2.  An Interface Parameters\
    \ TLV, as described in [RFC8077].\n   3.  A PW Group ID TLV, as described in [RFC8077].\n\
    \   4.  A label TLV for the upstream-assigned label used by an R-PE for\n    \
    \   the traffic going from the R-PE to L-PE(s).\n   The R-PE imposes the upstream-assigned\
    \ PW label on the outbound\n   packets sent over the P2MP PW; using this label,\
    \ an L-PE identifies\n   the inbound packets arriving over the P2MP PW.\n   Additionally,\
    \ the R-PE MAY send Label Mapping Messages to one or more\n   L-PEs to signal\
    \ a unidirectional P2P PW(s).  The L-PE(s) can use such\n   a PW(s) to send traffic\
    \ to the R-PE.  This optional Label Mapping\n   Message will contain the following:\n\
    \   1.  A P2P PW Downstream FEC Element\n   2.  A label TLV for the downstream-assigned\
    \ label used by the\n       corresponding L-PE to send traffic to the R-PE\n \
    \  The LDP liberal label retention mode MUST be used; per requirements\n   specified\
    \ in [RFC5036], the Label Request message MUST also be\n   supported.\n   The\
    \ upstream-assigned label is allocated according to the rules in\n   [RFC5331].\n\
    \   When an L-PE receives a PW Label Mapping Message, it MUST verify the\n   associated\
    \ P2MP PSN LSP is in place.  If the associated P2MP PSN LSP\n   is not in place\
    \ and its type is LDP P2MP LSP, the L-PE MUST attempt\n   to join the P2MP LSP\
    \ associated with the P2MP PW.  If the associated\n   P2MP PSN LSP is not in place,\
    \ and its type is RSVP-TE P2MP LSP, the\n   L-PE SHOULD wait till the P2MP transport\
    \ LSP is signaled.  If an L-PE\n   fails to join the P2MP PSN LSP, that L-PE MUST\
    \ not enable the PW and\n   MUST notify the user.  In this case, a PW status message\
    \ with status\n   code of 0x00000008 (Local PSN-facing PW (ingress) Receive Fault)\
    \ MUST\n   also be sent to the R-PE.\n"
- title: 3.1.  PW Ingress-to-Egress Incompatibility Issues
  contents:
  - "3.1.  PW Ingress-to-Egress Incompatibility Issues\n   If an R-PE signals a PW\
    \ with a PW Type, Control Word (CW) mode, or\n   interface parameters that a particular\
    \ L-PE cannot accept, then the\n   L-PE MUST NOT enable the PW and should notify\
    \ the user.  In this\n   case, a PW status message with status code of 0x00000001\
    \ (Pseudowire\n   Not Forwarding) MUST also be sent to the R-PE.\n   Note that\
    \ this procedure does not apply if the L-PE was not\n   provisioned with this\
    \ particular P2MP PW.  In this case, according to\n   the LDP liberal label retention\
    \ rules, no action is taken.\n"
- title: 3.2.  P2MP PW FEC
  contents:
  - "3.2.  P2MP PW FEC\n   [RFC8077] specifies two types of LDP FEC elements used\
    \ to signal P2P\n   PWs: \"PWid FEC Element\" and \"Generalized PWid FEC Element\"\
    .  This\n   document uses two FEC elements: \"P2MP PW Upstream FEC Element\" and\n\
    \   \"P2P PW Downstream FEC Element\".  These FEC elements are associated\n  \
    \ with a mandatory upstream-assigned label and an optional downstream-\n   assigned\
    \ label, respectively.\n"
- title: 3.2.1.  P2MP PW Upstream FEC Element
  contents:
  - "3.2.1.  P2MP PW Upstream FEC Element\n   The FEC type for the P2MP PW Upstream\
    \ FEC Element is encoded as\n   follows:\n     0                   1         \
    \          2                   3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9\
    \ 0 1 2 3 4 5 6 7 8 9 0 1\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \    |P2MP PW Up=0x82|C|           PW Type           | PW Info Length|\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \    |    AGI Type   | AGI Length    |         AGI Value             |\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \    ~                       AGI Value (contd.)                      ~\n    |\
    \                                                               |\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \    |   AII Type    | SAII Length   |         SAII Value            |\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \    ~                       SAII Value (contd.)                     ~\n    |\
    \                                                               |\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \    |PMSI Tunnel Typ|PMSI TT Length |                               |\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\
    \                               +\n    +                                     \
    \                          +\n    ~                   Transport LSP ID       \
    \                     ~\n    |                                               \
    \                |\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \    |                                                               |\n    |\
    \                       Optional Parameters                     |\n    ~     \
    \                                                          ~\n    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                  Figure 2: P2MP PW Upstream FEC Element\n   *  P2MP PW Up:\n\
    \      8-bit representation for the P2MP PW Upstream FEC type.\n   *  C bit:\n\
    \      A value of 1 or 0 indicating whether a control word is present or\n   \
    \   absent for the P2MP PW.\n   *  PW Type:\n      15-bit representation of PW\
    \ Type as specified in [RFC8077].\n   *  PW Info Length:\n      Sum of the AGI\
    \ Length, SAII Length, PMSI Tunnel Type Length, and\n      Optional Parameters\
    \ fields in octets.  If this value is 0, then it\n      references all PWs using\
    \ the specified group ID.  In this case,\n      there are neither other FEC element\
    \ fields (AGI Type, SAII Value,\n      etc.) present, nor any interface parameters\
    \ TLVs.  Alternatively,\n      typed wildcard FEC described in Section 2.3, can\
    \ be used to\n      achieve the same or to have better filtering.\n   *  AGI:\n\
    \      An Attachment Group Identifier TLV can be used to uniquely\n      identify\
    \ a VPN or Virtual Private LAN Service (VPLS) instance\n      associated with\
    \ the P2MP PW.  This has the same format as the\n      Generalized PWid FEC Element\
    \ [RFC8077].\n   *  SAII Value:\n      A Source Attachment Individual Identifier\
    \ is used to identify the\n      root of the P2MP PW.  The root is represented\
    \ using AII Type 2\n      format specified in [RFC5003].  Note that the SAII can\
    \ be omitted\n      by simply setting the length and type to zero.\n      The\
    \ P2MP PW is identified by the Source Attachment Identifier\n      (SAI).  If\
    \ the AGI is non-null, the SAI is the combination of the\n      SAII and the AGI,\
    \ if the AGI is null, the SAI is the SAII.\n   *  PMSI Tunnel Info:\n      The\
    \ PMSI Tunnel Info is the combination of the PMSI Tunnel Type,\n      PMSI Tunnel\
    \ Type Length (shown in the figure as PMSI TT Length),\n      and Transport LSP\
    \ ID fields.\n      A P2MP PW MUST be associated with a transport LSP, which can\
    \ be\n      established using RSVP-TE or mLDP.\n   *  PMSI Tunnel Type:\n    \
    \  The PMSI Tunnel Type is defined in [RFC6514].\n      When the type is set to\
    \ mLDP P2MP LSP, the Tunnel Identifier is a\n      P2MP FEC Element as defined\
    \ in [RFC6388].  The new mLDP Opaque\n      Value Element type for the L2VPN-MCAST\
    \ application TLV (as\n      specified in the IANA Considerations section (Section\
    \ 7)) MUST be\n      used.\n   *  Transport LSP ID:\n      This is the Tunnel\
    \ Identifier that is defined in [RFC6514].\n      An R-PE sends a Label Mapping\
    \ Message as soon as the transport LSP\n      ID associated with the P2MP PW is\
    \ known (e.g., via configuration)\n      regardless of the operational state of\
    \ that transport LSP.\n      Similarly, an R-PE does not withdraw the labels when\
    \ the\n      corresponding transport LSP goes down.  Furthermore, an L-PE\n  \
    \    retains the P2MP PW labels regardless of the operational status of\n    \
    \  the transport LSP.\n      Note that a given transport LSP can be associated\
    \ with more than\n      one P2MP PW; in which case, P2MP PWs will be sharing the\
    \ same R-PE\n      and L-PE(s).  An R-PE may also have many P2MP PWs with disjoint\n\
    \      L-PE sets.\n      In the case of LDP P2MP LSP, when an L-PE receives the\
    \ Label\n      Mapping Message, it can initiate the process of joining the P2MP\n\
    \      LSP tree associated with the P2MP PW.\n      In the case of RSVP-TE P2MP\
    \ LSP, only the R-PE initiates the\n      signaling of P2MP LSP.\n   *  Optional\
    \ Parameters:\n      The Optional Parameter field can contain some TLVs that are\
    \ not\n      part of the FEC, but are necessary for the operation of the PW.\n\
    \      This proposed mechanism uses two such TLVs: the Interface\n      Parameters\
    \ TLV and the PW Group ID TLV.\n      The Interface Parameters TLV and PW Group\
    \ ID TLV specified in\n      [RFC8077] can also be used in conjunction with P2MP\
    \ PW FEC in a\n      label message.  For the PW Group ID TLV, the sender and receiver\n\
    \      of these TLVs should follow the same rules and procedures\n      specified\
    \ in [RFC8077].  For the Interface Parameters TLV, the\n      procedure differs\
    \ from the one specified in [RFC8077] due to\n      specifics of P2MP connectivity.\
    \  When the interface parameters are\n      signaled by an R-PE, each L-PE must\
    \ check if its configured\n      value(s) is less than or equal to the threshold\
    \ value provided by\n      the R-PE (e.g., MTU size (Ethernet), max number of\
    \ concatenated\n      ATM cells, etc.).  For other interface parameters, like\
    \ CEP/TDM\n      Payload Bytes, the value MUST exactly match the values signaled\
    \ by\n      the R-PE.\n      A multicast traffic stream associated with a P2MP\
    \ PW can be\n      selective or inclusive.  To support the former, this document\n\
    \      defines a new optional Selective Tree Interface Parameter sub-TLV,\n  \
    \    as described in the IANA Considerations section (Section 7) and\n      according\
    \ to the format described in [RFC8077].  The value of the\n      sub-TLV contains\
    \ the source and the group for a given multicast\n      tree, as shown in Figure\
    \ 3.  Also, if a P2MP PW is associated with\n      multiple selective trees, the\
    \ corresponding Label Mapping Message\n      will carry more than one instance\
    \ of this sub-TLV.  Furthermore,\n      in the absence of this sub-TLV, the P2MP\
    \ PW is associated with all\n      multicast traffic streams originating from\
    \ the root.\n              +-----------------------------------------+\n     \
    \         |            Sub-TLV Type (1 Octet)       |\n              +-----------------------------------------+\n\
    \              |              Length (1 Octet)           |\n              +-----------------------------------------+\n\
    \              | Multicast Source Length (1 Octet)       |\n              +-----------------------------------------+\n\
    \              | Multicast Source (variable length)      |\n              +-----------------------------------------+\n\
    \              | Multicast Group Length (1 Octet)        |\n              +-----------------------------------------+\n\
    \              | Multicast Group (variable length)       |\n              +-----------------------------------------+\n\
    \        Figure 3: Selective Tree Interface Parameter Sub-TLV Value\n      Note\
    \ that since the LDP Label Mapping Message is only sent by the\n      R-PE to\
    \ all the L-PEs, it is not possible to negotiate any\n      interface parameters.\n"
- title: 3.2.2.  P2P PW Downstream FEC Element
  contents:
  - "3.2.2.  P2P PW Downstream FEC Element\n   The optional P2P PW Downstream FEC\
    \ Element is encoded as follows:\n       0                   1               \
    \    2                   3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\
    \ 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |P2P PWDown=0x84|C|           PW Type           | PW Info Length|\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |\
    \    AGI Type   |     Length    |         AGI Value             |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      ~                       AGI Value (contd.)                      ~\n   \
    \   |                                                               |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |    AII Type   |     Length    |         SAII Value            |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      ~\
    \                       SAII Value (contd.)                     ~\n      |   \
    \                                                            |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                  Figure 4: P2P PW Downstream FEC Element\n   The definition\
    \ of the fields in the P2P PW Downstream FEC Element is\n   the same as those\
    \ of P2MP PW Upstream FEC Element, shown in Figure 2.\n"
- title: 3.3.  Typed Wildcard FEC Format for a New FEC
  contents:
  - "3.3.  Typed Wildcard FEC Format for a New FEC\n   [RFC5918] defines the general\
    \ notion of a Typed Wildcard FEC Element;\n   it requires FEC designers to specify\
    \ a Typed Wildcard FEC Element for\n   newly defined FEC element types.  This\
    \ document uses two FEC\n   elements: \"P2MP PW Upstream\" and \"P2P PW Downstream\"\
    .  Hence,\n   definition of their Typed Wildcard format is required.\n   [RFC6667]\
    \ defines the Typed Wildcard FEC Element format for other PW\n   FEC Element types\
    \ (PWid and Generalized PWid FEC Element) in\n   Section 3 as follows:\n     \
    \  0                   1                   2                   3\n       0 1 2\
    \ 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |Typed Wcard=0x5|Type=PW FEC    |   Len = 3     |R|   PW Type   |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |\
    \    . . .      | PMSI Tun Type |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n \
    \        Figure 5: Typed Wildcard Format for P2MP PW FEC Elements\n   [RFC6667]\
    \ specifies that the Type field can be either the \"PWid\"\n   (0x80) or \"Generalized\
    \ PWid\" (0x81) FEC Element type.  This document\n   reuses the existing Typed\
    \ Wildcard format specified in [RFC6667] and\n   illustrated in Figure 5 and extends\
    \ the definition of the Type field\n   to also include the P2MP PW Upstream FEC\
    \ Element and P2P PW\n   Downstream FEC Element types.  This document adds an\
    \ additional field\n   called the \"PMSI Tunnel Type\".  This document reserves\
    \ PMSI Tunnel\n   Type 0xFF to mean \"wildcard transport tunnel type\".  The PMSI\
    \ Tunnel\n   Type field only applies to the Typed Wildcard P2MP PW Upstream FEC\n\
    \   Element and MUST be set to \"wildcard\" for \"P2P PW Downstream FEC\n   Element\"\
    \ typed wildcard.\n"
- title: 3.4.  Group ID Usage
  contents:
  - "3.4.  Group ID Usage\n   The PW Group ID TLV as defined in [RFC8077] contains\
    \ a group ID\n   capable of indicating an arbitrary group membership of a P2MP\
    \ PW.\n   This group ID can be used in LDP \"wildcard\" status and withdraw label\n\
    \   messages, as described in [RFC8077].\n"
- title: 3.5.  Generic Label TLV
  contents:
  - "3.5.  Generic Label TLV\n   As in the case of P2P PW signaling, P2MP PW labels\
    \ are carried within\n   the Generic Label TLV contained in the LDP Label Mapping\
    \ Message.  A\n   Generic Label TLV is formatted and processed as per the rules\
    \ and\n   procedures specified in [RFC8077].  For a given P2MP PW, a single\n\
    \   upstream-assigned label is allocated by the R-PE and is advertised to\n  \
    \ all L-PEs using the Generic Label TLV in Label Mapping Messages\n   containing\
    \ the P2MP PW Upstream FEC Element.\n   The R-PE can also allocate a unique label\
    \ for each L-PE from which it\n   intends to receive P2P traffic.  Such a label\
    \ is advertised to the\n   L-PE using the Generic Label TLV and P2P PW Downstream\
    \ FEC Element in\n   Label Mapping Messages.\n"
- title: 4.  LDP Capability Negotiation
  contents:
  - "4.  LDP Capability Negotiation\n   The capability of supporting P2MP PWs MUST\
    \ be advertised to all LDP\n   peers.  This is achieved by using the methods in\
    \ [RFC5561] to\n   advertise the LDP P2MP PW Capability TLV.  If an LDP peer supports\n\
    \   the dynamic capability advertisement, this can be done by sending a\n   new\
    \ Capability message with the S bit set for the P2MP PW Capability\n   TLV.  If\
    \ the peer does not support dynamic capability advertisement,\n   then the P2MP\
    \ PW Capability TLV MUST be included in the LDP\n   Initialization message during\
    \ session establishment.  A Label\n   Switched Router (LSR) having P2MP PW capability\
    \ MUST recognize both\n   the P2MP PW Upstream FEC Element and P2P PW Downstream\
    \ FEC Element in\n   LDP label messages.\n   In line with requirements listed\
    \ in [RFC5561], the following TLV is\n   defined to indicate the P2MP PW capability:\n\
    \       0                   1                   2                   3\n      \
    \ 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |U|F| P2MP PW Capability TLV    |            Length             |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |S|\
    \ Reserved    |    Reserved   |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   \
    \                Figure 6: LDP P2MP PW Capability TLV\n   *  U bit:\n      The\
    \ Unknown bit [RFC5036] SHOULD be 1 (ignore if not understood).\n   *  F bit:\n\
    \      The Forward unknown bit [RFC5036] SHOULD be 0 (don't forward if\n     \
    \ not understood).\n   *  P2MP PW Capability TLV Code Point:\n      The TLV type,\
    \ which identifies a specific capability.  Note that\n      the P2MP PW Capability\
    \ Code Point appears in the IANA\n      Considerations section (Section 7).\n\
    \   *  S bit:\n      The State Bit indicates whether the sender is advertising\
    \ or\n      withdrawing the P2MP PW capability.  The State bit is used as\n  \
    \    follows:\n      1 - The TLV is advertising the capability specified by the\
    \ P2MP PW\n          Capability TLV Code Point.\n      0 - The TLV is withdrawing\
    \ the capability specified by the P2MP PW\n          Capability TLV Code Point.\n\
    \   *  Length:\n      MUST be set to 2 (octet).\n"
- title: 5.  P2MP PW Status
  contents:
  - "5.  P2MP PW Status\n   In order to support the proposed mechanism, an LSR MUST\
    \ be capable of\n   handling PW status.  As such, the PW status negotiation procedures\n\
    \   described in [RFC8077] are not applicable to P2MP PW.  An LSR MUST\n   NOT\
    \ claim to be P2MP PW capable by sending an LDP P2MP PW Capability\n   TLV if\
    \ it is not also capable of handling PW status.\n   Once an L-PE successfully\
    \ processes a Label Mapping Message for a\n   P2MP PW, it MUST send appropriate\
    \ PW status according to the\n   procedure specified [RFC8077] to report the PW\
    \ status.  If no PW\n   status notification is required, then no PW status notification\
    \ is\n   sent (for example, if the P2MP PW is established and operational with\n\
    \   a status code of 0x00000000 (Success), a PW status message is not\n   necessary).\
    \  A PW status message sent from an L-PE to an R-PE MUST\n   contain the P2P PW\
    \ Downstream FEC Element to identify the PW.\n   An R-PE also sends PW status\
    \ to L-PE(s) to reflect its view of a P2MP\n   PW state.  Such a PW status message\
    \ contains a P2MP PW Upstream FEC\n   Element to identify the PW.\n   Connectivity\
    \ status of the underlying P2MP LSP that the P2MP PW is\n   associated with can\
    \ be verified using LSP ping and traceroute\n   procedures described in [RFC6425].\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   In general, the security measures described in\
    \ [RFC8077] are adequate\n   for this protocol.  However, the use of MD5 as the\
    \ method of securing\n   an LDP control plane is no longer considered adequately\
    \ secure.\n   Implementations should be written in such a way that they can migrate\n\
    \   to a more secure cryptographic hash function when the next\n   authentication\
    \ method to be used in the LDP might not be a simple\n   hash-based authentication\
    \ algorithm.\n"
- title: 7.  IANA Considerations
  contents:
  - '7.  IANA Considerations

    '
- title: 7.1.  FEC Type Name Space
  contents:
  - "7.1.  FEC Type Name Space\n   This document uses two FEC element types, 0x82\
    \ and 0x84, in the\n   \"Forwarding Equivalence Class (FEC) Type Name Space\"\
    \ registry for the\n   Label Distribution Protocol (LDP) [RFC5036].  IANA has\
    \ added this\n   document as a reference for the following entries:\n   Value\
    \   Hex    Name                            Reference\n   ------  -----  -----------------------------\
    \   --------------------\n    130    0x82   P2MP PW Upstream FEC Element    [RFC8338]\
    \ [RFC7358]\n    132    0x84   P2P PW Downstream FEC Element   [RFC8338] [RFC7358]\n"
- title: 7.2.  LDP TLV Type
  contents:
  - "7.2.  LDP TLV Type\n   This document defines a new LDP TLV type in the \"TLV\
    \ Type Name Space\"\n   registry [RFC5036].  IANA has assigned the following value:\n\
    \   TLV Type  Description\n   --------  ----------------------\n   0x0703    P2MP\
    \ PW Capability TLV\n"
- title: 7.3.  mLDP Opaque Value Element TLV Type
  contents:
  - "7.3.  mLDP Opaque Value Element TLV Type\n   IANA has assigned a new mLDP Opaque\
    \ Value Element Type in the \"LDP MP\n   Opaque Value Element basic type\" registry\
    \ [RFC6388] as follows:\n   TLV Type  Description\n   -------   ---------------------------\n\
    \     13      L2VPN-MCAST application TLV\n   Length:   4\n   Value:    A 32-bit\
    \ integer, unique in the context of the\n             root, as identified by the\
    \ root's address.\n"
- title: 7.4.  Selective Tree Interface Parameter Sub-TLV Type
  contents:
  - "7.4.  Selective Tree Interface Parameter Sub-TLV Type\n   IANA has assigned a\
    \ sub-TLV from the \"Pseudowire Interface Parameters\n   Sub-TLV type Registry\"\
    \ [RFC4446] as follows:\n   TLV Type  Description\n   --------  ----------------------------------\n\
    \   0x1B      Selective Tree Interface Parameter\n"
- title: 7.5.  Wildcard PMSI Tunnel Type
  contents:
  - "7.5.  Wildcard PMSI Tunnel Type\n   IANA has modified an entry in the \"P-Multicast\
    \ Service Interface\n   Tunnel (PMSI Tunnel) Tunnel Types\" registry within the\
    \ \"Border\n   Gateway Protocol (BGP) Parameters\" registry [RFC7385].  Value\
    \ 0xFF,\n   which was previously marked as \"Reserved\", has been updated as\n\
    \   follows:\n   Value     Meaning                             Reference\n   -----\
    \     ------------------------------      ---------\n   0xFF      wildcard transport\
    \ tunnel type      [RFC8338]\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119,\n  \
    \            DOI 10.17487/RFC2119, March 1997,\n              <https://www.rfc-editor.org/info/rfc2119>.\n\
    \   [RFC4446]  Martini, L., \"IANA Allocations for Pseudowire Edge to Edge\n \
    \             Emulation (PWE3)\", BCP 116, RFC 4446,\n              DOI 10.17487/RFC4446,\
    \ April 2006,\n              <https://www.rfc-editor.org/info/rfc4446>.\n   [RFC4875]\
    \  Aggarwal, R., Ed., Papadimitriou, D., Ed., and S.\n              Yasukawa,\
    \ Ed., \"Extensions to Resource Reservation\n              Protocol - Traffic\
    \ Engineering (RSVP-TE) for Point-to-\n              Multipoint TE Label Switched\
    \ Paths (LSPs)\", RFC 4875,\n              DOI 10.17487/RFC4875, May 2007,\n \
    \             <https://www.rfc-editor.org/info/rfc4875>.\n   [RFC5003]  Metz,\
    \ C., Martini, L., Balus, F., and J. Sugimoto,\n              \"Attachment Individual\
    \ Identifier (AII) Types for\n              Aggregation\", RFC 5003, DOI 10.17487/RFC5003,\
    \ September\n              2007, <https://www.rfc-editor.org/info/rfc5003>.\n\
    \   [RFC5036]  Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,\n     \
    \         \"LDP Specification\", RFC 5036, DOI 10.17487/RFC5036,\n           \
    \   October 2007, <https://www.rfc-editor.org/info/rfc5036>.\n   [RFC5331]  Aggarwal,\
    \ R., Rekhter, Y., and E. Rosen, \"MPLS Upstream\n              Label Assignment\
    \ and Context-Specific Label Space\",\n              RFC 5331, DOI 10.17487/RFC5331,\
    \ August 2008,\n              <https://www.rfc-editor.org/info/rfc5331>.\n   [RFC5332]\
    \  Eckert, T., Rosen, E., Ed., Aggarwal, R., and Y. Rekhter,\n              \"\
    MPLS Multicast Encapsulations\", RFC 5332,\n              DOI 10.17487/RFC5332,\
    \ August 2008,\n              <https://www.rfc-editor.org/info/rfc5332>.\n   [RFC5561]\
    \  Thomas, B., Raza, K., Aggarwal, S., Aggarwal, R., and JL.\n              Le\
    \ Roux, \"LDP Capabilities\", RFC 5561,\n              DOI 10.17487/RFC5561, July\
    \ 2009,\n              <https://www.rfc-editor.org/info/rfc5561>.\n   [RFC5918]\
    \  Asati, R., Minei, I., and B. Thomas, \"Label Distribution\n              Protocol\
    \ (LDP) 'Typed Wildcard' Forward Equivalence Class\n              (FEC)\", RFC\
    \ 5918, DOI 10.17487/RFC5918, August 2010,\n              <https://www.rfc-editor.org/info/rfc5918>.\n\
    \   [RFC6388]  Wijnands, IJ., Ed., Minei, I., Ed., Kompella, K., and B.\n    \
    \          Thomas, \"Label Distribution Protocol Extensions for Point-\n     \
    \         to-Multipoint and Multipoint-to-Multipoint Label Switched\n        \
    \      Paths\", RFC 6388, DOI 10.17487/RFC6388, November 2011,\n             \
    \ <https://www.rfc-editor.org/info/rfc6388>.\n   [RFC6514]  Aggarwal, R., Rosen,\
    \ E., Morin, T., and Y. Rekhter, \"BGP\n              Encodings and Procedures\
    \ for Multicast in MPLS/BGP IP\n              VPNs\", RFC 6514, DOI 10.17487/RFC6514,\
    \ February 2012,\n              <https://www.rfc-editor.org/info/rfc6514>.\n \
    \  [RFC6667]  Raza, K., Boutros, S., and C. Pignataro, \"LDP 'Typed\n        \
    \      Wildcard' Forwarding Equivalence Class (FEC) for PWid and\n           \
    \   Generalized PWid FEC Elements\", RFC 6667,\n              DOI 10.17487/RFC6667,\
    \ July 2012,\n              <https://www.rfc-editor.org/info/rfc6667>.\n   [RFC7385]\
    \  Andersson, L. and G. Swallow, \"IANA Registry for\n              P-Multicast\
    \ Service Interface (PMSI) Tunnel Type Code\n              Points\", RFC 7385,\
    \ DOI 10.17487/RFC7385, October 2014,\n              <https://www.rfc-editor.org/info/rfc7385>.\n\
    \   [RFC8077]  Martini, L., Ed. and G. Heron, Ed., \"Pseudowire Setup and\n  \
    \            Maintenance Using the Label Distribution Protocol (LDP)\",\n    \
    \          STD 84, RFC 8077, DOI 10.17487/RFC8077, February 2017,\n          \
    \    <https://www.rfc-editor.org/info/rfc8077>.\n   [RFC8174]  Leiba, B., \"Ambiguity\
    \ of Uppercase vs Lowercase in RFC\n              2119 Key Words\", BCP 14, RFC\
    \ 8174, DOI 10.17487/RFC8174,\n              May 2017, <https://www.rfc-editor.org/info/rfc8174>.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [RFC3985]  Bryant, S., Ed. and P. Pate, Ed.,\
    \ \"Pseudo Wire Emulation\n              Edge-to-Edge (PWE3) Architecture\", RFC\
    \ 3985,\n              DOI 10.17487/RFC3985, March 2005,\n              <https://www.rfc-editor.org/info/rfc3985>.\n\
    \   [RFC6074]  Rosen, E., Davie, B., Radoaca, V., and W. Luo,\n              \"\
    Provisioning, Auto-Discovery, and Signaling in Layer 2\n              Virtual\
    \ Private Networks (L2VPNs)\", RFC 6074,\n              DOI 10.17487/RFC6074,\
    \ January 2011,\n              <https://www.rfc-editor.org/info/rfc6074>.\n  \
    \ [RFC6425]  Saxena, S., Ed., Swallow, G., Ali, Z., Farrel, A.,\n            \
    \  Yasukawa, S., and T. Nadeau, \"Detecting Data-Plane\n              Failures\
    \ in Point-to-Multipoint MPLS - Extensions to LSP\n              Ping\", RFC 6425,\
    \ DOI 10.17487/RFC6425, November 2011,\n              <https://www.rfc-editor.org/info/rfc6425>.\n\
    \   [RFC7338]  Jounay, F., Ed., Kamite, Y., Ed., Heron, G., and M. Bocci,\n  \
    \            \"Requirements and Framework for Point-to-Multipoint\n          \
    \    Pseudowires over MPLS Packet Switched Networks\", RFC 7338,\n           \
    \   DOI 10.17487/RFC7338, September 2014,\n              <https://www.rfc-editor.org/info/rfc7338>.\n\
    \   [RFC7358]  Raza, K., Boutros, S., Martini, L., and N. Leymann, \"Label\n \
    \             Advertisement Discipline for LDP Forwarding Equivalence\n      \
    \        Classes (FECs)\", RFC 7358, DOI 10.17487/RFC7358, October\n         \
    \     2014, <https://www.rfc-editor.org/info/rfc7358>.\n"
- title: Acknowledgments
  contents:
  - "Acknowledgments\n   The authors would like to thank Andre Pelletier and Parag\
    \ Jain for\n   their valuable suggestions.\n"
- title: Contributors
  contents:
  - "Contributors\n   The following people contributed substantially to the content\
    \ of this\n   document and should be considered coauthors:\n      Luca Martini\n\
    \      Cisco Systems, Inc.\n      Email: lmartini@cisco.com\n      Maciek Konstantynowicz\n\
    \      Cisco Systems, Inc.\n      Email: maciek@cisco.com\n      Gianni Del Vecchio\n\
    \      Swisscom\n      Email: Gianni.DelVecchio@swisscom.com\n      Thomas D.\
    \ Nadeau\n      Brocade\n      Email: tnadeau@lucidvision.com\n      Frederic\
    \ Jounay\n      Orange CH\n      Email: Frederic.Jounay@salt.ch\n      Philippe\
    \ Niger\n      Orange CH\n      Email: philippe.niger@orange.com\n      Yuji Kamite\n\
    \      NTT Communications Corporation\n      Email: y.kamite@ntt.com\n      Lizhong\
    \ Jin\n      Email: lizho.jin@gmail.com\n      Martin Vigoureux\n      Nokia\n\
    \      Email: martin.vigoureux@nokia.com\n      Laurent Ciavaglia\n      Nokia\n\
    \      Email: laurent.ciavaglia@nokia.com\n      Simon Delord\n      Telstra\n\
    \      Email: simon.delord@gmail.com\n      Kamran Raza\n      Cisco Systems\n\
    \      Email: skraza@cisco.com\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Sami Boutros (editor)\n   VMware, Inc.\n   Email: sboutros@vmware.com\n\
    \   Siva Sivabalan (editor)\n   Cisco Systems, Inc.\n   Email: msiva@cisco.com\n"
