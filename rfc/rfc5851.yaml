- title: __initial_text__
  contents:
  - "    Framework and Requirements for an Access Node Control Mechanism\n       \
    \           in Broadband Multi-Service Networks\n"
- title: Abstract
  contents:
  - "Abstract\n   The purpose of this document is to define a framework for an Access\n\
    \   Node Control Mechanism between a Network Access Server (NAS) and an\n   Access\
    \ Node (e.g., a Digital Subscriber Line Access Multiplexer\n   (DSLAM)) in a multi-service\
    \ reference architecture in order to\n   perform operations related to service,\
    \ quality of service, and\n   subscribers.  The Access Node Control Mechanism\
    \ will ensure that the\n   transmission of the information does not need to go\
    \ through distinct\n   element managers but rather uses a direct device-device\n\
    \   communication.  This allows for performing access-link-related\n   operations\
    \ within those network elements, while avoiding impact on\n   the existing Operational\
    \ Support Systems.\n   This document first identifies a number of use cases for\
    \ which the\n   Access Node Control Mechanism may be appropriate.  It then presents\n\
    \   the requirements for the Access Node Control Protocol (ANCP) that\n   must\
    \ be taken into account during protocol design.  Finally, it\n   describes requirements\
    \ for the network elements that need to support\n   ANCP and the described use\
    \ cases.  These requirements should be seen\n   as guidelines rather than as absolute\
    \ requirements.  RFC 2119\n   therefore does not apply to the nodal requirements.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc5851.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2010 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n   This document\
    \ may contain material from IETF Documents or IETF\n   Contributions published\
    \ or made publicly available before November\n   10, 2008.  The person(s) controlling\
    \ the copyright in some of this\n   material may not have granted the IETF Trust\
    \ the right to allow\n   modifications of such material outside the IETF Standards\
    \ Process.\n   Without obtaining an adequate license from the person(s) controlling\n\
    \   the copyright in such materials, this document may not be modified\n   outside\
    \ the IETF Standards Process, and derivative works of it may\n   not be created\
    \ outside the IETF Standards Process, except to format\n   it for publication\
    \ as an RFC or to translate it into languages other\n   than English.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  4\n     1.1.  Requirements Notation  . . . . . . . . . . . . .\
    \ . . . . .  5\n     1.2.  Definitions  . . . . . . . . . . . . . . . . . . .\
    \ . . . .  5\n   2.  General Architecture Aspects . . . . . . . . . . . . . .\
    \ . . .  7\n     2.1.  Concept of an Access Node Control Mechanism  . . . . .\
    \ . .  7\n     2.2.  Reference Architecture . . . . . . . . . . . . . . . . .\
    \ .  8\n       2.2.1.  Home Gateway . . . . . . . . . . . . . . . . . . . . .\
    \  9\n       2.2.2.  Access Loop  . . . . . . . . . . . . . . . . . . . . .  9\n\
    \       2.2.3.  Access Node  . . . . . . . . . . . . . . . . . . . . .  9\n  \
    \     2.2.4.  Access Node Uplink . . . . . . . . . . . . . . . . . . 10\n    \
    \   2.2.5.  Aggregation Network  . . . . . . . . . . . . . . . . . 10\n      \
    \ 2.2.6.  Network Access Server  . . . . . . . . . . . . . . . . 10\n       2.2.7.\
    \  Regional Network . . . . . . . . . . . . . . . . . . . 10\n     2.3.  Prioritizing\
    \ Access Node Control Traffic . . . . . . . . . 11\n     2.4.  Interaction with\
    \ Management Systems  . . . . . . . . . . . 12\n     2.5.  Circuit Addressing\
    \ Scheme  . . . . . . . . . . . . . . . . 12\n   3.  Use Cases for Access Node\
    \ Control Mechanism  . . . . . . . . . 13\n     3.1.  Access Topology Discovery\
    \  . . . . . . . . . . . . . . . . 13\n     3.2.  Access-Loop Configuration  .\
    \ . . . . . . . . . . . . . . . 15\n     3.3.  Remote Connectivity Test . . .\
    \ . . . . . . . . . . . . . . 16\n     3.4.  Multicast  . . . . . . . . . . .\
    \ . . . . . . . . . . . . . 17\n       3.4.1.  Multicast Conditional Access .\
    \ . . . . . . . . . . . . 18\n       3.4.2.  Multicast Admission Control  . .\
    \ . . . . . . . . . . . 21\n       3.4.3.  Multicast Accounting and Reporting\
    \ . . . . . . . . . . 26\n       3.4.4.  Spontaneous Admission Response . . .\
    \ . . . . . . . . . 27\n   4.  Requirements . . . . . . . . . . . . . . . . .\
    \ . . . . . . . . 28\n     4.1.  ANCP Functional Requirements . . . . . . . .\
    \ . . . . . . . 28\n     4.2.  ANCP Multicast Requirements  . . . . . . . . .\
    \ . . . . . . 29\n     4.3.  Protocol Design Requirements . . . . . . . . . .\
    \ . . . . . 30\n     4.4.  Access Node Control Adjacency Requirements . . . .\
    \ . . . . 31\n     4.5.  ANCP Transport Requirements  . . . . . . . . . . . .\
    \ . . . 31\n     4.6.  Access Node Requirements . . . . . . . . . . . . . . .\
    \ . . 32\n       4.6.1.  General Architecture . . . . . . . . . . . . . . . .\
    \ . 32\n       4.6.2.  Control Channel Attributes . . . . . . . . . . . . . .\
    \ 33\n       4.6.3.  Capability Negotiation Failure . . . . . . . . . . . . 33\n\
    \       4.6.4.  Adjacency Status Reporting . . . . . . . . . . . . . . 33\n  \
    \     4.6.5.  Identification . . . . . . . . . . . . . . . . . . . . 34\n    \
    \   4.6.6.  Multicast  . . . . . . . . . . . . . . . . . . . . . . 34\n      \
    \ 4.6.7.  Message Handling . . . . . . . . . . . . . . . . . . . 36\n       4.6.8.\
    \  Parameter Control  . . . . . . . . . . . . . . . . . . 37\n     4.7.  Network\
    \ Access Server Requirements . . . . . . . . . . . . 37\n       4.7.1.  General\
    \ Architecture . . . . . . . . . . . . . . . . . 37\n       4.7.2.  Control Channel\
    \ Attributes . . . . . . . . . . . . . . 39\n       4.7.3.  Capability Negotiation\
    \ Failure . . . . . . . . . . . . 39\n       4.7.4.  Adjacency Status Reporting\
    \ . . . . . . . . . . . . . . 40\n       4.7.5.  Identification . . . . . . .\
    \ . . . . . . . . . . . . . 40\n       4.7.6.  Multicast  . . . . . . . . . .\
    \ . . . . . . . . . . . . 40\n       4.7.7.  Message Handling . . . . . . . .\
    \ . . . . . . . . . . . 42\n       4.7.8.  Wholesale Model  . . . . . . . . .\
    \ . . . . . . . . . . 42\n   5.  Management-Related Requirements  . . . . . .\
    \ . . . . . . . . . 43\n   6.  Security Considerations  . . . . . . . . . . .\
    \ . . . . . . . . 44\n   7.  Acknowledgements . . . . . . . . . . . . . . . .\
    \ . . . . . . . 44\n   8.  References . . . . . . . . . . . . . . . . . . . .\
    \ . . . . . . 45\n     8.1.  Normative References . . . . . . . . . . . . . .\
    \ . . . . . 45\n     8.2.  Informative References . . . . . . . . . . . . . .\
    \ . . . . 45\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Digital Subscriber Line (DSL) technology is widely deployed\
    \ for\n   Broadband Access for Next Generation Networks.  Several documents\n\
    \   like Broadband Forum TR-058 [TR-058], Broadband Forum TR-059\n   [TR-059],\
    \ and Broadband Forum TR-101 [TR-101] describe possible\n   architectures for\
    \ these access networks.  The scope of these\n   specifications consists of the\
    \ delivery of voice, video, and data\n   services.  The framework defined by this\
    \ document is targeted at DSL-\n   based access (either by means of ATM/DSL or\
    \ as Ethernet/DSL).  The\n   framework shall be open to other access technologies,\
    \ such as Passive\n   Optical Networks using DSL technology at the Optical Network\
    \ Unit\n   (ONU), or wireless technologies like IEEE 802.16.  Several use cases\n\
    \   such as Access Topology Discovery, Remote Connectivity Test, and\n   Multicast\
    \ may be applied to these access technologies, but the\n   details of this are\
    \ outside the scope of this document.\n   Traditional architectures require Permanent\
    \ Virtual Circuit(s) per\n   subscriber.  Such a virtual circuit is configured\
    \ on layer 2 and\n   terminated at the first layer 3 device (e.g., Broadband Remote\
    \ Access\n   Server (BRAS)).  Beside the data plane, the models define the\n \
    \  architectures for element, network, and service management.\n   Interworking\
    \ at the management plane is not always possible because\n   of the organizational\
    \ boundaries between departments operating the\n   local loop, departments operating\
    \ the ATM network, and departments\n   operating the IP network.  Besides, management\
    \ networks are usually\n   not designed to transmit management data between the\
    \ different\n   entities in real time.\n   When deploying value-added services\
    \ across DSL access networks,\n   special attention regarding quality of service\
    \ and service control is\n   required, which implies a tighter coordination between\
    \ Network Nodes\n   (e.g., Access Nodes and Network Access Server (NAS)), without\n\
    \   burdening the Operational Support System (OSS) with unpractical\n   expectations.\n\
    \   Therefore, there is a need for an Access Node Control Mechanism\n   between\
    \ a NAS and an Access Node (e.g., a Digital Subscriber Line\n   Access Multiplexer\
    \ (DSLAM)) in a multi-service reference architecture\n   in order to perform operations\
    \ related to service, quality of\n   service, and subscribers.  The Access Node\
    \ Control Mechanism will\n   ensure that the transmission of the information does\
    \ not need to go\n   through distinct element managers but rather using a direct\
    \ device-\n   device communication.  This allows for performing access-link-related\n\
    \   operations within those network elements, while avoiding impact on\n   the\
    \ existing OSSes.\n   This document provides a framework for such an Access Node\
    \ Control\n   Mechanism and identifies a number of use cases for which this\n\
    \   mechanism can be justified.  Next, it presents a number of\n   requirements\
    \ for the Access Node Control Protocol (ANCP) and the\n   network elements that\
    \ need to support it.\n   The requirements spelled out in this document are based\
    \ on the work\n   that is performed by the Broadband Forum [TR-147].\n"
- title: 1.1.  Requirements Notation
  contents:
  - "1.1.  Requirements Notation\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\"\
    , \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"\
    MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [RFC2119].\n"
- title: 1.2.  Definitions
  contents:
  - "1.2.  Definitions\n   o  Access Node (AN): network device, usually located at\
    \ a service\n      provider central office or street cabinet, that terminates\
    \ access-\n      loop connections from subscribers.  In case the access loop is\
    \ a\n      Digital Subscriber Line (DSL), this is often referred to as a DSL\n\
    \      Access Multiplexer (DSLAM).\n   o  Network Access Server (NAS): network\
    \ device that aggregates\n      multiplexed subscriber traffic from a number of\
    \ Access Nodes.  The\n      NAS plays a central role in per-subscriber policy\
    \ enforcement and\n      quality of service (QoS).  Often referred to as a Broadband\n\
    \      Network Gateway (BNG) or Broadband Remote Access Server (BRAS).  A\n  \
    \    detailed definition of the NAS is given in [RFC2881].\n   o  \"Net Data Rate\"\
    : defined by ITU-T G.993.2 [G.993.2], section 3.39,\n      i.e., the portion of\
    \ the total data rate that can be used to\n      transmit user information (e.g.,\
    \ ATM cells or Ethernet frames).\n      It excludes overhead that pertains to\
    \ the physical transmission\n      mechanism (e.g., trellis coding in the case\
    \ of DSL).  It includes\n      TPS-TC (Transport Protocol Specific - Transmission\
    \ Convergence)\n      encapsulation; this is zero for ATM encapsulation, and non-zero\n\
    \      for 64/65 encapsulation.\n   o  \"Line Rate\": defined by ITU-T G.993.2.\
    \  It contains the complete\n      overhead including Reed-Solomon and Trellis\
    \ coding.\n   o  Access Node Control Mechanism: a method for multiple network\n\
    \      scenarios with an extensible communication scheme that conveys\n      status\
    \ and control information between one or more ANs and one or\n      more NASes\
    \ without using intermediate element managers.\n   o  Control Channel: a bidirectional\
    \ IP communication interface\n      between the controller function (in the NAS)\
    \ and the reporting/\n      enforcement function (in the AN).  It is assumed that\
    \ this\n      interface is configured (rather than discovered) on the AN and the\n\
    \      NAS.\n   o  Access Node Control Adjacency: the relationship between an\
    \ Access\n      Node and a NAS for the purpose of exchanging Access Node Control\n\
    \      Protocol messages.  The adjacency may either be up or down,\n      depending\
    \ on the result of the Access Node Control Adjacency\n      protocol operation.\n\
    \   o  Multicast Flow: designates datagrams sent to a group from a set of\n  \
    \    sources for which multicast reception is desired.  A distinction\n      can\
    \ be made between Any Source Multicast (ASM) and Source-Specific\n      Multicast\
    \ (SSM).\n   o  Join: signaling from the user equipment that it wishes to start\n\
    \      receiving a new multicast flow.  In ASM, it is referred to as a\n     \
    \ \"Join\".  In SSM [RFC4607], it is referred to as a \"subscribe\".  In\n   \
    \   IGMPv2, \"joins\" are indicated through an \"IGMPv2 membership\n      report\"\
    .  In IGMPv3 [RFC3376], \"join\" is indicated through\n      \"membership report\"\
    \ using different Filter-Mode-Change (ASM) and\n      Source-List-Change Records.\n\
    \   o  Leave: signaling from the user equipment that it wishes to stop\n     \
    \ receiving a multicast flow.  With IGMPv2, this is conveyed inside\n      the\
    \ \"Leave Group\" message, while in IGMPv3, \"leave\" is indicated\n      through\
    \ the \"IGMPv3 membership report\" message using different\n      Filter-Mode-Change\
    \ (ASM) and Source-List-Change Records.\n"
- title: 2.  General Architecture Aspects
  contents:
  - "2.  General Architecture Aspects\n   This section introduces the basic concept\
    \ of the Access Node Control\n   Mechanism and describes the reference architecture\
    \ where it is being\n   applied.  Based on the reference architecture, the section\
    \ then\n   describes how Access Node Control messages are to be prioritized over\n\
    \   other data traffic, and the interaction between ANCP and the network\n   management\
    \ system.  Finally, the addressing schemes are described\n   that allow identifying\
    \ an Access Port in Access Node Control\n   messages.\n"
- title: 2.1.  Concept of an Access Node Control Mechanism
  contents:
  - "2.1.  Concept of an Access Node Control Mechanism\n   The high-level communication\
    \ framework for an Access Node Control\n   Mechanism is defined in Figure 1. \
    \ The Access Node Control Mechanism\n   defines a quasi-real-time, general-purpose\
    \ method for multiple\n   network scenarios with an extensible communication scheme,\
    \ addressing\n   the different use cases that are described throughout this document.\n\
    \                                                 +--------+\n               \
    \                                  | Policy |\n                              \
    \                   | Server |\n                                             \
    \    +--------+\n                                                      |\n   \
    \                                                   |\n  +-----+  +-----+  +--------+\
    \                     +-----+  +----------+\n  | CPE |--| HGW |--|        |  \
    \                   |     |  |          |\n  +-----+  +-----+  | Access |   +-------------+\
    \   |     |  | Regional |\n                    |  Node  |---| Aggregation |---|\
    \ NAS |--| Network  |\n  +-----+  +-----+  |        |   |   Network   |   |  \
    \   |  |          |\n  | CPE |--| HGW |--|        |   +-------------+   |    \
    \ |  |          |\n  +-----+  +-----+  +--------+                     +-----+\
    \  +----------+\n                     Information Report / Admission Request\n\
    \                         ------------------------------>\n                  \
    \    Admission Response / Control Request\n                         <------------------------------\n\
    \                               Control Response\n                         ------------------------------>\n\
    \                          Access Node Control Mechanism\n                   \
    \      <----------------------------->\n                                 PPP,\
    \ DHCP, IP\n    <---------><----------------------------------------->\n  CPE:\
    \ Customer Premises Equipment\n  HGW: Home Gateway\n                   Figure\
    \ 1: Access Network Architecture\n   A number of functions can be identified:\n\
    \   o  A controller function: this function is used either to send out\n     \
    \ requests for information to be used by the network element where\n      the\
    \ controller function resides, or to trigger a certain behavior\n      in the\
    \ network element where the reporting and/or enforcement\n      function resides.\n\
    \   o  A reporting function: this function is used to convey status\n      information\
    \ to the controller function.  An example of this is the\n      transmission of\
    \ the access-loop data rate from an Access Node to a\n      Network Access Server\
    \ (NAS) tasked with shaping traffic to that\n      rate.\n   o  An enforcement\
    \ function: this function is contacted by the\n      controller function to trigger\
    \ a remote action on the Access Node.\n      An example is the initiation of a\
    \ port-testing mechanism on an\n      Access Node.  Another example is enforcing\
    \ whether a multicast\n      join is to be honored or denied.\n   The messages\
    \ shown in Figure 1 show the conceptual message flow.  The\n   actual use of these\
    \ flows, and the times or frequencies when these\n   messages are generated depends\
    \ on the actual use cases, which are\n   described in Section 3.\n   The use cases\
    \ in this document are described in an abstract way,\n   independent from any\
    \ actual protocol mapping.  The actual protocol\n   specification is out of scope\
    \ of this document, but there are certain\n   characteristics of the protocol\
    \ that are required to simplify\n   specification, implementation, debugging and\
    \ troubleshooting, and to\n   extend support for additional use cases.\n"
- title: 2.2.  Reference Architecture
  contents:
  - "2.2.  Reference Architecture\n   The reference architecture used in this document\
    \ can be based on ATM\n   or Ethernet access/aggregation.  Specifically:\n   o\
    \  In case of a legacy ATM aggregation network that is to be used for\n      the\
    \ introduction of new QoS-enabled IP services, the architecture\n      builds\
    \ on the reference architecture specified in the Broadband\n      Forum [TR-059];\n\
    \   o  In case of an Ethernet aggregation network that supports new QoS-\n   \
    \   enabled IP services (including Ethernet multicast replication),\n      the\
    \ architecture builds on the reference architecture specified in\n      the Broadband\
    \ Forum [TR-101].\n   Given the industry's move towards Ethernet as the new access\
    \ and\n   aggregation technology for triple-play services, the primary focus\n\
    \   throughout this document is on a TR-101 architecture.  However the\n   concepts\
    \ are equally applicable to an ATM architecture based on TR-\n   059.\n"
- title: 2.2.1.  Home Gateway
  contents:
  - "2.2.1.  Home Gateway\n   The Home Gateway (HGW) connects the different Customer\
    \ Premises\n   Equipment (CPE) to the Access Node and the access network.  In\
    \ case\n   of DSL, the HGW is a DSL Network Termination (NT) that could either\n\
    \   operate as a layer 2 bridge or as a layer 3 router.  In the latter\n   case,\
    \ such a device is also referred to as a Routing Gateway (RG).\n"
- title: 2.2.2.  Access Loop
  contents:
  - "2.2.2.  Access Loop\n   The access loop ensures physical connectivity between\
    \ the HGW at the\n   customer premises and the Access Node.  In case of DSL, the\
    \ access-\n   loop physical layer could be, e.g., ADSL, ADSL2+, VDSL, VDSL2, or\n\
    \   SHDSL.  In order to increase bandwidth, it is also possible that\n   multiple\
    \ DSL links are grouped together to form a single virtual\n   link; this process\
    \ is called \"DSL bonding\".  The protocol\n   encapsulation on the access loop\
    \ could be based on multi-protocol\n   encapsulation over ATM Adaption Layer 5\
    \ (AAL5) defined in [RFC2684].\n   This covers PPP over Ethernet (PPPoE, defined\
    \ in [RFC2516]), bridged\n   IP (IP over Ethernet (IPoE), defined in [RFC894])\
    \ and routed IP (IP\n   over ATM (IPoA), defined in [RFC2225]).  Next to this,\
    \ PPP over AAL5\n   (PPPoA) as defined in [RFC2364] can be used.  Future scenarios\n\
    \   include cases where the access loop supports direct Ethernet\n   encapsulation\
    \ (e.g., when using VDSL or VDSL2).\n"
- title: 2.2.3.  Access Node
  contents:
  - "2.2.3.  Access Node\n   The Access Node (AN) may support one or more access-loop\
    \ technologies\n   and allow them to interwork with a common aggregation network\n\
    \   technology.  Besides the access-loop termination, the AN can also\n   aggregate\
    \ traffic from other Access Nodes using ATM or Ethernet.\n   The framework defined\
    \ by this document is targeted at DSL-based\n   access (either by means of ATM/DSL\
    \ or as Ethernet/DSL).  The\n   framework shall be open to non-DSL technologies,\
    \ like Passive Optical\n   Networks (PONs) and IEEE 802.16 (WiMAX), but the details\
    \ of this are\n   outside the scope of this document.\n   The reporting and/or\
    \ enforcement function defined in Section 2.1\n   typically resides in an Access\
    \ Node.\n"
- title: 2.2.4.  Access Node Uplink
  contents:
  - "2.2.4.  Access Node Uplink\n   The fundamental requirements for the Access Node\
    \ uplink are to\n   provide traffic aggregation, Class of Service (CoS) distinction,\
    \ and\n   customer separation and traceability.  This can be achieved using an\n\
    \   ATM- or Ethernet-based technology.\n"
- title: 2.2.5.  Aggregation Network
  contents:
  - "2.2.5.  Aggregation Network\n   The aggregation network provides traffic aggregation\
    \ towards the NAS.\n   The aggregation technology can be based on ATM (in case\
    \ of a TR-059\n   architecture) or Ethernet (in case of a TR-101 architecture).\n"
- title: 2.2.6.  Network Access Server
  contents:
  - "2.2.6.  Network Access Server\n   The Network Access Server (NAS) interfaces\
    \ to the aggregation network\n   by means of standard ATM or Ethernet interfaces,\
    \ and towards the\n   Regional Network by means of transport interfaces for Ethernet\
    \ frames\n   (e.g., Gigabit Ethernet (GigE), Ethernet over Synchronous Optical\n\
    \   Network (SONET)).  The NAS functionality corresponds to the BNG\n   functionality\
    \ described in Broadband Forum TR-101.  In addition to\n   this, the NAS supports\
    \ the Access Node Control functionality defined\n   for the respective use cases\
    \ throughout this document.\n   The controller function defined in Section 2.1\
    \ typically resides in a\n   NAS.\n"
- title: 2.2.7.  Regional Network
  contents:
  - "2.2.7.  Regional Network\n   The Regional Network connects one or more NAS and\
    \ associated Access\n   Networks to Network Service Providers (NSPs) and Application\
    \ Service\n   Providers (ASPs).  The NSP authenticates access and provides and\n\
    \   manages the IP address to subscribers.  It is responsible for overall\n  \
    \ service assurance and includes Internet Service Providers (ISPs).\n   The ASP\
    \ provides application services to the application subscriber\n   (gaming, video,\
    \ content on demand, IP telephony, etc.).\n   The Regional Network supports aggregation\
    \ of traffic from multiple\n   Access Networks and hands off larger geographic\
    \ locations to NSPs and\n   ASPs -- relieving a potential requirement for them\
    \ to build\n   infrastructure to attach more directly to the various Access\n\
    \   Networks.\n"
- title: 2.3.  Prioritizing Access Node Control Traffic
  contents:
  - "2.3.  Prioritizing Access Node Control Traffic\n   When sending Access Node Control\
    \ messages across the aggregation\n   network, care is needed that messages won't\
    \ get lost.  The\n   connectivity between the Access Node and the NAS may differ\
    \ depending\n   on the actual layer 2 technology used (ATM or Ethernet).  This\n\
    \   section briefly outlines how network connectivity can be established.\n  \
    \ In case of an ATM access/aggregation network, a typical practice is\n   to send\
    \ the Access Node Control Protocol messages over a dedicated\n   Permanent Virtual\
    \ Circuit (PVC) configured between the AN and the\n   NAS.  These ATM PVCs would\
    \ then be given a high priority so that at\n   times of network congestion, loss\
    \ of the ATM cells carrying the\n   Access Node Control Protocol is avoided or\
    \ minimized.  It is\n   discouraged to route the Access Node Control Protocol\
    \ messages within\n   the Virtual Path (VP) that also carries the customer connections,\
    \ if\n   that VP is configured with a best-effort QoS class (e.g., Unspecified\n\
    \   Bitrate (UBR)).  The PVCs of multiple Access Node Control Adjacencies\n  \
    \ can be aggregated into a VP that is given a high priority and runs\n   across\
    \ the aggregation network.  This requires the presence of a VC\n   cross-connect\
    \ in the aggregation node that terminates the VP.\n   In case of an Ethernet access/aggregation\
    \ network, a typical practice\n   is to send the Access Node Control Protocol\
    \ messages over a dedicated\n   Ethernet Virtual LAN (VLAN) using a separate VLAN\
    \ identifier (VLAN\n   ID).  This can be achieved using a different VLAN ID for\
    \ each Access\n   Node, or, in networks with many Access Nodes and a high degree\
    \ of\n   aggregation, one Customer VLAN (C-VLAN) per Access Node and one\n   Service\
    \ VLAN (S-VLAN) for the Access Node Control Adjacencies of all\n   Access Nodes.\
    \  The traffic should be given a high priority (e.g., by\n   using a high CoS\
    \ value) so that the frame loss of Ethernet frames\n   carrying the Access Node\
    \ Control Protocol messages is minimized in\n   the event of network congestion.\n\
    \   In both cases, the Control Channel between NAS and Access Node could\n   use\
    \ the same physical network and routing resources as the subscriber\n   traffic.\
    \  This means that the connection is an inband connection\n   between the involved\
    \ network elements.  Therefore, there is no need\n   for an additional physical\
    \ interface to establish the Control\n   Channel.\n   Note that these methods\
    \ for transporting Access Node Control Protocol\n   messages are typical examples;\
    \ they do not rule out other methods\n   that achieve the same behavior.\n   The\
    \ Access Node Control Adjacency interactions must be reliable.  In\n   addition\
    \ to this, some of the use cases described in Section 3\n   require the interactions\
    \ to be performed in a transactional fashion,\n   i.e., using a \"request/response\"\
    \ mechanism.  This is required so that\n   the network elements always remain\
    \ in a known state, irrespective of\n   whether or not the transaction is successful.\n"
- title: 2.4.  Interaction with Management Systems
  contents:
  - "2.4.  Interaction with Management Systems\n   When introducing an Access Node\
    \ Control Mechanism, care is needed to\n   ensure that the existing management\
    \ mechanisms remain operational as\n   before.\n   Specifically, when using the\
    \ Access Node Control Mechanism for\n   performing a configuration action on a\
    \ network element, one gets\n   confronted with the challenge of supporting multiple\
    \ managers for the\n   same network element: both the Element Manager as well\
    \ as the Access\n   Node Control Mechanism may now perform configuration actions\
    \ on the\n   same network element.  Therefore, conflicts need to be avoided.\n\
    \   Using the Access Node Control Mechanism, the NAS retrieves and\n   controls\
    \ a number of subscriber-related parameters.  The NAS may\n   decide to communicate\
    \ this information to a central Policy or AAA\n   Server so that it can keep track\
    \ of the parameters and apply policies\n   on them.  The Server can then enforce\
    \ those policies on the NAS.  For\n   instance, in case a subscriber is connected\
    \ to more than one NAS, the\n   policy server could be used to coordinate the\
    \ bandwidth available on\n   a given Access Port for use amongst the different\
    \ NAS devices.\n   Guidelines related to management will be addressed in Section\
    \ 5.\n"
- title: 2.5.  Circuit Addressing Scheme
  contents:
  - "2.5.  Circuit Addressing Scheme\n   In order to associate subscriber parameters\
    \ to a particular Access\n   Port, the NAS needs to be able to uniquely identify\
    \ the Access Port\n   (or a specific circuit on an Access Port) using an addressing\
    \ scheme.\n   In deployments using an ATM aggregation network, the ATM PVC on\
    \ an\n   access loop connects the subscriber to a NAS.  Based on this\n   property,\
    \ the NAS typically includes a NAS-Port-Id, NAS-Port, or\n   Calling-Station-Id\
    \ attribute in RADIUS authentication and accounting\n   packets sent to the RADIUS\
    \ server(s).  Such attribute includes the\n   identification of the ATM VC for\
    \ this subscriber, which allows in\n   turn identifying the access loop.\n   In\
    \ an Ethernet-based aggregation network, a new addressing scheme is\n   defined\
    \ in [TR-101].  Two mechanisms can be used:\n   o  A first approach is to use\
    \ a one-to-one VLAN assignment model for\n      all Access Ports (e.g., a DSL\
    \ port) and circuits on an Access Port\n      (e.g., an ATM PVC on an ADSL port).\
    \  This enables directly\n      deriving the port and circuit identification from\
    \ the VLAN tagging\n      information, i.e., S-VLAN ID or <S-VLAN ID, C-VLAN ID>\
    \ pair.\n   o  A second approach is to use a many-to-one VLAN assignment model\n\
    \      and to encode the Access Port and circuit identification in the\n     \
    \ \"Agent Circuit ID\" sub-option to be added to a DHCP or PPPoE\n      message.\
    \  The details of this approach are specified in [TR-101].\n   This document reuses\
    \ the addressing scheme specified in TR-101.  It\n   should be noted however that\
    \ the use of such a scheme does not imply\n   the actual existence of a PPPoE\
    \ or DHCP session, nor the presence of\n   the specific interworking function\
    \ in the Access Node.  In some\n   cases, no PPPoE or DHCP session may be present,\
    \ while port and\n   circuit addressing would still be desirable.\n"
- title: 3.  Use Cases for Access Node Control Mechanism
  contents:
  - '3.  Use Cases for Access Node Control Mechanism

    '
- title: 3.1.  Access Topology Discovery
  contents:
  - "3.1.  Access Topology Discovery\n   [TR-059] and [TR-101] discuss various queuing/scheduling\
    \ mechanisms\n   to avoid congestion in the access network while dealing with\
    \ multiple\n   flows with distinct QoS requirements.  One technique that can be\
    \ used\n   on a NAS is known as \"Hierarchical Scheduling\" (HS).  This option\
    \ is\n   applicable in a single NAS scenario (in which case the NAS manages\n\
    \   all the bandwidth available on the access loop) or in a dual NAS\n   scenario\
    \ (in which case the NAS manages some fraction of the access\n   loop's bandwidth).\
    \  The HS must, at a minimum, support 3 levels\n   modeling the NAS port, Access\
    \ Node uplink, and access-loop sync rate.\n   The rationale for the support of\
    \ HS is as follows:\n   o  Provide fairness of network resources within a class.\n\
    \   o  Allow for a better utilization of network resources.  Drop traffic\n  \
    \    early at the NAS rather than letting it traverse the aggregation\n      network\
    \ just to be dropped at the Access Node.\n   o  Enable more flexible CoS behaviors\
    \ than only strict priority.\n   o  The HS system could be augmented to provide\
    \ per-application\n      admission control.\n   o  Allow fully dynamic bandwidth\
    \ partitioning between the various\n      applications (as opposed to static bandwidth\
    \ partitioning).\n   o  Support \"per-user weighted scheduling\" to allow differentiated\n\
    \      Service Level Agreements (e.g., business services) within a given\n   \
    \   traffic class.\n   Such mechanisms require that the NAS gains knowledge about\
    \ the\n   topology of the access network, the various links being used, and\n\
    \   their respective rates.  Some of the information required is somewhat\n  \
    \ dynamic in nature (e.g., DSL line rate -- thus also the net data\n   rate);\
    \ hence, it cannot come from a provisioning and/or inventory\n   management OSS\
    \ system.  Some of the information varies less\n   frequently (e.g., capacity\
    \ of a DSLAM uplink), but nevertheless needs\n   to be kept strictly in sync between\
    \ the actual capacity of the uplink\n   and the image the BRAS has of it.\n  \
    \ OSS systems are typically not designed to enforce the consistency of\n   such\
    \ data in a reliable and scalable manner across organizational\n   boundaries.\
    \  The Access Topology Discovery function is intended to\n   allow the NAS to\
    \ perform these functions without having to rely on an\n   integration with an\
    \ OSS system.\n   Communicating access-loop attributes is specifically important\
    \ in\n   case the rate of the access loop changes overtime.  The DSL actual\n\
    \   data rate may be different every time the DSL NT is turned on.  In\n   this\
    \ case, the Access Node sends an Information Report message to the\n   NAS after\
    \ the DSL line has resynchronized.\n   Additionally, during the time the DSL NT\
    \ is active, data rate changes\n   can occur due to environmental conditions (the\
    \ DSL access loop can\n   get \"out of sync\" and can retrain to a lower value,\
    \ or the DSL access\n   loop could use Seamless Rate Adaptation making the actual\
    \ data rate\n   fluctuate while the line is active).  In this case, the Access\
    \ Node\n   sends an additional Information Report to the NAS each time the\n \
    \  access-loop attributes change above a threshold value.\n   The hierarchy and\
    \ the rates of the various links to enable the NAS\n   hierarchical scheduling\
    \ and policing mechanisms are the following:\n   o  The identification and speed\
    \ (data rate) of the DSL access loop\n      (i.e., the net data rate)\n   o  The\
    \ identification and speed (data rate) of the Remote Terminal\n      (RT) / Access\
    \ Node uplink (when relevant)\n   The NAS can adjust downstream shaping to the\
    \ Access Loop's current\n   actual data rate, and more generally reconfigure the\
    \ appropriate\n   nodes of its hierarchical scheduler (support of advanced capabilities\n\
    \   according to TR-101).\n   This use case may actually include more information\
    \ than link\n   identification and corresponding data rates.  In case of DSL access\n\
    \   loops, the following access-loop characteristics can be sent to the\n   NAS\
    \ (cf. ITU-T Recommendation G.997.1 [G.997.1]):\n   o  DSL Type (e.g., ADSL1,\
    \ ADSL2, SDSL, ADSL2+, VDSL, VDSL2)\n   o  Framing mode (e.g., ATM, ITU-T Packet\
    \ Transfer Mode (PTM), IEEE\n      802.3 Ethernet in the First Mile (EFM))\n \
    \  o  DSL port state (e.g., synchronized/showtime, low power, no power/\n    \
    \  idle)\n   o  Actual net data rate (upstream/downstream)\n   o  Maximum achievable/attainable\
    \ net data rate (upstream/downstream)\n   o  Minimum net data rate configured\
    \ for the access loop (upstream/\n      downstream)\n   o  Maximum net data rate\
    \ configured for the access loop (upstream/\n      downstream)\n   o  Minimum\
    \ net data rate in low power state configured for the access\n      loop (upstream/downstream)\n\
    \   o  Maximum achievable interleaving delay (upstream/downstream)\n   o  Actual\
    \ interleaving delay (upstream/downstream)\n   The NAS MUST be able to receive\
    \ access-loop characteristics\n   information, and share such information with\
    \ AAA/policy servers.\n"
- title: 3.2.  Access-Loop Configuration
  contents:
  - "3.2.  Access-Loop Configuration\n   access-loop rates are typically configured\
    \ in a static way.  When a\n   subscriber wants to change its access-loop rate,\
    \ the network operator\n   needs to reconfigure the Access Port configuration,\
    \ possibly implying\n   a business-to-business transaction between an Internet\
    \ Service\n   Provider (ISP) and an Access Provider.  From an Operating\n   Expenditures\
    \ (OPEX) perspective this is a costly operation.\n   Using the Access Node Control\
    \ Mechanism to change the access-loop\n   rate from the NAS avoids those cross-organization\
    \ business-to-\n   business interactions and allows to centralize subscriber-related\n\
    \   service data in e.g., a policy server.  More generally, several\n   access-loop\
    \ parameters (e.g., minimum data rate, interleaving delay)\n   could be changed\
    \ by means of the Access Node Control Mechanism.\n   Triggered by the communication\
    \ of the access-loop attributes\n   described in Section 3.1, the NAS could query\
    \ a Policy or AAA Server\n   to retrieve access-loop configuration data.  The\
    \ best way to change\n   access-loop parameters is by using profiles.  These profiles\
    \ (e.g.,\n   DSL profiles for different services) are pre-configured by the\n\
    \   Element Manager managing the Access Nodes.  The NAS may then use the\n   Configure\
    \ Request message to send a reference to the right profile to\n   the Access Node.\
    \  The NAS may also update the access-loop\n   configuration due to a subscriber\
    \ service change (e.g., triggered by\n   the policy server).\n   The access-loop\
    \ configuration mechanism may also be useful for\n   configuration of parameters\
    \ that are not specific to the access-loop\n   technology.  Examples include the\
    \ QoS profile to be used for an\n   access loop, or the per-subscriber multicast\
    \ channel entitlement\n   information, used for IPTV applications where the Access\
    \ Node is\n   performing IGMP snooping or IGMP proxy function.  The latter is\
    \ also\n   discussed in Section 3.4.\n   It may be possible that a subscriber\
    \ wants to change its access-loop\n   rate, and that the operator wants to enforce\
    \ this updated access-loop\n   rate on the Access Node using ANCP, but that the\
    \ Access Node Control\n   Adjacency is down.  In such a case, the NAS will not\
    \ be able to\n   request the configuration change on the Access Node.  The NAS\
    \ should\n   then report this failure to the external management system, which\n\
    \   could use application-specific signaling to notify the subscriber of\n   the\
    \ fact that the change could not be performed at this time.\n"
- title: 3.3.  Remote Connectivity Test
  contents:
  - "3.3.  Remote Connectivity Test\n   Traditionally, ATM circuits are point-to-point\
    \ connections between\n   the BRAS and the DSLAM or DSL NT.  In order to test\
    \ the connectivity\n   on layer 2, appropriate Operations, Administration, and\
    \ Maintenance\n   (OAM) functionality is used for operation and troubleshooting.\
    \  An\n   end-to-end OAM loopback is performed between the edge devices (NAS\n\
    \   and HGW) of the broadband access network.\n   When migrating to an Ethernet-based\
    \ aggregation network (as defined\n   by TR-101), end-to-end ATM OAM functionality\
    \ is no longer applicable.\n   Ideally in an Ethernet aggregation network, end-to-end\
    \ Ethernet OAM\n   (as specified in IEEE 802.1ag and ITU-T Recommendation Y.1730/1731)\n\
    \   can provide access-loop connectivity testing and fault isolation.\n   However,\
    \ most HGWs do not yet support these standard Ethernet OAM\n   procedures.  Also,\
    \ various access technologies exist such as ATM/DSL,\n   Ethernet in the First\
    \ Mile (EFM), etc.  Each of these access\n   technologies have their own link-based\
    \ OAM mechanisms that have been\n   or are being standardized in different standard\
    \ bodies.\n   In a mixed Ethernet and ATM access network (including the local\n\
    \   loop), it is desirable to keep the same ways to test and troubleshoot\n  \
    \ connectivity as those used in an ATM-based architecture.  To reach\n   consistency\
    \ with the ATM-based approach, an Access Node Control\n   Mechanism between NAS\
    \ and Access Node can be used until end-to-end\n   Ethernet OAM mechanisms are\
    \ more widely available.\n   Triggered by a local management interface, the NAS\
    \ can use the Access\n   Node Control Mechanism to initiate an access-loop test\
    \ between Access\n   Node and HGW.  In case of an ATM-based access loop, the Access\
    \ Node\n   Control Mechanism can trigger the Access Node to generate ATM (F4/F5)\n\
    \   loopback cells on the access loop.  In case of Ethernet, the Access\n   Node\
    \ can perform a port synchronization and administrative test for\n   the access\
    \ loop.  The Access Node can send the result of the test to\n   the NAS via a\
    \ Control Response message.  The NAS may then send the\n   result via a local\
    \ management interface.  Thus, the connectivity\n   between the NAS and the HGW\
    \ can be monitored by a single trigger\n   event.\n"
- title: 3.4.  Multicast
  contents:
  - "3.4.  Multicast\n   With the rise of supporting IPTV services in a resource efficient\n\
    \   way, multicast services are getting increasingly important.\n   In case of\
    \ an ATM access/aggregation network, such as the reference\n   architecture specified\
    \ in Broadband Forum [TR-059], multicast traffic\n   replication is performed\
    \ in the NAS.  In this model, typically IGMP\n   is used to control the multicast\
    \ replication process towards the\n   subscribers.  The NAS terminates and processes\
    \ IGMP signaling\n   messages sent by the subscribers; towards the Regional Network,\
    \ the\n   NAS typically uses a multicast routing protocol such as Protocol\n \
    \  Independent Multicast (PIM).  The ATM Access Nodes and aggregation\n   switches\
    \ don't perform IGMP processing, nor do they perform multicast\n   traffic replication.\
    \  As a result, network resources are wasted\n   within the access/aggregation\
    \ network.\n   To overcome this resource inefficiency, the Access Node, aggregation\n\
    \   node(s), and the NAS must all be involved in the multicast\n   replication\
    \ process.  This prevents several copies of the same stream\n   from being sent\
    \ within the access/aggregation network.  In case of an\n   Ethernet-based access/aggregation\
    \ network, this may, for example, be\n   achieved by means of IGMP snooping or\
    \ IGMP proxy in the Access Node\n   and aggregation node(s).\n   By introducing\
    \ IGMP processing in the access/aggregation nodes, the\n   multicast replication\
    \ process is now divided between the NAS, the\n   aggregation node(s), and Access\
    \ Nodes.  In order to ensure backward\n   compatibility with the ATM-based model,\
    \ the NAS, aggregation node,\n   and Access Node need to behave as a single logical\
    \ device.  This\n   logical device must have exactly the same functionality as\
    \ the NAS in\n   the ATM access/aggregation network.  The Access Node Control\n\
    \   Mechanism can be used to make sure that this logical/functional\n   equivalence\
    \ is achieved by exchanging the necessary information\n   between the Access Node\
    \ and the NAS.\n   Another option is for the subscriber to communicate the \"\
    join/leave\"\n   information with the NAS.  This can for instance be done by\n\
    \   terminating all subscriber IGMP signaling on the NAS.  Another\n   example\
    \ could be a subscriber using some form of application-level\n   signaling, which\
    \ is redirected to the NAS.  In any case, this option\n   is transparent to the\
    \ access and aggregation network.  In this\n   scenario, the NAS can use ANCP\
    \ to create replication state in the AN\n   for efficient multicast replication.\
    \  The NAS sends a single copy of\n   the multicast stream towards the AN.  The\
    \ NAS can perform conditional\n   access and multicast admission control on multicast\
    \ joins, and create\n   replication state in the AN if the flow is admitted by\
    \ the NAS.\n   The following subsections describe the different use cases related\
    \ to\n   multicast.\n"
- title: 3.4.1.  Multicast Conditional Access
  contents:
  - "3.4.1.  Multicast Conditional Access\n   In a DSL broadband access scenario,\
    \ service providers may want to\n   dynamically control, at the network level,\
    \ access to some multicast\n   flows on a per-user basis.  This may be used in\
    \ order to\n   differentiate among multiple Service Offers or to realize/reinforce\n\
    \   conditional access for sensitive content.  Note that, in some\n   environments,\
    \ application-layer conditional access by means of\n   Digital Rights Management\
    \ (DRM) may provide sufficient control, so\n   that Multicast Conditional Access\
    \ may not be needed.\n   Where Multicast Conditional Access is required, it is\
    \ possible, in\n   some cases, to provision the necessary conditional access information\n\
    \   into the AN so the AN can then perform the conditional access\n   decisions\
    \ autonomously.  For these cases, the NAS can use ANCP to\n   provision the necessary\
    \ information in the AN so that the AN can\n   decide locally to honor a join\
    \ or to not honor a join.  This can be\n   done with the Control Request and Control\
    \ Response messages.\n   Provisioning the conditional access information on the\
    \ AN can be done\n   using a \"white list\", \"grey list\", and/or a \"black list\"\
    .  A white\n   list associated with an Access Port identifies the multicast flows\n\
    \   that are allowed to be replicated to that port.  A black list\n   associated\
    \ with an Access Port identifies the multicast flows that\n   are not allowed\
    \ to be replicated to that port.  A grey list\n   associated with an Access Port\
    \ identifies the multicast flows for\n   which the AN on receiving a join message,\
    \ before starting traffic\n   replication queries the NAS for further authorization.\
    \  Each list\n   contains zero, one, or multiple entries, and each entry may specify\
    \ a\n   single flow or contain ranges (i.e., mask on Group address and/or\n  \
    \ mask on Source address).\n   Upon receiving a join message on an Access Port,\
    \ the Access Node will\n   first check if the requested multicast flow is part\
    \ of a white, grey,\n   or a black list associated with that Access Port.  If\
    \ it is part of a\n   white list, the AN autonomously starts replicating multicast\
    \ traffic.\n   If it is part of a black list, the AN autonomously discards the\n\
    \   message because the request is not authorized, and may thus inform\n   the\
    \ NAS and log the request accordingly.  If it is part of a grey\n   list the AN\
    \ uses ANCP to query the NAS, that in turn will respond to\n   the AN indicating\
    \ whether the join is to be honored (and hence\n   replication performed by the\
    \ AN) or denied (and hence replication not\n   performed by the AN).\n   If the\
    \ requested multicast flow is part of multiple lists associated\n   with the Access\
    \ Port, then the most specific match will be used.  If\n   the most specific match\
    \ occurs in multiple lists, the black list\n   entry takes precedence over the\
    \ grey list, which takes precedence\n   over the white list.\n   If the requested\
    \ multicast flow is not part of any list, the message\n   should be discarded.\
    \  This default behavior can easily be changed by\n   means of a \"catch-all\"\
    \ statement in either the white list or the grey\n   list.  For instance, adding\
    \ (<S=*,G=*>) in the white list would make\n   the default behavior to accept\
    \ join messages for a multicast flow\n   that has no other match on any list.\
    \  Similarly, if the default\n   behavior should be to send a request to the NAS,\
    \ then adding\n   (<S=*,G=*>) in the grey list accomplishes that.\n   The white\
    \ list, black list, and grey list can contain entries\n   allowing:\n   o  an\
    \ exact match for a (*,G) ASM group (e.g., <G=g.h.i.l>);\n   o  an exact match\
    \ for a (S,G) SSM channel (e.g.,\n      <S=s.t.u.v,G=g.h.i.l>);\n   o  a mask-based\
    \ range match for a (*,G) ASM group (e.g., <G=g.h.i.l/\n      Mask>);\n   o  a\
    \ mask-based range match for a (S,G) SSM channel (e.g.,\n      <S=s.t.u.v/Mask,G=g.h.i.l/Mask>);\n\
    \   The following are some example configurations:\n   o  Scenario 1: reject all\
    \ messages\n      *  black list = {<S=*,G=*>}\n   o  Scenario 2: reject all messages,\
    \ except Join (S=*,G=Gi) (1<=i<=n)\n      *  white list = { <S=*,G=G1> , <S=*,G=G2>,\
    \ ... <S=*,G=Gn>}\n      *  black list = {<S=*,G=*>}\n   o  Scenario 3: AN performs\
    \ autonomous decisions for some channels,\n      and asks the NAS for other channels\n\
    \      *  white list = { <S=*,G=G1> , <S=*,G=G2>, ... <S=*,G=Gn>}\n      *  grey\
    \ list = { <S=s,G=Gm>} for m>n\n      *  black list = {<S=*,G=*>}\n      *  ==>\
    \ Join (S=*,G=Gi) gets honored by AN (1<=i<=n)\n      *  ==> Join (S=s,G=Gm) triggers\
    \ ANCP Admission Request to NAS\n      *  ==> everything else gets rejected by\
    \ AN\n   The use of a white list and black list may be applicable, for\n   instance,\
    \ to regular IPTV services (i.e., broadcast TV) offered by an\n   Access Provider\
    \ to broadband (e.g., DSL) subscribers.  For this\n   application, the IPTV subscription\
    \ is typically bound to a specific\n   DSL line, and the multicast flows that\
    \ are part of the subscription\n   are well-known beforehand.  Furthermore, changes\
    \ to the conditional\n   access information are infrequent, since they are bound\
    \ to the\n   subscription.  Hence, the Access Node can be provisioned with the\n\
    \   conditional access information related to the IPTV service.\n   In some other\
    \ cases, it may be desirable to have the conditional\n   access decision being\
    \ taken by the NAS or a Policy Server.  This may\n   be the case when conditional\
    \ access information changes frequently,\n   or when the multicast groups are\
    \ not known to a client application in\n   advance.  The conditional access control\
    \ could be tied to a more\n   complex policy/authorization mechanism, e.g., time-of-day\
    \ access,\n   location-based access, or to invoke a remote authorization server.\n\
    \   For these cases, the AN can use ANCP to query the NAS that in turn\n   will\
    \ respond to the AN indicating whether the join is to be denied or\n   honored\
    \ (and hence replication performed by the AN).  This can be\n   done with the\
    \ Admission Request and Admission Response messages.\n   Some examples of using\
    \ NAS querying are the following:\n   o  Roaming users: a subscriber that logs\
    \ in on different wireless\n      hotspots and would like to receive multicast\
    \ content he is\n      entitled to receive;\n   o  Mobility or seamless handover\
    \ (a related example): in both cases,\n      the burden of (re)configuring access\
    \ nodes with white lists or\n      black lists may be too high;\n   o  \"Over-the-top\
    \ video partnerships\": service providers may choose to\n      partner with Internet\
    \ video providers to provide video content.\n      In this case, the multicast\
    \ group mappings may not be known in\n      advance, or may be reused for different\
    \ content in succession.\n   o  \"Pay Per View\": a subscriber chooses a specific\
    \ IPTV channel which\n      is made available for a given amount of time.\n"
- title: 3.4.2.  Multicast Admission Control
  contents:
  - "3.4.2.  Multicast Admission Control\n   The successful delivery of triple-play\
    \ broadband services is quickly\n   becoming a big capacity planning challenge\
    \ for most of the Service\n   Providers nowadays.  Solely increasing available\
    \ bandwidth is not\n   always practical, cost-economical, and/or sufficient to\
    \ satisfy end-\n   user experience given not only the strict requirements of unicast\n\
    \   delay sensitive applications like VoIP and video, but also the fast\n   growth\
    \ of multicast interactive applications such as\n   videoconferencing, digital\
    \ TV, digital audio, online movies, and\n   networked gaming.  These applications\
    \ are typically characterized by\n   a delay-sensitive nature, an extremely loss-sensitive\
    \ nature, and\n   intensive bandwidth requirements.  They are also typically \"\
    non-\n   elastic\", which means that they operate at a fixed bandwidth that\n\
    \   cannot be dynamically adjusted to the currently available bandwidth.\n   Therefore,\
    \ a Connection Admission Control (CAC) mechanism covering\n   admission of video\
    \ traffic over the DSL broadband access is required,\n   in order to avoid oversubscribing\
    \ the available bandwidth and\n   negatively impacting the end-user experience.\n\
    \   Considering specifically admission control over the access line,\n   before\
    \ honoring a user request to join a new multicast flow, the\n   combination of\
    \ AN and NAS must ensure admission control is performed\n   to validate that there\
    \ is sufficient bandwidth remaining on the\n   access line to carry the new video\
    \ stream (in addition to all other\n   multicast and unicast video streams sent\
    \ over the access line).  The\n   solution needs to cope with multiple flows per\
    \ access line and needs\n   to allow access-line bandwidth to be dynamically shared\
    \ across\n   multicast and unicast traffic (the unicast CAC is performed either\
    \ by\n   the NAS or by some off-path policy server).\n   Thus, supporting CAC\
    \ for the access line requires some form of\n   synchronization between the entity\
    \ performing multicast CAC (e.g.,\n   the NAS or the AN), the entity performing\
    \ unicast CAC (e.g., the\n   policy server), and the entity actually enforcing\
    \ the multicast\n   replication (i.e., the AN).  This synchronization can be achieved\
    \ in\n   a number of ways:\n   o  One approach is for the AN to query the NAS\
    \ so that Admission\n      Control for the access line is performed by the NAS,\
    \ or by the\n      policy server which interacts with the AN via NAS.  The AN\
    \ can use\n      ANCP to query the NAS that in turn performs a multicast Admission\n\
    \      Control check for the new multicast flow and responds to the AN\n     \
    \ indicating whether the join is to be denied or honored (and hence\n      replication\
    \ performed by the AN).  The NAS may locally keep track\n      of the portion\
    \ of the access-loop net data rate that is available\n      for (unicast or multicast)\
    \ video flows and perform video bandwidth\n      accounting for the access loop.\
    \  Upon receiving an Admission\n      Request from the AN, the NAS can check available\
    \ access-loop\n      bandwidth before admitting or denying the multicast flow.\
    \  In the\n      process, the NAS may communicate with the policy server.  For\n\
    \      unicast video services such as Video on Demand (VoD), the NAS may\n   \
    \   also be queried (by a policy server or via on-path CAC signaling),\n     \
    \ so that it can perform admission control for the unicast flow and\n      update\
    \ the remaining available access-loop bandwidth.  The ANCP\n      requirements\
    \ to support this approach are specified in this\n      document.\n   o  The above\
    \ model could be enhanced with the notion of \"Delegation\n      of Authorization\"\
    .  In such a model, the NAS or the policy server\n      delegates authority to\
    \ the Access Node to perform multicast\n      Admission Control on the access\
    \ loop.  This is sometimes referred\n      to as \"Bandwidth Delegation\", referring\
    \ to the portion of the\n      total access-loop bandwidth that can be used by\
    \ the Access Node\n      for multicast Admission Control.  In this model, the\
    \ NAS or the\n      policy server manages the total access-line bandwidth, performs\n\
    \      unicast admission control, and uses ANCP to authorize the Access\n    \
    \  Node to perform multicast Admission Control within the bounds of\n      the\
    \ \"delegated bandwidth\".  Upon receiving a request for a\n      multicast flow\
    \ replication that matches an entry in the white or\n      grey list, the AN performs\
    \ the necessary bandwidth admission\n      control check for the new multicast\
    \ flow, before starting the\n      multicast flow replication.  At this point,\
    \ there is typically no\n      need for the Access Node to communicate with the\
    \ NAS or the policy\n      server via the NAS.  The ANCP requirements to support\
    \ this\n      approach are also specified in this document.\n   o  In case the\
    \ subscriber communicates the \"join/leave\" information\n      with the NAS (e.g.,\
    \ by terminating all subscriber IGMP signaling\n      on the NAS or by using some\
    \ form of application-level signaling),\n      the approach is very similar. \
    \ In this case, the NAS may locally\n      keep track of the portion of the access-loop\
    \ bandwidth that is\n      available for video flows, perform CAC for unicast\
    \ and multicast\n      flows, and perform video bandwidth management.  The NAS\
    \ can set\n      the replication state on the AN using ANCP if the flow is\n \
    \     admitted.  For unicast video services, the NAS may be queried (by\n    \
    \  a policy server or via on-path CAC signaling) to perform admission\n      control\
    \ for the unicast flow, and update the remaining available\n      access-loop\
    \ bandwidth.  The ANCP requirements to support this\n      approach are specified\
    \ in this document.\n   o  In the last approach, the policy server queries the\
    \ AN directly or\n      indirectly via the NAS, so that both unicast and multicast\
    \ CAC for\n      the access line are performed by the AN.  In this case, a\n \
    \     subscriber request for a unicast flow (e.g., a Video on Demand\n      session)\
    \ will trigger a resource request message towards a policy\n      server; the\
    \ latter will then query the AN (possibly via the NAS),\n      that in turn will\
    \ perform unicast CAC for the access line and\n      respond, indicating whether\
    \ the unicast request is to be honored\n      or denied.  The above model could\
    \ also be enhanced with the notion\n      of \"Delegation of Authorization\".\
    \  In such a model, the policy\n      server delegates authority to the Access\
    \ Node to perform multicast\n      Admission Control on the access loop.  In the\
    \ case when the policy\n      server queries the AN directly, the approach doesn't\
    \ require the\n      use of ANCP.  It is therefore beyond the scope of this document.\n\
    \      In the case when the policy server queries the AN indirectly via\n    \
    \  the NAS, the approach requires the use of ANCP and is therefore in\n      the\
    \ scope of this document.\n"
- title: 3.4.2.1.  Delegation of Authority - Bandwidth Delegation
  contents:
  - "3.4.2.1.  Delegation of Authority - Bandwidth Delegation\n   The NAS uses ANCP\
    \ to indicate to the AN whether or not Admission\n   Control is required for a\
    \ particular multicast flow on a given Access\n   Port.  In case Admission Control\
    \ is required, the Access Node needs\n   to know whether or not it is authorized\
    \ to perform Admission Control\n   itself and, if so, within which bounds it is\
    \ authorized to do so\n   (i.e., how much bandwidth is \"delegated\" by the NAS\
    \ or the policy\n   server).  Depending on the type of multicast flow, Admission\
    \ Control\n   may or may not by done by the AN:\n   o  Multicast flows that require\
    \ a Conditional Access operation to be\n      performed by the Access Node are\
    \ put in the black or white list.\n      In addition, the Access Node performs\
    \ Admission Control for those\n      flows in the white list for which it is authorized\
    \ to do so.\n   o  Multicast flows that require a Conditional Access operation\
    \ to be\n      performed by the NAS or the policy server, are put in the grey\n\
    \      list.  In addition, for those flows in the grey list for which the\n  \
    \    Access Node should perform Admission Control, the NAS or the\n      policy\
    \ server will delegate authority to the AN.\n   In some cases, the bandwidth that\
    \ the NAS or the policy server\n   initially delegated to the AN may not be enough\
    \ to satisfy a\n   multicast request for a new flow.  In this scenario, the AN\
    \ can use\n   ANCP to query the NAS in order to request additional delegated\n\
    \   multicast bandwidth.  This is a form of extending the AN\n   authorization\
    \ to perform Admission Control.  The NAS or the policy\n   server decides if the\
    \ request for more bandwidth can be satisfied and\n   uses ANCP to send a response\
    \ to the AN indicating the updated\n   delegated multicast bandwidth.  It is worth\
    \ noting that in this case,\n   the time taken to complete the procedure is an\
    \ increment to the\n   zapping delay.  In order to minimize the zapping delay\
    \ for future\n   join requests, the AN can insert in the request message two values:\n\
    \   the minimum amount of additional multicast bandwidth requested and\n   the\
    \ preferred additional amount.  The first value is the amount that\n   allows\
    \ the present join request to be satisfied, the second value an\n   amount that\
    \ anticipates further join requests.\n   In some cases, the NAS or the policy\
    \ server may not have enough\n   unicast bandwidth to satisfy a new incoming video\
    \ request: in these\n   scenarios, the NAS can use ANCP to query (or instruct)\
    \ the AN in\n   order to decrease the amount of multicast bandwidth previously\n\
    \   delegated on a given Access Port.  This is a form of limiting/\n   withdrawing\
    \ AN authorization to perform Admission Control.  The NAS\n   can use ANCP to\
    \ send a response to AN indicating the updated\n   delegated multicast bandwidth.\
    \  Based on considerations similar to\n   those of the previous paragraph, it\
    \ indicates the minimum amount of\n   multicast bandwidth that it needs released\
    \ and a preferred amount,\n   which may be larger.\n   Note: in order to avoid\
    \ impacting existing multicast traffic, the NAS\n   must not decrease the amount\
    \ of delegated multicast bandwidth to a\n   value lower than the bandwidth that\
    \ is currently in use.  This\n   requires the NAS to be aware of this information\
    \ (e.g., by means of a\n   separate query action).\n   In addition, in some cases,\
    \ upon receiving a leave for a specific\n   multicast flow, the AN may decide\
    \ that it has an excess of delegated\n   but uncommitted bandwidth.  In such case,\
    \ the AN can use ANCP to send\n   a message to the NAS to release all of part\
    \ of the unused multicast\n   bandwidth that was previously delegated.  In this\
    \ process, the Access\n   Node may decide to retain a minimum amount of bandwidth\
    \ for multicast\n   services.\n"
- title: 3.4.2.2.  When Not to Perform Admission Control for a Subset of Flows
  contents:
  - "3.4.2.2.  When Not to Perform Admission Control for a Subset of Flows\n   In\
    \ general, the Access Node and NAS may not be aware of all possible\n   multicast\
    \ groups that will be streamed in the access network.  For\n   instance, it is\
    \ likely that there will be multicast streams offered\n   across the Internet.\
    \  For these unknown streams, performing bandwidth\n   Admission Control may be\
    \ challenging.\n   To solve this, these requests could be accepted without performing\n\
    \   Admission Control.  This solution works, provided that the network\n   handles\
    \ the streams as best effort, so that other streams (that are\n   subject to Admission\
    \ Control) are not impacted at times of\n   congestion.\n   Disabling Admission\
    \ Control for an unknown stream can be achieved by\n   adding a \"catch-all statement\"\
    \ in the Access Node white list or grey\n   list.  In case the Access Node queries\
    \ the NAS, the NAS on his turn\n   will have to accept the request.  That way,\
    \ the unknown streams are\n   not blocked by default.\n   Next, in order to ensure\
    \ that the streams are handled as best effort,\n   the flow must be marked as\
    \ such when entering the service provider\n   network.  This way, whenever congestion\
    \ occurs somewhere in the\n   access/aggregation network, this stream will be\
    \ kicked out before the\n   access provider's own premium content.\n   The above\
    \ concept is applicable beyond the notion of \"Internet\n   streams\" or other\
    \ unknown streams; it can be applied to known\n   multicast streams as well. \
    \ In this case, the Access Node or NAS will\n   accept the stream even when bandwidth\
    \ may not be sufficient to\n   support the stream.  This again requires that the\
    \ stream be marked as\n   best-effort traffic before entering the access/aggregation\
    \ network.\n"
- title: 3.4.2.3.  Multicast Admission Control and White Lists
  contents:
  - "3.4.2.3.  Multicast Admission Control and White Lists\n   As mentioned in Section\
    \ 3.4.1, conditional access to popular IPTV\n   channels can be achieved by means\
    \ of a white and black list\n   configured on the Access Node.  This method allows\
    \ the Access Node to\n   autonomously decide whether or not access can be granted\
    \ to a\n   multicast flow.\n   IPTV is an example of a service that will not be\
    \ offered as best\n   effort, but requires some level of guaranteed quality of\
    \ service.\n   This requires the use of Multicast Admission Control.  Hence, if\
    \ the\n   Access Node wants to autonomously perform the admission process, it\n\
    \   must be aware of the bandwidth characteristics of multicast flows.\n   Otherwise,\
    \ the Access Node would have to query the NAS for Multicast\n   Admission Control\
    \ (per the grey list behavior); this would defeat the\n   purpose of using a white\
    \ and black list.\n   Some network deployments may combine the use of white list,\
    \ black\n   list, and grey list.  The implications of such a model to the overall\n\
    \   Multicast Admission Control model are not fully explored in this\n   document.\n"
- title: 3.4.3.  Multicast Accounting and Reporting
  contents:
  - "3.4.3.  Multicast Accounting and Reporting\n   It may be desirable to perform\
    \ time- and/or volume-based accounting\n   for certain multicast flows sent on\
    \ particular Access Ports.  In case\n   the AN is performing the traffic replication\
    \ process, it knows when\n   replication of a multicast flow to a particular Access\
    \ Port or user\n   start and stops.  Multicast accounting can be addressed in\
    \ two ways:\n   o  The AN keeps track of when replication for a given multicast\
    \ flow\n      starts or ends on a specified Access Port, and generates time-\n\
    \      and/or volume-based accounting information per Access Port and per\n  \
    \    multicast flow, before sending it to a central accounting system\n      for\
    \ logging.  Given that the AN communicates with the accounting\n      system directly,\
    \ the approach doesn't require the use of ANCP.  It\n      is therefore beyond\
    \ the scope of this document;\n   o  The AN keeps track of when replication for\
    \ a given multicast flow\n      starts or ends on a specified Access Port, and\
    \ reports this\n      information to the NAS for further processing.  In this\
    \ case, ANCP\n      can be used to send the information from the AN to the NAS.\
    \  This\n      will be discussed in the remainder of this document.\n   The Access\
    \ Node can send multicast accounting information to the NAS\n   using the Information\
    \ Report message.  A distinction can be made\n   between two cases:\n   o  Basic\
    \ accounting information: the Access Node informs the NAS\n      whenever replication\
    \ starts or ends for a given multicast flow on\n      a particular Access Port;\n\
    \   o  Detailed accounting information: the Access Node not only informs\n   \
    \   the NAS when replication starts or ends, but also informs the NAS\n      about\
    \ the multicast traffic volume replicated on the Access Port\n      for that multicast\
    \ flow.  This is done by adding a byte count in\n      the Information Report\
    \ message that is sent to the NAS when\n      replication ends.\n   Upon receiving\
    \ the Information Report messages, the NAS generates the\n   appropriate time-\
    \ and/or volume-based accounting records per access\n   loop and per multicast\
    \ flow to be sent to the accounting system.\n   The NAS should inform the Access\
    \ Node about the type of accounting\n   needed for a given multicast flow on a\
    \ particular Access Port:\n   o  No reporting messages need to be sent to the\
    \ NAS.\n   o  Basic accounting is required.\n   o  Detailed accounting is required.\n\
    \   Note that in case of very fast channel changes, the amount of\n   Information\
    \ Report messages to be sent to the NAS could become high.\n   The ANCP requirements\
    \ to support this use case are specified below in\n   this document.\n   It may\
    \ also be desirable for the NAS to have the capability to\n   asynchronously query\
    \ the AN to obtain an instantaneous status report\n   related to multicast flows\
    \ currently replicated by the AN.  Such a\n   reporting functionality could be\
    \ useful for troubleshooting and\n   monitoring purposes.  The NAS can query the\
    \ AN to know the following:\n   o  Which flows are currently being sent on a specific\
    \ Access Port\n      (i.e., a report for one Access Port)\n   o  On which Access\
    \ Ports a specified multicast flow is currently\n      being sent (i.e., a report\
    \ for one multicast flow)\n   o  Which multicast flows are currently being sent\
    \ on each of the\n      Access Ports (i.e., a global report for one Access Node)\n"
- title: 3.4.4.  Spontaneous Admission Response
  contents:
  - "3.4.4.  Spontaneous Admission Response\n   The capability to dynamically stop\
    \ the replication of a multicast\n   flow can be useful in different scenarios:\
    \ for example in case of\n   prepaid service, when available credit expires, the\
    \ Service Provider\n   may want to be able to stop multicast replication on a\
    \ specified\n   Access Port for a particular user.  Another example of applicability\n\
    \   for this functionality is a scenario where a Service Provider would\n   like\
    \ to show a \"Content Preview\": in this case, a multicast content\n   will be\
    \ delivered just for a fixed amount of time.\n   In both cases, an external entity\
    \ (for example, a policy server or an\n   external application entity) can instruct\
    \ the NAS to interrupt the\n   multicast replication of a specified multicast\
    \ flow to a specified\n   Access Port or user.  The NAS can then use ANCP to communicate\
    \ this\n   decision to the Access Node.  This can be done with the Admission\n\
    \   Response message.\n   In some deployment scenarios, the NAS may be made aware\
    \ of end-users'\n   requests to join/leave a multicast flow by other means than\
    \ ANCP\n   Admission Requests sent by the AN.  One possible deployment scenario\n\
    \   where this model applies is the case where the Access Node doesn't\n   process\
    \ the IGMP join/leave messages from the end-user (e.g., because\n   they are tunneled),\
    \ but forwards them to the NAS.  In such\n   environments, the NAS can control\
    \ multicast replication on the AN via\n   ANCP through the use of Spontaneous\
    \ Admission Responses (i.e., sent\n   by the NAS without prior receipt of a corresponding\
    \ Admission\n   Request).\n"
- title: 4.  Requirements
  contents:
  - '4.  Requirements

    '
- title: 4.1.  ANCP Functional Requirements
  contents:
  - "4.1.  ANCP Functional Requirements\n   R-1  The ANCP MUST be easily extensible\
    \ through the definition of new\n        message types or TLVs to support use\
    \ cases beyond those\n        currently addressed in this document (this includes\
    \ the use of\n        Access Nodes different from a DSLAM, e.g., a PON Access\
    \ Node).\n   R-2  The ANCP MUST be flexible enough to accommodate the various\n\
    \        technologies that can be used in an access network and in the\n     \
    \   Access Node; this includes both ATM and Ethernet.\n   R-3  The Access Node\
    \ Control interactions MUST be reliable (using\n        either a reliable transport\
    \ protocol (e.g., TCP) for the Access\n        Node Control Protocol messages,\
    \ or by designing ANCP to be\n        reliable).\n   R-4  The ANCP MUST support\
    \ \"request/response\" transaction-based\n        interactions for the NAS to\
    \ communicate control decisions to the\n        Access Node, or for the NAS to\
    \ request information from the\n        Access Node.  Transactions MUST be atomic,\
    \ i.e., they are either\n        fully completed, or rolled back to the previous\
    \ state.  This is\n        required so that the network elements always remain\
    \ in a known\n        state, irrespective of whether or not the transaction is\n\
    \        successful.\n   In case the NAS wants to communicate a bulk of independent\
    \ control\n   decisions to the Access Node, the transaction (and notion of\n \
    \  atomicity) applies to the individual control decisions.  This avoids\n   having\
    \ to roll back all control decisions.  Similarly, if the NAS\n   wants to request\
    \ a bulk of independent information elements from the\n   Access Node, the notion\
    \ of transaction applies to the individual\n   information elements.\n   R-5 \
    \ The ANCP MUST be scalable enough to allow a given NAS to control\n        at\
    \ least 5000 Access Nodes.\n   R-6  The operation of the ANCP in the NAS and Access\
    \ Nodes MUST be\n        controllable via a management station (e.g., via SNMP).\
    \  This\n        MUST allow a management station to retrieve statistics and\n\
    \        alarms related to the operation of the ANCP, as well as to allow\n  \
    \      it to initiate OAM operations and retrieve corresponding\n        results.\n"
- title: 4.2.  ANCP Multicast Requirements
  contents:
  - "4.2.  ANCP Multicast Requirements\n   R-7   The ANCP MUST support providing multicast\
    \ conditional access\n         information to Access Ports on an Access Node,\
    \ using black,\n         grey, and white lists.\n   R-8   The ANCP MUST support\
    \ binding a particular black, grey, and\n         white List to a given Access\
    \ Port.\n   R-9   Upon receiving a join to a multicast flow that matches the grey\n\
    \         list, the ANCP MUST allow the AN to query the NAS to request an\n  \
    \       admission decision for replicating that multicast flow to a\n        \
    \ particular Access Port.\n   R-10  The ANCP MUST allow the NAS to send an admission\
    \ decision to\n         the AN indicating whether or not a multicast flow may\
    \ be\n         replicated to a particular Access Port.\n   R-11  The ANCP MUST\
    \ allow the NAS to indicate to the AN whether or\n         not Admission Control\
    \ is needed for some multicast flows on a\n         given Access Port, and (where\
    \ needed) whether or not the Access\n         Node is authorized to perform Admission\
    \ Control itself (i.e.,\n         whether or not AN Bandwidth Delegation applies).\n\
    \   R-12  In case of Admission Control without AN Bandwidth Delegation,\n    \
    \     the ANCP MUST allow the NAS to reply to a query from the AN\n         indicating\
    \ whether or not a multicast flow is allowed to be\n         replicated to a particular\
    \ Access Port.\n   R-13  In case of Admission Control with AN Bandwidth Delegation,\
    \ the\n         ANCP MUST allow the NAS to delegate a certain amount of\n    \
    \     bandwidth to the AN for a given Access Port for multicast\n         services\
    \ only.\n   R-14  In case of Admission Control with AN Bandwidth Delegation, the\n\
    \         ANCP MUST allow the AN to query the NAS to request additional\n    \
    \     multicast bandwidth on a given Access Port.\n   R-15  In case of Admission\
    \ Control with AN Bandwidth Delegation, the\n         ANCP MUST allow the NAS\
    \ to query (or to instruct) the AN to\n         reduce the amount of bandwidth\
    \ previously delegated on a given\n         Access Port.\n   R-16  In case of\
    \ Admission Control with AN Bandwidth Delegation, the\n         ANCP MUST allow\
    \ the AN to inform the NAS if it autonomously\n         releases redundant multicast\
    \ bandwidth on a given Access Port.\n   R-17  The ANCP MUST allow the AN to send\
    \ an Information Report\n         message to the NAS whenever replication of a\
    \ multicast flow on\n         a particular Access Port starts or ends.\n   R-18\
    \  The ANCP MUST allow the AN to send an Information Report\n         message\
    \ to the NAS indicating the multicast traffic volume that\n         has been replicated\
    \ on that port.\n   R-19  The ANCP MUST allow the NAS to indicate to the AN whether\
    \ or\n         not multicast accounting is needed for a multicast flow on a\n\
    \         particular Access Port.\n   R-20  In case multicast accounting is needed\
    \ for a multicast flow on\n         a particular Access Port, the ANCP MUST allow\
    \ the NAS to\n         indicate to the AN whether or not additional volume accounting\n\
    \         information is required.\n   R-21  The ANCP MUST allow the NAS to revoke\
    \ a decision to replicate a\n         multicast flow to a particular Access Port,\
    \ which had been\n         conveyed earlier to an AN.\n   R-22  The ANCP MUST\
    \ support partial updates of the white, grey, and\n         black lists.\n   R-23\
    \  The ANCP MUST allow the NAS to query the AN to obtain\n         information\
    \ on what multicast flows are currently being\n         replicated on a given\
    \ Access Port, what Access Ports are\n         currently receiving a given multicast\
    \ flow, or what multicast\n         flows are currently replicated on each Access\
    \ Port.\n"
- title: 4.3.  Protocol Design Requirements
  contents:
  - "4.3.  Protocol Design Requirements\n   R-24  The ANCP SHOULD provide a \"shutdown\"\
    \ sequence allowing the\n         protocol to inform the peer that the system\
    \ is gracefully\n         shutting down.\n   R-25  The ANCP SHOULD include a \"\
    report\" model for the Access Node to\n         spontaneously communicate to the\
    \ NAS changes of states.\n   R-26  The ANCP SHOULD support a graceful restart\
    \ mechanism to enable\n         it to be resilient to network failures between\
    \ the AN and NAS.\n   R-27  The ANCP MUST provide a means for the AN and the NAS\
    \ to inform\n         each peer about the supported use cases (either use cases\n\
    \         defined in this document or future use cases yet to be\n         defined),\
    \ and to negotiate a common subset.\n"
- title: 4.4.  Access Node Control Adjacency Requirements
  contents:
  - "4.4.  Access Node Control Adjacency Requirements\n   The notion of an Access\
    \ Node Control Adjacency is defined in\n   Section 1.2.\n   R-28  The ANCP MUST\
    \ support an adjacency protocol in order to\n         automatically synchronize\
    \ its operational state between its\n         peers, to agree on which version\
    \ of the protocol to use, to\n         discover the identity of its peers, and\
    \ to detect when they\n         change.\n   R-29  The ANCP MUST include a mechanism\
    \ to automatically detect\n         adjacency loss.\n   R-30  A loss of the Access\
    \ Node Control Adjacency MUST NOT affect\n         subscriber connectivity.\n\
    \   R-31  If the Access Node Control Adjacency is lost, it MUST leave the\n  \
    \       network elements in a known state, irrespective of whether or\n      \
    \   not the ongoing transaction was successful.\n   R-32  The ANCP MUST support\
    \ a mechanism to synchronize access port\n         configuration and status information\
    \ between ANCP peers as part\n         of establishing or recovering the Access\
    \ Node Control\n         Adjacency.\n"
- title: 4.5.  ANCP Transport Requirements
  contents:
  - "4.5.  ANCP Transport Requirements\n   R-33  The Access Node Control Mechanism\
    \ MUST be defined in a way that\n         is independent of the underlying layer\
    \ 2 transport technology.\n         Specifically, the Access Node Control Mechanism\
    \ MUST support\n         transmission over an ATM as well as over an Ethernet\n\
    \         aggregation network.\n   R-34  The ANCP MUST use the IP protocol stack.\n\
    \   R-35  If the layer 2 transport technology is based on ATM, then the\n    \
    \     ANCP peers must use the encapsulation according to [RFC2684]\n         (IPoA).\n\
    \   R-36  If the layer 2 transport technology is based on Ethernet, then\n   \
    \      the ANCP peers must use the encapsulation according to [RFC894]\n     \
    \    (IPoE).\n"
- title: 4.6.  Access Node Requirements
  contents:
  - "4.6.  Access Node Requirements\n   This section lists the requirements for an\
    \ AN that supports the use\n   cases defined in this document.  Note that this\
    \ document does not\n   intend to impose absolute requirements on network elements.\n\
    \   Therefore, the words \"must\" and \"should\" used in this section are not\n\
    \   capitalized.\n"
- title: 4.6.1.  General Architecture
  contents:
  - "4.6.1.  General Architecture\n   The Access Node Control Mechanism is defined\
    \ to operate between an\n   Access Node (AN) and a NAS.  In some cases, one AN\
    \ can be connected\n   to more than one physical NAS device (e.g., in case different\n\
    \   wholesale service providers have different NAS devices).  In such a\n   model,\
    \ the physical AN needs to be split in virtual ANs, each having\n   its own Access\
    \ Node Control reporting and/or enforcement function.\n   R-37  An Access Node\
    \ as physical device can be split in logical\n         partitions.  Each partition\
    \ may have its independent NAS.\n         Therefore, the Access Node must support\
    \ at least 2 partitions.\n         The Access Node should support 8 partitions.\n\
    \   R-38  One partition is grouped of several Access Ports.  Each Access\n   \
    \      Port on an Access Node must be assigned uniquely to one\n         partition.\n\
    \   It is assumed that all circuits (i.e., ATM PVCs or Ethernet VLANs) on\n  \
    \ top of the same physical Access Port are associated with the same\n   partition.\
    \  In other words, partitioning is performed at the level of\n   the physical\
    \ Access Port only.\n   R-39  Each AN partition must have a separate Access Node\
    \ Control\n         Adjacency to a NAS.\n   R-40  Each AN partition must be able\
    \ to enforce access of the\n         controllers to their designated partitions.\n\
    \   R-41  The Access Node should be able to establish and maintain ANCP\n    \
    \     Adjacencies to redundant controllers.\n"
- title: 4.6.2.  Control Channel Attributes
  contents:
  - "4.6.2.  Control Channel Attributes\n   The Control Channel is a bidirectional\
    \ IP communication interface\n   between the controller function (in the NAS)\
    \ and the reporting/\n   enforcement function (in the AN).  It is assumed that\
    \ this interface\n   is configured (rather than discovered) on the AN and the\
    \ NAS.\n   Depending on the network topology, the Access Node can be located in\n\
    \   a street cabinet or in a central office.  If an Access Node in a\n   street\
    \ cabinet is connected to a NAS, all user traffic and Access\n   Node Control\
    \ data can use the same physical link.\n   R-42  The Control Channel should use\
    \ the same facilities as the ones\n         used for the data traffic.  Note that\
    \ this is actually a\n         deployment consideration, which has no impact on\
    \ the actual\n         protocol design.\n   R-43  The Access Node must process\
    \ control transactions in real-time\n         (i.e., with a specific response\
    \ latency).\n   R-44  The Access Node should mark Access Node Control Protocol\n\
    \         messages with a high priority (e.g., Variable Bit Rate - Real\n    \
    \     Time (VBR-RT) for ATM cells, p-bit 6 or 7 for Ethernet packets)\n      \
    \   in order to avoid or reduce the likelihood of dropping packets\n         in\
    \ case of network congestion.\n   R-45  If ATM interfaces are used, then any Virtual\
    \ Path Identifier\n         (VPI) and Virtual Circuit Identifier (VCI) value must\
    \ be able\n         to be used for the purpose of supporting the Access Node\n\
    \         Control Channel.\n   R-46  If Ethernet interfaces are used then any\
    \ C-VID and S-VID must\n         be able to be used for the purpose of supporting\
    \ the Access\n         Node Control Channel.\n"
- title: 4.6.3.  Capability Negotiation Failure
  contents:
  - "4.6.3.  Capability Negotiation Failure\n   R-47  In case the Access Node and\
    \ NAS cannot agree on a common set of\n         capabilities, as part of the ANCP\
    \ capability negotiation\n         procedure, the Access Node must report this\
    \ to network\n         management.\n"
- title: 4.6.4.  Adjacency Status Reporting
  contents:
  - "4.6.4.  Adjacency Status Reporting\n   R-48  The Access Node should support generating\
    \ an alarm to a\n         management station upon loss or malfunctioning of the\
    \ Access\n         Node Control Adjacency with the NAS.\n"
- title: 4.6.5.  Identification
  contents:
  - "4.6.5.  Identification\n   R-49  To identify the Access Node and Access Port\
    \ within a control\n         domain, a unique identifier is required.  This identifier\
    \ must\n         be in line with the addressing scheme principles specified in\n\
    \         Section 3.9.3 of TR-101.\n   R-50  In a Broadband Forum TR-101 network\
    \ architecture, an Access\n         Circuit Identifier (ACI) identifying an AN\
    \ and Access Port is\n         added to DHCP and PPPoE messages.  The NAS must\
    \ use the same\n         ACI format in ANCP messages in order to allow the NAS\
    \ to\n         correlate this information with the information present in DHCP\n\
    \         and PPPoE messages.\n"
- title: 4.6.6.  Multicast
  contents:
  - "4.6.6.  Multicast\n   R-51  The AN must deny any join to a multicast flow matching\
    \ the\n         black list for the relevant Access Port.\n   R-52  The AN must\
    \ accept any join to a multicast flow matching the\n         white list and for\
    \ which no Bandwidth Delegation is used.\n   R-53  Upon receiving a join to a\
    \ multicast flow that matches the\n         white list and for which Bandwidth\
    \ Delegation is used, the AN\n         must perform the necessary bandwidth admission\
    \ control check\n         for the new flow before starting the multicast flow\n\
    \         replication.  This may involve a decision made locally, or\n       \
    \  querying the NAS or external system such as a policy server, to\n         request\
    \ additional delegated multicast bandwidth on a given\n         Access Port.\n\
    \   R-54  Upon receiving a join to a multicast flow which matches the\n      \
    \   grey list and for which no Bandwidth Delegation is used, the AN\n        \
    \ must support using ANCP to query the NAS to receive a response\n         indicating\
    \ whether that join is to be honored or denied.  In\n         this case, the NAS\
    \ will perform both the necessary conditional\n         access and the admission\
    \ control checks for the new flow.\n   R-55  Upon receiving a join to a multicast\
    \ flow that matches the grey\n         list and for which Bandwidth Delegation\
    \ is used, the AN must\n         first perform the necessary bandwidth admission\
    \ control check\n         for the new flow.  If successful, the AN must support\
    \ using\n         ANCP to query the NAS to receive a response indicating whether\n\
    \         that join is to be honored or denied.\n   R-56  In case of Admission\
    \ Control with AN Bandwidth Delegation, the\n         AN must support using ANCP\
    \ to notify the NAS when the user\n         leaves the multicast flow.\n   R-57\
    \  In case of Admission Control with AN Bandwidth Delegation, the\n         AN\
    \ must support using ANCP to query the NAS to request\n         additional delegated\
    \ multicast bandwidth on a given Access\n         Port; the AN should be able\
    \ to specify both the minimum and the\n         preferred amount of additional\
    \ multicast bandwidth requested.\n   R-58  In case of Admission Control with AN\
    \ Bandwidth Delegation, upon\n         receiving a Bandwidth Delegation Request\
    \ from the NAS querying\n         the AN for the delegated multicast bandwidth\
    \ on a given Access\n         Port, the AN must support using ANCP to send a Bandwidth\n\
    \         Delegation Response, indicating the currently delegated\n         multicast\
    \ bandwidth.\n   R-59  In case of Admission Control with AN Bandwidth Delegation,\
    \ it\n         may happen that the NAS wants to \"revoke\" all or part of the\n\
    \         delegated bandwidth.  Part of the previously delegated\n         bandwidth\
    \ may however be in use by multicast services.\n         Therefore, upon receiving\
    \ a Bandwidth Delegation Request from\n         the NAS instructing to decrease\
    \ the delegated multicast\n         bandwidth on a given Access Port, the AN must\
    \ support using\n         ANCP to send a Bandwidth Delegation Response, indicating\
    \ the\n         delegated multicast bandwidth after the decrease (indicating\n\
    \         how much of the delegated bandwidth can be returned to the NAS\n   \
    \      without impacting multicast services that are currently\n         running).\n\
    \   R-60  In case of Admission Control with AN Bandwidth Delegation, the\n   \
    \      AN must support using ANCP to send a Bandwidth Release message\n      \
    \   to the NAS in order to release unused delegated multicast\n         bandwidth\
    \ on a given Access Port.\n   R-61  If the requested multicast flow is not part\
    \ of any list\n         associated with the Access Port, the AN must discard the\n\
    \         message.\n   R-62  If the requested multicast flow is part of multiple\
    \ lists\n         associated with the Access Port, the AN must use the most\n\
    \         specific match.\n   R-63  If the requested multicast flow has the same\
    \ most specific\n         match in multiple lists, the AN must give precedence\
    \ to the\n         black list, followed by the grey list, and then the white list.\n\
    \   R-64  The AN must support configuring a \"catch-all\" statement in the\n \
    \        black, white, or grey list in order to enforce a default\n         behavior\
    \ for a join to a multicast flow which doesn't match any\n         other entry\
    \ in a list for the relevant Access Port.\n   R-65  Upon querying the NAS, the\
    \ AN must not propagate the join\n         message before the successful authorization\
    \ from the NAS is\n         received.\n   R-66  Upon receiving a leave for a multicast\
    \ flow that matches the\n         grey list, the AN should be able to autonomously\
    \ stop\n         replication and advertise this event to the NAS.\n   R-67  The\
    \ AN must support using ANCP to send an Information Report\n         message to\
    \ the NAS whenever replication starts or ends.\n   R-68  The AN should support\
    \ using ANCP to send an Information Report\n         message to the NAS indicating\
    \ the multicast traffic volume that\n         has been replicated on that port.\n\
    \   R-69  Upon request by the NAS, the AN must support using ANCP to send\n  \
    \       an Information Report message to the NAS, indicating what\n         multicast\
    \ flows are currently being replicated on a given\n         Access Port.\n   R-70\
    \  Upon request by the NAS, the AN must support using ANCP to send\n         an\
    \ Information Report message to the NAS, indicating what\n         Access Ports\
    \ are currently receiving a given multicast flow.\n   R-71  Upon request by the\
    \ NAS, the AN must support using ANCP to send\n         an Information Report\
    \ message to the NAS, indicating what\n         multicast flows are currently\
    \ being replicated on each Access\n         Port.\n   R-72  Upon receiving an\
    \ Admission Response from the NAS, indicating\n         that replication of a\
    \ multicast flow is to start or stop on a\n         given access port of the AN,\
    \ the AN must enforce this decision.\n         This decision must be taken irrespective\
    \ of whether or not a\n         corresponding Admission Request was issued by\
    \ the AN earlier.\n"
- title: 4.6.7.  Message Handling
  contents:
  - "4.6.7.  Message Handling\n   R-73  The Access Node must be designed to allow\
    \ fast completion of\n         ANCP operations, in the order of magnitude of tens\
    \ of\n         milliseconds.\n   R-74  The Access Node should avoid sending bursts\
    \ of ANCP messages\n         related to notification of line attributes or line\
    \ state, by\n         spreading message transmission over time.\n"
- title: 4.6.8.  Parameter Control
  contents:
  - "4.6.8.  Parameter Control\n   Naturally, the Access Node Control Mechanism is\
    \ not designed to\n   replace an Element Manager managing the Access Node.  There\
    \ are\n   parameters in the Access Node, such as the DSL noise margin and DSL\n\
    \   Power Spectral Density (PSD), which are not allowed to be changed via\n  \
    \ ANCP or any other control session, but only via the Element Manager.\n   This\
    \ has to be ensured and protected by the Access Node.\n   When using ANCP for\
    \ access-loop configuration, the EMS needs to\n   configure on the Access Node\
    \ which parameters may or may not be\n   modified using the Access Node Control\
    \ Mechanism.  Furthermore, for\n   those parameters that may be modified using\
    \ ANCP, the EMS needs to\n   specify the default values to be used when an Access\
    \ Node comes up\n   after recovery.\n   R-75  When access-loop configuration via\
    \ ANCP is required, the EMS\n         must configure on the Access Node which\
    \ parameter set(s) may be\n         changed/controlled using ANCP.\n   R-76  Upon\
    \ receiving an Access Node Control Request message, the\n         Access Node\
    \ must not apply changes to the parameter set(s) that\n         have not been\
    \ enabled by the EMS.\n"
- title: 4.7.  Network Access Server Requirements
  contents:
  - "4.7.  Network Access Server Requirements\n   This section lists the requirements\
    \ for a NAS that supports the use\n   cases defined in this document.  Note that\
    \ this document does not\n   intend to impose absolute requirements on network\
    \ elements.\n   Therefore, the words \"must\" and \"should\" used in this section\
    \ are not\n   capitalized.\n"
- title: 4.7.1.  General Architecture
  contents:
  - "4.7.1.  General Architecture\n   R-77  The NAS must establish ANCP Adjacencies\
    \ only with authorized\n         ANCP peers.\n   R-78  The NAS must support the\
    \ capability to simultaneously run ANCP\n         with multiple ANs in a network.\n\
    \   R-79  The NAS must be able to establish an Access Node Control\n         Adjacency\
    \ to a particular partition on an AN and control the\n         access loops belonging\
    \ to such a partition.\n   R-80  The NAS must support obtaining access-loop information\
    \ (e.g.,\n         net data rate), from its peer Access Node partitions via the\n\
    \         Access Node Control Mechanism.\n   R-81  The NAS must support shaping\
    \ traffic directed towards a\n         particular access loop to not exceed the\
    \ net data rate learned\n         from the AN via the Access Node Control Mechanism.\n\
    \   R-82  The NAS should support reducing or disabling the shaping limit\n   \
    \      used in the Hierarchical Scheduling process, according to per-\n      \
    \   subscriber authorization data retrieved from a AAA or policy\n         server.\n\
    \   R-83  The NAS must support reporting of access-loop attributes\n         learned\
    \ via the Access Node Control Mechanism to a Policy or\n         AAA Server using\
    \ RADIUS Vendor-Specific Attributes (VSAs).\n   R-84  In a TR-059/TR-101 network\
    \ architecture, the NAS shapes traffic\n         sent to a particular Access Port\
    \ according to the bitrate\n         available on that port.  The NAS should take\
    \ into account the\n         layer 1 and layer 2 encapsulation overhead on the\
    \ Access Port,\n         retrieved from the AN via the Access Node Control Mechanism.\n\
    \   R-85  The NAS should support dynamically configuring and\n         reconfiguring\
    \ discrete service parameters for access loops that\n         are controlled by\
    \ the NAS.  The configurable service parameters\n         for access loops could\
    \ be driven by local configuration on the\n         NAS or by a policy server.\n\
    \   R-86  The NAS should support triggering an AN via the Access Node\n      \
    \   Control Mechanism to execute local OAM procedures on an access\n         loop\
    \ that is controlled by the NAS.  If the NAS supports this\n         capability,\
    \ then the following applies:\n         *  The NAS must identify the access loop\
    \ on which OAM\n            procedures need to be executed by specifying an Access\n\
    \            Circuit Identifier (ACI) in the request message to the AN.\n    \
    \     *  The NAS should support processing and reporting of the\n            remote\
    \ OAM results learned via the Access Node Control\n            Mechanism.\n  \
    \       *  As part of the parameters conveyed within the OAM message to\n    \
    \        the AN, the NAS should send the list of test parameters\n           \
    \ pertinent to the OAM procedure.  The AN will then execute\n            the OAM\
    \ procedure on the specified access loop according to\n            the specified\
    \ parameters.  In case no test parameters are\n            conveyed, the AN and\
    \ NAS must use default and/or\n            appropriately computed values.\n  \
    \       *  After issuing an OAM request, the NAS will consider the\n         \
    \   request to have failed if no response is received after a\n            certain\
    \ period of time.  The timeout value should be either\n            the one sent\
    \ within the OAM message to the AN, or the\n            computed timeout value\
    \ when no parameter was sent.\n         The exact set of test parameters mentioned\
    \ above depends on the\n         particular OAM procedure executed on the access\
    \ loop.  An\n         example of a set of test parameters is the number of loopbacks\n\
    \         to be performed on the access loop and the timeout value for\n     \
    \    the overall test.  In this case, and assuming an ATM-based\n         access\
    \ loop, the default value for the timeout parameter would\n         be equal to\
    \ the number of F5 loopbacks to be performed,\n         multiplied by the F5 loopback\
    \ timeout (i.e., 5 seconds per the\n         ITU-T I.610 standard).\n   R-87 \
    \ The NAS must treat PPP or DHCP session state independently from\n         any\
    \ Access Node Control Adjacency state.  The NAS must not\n         bring down\
    \ the PPP or DHCP sessions just because the Access\n         Node Control Adjacency\
    \ goes down.\n   R-88  The NAS should internally treat Access Node Control traffic\
    \ in\n         a timely and scalable fashion.\n   R-89  The NAS should support\
    \ protection of Access Node Control\n         communication to an Access Node\
    \ in case of line card failure.\n"
- title: 4.7.2.  Control Channel Attributes
  contents:
  - "4.7.2.  Control Channel Attributes\n   R-90  The NAS must mark Access Node Control\
    \ Protocol messages as high\n         priority (e.g., appropriately set Diffserv\
    \ Code Point (DSCP),\n         Ethernet priority bits, or ATM Cell Loss Priority\
    \ (CLP) bit)\n         such that the aggregation network between the NAS and the\
    \ AN\n         can prioritize the Access Node Control Protocol messages over\n\
    \         user traffic in case of congestion.\n"
- title: 4.7.3.  Capability Negotiation Failure
  contents:
  - "4.7.3.  Capability Negotiation Failure\n   R-91  In case the NAS and Access Node\
    \ cannot agree on a common set of\n         capabilities, as part of the ANCP\
    \ capability negotiation\n         procedure, the NAS must report this to network\
    \ management.\n   R-92  The NAS must only commence Access Node Control information\n\
    \         exchange and state synchronization with the AN when there is a\n   \
    \      non-empty common set of capabilities with that AN.\n"
- title: 4.7.4.  Adjacency Status Reporting
  contents:
  - "4.7.4.  Adjacency Status Reporting\n   R-93  The NAS must support generating\
    \ an alarm to a management\n         station upon loss or malfunctioning of the\
    \ Access Node Control\n         Adjacency with the Access Node.\n"
- title: 4.7.5.  Identification
  contents:
  - "4.7.5.  Identification\n   R-94  The NAS must support correlating Access Node\
    \ Control Protocol\n         messages pertaining to a given access loop with subscriber\n\
    \         session(s) over that access loop.  This correlation must be\n      \
    \   achieved by either:\n         *  Matching an Access Circuit Identifier (ACI)\
    \ inserted by the\n            AN in Access Node Control Protocol messages with\
    \ the\n            corresponding ACI value received in subscriber signaling\n\
    \            (e.g., PPPoE and DHCP) messages as inserted by the AN.  The\n   \
    \         format of ACI is defined in [TR-101]; or\n         *  Matching an ACI\
    \ inserted by the AN in Access Node Control\n            Protocol messages with\
    \ an ACI value locally configured for a\n            static subscriber on the\
    \ NAS.\n"
- title: 4.7.6.  Multicast
  contents:
  - "4.7.6.  Multicast\n   R-95   The NAS must support using ANCP to configure multicast\n\
    \          conditional access information to Access Ports on an Access\n     \
    \     Node, using black lists, grey lists, and white lists.\n   R-96   The NAS\
    \ must support using ANCP to indicate to the AN whether\n          or not Admission\
    \ Control is needed for some multicast flows on\n          a given Access Port\
    \ and where needed whether or not the Access\n          Node is authorized to\
    \ perform Admission Control itself (i.e.,\n          whether or not AN Bandwidth\
    \ Delegation applies).\n   R-97   Upon receiving a query from the AN for a request\
    \ to replicate\n          a multicast flow to a particular Access Port, and no\
    \ AN\n          Bandwidth Delegation is used for that flow, the NAS must be\n\
    \          able to perform the necessary checks (conditional access\n        \
    \  and/or admission control) for the new flow.  The NAS must\n          support\
    \ using ANCP to reply to the AN indicating whether the\n          request is to\
    \ be honored or denied.  This may involve a\n          decision made locally or\
    \ querying an external system such as a\n          policy server.\n   R-98   Upon\
    \ receiving a query from the AN for a request to replicate\n          a multicast\
    \ flow to a particular Access Port, and Admission\n          Control with AN Bandwidth\
    \ Delegation is used for that flow,\n          the NAS must be able to perform\
    \ the conditional access checks\n          (if needed), and must support using\
    \ ANCP to delegate a certain\n          amount of bandwidth to the AN for a given\
    \ Access Port.\n   R-99   In case of Admission Control with AN Bandwidth Delegation,\n\
    \          upon receiving a Bandwidth Delegation Request from the AN\n       \
    \   requesting to increase the delegated multicast bandwidth on a\n          given\
    \ Access Port, the NAS must support using ANCP to send a\n          Bandwidth\
    \ Delegation Response indicating the new delegating\n          multicast bandwidth.\n\
    \   R-100  In case of Admission Control with AN Bandwidth Delegation, the\n  \
    \        NAS must support using ANCP to send a request to the AN to\n        \
    \  decrease the amount of multicast bandwidth previously\n          delegated\
    \ on a given Access Port; the NAS should be able to\n          specify both the\
    \ minimum and the preferred amount of decrement\n          of multicast bandwidth\
    \ requested.\n   R-101  In case of Admission Control with AN Bandwidth Delegation,\n\
    \          upon receiving an ANCP Bandwidth Release message, the NAS must\n  \
    \        be able to update accordingly its view of the multicast\n          bandwidth\
    \ delegated to the AN.\n   R-102  The NAS must support using ANCP to configure\
    \ the Access Node\n          with the \"maximum number of multicast streams\"\
    \ allowed to be\n          received concurrently per Access Port.\n   R-103  The\
    \ NAS must support using ANCP to incrementally add, remove,\n          and modify\
    \ individual entries in white, black, and grey lists.\n   R-104  The NAS must\
    \ support using ANCP to indicate to the AN whether\n          or not multicast\
    \ accounting is needed for a multicast flow on\n          a particular Access\
    \ Port.\n   R-105  In case multicast accounting is needed for a multicast flow\
    \ on\n          a particular Access Port, the NAS should support using ANCP to\n\
    \          indicate to the AN whether or not additional volume accounting\n  \
    \        information is required.\n   R-106  The NAS must support using ANCP to\
    \ query the AN to obtain\n          information on what multicast flows are currently\
    \ replicated\n          on a given Access Port.\n   R-107  The NAS must support\
    \ using ANCP to query the AN to obtain\n          information on what Access Ports\
    \ are currently receiving a\n          given multicast flow.\n   R-108  The NAS\
    \ must support using ANCP to query the AN to obtain\n          information on\
    \ what multicast flows are currently replicated\n          on each Access Port.\n\
    \   R-109  When Multicast replication occurs on the AN, the NAS must\n       \
    \   support using ANCP to revoke the authorization to replicate a\n          multicast\
    \ flow to a particular Access Port.\n   R-110  The NAS should support using ANCP\
    \ to indicate to the AN that\n          replication of a multicast flow is to\
    \ start or stop on a given\n          access port of the AN, without having received\
    \ a corresponding\n          Admission Request from the AN earlier on.\n"
- title: 4.7.7.  Message Handling
  contents:
  - "4.7.7.  Message Handling\n   R-111  The NAS must be designed to allow fast completion\
    \ of ANCP\n          operations, in the order of magnitude of tens of milliseconds.\n\
    \   R-112  The NAS should protect its resources from misbehaving Access\n    \
    \      Node Control peers by providing a mechanism to dampen\n          information\
    \ related to an Access Node partition.\n"
- title: 4.7.8.  Wholesale Model
  contents:
  - "4.7.8.  Wholesale Model\n   Broadband Forum TR-058 [TR-058], Broadband Forum\
    \ TR-059 [TR-059], and\n   Broadband Forum TR-101 [TR-101] describe a DSL broadband\
    \ access\n   architecture and how it enables wholesaling.  In such a model, the\n\
    \   broadband access provider has a wholesale agreement with one or more\n   service\
    \ providers.  The access provider owns the broadband access\n   network and manages\
    \ connectivity to the service providers.  This\n   allows service providers to\
    \ provide broadband services to retail\n   customers without having to own the\
    \ access network infrastructure\n   itself.\n   When applying the Access Node\
    \ Control Mechanism to a wholesale\n   network architecture, a number of additional\
    \ requirements apply.\n   R-113  In case of wholesale access, the network provider's\
    \ NAS should\n          support reporting of access-loop attributes learned from\
    \ the\n          AN via the Access Node Control Mechanism (or values derived\n\
    \          from such attributes), to a retail provider's network gateway\n   \
    \       owning the corresponding subscriber(s).\n   R-114  In case of Layer 2\
    \ Tunneling Protocol (L2TP) wholesale, the\n          NAS must support a proxy\
    \ architecture that gives different\n          providers conditional access to\
    \ dedicated Access Node Control\n          resources on an Access Node.\n   R-115\
    \  The NAS when acting as an L2TP Access Concentrator (LAC) must\n          communicate\
    \ generic access-line-related information to the\n          L2TP Network Server\
    \ (LNS) in a timely fashion.\n   R-116  The NAS when acting as a LAC may asynchronously\
    \ notify the LNS\n          of updates to generic access-line-related information.\n"
- title: 5.  Management-Related Requirements
  contents:
  - "5.  Management-Related Requirements\n   This section lists the management-related\
    \ requirements for the AN and\n   NAS.  Note that this document does not intend\
    \ to impose absolute\n   requirements on network elements.  Therefore, the words\
    \ \"must\" and\n   \"should\" used in this section are not capitalized.\n   R-117\
    \  It must be possible to configure the following parameters on\n          the\
    \ Access Node and the NAS:\n          *  Parameters related to the Control Channel\
    \ transport method:\n             these include the VPI/VCI and transport characteristics\n\
    \             (e.g., VBR-RT or Constant Bitrate (CBR)) for ATM networks,\n   \
    \          or the C-VLAN ID, S-VLAN ID, and p-bit marking for Ethernet\n     \
    \        networks;\n          *  Parameters related to the Control Channel itself:\
    \ these\n             include the IP address of the IP interface on the Access\n\
    \             Node and the NAS.\n   R-118  When the operational status of the\
    \ Control Channel is changed\n          (up>down, down>up) a linkdown/linkup trap\
    \ should be sent\n          towards the EMS.  This requirement applies to both\
    \ the AN and\n          the NAS.\n   R-119  The Access Node must provide the possibility\
    \ using SNMP to\n          associate individual DSL lines with specific Access\
    \ Node\n          Control Adjacencies.\n   R-120  The Access Node must notify\
    \ the EMS of configuration changes\n          made by the NAS on the AN using\
    \ ANCP, in a timely manner.\n   R-121  The Access Node must provide a mechanism\
    \ that allows the\n          concurrent access on the same resource from several\
    \ managers\n          (EMS via SNMP, NAS via ANCP).  Only one manager may perform\
    \ a\n          change at a certain time.\n   R-122  The ANCP may provide a notification\
    \ mechanism to inform the\n          NAS about configuration changes done by an\
    \ EMS, in a timely\n          manner.  This applies only to changes of parameters\
    \ that are\n          part of the use case \"Access-Loop Configuration\"\n   \
    \       (Section 3.2).\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   [RFC5713] lists the ANCP-related security threats\
    \ that could be\n   encountered on the Access Node and the NAS.  It develops a\
    \ threat\n   model and identifies requirements for ANCP security, aiming to decide\n\
    \   which security functions are required at the ANCP level.\n   With multicast\
    \ handling as described in this document, ANCP protocol\n   activity between the\
    \ AN and the NAS is triggered by join/leave\n   requests coming from the end-user\
    \ equipment.  This could potentially\n   be used for denial-of-service attacks\
    \ against the AN and/or the NAS.\n   This is not a new class of risk over already\
    \ possible IGMP messages\n   sent from subscribers to the NAS when the AN uses\
    \ no IGMP snooping,\n   and thus is transparent as long as processing of ANCP\
    \ messages on the\n   NAS/AN is comparably efficient and protected against congestion.\n\
    \   To mitigate this risk, the AN MAY implement control-plane protection\n   mechanisms\
    \ such as limiting the number of multicast flows a given\n   user can simultaneously\
    \ join, or limiting the maximum rate of join/\n   leave from a given user.\n \
    \  We also observe that an operator can easily deploy some protection\n   against\
    \ attacks using invalid multicast flows by taking advantage of\n   the mask-based\
    \ match in the black list.  This way, joins for invalid\n   multicast flows can\
    \ be denied at the AN level without any ANCP\n   protocol interactions and without\
    \ NAS involvement.\n   R-123  The ANCP MUST comply with the security requirements\
    \ spelled\n          out in RFC 5713.\n   R-124  The Access Node MUST NOT allow\
    \ the sending of Access Node\n          Control Messages towards the customer\
    \ premises.\n"
- title: 7.  Acknowledgements
  contents:
  - "7.  Acknowledgements\n   The authors would like to thank everyone that has provided\
    \ comments\n   or input to this document.  In particular, the authors acknowledge\n\
    \   the work done by the contributors to the activities related to the\n   Broadband\
    \ Forum: Jerome Moisand, Wojciech Dec, Peter Arberg, and Ole\n   Helleberg Andersen.\
    \  The authors also acknowledge the inputs provided\n   by Roberta Maglione, Angelo\
    \ Garofalo, Francois Le Faucheur, and\n   Toerless Eckert regarding multicast.\
    \  Finally, the authors thank\n   Bharat Joshi, Stefaan De Cnodder, Kirubaharan\
    \ Dorairaj, Markus\n   Freudenberger, Fortune Huang, and Lothar Reith for providing\n\
    \   comments.\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC2684]  Grossman, D. and J. Heinanen, \"Multiprotocol Encapsulation\n\
    \              over ATM Adaptation Layer 5\", RFC 2684, September 1999.\n   [RFC5713]\
    \  Moustafa, H., Tschofenig, H., and S. De Cnodder, \"Security\n             \
    \ Threats and Security Requirements for the Access Node\n              Control\
    \ Protocol (ANCP)\", RFC 5713, January 2010.\n   [RFC894]   Hornig, C., \"A Standard\
    \ for the Transmission of IP\n              Datagrams over Ethernet Networks\"\
    , STD 41, RFC 894,\n              April 1984.\n   [TR-101]   Cohen, A. and E.\
    \ Shrum, \"Migration to Ethernet-Based DSL\n              Aggregation\", Broadband\
    \ Forum TR-101, May 2006.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [G.993.2]  ITU-T, \"Very high speed digital\
    \ subscriber line\n              transceivers 2 (VDSL2)\", ITU-T Rec. G.993.2,\
    \ Feb 2006.\n   [G.997.1]  ITU-T, \"Physical layer management for digital subscriber\n\
    \              line (DSL) transceivers\", ITU-T Rec. G.997.1, Sep 2005.\n   [RFC2225]\
    \  Laubach, M. and J. Halpern, \"Classical IP and ARP over\n              ATM\"\
    , RFC 2225, April 1998.\n   [RFC2364]  Gross, G., Kaycee, M., Lin, A., Malis,\
    \ A., and J.\n              Stephens, \"PPP Over AAL5\", RFC 2364, July 1998.\n\
    \   [RFC2516]  Mamakos, L., Lidl, K., Evarts, J., Carrel, D., Simone, D.,\n  \
    \            and R. Wheeler, \"A Method for Transmitting PPP Over\n          \
    \    Ethernet (PPPoE)\", RFC 2516, February 1999.\n   [RFC2881]  Mitton, D. and\
    \ M. Beadles, \"Network Access Server\n              Requirements Next Generation\
    \ (NASREQNG) NAS Model\",\n              RFC 2881, July 2000.\n   [RFC3376]  Cain,\
    \ B., Deering, S., Kouvelas, I., Fenner, B., and A.\n              Thyagarajan,\
    \ \"Internet Group Management Protocol, Version\n              3\", RFC 3376,\
    \ October 2002.\n   [RFC4607]  Holbrook, H. and B. Cain, \"Source-Specific Multicast\
    \ for\n              IP\", RFC 4607, August 2006.\n   [TR-058]   Elias, M. and\
    \ S. Ooghe, \"Multi-Service Architecture &\n              Framework Requirements\"\
    , Broadband Forum TR-058,\n              September 2003.\n   [TR-059]   Anschutz,\
    \ T., \"DSL Evolution - Architecture Requirements\n              for the Support\
    \ of QoS-Enabled IP Services\", Broadband\n              Forum TR-059, September\
    \ 2003.\n   [TR-147]   Voigt, N., Ooghe, S., and M. Platnic, \"Layer 2 Control\n\
    \              Mechanism For Broadband Multi-Service Architectures\",\n      \
    \        Broadband Forum TR-147, November 2008.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Sven Ooghe\n   Alcatel-Lucent\n   Copernicuslaan 50\n\
    \   B-2018 Antwerpen\n   Belgium\n   Phone: +32 3 240 42 26\n   EMail: sven.ooghe@alcatel-lucent.com\n\
    \   Norbert Voigt\n   Nokia Siemens Networks\n   Siemensallee 1\n   17489 Greifswald\n\
    \   Germany\n   Phone: +49 3834 555 771\n   EMail: norbert.voigt@nsn.com\n   Michel\
    \ Platnic\n   ECI Telecom\n   30 Hasivim Street\n   49517 Petakh Tikva\n   Israel\n\
    \   Phone: + 972 54 33 81 567\n   EMail: mplatnic@gmail.com\n   Thomas Haag\n\
    \   Deutsche Telekom\n   Heinrich-Hertz-Strasse 3-7\n   64295 Darmstadt\n   Germany\n\
    \   Phone: +49 6151 628 2088\n   EMail: haagt@telekom.de\n   Sanjay Wadhwa\n \
    \  Juniper Networks\n   10 Technology Park Drive\n   Westford, MA 01886\n   US\n\
    \   Phone:\n   EMail: swadhwa@juniper.net\n"
