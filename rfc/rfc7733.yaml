- contents:
  - "        Applicability Statement: The Use of the Routing Protocol\n         for
    Low-Power and Lossy Networks (RPL) Protocol Suite\n                in Home Automation
    and Building Control\n"
  title: __initial_text__
- contents:
  - "Abstract\n   The purpose of this document is to provide guidance in the selection\n
    \  and use of protocols from the Routing Protocol for Low-Power and\n   Lossy
    Networks (RPL) protocol suite to implement the features\n   required for control
    in building and home environments.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    5741.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7733.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2016 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (http://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n
    \     1.1. Relationship to Other Documents ............................5\n      1.2.
    Terminology ................................................6\n      1.3. Required
    Reading ...........................................6\n      1.4. Requirements
    That Are Out of Scope .........................6\n   2. Deployment Scenario .............................................6\n
    \     2.1. Network Topologies .........................................7\n      2.2.
    Traffic Characteristics ....................................8\n           2.2.1.
    General .............................................9\n           2.2.2. Source-Sink
    (SS) Communication Paradigm ............10\n           2.2.3. Publish-Subscribe
    (PS, or Pub/Sub)\n                  Communication Paradigm .............................10\n
    \          2.2.4. Peer-to-Peer (P2P) Communication Paradigm ..........10\n           2.2.5.
    Peer-to-Multipeer (P2MP) Communication Paradigm ....11\n           2.2.6. Additional
    Considerations: Duocast and N-Cast ......11\n           2.2.7. RPL Applicability
    per Communication Paradigm .......11\n      2.3. Layer 2 Applicability .....................................13\n
    \  3. Using RPL to Meet Functional Requirements ......................13\n   4.
    RPL Profile ....................................................14\n      4.1.
    RPL Features ..............................................14\n           4.1.1.
    RPL Instances ......................................15\n           4.1.2. Storing
    vs. Non-Storing Mode .......................15\n           4.1.3. DAO Policy .........................................15\n
    \          4.1.4. Path Metrics .......................................15\n           4.1.5.
    Objective Function .................................16\n           4.1.6. DODAG
    Repair .......................................16\n           4.1.7. Multicast
    ..........................................16\n           4.1.8. Security ...........................................17\n
    \          4.1.9. P2P Communications .................................21\n           4.1.10.
    IPv6 Address Configuration ........................21\n      4.2. Layer 2 Features
    ..........................................21\n           4.2.1. Specifics about
    Layer 2 ............................21\n           4.2.2. Services Provided at
    Layer 2 .......................21\n           4.2.3. IPv6 over Low-Power Wireless
    Personal Area\n                  Network (6LoWPAN) Options Assumed ..................21\n
    \          4.2.4. Mesh Link Establishment (MLE) and Other Things .....21\n      4.3.
    Recommended Configuration Defaults and Ranges .............21\n           4.3.1.
    Trickle Parameters .................................22\n           4.3.2. Other
    Parameters ...................................22\n   5. MPL Profile ....................................................23\n
    \     5.1. Recommended Configuration Defaults and Ranges .............23\n           5.1.1.
    Real-Time Optimizations ............................23\n           5.1.2. Trickle
    Parameters .................................23\n           5.1.3. Other Parameters
    ...................................24\n   6. Manageability Considerations ...................................25\n
    \  7. Security Considerations ........................................25\n      7.1.
    Security Considerations during Initial Deployment .........26\n      7.2. Security
    Considerations during Incremental Deployment .....27\n      7.3. Security Considerations
    for P2P Implementations ...........27\n      7.4. MPL Routing ...............................................27\n
    \     7.5. RPL Security Features .....................................27\n   8.
    Other Related Protocols ........................................28\n   9. References
    .....................................................28\n      9.1. Normative
    References ......................................28\n      9.2. Informative References
    ....................................32\n   Appendix A. RPL Shortcomings in Home
    and Building Deployments .....35\n     A.1. Risk of Undesirable Long P2P Routes
    ........................35\n       A.1.1. Traffic Concentration at the Root ......................35\n
    \      A.1.2. Excessive Battery Consumption in Source Nodes ..........35\n     A.2.
    Risk of Delayed Route Repair ...............................35\n       A.2.1.
    Broken Service .........................................36\n   Appendix B. Communication
    Failures ................................36\n   Acknowledgements ..................................................38\n
    \  Authors' Addresses ................................................38\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   The primary purpose of this document is to give guidance
    in the use\n   of the Routing Protocol for Low-Power and Lossy Networks (RPL)\n
    \  protocol suite in two application domains:\n   o  Home automation\n   o  Building
    automation\n   The guidance is based on the features required by the requirements\n
    \  documents \"Home Automation Routing Requirements in Low-Power and\n   Lossy
    Networks\" [RFC5826] and \"Building Automation Routing\n   Requirements in Low-Power
    and Lossy Networks\" [RFC5867],\n   respectively.  The Advanced Metering Infrastructure
    is also\n   considered where appropriate.  The applicability domains distinguish\n
    \  themselves in the way they are operated, their performance\n   requirements,
    and the most likely network structures.  An abstract\n   set of distinct communication
    paradigms is then used to frame the\n   applicability domains.\n   Home automation
    and building automation application domains share a\n   substantial number of
    properties:\n   o  In both domains, the network can be disconnected from the ISP
    and\n      must still continue to provide control to the occupants of the\n      home
    or building.  Routing needs to be possible independent of the\n      existence
    of a border router.\n   o  Both domains are subject to unreliable links but require
    instant\n      and very reliable reactions.  This has an impact on routing\n      because
    of timeliness and multipath routing.\n   The differences between the two application
    domains mostly appear in\n   commissioning, maintenance, and the user interface,
    which do not\n   typically affect routing.  Therefore, the focus of this applicability\n
    \  document is on reliability, timeliness, and local routing.\n   It should be
    noted that adherence to the guidance in this document\n   does not necessarily
    guarantee fully interoperable solutions in home\n   automation networks and building
    control networks and that additional\n   rigorous and managed programs will be
    needed to ensure\n   interoperability.\n"
  - contents:
    - "1.1.  Relationship to Other Documents\n   The Routing Over Low power and Lossy
      networks (ROLL) working group\n   has specified a set of routing protocols for
      Low-Power and Lossy\n   Networks (LLNs) [RFC6550].  This applicability text
      describes a\n   subset of those protocols and the conditions under which the
      subset\n   is appropriate, and it provides recommendations and requirements
      for\n   the accompanying parameter value ranges.\n   In addition, [RFC6997]
      was written specifically as an extension to\n   core RPL [RFC6550] and provides
      a solution for reactive discovery of\n   point-to-point routes in LLNs.  The
      present applicability document\n   provides recommendations and requirements
      for the accompanying\n   parameter value ranges.\n   [RFC7416] describes a common
      set of security threats.  The\n   applicability statements provided in Section
      4.1.8.2.2 of this\n   document complement [RFC7416] by describing preferred
      security\n   settings and solutions within the applicability statement conditions.\n
      \  This applicability statement recommends lighter-weight security\n   solutions
      appropriate for home and building environments and\n   indicates why these solutions
      are appropriate.\n"
    title: 1.1.  Relationship to Other Documents
  - contents:
    - "1.2.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\",
      \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and
      \"OPTIONAL\" in this\n   document are to be interpreted as described in [RFC2119].\n
      \  Additionally, this document uses terminology from [RFC6997],\n   [RFC7731],
      [RFC7102], [IEEE802.15.4], and [RFC6550].\n"
    title: 1.2.  Terminology
  - contents:
    - "1.3.  Required Reading\n   Applicable requirements are described in [RFC5826]
      and [RFC5867].  A\n   survey of the application field is described in [BC-Survey].\n"
    title: 1.3.  Required Reading
  - contents:
    - "1.4.  Requirements That Are Out of Scope\n   The considered network diameter
      is limited to a maximum diameter of\n   10 hops and a typical diameter of five
      hops; this captures the most\n   common cases in home automation and building
      control networks.\n   This document does not consider the applicability of RPL-related\n
      \  specifications for urban and industrial applications [RFC5548]\n   [RFC5673],
      which may exhibit significantly larger network diameters.\n"
    title: 1.4.  Requirements That Are Out of Scope
  title: 1.  Introduction
- contents:
  - "2.  Deployment Scenario\n   The use of communications networks in buildings is
    essential to\n   satisfy energy-saving regulations.  Environmental conditions
    of\n   buildings can be adapted to suit the comfort of the individuals\n   present
    inside.  Consequently, when no one is present, energy\n   consumption can be reduced.
    \ Cost is the main driving factor behind\n   deployment of wireless networking
    in buildings, especially in the\n   case of retrofitting, where wireless connectivity
    saves costs\n   incurred due to cabling and building modifications.\n   A typical
    home automation network is comprised of less than\n   100 nodes.  Large building
    deployments may span 10,000 nodes, but to\n   ensure uninterrupted service of
    light and air conditioning systems in\n   individual zones of the building, nodes
    are typically organized in\n   subnetworks.  Each subnetwork in a building automation
    deployment\n   typically contains tens to hundreds of nodes and, for critical\n
    \  operations, may operate independently from the other subnetworks.\n   The main
    purpose of the home or building automation network is to\n   provide control over
    light and heating/cooling resources.  User\n   intervention via wall controllers
    is combined with movement, light\n   and temperature sensors to enable automatic
    adjustment of window\n   blinds, reduction of room temperature, etc.  In general,
    the sensors\n   and actuators in a home or building typically have fixed physical\n
    \  locations and will remain in the same home or building automation\n   network.\n
    \  People expect an immediate and reliable response to their presence or\n   actions.
    \ For example, a light not switching on after entry into a\n   room may lead to
    confusion and a profound dissatisfaction with the\n   lighting product.\n   Monitoring
    of functional correctness is at least as important as\n   timely responses.  Devices
    typically communicate their status\n   regularly and send alarm messages to notify
    users or implementers\n   that a malfunction of controlled equipment or a controlled
    network\n   has occurred.\n   In building control, the infrastructure of the building
    management\n   network can be shared with security/access, Internet Protocol (IP)\n
    \  telephony, and fire/alarm networks.  This approach has a positive\n   impact
    on the operation and cost of the network; however, care should\n   be taken to
    ensure that the availability of the building management\n   network does not become
    compromised beyond the ability of critical\n   functions to perform adequately.\n
    \  In homes, the entertainment network for audio/video streaming and\n   gaming
    has different requirements, where the most important\n   requirement is the need
    for high bandwidth not typically needed for\n   home or building control.  It
    is therefore expected that the\n   entertainment network in the home will mostly
    be separate from the\n   control network, as this will also lessen the impact
    on the\n   availability of the control network.\n"
  - contents:
    - "2.1.  Network Topologies\n   In general, the home automation network or building
      control network\n   consists of wired and wireless subnetworks.  In large buildings
      in\n   particular, the wireless subnetworks can be connected to an IP\n   backbone
      network where all infrastructure services (e.g., Domain Name\n   System (DNS),
      automation servers) are located.\n   The wireless subnetwork can be configured
      according to any of the\n   following topologies:\n   o  A stand-alone network
      of 10-100 nodes without a border router.\n      This typically occurs in the
      home with a stand-alone control\n      network, in low-cost buildings, and during
      installation of\n      high-end control systems in buildings.\n   o  A connected
      network with one border router.  This configuration\n      will happen in homes
      where home appliances are controlled from\n      outside the home, possibly
      via a smart phone, and in many building\n      control scenarios.\n   o  A connected
      network with multiple border routers.  This will\n      typically happen in
      installations of large buildings.\n   Many of the nodes are battery powered
      and may be sleeping nodes that\n   wake up according to clock signals or external
      events.\n   In a building control network, for a large installation with multiple\n
      \  border routers, subnetworks often overlap both geographically and\n   from
      a wireless coverage perspective.  Due to two purposes of the\n   network --
      (i) direct control and (ii) monitoring -- there may exist\n   two types of routing
      topologies in a given subnetwork:\n   (i) a tree-shaped collection of routes
      spanning from a central\n   building controller via the border router, on to
      destination nodes in\n   the subnetwork, and (ii) a flat, undirected collection
      of\n   intra-network routes between functionally related nodes in the\n   subnetwork.\n
      \  The majority of nodes in home and building automation networks are\n   typically
      Class 0 devices [RFC7228], such as individual wall\n   switches.  Only a few
      nodes (such as multi-purpose remote controls)\n   are more expensive Class 1
      devices, which can afford more memory\n   capacity.\n"
    title: 2.1.  Network Topologies
  - contents:
    - "2.2.  Traffic Characteristics\n   Traffic may enter the network originating
      from a central controller,\n   or it may originate from an intra-network node.
      \ The majority of\n   traffic is of a lightweight point-to-point control style,
      e.g.,\n   Put-Ack or Get-Response.  There are, however, exceptions.  Bulk data\n
      \  transfer is used for firmware updates and logging, where firmware\n   updates
      enter the network and logs leave the network.  Group\n   communication is used
      for service discovery or to control groups of\n   nodes, such as light fixtures.\n
      \  Often, there is a direct physical relationship between a controlling\n   sensor
      and the controlled equipment.  For example, the temperature\n   sensor and room
      controller are located in the same room, sharing the\n   same climate conditions.
      \ Consequently, the bulk of senders and\n   receivers are separated by a distance
      that allows one-hop direct path\n   communication.  A graph of the communication
      will show several fully\n   connected subsets of nodes.  However, due to interference,
      multipath\n   fading, reflection, and other transmission mechanisms, the one-hop\n
      \  direct path may be temporarily disconnected.  For reliability\n   purposes,
      it is therefore essential that alternative n-hop\n   communication routes exist
      for quick error recovery.  (See Appendix B\n   for motivation.)\n   Looking
      over time periods of a day, the networks are very lightly\n   loaded.  However,
      bursts of traffic can be generated by, for example,\n   incessant pushing of
      the button of a remote control, the occurrence\n   of a defect, and other unforeseen
      events.  Under those conditions,\n   the timeliness must nevertheless be maintained.
      \ Therefore, measures\n   are necessary to remove any unnecessary traffic.  Short
      routes are\n   preferred.  Long multi-hop routes via the border router should
      be\n   avoided whenever possible.\n   Group communication is essential for lighting
      control.  For example,\n   once the presence of a person is detected in a given
      room, lighting\n   control applies to that room only, and no other lights should
      be\n   dimmed or switched on/off.  In many cases, this means that a\n   multicast
      message with a one-hop and two-hop radius would suffice to\n   control the required
      lights.  The same argument holds for Heating,\n   Ventilating, and Air Conditioning
      (HVAC) and other climate-control\n   devices.  To reduce network load, it is
      advisable that messages to\n   the lights in a room are not distributed any
      further in the mesh than\n   necessary, based on intended receivers.\n   [Office-Light]
      provides an example of an office space, and\n   [OccuSwitch] describes the current
      use of wireless lighting control\n   products.\n"
    - contents:
      - "2.2.1.  General\n   Although air conditioning and other environmental-control\n
        \  applications may accept response delays of tens of seconds or longer,\n
        \  alarm and light control applications may be regarded as soft\n   real-time
        systems.  A slight delay is acceptable, but the perceived\n   quality of service
        degrades significantly if response times exceed\n   250 ms.  If the light
        does not turn on at short notice, a user may\n   activate the controls again,
        thus causing a sequence of commands such\n   as Light{on,off,on,off,...} or
        Volume{up,up,up,up,up,...}. In\n   addition, the repetitive sending of commands
        creates an unnecessary\n   loading of the network, which in turn increases
        the poor\n   responsiveness of the network.\n"
      title: 2.2.1.  General
    - contents:
      - "2.2.2.  Source-Sink (SS) Communication Paradigm\n   This paradigm translates
        to many sources sending messages to the same\n   sink, sometimes reachable
        via the border router.  As such,\n   Source-Sink (SS) traffic can be present
        in home and building\n   networks.  The traffic may be generated by environmental
        sensors\n   (often present in a wireless subnetwork) that push periodic readings\n
        \  to a central server.  The readings may be used for pure logging or,\n   more
        often, processed to adjust light, heating, and ventilation.\n   Alarm sensors
        may also generate SS-style traffic.  The central server\n   in a home automation
        network will be connected mostly to a wired\n   network segment of the home
        network, although it is likely that cloud\n   services will also be used.
        \ The central server in a building\n   automation network may be connected
        to a backbone or placed outside\n   the building.\n   With regard to message
        latency, most SS transmissions can tolerate\n   worst-case delays measured
        in tens of seconds.  Fire detectors,\n   however, represent an exception;
        for example, special provisions with\n   respect to the location of the fire
        detectors and smoke dampers need\n   to be put in place to meet stringent
        delay requirements that are\n   measured in seconds.\n"
      title: 2.2.2.  Source-Sink (SS) Communication Paradigm
    - contents:
      - "2.2.3.  Publish-Subscribe (PS, or Pub/Sub) Communication Paradigm\n   This
        paradigm translates to a number of devices expressing their\n   interest in
        a service provided by a server device.  For example, a\n   server device can
        be a sensor delivering temperature readings on the\n   basis of delivery criteria,
        like changes in acquisition value or age\n   of the latest acquisition.  In
        building automation networks, this\n   paradigm may be closely related to
        the SS paradigm, given that\n   servers, which are connected to the backbone
        or outside the building,\n   can subscribe to data collectors that are present
        at strategic places\n   in the building automation network.  The use of PS
        will probably\n   differ significantly from installation to installation.\n"
      title: 2.2.3.  Publish-Subscribe (PS, or Pub/Sub) Communication Paradigm
    - contents:
      - "2.2.4.  Peer-to-Peer (P2P) Communication Paradigm\n   This paradigm translates
        to a device transferring data to another\n   device often connected to the
        same subnetwork.  Peer-to-Peer (P2P)\n   traffic is a common traffic type
        in home automation networks.  Most\n   building automation networks rely on
        P2P traffic as described in the\n   next paragraph.  Other building automation
        networks rely on P2P\n   control traffic between controls and a local controller
        box for\n   advanced group control.  A local controller box can be further\n
        \  connected to service control boxes, thus generating more SS or PS\n   traffic.\n
        \  P2P traffic is typically generated by remote controls and wall\n   controllers
        that push Control Messages directly to light or heat\n   sources.  P2P traffic
        has a stringent requirement for low latency,\n   since P2P traffic often carries
        application messages that are invoked\n   by humans.  As mentioned in Section
        2.2.1, application messages\n   should be delivered within a few hundred milliseconds,
        even when\n   connections fail momentarily.\n"
      title: 2.2.4.  Peer-to-Peer (P2P) Communication Paradigm
    - contents:
      - "2.2.5.  Peer-to-Multipeer (P2MP) Communication Paradigm\n   This paradigm
        translates to a device sending a message as many times\n   as there are destination
        devices.  Peer-to-Multipeer (P2MP) traffic\n   is common in home and building
        automation networks.  Often, a\n   thermostat in a living room responds to
        temperature changes by\n   sending temperature acquisitions to several fans
        and valves\n   consecutively.  This paradigm is also closely related to the
        PS\n   paradigm in the case where a single server device has multiple\n   subscribers.\n"
      title: 2.2.5.  Peer-to-Multipeer (P2MP) Communication Paradigm
    - contents:
      - "2.2.6.  Additional Considerations: Duocast and N-Cast\n   This paradigm translates
        to a device sending a message to many\n   destinations in one network transfer
        invocation.  Multicast is well\n   suited for lighting where a presence sensor
        sends a presence message\n   to a set of lighting devices.  Multicast increases
        the probability\n   that the message is delivered within strict time constraints.
        \ The\n   recommended multicast algorithm (e.g., [RFC7731]) provides a\n   mechanism
        for delivering messages to all intended destinations.\n"
      title: '2.2.6.  Additional Considerations: Duocast and N-Cast'
    - contents:
      - "2.2.7.  RPL Applicability per Communication Paradigm\n   In the case of the
        SS paradigm applied to a wireless subnetwork to a\n   server reachable via
        a border router, the use of RPL [RFC6550] in\n   non-storing mode is appropriate.
        \ Given the low resources of the\n   devices, source routing will be used
        from the border router to the\n   destination in the wireless subnetwork for
        messages generated outside\n   the mesh network.  No specific timing constraints
        are associated with\n   the SS-type messages, so network repair does not violate
        the\n   operational constraints.  When no SS traffic takes place, it is good\n
        \  practice to load only RPL code that enables the P2P mode of operation\n
        \  [RFC6997] to reduce the code size and satisfy memory requirements.\n   To
        assure responsiveness, P2P-RPL [RFC6997] is required for all P2P\n   and P2MP
        traffic taking place between nodes within a wireless\n   subnetwork (excluding
        the border router).  Source and destination\n   devices are typically physically
        close, based on room layout.\n   Consequently, most P2P and P2MP traffic is
        one-hop or two-hop\n   traffic.  Appendix A identifies shortcomings of using
        RPL for this\n   type of communication; these shortcomings are counteracted
        through\n   the use of P2P-RPL.  Appendix B explains why reliability measures\n
        \  such as multipath routing are necessary even when one-hop\n   communication
        dominates.\n   Examples of additional advantages of P2P-RPL for home and building\n
        \  automation networks are as follows:\n   o  Individual wall switches are
        typically inexpensive Class 0 devices\n      [RFC7228] with extremely low
        memory capacities.  Multi-purpose\n      remote controls for use in a home
        environment typically have more\n      memory, but such devices are asleep
        when there is no user\n      activity.  P2P-RPL reactive discovery allows
        a node to wake up and\n      find new routes within a few seconds, while memory-constrained\n
        \     nodes only have to keep routes to relevant targets.\n   o  The reactive
        discovery features of P2P-RPL ensure that commands\n      are normally delivered
        within the 250 ms time window.  When\n      connectivity needs to be restored,
        discovery is typically\n      completed within seconds.  In most cases, an
        alternative route (a\n      route that was discovered earlier) will work and
        route rediscovery\n      is not necessary.\n   o  Broadcast storms typically
        associated with route discovery for the\n      Ad hoc On-Demand Distance Vector
        (AODV) [RFC3561] are less\n      disruptive for P2P-RPL.  P2P-RPL has a \"Stop\"
        bit, which is set by\n      the target of a route discovery to notify all
        other nodes that no\n      more Destination-Oriented Directed Acyclic Graph
        (DODAG)\n      Information Object (DIO) messages should be forwarded for this\n
        \     temporary DAG.  Something that looks like a broadcast storm may\n      happen
        when no target is responding; however, in this case, the\n      Trickle suppression
        mechanism kicks in, limiting the number of DIO\n      forwards in dense networks.\n
        \  Due to the limited memory of the majority of devices, P2P-RPL SHOULD\n
        \  be deployed with source routing in non-storing mode, as explained in\n
        \  Section 4.1.2.\n   Multicast with the Multicast Protocol for Low-Power
        and Lossy\n   Networks (MPL) [RFC7731] is preferably deployed for N-cast over
        the\n   wireless network.  Configuration constraints that are necessary to\n
        \  meet reliability and timeliness with MPL are discussed in\n   Section 4.1.7.\n"
      title: 2.2.7.  RPL Applicability per Communication Paradigm
    title: 2.2.  Traffic Characteristics
  - contents:
    - "2.3.  Layer 2 Applicability\n   This document applies to [IEEE802.15.4] and
      [G.9959], which are\n   adapted to IPv6 by the adaptation layers [RFC4944] and
      [RFC7428].\n   Other Layer 2 technologies, accompanied by an \"IP-over-Foo\"\n
      \  specification, are also relevant, provided there is no frame size\n   issue
      and there are link-layer acknowledgements.\n   The above-mentioned adaptation
      layers leverage on the compression\n   capabilities of [RFC6554] and [RFC6282].
      \ Header compression allows\n   small IP packets to fit into a single Layer
      2 frame, even when source\n   routing is used.  A network diameter limited to
      five hops helps to\n   achieve this, even while using source routing.\n   Dropped
      packets are often experienced in the targeted environments.\n   Internet Control
      Message Protocol (ICMP), User Datagram Protocol\n   (UDP), and even Transmission
      Control Protocol (TCP) flows may benefit\n   from link-layer unicast acknowledgements
      and retransmissions.\n   Link-layer unicast acknowledgements SHOULD be enabled
      when\n   [IEEE802.15.4] or [G.9959] is used with RPL and P2P-RPL.\n"
    title: 2.3.  Layer 2 Applicability
  title: 2.  Deployment Scenario
- contents:
  - "3.  Using RPL to Meet Functional Requirements\n   Several features required by
    [RFC5826] and [RFC5867] challenge the\n   P2P paths provided by RPL.  Appendix
    A reviews these challenges.  In\n   some cases, a node may need to spontaneously
    initiate the discovery\n   of a path towards a desired destination that is neither
    the root of a\n   DAG nor a destination originating Destination Advertisement
    Object\n   (DAO) signaling.  Furthermore, P2P paths provided by RPL are not\n
    \  satisfactory in all cases because they involve too many intermediate\n   nodes
    before reaching the destination.\n   P2P-RPL [RFC6997] SHOULD be used in home
    automation and building\n   control networks, as traffic of a point-to-point style
    is substantial\n   and route repair needs to be completed within seconds.  P2P-RPL\n
    \  provides a reactive mechanism for quick, efficient, and root-\n   independent
    route discovery/repair.  The use of P2P-RPL furthermore\n   allows data traffic
    to avoid having to go through a central region\n   around the root of the tree
    and drastically reduces path length\n   [SOFT11] [INTEROP12].  These characteristics
    are desirable in home\n   and building automation networks because they substantially
    decrease\n   unnecessary network congestion around the root of the tree.\n   When
    more reliability is required, P2P-RPL enables the establishment\n   of multiple
    independent paths.  For one-hop destinations, this means\n   that one one-hop
    communication and a second two-hop communication\n   take place via a neighboring
    node.  Such a pair of redundant\n   communication paths can be achieved by using
    MPL, where the source is\n   an MPL Forwarder while a second MPL Forwarder is
    one hop away from\n   both the source and the destination node.  When the source
    multicasts\n   the message, it may be received by both the destination and the\n
    \  second MPL Forwarder.  The second MPL Forwarder forwards the message\n   to
    the destination, thus providing two routes from sender to\n   destination.\n   To
    provide more reliability with multiple paths, P2P-RPL can maintain\n   two independent
    P2P source routes per destination, at the source.\n   Good practice is to use
    the paths alternately to assess their\n   existence.  When one P2P path has failed
    (possibly only temporarily),\n   as described in Appendix B, the alternative P2P
    path can be used\n   without discarding the failed path.  The failed P2P path,
    unless\n   proven to work again, can be safely discarded after a timeout\n   (typically
    15 minutes).  A new route discovery is done when the\n   number of P2P paths is
    exhausted due to persistent link failures.\n"
  title: 3.  Using RPL to Meet Functional Requirements
- contents:
  - "4.  RPL Profile\n   P2P-RPL SHOULD be used in home automation and building control\n
    \  networks.  Its reactive discovery allows for low application response\n   times,
    even when on-the-fly route repair is needed.  Non-storing mode\n   SHOULD be used
    to reduce memory consumption in repeaters with\n   constrained memory when source
    routing is used.\n"
  - contents:
    - "4.1.  RPL Features\n   An important constraint on the application of RPL is
      the presence of\n   sleeping nodes.\n   For example, in a stand-alone network,
      the master node (or\n   coordinator) providing the logical Layer 2 identifier
      and unique node\n   identifiers to connected nodes may be a remote control that
      returns\n   to sleep once new nodes have been added.  Due to the absence of
      the\n   border router, there may be no global routable prefixes at all.\n   Likewise,
      there may be no authoritative always-on root node, since\n   there is no border
      router to host this function.\n   In a network with a border router and many
      sleeping nodes, there may\n   be battery-powered sensors and wall controllers
      configured to contact\n   other nodes in response to events and then return
      to sleep.  Such\n   nodes may never detect the announcement of new prefixes
      via\n   multicast.\n   In each of the above-mentioned constrained deployments,
      a link-layer\n   node (e.g., coordinator or master) SHOULD assume the role of
      an\n   authoritative root node, transmitting unicast Router Advertisement\n
      \  (RA) messages with a Unique Local Address (ULA) prefix information\n   option
      to nodes during the joining process to prepare the nodes for a\n   later operational
      phase, where a border router is added.\n   A border router SHOULD be designed
      to be aware of sleeping nodes in\n   order to support the distribution of updated
      global prefixes to such\n   sleeping nodes.\n"
    - contents:
      - "4.1.1.  RPL Instances\n   When operating P2P-RPL on a stand-alone basis,
        there is no\n   authoritative root node maintaining a permanent RPL DODAG.
        \ A node\n   MUST be able to join at least one RPL Instance, as a new, temporary\n
        \  instance is created during each P2P-RPL route discovery operation.  A\n
        \  node MAY be designed to join multiple RPL Instances.\n"
      title: 4.1.1.  RPL Instances
    - contents:
      - "4.1.2.  Storing vs. Non-Storing Mode\n   Non-storing mode MUST be used to
        cope with the extremely constrained\n   memory of a majority of nodes in the
        network (such as individual\n   light switches).\n"
      title: 4.1.2.  Storing vs. Non-Storing Mode
    - contents:
      - "4.1.3.  DAO Policy\n   Nodes send DAO messages to establish downward paths
        from the root to\n   themselves.  In order to minimize the power consumption
        overhead\n   associated with path discovery, DAO messages are not acknowledged
        in\n   networks composed of battery-operated field devices.  The DAO\n   messages
        build up a source route because the nodes MUST be in\n   non-storing mode.\n
        \  If devices in LLNs participate in multiple RPL Instances and DODAGs,\n
        \  both the RPLInstance ID and the DODAGID SHOULD be included in\n   the DAO.\n"
      title: 4.1.3.  DAO Policy
    - contents:
      - "4.1.4.  Path Metrics\n   Expected Transmission Count (ETX) is the RECOMMENDED
        metric.\n   [RFC6551] provides other options.\n   Packets from asymmetric
        and/or unstable links SHOULD be deleted at\n   Layer 2.\n"
      title: 4.1.4.  Path Metrics
    - contents:
      - "4.1.5.  Objective Function\n   Objective Function Zero (OF0) [RFC6552] MUST
        be the Objective\n   Function.  Other Objective Functions MAY be used when
        dictated by\n   circumstances.\n"
      title: 4.1.5.  Objective Function
    - contents:
      - "4.1.6.  DODAG Repair\n   Since P2P-RPL only creates DODAGs on a temporary
        basis during route\n   repair or route discovery, there is no need to repair
        DODAGs.\n   For SS traffic, local repair is sufficient.  The accompanying
        process\n   is known as \"poisoning\" and is described in Section 8.2.2.5
        of\n   [RFC6550].  Given that the majority of nodes in the building do not\n
        \  physically move around, creating new DODAGs should not happen\n   frequently.\n"
      title: 4.1.6.  DODAG Repair
    - contents:
      - "4.1.7.  Multicast\n   Commercial lighting deployments may have a need for
        multicast to\n   distribute commands to a group of lights in a timely fashion.\n
        \  Several mechanisms exist for achieving such functionality; [RFC7731]\n
        \  is the RECOMMENDED protocol for home and building deployments.  This\n
        \  section relies heavily on the conclusions of [RT-MPL].\n   At reception
        of a packet, the MPL Forwarder starts a series of\n   consecutive Trickle
        timer intervals, where the first interval has a\n   minimum size of Imin.
        \ Each consecutive interval is twice as long as\n   the former, with a maximum
        value of Imax.  There is a maximum number\n   of intervals given by max_expiration.
        \ For each interval of length I,\n   a time t is randomly chosen in the period
        [I/2, I].  For a given\n   packet, p, MPL counts the number of times it receives
        p during the\n   period [0, t] in a counter c.  At time t, MPL rebroadcasts
        p when\n   c < k, where k is a predefined constant with a value k > 0.\n   The
        density of forwarders and the frequency of message generation are\n   important
        aspects to obtain timeliness during control operations.\n   A high frequency
        of message generation can be expected when a\n   remote-control button is
        incessantly pressed or when alarm situations\n   arise.\n   Guaranteeing timeliness
        is intimately related to the density of the\n   MPL routers.  In ideal circumstances,
        the message is propagated as a\n   single wave through the network, such that
        the maximum delay is\n   related to the number of hops times the smallest
        repetition interval\n   of MPL.  Each forwarder that receives the message
        passes the message\n   on to the next hop by repeating the message.  When
        several copies of\n   a message reach the forwarder, it is specified that
        the copy need not\n   be repeated.  Repetition of the message can be inhibited
        by a small\n   value of k.  To assure timeliness, the chosen value of k should
        be\n   high enough to make sure that messages are repeated at the first\n
        \  arrival of the message in the forwarder.  However, a network that is\n
        \  too dense leads to a saturation of the medium that can only be\n   prevented
        by selecting a low value of k.  Consequently, timeliness is\n   assured by
        choosing a relatively high value of k but assuring at the\n   same time a
        low enough density of forwarders to reduce the risk of\n   medium saturation.
        \ Depending on the reliability of the network\n   links, it is advisable to
        configure the density of the network such\n   that at least two forwarders
        per hop repeat messages to the same set\n   of destinations.\n   There are
        no rules about selecting forwarders for MPL.  In buildings\n   with central
        management tools, the forwarders can be selected, but at\n   the time of this
        writing it is not possible to automatically\n   configure the forwarder topology
        in the home.\n"
      title: 4.1.7.  Multicast
    - contents:
      - "4.1.8.  Security\n   RPL MAY use unsecured RPL messages to reduce message
        size.  If there\n   is a single node that uses unsecured RPL messages, link-layer\n
        \  security MUST be used on all nodes.  Therefore, all RPL messages MUST\n
        \  be secured using:\n   o  RPL message security, or\n   o  Link-layer security,
        or\n   o  Both RPL message security and link-layer security\n   A symmetric
        key is used to secure a RPL message using either RPL\n   message security
        or link-layer security.  The symmetric key MUST be\n   distributed or established
        in a secure fashion.  There may be more\n   than one symmetric key in use
        by any node at any one time.  The same\n   symmetric key MUST NOT be used
        for both RPL message security and\n   link-layer security between two peer
        nodes.\n"
      - contents:
        - "4.1.8.1.  Symmetric Key Distribution\n   The scope of symmetric key distribution
          MUST be no greater than the\n   network itself, i.e., a group key.  This
          document describes what\n   needs to be implemented to meet this requirement.
          \ The scope of\n   symmetric key distribution MAY be smaller than the network
          -- for\n   example:\n   o  A pairwise symmetric key between two peers.\n
          \  o  A group key shared between a subset of nodes in the network.\n"
        title: 4.1.8.1.  Symmetric Key Distribution
      - contents:
        - "4.1.8.2.  Symmetric Key Distribution Mechanism\n   The authentication mechanism
          as described in Section 6.9 of\n   [ZigBeeIP] SHALL be used to securely
          distribute a network-wide\n   symmetric key.\n   The purpose of the authentication
          procedure is to provide mutual\n   authentication resulting in:\n   o  Preventing
          untrusted nodes without appropriate credentials from\n      joining the
          trusted network.\n   o  Preventing trusted nodes with appropriate credentials
          from joining\n      an untrusted network.\n   There is an Authentication
          Server, which is responsible for\n   authenticating the nodes on the network.
          \ If the authentication is\n   successful, the Authentication Server sends
          the network security\n   material to the joining node through the Protocol
          for Carrying\n   Authentication for Network Access (PANA) [RFC5191] [RFC6345].
          \ The\n   joining node becomes a full participating node in the network
          and is\n   able to apply Layer 2 security to RPL messages using the distributed\n
          \  network key.\n   The joining node does not initially have access to the
          network\n   security material.  Therefore, it is not able to apply Layer
          2\n   security to the packets exchanged during the authentication process.\n
          \  The enforcement point rules at the edge of the network ensure that\n
          \  the packets involved in PANA authentication are processed even though\n
          \  they are unsecured at the Medium Access Control (MAC) layer.  The\n   rules
          also ensure that any other incoming traffic that is not secured\n   at the
          MAC layer is discarded and is not forwarded.\n"
        - contents:
          - "4.1.8.2.1.  Authentication Stack\n   Authentication can be viewed as
            a protocol stack as a layer\n   encapsulates the layers above it.\n   o
            \ Transport Layer Security (TLS) [RFC5246] MUST be used at the\n      highest
            layer of the authentication stack and carries the\n      authentication
            exchange.  There is one cipher suite based on a\n      Pre-Shared Key
            (PSK) [RFC6655] and one cipher suite based on\n      Elliptic Curve Cryptography
            (ECC) [RFC7251].\n   o  Extensible Authentication Protocol-TLS (EAP-TLS)
            [RFC5216] MUST be\n      used at the next layer to carry the TLS records
            for the\n      authentication protocol.\n   o  EAP [RFC3748] MUST be used
            to provide the mechanisms for mutual\n      authentication.  EAP requires
            a way to transport EAP packets\n      between the joining node and the
            node on which the Authentication\n      Server resides.  These nodes are
            not necessarily in radio range of\n      each other, so it is necessary
            to have multi-hop support in the\n      EAP transport method.  PANA [RFC5191]
            [RFC6345], which operates\n      over UDP, MUST be used for this purpose.
            \ [RFC3748] specifies the\n      derivation of a session key using the
            EAP key hierarchy; only the\n      EAP Master Session Key shall be derived,
            as [RFC5191] specifies\n      that it is used to set up keys for PANA
            authentication and\n      encryption.\n   o  PANA [RFC5191] and a PANA
            relay [RFC6345] MUST be used at the next\n      layer:\n      *  The joining
            node MUST act as the PANA Client (PaC).\n      *  The parent edge router
            node MUST act as a PANA Relay Element\n         (PRE) according to [RFC6345],
            unless it is also the\n         Authentication Server.  All routers at
            the edge of the network\n         MUST be capable of functioning in the
            PRE role.\n      *  The Authentication Server node MUST act as the PANA\n
            \        Authentication Agent (PAA).  The Authentication Server MUST be\n
            \        able to handle packets relayed according to [RFC6345].\n   This
            network authentication process uses link-local IPv6 addresses\n   for
            transport between the new node and its parent.  If the parent is\n   not
            the Authentication Server, it MUST then relay packets from the\n   joining
            node to the Authentication Server and vice versa, using the\n   PANA relay
            mechanism [RFC6345].  The joining node MUST use a\n   link-local address
            based on its EUI-64 as the source address for\n   initial PANA authentication
            message exchanges.\n"
          title: 4.1.8.2.1.  Authentication Stack
        - contents:
          - "4.1.8.2.2.  Applicability Statements\n   The following applicability
            statements describe the relationship\n   between the various specifications.\n"
          - contents:
            - "4.1.8.2.2.1.  Applicability Statement for PSK TLS\n   [RFC6655] contains
              Authenticated Encryption with Associated Data\n   (AEAD) TLS cipher
              suites that are very similar to [RFC5487], whose\n   AEAD part is detailed
              in [RFC5116].  [RFC5487] references both\n   [RFC5288] and the original
              PSK cipher suite document [RFC4279], which\n   references RFC 2246,
              which was eventually replaced by [RFC5246],\n   which defines the TLS
              1.2 messages.\n"
            title: 4.1.8.2.2.1.  Applicability Statement for PSK TLS
          - contents:
            - "4.1.8.2.2.2.  Applicability Statement for ECC TLS\n   [RFC7251] contains
              AEAD TLS cipher suites that are very similar to\n   [RFC5289], whose
              AEAD part is detailed in [RFC5116].  [RFC5289]\n   references the original
              ECC cipher suite document [RFC4492], which\n   references RFC 2246,
              which was eventually replaced by [RFC5246],\n   which defines the TLS
              1.2 messages.\n"
            title: 4.1.8.2.2.2.  Applicability Statement for ECC TLS
          - contents:
            - "4.1.8.2.2.3.  Applicability Statement for EAP-TLS and PANA\n   [RFC5216]
              specifies how [RFC3748] is used to package [RFC5246] TLS\n   records
              into EAP packets.  [RFC5191] provides transportation for the\n   EAP
              packets and the network-wide key carried in an encrypted\n   Attribute-Value
              Pair (AVP) as specified in [RFC6786].  The proposed\n   Pseudorandom
              Function (PRF) and authentication (AUTH) hashes based on\n   SHA-256
              are represented as specified in [RFC7296] and detailed in\n   [RFC4868].\n"
            title: 4.1.8.2.2.3.  Applicability Statement for EAP-TLS and PANA
          title: 4.1.8.2.2.  Applicability Statements
        - contents:
          - "4.1.8.2.3.  Security Using RPL Message Security\n   If RPL is used with
            secured messages [RFC6550], the following RPL\n   security parameter values
            SHOULD be used:\n   o  Counter is Time (T) flag = 0: Do not use the timestamp
            in the\n      Counter field.  Counters based on timestamps are typically
            more\n      applicable to industrial networks, where strict timing\n      synchronization
            between nodes is often implemented.  Home and\n      building networks
            typically do not implement such strict timing\n      synchronization;
            therefore, a monotonically increasing counter is\n      more appropriate.\n
            \  o  Algorithm = 0: Use Counter with the Cipher Block Chaining Message\n
            \     Authentication Code (CBC-MAC Mode) (CCM) with AES-128.  This is\n
            \     the only assigned mode at present.\n   o  Key Identifier Mode (KIM)
            = 10: Use a group key, Key Source\n      present, and Key Index present.
            \ Given the relatively confined\n      perimeter of a home or building
            network, a group key is usually\n      sufficient to protect RPL messages
            sent between nodes.  The use of\n      the Key Source field allows multiple
            group keys to be used within\n      the network.\n   o  Security Level
            (LVL) = 0: Use MAC-32.  This is recommended, as\n      integrity protection
            for RPL messages is the basic requirement.\n      Encryption is unlikely
            to be necessary, given the relatively\n      non-confidential nature of
            RPL message payloads.\n"
          title: 4.1.8.2.3.  Security Using RPL Message Security
        title: 4.1.8.2.  Symmetric Key Distribution Mechanism
      title: 4.1.8.  Security
    - contents:
      - "4.1.9.  P2P Communications\n   [RFC6997] MUST be used to accommodate P2P
        traffic, which is typically\n   substantial in home and building automation
        networks.\n"
      title: 4.1.9.  P2P Communications
    - contents:
      - "4.1.10.  IPv6 Address Configuration\n   Assigned IP addresses MUST be routable
        and unique within the routing\n   domain [RFC5889].\n"
      title: 4.1.10.  IPv6 Address Configuration
    title: 4.1.  RPL Features
  - contents:
    - "4.2.  Layer 2 Features\n   No particular requirements exist for Layer 2, except
      for those cited\n   in the \"IP-over-Foo\" RFCs (see Section 2.3).\n"
    - contents:
      - "4.2.1.  Specifics about Layer 2\n   Not applicable\n"
      title: 4.2.1.  Specifics about Layer 2
    - contents:
      - "4.2.2.  Services Provided at Layer 2\n   Not applicable\n"
      title: 4.2.2.  Services Provided at Layer 2
    - contents:
      - "4.2.3.  IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN)\n        Options
        Assumed\n   Not applicable\n"
      title: 4.2.3.  IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN)
    - contents:
      - "4.2.4.  Mesh Link Establishment (MLE) and Other Things\n   Not applicable\n"
      title: 4.2.4.  Mesh Link Establishment (MLE) and Other Things
    title: 4.2.  Layer 2 Features
  - contents:
    - "4.3.  Recommended Configuration Defaults and Ranges\n   The following sections
      describe the recommended parameter values for\n   P2P-RPL and Trickle.\n"
    - contents:
      - "4.3.1.  Trickle Parameters\n   Trickle is used to distribute network parameter
        values to all nodes\n   without stringent time restrictions.  The recommended
        Trickle\n   parameter values are:\n   o  DIOIntervalMin 4, which translates
        to 16 ms\n   o  DIOIntervalDoublings 14\n   o  DIORedundancyConstant 1\n   When
        a node sends a changed DIO, this is an inconsistency and forces\n   the receiving
        node to respond within Imin.  So, when something\n   happens that affects
        the DIO, the change is ideally communicated to a\n   node that is n hops away,
        within n times Imin.  Often, depending on\n   the node density, packets are
        lost or are not sent, leading to larger\n   delays.\n   In general, we can
        expect DIO changes to propagate within 1 to\n   3 seconds within the envisaged
        networks.\n   When nothing happens, the DIO sending interval increases to\n
        \  4.37 minutes, thus drastically reducing the network load.  When a\n   node
        does not receive DIO messages for more than 10 minutes, it can\n   safely
        conclude that the connection with other nodes has been lost.\n"
      title: 4.3.1.  Trickle Parameters
    - contents:
      - "4.3.2.  Other Parameters\n   This section discusses the P2P-RPL parameters.\n
        \  P2P-RPL [RFC6997] provides the features requested by [RFC5826] and\n   [RFC5867].
        \ P2P-RPL uses a subset of the frame formats and features\n   defined for
        RPL [RFC6550] but may be combined with RPL frame flows in\n   advanced deployments.\n
        \  The recommended parameter values for P2P-RPL are:\n   o  MinHopRankIncrease
        1\n   o  MaxRankIncrease 0\n   o  MaxRank 6\n   o  Objective Function: OF0\n"
      title: 4.3.2.  Other Parameters
    title: 4.3.  Recommended Configuration Defaults and Ranges
  title: 4.  RPL Profile
- contents:
  - "5.  MPL Profile\n   MPL is used to distribute values to groups of devices.  Using
    MPL,\n   based on the Trickle algorithm, timeliness should also be guaranteed.\n
    \  A deadline of 200 ms needs to be met when human action is followed by\n   an
    immediately observable action such as switching on lights.  The\n   deadline needs
    to be met in a building where the number of hops from\n   seed to destination
    varies between 1 and 10.\n"
  - contents:
    - '5.1.  Recommended Configuration Defaults and Ranges

      '
    - contents:
      - "5.1.1.  Real-Time Optimizations\n   When the network is heavily loaded, MAC
        delays contribute\n   significantly to the end-to-end delays when MPL intervals
        between 10\n   and 100 ms are used to meet the 200 ms deadline.  It is possible
        to\n   set the number of buffers in the MAC to 1 and set the number of\n   back-off
        repetitions to 1.  The number of MPL repetitions compensates\n   for the reduced
        probability of transmission per MAC invocation\n   [RT-MPL].\n   In addition,
        end-to-end delays and message losses are reduced by\n   adding a real-time
        layer between MPL and MAC to throw away the\n   earliest messages (exploiting
        the MPL message numbering) and favor\n   the most recent ones.\n"
      title: 5.1.1.  Real-Time Optimizations
    - contents:
      - "5.1.2.  Trickle Parameters\n   This section proposes values for the Trickle
        parameters used by MPL\n   for the distribution of packets that need to meet
        a 200 ms deadline.\n   The probability of meeting the deadline is increased
        by (1) choosing\n   a small Imin value, (2) reducing the number of MPL intervals,
        thus\n   reducing the load, and (3) reducing the number of MPL Forwarders
        to\n   also reduce the load.\n   The consequence of this approach is that
        the value of k can be larger\n   than 1 because network load reduction is
        already guaranteed by the\n   network configuration.\n   Under the condition
        that the density of MPL repeaters can be limited,\n   it is possible to choose
        low MPL repeat intervals (Imin) connected to\n   k values such that k > 1.
        \ The minimum value of k is related to:\n   o  The value of Imin.  The length
        of Imin determines the number of\n      packets that can be received within
        the listening period of Imin.\n   o  The number of repeaters receiving the
        broadcast message from the\n      same forwarder or seed.  These repeaters
        repeat within the same\n      Imin interval, thus increasing the c counter.\n
        \  Within the first MPL interval, a limited number, q, of messages can\n   be
        transmitted.  Assuming a 3 ms transmission interval, q is given by\n   q =
        Imin / 3.  Assuming that at most q message copies can reach a\n   given forwarder
        within the first repeat interval of length Imin, the\n   related MPL parameter
        values are suggested in the following sections.\n"
      - contents:
        - "5.1.2.1.  Imin\n   The recommended value is Imin = 10 to 50 ms.\n   When
          the chosen Imin value is much smaller, the interference between\n   the
          copies leads to significant losses, given that q is much smaller\n   than
          the number of repeated packets.  With much larger intervals, the\n   probability
          that the deadline will be met decreases with increasing\n   hop count.\n"
        title: 5.1.2.1.  Imin
      - contents:
        - "5.1.2.2.  Imax\n   The recommended value is Imax = 100 to 400 ms.\n   The
          value of Imax is less important than the value of max_expiration.\n   Given
          an Imin value of 10 ms, the third MPL interval has a value of\n   10 * 2
          * 2 = 40 ms.  When Imin has a value of 40 ms, the third\n   interval has
          a value of 160 ms.  Given that more than three intervals\n   are unnecessary,
          Imax does not contribute much to performance.\n"
        title: 5.1.2.2.  Imax
      title: 5.1.2.  Trickle Parameters
    - contents:
      - "5.1.3.  Other Parameters\n   Other parameters are the k parameter and the
        max_expiration\n   parameter.\n   k > q (see condition above).  Under this
        condition, and for a small\n   Imin value, a value of k = 2 or k = 3 is usually
        sufficient to\n   minimize the losses of packets in the first repeat interval.\n
        \  max_expiration = 2 - 4.  Higher values lead to more network load\n   while
        generating copies that will probably not meet their deadline.\n"
      title: 5.1.3.  Other Parameters
    title: 5.1.  Recommended Configuration Defaults and Ranges
  title: 5.  MPL Profile
- contents:
  - "6.  Manageability Considerations\n   At this time, it is not clear how homenets
    will be managed.\n   Consequently, it is not clear which tools will be used and
    which\n   parameters must be visible for management.\n   In building control,
    management is mandatory.  It is expected that\n   installations will be managed
    using the set of currently available\n   tools (including IETF tools like Management
    Information Base (MIB)\n   modules, Network Configuration Protocol (NETCONF) modules,
    Dynamic\n   Host Configuration Protocol (DHCP), and others), with large\n   differences
    between the ways an installation is managed.\n"
  title: 6.  Manageability Considerations
- contents:
  - "7.  Security Considerations\n   This section refers to the security considerations
    of [RFC6997],\n   [RFC6550], and [RFC7731], as well as some attacks and countermeasures\n
    \  as discussed in Sections 6 and 7, respectively, of [RFC7416].\n   Communications
    network security is based on providing integrity\n   protection and encryption
    to messages.  This can be applied at\n   various layers in the network protocol
    stack, based on using various\n   credentials and a network identity.\n   The
    credentials that are relevant in the case of RPL are (i) the\n   credential used
    at the link layer in the case where link-layer\n   security is applied (see Section
    7.1) or (ii) the credential used for\n   securing RPL messages.  In both cases,
    the assumption is that the\n   credential is a shared key.  Therefore, there MUST
    be a mechanism in\n   place that allows secure distribution of a shared key and\n
    \  configuration of a network identity.  Both MAY be done using\n   (i) pre-installation
    using an out-of-band method, (ii) secure\n   delivery when a device is introduced
    into the network, or\n   (iii) secure delivery by a trusted neighboring device,
    as described\n   in Section 4.1.8.1.  The shared key MUST be stored in a secure\n
    \  fashion that will make it difficult to be read by an unauthorized\n   party.\n
    \  This document mandates that a Layer 2 mechanism be used during\n   initial
    and incremental deployment.  Please see the following\n   sections.\n"
  - contents:
    - "7.1.  Security Considerations during Initial Deployment\n   Wireless mesh networks
      are typically secured at the link layer in\n   order to prevent unauthorized
      parties from accessing the information\n   exchanged over the links.  It is
      a basic practice to create a network\n   of nodes that share the same keys for
      link-layer security and exclude\n   nodes sending unsecured messages.  With
      per-message data origin\n   authentication, it is possible to prevent unauthorized
      nodes from\n   joining the mesh.\n   At initial deployment, the network is secured
      by consecutively\n   securing nodes at the link layer, thus building a network
      of secured\n   nodes.  Section 4.1.8.2 describes a mechanism for building a
      network\n   of secured nodes.\n   This document does not specify a multicast
      security solution.\n   Networks deployed with this specification will depend
      upon Layer 2\n   security to prevent outsiders from sending multicast traffic.
      \ It is\n   recognized that this does not protect this control traffic from\n
      \  impersonation by already-trusted devices.  This is an area for a\n   future
      specification.\n   For building control, an installer will use an installation
      tool that\n   establishes a secure communication path with the joining node.
      \ It is\n   recognized that the recommendations for initial deployment as\n
      \  discussed in this section do not cover all building requirements,\n   such
      as selecting -- independent of network topology -- the node to\n   be secured.\n
      \  It is expected that a set of protocol combinations will evolve within\n   currently
      existing alliances of building control manufacturers.  Each\n   set satisfies
      the installation requirements of installers, operators,\n   and manufacturers
      of building control networks in a given\n   installation context, e.g., lighting
      deployment in offices, HVAC\n   installation, incremental addition of equipment
      in homes, and others.\n   In the home, nodes can be visually inspected by the
      home owner.\n   Also, a simple procedure, e.g., pushing buttons simultaneously
      on an\n   already-secured device and an unsecured joining device, is usually\n
      \  sufficient to ensure that the unsecured joining device is\n   authenticated
      securely, configured securely, and paired\n   appropriately.\n   This recommendation
      is in line with the countermeasures described in\n   Section 7.1 of [RFC7416].\n"
    title: 7.1.  Security Considerations during Initial Deployment
  - contents:
    - "7.2.  Security Considerations during Incremental Deployment\n   Once a network
      is operational, new nodes need to be added, or nodes\n   fail and need to be
      replaced.  When a new node needs to be added to\n   the network, the new node
      is added to the network via an assisting\n   node in the manner described in
      Section 7.1.\n   On detection of a compromised node, all trusted nodes need
      to have\n   their symmetric keys that are known to be shared with the compromised\n
      \  node rekeyed, and the trusted network is built up as described in\n   Section
      7.1.\n"
    title: 7.2.  Security Considerations during Incremental Deployment
  - contents:
    - "7.3.  Security Considerations for P2P Implementations\n   Refer to the security
      considerations of [RFC6997].\n"
    title: 7.3.  Security Considerations for P2P Implementations
  - contents:
    - "7.4.  MPL Routing\n   The routing of MPL is determined by the enabling of the
      interfaces\n   for specified multicast addresses.  The specification of these\n
      \  addresses can be done via a Constrained Application Protocol (CoAP)\n   application
      as specified in [RFC7390].  An alternative is the\n   creation of an MPL MIB
      and the use of the Simple Network Management\n   Protocol (SNMPv3) [RFC3411]
      or equivalent techniques to specify the\n   multicast addresses in the MIB.
      \ For secure dissemination of MPL\n   packets, Layer 2 security SHOULD be used,
      and the configuration of\n   multicast addresses as described in this section
      MUST be secure.\n"
    title: 7.4.  MPL Routing
  - contents:
    - "7.5.  RPL Security Features\n   This section refers to the structure of Section
      8 (\"RPL Security\n   Features\") of [RFC7416].  [RFC7416] provides a thorough
      analysis of\n   security threats and proposed countermeasures relevant to RPL\n
      \  and MPL.\n   In accordance with Section 8.1 (\"Confidentiality Features\")
      of\n   [RFC7416], RPL message security implements payload protection, as\n   explained
      in Section 7 of this document.  The attributes for key\n   length and lifetime
      of the keys depend on operational conditions,\n   maintenance, and installation
      procedures.\n   Sections 7.1 and 7.2 of this document recommend link-layer security\n
      \  to assure integrity in accordance with Section 8.2 (\"Integrity\n   Features\")
      of [RFC7416].\n   The provision of multiple paths recommended in Section 8.3\n
      \  (\"Availability Features\") of [RFC7416] is also recommended from a\n   reliability
      point of view.  Randomly choosing paths MAY be supported.\n   A mechanism for
      key management, as discussed in Section 8.4 (\"Key\n   Management\") of [RFC7416],
      is provided in Section 4.1.8.2 of this\n   document.\n"
    title: 7.5.  RPL Security Features
  title: 7.  Security Considerations
- contents:
  - "8.  Other Related Protocols\n   Application and transport protocols used in home
    and building\n   automation domains are expected to mostly consist of CoAP over
    UDP,\n   or equivalents.  Typically, UDP is used for IP transport to keep down\n
    \  the application response time and bandwidth overhead.  CoAP is used\n   at
    the application layer to reduce memory footprint and bandwidth\n   requirements.\n"
  title: 8.  Other Related Protocols
- contents:
  - '9.  References

    '
  - contents:
    - "9.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use
      in RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119,\n
      \             DOI 10.17487/RFC2119, March 1997,\n              <http://www.rfc-editor.org/info/rfc2119>.\n
      \  [RFC3748]  Aboba, B., Blunk, L., Vollbrecht, J., Carlson, J., and H.\n              Levkowetz,
      Ed., \"Extensible Authentication Protocol\n              (EAP)\", RFC 3748,
      DOI 10.17487/RFC3748, June 2004,\n              <http://www.rfc-editor.org/info/rfc3748>.\n
      \  [RFC4279]  Eronen, P., Ed., and H. Tschofenig, Ed., \"Pre-Shared Key\n              Ciphersuites
      for Transport Layer Security (TLS)\",\n              RFC 4279, DOI 10.17487/RFC4279,
      December 2005,\n              <http://www.rfc-editor.org/info/rfc4279>.\n   [RFC4492]
      \ Blake-Wilson, S., Bolyard, N., Gupta, V., Hawk, C., and B.\n              Moeller,
      \"Elliptic Curve Cryptography (ECC) Cipher Suites\n              for Transport
      Layer Security (TLS)\", RFC 4492,\n              DOI 10.17487/RFC4492, May 2006,\n
      \             <http://www.rfc-editor.org/info/rfc4492>.\n   [RFC4868]  Kelly,
      S. and S. Frankel, \"Using HMAC-SHA-256,\n              HMAC-SHA-384, and HMAC-SHA-512
      with IPsec\", RFC 4868,\n              DOI 10.17487/RFC4868, May 2007,\n              <http://www.rfc-editor.org/info/rfc4868>.\n
      \  [RFC4944]  Montenegro, G., Kushalnagar, N., Hui, J., and D. Culler,\n              \"Transmission
      of IPv6 Packets over IEEE 802.15.4\n              Networks\", RFC 4944, DOI
      10.17487/RFC4944, September 2007,\n              <http://www.rfc-editor.org/info/rfc4944>.\n
      \  [RFC5116]  McGrew, D., \"An Interface and Algorithms for Authenticated\n
      \             Encryption\", RFC 5116, DOI 10.17487/RFC5116, January 2008,\n
      \             <http://www.rfc-editor.org/info/rfc5116>.\n   [RFC5191]  Forsberg,
      D., Ohba, Y., Ed., Patil, B., Tschofenig, H.,\n              and A. Yegin, \"Protocol
      for Carrying Authentication for\n              Network Access (PANA)\", RFC
      5191, DOI 10.17487/RFC5191,\n              May 2008, <http://www.rfc-editor.org/info/rfc5191>.\n
      \  [RFC5216]  Simon, D., Aboba, B., and R. Hurst, \"The EAP-TLS\n              Authentication
      Protocol\", RFC 5216, DOI 10.17487/RFC5216,\n              March 2008, <http://www.rfc-editor.org/info/rfc5216>.\n
      \  [RFC5246]  Dierks, T. and E. Rescorla, \"The Transport Layer Security\n              (TLS)
      Protocol Version 1.2\", RFC 5246,\n              DOI 10.17487/RFC5246, August
      2008,\n              <http://www.rfc-editor.org/info/rfc5246>.\n   [RFC5288]
      \ Salowey, J., Choudhury, A., and D. McGrew, \"AES Galois\n              Counter
      Mode (GCM) Cipher Suites for TLS\", RFC 5288,\n              DOI 10.17487/RFC5288,
      August 2008,\n              <http://www.rfc-editor.org/info/rfc5288>.\n   [RFC5289]
      \ Rescorla, E., \"TLS Elliptic Curve Cipher Suites with\n              SHA-256/384
      and AES Galois Counter Mode (GCM)\", RFC 5289,\n              DOI 10.17487/RFC5289,
      August 2008,\n              <http://www.rfc-editor.org/info/rfc5289>.\n   [RFC5487]
      \ Badra, M., \"Pre-Shared Key Cipher Suites for TLS with\n              SHA-256/384
      and AES Galois Counter Mode\", RFC 5487,\n              DOI 10.17487/RFC5487,
      March 2009,\n              <http://www.rfc-editor.org/info/rfc5487>.\n   [RFC5548]
      \ Dohler, M., Ed., Watteyne, T., Ed., Winter, T., Ed., and\n              D.
      Barthel, Ed., \"Routing Requirements for Urban Low-Power\n              and
      Lossy Networks\", RFC 5548, DOI 10.17487/RFC5548,\n              May 2009, <http://www.rfc-editor.org/info/rfc5548>.\n
      \  [RFC5673]  Pister, K., Ed., Thubert, P., Ed., Dwars, S., and T.\n              Phinney,
      \"Industrial Routing Requirements in Low-Power and\n              Lossy Networks\",
      RFC 5673, DOI 10.17487/RFC5673,\n              October 2009, <http://www.rfc-editor.org/info/rfc5673>.\n
      \  [RFC5826]  Brandt, A., Buron, J., and G. Porcu, \"Home Automation\n              Routing
      Requirements in Low-Power and Lossy Networks\",\n              RFC 5826, DOI
      10.17487/RFC5826, April 2010,\n              <http://www.rfc-editor.org/info/rfc5826>.\n
      \  [RFC5867]  Martocci, J., Ed., De Mil, P., Riou, N., and W. Vermeylen,\n              \"Building
      Automation Routing Requirements in Low-Power and\n              Lossy Networks\",
      RFC 5867, DOI 10.17487/RFC5867,\n              June 2010, <http://www.rfc-editor.org/info/rfc5867>.\n
      \  [RFC6282]  Hui, J., Ed., and P. Thubert, \"Compression Format for IPv6\n
      \             Datagrams over IEEE 802.15.4-Based Networks\", RFC 6282,\n              DOI
      10.17487/RFC6282, September 2011,\n              <http://www.rfc-editor.org/info/rfc6282>.\n
      \  [RFC6345]  Duffy, P., Chakrabarti, S., Cragie, R., Ohba, Y., Ed., and\n              A.
      Yegin, \"Protocol for Carrying Authentication for\n              Network Access
      (PANA) Relay Element\", RFC 6345,\n              DOI 10.17487/RFC6345, August
      2011,\n              <http://www.rfc-editor.org/info/rfc6345>.\n   [RFC6550]
      \ Winter, T., Ed., Thubert, P., Ed., Brandt, A., Hui, J.,\n              Kelsey,
      R., Levis, P., Pister, K., Struik, R., Vasseur,\n              JP., and R. Alexander,
      \"RPL: IPv6 Routing Protocol for\n              Low-Power and Lossy Networks\",
      RFC 6550,\n              DOI 10.17487/RFC6550, March 2012,\n              <http://www.rfc-editor.org/info/rfc6550>.\n
      \  [RFC6551]  Vasseur, JP., Ed., Kim, M., Ed., Pister, K., Dejean, N.,\n              and
      D. Barthel, \"Routing Metrics Used for Path Calculation\n              in Low-Power
      and Lossy Networks\", RFC 6551,\n              DOI 10.17487/RFC6551, March 2012,\n
      \             <http://www.rfc-editor.org/info/rfc6551>.\n   [RFC6554]  Hui,
      J., Vasseur, JP., Culler, D., and V. Manral, \"An IPv6\n              Routing
      Header for Source Routes with the Routing Protocol\n              for Low-Power
      and Lossy Networks (RPL)\", RFC 6554,\n              DOI 10.17487/RFC6554, March
      2012,\n              <http://www.rfc-editor.org/info/rfc6554>.\n   [RFC6655]
      \ McGrew, D. and D. Bailey, \"AES-CCM Cipher Suites for\n              Transport
      Layer Security (TLS)\", RFC 6655,\n              DOI 10.17487/RFC6655, July
      2012,\n              <http://www.rfc-editor.org/info/rfc6655>.\n   [RFC6786]
      \ Yegin, A. and R. Cragie, \"Encrypting the Protocol for\n              Carrying
      Authentication for Network Access (PANA)\n              Attribute-Value Pairs\",
      RFC 6786, DOI 10.17487/RFC6786,\n              November 2012, <http://www.rfc-editor.org/info/rfc6786>.\n
      \  [RFC6997]  Goyal, M., Ed., Baccelli, E., Philipp, M., Brandt, A., and\n              J.
      Martocci, \"Reactive Discovery of Point-to-Point Routes\n              in Low-Power
      and Lossy Networks\", RFC 6997,\n              DOI 10.17487/RFC6997, August
      2013,\n              <http://www.rfc-editor.org/info/rfc6997>.\n   [RFC6998]
      \ Goyal, M., Ed., Baccelli, E., Brandt, A., and J. Martocci,\n              \"A
      Mechanism to Measure the Routing Metrics along a\n              Point-to-Point
      Route in a Low-Power and Lossy Network\",\n              RFC 6998, DOI 10.17487/RFC6998,
      August 2013,\n              <http://www.rfc-editor.org/info/rfc6998>.\n   [RFC7102]
      \ Vasseur, JP., \"Terms Used in Routing for Low-Power and\n              Lossy
      Networks\", RFC 7102, DOI 10.17487/RFC7102,\n              January 2014, <http://www.rfc-editor.org/info/rfc7102>.\n
      \  [RFC7251]  McGrew, D., Bailey, D., Campagna, M., and R. Dugal,\n              \"AES-CCM
      Elliptic Curve Cryptography (ECC) Cipher Suites\n              for TLS\", RFC
      7251, DOI 10.17487/RFC7251, June 2014,\n              <http://www.rfc-editor.org/info/rfc7251>.\n
      \  [RFC7296]  Kaufman, C., Hoffman, P., Nir, Y., Eronen, P., and T.\n              Kivinen,
      \"Internet Key Exchange Protocol Version 2\n              (IKEv2)\", STD 79,
      RFC 7296, DOI 10.17487/RFC7296,\n              October 2014, <http://www.rfc-editor.org/info/rfc7296>.\n
      \  [RFC7416]  Tsao, T., Alexander, R., Dohler, M., Daza, V., Lozano, A.,\n              and
      M. Richardson, Ed., \"A Security Threat Analysis for\n              the Routing
      Protocol for Low-Power and Lossy Networks\n              (RPLs)\", RFC 7416,
      DOI 10.17487/RFC7416, January 2015,\n              <http://www.rfc-editor.org/info/rfc7416>.\n
      \  [RFC7731]  Hui, J. and R. Kelsey, \"Multicast Protocol for Low-Power\n              and
      Lossy Networks (MPL)\", RFC 7731, DOI 10.17487/RFC7731,\n              February
      2016, <http://www.rfc-editor.org/info/rfc7731>.\n   [IEEE802.15.4]\n              IEEE,
      \"IEEE Standard for Local and metropolitan area\n              networks--Part
      15.4: Low-Rate Wireless Personal Area\n              Networks (LR-WPANs)\",
      IEEE 802.15.4,\n              DOI 10.1109/ieeestd.2011.6012487,\n              <http://ieeexplore.ieee.org/servlet/\n
      \             opac?punumber=6012485>.\n   [G.9959]   International Telecommunication
      Union, \"Short range\n              narrow-band digital radiocommunication transceivers
      - PHY,\n              MAC, SAR and LLC layer specifications\", ITU-T\n              Recommendation
      G.9959, January 2015,\n              <http://www.itu.int/rec/T-REC-G.9959>.\n"
    title: 9.1.  Normative References
  - contents:
    - "9.2.  Informative References\n   [RFC3411]  Harrington, D., Presuhn, R., and
      B. Wijnen, \"An\n              Architecture for Describing Simple Network Management\n
      \             Protocol (SNMP) Management Frameworks\", STD 62, RFC 3411,\n              DOI
      10.17487/RFC3411, December 2002,\n              <http://www.rfc-editor.org/info/rfc3411>.\n
      \  [RFC3561]  Perkins, C., Belding-Royer, E., and S. Das, \"Ad hoc\n              On-Demand
      Distance Vector (AODV) Routing\", RFC 3561,\n              DOI 10.17487/RFC3561,
      July 2003,\n              <http://www.rfc-editor.org/info/rfc3561>.\n   [RFC5889]
      \ Baccelli, E., Ed., and M. Townsley, Ed., \"IP Addressing\n              Model
      in Ad Hoc Networks\", RFC 5889, DOI 10.17487/RFC5889,\n              September
      2010, <http://www.rfc-editor.org/info/rfc5889>.\n   [RFC6552]  Thubert, P.,
      Ed., \"Objective Function Zero for the Routing\n              Protocol for Low-Power
      and Lossy Networks (RPL)\",\n              RFC 6552, DOI 10.17487/RFC6552, March
      2012,\n              <http://www.rfc-editor.org/info/rfc6552>.\n   [RFC7228]
      \ Bormann, C., Ersue, M., and A. Keranen, \"Terminology for\n              Constrained-Node
      Networks\", RFC 7228,\n              DOI 10.17487/RFC7228, May 2014,\n              <http://www.rfc-editor.org/info/rfc7228>.\n
      \  [RFC7390]  Rahman, A., Ed., and E. Dijk, Ed., \"Group Communication\n              for
      the Constrained Application Protocol (CoAP)\",\n              RFC 7390, DOI
      10.17487/RFC7390, October 2014,\n              <http://www.rfc-editor.org/info/rfc7390>.\n
      \  [RFC7428]  Brandt, A. and J. Buron, \"Transmission of IPv6 Packets\n              over
      ITU-T G.9959 Networks\", RFC 7428,\n              DOI 10.17487/RFC7428, February
      2015,\n              <http://www.rfc-editor.org/info/rfc7428>.\n   [SOFT11]
      \  Baccelli, E., Philipp, M., and M. Goyal, \"The P2P-RPL\n              Routing
      Protocol for IPv6 Sensor Networks: Testbed\n              Experiments\", Proceedings
      of the 19th Annual Conference on\n              Software Telecommunications
      and Computer Networks, Split,\n              Croatia, September 2011.\n   [INTEROP12]\n
      \             Philipp, M., Baccelli, E., Brandt, A., Valev, H., and J.\n              Buron,
      \"Report on P2P-RPL Interoperability Testing\", INRIA\n              Research
      Report RR-7864, January 2012.\n   [RT-MPL]   van der Stok, P., \"Real-Time multicast
      for wireless mesh\n              networks using MPL\", White paper, April 2014,\n
      \             <http://www.vanderstok.org/papers/Real-time-MPL.pdf>.\n   [OccuSwitch]\n
      \             Philips lighting Electronics, \"OccuSwitch Wireless\n              (brochure)\",
      May 2012,\n              <http://www.philipslightingcontrols.com/assets/\n              cms/uploads/files/osw/MK_OSWNETBROC_5.pdf>.\n
      \  [Office-Light]\n              Clanton and Associates, Inc., \"Wireless Lighting
      Control -\n              A Life Cycle Cost Evaluation of Multiple Lighting Control\n
      \             Strategies\", February 2014, <http://www.daintree.net/\n              wp-content/uploads/2014/02/\n
      \             clanton_lighting_control_report_0411.pdf>.\n   [RTN2011]  Holtman,
      K. and P. van der Stok, \"Real-time routing for\n              low-latency 802.15.4
      control networks\", 23rd Euromicro\n              Conference on Real-Time Systems,
      Porto, Portugal,\n              July 2011.\n   [MEAS]     Holtman, K., \"Connectivity
      loss in large scale\n              IEEE 802.15.4 network\", Private Communication,\n
      \             November 2013.\n   [BC-Survey]\n              Kastner, W., Neugschwandtner,
      G., Soucek, S., and H.\n              Newmann, \"Communication Systems for Building
      Automation\n              and Control\", Proceedings of the IEEE, Vol. 93, No.
      6,\n              DOI 10.1109/JPROC.2005.849726, June 2005.\n   [ZigBeeIP]\n
      \             ZigBee Alliance, \"ZigBee IP specification\", ZigBee\n              document
      095023r34, March 2014, <http://www.zigbee.org/>.\n"
    title: 9.2.  Informative References
  title: 9.  References
- contents:
  - 'Appendix A.  RPL Shortcomings in Home and Building Deployments

    '
  - contents:
    - "A.1.  Risk of Undesirable Long P2P Routes\n   The DAG, being a tree structure,
      is formed from a root.  If nodes\n   residing in different branches need to
      communicate internally, DAG\n   mechanisms provided in RPL [RFC6550] will propagate
      traffic towards\n   the root, potentially all the way to the root, and down
      along another\n   branch [RFC6998].  In a typical example, two nodes could reach
      each\n   other via only two router nodes, but in some unfortunate cases, RPL\n
      \  may send traffic three hops up and three hops down again.  This leads\n   to
      several undesirable phenomena, as described in the following\n   sections.\n"
    - contents:
      - "A.1.1.  Traffic Concentration at the Root\n   If many P2P data flows have
        to move up towards the root to get down\n   again in another branch, there
        is an increased risk of congestion the\n   nearer to the root of the DAG the
        data flows.  Due to the broadcast\n   nature of radio frequency (RF) systems,
        any child node of the root is\n   not only directing RF power downwards in
        its sub-tree but just as\n   much upwards towards the root, potentially jamming
        other MP2P traffic\n   leaving the tree or preventing the root of the DAG
        from sending P2MP\n   traffic into the DAG because the listen-before-talk
        link-layer\n   protection kicks in.\n"
      title: A.1.1.  Traffic Concentration at the Root
    - contents:
      - "A.1.2.  Excessive Battery Consumption in Source Nodes\n   Battery-powered
        nodes originating P2P traffic depend on the route\n   length.  Long routes
        cause source nodes to stay awake for longer\n   periods before returning to
        sleep.  Thus, a longer route translates\n   proportionally (more or less)
        into higher battery consumption.\n"
      title: A.1.2.  Excessive Battery Consumption in Source Nodes
    title: A.1.  Risk of Undesirable Long P2P Routes
  - contents:
    - "A.2.  Risk of Delayed Route Repair\n   The RPL DAG mechanism uses DIO and DAO
      messages to monitor the health\n   of the DAG.  On rare occasions, changed radio
      conditions may render\n   routes unusable just after a destination node has
      returned a DAO\n   indicating that the destination is reachable.  Given enough
      time, the\n   next Trickle timer-controlled DIO/DAO update will eventually repair\n
      \  the broken routes; however, this may not occur in a timely manner\n   appropriate
      to the application.  In an apparently stable DAG,\n   Trickle timer dynamics
      may reduce the update rate to a few times\n   every hour.  If a user issues
      an actuator command, e.g., light on in\n   the time interval between the time
      that the last DAO message was\n   issued the destination module and the time
      that one of the parents\n   sends the next DIO, the destination cannot be reached.
      \ There is no\n   mechanism in RPL to initiate the restoration of connectivity
      in a\n   reactive fashion.  The consequence is a broken service in home and\n
      \  building applications.\n"
    - contents:
      - "A.2.1.  Broken Service\n   Experience from the telecom industry shows that
        if the voice delay\n   exceeds 250 ms, users start getting confused, frustrated,
        and/or\n   annoyed.  In the same way, if the light does not turn on within
        the\n   same period of time, a home control user will activate the controls\n
        \  again, causing a sequence of commands such as\n   Light{on,off,off,on,off,...}
        or Volume{up,up,up,up,up,...}.  Whether\n   the outcome is nothing or some
        unintended response, this is\n   unacceptable.  A controlling system must
        be able to restore\n   connectivity to recover from the error situation.  Waiting
        for an\n   unknown period of time is not an option.  Although this issue was\n
        \  identified during the P2P analysis, it applies just as well to\n   application
        scenarios where an IP application outside the LLN\n   controls actuators,
        lights, etc.\n"
      title: A.2.1.  Broken Service
    title: A.2.  Risk of Delayed Route Repair
  title: Appendix A.  RPL Shortcomings in Home and Building Deployments
- contents:
  - "Appendix B.  Communication Failures\n   Measurements of connectivity between
    neighboring nodes are discussed\n   in [RTN2011] and [MEAS].\n   The work is motivated
    by the measurements in literature that affirm\n   that the range of an antenna
    is not circle symmetric but that the\n   signal strength of a given level follows
    an intricate pattern around\n   the antenna, and there may be holes within the
    area delineated by a\n   polar plot.  It is reported that communication is not
    symmetric:\n   reception of messages from node A by node B does not imply reception\n
    \  of messages from node B by node A.  The quality of the signal\n   fluctuates
    over time, and also the height of the antenna within a\n   room can have consequences
    for the range.  As a function of the\n   distance from the source, three regions
    are generally recognized:\n   (1) a clear region with excellent signal quality,
    (2) a region with\n   fluctuating signal quality, and (3) a region without reception.\n
    \  Installation of meshes with neighbors in the clear region is not\n   sufficient,
    as described below.\n   [RTN2011] extends existing work by:\n   o  Observations
    over periods of at least a week,\n   o  Testing links that are in the clear region,\n
    \  o  Observation in an office building during working hours, and\n   o  Concentrating
    on one-hop and two-hop routes.\n   Eight nodes were distributed over a surface
    of 30 square meters.  All\n   nodes are at a one-hop distance from each other,
    and all are situated\n   in each other's clear region.  Each node sends messages
    to each of\n   its neighbors and repeats the message until it arrives.  The latency\n
    \  of the message was measured over periods of at least a week.  It was\n   noticed
    that latencies longer than a second occurred without any\n   apparent reason,
    but only during working days and never during the\n   weekends.  Bad periods could
    last for minutes.  By sending messages\n   via two paths -- (1) a one-hop path
    directly and (2) a two-hop path\n   via a randomly chosen neighbor -- the probability
    of delays larger\n   than 100 ms decreased significantly.\n   The conclusion is
    that even for one-hop communication between\n   not-too-distant \"line of sight\"
    nodes, there are periods of low\n   reception in which communication deadlines
    of 200 ms are exceeded.\n   It pays to send a second message over a two-hop path
    to increase the\n   reliability of timely message transfer.\n   [MEAS] confirms
    that temporary bad reception by close neighbors can\n   occur within other types
    of areas.  Nodes were installed on the\n   ceiling in a grid with a distance of
    30-50 cm between them.\n   Two hundred nodes were distributed over an area of
    10 m x 5 m.  It\n   clearly transpired that with increasing distance the probability
    of\n   reception decreased.  At the same time, a few nodes furthest away\n   from
    the sender had a high probability of message reception, while\n   some close neighbors
    of the sender did not receive messages.  The\n   patterns of nodes experiencing
    good reception evolved over time.\n   The conclusion here is that even for direct
    neighbors reception can\n   temporarily be bad for periods of several minutes.
    \ For reliable and\n   timely communication, it is imperative to have at least
    two\n   communication paths available (e.g., two-hop paths next to the\n   one-hop
    path for direct neighbors).\n"
  title: Appendix B.  Communication Failures
- contents:
  - "Acknowledgements\n   This document reflects discussions and remarks from several\n
    \  individuals, including (in alphabetical order) Stephen Farrell, Mukul\n   Goyal,
    Sandeep Kumar, Jerry Martocci, Catherine Meadows, Yoshihiro\n   Ohba, Charles
    Perkins, Yvonne-Anne Pignolet, Michael Richardson, Ines\n   Robles, Zach Shelby,
    and Meral Sherazipour.\n"
  title: Acknowledgements
- contents:
  - "Authors' Addresses\n   Anders Brandt\n   Sigma Designs\n   Email: anders_Brandt@sigmadesigns.com\n
    \  Emmanuel Baccelli\n   INRIA\n   Email: Emmanuel.Baccelli@inria.fr\n   Robert
    Cragie\n   ARM Ltd.\n   110 Fulbourn Road\n   Cambridge  CB1 9NJ\n   United Kingdom\n
    \  Email: robert.cragie@arm.com\n   Peter van der Stok\n   Consultant\n   Email:
    consultancy@vanderstok.org\n"
  title: Authors' Addresses
