- title: __initial_text__
  contents:
  - '       Application of the Border Gateway Protocol in the Internet

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document, together with its companion document, \"A Border\n\
    \   Gateway Protocol 4 (BGP-4)\", define an inter-autonomous system\n   routing\
    \ protocol for the Internet.  \"A Border Gateway Protocol 4\n   (BGP-4)\" defines\
    \ the BGP protocol specification, and this document\n   describes the usage of\
    \ the BGP in the Internet.\n   Information about the progress of BGP can be monitored\
    \ and/or\n   reported on the BGP mailing list (bgp@ans.net).\n"
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   This document was originally published as RFC 1164 in June\
    \ 1990,\n   jointly authored by Jeffrey C. Honig (Cornell University), Dave Katz\n\
    \   (MERIT), Matt Mathis (PSC), Yakov Rekhter (IBM), and Jessica Yu\n   (MERIT).\n\
    \   The following also made key contributions to RFC 1164 -- Guy Almes\n   (ANS,\
    \ then at Rice University), Kirk Lougheed (cisco Systems), Hans-\n   Werner Braun\
    \ (SDSC, then at MERIT), and Sue Hares (MERIT).\n   We like to explicitly thank\
    \ Bob Braden (ISI) for the review of the\n   previous version of this document.\n\
    \   This updated version of the document is the product of the IETF BGP\n   Working\
    \ Group with Phill Gross (MCI) and Yakov Rekhter (IBM) as\n   editors.\n   John\
    \ Moy (Proteon) contributed Section 7 \"Required set of supported\n   routing\
    \ policies\".\n   Scott Brim (Cornell University) contributed the basis for Section\
    \ 8\n   \"Interaction with other exterior routing protocols\".\n   Most of the\
    \ text in Section 9 was contributed by Gerry Meyer\n   (Spider).\n   Parts of\
    \ the Introduction were taken almost verbatim from [3].\n   We would like to acknowledge\
    \ Dan Long (NEARNET) and Tony Li (cisco\n   Systems) for their review and comments\
    \ on the current version of the\n   document.\n   The work of Yakov Rekhter was\
    \ supported in part by the National\n   Science Foundation under Grant Number\
    \ NCR-9219216.\n"
- title: 1. Introduction
  contents:
  - "1. Introduction\n   This memo describes the use of the Border Gateway Protocol\
    \ (BGP) [1]\n   in the Internet environment. BGP is an inter-Autonomous System\n\
    \   routing protocol. The network reachability information exchanged via\n   BGP\
    \ provides sufficient information to detect routing loops and\n   enforce routing\
    \ decisions based on performance preference and policy\n   constraints as outlined\
    \ in RFC 1104 [2]. In particular, BGP exchanges\n   routing information containing\
    \ full AS paths and enforces routing\n   policies based on configuration information.\n\
    \   As the Internet has evolved and grown over in recent years, it has\n   become\
    \ painfully evident that it is soon to face several serious\n   scaling problems.\
    \ These include:\n       - Exhaustion of the class-B network address space. One\n\
    \         fundamental cause of this problem is the lack of a network\n       \
    \  class of a size which is appropriate for mid-sized\n         organization;\
    \ class-C, with a maximum of 254 host addresses, is\n         too small while\
    \ class-B, which allows up to 65534 addresses, is\n         too large to be densely\
    \ populated.\n       - Growth of routing tables in Internet routers are beyond\
    \ the\n         ability of current software (and people) to effectively manage.\n\
    \       - Eventual exhaustion of the 32-bit IP address space.\n   It has become\
    \ clear that the first two of these problems are likely\n   to become critical\
    \ within the next one to three years.  Classless\n   inter-domain routing (CIDR)\
    \ attempts to deal with these problems by\n   proposing a mechanism to slow the\
    \ growth of the routing table and the\n   need for allocating new IP network numbers.\
    \ It does not attempt to\n   solve the third problem, which is of a more long-term\
    \ nature, but\n   instead endeavors to ease enough of the short to mid-term\n\
    \   difficulties to allow the Internet to continue to function\n   efficiently\
    \ while progress is made on a longer-term solution.\n   BGP-4 is an extension\
    \ of BGP-3 that provides support for routing\n   information aggregation and reduction\
    \ based on the Classless inter-\n   domain routing architecture (CIDR) [3].  This\
    \ memo describes the\n   usage of BGP-4 in the Internet.\n   All of the discussions\
    \ in this paper are based on the assumption that\n   the Internet is a collection\
    \ of arbitrarily connected Autonomous\n   Systems. That is, the Internet will\
    \ be modeled as a general graph\n   whose nodes are AS's and whose edges are connections\
    \ between pairs of\n   AS's.\n   The classic definition of an Autonomous System\
    \ is a set of routers\n   under a single technical administration, using an interior\
    \ gateway\n   protocol and common metrics to route packets within the AS and using\n\
    \   an exterior gateway protocol to route packets to other AS's. Since\n   this\
    \ classic definition was developed, it has become common for a\n   single AS to\
    \ use several interior gateway protocols and sometimes\n   several sets of metrics\
    \ within an AS. The use of the term Autonomous\n   System here stresses the fact\
    \ that, even when multiple IGPs and\n   metrics are used, the administration of\
    \ an AS appears to other AS's\n   to have a single coherent interior routing plan\
    \ and presents a\n   consistent picture of which destinations are reachable through\
    \ it.\n   AS's are assumed to be administered by a single administrative\n   entity,\
    \ at least for the purposes of representation of routing\n   information to systems\
    \ outside of the AS.\n"
- title: 2. BGP Topological Model
  contents:
  - "2. BGP Topological Model\n   When we say that a connection exists between two\
    \ AS's, we mean two\n   things:\n      Physical connection:  There is a shared\
    \ Data Link subnetwork\n      between the two AS's, and on this shared subnetwork\
    \ each AS has at\n      least one border gateway belonging to that AS. Thus the\
    \ border\n      gateway of each AS can forward packets to the border gateway of\n\
    \      the other AS without resorting to Inter-AS or Intra-AS routing.\n     \
    \ BGP connection:  There is a BGP session between BGP speakers in\n      each\
    \ of the AS's, and this session communicates those routes that\n      can be used\
    \ for specific destinations via the advertising AS.\n      Throughout this document\
    \ we place an additional restriction on the\n      BGP speakers that form the\
    \ BGP connection: they must themselves\n      share the same Data Link subnetwork\
    \ that their border gateways\n      share. Thus, a BGP session between adjacent\
    \ AS's requires no\n      support from either Inter-AS or Intra-AS routing. Cases\
    \ that do\n      not conform to this restriction fall outside the scope of this\n\
    \      document.\n   Thus, at each connection, each AS has one or more BGP speakers\
    \ and\n   one or more border gateways, and these BGP speakers and border\n   gateways\
    \ are all located on a shared Data Link subnetwork. Note that\n   BGP speakers\
    \ do not need to be a border gateway, and vice versa.\n   Paths announced by a\
    \ BGP speaker of one AS on a given connection are\n   taken to be feasible for\
    \ each of the border gateways of the other AS\n   on the same shared subnetwork,\
    \ i.e. indirect neighbors are allowed.\n   Much of the traffic carried within\
    \ an AS either originates or\n   terminates at that AS (i.e., either the source\
    \ IP address or the\n   destination IP address of the IP packet identifies a host\
    \ internal to\n   that AS).  Traffic that fits this description is called \"local\n\
    \   traffic\". Traffic that does not fit this description is called\n   \"transit\
    \ traffic\". A major goal of BGP usage is to control the flow\n   of transit traffic.\n\
    \   Based on how a particular AS deals with transit traffic, the AS may\n   now\
    \ be placed into one of the following categories:\n      stub AS: an AS that has\
    \ only a single connection to one other AS.\n      Naturally, a stub AS only carries\
    \ local traffic.\n      multihomed AS: an AS that has connections to more than\
    \ one other\n      AS, but refuses to carry transit traffic.\n      transit AS:\
    \ an AS that has connections to more than one other AS,\n      and is designed\
    \ (under certain policy restrictions) to carry both\n      transit and local traffic.\n\
    \   Since a full AS path provides an efficient and straightforward way of\n  \
    \ suppressing routing loops and eliminates the \"count-to-infinity\"\n   problem\
    \ associated with some distance vector algorithms, BGP imposes\n   no topological\
    \ restrictions on the interconnection of AS's.\n"
- title: 3. BGP in the Internet
  contents:
  - '3. BGP in the Internet

    '
- title: 3.1 Topology Considerations
  contents:
  - "3.1 Topology Considerations\n   The overall Internet topology may be viewed as\
    \ an arbitrary\n   interconnection of transit, multihomed, and stub AS's.  In\
    \ order to\n   minimize the impact on the current Internet infrastructure, stub\
    \ and\n   multihomed AS's need not use BGP.  These AS's may run other protocols\n\
    \   (e.g., EGP) to exchange reachability information with transit AS's.\n   Transit\
    \ AS's using BGP will tag this information as having been\n   learned by some\
    \ method other than BGP. The fact that BGP need not run\n   on stub or multihomed\
    \ AS's has no negative impact on the overall\n   quality of inter-AS routing for\
    \ traffic that either destined to or\n   originated from the stub or multihomed\
    \ AS's in question.\n   However, it is recommended that BGP be used for stub and\
    \ multihomed\n   AS's as well. In these situations, BGP will provide an advantage\
    \ in\n   bandwidth and performance over some of the currently used protocols\n\
    \   (such as EGP).  In addition, this would reduce the need for the use\n   of\
    \ default routes and in better choices of Inter-AS routes for\n   multihomed AS's.\n"
- title: 3.2 Global Nature of BGP
  contents:
  - "3.2 Global Nature of BGP\n   At a global level, BGP is used to distribute routing\
    \ information\n   among multiple Autonomous Systems. The information flows can\
    \ be\n   represented as follows:\n                    +-------+         +-------+\n\
    \              BGP   |  BGP  |   BGP   |  BGP  |   BGP\n           ---------+\
    \       +---------+       +---------\n                    |  IGP  |         |\
    \  IGP  |\n                    +-------+         +-------+\n                 \
    \   <-AS A-->         <--AS B->\n   This diagram points out that, while BGP alone\
    \ carries information\n   between AS's, both BGP and an IGP may carry information\
    \ across an AS.\n   Ensuring consistency of routing information between BGP and\
    \ an IGP\n   within an AS is a significant issue and is discussed at length later\n\
    \   in Appendix A.\n"
- title: 3.3 BGP Neighbor Relationships
  contents:
  - "3.3 BGP Neighbor Relationships\n   The Internet is viewed as a set of arbitrarily\
    \ connected AS's.\n   Routers that communicate directly with each other via BGP\
    \ are known\n   as BGP speakers. BGP speakers can be located within the same AS\
    \ or in\n   different AS's.  BGP speakers in each AS communicate with each other\n\
    \   to exchange network reachability information based on a set of\n   policies\
    \ established within each AS.  For a given BGP speaker, some\n   other BGP speaker\
    \ with which the given speaker communicates is\n   referred to as an external\
    \ peer if the other speaker is in a\n   different AS, while if the other speaker\
    \ is in the same AS it is\n   referred to as an internal peer.\n   There can be\
    \ as many BGP speakers as deemed necessary within an AS.\n   Usually, if an AS\
    \ has multiple connections to other AS's, multiple\n   BGP speakers are needed.\
    \ All BGP speakers representing the same AS\n   must give a consistent image of\
    \ the AS to the outside. This requires\n   that the BGP speakers have consistent\
    \ routing information among them.\n   These gateways can communicate with each\
    \ other via BGP or by other\n   means. The policy constraints applied to all BGP\
    \ speakers within an\n   AS must be consistent. Techniques such as using a tagged\
    \ IGP (see\n   A.2.2) may be employed to detect possible inconsistencies.\n  \
    \ In the case of external peers, the peers must belong to different\n   AS's,\
    \ but share a common Data Link subnetwork. This common subnetwork\n   should be\
    \ used to carry the BGP messages between them. The use of BGP\n   across an intervening\
    \ AS invalidates the AS path information. An\n   Autonomous System number must\
    \ be used with BGP to specify which\n   Autonomous System the BGP speaker belongs\
    \ to.\n"
- title: 4. Requirements for Route Aggregation
  contents:
  - "4. Requirements for Route Aggregation\n   A conformant BGP-4 implementation is\
    \ required to have the ability to\n   specify when an aggregated route may be\
    \ generated out of partial\n   routing information. For example, a BGP speaker\
    \ at the border of an\n   autonomous system (or group of autonomous systems) must\
    \ be able to\n   generate an aggregated route for a whole set of destination IP\n\
    \   addresses (in BGP-4 terminology such a set is called the Network\n   Layer\
    \ Reachability Information or NLRI) over which it has\n   administrative control\
    \ (including those addresses it has delegated),\n   even when not all of them\
    \ are reachable at the same time.\n   A conformant implementation may provide\
    \ the capability to specify\n   when an aggregated NLRI may be generated.\n  \
    \ A conformant implementation is required to have the ability to\n   specify how\
    \ NLRI may be de-aggregated.\n   A conformant implementation is required to support\
    \ the following\n   options when dealing with overlapping routes:\n       - Install\
    \ both the less and the more specific routes\n       - Install the more specific\
    \ route only\n       - Install the less specific route only\n       - Install\
    \ neither route\n   Certain routing policies may depend on the NLRI (e.g. \"research\"\
    \n   versus \"commercial\"). Therefore, a BGP speaker that performs route\n  \
    \ aggregation should be cognizant, if possible, of potential\n   implications\
    \ on routing policies when aggregating NLRI.\n"
- title: 5. Policy Making with BGP
  contents:
  - "5. Policy Making with BGP\n   BGP provides the capability for enforcing policies\
    \ based on various\n   routing preferences and constraints. Policies are not directly\n\
    \   encoded in the protocol. Rather, policies are provided to BGP in the\n   form\
    \ of configuration information.\n   BGP enforces policies by affecting the selection\
    \ of paths from\n   multiple alternatives and by controlling the redistribution\
    \ of\n   routing information.  Policies are determined by the AS\n   administration.\n\
    \   Routing policies are related to political, security, or economic\n   considerations.\
    \ For example, if an AS is unwilling to carry traffic\n   to another AS, it can\
    \ enforce a policy prohibiting this. The\n   following are examples of routing\
    \ policies that can be enforced with\n   the use of BGP:\n     1.  A multihomed\
    \ AS can refuse to act as a transit AS for other\n         AS's.  (It does so\
    \ by only advertising routes to destinations\n         internal to the AS.)\n\
    \     2.  A multihomed AS can become a transit AS for a restricted set of\n  \
    \       adjacent AS's, i.e., some, but not all, AS's can use the\n         multihomed\
    \ AS as a transit AS. (It does so by advertising its\n         routing information\
    \ to this set of AS's.)\n     3.  An AS can favor or disfavor the use of certain\
    \ AS's for\n         carrying transit traffic from itself.\n   A number of performance-related\
    \ criteria can be controlled with the\n   use of BGP:\n     1.  An AS can minimize\
    \ the number of transit AS's. (Shorter AS\n         paths can be preferred over\
    \ longer ones.)\n     2.  The quality of transit AS's. If an AS determines that\
    \ two or\n         more AS paths can be used to reach a given destination, that\
    \ AS\n         can use a variety of means to decide which of the candidate AS\n\
    \         paths it will use. The quality of an AS can be measured by such\n  \
    \       things as diameter, link speed, capacity, tendency to become\n       \
    \  congested, and quality of operation. Information about these\n         qualities\
    \ might be determined by means other than BGP.\n     3.  Preference of internal\
    \ routes over external routes.\n   For consistency within an AS, equal cost paths,\
    \ resulting from\n   combinations of policies and/or normal route selection procedures,\n\
    \   must be resolved in a consistent fashion.\n   Fundamental to BGP is the rule\
    \ that an AS advertises to its\n   neighboring AS's only those routes that it\
    \ uses. This rule reflects\n   the \"hop-by-hop\" routing paradigm generally used\
    \ by the current\n   Internet.\n"
- title: 6. Path Selection with BGP
  contents:
  - "6. Path Selection with BGP\n   One of the major tasks of a BGP speaker is to\
    \ evaluate different\n   paths from itself to a set of destination covered by\
    \ an address\n   prefix, select the best one, apply appropriate policy constraints,\n\
    \   and then advertise it to all of its BGP neighbors. The key issue is\n   how\
    \ different paths are evaluated and compared.  In traditional\n   distance vector\
    \ protocols (e.g., RIP) there is only one metric (e.g.,\n   hop count) associated\
    \ with a path. As such, comparison of different\n   paths is reduced to simply\
    \ comparing two numbers. A complication in\n   Inter-AS routing arises from the\
    \ lack of a universally agreed-upon\n   metric among AS's that can be used to\
    \ evaluate external paths.\n   Rather, each AS may have its own set of criteria\
    \ for path evaluation.\n   A BGP speaker builds a routing database consisting\
    \ of the set of all\n   feasible paths and the list of destinations (expressed\
    \ as address\n   prefixes) reachable through each path.  For purposes of precise\n\
    \   discussion, it's useful to consider the set of feasible paths for a\n   set\
    \ of destinations associated with a given address prefix. In most\n   cases, we\
    \ would expect to find only one feasible path. However, when\n   this is not the\
    \ case, all feasible paths should be maintained, and\n   their maintenance speeds\
    \ adaptation to the loss of the primary path.\n   Only the primary path at any\
    \ given time will ever be advertised.\n   The path selection process can be formalized\
    \ by defining a complete\n   order over the set of all feasible paths to a set\
    \ of destinations\n   associated with a given address prefix.  One way to define\
    \ this\n   complete order is to define a function that maps each full AS path\
    \ to\n   a non-negative integer that denotes the path's degree of preference.\n\
    \   Path selection is then reduced to applying this function to all\n   feasible\
    \ paths and choosing the one with the highest degree of\n   preference.\n   In\
    \ actual BGP implementations, the criteria for assigning degree of\n   preferences\
    \ to a path are specified as configuration information.\n   The process of assigning\
    \ a degree of preference to a path can be\n   based on several sources of information:\n\
    \     1.  Information explicitly present in the full AS path.\n     2.  A combination\
    \ of information that can be derived from the full\n         AS path and information\
    \ outside the scope of BGP (e.g., policy\n         routing constraints provided\
    \ as configuration information).\n   Possible criteria for assigning a degree\
    \ of preference to a path are:\n       - AS count. Paths with a smaller AS count\
    \ are generally better.\n       - Policy considerations. BGP supports policy-based\
    \ routing based\n         on the controlled distribution of routing information.\
    \  A BGP\n         speaker may be aware of some policy constraints (both within\n\
    \         and outside of its own AS) and do appropriate path selection.\n    \
    \     Paths that do not comply with policy requirements are not\n         considered\
    \ further.\n       - Presence or absence of a certain AS or AS's in the path.\
    \ By\n         means of information outside the scope of BGP, an AS may know\n\
    \         some performance characteristics (e.g., bandwidth, MTU, intra-\n   \
    \      AS diameter) of certain AS's and may try to avoid or prefer\n         them.\n\
    \       - Path origin. A path learned entirely from BGP (i.e., whose\n       \
    \  endpoint is internal to the last AS on the path) is generally\n         better\
    \ than one for which part of the path was learned via EGP\n         or some other\
    \ means.\n       - AS path subsets. An AS path that is a subset of a longer AS\n\
    \         path to the same destination should be preferred over the\n        \
    \ longer path.  Any problem in the shorter path (such as an\n         outage)\
    \ will also be a problem in the longer path.\n       - Link dynamics. Stable paths\
    \ should be preferred over unstable\n         ones. Note that this criterion must\
    \ be used in a very careful\n         way to avoid causing unnecessary route fluctuation.\
    \ Generally,\n         any criteria that depend on dynamic information might cause\n\
    \         routing instability and should be treated very carefully.\n"
- title: 7. Required set of supported routing policies
  contents:
  - '7. Required set of supported routing policies

    '
- title: Policies are provided to BGP in the form of configuration
  contents:
  - 'Policies are provided to BGP in the form of configuration

    '
- title: information.  This information is not directly encoded in the
  contents:
  - 'information.  This information is not directly encoded in the

    '
- title: protocol. Therefore, BGP can provide support for very complex routing
  contents:
  - 'protocol. Therefore, BGP can provide support for very complex routing

    '
- title: policies. However, it is not required that all BGP implementations
  contents:
  - 'policies. However, it is not required that all BGP implementations

    '
- title: support such policies.
  contents:
  - 'support such policies.

    '
- title: We are not attempting to standardize the routing policies that must
  contents:
  - 'We are not attempting to standardize the routing policies that must

    '
- title: be supported in every BGP implementation; we strongly encourage all
  contents:
  - 'be supported in every BGP implementation; we strongly encourage all

    '
- title: 'implementors to support the following set of routing policies:'
  contents:
  - "implementors to support the following set of routing policies:\n     1.  BGP\
    \ implementations should allow an AS to control announcements\n         of BGP-learned\
    \ routes to adjacent AS's.  Implementations should\n         also support such\
    \ control with at least the granularity of a\n         single address prefix.\
    \  Implementations should also support\n         such control with the granularity\
    \ of an autonomous system,\n         where the autonomous system may be either\
    \ the autonomous system\n         that originated the route, or the autonomous\
    \ system that\n         advertised the route to the local system (adjacent autonomous\n\
    \         system).  Care must be taken when a BGP speaker selects a new\n    \
    \     route that can't be announced to a particular external peer,\n         while\
    \ the previously selected route was announced to that peer.\n         Specifically,\
    \ the local system must explicitly indicate to the\n         peer that the previous\
    \ route is now infeasible.\n     2.  BGP implementations should allow an AS to\
    \ prefer a particular\n         path to a destination (when more than one path\
    \ is available).\n         At the minimum an implementation shall support this\n\
    \         functionality by allowing to administratively assign a degree\n    \
    \     of preference to a route based solely on the IP address of the\n       \
    \  neighbor the route is received from. The allowed range of the\n         assigned\
    \ degree of preference shall be between 0 and 2^(31) -\n         1.\n     3. \
    \ BGP implementations should allow an AS to ignore routes with\n         certain\
    \ AS's in the AS_PATH path attribute.  Such function can\n         be implemented\
    \ by using the technique outlined in [2], and by\n         assigning \"infinity\"\
    \ as \"weights\" for such AS's. The route\n         selection process must ignore\
    \ routes that have \"weight\" equal\n         to \"infinity\".\n"
- title: 8. Interaction with other exterior routing protocols
  contents:
  - "8. Interaction with other exterior routing protocols\n   The guidelines suggested\
    \ in this section are consistent with the\n   guidelines presented in [3].\n \
    \  An AS should advertise a minimal aggregate for its internal\n   destinations\
    \ with respect to the amount of address space that it is\n   actually using. \
    \ This can be used by administrators of non-BGP 4 AS's\n   to determine how many\
    \ routes to explode from a single aggregate.\n   A route that carries the ATOMIC_AGGREGATE\
    \ path attribute shall not be\n   exported into either BGP-3 or EGP2, unless such\
    \ an exportation can be\n   accomplished without exploding the NLRI of the route.\n"
- title: 8.1 Exchanging information with EGP2
  contents:
  - "8.1 Exchanging information with EGP2\n   This document suggests the following\
    \ guidelines for exchanging\n   routing information between BGP-4 and EGP2.\n\
    \   To provide for graceful migration, a BGP speaker may participate in\n   EGP2,\
    \ as well as in BGP-4. Thus, a BGP speaker may receive IP\n   reachability information\
    \ by means of EGP2 as well as by means of\n   BGP-4.  The information received\
    \ by EGP2 can be injected into BGP-4\n   with the ORIGIN path attribute set to\
    \ 1.  Likewise,  the information\n   received via BGP-4 can be injected into EGP2\
    \ as well. In the latter\n   case, however, one needs to be aware of the potential\
    \ information\n   explosion when a given IP prefix received from BGP-4 denotes\
    \ a set of\n   consecutive A/B/C class networks.  Injection of BGP-4 received\
    \ NLRI\n   that denotes IP subnets requires the BGP speaker to inject the\n  \
    \ corresponding network into EGP2.  The local system shall provide\n   mechanisms\
    \ to control the exchange of reachability information\n   between EGP2 and BGP-4.\
    \  Specifically, a conformant implementation is\n   required to support all of\
    \ the following options when injecting BGP-4\n   received reachability information\
    \ into EGP2:\n       - inject default only (0.0.0.0); no export of any other NLRI\n\
    \       - allow controlled deaggregation, but only of specific routes;\n     \
    \    allow export of non-aggregated NLRI\n       - allow export of only non-aggregated\
    \ NLRI\n   The exchange of routing information via EGP2 between a BGP speaker\n\
    \   participating in BGP-4 and a pure EGP2 speaker may occur  only at the\n  \
    \ domain (autonomous system) boundaries.\n"
- title: 8.2 Exchanging information with BGP-3
  contents:
  - "8.2 Exchanging information with BGP-3\n   This document suggests the following\
    \ guidelines for exchanging\n   routing information between BGP-4 and BGP-3.\n\
    \   To provide for graceful migration, a BGP speaker may participate in\n   BGP-3,\
    \ as well as in BGP-4. Thus, a BGP speaker may receive IP\n   reachability information\
    \ by means of BGP-3, as well as by means of\n   BGP-4.\n   A BGP speaker may inject\
    \ the information received by BGP-4 into BGP-3\n   as follows.\n   If an AS_PATH\
    \ attribute of a BGP-4 route carries AS_SET path\n   segments, then the AS_PATH\
    \ attribute of the BGP-3 route shall be\n   constructed by treating the AS_SET\
    \ segments as AS_SEQUENCE segments,\n   with the resulting AS_PATH being a single\
    \ AS_SEQUENCE. While this\n   procedure loses set/sequence information, it doesn't\
    \ affect\n   protection for routing loops suppression, but may affect policies,\
    \ if\n   the policies are based on the content or ordering of the AS_PATH\n  \
    \ attribute.\n   While injecting BGP-4 derived NLRI into BGP-3, one needs to be\
    \ aware\n   of the potential information explosion when a given IP prefix denotes\n\
    \   a set of consecutive A/B/C class networks. Injection of BGP-4 derived\n  \
    \ NLRI that denotes IP subnets requires the BGP speaker to inject the\n   corresponding\
    \ network into BGP-3. The local system shall provide\n   mechanisms to control\
    \ the exchange of routing information between\n   BGP-3 and BGP-4.  Specifically,\
    \ a conformant implementation is\n   required to support all of the following\
    \ options when injecting BGP-4\n   received routing information into BGP-3:\n\
    \       - inject default only (0.0.0.0), no export of any other NLRI\n       -\
    \ allow controlled deaggregation, but only of specific routes;\n         allow\
    \ export of non-aggregated NLRI\n       - allow export of only non-aggregated\
    \ NLRI\n   The exchange of routing information via BGP-3 between a BGP speaker\n\
    \   participating in BGP-4 and a pure BGP-3 speaker may occur  only at\n   the\
    \ autonomous system boundaries. Within a single autonomous system\n   BGP conversations\
    \ between all the BGP speakers of that autonomous\n   system have to be either\
    \ BGP-3 or BGP-4, but not a mixture.\n"
- title: 9. Operations over Switched Virtual Circuits
  contents:
  - "9. Operations over Switched Virtual Circuits\n   When using BGP over Switched\
    \ Virtual Circuit (SVC) subnetworks it may\n   be desirable to minimize traffic\
    \ generated by BGP. Specifically, it\n   may be desirable to eliminate traffic\
    \ associated with periodic\n   KEEPALIVE messages.  BGP includes a mechanism for\
    \ operation over\n   switched virtual circuit (SVC) services which avoids keeping\
    \ SVCs\n   permanently open and allows it to eliminates periodic sending of\n\
    \   KEEPALIVE messages.\n   This section describes how to operate without periodic\
    \ KEEPALIVE\n   messages to minimise SVC usage when using an intelligent SVC circuit\n\
    \   manager.  The proposed scheme may also be used on \"permanent\"\n   circuits,\
    \ which support a feature like link quality monitoring or\n   echo request to\
    \ determine the status of link connectivity.\n   The mechanism described in this\
    \ section is suitable only between the\n   BGP speakers that are directly connected\
    \ over a common virtual\n   circuit.\n"
- title: 9.1 Establishing a BGP Connection
  contents:
  - "9.1 Establishing a BGP Connection\n   The feature is selected by specifying zero\
    \ Hold Time in the OPEN\n   message.\n"
- title: 9.2 Circuit Manager Properties
  contents:
  - "9.2 Circuit Manager Properties\n   The circuit manager must have sufficient functionality\
    \ to be able to\n   compensate for the lack of periodic KEEPALIVE messages:\n\
    \       - It must be able to determine link layer unreachability in a\n      \
    \   predictable finite period of a failure occurring.\n       - On determining\
    \ unreachability it should:\n                - start a configurable dead timer\
    \ (comparable to a\n                  typical Hold timer value).\n           \
    \     - attempt to re-establish the Link Layer connection.\n       - If the dead\
    \ timer expires it should:\n                - send an internal circuit DEAD indication\
    \ to TCP.\n       - If the connection is re-established it should:\n         \
    \       - cancel the dead timer.\n                - send an internal circuit UP\
    \ indication to TCP.\n"
- title: 9.3 TCP Properties
  contents:
  - "9.3 TCP Properties\n   A small modification must be made to TCP to process internal\n\
    \   notifications from the circuit manager:\n       - DEAD: Flush transmit queue\
    \ and abort TCP connection.\n       - UP: Transmit any queued data or allow an\
    \ outgoing TCP call to\n         proceed.\n"
- title: 9.4 Combined Properties
  contents:
  - "9.4 Combined Properties\n   Some implementations may not be able to guarantee\
    \ that the BGP\n   process and the circuit manager will operate as a single entity;\
    \ i.e.\n   they can have a separate existence when the other has been stopped\
    \ or\n   has crashed.\n   If this is the case, a periodic two-way poll between\
    \ the BGP process\n   and the circuit manager should be implemented.  If the BGP\
    \ process\n   discovers the circuit manager has gone away it should close all\n\
    \   relevant TCP connections.  If the circuit manager discovers the BGP\n   process\
    \ has gone away it should close all its connections associated\n   with the BGP\
    \ process and reject any further incoming connections.\n"
- title: 10. Conclusion
  contents:
  - "10. Conclusion\n   The BGP protocol provides a high degree of control and flexibility\n\
    \   for doing interdomain routing while enforcing policy and performance\n   constraints\
    \ and avoiding routing loops. The guidelines presented here\n   will provide a\
    \ starting point for using BGP to provide more\n   sophisticated and manageable\
    \ routing in the Internet as it grows.\n"
- title: Appendix A. The Interaction of BGP and an IGP
  contents:
  - "Appendix A. The Interaction of BGP and an IGP\n   This section outlines methods\
    \ by which BGP can exchange routing\n   information with an IGP. The methods outlined\
    \ here are not proposed\n   as part of the standard BGP usage at this time.  These\
    \ methods are\n   outlined for information purposes only.  Implementors may want\
    \ to\n   consider these methods when importing IGP information.\n   This is general\
    \ information that applies to any generic IGP.\n   Interaction between BGP and\
    \ any specific IGP is outside the scope of\n   this section.  Methods for specific\
    \ IGP's should be proposed in\n   separate documents.  Methods for specific IGP's\
    \ could be proposed for\n   standard usage in the future.\n"
- title: Overview
  contents:
  - "Overview\n   By definition, all transit AS's must be able to carry traffic which\n\
    \   originates from and/or is destined to locations outside of that AS.\n   This\
    \ requires a certain degree of interaction and coordination\n   between BGP and\
    \ the Interior Gateway Protocol (IGP) used by that\n   particular AS. In general,\
    \ traffic originating outside of a given AS\n   is going to pass through both\
    \ interior gateways (gateways that\n   support the IGP only) and border gateways\
    \ (gateways that support both\n   the IGP and BGP). All interior gateways receive\
    \ information about\n   external routes from one or more of the border gateways\
    \ of the AS via\n   the IGP.\n   Depending on the mechanism used to propagate\
    \ BGP information within a\n   given AS, special care must be taken to ensure\
    \ consistency between\n   BGP and the IGP, since changes in state are likely to\
    \ propagate at\n   different rates across the AS. There may be a time window between\
    \ the\n   moment when some border gateway (A) receives new BGP routing\n   information\
    \ which was originated from another border gateway (B)\n   within the same AS,\
    \ and the moment the IGP within this AS is capable\n   of routing transit traffic\
    \ to that border gateway (B). During that\n   time window, either incorrect routing\
    \ or \"black holes\" can occur.\n   In order to minimize such routing problems,\
    \ border gateway (A) should\n   not advertise to any of its external peers a route\
    \ to some set of\n   exterior destinations associated with a given address prefix\
    \ X via\n   border gateway (B) until all the interior gateways within the AS are\n\
    \   ready to route traffic destined to these destinations via the correct\n  \
    \ exit border gateway (B). In other words, interior routing should\n   converge\
    \ on the proper exit gateway before/advertising routes via\n   that exit gateway\
    \ to external peers.\n"
- title: A.2 Methods for Achieving Stable Interactions
  contents:
  - "A.2 Methods for Achieving Stable Interactions\n   The following discussion outlines\
    \ several techniques capable of\n   achieving stable interactions between BGP\
    \ and the IGP within an\n   Autonomous System.\n"
- title: A.2.1 Propagation of BGP Information via the IGP
  contents:
  - "A.2.1 Propagation of BGP Information via the IGP\n   While BGP can provide its\
    \ own mechanism for carrying BGP information\n   within an AS, one can also use\
    \ an IGP to transport this information,\n   as long as the IGP supports complete\
    \ flooding of routing information\n   (providing the mechanism to distribute the\
    \ BGP information) and one\n   pass convergence (making the mechanism effectively\
    \ atomic). If an IGP\n   is used to carry BGP information, then the period of\n\
    \   desynchronization described earlier does not occur at all, since BGP\n   information\
    \ propagates within the AS synchronously with the IGP, and\n   the IGP converges\
    \ more or less simultaneously with the arrival of the\n   new routing information.\
    \ Note that the IGP only carries BGP\n   information and should not interpret\
    \ or process this information.\n"
- title: A.2.2  Tagged Interior Gateway Protocol
  contents:
  - "A.2.2  Tagged Interior Gateway Protocol\n   Certain IGPs can tag routes exterior\
    \ to an AS with the identity of\n   their exit points while propagating them within\
    \ the AS. Each border\n   gateway should use identical tags for announcing exterior\
    \ routing\n   information (received via BGP) both into the IGP and when propagating\n\
    \   this information to other internal peers (peers within the same AS).\n   Tags\
    \ generated by a border gateway must uniquely identify that\n   particular border\
    \ gateway--different border gateways must use\n   different tags.\n   All Border\
    \ Gateways within a single AS must observe the following two\n   rules:\n    \
    \ 1.  Information received from an internal peer by a border gateway\n       \
    \  A declaring a set of destination associated with a given\n         address\
    \ prefix to be unreachable must immediately be propagated\n         to all of\
    \ the external peers of A.\n     2.  Information received from an internal peer\
    \ by a border gateway\n         A about a set of reachable destinations associated\
    \ with a given\n         address prefix X cannot be propagated to any of the external\n\
    \         peers of A unless/until A has an IGP route to the set of\n         destinations\
    \ covered by X and both the IGP and the BGP routing\n         information have\
    \ identical tags.\n   These rules guarantee that no routing information is announced\n\
    \   externally unless the IGP is capable of correctly supporting it. It\n   also\
    \ avoids some causes of \"black holes\".\n   One possible method for tagging BGP\
    \ and IGP routes within an AS is to\n   use the IP address of the exit border\
    \ gateway announcing the exterior\n   route into the AS. In this case the \"gateway\"\
    \ field in the BGP UPDATE\n   message is used as the tag.\n   An alternate method\
    \ for tagging BGP and IGP routes is to have BGP and\n   the IGP agree on a router\
    \ ID.  In this case, the router ID is\n   available to all BGP (version 3 or higher)\
    \ speakers.  Since this ID\n   is already unique it can be used directly as the\
    \ tag in the IGP.\n"
- title: A.2.3 Encapsulation
  contents:
  - "A.2.3 Encapsulation\n   Encapsulation provides the simplest (in terms of the\
    \ interaction\n   between the IGP and BGP) mechanism for carrying transit traffic\n\
    \   across the AS. In this approach, transit traffic is encapsulated\n   within\
    \ an IP datagram addressed to the exit gateway. The only\n   requirement imposed\
    \ on the IGP by this approach is that it should be\n   capable of supporting routing\
    \ between border gateways within the same\n   AS.\n   The address of the exit\
    \ gateway A for some exterior destination X is\n   specified in the BGP identifier\
    \ field of the BGP OPEN message\n   received from gateway A (via BGP) by all other\
    \ border gateways within\n   the same AS. In order to route traffic to destination\
    \ X, each border\n   gateway within the AS encapsulates it in datagrams addressed\
    \ to\n   gateway A. Gateway A then performs decapsulation and forwards the\n \
    \  original packet to the proper gateway in another AS.\n   Since encapsulation\
    \ does not rely on the IGP to carry exterior\n   routing information, no synchronization\
    \ between BGP and the IGP is\n   required.\n   Some means of identifying datagrams\
    \ containing encapsulated IP, such\n   as an IP protocol type code, must be defined\
    \ if this method is to be\n   used.\n   Note that, if a packet to be encapsulated\
    \ has length that is very\n   close to the MTU, that packet would be fragmented\
    \ at the gateway that\n   performs encapsulation.\n"
- title: A.2.4  Pervasive BGP
  contents:
  - "A.2.4  Pervasive BGP\n   If all routers in an AS are BGP speakers, then there\
    \ is no need to\n   have any interaction between BGP and an IGP.  In such cases,\
    \ all\n   routers in the AS already have full information of all BGP routes.\n\
    \   The IGP is then only used for routing within the AS, and no BGP\n   routes\
    \ are imported into the IGP.\n   For routers to operate in this fashion, they\
    \ must be able to perform\n   a recursive lookup in their routing table.  The\
    \ first lookup will use\n   a BGP route to establish the exit router, while the\
    \ second lookup\n   will determine the IGP path to the exit router.\n   Since\
    \ the IGP carries no external information in this scenario, all\n   routers in\
    \ the AS will have converged as soon as all BGP speakers\n   have new information\
    \ about this route.  Since there is no need to\n   delay for the IGP to converge,\
    \ an implementation may advertise these\n   routes without further delay due to\
    \ the IGP.\n"
- title: A.2.5  Other Cases
  contents:
  - "A.2.5  Other Cases\n   There may be AS's with IGPs which can neither carry BGP\
    \ information\n   nor tag exterior routes (e.g., RIP). In addition, encapsulation\
    \ may\n   be either infeasible or undesirable. In such situations, the\n   following\
    \ two rules must be observed:\n     1.  Information received from an internal\
    \ peer by a border gateway\n         A declaring a destination to be unreachable\
    \ must immediately be\n         propagated to all of the external peers of A.\n\
    \     2.  Information received from an internal peer by a border gateway\n   \
    \      A about a reachable destination X cannot be propagated to any\n       \
    \  of the external peers of A unless A has an IGP route to X and\n         sufficient\
    \ time has passed for the IGP routes to have\n         converged.\n   The above\
    \ rules present necessary (but not sufficient) conditions for\n   propagating\
    \ BGP routing information to other AS's. In contrast to\n   tagged IGPs, these\
    \ rules cannot ensure that interior routes to the\n   proper exit gateways are\
    \ in place before propagating the routes to\n   other AS's.\n   If the convergence\
    \ time of an IGP is less than some small value X,\n   then the time window during\
    \ which the IGP and BGP are unsynchronized\n   is less than X as well, and the\
    \ whole issue can be ignored at the\n   cost of transient periods (of less than\
    \ length X) of routing\n   instability. A reasonable value for X is a matter for\
    \ further study,\n   but X should probably be less than one second.\n   If the\
    \ convergence time of an IGP cannot be ignored, a different\n   approach is needed.\
    \ Mechanisms and techniques which might be\n   appropriate in this situation are\
    \ subjects for further study.\n"
- title: References
  contents:
  - "References\n   [1] Rekhter Y., and T. Li, \"A Border Gateway Protocol 4 (BGP-4),\
    \ RFC\n       1771, T.J. Watson Research Center, IBM Corp., cisco Systems,\n \
    \      March 1995.\n   [2] Braun, H-W., \"Models of Policy Based Routing\", RFC\
    \ 1104,\n       Merit/NSFNET, June 1989.\n   [3] Fuller, V., Li, T., Yu, J., and\
    \ K. Varadhan, \"Supernetting:  an\n       Address Assignment and Aggregation\
    \ Strategy\", RFC1519, BARRNet,\n       cisco, MERIT, OARnet, September 1993.\n"
- title: Security Considerations
  contents:
  - "Security Considerations\n   Security issues are not discussed in this memo.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Yakov Rekhter\n   T.J. Watson Research Center IBM Corporation\n\
    \   P.O. Box 704, Office H3-D40\n   Yorktown Heights, NY 10598\n   Phone: +1 914\
    \ 784 7361\n   EMail: yakov@watson.ibm.com\n   Phill Gross\n   MCI Data Services\
    \ Division\n   2100 Reston Parkway, Room 6001,\n   Reston, VA 22091\n   Phone:\
    \ +1 703 715 7432\n   EMail: 0006423401@mcimail.com\n   IETF IDR WG mailing list:\
    \ bgp@ans.net\n   To be added: bgp-request@ans.net\n"
