- title: __initial_text__
  contents:
  - '         Network Mobility Route Optimization Problem Statement

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The IETF Trust (2007).\n"
- title: Abstract
  contents:
  - "Abstract\n   With current Network Mobility (NEMO) Basic Support, all\n   communications\
    \ to and from Mobile Network Nodes must go through the\n   bi-directional tunnel\
    \ established between the Mobile Router and Home\n   Agent when the mobile network\
    \ is away.  This sub-optimal routing\n   results in various inefficiencies associated\
    \ with packet delivery,\n   such as increased delay and bottleneck links leading\
    \ to traffic\n   congestion, which can ultimately disrupt all communications to\
    \ and\n   from the Mobile Network Nodes.  Additionally, with nesting of Mobile\n\
    \   Networks, these inefficiencies get compounded, and stalemate\n   conditions\
    \ may occur in specific dispositions.  This document\n   investigates such problems\
    \ and provides the motivation behind Route\n   Optimization (RO) for NEMO.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  3\n   2.  NEMO Route Optimization Problem Statement  . . . . .\
    \ . . . . .  3\n     2.1.  Sub-Optimality with NEMO Basic Support . . . . . .\
    \ . . . .  4\n     2.2.  Bottleneck in the Home Network . . . . . . . . . . .\
    \ . . .  6\n     2.3.  Amplified Sub-Optimality in Nested Mobile Networks . .\
    \ . .  6\n     2.4.  Sub-Optimality with Combined Mobile IPv6 Route\n        \
    \   Optimization . . . . . . . . . . . . . . . . . . . . . . .  8\n     2.5. \
    \ Security Policy Prohibiting Traffic from Visiting Nodes  .  9\n     2.6.  Instability\
    \ of Communications within a Nested Mobile\n           Network  . . . . . . .\
    \ . . . . . . . . . . . . . . . . . .  9\n     2.7.  Stalemate with a Home Agent\
    \ Nested in a Mobile Network . . 10\n   3.  Conclusion . . . . . . . . . . . .\
    \ . . . . . . . . . . . . . . 10\n   4.  Security Considerations  . . . . . .\
    \ . . . . . . . . . . . . . 11\n   5.  Acknowledgments  . . . . . . . . . . .\
    \ . . . . . . . . . . . . 11\n   6.  References . . . . . . . . . . . . . . .\
    \ . . . . . . . . . . . 12\n     6.1.  Normative Reference  . . . . . . . . .\
    \ . . . . . . . . . . 12\n     6.2.  Informative Reference  . . . . . . . . .\
    \ . . . . . . . . . 12\n   Appendix A.  Various Configurations Involving Nested\
    \ Mobile\n                Networks  . . . . . . . . . . . . . . . . . . . . .\
    \ . 13\n     A.1.  CN Located in the Fixed Infrastructure . . . . . . . . . .\
    \ 13\n       A.1.1.  Case A: LFN and Standard IPv6 CN . . . . . . . . . . . 14\n\
    \       A.1.2.  Case B: VMN and MIPv6 CN . . . . . . . . . . . . . . . 14\n  \
    \     A.1.3.  Case C: VMN and Standard IPv6 CN . . . . . . . . . . . 14\n    \
    \ A.2.  CN Located in Distinct Nested NEMOs  . . . . . . . . . . . 15\n      \
    \ A.2.1.  Case D: LFN and Standard IPv6 CN . . . . . . . . . . . 16\n       A.2.2.\
    \  Case E: VMN and MIPv6 CN . . . . . . . . . . . . . . . 16\n       A.2.3.  Case\
    \ F: VMN and Standard IPv6 CN . . . . . . . . . . . 16\n     A.3.  MNN and CN\
    \ Located in the Same Nested NEMO . . . . . . . . 17\n       A.3.1.  Case G: LFN\
    \ and Standard IPv6 CN . . . . . . . . . . . 18\n       A.3.2.  Case H: VMN and\
    \ MIPv6 CN . . . . . . . . . . . . . . . 18\n       A.3.3.  Case I: VMN and Standard\
    \ IPv6 CN . . . . . . . . . . . 19\n     A.4.  CN Located Behind the Same Nested\
    \ MR . . . . . . . . . . . 19\n       A.4.1.  Case J: LFN and Standard IPv6 CN\
    \ . . . . . . . . . . . 20\n       A.4.2.  Case K: VMN and MIPv6 CN . . . . .\
    \ . . . . . . . . . . 20\n       A.4.3.  Case L: VMN and Standard IPv6 CN . .\
    \ . . . . . . . . . 21\n   Appendix B.  Example of How a Stalemate Situation Can\
    \ Occur  . . . 22\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   With current Network Mobility (NEMO) Basic Support [1],\
    \ all\n   communications to and from nodes in a mobile network must go through\n\
    \   the bi-directional tunnel established between the Mobile Router and\n   its\
    \ Home Agent (also known as the MRHA tunnel) when the mobile\n   network is away.\
    \  Although such an arrangement allows Mobile Network\n   Nodes to reach and be\
    \ reached by any node on the Internet,\n   limitations associated to the base\
    \ protocol degrade overall\n   performance of the network and, ultimately, can\
    \ prevent all\n   communications to and from the Mobile Network Nodes.\n   Some\
    \ of these concerns already exist with Mobile IPv6 [4] and were\n   addressed\
    \ by the mechanism known as Route Optimization, which is part\n   of the base\
    \ protocol.  With Mobile IPv6, Route Optimization mostly\n   improves the end-to-end\
    \ path between the Mobile Node and\n   Correspondent Node, with an additional\
    \ benefit of reducing the load\n   of the Home Network, thus its name.\n   NEMO\
    \ Basic Support presents a number of additional issues, making the\n   problem\
    \ more complex, so it was decided to address Route Optimization\n   separately.\
    \  In that case, the expected benefits are more dramatic,\n   and a Route Optimization\
    \ mechanism could enable connectivity that\n   would be broken otherwise.  In\
    \ that sense, Route Optimization is even\n   more important to NEMO Basic Support\
    \ than it is to Mobile IPv6.\n   This document explores limitations inherent in\
    \ NEMO Basic Support,\n   and their effects on communications between a Mobile\
    \ Network Node and\n   its corresponding peer.  This is detailed in Section 2.\
    \  It is\n   expected that readers are familiar with general terminologies related\n\
    \   to mobility in [4][2], NEMO-related terms defined in [3], and NEMO\n   goals\
    \ and requirements [5].\n"
- title: 2.  NEMO Route Optimization Problem Statement
  contents:
  - "2.  NEMO Route Optimization Problem Statement\n   Given the NEMO Basic Support\
    \ protocol, all data packets to and from\n   Mobile Network Nodes must go through\
    \ the Home Agent, even though a\n   shorter path may exist between the Mobile\
    \ Network Node and its\n   Correspondent Node.  In addition, with the nesting\
    \ of Mobile Routers,\n   these data packets must go through multiple Home Agents\
    \ and several\n   levels of encapsulation, which may be avoided.  This results\
    \ in\n   various inefficiencies and problems with packet delivery, which can\n\
    \   ultimately disrupt all communications to and from the Mobile Network\n   Nodes.\n\
    \   In the following sub-sections, we will describe the effects of a\n   pinball\
    \ route with NEMO Basic Support, how it may cause a bottleneck\n   to be formed\
    \ in the Home Network, and how these get amplified with\n   nesting of mobile\
    \ networks.  Closely related to nesting, we will also\n   look into the sub-optimality\
    \ even when Mobile IPv6 Route Optimization\n   is used over NEMO Basic Support.\
    \  This is followed by a description\n   of security policy in the Home Network\
    \ that may forbid transit\n   traffic from Visiting Mobile Nodes in mobile networks.\
    \  In addition,\n   we will explore the impact of the MRHA tunnel on communications\n\
    \   between two Mobile Network Nodes on different links of the same\n   mobile\
    \ network.  We will also provide additional motivations for\n   Route Optimization\
    \ by considering the potential stalemate situation\n   when a Home Agent is part\
    \ of a mobile network.\n"
- title: 2.1.  Sub-Optimality with NEMO Basic Support
  contents:
  - "2.1.  Sub-Optimality with NEMO Basic Support\n   With NEMO Basic Support, all\
    \ packets sent between a Mobile Network\n   Node and its Correspondent Node are\
    \ forwarded through the MRHA\n   tunnel, resulting in a pinball route between\
    \ the two nodes.  This has\n   the following sub-optimal effects:\n   o  Longer\
    \ Route Leading to Increased Delay and Additional\n      Infrastructure Load\n\
    \      Because a packet must transit from a mobile network to the Home\n     \
    \ Agent then to the Correspondent Node, the transit time of the\n      packet\
    \ is usually longer than if the packet were to go straight\n      from the mobile\
    \ network to the Correspondent Node.  When the\n      Correspondent Node (or the\
    \ mobile network) resides near the Home\n      Agent, the increase in packet delay\
    \ can be very small.  However,\n      when the mobile network and the Correspondent\
    \ Node are relatively\n      near to one another but far away from the Home Agent\
    \ on the\n      Internet, the increase in delay is very large.  Applications such\n\
    \      as real-time multimedia streaming may not be able to tolerate such\n  \
    \    increase in packet delay.  In general, the increase in delay may\n      also\
    \ impact the performance of transport protocols such as TCP,\n      since the\
    \ sending rate of TCP is partly determined by the round-\n      trip time (RTT)\
    \ perceived by the communication peers.\n      Moreover, by using a longer route,\
    \ the total resource utilization\n      for the traffic would be much higher than\
    \ if the packets were to\n      follow a direct path between the Mobile Network\
    \ Node and\n      Correspondent Node.  This would result in additional load in\
    \ the\n      infrastructure.\n   o  Increased Packet Overhead\n      The encapsulation\
    \ of packets in the MRHA tunnel results in\n      increased packet size due to\
    \ the addition of an outer header.\n      This reduces the bandwidth efficiency,\
    \ as an IPv6 header can be\n      quite substantial relative to the payload for\
    \ applications such as\n      voice samples.  For instance, given a voice application\
    \ using an 8\n      kbps algorithm (e.g., G.729) and taking a voice sample every\
    \ 20 ms\n      (as in RFC 1889 [6]), the packet transmission rate will be 50\n\
    \      packets per second.  Each additional IPv6 header is an extra 320\n    \
    \  bits per packet (i.e., 16 kbps), which is twice the actual\n      payload!\n\
    \   o  Increased Processing Delay\n      The encapsulation of packets in the MRHA\
    \ tunnel also results in\n      increased processing delay at the points of encapsulation\
    \ and\n      decapsulation.  Such increased processing may include encryption/\n\
    \      decryption, topological correctness verifications, MTU\n      computation,\
    \ fragmentation, and reassembly.\n   o  Increased Chances of Packet Fragmentation\n\
    \      The augmentation in packet size due to packet encapsulation may\n     \
    \ increase the chances of the packet being fragmented along the MRHA\n      tunnel.\
    \  This can occur if there is no prior path MTU discovery\n      conducted, or\
    \ if the MTU discovery mechanism did not take into\n      account the encapsulation\
    \ of packets.  Packet fragmentation will\n      result in a further increase in\
    \ packet delays and further\n      reduction of bandwidth efficiency.\n   o  Increased\
    \ Susceptibility to Link Failure\n      Under the assumption that each link has\
    \ the same probability of\n      link failure, a longer routing path would be\
    \ more susceptible to\n      link failure.  Thus, packets routed through the MRHA\
    \ tunnel may be\n      subjected to a higher probability of being lost or delayed\
    \ due to\n      link failure, compared to packets that traverse directly between\n\
    \      the Mobile Network Node and its Correspondent Node.\n"
- title: 2.2.  Bottleneck in the Home Network
  contents:
  - "2.2.  Bottleneck in the Home Network\n   Apart from the increase in packet delay\
    \ and infrastructure load,\n   forwarding packets through the Home Agent may also\
    \ lead to either the\n   Home Agent or the Home Link becoming a bottleneck for\
    \ the aggregated\n   traffic from/to all the Mobile Network Nodes.  A congestion\
    \ at home\n   would lead to additional packet delay, or even packet loss.  In\n\
    \   addition, Home Agent operations such as security check, packet\n   interception,\
    \ and tunneling might not be as optimized in the Home\n   Agent software as plain\
    \ packet forwarding.  This could further limit\n   the Home Agent capacity for\
    \ data traffic.  Furthermore, with all\n   traffic having to pass through the\
    \ Home Link, the Home Link becomes a\n   single point of failure for the mobile\
    \ network.\n   Data packets that are delayed or discarded due to congestion at\
    \ the\n   Home Network would cause additional performance degradation to\n   applications.\
    \  Signaling packets, such as Binding Update messages,\n   that are delayed or\
    \ discarded due to congestion at the Home Network\n   may affect the establishment\
    \ or update of bi-directional tunnels,\n   causing disruption of all traffic flow\
    \ through these tunnels.\n   A NEMO Route Optimization mechanism that allows the\
    \ Mobile Network\n   Nodes to communicate with their Correspondent Nodes via a\
    \ path that\n   is different from the MRHA tunneling and thereby avoiding the\
    \ Home\n   Agent may alleviate or even prevent the congestion at the Home Agent\n\
    \   or Home Link.\n"
- title: 2.3.  Amplified Sub-Optimality in Nested Mobile Networks
  contents:
  - "2.3.  Amplified Sub-Optimality in Nested Mobile Networks\n   By allowing other\
    \ mobile nodes to join a mobile network, and in\n   particular mobile routers,\
    \ it is possible to form arbitrary levels of\n   nesting of mobile networks. \
    \ With such nesting, the use of NEMO Basic\n   Support further amplifies the sub-optimality\
    \ of routing.  We call\n   this the amplification effect of nesting, where the\
    \ undesirable\n   effects of a pinball route with NEMO Basic Support are amplified\
    \ with\n   each level of nesting of mobile networks.  This is best illustrated\n\
    \   by an example shown in Figure 1.\n               +--------+  +--------+  +--------+\
    \  +--------+\n               | MR2_HA |  | MR3_HA |  | MR4_HA |  | MR5_HA |\n\
    \               +------+-+  +---+----+  +---+----+  +-+------+\n             \
    \          \\       |           |        /\n        +--------+    +------------------------------+\n\
    \        | MR1_HA |----|         Internet             |-----CN1\n        +--------+\
    \    +------------------------------+\n                                    |\n\
    \                                +---+---+\n                      root-MR   |\
    \  MR1  |\n                                +-------+\n                       \
    \          |     |\n                          +-------+   +-------+\n        \
    \         sub-MR   |  MR2  |   |  MR4  |\n                          +---+---+\
    \   +---+---+\n                              |           |\n                 \
    \         +---+---+   +---+---+\n                 sub-MR   |  MR3  |   |  MR5\
    \  |\n                          +---+---+   +---+---+\n                      \
    \        |           |\n                          ----+----   ----+----\n    \
    \                         MNN         CN2\n              Figure 1: An Example\
    \ of a Nested Mobile Network\n   Using NEMO Basic Support, the flow of packets\
    \ between a Mobile\n   Network Node, MNN, and a Correspondent Node, CN1, would\
    \ need to go\n   through three separate tunnels, illustrated in Figure 2 below.\n\
    \                                ----------.\n                      ---------/\
    \         /----------.\n              -------/        |         |          /-------\n\
    \    MNN -----( -  - | -  -  - | -  -  - | -  -  - |  -  - (------ CN1\n     \
    \      MR3-------\\        |         |          \\-------MR3_HA\n            \
    \        MR2--------\\         \\----------MR2_HA\n                          \
    \    MR1---------MR1_HA\n                Figure 2: Nesting of Bi-Directional Tunnels\n\
    \   This leads to the following problems:\n   o  Pinball Route\n      Both inbound\
    \ and outbound packets will flow via the Home Agents of\n      all the Mobile\
    \ Routers on their paths within the mobile network,\n      with increased latency,\
    \ less resilience, and more bandwidth usage.\n      Appendix A illustrates in\
    \ detail the packets' routes under\n      different nesting configurations of\
    \ the Mobile Network Nodes.\n   o  Increased Packet Size\n      An extra IPv6\
    \ header is added per level of nesting to all the\n      packets.  The header\
    \ compression suggested in [7] cannot be\n      applied because both the source\
    \ and destination (the intermediate\n      Mobile Router and its Home Agent) are\
    \ different hop to hop.\n   Nesting also amplifies the probability of congestion\
    \ at the Home\n   Networks of the upstream Mobile Routers.  In addition, the Home\
    \ Link\n   of each upstream Mobile Router will also be a single point of failure\n\
    \   for the nested Mobile Router.\n"
- title: 2.4.  Sub-Optimality with Combined Mobile IPv6 Route Optimization
  contents:
  - "2.4.  Sub-Optimality with Combined Mobile IPv6 Route Optimization\n   When a\
    \ Mobile IPv6 host joins a mobile network, it becomes a Visiting\n   Mobile Node\
    \ of the mobile network.  Packets sent to and from the\n   Visiting Mobile Node\
    \ will have to be routed not only via the Home\n   Agent of the Visiting Mobile\
    \ Node, but also via the Home Agent of the\n   Mobile Router in the mobile network.\
    \  This suffers the same\n   amplification effect of nested mobile network mentioned\
    \ in\n   Section 2.3.\n   In addition, although Mobile IPv6 [4] allows a mobile\
    \ host to perform\n   Route Optimization with its Correspondent Node in order\
    \ to avoid\n   tunneling with its Home Agent, the \"optimized\" route is no longer\n\
    \   optimized when the mobile host is attached to a mobile network.  This\n  \
    \ is because the route between the mobile host and its Correspondent\n   Node\
    \ is subjected to the sub-optimality introduced by the MRHA\n   tunnel.  Interested\
    \ readers may refer to Appendix A for examples of\n   how the routes will appear\
    \ with nesting of Mobile IPv6 hosts in\n   mobile networks.\n   The readers should\
    \ also note that the same sub-optimality would apply\n   when the mobile host\
    \ is outside the mobile network and its\n   Correspondent Node is in the mobile\
    \ network.\n"
- title: 2.5.  Security Policy Prohibiting Traffic from Visiting Nodes
  contents:
  - "2.5.  Security Policy Prohibiting Traffic from Visiting Nodes\n   NEMO Basic\
    \ Support requires all traffic from visitors to be tunneled\n   to the Mobile\
    \ Router's Home Agent.  This might represent a breach in\n   the security of the\
    \ Home Network (some specific attacks against the\n   Mobile Router's binding\
    \ by rogue visitors have been documented in\n   [8][9]).  Administrators might\
    \ thus fear that malicious packets will\n   be routed into the Home Network via\
    \ the bi-directional tunnel.  As a\n   consequence, it can be expected that in\
    \ many deployment scenarios,\n   policies will be put in place to prevent unauthorized\
    \ Visiting Mobile\n   Nodes from attaching to the Mobile Router.\n   However,\
    \ there are deployment scenarios where allowing unauthorized\n   Visiting Mobile\
    \ Nodes is actually desirable.  For instance, when\n   Mobile Routers attach to\
    \ other Mobile Routers and form a nested NEMO,\n   they depend on each other to\
    \ reach the Internet.  When Mobile Routers\n   have no prior knowledge of one\
    \ another (no security association,\n   Authentication, Authorization, and Accounting\
    \ (AAA), Public-Key\n   Infrastructure (PKI), etc.), it could still be acceptable\
    \ to forward\n   packets, provided that the packets are not tunneled back to the\
    \ Home\n   Networks.\n   A Route Optimization mechanism that allows traffic from\
    \ Mobile\n   Network Nodes to bypass the bi-directional tunnel between a Mobile\n\
    \   Router and its Home Agent would be a necessary first step towards a\n   Tit\
    \ for Tat model, where MRs would benefit from a reciprocal\n   altruism, based\
    \ on anonymity and innocuousness, to extend the\n   Internet infrastructure dynamically.\n"
- title: 2.6.  Instability of Communications within a Nested Mobile Network
  contents:
  - "2.6.  Instability of Communications within a Nested Mobile Network\n   Within\
    \ a nested mobile network, two Mobile Network Nodes may\n   communicate with each\
    \ other.  Let us consider the previous example\n   illustrated in Figure 1 where\
    \ MNN and CN2 are sharing a communication\n   session.  With NEMO Basic Support,\
    \ a packet sent from MNN to CN2 will\n   need to be forwarded to the Home Agent\
    \ of each Mobile Router before\n   reaching CN2, whereas, a packet following the\
    \ direct path between\n   them need not even leave the mobile network.  Readers\
    \ are referred to\n   Appendix A.3 for detailed illustration of the resulting\
    \ routing\n   paths.\n   Apart from the consequences of increased packet delay\
    \ and packet\n   size, which are discussed in previous sub-sections, there are\
    \ two\n   additional effects that are undesirable:\n   o  when the nested mobile\
    \ network is disconnected from the Internet\n      (e.g., MR1 loses its egress\
    \ connectivity), MNN and CN2 can no\n      longer communicate with each other,\
    \ even though the direct path\n      from MNN to CN2 is unaffected;\n   o  the\
    \ egress link(s) of the root Mobile Router (i.e., MR1) becomes a\n      bottleneck\
    \ for all the traffic that is coming in and out of the\n      nested mobile network.\n\
    \   A Route Optimization mechanism could allow traffic between two Mobile\n  \
    \ Network Nodes nested within the same mobile network to follow a\n   direct path\
    \ between them, without being routed out of the mobile\n   network.  This may\
    \ also off-load the processing burden of the\n   upstream Mobile Routers when\
    \ the direct path between the two Mobile\n   Network Nodes does not traverse these\
    \ Mobile Routers.\n"
- title: 2.7.  Stalemate with a Home Agent Nested in a Mobile Network
  contents:
  - "2.7.  Stalemate with a Home Agent Nested in a Mobile Network\n   Several configurations\
    \ for the Home Network are described in [10].\n   In particular, there is a mobile\
    \ home scenario where a (parent)\n   Mobile Router is also a Home Agent for its\
    \ mobile network.  In other\n   words, the mobile network is itself an aggregation\
    \ of Mobile Network\n   Prefixes assigned to (children) Mobile Routers.\n   A\
    \ stalemate situation exists in the case where the parent Mobile\n   Router visits\
    \ one of its children.  The child Mobile Router cannot\n   find its Home Agent\
    \ in the Internet and thus cannot establish its\n   MRHA tunnel and forward the\
    \ visitor's traffic.  The traffic from the\n   parent is thus blocked from reaching\
    \ the Internet, and it will never\n   bind to its own (grandparent) Home Agent.\
    \  Appendix B gives a\n   detailed illustration of how such a situation can occur.\n\
    \   Then again, a Route Optimization mechanism that bypasses the nested\n   tunnel\
    \ might enable the parent traffic to reach the Internet and let\n   it bind. \
    \ At that point, the child Mobile Router would be able to\n   reach its parent\
    \ and bind in turn.  Additional nested Route\n   Optimization solutions might\
    \ also enable the child to locate its Home\n   Agent in the nested structure and\
    \ bind regardless of whether or not\n   the Internet is reachable.\n"
- title: 3.  Conclusion
  contents:
  - "3.  Conclusion\n   With current NEMO Basic Support, all communications to and\
    \ from\n   Mobile Network Nodes must go through the MRHA tunnel when the mobile\n\
    \   network is away.  This results in various inefficiencies associated\n   with\
    \ packet delivery.  This document investigates such inefficiencies\n   and provides\
    \ the motivation behind Route Optimization for NEMO.\n   We have described the\
    \ sub-optimal effects of pinball routes with NEMO\n   Basic Support, how they\
    \ may cause a bottleneck to be formed in the\n   Home Network, and how they get\
    \ amplified with nesting of mobile\n   networks.  These effects will also be seen\
    \ even when Mobile IPv6\n   Route Optimization is used over NEMO Basic Support.\
    \  In addition,\n   other issues concerning the nesting of mobile networks that\
    \ might\n   provide additional motivation for a NEMO Route Optimization mechanism\n\
    \   were also explored, such as the prohibition of forwarding traffic\n   from\
    \ a Visiting Mobile Node through an MRHA tunnel due to security\n   concerns,\
    \ the impact of the MRHA tunnel on communications between two\n   Mobile Network\
    \ Nodes on different links of the same mobile network,\n   and the possibility\
    \ of a stalemate situation when Home Agents are\n   nested within a mobile network.\n"
- title: 4.  Security Considerations
  contents:
  - "4.  Security Considerations\n   This document highlights some limitations of\
    \ NEMO Basic Support.  In\n   particular, some security concerns could prevent\
    \ interesting\n   applications of the protocol, as detailed in Section 2.5.\n\
    \   Route Optimization for RFC 3963 [1] might introduce new threats, just\n  \
    \ as it might alleviate existing ones.  This aspect will certainly be a\n   key\
    \ criterion in the evaluation of the proposed solutions.\n"
- title: 5.  Acknowledgments
  contents:
  - "5.  Acknowledgments\n   The authors wish to thank the co-authors of previous\
    \ versions from\n   which this document is derived: Marco Molteni, Paik Eun-Kyoung,\n\
    \   Hiroyuki Ohnishi, Thierry Ernst, Felix Wu, and Souhwan Jung.  Early\n   work\
    \ by Masafumi Watari on the extracted appendix was written while\n   still at\
    \ Keio University.  In addition, sincere appreciation is also\n   extended to\
    \ Jari Arkko, Carlos Bernardos, Greg Daley, T.J. Kniveton,\n   Henrik Levkowetz,\
    \ Erik Nordmark, Alexandru Petrescu, Hesham Soliman,\n   Ryuji Wakikawa, and Patrick\
    \ Wetterwald for their various\n   contributions.\n"
- title: 6.  References
  contents:
  - '6.  References

    '
- title: 6.1.  Normative Reference
  contents:
  - "6.1.  Normative Reference\n   [1]   Devarapalli, V., Wakikawa, R., Petrescu,\
    \ A., and P. Thubert,\n         \"Network Mobility (NEMO) Basic Support Protocol\"\
    , RFC 3963,\n         January 2005.\n   [2]   Manner, J. and M. Kojo, \"Mobility\
    \ Related Terminology\",\n         RFC 3753, June 2004.\n   [3]   Ernst, T. and\
    \ H. Lach, \"Network Mobility Support Terminology\",\n         RFC 4885, July\
    \ 2007.\n"
- title: 6.2.  Informative Reference
  contents:
  - "6.2.  Informative Reference\n   [4]   Johnson, D., Perkins, C., and J. Arkko,\
    \ \"Mobility Support in\n         IPv6\", RFC 3775, June 2004.\n   [5]   Ernst,\
    \ T., \"Network Mobility Support Goals and Requirements\",\n         RFC 4886,\
    \ July 2007.\n   [6]   Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson,\n\
    \         \"RTP: A Transport Protocol for Real-Time Applications\",\n        \
    \ RFC 1889, January 1996.\n   [7]   Deering, S. and B. Zill, \"Redundant Address\
    \ Deletion when\n         Encapsulating IPv6 in IPv6\", Work in Progress, November\
    \ 2001.\n   [8]   Petrescu, A., Olivereau, A., Janneteau, C., and H-Y. Lach,\n\
    \         \"Threats for Basic Network Mobility Support (NEMO threats)\",\n   \
    \      Work in Progress, January 2004.\n   [9]   Jung, S., Zhao, F., Wu, S., Kim,\
    \ H-G., and S-W. Sohn, \"Threat\n         Analysis on NEMO Basic Operations\"\
    , Work in Progress,\n         July 2004.\n   [10]  Thubert, P., Wakikawa, R.,\
    \ and V. Devarapalli, \"Network\n         Mobility Home Network Models\", RFC\
    \ RFC4887, July 2007.\n   [11]  Draves, R., \"Default Address Selection for Internet\
    \ Protocol\n         version 6 (IPv6)\", RFC 3484, February 2003.\n"
- title: Appendix A.  Various Configurations Involving Nested Mobile Networks
  contents:
  - "Appendix A.  Various Configurations Involving Nested Mobile Networks\n   In the\
    \ following sections, we try to describe different communication\n   models that\
    \ involve a nested mobile network and to clarify the issues\n   for each case.\
    \  We illustrate the path followed by packets if we\n   assume nodes only use\
    \ Mobile IPv6 and NEMO Basic Support mechanisms.\n   Different cases are considered\
    \ where a Correspondent Node is located\n   in the fixed infrastructure, in a\
    \ distinct nested mobile network as\n   the Mobile Network Node, or in the same\
    \ nested mobile network as the\n   Mobile Network Node.  Additionally, cases where\
    \ Correspondent Nodes\n   and Mobile Network Nodes are either standard IPv6 nodes\
    \ or Mobile\n   IPv6 nodes are considered.  As defined in [3], standard IPv6 nodes\n\
    \   are nodes with no mobility functions whatsoever, i.e., they are not\n   Mobile\
    \ IPv6 or NEMO enabled.  This means that they cannot move around\n   keeping open\
    \ connections and that they cannot process Binding Updates\n   sent by peers.\n"
- title: A.1.  CN Located in the Fixed Infrastructure
  contents:
  - "A.1.  CN Located in the Fixed Infrastructure\n   The most typical configuration\
    \ is the case where a Mobile Network\n   Node communicates with a Correspondent\
    \ Node attached in the fixed\n   infrastructure.  Figure 3 below shows an example\
    \ of such topology.\n                    +--------+  +--------+  +--------+\n\
    \                    | MR1_HA |  | MR2_HA |  | MR3_HA |\n                    +---+----+\
    \  +---+----+  +---+----+\n                        |           |           |\n\
    \                       +-------------------------+\n                       |\
    \        Internet         |----+ CN\n                       +-------------------------+\n\
    \                               |               |\n                          \
    \ +---+---+        +--+-----+\n                 root-MR   |  MR1  |        | VMN_HA\
    \ |\n                           +---+---+        +--------+\n                \
    \               |\n                           +---+---+\n                  sub-MR\
    \   |  MR2  |\n                           +---+---+\n                        \
    \       |\n                           +---+---+\n                  sub-MR   |\
    \  MR3  |\n                           +---+---+\n                            \
    \   |\n                           ----+----\n                              MNN\n\
    \                Figure 3: CN Located at the Infrastructure\n"
- title: 'A.1.1.  Case A: LFN and Standard IPv6 CN'
  contents:
  - "A.1.1.  Case A: LFN and Standard IPv6 CN\n   The simplest case is where both\
    \ MNN and CN are fixed nodes with no\n   mobility functions.  That is, MNN is\
    \ a Local Fixed Node, and CN is a\n   standard IPv6 node.  Packets are encapsulated\
    \ between each Mobile\n   Router and its respective Home Agent (HA).  As shown\
    \ in Figure 4, in\n   such a case, the path between the two nodes would go through:\n\
    \        1       2       3       4          3          2          1\n   MNN ---\
    \ MR3 --- MR2 --- MR1 --- MR1_HA --- MR2_HA --- MR3_HA --- CN\n   LFN        \
    \                                                 IPv6 Node\n             The\
    \ digits represent the number of IPv6 headers.\n               Figure 4: MNN and\
    \ CN Are Standard IPv6 Nodes\n"
- title: 'A.1.2.  Case B: VMN and MIPv6 CN'
  contents:
  - "A.1.2.  Case B: VMN and MIPv6 CN\n   In this second case, both end nodes are\
    \ Mobile IPv6-enabled mobile\n   nodes, that is, MNN is a Visiting Mobile Node.\
    \  Mobile IPv6 Route\n   Optimization may thus be initiated between the two and\
    \ packets would\n   not go through the Home Agent of the Visiting Mobile Node\
    \ or the Home\n   Agent of the Correspondent Node (not shown in the figure). \
    \ However,\n   packets will still be tunneled between each Mobile Router and its\n\
    \   respective Home Agent, in both directions.  As shown in Figure 5, the\n  \
    \ path between MNN and CN would go through:\n        1       2       3       4\
    \          3          2          1\n   MNN --- MR3 --- MR2 --- MR1 --- MR1_HA\
    \ --- MR2_HA --- MR3_HA --- CN\n   VMN                                       \
    \                      MIPv6\n                Figure 5: MNN and CN Are MIPv6 Mobile\
    \ Nodes\n"
- title: 'A.1.3.  Case C: VMN and Standard IPv6 CN'
  contents:
  - "A.1.3.  Case C: VMN and Standard IPv6 CN\n   When the communication involves\
    \ a Mobile IPv6 node either as a\n   Visiting Mobile Node or as a Correspondent\
    \ Node, Mobile IPv6 Route\n   Optimization cannot be performed because the standard\
    \ IPv6\n   Correspondent Node cannot process Mobile IPv6 signaling.  Therefore,\n\
    \   MNN would establish a bi-directional tunnel with its HA, which causes\n  \
    \ the flow to go out the nested NEMO.  Packets between MNN and CN would\n   thus\
    \ go through MNN's own Home Agent (VMN_HA).  The path would\n   therefore be as\
    \ shown in Figure 6:\n               2       3       4       5          4\n  \
    \        MNN --- MR3 --- MR2 --- MR1 --- MR1_HA --- MR2_HA\n          VMN    \
    \                                       |\n                                  \
    \                      | 3\n                                       1         \
    \ 2     |\n                                   CN --- VMN_HA --- MR3_HA\n     \
    \                           IPv6 Node\n   Figure 6: MNN is an MIPv6 Mobile Node\
    \ and CN is a Standard IPv6 Node\n   Providing Route Optimization involving a\
    \ Mobile IPv6 node may require\n   optimization among the Mobile Routers and the\
    \ Mobile IPv6 node.\n"
- title: A.2.  CN Located in Distinct Nested NEMOs
  contents:
  - "A.2.  CN Located in Distinct Nested NEMOs\n   The Correspondent Node may be located\
    \ in another nested mobile\n   network, different from the one MNN is attached\
    \ to, as shown in\n   Figure 7.  We define such configuration as \"distinct nested\
    \ mobile\n   networks\".\n              +--------+  +--------+  +--------+  +--------+\n\
    \              | MR2_HA |  | MR3_HA |  | MR4_HA |  | MR5_HA |\n              +------+-+\
    \  +---+----+  +---+----+  +-+------+\n                      \\       |      \
    \     |        /\n         +--------+    +-------------------------+    +--------+\n\
    \         | MR1_HA |----|        Internet         |----| VMN_HA |\n         +--------+\
    \    +-------------------------+    +--------+\n                          |  \
    \                 |\n                      +---+---+           +---+---+\n   \
    \         root-MR   |  MR1  |           |  MR4  |\n                      +---+---+\
    \           +---+---+\n                          |                   |\n     \
    \                 +---+---+           +---+---+\n             sub-MR   |  MR2\
    \  |           |  MR5  |\n                      +---+---+           +---+---+\n\
    \                          |                   |\n                      +---+---+\
    \           ----+----\n             sub-MR   |  MR3  |              CN\n     \
    \                 +---+---+\n                          |\n                   \
    \   ----+----\n                         MNN\n           Figure 7: MNN and CN Located\
    \ in Distinct Nested NEMOs\n"
- title: 'A.2.1.  Case D: LFN and Standard IPv6 CN'
  contents:
  - "A.2.1.  Case D: LFN and Standard IPv6 CN\n   Similar to Case A, we start off\
    \ with the case where both end nodes do\n   not have any mobility functions. \
    \ Packets are encapsulated at every\n   Mobile Router on the way out of the nested\
    \ mobile network,\n   decapsulated by the Home Agents, and then encapsulated again\
    \ on their\n   way down the nested mobile network.\n            1       2    \
    \   3       4          3          2\n       MNN --- MR3 --- MR2 --- MR1 --- MR1_HA\
    \ --- MR2_HA --- MR3_HA\n       LFN                                          \
    \            |\n                                                             \
    \   | 1\n                               1       2       3          2     |\n \
    \                          CN --- MR5 --- MR4 --- MR4_HA --- MR5_HA\n        \
    \                IPv6 Node\n               Figure 8: MNN and CN Are Standard IPv6\
    \ Nodes\n"
- title: 'A.2.2.  Case E: VMN and MIPv6 CN'
  contents:
  - "A.2.2.  Case E: VMN and MIPv6 CN\n   Similar to Case B, when both end nodes are\
    \ Mobile IPv6 nodes, the two\n   nodes may initiate Mobile IPv6 Route Optimization.\
    \  Again, packets\n   will not go through the Home Agent of the MNN or the Home\
    \ Agent of\n   the Mobile IPv6 Correspondent Node (not shown in the figure).\n\
    \   However, packets will still be tunneled for each Mobile Router to its\n  \
    \ Home Agent and vice versa.  Therefore, the path between MNN and CN\n   would\
    \ go through:\n            1       2       3       4          3          2\n \
    \      MNN --- MR3 --- MR2 --- MR1 --- MR1_HA --- MR2_HA --- MR3_HA\n       VMN\
    \                                                      |\n                   \
    \                                             | 1\n                          \
    \     1       2       3          2     |\n                           CN --- MR5\
    \ --- MR4 --- MR4_HA --- MR5_HA\n                       MIPv6 Node\n         \
    \       Figure 9: MNN and CN Are MIPv6 Mobile Nodes\n"
- title: 'A.2.3.  Case F: VMN and Standard IPv6 CN'
  contents:
  - "A.2.3.  Case F: VMN and Standard IPv6 CN\n   Similar to Case C, when the communication\
    \ involves a Mobile IPv6 node\n   either as a Visiting Mobile Node or as a Correspondent\
    \ Node, MIPv6\n   Route Optimization cannot be performed because the standard\
    \ IPv6\n   Correspondent Node cannot process Mobile IPv6 signaling.  MNN would\n\
    \   therefore establish a bi-directional tunnel with its Home Agent.\n   Packets\
    \ between MNN and CN would thus go through MNN's own Home Agent\n   as shown in\
    \ Figure 10:\n            2       3       4       5          4          3\n  \
    \     MNN --- MR3 --- MR2 --- MR1 --- MR1_HA --- MR2_HA --- MR3_HA\n       VMN\
    \                                                      |\n                   \
    \                                             | 2\n                   1      \
    \ 2       3           2          1     |\n               CN --- MR5 --- MR4 ---\
    \ MR4_HA  --- MR5_HA --- VMN_HA\n            IPv6 Node\n   Figure 10: MNN is an\
    \ MIPv6 Mobile Node and CN is a Standard IPv6 Node\n"
- title: A.3.  MNN and CN Located in the Same Nested NEMO
  contents:
  - "A.3.  MNN and CN Located in the Same Nested NEMO\n   Figure 11 below shows the\
    \ case where the two communicating nodes are\n   connected behind different Mobile\
    \ Routers that are connected in the\n   same nested mobile network, and thus behind\
    \ the same root Mobile\n   Router.  Route Optimization can avoid packets being\
    \ tunneled outside\n   the nested mobile network.\n              +--------+  +--------+\
    \  +--------+  +--------+\n              | MR2_HA |  | MR3_HA |  | MR4_HA |  |\
    \ MR5_HA |\n              +------+-+  +---+----+  +---+----+  +-+------+\n   \
    \                   \\       |           |        /\n         +--------+    +-------------------------+\
    \    +--------+\n         | MR1_HA |----|        Internet         |----| VMN_HA\
    \ |\n         +--------+    +-------------------------+    +--------+\n      \
    \                              |\n                                +---+---+\n\
    \                      root-MR   |  MR1  |\n                                +-------+\n\
    \                                 |     |\n                          +-------+\
    \   +-------+\n                 sub-MR   |  MR2  |   |  MR4  |\n             \
    \             +---+---+   +---+---+\n                              |         \
    \  |\n                          +---+---+   +---+---+\n                 sub-MR\
    \   |  MR3  |   |  MR5  |\n                          +---+---+   +---+---+\n \
    \                             |           |\n                          ----+----\
    \   ----+----\n                             MNN          CN\n           Figure\
    \ 11: MNN and CN Located in the Same Nested NEMO\n"
- title: 'A.3.1.  Case G: LFN and Standard IPv6 CN'
  contents:
  - "A.3.1.  Case G: LFN and Standard IPv6 CN\n   Again, we start off with the case\
    \ where both end nodes do not have\n   any mobility functions.  Packets are encapsulated\
    \ at every Mobile\n   Router on the way out of the nested mobile network via the\
    \ root\n   Mobile Router, decapsulated and encapsulated by the Home Agents, and\n\
    \   then make their way back to the nested mobile network through the\n   same\
    \ root Mobile Router.  Therefore, the path between MNN and CN\n   would go through:\n\
    \            1       2       3       4          3          2\n       MNN --- MR3\
    \ --- MR2 --- MR1 --- MR1_HA --- MR2_HA --- MR3_HA\n       LFN               \
    \                                       |\n                                  \
    \                              | 1\n            1       2       3       4    \
    \      3          2     |\n        CN --- MR5 --- MR4 --- MR1 --- MR1_HA --- MR4_HA\
    \ --- MR5_HA\n     IPv6 Node\n               Figure 12: MNN and CN Are Standard\
    \ IPv6 nodes\n"
- title: 'A.3.2.  Case H: VMN and MIPv6 CN'
  contents:
  - "A.3.2.  Case H: VMN and MIPv6 CN\n   Similar to Case B and Case E, when both\
    \ end nodes are Mobile IPv6\n   nodes, the two nodes may initiate Mobile IPv6\
    \ Route Optimization,\n   which will avoid the packets going through the Home\
    \ Agent of MNN or\n   the Home Agent of the Mobile IPv6 CN (not shown in the figure).\n\
    \   However, packets will still be tunneled between each Mobile Router\n   and\
    \ its respective Home Agent in both directions.  Therefore, the\n   path would\
    \ be the same as with Case G and go through:\n             1       2       3 \
    \      4          3          2\n        MNN --- MR3 --- MR2 --- MR1 --- MR1_HA\
    \ --- MR2_HA --- MR3_HA\n        LFN                                         \
    \             |\n                                                            \
    \     | 1\n             1       2       3       4          3          2     |\n\
    \         CN --- MR5 --- MR4 --- MR1 --- MR1_HA --- MR4_HA --- MR5_HA\n     MIPv6\
    \ Node\n               Figure 13: MNN and CN Are MIPv6 Mobile Nodes\n"
- title: 'A.3.3.  Case I: VMN and Standard IPv6 CN'
  contents:
  - "A.3.3.  Case I: VMN and Standard IPv6 CN\n   As for Case C and Case F, when the\
    \ communication involves a Mobile\n   IPv6 node either as a Visiting Mobile Node\
    \ or as a Correspondent\n   Node, Mobile IPv6 Route Optimization cannot be performed.\
    \  Therefore,\n   MNN will establish a bi-directional tunnel with its Home Agent.\n\
    \   Packets between MNN and CN would thus go through MNN's own Home\n   Agent.\
    \  The path would therefore be as shown in Figure 14:\n            2       3 \
    \      4       5          4          3\n       MNN --- MR3 --- MR2 --- MR1 ---\
    \ MR1_HA --- MR2_HA --- MR3_HA\n       VMN                                   \
    \                   |\n                                                      \
    \          | 2\n                                                             \
    \   |\n                                                             VMN_HA\n \
    \                                                               |\n          \
    \                                                      | 1\n             1   \
    \    2       3       4          3          2    |\n         CN --- MR5 --- MR4\
    \ --- MR1 --- MR1_HA --- MR4_HA --- MR5_HA\n      IPv6 Node\n   Figure 14: MNN\
    \ is an MIPv6 Mobile Node and CN is a Standard IPv6 Node\n"
- title: A.4.  CN Located Behind the Same Nested MR
  contents:
  - "A.4.  CN Located Behind the Same Nested MR\n   Figure 15 below shows the case\
    \ where the two communicating nodes are\n   connected behind the same nested Mobile\
    \ Router.  The optimization is\n   required when the communication involves MIPv6-enabled\
    \ nodes.\n              +--------+  +--------+  +--------+  +--------+\n     \
    \         | MR2_HA |  | MR3_HA |  | MR4_HA |  | MR5_HA |\n              +------+-+\
    \  +---+----+  +---+----+  +-+------+\n                      \\       |      \
    \     |        /\n         +--------+    +-------------------------+    +--------+\n\
    \         | MR1_HA |----|        Internet         |----| VMN_HA |\n         +--------+\
    \    +-------------------------+    +--------+\n                             \
    \       |\n                                +---+---+\n                      root-MR\
    \   |  MR1  |\n                                +---+---+\n                   \
    \                 |\n                                +-------+\n             \
    \          sub-MR   |  MR2  |\n                                +---+---+\n   \
    \                                 |\n                                +---+---+\n\
    \                       sub-MR   |  MR3  |\n                                +---+---+\n\
    \                                    |\n                                -+--+--+-\n\
    \                                MNN    CN\n          Figure 15: MNN and CN Located\
    \ Behind the Same Nested MR\n"
- title: 'A.4.1.  Case J: LFN and Standard IPv6 CN'
  contents:
  - "A.4.1.  Case J: LFN and Standard IPv6 CN\n   If both end nodes are Local Fixed\
    \ Nodes, no special function is\n   necessary for optimization of their communications.\
    \  The path between\n   the two nodes would go through:\n                    \
    \              1\n                             MNN --- CN\n                  \
    \           LFN   IPv6 Node\n               Figure 16: MNN and CN Are Standard\
    \ IPv6 Nodes\n"
- title: 'A.4.2.  Case K: VMN and MIPv6 CN'
  contents:
  - "A.4.2.  Case K: VMN and MIPv6 CN\n   Similar to Case H, when both end nodes are\
    \ Mobile IPv6 nodes, the two\n   nodes may initiate Mobile IPv6 Route Optimization.\
    \  Although few\n   packets would go out the nested mobile network for the Return\n\
    \   Routability initialization, however, unlike Case B and Case E,\n   packets\
    \ will not get tunneled outside the nested mobile network.\n   Therefore, packets\
    \ between MNN and CN would eventually go through:\n                          \
    \        1\n                             MNN --- CN\n                        \
    \     VMN   MIPv6 Node\n               Figure 17: MNN and CN are MIPv6 Mobile\
    \ Nodes\n   If the root Mobile Router is disconnected while the nodes exchange\n\
    \   keys for the Return Routability procedure, they may not communicate\n   even\
    \ though they are connected on the same link.\n"
- title: 'A.4.3.  Case L: VMN and Standard IPv6 CN'
  contents:
  - "A.4.3.  Case L: VMN and Standard IPv6 CN\n   When the communication involves\
    \ a Mobile IPv6 node either as a\n   Visiting Mobile Network Node or as a Correspondent\
    \ Node, Mobile IPv6\n   Route Optimization cannot be performed.  Therefore, even\
    \ though the\n   two nodes are on the same link, MNN will establish a bi-directional\n\
    \   tunnel with its Home Agent, which causes the flow to go out the\n   nested\
    \ mobile network.  The path between MNN and CN would require\n   another Home\
    \ Agent (VMN_HA) to go through for this Mobile IPv6 node:\n            2     \
    \  3       4       5          4          3\n       MNN --- MR3 --- MR2 --- MR1\
    \ --- MR1_HA --- MR2_HA --- MR3_HA\n       VMN                               \
    \                       |\n                                                  \
    \              | 2\n                                                         \
    \       |\n                                                             VMN_HA\n\
    \                                                                |\n         \
    \                                                       | 1\n             1  \
    \     2       3       4          3          2    |\n         CN --- MR5 --- MR4\
    \ --- MR1 --- MR1_HA --- MR2_HA --- MR3_HA\n      IPv6 Node\n   Figure 18: MNN\
    \ is an MIPv6 Mobile Node and CN is a Standard IPv6 Node\n   However, MNN may\
    \ also decide to use its Care-of Address (CoA) as the\n   source address of the\
    \ packets, thus avoiding the tunneling with the\n   MNN's Home Agent.  This is\
    \ particularly useful for a short-term\n   communications that may easily be retried\
    \ if it fails.  Default\n   Address Selection [11] provides some mechanisms for\
    \ controlling the\n   choice of the source address.\n"
- title: Appendix B.  Example of How a Stalemate Situation Can Occur
  contents:
  - "Appendix B.  Example of How a Stalemate Situation Can Occur\n   Section 2.7 describes\
    \ the occurrence of a stalemate situation where a\n   Home Agent of a Mobile Router\
    \ is nested behind the Mobile Router.\n   Here, we illustrate a simple example\
    \ where such a situation can\n   occur.\n   Consider a mobility configuration\
    \ depicted in Figure 19 below.  MR1\n   is served by HA1/BR and MR2 is served\
    \ by HA2.  The 'BR' designation\n   indicates that HA1 is a border router.  Both\
    \ MR1 and MR2 are at home\n   in the initial step.  HA2 is placed inside the first\
    \ mobile network,\n   thus representing a \"mobile\" Home Agent.\n           \
    \                                          /-----CN\n                        \
    \                 +----------+\n        home link 1         +--------+   |   \
    \       |\n      ----+-----------------| HA1/BR |---| Internet |\n          |\
    \                 +--------+   |          |\n          |                     \
    \         +----------+\n       +--+--+  +-----+\n       | MR1 |  | HA2 |\n   \
    \    +--+--+  +--+--+\n          |        |\n         -+--------+-- mobile net\
    \ 1 / home link 2\n          |\n       +--+--+  +--+--+\n       | MR2 |  | LFN\
    \ |\n       +--+--+  +--+--+\n           |        |\n          -+--------+- mobile\
    \ net 2\n                       Figure 19: Initial Deployment\n   In Figure 19\
    \ above, communications between CN and LFN follow a direct\n   path as long as\
    \ both MR1 and MR2 are positioned at home.  No\n   encapsulation intervenes.\n\
    \   In the next step, consider that the MR2's mobile network leaves home\n   and\
    \ visits a foreign network, under Access Router (AR) like in\n   Figure 20 below.\n\
    \                                               /-----CN\n                   \
    \                +----------+\n        home link 1   +--------+   |          |\n\
    \        --+-----------| HA1/BR |---| Internet |\n          |           +--------+\
    \   |          |\n       +--+--+  +-----+            +----------+\n       | MR1\
    \ |  | HA2 |                        \\\n       +--+--+  +--+--+              \
    \          +-----+\n          |        |                           | AR  |\n \
    \        -+--------+- mobile net 1             +--+--+\n                     \
    \ home link 2                 |\n                                            \
    \   +--+--+  +-----+\n                                               | MR2 | \
    \ | LFN |\n                                               +--+--+  +--+--+\n \
    \                                                 |        |\n               \
    \                     mobile net 2 -+--------+-\n                  Figure 20:\
    \ Mobile Network 2 Leaves Home\n   Once MR2 acquires a Care-of Address under AR,\
    \ the tunnel setup\n   procedure occurs between MR2 and HA2.  MR2 sends a Binding\
    \ Update to\n   HA2 and HA2 replies with a Binding Acknowledgement to MR2.  The\
    \ bi-\n   directional tunnel has MR2 and HA2 as tunnel endpoints.  After the\n\
    \   tunnel MR2HA2 has been set up, the path taken by a packet from CN\n   towards\
    \ LFN can be summarized as:\n       CN->BR->MR1->HA2=>MR1=>BR=>AR=>MR2->LFN.\n\
    \   Non-encapsulated packets are marked \"->\" while encapsulated packets\n  \
    \ are marked \"=>\".\n   Consider next the attachment of the first mobile network\
    \ under the\n   second mobile network, like in Figure 21 below.\n   After this\
    \ movement, MR1 acquires a Care-of Address valid in the\n   second mobile network.\
    \  Subsequently, it sends a Binding Update (BU)\n   message addressed to HA1.\
    \  This Binding Update is encapsulated by MR2\n   and sent towards HA2, which\
    \ is expected to be placed in mobile net 1\n   and expected to be at home.  Once\
    \ HA1/BR receives this encapsulated\n   BU, it tries to deliver to MR1.  Since\
    \ MR1 is not at home, and a\n   tunnel has not yet been set up between MR1 and\
    \ HA1, HA1 is not able\n   to route this packet and drops it.  Thus, the tunnel\
    \ establishment\n   procedure between MR1 and HA1 is not possible, because the\
    \ tunnel\n   between MR2 and HA2 had been previously torn down (when the mobile\n\
    \   net 1 moved from home).  The communications between CN and LFN stops,\n  \
    \ even though both mobile networks are connected to the Internet.\n          \
    \                            /-----CN\n                          +----------+\n\
    \             +--------+   |          |\n             | HA1/BR |---| Internet\
    \ |\n             +--------+   |          |\n                          +----------+\n\
    \                                      \\\n                                  \
    \    +-----+\n                                      | AR  |\n                \
    \                      +--+--+\n                                         |\n \
    \                                     +--+--+  +-----+\n                     \
    \                 | MR2 |  | LFN |\n                                      +--+--+\
    \  +--+--+\n                                         |        |\n            \
    \               mobile net 2 -+--------+-\n                                  \
    \       |\n                                      +--+--+  +-----+\n          \
    \                            | MR1 |  | HA2 |\n                              \
    \        +--+--+  +--+--+\n                                         |        |\n\
    \                           mobile net 1 -+--------+-\n                   Figure\
    \ 21: Stalemate Situation Occurs\n   If both tunnels between MR1 and HA1, and\
    \ between MR2 and HA2, were up\n   simultaneously, they would have \"crossed over\"\
    \ each other.  If the\n   tunnels MR1-HA1 and MR2-HA2 were drawn in Figure 21,\
    \ it could be\n   noticed that the path of the tunnel MR1-HA1 includes only one\n\
    \   endpoint of the tunnel MR2-HA2 (the MR2 endpoint).  Two MR-HA tunnels\n  \
    \ are crossing over each other if the IP path between two endpoints of\n   one\
    \ tunnel includes one and only one endpoint of the other tunnel\n   (assuming\
    \ that both tunnels are up).  When both endpoints of one\n   tunnel are included\
    \ in the path of the other tunnel, then tunnels are\n   simply encapsulating each\
    \ other.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Chan-Wah Ng\n   Panasonic Singapore Laboratories Pte Ltd\n\
    \   Blk 1022 Tai Seng Ave #06-3530\n   Tai Seng Industrial Estate, Singapore \
    \ 534415\n   SG\n   Phone: +65 65505420\n   EMail: chanwah.ng@sg.panasonic.com\n\
    \   Pascal Thubert\n   Cisco Systems\n   Village d'Entreprises Green Side\n  \
    \ 400, Avenue de Roumanille\n   Batiment T3, Biot - Sophia Antipolis  06410\n\
    \   FRANCE\n   EMail: pthubert@cisco.com\n   Masafumi Watari\n   KDDI R&D Laboratories\
    \ Inc.\n   2-1-15 Ohara\n   Fujimino, Saitama  356-8502\n   JAPAN\n   EMail: watari@kddilabs.jp\n\
    \   Fan Zhao\n   UC Davis\n   One Shields Avenue\n   Davis, CA  95616\n   US\n\
    \   Phone: +1 530 752 3128\n   EMail: fanzhao@ucdavis.edu\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2007).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
