- title: __initial_text__
  contents:
  - '                   Flow-Binding Support for Mobile IP

    '
- title: Abstract
  contents:
  - "Abstract\n   This specification defines extensions to the Mobile IP protocol\
    \ for\n   allowing a mobile node with multiple interfaces to register a care-of\n\
    \   address for each of its network interfaces and to simultaneously\n   establish\
    \ multiple IP tunnels with its home agent.  This essentially\n   allows the mobile\
    \ node to utilize all the available network\n   interfaces and build a higher\
    \ aggregated logical pipe with its home\n   agent for its home address traffic.\
    \  Furthermore, these extensions\n   also allow the mobile node and the home agent\
    \ to negotiate IP traffic\n   flow policies for binding individual flows with\
    \ the registered care-\n   of addresses.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for examination, experimental implementation, and\n   evaluation.\n\
    \   This document defines an Experimental Protocol for the Internet\n   community.\
    \  This document is a product of the Internet Engineering\n   Task Force (IETF).\
    \  It represents the consensus of the IETF\n   community.  It has received public\
    \ review and has been approved for\n   publication by the Internet Engineering\
    \ Steering Group (IESG).  Not\n   all documents approved by the IESG are a candidate\
    \ for any level of\n   Internet Standard; see Section 2 of RFC 5741.\n   Information\
    \ about the current status of this document, any errata,\n   and how to provide\
    \ feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7629.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2015 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .\
    \ . . . . .   3\n   2.  Conventions and Terminology . . . . . . . . . . . . .\
    \ . . . .   3\n     2.1.  Conventions . . . . . . . . . . . . . . . . . . . .\
    \ . . .   3\n     2.2.  Terminology . . . . . . . . . . . . . . . . . . . . .\
    \ . .   3\n   3.  Overview  . . . . . . . . . . . . . . . . . . . . . . . . .\
    \ .   4\n     3.1.  Example Call Flow . . . . . . . . . . . . . . . . . . . .\
    \   6\n   4.  Message Extensions  . . . . . . . . . . . . . . . . . . . . .  \
    \ 7\n     4.1.  Multipath Extension . . . . . . . . . . . . . . . . . . .   7\n\
    \     4.2.  Flow-Binding Extension  . . . . . . . . . . . . . . . . .   9\n  \
    \   4.3.  New Error Codes for Registration Reply  . . . . . . . . .  12\n   5.\
    \  Protocol Operation  . . . . . . . . . . . . . . . . . . . . .  12\n     5.1.\
    \  Mobile Node Considerations  . . . . . . . . . . . . . . .  12\n     5.2.  Home\
    \ Agent Considerations . . . . . . . . . . . . . . . .  14\n   6.  Routing Considerations\
    \  . . . . . . . . . . . . . . . . . . .  14\n   7.  IANA Considerations . . .\
    \ . . . . . . . . . . . . . . . . . .  15\n   8.  Security Considerations . .\
    \ . . . . . . . . . . . . . . . . .  16\n   9.  References  . . . . . . . . .\
    \ . . . . . . . . . . . . . . . .  17\n     9.1.  Normative References  . . .\
    \ . . . . . . . . . . . . . . .  17\n     9.2.  Informative References  . . .\
    \ . . . . . . . . . . . . . .  17\n   Acknowledgements  . . . . . . . . . . .\
    \ . . . . . . . . . . . . .  18\n   Contributors  . . . . . . . . . . . . . .\
    \ . . . . . . . . . . . .  18\n   Authors' Addresses  . . . . . . . . . . . .\
    \ . . . . . . . . . . .  19\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   With the ubiquitous availability of wireless networks based\
    \ on\n   different access technology types, mobile devices are now equipped\n\
    \   with multiple wireless interfaces and have the ability to connect to\n   the\
    \ network using any of those interfaces.  For example, most mobile\n   devices\
    \ are equipped with Wi-Fi and LTE (Long Term Evolution)\n   interfaces.  In many\
    \ deployments, it is desirable for a mobile node\n   to leverage all the available\
    \ network interfaces and have IP mobility\n   support for its IP flows.\n   The\
    \ operation defined in the Mobile IP protocol [RFC5944] allows a\n   mobile node\
    \ to continue to use its home address as it moves around\n   the Internet.  Based\
    \ on the mode of operation, there will be an IP\n   tunnel that will be established\
    \ between the home agent and the mobile\n   node or between the home agent and\
    \ the foreign agent where the mobile\n   node is attached; see [RFC5944].  In\
    \ both of these modes, there will\n   only be one interface on the mobile node\
    \ that is receiving the IP\n   traffic from the home agent.  This approach of\
    \ using a single access\n   interface for routing all mobile node's traffic is\
    \ not efficient and\n   so there is a need to extend Mobile IP to concurrently\
    \ use multiple\n   access interfaces for routing the mobile node's IP traffic.\
    \  The goal\n   is for efficient use of all the available access links to obtain\n\
    \   higher aggregated bandwidth for the tunneled traffic between the home\n  \
    \ agent and the mobile node.\n   This specification defines extensions to Mobile\
    \ IPv4 protocol for\n   allowing a mobile node with multiple interfaces to register\
    \ a care-of\n   address for each of its network interfaces and to simultaneously\n\
    \   leverage all access links for the mobile node's IP traffic.\n   Furthermore,\
    \ this specification also defines extensions to allow the\n   mobile node and\
    \ the home agent to optionally negotiate IP flow\n   policies for binding individual\
    \ IP flows with the registered care-of\n   addresses.\n"
- title: 2.  Conventions and Terminology
  contents:
  - '2.  Conventions and Terminology

    '
- title: 2.1.  Conventions
  contents:
  - "2.1.  Conventions\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"\
    SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\"\
    , and \"OPTIONAL\" in this\n   document are to be interpreted as described in\
    \ RFC 2119 [RFC2119].\n"
- title: 2.2.  Terminology
  contents:
  - "2.2.  Terminology\n   All the mobility-related terms used in this document are\
    \ to be\n   interpreted as defined in [RFC5944] and [RFC3753].  In addition, this\n\
    \   document uses the following terms.\n   Binding Identifier (BID)\n      It\
    \ is an identifier assigned to a mobile node's binding.  A\n      binding defines\
    \ an association between a mobile node's home\n      address and its registered\
    \ care-of address.  When a mobile node\n      registers multiple bindings with\
    \ its home agent, each using a\n      different care-of address, then each of\
    \ those bindings are given a\n      unique identifier.  Each of the binding identifiers\
    \ will have a\n      unique value that will be different from the identifiers\
    \ assigned\n      to the mobile node's other bindings.\n   Flow Identifier (FID)\n\
    \      It is an identifier for a given IP flow, uniquely identified by\n     \
    \ source address, destination address, protocol type, source port,\n      destination\
    \ port, Security Parameter Index, and other parameters\n      as identified in\
    \ [RFC6088].  In the context of this document, the\n      IP flows associated\
    \ with a mobile node are the IP flows using its\n      home address.  For a mobile\
    \ router, the IP flows also include the\n      IP flows using the mobile network\
    \ prefix [RFC6626].\n"
- title: 3.  Overview
  contents:
  - "3.  Overview\n   The illustration below in Figure 1 is an example scenario where\
    \ a\n   mobile node is connected to WLAN, LTE, and CDMA access networks.  The\n\
    \   mobile node is configured with a home address, HoA_1, and has\n   obtained\
    \ the following care-of addresses [RFC5944]: CoA_1, from the\n   WLAN network;\
    \ CoA_2, from the LTE network; and CoA_3, from the CDMA\n   network.\n   The mobile\
    \ node using the extensions specified in this document\n   registers all three\
    \ care-of addresses with its home agent.  The\n   mobile node also establishes\
    \ an IP tunnel with the home agent using\n   each of its IP addresses, which results\
    \ in three IP tunnels\n   (Tunnel_1, Tunnel_2, and Tunnel_3) between the mobile\
    \ node and the\n   home agent.  Each of the tunnels represents an overlay routing\
    \ path\n   between the mobile node and the home agent and can be used for\n  \
    \ forwarding the mobile node's IP traffic.\n   Furthermore, using the extensions\
    \ specified in this document, the\n   mobile node and the home agent can negotiate\
    \ an IP flow policy.  The\n   negotiated flow policy allows the mobile node and\
    \ the home agent to\n   determine the access network path for each of the mobile\
    \ node's IP\n   flows.\n   Flow_1 (SIP)\n    |\n    |Flow_2 (SSH)\n    | |\n \
    \   | |Flow_3 (HTTP)       _----_\n    | | |         CoA_1  _(      )_ Tunnel_1\n\
    \    | | |    .---=======(   Wi-Fi  )========\\ Flow_1\n    | | |    |       \
    \    (_      _)          \\\n    | | |    |             '----'             \\\n\
    \    | | | +=====+          _----_              \\  +=====+    _----_\n    | |\
    \ '-|     | CoA_2  _(      )_ Tunnel_2    \\ |     |  _(      )_ --\n    | '---|\
    \ MN  |---====(   LTE    )=========-----| HA  |-( Internet )--\n    '-----|  \
    \   |        (_      _)      Flow_3 / |     |  (_      _) --\n          +=====+\
    \          '----'              /  +=====+    '----'\n           | |          \
    \   _----_             /\n    HoA_1--' |    CoA_3  _(      )_ Tunnel_3 /\n   \
    \          .------====(   CDMA   )========/ Flow_2\n                         (_\
    \      _)\n                           '----'\n             Figure 1: Mobile Node\
    \ (MN) with Multiple Tunnels\n                          to the Home Agent (HA)\n\
    \   The table below is an example of how the individual flows are bound\n   to\
    \ different care-of addresses registered with the home agent.\n   +=========+===================+=====================================+\n\
    \   | Flow ID |   Access Network  |           Description               |\n  \
    \ |  (FID)  |    Preferences    |                                     |\n   +=========+===================+=====================================+\n\
    \   | Flow_1  | Tunnel_1 / CoA_1  | All SIP flows over Wi-Fi (Preferred)|\n  \
    \ |         | Tunnel_2 / CoA_2  | If Wi-Fi is not available, use LTE  |\n   |\
    \         |       <DROP>      | If Wi-Fi and LTE access networks are|\n   |  \
    \       |                   | not available, drop the flow        |\n   +---------+-------------------+-------------------------------------+\n\
    \   | Flow_3  | Tunnel_2 / CoA_2  | All HTTP flows over LTE (Preferred) |\n  \
    \ |         |       <DROP>      | If LTE not available, drop the flow |\n   +---------+-------------------+-------------------------------------+\n\
    \   | Flow_2  | Tunnel_3 / CoA_3  | All SSH flows over CDMA (Preferred) |\n  \
    \ |         | Tunnel_2 / CoA_2  | If CDMA not available, use LTE      |\n   |\
    \         | Tunnel_1 / CoA_1  | If LTE not available, use Wi-Fi     |\n   +---------+-------------------+-------------------------------------+\n\
    \                 Figure 2: Example of an IP Traffic Policy\n"
- title: 3.1.  Example Call Flow
  contents:
  - "3.1.  Example Call Flow\n   Figure 3 is the call flow for the example scenario\
    \ where a mobile\n   node is connected to WLAN and LTE access networks.\n    \
    \  +-------+          +-------+          +-------+          +-------+\n      |\
    \   MN  |          | WLAN  |          |  LTE  |          |  HA   |\n      |  \
    \     |          |Network|          |Network|          |       |\n      +-------+\
    \          +-------+          +-------+          +-------+\n         |       \
    \            |                  |                  |\n   * MIP RRQ is sent using\
    \ the IP address obtained from the WLAN Network\n         |<--- (1) --------->|\
    \                  |                  |\n         |                   |   RRQ\
    \ (Multipath, Flow-Binding)     |\n         |---- (2) ----------------------------------------------->|\n\
    \         |                   |   RRP            |                  |\n      \
    \   |<--- (3) ------------------------------------------------|\n         |  \
    \            MIP Tunnel through WLAN Network            |\n         |=====(4)===========*=====================================|\n\
    \   * MIP RRQ is sent using the IP address obtained from the LTE Network\n   \
    \      |<--- (5) ---------------------------->|                  |\n         |\
    \                   |  RRQ (Multipath, Flow-Binding)      |\n         |---- (6)\
    \ ----------------------------------------------->|\n         |              \
    \     |  RRP             |                  |\n         |<--- (7) ------------------------------------------------|\n\
    \         |              MIP Tunnel through LTE Access Network      |\n      \
    \   |=====(8)==============================*==================|\n         |  \
    \                                                       |\n         *        \
    \                                                 *\n   (Policy-based Routing\
    \ Rule)               (Policy-based Routing Rule)\n            Figure 3: Multipath\
    \ Negotiation - Example Call Flow\n   o  (1): The mobile node attaches to the\
    \ WLAN network and obtains the\n      IP address configuration for its WLAN interface.\n\
    \   o  (2)-(3): The mobile node sends a Registration Request (RRQ)\n      [RFC5944]\
    \ to the home agent through the WLAN network.  The message\n      includes the\
    \ Multipath (Section 4.1) and the Flow-Binding\n      (Section 4.2) Extensions.\
    \  The home agent, upon accepting the\n      request, sends a Registration Reply\
    \ (RRP) [RFC5944]  with a value\n      of (0) in the Code field of the Registration\
    \ Reply.\n   o  (4): The mobile node and the home agent establish a bidirectional\n\
    \      IP tunnel over the WLAN network.\n   o  (5): The mobile node attaches to\
    \ the LTE network and obtains the\n      IP address configuration from that network.\n\
    \   o  (6)-(7): The mobile node sends a Registration Request to the home\n   \
    \   agent through the LTE network.  The message includes the Multipath\n     \
    \ and the Flow-Binding Extensions.  The Flow-Binding Extension\n      indicates\
    \ that all HTTP flows need to be routed over the WLAN\n      network and if the\
    \ WLAN access network is not available, they need\n      be routed over other\
    \ access networks.  The negotiated policy also\n      requires all voice-related\
    \ traffic flows to be routed over the LTE\n      network.  The home agent, upon\
    \ accepting the request, sends a\n      Registration Reply with a value of (0)\
    \ in the Code field of the\n      Registration Reply.\n   o  (8): The mobile node\
    \ and the home agent establish a bidirectional\n      IP tunnel over the LTE network.\
    \  The negotiated traffic flow\n      policy is applied.  Both the home agent\
    \ and the mobile node route\n      all the voice flows over the tunnel established\
    \ through the LTE\n      access network and the HTTP flows over the WLAN network.\n"
- title: 4.  Message Extensions
  contents:
  - "4.  Message Extensions\n   This specification defines the following new extensions\
    \ to Mobile IP.\n"
- title: 4.1.  Multipath Extension
  contents:
  - "4.1.  Multipath Extension\n   This extension is used for requesting multipath\
    \ support.  It\n   indicates that the sender is requesting the home agent to register\n\
    \   the current care-of address listed in this Registration Request as\n   one\
    \ of the many care-of addresses through which the mobile node can\n   be reached.\
    \  It is also for carrying the information specific to the\n   interface to which\
    \ the care-of address that is being registered is\n   bound.\n   This extension\
    \ is a non-skippable extension and MAY be added by the\n   mobile node to the\
    \ Registration Request message.  There MUST NOT be\n   more than one instance\
    \ of this extension present in the message.\n   This extension MUST NOT be added\
    \ by the home agent to the\n   Registration Reply.\n   This extension should be\
    \ protected using the Mobile-Home\n   Authentication Extension [RFC5944].  As\
    \ specified in Sections 3.2 and\n   3.6.1.3 of [RFC5944], the mobile node MUST\
    \ place this Extension\n   before the Mobile-Home Authentication Extension in\
    \ the registration\n   messages so that this extension is integrity protected.\n\
    \   The format of this extension is as shown below.  It adheres to the\n   long\
    \ extension format described in [RFC5944].\n        0                   1    \
    \               2                   3\n        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |    Subtype    |           Length              |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |    If-ATT     |   If-Label    |   Binding ID  |B|O|  Reserved |\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n        \
    \               Figure 4: Multipath Extension\n   Type\n      Type: Multipath-Extension-Type\
    \ (154)\n   Subtype\n      This field MUST be set to a value of 1 (Multipath Extension).\n\
    \   Length\n      The length of the extension in octets, excluding Type, Subtype,\n\
    \      and Length fields.  This field MUST be set to a value of 4.\n   Interface\
    \ Access-Technology Type (If-ATT)\n      This 8-bit field identifies the Access\
    \ Technology type of the\n      interface through which the mobile node is connected.\
    \  The\n      permitted values for this are from the Access Technology Type\n\
    \      registry defined in [RFC5213].\n   Interface Label (If-Label)\n      This\
    \ 8-bit field represents the interface label represented as an\n      unsigned\
    \ integer.  The mobile node identifies the label for each\n      of the interfaces\
    \ through which it registers a CoA with the home\n      agent.  When using static\
    \ traffic flow policies on the mobile node\n      and the home agent, the label\
    \ can be used for indexing forwarding\n      policies.  For example, the operator\
    \ may have a policy that binds\n      an IP flow \"F1\" to any interface with\
    \ the label \"Blue\".  When a\n      registration through an interface matching\
    \ the label \"Blue\" gets\n      activated, the home agent and the mobile node\
    \ establish an IP\n      tunnel and the tunnel is marked with that label.  Both\
    \ the home\n      agent and the mobile node generate traffic rules for forwarding\
    \ IP\n      flow traffic \"F1\" through the mobile IP tunnel matching the label\n\
    \      \"Blue\".  The permitted values for If-Label are 1 through 255.\n   Binding\
    \ Identifier (BID)\n      This 8-bit field is used for carrying the binding identifier.\
    \  It\n      uniquely identifies a specific binding of the mobile node\n     \
    \ associated with this Registration Request.  Each binding\n      identifier is\
    \ represented as an unsigned integer.  The permitted\n      values are 1 through\
    \ 254.  The BID value of 0 and 255 are\n      reserved.\n   Bulk Re-registration\
    \ Flag (B)\n      The (B) flag, if set to a value of (1), notifies the home agent\
    \ to\n      update the binding lifetime of all the mobile node's bindings upon\n\
    \      accepting this request.  The (B) flag MUST NOT be set to a value\n    \
    \  of (1) if the value of the Registration Overwrite Flag (O) flag is\n      set\
    \ to a value of (1).\n   Registration Overwrite (O)\n      The (O) flag, if set\
    \ to a value of (1), notifies the home agent\n      that upon accepting this request\
    \ it should replace all of the\n      mobile node's existing bindings with the\
    \ new binding that will be\n      created upon accepting this request.  The (O)\
    \ flag MUST NOT be set\n      to a value of (1) if the value of the Bulk Re-registration\
    \ Flag\n      (B) is set to a value of (1).  This flag MUST be set to a value\
    \ of\n      (0) in De-Registration requests.\n   Reserved (R)\n      This 6-bit\
    \ field is unused for now.  The value MUST be initialized\n      to (0) by the\
    \ sender and MUST be ignored by the receiver.\n"
- title: 4.2.  Flow-Binding Extension
  contents:
  - "4.2.  Flow-Binding Extension\n   This extension contains information that can\
    \ be used by the mobile\n   node and the home agent for binding mobile node's\
    \ IP flows to a\n   specific multipath registration.  There can be more than one\
    \ instance\n   of this extension present in the message.\n   This extension is\
    \ a non-skippable extension and MAY be added to the\n   Registration Request by\
    \ the mobile node or by the home agent to the\n   Registration Reply.\n   This\
    \ extension should be protected by Mobile-Home Authentication\n   Extension [RFC5944].\
    \  As specified in Section 3.2 and 3.6.1.3 of\n   [RFC5944], the mobile node MUST\
    \ place this extension before the\n   Mobile-Home Authentication Extension in\
    \ the registration messages so\n   that this extension is integrity protected.\n\
    \   The format of this extension is as shown below.  It adheres to the\n   long\
    \ extension format described in [RFC5944].\n        0                   1    \
    \               2                   3\n        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \       |     Type      |    Subtype    |           Length              |\n  \
    \     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n    \
    \   |    Action     |  BID Count    |        ...   BID List   ...   ~\n      \
    \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n       |\
    \   TS Format   |             Traffic Selector                  ~\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                     Figure 5: Flow-Binding Extension\n   Type\n      Type: Multipath-Extension-Type\
    \ (154)\n   Subtype\n      This field MUST be set to a value of 2 (Flow-Binding\
    \ Extension).\n   Length\n      The length of the extension in octets, excluding\
    \ Type, Subtype,\n      and Length fields.\n   Action\n      The Action field\
    \ identifies the traffic rule that needs to be\n      enforced.  Following are\
    \ the possible values.\n   +---------+-------+-------------------------------------------------+\n\
    \   |  Action | Value | Description                                     |\n  \
    \ +---------+-------+-------------------------------------------------+\n   |\
    \  DROP   |   0   | Drop matching packets. A filter rule            |\n   |  \
    \       |       | indicating a drop action MUST include a single  |\n   |    \
    \     |       | BID byte, the value of which MAY be set to 255  |\n   |      \
    \   |       | by the sender and the value of which SHOULD be  |\n   |        \
    \ |       | ignored by the receiver.                        |\n   +---------+-------+-------------------------------------------------+\n\
    \   | FORWARD |   1   | Forward matching packets to the first BID in the|\n  \
    \ |         |       | list of BIDs the filter rule is pointing to.    |\n   |\
    \         |       | If the first BID becomes invalid (i.e., the     |\n   |  \
    \       |       | corresponding CoA is de-registered), use the    |\n   |    \
    \     |       | next BID in the list.                           |\n   +---------+-------+-------------------------------------------------+\n\
    \              Figure 6: Action Rules for the Traffic Selector\n   BID Count\n\
    \      Total number of binding identifiers that follow this field.  The\n    \
    \  permitted values for this field are 1 through 8; each binding\n      identifier\
    \ is represented as an unsigned integer in a single octet\n      field.  There\
    \ is no delimiter between two binding identifier\n      values; they are spaced\
    \ consecutively.\n   TS Format\n      An 8-bit unsigned integer indicating the\
    \ Traffic Selector (TS)\n      Format.  The value (0) is reserved and MUST NOT\
    \ be used.  When the\n      value of the TS Format field is set to (1), the format\
    \ that\n      follows is the IPv4 Binary Traffic Selector specified in\n     \
    \ Section 3.1 of [RFC6088], and when the value of the TS Format\n      field is\
    \ set to (2), the format that follows is the IPv6 Binary\n      Traffic Selector\
    \ specified in Section 3.2 of [RFC6088].  The IPv6\n      traffic selectors are\
    \ only relevant when the mobile node registers\n      IPv6 prefixes per [RFC5454].\n\
    \   Traffic Selector\n      A variable-length opaque field for including the traffic\n\
    \      specification identified by the TS Format field.  It identifies\n     \
    \ the traffic selectors for matching the IP traffic and binding them\n      to\
    \ specific binding identifiers.\n"
- title: 4.3.  New Error Codes for Registration Reply
  contents:
  - "4.3.  New Error Codes for Registration Reply\n   This document defines the following\
    \ error code values for use by the\n   home agent in the Code field of the Registration\
    \ Reply.\n   MULTIPATH_NOT_ALLOWED (Multipath Support not allowed for this mobile\n\
    \   node): 152\n   INVALID_FB_IDENTIFIER (Invalid Flow-Binding Identifier): 153\n"
- title: 5.  Protocol Operation
  contents:
  - '5.  Protocol Operation

    '
- title: 5.1.  Mobile Node Considerations
  contents:
  - "5.1.  Mobile Node Considerations\n   o  The mobile node should register a care-of\
    \ address for each of the\n      connected interfaces that it wishes to register\
    \ with the home\n      agent.  It can do so by sending a Registration Request\
    \ to the home\n      agent through each of those interfaces.\n   o  Each of the\
    \ Registration Requests that is sent includes the care-\n      of address of the\
    \ respective interface.  The Registration Request\n      has to be routed through\
    \ the specific interface for which the\n      registration is sought for.  Some\
    \ of these interfaces may be\n      connected to networks with a configured foreign\
    \ agent on the link,\n      and in such foreign-agent-based registrations, the\
    \ care-of address\n      will be the IP address of the foreign agent.\n   o  A\
    \ Multipath Extension (Section 4.1) reflecting the interface\n      parameters\
    \ is present in each of the Registration Requests.  This\n      serves as an indication\
    \ to the home agent that the Registration\n      Request is a Multipath registration\
    \ and the home agent will have\n      to register this care-of address as one\
    \ of the many care-of\n      addresses through which the mobile node's home address\
    \ is\n      reachable.\n   o  If the mobile node is configured to exchange IP\
    \ flow policy to the\n      home agent, then the Flow-Binding Extension (Section\
    \ 4.2)\n      reflecting the flow policy can be included in the message.\n   \
    \   Otherwise, the Flow-Binding Extension will not be included.\n   o  The mobile\
    \ node, upon receiving a Registration Reply with the Code\n      value set to\
    \ MULTIPATH_NOT_ALLOWED, MAY choose to register without\n      the Multipath Extension\
    \ specified in this document.  This implies\n      the home agent has not enabled\
    \ multipath support for this mobile\n      node and hence multipath support MUST\
    \ be disabled on the mobile\n      node.\n   o  The mobile node, upon receiving\
    \ a Registration Reply with the Code\n      value set to INVALID_FB_IDENTIFIER,\
    \ MUST re-register that specific\n      binding with the home agent.\n   o  The\
    \ mobile node at any time can extend the lifetime of a specific\n      care-of\
    \ address registration by sending a Registration Request to\n      the home agent\
    \ with a new lifetime value.  The message MUST be\n      sent as the initial multipath\
    \ registration and must be routed\n      through that specific interface.  The\
    \ message MUST include the\n      Multipath Extension (Section 4.1) with the value\
    \ in the Binding ID\n      field set to the binding identifier assigned to that\
    \ binding.\n      Alternatively, the home agent can send a single Registration\n\
    \      Request with the Bulk Re-registration Flag (B) set to a value of\n    \
    \  (1).  This serves as a request to the home agent to update the\n      registration\
    \ lifetime of all the mobile node's registrations.\n   o  The mobile node can,\
    \ at any time, de-register a specific care-of\n      address by sending a Registration\
    \ Request to the home agent with a\n      lifetime value of (0).  The message\
    \ must include the Multipath\n      Extension (Section 4.1) with the value in\
    \ the Binding ID field set\n      to the binding identifier assigned to that binding.\n\
    \      Alternatively, the home agent can send a single Registration\n      Request\
    \ with the Bulk Re-registration Flag (B) set to a value of\n      (1) and a lifetime\
    \ value of (0).  This serves as a request to the\n      home agent to consider\
    \ this request as a request to de-register\n      all the mobile node's care-of\
    \ addresses.\n   o  The mobile node can, at any time, update the parameters of\
    \ a\n      specific registration by sending a Registration Request to the\n  \
    \    home agent.  This includes a change of care-of address associated\n     \
    \ with a previously registered interface.  The message must be sent\n      as\
    \ the initial multipath registration and must be routed through\n      that specific\
    \ interface.  The message must include the Multipath\n      Extension (Section\
    \ 4.1) with the value in the Binding ID field set\n      to the binding identifier\
    \ assigned to that binding, and the\n      Overwrite Flag (O) flag MUST be set\
    \ to a value of (1).\n   o  The mobile node, upon receiving a Registration Reply\
    \ with the Code\n      value set to 0 (registration accepted), will establish\
    \ a Mobile IP\n      tunnel to the home agent using that care-of address.  When\
    \ using a\n      foreign agent care-of address, the tunnel is between the home\n\
    \      agent and the foreign agent.  The tunnel encapsulation type and\n     \
    \ any other parameters are based on the registration for that path.\n      If\
    \ there is also an exchange of flow policy between the mobile\n      node and\
    \ the home agent, with the use of Flow-Binding Extensions,\n      then the mobile\
    \ node must set up the forwarding plane that matches\n      the flow policy.\n"
- title: 5.2.  Home Agent Considerations
  contents:
  - "5.2.  Home Agent Considerations\n   The home agent, upon receiving a Registration\
    \ Request from a mobile\n   node with a Multipath Extension, should check if the\
    \ mobile node is\n   authorized for multipath support.  If multipath support is\
    \ not\n   enabled, the home agent MUST reject the request with a Registration\n\
    \   Reply and with the Code set to MULTIPATH_NOT_ALLOWED.\n   If the received\
    \ Registration Request includes a Multipath Extension\n   and additionally has\
    \ the Bulk Re-registration (B) flag set to a value\n   of (1), then the home agent\
    \ MUST extend the lifetime of all the\n   bindings associated with that mobile\
    \ node.\n   The home agent, upon receipt of a Registration Request with the Flow-\n\
    \   Binding Extension, must process the extension and, upon accepting the\n  \
    \ flow policy, must set up the forwarding plane that matches the flow\n   policy.\
    \  If the home agent cannot identify any of the binding\n   identifiers, then\
    \ it MUST reject the request with a Registration\n   Reply and with the Code set\
    \ to INVALID_FB_IDENTIFIER.\n   If the received Registration Request includes\
    \ a Multipath Extension\n   and additionally has the Registration Overwrite (O)\
    \ flag set to a\n   value of (1), then the home agent MUST consider this as a\
    \ request to\n   replace all other mobile node's bindings with just one binding\
    \ and\n   that is the binding associated with this request.\n"
- title: 6.  Routing Considerations
  contents:
  - "6.  Routing Considerations\n   When multipath registration is enabled for a mobility\
    \ node, there\n   will be multiple Mobile IP tunnels established between a mobile\
    \ node\n   and its home agent.  These Mobile IP tunnels appear to the forwarding\n\
    \   plane of the mobile node as equal-cost, point-to-point links.\n   If there\
    \ is also an exchange of traffic flow policy between the\n   mobile node and the\
    \ home agent, with the use of Flow-Binding\n   Extensions (Section 4.2), then\
    \ the mobile node's IP traffic can be\n   routed by the mobility entities as per\
    \ the negotiated flow policy.\n   However, if multipath is enabled for a mobility\
    \ session without the\n   use of any flow policy exchange, then both the mobile\
    \ node and the\n   home agent are required to have a pre-configured static flow\
    \ policy.\n   The specific details on the semantics of this static flow policy\
    \ are\n   outside the scope of this document.\n   In the absence of any established\
    \ traffic flow policies, most IP\n   hosts support two alternative traffic load-balancing\
    \ schemes, per-\n   flow and per-packet load balancing [RFC2991].  These load-balancing\n\
    \   schemes allow the forwarding plane to evenly distribute traffic on\n   either\
    \ a per-packet or per-flow basis, across all the available\n   equal-cost links\
    \ through which a destination can be reached.  The\n   default forwarding behavior\
    \ of per-flow load balancing will ensure a\n   given flow always takes the same\
    \ path and will eliminate any packet\n   re-ordering issues, and that is critical\
    \ for delay-sensitive traffic,\n   whereas the per-destination load-balancing\
    \ scheme leverages all the\n   paths much more effectively but with the potential\
    \ issue of packet\n   re-ordering on the receiver end.  This issue will be specially\n\
    \   magnified when the access links have very different forwarding\n   characteristics.\
    \  A host can choose to enable any of these\n   approaches.  Therefore, this specification\
    \ recommends the use of per-\n   flow load balancing.\n"
- title: 7.  IANA Considerations
  contents:
  - "7.  IANA Considerations\n   Per this document, the following IANA actions have\
    \ been completed.\n   o  Action 1: This specification defines two new Mobile IP\
    \ extensions,\n      the Multipath Extension and the Flow-Binding Extension. \
    \ The\n      format of the Multipath Extension is described in Section 4.1, and\n\
    \      the format of the Flow-Binding Extension is described in\n      Section\
    \ 4.2.  Both of these extensions are non-skippable\n      extensions to the Mobile\
    \ IPv4 header in accordance to the long\n      extension format of [RFC5944].\
    \  Both of these extensions use a\n      common Type value, Multipath-Extension\
    \ (154), but are identified\n      using different Subtype values.  The Type value\
    \ 154 for these\n      extensions has been allocated from the \"Extensions to\
    \ Mobile IP\n      Registration Messages\" registry at the URL\n      <http://www.iana.org/assignments/mobileip-numbers>.\
    \  The field\n      \"Permitted for Notification Messages\" for this extension\
    \ MUST be\n      set to \"N\".\n   o  Action 2: This specification defines a new\
    \ message subtype space,\n      Multipath Extension subtype.  This field is described\
    \ in\n      Section 4.1.  The values for this subtype field are managed by\n \
    \     IANA under the \"Multipath Extension subtypes (Value 154)\"\n      registry.\
    \  This specification reserves the following Type values.\n      Approvals of\
    \ new Multipath Extension subtype values are to be made\n      through IANA Expert\
    \ Review [RFC5226].\n      +=========================================================+\n\
    \      |  0    | Reserved                                        |\n      +=========================================================+\n\
    \      |  1    | Multipath Extension                             |\n      +=========================================================+\n\
    \      |  2    | Flow-Binding Extension                          |\n      +=========================================================+\n\
    \      |       |                                                 |\n      ~ 3-254\
    \ | Unassigned                                      ~\n      |       |       \
    \                                          |\n      +=========================================================+\n\
    \      |  255  | Reserved                                        |\n      +=========================================================+\n\
    \   o  Action 3: This document defines new status code values,\n      MULTIPATH_NOT_ALLOWED\
    \ (152) and INVALID_FB_IDENTIFIER (153), for\n      use by the home agent in the\
    \ Code field of the Registration Reply,\n      as described in Section 4.3.  These\
    \ values have been assigned from\n      the \"Registration denied by the home\
    \ agent\" registry at\n      <http://www.iana.org/assignments/mobileip-numbers>.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   This specification allows a mobile node to establish\
    \ multiple Mobile\n   IP tunnels with its home agent by registering a care-of\
    \ address for\n   each of its active roaming interfaces.  This essentially allows\
    \ the\n   mobile node's IP traffic to be routed through any of the tunnel paths\n\
    \   based on a static or a dynamically negotiated flow policy.  This new\n   capability\
    \ has no impact on the protocol security.  Furthermore, this\n   specification\
    \ defines two new Mobile IP extensions, the Multipath\n   Extension and the Flow-Binding\
    \ Extension.  These extensions are\n   specified to be included in Mobile IP control\
    \ messages, which are\n   authenticated and integrity protected as described in\
    \ [RFC5944].\n   Therefore, this specification does not weaken the security of\
    \ the\n   Mobile IP protocol and does not introduce any new security\n   vulnerabilities.\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119,\n  \
    \            DOI 10.17487/RFC2119, March 1997,\n              <http://www.rfc-editor.org/info/rfc2119>.\n\
    \   [RFC5213]  Gundavelli, S., Ed., Leung, K., Devarapalli, V.,\n            \
    \  Chowdhury, K., and B. Patil, \"Proxy Mobile IPv6\",\n              RFC 5213,\
    \ DOI 10.17487/RFC5213, August 2008,\n              <http://www.rfc-editor.org/info/rfc5213>.\n\
    \   [RFC5944]  Perkins, C., Ed., \"IP Mobility Support for IPv4, Revised\",\n\
    \              RFC 5944, DOI 10.17487/RFC5944, November 2010,\n              <http://www.rfc-editor.org/info/rfc5944>.\n\
    \   [RFC6088]  Tsirtsis, G., Giarreta, G., Soliman, H., and N. Montavont,\n  \
    \            \"Traffic Selectors for Flow Bindings\", RFC 6088,\n            \
    \  DOI 10.17487/RFC6088, January 2011,\n              <http://www.rfc-editor.org/info/rfc6088>.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [RFC2991]  Thaler, D. and C. Hopps, \"Multipath\
    \ Issues in Unicast and\n              Multicast Next-Hop Selection\", RFC 2991,\n\
    \              DOI 10.17487/RFC2991, November 2000,\n              <http://www.rfc-editor.org/info/rfc2991>.\n\
    \   [RFC3753]  Manner, J., Ed. and M. Kojo, Ed., \"Mobility Related\n        \
    \      Terminology\", RFC 3753, DOI 10.17487/RFC3753, June 2004,\n           \
    \   <http://www.rfc-editor.org/info/rfc3753>.\n   [RFC5226]  Narten, T. and H.\
    \ Alvestrand, \"Guidelines for Writing an\n              IANA Considerations Section\
    \ in RFCs\", BCP 26, RFC 5226,\n              DOI 10.17487/RFC5226, May 2008,\n\
    \              <http://www.rfc-editor.org/info/rfc5226>.\n   [RFC5454]  Tsirtsis,\
    \ G., Park, V., and H. Soliman, \"Dual-Stack Mobile\n              IPv4\", RFC\
    \ 5454, DOI 10.17487/RFC5454, March 2009,\n              <http://www.rfc-editor.org/info/rfc5454>.\n\
    \   [RFC6626]  Tsirtsis, G., Park, V., Narayanan, V., and K. Leung,\n        \
    \      \"Dynamic Prefix Allocation for Network Mobility for Mobile\n         \
    \     IPv4 (NEMOv4)\", RFC 6626, DOI 10.17487/RFC6626, May 2012,\n           \
    \   <http://www.rfc-editor.org/info/rfc6626>.\n"
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   We would like to thank Qin Wu, Shahriar Rahman, Mohana Jeyatharan,\n\
    \   Yungui Wang, Hui Deng Behcet Sarikaya, Jouni Korhonen, Michaela\n   Vanderveen,\
    \ Antti Makela, Charles Perkins, Pierrick Seite, Vijay\n   Gurbani, Barry Leiba,\
    \ Henrik Levkowetz, Pete McCann, and Brian\n   Haberman for their review and comments\
    \ on this document.\n"
- title: Contributors
  contents:
  - "Contributors\n   This document reflects discussions and contributions from the\n\
    \   following people:\n   Ahmad Muhanna\n   Email: asmuhanna@yahoo.com\n   Srinivasa\
    \ Kanduru\n   Email: skanduru@gmail.com\n   Vince Park\n   Email: vpark@qualcomm.com\n\
    \   Hesham Soliman\n   Email: hesham@elevatemobile.com\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Sri Gundavelli (editor)\n   Cisco\n   170 West Tasman\
    \ Drive\n   San Jose, CA  95134\n   United States\n   Email: sgundave@cisco.com\n\
    \   Kent Leung\n   Cisco\n   170 West Tasman Drive\n   San Jose, CA  95134\n \
    \  United States\n   Email: kleung@cisco.com\n   George Tsirtsis\n   Qualcomm\n\
    \   Email: tsirtsis@qualcomm.com\n   Alexandre Petrescu\n   CEA, LIST\n   CEA\
    \ Saclay\n   Gif-sur-Yvette , Ile-de-France  91191\n   France\n   Phone: +33169089223\n\
    \   Email: alexandre.petrescu@cea.fr\n"
