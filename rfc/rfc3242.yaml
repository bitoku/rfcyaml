- title: __initial_text__
  contents:
  - "                   RObust Header Compression (ROHC):\n              A Link-Layer\
    \ Assisted Profile for IP/UDP/RTP\n"
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2002).  All Rights Reserved.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document defines a ROHC (Robust Header Compression) profile\
    \ for\n   compression of IP/UDP/RTP (Internet Protocol/User Datagram\n   Protocol/Real-Time\
    \ Transport Protocol) packets, utilizing\n   functionality provided by the lower\
    \ layers to increase compression\n   efficiency by completely eliminating the\
    \ header for most packets\n   during optimal operation.  The profile is built\
    \ as an extension to\n   the ROHC RTP profile.  It defines additional mechanisms\
    \ needed in\n   ROHC, states requirements on the assisting layer to guarantee\n\
    \   transparency, and specifies general logic for compression and\n   decompression\
    \ making use of this header-free packet.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction....................................................2\n\
    \   2.  Terminology.....................................................4\n  \
    \ 3.  Overview of the Link-Layer Assisted Profile.....................5\n    \
    \    3.1.  Providing Packet Type Identification.....................6\n      \
    \  3.2.  Replacing the Sequence Number............................6\n        3.3.\
    \  CRC Replacement..........................................7\n        3.4.  Applicability\
    \ of This Profile............................7\n   4.  Additions and Exceptions\
    \ Compared to ROHC RTP...................8\n        4.1.  Additional Packet Types..................................8\n\
    \               4.1.1.  No-Header Packet (NHP)..........................8\n  \
    \             4.1.2.  Context Synchronization Packet (CSP)............8\n    \
    \           4.1.3.  Context Check Packet (CCP)......................9\n      \
    \  4.2.  Interfaces Towards the Assisting Layer..................11\n        \
    \       4.2.1.  Interface, Compressor to Assisting Layer.......11\n          \
    \     4.2.2.  Interface, Assisting Layer to Decompressor.....12\n        4.3.\
    \  Optimistic Approach Agreement...........................13\n        4.4.  Fast\
    \ Context Initialization, IR Redefinition............13\n        4.5.  Feedback\
    \ Option, CV-REQUEST.............................14\n        4.6.  Periodic Context\
    \ Verification...........................15\n        4.7.  Use of Context Identifier...............................15\n\
    \   5.  Implementation Issues..........................................15\n  \
    \      5.1.  Implementation Parameters and Signals...................15\n    \
    \           5.1.1.  Implementation Parameters at the Compressor....16\n      \
    \         5.1.2.  Implementation Parameters at the Decompressor..17\n        5.2.\
    \  Implementation over Various Link Technologies...........18\n   6.  IANA Considerations............................................18\n\
    \   7.  Security Considerations........................................18\n  \
    \ 8.  Acknowledgements...............................................18\n   9.\
    \  References.....................................................19\n   10. Authors'\
    \ Addresses.............................................20\n   11. Full Copyright\
    \ Statement.......................................21\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Header compression is a technique used to compress and transparently\n\
    \   decompress the header information of a packet on a per-hop basis,\n   utilizing\
    \ redundancy within individual packets and between\n   consecutive packets within\
    \ a packet stream.  Over the years, several\n   protocols [VJHC, IPHC] have been\
    \ developed to compress the network\n   and transport protocol headers [IPv4,\
    \ IPv6, UDP, TCP], and these\n   schemes have been successful in improving efficiency\
    \ over many wired\n   bottleneck links, such as modem connections over telephone\
    \ networks.\n   In addition to IP, UDP, and TCP compression, an additional\n \
    \  compression scheme called Compressed RTP [CRTP] has been developed to\n   further\
    \ improve compression efficiency for the case of real-time\n   traffic using the\
    \ Real-Time Transport Protocol [RTP].\n   The schemes mentioned above have all\
    \ been designed taking into\n   account normal assumptions about link characteristics,\
    \ which\n   traditionally have been based on wired links only.  However, with\
    \ an\n   increasing number of wireless links in the Internet paths, these\n  \
    \ assumptions are no longer generally valid.  In wireless environments,\n   especially\
    \ wide coverage cellular environments, relatively high error\n   rates are tolerated\
    \ in order to allow efficient usage of the radio\n   resources.  For real-time\
    \ traffic, which is more sensitive to delays\n   than to errors, such operating\
    \ conditions will be norm over, for\n   example, 3rd generation cellular links,\
    \ and header compression must\n   therefore tolerate packet loss.  However, with\
    \ the previously\n   mentioned schemes, especially for real-time traffic compressed\
    \ by\n   CRTP, high error rates have been shown to significantly degrade\n   header\
    \ compression performance [CRTPC].  This problem was the driving\n   force behind\
    \ the creation of the RObust Header Compression (ROHC) WG\n   in the IETF.\n \
    \  The ROHC WG has developed a header compression framework on top of\n   which\
    \ profiles can be defined for different protocol sets, or for\n   different compression\
    \ strategies.  Due to the limited packet loss\n   robustness of CRTP, and the\
    \ demands of the cellular industry for an\n   efficient way of transporting voice\
    \ over IP over wireless, the main\n   focus of ROHC has so far been on compression\
    \ of IP/UDP/RTP headers,\n   which are generous in size, especially compared to\
    \ the payloads often\n   carried by packets with such headers.\n   ROHC RTP has\
    \ become a very efficient, robust and capable compression\n   scheme, able to\
    \ compress the headers down to a total size of one\n   octet only.  Also, transparency\
    \ is guaranteed to an extremely great\n   extent even when residual bit errors\
    \ are present in compressed\n   headers delivered to the decompressor.  The requirements\
    \ for RTP\n   compression [RTP-REQ], defined by the WG before and during the\n\
    \   development process, have thus been fulfilled.\n   As mentioned above, the\
    \ 3rd generation cellular systems, where IP\n   will be used end-to-end, have\
    \ been one of the driving forces behind\n   ROHC RTP, and the scheme has been\
    \ designed to also suit new cellular\n   air interfaces, such as WCDMA, making\
    \ it possible to run even speech\n   services with spectrum efficiency insignificantly\
    \ lower than for\n   existing one-service circuit switched solutions [VTC2000].\
    \  However,\n   other air interfaces such as those based on GSM and IS-95 will\
    \ also\n   be used in all-IP networks, with further implications for the header\n\
    \   compression issue.  These older air interfaces are less flexible,\n   with\
    \ radio bearers optimized for specific payload sizes.  This means\n   that not\
    \ even a single octet of header can be added without using the\n   next higher\
    \ fixed packet size supported by the link, something which\n   is obviously very\
    \ costly.  For the already deployed speech vocoders,\n   the spectrum efficiency\
    \ over these links will thus be low compared to\n   existing circuit switched\
    \ solutions.  To achieve high spectrum\n   efficiency overall with any application,\
    \ more flexible air interfaces\n   must be deployed, and then the ROHC RTP scheme\
    \ will perform\n   excellently, as shown for WCDMA [MOMUC01].  However, for deployment\n\
    \   reasons, it is however important to also provide a suitable header\n   compression\
    \ strategy for already existing vocoders and air\n   interfaces, such as for GERAN\
    \ and for CDMA2000, with minimal effects\n   on spectral efficiency.\n   This\
    \ document defines a new link-layer assisted ROHC RTP profile\n   extending ROHC\
    \ RTP (profile 0x0001) [ROHC], compliant with the ROHC\n   0-byte requirements\
    \ [0B-REQ].  The purpose of this new profile is to\n   provide a header-free packet\
    \ format that, for a certain application\n   behavior, can replace a majority\
    \ of the 1-octet header ROHC RTP\n   packets during normal U/O-mode operation,\
    \ while still being fully\n   transparent and complying with all the requirements\
    \ of ROHC RTP\n   [RTP-REQ].  For other applications, compression will be carried\
    \ out\n   as with normal ROHC RTP.\n   To completely eliminate the compressed\
    \ header, all functionality\n   normally provided by the 1-octet header has to\
    \ be provided by other\n   means, typically by utilizing functionality provided\
    \ by the lower\n   layers and sacrificing efficiency for less frequently occurring\n\
    \   larger compressed headers.  The latter is not a contradiction since\n   the\
    \ argument for eliminating the last octet for most packets is not\n   overall\
    \ efficiency in general.  It is important to remember that the\n   purpose of\
    \ this profile is to provide efficient matching of existing\n   applications to\
    \ existing link technologies, not efficiency in\n   general.  The additional complexity\
    \ introduced by this profile,\n   although minimized by a tight integration with\
    \ already existing ROHC\n   functionality, implies that it should therefore only\
    \ be used to\n   optimize performance of specific applications over specific links.\n\
    \   When implementing this profile over various link technologies, care\n   must\
    \ be taken to guarantee that all the functionality needed is\n   provided by ROHC\
    \ and the lower layers together.  Therefore,\n   additional documents should specify\
    \ how to incorporate this profile\n   on top of various link technologies.\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\"\
    , \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and\
    \ \"OPTIONAL\" in this\n   document are to be interpreted as described in RFC\
    \ 2119.\n   CCP    Context Check Packet\n   CRC    Cyclic Redundancy Check\n \
    \  CSP    Context Synchronization Packet\n   LLA    Link Layer Assisted ROHC RTP\
    \ profile\n   NHP    No Header Packet\n   ROHC   RObust Header Compression\n \
    \  RHP    ROHC Header Packet (a non-NHP packet, i.e., RRP, CSP or CCP)\n   RRP\
    \    ROHC RTP Packet as defined in [ROHC, profile 0x0001]\n   Assisting layer\n\
    \      \"Assisting layer\" refers to any entity implementing the interface\n \
    \     to ROHC (section 4.2).  It may, for example, refer to a sub-layer\n    \
    \  used to adapt the ROHC implementation and the physical link layer.\n      This\
    \ layer is assumed to have knowledge of the physical layer\n      synchronization.\n\
    \   Compressing side\n      \"Compressing side\" refers to the combination of\
    \ the header\n      compressor, operating with the LLA profile, and its associated\n\
    \      assisting layer.\n   Lower layers\n      \"Lower layers\" in this document\
    \ refers to entities located below\n      ROHC in the protocol stack, including\
    \ the assisting layer.\n   ROHC RTP\n      \"ROHC RTP\" in this document refers\
    \ to the IP/UDP/RTP profile\n      (profile 0x0001) as defined in [ROHC].\n"
- title: 3.  Overview of the Link-Layer Assisted Profile
  contents:
  - "3.  Overview of the Link-Layer Assisted Profile\n   The ROHC IP/UDP/RTP profile\
    \ defined in this document, profile 0x0005\n   (hex), is designed to be used over\
    \ channels that have been optimized\n   for specific payload sizes and therefore\
    \ cannot efficiently\n   accommodate header information when transmitted together\
    \ with\n   payloads corresponding to these optimal sizes.\n   The LLA profile\
    \ extends, and thus also inherits all functionality\n   from, the ROCH RTP profile\
    \ by defining some additional functionality\n   and an interface from the ROHC\
    \ component towards an assisting lower\n   layer.\n                  +---------------------------------------+\n\
    \                  |                                       |\n     The LLA   \
    \   |    ROHC RTP,                          |\n     profile      |    Profile\
    \ #1       +-----------------+\n                  |                     |  LLA\
    \ Additions  |\n                  +---------------------+-----------------+\n\
    \   By imposing additional requirements on the lower layers compared to\n   [ROHC],\
    \ it is possible to infer the information needed to maintain\n   robust and transparent\
    \ header compression even though the headers are\n   completely eliminated during\
    \ most of the operation time.\n   Basically, what this profile does is to replace\
    \ the smallest and most\n   frequent ROHC U/O-mode headers with a no-header format,\
    \ for which the\n   header functionality must be provided by other means.\n  \
    \   Smallest header in                 Smallest header in\n     ROHC RTP (profile\
    \ #1)              LLA (profile #5)\n   +--+--+--+--+--+--+--+--+            \
    \  ++\n   |        1 octet        |  ----->      ||  No Header\n   +--+--+--+--+--+--+--+--+\
    \              ++\n               |\n               |                        Header\
    \ field functionality\n               +------------------->    provided by other\
    \ means\n   The fields present in the ROHC RTP headers for U/O-mode PT0 are the\n\
    \   packet type identifier, the sequence number and the CRC.  The\n   subsequent\
    \ sections elaborate more on how the functionality of these\n   fields is replaced\
    \ for NHP.\n"
- title: 3.1.  Providing Packet Type Identification
  contents:
  - "3.1.  Providing Packet Type Identification\n   All ROHC headers carry a packet\
    \ type identifier, indicating to the\n   decompressor how the header should be\
    \ interpreted.  This is a\n   function that must be provided by some means in\
    \ 0-byte header\n   compression.  ROHC RTP packets with compressed headers will\
    \ be\n   possible to distinguish thanks to the packet type identifier, but a\n\
    \   mechanism is needed to separate packets with a header from packets\n   without\
    \ a header.  This function MUST therefore be provided by the\n   assisting layer\
    \ in one way or another.\n"
- title: 3.2.  Replacing the Sequence Number
  contents:
  - "3.2.  Replacing the Sequence Number\n   From the sending application, the RTP\
    \ sequence number is increased by\n   one for each packet sent.  The purpose of\
    \ the sequence number is to\n   cope with packet reordering and packet loss. \
    \ If reordering or loss\n   has occurred before the transmission point, if needed\
    \ the compressing\n   side can easily avoid problems by not allowing the use of\
    \ a header-\n   free packet.\n   However, at the transmission point, loss or reordering\
    \ that may occur\n   over the link can not be anticipated and covered for.  Therefore,\
    \ for\n   NHP the assisting layer MUST guarantee in-order delivery over the\n\
    \   link (already assumed by [ROHC]) and at the receiving side it MUST\n   provide\
    \ an indication for each packet loss over the link.  This is\n   basically the\
    \ same principle as the VJ header compression [VJHC]\n   relies on.\n   Note that\
    \ guaranteeing in-order delivery and packet loss indication\n   over the link\
    \ not only makes it possible to infer the sequence number\n   information, but\
    \ also supersedes the main function of the CRC, which\n   normally takes care\
    \ of errors due to long link losses and bit errors\n   in the compressed sequence\
    \ number.\n"
- title: 3.3.  CRC Replacement
  contents:
  - "3.3.  CRC Replacement\n   All context updating RRP packets carry a CRC calculated\
    \ over the\n   uncompressed header.  The CRC is used by the decompressor to verify\n\
    \   that the updated context is correct.  This verification serves three\n   purposes\
    \ in U/O-mode:\n      1) Detection of longer losses than can be covered by the\
    \ sequence\n         number LSBs\n      2) Protection against failures caused\
    \ by residual bit errors in\n         compressed headers\n      3) Protection\
    \ against faulty implementations and other causes of\n         error\n   Since\
    \ this profile defines an NHP packet without this CRC, care must\n   be taken\
    \ to fulfill these purposes by other means, when an NHP is\n   used as a replacement\
    \ for a context updating packet.  Detection of\n   long losses (1) is already\
    \ covered since the assisting layer MUST\n   provide indication of all packet\
    \ losses.  Furthermore, the NHP packet\n   has one important advantage over RHP\
    \ packets in that residual bit\n   errors (2) cannot damage a header that is not\
    \ even sent.\n   It is thus reasonable to assume that compression and decompression\n\
    \   transparency can be assured with high confidence even without a CRC\n   in\
    \ header-free packets.  However, to provide additional protection\n   against\
    \ damage propagation due to undetected residual bit errors in\n   context updating\
    \ packets (2) or other unexpected errors (3), periodic\n   context verifications\
    \ SHOULD be performed (see section 4.6).\n"
- title: 3.4.  Applicability of This Profile
  contents:
  - "3.4.  Applicability of This Profile\n   The LLA profile can be used with any\
    \ link technology capable of\n   providing the required functionality described\
    \ in previous sections.\n   Whether LLA or ROHC RTP should be implemented thus\
    \ depends on the\n   characteristics of the link itself.  For most RTP packet\
    \ streams, LLA\n   will work exactly as ROHC RTP, while it will be more efficient\
    \ for\n   packet streams with certain characteristics.  LLA will never be less\n\
    \   efficient than ROHC RTP.\n   Note as well that LLA, like all other ROHC profiles,\
    \ is fully\n   transparent to any packet stream reaching the compressor.  LLA\
    \ does\n   not make any assumptions about the packet stream but will perform\n\
    \   optimally for packet streams with certain characteristics, e.g.,\n   synchronized\
    \ streams exactly timed with the assisting link over which\n   the LLA profile\
    \ is implemented.\n   The LLA profile is obviously not applicable if the UDP checksum\
    \ (2\n   bytes) is enabled, which is always the case for IPv6/UDP.  For\n   IPv4/UDP,\
    \ the sender may choose to disable the UDP checksum.\n"
- title: 4.  Additions and Exceptions Compared to ROHC RTP
  contents:
  - '4.  Additions and Exceptions Compared to ROHC RTP

    '
- title: 4.1.  Additional Packet Types
  contents:
  - "4.1.  Additional Packet Types\n   The LLA profile defines three new packet types\
    \ to be used in addition\n   to the RRP packet types defined by [ROHC].  The following\
    \ sections\n   describe these packet types and their purpose in detail.\n"
- title: 4.1.1.  No-Header Packet (NHP)
  contents:
  - "4.1.1.  No-Header Packet (NHP)\n   A No-Header Packet (NHP), i.e., a packet consisting\
    \ only of a\n   payload, is defined and MAY be used when only sequencing must\
    \ be\n   conveyed, i.e., when all header fields are either unchanged or follow\n\
    \   the currently established change pattern.  In addition, there are\n   some\
    \ considerations for the use of the NHP (see 4.3, 4.5 and 4.6).\n   An LLA compressor\
    \ is not allowed to deliver NHP packets when\n   operating in R-mode.\n   The\
    \ assisting layer MAY send the NHP for RTP SN = X only if an NHP\n   was delivered\
    \ by the LLA compressor AND the assisting layer can\n   guarantee that the decompressor\
    \ will infer the proper sequencing for\n   this NHP.  This guarantee is based\
    \ on the confidence that the\n   decompressor\n   a) has the means to infer proper\
    \ sequencing for the packet\n      corresponding to SN = X-1, AND\n   b) has either\
    \ received a loss indication or the packet itself for the\n      packet corresponding\
    \ to SN = X-1.\n   Updating properties: NHP packets update context (RTP Sequence\n\
    \   Number).\n"
- title: 4.1.2.  Context Synchronization Packet (CSP)
  contents:
  - "4.1.2.  Context Synchronization Packet (CSP)\n   The case where the packet stream\
    \ overruns the channel bandwidth may\n   lead to data being discarded, which may\
    \ result in decompressor\n   context invalidation.  It might therefore be beneficial\
    \ to send a\n   packet with only the header information and discard the payload.\n\
    \   This would be helpful to maintain synchronization of the decompressor\n  \
    \ context, while efficiently using the available bandwidth.\n   This case can\
    \ be handled with the Context Synchronization Packet\n   (CSP), which has the\
    \ following format:\n     0   1   2   3   4   5   6   7\n   +---+---+---+---+---+---+---+---+\n\
    \   | 1   1   1   1   1   0   1   0 | Packet type identifier\n   +===+===+===+===+===+===+===+===+\n\
    \   :  ROHC header without padding  :\n   :    see [ROHC, section 5.7]    :\n\
    \   +---+---+---+---+---+---+---+---+\n   Updating properties: CSP maintains the\
    \ updating properties of the\n   ROHC header it carries.\n   The CSP is defined\
    \ by one of the unused packet type identifiers from\n   ROHC RTP, carried in the\
    \ one-octet base header.  As for any ROHC\n   packet, except the NHP, the packet\
    \ may begin with ROHC padding and/or\n   feedback.  It may also carry context\
    \ identification after the packet\n   type identifier.  It is possible to have\
    \ two CID fields present, one\n   after the packet type ID and one within the\
    \ encapsulated ROHC header.\n   If a decompressor receives a CSP with two non-equal\
    \ CID values\n   included, the packet MUST be discarded.  ROHC segmentation may\
    \ also\n   be applied to the CSP.\n   Note that when the decompressor has received\
    \ and processed a CSP, the\n   packet (including any possible data following the\
    \ CSP encapsulated\n   compressed header) MUST be discarded.\n"
- title: 4.1.3.  Context Check Packet (CCP)
  contents:
  - "4.1.3.  Context Check Packet (CCP)\n   A Context Check Packet (CCP), which does\
    \ not carry any payload but\n   only an optional CRC value in addition to the\
    \ packet type identifier,\n   is defined.\n   The purpose of the CCP is to provide\
    \ a useful packet that MAY be sent\n   by a synchronized physical link layer in\
    \ the case where data must be\n   sent at fixed intervals, even if no compressed\
    \ packet is available.\n   Whether the CCP is sent over the link and delivered\
    \ to the\n   decompressor is decided by the assisting layer.  The CCP has the\n\
    \   following format:\n     0   1   2   3   4   5   6   7\n   +---+---+---+---+---+---+---+---+\n\
    \   | 1   1   1   1   1   0   1   1 | Packet type identifier\n   +===+===+===+===+===+===+===+===+\n\
    \   | C |          CRC              |\n   +---+---+---+---+---+---+---+---+\n\
    \     C: C = 0 indicates that the CRC field is not used;\n        C = 1 indicates\
    \ that a valid CRC is present.\n   Updating properties: CCP packets do not update\
    \ context.\n   The CCP is defined by one of the unused packet type identifiers\
    \ from\n   ROHC RTP, carried in the first octet of the base header.  The first\n\
    \   bit of the second octet, the C bit, indicates whether the CRC field\n   is\
    \ used or not.  If C=1, the CRC field MUST be set to the 7-bits CRC\n   calculated\
    \ over the original uncompressed header defined in [ROHC\n   section 5.9.2]. \
    \ As for any ROHC packet, except NHP, the packet MAY\n   begin with ROHC padding\
    \ and/or carry context identification.\n   The use of the CRC field to perform\
    \ decompressor context verification\n   is optional and is therefore a compressor\
    \ implementation issue.\n   However, a CCP MUST always be made available to the\
    \ assisting layer.\n   If the assisting layer receives CCPs with the C-bit set\
    \ (C=1) from\n   the compressor, it MUST use the last CCP received if a CCP is\
    \ to be\n   sent, i.e., the CCP corresponding to the last non-CCP packet sent\n\
    \   (NHP, RRP or CSP).  An assisting layer MAY use the CCP for other\n   purposes,\
    \ such as signaling a packet loss before the link.\n   The decompressor is REQUIRED\
    \ to handle a CCP received with the C bit\n   set (C=1), indicating a valid CRC\
    \ field, and perform context\n   verification.  The received CRC MUST then be\
    \ applied to the last\n   decompressed packet, unless a packet loss indication\
    \ was previously\n   received.  Upon CRC failure, actions MUST be taken as specified\
    \ in\n   [ROHC, section 5.3.2.2.3].  A CCP received with C=0 MUST be ignored\n\
    \   by the decompressor.  The decompressor is not allowed to make any\n   further\
    \ interpretation of the CCP.\n   The use of CCP by an assisting layer is optional\
    \ and depends on the\n   characteristics of the actual link.  Whether it is used\
    \ or not MUST\n   therefore be specified in link layer implementation specifications\n\
    \   for this profile.\n"
- title: 4.2.  Interfaces Towards the Assisting Layer
  contents:
  - "4.2.  Interfaces Towards the Assisting Layer\n   This profile relies on the lower\
    \ layers to provide the necessary\n   functionality to allow NHP packets to be\
    \ sent.  This interaction\n   between LLA and the assisting layer is defined as\
    \ interfaces between\n   the LLA compressor/decompressor and the LLA applicable\
    \ link\n   technology.\n                |                              |\n   \
    \             +                              +\n   +-------------------------+\
    \    +-------------------------+\n   |       ROHC RTP HC       |    |       ROHC\
    \ RTP HD       |\n   +-------------------------+    +-------------------------+\n\
    \   |       LLA profile       |    |       LLA profile       |\n   +=========================+\
    \    +=========================+\n   |       Interface         |    |        Interface\
    \        |\n   | ROHC to assisting layer |    | Assisting layer to ROHC |\n  \
    \ +=========================+    +=========================+\n   |       Applicable\
    \        |    |       Applicable        |\n   |     link technology     |    |\
    \     link technology     |\n   +=========================+    +=========================+\n\
    \                |                              |\n                +------>----\
    \ CHANNEL ---->-----+\n   The figure above shows the various levels, as defined\
    \ in [ROHC] and\n   this document, constituting a complete implementation of the\
    \ LLA\n   profile.  The figure also underlines the need for additional\n   documents\
    \ to specify how to implement these interfaces for a link\n   technology for which\
    \ this profile is relevant.\n   This section defines the information to be exchanged\
    \ between the LLA\n   compressor and the assisting layer for this profile to operate\n\
    \   properly.  While it does define semantics, it does not specify how\n   these\
    \ interfaces are to be implemented.\n"
- title: 4.2.1.  Interface, Compressor to Assisting Layer
  contents:
  - "4.2.1.  Interface, Compressor to Assisting Layer\n   This section defines the\
    \ interface semantics between the compressor\n   and the assisting layer, providing\
    \ rules for packet delivery from the\n   compressor.\n   The interface defines\
    \ the following parameters: RRP, RRP segmentation\n   flag, CSP, CSP segmentation\
    \ flag, NHP, and RTP Sequence Number.  All\n   parameters, except the NHP, MUST\
    \ always be delivered to the assisting\n   layer.  This leads to two possible\
    \ delivery scenarios:\n   a. RRP, CSP, CCP, NHP and RTP Sequence Number are delivered,\
    \ along\n      with the corresponding segmentation flags set accordingly.\n  \
    \    This corresponds to the case when the compressor allows sending of\n    \
    \  an NHP packet, with or without segmentation being applied to the\n      corresponding\
    \ RRP/CSP packets.\n      Recall that delivery of an NHP packet occurs when the\
    \ ROHC RTP\n      compressor would have used a ROHC UO-0.\n   b. RRP, CSP, CCP\
    \ and RTP Sequence Number are delivered, along with\n      the corresponding segmentation\
    \ flags set accordingly.\n      This corresponds to the case when the compressor\
    \ does not allow\n      sending of an NHP packet.  Segmentation might be applied\
    \ to the\n      corresponding RRP and CSP packets.\n   Segmentation may be applied\
    \ independently to an RRP or a CSP packet\n   if its size exceeds the largest\
    \ value provided in the PREFERRED\n   PACKET_SIZES list and if the LARGE_PACKET_ALLOWED\
    \ parameter is set to\n   false.  The segmentation flags are explicitly stated\
    \ in the interface\n   definition to emphasize that the RRP and the CSP may be\
    \ delivered by\n   the compressor as segmented packets.\n   The RTP SN MUST be\
    \ delivered for each packet by the compressor to\n   allow the assisting layer\
    \ to maintain the necessary sequencing\n   information.\n"
- title: 4.2.2.  Interface, Assisting Layer to Decompressor
  contents:
  - "4.2.2.  Interface, Assisting Layer to Decompressor\n   Here the interface semantics\
    \ between the assisting layer and the\n   decompressor are defined, providing\
    \ simple rules for the delivery of\n   received packets to the decompressor. \
    \ The decompressor needs a way\n   to distinguish NHP packets from RHP packets.\
    \  Also, when receiving\n   packets without a header, the decompressor needs a\
    \ way to infer the\n   sequencing information to keep synchronization between\
    \ the received\n   payload and the sequence information of the decompressed headers.\
    \  To\n   achieve this, the decompressor MUST receive the following from the\n\
    \   assisting layer:\n   -  an indication for each packet loss over the link between\
    \ the\n      compressing and decompressing sides for CID=0\n   -  the received\
    \ packet together with an indication whether the packet\n      received is an\
    \ NHP or not\n   Note that the context is updated from a packet loss indication.\n"
- title: 4.3.  Optimistic Approach Agreement
  contents:
  - "4.3.  Optimistic Approach Agreement\n   ROHC defines an optimistic approach for\
    \ updates to reduce the header\n   overhead.  This approach is fully exploited\
    \ in the Optimistic and\n   Unidirectional modes of operation.  Due to the presence\
    \ of a CRC in\n   all compressed headers, the optimistic approach is defined as\
    \ a\n   compressor issue only because the decompressor will always be able to\n\
    \   detect an invalid context through the CRC verification.\n   However, no CRC\
    \ is present in the NHP packet defined by the LLA\n   profile.  Therefore the\
    \ loss of an RHP packet updating the context\n   may not always be detected. \
    \ To avoid this problem, the compressing\n   and decompressing sides must agree\
    \ on the principles for the\n   optimistic approach, and the agreed principles\
    \ MUST be enforced not\n   only by the compressor but also by the transmitting\
    \ assisting layer.\n   If, for example, three consecutive updates are sent to\
    \ convey a\n   header field change, the decompressor must know this and invalidate\n\
    \   the context in case of three or more consecutive physical packet\n   losses.\
    \  Note that the mechanism used to enforce the optimistic\n   approach must be\
    \ reinitialized if a new field change needs to be\n   conveyed while the compressing\
    \ side is already sending packets to\n   convey non-linear context updates.\n\
    \   An LLA decompressor MUST use the optimistic approach knowledge to\n   detect\
    \ possible context loss events.  If context loss is suspected it\n   MUST invalidate\
    \ the context and not forward any packets before the\n   context has been synchronized.\n\
    \   It is REQUIRED that all documents, describing how the LLA profile is\n   implemented\
    \ over a certain link technology, define how the optimistic\n   approach is agreed\
    \ between the compressing side and the decompressing\n   side.  It could be handled\
    \ with a fixed principle, negotiation at\n   startup, or by other means, but the\
    \ method must be unambiguously\n   defined.\n"
- title: 4.4.  Fast Context Initialization, IR Redefinition
  contents:
  - "4.4.  Fast Context Initialization, IR Redefinition\n   As initial IR packets\
    \ might overrun the channel bandwidth and\n   significantly delay decompressor\
    \ context establishment, it might be\n   beneficial to initially discard the payload.\
    \  This allows state\n   transitions and higher compression efficiency to be achieved\
    \ with\n   minimal delay.\n   To serve this purpose, the D-bit from the basic\
    \ structure of the ROHC\n   RTP IR packet [ROHC section 5.7.7.1] is redefined\
    \ for the LLA\n   profile.  For D=0 (no dynamic chain), the meaning of the D-bit\
    \ is\n   extended to indicate that the payload has been discarded when\n   assembling\
    \ the IR packet.  All other fields keep their meanings as\n   defined for ROHC\
    \ RTP.\n   The resulting structure, using small CIDs and CID=0, becomes:\n   \
    \  0   1   2   3   4   5   6   7\n   +---+---+---+---+---+---+---+---+\n   | 1\
    \ | 1 | 1 | 1 | 1 | 1 | 0 | D |\n   +---+---+---+---+---+---+---+---+\n   |  \
    \          Profile            | 1 octet\n   +---+---+---+---+---+---+---+---+\n\
    \   |              CRC              | 1 octet\n   +---+---+---+---+---+---+---+---+\n\
    \   |            Static             | variable length\n   |             chain\
    \             |\n    - - - - - - - - - - - - - - - -\n   |            Dynamic\
    \            | not present if D = 0\n   |             chain             | present\
    \ if D = 1, variable length\n    - - - - - - - - - - - - - - - -\n   |       \
    \     Payload            | not present if D = 0\n   |                        \
    \       | present if D = 1, variable length\n    - - - - - - - - - - - - - - -\
    \ -\n        D:   D = 0 indicates that the dynamic chain is not present\n    \
    \         and the payload has been discarded.\n   After an IR packet with D=0\
    \ has been processed by the decompressor,\n   the packet MUST be discarded.\n"
- title: 4.5.  Feedback Option, CV-REQUEST
  contents:
  - "4.5.  Feedback Option, CV-REQUEST\n   The CV-REQUEST option MAY be used by the\
    \ decompressor to request an\n   RRP or CSP for context verification.  This option\
    \ should be used if\n   only NHP have been received for a long time and the context\
    \ therefore\n   has not been verified recently.\n   +---+---+---+---+---+---+---+---+\n\
    \   |  Opt Type = 8 |  Opt Len = 0  |\n   +---+---+---+---+---+---+---+---+\n\
    \   If the compressor receives a feedback packet with this option, the\n   next\
    \ packet compressed SHOULD NOT be delivered to the assisting layer\n   as an NHP.\n"
- title: 4.6.  Periodic Context Verification
  contents:
  - "4.6.  Periodic Context Verification\n   As described in section 3.3, transparency\
    \ is expected to be\n   guaranteed by the functionality provided by the lower\
    \ layers.  This\n   ROHC profile would therefore be at least as reliable as the\
    \ older\n   header compression schemes [VJHC, IPHC, CRTP], which do not make use\n\
    \   of a header compression CRC.  However, since ROHC RTP normally is\n   extremely\
    \ safe to use from a transparency point of view, it would be\n   desirable to\
    \ be able to achieve this with LLA also.\n   To provide an additional guarantee\
    \ for transparency and also catch\n   unexpected errors, such as errors due to\
    \ faulty implementations, it\n   is RECOMMENDED to periodically send context updating\
    \ packets, even\n   when the compressor logic allows NHP packets to be used.\n"
- title: 4.7.  Use of Context Identifier
  contents:
  - "4.7.  Use of Context Identifier\n   Since an NHP cannot carry a context identifier\
    \ (CID), there is a\n   restriction on how this profile may be used, related to\
    \ context\n   identification.  Independent of which CID size has been negotiated,\n\
    \   NHP packets can only be used for CID=0.  If the decompressor receives\n  \
    \ an NHP packet, it can only belong to CID=0.\n   Note that if multiple packet\
    \ streams are handled by a compressor\n   operating using LLA, the assisting layer\
    \ must in case of physical\n   packet loss be able to tell for which CID the loss\
    \ occurred, or at\n   least it MUST be able to tell if packets with CID=0 (packet\
    \ stream\n   with NHPs) have been lost.\n"
- title: 5.  Implementation Issues
  contents:
  - "5.  Implementation Issues\n   This document specifies mechanisms for the protocol\
    \ and leaves\n   details on the use of these mechanisms to the implementers. \
    \ The\n   present chapter aims to provide guidelines, ideas and suggestions for\n\
    \   implementation of LLA.\n"
- title: 5.1.  Implementation Parameters and Signals
  contents:
  - "5.1.  Implementation Parameters and Signals\n   As described in [ROHC, section\
    \ 6.3], implementations use parameters\n   to set up configuration information\
    \ and to stipulate how a ROHC\n   implementation is to operate.  The following\
    \ parameters are\n   additions, useful to LLA, to the parameter set defined for\
    \ ROHC RTP\n   implementations.  Note that if the PREFERRED_PACKET_SIZES parameters\n\
    \   defined here are used, they obsolete all PACKET_SIZE and PAYLOAD_SIZE\n  \
    \ parameters of ROHC RTP.\n"
- title: 5.1.1.  Implementation Parameters at the Compressor
  contents:
  - "5.1.1.  Implementation Parameters at the Compressor\n   ALWAYS_PAD -- value:\
    \ boolean\n      This parameter may be set by an external entity to specify to\
    \ the\n      compressor that every RHP packet MUST be padded with a minimum of\n\
    \      one octet ROHC padding.\n      The assisting layer MUST provide a packet\
    \ type identification.  If\n      no field is available for this purpose from\
    \ the protocol at the\n      link layer, then a leading sequence may be used to\
    \ distinguish RHP\n      packets from NHP packets.  Although the use of a leading\
    \ sequence\n      is obviously not efficient, since it sacrifices efficiency for\
    \ RHP\n      packets, the efficiency loss should be insignificant because the\n\
    \      leading sequence applies only to packets with headers in order to\n   \
    \   favor the use of packets without headers.  If a leading sequence\n      is\
    \ desired for RHP identification, the lower layer MAY use ROHC\n      padding\
    \ for the leading sequence by setting the ALWAYS_PAD\n      parameter. Note that\
    \ in such cases, possible collisions of the\n      padding with the NHP payload\
    \ must be avoided.\n      By default, this parameter is set to FALSE.\n   PREFERRED_PACKET_SIZES\
    \ -- list of:\n         SIZE -- value: integer (octets)\n         RESTRICTED_TYPE\
    \ -- values: [NHP_ONLY, RHP_ONLY, NO_RESTRICTION]\n      This parameter set governs\
    \ which packet sizes are preferred by the\n      assisting layer.  If this parameter\
    \ set is used, all RHP packets\n      MUST be padded to fit the smallest possible\
    \ preferred size.  If\n      the size of the unpadded packet (or, in the case\
    \ of ALWAYS_PAD\n      being set, the packet with minimal one octet padding) is\
    \ larger\n      than the maximal preferred packet size, the compressor has two\n\
    \      options.  Either, it may deliver this larger packet with an\n      arbitrary\
    \ size, or it may split the packet into several segments\n      using ROHC segmentation\
    \ and pad each segment to one of the\n      preferred sizes.  Which method to\
    \ use depends on the value of the\n      LARGE_PACKETS_ALLOWED parameter below.\n\
    \      NHP packets can be delivered to the lower layer only if the\n      payload\
    \ size is part of the preferred packet size set.\n      Furthermore, if RESTRICTED_TYPE\
    \ is set to one of NHP_ONLY or\n      RHP_ONLY for any of the preferred packet\
    \ sizes, that size is\n      allowed only for packets of the specified type.\n\
    \      By default, no preferred packet sizes are specified.  When sizes\n    \
    \  are specified, the default value for RESTRICTED_TYPE is\n      NO_RESTRICTION.\n\
    \   LARGE_PACKETS_ALLOWED -- value: boolean\n      This parameter may be set by\
    \ an external entity to specify how to\n      handle packets that do not fit any\
    \ of the preferred packet sizes\n      specified.  If it is set to TRUE, the compressor\
    \ MUST deliver the\n      larger packet as-is and MUST NOT use segmentation. \
    \ If it is set\n      to FALSE, the ROHC segmentation scheme MUST be used to split\
    \ the\n      packet into two or more segments, and each segment MUST further be\n\
    \      padded to fit one of the preferred packet sizes.\n      By default, this\
    \ parameter is set to TRUE, which means that\n      segmentation is disabled.\n\
    \   VERIFICATION_PERIOD -- value: integer\n      This parameter may be set by\
    \ an external entity to specify to the\n      compressor the minimum frequency\
    \ with which a packet validating\n      the context must be sent.  This tells\
    \ the compressor that a packet\n      containing a CRC field MUST be sent at least\
    \ once every N packets,\n      where N=VERIFICATION_PERIOD (see section 4.6).\n\
    \      By default, this parameter is set to 0, which indicates that\n      periodical\
    \ verifications are disabled.\n"
- title: 5.1.2.  Implementation Parameters at the Decompressor
  contents:
  - "5.1.2.  Implementation Parameters at the Decompressor\n   NHP_PACKET -- value:\
    \ boolean\n      This parameter informs the decompressor that the packet being\n\
    \      delivered is an NHP packet.  The decompressor MUST accept this\n      packet\
    \ type indicator from the lower layer.  An assisting layer\n      MUST set this\
    \ indicator to true for every NHP packet delivered,\n      and to false for any\
    \ other packet.\n   PHYSICAL_PACKET_LOSS -- signal\n      This signal indicates\
    \ to the decompressor that a packet has been\n      lost on the link between the\
    \ compressing and the decompressing\n      sides, due to a physical link error.\
    \  The signal is given once for\n      each packet that was lost, and a decompressor\
    \ must increase the\n      sequence number accordingly when this signal is received.\n\
    \   PRE_LINK_PACKET_LOSS -- signal\n      This signal tells the decompressor to\
    \ increase the sequence number\n      due to a gap in the sequencing, not related\
    \ to a physical link\n      error.  A receiving assisting layer may for example\
    \ use this\n      signal to indicate to the decompressor that a packet was lost\n\
    \      before the compressor, or that a packet was discarded by the\n      transmitting\
    \ assisting layer.\n"
- title: 5.2.  Implementation over Various Link Technologies
  contents:
  - "5.2.  Implementation over Various Link Technologies\n   This document provides\
    \ the semantics and requirements of the\n   interface needed from the ROHC compressor\
    \ and decompressor towards\n   the assisting layer to perform link-layer assisted\
    \ header\n   compression.\n   However, this document does not provide any link\
    \ layer specific\n   operational information, except for some implementation suggestions.\n\
    \   Further details about how this profile is to be implemented over\n   various\
    \ link technologies must be described in other documents, where\n   specific characteristics\
    \ of each link layer can be taken into account\n   to provide optimal usage of\
    \ this profile.\n   These specifications MAY use a packet type bit pattern unused\
    \ by this\n   profile to implement signaling on the lower layer.  The pattern\n\
    \   available to lower layer implementations is [11111001].\n"
- title: 6.  IANA Considerations
  contents:
  - "6.  IANA Considerations\n   ROHC profile identifier 0x0005 has been reserved\
    \ by the IANA for the\n   IP/UDP/RTP profile defined in this document.\n"
- title: 7.  Security Considerations
  contents:
  - "7.  Security Considerations\n   The security considerations of ROHC RTP [ROHC\
    \ section 7] apply also\n   to this document with one addition: in the case of\
    \ a denial-of-\n   service attack scenario where an intruder injects bogus CCP\
    \ packets\n   onto the link using random CRC values, the CRC check will fail for\n\
    \   incorrect reasons at the decompressor side.  This would obviously\n   greatly\
    \ reduce the advantages of ROHC and any extra efficiency\n   provided by this\
    \ profile due to unnecessary context invalidation,\n   feedback messages and refresh\
    \ packets.  However, the same remarks\n   related to the presence of such an intruder\
    \ apply.\n"
- title: 8.  Acknowledgements
  contents:
  - "8.  Acknowledgements\n   The authors would like to thank Lila Madour, Ulises\
    \ Olvera-Hernandez\n   and Francis Lupien for input regarding the typical links\
    \ in which LLA\n   can be applied.  Thanks also to Mikael Degermark for fruitful\n\
    \   discussions that led to improvements of this profile, and to Zhigang\n   Liu\
    \ for many valuable comments.\n"
- title: 9.  References
  contents:
  - "9.  References\n   [ROHC]      Bormann, C., Burmeister, C., Degermark, M., Fukushima,\n\
    \               H., Hannu, H., Jonsson, L., Hakenberg, R., Koren, T., Le,\n  \
    \             K., Liu, Z., Martensson, A., Miyazaki, A., Svanbro, K.,\n      \
    \         Wiebke, T., Yoshimura, T. and H. Zheng, \"RObust Header\n          \
    \     Compression (ROHC): Framework and four profiles: RTP,\n               UDP,\
    \ ESP, and uncompressed\", RFC 3095, July 2001.\n   [IPv4]      Postel, J., \"\
    Internet Protocol\", STD 5, RFC 791,\n               September 1981.\n   [IPv6]\
    \      Deering, S. and R. Hinden, \"Internet Protocol, Version 6\n           \
    \    (IPv6) Specification\", RFC 2460, December 1998.\n   [UDP]       Postel,\
    \ J., \"User Datagram Protocol\", STD 6, RFC 768,\n               August 1980.\n\
    \   [RTP]       Schulzrinne, H., Casner S., Frederick, R. and V.\n           \
    \    Jacobson, \"RTP: A Transport Protocol for Real-Time\n               Applications\"\
    , RFC 1889, January 1996.\n   [TCP]       Postel, P., \"Transmission Control Protocol\"\
    , STD 7, RFC\n               793, September 1981.\n   [RTP-REQ]   Degermark, M.,\
    \ \"Requirements for IP/UDP/RTP Header\n               Compression\", RFC 3096,\
    \ July 2001.\n   [0B-REQ]    Jonsson, L-E., \"RObust Header Compression (ROHC):\n\
    \               Requirements and Assumptions for 0-byte IP/UDP/RTP\n         \
    \      Compression\", RFC 3243, April 2002.\n   [VJHC]      Jacobson, V., \"Compressing\
    \ TCP/IP Headers for Low-Speed\n               Serial Links\", RFC 1144, February\
    \ 1990.\n   [IPHC]      Degermark, M., Nordgren, B. and S. Pink, \"IP Header\n\
    \               Compression\", RFC 2507, February 1999.\n   [CRTP]      Casner,\
    \ S. and V. Jacobson, \"Compressing IP/UDP/RTP\n               Headers for Low-Speed\
    \ Serial Links\", RFC 2508, February\n               1999.\n   [CRTPC]     Degermark,\
    \ M., Hannu, H., Jonsson, L-E. and K. Svanbro,\n               \"Evaluation of\
    \ CRTP Performance over Cellular Radio\n               Networks\", IEEE Personal\
    \ Communications Magazine, Volume\n               7, number 4, pp. 20-25, August\
    \ 2000.\n   [VTC2000]   Svanbro, K., Hannu, H., Jonsson, L-E. and M. Degermark,\n\
    \               \"Wireless real time IP-services enabled by header\n         \
    \      compression\", proceedings of IEEE VTC2000, May 2000.\n   [MOMUC01]   Liu,\
    \ G., et al., \"Experimental field trials results of\n               Voice-over\
    \ IP over WCDMA links\", MoMuC'01 - The\n               International Workshop\
    \ on Mobile Multimedia\n               Communications, Conference proceedings,\
    \ February 2001.\n"
- title: 10.  Authors' Addresses
  contents:
  - "10.  Authors' Addresses\n   Lars-Erik Jonsson\n   Ericsson AB\n   Box 920\n \
    \  SE-971 28 Lulea\n   Sweden\n   Phone: +46 920 20 21 07\n   Fax:   +46 920 20\
    \ 20 99\n   EMail: lars-erik.jonsson@ericsson.com\n   Ghyslain Pelletier\n   Ericsson\
    \ AB\n   Box 920\n   SE-971 28 Lulea\n   Sweden\n   Phone: +46 920 20 24 32\n\
    \   Fax:   +46 920 20 20 99\n   EMail: ghyslain.pelletier@epl.ericsson.se\n"
- title: 11.  Full Copyright Statement
  contents:
  - "11.  Full Copyright Statement\n   Copyright (C) The Internet Society (2002).\
    \  All Rights Reserved.\n   This document and translations of it may be copied\
    \ and furnished to\n   others, and derivative works that comment on or otherwise\
    \ explain it\n   or assist in its implementation may be prepared, copied, published\n\
    \   and distributed, in whole or in part, without restriction of any\n   kind,\
    \ provided that the above copyright notice and this paragraph are\n   included\
    \ on all such copies and derivative works.  However, this\n   document itself\
    \ may not be modified in any way, such as by removing\n   the copyright notice\
    \ or references to the Internet Society or other\n   Internet organizations, except\
    \ as needed for the purpose of\n   developing Internet standards in which case\
    \ the procedures for\n   copyrights defined in the Internet Standards process\
    \ must be\n   followed, or as required to translate it into languages other than\n\
    \   English.\n   The limited permissions granted above are perpetual and will\
    \ not be\n   revoked by the Internet Society or its successors or assigns.\n \
    \  This document and the information contained herein is provided on an\n   \"\
    AS IS\" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING\n   TASK FORCE\
    \ DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING\n   BUT NOT LIMITED\
    \ TO ANY WARRANTY THAT THE USE OF THE INFORMATION\n   HEREIN WILL NOT INFRINGE\
    \ ANY RIGHTS OR ANY IMPLIED WARRANTIES OF\n   MERCHANTABILITY OR FITNESS FOR A\
    \ PARTICULAR PURPOSE.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
