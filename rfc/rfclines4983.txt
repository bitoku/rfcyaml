Abstract This memo defines a portion of the Management Information Base (MIB) for use with network management protocols in the Internet community.
In particular, it describes managed objects for information related to the management of Fibre Channel's Registered State Change Notifications (RSCNs).
This memo defines a portion of the Management Information Base (MIB) for use with network management protocols in the Internet community.
In particular, it describes managed objects for information related to Registered State Change Notifications (RSCNs) [FC LS] in a Fibre Channel network, including which
Nx Ports are registered to receive which types of RSCNs, the control and generation of Simple Network Management Protocol (SNMP) notifications on registration failures, and RSCN related statistics.
This memo was previously approved by INternational Committee for Information Technology Standards (INCITS)
(http://www.t11.org); this document is a product of the IETF's IMSS working group.
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14, RFC 2119 [RFC2119].
The Internet Standard Management Framework
For a detailed overview of the documents that describe the current Internet Standard Management Framework, please refer to section 7 of RFC 3410 [RFC3410].
Managed objects are accessed via a virtual information store, termed the Management Information Base or MIB.
MIB objects are generally accessed through the Simple Network Management Protocol (SNMP).
Objects in the MIB are defined using the mechanisms defined in the Structure of Management Information (SMI).
This memo specifies a MIB module that is compliant to the SMIv2, which is described in STD 58, RFC 2578 [RFC2578], STD 58
, RFC 2579 [RFC2579] and STD 58, RFC 2580
Short Overview of Fibre Channel
The Fibre Channel (FC) is logically a bidirectional point to point serial data channel, structured for high performance.
Fibre Channel provides a general transport vehicle for higher level protocols such as Small Computer System Interface (SCSI)
command sets, the High  Performance Parallel Interface (HIPPI) data framing, IP (Internet Protocol), IEEE 802.2, and others.
Physically, Fibre Channel is an interconnection of multiple communication points, called N Ports, interconnected either by a switching network, called a Fabric, or by a point to point link.
A Fibre Channel "node" consists of one or more N Ports.
A Fabric may consist of multiple Interconnect Elements, some of which are switches.
An N Port connects to the Fabric via a port on a switch called an F Port.
When multiple FC nodes are connected to a single port on a switch via an "Arbitrated Loop" topology, the switch port is called an FL Port, and the nodes' ports are called NL Ports.
Nx Port is used to refer to either an N Port or an NL Port.
Fx Port is used to refer to either an F Port or an FL Port.
A switch port, which is interconnected to another switch port via an Inter Switch Link (ISL), is called an E Port.
A B Port connects a bridge device with an E Port on a switch; a B Port provides a subset of E Port functionality.
Many Fibre Channel components, including the fabric, each node, and most ports, have globally unique names.
These globally unique names are typically formatted as World Wide Names (WWNs).
More information on WWNs can be found in [FC FS].
WWNs are expected to be persistent across agent and unit resets.
Fibre Channel frames contain 24 bit address identifiers that identify the frame's source and destination ports.
Each FC port has both an address identifier and a WWN.
When a fabric is in use, the FC address identifiers are dynamically assigned by a switch.
Each octet of a 24 bit address represents a level in an address hierarchy, with a Domain ID being the highest level of the hierarchy.
Registered State Change Notifications (RSCNs) are defined in [FC LS] as a means to provide Nx Ports that have registered to receive such notifications with a timely indication of changes in the state of nodes attached to the fabric.
Specifically, an Nx Port may choose to register, using a State Change Registration (SCR) request [FC LS] to receive RSCNs.
When an event occurs that may affect
a registered Nx Port's port's state, the registered Nx Port will receive an RSCN.
For example, an Nx Port can use RSCNs as the means by which it is informed of the failures of other nodes, of new devices coming online, or even of more network accessible storage becoming available.
The payload of the RSCN indicates the type of change and includes the address of the changed port.
RSCNs are often generated by the fabric, but an Nx Port can also generate (and send to the fabric) an RSCN if and when it detects an event not visible to the fabric.
The sender of an RSCN may coalesce several events into a single RSCN message.
Each RSCN is a "request" that is acknowledged by the receiver with an accept or reject.
An RSCN is received by an Nx Port from the Fabric as an Extended Link Service (ELS) request [FC LS].
The Fabric distributes RSCNs between Switches using an SW ILS frame with an Inter Switch RSCN payload, also known as an SW RSCN [FC SW 4].
So, when a Switch has directly attached Nx Ports that have registered to receive RSCNs, it converts received SW RSCNs (i.e., SW ILS frames containing SW RSCN payloads) into ELS requests containing the corresponding RSCN which it sends to each such Nx Port.
The latest standard for an interconnecting Fabric containing multiple Fabric Switch elements is [FC SW 4].
[FC SW 4] carries forward the earlier specification for the operation of a single Fabric in a physical infrastructure, and augments it with the definition of Virtual Fabrics and with the specification of how multiple Virtual Fabrics can operate within one (or more) physical infrastructures.
The use of Virtual Fabrics provides for each frame to be tagged in its header to indicate which one of several Virtual Fabrics that frame is being transmitted on.
All frames entering a particular "Core Switch" [FC SW 4]
(i.e., a physical switch) on the same Virtual Fabric are processed by the same "Virtual Switch" within that Core Switch.
The first standardized MIB for Fibre Channel [RFC2837] was focused on Fibre Channel switches.
It was replaced by the more generic Fibre Channel Management MIB [RFC4044] which defines basic information for Fibre Channel hosts and switches, including extensions to the standard [IF MIB] for Fibre Channel interfaces.
[RFC4044] includes the specification of how the generic objects defined in [IF MIB] apply to Fibre Channel interfaces.
This MIB imports some common Textual Conventions defined in the T11 TC MIB [RFC4439] and in the T11 FC NAME SERVER MIB [RFC4438].
This section explains the use of a Fibre Channel management instance, a Switch Index, and a Fabric Index.
It also describes the four MIB groups contained in the MIB.
Fibre Channel Management Instance A Fibre Channel management instance is defined in [RFC4044] as a separable managed instance of Fibre Channel functionality.
Fibre Channel functionality may be grouped into Fibre Channel management instances in whatever way is most convenient for the implementation(s).
For example, one such grouping accommodates a single SNMP agent having multiple AgentX
[RFC2741] sub agents, with each sub agent implementing a different Fibre Channel management instance.
The object, fcmInstanceIndex, is IMPORTed from the FC MGMT MIB [RFC4044] as the index value to uniquely identify each Fibre Channel management instance, for example, within the same SNMP context ([RFC3411], section 3.3.1).
MIB [RFC4044] defines the fcmSwitchTable as a table of information about Fibre Channel switches which are managed by Fibre Channel management instances.
Each Fibre Channel management instance can manage one or more Fibre Channel switches.
The Switch Index, fcmSwitchIndex, is IMPORTed from the FC MGMT MIB as the index value to uniquely identify a Fibre Channel switch amongst those (one or more) managed by the same Fibre Channel management instance.
Whether operating on a Physical Fabric (i.e., without Virtual Fabrics) or within a Virtual Fabric, the manner of operation of RSCNs within a/each Fabric is identical.
Therefore, this MIB defines all Fabric related information in tables that are INDEXed by an arbitrary integer, named a "Fabric Index", the syntax of which is IMPORTed from the T11 TC MIB [RFC4439].
When a device is connected to a single Physical Fabric, without use of any Virtual Fabrics, the value of this Fabric Index will always be 1.
In an environment of multiple Virtual and/or Physical Fabrics, this index provides a means to distinguish one Fabric from another.
It is quite possible, and may even be likely, that a Fibre Channel switch will have ports connected to multiple Virtual and/or Physical Fabrics.
Thus, in order to simplify a management protocol query concerning all the Fabrics to which a single switch is connected, fcmSwitchIndex will be listed before t11FcRscnFabricIndex when they both appear in the same INDEX clause.
This group contains information about the Nx Ports which have registered to receive RSCNs.
This group contains two notifications: one generated when a switch rejects an SCR or RSCN; the other when a switch rejects an SW RSCN.
Flow Control for Notifications When defining SNMP notifications for events that occur in the data  plane
, the maximum frequency of their generation needs to be considered.
Unless there is some limiting factor, such notifications need to be flow controlled in some way, e.g., defined such that after some maximum number within a specified time interval have occurred, further notifications are suppressed for some subsequent time interval.
However, when such a suppression occurs, the Network Management System (NMS) that didn't receive the notifications (because they were suppressed) needs to be able to obtain an indication of how many were suppressed.
Therefore, an additional Counter32 object needs to be defined, and/or a new type of notification needs to be defined for use at the end of the interval.
While this is extra complexity, it is necessary for notifications that need to be flow controlled.
In contrast, for notifications such as both the ones defined in this MIB module, which are generated due to control plane events (and are not able to start a chain reaction), the extra complexity of flow  controlling these types of notifications is not warranted.
This group contains one object for each notification in the t11FcRscnNotifyGroup group to enable/disable that notification, as well as three objects that record information about the latest rejection of an SCR, RSCN or SW RSCN.
Specifically, they record the content (if available) of the rejected request, the source of the rejected request, and the reason for the rejection.
This group contains RSCN related statistics.
Two levels of statistics are included: 1) counters at the message type level, for: the number of SCRs received/rejected, the number of RSCNs sent/received/rejected, the number of SW RSCNs sent/received/rejected.
2) counters for each different category of sent/received RSCNs, where different categories are indicated by different values of the 'Event Qualifier' contained in an RSCN message.
Note that if and when several RSCN events are coalesced into a single RSCN message, then that message may be counted in more than one of these counters.
No counters are defined in this MIB for the 'Event Qualifier' value of '0001'b (meaning "Changed Name Server Object") because these types of RSCNs are counted by the t11NsInRscns and t11NsOutRscns objects already defined in [RFC4438].
MIB Module T11 FC RSCN MIB DEFINITIONS ::
fcmInstanceIndex, fcmSwitchIndex, FcNameIdOrZero, FcAddressIdOrZero    FROM FC MGMT MIB
FROM T11 FC NAME SERVER MIB
MODULE IDENTITY LAST UPDATED "200701080000Z" ORGANIZATION "
For the initial versions, T11.
For later versions, the IETF's IMSS Working Group.
, CA 95134 USA EMail:
cds@cisco.com Keith McCloghrie Cisco Systems, Inc. 170
West Tasman Drive San Jose, CA 95134
USA EMail: kzm@cisco.com" DESCRIPTION "The MIB module for the management of registrations by Nx Ports to receive RSCNs (Registered State Change Notifications) on a Fibre Channel Fabric, as defined in FC LS, and for the monitoring of RSCNs sent/received or rejected in a Fibre Channel Fabric.
This version of this MIB module is part of RFC 4983;  see the RFC itself for full legal notices."
A table of Nx Ports that have registered to receive RSCNs on all Fabrics configured on one or more Fibre Channel switches."
An entry containing information about one Nx Port that has registered with a particular switch (identified by values of fcmInstanceIndex and fcmSwitchIndex) for a particular Fabric (identified by a t11FcRscnFabricIndex value).
current DESCRIPTION "An index value that uniquely identifies a particular Fabric.
In a Fabric conformant to FC SW 4, multiple Virtual Fabrics can operate within one (or more) physical infrastructures.
In such a case, this index value is used to uniquely identify a particular Fabric within a physical infrastructure.
In a Fabric that has (or can have) only a single Fabric operating within the physical infrastructure, the value of this Fabric Index will always be 1.
The Fibre Channel Address Identifier of the registering Nx Port."
"This object indicates the type of registration desired by the registering Nx Port, one bit per type: 'fromFabricController'   RSCNs generated for events detected by the Fabric Controller. '
The RSCN related statistics on all Fabrics configured on one or more Fibre Channel switches.
Two levels of statistics are included: 1) counters at the message type level, for: the number of SCRs received/rejected, the number of RSCNs sent/received/rejected, the number of SW RSCNs sent/received/rejected.
2) counters of sent/received RSCNs per 'Event Qualifier' value.
Note that if and when several RSCN events are coalesced into a single RSCN message, then that message may be counted in more than one of these counters."
An entry containing statistics for a particular Fabric (identified by a t11FcRscnFabricIndex value) on a particular switch (identified by values of fcmInstanceIndex and fcmSwitchIndex).
"The number of SCRs received from Nx Ports by this switch on this Fabric.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0."
"The number of RSCNs received from Nx Ports by this switch on this Fabric.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0."
"The number of RSCNs transmitted to Nx Ports by this switch on this Fabric.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0."
"The number of SW RSCNs received by this switch from other switches on this Fabric.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0."
"The number of SW RSCNs transmitted by this switch from other switches on this Fabric.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0."
"The number of SCRs rejected by this switch on this Fabric.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0."
"The number of RSCNs rejected by this switch on this Fabric.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0."
"The number of SW RSCN rejected by this switch on this Fabric.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0."
"The number of Registered State Change Notifications (RSCNs) received by this switch on this Fabric which contained an RSCN Event Qualifier value of '0000'b meaning 'Event is not specified'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
"The number of Registered State Change Notifications (RSCNs) sent by this switch on this Fabric which contained an RSCN Event Qualifier value of '0000'b meaning 'Event is not specified'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
"The number of Registered State Change Notifications (RSCNs) received by this switch on this Fabric which contained an RSCN Event Qualifier value of '0002'b meaning 'Changed Port Attribute'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
"The number of Registered State Change Notifications (RSCNs) sent by this switch on this Fabric which contained an RSCN Event Qualifier value of '0002'b meaning 'Changed Port Attribute'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
"The number of Registered State Change Notifications (RSCNs) received by this switch on this Fabric which contained an RSCN Event Qualifier value of '0003'b meaning 'Changed Service Object'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
"The number of Registered State Change Notifications (RSCNs) sent by this switch on this Fabric which contained an RSCN Event Qualifier value of '0003'b meaning 'Changed Service Object'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
"The number of Registered State Change Notifications (RSCNs) received by this switch on this Fabric which contained an RSCN Event Qualifier value of '0004'b meaning 'Changed Switch Configuration'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
"The number of Registered State Change Notifications (RSCNs) sent by this switch on this Fabric which contained an RSCN Event Qualifier value of '0004'b meaning 'Changed Switch Configuration'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
"The number of Registered State Change Notifications (RSCNs) received by this switch on this Fabric which contained an RSCN Event Qualifier value of '0005'b meaning 'Removed Object'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
"The number of Registered State Change Notifications (RSCNs) sent by this switch on this Fabric which contained an RSCN Event Qualifier value of '0005'b meaning 'Removed Object'.
This counter has no discontinuities other than those that all Counter32s have when sysUpTime 0.
A table of control information for notifications generated due to the rejection of an SCR or RSCN."
"Each entry contains notification control information concerning the rejection of RSCN/SCRs for a particular Fabric (identified by the value of t11FcRscnFabricIndex) by a particular switch (identified by values of fcmInstanceIndex and fcmSwitchIndex).
OCTET STRING } t11FcRscnIlsRejectNotifyEnable OBJECT TYPE SYNTAX
"This object specifies if a t11FcRscnIlsRejectReqNotify notification should be generated when this switch rejects an SW RSCN on this Fabric.
Values written to this object should be retained over agent reboots.
"This object specifies if a t11FcRscnElsRejectReqNotify notification should be generated when this switch rejects an RSCN or SCR on this Fabric.
Values written to this object should be retained over agent reboots.
"The binary content of the RSCN, SCR, or SW RSCN that was most recently rejected by this switch on this Fabric.
The value is formatted as an octet string (in network byte order) as described in the relevant Fibre Channel standard, containing the payload (which is typically a list of affected ports and error codes) of the rejected RSCN or SCR as described in FC LS, or the rejected SW RSCN as described in FC SW 4.
This object contains the zero length string if and when the RSCN/SCR/SW RSCN payload is unavailable.
When the length of this object is 255 octets, it contains the first 255 octets of the payload (in network byte order).
" REFERENCE "ANSI INCITS 433 2007, Fibre Channel Link Services (FC LS), July 2007, Tables 34 & 39.
The WWN that was the source of the RSCN, SCR, or SW RSCN that was most recently rejected by this switch on this Fabric."
"This object contains the Reason Code of the most recent rejection by this switch of an RSCN, SCR or SW RSCN on this Fabric.
" REFERENCE "ANSI INCITS 433 2007, Fibre Channel Link Services (FC LS), July 2007, Table 146.
"This object contains the Reason Code Explanation of the most recent rejection by this switch of an RSCN, SCR or SW RSCN on this Fabric.
" REFERENCE "ANSI INCITS 433 2007, Fibre Channel Link Services (FC LS), July 2007, Table 147.
{ t11FcRscnNotifyControlEntry 6 } t11FcRscnRejectReasonVendorCode OBJECT TYPE SYNTAX
"This object contains the Reason Vendor Specific Code of the most recent rejection by this switch of an RSCN, SCR or SW RSCN on this Fabric.
" REFERENCE "ANSI INCITS 433 2007, Fibre Channel Link Services (FC LS), July 2007, Table 148.
NOTIFICATION TYPE OBJECTS { t11FcRscnRejectedRequestString, t11FcRscnRejectedRequestSource, t11FcRscnRejectReasonCode, t11FcRscnRejectReasonCodeExp,
t11FcRscnRejectReasonVendorCode } STATUS  current DESCRIPTION
"This notification is generated when a switch rejects an SCR or RSCN.
The value of t11FcRscnRejectedRequestString indicates the binary content of the rejected request if available, or the zero length string otherwise.
The source of the rejected request is given by t11FcRscnRejectedRequestSource, and the reason for rejection is given by the values of t11FcRscnRejectReasonCode, t11FcRscnRejectReasonCodeExp and t11FcRscnRejectReasonVendorCode."
NOTIFICATION TYPE OBJECTS { t11FcRscnRejectedRequestString, t11FcRscnRejectedRequestSource, t11FcRscnRejectReasonCode, t11FcRscnRejectReasonCodeExp,
t11FcRscnRejectReasonVendorCode } STATUS  current DESCRIPTION
"This notification is generated when a switch rejects an SW RSCN.
The value of t11FcRscnRejectedRequestString indicates the binary content of the rejected request if available, or the zero length string otherwise.
The source of the rejected request is given by t11FcRscnRejectedRequestSource, and the reason for rejection is given by the values of t11FcRscnRejectReasonCode, t11FcRscnRejectReasonCodeExp and t11FcRscnRejectReasonVendorCode."
MODULE COMPLIANCE STATUS    current DESCRIPTION
"The compliance statement for entities that implement this MIB."
MODULE MANDATORY GROUPS { t11FcRscnRegistrationGroup, t11FcRscnNotifyControlGroup
, t11FcRscnNotifyGroup } GROUP   t11FcRscnStatsGroup DESCRIPTION "
These counters, containing RSCN related statistics, are mandatory only for those systems that count such events."
MIN ACCESS   read only DESCRIPTION
"Write access is not required."
MIN ACCESS   read only DESCRIPTION "Write access is not required."
GROUP OBJECTS { t11FcRscnRegType } STATUS  current DESCRIPTION
OBJECT GROUP OBJECTS { t11FcRscnIlsRejectNotifyEnable, t11FcRscnElsRejectNotifyEnable, t11FcRscnRejectedRequestString, t11FcRscnRejectedRequestSource, t11FcRscnRejectReasonCode, t11FcRscnRejectReasonCodeExp,
t11FcRscnRejectReasonVendorCode } STATUS  current DESCRIPTION
There are a number of management objects defined in this MIB module with a MAX ACCESS clause of read write and/or read create.
Such objects may be considered sensitive or vulnerable in some network environments.
The support for SET operations in a non secure environment without proper protection can have a negative effect on network operations.
These objects and their sensitivity/vulnerability are: t11FcRscnIlsRejectNotifyEnable t11FcRscnElsRejectNotifyEnable   ability to enable/disable a notification; these object, if misconfigured, would either generate unwanted notifications or suppress wanted notifications.
Some of the readable objects in this MIB module (i.e., objects with a MAX ACCESS other than not accessible) may also be considered sensitive or vulnerable in some network environments.
It is thus important to control
even GET and/or NOTIFY access to these objects and possibly to even encrypt the values of these objects when sending them over the network via SNMP.
These are the tables and objects and their sensitivity/vulnerability:
t11FcRscnRegTable   contains a list of Nx Ports that are currently registered to received RSCNs.
t11FcRscnStatsTable   contains RSCN related statistics.
t11FcRscnNotifyControlTable   contains control and logging information for notifications that are concerned with the rejection of RSCN related requests.
SNMP versions prior to SNMPv3 did not include adequate security.
Even if the network itself is secure (for example by using IPsec), even then, there is no control as to who on the secure network is allowed to access and
the objects in this MIB module.
It is RECOMMENDED that implementors consider the security features as provided by the SNMPv3 framework (see [RFC3410], section 8), including full support for the SNMPv3 cryptographic mechanisms (for authentication and privacy).
Further, deployment of SNMP versions prior to SNMPv3 is NOT RECOMMENDED.
Instead, it is RECOMMENDED to deploy SNMPv3 and to enable cryptographic security.
It is then a customer/operator responsibility to ensure that the SNMP entity giving access to an instance of this MIB module is properly configured to give access to the objects only to those principals (users) that have legitimate rights to indeed GET or SET
