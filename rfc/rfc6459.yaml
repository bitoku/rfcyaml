- title: __initial_text__
  contents:
  - "           IPv6 in 3rd Generation Partnership Project (3GPP)\n              \
    \        Evolved Packet System (EPS)\n"
- title: Abstract
  contents:
  - "Abstract\n   The use of cellular broadband for accessing the Internet and other\n\
    \   data services via smartphones, tablets, and notebook/netbook\n   computers\
    \ has increased rapidly as a result of high-speed packet data\n   networks such\
    \ as HSPA, HSPA+, and now Long-Term Evolution (LTE) being\n   deployed.  Operators\
    \ that have deployed networks based on 3rd\n   Generation Partnership Project\
    \ (3GPP) network architectures are\n   facing IPv4 address shortages at the Internet\
    \ registries and are\n   feeling pressure to migrate to IPv6.  This document describes\
    \ the\n   support for IPv6 in 3GPP network architectures.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc6459.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2012 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n\
    \   2. 3GPP Terminology and Concepts ...................................5\n  \
    \    2.1. Terminology ................................................5\n    \
    \  2.2. The Concept of APN ........................................10\n   3. IP\
    \ over 3GPP GPRS ..............................................11\n      3.1.\
    \ Introduction to 3GPP GPRS .................................11\n      3.2. PDP\
    \ Context ...............................................12\n   4. IP over 3GPP\
    \ EPS ...............................................13\n      4.1. Introduction\
    \ to 3GPP EPS ..................................13\n      4.2. PDN Connection\
    \ ............................................14\n      4.3. EPS Bearer Model\
    \ ..........................................15\n   5. Address Management .............................................16\n\
    \      5.1. IPv4 Address Configuration ................................16\n  \
    \    5.2. IPv6 Address Configuration ................................16\n    \
    \  5.3. Prefix Delegation .........................................17\n      5.4.\
    \ IPv6 Neighbor Discovery Considerations ....................18\n   6. 3GPP Dual-Stack\
    \ Approach to IPv6 ...............................18\n      6.1. 3GPP Networks\
    \ Prior to Release-8 ..........................18\n      6.2. 3GPP Release-8 and\
    \ -9 Networks ............................20\n      6.3. PDN Connection Establishment\
    \ Process ......................21\n      6.4. Mobility of 3GPP IPv4v6 Bearers\
    \ ...........................23\n   7. Dual-Stack Approach to IPv6 Transition\
    \ in 3GPP Networks ........24\n   8. Deployment Issues ..............................................25\n\
    \      8.1. Overlapping IPv4 Addresses ................................25\n  \
    \    8.2. IPv6 for Transport ........................................26\n    \
    \  8.3. Operational Aspects of Running Dual-Stack Networks ........26\n      8.4.\
    \ Operational Aspects of Running a Network with\n           IPv6-Only Bearers\
    \ .........................................27\n      8.5. Restricting Outbound\
    \ IPv6 Roaming .........................28\n      8.6. Inter-RAT Handovers and\
    \ IP Versions .......................29\n      8.7. Provisioning of IPv6 Subscribers\
    \ and Various\n           Combinations during Initial Network Attachment ............29\n\
    \   9. Security Considerations ........................................31\n  \
    \ 10. Summary and Conclusions .......................................32\n   11.\
    \ Acknowledgements ..............................................32\n   12. Informative\
    \ References ........................................33\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   IPv6 support has been part of the 3rd Generation Partnership\
    \ Project\n   (3GPP) standards since the first release of the specifications\n\
    \   (Release 99).  This support extends to all radio access and packet-\n   based\
    \ system variants of the 3GPP architecture family.  In addition,\n   a lot of\
    \ work has been invested by the industry to investigate\n   different transition\
    \ and deployment scenarios over the years.\n   However, IPv6 deployment in commercial\
    \ networks remains low.  There\n   are many factors that can be attributed to\
    \ this lack of deployment.\n   The most relevant factor is essentially the same\
    \ as the reason for\n   IPv6 not being deployed in other networks either, i.e.,\
    \ the lack of\n   business and commercial incentives for deployment.\n   3GPP\
    \ network architectures have continued to evolve in the time since\n   Release\
    \ 99, which was finalized in early 2000.  The most recent\n   version of the 3GPP\
    \ architecture, the Evolved Packet System (EPS) --\n   commonly referred to as\
    \ System Architecture Evolution (SAE), Long-\n   Term Evolution (LTE), or Release-8\
    \ -- is a packet-centric\n   architecture.  In addition, the number of subscribers\
    \ and devices\n   using the 3GPP networks for Internet connectivity and data services\n\
    \   has also increased phenomenally -- the number of mobile broadband\n   subscribers\
    \ has increased exponentially over the last couple of\n   years.\n   With subscriber\
    \ growth projected to increase even further, and with\n   recent depletion of\
    \ available IPv4 address space by IANA, 3GPP\n   operators and vendors are now\
    \ in the process of identifying the\n   scenarios and solutions needed to deploy\
    \ IPv6.\n   This document describes the establishment of IP connectivity in 3GPP\n\
    \   network architectures, specifically in the context of IP bearers for\n   3G\
    \ General Packet Radio Service (GPRS) and for EPS.  It provides an\n   overview\
    \ of how IPv6 is supported as per the current set of 3GPP\n   specifications.\
    \  Some of the issues and concerns with respect to\n   deployment and shortage\
    \ of private IPv4 addresses within a single\n   network domain are also discussed.\n\
    \   The IETF has specified a set of tools and mechanisms that can be\n   utilized\
    \ for transitioning to IPv6.  In addition to operating dual-\n   stack networks\
    \ during the transition from IPv4 to IPv6, the two\n   alternative categories\
    \ for the transition are encapsulation and\n   translation.  The IETF continues\
    \ to specify additional solutions for\n   enabling the transition based on the\
    \ deployment scenarios and\n   operator/ISP requirements.  There is no single\
    \ approach for\n   transition to IPv6 that can meet the needs for all deployments\
    \ and\n   models.  The 3GPP scenarios for transition, described in [TR.23975],\n\
    \   can be addressed using transition mechanisms that are already\n   available\
    \ in the toolbox.  The objective of transition to IPv6 in\n   3GPP networks is\
    \ to ensure that:\n   1.  Legacy devices and hosts that have an IPv4-only stack\
    \ will\n       continue to be provided with IP connectivity to the Internet and\n\
    \       services.\n   2.  Devices that are dual-stack can access the Internet\
    \ either via\n       IPv6 or IPv4.  The choice of using IPv6 or IPv4 depends on\
    \ the\n       capability of:\n       A.  the application on the host,\n      \
    \ B.  the support for IPv4 and IPv6 bearers by the network, and/or\n       C.\
    \  the server(s) and other end points.\n   3GPP networks are capable of providing\
    \ a host with IPv4 and IPv6\n   connectivity today, albeit in many cases with\
    \ upgrades to network\n   elements such as the Serving GPRS Support Node (SGSN)\
    \ and the Gateway\n   GPRS Support Node (GGSN).\n"
- title: 2.  3GPP Terminology and Concepts
  contents:
  - '2.  3GPP Terminology and Concepts

    '
- title: 2.1.  Terminology
  contents:
  - "2.1.  Terminology\n   Access Point Name\n      The Access Point Name (APN) is\
    \ a Fully Qualified Domain Name\n      (FQDN) and resolves to a set of gateways\
    \ in an operator's network.\n      The APNs are piggybacked on the administration\
    \ of the DNS\n      namespace.\n   Dual Address PDN/PDP Type\n      The dual address\
    \ Packet Data Network/Packet Data Protocol (PDN/\n      PDP) Type (IPv4v6) is\
    \ used in 3GPP context in many cases as a\n      synonym for dual-stack, i.e.,\
    \ a connection type capable of serving\n      both IPv4 and IPv6 simultaneously.\n\
    \   Evolved Packet Core\n      The Evolved Packet Core (EPC) is an evolution of\
    \ the 3GPP GPRS\n      system characterized by a higher-data-rate, lower-latency,\
    \ packet-\n      optimized system.  The EPC comprises subcomponents such as the\n\
    \      Mobility Management Entity (MME), Serving Gateway (SGW), Packet\n     \
    \ Data Network Gateway (PDN-GW), and Home Subscriber Server (HSS).\n   Evolved\
    \ Packet System\n      The Evolved Packet System (EPS) is an evolution of the\
    \ 3GPP GPRS\n      system characterized by a higher-data-rate, lower-latency,\
    \ packet-\n      optimized system that supports multiple Radio Access Technologies\n\
    \      (RATs).  The EPS comprises the EPC together with the Evolved\n      Universal\
    \ Terrestrial Radio Access (E-UTRA) and the Evolved\n      Universal Terrestrial\
    \ Radio Access Network (E-UTRAN).\n   Evolved UTRAN\n      The Evolved UTRAN (E-UTRAN)\
    \ is a communications network, sometimes\n      referred to as 4G, and consists\
    \ of eNodeBs (4G base stations),\n      which make up the E-UTRAN.  The E-UTRAN\
    \ allows connectivity\n      between the User Equipment and the core network.\n\
    \   GPRS Tunnelling Protocol\n      The GPRS Tunnelling Protocol (GTP) [TS.29060]\
    \ [TS.29274]\n      [TS.29281] is a tunnelling protocol defined by 3GPP.  It is\
    \ a\n      network-based mobility protocol and is similar to Proxy Mobile\n  \
    \    IPv6 (PMIPv6) [RFC5213].  However, GTP also provides functionality\n    \
    \  beyond mobility, such as in-band signaling related to Quality of\n      Service\
    \ (QoS) and charging, among others.\n   GSM EDGE Radio Access Network\n      The\
    \ Global System for Mobile Communications (GSM) EDGE Radio\n      Access Network\
    \ (GERAN) is a communications network, commonly\n      referred to as 2G or 2.5G,\
    \ and consists of base stations and Base\n      Station Controllers (BSCs), which\
    \ make up the GSM EDGE radio\n      access network.  The GERAN allows connectivity\
    \ between the User\n      Equipment and the core network.\n   Gateway GPRS Support\
    \ Node\n      The Gateway GPRS Support Node (GGSN) is a gateway function in the\n\
    \      GPRS that provides connectivity to the Internet or other PDNs.\n      The\
    \ host attaches to a GGSN identified by an APN assigned to it by\n      an operator.\
    \  The GGSN also serves as the topological anchor for\n      addresses/prefixes\
    \ assigned to the User Equipment.\n   General Packet Radio Service\n      The\
    \ General Packet Radio Service (GPRS) is a packet-oriented\n      mobile data\
    \ service available to users of the 2G and 3G cellular\n      communication systems\
    \ -- the GSM -- specified by 3GPP.\n   High-Speed Packet Access\n      The High-Speed\
    \ Packet Access (HSPA) and HSPA+ are enhanced\n      versions of the Wideband\
    \ Code Division Multiple Access (WCDMA) and\n      UTRAN, thus providing more\
    \ data throughput and lower latencies.\n   Home Location Register\n      The Home\
    \ Location Register (HLR) is a pre-Release-5 database (but\n      is also used\
    \ in Release-5 and later networks in real deployments)\n      that contains subscriber\
    \ data and information related to call\n      routing.  All subscribers of an\
    \ operator, and the subscribers'\n      enabled services, are provisioned in the\
    \ HLR.\n   Home Subscriber Server\n      The Home Subscriber Server (HSS) is a\
    \ database for a given\n      subscriber and was introduced in 3GPP Release-5.\
    \  It is the entity\n      containing the subscription-related information to\
    \ support the\n      network entities actually handling calls/sessions.\n   Mobility\
    \ Management Entity\n      The Mobility Management Entity (MME) is a network element\
    \ that is\n      responsible for control-plane functionalities, including\n  \
    \    authentication, authorization, bearer management, layer-2\n      mobility,\
    \ etc.  The MME is essentially the control-plane part of\n      the SGSN in the\
    \ GPRS.  The user-plane traffic bypasses the MME.\n   Mobile Terminal\n      The\
    \ Mobile Terminal (MT) is the modem and the radio part of the\n      Mobile Station\
    \ (MS).\n   Public Land Mobile Network\n      The Public Land Mobile Network (PLMN)\
    \ is a network that is\n      operated by a single administration.  A PLMN (and\
    \ therefore also\n      an operator) is identified by the Mobile Country Code\
    \ (MCC) and\n      the Mobile Network Code (MNC).  Each (telecommunications) operator\n\
    \      providing mobile services has its own PLMN.\n   Policy and Charging Control\n\
    \      The Policy and Charging Control (PCC) framework is used for QoS\n     \
    \ policy and charging control.  It has two main functions: flow-\n      based\
    \ charging, including online credit control; and policy\n      control (e.g.,\
    \ gating control, QoS control, and QoS signaling).\n      It is optional to 3GPP\
    \ EPS but needed if dynamic policy and\n      charging control by means of PCC\
    \ rules based on user and services\n      are desired.\n   Packet Data Network\n\
    \      The Packet Data Network (PDN) is a packet-based network that\n      either\
    \ belongs to the operator or is an external network such as\n      the Internet\
    \ or a corporate intranet.  The user eventually\n      accesses services in one\
    \ or more PDNs.  The operator's packet core\n      networks are separated from\
    \ packet data networks either by GGSNs\n      or PDN Gateways (PDN-GWs).\n   Packet\
    \ Data Network Gateway\n      The Packet Data Network Gateway (PDN-GW) is a gateway\
    \ function in\n      the Evolved Packet System (EPS), which provides connectivity\
    \ to\n      the Internet or other PDNs.  The host attaches to a PDN-GW\n     \
    \ identified by an APN assigned to it by an operator.  The PDN-GW\n      also\
    \ serves as the topological anchor for addresses/prefixes\n      assigned to the\
    \ User Equipment.\n   Packet Data Protocol Context\n      A Packet Data Protocol\
    \ (PDP) context is the equivalent of a\n      virtual connection between the User\
    \ Equipment (UE) and a PDN using\n      a specific gateway.\n   Packet Data Protocol\
    \ Type\n      A Packet Data Protocol Type (PDP Type) identifies the used/allowed\n\
    \      protocols within the PDP context.  Examples are IPv4, IPv6, and\n     \
    \ IPv4v6 (dual-stack).\n   S4 Serving GPRS Support Node\n      The S4 Serving\
    \ GPRS Support Node (S4-SGSN) is compliant with a\n      Release-8 (and onwards)\
    \ SGSN that connects 2G/3G radio access\n      networks to the EPC via new Release-8\
    \ interfaces like S3, S4,\n      and S6d.\n   Serving Gateway\n      The Serving\
    \ Gateway (SGW) is a gateway function in the EPS, which\n      terminates the\
    \ interface towards the E-UTRAN.  The SGW is the\n      Mobility Anchor point\
    \ for layer-2 mobility (inter-eNodeB\n      handovers).  For each UE connected\
    \ with the EPS, at any given\n      point in time, there is only one SGW.  The\
    \ SGW is essentially the\n      user-plane part of the GPRS's SGSN.\n   Serving\
    \ GPRS Support Node\n      The Serving GPRS Support Node (SGSN) is a network element\
    \ that is\n      located between the radio access network (RAN) and the gateway\n\
    \      (GGSN).  A per-UE point-to-point (p2p) tunnel between the GGSN and\n  \
    \    SGSN transports the packets between the UE and the gateway.\n   Terminal\
    \ Equipment\n      The Terminal Equipment (TE) is any device/host connected to\
    \ the\n      Mobile Terminal (MT) offering services to the user.  A TE may\n \
    \     communicate to an MT, for example, over the Point to Point\n      Protocol\
    \ (PPP).\n   UE, MS, MN, and Mobile\n      The terms UE (User Equipment), MS (Mobile\
    \ Station), MN (Mobile\n      Node), and mobile refer to the devices that are\
    \ hosts with the\n      ability to obtain Internet connectivity via a 3GPP network.\
    \  A MS\n      is comprised of the Terminal Equipment (TE) and a Mobile Terminal\n\
    \      (MT).  The terms UE, MS, MN, and mobile are used interchangeably\n    \
    \  within this document.\n   UMTS Terrestrial Radio Access Network\n      The\
    \ Universal Mobile Telecommunications System (UMTS) Terrestrial\n      Radio Access\
    \ Network (UTRAN) is a communications network, commonly\n      referred to as\
    \ 3G, and consists of NodeBs (3G base stations) and\n      Radio Network Controllers\
    \ (RNCs), which make up the UMTS radio\n      access network.  The UTRAN allows\
    \ connectivity between the UE and\n      the core network.  The UTRAN is comprised\
    \ of WCDMA, HSPA, and\n      HSPA+ radio technologies.\n   User Plane\n      The\
    \ user plane refers to data traffic and the required bearers for\n      the data\
    \ traffic.  In practice, IP is the only data traffic\n      protocol used in the\
    \ user plane.\n   Wideband Code Division Multiple Access\n      The Wideband Code\
    \ Division Multiple Access (WCDMA) is the radio\n      interface used in UMTS\
    \ networks.\n   eNodeB\n      The eNodeB is a base station entity that supports\
    \ the Long-Term\n      Evolution (LTE) air interface.\n"
- title: 2.2.  The Concept of APN
  contents:
  - "2.2.  The Concept of APN\n   The Access Point Name (APN) essentially refers to\
    \ a gateway in the\n   3GPP network.  The 'complete' APN is expressed in a form\
    \ of a Fully\n   Qualified Domain Name (FQDN) and also piggybacked on the\n  \
    \ administration of the DNS namespace, thus effectively allowing the\n   discovery\
    \ of gateways using the DNS.  The UE can choose to attach to\n   a specific gateway\
    \ in the packet core.  The gateway provides\n   connectivity to the Packet Data\
    \ Network (PDN), such as the Internet.\n   An operator may also include gateways\
    \ that do not provide Internet\n   connectivity but rather provide connectivity\
    \ to a closed network\n   providing a set of the operator's own services.  A UE\
    \ can be attached\n   to one or more gateways simultaneously.  The gateway in\
    \ a 3GPP\n   network is the GGSN or PDN-GW.  Figure 1 illustrates the APN-based\n\
    \   network connectivity concept.\n                                          \
    \                  .--.\n                                                    \
    \      _(.   `)\n                        .--.         +------------+     _(  \
    \ PDN  `)_\n                      _(Core`.       |GW1         |====(  Internet\
    \   `)\n           +---+     (   NW   )------|APN=internet|   ( `  .        )\
    \  )\n   [UE]~~~~|RAN|----( `  .  )  )--+  +------------+    `--(_______)---'\n\
    \    ^      +---+     `--(___.-'   |\n    |                             |    \
    \                   .--.\n    |                             |  +----------+  \
    \     _(.PDN`)\n    |                             +--|GW2       |     _(Operator`)_\n\
    \    |                                |APN=OpServ|====(  Services   `)\n   UE\
    \ is attached                    +----------+   ( `  .        )  )\n   to GW1\
    \ and GW2                                    `--(_______)---'\n   simultaneously\n\
    \     Figure 1: User Equipment Attached to Multiple APNs Simultaneously\n"
- title: 3.  IP over 3GPP GPRS
  contents:
  - '3.  IP over 3GPP GPRS

    '
- title: 3.1.  Introduction to 3GPP GPRS
  contents:
  - "3.1.  Introduction to 3GPP GPRS\n   A simplified 2G/3G GPRS architecture is illustrated\
    \ in Figure 2.\n   This architecture basically covers the GPRS core network from\
    \ R99 to\n   Release-7, and radio access technologies such as GSM (2G), EDGE (2G,\n\
    \   often referred to as 2.5G), WCDMA (3G), and HSPA(+) (3G, often\n   referred\
    \ to as 3.5G).  The architecture shares obvious similarities\n   with the Evolved\
    \ Packet System (EPS), as will be seen in Section 4.\n   Based on Gn/Gp interfaces,\
    \ the GPRS core network functionality is\n   logically implemented on two network\
    \ nodes -- the SGSN and the GGSN.\n                     3G\n                 \
    \   .--.                                     .--.\n             Uu   _(    `.\
    \  Iu   +----+      +----+        _(    `.\n       [UE]~~|~~~(  UTRAN )--|---|SGSN|--|---|GGSN|--|----(\
    \   PDN  )\n                ( `  .  )  )     +----+  Gn  +----+  Gi  ( `  .  )\
    \  )\n                 `--(___.-'        / |                    `--(___.-'\n \
    \                                 /  |\n                     2G       Gb--   |\n\
    \                    .--.       /     |\n                  _(    `.    /     \
    \ --Gp\n       [UE]~~|~~~(   PDN  )__/       |\n             Um ( `  .  )  ) \
    \       .--.\n                 `--(___.-'       _(.   `)\n                   \
    \             _( [GGSN] `)_\n                               (    other    `)\n\
    \                              ( `  . PLMN   )  )\n                          \
    \     `--(_______)---'\n         Figure 2: Overview of the 2G/3G GPRS Logical\
    \ Architecture\n   Gn/Gp:  Interfaces that provide a network-based mobility service\
    \ for\n           a UE and are used between an SGSN and a GGSN.  The Gn\n    \
    \       interface is used when the GGSN and SGSN are located inside\n        \
    \   one operator (i.e., a PLMN).  The Gp-interface is used if the\n          \
    \ GGSN and the SGSN are located in different operator domains\n           (i.e.,\
    \ a different PLMN).  GTP is defined for the Gn/Gp\n           interfaces (both\
    \ GTP-C for the control plane and GTP-U for\n           the user plane).\n   Gb:\
    \     The Base Station System (BSS)-to-SGSN interface, which is\n           used\
    \ to carry information concerning packet data transmission\n           and layer-2\
    \ mobility management.  The Gb-interface is based\n           on either Frame\
    \ Relay or IP.\n   Iu:     The Radio Network System (RNS)-to-SGSN interface, which\
    \ is\n           used to carry information concerning packet data transmission\n\
    \           and layer-2 mobility management.  The user-plane part of the\n   \
    \        Iu-interface (actually the Iu-PS) is based on GTP-U.  The\n         \
    \  control-plane part of the Iu-interface is based on the Radio\n           Access\
    \ Network Application Protocol (RANAP).\n   Gi:     The interface between the\
    \ GGSN and a PDN.  The PDN may be an\n           operator's external public or\
    \ private packet data network, or\n           an intra-operator packet data network.\n\
    \   Uu/Um:  2G or 3G radio interfaces between a UE and a respective radio\n  \
    \         access network.\n   The SGSN is responsible for the delivery of data\
    \ packets from and to\n   the UE within its geographical service area when a direct\
    \ tunnel\n   option is not used.  If the direct tunnel is used, then the user\n\
    \   plane goes directly between the RNC (in the RNS) and the GGSN.  The\n   control-plane\
    \ traffic always goes through the SGSN.  For each UE\n   connected with the GPRS,\
    \ at any given point in time, there is only\n   one SGSN.\n"
- title: 3.2.  PDP Context
  contents:
  - "3.2.  PDP Context\n   A PDP (Packet Data Protocol) context is an association\
    \ between a UE\n   represented by one IPv4 address and/or one /64 IPv6 prefix,\
    \ and a PDN\n   represented by an APN.  Each PDN can be accessed via a gateway\n\
    \   (typically a GGSN or PDN-GW).  On the UE, a PDP context is equivalent\n  \
    \ to a network interface.  A UE may hence be attached to one or more\n   gateways\
    \ via separate connections, i.e., PDP contexts. 3GPP GPRS\n   supports PDP Types\
    \ IPv4, IPv6, and since Release-9, PDP Type IPv4v6\n   (dual-stack) as well.\n\
    \   Each primary PDP context has its own IPv4 address and/or one /64 IPv6\n  \
    \ prefix assigned to it by the PDN and anchored in the corresponding\n   gateway.\
    \  The GGSN or PDN-GW is the first-hop router for the UE.\n   Applications on\
    \ the UE use the appropriate network interface (PDP\n   context) for connectivity\
    \ to a specific PDN.  Figure 3 represents a\n   high-level view of what a PDP\
    \ context implies in 3GPP networks.\n        Y\n        |                    \
    \           +---------+       .--.\n        |--+ __________________________ |\
    \ APNx in |     _(    `.\n        |  |O______PDPc1_______________)| GGSN /  |----(Internet)\n\
    \        |  |                            | PDN-GW  |   ( `  .  )  )\n        |UE|\
    \                            +---------+    `--(___.-'\n        |  | _______________________\
    \ +---------+          .--.\n        |  |O______PDPc2____________)| APNy in |\
    \        _(Priv`.\n        +--+                         | GGSN /  |-------(Network\
    \ )\n                                     | PDN-GW  |      ( `  .  )  )\n    \
    \                                 +---------+       `--(___.-'\n           Figure\
    \ 3: PDP Contexts between the MS/UE and Gateway\n   In the above figure, there\
    \ are two PDP contexts at the MS/UE: the\n   'PDPc1' PDP context, which is connected\
    \ to APNx, provides Internet\n   connectivity, and the 'PDPc2' PDP context provides\
    \ connectivity to a\n   private IP network via APNy (as an example, this network\
    \ may include\n   operator-specific services, such as the MMS (Multimedia Messaging\n\
    \   Service)).  An application on the host, such as a web browser, would\n   use\
    \ the PDP context that provides Internet connectivity for accessing\n   services\
    \ on the Internet.  An application such as a MMS would use\n   APNy in the figure\
    \ above, because the service is provided through the\n   private network.\n"
- title: 4.  IP over 3GPP EPS
  contents:
  - '4.  IP over 3GPP EPS

    '
- title: 4.1.  Introduction to 3GPP EPS
  contents:
  - "4.1.  Introduction to 3GPP EPS\n   In its most basic form, the EPS architecture\
    \ consists of only two\n   nodes on the user plane: a base station and a core\
    \ network Gateway\n   (GW).  The basic EPS architecture is illustrated in Figure\
    \ 4.  The\n   functional split of gateways allows operators to choose optimized\n\
    \   topological locations of nodes within the network and enables various\n  \
    \ deployment models, including the sharing of radio networks between\n   different\
    \ operators.  This also allows independent scaling, growth of\n   traffic throughput,\
    \ and control-signal processing.\n                                           \
    \                   +--------+\n                                             \
    \                 |   IP   |\n                         S1-MME  +-------+  S11\
    \               |Services|\n                       +----|----|  MME  |----|----+\
    \          +--------+\n                       |         |       |         |  \
    \             |SGi\n                       |         +-------+         |     \
    \ S5/      |\n    +----+ LTE-Uu +-------+ S1-U                +-------+  S8  +-------+\n\
    \    |UE  |----|---|eNodeB |---|-----------------| SGW   |--|---|PDN-GW |\n  \
    \  |    |========|=======|=====================|=======|======|       |\n    +----+\
    \        +-------+Dual-Stack EPS Bearer+-------+      +-------+\n            \
    \    Figure 4: EPS Architecture for 3GPP Access\n   S5/S8:   Provides user-plane\
    \ tunnelling and tunnel management between\n            the SGW and PDN-GW, using\
    \ GTP (both GTP-U and GTP-C) or\n            PMIPv6 [RFC5213] [TS.23402] as the\
    \ network-based mobility\n            management protocol.  The S5 interface is\
    \ used when the\n            PDN-GW and SGW are located inside one operator (i.e.,\
    \ a\n            PLMN).  The S8-interface is used if the PDN-GW and the SGW\n\
    \            are located in different operator domains (i.e., a different\n  \
    \          PLMN).\n   S11:     Reference point for the control-plane protocol\
    \ between the\n            MME and SGW, based on GTP-C (GTP control plane) and\
    \ used,\n            for example, during the establishment or modification of\
    \ the\n            default bearer.\n   S1-U:    Provides user-plane tunnelling\
    \ and inter-eNodeB path\n            switching during handover between the eNodeB\
    \ and SGW, using\n            GTP-U (GTP user plane).\n   S1-MME:  Reference point\
    \ for the control-plane protocol between the\n            eNodeB and MME.\n  \
    \ SGi:     The interface between the PDN-GW and the PDN.  The PDN may\n      \
    \      be an operator-external public or private packet data\n            network\
    \ or an intra-operator packet data network.\n"
- title: 4.2.  PDN Connection
  contents:
  - "4.2.  PDN Connection\n   A PDN connection is an association between a UE represented\
    \ by one\n   IPv4 address and/or one /64 IPv6 prefix, and a PDN represented by\
    \ an\n   APN.  The PDN connection is the EPC equivalent of the GPRS PDP\n   context.\
    \  Each PDN can be accessed via a gateway (a PDN-GW).  The PDN\n   is responsible\
    \ for the IP address/prefix allocation to the UE.  On\n   the UE, a PDN connection\
    \ is equivalent to a network interface.  A UE\n   may hence be attached to one\
    \ or more gateways via separate\n   connections, i.e., PDN connections. 3GPP EPS\
    \ supports PDN Types IPv4,\n   IPv6, and IPv4v6 (dual-stack) since the beginning\
    \ of EPS, i.e., since\n   Release-8.\n   Each PDN connection has its own IP address/prefix\
    \ assigned to it by\n   the PDN and anchored in the corresponding gateway.  In\
    \ the case of\n   the GTP-based S5/S8 interface, the PDN-GW is the first-hop router\
    \ for\n   the UE, and in the case of PMIPv6-based S5/S8, the SGW is the first-\n\
    \   hop router.  Applications on the UE use the appropriate network\n   interface\
    \ (PDN connection) for connectivity.\n"
- title: 4.3.  EPS Bearer Model
  contents:
  - "4.3.  EPS Bearer Model\n   The logical concept of a bearer has been defined to\
    \ be an aggregate\n   of one or more IP flows related to one or more services.\
    \  An EPS\n   bearer exists between the UE and the PDN-GW and is used to provide\n\
    \   the same level of packet-forwarding treatment to the aggregated IP\n   flows\
    \ constituting the bearer.  Services with IP flows requiring\n   different packet-forwarding\
    \ treatment would therefore require more\n   than one EPS bearer.  The UE performs\
    \ the binding of the uplink IP\n   flows to the bearer, while the PDN-GW performs\
    \ this function for the\n   downlink packets.\n   In order to always provide low\
    \ latency on connectivity, a default\n   bearer will be provided at the time of\
    \ startup, and an IPv4 address\n   and/or IPv6 prefix gets assigned to the UE\
    \ (this is different from\n   GPRS, where UEs are not automatically connected\
    \ to a PDN and\n   therefore do not get an IPv4 address and/or IPv6 prefix assigned\n\
    \   until they activate their first PDP context).  This default bearer\n   will\
    \ be allowed to carry all traffic that is not associated with a\n   dedicated\
    \ bearer.  Dedicated bearers are used to carry traffic for IP\n   flows that have\
    \ been identified to require specific packet-forwarding\n   treatment.  They may\
    \ be established at the time of startup -- for\n   example, in the case of services\
    \ that require always-on connectivity\n   and better QoS than that provided by\
    \ the default bearer.  The default\n   bearer and the dedicated bearer(s) associated\
    \ to it share the same IP\n   address(es)/prefix.\n   An EPS bearer is referred\
    \ to as a Guaranteed Bit Rate (GBR) bearer if\n   dedicated network resources\
    \ related to a GBR value that is associated\n   with the EPS bearer are permanently\
    \ allocated (e.g., by an admission\n   control function in the eNodeB) at bearer\
    \ establishment/modification.\n   Otherwise, an EPS bearer is referred to as a\
    \ non-GBR bearer.  The\n   default bearer is always non-GBR, with the resources\
    \ for the IP flows\n   not guaranteed at the eNodeB, and with no admission control.\n\
    \   However, the dedicated bearer can be either GBR or non-GBR.  A GBR\n   bearer\
    \ has a GBR and Maximum Bit Rate (MBR), while more than one\n   non-GBR bearer\
    \ belonging to the same UE shares an Aggregate MBR\n   (AMBR).  Non-GBR bearers\
    \ can suffer packet loss under congestion,\n   while GBR bearers are immune to\
    \ such losses as long as they honor the\n   contracted bit rates.\n"
- title: 5.  Address Management
  contents:
  - '5.  Address Management

    '
- title: 5.1.  IPv4 Address Configuration
  contents:
  - "5.1.  IPv4 Address Configuration\n   The UE's IPv4 address configuration is always\
    \ performed during PDP\n   context/EPS bearer setup procedures (on layer 2). \
    \ DHCPv4-based\n   [RFC2131] address configuration is supported by the 3GPP\n\
    \   specifications, but is not used on a wide scale.  The UE must always\n   support\
    \ address configuration as part of the bearer setup signaling,\n   since DHCPv4\
    \ is optional for both UEs and networks.\n   The 3GPP standards also specify a\
    \ 'deferred IPv4 address allocation'\n   on a PMIPv6-based dual-stack IPv4v6 PDN\
    \ connection at the time of\n   connection establishment, as described in Section\
    \ 4.7.1 of\n   [TS.23402].  This has the advantage of a single PDN connection\
    \ for\n   IPv6 and IPv4, along with deferring IPv4 address allocation until an\n\
    \   application needs it.  The deferred address allocation is based on\n   the\
    \ use of DHCPv4 as well as appropriate UE-side implementation-\n   dependent triggers\
    \ to invoke the protocol.\n"
- title: 5.2.  IPv6 Address Configuration
  contents:
  - "5.2.  IPv6 Address Configuration\n   IPv6 Stateless Address Autoconfiguration\
    \ (SLAAC), as specified in\n   [RFC4861] and [RFC4862], is the only supported\
    \ address configuration\n   mechanism.  Stateful DHCPv6-based address configuration\
    \ [RFC3315] is\n   not supported by 3GPP specifications.  On the other hand, stateless\n\
    \   DHCPv6 service to obtain other configuration information is supported\n  \
    \ [RFC3736].  This implies that the M-bit is always zero and that the\n   O-bit\
    \ may be set to one in the Router Advertisement (RA) sent to\n   the UE.\n   The\
    \ 3GPP network allocates each default bearer a unique /64 prefix,\n   and uses\
    \ layer-2 signaling to suggest to the UE an Interface\n   Identifier that is guaranteed\
    \ not to conflict with the gateway's\n   Interface Identifier.  The UE must configure\
    \ its link-local address\n   using this Interface Identifier.  The UE is allowed\
    \ to use any\n   Interface Identifier it wishes for the other addresses it configures.\n\
    \   There is no restriction, for example, on using privacy extensions for\n  \
    \ SLAAC [RFC4941] or other similar types of mechanisms.  However, there\n   are\
    \ network drivers that fail to pass the Interface Identifier to the\n   stack\
    \ and instead synthesize their own Interface Identifier (usually\n   a Media Access\
    \ Control (MAC) address equivalent).  If the UE skips\n   the Duplicate Address\
    \ Detection (DAD) and also has other issues with\n   the Neighbor Discovery protocol\
    \ (see Section 5.4), then there is a\n   small theoretical chance that the UE\
    \ will configure exactly the same\n   link-local address as the GGSN/PDN-GW. \
    \ The address collision may\n   then cause issues in IP connectivity -- for instance,\
    \ the UE not\n   being able to forward any packets to the uplink.\n   In the 3GPP\
    \ link model, the /64 prefix assigned to the UE cannot be\n   used for on-link\
    \ determination (because the L-bit in the Prefix\n   Information Option (PIO)\
    \ in the RA must always be set to zero).  If\n   the advertised prefix is used\
    \ for SLAAC, then the A-bit in the PIO\n   must be set to one.  Details of the\
    \ 3GPP link-model and address\n   configuration are provided in Section 11.2.1.3.2a\
    \ of [TS.29061].\n   More specifically, the GGSN/PDN-GW guarantees that the /64\
    \ prefix is\n   unique for the UE.  Therefore, there is no need to perform any\
    \ DAD on\n   addresses the UE creates (i.e., the 'DupAddrDetectTransmits' variable\n\
    \   in the UE could be zero).  The GGSN/PDN-GW is not allowed to generate\n  \
    \ any globally unique IPv6 addresses for itself using the /64 prefix\n   assigned\
    \ to the UE in the RA.\n   The current 3GPP architecture limits the number of\
    \ prefixes in each\n   bearer to a single /64 prefix.  If the UE finds more than\
    \ one prefix\n   in the RA, it only considers the first one and silently discards\
    \ the\n   others [TS.29061].  Therefore, multi-homing within a single bearer is\n\
    \   not possible.  Renumbering without closing the layer-2 connection is\n   also\
    \ not possible.  The lifetime of the /64 prefix is bound to the\n   lifetime of\
    \ the layer-2 connection even if the advertised prefix\n   lifetime is longer\
    \ than the layer-2 connection lifetime.\n"
- title: 5.3.  Prefix Delegation
  contents:
  - "5.3.  Prefix Delegation\n   IPv6 prefix delegation is a part of Release-10 and\
    \ is not covered by\n   any earlier releases.  However, the /64 prefix allocated\
    \ for each\n   default bearer (and to the UE) may be shared to the local area\n\
    \   network by the UE implementing Neighbor Discovery proxy (ND proxy)\n   [RFC4389]\
    \ functionality.\n   The Release-10 prefix delegation uses the DHCPv6-based prefix\n\
    \   delegation [RFC3633].  The model defined for Release-10 requires\n   aggregatable\
    \ prefixes, which means the /64 prefix allocated for the\n   default bearer (and\
    \ to the UE) must be part of the shorter delegated\n   prefix.  DHCPv6 prefix\
    \ delegation has an explicit limitation,\n   described in Section 12.1 of [RFC3633],\
    \ that a prefix delegated to a\n   requesting router cannot be used by the delegating\
    \ router (i.e., the\n   PDN-GW in this case).  This implies that the shorter 'delegated\n\
    \   prefix' cannot be given to the requesting router (i.e., the UE) as\n   such\
    \ but has to be delivered by the delegating router (i.e., the\n   PDN-GW) in such\
    \ a way that the /64 prefix allocated to the default\n   bearer is not part of\
    \ the 'delegated prefix'.  An option to exclude a\n   prefix from delegation [PD-EXCLUDE]\
    \ prevents this problem.\n"
- title: 5.4.  IPv6 Neighbor Discovery Considerations
  contents:
  - "5.4.  IPv6 Neighbor Discovery Considerations\n   The 3GPP link between the UE\
    \ and the next-hop router (e.g., the GGSN)\n   resembles a point-to-point (p2p)\
    \ link, which has no link-layer\n   addresses [RFC3316], and this has not changed\
    \ from the 2G/3G GPRS to\n   the EPS.  The UE IP stack has to take this into consideration.\
    \  When\n   the 3GPP PDP context appears as a PPP interface/link to the UE, the\n\
    \   IP stack is usually prepared to handle the Neighbor Discovery\n   protocol\
    \ and the related Neighbor Cache state machine transitions in\n   an appropriate\
    \ way, even though Neighbor Discovery protocol messages\n   contain no link-layer\
    \ address information.  However, some operating\n   systems discard Router Advertisements\
    \ on their PPP interface/link as\n   a default setting.  This causes SLAAC to\
    \ fail when the 3GPP PDP\n   context gets established, thus stalling all IPv6\
    \ traffic.\n   Currently, several operating systems and their network drivers\
    \ can\n   make the 3GPP PDP context appear as an IEEE 802 interface/link to the\n\
    \   IP stack.  This has a few known issues, especially when the IP stack\n   is\
    \ made to believe that the underlying link has link-layer addresses.\n   First,\
    \ the Neighbor Advertisement sent by a GGSN as a response to a\n   Neighbor Solicitation\
    \ triggered by address resolution might not\n   contain a Target Link-Layer Address\
    \ option (see Section 4.4 of\n   [RFC4861]).  It is then possible that the address\
    \ resolution never\n   completes when the UE tries to resolve the link-layer address\
    \ of the\n   GGSN, thus stalling all IPv6 traffic.\n   Second, the GGSN may simply\
    \ discard all Neighbor Solicitation\n   messages triggered by address resolution\
    \ (as Section 2.4.1 of\n   [RFC3316] is sometimes misinterpreted as saying that\
    \ responding to\n   address resolution and next-hop determination is not needed).\
    \  As a\n   result, the address resolution never completes when the UE tries to\n\
    \   resolve the link-layer address of the GGSN, thus stalling all IPv6\n   traffic.\
    \  There is little that can be done about this in the GGSN,\n   assuming the neighbor-discovery\
    \ implementation already does the right\n   thing.  But the UE stacks must be\
    \ able to handle address resolution\n   in the manner that they have chosen to\
    \ represent the interface.  In\n   other words, if they emulate IEEE 802 interfaces,\
    \ they also need to\n   process Neighbor Discovery messages correctly.\n"
- title: 6.  3GPP Dual-Stack Approach to IPv6
  contents:
  - '6.  3GPP Dual-Stack Approach to IPv6

    '
- title: 6.1.  3GPP Networks Prior to Release-8
  contents:
  - "6.1.  3GPP Networks Prior to Release-8\n   3GPP standards prior to Release-8\
    \ provide IPv6 access for cellular\n   devices with PDP contexts of type IPv6\
    \ [TS.23060].  For dual-stack\n   access, a PDP context of type IPv6 is established\
    \ in parallel to the\n   PDP context of type IPv4, as shown in Figures 5 and 6.\
    \  For IPv4-only\n   service, connections are created over the PDP context of\
    \ type IPv4,\n   and for IPv6-only service, connections are created over the PDP\n\
    \   context of type IPv6.  The two PDP contexts of different type may use\n  \
    \ the same APN (and the gateway); however, this aspect is not\n   explicitly defined\
    \ in standards.  Therefore, cellular device and\n   gateway implementations from\
    \ different vendors may have varying\n   support for this functionality.\n   \
    \        Y                                        .--.\n           |         \
    \                             _(IPv4`.\n           |---+              +---+  \
    \  +---+     (  PDN   )\n           | D |~~~~~~~//-----|   |====|   |====( ` \
    \ .  )  )\n           | S | IPv4 context | S |    | G |     `--(___.-'\n     \
    \      |   |              | G |    | G |        .--.\n           | U |       \
    \       | S |    | S |      _(IPv6`.\n           | E | IPv6 context | N |    |\
    \ N |     (  PDN   )\n           |///|~~~~~~~//-----|   |====|(s)|====( `  . \
    \ )  )\n           +---+              +---+    +---+     `--(___.-'\n   Figure\
    \ 5: Dual-Stack (DS) User Equipment Connecting to Both IPv4 and\n     IPv6 Internet\
    \ Using Parallel IPv4-Only and IPv6-Only PDP Contexts\n           Y\n        \
    \   |\n           |---+              +---+    +---+\n           | D |~~~~~~~//-----|\
    \   |====|   |        .--.\n           | S | IPv4 context | S |    | G |     \
    \ _( DS `.\n           |   |              | G |    | G |     (  PDN   )\n    \
    \       | U |              | S |    | S |====( `  .  )  )\n           | E | IPv6\
    \ context | N |    | N |     `--(___.-'\n           |///|~~~~~~~//-----|   |====|\
    \   |\n           +---+              +---+    +---+\n   Figure 6: Dual-Stack User\
    \ Equipment Connecting to Dual-Stack Internet\n            Using Parallel IPv4-Only\
    \ and IPv6-Only PDP Contexts\n   The approach of having parallel IPv4 and IPv6\
    \ types of PDP contexts\n   open is not optimal, because two PDP contexts require\
    \ double the\n   signaling and consume more network resources than a single PDP\n\
    \   context.  In Figure 6, the IPv4 and IPv6 PDP contexts are attached to\n  \
    \ the same GGSN.  While this is possible, the dual-stack MS may be\n   attached\
    \ to different GGSNs in the scenario where one GGSN supports\n   IPv4 PDN connectivity\
    \ while another GGSN provides IPv6 PDN\n   connectivity.\n"
- title: 6.2.  3GPP Release-8 and -9 Networks
  contents:
  - "6.2.  3GPP Release-8 and -9 Networks\n   Since 3GPP Release-8, the powerful concept\
    \ of a dual-stack type of\n   PDN connection and EPS bearer has been introduced\
    \ [TS.23401].  This\n   enables parallel use of both IPv4 and IPv6 on a single\
    \ bearer\n   (IPv4v6), as illustrated in Figure 7, and makes dual stack simpler\n\
    \   than in earlier 3GPP releases.  As of Release-9, GPRS network nodes\n   also\
    \ support dual-stack (IPv4v6) PDP contexts.\n           Y\n           |\n    \
    \       |---+              +---+    +---+\n           | D |              |   |\
    \    | P |        .--.\n           | S |              |   |    | D |      _( DS\
    \ `.\n           |   | IPv4v6 (DS)  | S |    | N |     (  PDN   )\n          \
    \ | U |~~~~~~~//-----| G |====| - |====( `  .  )  )\n           | E | bearer \
    \      | W |    | G |     `--(___.-'\n           |///|              |   |    |\
    \ W |\n           +---+              +---+    +---+\n   Figure 7: Dual-Stack User\
    \ Equipment Connecting to Dual-Stack Internet\n                   Using a Single\
    \ IPv4v6 PDN Connection\n   The following is a description of the various PDP\
    \ contexts/PDN bearer\n   types that are specified by 3GPP:\n   1.  For 2G/3G\
    \ access to the GPRS core (SGSN/GGSN) pre-Release-9,\n       there are two IP\
    \ PDP Types: IPv4 and IPv6.  Two PDP contexts are\n       needed to get dual-stack\
    \ connectivity.\n   2.  For 2G/3G access to the GPRS core (SGSN/GGSN), starting\
    \ with\n       Release-9, there are three IP PDP Types: IPv4, IPv6, and IPv4v6.\n\
    \       A minimum of one PDP context is needed to get dual-stack\n       connectivity.\n\
    \   3.  For 2G/3G access to the EPC (PDN-GW via S4-SGSN), starting with\n    \
    \   Release-8, there are three IP PDP Types: IPv4, IPv6, and IPv4v6\n       (which\
    \ gets mapped to the PDN connection type).  A minimum of one\n       PDP context\
    \ is needed to get dual-stack connectivity.\n   4.  For LTE (E-UTRAN) access to\
    \ the EPC, starting with Release-8,\n       there are three IP PDN Types: IPv4,\
    \ IPv6, and IPv4v6.  A minimum\n       of one PDN connection is needed to get\
    \ dual-stack connectivity.\n"
- title: 6.3.  PDN Connection Establishment Process
  contents:
  - "6.3.  PDN Connection Establishment Process\n   The PDN connection establishment\
    \ process is specified in detail in\n   3GPP specifications.  Figure 8 illustrates\
    \ the high-level process and\n   signaling involved in the establishment of a\
    \ PDN connection.\n      UE        eNodeB/      MME         SGW       PDN-GW \
    \      HSS/\n      |           BS          |           |           |         AAA\n\
    \      |           |           |           |           |           |\n      |---------->|(1)\
    \        |           |           |           |\n      |           |---------->|(1)\
    \        |           |           |\n      |           |           |          \
    \ |           |           |\n      |/---------------------------------------------------------\\\
    |\n      |             Authentication and Authorization              |(2)\n  \
    \    |\\---------------------------------------------------------/|\n      | \
    \          |           |           |           |           |\n      |        \
    \   |           |---------->|(3)        |           |\n      |           |   \
    \        |           |---------->|(3)        |\n      |           |          \
    \ |           |           |           |\n      |           |           |     \
    \      |<----------|(4)        |\n      |           |           |<----------|(4)\
    \        |           |\n      |           |<----------|(5)        |          \
    \ |           |\n      |/---------\\|           |           |           |    \
    \       |\n      | RB setup  |(6)        |           |           |           |\n\
    \      |\\---------/|           |           |           |           |\n      |\
    \           |---------->|(7)        |           |           |\n      |---------->|(8)\
    \        |           |           |           |\n      |           |---------->|(9)\
    \        |           |           |\n      |           |           |          \
    \ |           |           |\n      |============= Uplink Data =========>==========>|(10)\
    \       |\n      |           |           |           |           |           |\n\
    \      |           |           |---------->|(11)       |           |\n      |\
    \           |           |           |           |           |\n      |       \
    \    |           |<----------|(12)       |           |\n      |           |  \
    \         |           |           |           |\n      |<============ Downlink\
    \ Data =======<===========|(13)       |\n      |           |           |     \
    \      |           |           |\n     Figure 8: Simplified PDN Connection Setup\
    \ Procedure in Release-8\n   1.   The UE (i.e., the MS) requires a data connection\
    \ and hence\n        decides to establish a PDN connection with a PDN-GW.  The\
    \ UE\n        sends an \"Attach\" request (layer-2) to the base station (BS).\n\
    \        The BS forwards this Attach request to the MME.\n   2.   Authentication\
    \ of the UE with the Authentication, Authorization,\n        and Accounting (AAA)\
    \ server/HSS follows.  If the UE is\n        authorized to establish a data connection,\
    \ the process continues\n        with the following steps:\n   3.   The MME sends\
    \ a \"Create Session\" request message to the SGW.\n        The SGW forwards the\
    \ Create Session request to the PDN-GW.  The\n        SGW knows the address of\
    \ the PDN-GW to which it forwards the\n        Create Session request as a result\
    \ of this information having\n        been obtained by the MME during the authentication/authorization\n\
    \        phase.\n        The UE IPv4 address and/or IPv6 prefix gets assigned\
    \ during this\n        step.  If a subscribed IPv4 address and/or IPv6 prefix\
    \ is\n        statically allocated for the UE for this APN, then the MME\n   \
    \     passes this previously allocated address information to the SGW\n      \
    \  and eventually to the PDN-GW in the Create Session request\n        message.\
    \  Otherwise, the PDN-GW manages the address assignment\n        to the UE (there\
    \ is another variation to this step where IPv4\n        address allocation is\
    \ delayed until the UE initiates a DHCPv4\n        exchange, but this is not discussed\
    \ here).\n   4.   The PDN-GW creates a PDN connection for the UE and sends a\n\
    \        Create Session response message to the SGW from which the\n        session\
    \ request message was received.  The SGW forwards the\n        response to the\
    \ corresponding MME that originated the request.\n   5.   The MME sends the \"\
    Attach Accept/Initial Context Setup\" request\n        message to the eNodeB/BS.\n\
    \   6.   The radio bearer (RB) between the UE and the eNodeB is\n        reconfigured\
    \ based on the parameters received from the MME.\n        (See Note 1 below.)\n\
    \   7.   The eNodeB sends an \"Initial Context\" response message to\n       \
    \ the MME.\n   8.   The UE sends a \"Direct Transfer\" message, which includes\
    \ the\n        \"Attach Complete\" signal, to the eNodeB.\n   9.   The eNodeB\
    \ forwards the Attach Complete message to the MME.\n   10.  The UE can now start\
    \ sending uplink packets to the PDN GW.\n   11.  The MME sends a \"Modify Bearer\"\
    \ request message to the SGW.\n   12.  The SGW responds with a Modify Bearer response\
    \ message.  At this\n        time, the downlink connection is also ready.\n  \
    \ 13.  The UE can now start receiving downlink packets, including\n        possible\
    \ SLAAC-related IPv6 packets.\n   The type of PDN connection established between\
    \ the UE and the PDN-GW\n   can be any of the types described in the previous\
    \ section.  The dual-\n   stack PDN connection, i.e., the one that supports both\
    \ IPv4 and IPv6\n   packets, is the default connection that will be established\
    \ if no\n   specific PDN connection type is specified by the UE in Release-8\n\
    \   networks.\n      Note 1: The UE receives the PDN Address Information Element\n\
    \      [TS.24301] at the end of radio bearer setup messaging.  This\n      information\
    \ element contains only the Interface Identifier of the\n      IPv6 address. \
    \ In the case of the GPRS, the PDP Address\n      Information Element [TS.24008]\
    \ would contain a complete IPv6\n      address.  However, the UE must ignore the\
    \ IPv6 prefix if it\n      receives one in the message (see Section 11.2.1.3.2a\
    \ of\n      [TS.29061]).\n"
- title: 6.4.  Mobility of 3GPP IPv4v6 Bearers
  contents:
  - "6.4.  Mobility of 3GPP IPv4v6 Bearers\n   3GPP discussed at length various approaches\
    \ to support mobility\n   between a Release-8 LTE network and a pre-Release-9\
    \ 2G/3G network\n   without an S4-SGSN for the new dual-stack bearers.  The chosen\n\
    \   approach for mobility is as follows, in short: if a UE is allowed to\n   do\
    \ handovers between a Release-8 LTE network and a pre-Release-9\n   2G/3G network\
    \ without an S4-SGSN while having open PDN connections,\n   only single-stack\
    \ bearers are used.  Essentially, this indicates the\n   following deployment\
    \ options:\n   1.  If a network knows a UE may do handovers between a Release-8\
    \ LTE\n       network and a pre-Release-9 2G/3G network without an S4-SGSN,\n\
    \       then the network is configured to provide only single-stack\n       bearers,\
    \ even if the UE requests dual-stack bearers.\n   2.  If the network knows the\
    \ UE does handovers only between a\n       Release-8 LTE network and a Release-9\
    \ 2G/3G network or a\n       pre-Release-9 network with an S4-SGSN, then the network\
    \ is\n       configured to provide the UE with dual-stack bearers on request.\n\
    \       The same also applies for LTE-only deployments.\n   When a network operator\
    \ and their roaming partners have upgraded\n   their networks to Release-8, it\
    \ is possible to use the new IPv4v6\n   dual-stack bearers.  A Release-8 UE always\
    \ requests a dual-stack\n   bearer, but accepts what is assigned by the network.\n"
- title: 7.  Dual-Stack Approach to IPv6 Transition in 3GPP Networks
  contents:
  - "7.  Dual-Stack Approach to IPv6 Transition in 3GPP Networks\n   3GPP networks\
    \ can natively transport IPv4 and IPv6 packets between\n   the UE and the gateway\
    \ (GGSN or PDN-GW) as a result of establishing\n   either a dual-stack PDP context\
    \ or parallel IPv4 and IPv6 PDP\n   contexts.\n   Current deployments of 3GPP\
    \ networks primarily support IPv4 only.\n   These networks can be upgraded to\
    \ also support IPv6 PDP contexts.  By\n   doing so, devices and applications that\
    \ are IPv6 capable can start\n   utilizing IPv6 connectivity.  This will also\
    \ ensure that legacy\n   devices and applications continue to work with no impact.\
    \  As newer\n   devices start using IPv6 connectivity, the demand for actively\
    \ used\n   IPv4 connections is expected to slowly decrease, helping operators\n\
    \   with a transition to IPv6.  With a dual-stack approach, there is\n   always\
    \ the potential to fall back to IPv4.  A device that may be\n   roaming in a network\
    \ wherein IPv6 is not supported by the visited\n   network could fall back to\
    \ using IPv4 PDP contexts, and hence the end\n   user would at least get some\
    \ connectivity.  Unfortunately, the dual-\n   stack approach as such does not\
    \ lower the number of used IPv4\n   addresses.  Every dual-stack bearer still\
    \ needs to be given an IPv4\n   address, private or public.  This is a major concern\
    \ with dual-stack\n   bearers concerning IPv6 transition.  However, if the majority\
    \ of\n   active IP communication has moved over to IPv6, then in the case of\n\
    \   Network Address Translation from IPv4 to IPv4 (NAT44), the number of\n   active\
    \ NAT44-translated IPv4 connections can still be expected to\n   gradually decrease\
    \ and thus give some level of relief regarding NAT44\n   function scalability.\n\
    \   As the networks evolve to support Release-8 EPS architecture and the\n   dual-stack\
    \ PDP contexts, newer devices will be able to leverage such\n   capability and\
    \ have a single bearer that supports both IPv4 and IPv6.\n   Since IPv4 and IPv6\
    \ packets are carried as payload within GTP between\n   the MS and the gateway\
    \ (GGSN/PDN-GW), the transport-network\n   capability in terms of whether it supports\
    \ IPv4 or IPv6 on the\n   interfaces between the eNodeB and SGW or between the\
    \ SGW and PDN-GW\n   is immaterial.\n"
- title: 8.  Deployment Issues
  contents:
  - '8.  Deployment Issues

    '
- title: 8.1.  Overlapping IPv4 Addresses
  contents:
  - "8.1.  Overlapping IPv4 Addresses\n   Given the shortage of globally routable\
    \ public IPv4 addresses,\n   operators tend to assign private IPv4 addresses [RFC1918]\
    \ to UEs when\n   they establish an IPv4-only PDP context or an IPv4v6 PDN context.\n\
    \   About 16 million UEs can be assigned a private IPv4 address that is\n   unique\
    \ within a domain.  However, for many operators, the number of\n   subscribers\
    \ is greater than 16 million.  The issue can be dealt with\n   by assigning overlapping\
    \ RFC 1918 IPv4 addresses to UEs.  As a\n   result, the IPv4 address assigned\
    \ to a UE within the context of a\n   single operator realm would no longer be\
    \ unique.  This has the\n   obvious and known issues of NATed IP connections in\
    \ the Internet.\n   Direct UE-to-UE connectivity becomes complicated; unless the\
    \ UEs are\n   within the same private address range pool and/or anchored to the\n\
    \   same gateway, referrals using IP addresses will have issues, and so\n   forth.\
    \  These are generic issues and not only a concern of the EPS.\n   However, 3GPP\
    \ as such does not have any mandatory language concerning\n   NAT44 functionality\
    \ in the EPC.  Obvious deployment choices apply\n   also to the EPC:\n   1.  Very\
    \ large network deployments are partitioned, for example,\n       based on geographical\
    \ areas.  This partitioning allows\n       overlapping IPv4 address ranges to\
    \ be assigned to UEs that are in\n       different areas.  Each area has its own\
    \ pool of gateways that are\n       dedicated to a certain overlapping IPv4 address\
    \ range (also\n       referred to as a zone).  Standard NAT44 functionality allows\
    \ for\n       communication from the [RFC1918] private zone to the Internet.\n\
    \       Communication between zones requires special arrangement, such as\n  \
    \     using intermediate gateways (e.g., a Back-to-Back User Agent\n       (B2BUA)\
    \ in the case of SIP).\n   2.  A UE attaches to a gateway as part of the Attach\
    \ process.  The\n       number of UEs that a gateway supports is on the order\
    \ of 1 to 10\n       million.  Hence, all of the UEs assigned to a single gateway\
    \ can\n       be assigned private IPv4 addresses.  Operators with large\n    \
    \   subscriber bases have multiple gateways, and hence the same\n       [RFC1918]\
    \ IPv4 address space can be reused across gateways.  The\n       IPv4 address\
    \ assigned to a UE is unique within the scope of a\n       single gateway.\n \
    \  3.  New services requiring direct connectivity between UEs should be\n    \
    \   built on IPv6.  Possible existing IPv4-only services and\n       applications\
    \ requiring direct connectivity can be ported to IPv6.\n"
- title: 8.2.  IPv6 for Transport
  contents:
  - "8.2.  IPv6 for Transport\n   The various reference points of the 3GPP architecture,\
    \ such as S1-U,\n   S5, and S8, are based on either GTP or PMIPv6.  The underlying\n\
    \   transport for these reference points can be IPv4 or IPv6.  GTP has\n   been\
    \ able to operate over IPv6 transport (optionally) since R99, and\n   PMIPv6 has\
    \ supported IPv6 transport since its introduction in\n   Release-8.  The user-plane\
    \ traffic between the UE and the gateway can\n   use either IPv4 or IPv6.  These\
    \ packets are essentially treated as\n   payload by GTP/PMIPv6 and transported\
    \ accordingly, with no real\n   attention paid (at least from a routing perspective)\
    \ to the\n   information contained in the IPv4 or IPv6 headers.  The transport\n\
    \   links between the eNodeB and the SGW, and the link between the SGW\n   and\
    \ PDN-GW, can be migrated to IPv6 without any direct implications\n   to the architecture.\n\
    \   Currently, the inter-operator (for 3GPP technology) roaming networks\n   are\
    \ all IPv4 only (see Inter-PLMN Backbone Guidelines [GSMA.IR.34]).\n   Eventually,\
    \ these roaming networks will also get migrated to IPv6, if\n   there is a business\
    \ reason for that.  The migration period can be\n   prolonged considerably, because\
    \ the 3GPP protocols always tunnel\n   user-plane traffic in the core network,\
    \ and as described earlier, the\n   transport-network IP version is not in any\
    \ way tied to the user-plane\n   IP version.  Furthermore, the design of the inter-operator\
    \ roaming\n   networks is such that the user-plane and transport-network IP\n\
    \   addressing schemes are completely separated from each other.  The\n   inter-operator\
    \ roaming network itself is also completely separated\n   from the Internet. \
    \ Only those core network nodes that must be\n   connected to the inter-operator\
    \ roaming networks are actually visible\n   there, and are able to send and receive\
    \ (tunneled) traffic within the\n   inter-operator roaming networks.  Obviously,\
    \ in order for the roaming\n   to work properly, the operators have to agree on\
    \ supported protocol\n   versions so that the visited network does not, for example,\n\
    \   unnecessarily drop user-plane IPv6 traffic.\n"
- title: 8.3.  Operational Aspects of Running Dual-Stack Networks
  contents:
  - "8.3.  Operational Aspects of Running Dual-Stack Networks\n   Operating dual-stack\
    \ networks does imply cost and complexity to a\n   certain extent.  However, these\
    \ factors are mitigated by the\n   assurance that legacy devices and services\
    \ are unaffected, and there\n   is always a fallback to IPv4 in case of issues\
    \ with the IPv6\n   deployment or network elements.  The model also enables operators\
    \ to\n   develop operational experience and expertise in an incremental\n   manner.\n\
    \   Running dual-stack networks requires the management of multiple IP\n   address\
    \ spaces.  Tracking of UEs needs to be expanded, since it can\n   be identified\
    \ by either an IPv4 address or an IPv6 prefix.  Network\n   elements will also\
    \ need to be dual-stack capable in order to support\n   the dual-stack deployment\
    \ model.\n   Deployment and migration cases (see Section 6.1) for providing dual-\n\
    \   stack capability may mean doubled resource usage in an operator's\n   network.\
    \  This is a major concern against providing dual-stack\n   connectivity using\
    \ techniques discussed in Section 6.1.  Also,\n   handovers between networks with\
    \ different capabilities in terms of\n   whether or not networks are capable of\
    \ dual-stack service may prove\n   difficult for users to comprehend and for applications/services\
    \ to\n   cope with.  These facts may add other than just technical concerns\n\
    \   for operators when planning to roll out dual-stack service offerings.\n"
- title: 8.4.  Operational Aspects of Running a Network with IPv6-Only Bearers
  contents:
  - "8.4.  Operational Aspects of Running a Network with IPv6-Only Bearers\n   It\
    \ is possible to allocate IPv6-only bearers to UEs in 3GPP networks.\n   The IPv6-only\
    \ bearer has been part of the 3GPP specification since\n   the beginning.  In\
    \ 3GPP Release-8 (and later), it was defined that a\n   dual-stack UE (or when\
    \ the radio equipment has no knowledge of the UE\n   IP stack's capabilities)\
    \ must first attempt to establish a dual-stack\n   bearer and then possibly fall\
    \ back to a single-stack bearer.  A\n   Release-8 (or later) UE with an IPv6-only\
    \ stack can directly attempt\n   to establish an IPv6-only bearer.  The IPv6-only\
    \ behavior is up to\n   subscription provisioning or PDN-GW configuration, and\
    \ the fallback\n   scenarios do not necessarily cause additional signaling.\n\
    \   Although the bullets below introduce IPv6-to-IPv4 address translation\n  \
    \ and specifically discuss NAT64 technology [RFC6144], the current 3GPP\n   Release-8\
    \ architecture does not describe the use of address\n   translation or NAT64.\
    \  It is up to a specific deployment whether\n   address translation is part of\
    \ the network or not.  The following are\n   some operational aspects to consider\
    \ for running a network with\n   IPv6-only bearers:\n   o  The UE must have an\
    \ IPv6-capable stack and a radio interface\n      capable of establishing an IPv6\
    \ PDP context or PDN connection.\n   o  The GGSN/PDN-GW must be IPv6 capable in\
    \ order to support IPv6\n      bearers.  Furthermore, the SGSN/MME must allow\
    \ the creation of a\n      PDP Type or PDN Type of IPv6.\n   o  Many of the common\
    \ applications are IP version agnostic and hence\n      would work using an IPv6\
    \ bearer.  However, applications that are\n      IPv4 specific would not work.\n\
    \   o  Inter-operator roaming is another aspect that causes issues, at\n     \
    \ least during the ramp-up phase of the IPv6 deployment.  If the\n      visited\
    \ network to which outbound roamers attach does not support\n      PDP/PDN Type\
    \ IPv6, then there needs to be a fallback option.  The\n      fallback option\
    \ in this specific case is mostly up to the UE to\n      implement.  Several cases\
    \ are discussed in the following sections.\n   o  If and when a UE using an IPv6-only\
    \ bearer needs access to the\n      IPv4 Internet/network, some type of translation\
    \ from IPv6 to IPv4\n      has to be deployed in the network.  NAT64 (or DNS64)\
    \ is one\n      solution that can be used for this purpose and works for a certain\n\
    \      set of protocols (read TCP, UDP, and ICMP, and when applications\n    \
    \  actually use DNS for resolving names to IP addresses).\n"
- title: 8.5.  Restricting Outbound IPv6 Roaming
  contents:
  - "8.5.  Restricting Outbound IPv6 Roaming\n   Roaming was briefly touched upon\
    \ in Sections 8.2 and 8.4.  While\n   there is interest in offering roaming service\
    \ for IPv6-enabled UEs\n   and subscriptions, not all visited networks are prepared\
    \ for IPv6\n   outbound roamers:\n   o  The visited-network SGSN does not support\
    \ the IPv6 PDP context or\n      IPv4v6 PDP context types.  These should mostly\
    \ concern\n      pre-Release-9 2G/3G networks without an S4-SGSN, but there is\
    \ no\n      definitive rule, as the deployed feature sets vary depending on\n\
    \      implementations and licenses.\n   o  The visited network might not be commercially\
    \ ready for IPv6\n      outbound roamers, while everything might work technically\
    \ at the\n      user-plane level.  This would lead to \"revenue leakage\",\n \
    \     especially from the visited operator's point of view (note that\n      the\
    \ use of a visited-network GGSN/PDN-GW does not really exist\n      today in commercial\
    \ deployments for data roaming).\n   It might be in the interest of operators\
    \ to prohibit roaming\n   selectively within specific visited networks until IPv6\
    \ roaming is in\n   place.  3GPP does not specify a mechanism whereby IPv6 roaming\
    \ is\n   prohibited without also disabling IPv4 access and other packet\n   services.\
    \  The following options for disabling IPv6 access for\n   roaming subscribers\
    \ could be available in some network deployments:\n   o  Policy and Charging Control\
    \ (PCC) [TS.23203] functionality and its\n      rules, for example, could be used\
    \ to cause bearer authorization to\n      fail when a desired criteria is met.\
    \  In this case, that would be\n      PDN/PDP Type IPv6/IPv4v6 and a specific\
    \ visited network.  The\n      rules can be provisioned either in the home network\
    \ or locally in\n      the visited network.\n   o  Some Home Location Register\
    \ (HLR) and Home Subscriber Server (HSS)\n      subscriber databases allow prohibiting\
    \ roaming in a specific\n      (visited) network for a specified PDN/PDP Type.\n\
    \   The obvious problems are that these solutions are not mandatory, are\n   not\
    \ unified across networks, and therefore also lack a well-specified\n   fallback\
    \ mechanism from the UE's point of view.\n"
- title: 8.6.  Inter-RAT Handovers and IP Versions
  contents:
  - "8.6.  Inter-RAT Handovers and IP Versions\n   It is obvious that as operators\
    \ start to incrementally deploy the EPS\n   along with the existing UTRAN/GERAN,\
    \ handovers between different\n   radio technologies (inter-RAT handovers) become\
    \ inevitable.  In the\n   case of inter-RAT handovers, 3GPP supports the following\
    \ IP\n   addressing scenarios:\n   o  The E-UTRAN IPv4v6 bearer has to map one\
    \ to one to the UTRAN/GERAN\n      IPv4v6 bearer.\n   o  The E-UTRAN IPv6 bearer\
    \ has to map one to one to the UTRAN/GERAN\n      IPv6 bearer.\n   o  The E-UTRAN\
    \ IPv4 bearer has to map one to one to the UTRAN/GERAN\n      IPv4 bearer.\n \
    \  Other types of configurations are not standardized.  The above rules\n   essentially\
    \ imply that the network migration has to be planned and\n   subscriptions provisioned\
    \ based on the lowest common denominator, if\n   inter-RAT handovers are desired.\
    \  For example, if some part of the\n   UTRAN cannot serve anything but IPv4 bearers,\
    \ then the E-UTRAN is\n   also forced to provide only IPv4 bearers.  Various combinations\
    \ of\n   subscriber provisioning regarding IP versions are discussed further\n\
    \   in Section 8.7.\n"
- title: 8.7.  Provisioning of IPv6 Subscribers and Various Combinations during
  contents:
  - "8.7.  Provisioning of IPv6 Subscribers and Various Combinations during\n    \
    \  Initial Network Attachment\n   Subscribers' provisioned PDP/PDN Types have\
    \ multiple configurations.\n   The supported PDP/PDN Type is provisioned per each\
    \ APN for every\n   subscriber.  The following PDN Types are possible in the HSS\
    \ for a\n   Release-8 subscription [TS.23401]:\n   o  IPv4v6 PDN Type (note that\
    \ the IPv4v6 PDP Type does not exist in\n      an HLR and Mobile Application Part\
    \ (MAP) [TS.29002] signaling\n      prior to Release-9).\n   o  IPv6-only PDN\
    \ Type.\n   o  IPv4-only PDN Type.\n   o  IPv4_or_IPv6 PDN Type (note that the\
    \ IPv4_or_IPv6 PDP Type does\n      not exist in an HLR or MAP signaling.  However,\
    \ an HLR may have\n      multiple APN configurations of different PDN Types; these\n\
    \      configurations would effectively achieve the same functionality).\n   A\
    \ Release-8 dual-stack UE must always attempt to establish a PDP/PDN\n   Type\
    \ IPv4v6 bearer.  The same also applies when the modem part of the\n   UE does\
    \ not have exact knowledge of whether the UE operating system\n   IP stack is\
    \ dual-stack capable or not.  A UE that is IPv6-only\n   capable must attempt\
    \ to establish a PDP/PDN Type IPv6 bearer.  Last,\n   a UE that is IPv4-only capable\
    \ must attempt to establish a PDN/PDP\n   Type IPv4 bearer.\n   In a case where\
    \ the PDP/PDN Type requested by a UE does not match\n   what has been provisioned\
    \ for the subscriber in the HSS (or HLR), the\n   UE possibly falls back to a\
    \ different PDP/PDN Type.  The network\n   (i.e., the MME or the S4-SGSN) is able\
    \ to inform the UE during\n   network attachment signaling as to why it did not\
    \ get the requested\n   PDP/PDN Type.  These response/cause codes are documented\
    \ in\n   [TS.24008] for requested PDP Types and [TS.24301] for requested PDN\n\
    \   Types:\n   o  (E)SM cause #50 \"PDN/PDP type IPv4 only allowed\".\n   o  (E)SM\
    \ cause #51 \"PDN/PDP type IPv6 only allowed\".\n   o  (E)SM cause #52 \"single\
    \ address bearers only allowed\".\n   The above response/cause codes apply to\
    \ Release-8 and onwards.  In\n   pre-Release-8 networks, the response/cause codes\
    \ that are used vary,\n   depending on the vendor, unfortunately.\n   Possible\
    \ fallback cases when the network deploys MMEs and/or S4-SGSNs\n   include (as\
    \ documented in [TS.23401]):\n   o  Requested and provisioned PDP/PDN Types match\
    \ => requested.\n   o  Requested IPv4v6 and provisioned IPv6 => IPv6, and a UE\
    \ receives\n      an indication that an IPv6-only bearer is allowed.\n   o  Requested\
    \ IPv4v6 and provisioned IPv4 => IPv4, and the UE receives\n      an indication\
    \ that an IPv4-only bearer is allowed.\n   o  Requested IPv4v6 and provisioned\
    \ IPv4_or_IPv6 => IPv4 or IPv6 is\n      selected by the MME/S4-SGSN based on\
    \ an unspecified criteria.  The\n      UE may then attempt to establish, based\
    \ on the UE implementation,\n      a parallel bearer of a different PDP/PDN Type.\n\
    \   o  Other combinations cause the bearer establishment to fail.\n   In addition\
    \ to PDP/PDN Types provisioned in the HSS, it is also\n   possible for a PDN-GW\
    \ (and an MME/S4-SGSN) to affect the final\n   selected PDP/PDN Type:\n   o  Requested\
    \ IPv4v6 and configured IPv4 or IPv6 in the PDN-GW => IPv4\n      or IPv6.  If\
    \ the MME operator had included the \"Dual Address\n      Bearer\" flag in the\
    \ bearer establishment signaling, then the UE\n      would have received an indication\
    \ that an IPv6-only or IPv4-only\n      bearer is allowed.\n   o  Requested IPv4v6\
    \ and configured IPv4 or IPv6 in the PDN-GW => IPv4\n      or IPv6.  If the MME\
    \ operator had not included the \"Dual Address\n      Bearer\" flag in the bearer\
    \ establishment signaling, then the UE\n      may have attempted to establish,\
    \ based on the UE implementation, a\n      parallel bearer of a different PDP/PDN\
    \ Type.\n   An SGSN that does not understand the requested PDP Type is supposed\n\
    \   to handle the requested PDP Type as IPv4.  If for some reason an MME\n   does\
    \ not understand the requested PDN Type, then the PDN Type is\n   handled as IPv6.\n"
- title: 9.  Security Considerations
  contents:
  - "9.  Security Considerations\n   This document does not introduce any security-related\
    \ concerns.\n   Section 5 of [RFC3316] already contains an in-depth discussion\
    \ of\n   IPv6-related security considerations in 3GPP networks prior to\n   Release-8.\
    \  This section discusses a few additional security concerns\n   to take into\
    \ consideration.\n   In 3GPP access, the UE and the network always perform a mutual\n\
    \   authentication during the network attachment [TS.33102] [TS.33401].\n   Furthermore,\
    \ each time a PDP context/PDN connection gets created, a\n   new connection, a\
    \ modification of an existing connection, and an\n   assignment of an IPv6 prefix\
    \ or an IP address can be authorized\n   against the PCC infrastructure [TS.23203]\
    \ and/or PDN's AAA server.\n   The wireless part of the 3GPP link between the\
    \ UE and the (e)NodeB as\n   well as the signaling messages between the UE and\
    \ the MME/SGSN can be\n   protected, depending on the regional regulation and\
    \ the operator's\n   deployment policy.  User-plane traffic can be confidentiality\n\
    \   protected.  The control plane is always at least integrity and replay\n  \
    \ protected, and may also be confidentiality protected.  The protection\n   within\
    \ the transmission part of the network depends on the operator's\n   deployment\
    \ policy [TS.33401].\n   Several of the on-link and neighbor-discovery-related\
    \ attacks can be\n   mitigated due to the nature of the 3GPP point-to-point link\
    \ model,\n   and the fact that the UE and the first-hop router (PDN-GW/GGSN or\n\
    \   SGW) are the only nodes on the link.  For off-link IPv6 attacks, the\n   3GPP\
    \ EPS is as vulnerable as any IPv6 system.\n   There have also been concerns that\
    \ the UE IP stack might use\n   permanent subscriber identities, such as an International\
    \ Mobile\n   Subscriber Identity (IMSI), as the source for the IPv6 address\n\
    \   Interface Identifier.  This would be a privacy threat and would allow\n  \
    \ tracking of subscribers.  Therefore, the use of an IMSI (or any\n   identity\
    \ defined by [TS.23003]) as the Interface Identifier is\n   prohibited [TS.23401].\
    \  However, there is no standardized method to\n   block such misbehaving UEs.\n"
- title: 10.  Summary and Conclusions
  contents:
  - "10.  Summary and Conclusions\n   The 3GPP network architecture and specifications\
    \ enable the\n   establishment of IPv4 and IPv6 connections through the use of\n\
    \   appropriate PDP context types.  The current generation of deployed\n   networks\
    \ can support dual-stack connectivity if the packet core\n   network elements,\
    \ such as the SGSN and GGSN, have that capability.\n   With Release-8, 3GPP has\
    \ specified a more optimal PDP context type\n   that enables the transport of\
    \ IPv4 and IPv6 packets within a single\n   PDP context between the UE and the\
    \ gateway.\n   As devices and applications are upgraded to support IPv6, they\
    \ can\n   start leveraging the IPv6 connectivity provided by the networks while\n\
    \   maintaining the ability to fall back to IPv4.  Enabling IPv6\n   connectivity\
    \ in the 3GPP networks by itself will provide some degree\n   of relief to the\
    \ IPv4 address space, as many of the applications and\n   services can start to\
    \ work over IPv6.  However, without comprehensive\n   testing of current widely\
    \ used applications and solutions for their\n   ability to operate over IPv6 PDN\
    \ connections, an IPv6-only access\n   would cause disruptions.\n"
- title: 11.  Acknowledgements
  contents:
  - "11.  Acknowledgements\n   The authors thank Shabnam Sultana, Sri Gundavelli,\
    \ Hui Deng,\n   Zhenqiang Li, Mikael Abrahamsson, James Woodyatt, Wes George,\
    \ Martin\n   Thomson, Russ Mundy, Cameron Byrne, Ales Vizdal, Frank Brockners,\n\
    \   Adrian Farrel, Stephen Farrell, Paco Cortes, and Jari Arkko for their\n  \
    \ reviews and comments on this document.\n"
- title: 12.  Informative References
  contents:
  - "12.  Informative References\n   [GSMA.IR.34]  GSMA, \"Inter-PLMN Backbone Guidelines\"\
    , GSMA\n                 PRD IR.34.4.9, March 2010.\n   [PD-EXCLUDE]  Korhonen,\
    \ J., Ed., Savolainen, T., Krishnan, S., and O.\n                 Troan, \"Prefix\
    \ Exclude Option for DHCPv6-based Prefix\n                 Delegation\", Work\
    \ in Progress, December 2011.\n   [RFC1918]     Rekhter, Y., Moskowitz, B., Karrenberg,\
    \ D., de Groot,\n                 G., and E. Lear, \"Address Allocation for Private\n\
    \                 Internets\", BCP 5, RFC 1918, February 1996.\n   [RFC2131] \
    \    Droms, R., \"Dynamic Host Configuration Protocol\",\n                 RFC\
    \ 2131, March 1997.\n   [RFC3315]     Droms, R., Ed., Bound, J., Volz, B., Lemon,\
    \ T.,\n                 Perkins, C., and M. Carney, \"Dynamic Host Configuration\n\
    \                 Protocol for IPv6 (DHCPv6)\", RFC 3315, July 2003.\n   [RFC3316]\
    \     Arkko, J., Kuijpers, G., Soliman, H., Loughney, J., and\n              \
    \   J. Wiljakka, \"Internet Protocol Version 6 (IPv6) for\n                 Some\
    \ Second and Third Generation Cellular Hosts\",\n                 RFC 3316, April\
    \ 2003.\n   [RFC3633]     Troan, O. and R. Droms, \"IPv6 Prefix Options for\n\
    \                 Dynamic Host Configuration Protocol (DHCP) version 6\",\n  \
    \               RFC 3633, December 2003.\n   [RFC3736]     Droms, R., \"Stateless\
    \ Dynamic Host Configuration\n                 Protocol (DHCP) Service for IPv6\"\
    , RFC 3736,\n                 April 2004.\n   [RFC4389]     Thaler, D., Talwar,\
    \ M., and C. Patel, \"Neighbor\n                 Discovery Proxies (ND Proxy)\"\
    , RFC 4389, April 2006.\n   [RFC4861]     Narten, T., Nordmark, E., Simpson, W.,\
    \ and H. Soliman,\n                 \"Neighbor Discovery for IP version 6 (IPv6)\"\
    , RFC 4861,\n                 September 2007.\n   [RFC4862]     Thomson, S., Narten,\
    \ T., and T. Jinmei, \"IPv6 Stateless\n                 Address Autoconfiguration\"\
    , RFC 4862, September 2007.\n   [RFC4941]     Narten, T., Draves, R., and S. Krishnan,\
    \ \"Privacy\n                 Extensions for Stateless Address Autoconfiguration\
    \ in\n                 IPv6\", RFC 4941, September 2007.\n   [RFC5213]     Gundavelli,\
    \ S., Ed., Leung, K., Devarapalli, V.,\n                 Chowdhury, K., and B.\
    \ Patil, \"Proxy Mobile IPv6\",\n                 RFC 5213, August 2008.\n   [RFC6144]\
    \     Baker, F., Li, X., Bao, C., and K. Yin, \"Framework for\n              \
    \   IPv4/IPv6 Translation\", RFC 6144, April 2011.\n   [TR.23975]    3GPP, \"\
    IPv6 Migration Guidelines\", 3GPP\n                 TR 23.975 11.0.0, June 2011.\n\
    \   [TS.23003]    3GPP, \"Numbering, addressing and identification\", 3GPP\n \
    \                TS 23.003 10.3.0, September 2011.\n   [TS.23060]    3GPP, \"\
    General Packet Radio Service (GPRS); Service\n                 description; Stage\
    \ 2\", 3GPP TS 23.060 8.14.0,\n                 September 2011.\n   [TS.23203]\
    \    3GPP, \"Policy and charging control architecture\", 3GPP\n              \
    \   TS 23.203 8.12.0, June 2011.\n   [TS.23401]    3GPP, \"General Packet Radio\
    \ Service (GPRS) enhancements\n                 for Evolved Universal Terrestrial\
    \ Radio Access Network\n                 (E-UTRAN) access\", 3GPP TS 23.401 10.5.0,\n\
    \                 September 2011.\n   [TS.23402]    3GPP, \"Architecture enhancements\
    \ for non-3GPP\n                 accesses\", 3GPP TS 23.402 10.5.0, September\
    \ 2011.\n   [TS.24008]    3GPP, \"Mobile radio interface Layer 3 specification;\n\
    \                 Core network protocols; Stage 3\", 3GPP\n                 TS\
    \ 24.008 8.14.0, June 2011.\n   [TS.24301]    3GPP, \"Non-Access-Stratum (NAS)\
    \ protocol for Evolved\n                 Packet System (EPS); Stage 3\", 3GPP\
    \ TS 24.301 8.10.0,\n                 June 2011.\n   [TS.29002]    3GPP, \"Mobile\
    \ Application Part (MAP) specification\",\n                 3GPP TS 29.002 9.6.0,\
    \ September 2011.\n   [TS.29060]    3GPP, \"General Packet Radio Service (GPRS);\
    \ GPRS\n                 Tunnelling Protocol (GTP) across the Gn and Gp\n    \
    \             interface\", 3GPP TS 29.060 8.15.0, September 2011.\n   [TS.29061]\
    \    3GPP, \"Interworking between the Public Land Mobile\n                 Network\
    \ (PLMN) supporting packet based services and\n                 Packet Data Networks\
    \ (PDN)\", 3GPP TS 29.061 8.8.0,\n                 September 2011.\n   [TS.29274]\
    \    3GPP, \"3GPP Evolved Packet System (EPS);  Evolved\n                 General\
    \ Packet Radio Service (GPRS)  Tunnelling\n                 Protocol for Control\
    \ plane (GTPv2-C); Stage 3\", 3GPP\n                 TS 29.274 8.10.0, June 2011.\n\
    \   [TS.29281]    3GPP, \"General Packet Radio System (GPRS) Tunnelling\n    \
    \             Protocol User Plane (GTPv1-U)\", 3GPP TS 29.281 10.3.0,\n      \
    \           September 2011.\n   [TS.33102]    3GPP, \"3G security; Security architecture\"\
    , 3GPP\n                 TS 33.102 10.0.0, December 2010.\n   [TS.33401]    3GPP,\
    \ \"3GPP System Architecture Evolution (SAE);\n                 Security architecture\"\
    , 3GPP TS 33.401 10.2.0,\n                 September 2011.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Jouni Korhonen (editor)\n   Nokia Siemens Networks\n \
    \  Linnoitustie 6\n   FI-02600 Espoo\n   FINLAND\n   EMail: jouni.nospam@gmail.com\n\
    \   Jonne Soininen\n   Renesas Mobile\n   Porkkalankatu 24\n   FI-00180 Helsinki\n\
    \   FINLAND\n   EMail: jonne.soininen@renesasmobile.com\n   Basavaraj Patil\n\
    \   Nokia\n   6021 Connection Drive\n   Irving, TX  75039\n   USA\n   EMail: basavaraj.patil@nokia.com\n\
    \   Teemu Savolainen\n   Nokia\n   Hermiankatu 12 D\n   FI-33720 Tampere\n   FINLAND\n\
    \   EMail: teemu.savolainen@nokia.com\n   Gabor Bajko\n   Nokia\n   323 Fairchild\
    \ Drive 6\n   Mountain View, CA  94043\n   USA\n   EMail: gabor.bajko@nokia.com\n\
    \   Kaisu Iisakkila\n   Renesas Mobile\n   Porkkalankatu 24\n   FI-00180 Helsinki\n\
    \   FINLAND\n   EMail: kaisu.iisakkila@renesasmobile.com\n"
