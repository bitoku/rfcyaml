- title: __initial_text__
  contents:
  - "  Number Portability in the Global Switched Telephone Network (GSTN):\n     \
    \                         An Overview\n"
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2003).  All Rights Reserved.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document provides an overview of E.164 telephone number\n \
    \  portability (NP) in the Global Switched Telephone Network (GSTN).\n   NP is\
    \ a regulatory imperative seeking to liberalize local telephony\n   service competition,\
    \ by enabling end-users to retain telephone\n   numbers while changing service\
    \ providers.  NP changes the fundamental\n   nature of a dialed E.164 number from\
    \ a hierarchical physical routing\n   address to a virtual address, thereby requiring\
    \ the transparent\n   translation of the later to the former.  In addition, there\
    \ are\n   various regulatory constraints that establish relevant parameters for\n\
    \   NP implementation, most of which are not network technology specific.\n  \
    \ Consequently, the implementation of NP behavior consistent with\n   applicable\
    \ regulatory constraints, as well as the need for\n   interoperation with the\
    \ existing GSTN NP implementations, are\n   relevant topics for numerous areas\
    \ of IP telephony works-in-progress\n   with the IETF.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction .................................................\
    \  2\n   2.  Abbreviations and Acronyms ...................................  4\n\
    \   3.  Types of Number Portability ..................................  6\n  \
    \ 4.  Service Provider Number Portability Schemes ..................  7\n    \
    \   4.1   All Call Query (ACQ) ...................................  8\n      \
    \ 4.2   Query on Release (QoR) .................................  9\n       4.3\
    \   Call Dropback .......................................... 10\n       4.4  \
    \ Onward Routing (OR) .................................... 11\n       4.5   Comparisons\
    \ of the Four Schemes ........................ 11\n   5.  Database Queries in\
    \ the NP Environment ....................... 13\n       5.1   U.S. and Canada\
    \ ........................................ 13\n       5.2   Europe .................................................\
    \ 14\n   6.  Call Routing in the NP Environment ........................... 15\n\
    \       6.1   U.S. and Canada ........................................ 16\n  \
    \     6.2   Europe ................................................. 17\n   7.\
    \  NP Implementations for Geographic E.164 Numbers .............. 19\n   8.  Number\
    \ Conservation Method Enabled By NP ..................... 22\n       8.1   Block\
    \ Pooling .......................................... 22\n       8.2   ITN Pooling\
    \ ............................................ 23\n   9.  Potential Implications\
    \ ....................................... 23\n   10. Security Considerations ......................................\
    \ 27\n   11. IANA Considerations .......................................... 27\n\
    \   12. Normative References ......................................... 27\n  \
    \ 13. Informative References ....................................... 28\n   14.\
    \ Acknowledgement .............................................. 29\n   15. Authors'\
    \ Addresses ........................................... 29\n   16. Full Copyright\
    \ Statement ..................................... 30\n"
- title: 1. Introduction
  contents:
  - "1. Introduction\n   This document provides an overview of E.164 telephone number\
    \ [E164]\n   portability in the Global Switched Telephone Network (GSTN).  There\n\
    \   are considered to be three types of number portability (NP): service\n   provider\
    \ number portability (SPNP), location portability (not to be\n   confused with\
    \ terminal mobility), and service portability.\n   SPNP, the focus of the present\
    \ document, is a regulatory imperative\n   in many countries seeking to liberalize\
    \ telephony service\n   competition, especially local service.  Historically,\
    \ local telephony\n   service (as compared to long distance or international service)\
    \ has\n   been regulated as a utility-like form of service.  While a number of\n\
    \   countries had begun liberalization (e.g., privatization, de-\n   regulation,\
    \ or re-regulation) some years ago, the advent of NP is\n   relatively recent\
    \ (since ~1995).\n   E.164 numbers can be non-geographic and geographic numbers.\
    \  Non-\n   geographic numbers do not reveal the location information of those\n\
    \   numbers.  Geographic E.164 numbers were intentionally designed as\n   hierarchical\
    \ routing addresses which could systematically be digit-\n   analyzed to ascertain\
    \ the country, serving network provider, serving\n   end-office switch, and specific\
    \ line of the called party.  As such,\n   without NP a subscriber wishing to change\
    \ service providers would\n   incur a number change as a consequence of being\
    \ served off of a\n   different end-office switch operated by the new service\
    \ provider.\n   The impact in cost and convenience to the subscriber of changing\n\
    \   numbers is seen as a barrier to competition.  Hence NP has become\n   associated\
    \ with GSTN infrastructure enhancements associated with a\n   competitive environment\
    \ driven by regulatory directives.\n   Forms of SPNP have been deployed or are\
    \ being deployed widely in the\n   GSTN in various parts of the world, including\
    \ the U.S., Canada,\n   Western Europe, Australia, and the Pacific Rim (e.g.,\
    \ Hong Kong).\n   Other regions, such as South America (e.g., Brazil), are actively\n\
    \   considering it.\n   Implementation of NP within a national telephony infrastructure\n\
    \   entails potentially significant changes to numbering administration,\n   network\
    \ element signaling, call routing and processing, billing,\n   service management,\
    \ and other functions.\n   NP changes the fundamental nature of a dialed E.164\
    \ number from a\n   hierarchical physical routing address to a virtual address.\
    \  NP\n   implementations attempt to encapsulate the impact to the GSTN and\n\
    \   make NP transparent to subscribers by incorporating a translation\n   function\
    \ to map a dialed, potentially ported E.164 address, into a\n   network routing\
    \ address (either a number prefix or another E.164\n   address) which can be hierarchically\
    \ routed.\n   This is roughly analogous to the use of network address translation\n\
    \   on IP is that enables IP address portability by containing the\n   address\
    \ change to the edge of the network and retain the use of\n   Classless Inter-Domain\
    \ Routing (CIDR) blocks in the core which can be\n   route aggregated by the network\
    \ service provider to the rest of the\n   internet.\n   NP bifurcates the historical\
    \ role of a subscriber's E.164 address\n   into two or more data elements (a dialed\
    \ or virtual address, and a\n   network routing address) that must be made available\
    \ to network\n   elements through an NP translation database, carried by forward\
    \ call\n   signaling, and recorded on call detail records.  Not only is call\n\
    \   processing and routing affected, but also Signaling System Number 7\n   (SS7)/Common\
    \ Channel Signaling System Number 7 (C7) messaging.  A\n   number of Transaction\
    \ Capabilities Application Part (TCAP)-based SS7\n   messaging sets utilize an\
    \ E.164 address as an application-level\n   network element address in the global\
    \ title address (GTA) field of\n   the Signaling Connection Control Part (SCCP)\
    \ message header.\n   Consequently, SS7/C7 signaling transfer points (STPs) and\
    \ gateways\n   need to be able to perform n-digit global title translation (GTT)\
    \ to\n   translate a dialed E.164 address into its network address counterpart\n\
    \   via the NP database.\n   In addition, there are various national regulatory\
    \ constraints that\n   establish relevant parameters for NP implementation, most\
    \ of which\n   are not network technology specific.  Consequently, implementations\n\
    \   of NP behavior in IP telephony, consistent with applicable regulatory\n  \
    \ constraints, as well as the need for interoperation with the existing\n   GSTN\
    \ NP implementations, are relevant topics for numerous areas of IP\n   telephony\
    \ works-in-progress with the IETF.\n   This document describes three types of\
    \ number portability and the\n   four schemes that have been standardized to support\
    \ SPNP for\n   geographic E.164 numbers specifically.  Following that, specific\n\
    \   information regarding the call routing and database query\n   implementations\
    \ are described for several regions (North American and\n   Europe) and industries\
    \ (wireless vs. wireline).  The Number\n   Portability Database (NPDB) interfaces\
    \ and the call routing schemes\n   that are used in North America and Europe are\
    \ described to show the\n   variety of standards that may be implemented worldwide.\
    \  A glance at\n   the NP implementations worldwide is provided.  Number pooling\
    \ is\n   briefly discussed to show how NP is being enhanced in the U.S. to\n \
    \  conserve North American area codes.  The conclusion briefly touches\n   the\
    \ potential impacts of NP on IP and Telecommunications\n   Interoperability.\n"
- title: 2. Abbreviations and Acronyms
  contents:
  - "2. Abbreviations and Acronyms\n   ACQ     All Call Query\n   AIN     Advanced\
    \ Intelligent Network\n   AMPS    Advanced Mobile Phone System\n   ANSI    American\
    \ National Standards Institute\n   API     Application Programming Interface\n\
    \   C7      Common Channel Signaling System Number 7\n   CDMA    Code Division\
    \ Multiple Access\n   CdPA    Called Party Address\n   CdPN    Called Party Number\n\
    \   CH      Code Holder\n   CIC     Carrier Identification Code\n   CIDR    Classless\
    \ Inter-Domain Routing\n   CMIP    Common Management Information Protocol\n  \
    \ CO      Central Office\n   CS1     Capability Set 1\n   CS2     Capability Set\
    \ 2\n   DN      Directory Number\n   DNS     Domain Name System\n   ENUM    Telephone\
    \ Number Mapping\n   ETSI    European Tecommunications Standards Institute\n \
    \  FCI     Forward Call Indicator\n   GAP     Generic Address Parameter\n   GMSC\
    \    Gateway Mobile Services Switching Center or Gateway Mobile\n           Switching\
    \ Center\n   GNP     Geographic Number Portability\n   GSM     Global System for\
    \ Mobile Communications\n   GSTN    Global Switched Telephone Network\n   GTT\
    \     Global Title Translation\n   GW      Gateways\n   HLR     Home Location\
    \ Register\n   IAM     Initial Address Message\n   IETF    Internet Engineering\
    \ Task Force\n   ILNP    Interim LNP\n   IN      Intelligent Network\n   INAP\
    \    Intelligent Network Application Part\n   INP     Interim NP\n   IP      Internet\
    \ Protocol\n   IS-41   Interim Standards Number 41\n   ISDN    Integrated Services\
    \ Digital Network\n   ISUP    ISDN User Part\n   ITN     Individual Telephony\
    \ Number\n   ITU     International Telecommunication Union\n   ITU-TS  ITU-Telecommunication\
    \ Sector\n   LDAP    Lightweight Directory Access Protocol\n   LEC     Local Exchange\
    \ Carrier\n   LERG    Local Exchange Routing Guide\n   LNP     Local Number Portability\n\
    \   LRN     Location Routing Number\n   MAP     Mobile Application Part\n   MNP\
    \     Mobile Number Portability\n   MSRN    Mobile Station Roaming Number\n  \
    \ MTP     Message Transfer Part\n   NANP    North American Numbering Plan\n  \
    \ NGNP    Non-Geographic Number Portability\n   NOA     Nature of Address\n  \
    \ NP      Number Portability\n   NPA     Numbering Plan Area\n   NPDB    Number\
    \ Portability Database\n   NRN     Network Routing Number\n   OR      Onward Routing\n\
    \   OSS     Operation Support System\n   PCS     Personal Communication Services\n\
    \   PNTI    Ported Number Translation Indicator\n   PODP    Public Office Dialing\
    \ Plan\n   PUC     Public Utility Commission\n   QoR     Query on Release\n  \
    \ RN      Routing Number\n   RTP     Return to Pivot\n   SCCP    Signaling Connection\
    \ Control Part\n   SCP     Service Control Point\n   SIP     Session Initiation\
    \ Protocol\n   SMR     Special Mobile Radio\n   SPNP    Service Provider Number\
    \ Portability\n   SRF     Signaling Relaying Function\n   SRI     Send Routing\
    \ Information\n   SS7     Signaling System Number 7\n   STP     Signaling Transfer\
    \ Point\n   TCAP    Transaction Capabilities Application Part\n   TDMA    Time\
    \ Division Multiple Access\n   TN      Telephone Number\n   TRIP    Telephony\
    \ Routing Information Protocol\n   URL     Universal Resource Locator\n   U.S.\
    \    United States\n"
- title: 3. Types of Number Portability
  contents:
  - "3. Types of Number Portability\n   As there are several types of E.164 numbers\
    \ (telephone numbers, or\n   just TN) in the GSTN, there are correspondingly several\
    \ types of\n   E.164 NP in the GSTN.  First there are so-called non-geographic\
    \ E.164\n   numbers, commonly used for service-specific applications such as\n\
    \   freephone (800 or 0800).  Portability of these numbers is called\n   non-geographic\
    \ number portability (NGNP).  NGNP, for example, was\n   deployed in the U.S.\
    \ in 1986-92.\n   Geographic number portability (GNP), which includes traditional\
    \ fixed\n   or wireline numbers, as well as mobile numbers which are allocated\n\
    \   out of geographic number range prefixes, is called NP or GNP, or in\n   the\
    \ U.S. local number portability (LNP).\n   Number portability allows the telephony\
    \ subscribers in the GSTN to\n   keep their phone numbers when they change their\
    \ service providers or\n   subscribed services, or when they move to a new location.\n\
    \   The ability to change the service provider while keeping the same\n   phone\
    \ number is called service provider portability (SPNP), also\n   known as \"operator\
    \ portability.\"\n   The ability to change the subscriber's fixed service location\
    \ while\n   keeping the same phone number is called location portability.\n  \
    \ The ability to change the subscribed services (e.g., from the plain\n   old\
    \ telephone service to Integrated Services Digital Network (ISDN)\n   services)\
    \ while keeping the same phone number is called service\n   portability.  Another\
    \ aspect of service portability is to allow the\n   subscribers to enjoy the subscribed\
    \ services in the same way when\n   they roam outside their home networks, as\
    \ is supported by the\n   cellular/wireless networks.\n   In addition, mobile\
    \ number portability (MNP) refers to specific NP\n   implementation in mobile\
    \ networks, either as part of a broader NP\n   implementation in the GSTN or on\
    \ a stand-alone basis.  Where\n   interoperation of LNP and MNP is supported,\
    \ service portability\n   between fixed and mobile service types is possible.\n\
    \   At present, SPNP has been the primary form of NP deployed due to its\n   relevance\
    \ in enabling local service competition.\n   Also in use in the GSTN are the terms\
    \ interim NP (INP) or Interim LNP\n   (ILNP) and true NP.  Interim NP usually\
    \ refers to the use of remote\n   call forwarding-like measures to forward calls\
    \ to ported numbers\n   through the donor network to the new service network.\
    \  These are\n   considered interim relative to true NP, which seeks to remove\
    \ the\n   donor network or old service provider from the call or signaling path\n\
    \   altogether.  Often the distinction between interim and true NP is a\n   national\
    \ regulatory matter relative to the technical/operational\n   requirements imposed\
    \ on NP in that country.\n   Implementations of true NP in certain countries (e.g.,\
    \ U.S., Canada,\n   Spain, Belgium, Denmark) may pose specific requirements for\
    \ IP\n   telephony implementations as a result of regulatory and industry\n  \
    \ requirements for providing call routing and signaling independent of\n   the\
    \ donor network or last previous serving network.\n"
- title: 4. Service Provider Number Portability Schemes
  contents:
  - "4. Service Provider Number Portability Schemes\n   Four schemes can be used to\
    \ support service provider portability and\n   are briefly described below.  But\
    \ first, some further terms are\n   introduced.\n   The donor network is the network\
    \ that first assigned a telephone\n   number (e.g., TN +1-202-533-1234) to a subscriber,\
    \ out of a number\n   range administratively (e.g., +1 202-533) assigned to it.\
    \  The\n   current service provider (new SP), or new serving network, is the\n\
    \   network that currently serves the ported number.  The old serving\n   network\
    \ (or old SP) is the network that previously served the ported\n   number before\
    \ the number was ported to the new serving network.\n   Since a TN can port a\
    \ number of times, the old SP is not necessarily\n   the same as the donor network,\
    \ except for the first time the TN ports\n   away, or when the TN ports back into\
    \ the donor network and away\n   again.  While the new SP and old SP roles are\
    \ transitory as a TN\n   ports around, the donor network is always the same for\
    \ any particular\n   TN based on the service provider to whom the subtending number\
    \ range\n   was administratively assigned.  See the discussion below on number\n\
    \   pooling, as this enhancement of NP further bifurcates the role of the\n  \
    \ donor network into two (the number range or code holder network, and\n   the\
    \ block holder network).\n   To simplify the illustration, all the transit networks\
    \ are ignored.\n   The originating or donor network is the one that performs the\n\
    \   database queries or call redirection, and the dialed directory number\n  \
    \ (TN) has previously been ported out of the donor network.\n   It is assumed\
    \ that the old serving network, the new serving network,\n   and the donor network\
    \ are different networks so as to show which\n   networks are involved in call\
    \ handling and routing and database\n   queries in each of the four schemes. \
    \ Please note that the port of\n   the number (process of moving it from one network\
    \ to another)\n   happened prior to the call setup and is not included in the\
    \ call\n   steps.  Information carried in the signaling messages to support each\n\
    \   of the four schemes is not discussed to simplify the explanation.\n"
- title: 4.1 All Call Query (ACQ)
  contents:
  - "4.1 All Call Query (ACQ)\n   Figure 1 shows the call steps for the ACQ scheme.\
    \  Those call steps\n   are as follows:\n   1) The Originating Network receives\
    \ a call from the caller and sends\n      a query to a centrally administered\
    \ Number Portability Database\n      (NPDB), a copy of which is usually resident\
    \ on a network element\n      within its network or through a third party provider.\n\
    \   2) The NPDB returns the routing number associated with the dialed\n      directory\
    \ number.  The routing number is discussed later in\n      Section 6.\n   3) The\
    \ Originating Network uses the routing number to route the call\n      to the\
    \ new serving network.\n   +-------------+              +-----------+    Number\
    \   +-----------+\n   | Centralized |              | New Serv. |    ported   |\
    \ Old Serv. |\n   |    NPDB     |    +-------->|  Network  |<------------|  Network\
    \  |\n   +-------------+    |         +-----------+             +-----------+\n\
    \       ^  |           |\n       |  |           |\n      1|  |         3.|\n \
    \      |  | 2.        |\n       |  |           |\n       |  v           |\n  \
    \  +----------+      |         +----------+           +----------+\n    |   Orig.\
    \  |------+         |   Donor  |           | Internal |\n    |  Network |    \
    \            |  Network |           |   NPDB   |\n    +----------+           \
    \     +----------+           +----------+\n                 Figure 1 - All Call\
    \ Query (ACQ) Scheme.\n"
- title: 4.2 Query on Release (QoR)
  contents:
  - "4.2 Query on Release (QoR)\n   Figure 2 shows the call steps for the QoR scheme.\
    \  Those call steps\n   are as follows:\n   +-------------+              +-----------+\
    \    Number   +-----------+\n   | Centralized |              | New Serv. |   \
    \ ported   | Old Serv. |\n   |    NPDB     |              |  Network  |<------------|\
    \  Network  |\n   +-------------+              +-----------+             +-----------+\n\
    \       ^  |                          ^\n       |  | 4.                      \
    \ |\n     3.|  |              5.          |\n       |  |   +----------------------+\n\
    \       |  |   |\n       |  v   |\n    +----------+      2.        +----------+\
    \           +----------+\n    |   Orig.  |<---------------|   Donor  |       \
    \    | Internal |\n    |  Network |--------------->|  Network |           |  \
    \ NPDB   |\n    +----------+      1.        +----------+           +----------+\n\
    \                Figure 2 - Query on Release (QoR) Scheme.\n   1) The Originating\
    \ Network receives a call from the caller and routes\n      the call to the donor\
    \ network.\n   2) The donor network releases the call and indicates that the dialed\n\
    \      directory number has been ported out of that switch.\n   3) The Originating\
    \ Network sends a query to its copy of the centrally\n      administered NPDB.\n\
    \   4) The NPDB returns the routing number associated with the dialed\n      directory\
    \ number.\n   5) The Originating Network uses the routing number to route the\
    \ call\n      to the new serving network.\n"
- title: 4.3 Call Dropback
  contents:
  - "4.3 Call Dropback\n   Figure 3 shows the call steps for the Dropback scheme.\
    \  This scheme\n   is also known as \"Return to Pivot (RTP).\"  Those call steps\
    \ are as\n   follows:\n   1) The Originating Network receives a call from the\
    \ caller and routes\n      the call to the donor network.\n   2) The donor network\
    \ detects that the dialed directory number has\n      been ported out of the donor\
    \ switch and checks with an internal\n      network-specific NPDB.\n   3) The\
    \ internal NPDB returns the routing number associated with the\n      dialed directory\
    \ number.\n   4) The donor network releases the call by providing the routing\n\
    \      number.\n   5) The Originating Network uses the routing number to route\
    \ the call\n      to the new serving network.\n   +-------------+            \
    \  +-----------+    Number   +-----------+\n   | Centralized |              |\
    \ New Serv. |    porting  | Old Serv. |\n   |    NPDB     |              |  Network\
    \  |<------------|  Network  |\n   +-------------+              +-----------+\
    \             +-----------+\n                                    /\\\n       \
    \                              |\n                           5.        |\n   \
    \         +------------------------+\n            |\n            |\n    +----------+\
    \       4.       +----------+     3.    +----------+\n    |   Orig.  |<---------------|\
    \   Donor  |<----------| Internal |\n    |  Network |--------------->|  Network\
    \ |---------->|   NPDB   |\n    +----------+      1.        +----------+    2.\
    \     +----------+\n                       Figure 3 - Dropback Scheme.\n"
- title: 4.4 Onward Routing (OR)
  contents:
  - "4.4 Onward Routing (OR)\n   Figure 4 shows the call steps for the OR scheme.\
    \  Those call steps\n   are as follows:\n   1) The Originating Network receives\
    \ a call from the caller and routes\n      the call to the donor network.\n  \
    \ 2) The donor network detects that the dialed directory number has\n      been\
    \ ported out of the donor switch and checks with an internal\n      network-specific\
    \ NPDB.\n   3) The internal NPDB returns the routing number associated with the\n\
    \      dialed directory number.\n   4) The donor network uses the routing number\
    \ to route the call to the\n      new serving network.\n   +-------------+   \
    \           +-----------+    Number   +-----------+\n   | Centralized |      \
    \        | New Serv. |    porting  | Old Serv. |\n   |    NPDB     |         \
    \     |  Network  |<------------|  Network  |\n   +-------------+            \
    \  +-----------+             +-----------+\n                                 \
    \   /\\\n                                     |\n                            \
    \       4.|\n                                     |\n    +----------+        \
    \        +----------+     3.    +----------+\n    |   Orig.  |               \
    \ |   Donor  |<----------| Internal |\n    |  Network |--------------->|  Network\
    \ |---------->|   NPDB   |\n    +----------+      1.        +----------+    2.\
    \     +----------+\n                  Figure 4 - Onward Routing (OR) Scheme.\n"
- title: 4.5 Comparisons of the Four Schemes
  contents:
  - "4.5 Comparisons of the Four Schemes\n   Only the ACQ scheme does not involve\
    \ the donor network when routing\n   the call to the new serving network of the\
    \ dialed ported number.  The\n   other three schemes involve call setup to or\
    \ signaling with the donor\n   network.\n   Only the OR scheme requires the setup\
    \ of two physical call segments,\n   one from the Originating Network to the donor\
    \ network and the other\n   from the donor network to the new serving network.\
    \  The OR scheme is\n   the least efficient in terms of using the network transmission\n\
    \   facilities.  The QoR and Dropback schemes set up calls to the donor\n   network\
    \ first but release the call back to the Originating Network\n   that then initiates\
    \ a new call to the Current Serving Network.  For\n   the QoR and Dropback schemes,\
    \ circuits are still reserved one by one\n   between the Originating Network and\
    \ the donor network when the\n   Originating Network sets up the call towards\
    \ the donor network.\n   Those circuits are released one by one when the call\
    \ is released from\n   the donor network back to the Originating Network.  The\
    \ ACQ scheme is\n   the most efficient in terms of using the switching and transmission\n\
    \   facilities for the call.\n   Both the ACQ and QoR schemes involve Centralized\
    \ NPDBs for the\n   Originating Network to retrieve the routing information. \
    \ Centralized\n   NPDB means that the NPDB contains ported number information\
    \ from\n   multiple networks.  This is in contrast to the internal network-\n\
    \   specific NPDB that is used for the Dropback and OR schemes.  The\n   internal\
    \ NPDB only contains information about the numbers that were\n   ported out of\
    \ the donor network.  The internal NPDB can be a stand-\n   alone database that\
    \ contains information about all or some ported-out\n   numbers from the donor\
    \ network.  It can also reside on the donor\n   switch and only contain information\
    \ about those numbers ported out of\n   the donor switch.  In that case, no query\
    \ to a stand-alone internal\n   NPDB is required.  The donor switch for a particular\
    \ phone number is\n   the switch to which the number range is assigned from which\
    \ that\n   phone number was originally assigned.\n   For example, number ranges\
    \ in the North American Numbering Plan\n   (NANP) are usually assigned in the\
    \ form of central office codes (CO\n   codes) comprising a six-digit prefix formatted\
    \ as a NPA+NXX.  Thus a\n   switch serving +1-202-533 would typically serve +1-202-533-0000\n\
    \   through +1-202-533-9999.  In major cities, switches usually host\n   several\
    \ CO codes.  NPA stands for Numbering Plan Area, which is also\n   known as the\
    \ area code.  It is three-digits long and has the format\n   of NXX where N is\
    \ any digit from 2 to 9 and X is any digit from 0 to\n   9.  NXX, in the NPA+NXX\
    \ format, is known as the office code that has\n   the same format as the NPA.\
    \  When a NPA+NXX code is set as \"portable\"\n   in the Local Exchange Routing\
    \ Guide (LERG), it becomes a \"portable\n   NPA+NXX\" code.\n   Similarly, in\
    \ other national E.164 numbering plans, number ranges\n   cover a contiguous range\
    \ of numbers within that range.  Once a number\n   within that range has ported\
    \ away from the donor network, all numbers\n   in that range are considered potentially\
    \ ported and should be queried\n   in the NPDB.\n   The ACQ scheme has two versions.\
    \  One version is for the Originating\n   Network to always query the NPDB when\
    \ a call is received from the\n   caller regardless of whether the dialed directory\
    \ number belongs to\n   any number range that is portable or has at least one\
    \ number ported\n   out.  The other version is to check whether the dialed directory\n\
    \   number belongs to any number range that is portable or has at least\n   one\
    \ number ported out.  If yes, an NPDB query is sent.  If not, no\n   NPDB query\
    \ is sent.  The former performs better when there are many\n   portable number\
    \ ranges.  The latter performs better when there are\n   not too many portable\
    \ number ranges at the expense of checking every\n   call to see whether NPDB\
    \ query is needed.  The latter ACQ scheme is\n   similar to the QoR scheme, except\
    \ that the QoR scheme uses call setup\n   and relies on the donor network to indicate\
    \ \"number ported out\"\n   before launching the NPDB query.\n"
- title: 5. Database Queries in the NP Environment
  contents:
  - "5. Database Queries in the NP Environment\n   As indicated earlier, the ACQ and\
    \ QoR schemes require that a switch\n   query the NPDB for routing information.\
    \  Various standards have been\n   defined for the switch-to-NPDB interface. \
    \ Those interfaces with\n   their protocol stacks are briefly described below.\
    \  The term \"NPDB\"\n   is used for a stand-alone database that may support just\
    \ one or some\n   or all of the interfaces mentioned below.  The NPDB query contains\n\
    \   the dialed directory number and the NPDB response contains the\n   routing\
    \ number.  There is certainly other information that is sent in\n   the query\
    \ and response.  The primary interest is to get the routing\n   number from the\
    \ NPDB to the switch for call routing.\n"
- title: 5.1 U.S. and Canada
  contents:
  - "5.1 U.S. and Canada\n   One of the following five NPDB interfaces can be used\
    \ to query an\n   NPDB:\n   a) Advanced Intelligent Network (AIN) using the American\
    \ National\n      Standards Institute (ANSI) version of the Intelligent Network\n\
    \      Application Part (INAP) [ANSI SS] [ANSI DB].  The INAP is carried\n   \
    \   on top of the protocol stack that includes the (ANSI) Message\n      Transfer\
    \ Part (MTP) Levels 1 through 3, ANSI SCCP and ANSI TCAP.\n      This interface\
    \ can be used by the wireline or wireless switches,\n      is specific to the\
    \ NP implementation in North America, and is\n      modeled on the Public Office\
    \ Dialing Plan (PODP) trigger defined\n      in the Advanced Intelligent Network\
    \ (AIN) 0.1 call model.\n   b) Intelligent Network (IN), which is similar to the\
    \ one used for\n      querying the 800 databases.  The IN protocol is carried\
    \ on top of\n      the protocol stack that includes the ANSI MTP Levels 1 through\
    \ 3,\n      ANSI SCCP, and ANSI TCAP.  This interface can be used by the\n   \
    \   wireline or wireless switches.\n   c) ANSI IS-41 [IS41] [ISNP], which is carried\
    \ on top of the protocol\n      stack that includes the ANSI MTP Levels 1 through\
    \ 3, ANSI SCCP,\n      and ANSI TCAP.  This interface can be used by the IS-41\
    \ based\n      cellular/Personal Communication Services (PCS) wireless switches\n\
    \      (e.g., AMPS, TDMA and CDMA).  Cellular systems use spectrum at 800\n  \
    \    MHz range and PCS systems use spectrum at 1900 MHz range.\n   d) Global System\
    \ for Mobile Communication Mobile Application Part\n      (GSM MAP) [GSM], which\
    \ is carried on top of the protocol stack\n      that includes the ANSI MTP Levels\
    \ 1 through 3, ANSI SCCP, and\n      International Telecommunication Union - Telecommunication\
    \ Sector\n      (ITU-TS) TCAP.  It can be used by the PCS1900 wireless switches\n\
    \      that are based on the GSM technologies.  GSM is a series of\n      wireless\
    \ standards defined by the European Telecommunications\n      Standards Institute\
    \ (ETSI).\n   e) ISUP triggerless translation.  NP translations are performed\n\
    \      transparently to the switching network by the signaling network\n     \
    \ (e.g., Signaling Transfer Points (STPs) or signaling gateways).\n      ISUP\
    \ IAM messages are examined to determine if the CdPN field has\n      already\
    \ been translated, and if not, an NPDB query is performed,\n      and the appropriate\
    \ parameters in the IAM message modified to\n      reflect the results of the\
    \ translation.  The modified IAM message\n      is forwarded by the signaling\
    \ node on to the designated DPC in a\n      transparent manner to continue call\
    \ setup.  The NPDB can be\n      integrated with the signaling node or, accessed\
    \ via an Application\n      Programming Interface (API) locally, or by a query\
    \ to a remote\n      NPDB using  a proprietary protocol or the schemes described\
    \ above.\n   Wireline switches have the choice of using either (a), (b), or (e).\n\
    \   IS-41 based wireless switches have the choice of using (a), (b), (c),\n  \
    \ or (e).  PCS1900 wireless switches have the choice of using (a), (b),\n   (d),\
    \ or (e).  In the United States, service provider portability will\n   be supported\
    \ by both the wireline and wireless systems, not only\n   within the wireline\
    \ or wireless domain but also across the\n   wireline/wireless boundary.  However,\
    \ this is not true in Europe\n   where service provider portability is usually\
    \ supported only within\n   the wireline or wireless domain, not across the wireline/wireless\n\
    \   boundary due to explicit use of service-specific number range\n   prefixes.\
    \  The reason is to avoid caller confusion about the call\n   charge.  GSM systems\
    \ in Europe are assigned distinctive destination\n   network codes, and the caller\
    \ pays a higher charge when calling a GSM\n   directory number.\n"
- title: 5.2 Europe
  contents:
  - "5.2 Europe\n   One of the following two interfaces can be used to query an NPDB:\n\
    \   a) Capability Set 1 (CS1) of the ITU-TS INAP [CS1], which is carried\n   \
    \   on top of the protocol stack that includes the ITU-TS MTP Levels 1\n     \
    \ through 3, ITU-TS SCCP, and ITU-TS TCAP.\n   b) Capability Set 2 (CS2) of the\
    \ ITU-TS INAP [CS2], which is carried\n      on top of the protocol stack that\
    \ includes the ITU-TS MTP Levels 1\n      through 3, ITU-TS SCCP, and ITU-TS TCAP.\n\
    \   Wireline switches have the choice of using either (a) or (b);\n   however,\
    \ all the implementations in Europe so far are based on CS1.\n   As indicated\
    \ earlier that number portability in Europe does not go\n   across the wireline/wireless\
    \ boundary.  The wireless switches can\n   also use (a) or (b) to query the NPDBs\
    \ if those NPDBs contains ported\n   wireless directory numbers.  The term \"\
    Mobile Number Portability\n   (MNP)\" is used for the support of service provider\
    \ portability by the\n   GSM networks in Europe.\n   In most, if not all, cases\
    \ in Europe, the calls to the wireless\n   directory numbers are routed to the\
    \ wireless donor network first.\n   Over there, an internal NPDB is queried to\
    \ determine whether the\n   dialed wireless directory number has been ported out\
    \ or not.  In this\n   case, the interface to the internal NPDB is not subject\
    \ to\n   standardization.\n   MNP in Europe can also be supported via the MNP\
    \ Signaling Relay\n   Function (MNP-SRF).  Again, an internal NPDB or a database\
    \ integrated\n   at the MNP-SRF is used to modify the SCCP Called Party Address\n\
    \   parameter in the GSM MAP messages so that they can be re-directed to\n   the\
    \ wireless serving network.  Call routing involving MNP will be\n   explained\
    \ in Section 6.2.\n"
- title: 6. Call Routing in the NP Environment
  contents:
  - "6. Call Routing in the NP Environment\n   This section discusses the call routing\
    \ after the routing information\n   has been retrieved either through an NPDB\
    \ query or an internal\n   database lookup at the donor switch, or from the Integrated\
    \ Services\n   Digital Network User Part (ISUP) signaling message (e.g., for the\n\
    \   Dropback scheme).  For the ACQ, QoR and Dropback schemes, it is the\n   Originating\
    \ Network that has the routing information and is ready to\n   route the call.\
    \  For the OR scheme, it is the donor network that has\n   the routing information\
    \ and is ready to route the call.\n   A number of triggering schemes may be employed\
    \ that determine where\n   in the call path the NPDB query is performed.  In the\
    \ U.S. a \"N-1\"\n   policy is used, which essentially says that for local calls,\
    \ the\n   originating local carriers performs the query.  Otherwise, the long\n\
    \   distance carrier is expected to follow through with the query.  To\n   ensure\
    \ independence of the actual trigger policy employed in any one\n   carrier, forward\
    \ call signaling is used to flag that an NPDB query\n   has already been performed\
    \ and to therefore suppress any subsequent\n   NP triggers that may be encountered\
    \ in downstream switches, in\n   downstream networks.  This allows the earliest\
    \ able network in the\n   call path to perform the query without introducing additional\
    \ costs\n   and call setup delays when redundant queries are performed\n   downstream.\n"
- title: 6.1 U.S. and Canada
  contents:
  - "6.1 U.S. and Canada\n   In the U.S. and Canada, a ten-digit North American Numbering\
    \ Plan\n   (NANP) number called Location Routing Number (LRN) is assigned to\n\
    \   every switch involved in NP.  In the NANP, a switch is not reachable\n   unless\
    \ it has a unique number range (CO code) assigned to it.\n   Consequently, the\
    \ LRN for a switch is always assigned out of a CO\n   code that is assigned to\
    \ that switch.\n   The LRN assigned to a switch currently serving a particular\
    \ ported\n   telephone number is returned as the network routing address in the\n\
    \   NPDB response.  The service portability scheme that was adopted in\n   the\
    \ North America is very often referred to as the LRN scheme or\n   method.\n \
    \  LRN serves as a network address for terminating calls served off that\n   switch\
    \ using ported numbers.  The LRN is assigned by the switch\n   operator using\
    \ any of the unique CO codes (NPA+NXX) assigned to that\n   switch.  The LRN is\
    \ considered a non-dialable address, as the same\n   10-digit number value may\
    \ be assigned to a line on that switch.  A\n   switch may have more than one LRN.\n\
    \   During call routing/processing, a switch performs an NPDB query to\n   obtain\
    \ the LRN associated with the dialed directory number.  NPDB\n   queries are performed\
    \ for all the dialed directory numbers whose\n   NPA+NXX codes are marked as portable\
    \ NPA+NXX at that switch.  When\n   formulating the ISUP Initial Address Message\
    \ (IAM) to be sent to the\n   next switch, the switch puts the ten-digit LRN in\
    \ the ISUP Called\n   Party Number (CdPN) parameter and the originally dialed\
    \ directory\n   number in the ISUP Generic Address parameter (GAP).  A new code\
    \ in\n   the GAP was defined to indicate that the address information in the\n\
    \   GAP is the dialed directory number.  A new bit in the ISUP Forward\n   Call\
    \ Indicator (FCI) parameter, the Ported Number Translation\n   Indicator (PNTI)\
    \ bit, is set to imply that NPDB query has already\n   been performed.  All the\
    \ switches in the downstream will not perform\n   the NPDB query if the PNTI bit\
    \ is set.\n   When the terminating switch receives the IAM and sees the PNTI bit\
    \ in\n   the FCI parameter set and its own LRN in the CdPN parameter, it\n   retrieves\
    \ the originally dialed directory number from the GAP and\n   uses the dialed\
    \ directory number to terminate the call.\n   A dialed directory number with a\
    \ portable NPA+NXX does not imply that\n   a directory number has been ported.\
    \  The NPDBs currently do not store\n   records for non-ported directory numbers.\
    \  In that case, the NPDB\n   will return the same dialed directory number instead\
    \ of the LRN.  The\n   switch will then set the PNTI bit, but keep the dialed\
    \ directory\n   number in the CdPN parameter.\n   In the real world environment,\
    \ the Originating Network is not always\n   the one that performs the NPDB query.\
    \  For example, it is usually the\n   long distance carriers that query the NPDBs\
    \ for long distance calls.\n   In that case, the Originating Network operated\
    \ by the local exchange\n   carrier (LEC) simply routes the call to the long distance\
    \ carrier\n   that is to handle that call.  A wireless network acting as the\n\
    \   Originating Network can also route the call to the interconnected\n   local\
    \ exchange carrier network if it does not want to support the\n   NPDB interface\
    \ at its mobile switches.\n"
- title: 6.2 Europe
  contents:
  - "6.2 Europe\n   In some European countries, a routing number is prefixed to the\n\
    \   dialed directory number.  The ISUP CdPN parameter in the IAM will\n   contain\
    \ the routing prefix and the dialed directory number.  For\n   example, United\
    \ Kingdom uses routing prefixes with the format of\n   5XXXXX and Italy uses C600XXXXX\
    \ as the routing prefix.  The networks\n   use the information in the ISUP CdPN\
    \ parameter to route the call to\n   the New/Current Serving Network.\n   The\
    \ routing prefix can identify the Current Serving Network or the\n   Current Serving\
    \ Switch of a ported number.  For the former case,\n   another query to the \"\
    internal\" NPDB at the Current Serving Network\n   is required to identify the\
    \ Current Serving Switch before routing the\n   call to that switch.  This shields\
    \ the Current Serving Switch\n   information for a ported number from the other\
    \ networks at the\n   expense of an additional NPDB query.  Another routing number,\
    \ that be\n   meaningful within the Current Serving Network, will replace the\n\
    \   previously prefixed routing number in the ISUP CdPN parameter.  For\n   the\
    \ latter case, the call is routed to the Current Serving Switch\n   without an\
    \ additional NPDB query.\n   When the terminating switch receives the IAM and\
    \ sees its own routing\n   prefix in the CdPN parameter, it retrieves the originally\
    \ dialed\n   directory number after the routing prefix, and uses the dialed\n\
    \   directory number to terminate the call.\n   The call routing example described\
    \ above shows one of the three\n   methods that can be used to transport the Directory\
    \ Number (DN) and\n   the Routing Number (RN) in the ISUP IAM message.  In addition,\
    \ some\n   other information may be added/modified as is listed in the ETSI 302\n\
    \   097 document [ETSIISUP], which is based on the ITU-T Recommendation\n   Q.769.1\
    \ [ITUISUP].  The three methods and the enhancements in ISUP to\n   support number\
    \ portability are briefly described below:\n   a) Two separate parameters with\
    \ the CdPN parameter containing the RN\n      and a new Called Directory Number\
    \ (CdDN) parameter containing the\n      DN.  A new value for the Nature of Address\
    \ (NOA) indicator in the\n      CdPN parameter is defined to indicate that the\
    \ RN is in the CdPN\n      parameter.  The switches use the CdPN parameter to\
    \ route the call\n      as is done today.\n   b) Two separate parameters with\
    \ the CdPN parameter containing the DN\n      and a new Network Routing Number\
    \ (NRN) parameter containing the\n      RN.  This method requires that the switches\
    \ use the NRN parameter\n      to route the call.\n   c) Concatenated parameter\
    \ with the CdPN parameter containing the RN\n      plus the DN.  A new Nature\
    \ of Address (NOA) indicator in the CdPN\n      parameter is defined to indicate\
    \ that the RN is concatenated with\n      the DN in the CdPN parameter.  Some\
    \ countries may not use new NOA\n      value because the routing prefix does not\
    \ overlap with the dialed\n      directory numbers.  But if the routing prefix\
    \ overlaps with the\n      dialed directory numbers, a new NOA value must be assigned.\
    \  For\n      example, Spain uses \"XXXXXX\" as the routing prefix to identify\
    \ the\n      new serving network and uses a new NOA value of 126.\n   There is\
    \ also a network option to add a new ISUP parameter called\n   Number Portability\
    \ Forwarding Information parameter.  This parameter\n   has a four-bit Number\
    \ Portability Status Indicator field that can\n   provide an indication whether\
    \ number portability query is done for\n   the called directory number and whether\
    \ the called directory number\n   is ported or not if the number portability query\
    \ is done.\n   Please note that all of the NP enhancements for a ported number\
    \ can\n   only be used in the country that defined them.  This is because\n  \
    \ number portability is supported within a nation.  Within each nation,\n   the\
    \ telecommunications industry or the regulatory bodies can decide\n   which method\
    \ or methods to use.  Number portability related\n   parameters and coding are\
    \ usually not passed across the national\n   boundaries unless the interconnection\
    \ agreements allow it.  For\n   example, a UK routing prefix can only be used\
    \ in the UK, and would\n   cause a routing problem if it appears outside the UK.\n\
    \   As indicated earlier, an originating wireless network can query the\n   NPDB\
    \ and concatenate the RN with DN in the CdPN parameter and route\n   the call\
    \ directly to the Current Serving Network.\n   If NPDBs do not contain information\
    \ about the wireless directory\n   numbers, the call, originated from either a\
    \ wireline or a wireless\n   network, will be routed to the Wireless donor network.\
    \  Over there,\n   an internal NPDB is queried to retrieve the RN that then is\n\
    \   concatenated with the DN in the CdPN parameter.\n   There are several ways\
    \ of realizing MNP.  If MNP-SRF is supported,\n   the Gateway Mobile Services\
    \ Switching Center (GMSC) at the wireless\n   donor network can send the GSM MAP\
    \ Send Routing Information (SRI)\n   message to the MNP-SRF when receiving a call\
    \ from the wireline\n   network.  The MNP-SRF interrogates an internal or integrated\
    \ NPDB for\n   the RN of the MNP-SRF of the wireless Current Serving Network and\n\
    \   prefixes the RN to the dialed wireless directory number in the global\n  \
    \ title address information in the SCCP Called Party Address (CdPA)\n   parameter.\
    \  This SRI message will be routed to the MNP-SRF of the\n   wireless Current\
    \ Serving Network, which then responds with an\n   acknowledgement by providing\
    \ the RN plus the dialed wireless\n   directory number as the Mobile Station Roaming\
    \ Number (MSRN).  The\n   GMSC of the wireless donor network formulates the ISUP\
    \ IAM with the\n   RN plus the dialed wireless directory number in the CdPN parameter\n\
    \   and routes the call to the wireless Current Serving Network.  A GMSC\n   of\
    \ the wireless Current Serving Network receives the call and sends\n   an SRI\
    \ message to the associated MNP-SRF where the global title\n   address information\
    \ of the SCCP CdPA parameter contains only the\n   dialed wireless directory number.\
    \  The MNP-SRF then replaces the\n   global title address information in the SCCP\
    \ CdPA parameter with the\n   address information associated with a Home Location\
    \ Register (HLR)\n   that hosts the dialed wireless directory number and forwards\
    \ the\n   message to that HLR after verifying that the dialed wireless\n   directory\
    \ number is a ported-in number.  The HLR then returns an\n   acknowledgement by\
    \ providing an MSRN for the GMSC to route the call\n   to the MSC that currently\
    \ serves the mobile station that is\n   associated with the dialed wireless directory\
    \ number.  Please see\n   [MNP] for details and additional scenarios.\n"
- title: 7. NP Implementations for Geographic E.164 Numbers
  contents:
  - "7. NP Implementations for Geographic E.164 Numbers\n   This section shows the\
    \ known SPNP implementations worldwide.\n   +-------------+----------------------------------------------------+\n\
    \   +   Country   +             SPNP Implementation                    +\n   +-------------+----------------------------------------------------+\n\
    \   +  Argentina  + Analyzing operative viability now. Will determine  +\n   +\
    \             + whether portability should be made obligatory      +\n   +   \
    \          + after a technical solution has been determined.    +\n   +-------------+----------------------------------------------------+\n\
    \   +  Australia  + NP supported by wireline operators since 11/30/99. +\n   +\
    \             + NP among wireless operators in March/April 2000,   +\n   +   \
    \          + but may be delayed to 1Q01. The access provider    +\n   +      \
    \       + or long distance provider has the obligation to    +\n   +         \
    \    + route the call to the correct destination. The     +\n   +            \
    \ + donor network is obligated to maintain and make    +\n   +             + available\
    \ a register of numbers ported away from   +\n   +             + its network.\
    \  Telstra uses onward routing via an   +\n   +             + on-switch solution.\
    \                                +\n   +-------------+----------------------------------------------------+\n\
    \   +-------------+----------------------------------------------------+\n   +\
    \   Country   +             SPNP Implementation                    +\n   +-------------+----------------------------------------------------+\n\
    \   +   Austria   + Uses onward routing at the donor network.  Routing +\n   +\
    \             + prefix is \"86xx\" where \"xx\" identifies the         +\n   +\
    \             + recipient network.                                 +\n   +-------------+----------------------------------------------------+\n\
    \   +  Belgium    + ACQ selected by the industry. Routing prefix is    +\n   +\
    \             + \"Cxxxx\" where \"xxxx\" identifies the recipient      +\n   +\
    \             + switch. Another routing prefix is \"C00xx\" with \"xx\"+\n   +\
    \             + identifying the recipient network.  Plan to use NOA+\n   +   \
    \          + to identify concatenated numbers and abandon the   +\n   +      \
    \       + hexadecimal routing prefix.                        +\n   +-------------+----------------------------------------------------+\n\
    \   +  Brazil     + Considering NP for wireless users.                 +\n   +-------------+----------------------------------------------------+\n\
    \   +  Chile      + There has been discussions lately on NP.           +\n   +-------------+----------------------------------------------------+\n\
    \   +  Colombia   + There was an Article 3.1 on NP to support NP prior +\n   +\
    \             + to December 31, 1999 when NP became technically    +\n   +   \
    \          + possible. Regulator has not yet issued regulations +\n   +      \
    \       + concerning this matter.                            +\n   +-------------+----------------------------------------------------+\n\
    \   +  Denmark    + Uses ACQ. Routing number not passed between        +\n   +\
    \             + operators; however, NOA is set to \"112\" to         +\n   + \
    \            + indicate \"ported number.\"  QoR can be used based   +\n   +  \
    \           + on bilateral agreements.                           +\n   +-------------+----------------------------------------------------+\n\
    \   +  Finland    + Uses ACQ.  Routing prefix is \"1Dxxy\" where \"xxy\"   +\n\
    \   +             + identifies the recipient network and service type. +\n   +-------------+----------------------------------------------------+\n\
    \   +  France     + Uses onward routing.  Routing prefix is \"Z0xxx\"    +\n \
    \  +             + where \"xxx\" identifies the recipient switch.       +\n  \
    \ +-------------+----------------------------------------------------+\n   + \
    \ Germany    + The originating network needs to do necessary      +\n   +    \
    \         + rerouting.  Operators decide their own solution(s).+\n   +       \
    \      + Deutsche Telekom uses ACQ.  Routing prefix is      +\n   +          \
    \   + \"Dxxx\" where \"xxx\" identifies the recipient        +\n   +         \
    \    + network.                                           +\n   +-------------+----------------------------------------------------+\n\
    \   +  Hong Kong  + Recipient network informs other networks about     +\n   +\
    \             + ported-in numbers.  Routing prefix is \"14x\" where  +\n   + \
    \            + \"14x\" identifies the recipient network, or a       +\n   +  \
    \           + routing number of \"4x\" plus 7 or 8 digits is used  +\n   +   \
    \          + where \"4x\" identifies the recipient network and    +\n   +    \
    \         + the rest of digits identify the called party.      +\n   +-------------+----------------------------------------------------+\n\
    \   +-------------+----------------------------------------------------+\n   +\
    \   Country   +             SPNP Implementation                    +\n   +-------------+----------------------------------------------------+\n\
    \   +  Ireland    + Operators choose their own solution but use onward +\n   +\
    \             + routing now. Routing prefix is \"1750\" as the intra-+\n   + \
    \            + network routing code (network-specific) and        +\n   +    \
    \         + \"1752xxx\" to \"1759xxx\" for GNP where \"xxx\"         +\n   + \
    \            + identifies the recipient switch.                   +\n   +-------------+----------------------------------------------------+\n\
    \   +  Italy      + Uses onward routing. Routing prefix is \"C600xxxxx\" +\n \
    \  +             + where \"xxxxx\" identifies the recipient switch.     +\n  \
    \ +             + Telecom Italia uses IN solution and other operators+\n   + \
    \            + use on-switch solution.                            +\n   +-------------+----------------------------------------------------+\n\
    \   +  Japan      + Uses onward routing.  Donor switch uses IN to get  +\n   +\
    \             + routing number.                                    +\n   +-------------+----------------------------------------------------+\n\
    \   +  Mexico     + NP is considered in the Telecom law; however, the  +\n   +\
    \             + regulator (Cofetel) or the new local entrants have +\n   +   \
    \          + started no initiatives on this process.            +\n   +-------------+----------------------------------------------------+\n\
    \   + Netherlands + Operators decide NP scheme to use.  Operators have +\n   +\
    \             + chosen ACQ or QoR.  KPN implemented IN solution    +\n   +   \
    \          + similar to U.S. solution.  Routing prefix is not   +\n   +      \
    \       + passed between operators.                          +\n   +-------------+----------------------------------------------------+\n\
    \   +  Norway     + OR for short-term and ACQ for long-term.  QoR is   +\n   +\
    \             + optional. Routing prefix can be \"xxx\" with NOA=8,  +\n   + \
    \            + or \"142xx\" with NOA=3 where \"xxx\" or \"xx\"          +\n  \
    \ +             + identifies the recipient network.                  +\n   +------------\
    \ +----------------------------------------------------+\n   +  Peru       + Wireline\
    \ NP may be supported in 2001.              +\n   +-------------+----------------------------------------------------+\n\
    \   +  Portugal   + No NP today.                                       +\n   +-------------+----------------------------------------------------+\n\
    \   +  Spain      + Uses ACQ.  Telefonica uses QoR within its network. +\n   +\
    \             + Routing prefix is  \"xxyyzz\" where \"xxyyzz\"         +\n   +\
    \             + identifies the recipient network.  NOA is set to   +\n   +   \
    \          + 126.                                               +\n   +-------------+----------------------------------------------------+\n\
    \   +  Sweden     + Standardized the ACQ but OR for operators without  +\n   +\
    \             + IN. Routing prefix is \"xxx\" with NOA=8 or \"394xxx\" +\n   +\
    \             + with NOA=3 where \"xxx\" identifies the recipient    +\n   + \
    \            + network. But operators decide NP scheme to use.    +\n   +    \
    \         + Telia uses onward routing between operators.       +\n   +-------------+----------------------------------------------------+\n\
    \   +-------------+----------------------------------------------------+\n   +\
    \   Country   +             SPNP Implementation                    +\n   +-------------+----------------------------------------------------+\n\
    \   + Switzerland + Uses OR now and QoR in 2001.  Routing prefix is    +\n   +\
    \             + \"980xxx\" where \"xxx\" identifies the recipient      +\n   +\
    \             + network.                                           +\n   +-------------+----------------------------------------------------+\n\
    \   +  UK         + Uses onward routing. Routing prefix is \"5xxxxx\"    +\n \
    \  +             + where \"xxxxx\" identifies the recipient switch. NOA +\n  \
    \ +             + is 126. BT uses the dropback scheme in some parts  +\n   + \
    \            + of its network.                                    +\n   +-------------+----------------------------------------------------+\n\
    \   +  US         + Uses ACQ.  \"Location Routing Number (LRN)\" is used +\n \
    \  +             + in the Called Party Number parameter.  Called party+\n   +\
    \             + number is carried in the Generic Address Parameter +\n   +   \
    \          + Use a PNTI indicator in the Forward Call Indicator +\n   +      \
    \       + parameter to indicate that NPDB dip has been       +\n   +         \
    \    + performed.                                         +\n   +-------------+----------------------------------------------------+\n"
- title: 8. Number Conservation Methods Enabled by NP
  contents:
  - "8. Number Conservation Methods Enabled by NP\n   In addition to porting numbers\
    \ NP provides the ability for number\n   administrators to assign numbering resources\
    \ to operators in smaller\n   increments.  Today it is common for numbering resources\
    \ to be\n   assigned to telephone operators in a large block of consecutive\n\
    \   telephone numbers (TNs).  For example, in North America each of these\n  \
    \ blocks contains 10,000 TNs and is of the format NXX+0000 to NXX+9999.\n   Operators\
    \ are assigned a specific NXX, or block.  That operator is\n   referred to as\
    \ the block holder.  In that block there are 10,000 TNs\n   with line numbers\
    \ ranging from 0000 to 9999.\n   Instead of assigning an entire block to the operator,\
    \ NP allows the\n   administrator to assign a sub-block or even an individual\
    \ telephone\n   number.  This is referred to as block pooling and individual\n\
    \   telephone number (ITN) pooling, respectively.\n"
- title: 8.1 Block Pooling
  contents:
  - "8.1 Block Pooling\n   Block Pooling refers to the process whereby the number\
    \ administrator\n   assigns a range of numbers defined by a logical sub-block\
    \ of the\n   existing block.  Using North America as an example, block pooling\n\
    \   would allow the administrator to assign sub-blocks of 1,000 TNs to\n   multiple\
    \ operators.  That is, NXX+0000 to NXX+0999 can be assigned to\n   operator A,\
    \ NXX+1000 to NXX+1999 can be assigned to operator B, NXX-\n   2000 to 2999 can\
    \ be assigned to operator C, etc.  In this example,\n   block pooling divides\
    \ one block of 10,000 TNs into ten blocks of\n   1,000 TNs.\n   Porting the sub-blocks\
    \ from the block holder enables block pooling.\n   Using the example above, operator\
    \ A is the block holder, as well as\n   the holder of the first sub-block, NXX+0000\
    \ to NXX+0999.  The second\n   sub-block, NXX+1000 to NXX+1999, is ported from\
    \ operator A to\n   operator B.  The third sub-block, NXX+2000 to NXX+2999, is\
    \ ported\n   from operator A to operator C, and so on.  NP administrative\n  \
    \ processes and call processing will enable proper and efficient\n   routing.\n\
    \   From a number administration and NP administration perspective, block\n  \
    \ pooling introduces a new concept, that of the sub-block holder.\n   Block pooling\
    \ requires coordination between the number administrator,\n   the NP administrator,\
    \ the block holder, and the sub-block holder.\n   Block pooling must be implemented\
    \ in a manner that allows for NP\n   within the sub-blocks.  Each TN can have\
    \ a different serving\n   operator, sub-block holder, and block holder.\n"
- title: 8.2 ITN Pooling
  contents:
  - "8.2 ITN Pooling\n   ITN pooling refers to the process whereby the number administrator\n\
    \   assigns individual telephone numbers to operators.  Using the North\n   American\
    \ example, one block of 10,000 TNs can be divided into 10,000\n   ITNs.  ITN is\
    \ more commonly deployed in freephone services.\n   In ITN the block is not assigned\
    \ to an operator but to a central\n   administrator.  The administrator then assigns\
    \ ITNs to operators.  NP\n   administrative processes and call processing will\
    \ enable proper and\n   efficient routing.\n"
- title: 9. Potential Implications
  contents:
  - "9. Potential Implications\n   There are three general areas of impact to IP telephony\
    \ works-in-\n   progress with the IETF:\n   - Interoperation between NP in GSTN\
    \ and IP telephony\n   - NP implementation or emulation in IP telephony\n   -\
    \ Interconnection to NP administrative environment\n   A good understanding of\
    \ how number portability is supported in the\n   GSTN is important when addressing\
    \ the interworking issues between\n   IP-based networks and the GSTN.  This is\
    \ especially important when\n   the IP-based network needs to route the calls\
    \ to the GSTN.  As shown\n   in Section 5, there are a variety of standards with\
    \ various protocol\n   stacks for the switch-to-NPDB interface.  Furthermore,\
    \ the national\n   variations of the protocol standards make it very complicated\
    \ to deal\n   with in a global environment.  If an entity in the IP-based network\n\
    \   needs to query those existing NPDBs for routing number information to\n  \
    \ terminate the calls to the destination GSTN, it would be an\n   impractical,\
    \ if not impossible, job for that entity to support all\n   those interface standards\
    \ to access the NPDBs in many countries.\n   Several alternatives may address\
    \ this particular problem.  One\n   alternative is to use certain entities in\
    \ the IP-based networks for\n   dealing with NP query, similar to the International\
    \ Switches that are\n   used in the GSTN to interwork different national ISUP\
    \ variations.\n   This will force signaling information associated with the calls\
    \ to\n   certain NP-capable networks in the terminating GSTN to be routed to\n\
    \   those IP entities that support the NP functions.  Those IP entities\n   then\
    \ query the NPDBs in the terminating country.  This will limit the\n   number\
    \ of NPDB interfaces that certain IP entities need to support.\n   Another alternative\
    \ can be to define a \"common\" interface to be\n   supported by all the NPDBs\
    \ so that all the IP entities use that\n   standardized protocol to query them.\
    \  The existing NPDBs can support\n   this additional interface, or new NPDBs\
    \ that contain the same\n   information but support the common IP interface can\
    \ be deployed.  The\n   candidates for such a common interface include ENUM (telephone\
    \ number\n   mapping) [ENUM], Lightweight Directory Access Protocol (LDAP) and\
    \ SIP\n   [SIP] (e.g., using the SIP redirection capability).  Certainly\n   another\
    \ possibility is to use an interworking function to convert\n   from one protocol\
    \ to another.\n   IP-based networks can handle the domestic calls between two\
    \ GSTNs.\n   If the originating GSTN has performed NPDB query, SIP will need to\n\
    \   transport and make use of some of the ISUP signaling information even\n  \
    \ if ISUP signaling may be encapsulated in SIP.  Also, IP-based\n   networks may\
    \ perform the NPDB queries, as the N-1 carrier.  In that\n   case, SIP also needs\
    \ to transport the NP related information while\n   the call is being routed to\
    \ the destination GSTN.  There are three\n   pieces of NP related information\
    \ that SIP needs to transport.  They\n   are 1) the called directory number, 2)\
    \ a routing number, and 3) a\n   NPDB dip indicator.  The NPDB dip indicator is\
    \ needed so that the\n   terminating GSTN will not perform another NPDB dip. \
    \ The routing\n   number is needed so that it is used to route the call to the\n\
    \   destination network or switch in the destination GSTN.  The called\n   directory\
    \ number is needed so that the terminating GSTN switch can\n   terminate the call.\
    \  When the routing number is present, the NPDB dip\n   indicator may not be present\
    \ because there are cases where the\n   routing number is added for routing the\
    \ call even if NP is not\n   involved.  One issue is how to transport the NP related\
    \ information\n   via SIP.  The SIP Universal Resource Locator (URL) is one mechanism.\n\
    \   Another better choice may be to add an extension to the \"tel\" URL\n   [TEL]\
    \ that is also supported by SIP.  Please see [TELNP] for the\n   proposed extensions\
    \ to the \"tel\" URL to support NP and freephone\n   service.  Those extensions\
    \ to the \"tel\" URL will be automatically\n   supported by SIP because they can\
    \ be carried as the optional\n   parameters in the user portion of the \"sip\"\
    \ URL.\n   For a called directory number that belongs to a country that supports\n\
    \   NP, and if the IP-based network is expected to perform the NPDB\n   query,\
    \ the logical step is to perform the NPDB dip first to retrieve\n   the routing\
    \ number and use that routing number to select the correct\n   IP telephony gateways\
    \ that can reach the serving switch that serves\n   the called directory number.\
    \  Therefore, if the \"rn\" parameter is\n   present in the \"tel\" URL or sip\
    \ URL in the SIP INVITE message, it,\n   instead of the called directory number,\
    \ should be used for making\n   routing decisions assuming that no other higher\
    \ priority routing-\n   related parameters such as the \"cic\" (Carrier Identification\
    \ Code)\n   are present.  If \"rn\" (Routing Number) is not present, then the\n\
    \   dialed directory number can be used as the routing number for making\n   routing\
    \ decisions.\n   Telephony Routing Information Protocol (TRIP) [TRIP] is a policy\n\
    \   driven inter-administrative domain protocol for advertising the\n   reachability\
    \ of telephony destinations between location servers, and\n   for advertising\
    \ attributes of the routes to those destinations.  With\n   the NP in mind, it\
    \ is very important to know, that if present, it is\n   the routing number, not\
    \ the called directory number, that should be\n   used to check against the TRIP\
    \ tables for making the routing\n   decisions.\n   Overlap signaling exists in\
    \ the GSTN today.  For a call routing from\n   the originating GSTN to the IP-based\
    \ network that involves overlap\n   signaling, NP will impact the call processing\
    \ within the IP-based\n   networks if they must deal with the overlap signaling.\
    \  The entities\n   in the IP-based networks that are to retrieve the NP information\n\
    \   (e.g., the routing number) must collect a complete called directory\n   number\
    \ information before retrieving the NP information for a ported\n   number.  Otherwise,\
    \ the information retrieval won't be successful.\n   This is an issue for the\
    \ IP-based networks if the originating GSTN\n   does not handle the overlap signaling\
    \ by collecting the complete\n   called directory number.\n   The IETF enum working\
    \ group is defining the use of the Domain Name\n   System (DNS) for identifying\
    \ available services and/or Internet\n   resources associated with a particular\
    \ E.164 number.  [ENUMPO]\n   outlines the principles for the operation of a telephone\
    \ number\n   service that resolves telephone numbers into Internet domain name\n\
    \   addresses and service-specific directory discovery.  [ENUMPO]\n   implements\
    \ a three-level approach where the first level is the\n   mapping of the telephone\
    \ number delegation tree to the authority to\n   which the number has been delegated,\
    \ the second level is the\n   provision of the requested DNS resource records\
    \ from a service\n   registrar, and the third level is the provision of service\
    \ specific\n   data from the service provider itself.  NP certainly must be\n\
    \   considered at the first level because the telephony service providers\n  \
    \ do not \"own\" or control the telephone numbers under the NP\n   environment;\
    \ therefore, they may not be the proper entities to have\n   the authority for\
    \ a given E.164 number.  Not only that, there is a\n   regulatory requirement\
    \ on NP in some countries that the donor network\n   should not be relied on to\
    \ reach the delegated authority during the\n   DNS process.  The delegated authority\
    \ for a given E.164 number is\n   likely to be an entity designated by the end\
    \ user that owns/controls\n   a specific telephone number, or one that is designated\
    \ by the service\n   registrar.\n   Since the telephony service providers may\
    \ have the need to use ENUM\n   for their network-related services (e.g., map\
    \ an E.164 number to a\n   HLR Identifier in the wireless networks), their ENUM\
    \ records must be\n   collocated with those of the telephony subscribers.  If\
    \ that is the\n   case, NP will impact ENUM when a telephony subscriber who has\
    \ ENUM\n   service changes the telephony service provider.  This is because that\n\
    \   the ENUM records from the new telephony service provider must replace\n  \
    \ those from the old telephony service provider.  To avoid the NP\n   impact on\
    \ ENUM, it is recommended that the telephony service\n   providers use a different\
    \ domain tree for their network-related\n   service.  For example, if e164.arpa\
    \ is chosen for \"end user\" ENUM, a\n   domain tree different from e164.arpa\
    \ should be used for \"carrier\"\n   ENUM.\n   The IP-based networks also may\
    \ need to support some forms of number\n   portability in the future if E.164\
    \ numbers are assigned to the IP-\n   based end users.  One method is to assign\
    \ a GSTN routing number for\n   each IP-based network domain or entity in a NP-capable\
    \ country.  This\n   may increase the number of digits in the routing number to\n\
    \   incorporate the IP entities and impact the existing routing in the\n   GSTN.\
    \  Another method is to associate each IP entity with a\n   particular GSTN gateway.\
    \  At that particular GSTN gateway, the called\n   directory number is then used\
    \ to locate the IP-entity that serves\n   that dialed directory number.  Yet,\
    \ another method can be to assign a\n   special routing number so that the call\
    \ to an end user currently\n   served by an IP entity is routed to the nearest\
    \ GSTN gateway.  The\n   called directory number then is used to locate the IP-entity\
    \ that\n   serves that dialed directory number.  A mechanism can be developed\
    \ or\n   used for the IP-based network to locate the IP entity that serves a\n\
    \   particular dialed directory number.  Many other types of networks use\n  \
    \ E.164 numbers to identify the end users or terminals in those\n   networks.\
    \  Number portability among GSTN, IP-based network, and those\n   various types\
    \ of networks may also need to be supported in the\n   future.\n"
- title: 10. Security Considerations
  contents:
  - "10. Security Considerations\n   In the PSTN, the NPDB queries are generated by\
    \ the PSTN switches and\n   carried over the SS7 networks to reach the NPDBs and\
    \ back to the\n   switches.  The SS7 networks are operated by telecommunications\n\
    \   operators and signaling transport service providers in such a closed\n   environment\
    \ that make them difficult for the hackers to penetrate.\n   However, when VoIP\
    \ operators need the NP information and have to\n   launch the NP queries from\
    \ their softswitches, media gateway\n   controllers or call managers, there would\
    \ be security concerns if the\n   NP queries and responses are transported over\
    \ the Internet.  If the\n   routing number or routing prefix in the response is\
    \ altered during\n   the message transport, the call will be routed to the wrong\
    \ place.\n   It is recommended that the NPDB queries be transported via a secure\n\
    \   transport layer or with added security mechanisms to ensure the data\n   integrity.\n"
- title: 11. IANA Considerations
  contents:
  - "11. IANA Considerations\n   This document introduces no new values for IANA registration.\n"
- title: 12. Normative References
  contents:
  - "12. Normative References\n   [ANSI OSS] ANSI Technical Requirements No. 1, \"\
    Number Portability -\n              Operator Services Switching Systems,\" April\
    \ 1999.\n   [ANSI SS]  ANSI Technical Requirements No. 2, \"Number Portability\
    \ -\n              Switching Systems,\" April 1999.\n   [ANSI DB]  ANSI Technical\
    \ Requirements No. 3, \"Number Portability\n              Database and Global\
    \ Title Translation,\" April 1999.\n   [CS1]      ITU-T Q-series  Recommendations\
    \ - Supplement 4, \"Number\n              portability Capability set 1 requirements\
    \ for service\n              provider portability (All call query and onward routing),\"\
    \n              May 1998.\n   [CS2]      ITU-T Q-series  Recommendations - Supplement\
    \ 5, \"Number\n              portability -Capability set 2 requirements for service\n\
    \              provider portability (Query on release and Dropback),\"\n     \
    \         March 1999.\n   [E164]     ITU-T Recommendation E.164, \"The International\
    \ Public\n              Telecommunications Numbering Plan,\" 1997.\n   [ENUM]\
    \     Falstrom, P., \"E.164 number and DNS\", RFC 2916, September\n          \
    \    2000.\n   [ETSIISUP] ETSI EN 302 097 V.1.2.2, Integrated Services Digital\n\
    \              Network (ISDN); Signalling System No.7 (SS7); ISDN User\n     \
    \         Part (ISUP); Enhancement for support of Number Portability\n       \
    \       (NP) [ITU-T Recommendation Q.769.1 (2000), modified]\n   [GSM]      GSM\
    \ 09.02: \"Digital cellular telecommunications system\n              (Phase 2+);\
    \ Mobile Application Part (MAP) specification\".\n   [IS41]     TIA/EIA IS-756\
    \ Rev. A, \"TIA/EIA-41-D Enhancements for\n              Wireless Number Portability\
    \ Phase II (December 1998),\n              \"Number Portability Network Support,\"\
    \ April 1998.\n   [ITUISUP]  ITU-T Recommendation Q.769.1, \"Signaling System\
    \ No. 7 -\n              ISDN User Part Enhancements for the Support of Number\n\
    \              Portability,\" December 1999.\n   [MNP]      ETSI EN 301 716 (2000-10)\
    \ European Standard\n              (Telecommunications series) Digital cellular\n\
    \              telecommunications system (Phase 2+); Support of Mobile\n     \
    \         Number Portability (MNP); Technical Realisation; Stage 2;\n        \
    \      (GSM 03.66 Version 7.2.0 Release 1998).\n   [RFC]      Bradner, S., \"\
    The Internet Standards Process -- Revision\n              3\", BCP 9, RFC 2026,\
    \ October 1996.\n"
- title: 13. Informative References
  contents:
  - "13. Informative References\n   [ENUMPO]   Brown A. and G. Vaudreuil, \"ENUM Service\
    \ Specific\n              Provisioning: Principles of Operations\", Work in Progress.\n\
    \   [SIP]      Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,\n    \
    \          A., Peterson, J., Sparks, R., Handley, M. and E. Schooler,\n      \
    \        \"SIP:  Session Initiation Protocol\", RFC 3461, June 2002.\n   [TEL]\
    \      Schulzrinne, H. and A. Vaha-Sipila, \"URIs for Telephone\n            \
    \  Calls\", Work in Progress.\n   [TELNP]    Yu, J., \"Extensions to the \"tel\"\
    \ URL to support Number\n              Portability and Freephone Service\", Work\
    \ in Progress.\n   [TRIP]     Rosenberg, J., Salama, H. and M. Squire, \"Telephony\n\
    \              Routing Information Protocol (TRIP)\", RFC 3219, January\n    \
    \          2002.\n"
- title: 14. Acknowledgment
  contents:
  - "14. Acknowledgment\n   The authors would like to thank Monika Muench for providing\n\
    \   information on ISUP and MNP.\n"
- title: 15. Authors' Addresses
  contents:
  - "15. Authors' Addresses\n   Mark D. Foster\n   NeuStar, Inc.\n   46000 Center\
    \ Oak Plaza\n   Sterling, VA 20166\n   United States\n   Phone: +1-571-434-5410\n\
    \   Fax:   +1-571-434-5401\n   EMail: mark.foster@neustar.biz\n   Tom McGarry\n\
    \   NeuStar, Inc.\n   46000 Center Oak Plaza\n   Sterling, VA 20166\n   United\
    \ States\n   Phone: +1-571-434-5570\n   Fax:   +1-571-434-5401\n   EMail: tom.mcgarry@neustar.biz\n\
    \   James Yu\n   NeuStar, Inc.\n   46000 Center Oak Plaza\n   Sterling, VA 20166\n\
    \   United States\n   Phone: +1-571-434-5572\n   Fax:   +1-571-434-5401\n   EMail:\
    \ james.yu@neustar.biz\n"
- title: 16. Full Copyright Statement
  contents:
  - "16. Full Copyright Statement\n   Copyright (C) The Internet Society (2003). \
    \ All Rights Reserved.\n   This document and translations of it may be copied\
    \ and furnished to\n   others, and derivative works that comment on or otherwise\
    \ explain it\n   or assist in its implementation may be prepared, copied, published\n\
    \   and distributed, in whole or in part, without restriction of any\n   kind,\
    \ provided that the above copyright notice and this paragraph are\n   included\
    \ on all such copies and derivative works.  However, this\n   document itself\
    \ may not be modified in any way, such as by removing\n   the copyright notice\
    \ or references to the Internet Society or other\n   Internet organizations, except\
    \ as needed for the purpose of\n   developing Internet standards in which case\
    \ the procedures for\n   copyrights defined in the Internet Standards process\
    \ must be\n   followed, or as required to translate it into languages other than\n\
    \   English.\n   The limited permissions granted above are perpetual and will\
    \ not be\n   revoked by the Internet Society or its successors or assigns.\n \
    \  This document and the information contained herein is provided on an\n   \"\
    AS IS\" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING\n   TASK FORCE\
    \ DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING\n   BUT NOT LIMITED\
    \ TO ANY WARRANTY THAT THE USE OF THE INFORMATION\n   HEREIN WILL NOT INFRINGE\
    \ ANY RIGHTS OR ANY IMPLIED WARRANTIES OF\n   MERCHANTABILITY OR FITNESS FOR A\
    \ PARTICULAR PURPOSE.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
