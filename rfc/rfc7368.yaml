- title: __initial_text__
  contents:
  - '              IPv6 Home Networking Architecture Principles

    '
- title: Abstract
  contents:
  - "Abstract\n   This text describes evolving networking technology within residential\n\
    \   home networks with increasing numbers of devices and a trend towards\n   increased\
    \ internal routing.  The goal of this document is to define a\n   general architecture\
    \ for IPv6-based home networking, describing the\n   associated principles, considerations,\
    \ and requirements.  The text\n   briefly highlights specific implications of\
    \ the introduction of IPv6\n   for home networking, discusses the elements of\
    \ the architecture, and\n   suggests how standard IPv6 mechanisms and addressing\
    \ can be employed\n   in home networking.  The architecture describes the need\
    \ for specific\n   protocol extensions for certain additional functionality. \
    \ It is\n   assumed that the IPv6 home network is not actively managed and runs\n\
    \   as an IPv6-only or dual-stack network.  There are no recommendations\n   in\
    \ this text for the IPv4 part of the network.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc7368.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .\
    \ . . . . .   4\n     1.1.  Terminology and Abbreviations . . . . . . . . . .\
    \ . . . .   5\n   2.  Effects of IPv6 on Home Networking  . . . . . . . . . .\
    \ . . .   6\n     2.1.  Multiple Subnets and Routers  . . . . . . . . . . . .\
    \ . .   7\n     2.2.  Global Addressability and Elimination of NAT  . . . . .\
    \ .   8\n     2.3.  Multi-Addressing of Devices . . . . . . . . . . . . . . .\
    \   8\n     2.4.  Unique Local Addresses (ULAs) . . . . . . . . . . . . . .  \
    \ 9\n     2.5.  Avoiding Manual Configuration of IP Addresses . . . . . .  10\n\
    \     2.6.  IPv6-Only Operation . . . . . . . . . . . . . . . . . . .  11\n  \
    \ 3.  Homenet Architecture Principles . . . . . . . . . . . . . . .  11\n    \
    \ 3.1.  General Principles  . . . . . . . . . . . . . . . . . . .  12\n      \
    \ 3.1.1.  Reuse Existing Protocols  . . . . . . . . . . . . . .  12\n       3.1.2.\
    \  Minimise Changes to Hosts and Routers . . . . . . . .  13\n     3.2.  Homenet\
    \ Topology  . . . . . . . . . . . . . . . . . . . .  13\n       3.2.1.  Supporting\
    \ Arbitrary Topologies . . . . . . . . . . .  13\n       3.2.2.  Network Topology\
    \ Models . . . . . . . . . . . . . . .  14\n       3.2.3.  Dual-Stack Topologies\
    \ . . . . . . . . . . . . . . . .  18\n       3.2.4.  Multihoming . . . . . .\
    \ . . . . . . . . . . . . . . .  19\n       3.2.5.  Mobility Support  . . . .\
    \ . . . . . . . . . . . . . .  20\n     3.3.  A Self-Organising Network . . .\
    \ . . . . . . . . . . . . .  21\n       3.3.1.  Differentiating Neighbouring Homenets\
    \ . . . . . . . .  21\n       3.3.2.  Largest Practical Subnets . . . . . . .\
    \ . . . . . . .  21\n       3.3.3.  Handling Varying Link Technologies  . . .\
    \ . . . . . .  22\n       3.3.4.  Homenet Realms and Borders  . . . . . . . .\
    \ . . . . .  22\n       3.3.5.  Configuration Information from the ISP  . . .\
    \ . . . .  23\n     3.4.  Homenet Addressing  . . . . . . . . . . . . . . . .\
    \ . . .  24\n       3.4.1.  Use of ISP-Delegated IPv6 Prefixes  . . . . . . .\
    \ . .  24\n       3.4.2.  Stable Internal IP Addresses  . . . . . . . . . . .\
    \ .  26\n       3.4.3.  Internal Prefix Delegation  . . . . . . . . . . . . .\
    \  27\n       3.4.4.  Coordination of Configuration Information . . . . . .  28\n\
    \       3.4.5.  Privacy . . . . . . . . . . . . . . . . . . . . . . .  28\n  \
    \   3.5.  Routing Functionality . . . . . . . . . . . . . . . . . .  28\n    \
    \   3.5.1.  Unicast Routing within the Homenet  . . . . . . . . .  30\n      \
    \ 3.5.2.  Unicast Routing at the Homenet Border . . . . . . . .  31\n       3.5.3.\
    \  Multicast Support . . . . . . . . . . . . . . . . . .  31\n     3.6.  Security\
    \  . . . . . . . . . . . . . . . . . . . . . . . .  32\n       3.6.1.  Addressability\
    \ vs. Reachability . . . . . . . . . . .  32\n       3.6.2.  Filtering at Borders\
    \  . . . . . . . . . . . . . . . .  33\n       3.6.3.  Partial Effectiveness of\
    \ NAT and Firewalls  . . . . .  34\n       3.6.4.  Exfiltration Concerns . . .\
    \ . . . . . . . . . . . . .  34\n       3.6.5.  Device Capabilities . . . . .\
    \ . . . . . . . . . . . .  34\n       3.6.6.  ULAs as a Hint of Connection Origin\
    \ . . . . . . . . .  35\n     3.7.  Naming and Service Discovery  . . . . . .\
    \ . . . . . . . .  35\n       3.7.1.  Discovering Services  . . . . . . . . .\
    \ . . . . . . .  35\n       3.7.2.  Assigning Names to Devices  . . . . . . .\
    \ . . . . . .  36\n       3.7.3.  The Homenet Name Service  . . . . . . . . .\
    \ . . . . .  37\n       3.7.4.  Name Spaces . . . . . . . . . . . . . . . . .\
    \ . . . .  38\n       3.7.5.  Independent Operation . . . . . . . . . . . . .\
    \ . . .  40\n       3.7.6.  Considerations for LLNs . . . . . . . . . . . . .\
    \ . .  40\n       3.7.7.  DNS Resolver Discovery  . . . . . . . . . . . . . .\
    \ .  41\n       3.7.8.  Devices Roaming to/from the Homenet . . . . . . . . .\
    \  41\n     3.8.  Other Considerations  . . . . . . . . . . . . . . . . . .  41\n\
    \       3.8.1.  Quality of Service  . . . . . . . . . . . . . . . . .  41\n  \
    \     3.8.2.  Operations and Management . . . . . . . . . . . . . .  42\n    \
    \ 3.9.  Implementing the Architecture on IPv6 . . . . . . . . . .  43\n   4. \
    \ Conclusions . . . . . . . . . . . . . . . . . . . . . . . . .  44\n   5.  Security\
    \ Considerations . . . . . . . . . . . . . . . . . . .  44\n   6.  References\
    \  . . . . . . . . . . . . . . . . . . . . . . . . .  44\n     6.1.  Normative\
    \ References  . . . . . . . . . . . . . . . . . .  44\n     6.2.  Informative\
    \ References  . . . . . . . . . . . . . . . . .  44\n   Acknowledgments . . .\
    \ . . . . . . . . . . . . . . . . . . . . . .  48\n   Authors' Addresses  . .\
    \ . . . . . . . . . . . . . . . . . . . . .  49\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This document focuses on evolving networking technology\
    \ within\n   residential home networks with increasing numbers of devices and\
    \ a\n   trend towards increased internal routing, as well as the associated\n\
    \   challenges with their deployment and operation.  There is a growing\n   trend\
    \ in home networking for the proliferation of networking\n   technology through\
    \ an increasingly broad range of devices and media.\n   This evolution in scale\
    \ and diversity sets requirements on IETF\n   protocols.  Some of these requirements\
    \ relate to the introduction of\n   IPv6, while others relate to the introduction\
    \ of specialised networks\n   for home automation and sensors.\n   While at the\
    \ time of writing some complex home network topologies\n   exist, most are relatively\
    \ simple single subnet networks and\n   ostensibly operate using just IPv4.  While\
    \ there may be IPv6 traffic\n   within the network, e.g., for service discovery,\
    \ the homenet is\n   provisioned by the ISP as an IPv4 network.  Such networks\
    \ also\n   typically employ solutions that should be avoided, such as private\n\
    \   [RFC1918] addressing with (cascaded) Network Address Translation\n   (NAT)\
    \ [RFC3022], or they may require expert assistance to set up.\n   In contrast,\
    \ emerging IPv6-capable home networks are very likely to\n   have multiple internal\
    \ subnets, e.g., to facilitate private and guest\n   networks, heterogeneous link\
    \ layers, and smart grid components, and\n   have enough address space available\
    \ to allow every device to have a\n   globally unique address.  This implies that\
    \ internal routing\n   functionality is required, and that the homenet's ISP delegates\
    \ a\n   large enough address block, to allow assignment of a prefix to each\n\
    \   subnet in the home network.\n   It is not practical to expect home users to\
    \ configure their networks.\n   Thus, the assumption of this document is that\
    \ the homenet is as far\n   as possible self-organising and self-configuring,\
    \ i.e., it should\n   function without proactive management by the residential\
    \ user.\n   The architectural constructs in this document are focused on the\n\
    \   problems to be solved when introducing IPv6, with an eye towards a\n   better\
    \ result than what we have today with IPv4, as well as aiming\n   for a more consistent\
    \ solution that addresses as many of the\n   identified requirements as possible.\
    \  This document aims to provide\n   the basis and guiding principles for how\
    \ standard IPv6 mechanisms and\n   addressing [RFC2460] [RFC4291] can be employed\
    \ in home networking,\n   while coexisting with existing IPv4 mechanisms.  In\
    \ emerging dual-\n   stack home networks, it is vital that introducing IPv6 does\
    \ not\n   adversely affect IPv4 operation.  We assume that the IPv4 network\n\
    \   architecture in home networks is what it is and cannot be modified by\n  \
    \ new recommendations.  This document does not discuss how IPv4 home\n   networks\
    \ provision or deliver support for multiple subnets.  It\n   should not be assumed\
    \ that any future new functionality created with\n   IPv6 in mind will be backward\
    \ compatible to include IPv4 support.\n   Further, future deployments, or specific\
    \ subnets within an otherwise\n   dual-stack home network, may be IPv6-only, in\
    \ which case\n   considerations for IPv4 impact would not apply.\n   This document\
    \ proposes a baseline homenet architecture, using\n   protocols and implementations\
    \ that are as far as possible proven and\n   robust.  The scope of the document\
    \ is primarily the network-layer\n   technologies that provide the basic functionality\
    \ to enable\n   addressing, connectivity, routing, naming, and service discovery.\n\
    \   While it may, for example, state that homenet components must be\n   simple\
    \ to deploy and use, it does not discuss specific user\n   interfaces, nor does\
    \ it discuss specific physical, wireless, or data-\n   link-layer considerations.\
    \  Likewise, we also do not specify the\n   whole design of a homenet router from\
    \ top to bottom; rather, we focus\n   on the Layer 3 aspects.  This means that\
    \ Layer 2 is largely out of\n   scope, we're assuming a data-link layer that supports\
    \ IPv6 is\n   present, and we react accordingly.  Any IPv6-over-Foo definitions\n\
    \   occur elsewhere.\n   [RFC7084], which has obsoleted [RFC6204], defines basic\
    \ requirements\n   for Customer Edge (CE) routers.  The update includes the definition\n\
    \   of requirements for specific transition tools on the CE router,\n   specifically\
    \ Dual-Stack Lite (DS-Lite) [RFC6333] and IPv6 Rapid\n   Deployment on IPv4 Infrastructures\
    \ (6rd) [RFC5969].  Such detailed\n   specification of CE router devices is considered\
    \ out of scope of this\n   architecture document, and we assume that any required\
    \ update of the\n   CE router device specification as a result of adopting this\n\
    \   architecture will be handled as separate and specific updates to\n   these\
    \ existing documents.  Further, the scope of this text is the\n   internal homenet,\
    \ and thus specific features on the WAN side of the\n   CE router are out of scope\
    \ for this text.\n"
- title: 1.1.  Terminology and Abbreviations
  contents:
  - "1.1.  Terminology and Abbreviations\n   In this section, we define terminology\
    \ and abbreviations used\n   throughout the text.\n   o  Border: A point, typically\
    \ resident on a router, between two\n      networks, e.g., between the main internal\
    \ homenet and a guest\n      network.  This defines a point(s) at which filtering\
    \ and\n      forwarding policies for different types of traffic may be applied.\n\
    \   o  CE router: Customer Edge router.  A border router intended for use\n  \
    \    in a homenet.  A CE router connects the homenet to a service\n      provider\
    \ network.\n   o  FQDN: Fully Qualified Domain Name.  A globally unique name.\n\
    \   o  Guest network: A part of the home network intended for use by\n      visitors\
    \ or guests to the home(net).  Devices on the guest network\n      may typically\
    \ not see or be able to use all services in the\n      home(net).\n   o  Homenet:\
    \ A home network, comprising host and router equipment,\n      with one or more\
    \ CE routers providing connectivity to a service\n      provider network(s).\n\
    \   o  ISP: Internet Service Provider.  An entity that provides access to\n  \
    \    the Internet.  In this document, a service provider specifically\n      offers\
    \ Internet access using IPv6 and may also offer IPv4 Internet\n      access. \
    \ The service provider can provide such access over a\n      variety of different\
    \ transport methods such as DSL, cable,\n      wireless, and others.\n   o  LLN:\
    \ Low-power and Lossy Network.\n   o  LQDN: Locally Qualified Domain Name.  A\
    \ name local to the homenet.\n   o  NAT: Network Address Translation.  Typically\
    \ referring to IPv4\n      Network Address Port Translation (NAPT) [RFC3022].\n\
    \   o  NPTv6: IPv6-to-IPv6 Network Prefix Translation [RFC6296].\n   o  PCP: Port\
    \ Control Protocol [RFC6887].\n   o  Realm: A network delimited by a defined border.\
    \  A guest network\n      within a homenet may form one realm.\n   o  'Simple\
    \ Security': Defined in [RFC4864] and expanded further in\n      [RFC6092]; describes\
    \ recommended perimeter security capabilities\n      for IPv6 networks.\n   o\
    \  ULA: IPv6 Unique Local Address [RFC4193].\n   o  VM: Virtual Machine.\n"
- title: 2.  Effects of IPv6 on Home Networking
  contents:
  - "2.  Effects of IPv6 on Home Networking\n   While IPv6 resembles IPv4 in many\
    \ ways, there are some notable\n   differences in the way it may typically be\
    \ deployed.  It changes\n   address allocation principles, making multi-addressing\
    \ the norm, and\n   through the vastly increased address space, it allows globally\
    \ unique\n   IP addresses to be used for all devices in a home network.  This\n\
    \   section presents an overview of some of the key implications of the\n   introduction\
    \ of IPv6 for home networking that are simultaneously both\n   promising and problematic.\n"
- title: 2.1.  Multiple Subnets and Routers
  contents:
  - "2.1.  Multiple Subnets and Routers\n   While simple Layer 3 topologies involving\
    \ as few subnets as possible\n   are preferred in home networks, the incorporation\
    \ of dedicated\n   (routed) subnets remains necessary for a variety of reasons.\
    \  For\n   instance, an increasingly common feature in modern home routers is\n\
    \   the ability to support both guest and private network subnets.\n   Likewise,\
    \ there may be a need to separate home automation or\n   corporate extension LANs\
    \ (whereby a home worker can have their\n   corporate network extended into the\
    \ home using a virtual private\n   network, commonly presented as one port on\
    \ an Ethernet device) from\n   the main Internet access network, or different\
    \ subnets may in general\n   be associated with parts of the homenet that have\
    \ different routing\n   and security policies.  Further, link-layer networking\
    \ technology is\n   poised to become more heterogeneous as networks begin to employ\
    \ both\n   traditional Ethernet technology and link layers designed for Low-\n\
    \   power and Lossy Networks (LLNs), such as those used for certain types\n  \
    \ of sensor devices.  Constraining the flow of certain traffic from\n   Ethernet\
    \ links to links of much lower capacity thus becomes an\n   important topic.\n\
    \   The introduction of IPv6 for home networking makes it possible for\n   every\
    \ home network to be delegated enough address space from its ISP\n   to provision\
    \ globally unique prefixes for each such subnet in the\n   home.  While the number\
    \ of addresses in a standard /64 IPv6 prefix is\n   practically unlimited, the\
    \ number of prefixes available for\n   assignment to the home network is not.\
    \  As a result, the growth\n   inhibitor for the home network shifts from the\
    \ number of addresses to\n   the number of prefixes offered by the provider; this\
    \ topic is\n   discussed in BCP 157 [RFC6177], which recommends that \"end sites\n\
    \   always be able to obtain a reasonable amount of address space for\n   their\
    \ actual and planned usage.\"\n   The addition of routing between subnets raises\
    \ a number of issues.\n   One is a method by which prefixes can be efficiently\
    \ allocated to\n   each subnet, without user intervention.  Another issue is how\
    \ to\n   extend mechanisms such as zero-configuration service discovery that\n\
    \   currently only operate within a single subnet using link-local\n   traffic.\
    \  In a typical IPv4 home network, there is only one subnet,\n   so such mechanisms\
    \ would normally operate as expected.  For multi-\n   subnet IPv6 home networks,\
    \ there are two broad choices to enable such\n   protocols to work across the\
    \ scope of the entire homenet: extend\n   existing protocols to work across that\
    \ scope or introduce proxies for\n   existing link-layer protocols.  This topic\
    \ is discussed in\n   Section 3.7.\n"
- title: 2.2.  Global Addressability and Elimination of NAT
  contents:
  - "2.2.  Global Addressability and Elimination of NAT\n   The possibility for direct\
    \ end-to-end communication on the Internet\n   to be restored by the introduction\
    \ of IPv6 is, on the one hand, an\n   incredible opportunity for innovation and\
    \ simpler network operation,\n   but on the other hand, it is also a concern as\
    \ it potentially exposes\n   nodes in the internal networks to receipt of unwanted\
    \ and possibly\n   malicious traffic from the Internet.\n   With devices and applications\
    \ able to talk directly to each other\n   when they have globally unique addresses,\
    \ there may be an expectation\n   of improved host security to compensate for\
    \ this.  It should be noted\n   that many devices may (for example) ship with\
    \ default settings that\n   make them readily vulnerable to compromise by external\
    \ attackers if\n   globally accessible, or they may simply not be robust by design\n\
    \   because it was assumed that either such devices would only be used on\n  \
    \ private networks or the devices don't have the computing power to\n   apply\
    \ the necessary security methods.  In addition, the upgrade cycle\n   for devices\
    \ (or their firmware) may be slow and/or lack auto-update\n   mechanisms.\n  \
    \ It is thus important to distinguish between addressability and\n   reachability.\
    \  While IPv6 offers global addressability through the\n   use of globally unique\
    \ addresses in the home, whether devices are\n   globally reachable or not would\
    \ depend on any firewall or filtering\n   configuration, and not, as is commonly\
    \ the case with IPv4, the\n   presence or use of NAT.  In this respect, IPv6 networks\
    \ may or may\n   not have filters applied at their borders to control such traffic,\n\
    \   i.e., at the homenet CE router.  [RFC4864] and [RFC6092] discuss such\n  \
    \ filtering and the merits of 'default allow' against 'default deny'\n   policies\
    \ for external traffic initiated into a homenet.  This topic\n   is discussed\
    \ further in Section 3.6.1.\n"
- title: 2.3.  Multi-Addressing of Devices
  contents:
  - "2.3.  Multi-Addressing of Devices\n   In an IPv6 network, devices will often\
    \ acquire multiple addresses,\n   typically at least a link-local address and\
    \ one or more globally\n   unique addresses (GUAs).  Where a homenet is multihomed,\
    \ a device\n   would typically receive a GUA from within the delegated prefix\
    \ from\n   each upstream ISP.  Devices may also have an IPv4 address if the\n\
    \   network is dual stack, an IPv6 Unique Local Address (ULA) [RFC4193]\n   (see\
    \ below), and one or more IPv6 privacy addresses [RFC4941].\n   It should thus\
    \ be considered the norm for devices on IPv6 home\n   networks to be multi-addressed\
    \ and to need to make appropriate\n   address selection decisions for the candidate\
    \ source and destination\n   address pairs for any given connection.  In multihoming\
    \ scenarios,\n   nodes will be configured with one address from each upstream\
    \ ISP\n   prefix.  In such cases, the presence of upstream ingress filtering as\n\
    \   described in BCP 38 [RFC2827] requires such multi-addressed nodes to\n   select\
    \ the correct source address to be used for the corresponding\n   uplink.  Default\
    \ address selection for IPv6 [RFC6724] provides a\n   solution for this, but a\
    \ challenge here is that the node may not have\n   the information it needs to\
    \ make that decision based on addresses\n   alone.  We discuss this challenge\
    \ in Section 3.2.4.\n"
- title: 2.4.  Unique Local Addresses (ULAs)
  contents:
  - "2.4.  Unique Local Addresses (ULAs)\n   [RFC4193] defines ULAs for IPv6 that\
    \ may be used to address devices\n   within the scope of a single site.  Support\
    \ for ULAs for IPv6 CE\n   routers is described in [RFC7084].  A home network\
    \ running IPv6\n   should deploy ULAs alongside its globally unique prefix(es)\
    \ to allow\n   stable communication between devices (on different subnets) within\n\
    \   the homenet where that externally allocated globally unique prefix\n   may\
    \ change over time, e.g., due to renumbering within the\n   subscriber's ISP,\
    \ or where external connectivity may be temporarily\n   unavailable.  A homenet\
    \ using provider-assigned global addresses is\n   exposed to its ISP renumbering\
    \ the network to a much larger degree\n   than before whereas, for IPv4, NAT isolated\
    \ the user against ISP\n   renumbering to some extent.\n   While setting up a\
    \ network, there may be a period where it has no\n   external connectivity, in\
    \ which case ULAs would be required for\n   inter-subnet communication.  In the\
    \ case where home automation\n   networks are being set up in a new home/deployment\
    \ (as early as\n   during construction of the home), such networks will likely\
    \ need to\n   use their own /48 ULA prefix.  Depending upon circumstances beyond\n\
    \   the control of the owner of the homenet, it may be impossible to\n   renumber\
    \ the ULA used by the home automation network so routing\n   between ULA /48s\
    \ may be required.  Also, some devices, particularly\n   constrained devices,\
    \ may have only a ULA (in addition to a link-\n   local), while others may have\
    \ both a GUA and a ULA.\n   Note that unlike private IPv4 space as described in\
    \ RFC 1918, the use\n   of ULAs does not imply use of an IPv6 equivalent of a\
    \ traditional\n   IPv4 NAT [RFC3022] or of NPTv6 prefix-based NAT [RFC6296]. \
    \ When an\n   IPv6 node in a homenet has both a ULA and a globally unique IPv6\n\
    \   address, it should only use its ULA address internally and use its\n   additional\
    \ globally unique IPv6 address as a source address for\n   external communications.\
    \  This should be the natural behaviour given\n   support for default address\
    \ selection for IPv6 [RFC6724].  By using\n   such globally unique addresses between\
    \ hosts and devices in remote\n   networks, the architectural cost and complexity,\
    \ particularly to\n   applications, of NAT or NPTv6 translation are avoided. \
    \ As such,\n   neither IPv6 NAT nor NPTv6 is recommended for use in the homenet\n\
    \   architecture.  Further, the homenet border router(s) should filter\n   packets\
    \ with ULA source/destination addresses as discussed in\n   Section 3.4.2.\n \
    \  Devices in a homenet may be given only a ULA as a means to restrict\n   reachability\
    \ from outside the homenet.  ULAs can be used by default\n   for devices that,\
    \ without additional configuration (e.g., via a web\n   interface), would only\
    \ offer services to the internal network.  For\n   example, a printer might only\
    \ accept incoming connections on a ULA\n   until configured to be globally reachable,\
    \ at which point it acquires\n   a global IPv6 address and may be advertised via\
    \ a global name space.\n   Where both a ULA and a global prefix are in use, the\
    \ ULA source\n   address is used to communicate with ULA destination addresses\
    \ when\n   appropriate, i.e., when the ULA source and destination lie within the\n\
    \   /48 ULA prefix(es) known to be used within the same homenet.  In\n   cases\
    \ where multiple /48 ULA prefixes are in use within a single\n   homenet (perhaps\
    \ because multiple homenet routers each independently\n   auto-generate a /48\
    \ ULA prefix and then share prefix/routing\n   information), utilising a ULA source\
    \ address and a ULA destination\n   address from two disjoint internal ULA prefixes\
    \ is preferable to\n   using GUAs.\n   While a homenet should operate correctly\
    \ with two or more /48 ULAs\n   enabled, a mechanism for the creation and use\
    \ of a single /48 ULA\n   prefix is desirable for addressing consistency and policy\n\
    \   enforcement.\n   A counter argument to using ULAs is that it is undesirable\
    \ to\n   aggressively deprecate global prefixes for temporary loss of\n   connectivity,\
    \ so for a host to lose its global address, there would\n   have to be a connection\
    \ breakage longer than the lease period, and\n   even then, deprecating prefixes\
    \ when there is no connectivity may not\n   be advisable.  However, it is assumed\
    \ in this architecture that\n   homenets should support and use ULAs.\n"
- title: 2.5.  Avoiding Manual Configuration of IP Addresses
  contents:
  - "2.5.  Avoiding Manual Configuration of IP Addresses\n   Some IPv4 home networking\
    \ devices expose IPv4 addresses to users,\n   e.g., the IPv4 address of a home\
    \ IPv4 CE router that may be\n   configured via a web interface.  In potentially\
    \ complex future IPv6\n   homenets, users should not be expected to enter IPv6\
    \ literal\n   addresses in devices or applications, given their much greater length\n\
    \   and the apparent randomness of such addresses to a typical home user.\n  \
    \ Thus, even for the simplest of functions, simple naming and the\n   associated\
    \ (minimal, and ideally zero configuration) discovery of\n   services are imperative\
    \ for the easy deployment and use of homenet\n   devices and applications.\n"
- title: 2.6.  IPv6-Only Operation
  contents:
  - "2.6.  IPv6-Only Operation\n   It is likely that IPv6-only networking will be\
    \ deployed first in new\n   home network deployments, often referred to as 'greenfield'\n\
    \   scenarios, where there is no existing IPv4 capability, or perhaps as\n   one\
    \ element of an otherwise dual-stack network.  Running IPv6-only\n   adds additional\
    \ requirements, e.g., for devices to get configuration\n   information via IPv6\
    \ transport (not relying on an IPv4 protocol such\n   as IPv4 DHCP) and for devices\
    \ to be able to initiate communications\n   to external devices that are IPv4-only.\n\
    \   Some specific transition technologies that may be deployed by the\n   homenet's\
    \ ISP are discussed in [RFC7084].  In addition, certain other\n   functions may\
    \ be desirable on the CE router, e.g., to access content\n   in the IPv4 Internet,\
    \ NAT64 [RFC6144] and DNS64 [RFC6145] may be\n   applicable.\n   The widespread\
    \ availability of robust solutions to these types of\n   requirements will help\
    \ accelerate the uptake of IPv6-only homenets.\n   The specifics of these are,\
    \ however, beyond the scope of this\n   document, especially those functions that\
    \ reside on the CE router.\n"
- title: 3.  Homenet Architecture Principles
  contents:
  - "3.  Homenet Architecture Principles\n   The aim of this text is to outline how\
    \ to construct advanced IPv6-\n   based home networks involving multiple routers\
    \ and subnets using\n   standard IPv6 addressing and protocols [RFC2460] [RFC4291]\
    \ as the\n   basis.  As described in Section 3.1, solutions should as far as\n\
    \   possible reuse existing protocols and minimise changes to hosts and\n   routers,\
    \ but some new protocols or extensions are likely to be\n   required.  In this\
    \ section, we present the elements of the proposed\n   home networking architecture\
    \ with discussion of the associated design\n   principles.\n   In general, home\
    \ network equipment needs to be able to operate in\n   networks with a range of\
    \ different properties and topologies, where\n   home users may plug components\
    \ together in arbitrary ways and expect\n   the resulting network to operate.\
    \  Significant manual configuration\n   is rarely, if at all, possible or even\
    \ desirable given the knowledge\n   level of typical home users.  Thus, the network\
    \ should, as far as\n   possible, be self-configuring, though configuration by\
    \ advanced users\n   should not be precluded.\n   The homenet needs to be able\
    \ to handle or provision at least the\n   following:\n   o  Routing\n   o  Prefix\
    \ configuration for routers\n   o  Name resolution\n   o  Service discovery\n\
    \   o  Network security\n   The remainder of this document describes the principles\
    \ by which the\n   homenet architecture may deliver these properties.\n"
- title: 3.1.  General Principles
  contents:
  - "3.1.  General Principles\n   There is little that the Internet standards community\
    \ can do about\n   the physical topologies or the need for some networks to be\
    \ separated\n   at the network layer for policy or link-layer compatibility reasons.\n\
    \   However, there is a lot of flexibility in using IP addressing and\n   internetworking\
    \ mechanisms.  This text discusses how such flexibility\n   should be used to\
    \ provide the best user experience and ensure that\n   the network can evolve\
    \ with new applications in the future.  The\n   principles described in this text\
    \ should be followed when designing\n   homenet protocol solutions.\n"
- title: 3.1.1.  Reuse Existing Protocols
  contents:
  - "3.1.1.  Reuse Existing Protocols\n   Existing protocols will be used to meet\
    \ the requirements of home\n   networks.  Where necessary, extensions will be\
    \ made to those\n   protocols.  When no existing protocol is found to be suitable,\
    \ a new\n   or emerging protocol may be used.  Therefore, it is important that\
    \ no\n   design or architectural decisions be made that would preclude the use\n\
    \   of new or emerging protocols.\n   A generally conservative approach, giving\
    \ weight to running (and\n   available) code, is preferable.  Where new protocols\
    \ are required,\n   evidence of commitment to implementation by appropriate vendors\
    \ or\n   development communities is highly desirable.  Protocols used should\n\
    \   be backward compatible and forward compatible where changes are made.\n"
- title: 3.1.2.  Minimise Changes to Hosts and Routers
  contents:
  - "3.1.2.  Minimise Changes to Hosts and Routers\n   In order to maximise the deployability\
    \ of new homenets, any\n   requirement for changes to hosts and routers should\
    \ be minimised\n   where possible; however, solutions that, for example, incrementally\n\
    \   improve capability via host or router changes may be acceptable.\n   There\
    \ may be cases where changes are unavoidable, e.g., to allow a\n   given homenet\
    \ routing protocol to be self-configuring or to support\n   routing based on source\
    \ addresses in addition to destination\n   addresses (to improve multihoming support,\
    \ as discussed in\n   Section 3.2.4).\n"
- title: 3.2.  Homenet Topology
  contents:
  - "3.2.  Homenet Topology\n   This section considers homenet topologies and the\
    \ principles that may\n   be applied in designing an architecture to support as\
    \ wide a range of\n   such topologies as possible.\n"
- title: 3.2.1.  Supporting Arbitrary Topologies
  contents:
  - "3.2.1.  Supporting Arbitrary Topologies\n   There should ideally be no built-in\
    \ assumptions about the topology in\n   home networks, as users are capable of\
    \ connecting their devices in\n   'ingenious' ways.  Thus, arbitrary topologies\
    \ and arbitrary routing\n   will need to be supported, or at least the failure\
    \ mode for when the\n   user makes a mistake should be as robust as possible,\
    \ e.g.,\n   deactivating a certain part of the infrastructure to allow the rest\n\
    \   to operate.  In such cases, the user should ideally have some useful\n   indication\
    \ of the failure mode encountered.\n   There should be no topology scenarios that\
    \ cause a loss of\n   connectivity, except when the user creates a physical island\
    \ within\n   the topology.  Some potentially pathological cases that can be\n\
    \   created include bridging ports of a router together; however, this\n   case\
    \ can be detected and dealt with by the router.  Loops within a\n   routed topology\
    \ are in a sense good in that they offer redundancy.\n   Topologies that include\
    \ potential bridging loops can be dangerous but\n   are also detectable when a\
    \ switch learns the Media Access Control\n   (MAC) address of one of its interfaces\
    \ on another or runs a spanning\n   tree or link-state protocol.  It is only topologies\
    \ with such\n   potential loops using simple repeaters that are truly pathological.\n\
    \   The topology of the homenet may change over time, due to the addition\n  \
    \ or removal of equipment but also due to temporary failures or\n   connectivity\
    \ problems.  In some cases, this may lead to, for example,\n   a multihomed homenet\
    \ being split into two isolated homenets or, after\n   such a fault is remedied,\
    \ two isolated parts reconfiguring back to a\n   single network.\n"
- title: 3.2.2.  Network Topology Models
  contents:
  - "3.2.2.  Network Topology Models\n   As hinted above, while the architecture may\
    \ focus on likely common\n   topologies, it should not preclude any arbitrary\
    \ topology from being\n   constructed.\n   At the time of writing, most IPv4 home\
    \ network models tend to be\n   relatively simple, typically a single NAT router\
    \ to the ISP and a\n   single internal subnet but, as discussed earlier, evolution\
    \ in\n   network architectures is driving more complex topologies, such as the\n\
    \   separation of guest and private networks.  There may also be some\n   cascaded\
    \ IPv4 NAT scenarios, which we mention in the next section.\n   For IPv6 homenets,\
    \ the network architectures described in [RFC7084]\n   should, as a minimum, be\
    \ supported.\n   There are a number of properties or attributes of a home network\
    \ that\n   we can use to describe its topology and operation.  The following\n\
    \   properties apply to any IPv6 home network:\n   o  Presence of internal routers.\
    \  The homenet may have one or more\n      internal routers or may only provide\
    \ subnetting from interfaces on\n      the CE router.\n   o  Presence of isolated\
    \ internal subnets.  There may be isolated\n      internal subnets, with no direct\
    \ connectivity between them within\n      the homenet (with each having its own\
    \ external connectivity).\n      Isolation may be physical or implemented via\
    \ IEEE 802.1q VLANs.\n      The latter is, however, not something a typical user\
    \ would be\n      expected to configure.\n   o  Demarcation of the CE router.\
    \  The CE router(s) may or may not be\n      managed by the ISP.  If the demarcation\
    \ point is such that the\n      customer can provide or manage the CE router,\
    \ its configuration\n      must be simple.  Both models must be supported.\n \
    \  Various forms of multihoming are likely to become more prevalent with\n   IPv6\
    \ home networks, where the homenet may have two or more external\n   ISP connections,\
    \ as discussed further below.  Thus, the following\n   properties should also\
    \ be considered for such networks:\n   o  Number of upstream providers.  The majority\
    \ of home networks today\n      consist of a single upstream ISP, but it may become\
    \ more common in\n      the future for there to be multiple ISPs, whether for\
    \ resilience\n      or provision of additional services.  Each would offer its\
    \ own\n      prefix.  Some may or may not provide a default route to the public\n\
    \      Internet.\n   o  Number of CE routers.  The homenet may have a single CE\
    \ router,\n      which might be used for one or more providers, or multiple CE\n\
    \      routers.  The presence of multiple CE routers adds additional\n      complexity\
    \ for multihoming scenarios and protocols like PCP that\n      may need to manage\
    \ connection-oriented state mappings on the same\n      CE router as used for\
    \ subsequent traffic flows.\n   In the following sections, we give some examples\
    \ of the types of\n   homenet topologies we may see in the future.  This is not\
    \ intended to\n   be an exhaustive or complete list but rather an indicative one\
    \ to\n   facilitate the discussion in this text.\n"
- title: '3.2.2.1.  A: Single ISP, Single CE Router, and Internal Routers'
  contents:
  - "3.2.2.1.  A: Single ISP, Single CE Router, and Internal Routers\n   Figure 1\
    \ shows a home network with multiple local area networks.\n   These may be needed\
    \ for reasons relating to different link-layer\n   technologies in use or for\
    \ policy reasons, e.g., classic Ethernet in\n   one subnet and an LLN link-layer\
    \ technology in another.  In this\n   example, there is no single router that\
    \ a priori understands the\n   entire topology.  The topology itself may also\
    \ be complex, and it may\n   not be possible to assume a pure tree form, for instance\
    \ (because\n   home users may plug routers together to form arbitrary topologies,\n\
    \   including those with potential loops in them).\n                     +-------+-------+\
    \                     \\\n                     |   Service     |             \
    \         \\\n                     |   Provider    |                       | Service\n\
    \                     |    Router     |                       | Provider\n   \
    \                  +-------+-------+                       | Network\n       \
    \                      |                              /\n                    \
    \         | Customer                    /\n                             | Internet\
    \ Connection\n                             |\n                      +------+--------+\
    \                    \\\n                      |     IPv6      |             \
    \        \\\n                      | Customer Edge |                      \\\n\
    \                      |    Router     |                      |\n            \
    \          +----+-+---+----+                      |\n          Network A     \
    \   | |   |      Network B(E)         |\n    ----+-------------+----+ |   +---+-------------+------+\
    \  |\n        |             |      |       |             |      |  |\n   +----+-----+\
    \ +-----+----+ |  +----+-----+ +-----+----+ |  |\n   |IPv6 Host | |IPv6 Host |\
    \ |  | IPv6 Host| |IPv6 Host | |  |\n   |    H1    | |    H2    | |  |    H3 \
    \   | |    H4    | |  |\n   +----------+ +----------+ |  +----------+ +----------+\
    \ |  |\n                             |        |             |     |  |\n     \
    \                 Link F |     ---+------+------+-----+  |\n                 \
    \            |               | Network E(B)  |\n                      +------+--------+\
    \      |               | End-User\n                      |     IPv6      |   \
    \   |               | Networks\n                      |   Interior    +------+\
    \               |\n                      |    Router     |                   \
    \   |\n                      +---+-------+-+-+                      |\n      \
    \    Network C       |       |   Network D              |\n    ----+-------------+---+\
    \       +---+-------------+---     |\n        |             |               |\
    \             |        |\n   +----+-----+ +-----+----+     +----+-----+ +-----+----+\
    \   |\n   |IPv6 Host | |IPv6 Host |     | IPv6 Host| |IPv6 Host |   |\n   |  \
    \ H5     | |   H6     |     |    H7    | |    H8    |   /\n   +----------+ +----------+\
    \     +----------+ +----------+  /\n                                 Figure 1\n\
    \   In this diagram, there is one CE router.  It has a single uplink\n   interface.\
    \  It has three additional interfaces connected to Network\n   A, Link F, and\
    \ Network B.  The IPv6 Internal Router (IR) has four\n   interfaces connected\
    \ to Link F, Network C, Network D, and Network E.\n   Network B and Network E\
    \ have been bridged, likely inadvertently.\n   This could be as a result of connecting\
    \ a wire between a switch for\n   Network B and a switch for Network E.\n   Any\
    \ of logical Networks A through F might be wired or wireless.\n   Where multiple\
    \ hosts are shown, this might be through one or more\n   physical ports on the\
    \ CE router or IPv6 (IR), wireless networks, or\n   through one or more Ethernet\
    \ switches that are Layer 2 only.\n"
- title: '3.2.2.2.  B: Two ISPs, Two CE Routers, and Shared Subnet'
  contents:
  - "3.2.2.2.  B: Two ISPs, Two CE Routers, and Shared Subnet\n           +-------+-------+\
    \     +-------+-------+         \\\n           |   Service     |     |   Service\
    \     |          \\\n           |  Provider A   |     |  Provider B   |      \
    \     | Service\n           |    Router     |     |    Router     |          \
    \ | Provider\n           +------+--------+     +-------+-------+           | Network\n\
    \                  |                      |                   /\n            \
    \      |      Customer        |                  /\n                  | Internet\
    \ Connections |                 /\n                  |                      |\n\
    \           +------+--------+     +-------+-------+         \\\n           | \
    \    IPv6      |     |    IPv6       |          \\\n           | Customer Edge\
    \ |     | Customer Edge |           \\\n           |   Router 1    |     |   Router\
    \ 2    |           /\n           +------+--------+     +-------+-------+     \
    \     /\n                  |                      |                 /\n      \
    \            |                      |                | End-User\n     ---+---------+---+---------------+--+----------+---\
    \  | Network(s)\n        |             |               |             |      \\\
    \n   +----+-----+ +-----+----+     +----+-----+ +-----+----+  \\\n   |IPv6 Host\
    \ | |IPv6 Host |     | IPv6 Host| |IPv6 Host |  /\n   |   H1     | |   H2    \
    \ |     |    H3    | |    H4    | /\n   +----------+ +----------+     +----------+\
    \ +----------+\n                                 Figure 2\n   Figure 2 illustrates\
    \ a multihomed homenet model, where the customer\n   has connectivity via CE router\
    \ 1 to ISP A and via CE router 2 to ISP\n   B.  This example shows one shared\
    \ subnet where IPv6 nodes would\n   potentially be multihomed and receive multiple\
    \ IPv6 global prefixes,\n   one per ISP.  This model may also be combined with\
    \ that shown in\n   Figure 1 to create a more complex scenario with multiple internal\n\
    \   routers.  Or, the above shared subnet may be split in two, such that\n   each\
    \ CE router serves a separate isolated subnet, which is a scenario\n   seen with\
    \ some IPv4 networks today.\n"
- title: '3.2.2.3.  C: Two ISPs, One CE Router, and Shared Subnet'
  contents:
  - "3.2.2.3.  C: Two ISPs, One CE Router, and Shared Subnet\n           +-------+-------+\
    \    +-------+-------+          \\\n           |   Service     |    |   Service\
    \     |           \\\n           |  Provider A   |    |  Provider B   |      \
    \      | Service\n           |    Router     |    |    Router     |          \
    \  | Provider\n           +-------+-------+    +------+--------+            |\
    \ Network\n                   |                   |                     /\n  \
    \                 |     Customer      |                    /\n               \
    \    |     Internet      |                   /\n                   |    Connections\
    \    |\n                 +-----------+-----------+                 \\\n      \
    \           |         IPv6          |                  \\\n                 |\
    \     Customer Edge     |                   \\\n                 |        Router\
    \         |                   /\n                 +-----------+-----------+  \
    \                /\n                             |                           \
    \  /\n                             |                            | End-User\n \
    \    ---+------------+-------+--------+-------------+---  | Network(s)\n     \
    \   |            |                |             |      \\\n   +----+-----+ +----+-----+\
    \     +----+-----+ +-----+----+  \\\n   |IPv6 Host | |IPv6 Host |     | IPv6 Host|\
    \ |IPv6 Host |  /\n   |   H1     | |   H2     |     |    H3    | |   H4     |\
    \ /\n   +----------+ +----------+     +----------+ +----------+\n            \
    \                     Figure 3\n   Figure 3 illustrates a model where a home network\
    \ may have multiple\n   connections to multiple providers or multiple logical\
    \ connections to\n   the same provider, with shared internal subnets.\n"
- title: 3.2.3.  Dual-Stack Topologies
  contents:
  - "3.2.3.  Dual-Stack Topologies\n   For the immediate future, it is expected that\
    \ most homenet\n   deployments will be dual-stack IPv4/IPv6.  In such networks,\
    \ it is\n   important not to introduce new IPv6 capabilities that would cause\
    \ a\n   failure if used alongside IPv4+NAT, given that such dual-stack\n   homenets\
    \ will be commonplace for some time.  That said, it is\n   desirable that IPv6\
    \ works better than IPv4 in as many scenarios as\n   possible.  Further, the homenet\
    \ architecture must operate in the\n   absence of IPv4.\n   A general recommendation\
    \ is to follow the same topology for IPv6 as\n   is used for IPv4 but not to use\
    \ NAT.  Thus, there should be routed\n   IPv6 where an IPv4 NAT is used, and where\
    \ there is no NAT, routing or\n   bridging may be used.  Routing may have advantages\
    \ when compared to\n   bridging together high- and lower-speed shared media, and\
    \ in\n   addition, bridging may not be suitable for some networks, such as ad\n\
    \   hoc mobile networks.\n   In some cases, IPv4 home networks may feature cascaded\
    \ NATs.  End\n   users are frequently unaware that they have created such networks,\
    \ as\n   'home routers' and 'home switches' are frequently confused.  In\n   addition,\
    \ there are cases where NAT routers are included within\n   Virtual Machine Hypervisors\
    \ or where Internet connection-sharing\n   services have been enabled.  This document\
    \ applies equally to such\n   hidden NAT 'routers'.  IPv6-routed versions of such\
    \ cases will be\n   required.  We should thus also note that routers in the homenet\
    \ may\n   not be separate physical devices; they may be embedded within other\n\
    \   devices.\n"
- title: 3.2.4.  Multihoming
  contents:
  - "3.2.4.  Multihoming\n   A homenet may be multihomed to multiple providers, as\
    \ the network\n   models above illustrate.  This may take a form where there are\
    \ either\n   multiple isolated networks within the home or a more integrated\n\
    \   network where the connectivity selection needs to be dynamic.\n   Current\
    \ practice is typically of the former kind, but the latter is\n   expected to\
    \ become more commonplace.\n   In the general homenet architecture, multihomed\
    \ hosts should be\n   multi-addressed with a global IPv6 address from the global\
    \ prefix\n   delegated from each ISP they communicate with or through.  When such\n\
    \   multi-addressing is in use, hosts need some way to pick source and\n   destination\
    \ address pairs for connections.  A host may choose a\n   source address to use\
    \ by various methods, most commonly [RFC6724].\n   Applications may of course\
    \ do different things, and this should not\n   be precluded.\n   For the single\
    \ CE Router Network Model C illustrated above,\n   multihoming may be offered\
    \ by source-based routing at the CE router.\n   With multiple exit routers, as\
    \ in CE Router Network Model B, the\n   complexity rises.  Given a packet with\
    \ a source address on the home\n   network, the packet must be routed to the proper\
    \ egress to avoid\n   ingress filtering as described in BCP 38 if exiting through\
    \ the wrong\n   ISP.  It is highly desirable that the packet is routed in the\
    \ most\n   efficient manner to the correct exit, though as a minimum requirement\n\
    \   the packet should not be dropped.\n   The homenet architecture should support\
    \ both the above models, i.e.,\n   one or more CE routers.  However, the general\
    \ multihoming problem is\n   broad, and solutions suggested to date within the\
    \ IETF have included\n   complex architectures for monitoring connectivity, traffic\n\
    \   engineering, identifier-locator separation, connection survivability\n   across\
    \ multihoming events, and so on.  It is thus important that the\n   homenet architecture\
    \ should as far as possible minimise the\n   complexity of any multihoming support.\n\
    \   An example of such a 'simpler' approach has been documented in\n   [RFC7157].\
    \  Alternatively, a flooding/routing protocol could\n   potentially be used to\
    \ pass information through the homenet, such\n   that internal routers and ultimately\
    \ end hosts could learn per-prefix\n   configuration information, allowing better\
    \ address selection\n   decisions to be made.  However, this would imply router\
    \ and, most\n   likely, host changes.  Another avenue is to introduce support\n\
    \   throughout the homenet for routing that is based on the source as\n   well\
    \ as the destination address of each packet.  While greatly\n   improving the\
    \ 'intelligence' of routing decisions within the homenet,\n   such an approach\
    \ would require relatively significant router changes\n   but avoid host changes.\n\
    \   As explained previously, while NPTv6 has been proposed for providing\n   multihoming\
    \ support in networks, its use is not recommended in the\n   homenet architecture.\n\
    \   It should be noted that some multihoming scenarios may see one\n   upstream\
    \ being a \"walled garden\" and thus only appropriate for\n   connectivity to\
    \ the services of that provider; an example may be a\n   VPN service that only\
    \ routes back to the enterprise business network\n   of a user in the homenet.\
    \  As per Section 4.2.1 of [RFC3002], we do\n   not specifically target walled-garden\
    \ multihoming as a goal of this\n   document.\n   The homenet architecture should\
    \ also not preclude use of host or\n   application-oriented tools, e.g., Shim6\
    \ [RFC5533], Multipath TCP\n   (MPTCP) [RFC6824], or Happy Eyeballs [RFC6555].\
    \  In general, any\n   incremental improvements obtained by host changes should\
    \ give benefit\n   for the hosts introducing them but should not be required.\n"
- title: 3.2.5.  Mobility Support
  contents:
  - "3.2.5.  Mobility Support\n   Devices may be mobile within the homenet.  While\
    \ resident on the same\n   subnet, their address will remain persistent, but should\
    \ devices move\n   to a different (wireless) subnet, they will acquire a new address\
    \ in\n   that subnet.  It is desirable that the homenet supports internal\n  \
    \ device mobility.  To do so, the homenet may either extend the reach\n   of specific\
    \ wireless subnets to enable wireless roaming across the\n   home (availability\
    \ of a specific subnet across the home) or support\n   mobility protocols to facilitate\
    \ such roaming where multiple subnets\n   are used.\n"
- title: 3.3.  A Self-Organising Network
  contents:
  - "3.3.  A Self-Organising Network\n   The home network infrastructure should be\
    \ naturally self-organising\n   and self-configuring under different circumstances\
    \ relating to the\n   connectivity status to the Internet, number of devices,\
    \ and physical\n   topology.  At the same time, it should be possible for advanced\
    \ users\n   to manually adjust (override) the current configuration.\n   While\
    \ a goal of the homenet architecture is for the network to be as\n   self-organising\
    \ as possible, there may be instances where some manual\n   configuration is required,\
    \ e.g., the entry of a cryptographic key to\n   apply wireless security or to\
    \ configure a shared routing secret.  The\n   latter may be relevant when considering\
    \ how to bootstrap a routing\n   configuration.  It is highly desirable that the\
    \ number of such\n   configurations is minimised.\n"
- title: 3.3.1.  Differentiating Neighbouring Homenets
  contents:
  - "3.3.1.  Differentiating Neighbouring Homenets\n   It is important that self-configuration\
    \ with 'unintended' devices be\n   avoided.  There should be a way for a user\
    \ to administratively assert\n   in a simple way whether or not a device belongs\
    \ to a given homenet.\n   The goal is to allow the establishment of borders, particularly\n\
    \   between two adjacent homenets, and to avoid unauthorised devices from\n  \
    \ participating in the homenet.  Such an authorisation capability may\n   need\
    \ to operate through multiple hops in the homenet.\n   The homenet should thus\
    \ support a way for a homenet owner to claim\n   ownership of their devices in\
    \ a reasonably secure way.  This could be\n   achieved by a pairing mechanism\
    \ by, for example, pressing buttons\n   simultaneously on an authenticated and\
    \ a new homenet device or by an\n   enrollment process as part of an autonomic\
    \ networking environment.\n   While there may be scenarios where one homenet may\
    \ wish to\n   intentionally gain access through another, e.g., to share external\n\
    \   connectivity costs, such scenarios are not discussed in this\n   document.\n"
- title: 3.3.2.  Largest Practical Subnets
  contents:
  - "3.3.2.  Largest Practical Subnets\n   Today's IPv4 home networks generally have\
    \ a single subnet, and early\n   dual-stack deployments have a single congruent\
    \ IPv6 subnet, possibly\n   with some bridging functionality.  More recently,\
    \ some vendors have\n   started to introduce 'home' and 'guest' functions, which\
    \ in IPv6\n   would be implemented as two subnets.\n   Future home networks are\
    \ highly likely to have one or more internal\n   routers and thus need multiple\
    \ subnets for the reasons described\n   earlier.  As part of the self-organisation\
    \ of the network, the\n   homenet should subdivide itself into the largest practical\
    \ subnets\n   that can be constructed within the constraints of link-layer\n \
    \  mechanisms, bridging, physical connectivity, and policy, and where\n   applicable,\
    \ performance or other criteria.  In such subdivisions, the\n   logical topology\
    \ may not necessarily match the physical topology.\n   This text does not, however,\
    \ make recommendations on how such\n   subdivision should occur.  It is expected\
    \ that subsequent documents\n   will address this problem.\n   While it may be\
    \ desirable to maximise the chance of link-local\n   protocols operating across\
    \ a homenet by maximising the size of a\n   subnet, multi-subnet home networks\
    \ are inevitable, so their support\n   must be included.\n"
- title: 3.3.3.  Handling Varying Link Technologies
  contents:
  - "3.3.3.  Handling Varying Link Technologies\n   Homenets tend to grow organically\
    \ over many years, and a homenet will\n   typically be built over link-layer technologies\
    \ from different\n   generations.  Current homenets typically use links ranging\
    \ from 1\n   Mbit/s up to 1 Gbit/s -- a throughput discrepancy of three orders\
    \ of\n   magnitude.  We expect this discrepancy to widen further as both high-\n\
    \   speed and low-power technologies are deployed.\n   Homenet protocols should\
    \ be designed to deal well with\n   interconnecting links of very different throughputs.\
    \  In particular,\n   flows local to a link should not be flooded throughout the\
    \ homenet,\n   even when sent over multicast, and, whenever possible, the homenet\n\
    \   protocols should be able to choose the faster links and avoid the\n   slower\
    \ ones.\n   Links (particularly wireless links) may also have limited numbers\
    \ of\n   transmit opportunities (txops), and there is a clear trend driven by\n\
    \   both power and downward compatibility constraints toward aggregation\n   of\
    \ packets into these limited txops while increasing throughput.\n   Transmit opportunities\
    \ may be a system's scarcest resource and,\n   therefore, also strongly limit\
    \ actual throughput available.\n"
- title: 3.3.4.  Homenet Realms and Borders
  contents:
  - "3.3.4.  Homenet Realms and Borders\n   The homenet will need to be aware of the\
    \ extent of its own 'site',\n   which will, for example, define the borders for\
    \ ULA and site scope\n   multicast traffic and may require specific security policies\
    \ to be\n   applied.  The homenet will have one or more such borders with\n  \
    \ external connectivity providers.\n   A homenet will most likely also have internal\
    \ borders between\n   internal realms, e.g., a guest realm or a corporate network\
    \ extension\n   realm.  It is desirable that appropriate borders can be configured\
    \ to\n   determine, for example, the scope of where network prefixes, routing\n\
    \   information, network traffic, service discovery, and naming may be\n   shared.\
    \  The default mode internally should be to share everything.\n   It is expected\
    \ that a realm would span at least an entire subnet, and\n   thus the borders\
    \ lie at routers that receive delegated prefixes\n   within the homenet.  It is\
    \ also desirable, for a richer security\n   model, that hosts are able to make\
    \ communication decisions based on\n   available realm and associated prefix information\
    \ in the same way\n   that routers at realm borders can.\n   A simple homenet\
    \ model may just consider three types of realms and\n   the borders between them,\
    \ namely the internal homenet, the ISP, and a\n   guest network.  In this case,\
    \ the borders will include the border\n   from the homenet to the ISP, the border\
    \ from the guest network to the\n   ISP, and the border from the homenet to the\
    \ guest network.\n   Regardless, it should be possible for additional types of\
    \ realms and\n   borders to be defined, e.g., for some specific LLN-based network,\n\
    \   such as Smart Grid, and for these to be detected automatically and\n   for\
    \ an appropriate default policy to be applied as to what type of\n   traffic/data\
    \ can flow across such borders.\n   It is desirable to classify the external border\
    \ of the home network\n   as a unique logical interface separating the home network\
    \ from a\n   service provider network(s).  This border interface may be a single\n\
    \   physical interface to a single service provider, multiple Layer 2\n   sub-interfaces\
    \ to a single service provider, or multiple connections\n   to a single or multiple\
    \ providers.  This border makes it possible to\n   describe edge operations and\
    \ interface requirements across multiple\n   functional areas including security,\
    \ routing, service discovery, and\n   router discovery.\n   It should be possible\
    \ for the homenet user to override any\n   automatically determined borders and\
    \ the default policies applied\n   between them, the exception being that it may\
    \ not be possible to\n   override policies defined by the ISP at the external\
    \ border.\n"
- title: 3.3.5.  Configuration Information from the ISP
  contents:
  - "3.3.5.  Configuration Information from the ISP\n   In certain cases, it may be\
    \ useful for the homenet to get certain\n   configuration information from its\
    \ ISP.  For example, the homenet\n   DHCP server may request and forward some\
    \ options that it gets from\n   its upstream DHCP server, though the specifics\
    \ of the options may\n   vary across deployments.  There is potential complexity\
    \ here, of\n   course, should the homenet be multihomed.\n"
- title: 3.4.  Homenet Addressing
  contents:
  - "3.4.  Homenet Addressing\n   The IPv6 addressing scheme used within a homenet\
    \ must conform to the\n   IPv6 addressing architecture [RFC4291].  In this section,\
    \ we discuss\n   how the homenet needs to adapt to the prefixes made available\
    \ to it\n   by its upstream ISP, such that internal subnets, hosts, and devices\n\
    \   can obtain and configure the necessary addressing information to\n   operate.\n"
- title: 3.4.1.  Use of ISP-Delegated IPv6 Prefixes
  contents:
  - "3.4.1.  Use of ISP-Delegated IPv6 Prefixes\n   Discussion of IPv6 prefix allocation\
    \ policies is included in\n   [RFC6177].  In practice, a homenet may receive an\
    \ arbitrary length\n   IPv6 prefix from its provider, e.g., /60, /56, or /48.\
    \  The offered\n   prefix may be stable or change from time to time; it is generally\n\
    \   expected that ISPs will offer relatively stable prefixes to their\n   residential\
    \ customers.  Regardless, the home network needs to be\n   adaptable as far as\
    \ possible to ISP prefix allocation policies and\n   assume nothing about the\
    \ stability of the prefix received from an ISP\n   or the length of the prefix\
    \ that may be offered.\n   However, if, for example, only a /64 is offered by\
    \ the ISP, the\n   homenet may be severely constrained or even unable to function.\
    \  BCP\n   157 [RFC6177] states the following:\n      A key principle for address\
    \ management is that end sites always be\n      able to obtain a reasonable amount\
    \ of address space for their\n      actual and planned usage, and over time ranges\
    \ specified in years\n      rather than just months.  In practice, that means\
    \ at least one\n      /64, and in most cases significantly more.  One particular\n\
    \      situation that must be avoided is having an end site feel\n      compelled\
    \ to use IPv6-to-IPv6 Network Address Translation or other\n      burdensome address\
    \ conservation techniques because it could not\n      get sufficient address space.\n\
    \   This architecture document assumes that the guidance in the quoted\n   text\
    \ is being followed by ISPs.\n   There are many problems that would arise from\
    \ a homenet not being\n   offered a sufficient prefix size for its needs.  Rather\
    \ than attempt\n   to contrive a method for a homenet to operate in a constrained\
    \ manner\n   when faced with insufficient prefixes, such as the use of subnet\n\
    \   prefixes longer than /64 (which would break stateless address\n   autoconfiguration\
    \ [RFC4862]), the use of NPTv6, or falling back to\n   bridging across potentially\
    \ very different media, it is recommended\n   that the receiving router instead\
    \ enters an error state and issues\n   appropriate warnings.  Some consideration\
    \ may need to be given to how\n   such a warning or error state should best be\
    \ presented to a typical\n   home user.\n   Thus, a homenet CE router should request,\
    \ for example, via DHCP\n   Prefix Delegation (DHCP PD) [RFC3633], that it would\
    \ like a /48\n   prefix from its ISP, i.e., it asks the ISP for the maximum size\n\
    \   prefix it might expect to be offered, even if in practice it may only\n  \
    \ be offered a /56 or /60.  For a typical IPv6 homenet, it is not\n   recommended\
    \ that an ISP offers less than a /60 prefix, and it is\n   highly preferable that\
    \ the ISP offers at least a /56.  It is expected\n   that the allocated prefix\
    \ to the homenet from any single ISP is a\n   contiguous, aggregated one.  While\
    \ it may be possible for a homenet\n   CE router to issue multiple prefix requests\
    \ to attempt to obtain\n   multiple delegations, such behaviour is out of scope\
    \ of this\n   document.\n   The norm for residential customers of large ISPs may\
    \ be similar to\n   their single IPv4 address provision; by default it is likely\
    \ to\n   remain persistent for some time, but changes in the ISP's own\n   provisioning\
    \ systems may lead to the customer's IP (and in the IPv6\n   case their prefix\
    \ pool) changing.  It is not expected that ISPs will\n   generally support Provider\
    \ Independent (PI) addressing for\n   residential homenets.\n   When an ISP does\
    \ need to restructure, and in doing so renumber its\n   customer homenets, 'flash'\
    \ renumbering is likely to be imposed.  This\n   implies a need for the homenet\
    \ to be able to handle a sudden\n   renumbering event that, unlike the process\
    \ described in [RFC4192],\n   would be a 'flag day' event, which means that a\
    \ graceful renumbering\n   process moving through a state with two active prefixes\
    \ in use would\n   not be possible.  While renumbering can be viewed as an extended\n\
    \   version of an initial numbering process, the difference between flash\n  \
    \ renumbering and an initial 'cold start' is the need to provide\n   service continuity.\n\
    \   There may be cases where local law means some ISPs are required to\n   change\
    \ IPv6 prefixes (current IPv4 addresses) for privacy reasons for\n   their customers.\
    \  In such cases, it may be possible to avoid an\n   instant 'flash' renumbering\
    \ and plan a non-flag day renumbering as\n   per RFC 4192.  Similarly, if an ISP\
    \ has a planned renumbering\n   process, it may be able to adjust lease timers,\
    \ etc., appropriately.\n   The customer may of course also choose to move to a\
    \ new ISP and thus\n   begin using a new prefix.  In such cases, the customer\
    \ should expect\n   a discontinuity, and not only may the prefix change, but potentially\n\
    \   also the prefix length if the new ISP offers a different default size\n  \
    \ prefix.  The homenet may also be forced to renumber itself if\n   significant\
    \ internal 'replumbing' is undertaken by the user.\n   Regardless, it's desirable\
    \ that homenet protocols support rapid\n   renumbering and that operational processes\
    \ don't add unnecessary\n   complexity for the renumbering process.  Further,\
    \ the introduction of\n   any new homenet protocols should not make any form of\
    \ renumbering any\n   more complex than it already is.\n   Finally, the internal\
    \ operation of the home network should also not\n   depend on the availability\
    \ of the ISP network at any given time,\n   other than, of course, for connectivity\
    \ to services or systems off\n   the home network.  This reinforces the use of\
    \ ULAs for stable\n   internal communication and the need for a naming and service\n\
    \   discovery mechanism that can operate independently within the\n   homenet.\n"
- title: 3.4.2.  Stable Internal IP Addresses
  contents:
  - "3.4.2.  Stable Internal IP Addresses\n   The network should by default attempt\
    \ to provide IP-layer\n   connectivity between all internal parts of the homenet\
    \ as well as to\n   and from the external Internet, subject to the filtering policies\
    \ or\n   other policy constraints discussed later in the security section.\n \
    \  ULAs should be used within the scope of a homenet to support stable\n   routing\
    \ and connectivity between subnets and hosts regardless of\n   whether a globally\
    \ unique ISP-provided prefix is available.  In the\n   case of a prolonged external\
    \ connectivity outage, ULAs allow internal\n   operations across routed subnets\
    \ to continue.  ULA addresses also\n   allow constrained devices to create permanent\
    \ relationships between\n   IPv6 addresses, e.g., from a wall controller to a\
    \ lamp, where\n   symbolic host names would require additional non-volatile memory,\
    \ and\n   updating global prefixes in sleeping devices might also be\n   problematic.\n\
    \   As discussed previously, it would be expected that ULAs would\n   normally\
    \ be used alongside one or more global prefixes in a homenet,\n   such that hosts\
    \ become multi-addressed with both globally unique and\n   ULA prefixes.  ULAs\
    \ should be used for all devices, not just those\n   intended to only have internal\
    \ connectivity.  Default address\n   selection would then enable ULAs to be preferred\
    \ for internal\n   communications between devices that are using ULA prefixes\
    \ generated\n   within the same homenet.\n   In cases where ULA prefixes are in\
    \ use within a homenet but there is\n   no external IPv6 connectivity (and thus\
    \ no GUAs in use),\n   recommendations ULA-5, L-3, and L-4 in RFC 7084 should\
    \ be followed to\n   ensure correct operation, in particular where the homenet\
    \ may be dual\n   stack with IPv4 external connectivity.  The use of the Route\n\
    \   Information Option described in [RFC4191] provides a mechanism to\n   advertise\
    \ such more-specific ULA routes.\n   The use of ULAs should be restricted to the\
    \ homenet scope through\n   filtering at the border(s) of the homenet, as mandated\
    \ by RFC 7084\n   requirement S-2.\n   Note that in some cases, it is possible\
    \ that multiple /48 ULA\n   prefixes may be in use within the same homenet, e.g.,\
    \ when the\n   network is being deployed, perhaps also without external\n   connectivity.\
    \  In cases where multiple ULA /48s are in use, hosts\n   need to know that each\
    \ /48 is local to the homenet, e.g., by\n   inclusion in their local address selection\
    \ policy table.\n"
- title: 3.4.3.  Internal Prefix Delegation
  contents:
  - "3.4.3.  Internal Prefix Delegation\n   As mentioned above, there are various\
    \ sources of prefixes.  From the\n   homenet perspective, a single global prefix\
    \ from each ISP should be\n   received on the border CE router [RFC3633].  Where\
    \ multiple CE\n   routers exist with multiple ISP prefix pools, it is expected\
    \ that\n   routers within the homenet would assign themselves prefixes from each\n\
    \   ISP they communicate with/through.  As discussed above, a ULA prefix\n   should\
    \ be provisioned for stable internal communications or for use\n   on constrained/LLN\
    \ networks.\n   The delegation or availability of a prefix pool to the homenet\
    \ should\n   allow subsequent internal autonomous assignment of prefixes for use\n\
    \   within the homenet.  Such internal assignment should not assume a\n   flat\
    \ or hierarchical model, nor should it make an assumption about\n   whether the\
    \ assignment of internal prefixes is distributed or\n   centralised.  The assignment\
    \ mechanism should provide reasonable\n   efficiency, so that typical home network\
    \ prefix allocation sizes can\n   accommodate all the necessary /64 allocations\
    \ in most cases, and not\n   waste prefixes.  Further, duplicate assignment of\
    \ multiple /64s to\n   the same network should be avoided, and the network should\
    \ behave as\n   gracefully as possible in the event of prefix exhaustion (though\
    \ the\n   options in such cases may be limited).\n   Where the home network has\
    \ multiple CE routers and these are\n   delegated prefix pools from their attached\
    \ ISPs, the internal prefix\n   assignment would be expected to be served by each\
    \ CE router for each\n   prefix associated with it.  Where ULAs are used, it is\
    \ preferable\n   that only one /48 ULA covers the whole homenet, from which /64s\
    \ can\n   be assigned to the subnets.  In cases where two /48 ULAs are\n   generated\
    \ within a homenet, the network should still continue to\n   function, meaning\
    \ that hosts will need to determine that each ULA is\n   local to the homenet.\n\
    \   Prefix assignment within the homenet should result in each link being\n  \
    \ assigned a stable prefix that is persistent across reboots, power\n   outages,\
    \ and similar short-term outages.  The availability of\n   persistent prefixes\
    \ should not depend on the router boot order.  The\n   addition of a new routing\
    \ device should not affect existing\n   persistent prefixes, but persistence may\
    \ not be expected in the face\n   of significant 'replumbing' of the homenet.\
    \  However, assigned ULA\n   prefixes within the homenet should remain persistent\
    \ through an ISP-\n   driven renumbering event.\n   Provisioning such persistent\
    \ prefixes may imply the need for stable\n   storage on routing devices and also\
    \ a method for a home user to\n   'reset' the stored prefix should a significant\
    \ reconfiguration be\n   required (though ideally the home user should not be\
    \ involved at\n   all).\n   This document makes no specific recommendation towards\
    \ solutions but\n   notes that it is very likely that all routing devices participating\n\
    \   in a homenet must use the same internal prefix delegation method.\n   This\
    \ implies that only one delegation method should be in use.\n"
- title: 3.4.4.  Coordination of Configuration Information
  contents:
  - "3.4.4.  Coordination of Configuration Information\n   The network elements will\
    \ need to be integrated in a way that takes\n   account of the various lifetimes\
    \ on timers that are used on different\n   elements, e.g., DHCPv6 PD, router,\
    \ valid prefix, and preferred prefix\n   timers.\n"
- title: 3.4.5.  Privacy
  contents:
  - "3.4.5.  Privacy\n   If ISPs offer relatively stable IPv6 prefixes to customers,\
    \ the\n   network prefix part of addresses associated with the homenet may not\n\
    \   change over a reasonably long period of time.\n   The exposure of which traffic\
    \ is sourced from the same homenet is\n   thus similar to IPv4; the single IPv4\
    \ global address seen through use\n   of IPv4 NAT gives the same hint as the global\
    \ IPv6 prefix seen for\n   IPv6 traffic.\n   While IPv4 NAT may obfuscate to an\
    \ external observer which internal\n   devices traffic is sourced from, IPv6,\
    \ even with use of privacy\n   addresses [RFC4941], adds additional exposure of\
    \ which traffic is\n   sourced from the same internal device through use of the\
    \ same IPv6\n   source address for a period of time.\n"
- title: 3.5.  Routing Functionality
  contents:
  - "3.5.  Routing Functionality\n   Routing functionality is required when there\
    \ are multiple routers\n   deployed within the internal home network.  This functionality\
    \ could\n   be as simple as the current 'default route is up' model of IPv4 NAT,\n\
    \   or more likely, it would involve running an appropriate routing\n   protocol.\n\
    \   A mechanism is required to discover which router(s) in the homenet is\n  \
    \ providing the CE router function.  Borders may include but are not\n   limited\
    \ to the interface to the upstream ISP, a gateway device to a\n   separate home\
    \ network such as an LLN network, or a gateway to a guest\n   or private corporate\
    \ extension network.  In some cases, there may be\n   no border present, which\
    \ may, for example, occur before an upstream\n   connection has been established.\n\
    \   The routing environment should be self-configuring, as discussed\n   previously.\
    \  The homenet self-configuration process and the routing\n   protocol must interact\
    \ in a predictable manner, especially during\n   startup and reconvergence.  The\
    \ border discovery functionality and\n   other self-configuration functionality\
    \ may be integrated into the\n   routing protocol itself but may also be imported\
    \ via a separate\n   discovery mechanism.\n   It is preferable that configuration\
    \ information is distributed and\n   synchronised within the homenet by a separate\
    \ configuration protocol.\n   The homenet routing protocol should be based on\
    \ a previously deployed\n   protocol that has been shown to be reliable and robust.\
    \  This does\n   not preclude the selection of a newer protocol for which a high-\n\
    \   quality open source implementation becomes available.  The resulting\n   code\
    \ must support lightweight implementations and be suitable for\n   incorporation\
    \ into consumer devices, where both fixed and temporary\n   storage and processing\
    \ power are at a premium.\n   At most, one unicast and one multicast routing protocol\
    \ should be in\n   use at a given time in a given homenet.  In some simple topologies,\n\
    \   no routing protocol may be needed.  If more than one routing protocol\n  \
    \ is supported by routers in a given homenet, then a mechanism is\n   required\
    \ to ensure that all routers in that homenet use the same\n   protocol.\n   The\
    \ homenet architecture is IPv6-only.  In practice, dual-stack\n   homenets are\
    \ still likely for the foreseeable future, as described in\n   Section 3.2.3.\
    \  Whilst support for IPv4 and other address families\n   may therefore be beneficial,\
    \ it is not an explicit requirement to\n   carry the routing information in the\
    \ same routing protocol.\n   Multiple types of physical interfaces must be accounted\
    \ for in the\n   homenet routing topology.  Technologies such as Ethernet, Wi-Fi,\n\
    \   Multimedia over Coax Alliance (MoCA), etc., must be capable of\n   coexisting\
    \ in the same environment and should be treated as part of\n   any routed deployment.\
    \  The inclusion of physical-layer\n   characteristics in path computation should\
    \ be considered for\n   optimising communication in the homenet.\n"
- title: 3.5.1.  Unicast Routing within the Homenet
  contents:
  - "3.5.1.  Unicast Routing within the Homenet\n   The role of the unicast routing\
    \ protocol is to provide good enough\n   end-to-end connectivity often enough,\
    \ where good/often enough is\n   defined by user expectations.\n   Due to the\
    \ use of a variety of diverse underlying link technologies,\n   path selection\
    \ in a homenet may benefit from being more refined than\n   minimising hop count.\
    \  It may also be beneficial for traffic to use\n   multiple paths to a given\
    \ destination within the homenet where\n   available rather than just a single\
    \ best path.\n   Minimising convergence time should be a goal in any routed\n\
    \   environment.  It is reasonable to assume that convergence time should\n  \
    \ not be significantly longer than network outages users are accustomed\n   to\
    \ should their CE router reboot.\n   The homenet architecture is agnostic as to\
    \ the choice of underlying\n   routing technology, e.g., link state versus Bellman-Ford.\n\
    \   The routing protocol should support the generic use of multiple\n   customer\
    \ Internet connections and the concurrent use of multiple\n   delegated prefixes.\
    \  A routing protocol that can make routing\n   decisions based on source and\
    \ destination addresses is thus highly\n   desirable, to avoid problems with upstream\
    \ ISP ingress filtering as\n   described in BCP 38.  Multihoming support may also\
    \ include load\n   balancing to multiple providers and failover from a primary\
    \ to a\n   backup link when available.  The protocol should not require upstream\n\
    \   ISP connectivity to be established to continue routing within the\n   homenet.\n\
    \   The homenet architecture is agnostic on a minimum hop count that has\n   to\
    \ be supported by the routing protocol.  The architecture should,\n   however,\
    \ be scalable to other scenarios where homenet technology may\n   be deployed,\
    \ which may include small office and small enterprise\n   sites.  To allow for\
    \ such cases, it would be desirable that the\n   architecture is scalable to higher\
    \ hop counts and to larger numbers\n   of routers than would be typical in a true\
    \ home network.\n   At the time of writing, link-layer networking technology is\
    \ poised to\n   become more heterogeneous, as networks begin to employ both\n\
    \   traditional Ethernet technology and link layers designed for LLNs,\n   such\
    \ as those used for certain types of sensor devices.\n   Ideally, LLN or other\
    \ logically separate networks should be able to\n   exchange routes such that\
    \ IP traffic may be forwarded among the\n   networks via gateway routers that\
    \ interoperate with both the homenet\n   and any LLNs.  Current home deployments\
    \ use largely different\n   mechanisms in sensor and basic Internet connectivity\
    \ networks.  IPv6\n   virtual machine (VM) solutions may also add additional routing\n\
    \   requirements.\n   In this homenet architecture, LLNs and other specialised\
    \ networks are\n   considered stub areas of the homenet and are thus not expected\
    \ to act\n   as a transit for traffic between more traditional media.\n"
- title: 3.5.2.  Unicast Routing at the Homenet Border
  contents:
  - "3.5.2.  Unicast Routing at the Homenet Border\n   The current practice defined\
    \ in [RFC7084] would suggest that routing\n   between the homenet CE router and\
    \ the service provider router follow\n   the WAN-side requirements model in [RFC7084],\
    \ Section 4 (WAN-side\n   requirements), at least in initial deployments.  However,\n\
    \   consideration of whether a routing protocol is used between the\n   homenet\
    \ CE router and the service provider router is out of scope of\n   this document.\n"
- title: 3.5.3.  Multicast Support
  contents:
  - "3.5.3.  Multicast Support\n   It is desirable that, subject to the capacities\
    \ of devices on certain\n   media types, multicast routing is supported across\
    \ the homenet,\n   including source-specific multicast (SSM) [RFC4607].\n   [RFC4291]\
    \ requires that any boundary of scope 4 or higher (i.e.,\n   admin-local or higher)\
    \ be administratively configured.  Thus, the\n   boundary at the homenet-ISP border\
    \ must be administratively\n   configured, though that may be triggered by an\
    \ administrative\n   function such as DHCP PD.  Other multicast forwarding policy\
    \ borders\n   may also exist within the homenet, e.g., to/from a guest subnet,\n\
    \   whilst the use of certain link media types may also affect where\n   specific\
    \ multicast traffic is forwarded or routed.\n   There may be different drivers\
    \ for multicast to be supported across\n   the homenet -- for example,\n   o \
    \ for homenet-wide service discovery, should a multicast service\n      discovery\
    \ protocol of scope greater than link-local be defined\n   o  for multicast-based\
    \ streaming or file-sharing applications\n   Where multicast is routed across\
    \ a homenet, an appropriate multicast\n   routing protocol is required, one that\
    \ as per the unicast routing\n   protocol should be self-configuring.  As hinted\
    \ above, it must be\n   possible to scope or filter multicast traffic to avoid\
    \ it being\n   flooded to network media where devices cannot reasonably support\
    \ it.\n   A homenet may not only use multicast internally, it may also be a\n\
    \   consumer or provider of external multicast traffic, where the\n   homenet's\
    \ ISP supports such multicast operation.  This may be\n   valuable, for example,\
    \ where live video applications are being\n   sourced to/from the homenet.\n \
    \  The multicast environment should support the ability for applications\n   to\
    \ pick a unique multicast group to use.\n"
- title: 3.6.  Security
  contents:
  - "3.6.  Security\n   The security of an IPv6 homenet is an important consideration.\
    \  The\n   most notable difference to the IPv4 operational model is the removal\n\
    \   of NAT, the introduction of global addressability of devices, and\n   thus\
    \ a need to consider whether devices should have global\n   reachability.  Regardless,\
    \ hosts need to be able to operate securely,\n   end to end where required, and\
    \ also be robust against malicious\n   traffic directed towards them.  However,\
    \ there are other challenges\n   introduced, e.g., default filtering policies\
    \ at the borders between\n   various homenet realms.\n"
- title: 3.6.1.  Addressability vs. Reachability
  contents:
  - "3.6.1.  Addressability vs. Reachability\n   An IPv6-based home network architecture\
    \ should embrace the\n   transparent end-to-end communications model as described\
    \ in\n   [RFC2775].  Each device should be globally addressable, and those\n \
    \  addresses must not be altered in transit.  However, security\n   perimeters\
    \ can be applied to restrict end-to-end communications, and\n   thus while a host\
    \ may be globally addressable, it may not be globally\n   reachable.\n   [RFC4864]\
    \ describes a 'Simple Security' model for IPv6 networks,\n   whereby stateful\
    \ perimeter filtering can be applied to control the\n   reachability of devices\
    \ in a homenet.  RFC 4864 states in Section 4.2\n   that \"the use of firewalls...is\
    \ recommended for those that want\n   boundary protection in addition to host\
    \ defences.\"  It should be\n   noted that a 'default deny' filtering approach\
    \ would effectively\n   replace the need for IPv4 NAT traversal protocols with\
    \ a need to use\n   a signalling protocol to request a firewall hole be opened,\
    \ e.g., a\n   protocol such as PCP [RFC6887].  In networks with multiple CE\n\
    \   routers, the signalling would need to handle the cases of flows that\n   may\
    \ use one or more exit routers.  CE routers would need to be able\n   to advertise\
    \ their existence for such protocols.\n   [RFC6092] expands on RFC 4864, giving\
    \ a more detailed discussion of\n   IPv6 perimeter security recommendations, without\
    \ mandating a 'default\n   deny' approach.  Indeed, RFC 6092 does not enforce\
    \ a particular mode\n   of operation, instead stating that CE routers must provide\
    \ an easily\n   selected configuration option that permits a 'transparent' mode,\
    \ thus\n   ensuring a 'default allow' model is available.\n   The topic of whether\
    \ future home networks as described in this\n   document should have a 'default\
    \ deny' or 'default allow' position has\n   been discussed at length in various\
    \ IETF meetings without any\n   consensus being reached on which approach is more\
    \ appropriate.\n   Further, the choice of which default to apply may be situational,\
    \ and\n   thus this text makes no recommendation on the default setting beyond\n\
    \   what is written on this topic in RFC 6092.  We note in Section 3.6.3\n   below\
    \ that the implicit firewall function of an IPv4 NAT is\n   commonplace today,\
    \ and thus future CE routers targeted at home\n   networks should continue to\
    \ support the option of running in 'default\n   deny mode', whether or not that\
    \ is the default setting.\n"
- title: 3.6.2.  Filtering at Borders
  contents:
  - "3.6.2.  Filtering at Borders\n   It is desirable that there are mechanisms to\
    \ detect different types\n   of borders within the homenet, as discussed previously,\
    \ and further\n   mechanisms to then apply different types of filtering policies\
    \ at\n   those borders, e.g., whether naming and service discovery should pass\n\
    \   a given border.  Any such policies should be able to be easily\n   applied\
    \ by typical home users, e.g., to give a user in a guest\n   network access to\
    \ media services in the home or access to a printer.\n   Simple mechanisms to\
    \ apply policy changes, or associations between\n   devices, will be required.\n\
    \   There are cases where full internal connectivity may not be\n   desirable,\
    \ e.g., in certain utility networking scenarios, or where\n   filtering is required\
    \ for policy reasons against a guest network\n   subnet(s).  As a result, some\
    \ scenarios/models may involve running an\n   isolated subnet(s) with their own\
    \ CE routers.  In such cases,\n   connectivity would only be expected within each\
    \ isolated network\n   (though traffic may potentially pass between them via external\n\
    \   providers).\n   LLNs provide another example of where there may be secure\
    \ perimeters\n   inside the homenet.  Constrained LLN nodes may implement network\
    \ key\n   security but may depend on access policies enforced by the LLN border\n\
    \   router.\n   Considerations for differentiating neighbouring homenets are\n\
    \   discussed in Section 3.3.1.\n"
- title: 3.6.3.  Partial Effectiveness of NAT and Firewalls
  contents:
  - "3.6.3.  Partial Effectiveness of NAT and Firewalls\n   Security by way of obscurity\
    \ (address translation) or through\n   firewalls (filtering) is at best only partially\
    \ effective.  The very\n   poor security track record of home computers, home\
    \ networking, and\n   business PC computers and networking is testimony to this.\
    \  A\n   security compromise behind the firewall of any device exposes all\n \
    \  others, making an entire network that relies on obscurity or a\n   firewall\
    \ as vulnerable as the most insecure device on the private\n   side of the network.\n\
    \   However, given current evidence of home network products with very\n   poor\
    \ default device security, putting a firewall in place does\n   provide some level\
    \ of protection.  The use of firewalls today,\n   whether a good practice or not,\
    \ is common practice, and the\n   capability to afford protection via a 'default\
    \ deny' setting, even if\n   marginally effective, should not be lost.  Thus,\
    \ while it is highly\n   desirable that all hosts in a homenet be adequately protected\
    \ by\n   built-in security functions, it should also be assumed that all CE\n\
    \   routers will continue to support appropriate perimeter defence\n   functions,\
    \ as per [RFC7084].\n"
- title: 3.6.4.  Exfiltration Concerns
  contents:
  - "3.6.4.  Exfiltration Concerns\n   As homenets become more complex, with more\
    \ devices, and with service\n   discovery potentially enabled across the whole\
    \ home, there are\n   potential concerns over the leakage of information should\
    \ devices use\n   discovery protocols to gather information and report it to equipment\n\
    \   vendors or application service providers.\n   While it is not clear how such\
    \ exfiltration could be easily avoided,\n   the threat should be recognised, be\
    \ it from a new piece of hardware\n   or some 'app' installed on a personal device.\n"
- title: 3.6.5.  Device Capabilities
  contents:
  - "3.6.5.  Device Capabilities\n   In terms of the devices, homenet hosts should\
    \ implement their own\n   security policies in accordance to their computing capabilities.\n\
    \   They should have the means to request transparent communications that\n  \
    \ can be initiated to them through security filters in the homenet, for\n   either\
    \ all ports or specific services.  Users should have simple\n   methods to associate\
    \ devices to services that they wish to operate\n   transparently through (CE\
    \ router) borders.\n"
- title: 3.6.6.  ULAs as a Hint of Connection Origin
  contents:
  - "3.6.6.  ULAs as a Hint of Connection Origin\n   As noted in Section 3.6, if appropriate\
    \ filtering is in place on the\n   CE router(s), as mandated by requirement S-2\
    \ in RFC 7084, a ULA\n   source address may be taken as an indication of locally\
    \ sourced\n   traffic.  This indication could then be used with security settings\n\
    \   to designate between which nodes a particular application is allowed\n   to\
    \ communicate, provided ULA address space is filtered appropriately\n   at the\
    \ boundary of the realm.\n"
- title: 3.7.  Naming and Service Discovery
  contents:
  - "3.7.  Naming and Service Discovery\n   The homenet requires devices to be able\
    \ to determine and use unique\n   names by which they can be accessed on the network\
    \ and that are not\n   used by other devices on the network.  Users and devices\
    \ will need to\n   be able to discover devices and services available on the network,\n\
    \   e.g., media servers, printers, displays, or specific home automation\n   devices.\
    \  Thus, naming and service discovery must be supported in the\n   homenet, and\
    \ given the nature of typical home network users, the\n   service(s) providing\
    \ this function must as far as possible support\n   unmanaged operation.\n   The\
    \ naming system will be required to work internally or externally,\n   whether\
    \ the user is within or outside of the homenet, i.e., the user\n   should be able\
    \ to refer to devices by name, and potentially connect\n   to them, wherever they\
    \ may be.  The most natural way to think about\n   such naming and service discovery\
    \ is to enable it to work across the\n   entire homenet residence (site), disregarding\
    \ technical borders such\n   as subnets but respecting policy borders such as\
    \ those between guest\n   and other internal network realms.  Remote access may\
    \ be desired by\n   the homenet residents while travelling but also potentially\
    \ by\n   manufacturers or other 'benevolent' third parties.\n"
- title: 3.7.1.  Discovering Services
  contents:
  - "3.7.1.  Discovering Services\n   Users will typically perform service discovery\
    \ through graphical user\n   interfaces (GUIs) that allow them to browse services\
    \ on their network\n   in an appropriate and intuitive way.  Devices may also\
    \ need to\n   discover other devices, without any user intervention or choice.\n\
    \   Either way, such interfaces are beyond the scope of this document,\n   but\
    \ the interface should have an appropriate application programming\n   interface\
    \ (API) for the discovery to be performed.\n   Such interfaces may also typically\
    \ hide the local domain name element\n   from users, especially where only one\
    \ name space is available.\n   However, as we discuss below, in some cases the\
    \ ability to discover\n   available domains may be useful.\n   We note that current\
    \ zero-configuration service discovery protocols\n   are generally aimed at single\
    \ subnets.  There is thus a choice to\n   make for multi-subnet homenets as to\
    \ whether such protocols should be\n   proxied or extended to operate across a\
    \ whole homenet.  In this\n   context, that may mean bridging a link-local method,\
    \ taking care to\n   avoid packets entering looping paths, or extending the scope\
    \ of\n   multicast traffic used for the purpose.  It may mean that some proxy\n\
    \   or hybrid service is utilised, perhaps co-resident on the CE router.\n   Or,\
    \ it may be that a new approach is preferable, e.g., flooding\n   information\
    \ around the homenet as attributes within the routing\n   protocol (which could\
    \ allow per-prefix configuration).  However, we\n   should prefer approaches that\
    \ are backward compatible and allow\n   current implementations to continue to\
    \ be used.  Note that this\n   document does not mandate a particular solution;\
    \ rather, it expresses\n   the principles that should be used for a homenet naming\
    \ and service\n   discovery environment.\n   One of the primary challenges facing\
    \ service discovery today is lack\n   of interoperability due to the ever increasing\
    \ number of service\n   discovery protocols available.  While it is conceivable\
    \ for consumer\n   devices to support multiple discovery protocols, this is clearly\
    \ not\n   the most efficient use of network and computational resources.  One\n\
    \   goal of the homenet architecture should be a path to service\n   discovery\
    \ protocol interoperability through either a standards-based\n   translation scheme,\
    \ hooks into current protocols to allow some form\n   of communication among discovery\
    \ protocols, extensions to support a\n   central service repository in the homenet,\
    \ or simply convergence\n   towards a unified protocol suite.\n"
- title: 3.7.2.  Assigning Names to Devices
  contents:
  - "3.7.2.  Assigning Names to Devices\n   Given the large number of devices that\
    \ may be networked in the\n   future, devices should have a means to generate\
    \ their own unique\n   names within a homenet and to detect clashes should they\
    \ arise, e.g.,\n   where a second device of the same type/vendor as an existing\
    \ device\n   with the same default name is deployed or where a new subnet is added\n\
    \   to the homenet that already has a device of the same name.  It is\n   expected\
    \ that a device should have a fixed name while within the\n   scope of the homenet.\n\
    \   Users will also want simple ways to (re)name devices, again most\n   likely\
    \ through an appropriate and intuitive interface that is beyond\n   the scope\
    \ of this document.  Note that the name a user assigns to a\n   device may be\
    \ a label that is stored on the device as an attribute of\n   the device, and\
    \ it may be distinct from the name used in a name\n   service, e.g., 'Study Laser\
    \ Printer' as opposed to\n   printer2.<somedomain>.\n"
- title: 3.7.3.  The Homenet Name Service
  contents:
  - "3.7.3.  The Homenet Name Service\n   The homenet name service should support\
    \ both lookups and discovery.\n   A lookup would operate via a direct query to\
    \ a known service, while\n   discovery may use multicast messages or a service\
    \ where applications\n   register in order to be found.\n   It is highly desirable\
    \ that the homenet name service must at the very\n   least coexist with the Internet\
    \ name service.  There should also be a\n   bias towards proven, existing solutions.\
    \  The strong implication is\n   thus that the homenet service is DNS based, or\
    \ DNS compatible.  There\n   are naming protocols that are designed to be configured\
    \ and operate\n   Internet-wide, like unicast-based DNS, but also protocols that\
    \ are\n   designed for zero-configuration local environments, like Multicast\n\
    \   DNS (mDNS) [RFC6762].\n   When DNS is used as the homenet name service, it\
    \ typically includes\n   both a resolving service and an authoritative service.\
    \  The\n   authoritative service hosts the homenet-related zone.  One approach\n\
    \   when provisioning such a name service, which is designed to\n   facilitate\
    \ name resolution from the global Internet, is to run an\n   authoritative name\
    \ service on the CE router and a secondary\n   authoritative name service provided\
    \ by the ISP or perhaps an external\n   third party.\n   Where zero-configuration\
    \ name services are used, it is desirable that\n   these can also coexist with\
    \ the Internet name service.  In\n   particular, where the homenet is using a\
    \ global name space, it is\n   desirable that devices have the ability, where\
    \ desired, to add\n   entries to that name space.  There should also be a mechanism\
    \ for\n   such entries to be removed or expired from the global name space.\n\
    \   To protect against attacks such as cache poisoning, where an attacker\n  \
    \ is able to insert a bogus DNS entry in the local cache, it is\n   desirable\
    \ to support appropriate name service security methods,\n   including DNS Security\
    \ Extensions (DNSSEC) [RFC4033], on both the\n   authoritative server and the\
    \ resolver sides.  Where DNS is used, the\n   homenet router or naming service\
    \ must not prevent DNSSEC from\n   operating.\n   While this document does not\
    \ specify hardware requirements, it is\n   worth noting briefly here that, e.g.,\
    \ in support of DNSSEC,\n   appropriate homenet devices should have good random\
    \ number generation\n   capability, and future homenet specifications should indicate\
    \ where\n   high-quality random number generators, i.e., with decent entropy,\
    \ are\n   needed.\n   Finally, the impact of a change in the CE router must be\
    \ considered.\n   It would be desirable to retain any relevant state (configuration)\n\
    \   that was held in the old CE router.  This might imply that state\n   information\
    \ should be distributed in the homenet, to be recoverable\n   by/to the new CE\
    \ router, or to the homenet's ISP or a third-party\n   externally provided service\
    \ by some means.\n"
- title: 3.7.4.  Name Spaces
  contents:
  - "3.7.4.  Name Spaces\n   If access to homenet devices is required remotely from\
    \ anywhere on\n   the Internet, then at least one globally unique name space is\n\
    \   required, though the use of multiple name spaces should not be\n   precluded.\
    \  One approach is that the name space(s) used for the\n   homenet would be served\
    \ authoritatively by the homenet, most likely\n   by a server resident on the\
    \ CE router.  Such name spaces may be\n   acquired by the user or provided/generated\
    \ by their ISP or an\n   alternative externally provided service.  It is likely\
    \ that the\n   default case is that a homenet will use a global domain provided\
    \ by\n   the ISP, but advanced users wishing to use a name space that is\n   independent\
    \ of their provider in the longer term should be able to\n   acquire and use their\
    \ own domain name.  For users wanting to use\n   their own independent domain\
    \ names, such services are already\n   available.\n   Devices may also be assigned\
    \ different names in different name\n   spaces, e.g., by third parties who may\
    \ manage systems or devices in\n   the homenet on behalf of the resident(s). \
    \ Remote management of the\n   homenet is out of scope of this document.\n   If,\
    \ however, a global name space is not available, the homenet will\n   need to\
    \ pick and use a local name space, which would only have\n   meaning within the\
    \ local homenet (i.e., it would not be used for\n   remote access to the homenet).\
    \  The .local name space currently has a\n   special meaning for certain existing\
    \ protocols that have link-local\n   scope and is thus not appropriate for multi-subnet\
    \ home networks.  A\n   different name space is thus required for the homenet.\n\
    \   One approach for picking a local name space is to use an Ambiguous\n   Local\
    \ Qualified Domain Name (ALQDN) space, such as .sitelocal (or an\n   appropriate\
    \ name reserved for the purpose).  While this is a simple\n   approach, there\
    \ is the potential in principle for devices that are\n   bookmarked somehow by\
    \ name by an application in one homenet to be\n   confused with a device with\
    \ the same name in another homenet.  In\n   practice, however, the underlying\
    \ service discovery protocols should\n   be capable of handling moving to a network\
    \ where a new device is\n   using the same name as a device used previously in\
    \ another homenet.\n   An alternative approach for a local name space would be\
    \ to use a\n   Unique Locally Qualified Domain Name (ULQDN) space such as\n  \
    \ .<UniqueString>.sitelocal.  The <UniqueString> could be generated in\n   a variety\
    \ of ways, one potentially being based on the local /48 ULA\n   prefix being used\
    \ across the homenet.  Such a <UniqueString> should\n   survive a cold restart,\
    \ i.e., be consistent after a network power-\n   down, or if a value is not set\
    \ on startup, the CE router or device\n   running the name service should generate\
    \ a default value.  It would\n   be desirable for the homenet user to be able\
    \ to override the\n   <UniqueString> with a value of their choice, but that would\
    \ increase\n   the likelihood of a name conflict.  Any generated <UniqueString>\n\
    \   should not be predictable; thus, adding a salt/hash function would be\n  \
    \ desirable.\n   In the (likely) event that the homenet is accessible from outside\
    \ the\n   homenet (using the global name space), it is vital that the homenet\n\
    \   name space follow the rules and conventions of the global name space.\n  \
    \ In this mode of operation, names in the homenet (including those\n   automatically\
    \ generated by devices) must be usable as labels in the\n   global name space.\
    \  [RFC5890] describes considerations for\n   Internationalizing Domain Names\
    \ in Applications (IDNA).\n   Also, with the introduction of new 'dotless' top-level\
    \ domains, there\n   is also potential for ambiguity between, for example, a local\
    \ host\n   called 'computer' and (if it is registered) a .computer Generic Top\n\
    \   Level Domain (gTLD).  Thus, qualified names should always be used,\n   whether\
    \ these are exposed to the user or not.  The IAB has issued a\n   statement that\
    \ explains why dotless domains should be considered\n   harmful [IABdotless].\n\
    \   There may be use cases where different name spaces may be desired for\n  \
    \ either different realms in the homenet or segmentation of a single\n   name\
    \ space within the homenet.  Thus, hierarchical name space\n   management is likely\
    \ to be required.  There should also be nothing to\n   prevent an individual device(s)\
    \ from being independently registered\n   in external name spaces.\n   It may\
    \ be the case that if there are two or more CE routers serving\n   the home network,\
    \ if each has a name space delegated from a different\n   ISP, there is the potential\
    \ for devices in the home to have multiple\n   fully qualified names under multiple\
    \ domains.\n   Where a user is in a remote network wishing to access devices in\n\
    \   their home network, there may be a requirement to consider the domain\n  \
    \ search order presented where multiple associated name spaces exist.\n   This\
    \ also implies that a domain discovery function is desirable.\n   It may be the\
    \ case that not all devices in the homenet are made\n   available by name via\
    \ an Internet name space, and that a 'split view'\n   (as described in [RFC6950],\
    \ Section 4) is preferred for certain\n   devices, whereby devices inside the\
    \ homenet see different DNS\n   responses to those outside.\n   Finally, this\
    \ document makes no assumption about the presence or\n   omission of a reverse\
    \ lookup service.  There is an argument that it\n   may be useful for presenting\
    \ logging information to users with\n   meaningful device names rather than literal\
    \ addresses.  There are\n   also some services, most notably email mail exchangers,\
    \ where some\n   operators have chosen to require a valid reverse lookup before\n\
    \   accepting connections.\n"
- title: 3.7.5.  Independent Operation
  contents:
  - "3.7.5.  Independent Operation\n   Name resolution and service discovery for reachable\
    \ devices must\n   continue to function if the local network is disconnected from\
    \ the\n   global Internet, e.g., a local media server should still be available\n\
    \   even if the Internet link is down for an extended period.  This\n   implies\
    \ that the local network should also be able to perform a\n   complete restart\
    \ in the absence of external connectivity and have\n   local naming and service\
    \ discovery operate correctly.\n   As described above, the approach of a local\
    \ authoritative name\n   service with a cache would allow local operation for\
    \ sustained ISP\n   outages.\n   Having an independent local trust anchor is desirable,\
    \ to support\n   secure exchanges should external connectivity be unavailable.\n\
    \   A change in ISP should not affect local naming and service discovery.\n  \
    \ However, if the homenet uses a global name space provided by the ISP,\n   then\
    \ this will obviously have an impact if the user changes their\n   network provider.\n"
- title: 3.7.6.  Considerations for LLNs
  contents:
  - "3.7.6.  Considerations for LLNs\n   In some parts of the homenet, in particular\
    \ LLNs or any devices where\n   battery power is used, devices may be sleeping,\
    \ in which case a proxy\n   for such nodes may be required that could respond\
    \ (for example) to\n   multicast service discovery requests.  Those same devices\
    \ or parts of\n   the network may have less capacity for multicast traffic that\
    \ may be\n   flooded from other parts of the network.  In general, message\n \
    \  utilisation should be efficient considering the network technologies\n   and\
    \ constrained devices that the service may need to operate over.\n   There are\
    \ efforts underway to determine naming and discovery\n   solutions for use by\
    \ the Constrained Application Protocol (CoAP)\n   [RFC7252] in LLN networks. \
    \ These are outside the scope of this\n   document.\n"
- title: 3.7.7.  DNS Resolver Discovery
  contents:
  - "3.7.7.  DNS Resolver Discovery\n   Automatic discovery of a name service to allow\
    \ client devices in the\n   homenet to resolve external domains on the Internet\
    \ is required, and\n   such discovery must support clients that may be a number\
    \ of router\n   hops away from the name service.  Similarly, it may be desirable\
    \ to\n   convey any DNS domain search list that may be in effect for the\n   homenet.\n"
- title: 3.7.8.  Devices Roaming to/from the Homenet
  contents:
  - "3.7.8.  Devices Roaming to/from the Homenet\n   It is likely that some devices\
    \ that have registered names within the\n   homenet Internet name space and that\
    \ are mobile will attach to the\n   Internet at other locations and acquire an\
    \ IP address at those\n   locations.  Devices may move between different homenets.\
    \  In such\n   cases, it is desirable that devices may be accessed by the same\
    \ name\n   as is used in their home network.\n   Solutions to this problem are\
    \ not discussed in this document.  They\n   may include the use of Mobile IPv6\
    \ or Dynamic DNS -- either of which\n   would put additional requirements on the\
    \ homenet -- or establishment\n   of a (VPN) tunnel to a server in the home network.\n"
- title: 3.8.  Other Considerations
  contents:
  - "3.8.  Other Considerations\n   This section discusses two other considerations\
    \ for home networking\n   that the architecture should not preclude but that this\
    \ text is\n   neutral towards.\n"
- title: 3.8.1.  Quality of Service
  contents:
  - "3.8.1.  Quality of Service\n   Support for Quality of Service (QoS) in a multi-service\
    \ homenet may\n   be a requirement, e.g., for a critical system (perhaps health\
    \ care\n   related) or for differentiation between different types of traffic\n\
    \   (file sharing, cloud storage, live streaming, Voice over IP (VoIP),\n   etc).\
    \  Different link media types may have different such properties\n   or capabilities.\n\
    \   However, homenet scenarios should require no new QoS protocols.  A\n   Diffserv\
    \ [RFC2475] approach with a small number of predefined traffic\n   classes may\
    \ generally be sufficient, though at present there is\n   little experience of\
    \ QoS deployment in home networks.  It is likely\n   that QoS, or traffic prioritisation,\
    \ methods will be required at the\n   CE router and potentially around boundaries\
    \ between different link\n   media types (where, for example, some traffic may\
    \ simply not be\n   appropriate for some media and need to be dropped to avoid\n\
    \   overloading the constrained media).\n   There may also be complementary mechanisms\
    \ that could be beneficial\n   to application performance and behaviour in the\
    \ homenet domain, such\n   as ensuring proper buffering algorithms are used as\
    \ described in\n   [Gettys11].\n"
- title: 3.8.2.  Operations and Management
  contents:
  - "3.8.2.  Operations and Management\n   In this section, we briefly review some\
    \ initial considerations for\n   operations and management in the type of homenet\
    \ described in this\n   document.  It is expected that a separate document will\
    \ define an\n   appropriate operations and management framework for such homenets.\n\
    \   As described in this document, the homenet should have the general\n   goal\
    \ of being self-organising and self-configuring from the network-\n   layer perspective,\
    \ e.g., prefixes should be able to be assigned to\n   router interfaces.  Further,\
    \ applications running on devices should\n   be able to use zero-configuration\
    \ service discovery protocols to\n   discover services of interest to the home\
    \ user.  In contrast, a home\n   user would not be expected, for example, to have\
    \ to assign prefixes\n   to links or manage the DNS entries for the home network.\
    \  Such expert\n   operation should not be precluded, but it is not the norm.\n\
    \   The user may still be required to, or wish to, perform some\n   configuration\
    \ of the network and the devices on it.  Examples might\n   include entering a\
    \ security key to enable access to their wireless\n   network or choosing to give\
    \ a 'friendly name' to a device presented\n   to them through service discovery.\
    \  Configuration of link- and\n   application-layer services is out of scope of\
    \ this architectural\n   principles document but is likely to be required in an\
    \ operational\n   homenet.\n   While not being expected to actively configure\
    \ the networking\n   elements of their homenet, users may be interested in being\
    \ able to\n   view the status of their networks and the devices connected to it,\
    \ in\n   which case appropriate network monitoring protocols will be required\n\
    \   to allow them to view their network, and its status, e.g., via a web\n   interface\
    \ or equivalent.  While the user may not understand how the\n   network operates,\
    \ it is reasonable to assume they are interested in\n   understanding what faults\
    \ or problems may exist on it.  Such\n   monitoring may extend to other devices\
    \ on the network, e.g., storage\n   devices or web cameras, but such devices are\
    \ beyond the scope of this\n   document.\n   It may also be the case that an ISP,\
    \ or a third party, might wish to\n   offer a remote management service for the\
    \ homenet on behalf of the\n   user, or to be able to assist the user in the event\
    \ of some problem\n   they are experiencing, in which case appropriate management\
    \ and\n   monitoring protocols would be required.\n   Specifying the required\
    \ protocols to facilitate homenet management\n   and monitoring is out of scope\
    \ of this document.  As stated above, it\n   is expected that a separate document\
    \ will be produced to describe the\n   operations and management framework for\
    \ the types of home networks\n   presented in this document.\n   As a final point,\
    \ we note that it is desirable that all network\n   management and monitoring\
    \ functions should be available over IPv6\n   transport, even where the homenet\
    \ is dual stack.\n"
- title: 3.9.  Implementing the Architecture on IPv6
  contents:
  - "3.9.  Implementing the Architecture on IPv6\n   This architecture text encourages\
    \ reuse of existing protocols.  Thus,\n   the necessary mechanisms are largely\
    \ already part of the IPv6\n   protocol set and common implementations, though\
    \ there are some\n   exceptions.\n   For automatic routing, it is expected that\
    \ solutions can be found\n   based on existing protocols.  Some relatively smaller\
    \ updates are\n   likely to be required, e.g., a new mechanism may be needed in\
    \ order\n   to turn a selected protocol on by default, or a mechanism may be\n\
    \   required to automatically assign prefixes to links within the\n   homenet.\n\
    \   Some functionality, if required by the architecture, may need more\n   significant\
    \ changes or require development of new protocols, e.g.,\n   support for multihoming\
    \ with multiple exit routers would likely\n   require extensions to support source\
    \ and destination address-based\n   routing within the homenet.\n   Some protocol\
    \ changes are, however, required in the architecture,\n   e.g., for name resolution\
    \ and service discovery, extensions to\n   existing zero-configuration link-local\
    \ name resolution protocols are\n   needed to enable them to work across subnets,\
    \ within the scope of the\n   home network site.\n   Some of the hardest problems\
    \ in developing solutions for home\n   networking IPv6 architectures include discovering\
    \ the right borders\n   where the 'home' domain ends and the service provider\
    \ domain begins,\n   deciding whether some of the necessary discovery mechanism\
    \ extensions\n   should affect only the network infrastructure or also hosts,\
    \ and the\n   ability to turn on routing, prefix delegation, and other functions\
    \ in\n   a backwards-compatible manner.\n"
- title: 4.  Conclusions
  contents:
  - "4.  Conclusions\n   This text defines principles and requirements for a homenet\n\
    \   architecture.  The principles and requirements documented here should\n  \
    \ be observed by any future texts describing homenet protocols for\n   routing,\
    \ prefix management, security, naming, or service discovery.\n"
- title: 5.  Security Considerations
  contents:
  - "5.  Security Considerations\n   Security considerations for the homenet architecture\
    \ are discussed in\n   Section 3.6 above.\n"
- title: 6.  References
  contents:
  - '6.  References

    '
- title: 6.1.  Normative References
  contents:
  - "6.1.  Normative References\n   [RFC2460]  Deering, S. and R. Hinden, \"Internet\
    \ Protocol, Version 6\n              (IPv6) Specification\", RFC 2460, December\
    \ 1998,\n              <http://www.rfc-editor.org/info/rfc2460>.\n   [RFC3633]\
    \  Troan, O. and R. Droms, \"IPv6 Prefix Options for Dynamic\n              Host\
    \ Configuration Protocol (DHCP) version 6\", RFC 3633,\n              December\
    \ 2003, <http://www.rfc-editor.org/info/rfc3633>.\n   [RFC4193]  Hinden, R. and\
    \ B. Haberman, \"Unique Local IPv6 Unicast\n              Addresses\", RFC 4193,\
    \ October 2005,\n              <http://www.rfc-editor.org/info/rfc4193>.\n   [RFC4291]\
    \  Hinden, R. and S. Deering, \"IP Version 6 Addressing\n              Architecture\"\
    , RFC 4291, February 2006,\n              <http://www.rfc-editor.org/info/rfc4291>.\n"
- title: 6.2.  Informative References
  contents:
  - "6.2.  Informative References\n   [RFC1918]  Rekhter, Y., Moskowitz, R., Karrenberg,\
    \ D., Groot, G., and\n              E. Lear, \"Address Allocation for Private\
    \ Internets\", BCP\n              5, RFC 1918, February 1996,\n              <http://www.rfc-editor.org/info/rfc1918>.\n\
    \   [RFC2475]  Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z.,\n    \
    \          and W. Weiss, \"An Architecture for Differentiated\n              Services\"\
    , RFC 2475, December 1998,\n              <http://www.rfc-editor.org/info/rfc2475>.\n\
    \   [RFC2775]  Carpenter, B., \"Internet Transparency\", RFC 2775, February\n\
    \              2000, <http://www.rfc-editor.org/info/rfc2775>.\n   [RFC2827] \
    \ Ferguson, P. and D. Senie, \"Network Ingress Filtering:\n              Defeating\
    \ Denial of Service Attacks which employ IP Source\n              Address Spoofing\"\
    , BCP 38, RFC 2827, May 2000,\n              <http://www.rfc-editor.org/info/rfc2827>.\n\
    \   [RFC3002]  Mitzel, D., \"Overview of 2000 IAB Wireless Internetworking\n \
    \             Workshop\", RFC 3002, December 2000,\n              <http://www.rfc-editor.org/info/rfc3002>.\n\
    \   [RFC3022]  Srisuresh, P. and K. Egevang, \"Traditional IP Network\n      \
    \        Address Translator (Traditional NAT)\", RFC 3022, January\n         \
    \     2001, <http://www.rfc-editor.org/info/rfc3022>.\n   [RFC4033]  Arends, R.,\
    \ Austein, R., Larson, M., Massey, D., and S.\n              Rose, \"DNS Security\
    \ Introduction and Requirements\", RFC\n              4033, March 2005,\n    \
    \          <http://www.rfc-editor.org/info/rfc4033>.\n   [RFC4191]  Draves, R.\
    \ and D. Thaler, \"Default Router Preferences and\n              More-Specific\
    \ Routes\", RFC 4191, November 2005,\n              <http://www.rfc-editor.org/info/rfc4191>.\n\
    \   [RFC4192]  Baker, F., Lear, E., and R. Droms, \"Procedures for\n         \
    \     Renumbering an IPv6 Network without a Flag Day\", RFC 4192,\n          \
    \    September 2005, <http://www.rfc-editor.org/info/rfc4192>.\n   [RFC4607] \
    \ Holbrook, H. and B. Cain, \"Source-Specific Multicast for\n              IP\"\
    , RFC 4607, August 2006,\n              <http://www.rfc-editor.org/info/rfc4607>.\n\
    \   [RFC4862]  Thomson, S., Narten, T., and T. Jinmei, \"IPv6 Stateless\n    \
    \          Address Autoconfiguration\", RFC 4862, September 2007,\n          \
    \    <http://www.rfc-editor.org/info/rfc4862>.\n   [RFC4864]  Van de Velde, G.,\
    \ Hain, T., Droms, R., Carpenter, B., and\n              E. Klein, \"Local Network\
    \ Protection for IPv6\", RFC 4864,\n              May 2007, <http://www.rfc-editor.org/info/rfc4864>.\n\
    \   [RFC4941]  Narten, T., Draves, R., and S. Krishnan, \"Privacy\n          \
    \    Extensions for Stateless Address Autoconfiguration in\n              IPv6\"\
    , RFC 4941, September 2007,\n              <http://www.rfc-editor.org/info/rfc4941>.\n\
    \   [RFC5533]  Nordmark, E. and M. Bagnulo, \"Shim6: Level 3 Multihoming\n   \
    \           Shim Protocol for IPv6\", RFC 5533, June 2009,\n              <http://www.rfc-editor.org/info/rfc5533>.\n\
    \   [RFC5890]  Klensin, J., \"Internationalized Domain Names for\n           \
    \   Applications (IDNA): Definitions and Document Framework\",\n             \
    \ RFC 5890, August 2010,\n              <http://www.rfc-editor.org/info/rfc5890>.\n\
    \   [RFC5969]  Townsley, W. and O. Troan, \"IPv6 Rapid Deployment on IPv4\n  \
    \            Infrastructures (6rd) -- Protocol Specification\", RFC\n        \
    \      5969, August 2010,\n              <http://www.rfc-editor.org/info/rfc5969>.\n\
    \   [RFC6092]  Woodyatt, J., \"Recommended Simple Security Capabilities in\n \
    \             Customer Premises Equipment (CPE) for Providing\n              Residential\
    \ IPv6 Internet Service\", RFC 6092, January\n              2011, <http://www.rfc-editor.org/info/rfc6092>.\n\
    \   [RFC6144]  Baker, F., Li, X., Bao, C., and K. Yin, \"Framework for\n     \
    \         IPv4/IPv6 Translation\", RFC 6144, April 2011,\n              <http://www.rfc-editor.org/info/rfc6144>.\n\
    \   [RFC6145]  Li, X., Bao, C., and F. Baker, \"IP/ICMP Translation\n        \
    \      Algorithm\", RFC 6145, April 2011,\n              <http://www.rfc-editor.org/info/rfc6145>.\n\
    \   [RFC6177]  Narten, T., Huston, G., and L. Roberts, \"IPv6 Address\n      \
    \        Assignment to End Sites\", BCP 157, RFC 6177, March 2011,\n         \
    \     <http://www.rfc-editor.org/info/rfc6177>.\n   [RFC6204]  Singh, H., Beebee,\
    \ W., Donley, C., Stark, B., and O.\n              Troan, \"Basic Requirements\
    \ for IPv6 Customer Edge\n              Routers\", RFC 6204, April 2011,\n   \
    \           <http://www.rfc-editor.org/info/rfc6204>.\n   [RFC6296]  Wasserman,\
    \ M. and F. Baker, \"IPv6-to-IPv6 Network Prefix\n              Translation\"\
    , RFC 6296, June 2011,\n              <http://www.rfc-editor.org/info/rfc6296>.\n\
    \   [RFC6333]  Durand, A., Droms, R., Woodyatt, J., and Y. Lee, \"Dual-\n    \
    \          Stack Lite Broadband Deployments Following IPv4\n              Exhaustion\"\
    , RFC 6333, August 2011,\n              <http://www.rfc-editor.org/info/rfc6333>.\n\
    \   [RFC6555]  Wing, D. and A. Yourtchenko, \"Happy Eyeballs: Success with\n \
    \             Dual-Stack Hosts\", RFC 6555, April 2012,\n              <http://www.rfc-editor.org/info/rfc6555>.\n\
    \   [RFC6724]  Thaler, D., Draves, R., Matsumoto, A., and T. Chown,\n        \
    \      \"Default Address Selection for Internet Protocol Version 6\n         \
    \     (IPv6)\", RFC 6724, September 2012,\n              <http://www.rfc-editor.org/info/rfc6724>.\n\
    \   [RFC6762]  Cheshire, S. and M. Krochmal, \"Multicast DNS\", RFC 6762,\n  \
    \            February 2013, <http://www.rfc-editor.org/info/rfc6762>.\n   [RFC6824]\
    \  Ford, A., Raiciu, C., Handley, M., and O. Bonaventure,\n              \"TCP\
    \ Extensions for Multipath Operation with Multiple\n              Addresses\"\
    , RFC 6824, January 2013,\n              <http://www.rfc-editor.org/info/rfc6824>.\n\
    \   [RFC6887]  Wing, D., Cheshire, S., Boucadair, M., Penno, R., and P.\n    \
    \          Selkirk, \"Port Control Protocol (PCP)\", RFC 6887, April\n       \
    \       2013, <http://www.rfc-editor.org/info/rfc6887>.\n   [RFC6950]  Peterson,\
    \ J., Kolkman, O., Tschofenig, H., and B. Aboba,\n              \"Architectural\
    \ Considerations on Application Features in\n              the DNS\", RFC 6950,\
    \ October 2013,\n              <http://www.rfc-editor.org/info/rfc6950>.\n   [RFC7084]\
    \  Singh, H., Beebee, W., Donley, C., and B. Stark, \"Basic\n              Requirements\
    \ for IPv6 Customer Edge Routers\", RFC 7084,\n              November 2013, <http://www.rfc-editor.org/info/rfc7084>.\n\
    \   [RFC7157]  Troan, O., Miles, D., Matsushima, S., Okimoto, T., and D.\n   \
    \           Wing, \"IPv6 Multihoming without Network Address\n              Translation\"\
    , RFC 7157, March 2014,\n              <http://www.rfc-editor.org/info/rfc7157>.\n\
    \   [RFC7252]  Shelby, Z., Hartke, K., and C. Bormann, \"The Constrained\n   \
    \           Application Protocol (CoAP)\", RFC 7252, June 2014,\n            \
    \  <http://www.rfc-editor.org/info/rfc7252>.\n   [IABdotless]\n              IAB,\
    \ \"IAB Statement: Dotless Domains Considered Harmful\",\n              February\
    \ 2013, <http://www.iab.org/documents/\n              correspondence-reports-documents/2013-2/\n\
    \              iab-statement-dotless-domains-considered-harmful>.\n   [Gettys11]\n\
    \              Gettys, J., \"Bufferbloat: Dark Buffers in the Internet\",\n  \
    \            March 2011,\n              <http://www.ietf.org/proceedings/80/slides/tsvarea-1.pdf>.\n"
- title: Acknowledgments
  contents:
  - "Acknowledgments\n   The authors would like to thank Mikael Abrahamsson, Aamer\
    \ Akhter,\n   Mark Andrews, Dmitry Anipko, Ran Atkinson, Fred Baker, Ray Bellis,\n\
    \   Teco Boot, John Brzozowski, Cameron Byrne, Brian Carpenter, Stuart\n   Cheshire,\
    \ Julius Chroboczek, Lorenzo Colitti, Robert Cragie, Elwyn\n   Davies, Ralph Droms,\
    \ Lars Eggert, Jim Gettys, Olafur Gudmundsson,\n   Wassim Haddad, Joel M. Halpern,\
    \ David Harrington, Lee Howard, Ray\n   Hunter, Joel Jaeggli, Heather Kirksey,\
    \ Ted Lemon, Acee Lindem, Kerry\n   Lynn, Daniel Migault, Erik Nordmark, Michael\
    \ Richardson, Mattia\n   Rossi, Barbara Stark, Sander Steffann, Markus Stenberg,\
    \ Don Sturek,\n   Andrew Sullivan, Dave Taht, Dave Thaler, Michael Thomas, Mark\n\
    \   Townsley, JP Vasseur, Curtis Villamizar, Russ White, Dan Wing, and\n   James\
    \ Woodyatt for their comments and contributions within homenet WG\n   meetings\
    \ and on the WG mailing list.  An acknowledgment generally\n   means that a person's\
    \ text made it into the document or was helpful\n   in clarifying or reinforcing\
    \ an aspect of the document.  It does not\n   imply that each contributor agrees\
    \ with every point in the document.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Tim Chown (editor)\n   University of Southampton\n   Highfield\n\
    \   Southampton, Hampshire  SO17 1BJ\n   United Kingdom\n   EMail: tjc@ecs.soton.ac.uk\n\
    \   Jari Arkko\n   Ericsson\n   Jorvas  02420\n   Finland\n   EMail: jari.arkko@piuha.net\n\
    \   Anders Brandt\n   Sigma Designs\n   Emdrupvej 26A, 1\n   Copenhagen  DK-2100\n\
    \   Denmark\n   EMail: anders_brandt@sigmadesigns.com\n   Ole Troan\n   Cisco\
    \ Systems, Inc.\n   Philip Pedersensvei 1\n   Lysaker,  N-1325\n   Norway\n  \
    \ EMail: ot@cisco.com\n   Jason Weil\n   Time Warner Cable\n   13820 Sunrise Valley\
    \ Drive\n   Herndon, VA  20171\n   United States\n   EMail: jason.weil@twcable.com\n"
