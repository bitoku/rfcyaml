- contents:
  - '                   LDP Extensions for Multi-Topology

    '
  title: __initial_text__
- contents:
  - "Abstract\n   Multi-Topology (MT) routing is supported in IP networks with the
    use\n   of MT-aware IGPs.  In order to provide MT routing within\n   Multiprotocol
    Label Switching (MPLS) Label Distribution Protocol\n   (LDP) networks, new extensions
    are required.\n   This document describes the LDP protocol extensions required
    to\n   support MT routing in an MPLS environment.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    5741.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7307.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (http://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n
    \  2. Terminology .....................................................4\n   3.
    Signaling Extensions ............................................5\n      3.1.
    Topology-Scoped Forwarding Equivalence Class (FEC) .........5\n      3.2. New
    Address Families: MT IP ................................5\n      3.3. LDP FEC
    Elements with MT IP AF .............................6\n      3.4. IGP MT-ID Mapping
    and Translation ..........................7\n      3.5. LDP MT Capability Advertisement
    ............................7\n           3.5.1. Protocol Extension ..................................7\n
    \          3.5.2. Procedures ..........................................9\n      3.6.
    Label Spaces ..............................................10\n      3.7. Reserved
    MT-ID Values .....................................10\n   4. MT Applicability on
    FEC-Based Features .........................10\n      4.1. Typed Wildcard FEC
    Element ................................10\n      4.2. Signaling LDP Label Advertisement
    Completion ..............11\n      4.3. LSP Ping ..................................................11\n
    \          4.3.1. New FEC Sub-Types ..................................11\n           4.3.2.
    MT LDP IPv4 FEC Sub-TLV ............................12\n           4.3.3. MT LDP
    IPv6 FEC Sub-TLV ............................13\n           4.3.4. Operation Considerations
    ...........................13\n   5. Error Handling .................................................14\n
    \     5.1. MT Error Notification for Invalid Topology ID .............14\n   6.
    Backwards Compatibility ........................................14\n   7. MPLS
    Forwarding in MT ..........................................14\n   8. Security
    Considerations ........................................14\n   9. IANA Considerations
    ............................................15\n   10. Manageability Considerations
    ..................................17\n      10.1. Control of Function and Policy
    ...........................17\n      10.2. Information and Data Models ..............................17\n
    \     10.3. Liveness Detection and Monitoring ........................17\n      10.4.
    Verify Correct Operations ................................17\n      10.5. Requirements
    on Other Protocols ..........................17\n      10.6. Impact on Network
    Operations .............................17\n   11. Contributors ..................................................18\n
    \  12. Acknowledgements ..............................................19\n   13.
    References ....................................................19\n      13.1.
    Normative References .....................................19\n      13.2. Informative
    References ...................................19\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   Multi-Topology (MT) routing is supported in IP networks
    with the use\n   of MT-aware IGPs.  It would be advantageous for Communications\n
    \  Service Providers (CSPs) to support an MPLS Multi-Topology (MPLS-MT)\n   environment.
    \ The benefits of MPLS-MT technology are features for\n   various network scenarios,
    including:\n   o  A CSP may want to assign varying Quality of Service (QoS) profiles\n
    \     to different traffic classes, based on a specific topology in an\n      MT
    routing network;\n   o  Separate routing and MPLS domains may be used to isolate
    multicast\n      and IPv6 islands within the backbone network;\n   o  Specific
    IP address space could be routed across an MT based on\n      security or operational
    isolation requirements;\n   o  Low-latency links could be assigned to an MT for
    delay-sensitive\n      traffic;\n   o  Management traffic may be divided from
    customer traffic using\n      different MTs utilizing separate links, thus ensuring
    that\n      management traffic is separated from customer traffic.\n   This document
    describes the Label Distribution Protocol (LDP)\n   procedures and protocol extensions
    required to support MT routing in\n   an MPLS environment.\n   This document defines
    two new Forwarding Equivalence Class (FEC)\n   types for use in Label Switched
    Path (LSP) ping [RFC4379].\n"
  title: 1.  Introduction
- contents:
  - "2.  Terminology\n   This document uses MPLS terminology defined in [RFC5036].
    \ Additional\n   terms are defined below:\n   o  MT-ID: A 16-bit value used to
    represent the Multi-Topology ID.\n   o  Default MT Topology: A topology that is
    built using the MT-ID\n      default value of 0.\n   o  MT Topology: A topology
    that is built using the corresponding MT-\n      ID.\n   The key words \"MUST\",
    \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD
    NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this\n   document are to
    be interpreted as described in RFC 2119 [RFC2119].\n"
  title: 2.  Terminology
- contents:
  - '3.  Signaling Extensions

    '
  - contents:
    - "3.1.  Topology-Scoped Forwarding Equivalence Class (FEC)\n   LDP assigns and
      binds a label to a FEC, where a FEC is a list of one\n   or more FEC elements.
      \ To set up LSPs for unicast IP routing paths,\n   LDP assigns local labels
      for IP prefixes and advertises these labels\n   to its peers so that an LSP
      is set up along the routing path.  To set\n   up MT LSPs for IP prefixes under
      a given topology scope, the LDP\n   prefix-related FEC element must be extended
      to include topology\n   information.  This implies that the MT-ID becomes an
      attribute of the\n   prefix-related FEC element, and all FEC-Label binding operations
      are\n   performed under the context of a given topology (MT-ID).\n   The following
      section (\"New Address Families: MT IP\") defines the\n   extension required
      to bind the prefix-related FEC to a topology.\n"
    title: 3.1.  Topology-Scoped Forwarding Equivalence Class (FEC)
  - contents:
    - "3.2.  New Address Families: MT IP\n   Section 2.1 of the LDP base specification
      [RFC5036] defines the\n   Address Prefix FEC element.  The Prefix encoding is
      defined for a\n   given \"Address Family\" (AF), and has length (in bits) specified
      by\n   the \"PreLen\" field.\n   To extend IP address families for MT, two new
      Address Families named\n   \"MT IP\" and \"MT IPv6\" are used to specify IPv4
      and IPv6 prefixes\n   within a topology scope.\n   The format of data associated
      with these new Address Families is\n   described below:\n    0                   1
      \                  2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4
      5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |                     IPv4 Address                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |          Reserved             |        MT-ID                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \              Figure 1: MT IP Address Family Format\n    0                   1
      \                  2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4
      5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |                     IPv6 Address                              |\n   |                                                               |\n
      \  |                                                               |\n   |                                                               |\n
      \  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |          Reserved
      \            |        MT-ID                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \             Figure 2: MT IPv6 Address Family Format\n   Where \"IP Address\"
      is an IPv4 and IPv6 address/prefix for \"MT IP\" and\n   \"MT IPv6\" AF respectively,
      and the field \"MT-ID\" corresponds to the\n   16-bit Topology ID for a given
      address.\n   The definition and usage for the remaining fields in the FEC elements\n
      \  are as defined for IP/IPv6 AF.  The value of MT-ID 0 corresponds to\n   the
      default topology and MUST be ignored on receipt so as to not\n   cause any conflict/confusion
      with existing non-MT procedures.\n   The defined FEC elements with \"MT IP\"
      Address Family can be used in\n   any LDP message and procedures that currently
      specify and allow the\n   use of FEC elements with IP/IPv6 Address Family.\n"
    title: '3.2.  New Address Families: MT IP'
  - contents:
    - "3.3.  LDP FEC Elements with MT IP AF\n   The following section specifies the
      format extensions of the existing\n   LDP FEC elements to support MT.  The \"Address
      Family\" of these FEC\n   elements will be set to \"MT IP\" or \"MT IPv6\".\n
      \  The MT Prefix FEC element encoding is as follows:\n    0                   1
      \                  2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4
      5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |  Prefix (2)   | Address Family (MT IP/MT IPv6)|     PreLen    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |                     Prefix                                    |\n   ~                                                               ~\n
      \  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |          Reserved
      \            |        MT-ID                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \              Figure 3: MT Prefix FEC Element Format\n   The MT Typed Wildcard
      FEC element encoding is as follows:\n    0                   1                   2
      \                  3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4
      5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |Typed Wcard (5)|    FEC Type   |   Len = 6     |  AF = MT IP ..|\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |... or MT IPv6 |         MT-ID                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \             Figure 4: MT Typed Wildcard FEC Element\n   The above format can
      be used for any LDP FEC element that allows use\n   of the IP/IPv6 Address Family.
      \ In the scope of this document, the\n   allowed \"FEC Type\" in a MT Typed
      Wildcard FEC element is the Prefix\n   FEC element.\n"
    title: 3.3.  LDP FEC Elements with MT IP AF
  - contents:
    - "3.4.  IGP MT-ID Mapping and Translation\n   The non-reserved non-special IGP
      MT-ID values can be used and carried\n   in LDP without the need for translation.
      \ However, there is a need\n   for translating reserved or special IGP MT-ID
      values to corresponding\n   LDP MT-IDs.  The assigned, unassigned, and special
      LDP MT-ID values\n   have been assigned as described in Section 9 (\"IANA Considerations\").\n
      \  How future LDP MT-ID values are allocated is outside the scope of\n   this
      document.  Instead, a separate document will be created to\n   detail the allocation
      policy and process for requesting new MT-ID\n   values.\n"
    title: 3.4.  IGP MT-ID Mapping and Translation
  - contents:
    - '3.5.  LDP MT Capability Advertisement

      '
    - contents:
      - "3.5.1.  Protocol Extension\n   We specify a new LDP capability, named \"Multi-Topology
        (MT)\", which\n   is defined in accordance with the LDP capability guidelines\n
        \  [RFC5561].  The LDP \"MT\" capability can be advertised by an LDP\n   speaker
        to its peers either during the LDP session initialization or\n   after the
        LDP session is set up.  The advertisement is to announce\n   the capability
        of the Label Switching Router (LSR) to support MT for\n   the given IP address
        family.  An LDP speaker MUST NOT send messages\n   containing MT FEC elements
        unless the peer has said it can handle it.\n   The MT capability is specified
        using the Multi-Topology Capability\n   TLV.  The Multi-Topology Capability
        TLV format is in accordance with\n   the LDP capability guidelines as defined
        in [RFC5561].  To be able to\n   specify IP address family, the capability-specific
        data (i.e., the\n   \"Capability Data\" field of Capability TLV) is populated
        using the\n   \"Typed Wildcard FEC element\" as defined in [RFC5918].\n   The
        format of the Multi-Topology Capability TLV is as follows:\n    0                   1
        \                  2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3
        4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \  |U|F| Multi-Topology Cap.(IANA) |            Length             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \  |S| Reserved    |                                               |\n   +-+-+-+-+-+-+-+-+
        \                                              |\n   ~                Typed
        Wildcard FEC element(s)                  ~\n   |                                                               |\n
        \  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n             Figure
        5: Multi-Topology Capability TLV Format\n   Where:\n   o  U-bit: MUST be 1
        so that the TLV will be silently ignored by a\n      recipient if it is unknown,
        according to the rules of [RFC5036].\n   o  F-bit: MUST be 0 as per Section
        3 (\"Specifying Capabilities in LDP\n      Messages\") of LDP Capabilities
        [RFC5561].\n   o  Multi-Topology Capability: Capability TLV type (IANA assigned)\n
        \  o  S-bit: MUST be 1 if used in LDP \"Initialization\" message.  MAY be\n
        \     set to 0 or 1 in dynamic \"Capability\" message to advertise or\n      withdraw
        the capability, respectively.\n   o  Typed Wildcard FEC element(s): One or
        more elements specified as\n      the \"Capability data\".\n   o  Length:
        length of Value field, starting from the S-bit, in octets.\n   o  The encoding
        of the Typed Wildcard FEC element, as defined in\n      [RFC5918], is defined
        in Section 4.1 (\"Typed Wildcard FEC\n      element\") of this document.  The
        MT-ID field of the MT Typed\n      Wildcard FEC element MUST be set to \"Wildcard
        Topology\" when it is\n      specified in the MT Capability TLV.\n"
      title: 3.5.1.  Protocol Extension
    - contents:
      - "3.5.2.  Procedures\n   To announce its MT capability for an IP address family,
        LDP FEC type,\n   and Multi-Topology, an LDP speaker sends an \"MT Capability\"
        including\n   the exact Typed Wildcard FEC element with the corresponding\n
        \  \"AddressFamily\" field (i.e., set to \"MT IP\" for IPv4 and set to \"MT\n
        \  IPv6\" for IPv6 address family), corresponding \"FEC Type\" field (i.e.,\n
        \  set to \"Prefix\"), and corresponding \"MT-ID\".  To announce its MT\n
        \  capability for both the IPv4 and IPv6 address family, or for multiple\n
        \  FEC types, or for multiple Multi-Topologies, an LDP speaker sends an\n
        \  \"MT Capability\" with one or more MT Typed FEC elements in it.\n   o  The
        capability for supporting multi-topology in LDP can be\n      advertised during
        LDP session initialization stage by including\n      the LDP MT capability
        TLV in LDP Initialization message.  After an\n      LDP session is established,
        the MT capability can also be\n      advertised or withdrawn using the Capability
        message (only if the\n      \"Dynamic Capability Announcement\" capability
        [RFC5561] has already\n      been successfully negotiated).\n   o  If an LSR
        has not advertised MT capability, its peer MUST NOT send\n      to this LSR
        any LDP messages with FEC elements that include an MT\n      identifier.\n
        \  o  If an LSR is changed from non-MT capable to MT capable, it sets\n      the
        S-bit in the MT capability TLV and advertises via the\n      Capability message
        (if it supports Dynamic Capability\n      Announcement).  The existing LSP
        is treated as an LSP for default\n      MT (ID 0).\n   o  If an LSR is changed
        from LDP-MT capable to non-MT capable, it\n      initiates withdrawal of all
        label mapping for existing LSPs of all\n      non-default MTs.  It also cleans
        up all the LSPs of all non-\n      default MTs locally.  Then, it clears the
        S-bit in the MT\n      capability TLV and advertises via the Capability message
        (if it\n      supports Dynamic Capability Announcement).  When an LSR knows
        the\n      peer node is changed from LDP-MT capable to non-MT capable, it\n
        \     cleans up all the LSPs of all non-default MTs locally and\n      initiates
        withdrawal of all label mapping for existing LSPs of all\n      non-default
        MTs.  Each side of the node sends a label release to\n      its peer once
        it receives the label release messages even though\n      each side has already
        cleaned up all the LSPs locally.\n   o  If an LSR does not support \"Dynamic
        Capability Announcement\", it\n      MUST reset the session with its peer
        whenever the LSR changes its\n      local capability with regards to supporting
        LDP MT.\n   o  If an LSR is changed from IGP-MT capable to non-MT capable,
        it may\n      wait until the routes update to withdraw the FEC and release
        the\n      label mapping for existing LSPs of a specific MT.\n"
      title: 3.5.2.  Procedures
    title: 3.5.  LDP MT Capability Advertisement
  - contents:
    - "3.6.  Label Spaces\n   The use of multiple topologies for LDP does not require
      different\n   label spaces for each topology.  An LSR can use the same label
      space\n   for all MT FECs as for the default topology.\n   Similarly, signaling
      for different topologies can and should be done\n   within a single LDP session.\n"
    title: 3.6.  Label Spaces
  - contents:
    - "3.7.  Reserved MT-ID Values\n   Certain MT topologies are assigned to serve
      predetermined purposes.\n   In Section 9 (\"IANA Considerations\"), this document
      defines a new\n   IANA registry \"MPLS Multi-Topology Identifiers\" to keep
      LDP MT-ID\n   reserved values.\n   If an LSR receives a FEC element with an
      \"MT-ID\" value that is\n   \"Unassigned\" for future use (and not IANA allocated
      yet), the LSR\n   MUST abort the processing of the FEC element and SHOULD send
      a\n   notification message with status code \"Invalid Topology ID\" to the\n
      \  sender.\n"
    title: 3.7.  Reserved MT-ID Values
  title: 3.  Signaling Extensions
- contents:
  - '4.  MT Applicability on FEC-Based Features

    '
  - contents:
    - "4.1.  Typed Wildcard FEC Element\n   [RFC5918] extends base LDP and defines
      the Typed Wildcard FEC element\n   framework.  The Typed Wildcard FEC element
      can be used in any LDP\n   message to specify a wildcard operation/action for
      a given type of\n   FEC.\n   The MT extensions defined in this document do not
      require any\n   extension to procedures for the Typed Wildcard FEC element,
      and these\n   procedures apply as is to MT wildcarding.  The MT extensions,
      though,\n   allow use of \"MT IP\" or \"MT IPv6\" in the Address Family field
      of the\n   Typed Wildcard FEC element in order to use wildcard operations in
      the\n   context of a given topology.  The use of MT-scoped address family\n
      \  also allows us to specify MT-ID in these operations.\n   The defined format
      in Section 4.1 (\"Typed Wildcard FEC element\")\n   allows an LSR to perform
      wildcard FEC operations under the scope of a\n   topology.  If an LSR wishes
      to perform a wildcard operation that\n   applies to all topologies, it can use
      a \"Wildcard Topology\" MT-ID.\n   For example, upon local de-configuration
      of a topology \"x\", an LSR\n   may send a typed wildcard Label Withdraw message
      with MT-ID \"x\" to\n   withdraw all its labels from the peer that advertised
      under the scope\n   of topology \"x\".  Additionally, upon a global configuration
      change,\n   an LSR may send a typed wildcard Label Withdraw message with the\n
      \  MT-ID set to \"Wildcard Topology\" to withdraw all its labels under all\n
      \  topologies from the peer.\n"
    title: 4.1.  Typed Wildcard FEC Element
  - contents:
    - "4.2.  Signaling LDP Label Advertisement Completion\n   [RFC5919] specifies
      extensions and procedures for an LDP speaker to\n   signal its convergence for
      a given FEC type towards a peer.  The\n   procedures defined in [RFC5919] apply
      as they are to an MT FEC\n   element.  This allows an LDP speaker to signal
      its IP convergence\n   using Typed Wildcard FEC element, and its MT IP convergence
      per\n   topology using a MT Typed Wildcard FEC element.\n"
    title: 4.2.  Signaling LDP Label Advertisement Completion
  - contents:
    - "4.3.  LSP Ping\n   [RFC4379] defines procedures to detect data-plane failures
      in MPLS\n   LSPs via LSP ping.  That specification defines a \"Target FEC Stack\"\n
      \  TLV that describes the FEC stack being tested.  This TLV is sent in\n   an
      MPLS Echo Request message towards the LSP's egress LSR and is\n   forwarded
      along the same data path as other packets belonging to the\n   FEC.\n   \"Target
      FEC Stack\" TLV contains one or more sub-TLVs pertaining to\n   different FEC
      types.  Section 3.2 of [RFC4379] defines the Sub-Types\n   and format of the
      FEC.  To support LSP ping for MT LDP LSPs, this\n   document defines the following
      extensions to [RFC4379].\n"
    - contents:
      - "4.3.1.  New FEC Sub-Types\n   We define two new FEC types for LSP ping:\n
        \  o  MT LDP IPv4 FEC\n   o  MT LDP IPv6 FEC\n   We also define the following
        new sub-types for sub-TLVs to specify\n   these FECs in the \"Target FEC Stack\"
        TLV of [RFC4379]:\n         Sub-Type       Length            Value Field\n
        \        --------       ------            -----------------\n               31
        \           8            MT LDP IPv4 prefix\n               32           20
        \           MT LDP IPv6 prefix\n                   Figure 6: New Sub-Types
        for Sub-TLVs\n   The rules and procedures of using these sub-TLVs in an MPLS
        echo\n   request message are the same as defined for LDP IPv4/IPv6 FEC sub-TLV\n
        \  types in [RFC4379].\n"
      title: 4.3.1.  New FEC Sub-Types
    - contents:
      - "4.3.2.  MT LDP IPv4 FEC Sub-TLV\n   The format of the \"MT LDP IPv4 FEC\"
        sub-TLV to be used in a \"Target\n   FEC Stack\" [RFC4379] is:\n    0                   1
        \                  2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3
        4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \  |  Type = 31 (MT LDP IPv4 FEC)  |          Length = 8           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \  |                          IPv4 prefix                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \  | Prefix Length |      MBZ      |       MT-ID                   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \                Figure 7: MT LDP IPv4 FEC Sub-TLV\n   The format of this
        sub-TLV is similar to the LDP IPv4 FEC sub-TLV as\n   defined in [RFC4379].
        \ In addition to \"IPv4 prefix\" and \"Prefix\n   Length\" fields, this new
        sub-TLV also specifies the MT-ID (Multi-\n   Topology ID).  The Length for
        this sub-TLV is 5.\n   The term \"Must Be Zero\" (MBZ) is used in object descriptions
        for\n   reserved fields.  These fields MUST be set to zero when sent and\n
        \  ignored on receipt.\n"
      title: 4.3.2.  MT LDP IPv4 FEC Sub-TLV
    - contents:
      - "4.3.3.  MT LDP IPv6 FEC Sub-TLV\n   The format of the \"MT LDP IPv6 FEC\"
        sub-TLV to be used in a \"Target\n   FEC Stack\" [RFC4379] is:\n    0                   1
        \                  2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3
        4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \  |  Type = 32 (MT LDP IPv6 FEC)  |          Length = 20          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \  |                                                               |\n   |
        \                         IPv6 prefix                          |\n   |                                                               |\n
        \  |                                                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \  | Prefix Length |     MBZ       |       MT-ID                   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
        \                Figure 8: MT LDP IPv6 FEC Sub-TLV\n   The format of this
        sub-TLV is similar to the LDP IPv6 FEC sub-TLV as\n   defined in [RFC4379].
        \ In addition to the \"IPv6 prefix\" and \"Prefix\n   Length\" fields, this
        new sub-TLV also specifies the MT-ID (Multi-\n   Topology ID).  The Length
        for this sub-TLV is 17.\n"
      title: 4.3.3.  MT LDP IPv6 FEC Sub-TLV
    - contents:
      - "4.3.4.  Operation Considerations\n   To detect data-plane failures using
        LSP ping for a specific topology,\n   the router will initiate an LSP ping
        request with the target FEC\n   stack TLV containing the LDP MT IP Prefix
        Sub-TLV in the Echo Request\n   packet.  The Echo Request packet is sent with
        the label bound to the\n   IP Prefix in the topology.  Once the Echo Request
        packet reaches the\n   target router, it will process the packet and perform
        checks for the\n   LDP MT IP Prefix sub-TLV present in the Target FEC Stack
        as described\n   in [RFC4379] and respond according to the processing rules
        in\n   [RFC4379].  For the case that the LSP ping with return path is not\n
        \  specified, the reply packet must go through the default topology\n   instead
        of the topology where the Echo Request goes through.\n   It should be noted
        that the existing MIB modules for an MPLS LSR\n   [RFC3813] and MPLS LDP managed
        objects [RFC3815] do not provide the\n   necessary information to support
        the extensions in this document.\n   For example, the absence of the MT-ID
        as an index into the MIB\n   modules means that there is no way to disambiguate
        different topology\n   instances.\n"
      title: 4.3.4.  Operation Considerations
    title: 4.3.  LSP Ping
  title: 4.  MT Applicability on FEC-Based Features
- contents:
  - "5.  Error Handling\n   The extensions defined in this document utilize the existing
    LDP\n   error handling defined in [RFC5036].  If an LSR receives an error\n   notification
    from a peer for a session, it terminates the LDP session\n   by closing the TCP
    transport connection for the session and\n   discarding all multi-topology label
    mappings learned via the session.\n"
  - contents:
    - "5.1.  MT Error Notification for Invalid Topology ID\n   An LSR should respond
      with an \"Invalid Topology ID\" status code in\n   the LDP Notification message
      when it receives an LDP message with a\n   FEC element specifying an MT-ID that
      is not locally known or not\n   supported.  The LSR MUST also discard the entire
      message before\n   sending the Notification message.\n"
    title: 5.1.  MT Error Notification for Invalid Topology ID
  title: 5.  Error Handling
- contents:
  - "6.  Backwards Compatibility\n   The MPLS-MT solution is backwards compatible
    with existing LDP\n   enhancements defined in [RFC5036], including message authenticity,\n
    \  integrity of message, and topology loop detection.\n   The legacy node that
    does not support MT should not receive any\n   MT-related LDP messages.  In case
    bad things happen, according to\n   [RFC5036], processing of such messages should
    be aborted.\n"
  title: 6.  Backwards Compatibility
- contents:
  - "7.  MPLS Forwarding in MT\n   Although forwarding is out of the scope of this
    document, we include\n   some forwarding consideration for informational purposes
    here.\n   The specified signaling mechanisms allow all the topologies to share\n
    \  the platform-specific label space.  This feature allows the existing\n   data-plane
    techniques to be used.  Also, there is no way for the data\n   plane to associate
    a received packet with any one topology, meaning\n   that topology-specific label
    spaces cannot be used.\n"
  title: 7.  MPLS Forwarding in MT
- contents:
  - "8.  Security Considerations\n   The use of MT over existing MPLS solutions does
    not offer any\n   specific security benefit.\n   General LDP communication security
    threats and how these may be\n   mitigated are described in [RFC5036]; these threats
    include:\n   o  spoofing\n   o  privacy\n   o  denial of service\n   For further
    discussion regarding possible LDP communication threats\n   and mitigation techniques,
    see [RFC5920].\n"
  title: 8.  Security Considerations
- contents:
  - "9.  IANA Considerations\n   This document introduces the following new protocol
    elements, which\n   have been assigned by IANA:\n   o  New LDP Capability TLV:
    \"Multi-Topology Capability\" TLV (0x050C)\n      from the LDP Parameters registry
    \"TLV Type Name Space\".\n   o  New Status Code: \"Invalid Topology ID\" (0x00000031)
    from the LDP\n      Parameters registry \"Status Code Name Space\").\n        Registry:\n
    \       Range/Value          Description\n        --------------       ------------------------------\n
    \       0x00000031           Invalid Topology ID\n      Figure 9: New Code Point
    for LDP Multi-Topology Extensions\n   o  New address families under the IANA registry
    \"Address Family\n      Numbers\":\n         Number       Description\n         --------
    \    ------------------------------------\n         29           MT IP: Multi-Topology
    IP version 4\n         30           MT IPv6: Multi-Topology IP version 6\n                Figure
    10: Address Family Numbers\n   o  New registry \"MPLS Multi-Topology Identifiers\".\n
    \     This is a registry of the \"Multiprotocol Label Switching\n      Architecture
    (MPLS)\" category.\n      The initial registrations and allocation policies for
    this\n      registry are:\n      Range/Value  Purpose                                 Reference\n
    \     -----------  -------------------------------------  ----------\n      0
    \           Default/standard topology               RFC 7307\n      1            IPv4
    in-band management                 RFC 7307\n      2            IPv6 routing topology
    \                  RFC 7307\n      3            IPv4 multicast topology                 RFC
    7307\n      4            IPv6 multicast topology                 RFC 7307\n      5
    \           IPv6 in-band management                 RFC 7307\n      6-3995       Unassigned
    for future IGP topologies    RFC 7307\n                   Assigned by Standards
    Action            RFC 7307\n      3996-4095    Experimental                            RFC
    7307\n      4096-65534   Unassigned for MPLS topologies          RFC 7307\n                   Assigned
    by Standards Action\n      65535        Wildcard Topology                       RFC
    7307\n          Figure 11: MPLS Multi-Topology Identifier Registry\n   o  New
    Sub-TLV Types for LSP ping: The following new sub-type values\n      under TLV
    type 1 (Target FEC Stack) have been registered from the\n      \"Sub-TLVs for
    TLV Types 1, 16, and 21\" sub-registry within the\n      \"Multi-Protocol Label
    Switching (MPLS) Label Switched Paths (LSPs)\n      Ping Parameters\" registry.\n
    \              Sub-Type      Value Field\n               --------      ------------------\n
    \              31            MT LDP IPv4 prefix\n               32            MT
    LDP IPv6 prefix\n            Figure 12: New Sub-TLV Types for LSP Ping\n   As
    highlighted at the end of Section 3.4 (\"IGP MT-ID Mapping and\n   Translation\"),
    a new document will be created to detail the policy\n   and process for allocating
    new MT-ID values.\n"
  title: 9.  IANA Considerations
- contents:
  - '10.  Manageability Considerations

    '
  - contents:
    - "10.1.  Control of Function and Policy\n   There are capabilities that should
      be configurable to enable good\n   manageability.  One such example is to allow
      that the LDP Multi-\n   Topology capability be enabled or disabled.  It is assumed
      that the\n   mapping of the LDP MT-ID and IGP MT-ID is manually configured on\n
      \  every router by default.  If an automatic mapping between IGP MT-IDs\n   and
      LDP MT-IDs is needed, there must be explicit configuration to do\n   so.\n"
    title: 10.1.  Control of Function and Policy
  - contents:
    - "10.2.  Information and Data Models\n   Any extensions that may be required
      for existing MIBs are beyond the\n   scope of this document.\n"
    title: 10.2.  Information and Data Models
  - contents:
    - "10.3.  Liveness Detection and Monitoring\n   Mechanisms defined in this document
      do not imply any new liveness\n   detection and monitoring requirements.\n"
    title: 10.3.  Liveness Detection and Monitoring
  - contents:
    - "10.4.  Verify Correct Operations\n   In order to debug an LDP-MT-enabled network,
      it may be necessary to\n   associate between the LDP label advertisement and
      the IGP routing\n   advertisement.  In this case, the user MUST understand the
      mapping\n   mechanism to convert the IGP MT-ID to the LDP MT-ID.  The method
      and\n   type of mapping mechanism is out of the scope of this document.\n"
    title: 10.4.  Verify Correct Operations
  - contents:
    - "10.5.  Requirements on Other Protocols\n   If the LDP MT-ID has an implicit
      dependency on IGP MT-ID, then the\n   corresponding IGP MT features will need
      to be supported.\n"
    title: 10.5.  Requirements on Other Protocols
  - contents:
    - "10.6.  Impact on Network Operations\n   Mechanisms defined in this document
      do not have any impact on network\n   operations.\n"
    title: 10.6.  Impact on Network Operations
  title: 10.  Manageability Considerations
- contents:
  - "11.  Contributors\n   Ning So\n   Tata Communications\n   2613 Fairbourne Cir.\n
    \  Plano, TX  75082\n   USA\n   EMail: ning.so@tatacommunications.com\n   Raveendra
    Torvi\n   Juniper Networks\n   10 Technology Park Drive\n   Westford, MA  01886-3140\n
    \  US\n   EMail: rtorvi@juniper.net\n   Huaimo Chen\n   Huawei Technology\n   125
    Nagog Technology Park\n   Acton, MA  01719\n   US\n   Emily Chen\n   2717 Seville
    Blvd, Apt. 1205\n   Clearwater, FL 33764\n   US\n   EMail: emily.chen220@gmail.com\n
    \  Chen Li\n   China Mobile\n   53A, Xibianmennei Ave.\n   Xunwu District, Beijing
    \ 01719\n   China\n   EMail: lichenyj@chinamobile.com\n   Lu Huang\n   China Mobile\n
    \  53A, Xibianmennei Ave.\n   Xunwu District, Beijing  01719\n   China\n"
  title: 11.  Contributors
- contents:
  - "12.  Acknowledgements\n   The authors would like to thank Dan Tappan, Nabil Bitar,
    Huang Xin,\n   Eric Rosen, IJsbrand Wijnands, Dimitri Papadimitriou, Yiqun Chai,\n
    \  Pranjal Dutta, George Swallow, Curtis Villamizar, Adrian Farrel, Alia\n   Atlas,
    and Loa Anderson for their valuable comments on this document.\n"
  title: 12.  Acknowledgements
- contents:
  - '13.  References

    '
  - contents:
    - "13.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use
      in RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March
      1997.\n   [RFC4379]  Kompella, K. and G. Swallow, \"Detecting Multi-Protocol\n
      \             Label Switched (MPLS) Data Plane Failures\", RFC 4379,\n              February
      2006.\n   [RFC5036]  Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,\n
      \             \"LDP Specification\", RFC 5036, October 2007.\n   [RFC5561]  Thomas,
      B., Raza, K., Aggarwal, S., Aggarwal, R., and JL.\n              Le Roux, \"LDP
      Capabilities\", RFC 5561, July 2009.\n   [RFC5918]  Asati, R., Minei, I., and
      B. Thomas, \"Label Distribution\n              Protocol (LDP) 'Typed Wildcard'
      Forward Equivalence Class\n              (FEC)\", RFC 5918, August 2010.\n   [RFC5919]
      \ Asati, R., Mohapatra, P., Chen, E., and B. Thomas,\n              \"Signaling
      LDP Label Advertisement Completion\", RFC 5919,\n              August 2010.\n"
    title: 13.1.  Normative References
  - contents:
    - "13.2.  Informative References\n   [RFC5920]  Fang, L., Ed., \"Security Framework
      for MPLS and GMPLS\n              Networks\", RFC 5920, July 2010.\n   [RFC3813]
      \ Srinivasan, C., Viswanathan, A., and T. Nadeau,\n              \"Multiprotocol
      Label Switching (MPLS) Label Switching\n              Router (LSR) Management
      Information Base (MIB)\", RFC 3813,\n              June 2004.  Srinivasan, C.,
      Viswanathan, A., and T.\n              Nadeau,\n   [RFC3815]  Cucchiara, J.,
      Sjostrand, H., and J. Luciani, \"Definitions\n              of Managed Objects
      for the Multiprotocol Label Switching\n              (MPLS), Label Distribution
      Protocol (LDP)\", RFC 3815, June\n              2004.\n"
    title: 13.2.  Informative References
  title: 13.  References
- contents:
  - "Authors' Addresses\n   Quintin Zhao\n   Huawei Technology\n   125 Nagog Technology
    Park\n   Acton, MA  01719\n   US\n   EMail: quintin.zhao@huawei.com\n   Kamran
    Raza\n   Cisco Systems\n   2000 Innovation Drive\n   Kanata, ON K2K-3E8\n   Canada\n
    \  EMail: skraza@cisco.com\n   Chao Zhou\n   Cisco Systems\n   300 Beaver Brook
    Road\n   Boxborough, MA  01719\n   US\n   EMail: czhou@cisco.com\n   Luyuan Fang\n
    \  Microsoft\n   5600 148th Ave NE\n   Redmond, WA  98052\n   US\n   EMail: lufang@microsoft.com\n
    \  Lianyuan Li\n   China Mobile\n   53A, Xibianmennei Ave.\n   Xunwu District,
    Beijing  01719\n   China\n   EMail: lilianyuan@chinamobile.com\n   Daniel King\n
    \  Old Dog Consulting\n   EMail: daniel@olddog.co.uk\n"
  title: Authors' Addresses
