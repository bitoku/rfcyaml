A User TELNET Description of an Initial Implementation PREFACE
The User TELNET described in this document has been implemented within UCSB's Online System by Mark Krilanovich and makes teletype  compatible time sharing systems in the Net accessible to Online System users.
This document describes a program whose function is to make an Online System terminal  appear  to any teletype compatible, time sharing system in the Network  as if it were directly connected to that system .
By invoking this program from his terminal, an OLS user can effectively dial up a system at another site and use it as if he were a local user of that system.
The program performs the following major functions: 1) it resolves keyboard and display device incompatibilities 2) performs character set transformations, and 3) makes its presence and that of the Network transparent to the user.
The program which performs these functions is called a  User TELNET .
It operates in conjunction with another program called a  Server TELNET  executing at the site whose system is being used.
A Server TELNET exists at each site whose system is accessible from the Net.
Similarly, a User TELNET must exist at a site before users at that site have access to remote systems.
User and Server TELNETs access the Net through their respective NCPs, and operate under a Network standard protocol which specifies the hand shaking procedure by which the two parties connect themselves to one another, as well as the format of data sent over a pair of Network connections established between them.
A User TELNET makes such protocol considerations transparent to its users.
The TELNET protocol is based upon the notion of a virtual teletype, employing a 7 bit ASCII character set.
The primary function of a User TELNET, then, is to provide the means by which its users can 'hit' all the keys on that virtual teletype.
If the user's keyboard happens in fact to actually be a teletype, then the mapping procedure is a very simple one.
However, in UCSB's case, where a user's input device is an OLS keyboard (a device very different from a teletype), the mapping is more complex.
The primary function of a Server TELNET is to map the keys on the virtual teletype into that set of keys
its  local users can push on  their  keyboards.
Again, if those keyboards are teletypes, the mapping done by the Server TELNET is straightforward.
In other cases, the task may be very complex.
A similar set of mappings transforms ouput generated by the remote system into a form displayable on the user's output device (in UCSB's case, this device is normally a storage scope).
Invoking TELNET This and succeeding sections describe a preliminary version of a User TELNET (hereafter referred to simply as TELNET) currently implemented within the Online System.
This initial implementation does not provide all of the services that a final version must provide, nor does it provide all the conveniences that the next version will offer.
It's a first pass which will be upgraded in the near future.
TELNET is accessible from NET, a subsystem (like MOLSF and COL) of OLS.
A user is by default prohibited from loading NET.
To have access to NET enabled fro his user number, a user need only contact the Computer Center.
Assuming the foregoing, Net can be loaded with the key sequence:
Once in NET, TELNET is invoked by going to Level II Real and hitting  LOG .
TELNET responds with a query for site number.
The user should enter in decimal the number of the site (as indicated in Figure 1) to which he desires access, followed by  RETURN .
TELNET will then query the user for the Server TELNET's socket number.
By convention, this number is normally 1, but in certain cases some other socket may be appropriate.
In any case, the user should enter the socket number in decimal and hit  RETURN .
The dialogue, then, goes like this:
(site number) site number RETURN
When the second RETURN is depressed, TELNET will attempt to contact the designated Server TELNET and establish a duplex connection for the user.
Once the connection has been established, TELNET will erase the tube and position the carriage to the upper left hand corner of the screen.
From this point on, the user is effectively connected to the remote system.
TELNET enters a mode in which keys pushed by the user are mapped into their virtual teletype equivalents and incoming text similarly transformed and displayed on the scope.
If the remote system to which the user is connected normally issues a login message, that message will be the first to be displayed.
In any case, the user should proceed by logging in to the remote system according to the conventions appropriate to that system.
4 Bolt, Beranek,  Cambridge, and Newman
5 Bolt, Beranek,  Cambridge, and Newman
The algorithm by which TELNET maps the OLS keyboard into the virtual teletype's character set, and by which it maps that same character set into the set of characters which can be displayed on the user's storage scope is defined in Figure 2.
A line of that figure reads as follows:
For line 11: The key labeled 'LF' (meaning 'Line Feed') on the virtual teletype, sometimes referred to as 'control J', is struck by pressing either  SUB ,  CASE J , or [1] on an OLS keyboard.
TELNET sends to the remote system an 8 bit character with the value X'0A'.
Whenever 'LF' is received from the foreign system, TELNET displays it by rolling the carriage down one line.
As indicated in the figure,  CASE  substitutes for the CNTRL key on a teletype.
Hence, for example, 'control C' is represented by the key pair 'CASE C'.
Note, however, that  CASE  and 'C' are hit in sequence, whereas on a teletype the CNTRL key is held down while 'C' is struck.
'CASE A' 'CASE Z' each have an equivalent on the upper keyboard, and the position of that key on the upper keyboard corresponds to that of its counterpart on the lower keyboard.
Hence, LS equivalent to CASE A.
Although TELNET provides the user with the means for transmitting both upper  and lower case alphabetics (hitting 'A' sends a lower  case 'A'; holding down  SHIFT  and hitting 'A' sends upper case 'A'), there is no provision in OLS for displaying lower case characters on the storage scope.
Hence, TELNET maps lower case alphabetics into upper case before displaying them.
The four virtual teltype keys 'ENQ', 'ACK', 'BEL', and 'NAK' are displayed by TELNET in a special manner.
Two lines are reserved for these characters at the top of the display area, and whenever TELNET receives such a character from the remote system, it displays it in its assigned position within the two line field.
TELNET always positions those four characters at the top of the display area, regardless of the user's current position on the scope, then returns to it.
A storage scope has both positive and negative attributes relative to a teletype.
Display is much quieter on a scope than on a teletype.
However, the noise made by the return of a teletype carriage is often a valuable cue to the user, frequently signifying that the previous line of input from the user has been accepted by the system.
Down arrow [2] Superscript 1 [3] Superscript 2 [4] Circle with Dot in
TELNET Character Set Superscript 1
All of the following keys send NULL: SET, CLR, cent sign,
Superscript 0 9 Superscript 2 '^A' is read 'Control A'.
Superscript 4 ^A is sent by hitting th keys 'CASE' and 'A' in turn.
Same for ^B, ^C, etc.
Superscript 5 Upper case 'A' is  sent by holding down the SHIFT key while 'A' is struck.
Same for upper case 'B', 'C', etc.
A storage scope is also a much faster display device than a teletype.
However, in some situations this apparent attribute can be troublesome.
In particular, when a system displays a whole series of lines of text without requiring input from the user, the display may be wrapped around from the bottom of the scope to the top, and begin overlaying itself before the user has had some time to read it all.
In such cases, the following strategy is sometimes useful (and will make sense once the next section   Section IV   has been read): hit  II  before the display begins to wrap around upon itself; the display will stop.
After the text has been read, erase the scope and hit  LOG  and display will resume.
If the user hits  ERASE  while in TELNET, that key will have its usual effect; it will have  no effect upon the remote system.
However, because of a quirk in the current implementation of TELNET,  ERASE  will have the one additional effect of causing the display of incoming text to be suspended until another key on the virtual teletype is struck.
The user is thus cautioned against erasing the scope while waiting for a response from the remote system.
However, the user can extricate himself from the situation described by following the  ERASE  with NUL on the virtual teletype.
Any time thereafter, the user may return to TELNET by hitting  II LOG  (on NET) once again, and resume operation on his remote system  exactly where he left off .
When  'II LOG'  is pressed this second time, instead of querying the user for site number as before, TELNET will notice that the user is already connected to a remote system and simply resume where  it  left off.
After he escapes from TELNET and before he returns to it, the user may engage himself in any other Online System activity short of logging out but including changing systems, while still retaining the option of subsequently returning to TELNET and resuming activity on the remote system to which he remains connected.
The user can exploit this property of TELNET to obtain hard copy of a selected portion of his dialogue with the remote system.
The user simply brings his system to the point at which a listing is thereby desired, escapes from TELNET by hitting  'TYPE SEL' 1,4 RETURN' , thereby selecting the line printer as a secondary output device, and then returns to TELNET by pressing  'II LOG' .
All subsequent communication with the remote system will be recorded for eventual output on the printer.
Logging off of OLS while escaped from TELNET causes the TELNET connection to be broken automatically by the system.
At any time while the user is in contact with TELNET, after the connection to the remote system has been established, the user may terminate that connection by hitting  'CON RETURN' .
TELNET will respond  'SOCKETS PURGED '.
\ subsequent call to TELNET (i.e., a subsequent instance of  '
II LOG' ) will illicit the original query for remote site number.
The user is then free to connect himself to another foreign system.
The user is cautioned that breaking Network connections as just described is not necessarily equivalent to logging out of the remote system.
Some Server TELNETs may, when they detect the breaking of connections, log the user off of their system; others may leave the user logged on.
The user should be aware of the conventions of the systems he uses and, where appropriate, log himself off before breaking connections.
DEL RETURN'  will also terminate a TELNET connection, but all other connections that may have been previously established using the operators of Level
I are closed as well.
While the user is in TELNET and attached to a remote system, TELNET monitors the user's Network connections.
n {OUTPUT} where 'n' is one of the values listed in Figures 3 5.
A CONNECT error may occur during TELNET's initial attempt to establish connections to the remote system; an INPUT error may occur when TELNET attempts to extract incoming data from the NET; and an OUTPUT error may occur as TELNET tries to insert outgoing data into the Net.
A previous invocation of TELNET left a local receive socket open; the  send socket is closed.
A previous invocation of TELNET aborted, and  '
I DEL RETURN'  failed to close the Network connections.
The remote site is probably dead.
All communication paths between UCSB and the specified remote site are in use.
The connection attempt was refused by the remote site.
The Operator has stopped or reset the NCP.
Either the specified remote site is not accepting input from the net, or there was a failure in the subnet.
The specified remote site has broken all existing connections to UCSB.
The remote site is known to be dead.
An interrupt was sent by the remote system.
Resume by hitting  LOG .
The Operator has stopped or reset the NCP.
An interrupt was sent by the remote system.
Resume by hitting  LOG .
Either the remote site has stopped accepting input from the Net or  there was a failure in the subnet.
The remote site has broken all existing connections to UCSB.
