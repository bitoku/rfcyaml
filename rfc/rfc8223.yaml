- title: __initial_text__
  contents:
  - '                     Application-Aware Targeted LDP

    '
- title: Abstract
  contents:
  - "Abstract\n   Recent Targeted Label Distribution Protocol (tLDP) applications,\
    \ such\n   as remote Loop-Free Alternates (LFAs) and BGP auto-discovered\n   pseudowires,\
    \ may automatically establish a tLDP session with any\n   Label Switching Router\
    \ (LSR) in a network.  The initiating LSR has\n   information about the targeted\
    \ applications to administratively\n   control initiation of the session.  However,\
    \ the responding LSR has\n   no such information to control acceptance of this\
    \ session.  This\n   document defines a mechanism to advertise and negotiate the\
    \ Targeted\n   Application Capability (TAC) during LDP session initialization.\
    \  As\n   the responding LSR becomes aware of targeted applications, it may\n\
    \   establish a limited number of tLDP sessions for certain applications.\n  \
    \ In addition, each targeted application is mapped to LDP Forwarding\n   Equivalence\
    \ Class (FEC) elements to advertise only necessary LDP FEC\n   label bindings\
    \ over the session.  This document updates RFC 7473 for\n   enabling advertisement\
    \ of LDP FEC label bindings over the session.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 7841.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   https://www.rfc-editor.org/info/rfc8223.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2017 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (https://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \      1.1. Conventions Used in This Document ..........................4\n  \
    \    1.2. Terminology ................................................4\n   2.\
    \ Targeted Application Capability .................................5\n      2.1.\
    \ Encoding ...................................................5\n      2.2. Procedures\
    \ .................................................5\n      2.3. LDP Message Procedures\
    \ .....................................8\n           2.3.1. Initialization Message\
    \ ..............................8\n           2.3.2. Capability Message ..................................8\n\
    \   3. Targeted Application FEC Advertisement Procedures ...............9\n  \
    \ 4. Interaction of Targeted Application Capabilities and State\n      Advertisement\
    \ Control Capabilities .............................10\n   5. Use Cases ......................................................12\n\
    \      5.1. Remote LFA Automatic Targeted Session .....................12\n  \
    \    5.2. FEC 129 Auto-discovery Targeted Session ...................13\n    \
    \  5.3. LDP over RSVP and Remote LFA Targeted Session .............13\n      5.4.\
    \ mLDP Node Protection Targeted Session .....................13\n   6. Security\
    \ Considerations ........................................14\n   7. IANA Considerations\
    \ ............................................14\n   8. References .....................................................15\n\
    \      8.1. Normative References ......................................15\n  \
    \    8.2. Informative References ....................................16\n   Acknowledgments\
    \ ...................................................17\n   Contributors ......................................................17\n\
    \   Authors' Addresses ................................................18\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   LDP uses the Extended Discovery mechanism to establish the\n\
    \   Targeted LDP (tLDP) adjacency and subsequent session, as described in\n  \
    \ [RFC5036].  A Label Switching Router (LSR) initiates Extended\n   Discovery\
    \ by sending a tLDP Hello to a specific address.  The remote\n   LSR decides to\
    \ either accept or ignore the tLDP Hello based on local\n   configuration only.\
    \  A tLDP application is an application that uses a\n   tLDP session to exchange\
    \ information such as FEC label bindings\n   (\"FEC\" stands for \"Forwarding\
    \ Equivalence Class\") with a peer LSR in\n   the network.  For an application\
    \ such as FEC 128 pseudowire, the\n   remote LSR is configured with the source\
    \ LSR address so that it can\n   use that information to accept or ignore a given\
    \ tLDP Hello.\n   However, applications such as remote Loop-Free Alternates (LFAs)\
    \ and\n   BGP auto-discovered pseudowires automatically initiate asymmetric\n\
    \   Extended Discovery to any LSR in a network based on local state only.\n  \
    \ With these applications, the remote LSR is not explicitly configured\n   with\
    \ the source LSR address.  So, the remote LSR either responds to\n   all tLDP\
    \ Hellos or ignores them.\n   In addition, since the session is initiated and\
    \ established after\n   adjacency formation, the responding LSR has no information\
    \ on\n   targeted applications available from which it can choose a session\n\
    \   with a targeted application that it is configured to support.  Also,\n   the\
    \ initiating LSR may employ a limit per application on locally\n   initiated automatic\
    \ tLDP sessions; however, the responding LSR has\n   no such information to employ\
    \ a similar limit on the incoming tLDP\n   sessions.  Further, the responding\
    \ LSR does not know whether the\n   source LSR is establishing a tLDP session\
    \ for configured\n   applications, automatic applications, or both.\n   This document\
    \ proposes and describes a solution to advertise the\n   Targeted Application\
    \ Capability (TAC), consisting of a list of\n   targeted applications, during\
    \ initialization of a tLDP session.  It\n   also defines a mechanism to enable\
    \ a new application and disable an\n   old application after session establishment.\
    \  This capability\n   advertisement provides the responding LSR with the necessary\n\
    \   information to control the acceptance of tLDP sessions\n   per application.\
    \  For instance, an LSR may accept all BGP\n   auto-discovered tLDP sessions as\
    \ described in [RFC6074] but may only\n   accept a limited number of remote LFA\
    \ tLDP sessions as described\n   in [RFC7490].\n   Also, the tLDP application\
    \ is mapped to LDP FEC element types to\n   advertise specific application FECs\
    \ only, avoiding the advertisement\n   of other unnecessary FECs over a tLDP session.\n"
- title: 1.1.  Conventions Used in This Document
  contents:
  - "1.1.  Conventions Used in This Document\n   The key words \"MUST\", \"MUST NOT\"\
    , \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"NOT RECOMMENDED\", \"MAY\", and\n   \"OPTIONAL\" in this document are to be\
    \ interpreted as described in\n   BCP 14 [RFC2119] [RFC8174] when, and only when,\
    \ they appear in all\n   capitals, as shown here.\n"
- title: 1.2.  Terminology
  contents:
  - "1.2.  Terminology\n   In addition to the terminology defined in [RFC7473], this\
    \ document\n   uses the following terms:\n      tLDP    : Targeted LDP\n     \
    \ TAC     : Targeted Application Capability\n      TAE     : Targeted Application\
    \ Element\n      TA-Id   : Targeted Application Identifier\n      SAC     : State\
    \ Advertisement Control\n      LSR     : Label Switching Router\n      mLDP  \
    \  : Multipoint LDP\n      PQ node : Remote LFA next hops\n      RSVP-TE : RSVP\
    \ Traffic Engineering\n      P2MP    : Point-to-Multipoint\n      PW      : Pseudowire\n\
    \      P2P-PW  : Point-to-Point Pseudowire\n      MP2MP   : Multipoint-to-Multipoint\n\
    \      HSMP LSP: Hub and Spoke Multipoint Label Switched Path\n      LSP     :\
    \ Label Switched Path\n      MP2P    : Multipoint-to-Point\n      MPT     : Merge\
    \ Point\n"
- title: 2.  Targeted Application Capability
  contents:
  - '2.  Targeted Application Capability

    '
- title: 2.1.  Encoding
  contents:
  - "2.1.  Encoding\n   An LSR MAY advertise that it is capable of negotiating a tLDP\n\
    \   application list over a tLDP session by using the capability\n   advertisement\
    \ as defined in [RFC5561] and encoded as follows:\n       0                  \
    \ 1                   2                   3\n       0 1 2 3 4 5 6 7 8 9 0 1 2\
    \ 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |U|F| TLV Code Point            |            Length             |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |S|\
    \ Reserved    |                                               |\n      +-+-+-+-+-+-+-+-+\
    \       Capability Data                         |\n      |                   \
    \                            +-+-+-+-+-+-+-+-+\n      |                      \
    \                         |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   Flag \"U\" MUST be set to 1 to indicate that this capability must be\n   silently\
    \ ignored if unknown.  The TAC's Capability Data field\n   contains the Targeted\
    \ Application Element (TAE) information, encoded\n   as follows:\n       0   \
    \                1                   2                   3\n       0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |           TA-Id               |E|       Reserved              |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      TA-Id:\
    \ A 16-bit Targeted Application Identifier value.\n      E: E-bit (Enable bit).\
    \  Indicates whether the sender is\n         advertising or withdrawing the TAE.\
    \  The E-bit value is used\n         as follows:\n         1 - The TAE is advertising\
    \ the targeted application.\n         0 - The TAE is withdrawing the targeted\
    \ application.\n"
- title: 2.2.  Procedures
  contents:
  - "2.2.  Procedures\n   At tLDP session establishment time, an LSR MAY include a\
    \ new\n   capability TLV, the TAC TLV, as an optional TLV in the LDP\n   Initialization\
    \ message.  The TAC TLV's Capability data MAY consist of\n   zero or more TAEs,\
    \ each pertaining to a unique TA-Id that an LSR\n   supports over the session.\
    \  If the receiver LSR receives the same\n   TA-Id in more than one TAE, it MUST\
    \ process the first element and\n   ignore the duplicate elements.  If the receiver\
    \ LSR receives an\n   unknown TA-Id in the TAE, it MUST silently ignore such a\
    \ TAE and\n   continue processing the rest of the TLV.\n   If the receiver LSR\
    \ does not receive the TAC TLV in the\n   Initialization message or it does not\
    \ understand the TAC TLV, the TAC\n   negotiation is considered unsuccessful and\
    \ the session establishment\n   proceeds as per [RFC5036].  On receipt of a valid\
    \ TAC TLV, an LSR\n   MUST generate its own TAC TLV with TAEs consisting of unique\
    \ TA-Ids\n   that it supports over the tLDP session.  If there is at least one\n\
    \   common TAE between the TAC TLV it has received and its own, the\n   session\
    \ MUST proceed to establishment as per [RFC5036].  If not, an\n   LSR MUST send\
    \ a 'Session Rejected/Targeted Application Capability\n   Mismatch' Notification\
    \ message to the peer and close the session.\n   The initiating LSR SHOULD tear\
    \ down the corresponding tLDP adjacency\n   after sending or receiving a 'Session\
    \ Rejected/Targeted Application\n   Capability Mismatch' Notification message\
    \ to or from the responding\n   LSR, respectively.\n   If both of the peers support\
    \ the TAC TLV, an LSR decides to establish\n   or close a tLDP session based on\
    \ the negotiated list of targeted\n   applications.  For example, an initiating\
    \ LSR advertises A, B, and C\n   as TA-Ids, and the responding LSR advertises\
    \ C, D, and E as TA-Ids.\n   Then, the negotiated TA-Id as per both LSRs is C.\
    \  In another\n   example, an initiating LSR advertises A, B, and C as TA-Ids,\
    \ and the\n   responding LSR, which acts as a passive LSR, advertises all of the\n\
    \   applications -- A, B, C, D, and E -- as TA-Ids that it supports over\n   this\
    \ session.  The negotiated targeted applications as per both LSRs\n   are then\
    \ A, B, and C.  Finally, if the initiating LSR advertises A,\n   B, and C as TA-Ids\
    \ and the responding LSR advertises D and E as\n   TA-Ids, then the negotiated\
    \ targeted applications as per both LSRs\n   are \"none\".  Therefore, if the\
    \ intersection of the sets of received\n   and sent TA-Ids is null, then the LSR\
    \ sends a 'Session\n   Rejected/Targeted Application Capability Mismatch' Notification\n\
    \   message to the peer LSR and closes the session.\n   When the responding LSR\
    \ playing the active role [RFC5036] in LDP\n   session establishment receives\
    \ a 'Session Rejected/Targeted\n   Application Capability Mismatch' Notification\
    \ message, it MUST set\n   its session setup retry interval to a maximum value\
    \ -- that is,\n   0xFFFF.  The session MAY stay in a non-existent state.  When\
    \ it\n   detects a change in the initiating LSR or local LSR configuration\n \
    \  pertaining to the TAC TLV, it MUST clear the session setup backoff\n   delay\
    \ associated with the session to reattempt session establishment.\n   An LSR detects\
    \ the configuration change on the other LSR upon receipt\n   of a tLDP Hello message\
    \ that has a higher configuration sequence\n   number than the earlier tLDP Hello\
    \ message.\n   When the initiating LSR playing the active role in LDP session\n\
    \   establishment receives a 'Session Rejected/Targeted Application\n   Capability\
    \ Mismatch' Notification message, it MUST either (1) close\n   the session and\
    \ tear down the corresponding tLDP adjacency or (2) set\n   its session setup\
    \ retry interval to a maximum value -- that is,\n   0xFFFF.\n   If the initiating\
    \ LSR decides to tear down the associated tLDP\n   adjacency, the session is closed\
    \ on the initiating LSR as well as the\n   responding LSR.  It MAY also take appropriate\
    \ actions.  For instance,\n   if an automatic session intended to support the\
    \ remote LFA\n   application is rejected by the responding LSR, the initiating\
    \ LSR may\n   inform the IGP to calculate another PQ node [RFC7490] for the route\n\
    \   or set of routes.  More specific actions are a local matter and are\n   outside\
    \ the scope of this document.\n   If the initiating LSR sets the session setup\
    \ retry interval to\n   maximum, the session MAY stay in a non-existent state.\
    \  When this LSR\n   detects a change in the responding LSR configuration or its\
    \ own\n   configuration pertaining to the TAC TLV, it MUST clear the session\n\
    \   setup backoff delay associated with the session in order to reattempt\n  \
    \ session establishment.\n   After a tLDP session using the TAC mechanism has\
    \ been established,\n   the initiating and responding LSRs MUST distribute FEC\
    \ label bindings\n   for the negotiated applications only.  For instance, if the\
    \ tLDP\n   session is established for a BGP auto-discovered pseudowire, only FEC\n\
    \   129 label bindings MUST be distributed over the session.  Similarly,\n   an\
    \ LSR operating in downstream on-demand mode MUST request FEC label\n   bindings\
    \ for the negotiated applications only.\n   If the TAC and the Dynamic Capability\
    \ [RFC5561] are negotiated during\n   session initialization, the TAC MAY be renegotiated\
    \ after session\n   establishment by sending an updated TAC TLV in the LDP Capability\n\
    \   message.  The updated TAC TLV carries TA-Ids with an incremental\n   update\
    \ only.  The updated TLV MUST consist of one or more TAEs with\n   the E-bit set\
    \ (1) or off (0), to advertise or withdraw the new\n   application and the old\
    \ application, respectively.  This may lead to\n   advertisements or withdrawals\
    \ of certain types of FEC label bindings\n   over the session or to teardown of\
    \ the tLDP adjacency and,\n   subsequently, the session.\n   The TAC is advertised\
    \ on the tLDP session only.  If the tLDP session\n   changes to a link session,\
    \ an LSR SHOULD withdraw it with the S-bit\n   set to 0.  Similarly, if the link\
    \ session changes to tLDP, an LSR\n   SHOULD advertise it via the Capability message.\
    \  If the capability\n   negotiation fails, this may lead to destruction of the\
    \ tLDP session.\n   By default, an LSR SHOULD accept tLDP Hellos in order to then\
    \ accept\n   or reject the tLDP session based on the application information.\n\
    \   In addition, an LSR SHOULD allow the configuration of any TA-Id in\n   order\
    \ to facilitate the use of private TA-Ids by a network operator.\n"
- title: 2.3.  LDP Message Procedures
  contents:
  - '2.3.  LDP Message Procedures

    '
- title: 2.3.1.  Initialization Message
  contents:
  - "2.3.1.  Initialization Message\n   1. The S-bit of the TAC TLV MUST be set to\
    \ 1 to advertise the TAC and\n      SHOULD be ignored on receipt, as described\
    \ in [RFC5561].\n   2. The E-bit of the TAE MUST be set to 1 to enable the targeted\n\
    \      application and SHOULD be ignored on receipt.\n   3. An LSR MAY add the\
    \ State Advertisement Control Capability by\n      mapping the TAE to the State\
    \ Advertisement Control (SAC) elements\n      as defined in Section 4.\n"
- title: 2.3.2.  Capability Message
  contents:
  - "2.3.2.  Capability Message\n   After a change to local configuration, the initiating\
    \ or responding\n   LSR may renegotiate the TAC via the Capability message.\n\
    \   1. The S-bit of the TAC is set to 1 or 0 to advertise or withdraw it.\n  \
    \ 2. After the configuration change, if there is no common TAE between\n     \
    \ its new TAE list and the peer's TAE list, the LSR MUST send a\n      'Session\
    \ Rejected/Targeted Application Capability Mismatch'\n      Notification message\
    \ and close the session.\n   3. If there is a common TAE, an LSR MAY also update\
    \ the SAC\n      Capability based on the updated TAC, as described in Section\
    \ 4,\n      and send the updated TAC and SAC Capability in a Capability\n    \
    \  message to the peer.\n   4. A receiving LSR processes the Capability message\
    \ with the TAC TLV.\n      If the S-bit is set to 0, the TAC is disabled for the\
    \ session.\n   5. If the S-bit is set to 1, the LSR processes a list of TAEs from\n\
    \      the TAC's data with the E-bit set to 1 or 0 to update the\n      peer's\
    \ TAE.\n"
- title: 3.  Targeted Application FEC Advertisement Procedures
  contents:
  - "3.  Targeted Application FEC Advertisement Procedures\n   The tLDP application\
    \ MUST be mapped to LDP FEC element types as\n   follows to advertise only necessary\
    \ LDP FEC label bindings over the\n   tLDP session.\n     Targeted Application\
    \     Description              FEC Mappings\n   +----------------------+------------------------+------------------+\n\
    \   |LDPv4 Tunneling       | LDP IPv4 over RSVP-TE  | IPv4 prefix      |\n   |\
    \                      | or other MPLS tunnel   |                  |\n   +----------------------+------------------------+------------------+\n\
    \   |                      |                        |                  |\n   |LDPv6\
    \ Tunneling       | LDP IPv6 over RSVP-TE  | IPv6 prefix      |\n   |        \
    \              | or other MPLS tunnel   |                  |\n   +----------------------+------------------------+------------------+\n\
    \   |mLDP Tunneling        | mLDP over RSVP-TE or   | P2MP             |\n   |\
    \                      | other MPLS tunnel      | MP2MP-up         |\n   |   \
    \                   |                        | MP2MP-down       |\n   |      \
    \                |                        | HSMP-downstream  |\n   |         \
    \             |                        | HSMP-upstream    |\n   +----------------------+------------------------+------------------+\n\
    \   |                      |                        |                  |\n   |LDPv4\
    \ remote LFA      | LDPv4 over LDPv4 or    | IPv4 prefix      |\n   |        \
    \              | other MPLS tunnel      |                  |\n   +----------------------+------------------------+------------------+\n\
    \   |LDPv6 remote LFA      | LDPv6 over LDPv6 or    | IPv6 prefix      |\n   |\
    \                      | other MPLS tunnel      |                  |\n   +----------------------+------------------------+------------------+\n\
    \   |                      |                        |                  |\n   |LDP\
    \ FEC 128 PW        | LDP FEC 128 Pseudowire | PWid FEC element |\n   +----------------------+------------------------+------------------+\n\
    \   |                      |                        |                  |\n   |LDP\
    \ FEC 129 PW        | LDP FEC 129 Pseudowire | Generalized PWid |\n   |      \
    \                |                        | FEC element      |\n   +----------------------+------------------------+------------------+\n\
    \   |                      |                        | FEC types as     |\n   |LDP\
    \ Session Protection| LDP session protection | per protected    |\n   |      \
    \                |                        | session          |\n   +----------------------+------------------------+------------------+\n\
    \   |LDP ICCP              | LDP Inter-Chassis      |                  |\n   |\
    \                      | Communication Protocol | None             |\n   +----------------------+------------------------+------------------+\n\
    \   |                      |                        |                  |\n   |LDP\
    \ P2MP PW           | LDP P2MP Pseudowire    | P2MP PW Upstream |\n   |      \
    \                |                        | FEC element      |\n   +----------------------+------------------------+------------------+\n\
    \   |                      |                        | P2MP             |\n   |mLDP\
    \ Node Protection  | mLDP node protection   | MP2MP-up         |\n   |       \
    \               |                        | MP2MP-down       |\n   |          \
    \            |                        | HSMP-downstream  |\n   |             \
    \         |                        | HSMP-upstream    |\n   +----------------------+------------------------+------------------+\n\
    \   |                      |                        |                  |\n   |IPv4\
    \ intra-area FECs* | IPv4 intra-area FECs*  | IPv4 prefix      |\n   +----------------------+------------------------+------------------+\n\
    \   |                      |                        |                  |\n   |IPv6\
    \ intra-area FECs* | IPv6 intra-area FECs*  | IPv6 prefix      |\n   +----------------------+------------------------+------------------+\n\
    \   * Intra-area FECs: FECs that are on the shortest-path tree and\n     are not\
    \ leafs of the shortest-path tree.\n"
- title: 4.  Interaction of Targeted Application Capabilities and State
  contents:
  - "4.  Interaction of Targeted Application Capabilities and State\n    Advertisement\
    \ Control Capabilities\n   As described in this document, the set of TAEs negotiated\
    \ between two\n   LDP peers advertising the TAC represents the willingness of\
    \ both\n   peers to advertise state information for a set of applications.  The\n\
    \   set of applications negotiated by the TAC mechanism is symmetric\n   between\
    \ the two LDP peers.  In the absence of further mechanisms, two\n   LDP peers\
    \ will both advertise state information for the same set of\n   applications.\n\
    \   As described in [RFC7473], the SAC TLV can be used by an LDP speaker\n   to\
    \ communicate its interest or disinterest in receiving state\n   information from\
    \ a given peer for a particular application.  Two LDP\n   peers can use the SAC\
    \ mechanism to create asymmetric advertisements\n   of state information between\
    \ the two peers.\n   The TAC negotiation facilitates the awareness of targeted\n\
    \   applications to both of the peers.  It enables them to advertise only\n  \
    \ necessary LDP FEC label bindings corresponding to negotiated\n   applications.\
    \  With the SAC, the responding LSR is not aware of\n   targeted applications.\
    \  Thus, it may be unable to communicate its\n   interest or disinterest in receiving\
    \ state information from the peer.\n   Therefore, when the responding LSR is not\
    \ aware of targeted\n   applications such as remote LFAs and BGP auto-discovered\
    \ pseudowires,\n   the TAC mechanism should be used, and when the responding LSR\
    \ is\n   aware (with appropriate configuration) of targeted applications such\n\
    \   as FEC 128 pseudowire, the SAC mechanism should be used.  Also, after\n  \
    \ the TAC mechanism makes the responding LSR aware of targeted\n   applications,\
    \ the SAC mechanism may be used to communicate its\n   disinterest in receiving\
    \ state information from the peer for a\n   particular negotiated application,\
    \ creating asymmetric\n   advertisements.\n   Thus, the TAC mechanism enables\
    \ two LDP peers to symmetrically\n   advertise state information for negotiated\
    \ targeted applications.\n   Further, the SAC mechanism enables both of them to\
    \ asymmetrically\n   disable receipt of state information for some of the already-\n\
    \   negotiated targeted applications.  Collectively, the TAC mechanism\n   and\
    \ the SAC mechanism can both be used to control the FEC label\n   bindings that\
    \ are advertised over the tLDP session.  For instance,\n   suppose that the initiating\
    \ LSR establishes a tLDP session, using the\n   TAC mechanism, with the responding\
    \ LSR for remote LFA and FEC 129 PW\n   targeted applications.  So, each LSR advertises\
    \ the corresponding FEC\n   label bindings.  Further, suppose that the initiating\
    \ LSR is not the\n   PQ node for the responding LSR's remote LFA IGP calculations.\
    \  In\n   such a case, the responding LSR may use the SAC mechanism to convey\n\
    \   its disinterest in receiving state information for remote LFA tLDP\n   applications.\n\
    \   For a given tLDP session, the TAC mechanism can be used without the\n   SAC\
    \ mechanism, and the SAC mechanism can be used without the TAC\n   mechanism.\
    \  It is useful to discuss the behavior that occurs when the\n   TAC and SAC mechanisms\
    \ are used on the same tLDP session.  The TAC\n   mechanism MUST take precedence\
    \ over the SAC mechanism with respect to\n   enabling applications for which state\
    \ information will be advertised.\n   For a tLDP session using the TAC mechanism,\
    \ the LDP peers MUST NOT\n   advertise state information for an application that\
    \ has not been\n   negotiated in the most recent TAE list (referred to as a\n\
    \   non-negotiated application).  This is true even if one of the peers\n   announces\
    \ its interest in receiving state information that\n   corresponds to the non-negotiated\
    \ application by sending a SAC TLV.\n   In other words, when the TAC mechanism\
    \ is being used, the SAC\n   mechanism cannot and should not enable state information\n\
    \   advertisements for applications that have not been enabled by the TAC\n  \
    \ mechanism.\n   On the other hand, the SAC mechanism MUST take precedence over\
    \ the\n   TAC mechanism with respect to disabling state information\n   advertisements.\
    \  If an LDP speaker has announced its disinterest in\n   receiving state information\
    \ for a given application to a given peer\n   using the SAC mechanism, its peer\
    \ MUST NOT send state information for\n   that application, even if the two peers\
    \ have negotiated the\n   corresponding application via the TAC mechanism.\n \
    \  For the purposes of determining the correspondence between targeted\n   applications\
    \ defined in this document and application state as\n   defined in [RFC7473],\
    \ an LSR MUST use the following mappings:\n      LDPv4 Tunneling - IPv4 Prefix-LSPs\n\
    \      LDPv6 Tunneling - IPv6 Prefix-LSPs\n      LDPv4 Remote LFA - IPv4 Prefix-LSPs\n\
    \      LDPv6 Remote LFA - IPv6 Prefix-LSPs\n      LDP FEC 128 PW - FEC 128 P2P-PW\n\
    \      LDP FEC 129 PW - FEC 129 P2P-PW\n   An LSR MUST map the targeted application\
    \ to the LDP capability\n   as follows:\n   mLDP Tunneling - P2MP Capability,\
    \ MP2MP Capability, and HSMP LSP\n      Capability TLV\n   mLDP Node Protection\
    \ - P2MP Capability, MP2MP Capability, and HSMP\n      LSP Capability TLV\n"
- title: 5.  Use Cases
  contents:
  - '5.  Use Cases

    '
- title: 5.1.  Remote LFA Automatic Targeted Session
  contents:
  - "5.1.  Remote LFA Automatic Targeted Session\n   The LSR determines that it needs\
    \ to form an automatic tLDP session\n   with a remote LSR based on IGP calculation\
    \ as described in [RFC7490]\n   or some other mechanism outside the scope of this\
    \ document.  The LSR\n   forms the tLDP adjacency and constructs an Initialization\
    \ message\n   with the TAC TLV consisting of the TAE as the remote LFA during\n\
    \   session establishment.  The receiver LSR processes the LDP\n   Initialization\
    \ message and verifies whether it is configured to\n   accept a remote LFA tLDP\
    \ session.  If it is, it may further verify\n   that establishing such a session\
    \ does not exceed the configured limit\n   for remote LFA sessions.  If all of\
    \ these conditions are met, the\n   receiver LSR may respond back with an Initialization\
    \ message with the\n   TAC corresponding to the remote LFA, and subsequently the\
    \ session\n   may be established.\n   After the session using the TAC mechanism\
    \ has been established, the\n   sender and receiver LSRs distribute IPv4 or IPv6\
    \ FEC label bindings\n   over the session.  Further, the receiver LSR may determine\
    \ that it\n   does not need these FEC label bindings.  So, it may disable the\n\
    \   receipt of these FEC label bindings by mapping the TAE to the State\n   Advertisement\
    \ Control Capability as described in Section 4.\n"
- title: 5.2.  FEC 129 Auto-discovery Targeted Session
  contents:
  - "5.2.  FEC 129 Auto-discovery Targeted Session\n   BGP auto-discovery may determine\
    \ whether the LSR needs to initiate an\n   auto-discovery tLDP session with a\
    \ border LSR.  Multiple LSRs may try\n   to form an auto-discovered tLDP session\
    \ with a border LSR.  So, a\n   service provider may want to limit the number\
    \ of auto-discovered tLDP\n   sessions that a border LSR can accept.  As described\
    \ in Section 2,\n   LDP may convey targeted applications with the TAC TLV to a\
    \ border\n   LSR.  A border LSR may establish or reject the tLDP session based\
    \ on\n   local administrative policy.  Also, as the receiver LSR becomes aware\n\
    \   of targeted applications, it can also employ an administrative policy\n  \
    \ for security.  For instance, it can employ a policy to accept all\n   auto-discovered\
    \ sessions from a source addresses list.\n   Moreover, the sender and receiver\
    \ LSRs must exchange FEC 129 label\n   bindings only over the tLDP session.\n"
- title: 5.3.  LDP over RSVP and Remote LFA Targeted Session
  contents:
  - "5.3.  LDP over RSVP and Remote LFA Targeted Session\n   An LSR may want to establish\
    \ a tLDP session with a remote LSR for\n   LDP-over-RSVP tunneling and remote\
    \ LFA applications.  The sender LSR\n   may add both of these applications as\
    \ a unique TAE in the TAC data of\n   a TAC TLV.  The receiver LSR may have reached\
    \ a configured limit for\n   accepting remote LFA automatic tLDP sessions, but\
    \ it may have been\n   configured to accept LDP-over-RSVP tunneling.  In such\
    \ a case, the\n   tLDP session is formed for both LDP-over-RSVP tunneling and\
    \ remote\n   LFA applications, as both need the same FECs -- IPv4, IPv6, or both.\n"
- title: 5.4.  mLDP Node Protection Targeted Session
  contents:
  - "5.4.  mLDP Node Protection Targeted Session\n   A Merge Point (MPT) LSR may determine\
    \ that it needs to form an\n   automatic tLDP session with the upstream point\
    \ of local repair (PLR)\n   LSR for MP2P and MP2MP LSP [RFC6388] node protection\
    \ as described in\n   [RFC7715].  The MPT LSR may add a new tLDP application --\
    \ mLDP\n   protection -- as a unique TAE in the TAC data of a TAC TLV and send\n\
    \   it in the Initialization message to the PLR.  If the PLR is\n   configured\
    \ for mLDP node protection and establishing this session\n   does not exceed the\
    \ limit of either mLDP node protection sessions or\n   automatic tLDP sessions,\
    \ the PLR may decide to accept this session.\n   Also, the PLR may respond back\
    \ with the Initialization message with a\n   TAC TLV that has one of the TAEs\
    \ as mLDP protection, and the session\n   proceeds to establishment as per [RFC5036].\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   The procedures described in this document do\
    \ not introduce any\n   changes to LDP security considerations as described in\
    \ [RFC5036].\n   As described in [RFC5036], DoS attacks via Extended Hellos, which\
    \ are\n   required to establish a tLDP session, can be addressed by filtering\n\
    \   Extended Hellos using access lists that define addresses with which\n   Extended\
    \ Discovery is permitted.  Further, as described in\n   Section 5.2 of this document,\
    \ an LSR can employ a policy to accept\n   all auto-discovered Extended Hellos\
    \ from the configured source\n   addresses list.\n   Also, for the two LSRs supporting\
    \ the TAC, the tLDP session is only\n   established after successful negotiation\
    \ of the TAC.  The initiating\n   and receiving LSRs MUST only advertise TA-Ids\
    \ that they support --\n   in other words, what they are configured for over the\
    \ tLDP session.\n"
- title: 7.  IANA Considerations
  contents:
  - "7.  IANA Considerations\n   IANA has assigned the following code point for the\
    \ new Capability\n   Parameter TLV defined in this document.  The code point has\
    \ been\n   assigned from the \"TLV Type Name Space\" sub-registry of the \"Label\n\
    \   Distribution Protocol (LDP) Parameters\" registry.\n      Value   Description\
    \                      Reference\n      ------  -------------------------------\
    \  ---------\n      0x050F  Targeted Application Capability  RFC 8223\n   IANA\
    \ has assigned a new status code from the \"Status Code Name Space\"\n   sub-registry\
    \ of the \"Label Distribution Protocol (LDP) Parameters\"\n   registry.\n    \
    \  Value        E   Description                           Reference\n      ----------\
    \  ---  -----------------------------------   ---------\n      0x0000004C   1\
    \   Session Rejected/Targeted\n                          Application Capability\
    \ Mismatch    RFC 8223\n   IANA has created a new registry called \"LDP Targeted\
    \ Application\n   Identifier\" in the \"Label Distribution Protocol (LDP) Parameters\"\
    \n   registry.  The range is 0x0001-0xFFFE.  Values in the range\n   0x0001-0x1FFF\
    \ in this registry shall be allocated according to the\n   \"IETF Review\" procedure\
    \ [RFC8126]; values in the range 0x2000-0xF7FF\n   shall be allocated according\
    \ to the \"First Come First Served\"\n   procedure [RFC8126].  The initial values\
    \ are as follows.\n      Value            Description                      Reference\n\
    \      ---------------  -------------------------------  ---------\n      0x0000\
    \           Reserved                         RFC 8223\n      0x0001          \
    \ LDPv4 Tunneling                  RFC 8223\n      0x0002           LDPv6 Tunneling\
    \                  RFC 8223\n      0x0003           mLDP Tunneling           \
    \        RFC 8223\n      0x0004           LDPv4 Remote LFA                 RFC\
    \ 8223\n      0x0005           LDPv6 Remote LFA                 RFC 8223\n   \
    \   0x0006           LDP FEC 128 PW                   RFC 8223\n      0x0007 \
    \          LDP FEC 129 PW                   RFC 8223\n      0x0008           LDP\
    \ Session Protection           RFC 8223\n      0x0009           LDP ICCP     \
    \                    RFC 8223\n      0x000A           LDP P2MP PW            \
    \          RFC 8223\n      0x000B           mLDP Node Protection             RFC\
    \ 8223\n      0x000C           LDPv4 Intra-area FECs            RFC 8223\n   \
    \   0x000D           LDPv6 Intra-area FECs            RFC 8223\n      0x000E-0xF7FF\
    \    Unassigned\n      0xF800-0xFBFF    Available for Private Use\n      0xFC00-0xFFFE\
    \    Available for Experimental Use\n      0xFFFF           Reserved         \
    \                RFC 8223\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119,\n  \
    \            DOI 10.17487/RFC2119, March 1997,\n              <https://www.rfc-editor.org/info/rfc2119>.\n\
    \   [RFC5036]  Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,\n     \
    \         \"LDP Specification\", RFC 5036, DOI 10.17487/RFC5036,\n           \
    \   October 2007, <https://www.rfc-editor.org/info/rfc5036>.\n   [RFC5561]  Thomas,\
    \ B., Raza, K., Aggarwal, S., Aggarwal, R., and JL.\n              Le Roux, \"\
    LDP Capabilities\", RFC 5561,\n              DOI 10.17487/RFC5561, July 2009,\n\
    \              <https://www.rfc-editor.org/info/rfc5561>.\n   [RFC7473]  Raza,\
    \ K. and S. Boutros, \"Controlling State Advertisements\n              of Non-negotiated\
    \ LDP Applications\", RFC 7473,\n              DOI 10.17487/RFC7473, March 2015,\n\
    \              <https://www.rfc-editor.org/info/rfc7473>.\n   [RFC7715]  Wijnands,\
    \ IJ., Ed., Raza, K., Atlas, A., Tantsura, J., and\n              Q. Zhao, \"\
    Multipoint LDP (mLDP) Node Protection\",\n              RFC 7715, DOI 10.17487/RFC7715,\
    \ January 2016,\n              <https://www.rfc-editor.org/info/rfc7715>.\n  \
    \ [RFC8174]  Leiba, B., \"Ambiguity of Uppercase vs Lowercase in\n           \
    \   RFC 2119 Key Words\", BCP 14, RFC 8174,\n              DOI 10.17487/RFC8174,\
    \ May 2017,\n              <https://www.rfc-editor.org/info/rfc8174>.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [RFC6074]  Rosen, E., Davie, B., Radoaca, V.,\
    \ and W. Luo,\n              \"Provisioning, Auto-Discovery, and Signaling in\
    \ Layer 2\n              Virtual Private Networks (L2VPNs)\", RFC 6074,\n    \
    \          DOI 10.17487/RFC6074, January 2011,\n              <https://www.rfc-editor.org/info/rfc6074>.\n\
    \   [RFC6388]  Wijnands, IJ., Ed., Minei, I., Ed., Kompella, K., and B.\n    \
    \          Thomas, \"Label Distribution Protocol Extensions for\n            \
    \  Point-to-Multipoint and Multipoint-to-Multipoint Label\n              Switched\
    \ Paths\", RFC 6388, DOI 10.17487/RFC6388,\n              November 2011, <https://www.rfc-editor.org/info/rfc6388>.\n\
    \   [RFC7490]  Bryant, S., Filsfils, C., Previdi, S., Shand, M., and N.\n    \
    \          So, \"Remote Loop-Free Alternate (LFA) Fast Reroute (FRR)\",\n    \
    \          RFC 7490, DOI 10.17487/RFC7490, April 2015,\n              <https://www.rfc-editor.org/info/rfc7490>.\n\
    \   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, \"Guidelines for\n      \
    \        Writing an IANA Considerations Section in RFCs\", BCP 26,\n         \
    \     RFC 8126, DOI 10.17487/RFC8126, June 2017,\n              <https://www.rfc-editor.org/info/rfc8126>.\n"
- title: Acknowledgments
  contents:
  - "Acknowledgments\n   The authors wish to thank Nischal Sheth, Hassan Hosseini,\
    \ Kishore\n   Tiruveedhula, Loa Andersson, Eric Rosen, Yakov Rekhter, Thomas\n\
    \   Beckhaus, Tarek Saad, Lizhong Jin, and Bruno Decraene for their\n   detailed\
    \ reviews.  Thanks to Manish Gupta and Martin Ehlers for their\n   input to this\
    \ work and many helpful suggestions.\n"
- title: Contributors
  contents:
  - "Contributors\n   The following people contributed substantially to the content\
    \ of this\n   document and should be considered co-authors:\n   Chris Bowers\n\
    \   Juniper Networks\n   1133 Innovation Way\n   Sunnyvale, CA  94089\n   United\
    \ States of America\n   Email: cbowers@juniper.net\n   Zhenbin Li\n   Huawei\n\
    \   Bldg. No. 156 Beiqing Rd.\n   Beijing  100095\n   China\n   Email: lizhenbin@huawei.com\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Santosh Esale\n   Juniper Networks\n   1133 Innovation\
    \ Way\n   Sunnyvale, CA  94089\n   United States of America\n   Email: sesale@juniper.net\n\
    \   Raveendra Torvi\n   Juniper Networks\n   10 Technology Park Drive\n   Westford,\
    \ MA  01886\n   United States of America\n   Email: rtorvi@juniper.net\n   Luay\
    \ Jalil\n   Verizon\n   1201 East Arapaho Road\n   Richardson, TX  75081\n   United\
    \ States of America\n   Email: luay.jalil@verizon.com\n   Uma Chunduri\n   Huawei\n\
    \   2330 Central Expressway\n   Santa Clara, CA  95050\n   United States of America\n\
    \   Email: uma.chunduri@huawei.com\n   Kamran Raza\n   Cisco Systems, Inc.\n \
    \  2000 Innovation Drive\n   Ottawa, ON  K2K-3E8\n   Canada\n   Email: skraza@cisco.com\n"
