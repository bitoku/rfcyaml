- title: __initial_text__
  contents:
  - "          Transparent Interconnection of Lots of Links (TRILL)\n           Active-Active\
    \ Edge Using Multiple MAC Attachments\n"
- title: Abstract
  contents:
  - "Abstract\n   TRILL (Transparent Interconnection of Lots of Links) active-active\n\
    \   service provides end stations with flow-level load balance and\n   resilience\
    \ against link failures at the edge of TRILL campuses, as\n   described in RFC\
    \ 7379.\n   This document specifies a method by which member RBridges (also\n\
    \   referred to as Routing Bridges or TRILL switches) in an active-active\n  \
    \ edge RBridge group use their own nicknames as ingress RBridge\n   nicknames\
    \ to encapsulate frames from attached end systems.  Thus,\n   remote edge RBridges\
    \ (who are not in the group) will see one host\n   Media Access Control (MAC)\
    \ address being associated with the multiple\n   RBridges in the group.  Such\
    \ remote edge RBridges are required to\n   maintain all those associations (i.e.,\
    \ MAC attachments) and to not\n   flip-flop among them (as would occur prior to\
    \ the implementation of\n   this specification).  The design goals of this specification\
    \ are\n   discussed herein.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7782.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2016 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Acronyms and Terminology ........................................4\n  \
    \ 3. Overview ........................................................5\n   4.\
    \ Incremental Deployable Options ..................................6\n      4.1.\
    \ Details of Option B ........................................7\n           4.1.1.\
    \ Advertising Data Labels for Active-Active Edge ......7\n           4.1.2. Discovery\
    \ of Active-Active Edge Members .............8\n           4.1.3. Advertising\
    \ Learned MAC Addresses ...................9\n      4.2. Extended RBridge Capability\
    \ Flags APPsub-TLV ..............11\n   5. Meeting the Design Goals .......................................12\n\
    \      5.1. No MAC Address Flip-Flopping (Normal Unicast Egress) ......12\n  \
    \    5.2. Regular Unicast/Multicast Ingress .........................12\n    \
    \  5.3. Correct Multicast Egress ..................................12\n      \
    \     5.3.1. No Duplication (Single Exit Point) .................12\n        \
    \   5.3.2. No Echo (Split Horizon) ............................13\n      5.4.\
    \ No Black-Hole or Triangular Forwarding ....................14\n      5.5. Load\
    \ Balance towards the AAE ..............................14\n      5.6. Scalability\
    \ ...............................................14\n   6. E-L1FS Backward Compatibility\
    \ ..................................15\n   7. Security Considerations ........................................15\n\
    \   8. IANA Considerations ............................................16\n  \
    \    8.1. TRILL APPsub-TLVs .........................................16\n    \
    \  8.2. Extended RBridge Capabilities Registry ....................16\n      8.3.\
    \ Active-Active Flags .......................................17\n   9. References\
    \ .....................................................17\n      9.1. Normative\
    \ References ......................................17\n      9.2. Informative\
    \ References ....................................19\n   Appendix A. Scenarios\
    \ for Split Horizon ...........................20\n   Acknowledgments ...................................................21\n\
    \   Authors' Addresses ................................................22\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   As discussed in [RFC7379], in a TRILL (Transparent Interconnection\
    \ of\n   Lots of Links) Active-Active Edge (AAE) topology, a Local\n   Active-Active\
    \ Link Protocol (LAALP) -- for example, a Multi-Chassis\n   Link Aggregation (MC-LAG)\
    \ bundle -- is used to connect multiple\n   RBridges (Routing Bridges or TRILL\
    \ switches) to multi-port Customer\n   Equipment (CE), such as a switch, virtual\
    \ switch (vSwitch), or\n   multi-port end station.  A set of end nodes is attached\
    \ in the case\n   of a switch or vSwitch.  It is required that data traffic within\
    \ a\n   specific VLAN from this end node set (including the multi-port\n   end-station\
    \ case) can be ingressed and egressed by any of these\n   RBridges simultaneously.\
    \  End systems in the set can spread their\n   traffic among these edge RBridges\
    \ at the flow level.  When a link\n   fails, end systems keep using the remaining\
    \ links in the LAALP\n   without waiting for the convergence of TRILL, which provides\n\
    \   resilience to link failures.\n   Since a frame from each end node can be ingressed\
    \ by any RBridge in\n   the local AAE group, a remote edge RBridge may observe\
    \ multiple\n   attachment points (i.e., egress RBridges) for this end node.  This\n\
    \   issue is known as \"MAC address flip-flopping\"; see [RFC7379] for a\n   discussion.\n\
    \   Per this document, AAE member RBridges use their own nicknames to\n   ingress\
    \ frames into the TRILL campus.  Remote edge RBridges are\n   required to keep\
    \ multiple points of attachment per MAC address and\n   Data Label (VLAN or Fine-Grained\
    \ Label [RFC7172]) attached to the\n   AAE.  This addresses the MAC flip-flopping\
    \ issue.  Using this\n   solution, as specified in this document, in an AAE group\
    \ does not\n   prohibit the use of other solutions in other AAE groups in the\
    \ same\n   TRILL campus.  For example, the specification in this document and\n\
    \   the specification in [RFC7781] could be simultaneously deployed for\n   different\
    \ AAE groups in the same campus.\n   The main body of this document is organized\
    \ as follows:  Section 2\n   lists acronyms and terms.  Section 3 describes the\
    \ overview model.\n   Section 4 provides options for incremental deployment. \
    \ Section 5\n   describes how this approach meets the design goals.  Section 6\n\
    \   discusses backward compatibility.  Section 7 covers security\n   considerations.\
    \  Section 8 covers IANA considerations.\n"
- title: 2.  Acronyms and Terminology
  contents:
  - "2.  Acronyms and Terminology\n   AAE: Active-Active Edge\n   Campus: A TRILL\
    \ network consisting of TRILL switches, links, and\n      possibly bridges bounded\
    \ by end stations and IP routers.  For\n      TRILL, there is no \"academic\"\
    \ implication in the name \"campus\".\n   CE: Customer Equipment (end station\
    \ or bridge).  The device can be\n      either physical or virtual equipment.\n\
    \   Data Label: VLAN or Fine-Grained Label (FGL)\n   DRNI: Distributed Resilient\
    \ Network Interconnect.  A link aggregation\n      specified in [802.1AX] that\
    \ can provide an LAALP between (a) one,\n      two, or three CEs and (b) two or\
    \ three RBridges.\n   E-L1FS: Extended Level 1 Flooding Scope\n   Edge RBridge:\
    \ An RBridge providing end-station service on one or more\n      of its ports.\n\
    \   ESADI: End Station Address Distribution Information [RFC7357]\n   FGL: Fine-Grained\
    \ Label [RFC7172]\n   FS-LSP: Flooding Scope Link State Protocol Data Unit\n \
    \  IS: Intermediate System [IS-IS]\n   IS-IS: Intermediate System to Intermediate\
    \ System [IS-IS]\n   LAALP: Local Active-Active Link Protocol [RFC7379].  Any\
    \ protocol\n      similar to MC-LAG (or DRNI) that runs in a distributed fashion\
    \ on\n      a CE, on the links from that CE to a set of edge group RBridges,\n\
    \      and on those RBridges.\n   LSP: Link State PDU\n   MC-LAG: Multi-Chassis\
    \ Link Aggregation.  Proprietary extensions of\n      link aggregation [802.1AX]\
    \ that can provide an LAALP between one\n      CE and two or more RBridges.\n\
    \   PDU: Protocol Data Unit\n   RBridge: A device implementing the TRILL protocol.\n\
    \   TRILL: Transparent Interconnection of Lots of Links or Tunneled\n      Routing\
    \ in the Link Layer [RFC6325] [RFC7177].\n   TRILL switch: An alternative name\
    \ for an RBridge.\n   vSwitch: A virtual switch, such as a hypervisor, that also\
    \ simulates\n      a bridge.\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\"\
    , \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"\
    MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in RFC 2119 [RFC2119].\n   Familiarity with [RFC6325], [RFC6439], and [RFC7177]\
    \ is assumed in\n   this document.\n"
- title: 3.  Overview
  contents:
  - "3.  Overview\n                               +-----+\n                      \
    \         | RB4 |\n                    +----------+-----+----------+\n       \
    \             |                           |\n                    |           \
    \                |\n                    |       Rest of campus      |\n      \
    \              |                           |\n                    |          \
    \                 |\n                    +-+-----+--+-----+--+-----+-+\n     \
    \                 | RB1 |  | RB2 |  | RB3 |\n                      +-----\\  +-----+\
    \  /-----+\n                              \\   |   /\n                       \
    \         \\ | /\n                                 |||LAALP1\n               \
    \                  |||\n                                +---+\n              \
    \                  | B |\n                                +---+\n            \
    \                 H1 H2 H3 H4: VLAN 10\n        Figure 1: An Example Topology\
    \ for TRILL Active-Active Edge\n   Figure 1 shows an example network for TRILL\
    \ AAE (see also Figure 1 in\n   [RFC7379]).  In this figure, end nodes (H1, H2,\
    \ H3, and H4) are\n   attached to a bridge (B) that communicates with multiple\
    \ RBridges\n   (RB1, RB2, and RB3) via the LAALP.  Suppose that RB4 is a \"remote\"\
    \n   RBridge not in the AAE group in the TRILL campus.  This connection\n   model\
    \ is also applicable to the virtualized environment where the\n   physical bridge\
    \ can be replaced with a vSwitch while those bare metal\n   hosts are replaced\
    \ with virtual machines (VMs).\n   For a frame received from its attached end\
    \ node sets, a member\n   RBridge of the AAE group conforming to this document\
    \ always\n   encapsulates that frame using its own nickname as the ingress\n \
    \  nickname, regardless of whether it is unicast or multicast.\n   With the two\
    \ options specified below, even though remote RBridge RB4\n   will see multiple\
    \ attachments for each MAC address from one of the\n   end nodes, MAC address\
    \ flip-flopping will not cause any problems.\n"
- title: 4.  Incremental Deployable Options
  contents:
  - "4.  Incremental Deployable Options\n   This section specifies two options.  Option\
    \ A requires new hardware\n   support.  Option B can be incrementally implemented\
    \ throughout a\n   TRILL campus with common existing TRILL \"fast path\" hardware.\n\
    \   Further details on Option B are given in Section 4.1.\n   Option A:\n    \
    \  A new capability announcement would appear in LSPs: \"I can cope\n      with\
    \ data-plane learning of multiple attachments for an end node.\"\n      This mode\
    \ of operation is generally not supported by existing\n      TRILL fast path hardware.\
    \  Only if all edge RBridges to which the\n      group has data connectivity --\
    \ and that are interested in any of\n      the Data Labels in which the AAE is\
    \ interested -- announce this\n      capability can the AAE group safely use this\
    \ approach.  If all\n      such RBridges do not announce this \"Option A\" capability,\
    \ then a\n      fallback would be needed, such as reverting from active-active\
    \ to\n      active-standby operation or isolating the RBridges that would need\n\
    \      to support this capability but do not support it.  Further details\n  \
    \    for Option A are beyond the scope of this document, except that,\n      as\
    \ described in Section 4.2, a bit is reserved to indicate support\n      for Option\
    \ A, because a remote RBridge supporting Option A is\n      compatible with an\
    \ AAE group using Option B.\n   Option B:\n      As pointed out in Section 4.2.6\
    \ of [RFC6325] and Section 5.3 of\n      [RFC7357], one MAC address may be persistently\
    \ claimed to be\n      attached to multiple RBridges within the same Data Label\
    \ in the\n      TRILL ESADI-LSPs.  For Option B, AAE member RBridges make use\
    \ of\n      the TRILL ESADI protocol to distribute multiple attachments of a\n\
    \      MAC address.  Remote RBridges SHOULD disable data-plane MAC\n      learning\
    \ for such multi-attached MAC addresses from TRILL Data\n      packet decapsulation,\
    \ unless they also support Option A.  The\n      ability to configure an RBridge\
    \ to disable data-plane learning is\n      provided by the base TRILL protocol\
    \ [RFC6325].\n"
- title: 4.1.  Details of Option B
  contents:
  - "4.1.  Details of Option B\n   With Option B, the receiving edge RBridges MUST\
    \ avoid flip-flop\n   errors for MAC addresses learned from the TRILL Data packet\n\
    \   decapsulation for the originating RBridge within these Data Labels.\n   It\
    \ is RECOMMENDED that the receiving edge RBridge disable data-plane\n   MAC learning\
    \ from TRILL Data packet decapsulation within those\n   advertised Data Labels\
    \ for the originating RBridge, unless the\n   receiving RBridge also supports\
    \ Option A.  Alternative\n   implementations that produce the same expected behavior,\
    \ i.e., the\n   receiving edge RBridge does not flip-flop among multiple MAC\n\
    \   attachments, are acceptable.  For example, the confidence-level\n   mechanism\
    \ as specified in [RFC6325] can be used.  Let the receiving\n   edge RBridge give\
    \ a prevailing confidence value (e.g., 0x21) to the\n   first MAC attachment learned\
    \ from the data plane over others from the\n   TRILL Data packet decapsulation.\
    \  The receiving edge RBridge will\n   stick to this MAC attachment until it is\
    \ overridden by one learned\n   from the ESADI protocol [RFC7357].  The MAC attachment\
    \ learned from\n   ESADI is set to have a higher confidence value (e.g., 0x80)\
    \ to\n   override any alternative learning from the decapsulation of received\n\
    \   TRILL Data packets [RFC6325].\n"
- title: 4.1.1.  Advertising Data Labels for Active-Active Edge
  contents:
  - "4.1.1.  Advertising Data Labels for Active-Active Edge\n   An RBridge in an AAE\
    \ group MUST participate in ESADI in Data Labels\n   enabled for its attached\
    \ LAALPs.  This document further registers two\n   data flags, which are used\
    \ to advertise that the originating RBridge\n   supports and participates in an\
    \ AAE.  These two flags are allocated\n   from the Interested VLANs Flag Bits\
    \ that appear in the Interested\n   VLANs and Spanning Tree Roots sub-TLV and\
    \ the Interested Labels Flag\n   Bits that appear in the Interested Labels and\
    \ Spanning Tree Roots\n   sub-TLV [RFC7176] (see Section 8.3).  When these flags\
    \ are set to 1,\n   the originating RBridge is advertising Data Labels for LAALPs\
    \ rather\n   than plain LAN links.\n"
- title: 4.1.2.  Discovery of Active-Active Edge Members
  contents:
  - "4.1.2.  Discovery of Active-Active Edge Members\n   Remote edge RBridges need\
    \ to discover RBridges in an AAE.  This is\n   achieved by listening to the following\
    \ \"AA LAALP Group RBridges\"\n   TRILL APPsub-TLV included in the TRILL GENINFO\
    \ TLV in FS-LSPs\n   [RFC7780]:\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   \
    \   | Type = AA-LAALP-GROUP-RBRIDGES| (2 bytes)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      | Length                        | (2 bytes)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      | Sender Nickname               | (2 bytes)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      | LAALP ID Size |                 (1 byte)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...+-+-+\n\
    \      | LAALP ID                        (k bytes)       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...+-+-+\n\
    \   o  Type: AA LAALP Group RBridges (TRILL APPsub-TLV type 252)\n   o  Length:\
    \ 3 + k\n   o  Sender Nickname: The nickname the originating RBridge will use\
    \ as\n      the ingress nickname.  This field is useful because the\n      originating\
    \ RBridge might own multiple nicknames.\n   o  LAALP ID Size: The length, k, of\
    \ the LAALP ID in bytes.\n   o  LAALP ID: The ID of the LAALP, which is k bytes\
    \ long.  If the\n      LAALP is an MC-LAG or DRNI, it is the 8-byte ID, as specified\
    \ in\n      Clause 6.3.2 of [802.1AX].\n   This APPsub-TLV is expected to rarely\
    \ change, as it only does so in\n   cases of the creation or elimination of an\
    \ AAE group, or of link\n   failure or restoration to the CE in such a group.\n"
- title: 4.1.3.  Advertising Learned MAC Addresses
  contents:
  - "4.1.3.  Advertising Learned MAC Addresses\n   Whenever MAC addresses from the\
    \ LAALP of this AAE are learned through\n   ingress or configuration, the originating\
    \ RBridge MUST advertise\n   these MAC addresses using the MAC-Reachability TLV\
    \ [RFC6165] via the\n   ESADI protocol [RFC7357].  The MAC-Reachability TLVs are\
    \ composed in\n   a way that each TLV only contains MAC addresses of end nodes\
    \ attached\n   to a single LAALP.  Each such TLV is enclosed in a TRILL APPsub-TLV,\n\
    \   defined as follows:\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      | Type\
    \ = AA-LAALP-GROUP-MAC     | (2 bytes)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      | Length                        | (2 bytes)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      | LAALP ID Size |                 (1 byte)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...+-+-+\n\
    \      | LAALP ID                        (k bytes)       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...+-+-+\n\
    \      | MAC-Reachability TLV            (7 + 6*n bytes) |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...+-+-+\n\
    \   o  Type: AA LAALP Group MAC (TRILL APPsub-TLV type 253)\n   o  Length: The\
    \ MAC-Reachability TLV [RFC6165] is contained in the\n      value field as a sub-TLV.\
    \  The total number of bytes contained in\n      the value field is given by k\
    \ + 8 + 6*n.\n   o  LAALP ID Size: The length, k, of the LAALP ID in bytes.\n\
    \   o  LAALP ID: The ID of the LAALP, which is k bytes long.  Here, it\n     \
    \ also serves as the identifier of the AAE.  If the LAALP is an\n      MC-LAG\
    \ (or DRNI), it is the 8-byte ID, as specified in\n      Clause 6.3.2 of [802.1AX].\n\
    \   o  MAC-Reachability sub-TLV: The AA-LAALP-GROUP-MAC APPsub-TLV value\n   \
    \   contains the MAC-Reachability TLV as a sub-TLV (see [RFC6165];\n      n is\
    \ the number of MAC addresses present).  As specified in\n      Section 2.2 of\
    \ [RFC7356], the Type and Length fields of the\n      MAC-Reachability TLV are\
    \ encoded as unsigned 16-bit integers.  The\n      1-byte unsigned confidence\
    \ value, along with these TLVs, SHOULD be\n      set to prevail over those MAC\
    \ addresses learned from TRILL Data\n      decapsulation by remote edge RBridges.\n\
    \   This AA-LAALP-GROUP-MAC APPsub-TLV MUST be included in a TRILL\n   GENINFO\
    \ TLV [RFC7357] in the ESADI-LSP.  There may be more than one\n   occurrence of\
    \ such TRILL APPsub-TLVs in one ESADI-LSP fragment.\n   For those MAC addresses\
    \ contained in an AA-LAALP-GROUP-MAC\n   APPsub-TLV, this document applies.  Otherwise,\
    \ [RFC7357] applies.\n   For example, an AAE member RBridge continues to enclose\
    \ MAC addresses\n   learned from TRILL Data packet decapsulation in MAC-Reachability\
    \ TLVs\n   as per [RFC6165] and advertise them using the ESADI protocol.\n   When\
    \ the remote RBridge learns MAC addresses contained in the\n   AA-LAALP-GROUP-MAC\
    \ APPsub-TLV via the ESADI protocol [RFC7357], it\n   sends the packets destined\
    \ to these MAC addresses to the closest one\n   (the one to which the remote RBridge\
    \ has the least-cost forwarding\n   path) of those RBridges in the AAE identified\
    \ by the LAALP ID in the\n   AA-LAALP-GROUP-MAC APPsub-TLV.  If there are multiple\
    \ equal\n   least-cost member RBridges, the ingress RBridge is required to select\n\
    \   one of them in a pseudorandom way, as specified in Section 5.3 of\n   [RFC7357].\n\
    \   When another RBridge in the same AAE group receives an ESADI-LSP with\n  \
    \ the AA-LAALP-GROUP-MAC APPsub-TLV, it also learns MAC addresses of\n   those\
    \ end nodes served by the corresponding LAALP.  These MAC\n   addresses SHOULD\
    \ be learned as if those end nodes are locally\n   attached to this RBridge itself.\n\
    \   An AAE member RBridge MUST use the AA-LAALP-GROUP-MAC APPsub-TLV to\n   advertise\
    \ in ESADI the MAC addresses learned from a plain local link\n   (a non-LAALP\
    \ link) with Data Labels that happen to be covered by the\n   Data Labels of any\
    \ attached LAALP.  The reason is that MAC learning\n   from TRILL Data packet\
    \ decapsulation within these Data Labels at the\n   remote edge RBridge has normally\
    \ been disabled for this RBridge.\n   This APPsub-TLV changes whenever the MAC\
    \ reachability situation for\n   the LAALP changes.\n"
- title: 4.2.  Extended RBridge Capability Flags APPsub-TLV
  contents:
  - "4.2.  Extended RBridge Capability Flags APPsub-TLV\n   The following Extended\
    \ RBridge Capability Flags APPsub-TLV will be\n   included in E-L1FS FS-LSP fragment\
    \ zero [RFC7780] as an APPsub-TLV of\n   the TRILL GENINFO TLV:\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      | Type = EXTENDED-RBRIDGE-CAP   | (2 bytes)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      | Length                        | (2 bytes)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      | Topology                      | (2 bytes)\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |E|H|     Reserved                                              |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |\
    \         Reserved (continued)                                  |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: Extended RBridge Capability (TRILL APPsub-TLV type 254)\n   o  Length:\
    \ Set to 10.\n   o  Topology: Indicates the topology to which the capabilities\
    \ apply.\n      When this field is set to zero, either topologies are not in use\n\
    \      or the capabilities apply to all topologies [TRILL-MT].\n   o  E: Bit 0\
    \ of the capability bits.  When this bit is set, it\n      indicates that the\
    \ originating RBridge acts as specified in\n      Option B above.\n   o  H: Bit\
    \ 1 of the capability bits.  When this bit is set, it\n      indicates that the\
    \ originating RBridge keeps multiple MAC\n      attachments learned from TRILL\
    \ Data packet decapsulation with fast\n      path hardware; that is, it acts as\
    \ specified in Option A above.\n   o  Reserved: Flags extending from bit 2 through\
    \ bit 63 of the\n      capability bits.  Reserved for future use.  These MUST\
    \ be sent as\n      zero and ignored on receipt.\n   The Extended RBridge Capability\
    \ Flags TRILL APPsub-TLV is used to\n   notify other RBridges as to whether the\
    \ originating RBridge supports\n   the capability indicated by the E and H bits.\
    \  For example, if the\n   E bit is set, it indicates that the originating RBridge\
    \ will act as\n   defined in Option B.  That is, it will disable the MAC learning\
    \ from\n   TRILL Data packet decapsulation within Data Labels advertised by AAE\n\
    \   RBridges while waiting for the TRILL ESADI-LSPs to distribute the\n   {MAC,\
    \ Nickname, Data Label} association.  Meanwhile, this RBridge is\n   able to act\
    \ as an AAE RBridge.  It is required that MAC addresses\n   learned from local\
    \ LAALPs be advertised in TRILL ESADI-LSPs, using\n   the AA-LAALP-GROUP-MAC APPsub-TLV,\
    \ which is defined in Section 4.1.3.\n   If an RBridge in an AAE group, as specified\
    \ herein, observes a remote\n   RBridge interested in one or more of that AAE\
    \ group's Data Labels and\n   the remote RBridge does not support, as indicated\
    \ by its extended\n   capabilities, either Option A or Option B, then the AAE\
    \ group MUST\n   fall back to active-standby mode.\n   This APPsub-TLV is expected\
    \ to rarely change, as it only needs to be\n   updated when RBridge capabilities\
    \ change, e.g., due to an upgrade or\n   reconfiguration.\n"
- title: 5.  Meeting the Design Goals
  contents:
  - "5.  Meeting the Design Goals\n   This section explores how this specification\
    \ meets the major design\n   goals of AAE.\n"
- title: 5.1.  No MAC Address Flip-Flopping (Normal Unicast Egress)
  contents:
  - "5.1.  No MAC Address Flip-Flopping (Normal Unicast Egress)\n   Since all RBridges\
    \ talking with the AAE RBridges in the campus are\n   able to see multiple attachments\
    \ for one MAC address in ESADI\n   [RFC7357], a MAC address learned from one AAE\
    \ member will not be\n   overwritten by the same MAC address learned from another\
    \ AAE member.\n   Although multiple entries for this MAC address will be created,\
    \ for\n   return traffic the remote RBridge is required to consistently use one\n\
    \   of the attachments for each MAC address rather than flip-flopping\n   among\
    \ them (see Section 4.2.6 of [RFC6325] and Section 5.3 of\n   [RFC7357]).\n"
- title: 5.2.  Regular Unicast/Multicast Ingress
  contents:
  - "5.2.  Regular Unicast/Multicast Ingress\n   LAALP guarantees that each frame\
    \ will be sent to the AAE via exactly\n   one uplink.  RBridges in the AAE simply\
    \ follow the process per\n   [RFC6325] to ingress the frame.  For example, each\
    \ RBridge uses its\n   own nickname as the ingress nickname to encapsulate the\
    \ frame.  In\n   such a scenario, each RBridge takes for granted that it is the\n\
    \   Appointed Forwarder for the VLANs enabled on the uplink of the LAALP.\n"
- title: 5.3.  Correct Multicast Egress
  contents:
  - "5.3.  Correct Multicast Egress\n   A fundamental design goal of AAE is that there\
    \ must be no duplication\n   or forwarding loop.\n"
- title: 5.3.1.  No Duplication (Single Exit Point)
  contents:
  - "5.3.1.  No Duplication (Single Exit Point)\n   When multi-destination TRILL Data\
    \ packets for a specific Data Label\n   are received from the campus, it is important\
    \ that exactly one\n   RBridge out of the AAE group let through each multi-destination\n\
    \   packet so that no duplication will happen.  The LAALP will have\n   defined\
    \ its selection function (using hashing or an election\n   algorithm) to designate\
    \ a forwarder for a multi-destination frame.\n   Since AAE member RBridges support\
    \ the LAALP, they are able to utilize\n   that selection function to determine\
    \ the single exit point.  If the\n   output of the selection function points to\
    \ the port attached to the\n   receiving RBridge itself (i.e., the packet should\
    \ be egressed out of\n   this node), the receiving RBridge MUST egress this packet\
    \ for that\n   AAE group.  Otherwise, the packet MUST NOT be egressed for that\
    \ AAE\n   group.  (For ports that lead to non-AAE links, the receiving RBridge\n\
    \   determines whether to egress the packet or not, according to\n   [RFC6325],\
    \ which is updated by [RFC7172].)\n"
- title: 5.3.2.  No Echo (Split Horizon)
  contents:
  - "5.3.2.  No Echo (Split Horizon)\n   When a multi-destination frame originated\
    \ from an LAALP is ingressed\n   by an RBridge of an AAE group, distributed to\
    \ the TRILL network, and\n   then received by another RBridge in the same AAE\
    \ group, it is\n   important that this receiving RBridge does not egress this\
    \ frame back\n   to this LAALP.  Otherwise, it will cause a forwarding loop (echo).\n\
    \   The well-known \"split horizon\" technique (as discussed in\n   Section 2.2.1\
    \ of [RFC1058]) is used to eliminate the echo issue.\n   RBridges in the AAE group\
    \ need to perform split horizon based on the\n   ingress RBridge nickname plus\
    \ the VLAN of the TRILL Data packet.\n   They need to set up per-port filtering\
    \ lists consisting of the tuple\n   of <ingress nickname, VLAN>.  Packets with\
    \ information matching any\n   entry in the filtering list MUST NOT be egressed\
    \ out of that port.\n   The information for such filters is obtained by listening\
    \ to the\n   AA-LAALP-GROUP-RBRIDGES TRILL APPsub-TLVs, as defined in\n   Section\
    \ 4.1.2.  Note that all enabled VLANs MUST be consistent on all\n   ports connected\
    \ to an LAALP.  So, the enabled VLANs need not be\n   included in these TRILL\
    \ APPsub-TLVs.  They can be locally obtained\n   from the port attached to that\
    \ LAALP.  By parsing these APPsub-TLVs,\n   the receiving RBridge discovers all\
    \ other RBridges connected to the\n   same LAALP.  The Sender Nickname of the\
    \ originating RBridge will be\n   added to the filtering list of the port attached\
    \ to the LAALP.  For\n   example, RB3 in Figure 1 will set up a filtering list\
    \ that looks like\n   {<RB1, VLAN 10>, <RB2, VLAN 10>} on its port attached to\
    \ LAALP1.\n   According to split horizon, TRILL Data packets within VLAN 10\n\
    \   ingressed by RB1 or RB2 will not be egressed out of this port.\n   When there\
    \ are multiple LAALPs connected to the same RBridge, these\n   LAALPs may have\
    \ VLANs that overlap.  Here, a VLAN overlap means that\n   this VLAN ID is enabled\
    \ by multiple LAALPs.  A customer may require\n   that hosts within these overlapped\
    \ VLANs communicate with each other.\n   Appendix A provides several scenarios\
    \ to explain how hosts\n   communicate within the overlapped VLANs and how split\
    \ horizon\n   happens.\n"
- title: 5.4.  No Black-Hole or Triangular Forwarding
  contents:
  - "5.4.  No Black-Hole or Triangular Forwarding\n   If a sub-link of the LAALP fails\
    \ while remote RBridges continue to\n   send packets towards the failed port,\
    \ a black-hole happens.  If the\n   AAE member RBridge with that failed port starts\
    \ to redirect the\n   packets to other member RBridges for delivery, triangular\
    \ forwarding\n   occurs.\n   The member RBridge attached to the failed sub-link\
    \ makes use of the\n   ESADI protocol to flush those MAC addresses affected by\
    \ the failure,\n   as defined in Section 5.2 of [RFC7357].  After doing that,\
    \ no packets\n   will be sent towards the failed port, and hence no black-hole\
    \ will\n   happen.  Nor will the member RBridge need to redirect packets to\n\
    \   other member RBridges; thus, triangular forwarding is avoided.\n"
- title: 5.5.  Load Balance towards the AAE
  contents:
  - "5.5.  Load Balance towards the AAE\n   Since a remote RBridge can see multiple\
    \ attachments of one MAC\n   address in ESADI, this remote RBridge can choose\
    \ to spread the\n   traffic towards the AAE members on a per-flow basis.  Each\
    \ of them is\n   able to act as the egress point.  In doing this, the forwarding\
    \ paths\n   need not be limited to the least-cost path selection from the ingress\n\
    \   RBridge to the AAE RBridges.  The traffic load from the remote\n   RBridge\
    \ towards the AAE RBridges can be balanced based on a\n   pseudorandom selection\
    \ method (see Section 4.1.3).\n   Note that the load-balance method adopted at\
    \ a remote ingress RBridge\n   is not to replace the load-balance mechanism of\
    \ LAALP.  These two\n   load-spreading mechanisms should take effect separately.\n"
- title: 5.6.  Scalability
  contents:
  - "5.6.  Scalability\n   With Option A, multiple attachments need to be recorded\
    \ for a MAC\n   address learned from AAE RBridges.  More entries may be consumed\
    \ in\n   the MAC learning table.  However, MAC addresses attached to an LAALP\n\
    \   are usually only a small part of all MAC addresses in the whole TRILL\n  \
    \ campus.  As a result, the extra table memory space required by\n   multi-attached\
    \ MAC addresses can usually be accommodated in an\n   RBridge's unused MAC table\
    \ space.\n   With Option B, remote RBridges will keep the multiple attachments\
    \ of\n   a MAC address in the ESADI link-state databases, which are usually\n\
    \   maintained by software.  In the MAC table, which is normally\n   implemented\
    \ in hardware, an RBridge still establishes only one entry\n   for each MAC address.\n"
- title: 6.  E-L1FS Backward Compatibility
  contents:
  - "6.  E-L1FS Backward Compatibility\n   The Extended TLVs defined in Sections 4.1.2,\
    \ 4.1.3, and 4.2 of this\n   document are to be used in an Extended Level 1 Flooding\
    \ Scope\n   (E-L1FS) PDU [RFC7356] [RFC7780].  For those RBridges that do not\n\
    \   support E-L1FS, the EXTENDED-RBRIDGE-CAP TRILL APPsub-TLV will not be\n  \
    \ sent out either, and MAC multi-attach active-active is not supported.\n"
- title: 7.  Security Considerations
  contents:
  - "7.  Security Considerations\n   For security considerations pertaining to extensions\
    \ transported by\n   TRILL ESADI, see the Security Considerations section in [RFC7357].\n\
    \   For extensions not transported by TRILL ESADI, RBridges may be\n   configured\
    \ to include the IS-IS Authentication TLV (10) in the IS-IS\n   PDUs to use IS-IS\
    \ security [RFC5304] [RFC5310].\n   Since currently deployed LAALPs [RFC7379]\
    \ are proprietary, security\n   over membership in, and internal management of,\
    \ AAE groups is\n   proprietary.  In environments where the above authentication\
    \ is not\n   adopted, a rogue RBridge that insinuates itself into an AAE group\
    \ can\n   disrupt end-station traffic flowing into or out of that group.  For\n\
    \   example, if there are N RBridges in the group, it could typically\n   control\
    \ 1/Nth of the traffic flowing out of that group and a similar\n   amount of unicast\
    \ traffic flowing into that group.\n   For general TRILL security considerations,\
    \ see [RFC6325].\n"
- title: 8.  IANA Considerations
  contents:
  - '8.  IANA Considerations

    '
- title: 8.1.  TRILL APPsub-TLVs
  contents:
  - "8.1.  TRILL APPsub-TLVs\n   IANA has allocated three new types under the TRILL\
    \ GENINFO TLV\n   [RFC7357] for the TRILL APPsub-TLVs defined in Sections 4.1.2,\
    \ 4.1.3,\n   and 4.2 of this document.  The following entries have been added\
    \ to\n   the \"TRILL APPsub-TLV Types under IS-IS TLV 251 Application\n   Identifier\
    \ 1\" registry on the TRILL Parameters IANA web page.\n      Type   Name     \
    \                Reference\n      ----   ----                     ---------\n\
    \      252    AA-LAALP-GROUP-RBRIDGES  RFC 7782\n      253    AA-LAALP-GROUP-MAC\
    \       RFC 7782\n      254    EXTENDED-RBRIDGE-CAP     RFC 7782\n"
- title: 8.2.  Extended RBridge Capabilities Registry
  contents:
  - "8.2.  Extended RBridge Capabilities Registry\n   IANA has created a registry\
    \ under the \"Transparent\n   Interconnection of Lots of Links (TRILL) Parameters\"\
    \ registry\n   as follows:\n   Name: Extended RBridge Capabilities\n   Registration\
    \ Procedure: Expert Review\n   Reference: RFC 7782\n      Bit   Mnemonic  Description\
    \       Reference\n      ----  --------  -----------       ---------\n      0\
    \     E         Option B Support  RFC 7782\n      1     H         Option A Support\
    \  RFC 7782\n      2-63  -         Unassigned\n"
- title: 8.3.  Active-Active Flags
  contents:
  - "8.3.  Active-Active Flags\n   IANA has allocated two flag bits, with mnemonic\
    \ \"AA\", as follows:\n   One flag bit is allocated from the Interested VLANs\
    \ Flag Bits.\n      Bit   Mnemonic  Description              Reference\n     \
    \ ---   --------  -----------              ---------\n      16    AA        VLANs\
    \ for Active-Active  RFC 7782\n   One flag bit is allocated from the Interested\
    \ Labels Flag Bits.\n      Bit   Mnemonic  Description               Reference\n\
    \      ---   --------  -----------               ---------\n      4     AA   \
    \     FGLs for Active-Active    RFC 7782\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [802.1AX]  IEEE, \"IEEE Standard for Local and\
    \ metropolitan area\n              networks - Link Aggregation\", IEEE Std 802.1AX-2014,\n\
    \              DOI 10.1109/IEEESTD.2014.7055197, December 2014.\n   [RFC2119]\
    \  Bradner, S., \"Key words for use in RFCs to Indicate\n              Requirement\
    \ Levels\", BCP 14, RFC 2119,\n              DOI 10.17487/RFC2119, March 1997,\n\
    \              <http://www.rfc-editor.org/info/rfc2119>.\n   [RFC6165]  Banerjee,\
    \ A. and D. Ward, \"Extensions to IS-IS for Layer-2\n              Systems\",\
    \ RFC 6165, DOI 10.17487/RFC6165, April 2011,\n              <http://www.rfc-editor.org/info/rfc6165>.\n\
    \   [RFC6325]  Perlman, R., Eastlake 3rd, D., Dutt, D., Gai, S., and A.\n    \
    \          Ghanwani, \"Routing Bridges (RBridges): Base Protocol\n           \
    \   Specification\", RFC 6325, DOI 10.17487/RFC6325, July 2011,\n            \
    \  <http://www.rfc-editor.org/info/rfc6325>.\n   [RFC6439]  Perlman, R., Eastlake,\
    \ D., Li, Y., Banerjee, A., and F.\n              Hu, \"Routing Bridges (RBridges):\
    \ Appointed Forwarders\",\n              RFC 6439, DOI 10.17487/RFC6439, November\
    \ 2011,\n              <http://www.rfc-editor.org/info/rfc6439>.\n   [RFC7172]\
    \  Eastlake 3rd, D., Zhang, M., Agarwal, P., Perlman, R., and\n              D.\
    \ Dutt, \"Transparent Interconnection of Lots of Links\n              (TRILL):\
    \ Fine-Grained Labeling\", RFC 7172,\n              DOI 10.17487/RFC7172, May\
    \ 2014,\n              <http://www.rfc-editor.org/info/rfc7172>.\n   [RFC7176]\
    \  Eastlake 3rd, D., Senevirathne, T., Ghanwani, A., Dutt,\n              D.,\
    \ and A. Banerjee, \"Transparent Interconnection of Lots\n              of Links\
    \ (TRILL) Use of IS-IS\", RFC 7176,\n              DOI 10.17487/RFC7176, May 2014,\n\
    \              <http://www.rfc-editor.org/info/rfc7176>.\n   [RFC7177]  Eastlake\
    \ 3rd, D., Perlman, R., Ghanwani, A., Yang, H., and\n              V. Manral,\
    \ \"Transparent Interconnection of Lots of Links\n              (TRILL): Adjacency\"\
    , RFC 7177, DOI 10.17487/RFC7177,\n              May 2014, <http://www.rfc-editor.org/info/rfc7177>.\n\
    \   [RFC7356]  Ginsberg, L., Previdi, S., and Y. Yang, \"IS-IS Flooding\n    \
    \          Scope Link State PDUs (LSPs)\", RFC 7356,\n              DOI 10.17487/RFC7356,\
    \ September 2014,\n              <http://www.rfc-editor.org/info/rfc7356>.\n \
    \  [RFC7357]  Zhai, H., Hu, F., Perlman, R., Eastlake 3rd, D., and O.\n      \
    \        Stokes, \"Transparent Interconnection of Lots of Links\n            \
    \  (TRILL): End Station Address Distribution Information\n              (ESADI)\
    \ Protocol\", RFC 7357, DOI 10.17487/RFC7357,\n              September 2014, <http://www.rfc-editor.org/info/rfc7357>.\n\
    \   [RFC7780]  Eastlake 3rd, D., Zhang, M., Perlman, R., Banerjee, A.,\n     \
    \         Ghanwani, A., and S. Gupta, \"Transparent Interconnection\n        \
    \      of Lots of Links (TRILL): Clarifications, Corrections, and\n          \
    \    Updates\", RFC 7780, DOI 10.17487/RFC7780, February 2016,\n             \
    \ <http://www.rfc-editor.org/info/rfc7780>.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [IS-IS]    International Organization for Standardization,\n\
    \              \"Information technology -- Telecommunications and\n          \
    \    information exchange between systems -- Intermediate\n              System\
    \ to Intermediate System intra-domain routeing\n              information exchange\
    \ protocol for use in conjunction with\n              the protocol for providing\
    \ the connectionless-mode network\n              service (ISO 8473)\", ISO/IEC\
    \ 10589:2002, Second Edition,\n              November 2002.\n   [RFC1058]  Hedrick,\
    \ C., \"Routing Information Protocol\", RFC 1058,\n              DOI 10.17487/RFC1058,\
    \ June 1988,\n              <http://www.rfc-editor.org/info/rfc1058>.\n   [RFC5304]\
    \  Li, T. and R. Atkinson, \"IS-IS Cryptographic\n              Authentication\"\
    , RFC 5304, DOI 10.17487/RFC5304,\n              October 2008, <http://www.rfc-editor.org/info/rfc5304>.\n\
    \   [RFC5310]  Bhatia, M., Manral, V., Li, T., Atkinson, R., White, R.,\n    \
    \          and M. Fanto, \"IS-IS Generic Cryptographic\n              Authentication\"\
    , RFC 5310, DOI 10.17487/RFC5310,\n              February 2009, <http://www.rfc-editor.org/info/rfc5310>.\n\
    \   [RFC7379]  Li, Y., Hao, W., Perlman, R., Hudson, J., and H. Zhai,\n      \
    \        \"Problem Statement and Goals for Active-Active Connection\n        \
    \      at the Transparent Interconnection of Lots of Links\n              (TRILL)\
    \ Edge\", RFC 7379, DOI 10.17487/RFC7379,\n              October 2014, <http://www.rfc-editor.org/info/rfc7379>.\n\
    \   [RFC7781]  Zhai, H., Senevirathne, T., Perlman, R., Zhang, M., and Y.\n  \
    \            Li, \"Transparent Interconnection of Lots of Links (TRILL):\n   \
    \           Pseudo-Nickname for Active-Active Access\", RFC 7781,\n          \
    \    DOI 10.17487/RFC7781, February 2016,\n              <http://www.rfc-editor.org/info/rfc7781>.\n\
    \   [TRILL-MT] Eastlake 3rd, D., Zhang, M., Banerjee, A., and V. Manral,\n   \
    \           \"TRILL: Multi-Topology\", Work in Progress,\n              draft-ietf-trill-multi-topology-00,\
    \ September 2015.\n"
- title: Appendix A.  Scenarios for Split Horizon
  contents:
  - "Appendix A.  Scenarios for Split Horizon\n   +------------------+   +------------------+\
    \   +------------------+\n   |        RB1       |   |        RB2       |   | \
    \       RB3       |\n   +------------------+   +------------------+   +------------------+\n\
    \   L1       L2       L3   L1       L2       L3   L1       L2       L3\n   VL10-20\
    \  VL15-25  VL15 VL10-20  VL15-25  VL15 VL10-20  VL15-25  VL15\n   LAALP1   LAALP2\
    \   LAN  LAALP1   LAALP2   LAN  LAALP1   LAALP2   LAN\n   B1       B2       B10\
    \  B1       B2       B20  B1       B2       B30\n          Figure 2: An Example\
    \ Topology to Explain Split Horizon\n   Suppose that RB1, RB2, and RB3 are the\
    \ active-active group connecting\n   LAALP1 and LAALP2.  LAALP1 and LAALP2 are\
    \ connected to B1 and B2 at\n   their other ends.  Suppose that all these RBridges\
    \ use port L1 to\n   connect LAALP1 while they use port L2 to connect LAALP2.\
    \  Assume that\n   all three L1 ports enable VLANs 10-20 while all three L2 ports\
    \ enable\n   VLANs 15-25, so that there is an overlap of VLANs 15-20.  A customer\n\
    \   may require that hosts within these overlapped VLANs communicate with\n  \
    \ each other.  That is, hosts attached to B1 in VLANs 15-20 need to\n   communicate\
    \ with hosts attached to B2 in VLANs 15-20.  Assume that\n   the remote plain\
    \ RBridge RB4 also has hosts attached in VLANs 15-20\n   that need to communicate\
    \ with those hosts in these VLANs attached to\n   B1 and B2.\n   There are two\
    \ major requirements:\n   1. Frames ingressed from RB1-L1-VLANs 15-20 MUST NOT\
    \ be egressed out\n      of ports RB2-L1 and RB3-L1.\n   2. At the same time,\
    \ frames coming from B1-VLANs 15-20 should reach\n      B2-VLANs 15-20.\n   RB3\
    \ stores the information for split horizon on its ports L1 and L2.\n      On L1:\
    \ {<ingress_nickname_RB1, VLANs 10-20>,\n         <ingress_nickname_RB2, VLANs\
    \ 10-20>}.\n      On L2: {<ingress_nickname_RB1, VLANs 15-25>,\n         <ingress_nickname_RB2,\
    \ VLANs 15-25>}.\n   Five clarification scenarios follow:\n   a. Suppose that\
    \ RB2 or RB3 receives a TRILL multi-destination data\n      packet with VLAN 15\
    \ and ingress_nickname_RB1.  RB3 is the single\n      exit point (selected according\
    \ to the hashing function of LAALP)\n      for this packet.  On ports L1 and L2,\
    \ RB3 has covered\n      <ingress_nickname_RB1, VLAN 15>, so that RB3 will not\
    \ egress this\n      packet out of either L1 or L2.  Here, \"split horizon\" happens.\n\
    \      Beforehand, RB1 obtains a native frame on port L1 from B1 in\n      VLAN\
    \ 15.  RB1 determines that it should be forwarded as a\n      multi-destination\
    \ packet across the TRILL campus.  Also, RB1\n      replicates this frame without\
    \ TRILL encapsulation and sends it out\n      of port L2, so that B2 will get\
    \ this frame.\n   b. Suppose that RB2 or RB3 receives a TRILL multi-destination\
    \ data\n      packet with VLAN 15 and ingress_nickname_RB4.  RB3 is the single\n\
    \      exit point.  On ports L1 and L2, since RB3 has not stored any\n      tuple\
    \ with ingress_nickname_RB4, RB3 will decapsulate the packet\n      and egress\
    \ it out of both ports L1 and L2.  So, both B1 and B2\n      will receive the\
    \ frame.\n   c. Suppose that there is a plain LAN link port L3 on RB1, RB2, and\n\
    \      RB3, connecting to B10, B20, and B30, respectively.  These L3\n      ports\
    \ happen to be configured with VLAN 15.  On port L3, RB2 and\n      RB3 store\
    \ no information for split horizon for AAE (since this\n      port has not been\
    \ configured to be in any LAALP).  They will\n      egress the packet ingressed\
    \ from RB1-L1 in VLAN 15.\n   d. If a packet is ingressed from RB1-L1 or RB1-L2\
    \ with VLAN 15,\n      port RB1-L3 will not egress packets with ingress_nickname_RB1.\n\
    \      RB1 needs to replicate this frame without encapsulation and sends\n   \
    \   it out of port L3.  This kind of \"bounce\" behavior for\n      multi-destination\
    \ frames is just as specified in paragraph 3 of\n      Section 4.6.1.2 of [RFC6325].\n\
    \   e. If a packet is ingressed from RB1-L3, since RB1-L1 and RB1-L2\n      cannot\
    \ egress packets with VLAN 15 and ingress_nickname_RB1, RB1\n      needs to replicate\
    \ this frame without encapsulation and sends it\n      out of ports L1 and L2.\
    \  (Also see paragraph 3 of Section 4.6.1.2\n      of [RFC6325].)\n"
- title: Acknowledgments
  contents:
  - "Acknowledgments\n   The authors would like to thank the following people for\
    \ their\n   comments and suggestions: Andrew Qu, Donald Eastlake, Erik Nordmark,\n\
    \   Fangwei Hu, Liang Xia, Weiguo Hao, Yizhou Li, and Mukhtiar Shaikh.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Mingui Zhang\n   Huawei Technologies\n   No. 156 Beiqing\
    \ Rd., Haidian District\n   Beijing  100095\n   China\n   Email: zhangmingui@huawei.com\n\
    \   Radia Perlman\n   EMC\n   2010 256th Avenue NE, #200\n   Bellevue, WA  98007\n\
    \   United States\n   Email: radia@alum.mit.edu\n   Hongjun Zhai\n   Nanjing Astute\
    \ Software Technology Co. Ltd\n   57 Andemen Avenue, Yuhuatai District\n   Nanjing,\
    \ Jiangsu  210016\n   China\n   Email: honjun.zhai@tom.com\n   Muhammad Durrani\n\
    \   Cisco Systems\n   170 West Tasman Dr.\n   San Jose, CA  95134\n   United States\n\
    \   Email: mdurrani@cisco.com\n   Sujay Gupta\n   IP Infusion\n   RMZ Centennial\n\
    \   Mahadevapura Post\n   Bangalore  560048\n   India\n   Email: sujay.gupta@ipinfusion.com\n"
