- title: __initial_text__
  contents:
  - "                   Session Initiation Protocol (SIP)\n          Public Switched\
    \ Telephone Network (PSTN) Call Flows\n"
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This document specifies an Internet Best Current Practices\
    \ for the\n   Internet Community, and requests discussion and suggestions for\n\
    \   improvements.  Distribution of this memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2003).  All Rights Reserved.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document contains best current practice examples of Session\n\
    \   Initiation Protocol (SIP) call flows showing interworking with the\n   Public\
    \ Switched Telephone Network (PSTN).  Elements in these call\n   flows include\
    \ SIP User Agents, SIP Proxy Servers, and PSTN Gateways.\n   Scenarios include\
    \ SIP to PSTN, PSTN to SIP, and PSTN to PSTN via SIP.\n   PSTN telephony protocols\
    \ are illustrated using ISDN (Integrated\n   Services Digital Network), ISUP (ISDN\
    \ User Part), and FGB (Feature\n   Group B) circuit associated signaling.  PSTN\
    \ calls are illustrated\n   using global telephone numbers from the PSTN and private\
    \ extensions\n   served on by a PBX (Private Branch Exchange).  Call flow diagrams\
    \ and\n   message details are shown.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Overview.....................................................\
    \   2\n       1.1.  General Assumptions....................................  \
    \ 3\n       1.2.  Legend for Message Flows...............................   4\n\
    \       1.3.  SIP Protocol Assumptions...............................   5\n  \
    \ 2.  SIP to PSTN Dialing..........................................   6\n    \
    \   2.1.  Successful SIP to ISUP PSTN call.......................   7\n      \
    \ 2.2.  Successful SIP to ISDN PBX call........................  15\n       2.3.\
    \  Successful SIP to ISUP PSTN call with overflow.........  23\n       2.4.  Session\
    \ established using ENUM Query...................  32\n       2.5.  Unsuccessful\
    \ SIP to PSTN call: Treatment from PSTN.....  38\n       2.6.  Unsuccessful SIP\
    \ to PSTN: REL w/Cause from PSTN........  45\n       2.7.  Unsuccessful SIP to\
    \ PSTN: ANM Timeout..................  49\n   3.  PSTN to SIP Dialing..........................................\
    \  54\n       3.1.  Successful PSTN to SIP call............................  55\n\
    \       3.2.  Successful PSTN to SIP call, Fast Answer...............  62\n  \
    \     3.3.  Successful PBX to SIP call.............................  68\n    \
    \   3.4.  Unsuccessful PSTN to SIP REL, SIP error mapped to REL..  74\n      \
    \ 3.5.  Unsuccessful PSTN to SIP REL, SIP busy mapped to REL...  76\n       3.6.\
    \  Unsuccessful PSTN->SIP, SIP error interworking to tones  80\n       3.7.  Unsuccessful\
    \ PSTN->SIP, ACM timeout....................  84\n       3.8.  Unsuccessful PSTN->SIP,\
    \ ACM timeout, stateless Proxy...  88\n       3.9.  Unsuccessful PSTN->SIP, Caller\
    \ Abandonment.............  91\n   4.  PSTN to PSTN Dialing via SIP Network.........................\
    \  96\n       4.1.  Successful ISUP PSTN to ISUP PSTN call.................  97\n\
    \       4.2.  Successful FGB PBX to ISDN PBX call with overflow...... 105\n  \
    \ 5.  Security Considerations...................................... 113\n   6.\
    \  References................................................... 115\n       6.1.\
    \  Normative References................................... 115\n       6.2.  Informative\
    \ References................................. 115\n   7.  Acknowledgments..............................................\
    \ 116\n   8.  Intellectual Property Statement.............................. 116\n\
    \   9.  Authors' Addresses........................................... 117\n  \
    \ 10. Full Copyright Statement..................................... 118\n"
- title: 1.  Overview
  contents:
  - "1.  Overview\n   The call flows shown in this document were developed in the\
    \ design of\n   a SIP IP communications network.  They represent an example of\
    \ a\n   minimum set of functionality.\n   It is the hope of the authors that this\
    \ document will be useful for\n   SIP implementers, designers, and protocol researchers\
    \ alike and will\n   help further the goal of a standard implementation of RFC\
    \ 3261 [2].\n   These flows represent carefully checked and working group reviewed\n\
    \   scenarios of the most common SIP/PSTN interworking examples as a\n   companion\
    \ to the specifications.\n   These call flows are based on the current version\
    \ 2.0 of SIP in RFC\n   3261 [2] with SDP usage described in RFC 3264 [3].  Other\
    \ RFCs also\n   comprise the SIP standard but are not used in this set of basic\
    \ call\n   flows.  The SIP/ISUP mapping is based on RFC 3398 [4].\n   Various\
    \ PSTN signaling protocols are illustrated in this document:\n   ISDN (Integrated\
    \ Services Digital Network), ISUP (ISDN User Part) and\n   FGB (Feature Group\
    \ B) circuit associated signaling.  This document\n   shows mainly ANSI ISUP due\
    \ to its practical origins.  However, as\n   used in this document, the usage\
    \ is virtually identical to the ITU-T\n   International ISUP used as the reference\
    \ in [4].\n   Basic SIP call flow examples are contained in a companion document,\n\
    \   RFC 3665 [10].\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"\
    SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\"\
    , and \"OPTIONAL\" in this\n   document are to be interpreted as described in\
    \ BCP 14, RFC 2119 [1].\n"
- title: 1.1.  General Assumptions
  contents:
  - "1.1.  General Assumptions\n   A number of architecture, network, and protocol\
    \ assumptions underlie\n   the call flows in this document.  Note that these assumptions\
    \ are not\n   requirements.  They are outlined in this section so that they may\
    \ be\n   taken into consideration and to aid in the understanding of the call\n\
    \   flow examples.\n   The authentication of SIP User Agents in these example\
    \ call flows is\n   performed using HTTP Digest as defined in [3] and [5].\n \
    \  Some Proxy Servers in these call flows insert Record-Route headers\n   into\
    \ requests to ensure that they are in the signaling path for\n   future message\
    \ exchanges.\n   These flows show TLS, TCP, and UDP for transport.  SCTP could\
    \ also be\n   used.  See the discussion in RFC 3261 [2] for details on the\n \
    \  transport issues for SIP.\n   The SIP Proxy Server has access to a Location\
    \ Service and other\n   databases.  Information present in the Request-URI and\
    \ the context\n   (From header) is sufficient to determine to which proxy or gateway\n\
    \   the message should be routed.  In most cases, a primary and secondary\n  \
    \ route will be determined in case of a Proxy or Gateway failure\n   downstream.\n\
    \   Gateways provide tones (ringing, busy, etc) and announcements to the\n   PSTN\
    \ side based on SIP response messages, or pass along audio in-band\n   tones (ringing,\
    \ busy tone, etc.) in an early media stream to the SIP\n   side.\n   The interactions\
    \ between the Proxy and Gateway can be summarized as\n   follows:\n   -  The SIP\
    \ Proxy Server performs digit analysis and lookup and\n      locates the correct\
    \ gateway.\n   -  The SIP Proxy Server performs gateway location based on primary\n\
    \      and secondary routing.\n   Telephone numbers are usually represented as\
    \ SIP URIs.  Note that an\n   alternative is the use of the tel URI [6].\n   This\
    \ document shows typical examples of SIP/ISUP interworking.\n   Although in the\
    \ spirit of the SIP-T framework [7], these examples do\n   not represent a complete\
    \ implementation of the framework.  The\n   examples here represent more of a\
    \ minimal set of examples for very\n   basic SIP to ISUP interworking, rather\
    \ than the more complex goal of\n   ISUP transparency.  In particular, there are\
    \ NO examples of\n   encapsulated ISUP in this document.  If present, these messages\
    \ would\n   show S/MIME encryption due to the sensitive nature of this\n   information,\
    \ as discussed in the SIP-T Framework security\n   considerations section.  (Note\
    \ - RFC 3204 [8] contains an example of\n   an INVITE with encapsulated ISUP.)\
    \  See the Security Considerations\n   section for a more detailed discussion\
    \ on the security of these call\n   flows.\n   In ISUP, the Calling Party Number\
    \ is abbreviated as CgPN and the\n   Called Party Number is abbreviated as CdPN.\
    \  Other abbreviations\n   include Numbering Plan Indicator (NPI) and Nature of\
    \ Address (NOA).\n"
- title: 1.2.  Legend for Message Flows
  contents:
  - "1.2.  Legend for Message Flows\n   Dashed lines (---) represent signaling messages\
    \ that are mandatory to\n   the call scenario.  These messages can be SIP or PSTN\
    \ signaling.  The\n   arrow indicates the direction of message flow.\n   Double\
    \ dashed lines (===) represent media paths between network\n   elements.\n   Messages\
    \ with parentheses around their name represent optional\n   messages.\n   Messages\
    \ are identified in the Figures as F1, F2, etc.  This\n   references the message\
    \ details in the list that follows the Figure.\n   Comments in the message details\
    \ are shown in the following form:\n      /* Comments. */\n"
- title: 1.3.  SIP Protocol Assumptions
  contents:
  - "1.3.  SIP Protocol Assumptions\n   This document does not prescribe the flows\
    \ precisely as they are\n   shown, but rather the flows illustrate the principles\
    \ for best\n   practice.  They are best practices usages (orderings, syntax,\n\
    \   selection of features for the purpose, handling of error) of SIP\n   methods,\
    \ headers and parameters.  IMPORTANT: The exact flows here\n   must not be copied\
    \ as is by an implementer due to specific incorrect\n   characteristics that were\
    \ introduced into the document for\n   convenience and are listed below.  To sum\
    \ up, the SIP/PSTN call flows\n   represent well-reviewed examples of SIP usage,\
    \ which are best common\n   practice according to IETF consensus.\n   For simplicity\
    \ in reading and editing the document, there are a\n   number of differences between\
    \ some of the examples and actual SIP\n   messages.  For example, the SIP Digest\
    \ responses are not actual MD5\n   encodings.  Call-IDs are often repeated, and\
    \ CSeq counts often begin\n   at 1.  Header fields are usually shown in the same\
    \ order.  Usually\n   only the minimum required header field set is shown, others\
    \ that\n   would normally be present, such as Accept, Supported, Allow, etc. are\n\
    \   not shown.\n   Actors:\n   Element       Display Name   URI              \
    \          IP Address\n   -------       ------------   ---                   \
    \     ----------\n   User Agent    Alice          sip:alice@a.example.com    192.0.2.101\n\
    \   User Agent    Bob            sip:bob@b.example.com      192.0.2.200\n   Proxy\
    \ Server                 sip:ss1.a.example.com      192.0.2.111\n   User Agent\
    \ (Gateway)         sip:gw1.a.example.com      192.0.2.201\n   User Agent (Gateway)\
    \         sip:gw2.a.example.com      192.0.2.202\n   User Agent (Gateway)    \
    \     sip:gw3.a.example.com      192.0.2.203\n   User Agent (Gateway)        \
    \ sip:ngw1.a.example.com     192.0.2.103\n   User Agent (Gateway)         sip:ngw2.a.example.com\
    \     192.0.2.102\n   Note that NGW 1 and NGW 2 also have device URIs (Contacts)\
    \ of\n   sip:ngw1@a.example.com and sip:ngw2@a.example.com which resolve to\n\
    \   the Proxy Server sip:ss1.wcom.com using DNS SRV records.\n"
- title: 2.  SIP to PSTN Dialing
  contents:
  - "2.  SIP to PSTN Dialing\n   In the following scenarios, Alice (sip:alice@a.example.com)\
    \ is a SIP\n   phone or other SIP-enabled device.  Bob is reachable via the PSTN\
    \ at\n   global telephone number +19725552222.  Alice places a call to Bob\n \
    \  through a Proxy Server, Proxy 1, and a Network Gateway.  In other\n   scenarios,\
    \ Alice places calls to Carol, who is served via a PBX\n   (Private Branch Exchange)\
    \ and is identified by a private extension\n   444-3333, or global number +1-918-555-3333.\
    \  Note that Alice uses\n   his/her global telephone number +1-314-555-1111 in\
    \ the From header in\n   the INVITE messages.  This then gives the Gateway the\
    \ option of using\n   this header to populate the calling party identification\
    \ field in\n   subsequent signaling.  Left open is the issue of how the Gateway\
    \ can\n   determine the accuracy of the telephone number which is necessary\n\
    \   before passing it as a valid calling party number in the PSTN.\n   In these\
    \ scenarios, Alice is a SIP phone or other SIP-enabled device.\n   Alice places\
    \ a call to Bob in the PSTN or Carol on a PBX through a\n   Proxy Server and a\
    \ Gateway.\n   In the failure scenarios, the call does not complete.  In some\
    \ cases\n   however, a media stream is still setup.  This is due to the fact that\n\
    \   some failures in dialing to the PSTN result in in-band tones (busy,\n   reorder\
    \ tones or announcements - \"The number you have dialed has\n   changed.  The\
    \ new number is...\").  The 183 Session Progress response\n   containing SDP media\
    \ information is used to setup this early media\n   path so that the caller Alice\
    \ knows the final disposition of the\n   call.\n   The media stream is either\
    \ terminated by the caller after the tone or\n   announcement has been heard and\
    \ understood, or by the Gateway after a\n   timer expires.\n   In other failure\
    \ scenarios, a SS7 Release with Cause Code is mapped\n   to a SIP response.  In\
    \ these scenarios, the early media path is not\n   used, but the actual failure\
    \ code is conveyed to the caller by the\n   SIP User Agent Client.\n"
- title: 2.1.  Successful SIP to ISUP PSTN call
  contents:
  - "2.1.  Successful SIP to ISUP PSTN call\n   Alice           Proxy 1          \
    \ NGW 1          Switch B\n     |                |                |          \
    \      |\n     |   INVITE F1    |                |                |\n     |--------------->|\
    \                |                |\n     |     100  F2    |                |\
    \                |\n     |<---------------|   INVITE F3    |                |\n\
    \     |                |--------------->|                |\n     |           \
    \     |     100  F4    |                |\n     |                |<---------------|\
    \     IAM F5     |\n     |                |                |--------------->|\n\
    \     |                |                |     ACM F6     |\n     |           \
    \     |     183 F7     |<---------------|\n     |     183 F8     |<---------------|\
    \                |\n     |<---------------|                |                |\n\
    \     |        Both Way RTP Media       |  One Way Voice |\n     |<===============================>|<===============|\n\
    \     |                |                |      ANM F9    |\n     |           \
    \     |    200 F10     |<---------------|\n     |     200 F11    |<---------------|\
    \                |\n     |<---------------|                |                |\n\
    \     |     ACK F12    |                |                |\n     |--------------->|\
    \     ACK F13    |                |\n     |                |--------------->|\
    \                |\n     |        Both Way RTP Media       | Both Way Voice |\n\
    \     |<===============================>|<==============>|\n     |     BYE F14\
    \    |                |                |\n     |--------------->|     BYE F15\
    \    |                |\n     |                |--------------->|            \
    \    |\n     |                |     200 F16    |                |\n     |    \
    \ 200 F17    |<---------------|     REL F18    |\n     |<---------------|    \
    \            |--------------->|\n     |                |                |    \
    \ RLC F19    |\n     |                |                |<---------------|\n  \
    \   |                |                |                |\n   Alice dials the globalized\
    \ E.164 number +19725552222 to reach Bob.\n   Note that A might have only dialed\
    \ the last 7 digits, or some other\n   dialing plan.  It is assumed that the SIP\
    \ User Agent Client converts\n   the digits into a global number and puts them\
    \ into a SIP URI.  Note\n   that tel URIs could be used instead of SIP URIs.\n\
    \   Alice could use either their SIP address (sip:alice@a.example.com) or\n  \
    \ SIP telephone number (sip:+13145551111@ss1.a.example.com;user=phone)\n   in\
    \ the From header.  In this example, the telephone number is\n   included, and\
    \ it is shown as being passed as calling party\n   identification through the\
    \ Network Gateway (NGW 1) to Bob (F5).  Note\n   that for this number to be passed\
    \ into the SS7 network, it would have\n   to be somehow verified for accuracy.\n\
    \   In this scenario, Bob answers the call, then Alice disconnects the\n   call.\
    \  Signaling between NGW 1 and Bob's telephone switch is ANSI\n   ISUP.  For the\
    \ details of SIP to ISUP mapping, refer to [4].\n   In this flow, notice that\
    \ the Contact returned by NGW 1 in messages\n   F7-11 is sip:ngw1@a.example.com.\
    \  This is because NGW 1 only accepts\n   SIP messages that come through Proxy\
    \ 1 - any direct signaling will be\n   ignored.  Since this Contact URI may be\
    \ used outside of this dialog\n   and must be routable (Section 8.1.1.8 in RFC\
    \ 3261 [2]) the Contact\n   URI for NGW 1 must resolve to Proxy 1.  This Contact\
    \ URI resolves via\n   DNS to Proxy 1 (sip:ss1.a.example.com) which then resolves\
    \ it to\n   sip:ngw1.a.example.com which is the address of NGW 1.\n   This flow\
    \ shows TCP transport.\n   Message Details\n   F1 INVITE Alice -> Proxy 1\n  \
    \ INVITE sip:+19725552222@ss1.a.example.com;user=phone SIP/2.0\n   Via: SIP/2.0/TCP\
    \ client.a.example.com:5060;branch=z9hG4bK74bf9\n   Max-Forwards: 70\n   From:\
    \ Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com;transport=tcp>\n\
    \   Proxy-Authorization: Digest username=\"alice\", realm=\"a.example.com\",\n\
    \    nonce=\"dc3a5ab25302aa931904ba7d88fa1cf5\", opaque=\"\",\n    uri=\"sip:+19725552222@ss1.a.example.com;user=phone\"\
    ,\n    response=\"ccdca50cb091d587421457305d097458c\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.a.example.com\n\
    \   s=-\n   c=IN IP4 client.a.example.com\n   t=0 0\n   m=audio 49172 RTP/AVP\
    \ 0\n   a=rtpmap:0 PCMU/8000\n   F2 100 Trying Proxy 1 -> Alice\n   SIP/2.0 100\
    \ Trying\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   /* Proxy 1 uses a Location Service function to determine the gateway\n\
    \   for terminating this call.  The call is forwarded to NGW 1.  Client\n   for\
    \ A prepares to receive data on port 49172 from the\n   network.*/\n   F3 INVITE\
    \ Proxy 1 -> NGW 1\n   INVITE sip:+19725552222@ngw1.a.example.com;user=phone SIP/2.0\n\
    \   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/TCP\
    \ client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n \
    \  Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice\
    \ <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n   To:\
    \ Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 154\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.a.example.com\n   s=-\n   c=IN IP4 client.a.example.com\n\
    \   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying\
    \ NGW 1 -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F5 IAM NGW 1 -> Bob\n   IAM\n   CdPN=972-555-2222,NPI=E.164,NOA=National\n\
    \   CgPN=314-555-1111,NPI=E.164,NOA=National\n   F6 ACM Bob -> NGW 1\n   ACM\n\
    \   F7 183 Session Progress NGW 1 -> Proxy 1\n   SIP/2.0 183 Session Progress\n\
    \   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   /* NGW 1 sends PSTN audio (ringing) in the RTP path\
    \ to A */\n   F8 183 Session Progress Proxy 1 -> Alice\n   SIP/2.0 183 Session\
    \ Progress\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527\
    \ 2890844527 IN IP4 ngw1.a.example.com\n   s=-\n   c=IN IP4 ngw1.a.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F9 ANM Bob ->\
    \ NGW 1\n   ANM\n   F10 200 OK NGW 1 -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TCP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n \
    \  Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 gw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   F11 200 OK Proxy 1 -> Alice\n   SIP/2.0 200 OK\n\
    \   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   F12 ACK Alice -> Proxy 1\n   ACK sip:ngw1@a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n\
    \   Content-Length: 0\n   F13 ACK Proxy 1 -> NGW 1\n   ACK sip:ngw1@a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n\
    \   Content-Length: 0\n   /* Alice Hangs Up with Bob. */\n   F14 BYE Alice ->\
    \ Proxy 1\n   BYE sip:ngw1@a.example.com SIP/2.0\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 BYE\n\
    \   Content-Length: 0\n   F15 BYE Proxy 1 -> NGW 1\n   BYE sip:ngw1@a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 BYE\n\
    \   Content-Length: 0\n   F16 200 OK NGW 1 -> Proxy 1\n   SIP/2.0 200 OK\n   Via:\
    \ SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 BYE\n   Content-Length:\
    \ 0\n   F17 200 OK Proxy 1 -> A\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 BYE\n\
    \   Content-Length: 0\n   F18 REL NGW 1 -> B\n   REL\n   CauseCode=16 Normal\n\
    \   F19 RLC B -> NGW 1\n   RLC\n"
- title: 2.2.  Successful SIP to ISDN PBX call
  contents:
  - "2.2.  Successful SIP to ISDN PBX call\n   Alice            Proxy 1          \
    \ GW 1             PBX C\n     |                |                |           \
    \     |\n     |   INVITE F1    |                |                |\n     |--------------->|\
    \                |                |\n     |     100  F2    |                |\
    \                |\n     |<---------------|   INVITE F3    |                |\n\
    \     |                |--------------->|                |\n     |           \
    \     |     100  F4    |                |\n     |                |<---------------|\
    \    SETUP F5    |\n     |                |                |--------------->|\n\
    \     |                |                |  CALL PROC F6  |\n     |           \
    \     |                |<---------------|\n     |                |           \
    \     |   PROGress F7  |\n     |                |    180 F8      |<---------------|\n\
    \     |    180 F9      |<---------------|                |\n     |<---------------|\
    \                |                |\n     |                |                |\
    \  One Way Voice |\n     |                |                |<===============|\n\
    \     |                |                |   CONNect F10  |\n     |           \
    \     |                |<---------------|\n     |                |           \
    \     | CONNect ACK F11|\n     |                |    200 F12     |--------------->|\n\
    \     |     200 F13    |<---------------|                |\n     |<---------------|\
    \                |                |\n     |     ACK F14    |                |\
    \                |\n     |--------------->|     ACK F15    |                |\n\
    \     |                |--------------->|                |\n     |        Both\
    \ Way RTP Media       | Both Way Voice |\n     |<===============================>|<==============>|\n\
    \     |     BYE F16    |                |                |\n     |--------------->|\
    \     BYE F17    |                |\n     |                |--------------->|\
    \                |\n     |                |     200 F18    |                |\n\
    \     |     200 F19    |<---------------| DISConnect F20 |\n     |<---------------|\
    \                |--------------->|\n     |                |                |\
    \   RELease F21  |\n     |                |                |<---------------|\n\
    \     |                |                | RELease COM F22|\n     |           \
    \     |                |--------------->|\n     |                |           \
    \     |                |\n   Alice is a SIP device while Carol is connected via\
    \ a Gateway (GW 1)\n   to a PBX.  The PBX connection is via a ISDN trunk group.\
    \  Alice dials\n   Carol's telephone number (918-555-3333) which is globalized\
    \ and put\n   into a SIP URI.\n   The host portion of the Request-URI in the INVITE\
    \ F3 is used to\n   identify the context (customer, trunk group, or line) in which\
    \ the\n   private number 444-3333 is valid.  Otherwise, this INVITE message\n\
    \   could get forwarded by GW 1 and the context of the digits could\n   become\
    \ lost and the call unroutable.\n   Proxy 1 looks up the telephone number and\
    \ locates the gateway that\n   serves Carol.  Carol is identified by its extension\
    \ (444-3333) in the\n   Request-URI sent to GW 1.\n   Note that the Contact URI\
    \ for GW 1, as used in messages F8, F9, F12,\n   and F13, is sips:4443333@gw1.a.example.com,\
    \ which resolves directly\n   to the gateway.\n   This flow shows the use of Secure\
    \ SIP (sips) URIs.\n   Message Details\n   F1 INVITE Alice -> Proxy 1\n   INVITE\
    \ sips:+19185553333@ss1.a.example.com;user=phone  SIP/2.0\n   Via: SIP/2.0/TLS\
    \ client.a.example.com:5061;branch=z9hG4bK74bf9\n   Max-Forwards: 70\n   From:\
    \ Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sips:alice@client.a.example.com>\n   Proxy-Authorization:\
    \ Digest username=\"alice\",\n    realm=\"a.example.com\", nonce=\"qo0dc3a5ab22aa931904badfa1cf5j9h\"\
    ,\n    opaque=\"\", uri=\"sips:+19185553333@ss1.a.example.com;user=phone\",\n\
    \    response=\"6c792f5c9fa360358b93c7fb826bf550\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.a.example.com\n\
    \   s=-\n   c=IN IP4 client.a.example.com\n   t=0 0\n   m=audio 49172 RTP/AVP\
    \ 0\n   a=rtpmap:0 PCMU/8000\n   F2 100 Trying Proxy 1 -> Alice\n   SIP/2.0 100\
    \ Trying\n   Via: SIP/2.0/TLS client.a.example.com:5061;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Content-Length:\
    \ 0\n   F3 INVITE Proxy 1 -> GW 1\n   INVITE sips:4443333@gw1.a.example.com SIP/2.0\n\
    \   Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/TLS\
    \ client.a.example.com:5061;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n \
    \  Max-Forwards: 69\n   Record-Route: <sips:ss1.a.example.com;lr>\n   From: Alice\
    \ <sips:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n   To:\
    \ Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sips:alice@client.a.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.a.example.com\n   s=-\n   c=IN IP4 client.a.example.com\n   t=0\
    \ 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying GW\
    \ -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   From: Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Content-Length:\
    \ 0\n   F5 SETUP GW 1 -> Carol\n   Protocol discriminator=Q.931\n   Message type=SETUP\n\
    \   Bearer capability: Information transfer capability=0 (Speech) or 16\n   (3.1\
    \ kHz audio)\n   Channel identification=Preferred or exclusive B-channel\n   Progress\
    \ indicator=1 (Call is not end-to-end ISDN;further call\n   progress information\
    \ may be available inband)\n   Called party number:\n   Type of number unknown\n\
    \   Digits=444-3333\n   F6 CALL PROCeeding Carol-> GW 1\n   Protocol discriminator=Q.931\n\
    \   Message type=CALL PROC\n   Channel identification=Exclusive B-channel\n  \
    \ F7 PROGress Carol-> GW 1\n   Protocol discriminator=Q.931\n   Message type=PROG\n\
    \   Progress indicator=1 (Call is not end-to-end ISDN;further call\n   progress\
    \ information may be available inband)\n   F8 180 Ringing GW 1 -> Proxy 1\n  \
    \ SIP/2.0 180 Ringing\n   Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TLS client.a.example.com:5061;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sips:ss1.a.example.com;lr>\n   From:\
    \ Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Contact: <sips:4443333@gw1.a.example.com>\n\
    \   Content-Length: 0\n   F9 180 Ringing Proxy 1 -> Alice\n   SIP/2.0 180 Ringing\n\
    \   Via: SIP/2.0/TLS client.a.example.com:5061;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sips:ss1.a.example.com;lr>\n   From: Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n\
    \   Contact: <sips:4443333@gw1.a.example.com>\n   Content-Length: 0\n   F10 CONNect\
    \ Carol-> GW 1\n   Protocol discriminator=Q.931\n   Message type=CONN\n   F11\
    \ CONNect ACK GW 1 -> Carol\n   Protocol discriminator=Q.931\n   Message type=CONN\
    \ ACK\n   F12 200 OK GW 1 -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TLS client.a.example.com:5061;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sips:ss1.a.example.com;lr>\n   From:\
    \ Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Contact: <sips:4443333@gw1.a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 144\n   v=0\n   o=GW 2890844527\
    \ 2890844527 IN IP4 gw1.a.example.com\n   s=-\n   c=IN IP4 gw1.a.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F13 200 OK Proxy\
    \ 1 -> Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TLS client.a.example.com:5061;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sips:ss1.a.example.com;lr>\n   From:\
    \ Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Contact: <sips:4443333@gw1.a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 144\n   v=0\n   o=GW 2890844527\
    \ 2890844527 IN IP4 gw1.a.example.com\n   s=-\n   c=IN IP4 gw1.a.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F14 ACK Alice\
    \ -> Proxy 1\n   ACK sips:4443333@gw1.a.example.com SIP/2.0\n   Via: SIP/2.0/TLS\
    \ client.a.example.com:5061;branch=z9hG4bK74bf9\n   Max-Forwards: 70\n   Route:\
    \ <sips:ss1.a.example.com;lr>\n   From: Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 ACK\n\
    \   Content-Length: 0\n   F15 ACK Proxy 1 -> GW 1\n   ACK sips:4443333@gw1.a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TLS client.a.example.com:5061;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   From: Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 ACK\n\
    \   Content-Length: 0\n   /* Alice Hangs Up with Bob. */\n   F16 BYE Alice ->\
    \ Proxy 1\n   BYE sips:4443333@gw1.a.example.com SIP/2.0\n   Via: SIP/2.0/TLS\
    \ client.a.example.com:5061;branch=z9hG4bK74bf9\n   Max-Forwards: 70\n   Route:\
    \ <sips:ss1.a.example.com;lr>\n   From: Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 3 BYE\n\
    \   Content-Length: 0\n   F17 BYE Proxy 1 -> GW 1\n   BYE sips:4443333@gw1.a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TLS client.a.example.com:5061;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   From: Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 3 BYE\n\
    \   Content-Length: 0\n   F18 200 OK GW 1 -> Proxy 1\n   SIP/2.0 200 OK\n   Via:\
    \ SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/TLS client.a.example.com:5061;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 3 BYE\n   Content-Length:\
    \ 0\n   F19 200 OK Proxy 1 -> A\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TLS client.a.example.com:5061;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sips:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Carol <sips:+19185553333@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 3 BYE\n\
    \   Content-Length: 0\n   F20 DISConnect GW 1 -> Carol\n   Protocol discriminator=Q.931\n\
    \   Message type=DISC\n   Cause=16 (Normal clearing)\n   F21 RELease Carol-> GW\
    \ 1\n   Protocol discriminator=Q.931\n   Message type=REL\n   F22 RELease COMplete\
    \ GW 1 -> Carol\n   Protocol discriminator=Q.931\n   Message type=REL COM\n"
- title: 2.3.  Successful SIP to ISUP PSTN call with overflow
  contents:
  - "2.3.  Successful SIP to ISUP PSTN call with overflow\n   Alice          Proxy\
    \ 1         NGW 1          NGW 2        Switch B\n    |              |       \
    \       |              |              |\n    |  INVITE F1   |              | \
    \             |              |\n    |------------->|              |          \
    \    |              |\n    |              |  INVITE F2   |              |    \
    \          |\n    |    100  F3   |------------->|              |             \
    \ |\n    |<-------------|    503 F4    |              |              |\n    |\
    \              |<-------------|              |              |\n    |         \
    \     |    ACK F5    |              |              |\n    |              |------------->|\
    \              |              |\n    |              |   INVITE F6            \
    \     |              |\n    |              |---------------------------->|   \
    \  IAM F7   |\n    |              |                             |------------->|\n\
    \    |              |                             |     ACM F8   |\n    |    \
    \          |            183 F9           |<-------------|\n    |   183 F10   \
    \ |<----------------------------|              |\n    |<-------------|       \
    \                      |              |\n    |               Two Way RTP Media\
    \            | One Way Voice|\n    |<==========================================>|<=============|\n\
    \    |              |                             |    ANM F11   |\n    |    \
    \          |           200 F12           |<-------------|\n    |    200 F13  \
    \ |<----------------------------|              |\n    |<-------------|       \
    \                      |              |\n    |    ACK F14   |                \
    \             |              |\n    |------------->|            ACK F15      \
    \    |              |\n    |              |---------------------------->|    \
    \          |\n    |             Both Way RTP Media             |Both Way Voice|\n\
    \    |<==========================================>|<============>|\n    |    BYE\
    \ F16   |                             |              |\n    |------------->| \
    \          BYE F17           |              |\n    |              |---------------------------->|\
    \              |\n    |              |           200 F18           |         \
    \     |\n    |    200 F19   |<----------------------------|    REL F20   |\n \
    \   |<-------------|                             |------------->|\n    |     \
    \         |                             |    RLC F21   |\n    |              |\
    \                             |<-------------|\n    |              |         \
    \                    |              |\n   Alice calls Bob through Proxy 1.  Proxy\
    \ 1 tries to route to a Network\n   Gateway NGW 1.  NGW 1 is not available and\
    \ responds with a 503\n   Service Unavailable (F4).  The call is then routed to\
    \ Network Gateway\n   NGW 2.  Bob answers the call.  The call is terminated when\
    \ Alice\n   disconnects the call.  NGW 2 and Bob's telephone switch use ANSI ISUP\n\
    \   signaling.\n   NGW 2 also only accepts SIP messages that come through Proxy\
    \ 1, so\n   the Contact URI sip:ngw2@a.example.com is used in this flow.\n   This\
    \ flow shows UDP transport.\n   Message Details\n   F1 INVITE Alice -> Proxy 1\n\
    \   INVITE sip:+19725552222@ss1.a.example.com;user=phone SIP/2.0\n   Via: SIP/2.0/UDP\
    \ client.a.example.com:5060;branch=z9hG4bK74bf9\n   Max-Forwards: 70\n   From:\
    \ Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com>\n   Proxy-Authorization:\
    \ Digest username=\"alice\",\n    realm=\"a.example.com\", nonce=\"b59311c3ba05b401cf80b2a2c5ac51b0\"\
    ,\n    opaque=\"\", uri=\"sip:+19725552222@ss1.a.example.com;user=phone\",\n \
    \   response=\"ba6ab44923fa2614b28e3e3957789ab0\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.a.example.com\n\
    \   s=-\n   c=IN IP4 client.a.example.com\n   t=0 0\n   m=audio 49172 RTP/AVP\
    \ 0\n   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location Service function to\
    \ determine where B is\n   located.  Proxy 1 receives a primary route NGW 1 and\
    \ a secondary\n   route NGW 2.  NGW 1 is tried first */\n   F2 INVITE Proxy 1\
    \ -> NGW 1\n   INVITE sip:+19725552222@ngw1.a.example.com;user=phone SIP/2.0\n\
    \   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP\
    \ client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n \
    \  Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice\
    \ <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n   To:\
    \ Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.a.example.com\n   s=-\n   c=IN IP4 client.a.example.com\n   t=0\
    \ 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F3 100 Trying Proxy\
    \ 1 -> Alice\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F4 503 Service Unavailable NGW 1 -> Proxy 1\n   SIP/2.0 503 Service Unavailable\n\
    \   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=123456789\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Content-Length: 0\n   F5 ACK Proxy 1 -> NGW 1\n   ACK sip:ngw1@a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com>;user=phone>\n\
    \    ;tag=123456789\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n\
    \   Content-Length: 0\n   /* Proxy 1 now tries secondary route to NGW 2 */\n \
    \  F6 INVITE Proxy 1 -> NGW 2\n   INVITE sip:+19725552222@ngw2.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice\
    \ <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n   To:\
    \ Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.a.example.com\n   s=-\n   c=IN IP4 client.a.example.com\n   t=0\
    \ 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F7 IAM NGW 2 -> Bob\n\
    \   IAM\n   CdPN=972-555-2222,NPI=E.164,NOA=National\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n\
    \   F8 ACM Bob -> NGW 2\n   ACM\n   F9 183 Session Progress NGW 2 -> Proxy 1\n\
    \   SIP/2.0 183 Session Progress\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:ngw2@a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527\
    \ 2890844527 IN IP4 ngw2.a.example.com\n   s=-\n   c=IN IP4 ngw2.a.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* RTP packets\
    \ are sent by GW to A for audio (e.g. ring tone) */\n   F10 183 Session Progress\
    \ Proxy 1 -> Alice\n   SIP/2.0 183 Session Progress\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:ngw2@a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527\
    \ 2890844527 IN IP4 ngw2.a.example.com\n   s=-\n   c=IN IP4 ngw2.a.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F11 ANM Bob\
    \ -> NGW 2\n   ANM\n   F12 200 OK NGW 2 -> Proxy 1\n   SIP/2.0 200 OK\n   Via:\
    \ SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Contact: <sip:ngw2@a.example.com>\n   Content-Type: application/sdp\n   Content-Length:\
    \ 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw2.a.example.com\n   s=-\n\
    \   c=IN IP4 ngw2.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F13 200 OK Proxy 1 -> Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP\
    \ client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n \
    \  Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Contact: <sip:ngw2@a.example.com>\n   Content-Type: application/sdp\n   Content-Length:\
    \ 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw2.a.example.com\n   s=-\n\
    \   c=IN IP4 ngw2.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F14 ACK Alice -> Proxy 1\n   ACK sip:ngw2@a.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n   Max-Forwards:\
    \ 70\n   Route: <ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n\
    \   Content-Length: 0\n   F15 ACK Proxy 1 -> NGW 2\n   ACK sip:ngw2@a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n\
    \   Content-Length: 0\n   /* RTP streams are established between A and B(via the\
    \ GW) */\n   /* Alice Hangs Up with Bob. */\n   F16 BYE Alice -> Proxy 1\n   BYE\
    \ sip:ngw2@a.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   Route: <ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 BYE\n\
    \   Content-Length: 0\n   F17 BYE Proxy 1 -> NGW 2\n   BYE sip:ngw2@a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 BYE\n\
    \   Content-Length: 0\n   F18 200 OK NGW 2 -> Proxy 1\n   SIP/2.0 200 OK\n   Via:\
    \ SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 BYE\n   Content-Length:\
    \ 0\n   F19 200 OK Proxy 1 -> Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 BYE\n\
    \   Content-Length: 0\n   F20 REL NGW 2 -> B\n   REL\n   CauseCode=16 Normal\n\
    \   F21 RLC B -> NGW 2\n   RLC\n"
- title: 2.4.  Successful SIP to SIP using ENUM Query
  contents:
  - "2.4.  Successful SIP to SIP using ENUM Query\n   Alice         DNS Server   \
    \      Proxy 3            Bob\n     |                |                |      \
    \          |\n     |  ENUM Query F1 |                |                |\n    \
    \ |--------------->|                |                |\n     |   Response F2 \
    \ |                |                |\n     |<---------------|               \
    \ |                |\n     |            INVITE F3            |               \
    \ |\n     |-------------------------------->|    INVITE F4   |\n     |       \
    \      100 F5              |--------------->|\n     |<--------------------------------|\
    \      180 F6    |\n     |             180 F7              |<---------------|\n\
    \     |<--------------------------------|                |\n     |           \
    \                      |     200 F8     |\n     |             200 F9         \
    \     |<---------------|\n     |<--------------------------------|           \
    \     |\n     |             ACK F10             |                |\n     |-------------------------------->|\
    \     ACK F11    |\n     |                                 |--------------->|\n\
    \     |                Both Way RTP Media                |\n     |<================================================>|\n\
    \     |                                 |     BYE F12    |\n     |           \
    \  BYE F13             |<---------------|\n     |<--------------------------------|\
    \                |\n     |             200 F14             |                |\n\
    \     |-------------------------------->|     200 F15    |\n     |           \
    \                      |--------------->|\n     |                            \
    \     |                |\n   In this scenario, Alice places a call to Bob by dialing\
    \ Bob's\n   telephone number (9725552222).  Alice's UA converts the phone number\n\
    \   to an E.164 number (+19725552222), and performs an ENUM query [9] on\n   the\
    \ E.164 number (2.2.2.2.5.5.5.2.7.9.1.e164.arpa), which returns a\n   NAPTR record\
    \ containing a SIP AOR URI for Bob\n   (sip:+19725552222@b.example.com).  As a\
    \ result, Alice's UA sends an\n   INVITE and the call completes over IP bypassing\
    \ the PSTN.\n   The call is terminated when Bob sends a BYE message.\n   Message\
    \ Details\n   F1 ENUM Query Alice -> DNS Server\n   2.2.2.2.5.5.5.2.7.9.1.e164.arpa\n\
    \   F2 ENUM NAPTR Set DNS Server -> Alice\n   $ORIGIN 2.2.2.2.5.5.5.2.7.9.1.e164.arpa.\n\
    \         IN NAPTR 100 10 \"u\" \"sip+E2U\"\n                \"!^.*$!sip:+19725552222@b.example.com!\"\
    .\n   F3 INVITE Alice -> Proxy 3\n   INVITE sip:+19725552222@b.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n   Max-Forwards:\
    \ 70\n   From: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n   To: <tel:+19725552222>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Contact: <sip:+13145551111@client.a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 154\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.a.example.com\n   s=-\n   c=IN IP4 client.a.example.com\n\
    \   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 INVITE Proxy\
    \ 3 -> Bob\n   INVITE sip:+19725552222@client.b.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ ss3.b.example.com:5060;branch=z9hG4bK721e418c4.1\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Max-Forwards: 69\n   Record-Route: <sip:ss3.b.example.com;lr>\n\
    \   From: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n   To: <tel:+19725552222>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Contact: <sip:+13145551111@client.a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 154\n   v=0\n   o=UserA\
    \ 2890844526 2890844526 IN IP4 client.a.example.com\n   s=-\n   c=IN IP4 client.a.example.com\n\
    \   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F5 100 Trying\
    \ Proxy 3 -> Alice\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n\
    \   To: <tel:+19725552222>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq:\
    \ 2 INVITE\n   Content-Length: 0\n   F6 180 Ringing B -> Proxy 3\n   SIP/2.0 180\
    \ Ringing\n   Via: SIP/2.0/UDP ss3.b.example.com:5060;branch=z9hG4bK721e418c4.1\n\
    \    ;received=192.0.2.233\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss3.b.example.com;lr>\n   From:\
    \ <sip:+13145551111@a.example.com>;tag=9fxced76sl\n   To: <tel:+19725552222>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Contact: <sip:+19725552222@client.b.example.com>\n\
    \   Content-Length: 0\n   F7 180 Ringing Proxy 3 -> Alice\n   SIP/2.0 180 Ringing\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss3.b.example.com;lr>\n   From: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n\
    \   To: <tel:+19725552222>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:+19725552222@client.b.example.com>\n   Content-Length:\
    \ 0\n   F8 200 OK Bob -> Proxy 3\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss3.b.example.com:5060;branch=z9hG4bK721e418c4.1\n\
    \    ;received=192.0.2.233\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss3.b.example.com;lr>\n   From:\
    \ <sip:+13145551111@a.example.com>;tag=9fxced76sl\n   To: <tel:+19725552222>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Contact: <sip:+19725552222@client.b.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=bob 2890844527\
    \ 2890844527 IN IP4 client.b.example.com\n   s=-\n   c=IN IP4 client.b.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F9 200 OK Proxy\
    \ -> Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss3.b.example.com;lr>\n   From:\
    \ <sip:+13145551111@a.example.com>;tag=9fxced76sl\n   To: <tel:+19725552222>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 2 INVITE\n   Contact: <sip:+19725552222@client.b.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=bob 2890844527\
    \ 2890844527 IN IP4 client.b.example.com\n   s=-\n   c=IN IP4 192.0.2.100\n  \
    \ t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F10 ACK Alice\
    \ -> Proxy 3\n   ACK sip:+19725552222@client.b.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ client.a.example.com:5060;branch=z9hG4bK74bq9\n   Max-Forwards: 70\n   Route:\
    \ <sip:ss3.b.example.com;lr>\n   From: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n\
    \   To: <tel:+19725552222>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 2 ACK\n   Content-Length: 0\n   F11 ACK Proxy 3 -> Bob\n   ACK sip:+19725552222@client.b.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss3.b.example.com:5060;branch=z9hG4bK721e418c4.1\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bq9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   From: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n\
    \   To: <tel:+19725552222>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 2 ACK\n   Content-Type: application/sdp\n   Content-Length: 0\n   /*\
    \ RTP streams are established between A and B*/\n   /* User B Hangs Up with User\
    \ A. */\n   F12 BYE Bob -> Proxy 3\n   BYE sip:+13145551111@client.a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.b.example.com:5060;branch=z9hG4bKfgaw2\n\
    \   Max-Forwards: 70\n   Route: <sip:ss3.b.example.com;lr>\n   From: <tel:+19725552222>;tag=314159\n\
    \   To: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F13 BYE Proxy 3 -> Alice\n   BYE sip:+13145551111@client.a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss3.b.example.com:5060;branch=z9hG4bK721e418c4.1\n\
    \    ;received=192.0.2.100\n   Via: SIP/2.0/UDP client.b.example.com:5060;branch=z9hG4bKfgaw2\n\
    \   Max-Forwards: 69\n   From: <tel:+19725552222>;tag=314159\n   To: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 BYE\n   Content-Length:\
    \ 0\n   F14 200 OK Alice -> Proxy 3\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss3.b.example.com:5060;branch=z9hG4bK721e418c4.1\n\
    \    ;received=192.0.2.233\n   Via: SIP/2.0/UDP client.b.example.com:5060;branch=z9hG4bKfgaw2\n\
    \    ;received=192.0.2.100\n   From: <tel:+19725552222>;tag=314159\n   To: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 BYE\n   Content-Length:\
    \ 0\n   F15 200 OK Proxy 3 -> Bob\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP client.b.example.com:5060;branch=z9hG4bKfgaw2\n\
    \    ;received=192.0.2.100\n   From: <tel:+19725552222>;tag=314159\n   To: <sip:+13145551111@a.example.com>;tag=9fxced76sl\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 BYE\n   Content-Length:\
    \ 0\n"
- title: '2.5.  Unsuccessful SIP to PSTN call: Treatment from PSTN'
  contents:
  - "2.5.  Unsuccessful SIP to PSTN call: Treatment from PSTN\n   Alice          \
    \  Proxy 1           NGW 1            Bob\n     |                |           \
    \     |                |\n     |   INVITE F1    |                |           \
    \     |\n     |--------------->|                |                |\n     |   \
    \  100  F2    |                |                |\n     |<---------------|   INVITE\
    \ F3    |                |\n     |                |--------------->|         \
    \       |\n     |                |     100  F4    |                |\n     | \
    \               |<---------------|     IAM F5     |\n     |                | \
    \               |--------------->|\n     |                |                | \
    \    ACM F6     |\n     |                |     183 F7     |<---------------|\n\
    \     |     183 F8     |<---------------|                |\n     |<---------------|\
    \                |                |\n     |         Two Way RTP Media       |\
    \  One Way Voice |\n     |<===============================>|<===============|\n\
    \     |                 Treatment Applied                |\n     |<=================================================|\n\
    \     |   CANCEL F9    |                |                |\n     |--------------->|\
    \                |                |\n     |     200 F10    |                |\
    \                |\n     |<---------------|   CANCEL F11   |                |\n\
    \     |                |--------------->|                |\n     |           \
    \     |     200 F12    |                |\n     |                |<---------------|\
    \     REL F13    |\n     |                |                |--------------->|\n\
    \     |                |                |     RLC F14    |\n     |           \
    \     |     487 F15    |<---------------|\n     |                |<---------------|\
    \                |\n     |                |     ACK F16    |                |\n\
    \     |     487 F17    |--------------->|                |\n     |<---------------|\
    \                |                |\n     |     ACK F18    |                |\
    \                |\n     |--------------->|                |                |\n\
    \     |                |                |                |\n   Alice calls Bob\
    \ in the PSTN through a proxy server Proxy 1 and a\n   Network Gateway NGW 1.\
    \  The call is rejected by the PSTN with an\n   in-band treatment (tone or recording)\
    \ played.  Alice hears the\n   treatment and then hangs up, which results in a\
    \ CANCEL (F9) being\n   sent to terminate the call.  (A BYE is not sent since\
    \ no final\n   response was ever received by Alice.)\n   Message Details\n   F1\
    \ INVITE Alice -> Proxy 1\n   INVITE sip:+19725552222@ss1.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com>\n\
    \   Proxy-Authorization: Digest username=\"alice\",\n    realm=\"a.example.com\"\
    , nonce=\"01cf8311c3b0b2a2c5ac51bb59a05b40\",\n    opaque=\"\", uri=\"sip:+19725552222@ss1.a.example.com;user=phone\"\
    ,\n    response=\"e178fbe430e6680a1690261af8831f40\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.a.example.com\n\
    \   s=-\n   c=IN IP4 client.a.example.com\n   t=0 0\n   m=audio 49172 RTP/AVP\
    \ 0\n   a=rtpmap:0 PCMU/8000\n   F2 100 Trying Proxy 1 -> A\n   SIP/2.0 100 Trying\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   /* Proxy 1 uses a Location Service\
    \ function to determine where B is\n   located.  Based upon location analysis\
    \ the call is forwarded to NGW\n   1.  Client for A prepares to receive data on\
    \ port 49172 from the\n   network. */\n   F3 INVITE Proxy 1 -> NGW 1\n   INVITE\
    \ sip:+19725552222@ngw1.a.example.com;user=phone SIP/2.0\n   Via: SIP/2.0/UDP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.a.example.com\n   s=-\n   c=IN IP4 client.a.example.com\n   t=0\
    \ 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying NGW\
    \ 1 -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F5 IAM NGW 1 -> Bob\n   IAM\n   CdPN=972-555-2222,NPI=E.164,NOA=National\n\
    \   CgPN=314-555-1111,NPI=E.164,NOA=National\n   F6 ACM Bob -> NGW 1\n   ACM\n\
    \   F7 183 Session Progress NGW 1 -> Proxy 1\n   SIP/2.0 183 Session Progress\n\
    \   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Contact: <sip:ngw1@a.example.com>\n   Content-Type: application/sdp\n   Content-Length:\
    \ 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n   s=-\n\
    \   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F8 183 Session Progress Proxy 1 -> Alice\n   SIP/2.0 183 Session\
    \ Progress\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527\
    \ 2890844527 IN IP4 ngw1.a.example.com\n   s=-\n   c=IN IP4 ngw1.a.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* Caller hears\
    \ the recorded announcement, then hangs up */\n   F9 CANCEL Alice -> Proxy 1\n\
    \   CANCEL sip:+19725552222@ss1.a.example.com;user=phone SIP/2.0\n   Via: SIP/2.0/UDP\
    \ client.a.example.com:5060;branch=z9hG4bK74bf9\n   Max-Forwards: 70\n   From:\
    \ Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F10 200 OK Proxy 1 -> A\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 CANCEL\n   Content-Length:\
    \ 0\n   F11 CANCEL Proxy 1 -> NGW 1\n   CANCEL sip:+19725552222@ss1.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 CANCEL\n   Content-Length:\
    \ 0\n   F12 200 OK NGW 1 -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 CANCEL\n   Content-Length:\
    \ 0\n   F13 REL NGW 1 -> B\n   REL\n   CauseCode=18 No user responding\n   F14\
    \ RLC B -> NGW 1\n   RLC\n   F15 487 Request Terminated NGW 1 -> Proxy 1\n   SIP/2.0\
    \ 487 Request Terminated\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Content-Length: 0\n   F16 ACK Proxy 1 -> NGW 1\n   ACK sip:+19725552222@ss1.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n\
    \   Content-Length: 0\n   F17 487 Request Terminated Proxy 1 -> A\n   SIP/2.0\
    \ 487 Request Terminated\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Content-Length: 0\n   F18 ACK Alice -> Proxy 1\n   ACK sip:+19725552222@ss1.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n\
    \   Content-Length: 0\n"
- title: '2.6.  Unsuccessful SIP to PSTN: REL w/Cause from PSTN'
  contents:
  - "2.6.  Unsuccessful SIP to PSTN: REL w/Cause from PSTN\n   Alice            Proxy\
    \ 1           NGW 1           Switch B\n     |                |              \
    \  |                |\n     |   INVITE F1    |                |              \
    \  |\n     |--------------->|                |                |\n     |     100\
    \  F2    |                |                |\n     |<---------------|   INVITE\
    \ F3    |                |\n     |                |--------------->|         \
    \       |\n     |                |     100  F4    |                |\n     | \
    \               |<---------------|     IAM F5     |\n     |                | \
    \               |--------------->|\n     |                |                | \
    \   REL(1) F6   |\n     |                |                |<---------------|\n\
    \     |                |                |     RLC F7     |\n     |           \
    \     |     404 F8     |--------------->|\n     |                |<---------------|\
    \                |\n     |                |     ACK F9     |                |\n\
    \     |                |--------------->|                |\n     |     404 F10\
    \    |                |                |\n     |<---------------|            \
    \    |                |\n     |     ACK F11    |                |            \
    \    |\n     |--------------->|                |                |\n     |    \
    \            |                |                |\n   Alice calls PSTN Bob through\
    \ a Proxy Server Proxy 1 and a Network\n   Gateway NGW 1.  The call is rejected\
    \ by the PSTN with a ANSI ISUP\n   Release message REL containing a specific Cause\
    \ code.  This cause\n   value (1) is mapped by the Gateway to a SIP 404 Address\
    \ Incomplete\n   response which is proxied back to Alice.  For more details of\
    \ ISUP\n   cause value to SIP response mapping, refer to [4].\n   Message Details\n\
    \   F1 INVITE Alice -> Proxy 1\n   INVITE sip:+44-1234@ss1.a.example.com;user=phone\
    \  SIP/2.0\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+44-1234@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com;transport=tcp>\n\
    \   Proxy-Authorization: Digest username=\"alice\",\n    realm=\"a.example.com\"\
    , nonce=\"j1c3b0b01cf832da2c5ac51bb59a05b40\",\n    opaque=\"\", uri=\"sip:+44-1234@ss1.a.example.com;user=phone\"\
    ,\n    response=\"a451358d46b55512863efe1dccaa2f42\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.a.example.com\n\
    \   s=-\n   c=IN IP4 client.a.example.com\n   t=0 0\n   m=audio 49172 RTP/AVP\
    \ 0\n   a=rtpmap:0 PCMU/8000\n   F2 100 Trying Proxy 1 -> A\n   SIP/2.0 100 Trying\n\
    \   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+44-1234@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   /* Proxy 1 uses a Location Service\
    \ function to determine where B is\n   located.  Based upon location analysis\
    \ the call is forwarded to NGW1.\n   Client for A prepares to receive data on\
    \ port 49172 from the network.\n   */\n   F3 INVITE Proxy 1 -> NGW 1\n   INVITE\
    \ sip:+44-1234@ngw1.a.example.com;user=phone SIP/2.0\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice\
    \ <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n   To:\
    \ Bob <sip:+44-1234@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 154\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.a.example.com\n   s=-\n   c=IN IP4 client.a.example.com\n\
    \   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying\
    \ NGW 1 -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+44-1234@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F5 IAM NGW 1 -> Bob\n   IAM\n   CdPN=44-1234,NPI=E.164,NOA=International\n\
    \   CgPN=314-555-1111,NPI=E.164,NOA=National\n   F6 REL Bob -> NGW 1\n   REL\n\
    \   CauseValue=1 Unallocated number\n   F7 RLC NGW 1 -> Bob\n   RLC\n   /* Network\
    \ Gateway maps CauseValue=1 to the SIP message 404 Not\n      Found */\n   F8\
    \ 404 Not Found NGW 1 -> Proxy 1\n   SIP/2.0 404 Not Found\n   Via: SIP/2.0/TCP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n \
    \  Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+44-1234@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Error-Info: <sip:not-found-ann@ann.a.example.com>\n\
    \   Content-Length: 0\n   F9 ACK Proxy 1 -> NGW 1\n   ACK sip:+44-1234@ngw1.a.example.com;user=phone\
    \ SIP/2.0\n   Max-Forwards: 70\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+44-1234@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n   F10\
    \ 404 Not Found Proxy 1 -> Alice\n   SIP/2.0 404 Not Found\n   Via: SIP/2.0/TCP\
    \ client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n \
    \  From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+44-1234@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Error-Info: <sip:not-found-ann@ann.a.example.com>\n\
    \   Content-Length: 0\n   F11 ACK Alice -> Proxy 1\n   ACK sip:+44-1234@ss1.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+44-1234@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n   Content-Length:\
    \ 0\n"
- title: '2.7.  Unsuccessful SIP to PSTN: ANM Timeout'
  contents:
  - "2.7.  Unsuccessful SIP to PSTN: ANM Timeout\n   Alice           Proxy 1     \
    \      NGW 1           Switch B\n     |                |                |    \
    \            |\n     |   INVITE F1    |                |                |\n  \
    \   |--------------->|                |                |\n     |     100  F2 \
    \   |                |                |\n     |<---------------|   INVITE F3 \
    \   |                |\n     |                |--------------->|             \
    \   |\n     |                |     100  F4    |                |\n     |     \
    \           |<---------------|     IAM F5     |\n     |                |     \
    \           |--------------->|\n     |                |                |     ACM\
    \ F6     |\n     |                |      183 F7    |<---------------|\n     |\
    \     183 F8     |<---------------|                |\n     |<---------------|\
    \                |                |\n     |                |      Timer on NGW\
    \ 1 Expires     |\n     |                |                |                |\n\
    \     |                |                |     REL F9     |\n     |           \
    \     |                |--------------->|\n     |                |           \
    \     |    RLC F10     |\n     |                |     480 F11    |<---------------|\n\
    \     |                |<---------------|                |\n     |           \
    \     |     ACK F12    |                |\n     |                |--------------->|\
    \                |\n     |     480 F13    |                |                |\n\
    \     |<---------------|                |                |\n     |     ACK F14\
    \    |                |                |\n     |--------------->|            \
    \    |                |\n   Alice calls Bob in the PSTN through a proxy server\
    \ Proxy 1 and\n   Network Gateway NGW 1.  The call is released by the Gateway\
    \ after a\n   timer expires due to no ANswer Message (ANM) being received.  The\n\
    \   Gateway sends an ISUP Release REL message to the PSTN and a 480\n   Temporarily\
    \ Unavailable response to Alice in the SIP network.\n   Message Details\n   F1\
    \ INVITE Alice -> Proxy 1\n   INVITE sip:+19725552222@ss1.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com;transport=tcp>\n\
    \   Proxy-Authorization: Digest username=\"alice\",\n    realm=\"a.example.com\"\
    , nonce=\"da2c5ac51bb59a05j1c3b0b01cf832b40\",\n    opaque=\"\", uri=\"sip:+19725552222@ss1.a.example.com;user=phone\"\
    ,\n    response=\"579cb9db184cdc25bf816f37cbc03c7d\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 154\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.a.example.com\n\
    \   s=-\n   c=IN IP4 client.a.example.com\n   t=0 0\n   m=audio 49172 RTP/AVP\
    \ 0\n   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location Service function to\
    \ determine where B is\n   located.  Based upon location analysis the call is\
    \ forwarded to NGW\n   1.  Client for A prepares to receive data on port 49172\
    \ from the\n   network.*/\n   F2 100 Trying Proxy 1 -> A\n   SIP/2.0  100 Trying\n\
    \   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F3 INVITE Proxy 1 -> NGW 1\n   INVITE\
    \ sip:+19725552222@ngw1.a.example.com;user=phone SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.a.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 154\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.a.example.com\n   s=-\n   c=IN IP4 client.a.example.com\n\
    \   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying\
    \ NGW 1 -> Proxy 1\n   SIP/2.0  100 Trying\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F5 IAM NGW 1 -> Bob\n   IAM\n   CdPN=972-555-2222,NPI=E.164,NOA=National\n\
    \   CgPN=314-555-1111,NPI=E.164,NOA=National\n   F6 ACM Bob -> NGW 1\n   ACM\n\
    \   F7 183 Session Progress NGW 1 -> Proxy 1\n   SIP/2.0 183 Session Progress\n\
    \   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   F8 183 Session Progress Proxy 1 -> Alice\n   SIP/2.0\
    \ 183 Session Progress\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527\
    \ 2890844527 IN IP4 ngw1.a.example.com\n   s=-\n   c=IN IP4 ngw1.a.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* After NGW\
    \ 1's timer expires, Network Gateway sends REL to ISUP\n   network and 480 to\
    \ SIP network */\n   F9 REL NGW 1 -> Bob\n   REL\n   CauseCode=18 No user responding\n\
    \   F10 RLC Bob -> NGW 1\n   RLC\n   F11 480 Temporarily Unavailable NGW 1 ->\
    \ Proxy 1\n   SIP/2.0 480 Temporarily Unavailable\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Error-Info: <sip:temp-unavail-ann@ann.a.example.com>\n   Content-Length: 0\n\
    \   F12 ACK Proxy 1 -> NGW 1\n   ACK sip:ngw1@a.example.com SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Max-Forwards: 70\n   From:\
    \ Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n   Content-Length:\
    \ 0\n   F13 480 Temporarily Unavailable F13 Proxy 1 -> Alice\n   SIP/2.0 480 Temporarily\
    \ Unavailable\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n\
    \    ;tag=9fxced76sl\n   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \    ;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 INVITE\n\
    \   Error-Info: <sip:temp-unavail-ann@ann.a.example.com>\n   Content-Length: 0\n\
    \   F14 ACK Alice -> Proxy 1\n   ACK sip:+19725552222@ss1.a.example.com;user=phone\
    \ SIP/2.0\n   Max-Forwards: 70\n   Via: SIP/2.0/TCP client.a.example.com:5060;branch=z9hG4bK74bf9\n\
    \   From: Alice <sip:+13145551111@ss1.a.example.com;user=phone>\n    ;tag=9fxced76sl\n\
    \   To: Bob <sip:+19725552222@ss1.a.example.com;user=phone>\n    ;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@a.example.com\n   CSeq: 1 ACK\n   Content-Length:\
    \ 0\n"
- title: 3.  PSTN to SIP Dialing
  contents:
  - "3.  PSTN to SIP Dialing\n   In these scenarios, Alice is placing calls from the\
    \ PSTN to Bob in a\n   SIP network.  Alice's telephone switch signals to a Network\
    \ Gateway\n   (NGW 1) using ANSI ISUP.\n   Since the called SIP User Agent does\
    \ not send in-band signaling\n   information, no early media path needs to be\
    \ established on the IP\n   side.  As a result, the 183 Session Progress response\
    \ is not used.\n   However, NGW 1 will establish a one way speech path prior to\
    \ call\n   completion, and generate ringing for the PSTN caller.  Any tones or\n\
    \   recordings are generated by NGW 1 and played in this speech path.\n   When\
    \ the call completes successfully, NGW 1 bridges the PSTN speech\n   path with\
    \ the IP media path.\n   To reduce the number of messages, only a single proxy\
    \ server is shown\n   in these flows, which means that the a.example.com proxy\
    \ server has\n   access to the b.example.com location service.\n"
- title: 3.1.  Successful PSTN to SIP call
  contents:
  - "3.1.  Successful PSTN to SIP call\n   Switch A          NGW 1          Proxy\
    \ 1           Bob\n     |                |                |                |\n\
    \     |     IAM F1     |                |                |\n     |--------------->|\
    \   INVITE F2    |                |\n     |                |--------------->|\
    \   INVITE F3    |\n     |                |     100  F4    |--------------->|\n\
    \     |                |<---------------|                |\n     |           \
    \     |                |      180 F5    |\n     |                |    180 F6 \
    \     |<---------------|\n     |     ACM F7     |<---------------|           \
    \     |\n     |<---------------|                |                |\n     |  One\
    \ Way Voice |                |                |\n     |<===============|     \
    \           |                |\n     |  Ringing Tone  |                |     \
    \ 200 F8    |\n     |<===============|    200 F9      |<---------------|\n   \
    \  |                |<---------------|                |\n     |              \
    \  |     ACK F10    |                |\n     |     ANM F12    |--------------->|\
    \     ACK F11    |\n     |<---------------|                |--------------->|\n\
    \     | Both Way Voice |        Both Way RTP Media       |\n     |<==============>|<===============================>|\n\
    \     |     REL F13    |                |                |\n     |--------------->|\
    \                |                |\n     |     RLC F14    |                |\
    \                |\n     |<---------------|     BYE F15    |                |\n\
    \     |                |--------------->|     BYE F16    |\n     |           \
    \     |                |--------------->|\n     |                |           \
    \     |     200 F17    |\n     |                |     200 F18    |<---------------|\n\
    \     |                |<---------------|                |\n     |           \
    \     |                |                |\n   In this scenario, Alice from the\
    \ PSTN calls Bob through a Network\n   Gateway NGW1 and Proxy Server Proxy 1.\
    \  When Bob answers the call,\n   the media path is setup end-to-end.  The call\
    \ terminates when Alice\n   hangs up the call, with Alice's telephone switch sending\
    \ an ISUP\n   RELease message that is mapped to a BYE by NGW 1.\n   Message Details\n\
    \   F1 IAM Alice -> NGW 1\n   IAM\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n\
    \   CdPN=972-555-2222,NPI=E.164,NOA=National\n   F2 INVITE Alice -> Proxy 1\n\
    \   INVITE sip:+19725552222@ss1.a.example.com;user=phone SIP/2.0\n   Via: SIP/2.0/UDP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:ngw1@a.example.com>\n   Content-Type: application/sdp\n   Content-Length:\
    \ 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n   s=-\n\
    \   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /* Proxy 1 uses a Location Service function to determine where\
    \ B is\n   located.  Based upon location analysis the call is forwarded to NGW\n\
    \   1.  NGW 1  prepares to receive data on port 3456 from Alice.*/\n   F3 INVITE\
    \ Proxy 1 -> Bob\n   INVITE sip:bob@client.b.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n\
    \   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   F4 100 Trying Bob -> Proxy 1\n   SIP/2.0 100 Trying\n\
    \   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n\
    \   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F5 180 Ringing Bob -> Proxy 1\n \
    \  SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.b.example.com>\n   Content-Length: 0\n   F6 180 Ringing Proxy\
    \ 1 -> NGW 1\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.b.example.com>\n   Content-Length: 0\n   F7 ACM NGW 1 -> Alice\n\
    \   ACM\n   F8 200 OK Bob -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   Contact: <sip:bob@client.b.example.com>\n\
    \   CSeq: 1 INVITE\n   Content-Type: application/sdp\n   Content-Length: 151\n\
    \   v=0\n   o=bob 2890844527 2890844527 IN IP4 client.b.example.com\n   s=-\n\
    \   c=IN IP4 client.b.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F9 200 OK Proxy 1 -> NGW 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n  \
    \ Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:bob@client.b.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=bob 2890844527\
    \ 2890844527 IN IP4 client.b.example.com\n   s=-\n   c=IN IP4 client.b.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F10 ACK NGW\
    \ 1 -> Proxy 1\n   ACK sip:bob@client.b.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n   Route:\
    \ <sip:ss1.a.example.com;lr>\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F11 ACK Proxy 1 -> Bob\n   ACK sip:bob@client.b.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n  \
    \ Max-Forwards: 69\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F12 ANM Bob -> NGW 1\n   ANM\n   /* RTP streams are established between A\
    \ and B (via the GW) */\n   /* Alice Hangs Up with Bob. */\n   F13 REL Alice ->\
    \ NGW 1\n   REL\n   CauseCode=16 Normal\n   F14 RLC NGW 1 -> Alice\n   RLC\n \
    \  F15 BYE NGW 1-> Proxy 1\n   BYE sip:bob@client.b.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n\
    \   Route: <sip:ss1.a.example.com;lr>\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n\
    \   F16 BYE Proxy 1 -> Bob\n   BYE sip:bob@client.b.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n  \
    \ Max-Forwards: 69\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n\
    \   F17 200 OK Bob -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n\
    \   F18 200 OK Proxy 1 -> NGW 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n"
- title: 3.2.  Successful PSTN to SIP call, Fast Answer
  contents:
  - "3.2.  Successful PSTN to SIP call, Fast Answer\n   Switch A           NGW 1 \
    \         Proxy 1           Bob\n     |                |                |    \
    \            |\n     |     IAM F1     |                |                |\n  \
    \   |--------------->|   INVITE F2    |                |\n     |             \
    \   |--------------->|   INVITE F3    |\n     |                |     100  F4 \
    \   |--------------->|\n     |                |<---------------|             \
    \   |\n     |                |                |      200 F5    |\n     |     \
    \           |     200 F6     |<---------------|\n     |                |<---------------|\
    \                |\n     |                |     ACK F7     |                |\n\
    \     |     ANM F9     |--------------->|     ACK F8     |\n     |<---------------|\
    \                |--------------->|\n     | Both Way Voice |        Both Way RTP\
    \ Media       |\n     |<==============>|<===============================>|\n \
    \    |     REL F10    |                |                |\n     |--------------->|\
    \                |                |\n     |     RLC F11    |                |\
    \                |\n     |<---------------|     BYE F12    |                |\n\
    \     |                |--------------->|     BYE F13    |\n     |           \
    \     |                |--------------->|\n     |                |           \
    \     |     200 F14    |\n     |                |     200 F15    |<---------------|\n\
    \     |                |<---------------|                |\n     |           \
    \     |                |                |\n   This \"fast answer\" scenario is\
    \ similar to 3.1., except that Bob\n   immediately accepts the call, sending a\
    \ 200 OK (F5) without sending a\n   180 Ringing response.  The Gateway then sends\
    \ an Answer Message (ANM)\n   without sending an Address Complete Message (ACM).\
    \  Note that for\n   ETSI and some other ISUP variants, a CONnect message (CON)\
    \ would be\n   sent instead of the ANM.\n   Message Details\n   F1 IAM Alice ->\
    \ NGW 1\n   IAM\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n   CdPN=972-555-2222,NPI=E.164,NOA=National\n\
    \   F2 INVITE NGW 1 -> Proxy 1\n   INVITE sip:+19725552222@ss1.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527\
    \ IN IP4 ngw1.a.example.com\n   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location\
    \ Service function to determine where B is\n   located.  Based upon location analysis\
    \ the call is forwarded to User\n   B.  Bob  prepares to receive data on port\
    \ 3456 from Alice.*/\n   F3 INVITE Proxy 1 -> Bob\n   INVITE bob@b.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527\
    \ IN IP4 ngw1.a.example.com\n   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying Proxy 1\
    \ -> NGW 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.201\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F5 200 OK Bob -> Proxy 1\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.b.example.com;transport=tcp>\n   Content-Type: application/sdp\n\
    \   Content-Length: 151\n   v=0\n   o=bob 2890844527 2890844527 IN IP4 client.b.example.com\n\
    \   s=-\n   c=IN IP4 client.b.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   F6 200 OK Proxy 1 -> NGW 1\n   SIP/2.0 200 OK\n \
    \  Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:bob@client.b.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=bob 2890844527\
    \ 2890844527 IN IP4 client.b.example.com\n   s=-\n   c=IN IP4 client.b.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F7 ACK NGW 1\
    \ -> Proxy 1\n   ACK bob@client.b.example.com SIP/2.0\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.a.example.com;lr>\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F8 ACK Proxy 1 -> Bob\n   ACK bob@client.b.example.com SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=130.131.132.14\n   Max-Forwards: 69\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F9 ANM Bob -> NGW 1\n   ANM\n   /* RTP streams are established between A and\
    \ B (via the GW) */\n   /* Alice Hangs Up with Bob. */\n   F10 REL ser Alice ->\
    \ NGW 1\n   REL\n   CauseCode=16 Normal\n   F11 RLC NGW 1 -> Alice\n   RLC\n \
    \  F12 BYE NGW 1 -> Proxy 1\n   BYE sip:bob@client.b.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n\
    \   Route: <sip:ss1.a.example.com;lr>\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n\
    \   F13 BYE Proxy 1 -> Bob\n   BYE sip:bob@client.b.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/TCP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n  \
    \ Max-Forwards: 69\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n\
    \   F14 200 OK Bob -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n\
    \   F15 200 OK Proxy 1 -> NGW 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n"
- title: 3.3.  Successful PBX to SIP call
  contents:
  - "3.3.  Successful PBX to SIP call\n   PBX A            GW 1           Proxy 1\
    \           Bob\n     |                |                |                |\n \
    \    |    Seizure     |                |                |\n     |--------------->|\
    \                |                |\n     |      Wink      |                |\
    \                |\n     |<---------------|                |                |\n\
    \     |  MF Digits F1  |                |                |\n     |--------------->|\
    \   INVITE F2    |                |\n     |                |--------------->|\
    \   INVITE F3    |\n     |                |     100  F4    |--------------->|\n\
    \     |                |<---------------|                |\n     |           \
    \     |                |      180 F5    |\n     |                |    180 F6 \
    \     |<---------------|\n     |                |<---------------|           \
    \     |\n     |  One Way Voice |                |                |\n     |<===============|\
    \                |                |\n     |  Ringing Tone  |                |\
    \      200 F7    |\n     |<===============|     200 F8     |<---------------|\n\
    \     |                |<---------------|                |\n     |           \
    \     |     ACK F9     |                |\n     |     Seizure    |--------------->|\
    \     ACK F10    |\n     |<---------------|                |--------------->|\n\
    \     | Both Way Voice |        Both Way RTP Media       |\n     |<==============>|<===============================>|\n\
    \     | Seizure Removal|                |                |\n     |--------------->|\
    \                |                |\n     | Seizure Removal|                |\
    \                |\n     |<---------------|     BYE F11    |                |\n\
    \     |                |--------------->|     BYE F12    |\n     |           \
    \     |                |--------------->|\n     |                |           \
    \     |     200 F13    |\n     |                |     200 F14    |<---------------|\n\
    \     |                |<---------------|                |\n     |           \
    \     |                |                |\n   In this scenario, Alice dials from\
    \ PBX A to Bob through GW 1 and\n   Proxy 1.  This is an example of a call that\
    \ appears destined for the\n   PSTN but is instead routed to a SIP Client.\n \
    \  Signaling between PBX A and GW 1 is Feature Group B (FGB) circuit\n   associated\
    \ signaling, in-band Mult-Frequency (MF) outpulsing.  After\n   the receipt of\
    \ the 180 Ringing from Bob, GW 1 generates a ringing\n   tone for Alice.\n   Bob\
    \ answers the call by sending a 200 OK.  The call terminates when\n   Alice hangs\
    \ up, causing GW1 to send a BYE.\n   The  Gateway can only identify the trunk\
    \ group that the call came in\n   on; it cannot identify the individual line on\
    \ PBX A that is placing\n   the call.  The SIP URI used to identify the caller\
    \ is shown in these\n   flows as sip:551313@gw1.a.example.com.\n   Message Details\n\
    \   PBX Alice -> GW 1\n   Seizure\n   GW 1 -> PBX A\n   Wink\n   F1 MF Digits\
    \ PBX Alice -> GW 1\n   KP 1 972 555 2222 ST\n   F2 INVITE GW 1 -> Proxy 1\n \
    \  INVITE sip:+19725552222@ss1.a.example.com;user=phone SIP/2.0\n   Via: SIP/2.0/UDP\
    \ gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n   Max-Forwards: 70\n   From:\
    \ <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:551313@gw1.a.example.com;user=phone>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 gw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location Service function to determine\
    \ where the\n   phone number +19725552222 is located.  Based upon location\n \
    \  analysis the call is forwarded to SIP Bob. */\n   F3 INVITE Proxy 1 -> Bob\n\
    \   INVITE sip:bob@client.b.example.com SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@gw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:551313@gw1.a.example.com;user=phone>\n  \
    \ Content-Type: application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527\
    \ 2890844527 IN IP4 gw1.a.example.com\n   s=-\n   c=IN IP4 gw1.a.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying\
    \ Proxy 1 -> GW 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.201\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F5 180 Ringing Bob -> Proxy 1\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n \
    \  Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.201\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:bob@client.b.example.com>\n\
    \   Content-Length: 0\n   F6 180 Ringing Proxy 1 -> GW 1\n   SIP/2.0 180 Ringing\n\
    \   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:bob@client.b.example.com>\n\
    \   Content-Length: 0\n   /* One way Voice path is established between GW and\
    \ the PBX for\n   ringing. */\n   F7 200 OK Bob -> Proxy 1\n   SIP/2.0 200 OK\n\
    \   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   Contact: <sip:bob@client.b.example.com>\n\
    \   CSeq: 1 INVITE\n   Content-Type: application/sdp\n   Content-Length: 151\n\
    \   v=0\n   o=bob 2890844527 2890844527 IN IP4 client.b.example.com\n   s=-\n\
    \   c=IN IP4 client.b.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F8 200 OK Proxy 1 -> GW 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP\
    \ gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n  \
    \ Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 1 INVITE\n   Contact: <sip:bob@client.b.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=bob 2890844527\
    \ 2890844527 IN IP4 client.b.example.com\n   s=-\n   c=IN IP4 client.b.example.com\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F9 ACK GW 1\
    \ -> Proxy 1\n   ACK sip:bob@client.b.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n   Max-Forwards: 70\n   Route:\
    \ <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F10 ACK Proxy 1 -> Bob\n   ACK sip:bob@client.b.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP\
    \ gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n  \
    \ Max-Forwards: 69\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   /* RTP streams are established between A and B (via the GW) */\n   /* Alice\
    \ Hangs Up with Bob. */\n   F11 BYE GW 1 -> Proxy 1\n   BYE sip:bob@client.b.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n\
    \   F12 BYE Proxy 1 -> Bob\n   BYE sip:bob@client.b.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP\
    \ gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n  \
    \ Max-Forwards: 69\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length:\
    \ 0\n   F13 200 OK Bob -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \    ;received=192.0.2.201\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n\
    \   F14 200 OK Proxy 1 -> GW 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \    ;received=192.0.2.201\n   From: <sip:551313@gw1.a.example.com;user=phone>;tag=jwdkallkzm\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 2 BYE\n   Content-Length: 0\n"
- title: 3.4.  Unsuccessful PSTN to SIP REL, SIP error mapped to REL
  contents:
  - "3.4.  Unsuccessful PSTN to SIP REL, SIP error mapped to REL\n   Switch A    \
    \        GW 1          Proxy 1           Bob\n     |                |        \
    \        |                |\n     |     IAM F1     |                |        \
    \        |\n     |--------------->|   INVITE F2    |                |\n     |\
    \                |--------------->|                |\n     |                |\
    \     604 F3     |                |\n     |                |<---------------|\
    \                |\n     |                |     ACK F4     |                |\n\
    \     |                |--------------->|                |\n     |     REL F5\
    \     |                |                |\n     |<---------------|           \
    \     |                |\n     |     RLC F6     |                |           \
    \     |\n     |--------------->|                |                |\n     |   \
    \             |                |                |\n   Alice attempts to place\
    \ a call through Gateway GW 1 and Proxy 1,\n   which is unable to find any routing\
    \ for the number.  The call is\n   rejected by Proxy 1 with a REL message containing\
    \ a specific Cause\n   value mapped by the gateway based on the SIP error.\n \
    \  Message Details\n   F1 IAM Alice -> GW 1\n   IAM\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n\
    \   CdPN=972-555-9999,NPI=E.164,NOA=National\n   F2 INVITE Alice -> Proxy 1\n\
    \   INVITE sip:+1972559999@ss1.a.example.com;user=phone  SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n   From:\
    \ <sip:+13145551111@gw1.a.example.com;user=phone>;tag=076342s\n   To: <sip:+1972559999@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\n\
    \   <sip:+13145551111@gw1.a.example.com;user=phone;transport=tcp>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 144\n   v=0\n   o=GW 2890844527 2890844527\
    \ IN IP4 gw1.a.example.com\n   s=-\n   c=IN IP4 gw1.a.example.com\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location\
    \ Service to find a route to +1-972-555-\n   9999.  A route is not found, so Proxy\
    \ 1 rejects the call. */\n   F3 604 Does Not Exist Anywhere Proxy 1 -> GW 1\n\
    \   SIP/2.0 604 Does Not Exist Anywhere\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.201\n   From: <sip:+13145551111@gw1.a.example.com;user=phone>;tag=076342s\n\
    \   To: <sip:+1972559999@ss1.a.example.com;user=phone>;tag=6a34d410\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 1 INVITE\n   Error-Info: <sip:does-not-exist@ann.a.example.com>\n\
    \   Content-Length: 0\n   F4 ACK GW 1 -> Proxy 1\n   ACK sip:+1972559999@ss1.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   From: <sip:+13145551111@gw1.a.example.com;user=phone>;tag=076342s\n\
    \   To: <sip:+1972559999@ss1.a.example.com;user=phone>;tag=6a34d410\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@gw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F5 REL GW 1 -> Alice\n   REL\n   CauseCode=1\n   F6 RLC Alice -> GW 1\n  \
    \ RLC\n"
- title: 3.5.  Unsuccessful PSTN to SIP REL, SIP busy mapped to REL
  contents:
  - "3.5.  Unsuccessful PSTN to SIP REL, SIP busy mapped to REL\n   Switch A     \
    \     NGW 1           Proxy 1          Bob\n     |                |          \
    \      |                |\n     |     IAM F1     |                |          \
    \      |\n     |--------------->|   INVITE F2    |                |\n     |  \
    \              |--------------->|   INVITE F3    |\n     |                |  \
    \   100  F4    |--------------->|\n     |                |<---------------|  \
    \              |\n     |                |                |      600 F5    |\n\
    \     |                |                |<---------------|\n     |           \
    \     |                |      ACK F6    |\n     |                |     600 F7\
    \     |--------------->|\n     |                |<---------------|           \
    \     |\n     |                |     ACK F8     |                |\n     |   \
    \             |--------------->|                |\n     |   REL(17) F9   |   \
    \             |                |\n     |<---------------|                |   \
    \             |\n     |     RLC F10    |                |                |\n \
    \    |<-------------->|                |                |\n     |            \
    \    |                |                |\n   In this scenario, Alice calls Bob\
    \ through Network Gateway NGW 1 and\n   Proxy 1.  The call is routed to Bob by\
    \ Proxy 1.  The call is rejected\n   by Bob who sends a 600 Busy Everywhere response.\
    \  The Gateway sends a\n   REL message containing a specific Cause value mapped\
    \ by the gateway\n   based on the SIP error.\n   Since no interworking is indicated\
    \ in the IAM (F1), the busy tone is\n   generated locally by Alice's telephone\
    \ switch.  In some scenarios,\n   the busy signal is generated by the Gateway\
    \ since interworking is\n   indicated.  For more discussion on interworking, refer\
    \ to [4].\n   Message Details\n   F1 IAM Alice -> NGW 1\n   IAM\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n\
    \   CdPN=972-555-2222,NPI=E.164,NOA=National\n   F2 INVITE Alice -> Proxy 1\n\
    \   INVITE sip:+19725552222@ss1.a.example.com;user=phone  SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type: application/sdp\n \
    \  Content-Length: 144\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 gw1.a.example.com\n\
    \   s=-\n   c=IN IP4 gw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location Service function to determine\
    \ a route for\n   +19725552222.  The call is then forwarded to Bob. */\n   F3\
    \ INVITE F3 Proxy 1 -> Bob\n   INVITE bob@b.example.com SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.201\n   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n\
    \   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 144\n   v=0\n   o=GW 2890844527 2890844527\
    \ IN IP4 gw1.a.example.com\n   s=-\n   c=IN IP4 gw1.a.example.com\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying Proxy 1\
    \ -> NGW 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.201\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F5 600 Busy Everywhere Bob -> Proxy 1\n   SIP/2.0 600 Busy Everywhere\n\
    \   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.201\n\
    \   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F6 ACK Proxy 1 -> Bob\n   ACK bob@b.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Max-Forwards: 70\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F7 600 Busy Everywhere Proxy 1 -> NGW 1\n   SIP/2.0 600 Busy Everywhere\n\
    \   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.201\n\
    \   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F8 ACK NGW 1 -> Proxy 1\n   ACK bob@b.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F9 REL NGW 1 -> Alice\n   REL\n   CauseCode=17 Busy\n   F10 RLC Alice -> NGW\
    \ 1\n   RLC\n"
- title: 3.6.  Unsuccessful PSTN->SIP, SIP error interworking to tones
  contents:
  - "3.6.  Unsuccessful PSTN->SIP, SIP error interworking to tones\n   Switch A  \
    \        NGW 1           Proxy 1          Bob\n     |                |       \
    \         |                |\n     |     IAM F1     |                |       \
    \         |\n     |--------------->|   INVITE F2    |                |\n     |\
    \                |--------------->|   INVITE F3    |\n     |                |\
    \     100  F4    |--------------->|\n     |                |<---------------|\
    \                |\n     |                |                |      600 F5    |\n\
    \     |                |                |<---------------|\n     |           \
    \     |                |      ACK F6    |\n     |                |     600 F7\
    \     |--------------->|\n     |                |<---------------|           \
    \     |\n     |                |     ACK F8     |                |\n     |   \
    \  ACM F9     |--------------->|                |\n     |<---------------|   \
    \             |                |\n     | One Way Voice  |                |   \
    \             |\n     |<===============|                |                |\n \
    \    |    Busy Tone   |                |                |\n     |<===============|\
    \                |                |\n     |   REL(16) F10  |                |\
    \                |\n     |--------------->|                |                |\n\
    \     |     RLC F11    |                |                |\n     |<---------------|\
    \                |                |\n     |                |                |\
    \                |\n   In this scenario, Alice calls Bob through Network Gateway\
    \ NGW 1 and\n   Proxy 1.  The call is routed to Bob by Proxy 1.  The call is rejected\n\
    \   by the Bob client.  NGW 1 sets up a two way voice path to Alice and\n   plays\
    \ busy tone.  The caller then disconnects\n   NGW 1 plays the busy tone since\
    \ the IAM (F1) indicates the\n   interworking is present.  In scenario 5.2.2.,\
    \ with no interworking,\n   the busy indication is carried in the REL Cause value\
    \ and is\n   generated locally instead.\n   Again, note that for ETSI or ITU ISUP,\
    \ a CONnect message would be\n   sent instead of the Answer Message.\n   Message\
    \ Details\n   F1 IAM Alice -> NGW 1\n   IAM\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n\
    \   CdPN=972-555-2222,NPI=E.164,NOA=National\n   Interworking=encountered\n  \
    \ F2 INVITE NGW1 -> Proxy 1\n   INVITE sip:+19725552222@ss1.a.example.com;user=phone\
    \  SIP/2.0\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527\
    \ IN IP4 ngw1.a.example.com\n   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location\
    \ Service function to determine a route for\n   +19725552222.  The call is then\
    \ forwarded to Bob. */\n   F3 INVITE Proxy 1 -> Bob\n   INVITE bob@b.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527\
    \ IN IP4 ngw1.a.example.com\n   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying Bob -> Proxy\
    \ 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F5 600 Busy Everywhere Bob -> Proxy\
    \ 1\n   SIP/2.0 600 Busy Everywhere\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F6 ACK Proxy 1 -> Bob\n   ACK bob@b.example.com SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Max-Forwards: 70\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length:\
    \ 0\n   F7 600 Busy Everywhere Proxy 1 -> NGW 1\n   SIP/2.0 600 Busy Everywhere\n\
    \   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n\
    \   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F8 ACK NGW 1 -> Proxy 1\n   ACK sip:ngw1@a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F9 ACM NGW 1 -> Alice\n   ACM\n   /* A one way speech path is established\
    \ between NGW 1 and Alice. */\n   /* Call Released after Alice hangs up. */\n\
    \   F10 REL Alice -> NGW 1\n   REL\n   CauseCode=16\n   F11 RLC NGW 1 -> Alice\n\
    \   RLC\n"
- title: 3.7.  Unsuccessful PSTN->SIP, ACM timeout
  contents:
  - "3.7.  Unsuccessful PSTN->SIP, ACM timeout\n   Switch A          NGW 1       \
    \    Proxy 1          Bob\n     |                |                |          \
    \      |\n     |     IAM F1     |                |                |\n     |--------------->|\
    \   INVITE F2    |                |\n     |                |--------------->|\
    \   INVITE F3    |\n     |                |     100  F4    |--------------->|\n\
    \     |                |<---------------|                |\n     |           \
    \     |                |   INVITE F5    |\n     |                |           \
    \     |--------------->|\n     |                |                |   INVITE F6\
    \    |\n     |                |                |--------------->|\n     |    \
    \            |                |   INVITE F7    |\n     |                |    \
    \            |--------------->|\n     |                |                |   INVITE\
    \ F8    |\n     |                |                |--------------->|\n     | \
    \               |                |   INVITE F9    |\n     |                | \
    \               |--------------->|\n     |     REL F10    |                | \
    \               |\n     |--------------->|                |                |\n\
    \     |     RLC F11    |                |                |\n     |<---------------|\
    \                |                |\n     |                |   CANCEL F12   |\
    \                |\n     |                |--------------->|                |\n\
    \     |                |     200 F13    |                |\n     |           \
    \     |<---------------|                |\n   Alice calls Bob through NGW 1 and\
    \ Proxy 1.  Proxy 1 re-sends the\n   INVITE after the expiration of SIP timer\
    \ T1 without receiving any\n   response from Bob.  Bob never responds with 180\
    \ Ringing or any other\n   response (it is reachable but unresponsive).  After\
    \ the expiration of\n   a timer, Alice's network disconnects the call by sending\
    \ a Release\n   message REL.  The Gateway maps this to a CANCEL.\n   Message Details\n\
    \   F1 IAM Alice -> NGW 1\n   IAM\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n\
    \   CdPN=972-555-2222,NPI=E.164,NOA=National\n   F2 INVITE Alice -> Proxy 1\n\
    \   INVITE sip:+19725552222@ss1.a.example.com;user=phone  SIP/2.0\n   Via: SIP/2.0/UDP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:ngw1@a.example.com>\n   Content-Type: application/sdp\n   Content-Length:\
    \ 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n   s=-\n\
    \   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /* Proxy 1 uses a Location Service function to determine a route\
    \ for\n   +19725552222.  The call is then forwarded to Bob. */\n   F3 INVITE Proxy\
    \ 1 -> Bob\n   INVITE sip:bob@b.example.com  SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   c c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F4 100 Trying Proxy 1 -> NGW 1\n   SIP/2.0 100 Trying\n   Via:\
    \ SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n\
    \   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F5 INVITE Proxy 1 -> Bob\n   Same\
    \ as Message F3\n   F6 INVITE Proxy 1 -> Bob\n   Same as Message F3\n   F7 INVITE\
    \ Proxy 1 -> Bob\n   Same as Message F3\n   F8 INVITE Proxy 1 -> Bob\n   Same\
    \ as Message F3\n   F9 INVITE Proxy 1 -> Bob\n   Same as Message F3\n   /* Timer\
    \ expires in Alice's access network. */\n   F10 REL Alice -> NGW 1\n   REL\n \
    \  CauseCode=16 Normal\n   F11 RLC NGW 1 -> Alice\n   RLC\n   F12 CANCEL NGW 1\
    \ -> Proxy 1\n   CANCEL sip:+19725552222@ss1.a.example.com;user=phone SIP/2.0\n\
    \   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards:\
    \ 70\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F13 200 OK Proxy 1 -> NGW 1\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n \
    \   ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n"
- title: 3.8.  Unsuccessful PSTN->SIP, ACM timeout, stateless Proxy
  contents:
  - "3.8.  Unsuccessful PSTN->SIP, ACM timeout, stateless Proxy\n   Switch A     \
    \     NGW 1      Stateless Proxy 1     Bob\n     |                |          \
    \      |                |\n     |     IAM F1     |                |          \
    \      |\n     |--------------->|   INVITE F2    |                |\n     |  \
    \              |--------------->|   INVITE F3    |\n     |                |  \
    \ INVITE F4    |--------------->|\n     |                |--------------->|  \
    \ INVITE F5    |\n     |                |   INVITE F6    |--------------->|\n\
    \     |                |--------------->|   INVITE F7    |\n     |           \
    \     |   INVITE F8    |--------------->|\n     |                |--------------->|\
    \   INVITE F9    |\n     |                |   INVITE F10   |--------------->|\n\
    \     |                |--------------->|   INVITE F11   |\n     |           \
    \     |   INVITE F12   |--------------->|\n     |                |--------------->|\
    \   INVITE F13   |\n     |                |                |--------------->|\n\
    \     |     REL F14    |                |                |\n     |--------------->|\
    \                |                |\n     |     RLC F15    |                |\
    \                |\n     |<---------------|                |                |\n\
    \   In this scenario, Alice calls Bob through NGW 1 and Proxy 1.  Since\n   Proxy\
    \ 1 is stateless (it does not send a 100 Trying response), NGW 1\n   re-sends\
    \ the INVITE message after the expiration of SIP timer T1.\n   Bob does not respond\
    \ with 180 Ringing.  Alice's network disconnects\n   the call with a release REL\
    \ (CauseCode=102 Timeout).\n   Message Details\n   F1 IAM Alice -> NGW 1\n   IAM\n\
    \   CgPN=314-555-1111,NPI=E.164,NOA=National\n   CdPN=972-555-2222,NPI=E.164,NOA=National\n\
    \   F2 INVITE NGW 1 -> Proxy 1\n   INVITE sip:+19725552222@ss1.a.example.com;user=phone\
    \  SIP/2.0\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location Service function to determine\
    \ a route for\n   +19725552222.  The call is then forwarded to Bob. */\n   F3\
    \ INVITE Proxy 1 -> Bob\n   INVITE sip:bob@b.example.com  SIP/2.0\n   Via: SIP/2.0/UDP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.201\n   Max-Forwards: 69\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   F4 INVITE NGW 1 -> Proxy 1\n   Same as Message F2\n\
    \   F5 INVITE Proxy 1 -> Bob\n   Same as Message F3\n   F6 INVITE NGW 1 -> Proxy\
    \ 1\n   Same as Message F2\n   F7 INVITE Proxy 1 -> Bob\n   Same as Message F3\n\
    \   F8 INVITE NGW 1 -> Proxy 1\n   Same as Message F2\n   F9 INVITE Proxy 1 ->\
    \ Bob\n   Same as Message F3\n   F10 INVITE NGW 1 -> Proxy 1\n   Same as Message\
    \ F2\n   F11 INVITE Proxy 1 -> Bob\n   Same as Message F3\n   F12 INVITE NGW 1\
    \ -> Proxy 1\n   Same as Message F2\n   F13 INVITE Proxy 1 -> Bob\n   Same as\
    \ Message F3\n   /* A timer expires in Alice's access network. */\n   F14 REL\
    \ Alice -> NGW 1\n   REL\n   CauseCode=102 Timeout\n   F15 RLC NGW 1 -> Alice\n\
    \   RLC\n"
- title: 3.9.  Unsuccessful PSTN->SIP, Caller Abandonment
  contents:
  - "3.9.  Unsuccessful PSTN->SIP, Caller Abandonment\n   Switch A          NGW 1\
    \          Proxy 1           Bob\n     |                |                |   \
    \             |\n     |     IAM F1     |                |                |\n \
    \    |--------------->|   INVITE F2    |                |\n     |            \
    \    |--------------->|   INVITE F3    |\n     |                |     100  F4\
    \    |--------------->|\n     |                |<---------------|            \
    \    |\n     |                |                |      180 F5    |\n     |    \
    \            |    180 F6      |<---------------|\n     |     ACM F7     |<---------------|\
    \                |\n     |<---------------|                |                |\n\
    \     |  One Way Voice |                |                |\n     |<===============|\
    \                |                |\n     |  Ringing Tone  |                |\
    \                |\n     |<===============|                |                |\n\
    \     |                |                |                |\n     |     REL F8\
    \     |                |                |\n     |--------------->|           \
    \     |                |\n     |     RLC F9     |                |           \
    \     |\n     |<---------------|   CANCEL F10   |                |\n     |   \
    \             |--------------->|                |\n     |                |   \
    \  200 F11    |                |\n     |                |<---------------|   \
    \             |\n     |                |                |   CANCEL F12   |\n \
    \    |                |                |--------------->|\n     |            \
    \    |                |     200 F13    |\n     |                |            \
    \    |<---------------|\n     |                |                |     487 F14\
    \    |\n     |                |                |<---------------|\n     |    \
    \            |                |     ACK F15    |\n     |                |    \
    \ 487 F16    |--------------->|\n     |                |<---------------|    \
    \            |\n     |                |     ACK F17    |                |\n  \
    \   |                |--------------->|                |\n     |             \
    \   |                |                |\n   In this scenario, Alice calls Bob\
    \ through NGW 1 and Proxy 1.  Bob\n   does not respond with 200 OK.  NGW 1 plays\
    \ ringing tone since the ACM\n   indicates that interworking has been encountered.\
    \  Alice disconnects\n   the call with a Release message REL which is mapped by\
    \ NGW 1 to a\n   CANCEL.  Note that if Bob had sent a 200 OK response after the\
    \ REL,\n   NGW 1 would have sent an ACK and then a BYE to properly terminate the\n\
    \   call.\n   Message Details\n   F1 IAM Alice -> NGW 1\n   IAM\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n\
    \   CdPN=972-555-2222,NPI=E.164,NOA=National\n   F2 INVITE Alice -> Proxy 1\n\
    \   INVITE sip:+19725552222@ss1.a.example.com;user=phone  SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type: application/sdp\n \
    \  Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location Service function to determine\
    \ a route for\n   +19725552222.  The call is then forwarded to Bob. */\n   F3\
    \ INVITE Proxy 1 -> Bob\n   INVITE sip:bob@b.example.com  SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n\
    \   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:ngw1@a.example.com;transport=tcp>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 146\n   v=0\n   o=GW 2890844527 2890844527\
    \ IN IP4 ngw1.a.example.com\n   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 100 Trying Bob -> Proxy\
    \ 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.201\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F5 180 Ringing Bob -> Proxy 1\n \
    \  SIP/2.0 180 Ringing\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.b.example.com;transport=tcp>\n   Content-Length: 0\n   F6 180\
    \ Ringing Proxy 1 -> NGW 1\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.b.example.com>\n   Content-Length: 0\n   F7 ACM NGW 1 -> Alice\n\
    \   ACM\n   /* Alice hangs up */\n   F8 REL Alice -> NGW 1\n   REL\n   CauseCode=16\
    \ Normal\n   F9 RLC NGW 1 -> Alice\n   RLC\n   F10 CANCEL NGW 1 -> Proxy 1\n \
    \  CANCEL sip:+19725552222@ss1.a.example.com;user=phone  SIP/2.0\n   Via: SIP/2.0/TCP\
    \ ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n   From:\
    \ <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 CANCEL\n   Content-Length:\
    \ 0\n   F11 200 OK Proxy 1 -> NGW 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F12 CANCEL Proxy 1 -> Bob\n   CANCEL\
    \ sip:bob@b.example.com SIP/2.0\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Max-Forwards: 70\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F13 200 OK Bob -> Proxy 1\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F14 487 Request Terminated Bob ->\
    \ Proxy 1\n   SIP/2.0 487 Request Terminated\n   Via: SIP/2.0/TCP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F15 ACK Proxy 1 -> Bob\n   ACK sip:bob@b.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n   Max-Forwards: 70\n\
    \   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID: 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F16 487 Request Terminated Proxy 1 ->\
    \ NGW 1\n   SIP/2.0 487 Request Terminated\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F17 ACK NGW 1 -> Proxy 1\n   ACK sip:+19725552222@ss1.a.example.com;user=phone\
    \  SIP/2.0\n   Via: SIP/2.0/TCP ngw1.a.example.com:5060;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   From: <sip:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sip:+19725552222@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 4Fde34wkd11wsGFDs3@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n"
- title: 4.  PSTN to PSTN Dialing via SIP Network
  contents:
  - "4.  PSTN to PSTN Dialing via SIP Network\n   In these scenarios, both the caller\
    \ and the called party are in the\n   telephone network, either normal PSTN subscribers\
    \ or PBX extensions.\n   The calls route through two Gateways and at least one\
    \ SIP Proxy\n   Server.  The Proxy Server performs the authentication and location\
    \ of\n   the Gateways.\n   Again it is noted that the intent of this call flows\
    \ document is not\n   to provide a detailed parameter level mapping of SIP to\
    \ PSTN\n   protocols.  For information on SIP to ISUP mapping, the reader is\n\
    \   referred to other references [4].\n   In these scenarios, the call is successfully\
    \ completed between the\n   two Gateways, allowing the PSTN or PBX users to communicate.\
    \  The 183\n   Session Progress response is used to indicate that in-band alerting\n\
    \   may flow from the called party telephone switch to the caller.\n"
- title: 4.1.  Successful ISUP PSTN to ISUP PSTN call
  contents:
  - "4.1.  Successful ISUP PSTN to ISUP PSTN call\n   Switch A       NGW 1       \
    \  Proxy 1         GW 2         Switch C\n    |              |              |\
    \              |              |\n    |     IAM F1   |              |         \
    \     |              |\n    |------------->|              |              |   \
    \           |\n    |              |  INVITE F2   |              |            \
    \  |\n    |              |------------->|  INVITE F3   |              |\n    |\
    \              |              |------------->|     IAM F4   |\n    |         \
    \     |              |              |------------->|\n    |              |   \
    \           |              |     ACM F5   |\n    |              |            \
    \  |   183 F6     |<-------------|\n    |              |    183 F7    |<-------------|\
    \              |\n    |    ACM F8    |<-------------|              |         \
    \     |\n    |<-------------|              |              |              |\n \
    \   | One Way Voice|      Two Way RTP Media      | One Way Voice|\n    |<=============|<===========================>|<=============|\n\
    \    |              |              |              |    ANM F9    |\n    |    \
    \          |              |   200 F10    |<-------------|\n    |             \
    \ |    200 F11   |<-------------|              |\n    |    ANM F12   |<-------------|\
    \              |              |\n    |<-------------|              |         \
    \     |              |\n    |              |    ACK F13   |              |   \
    \           |\n    |              |------------->|    ACK F14   |            \
    \  |\n    |              |              |------------->|              |\n    |Both\
    \ Way Voice|     Both Way RTP Media      |Both Way Voice|\n    |<=============|<===========================>|<=============|\n\
    \    |              |              |              |    REL F15   |\n    |    \
    \          |              |              |<-------------|\n    |             \
    \ |              |   BYE F16    |              |\n    |              |    BYE\
    \ F18   |<-------------|    RLC F17   |\n    |              |<-------------| \
    \             |------------->|\n    |              |              |          \
    \    |              |\n    |              |    200 F19   |              |    \
    \          |\n    |              |------------->|    200 F20   |             \
    \ |\n    |              |              |------------->|              |\n    |\
    \    REL F21   |              |              |              |\n    |<-------------|\
    \              |              |              |\n    |    RLC F22   |         \
    \     |              |              |\n    |------------->|              |   \
    \           |              |\n    |              |              |            \
    \  |              |\n   In this scenario, Alice in the PSTN calls Carol who is\
    \ an extension\n   on a PBX.  Alice's telephone switch signals via SS7 to the\
    \ Network\n   Gateway NGW 1, while Carol's PBX signals via SS7 with the Gateway\
    \ GW\n   2.  The CdPN and CgPN are mapped by GW 1 into SIP URIs and placed in\n\
    \   the To and From headers.  Proxy 1 looks up the dialed digits in the\n   Request-URI\
    \ and maps the digits to the PBX extension of Carol, which\n   is served by GW\
    \ 2.  The Proxy in F3 uses the host portion of the\n   Request-URI to identify\
    \ what private dialing plan is being\n   referenced.  The INVITE is then forwarded\
    \ to GW 2 for call\n   completion.  An early media path is established end-to-end\
    \ so that\n   Alice can hear the ringing tone generated by PBX C.\n   Carol answers\
    \ the call and the media path is cut through in both\n   directions.  Bob hangs\
    \ up terminating the call.\n   Message Details\n   F1 IAM Switch Alice -> NGW\
    \ 1\n   IAM\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n   CdPN=918-555-3333,NPI=E.164,NOA=National\n\
    \   F2 INVITE NGW 1 -> Proxy 1\n   INVITE sips:+19185553333@ss1.a.example.com;user=phone\
    \  SIP/2.0\n   Via: SIP/2.0/TLS ngw1.a.example.com:5061;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   From: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sips:+19185553333@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sips:ngw1@a.example.com>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844526 2890844526 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 consults Location Service and translates\
    \ the dialed number\n   to a private number in the Request-URI*/\n   F3 INVITE\
    \ Proxy 1 -> GW 2\n   INVITE sips:4443333@gw2.a.example.com SIP/2.0\n   Via: SIP/2.0/TLS\
    \ ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/TLS ngw1.a.example.com:5061;branch=z9hG4bKwqwee65\n\
    \    ;received=192.0.2.103\n   Max-Forwards: 69\n   Record-Route: <sips:ss1.a.example.com;lr>\n\
    \   From: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To:\
    \ <sips:+19185553333@ss1.a.example.com;user=phone>\n   Call-ID: 2xTb9vxSit55XU7p8@ngw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sips:ngw1@a.example.com>\n   Content-Type: application/sdp\n\
    \   Content-Length: 146\n   v=0\n   o=GW 2890844526 2890844526 IN IP4 ngw1.a.example.com\n\
    \   s=-\n   c=IN IP4 ngw1.a.example.com\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   F4 IAM GW 2 -> Switch C\n   IAM\n   CgPN=314-555-1111,NPI=E.164,NOA=National\n\
    \   CdPN=444-3333,NPI=Private,NOA=Subscriber\n   F5 ACM Switch C -> GW 2\n   ACM\n\
    \   /* Based on the ACM message, GW 2 returns a 183 response.  In-band\n   call\
    \ progress indications are sent to Alice through NGW 1. */\n   F6 183 Session\
    \ Progress GW 2 -> Proxy 1\n   SIP/2.0 183 Session Progress\n   Via: SIP/2.0/TLS\
    \ ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n \
    \  Via: SIP/2.0/TLS ngw1.a.example.com:5061;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n\
    \   Record-Route: <sips:ss1.a.example.com;lr>\n   From: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact: <sips:4443333@gw2.a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 143\n   v=0\n   o=GW 987654321\
    \ 987654321 IN IP4 gw2.a.example.com\n   s=-\n   c=IN IP4 gw2.a.example.com\n\
    \   t=0 0\n   m=audio 14918 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F7 183 Session\
    \ Progress Proxy 1 -> GW 1\n   SIP/2.0 183 Session Progress\n   Via: SIP/2.0/TLS\
    \ ngw1.a.example.com:5061;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n  \
    \ Record-Route: <sips:ss1.a.example.com;lr>\n   From: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact: <sips:4443333@gw2.a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 143\n   v=0\n   o=GW 987654321\
    \ 987654321 IN IP4 gw2.a.example.com\n   s=-\n   c=IN IP4 gw2.a.example.com\n\
    \   t=0 0\n   m=audio 14918 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* NGW 1 receives\
    \ packets from GW 2 with encoded ringback, tones or\n   other audio.  NGW 1 decodes\
    \ this and places it on the originating\n   trunk. */\n   F8 ACM NGW 1 -> Switch\
    \ A\n   ACM\n   /* Bob answers */\n   F9 ANM Switch C -> GW 2\n   ANM\n   F10\
    \ 200 OK GW 2 -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TLS ngw1.a.example.com:5061;branch=z9hG4bKlueha2\n\
    \    ;received=192.0.2.103\n   Record-Route: <sips:ss1.a.example.com;lr>\n   From:\
    \ <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   To: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sips:4443333@gw2.a.example.com>\n   Content-Type: application/sdp\n   Content-Length:\
    \ 143\n   v=0\n   o=GW 987654321 987654321 IN IP4 gw2.a.example.com\n   s=-\n\
    \   c=IN IP4 gw2.a.example.com\n   t=0 0\n   m=audio 14918 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F11 200 OK Proxy 1 -> NGW 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TLS\
    \ ngw1.a.example.com:5061;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n  \
    \ Record-Route: <sips:ss1.a.example.com;lr>\n   From: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@ngw1.a.example.com\n   CSeq: 1 INVITE\n   Contact: <sips:4443333@gw2.a.example.com>\n\
    \   Content-Type: application/sdp\n   Content-Length: 143\n   v=0\n   o=GW 987654321\
    \ 987654321 IN IP4 gw2.a.example.com\n   s=-\n   c=IN IP4 gw2.a.example.com\n\
    \   t=0 0\n   m=audio 14918 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F12 ANM NGW\
    \ 1 -> Switch A\n   ANM\n   F13 ACK NGW 1 -> Proxy 1\n   ACK sips:4443333@gw2.a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TLS ngw1.a.example.com:5061;branch=z9hG4bKlueha2\n\
    \   Max-Forwards: 70\n   Route: <sips:ss1.a.example.com;lr>\n   From: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@gw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   F14 ACK Proxy 1 -> GW 2\n   ACK sips:4443333@gw2.a.example.com SIP/2.0\n \
    \  Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/TLS\
    \ ngw1.a.example.com:5061;branch=z9hG4bKlueha2\n    ;received=192.0.2.103\n  \
    \ Max-Forwards: 69\n   From: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n\
    \   To: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@ngw1.a.example.com\n   CSeq: 1 ACK\n   Content-Length: 0\n\
    \   /* RTP streams are established between NGW 1 and GW 2. */\n   /* Bob Hangs\
    \ Up with Alice. */\n   F15 REL Switch C -> GW 2\n   REL\n   CauseCode=16 Normal\n\
    \   F16 BYE GW 2 -> Proxy 1\n   BYE sips:ngw1@a.example.com SIP/2.0\n   Via: SIP/2.0/TLS\
    \ gw2.a.example.com:5061;branch=z9hG4bKtexx6\n   Max-Forwards: 70\n   Route: <sips:ss1.a.example.com;lr>\n\
    \   From: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n   To:\
    \ <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@ngw1.a.example.com\n   CSeq: 4 BYE\n   Content-Length: 0\n\
    \   F17 RLC GW 2 -> Switch C\n   RLC\n   F18 BYE Proxy 1 -> NGW 1\n   BYE sips:ngw1@a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TLS gw2.a.example.com:5061;branch=z9hG4bKtexx6\n    ;received=192.0.2.202\n\
    \   Max-Forwards: 69\n   From: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n\
    \   To: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@ngw1.a.example.com\n   CSeq: 4 BYE\n   Content-Length: 0\n\
    \   F19 200 OK NGW 1 -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TLS ss1.a.example.com:5061;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TLS gw2.a.example.com:5061;branch=z9hG4bKtexx6\n\
    \    ;received=192.0.2.202\n   From: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n\
    \   To: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@ngw1.a.example.com\n   CSeq: 4 BYE\n   Content-Length: 0\n\
    \   F20 200 OK Proxy 1 -> GW 2\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TLS gw2.a.example.com:5061;branch=z9hG4bKtexx6\n\
    \    ;received=192.0.2.202\n   From: <sips:+19185553333@ss1.a.example.com;user=phone>;tag=314159\n\
    \   To: <sips:+13145551111@ngw1.a.example.com;user=phone>;tag=7643kals\n   Call-ID:\
    \ 2xTb9vxSit55XU7p8@ngw1.a.example.com\n   CSeq: 4 BYE\n   Content-Length: 0\n\
    \   F21 REL Switch C -> GW 2\n   REL\n   CauseCode=16 Normal\n   F22 RLC GW 2\
    \ -> Switch C\n   RLC\n"
- title: 4.2.  Successful FGB PBX to ISDN PBX call with overflow
  contents:
  - "4.2.  Successful FGB PBX to ISDN PBX call with overflow\n   PBX A       GW 1\
    \        Proxy 1        GW 2         GW 3        PBX C\n     |            |  \
    \          |            |            |            |\n     |  Seizure   |     \
    \       |            |            |            |\n     |----------->|        \
    \    |            |            |            |\n     |    Wink    |           \
    \ |            |            |            |\n     |<-----------|            | \
    \           |            |            |\n     |MF Digits F1|            |    \
    \        |            |            |\n     |----------->|            |       \
    \     |            |            |\n     |            | INVITE F2  |          \
    \  |            |            |\n     |            |----------->| INVITE F3  |\
    \            |            |\n     |            |            |----------->|   \
    \         |            |\n     |            |            |   503 F4   |      \
    \      |            |\n     |            |            |<-----------|         \
    \   |            |\n     |            |            |   ACK F5   |            |\
    \            |\n     |            |            |----------->|            |   \
    \         |\n     |            |            |  INVITE F6              |      \
    \      |\n     |            |            |------------------------>|  SETUP F7\
    \  |\n     |            |            |          100  F8        |----------->|\n\
    \     |            |            |<------------------------|CALL PROC F9|\n   \
    \  |            |            |                         |<-----------|\n     |\
    \            |            |                         | ALERT F10  |\n     |   \
    \         |            |          180 F11        |<-----------|\n     |      \
    \      |  180 F12   |<------------------------|            |\n     |         \
    \   |<-----------|                         |            |\n     | Ringtone   |\
    \            |                         |OneWay Voice|\n     |<===========|   \
    \         |                         |<===========|\n     |            |      \
    \      |                         | CONNect F13|\n     |            |         \
    \   |         200 F14         |<-----------|\n     |            |  200 F15   |<------------------------|\
    \            |\n     |  Seizure   |<-----------|                         |   \
    \         |\n     |<-----------|  ACK F16   |                         |      \
    \      |\n     |            |----------->|         ACK F17         |         \
    \   |\n     |            |            |------------------------>|CONN ACK F18|\n\
    \     |            |            |                         |----------->|\n   \
    \  |BothWayVoice|          Both Way RTP Media          |BothWayVoice|\n     |<==========>|<====================================>|<==========>|\n\
    \     |            |            |                         |  DISC F19  |\n   \
    \  |            |            |                         |<-----------|\n     |\
    \            |            |         BYE F20         |            |\n     |   \
    \         |  BYE F21   |<------------------------|  REL F22   |\n     |Seiz Removal|<-----------|\
    \                         |----------->|\n     |<-----------|  200 F23   |   \
    \                      |            |\n     |Seiz Removal|----------->|      \
    \   200 F24         |            |\n     |----------->|            |------------------------>|\
    \ REL COM F25|\n     |            |            |                         |<-----------|\n\
    \     |            |            |                         |            |\n   PBX\
    \ Alice calls PBX Carol via Gateway GW 1 and Proxy 1.  During the\n   attempt\
    \ to reach Carol via GW 2, an error is encountered - Proxy 1\n   receives a 503\
    \ Service Unavailable (F4) response to the forwarded\n   INVITE.  This could be\
    \ due to all circuits being busy, or some other\n   outage at GW 2.  Proxy 1 recognizes\
    \ the error and uses an alternative\n   route via GW 3 to terminate the call.\
    \  From there, the call proceeds\n   normally with Carol answering the call. \
    \ The call is terminated when\n   Carol hangs up.\n   Message Details\n   PBX\
    \ Alice -> GW 1\n   Seizure\n   GW 1 -> PBX A\n   Wink\n   F1 MF Digits PBX Alice\
    \ -> GW 1\n   KP 444 3333 ST\n   F2 INVITE GW 1 -> Proxy 1\n   INVITE sip:4443333@ss1.a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \   Max-Forwards: 70\n   From: <sip:551313@gw1.a.example.com>;tag=63412s\n   To:\
    \ <sip:4443333@ss1.a.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:551313@gw1.a.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 155\n   v=0\n   o=GW 2890844526 2890844526\
    \ IN IP4 gw1.a.example.com\n   s=-\n   c=IN IP4 gw1.a.example.com\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 uses a Location\
    \ Service function to determine where B is\n   located.  Response is returned\
    \ listing alternative routes, GW2 and\n   GW3, which are then tried sequentially.\
    \ */\n   F3 INVITE Proxy 1 -> GW 2\n   INVITE sip:4443333@gw2.a.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP\
    \ gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n  \
    \ Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com>;tag=63412s\n\
    \   To: <sip:4443333@ss1.a.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:551313@gw1.a.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 155\n   v=0\n   o=GW 2890844526 2890844526\
    \ IN IP4 gw1.a.example.com\n   s=-\n   c=IN IP4 gw1.a.example.com\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F4 503 Service Unavailable\
    \ GW 2 -> Proxy 1\n   SIP/2.0 503 Service Unavailable\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \    ;received=192.0.2.201\n   From: <sip:551313@gw1.a.example.com>;tag=63412s\n\
    \   To: <sip:4443333@ss1.a.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F5 ACK Proxy 1 -> GW 2\n   ACK sip:4443333@ss1.a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n\
    \   Max-Forward: 70\n   From: <sip:551313@gw1.a.example.com>;tag=63412s\n   To:\
    \ <sip:4443333@ss1.a.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F6 INVITE Proxy 1 -> GW 3\n   INVITE\
    \ sip:+19185553333@gw3.a.example.com;user=phone SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com>;tag=63412s\n\
    \   To: <sip:4443333@ss1.a.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:551313@gw1.a.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 155\n   v=0\n   o=GW 2890844526 2890844526\
    \ IN IP4 gw1.a.example.com\n   s=-\n   c=IN IP4 gw1.a.example.com\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F7 SETUP GW 3 -> PBX\
    \ C\n   Protocol discriminator=Q.931\n   Message type=SETUP\n   Bearer capability:\
    \ Information transfer capability=0 (Speech) or 16\n   (3.1 kHz audio)\n   Channel\
    \ identification=Preferred or exclusive B-channel\n   Progress indicator=1 (Call\
    \ is not end-to-end ISDN; further call\n   progress information may be available\
    \ inband)\n   Called party number:\n   Type of number and numbering plan ID=33\
    \ (National number in ISDN\n   numbering plan)\n   Digits=918-555-3333\n   F8\
    \ 100 Trying GW 3 -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \    ;received=192.0.2.201\n   From: <sip:551313@gw1.a.example.com>;tag=63412s\n\
    \   To: <sip:4443333@ss1.a.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F9 CALL PROCeeding PBX C -> GW 3\n\
    \   Protocol discriminator=Q.931\n   Message type=CALL PROC\n   F10 ALERT PBX\
    \ C -> GW 3\n   Protocol discriminator=Q.931\n   Message type=PROG\n   /* Based\
    \ on ALERT message, GW 3 returns a 180 response. */\n   F11 180 Ringing GW 3 ->\
    \ Proxy 1\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \    ;received=192.0.2.201\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ <sip:551313@gw1.a.example.com>;tag=63412s\n   To: <sip:4443333@ss1.a.example.com>;tag=123456789\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:+19185553333@gw3.a.example.com;user=phone>\n   Content-Length: 0\n   F12\
    \ 180 Ringing Proxy 1 -> GW 1\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \    ;received=192.0.2.201\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ <sip:551313@gw1.a.example.com>;tag=63412s\n   To: <sip:4443333@ss1.a.example.com>;tag=123456789\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:+19185553333@gw3.a.example.com;user=phone>\n   Content-Length: 0\n   F13\
    \ CONNect PBX C -> GW 3\n   Protocol discriminator=Q.931\n   Message type=CONN\n\
    \   F14 200 OK GW 3 -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \    ;received=192.0.2.201\n   Record-Route: <sip:ss1.a.example.com;lr>\n   From:\
    \ <sip:551313@gw1.a.example.com>;tag=63412s\n   To: <sip:4443333@ss1.a.example.com>;tag=123456789\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:+19185553333@gw3.a.example.com;user=phone>\n   Content-Type: application/sdp\n\
    \   Content-Length: 143\n   v=0\n   o=GW 987654321 987654321 IN IP4 gw3.a.example.com\n\
    \   s=-\n   c=IN IP4 gw3.a.example.com\n   t=0 0\n   m=audio 14918 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   F15 200 OK Proxy 1 -> GW 1\n   SIP/2.0 200 OK\n \
    \  Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n\
    \   Record-Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com>;tag=63412s\n\
    \   To: <sip:4443333@ss1.a.example.com>;tag=123456789\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:+19185553333@gw3.a.example.com;user=phone>\n\
    \   Content-Type: application/sdp\n   Content-Length: 143\n   v=0\n   o=GW 987654321\
    \ 987654321 IN IP4 gw3.a.example.com\n   s=-\n   c=IN IP4 gw3.a.example.com\n\
    \   t=0 0\n   m=audio 14918 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   GW 1 -> PBX\
    \ A\n   Seizure\n   F16 ACK GW 1 -> Proxy 1\n   ACK sip:+19185553333@gw3.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.a.example.com;lr>\n   From: <sip:551313@gw1.a.example.com>;tag=63412s\n\
    \   To: <sip:4443333@ss1.a.example.com>;tag=123456789\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F17 ACK Proxy 1 -> GW 3\n   ACK sip:+19185553333@gw3.a.example.com;user=phone\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \   Via: SIP/2.0/UDP gw1.a.example.com:5060;branch=z9hG4bKwqwee65\n    ;received=192.0.2.201\n\
    \   Max-Forwards: 69\n   From: <sip:551313@gw1.a.example.com>;tag=63412s\n   To:\
    \ <sip:4443333@ss1.a.example.com>;tag=123456789\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F18 CONNect ACK GW 3 -> PBX C\n   Protocol\
    \ discriminator=Q.931\n   Message type=CONN ACK\n   /* RTP streams are established\
    \ between GW 1 and GW 3. */\n   /* Bob Hangs Up with Alice. */\n   F19 DISConnect\
    \ PBX C -> GW 3\n   Protocol discriminator=Q.931\n   Message type=DISC\n   Cause=16\
    \ (Normal clearing)\n   F20 BYE GW 3 -> Proxy 1\n   BYE sip:551313@gw1.a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP gw3.a.example.com:5060;branch=z9hG4bKkdjuwq\n \
    \  Max-Forwards: 70\n   Route: <sip:ss1.a.example.com;lr>\n   From: <sip:4443333@ss1.a.example.com>;tag=123456789\n\
    \   To: <sip:551313@gw1.a.example.com>;tag=63412s\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F21 BYE Proxy 1 -> GW 1\n   BYE sip:551313@gw1.a.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \   Via: SIP/2.0/UDP gw3.a.example.com:5060;branch=z9hG4bKkdjuwq\n    ;received=192.0.2.203\n\
    \   Max-Forwards: 69\n   From: <sip:4443333@ss1.a.example.com>;tag=123456789\n\
    \   To: <sip:551313@gw1.a.example.com>;tag=63412s\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   GW 1 -> PBX A\n   Seizure removal\n\
    \   F22 RELease GW 3 -> PBX C\n   Protocol discriminator=Q.931\n   Message type=REL\n\
    \   F23 200 OK GW 1 -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss1.a.example.com:5060;branch=z9hG4bK2d4790.2\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP gw3.a.example.com:5060;branch=z9hG4bKkdjuwq\n\
    \    ;received=192.0.2.203\n   From: <sip:4443333@ss1.a.example.com>;tag=123456789\n\
    \   To: <sip:551313@gw1.a.example.com>;tag=63412s\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F24 200 OK Proxy 1 -> GW 3\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP gw3.a.example.com:5060;branch=z9hG4bKkdjuwq\n  \
    \  ;received=192.0.2.203\n   From: <sip:4443333@ss1.a.example.com>;tag=123456789\n\
    \   To: <sip:551313@gw1.a.example.com>;tag=63412s\n   Call-ID: 2xTb9vxSit55XU7p8@gw1.a.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F25 RELease COMplete PBX C -> GW 3\n\
    \   Protocol discriminator=Q.931\n   Message type=REL COM\n   PBX Alice -> GW\
    \ 1\n   Seizure removal\n"
- title: 5.  Security Considerations
  contents:
  - "5.  Security Considerations\n   This document provides examples of mapping from\
    \ SIP to ISUP and ISUP\n   to SIP.  The gateways in these examples are compliant\
    \ with the\n   Security Considerations Section of RFC 3398 [4] which is summarized\n\
    \   here.\n   There are few security concerns relating to the mapping of ISUP\
    \ to\n   SIP besides privacy considerations in the calling party number\n   passing.\
    \  Some concerns relating to the mapping from tel URI\n   parameters to ISUP include\
    \ the user creation of parameters and codes\n   relating to called number and\
    \ local number portability (LNP).  An\n   operator of a gateway should use policies\
    \ similar to those present in\n   PSTN switches to avoid security problems.\n\
    \   The mapping from a SIP response code to an ISUP Cause Code presents a\n  \
    \ theoretical risk, so a gateway operator may implement policies\n   controlling\
    \ this mapping.  Gateways should also not rely on the\n   contents of the From\
    \ header field for identity information, as it may\n   be arbitrarily populated\
    \ by a user.  Instead, some sort of\n   cryptographic authentication and authorization\
    \ should be used for\n   identity determination.  These flows show both HTTP Digest\
    \ for\n   authentication of users, although for brevity, the challenge is not\n\
    \   always shown.\n   The early media cut-through shown in some flows is another\
    \ potential\n   security risk, but it is also required for proper interaction\
    \ with\n   the PSTN.  Again, a gateway operator should use proper policies\n \
    \  relating to early media to prevent fraud and misuse.  Finally, a user\n   agent\
    \ (even a properly authenticated one) can launch multiple\n   simultaneous requests\
    \ through a gateway, constituting a denial of\n   service attack.  The adoption\
    \ of policies to limit the number of\n   simultaneous requests from a single entity\
    \ may be used to prevent\n   this attack.\n   As discussed in the SIP-T framework\
    \ [7], SIP/ISUP interworking can be\n   employed as an interdomain signaling mechanism\
    \ that may be subject to\n   pre-existing trust relationships between administrative\
    \ domains.  Any\n   administrative domain implementing SIP-T or SIP/ISUP interworking\n\
    \   should have an adequate security apparatus (including elements that\n   manage\
    \ any appropriate policies to manage fraud and billing in an\n   interdomain environment)\
    \ in place to ensure that the translation of\n   ISUP information does not result\
    \ in any security violations.\n   Although no examples of this are shown in this\
    \ document, transporting\n   ISUP in SIP bodies may provide opportunities for\
    \ abuse, fraud, and\n   privacy concerns, especially when SIP-T requests can be\
    \ generated,\n   inspected or modified by arbitrary SIP endpoints.  ISUP MIME\
    \ bodies\n   should be secured (preferably with S/MIME as detailed in RFC 3261\n\
    \   [2]) to alleviate this concern.  Authentication properties provided\n   by\
    \ S/MIME would allow the recipient of a SIP-T message to ensure that\n   the ISUP\
    \ MIME body was generated by an authorized entity.  Encryption\n   would ensure\
    \ that only carriers possessing a particular decryption\n   key are capable of\
    \ inspecting encapsulated ISUP MIME bodies in a SIP\n   request.\n"
- title: 6.  References
  contents:
  - '6.  References

    '
- title: 6.1.  Normative References
  contents:
  - "6.1.  Normative References\n   [1]  Bradner, S., \"Key words for use in RFCs\
    \ to Indicate Requirement\n        Levels\", BCP 14, RFC 2119, March 1997.\n \
    \  [2]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,\n       \
    \ Peterson, J., Sparks, R., Handley, M. E. and Schooler, \"SIP:\n        Session\
    \ Initiation Protocol\", RFC 3261, June 2002.\n   [3]  Rosenberg, J. and H. Schulzrinne,\
    \ \"An Offer/Answer Model with\n        the Session Description Protocol (SDP)\"\
    , RFC 3264, June 2002.\n   [4]  Camarillo, G., Roach, A. B., Peterson, J. and\
    \ L. Ong,\n        \"Integrated Services Digital Network (ISDN) User Part (ISUP)\
    \ to\n        Session Initiation Protocol (SIP) Mapping\", RFC 3398, December\n\
    \        2002.\n   [5]  Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence,\
    \ S.,\n        Leach, P., Luotonen, A. and L. Stewart, \"HTTP Authentication:\n\
    \        Basic and Digest Access Authentication\", RFC 2617, June 1999.\n   [6]\
    \  Vaha-Sipila, A., \"URLs for Telephone Calls\", RFC 2806, April\n        2000.\n\
    \   [7]  Vemuri, A. and J. Peterson, \"Session Initiation Protocol for\n     \
    \   Telephones (SIP-T): Context and Architectures\", BCP 63, RFC\n        3372,\
    \ September 2002.\n   [8]  Zimmerer, E., Peterson, J., Vemuri, A., Ong, L., Audet,\
    \ F.,\n        Watson, M. and M. Zonoun, \"MIME media types for ISUP and QSIG\n\
    \        Objects\", RFC 3204, December 2001.\n   [9] Faltstrom, P., \"E.164 number\
    \ and DNS\", RFC 2916, September 2000.\n"
- title: 6.2.  Informative References
  contents:
  - "6.2.  Informative References\n   [10] Johnston, A., Donovan, S., Sparks, R.,\
    \ Cunningham, C. and K.\n        Summers, \"Session Initiation Protocol (SIP)\
    \ Basic Call Flow\n        Examples\", RFC 3665, December 2003.\n"
- title: 7.  Acknowledgments
  contents:
  - "7.  Acknowledgments\n   Thanks to Rohan Mahy, Adam Roach, Gonzalo Camarillo,\
    \ Cullen Jennings,\n   and Tom Taylor for their detailed comments during the final\
    \ review.\n   Thanks to Dean Willis for his early contributions to the development\n\
    \   of this document.  Thanks to Jon Peterson for his help on the\n   security\
    \ section.\n   The authors wish to thank Kundan Singh for performing parser\n\
    \   validation of messages.\n   The authors wish to thank the following individuals\
    \ for their\n   participation in a detailed review of this call flows document:\
    \ Aseem\n   Agarwal, Rafi Assadi, Ben Campbell, Sunitha Kumar, Jon Peterson, Marc\n\
    \   Petit-Huguenin, Vidhi Rastogi, and Bodgey Yin Shaohua.\n   The authors also\
    \ wish to thank the following individuals for their\n   assistance: Jean-Francois\
    \ Mule, Hemant Agrawal, Henry Sinnreich,\n   David Devanatham, Joe Pizzimenti,\
    \ Matt Cannon, John Hearty, the whole\n   MCI WorldCom IPOP Design team, Scott\
    \ Orton, Greg Osterhout, Pat\n   Sollee, Doug Weisenberg, Danny Mistry, Steve\
    \ McKinnon, and Denise\n   Ingram, Denise Caballero, Tom Redman, Ilya Slain, Pat\
    \ Sollee, John\n   Truetken, and others from MCI WorldCom, 3Com, Cisco, Lucent\
    \ and\n   Nortel.\n"
- title: 8.  Intellectual Property Statement
  contents:
  - "8.  Intellectual Property Statement\n   The IETF takes no position regarding\
    \ the validity or scope of any\n   intellectual property or other rights that\
    \ might be claimed to\n   pertain to the implementation or use of the technology\
    \ described in\n   this document or the extent to which any license under such\
    \ rights\n   might or might not be available; neither does it represent that it\n\
    \   has made any effort to identify any such rights.  Information on the\n   IETF's\
    \ procedures with respect to rights in standards-track and\n   standards-related\
    \ documentation can be found in BCP-11.  Copies of\n   claims of rights made available\
    \ for publication and any assurances of\n   licenses to be made available, or\
    \ the result of an attempt made to\n   obtain a general license or permission\
    \ for the use of such\n   proprietary rights by implementors or users of this\
    \ specification can\n   be obtained from the IETF Secretariat.\n   The IETF invites\
    \ any interested party to bring to its attention any\n   copyrights, patents or\
    \ patent applications, or other proprietary\n   rights which may cover technology\
    \ that may be required to practice\n   this standard.  Please address the information\
    \ to the IETF Executive\n   Director.\n"
- title: 9.  Authors' Addresses
  contents:
  - "9.  Authors' Addresses\n   All listed authors actively contributed large amounts\
    \ of text to this\n   document.\n   Alan Johnston\n   MCI\n   100 South 4th Street\n\
    \   St. Louis, MO 63102\n   USA\n   EMail: alan.johnston@mci.com\n   Steve Donovan\n\
    \   dynamicsoft, Inc.\n   5100 Tennyson Parkway\n   Suite 1200\n   Plano, Texas\
    \ 75024\n   USA\n   EMail: sdonovan@dynamicsoft.com\n   Robert Sparks\n   dynamicsoft,\
    \ Inc.\n   5100 Tennyson Parkway\n   Suite 1200\n   Plano, Texas 75024\n   USA\n\
    \   EMail: rsparks@dynamicsoft.com\n   Chris Cunningham\n   dynamicsoft, Inc.\n\
    \   5100 Tennyson Parkway\n   Suite 1200\n   Plano, Texas 75024\n   USA\n   EMail:\
    \ ccunningham@dynamicsoft.com\n   Kevin Summers\n   Sonus\n   1701 North Collins\
    \ Blvd, Suite 3000\n   Richardson, TX 75080\n   USA\n   EMail: kevin.summers@sonusnet.com\n"
- title: 10.  Full Copyright Statement
  contents:
  - "10.  Full Copyright Statement\n   Copyright (C) The Internet Society (2003).\
    \  All Rights Reserved.\n   This document and translations of it may be copied\
    \ and furnished to\n   others, and derivative works that comment on or otherwise\
    \ explain it\n   or assist in its implementation may be prepared, copied, published\n\
    \   and distributed, in whole or in part, without restriction of any\n   kind,\
    \ provided that the above copyright notice and this paragraph are\n   included\
    \ on all such copies and derivative works.  However, this\n   document itself\
    \ may not be modified in any way, such as by removing\n   the copyright notice\
    \ or references to the Internet Society or other\n   Internet organizations, except\
    \ as needed for the purpose of\n   developing Internet standards in which case\
    \ the procedures for\n   copyrights defined in the Internet Standards process\
    \ must be\n   followed, or as required to translate it into languages other than\n\
    \   English.\n   The limited permissions granted above are perpetual and will\
    \ not be\n   revoked by the Internet Society or its successors or assignees.\n\
    \   This document and the information contained herein is provided on an\n   \"\
    AS IS\" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING\n   TASK FORCE\
    \ DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING\n   BUT NOT LIMITED\
    \ TO ANY WARRANTY THAT THE USE OF THE INFORMATION\n   HEREIN WILL NOT INFRINGE\
    \ ANY RIGHTS OR ANY IMPLIED WARRANTIES OF\n   MERCHANTABILITY OR FITNESS FOR A\
    \ PARTICULAR PURPOSE.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
