- title: __initial_text__
  contents:
  - "                         Diameter Mobile IPv6:\n    Support for Network Access\
    \ Server to Diameter Server Interaction\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2009 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\
    \ (http://trustee.ietf.org/\n   license-info) in effect on the date of publication\
    \ of this document.\n   Please review these documents carefully, as they describe\
    \ your rights\n   and restrictions with respect to this document.\n"
- title: Abstract
  contents:
  - "Abstract\n   A Mobile IPv6 node requires a home agent address, a home address,\
    \ and\n   a security association with its home agent before it can start\n   utilizing\
    \ Mobile IPv6.  RFC 3775 requires that some or all of these\n   parameters be\
    \ statically configured.  Mobile IPv6 bootstrapping work\n   aims to make this\
    \ information dynamically available to the mobile\n   node.  An important aspect\
    \ of the Mobile IPv6 bootstrapping solution\n   is to support interworking with\
    \ existing Authentication,\n   Authorization, and Accounting (AAA) infrastructures.\
    \  This document\n   describes MIPv6 bootstrapping using the Diameter Network\
    \ Access\n   Server to home AAA server interface.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  3\n   2.  Terminology and Abbreviations  . . . . . . . . . . .\
    \ . . . . .  3\n   3.  Overview . . . . . . . . . . . . . . . . . . . . . . .\
    \ . . . .  5\n   4.  Commands, Attribute-Value Pairs, and Advertising\n      \
    \ Application Support  . . . . . . . . . . . . . . . . . . . . .  6\n     4.1.\
    \  Advertising Application Support  . . . . . . . . . . . . .  6\n     4.2.  Attribute-Value\
    \ Pair Definitions . . . . . . . . . . . . .  6\n       4.2.1.  MIP6-Agent-Info\
    \ AVP  . . . . . . . . . . . . . . . . .  6\n       4.2.2.  MIP-Home-Agent-Address\
    \ AVP . . . . . . . . . . . . . .  7\n       4.2.3.  MIP-Home-Agent-Host AVP \
    \ . . . . . . . . . . . . . . .  7\n       4.2.4.  MIP6-Home-Link-Prefix AVP \
    \ . . . . . . . . . . . . . .  8\n       4.2.5.  MIP6-Feature-Vector AVP  . .\
    \ . . . . . . . . . . . . .  8\n   5.  Examples . . . . . . . . . . . . . . .\
    \ . . . . . . . . . . . . 10\n     5.1.  Home Agent Assignment by the NAS . .\
    \ . . . . . . . . . . . 10\n     5.2.  Home Agent Assignment by the Diameter Server\
    \ . . . . . . . 11\n     5.3.  Home Agent Assignment by the NAS or Diameter Server\
    \  . . . 11\n   6.  Attribute-Value Pair Occurrence Tables . . . . . . . . . .\
    \ . . 12\n   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . .\
    \ . 13\n     7.1.  Registration of New AVPs . . . . . . . . . . . . . . . . .\
    \ 13\n     7.2.  New Registry: Mobility Capability  . . . . . . . . . . . . 13\n\
    \   8.  Security Considerations  . . . . . . . . . . . . . . . . . . . 14\n  \
    \ 9.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 14\n   10.\
    \ References . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n     10.1.\
    \ Normative References . . . . . . . . . . . . . . . . . . . 15\n     10.2. Informative\
    \ References . . . . . . . . . . . . . . . . . . 15\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The Mobile IPv6 (MIPv6) specification [RFC3775] requires\
    \ a mobile\n   node (MN) to perform registration with a home agent (HA) with\n\
    \   information about its current point of attachment (care-of address).\n   The\
    \ HA creates and maintains the binding between the MN's home\n   address and the\
    \ MN's care-of address.\n   In order to register with an HA, the MN needs to know\
    \ some\n   information, such as the home link prefix, the HA address, the home\n\
    \   address(es), the home link prefix length, and security-association-\n   related\
    \ information.\n   The aforementioned information may be statically configured.\n\
    \   However, static provisioning becomes an administrative burden for an\n   operator.\
    \  Moreover, it does not address load balancing, failover,\n   opportunistic home\
    \ link assignment, or assignment of local HAs in\n   close proximity to the MN.\
    \  Also, the ability to react to sudden\n   environmental or topological changes\
    \ is minimal.  Static provisioning\n   may not be desirable, in light of these\
    \ limitations.\n   Dynamic assignment of MIPv6 home registration information is\
    \ a\n   desirable feature for ease of deployment and network maintenance.\n  \
    \ For this purpose, the AAA infrastructure, which is used for access\n   authentication,\
    \ can be leveraged to assign some or all of the\n   necessary parameters.  The\
    \ Diameter server in the Access Service\n   Provider's (ASP's) or Mobility Service\
    \ Provider's (MSP's) network may\n   return these parameters to the AAA client.\
    \  Regarding the\n   bootstrapping procedures, the AAA client might either be\
    \ the Network\n   Access Server, in case of the integrated scenario, or the HA,\
    \ in case\n   of the split scenario [RFC5026].  The terms \"integrated\" and \"\
    split\"\n   are described in the following terminology section and were\n   introduced\
    \ in [RFC4640] and [AAA].\n"
- title: 2.  Terminology and Abbreviations
  contents:
  - "2.  Terminology and Abbreviations\n   The key words \"MUST\", \"MUST NOT\", \"\
    REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in RFC 2119 [RFC2119].\n   General mobility terminology can be found in [RFC3753].\
    \  The\n   following additional terms are either borrowed from [RFC4640] or\n\
    \   [RFC5026] or are introduced in this document:\n   Access Service Authorizer\
    \ (ASA):\n      A network operator that authenticates an MN and establishes the\n\
    \      MN's authorization to receive Internet service.\n   Access Service Provider\
    \ (ASP):\n      A network operator that provides direct IP packet-forwarding to\n\
    \      and from the MN.\n   Mobility Service Authorizer (MSA):\n      A service\
    \ provider that authorizes MIPv6 service.\n   Mobility Service Provider (MSP):\n\
    \      A service provider that provides MIPv6 service.  In order to\n      obtain\
    \ such service, the MN must be authenticated and authorized\n      to do so.\n\
    \   Split Scenario:\n      A scenario where the mobility service and the network\
    \ access\n      service are authorized by different entities.\n   Integrated Scenario:\n\
    \      A scenario where the mobility service and the network access\n      service\
    \ are authorized by the same entity.\n   Network Access Server (NAS):\n      A\
    \ device that provides an access service for a user to a network.\n   Home AAA\
    \ (HAAA):\n      An Authentication, Authorization, and Accounting server located\
    \ in\n      the user's home network, i.e., in the home realm.\n   Local AAA (LAAA):\n\
    \      An Authentication, Authorization, and Accounting proxy located in\n   \
    \   the local (ASP) network.\n   Visited AAA (VAAA):\n      An Authentication,\
    \ Authorization, and Accounting proxy located in\n      a visited network, i.e.,\
    \ in the visited realm.  In a roaming case,\n      the local Diameter proxy has\
    \ the VAAA role (see Figure 1).\n"
- title: 3.  Overview
  contents:
  - "3.  Overview\n   This document addresses the Authentication, Authorization, and\n\
    \   Accounting (AAA) functionality required for the MIPv6 bootstrapping\n   solutions\
    \ outlined in [RFC4640], and focuses on the Diameter-based\n   AAA functionality\
    \ for the NAS-to-HAAA (home AAA) server\n   communication.\n   In the integrated\
    \ scenario, MIPv6 bootstrapping is provided as part\n   of the network access\
    \ authentication procedure.  Figure 1 shows the\n   participating entities.\n\
    \                      +---------------------------+  +-----------------+\n  \
    \                    |Access Service Provider    |  |ASA/MSA/(MSP)    |\n    \
    \                  |(Mobility Service Provider)|  |                 |\n      \
    \                |                           |  |                 |\n        \
    \              | +--------+                |  |    +--------+   |\n          \
    \            | |Local   |      Diameter  |  |    |Home    |   |\n            \
    \          | |Diameter|<---------------------->|Diameter|   |\n              \
    \        | |Proxy   |         (*)    |  |    |Server  |   |\n                \
    \      | +--------+                |  |    +--------+   |\n                  \
    \    |     ^ ^                   |  |        ^        |\n                    \
    \  |     | |                   |  |        |(+)     |\n                      |\
    \     | |                   |  |        |        |\n                      |  \
    \ Diameter                |  |        v        |\n                      |    \
    \ | |(+)      +-------+ |  |    +-------+    |\n                      |     |\
    \ |         |Home   | |  |    |Home   |    |\n                      |     | +-------->|Agent\
    \  | |  |    |Agent  |    |\n                      |  (*)|           |in ASP |\
    \ |  |    |in MSP |    |\n                      |     v           +-------+ |\
    \  |    +-------+    |\n   +-------+ IEEE     | +-----------+   +-------+ |  +-----------------+\n\
    \   |Mobile | 802.1X   | |NAS/Relay  |   |DHCPv6 | |\n   |Node   |------------|Diameter\
    \   |---|Server | |\n   |       | PANA,    | |Client     |(+)|       | |\n   +-------+\
    \ IKEv2,   | +-----------+   +-------+ |\n             DHCP,... +---------------------------+\n\
    \             (+)\n   Legend:\n     (*): Functionality in scope of this specification.\n\
    \     (+): Extensions described in other documents.\n      Figure 1: Mobile IPv6\
    \ Bootstrapping in the Integrated Scenario\n   In a typical MIPv6 access scenario,\
    \ an MN is attached to an ASP's\n   network.  During the network attachment procedure,\
    \ the MN interacts\n   with the NAS/Diameter client.  Subsequently, the NAS/Diameter\
    \ client\n   interacts with the Diameter server over the NAS-to-HAAA interface.\n\
    \   When the Diameter server performs the authentication and\n   authorization\
    \ for network access, it also determines whether the user\n   is authorized for\
    \ the MIPv6 service.  Based on the MIPv6 service\n   authorization and the user's\
    \ policy profile, the Diameter server may\n   return several MIPv6 bootstrapping-related\
    \ parameters to the NAS.\n   The NAS-to-HAAA interface described in this document\
    \ is not tied to\n   the Dynamic Host Configuration Protocol for IPv6 (DHCPv6)\
    \ as the only\n   mechanism to convey MIPv6-related configuration parameters from\
    \ the\n   NAS/Diameter client to the mobile node.\n   While this specification\
    \ addresses the bootstrapping of MIPv6 HA\n   information and possibly the assignment\
    \ of the home link prefix, it\n   does not address how the Security Association\
    \ (SA) between the MN and\n   the HA for MIPv6 purposes is created.  The creation\
    \ or the use of the\n   SA between the MN and the HA takes places after the procedures\n\
    \   described in this specification, and therefore are out of scope.\n"
- title: 4.  Commands, Attribute-Value Pairs, and Advertising Application Support
  contents:
  - '4.  Commands, Attribute-Value Pairs, and Advertising Application Support

    '
- title: 4.1.  Advertising Application Support
  contents:
  - "4.1.  Advertising Application Support\n   This document does not define a new\
    \ application.  On the other hand,\n   it defines a number of attribute-value\
    \ pairs (AVPs) used in the\n   interface between NAS to HAAA for the integrated\
    \ scenario of MIPv6\n   bootstrapping.  These AVPs can be used with any present\
    \ and future\n   Diameter applications, where permitted by the command ABNF. \
    \ The\n   examples using existing applications and their commands in the\n   following\
    \ sections are for informational purposes only.  The examples\n   in this document\
    \ reuse the Extensible Authentication Protocol (EAP)\n   [RFC4072] application\
    \ and its respective commands.\n"
- title: 4.2.  Attribute-Value Pair Definitions
  contents:
  - '4.2.  Attribute-Value Pair Definitions

    '
- title: 4.2.1.  MIP6-Agent-Info AVP
  contents:
  - "4.2.1.  MIP6-Agent-Info AVP\n   The MIP6-Agent-Info AVP (AVP code 486) is of\
    \ type Grouped and\n   contains necessary information to assign an HA to the MN.\
    \  When the\n   MIP6-Agent-Info AVP is present in a message, it MUST contain either\n\
    \   the MIP-Home-Agent-Address AVP, the MIP-Home-Agent-Host AVP, or both\n   AVPs.\
    \  The grouped AVP has the following modified ABNF (as defined in\n   [RFC3588]):\n\
    \       MIP6-Agent-Info ::= < AVP-Header: 486 >\n                         *2[\
    \ MIP-Home-Agent-Address ]\n                           [ MIP-Home-Agent-Host ]\n\
    \                           [ MIP6-Home-Link-Prefix ]\n                      \
    \   * [ AVP ]\n   If both the MIP-Home-Agent-Address and MIP-Home-Agent-Host APVs\
    \ are\n   present in the MIP6-Agent-Info, the MIP-Home-Agent-Address SHOULD\n\
    \   have a precedence over the MIP-Home-Agent-Host.  The reason for this\n   recommendation\
    \ is that the MIP-Home-Agent-Address points to a\n   specific home agent, whereas\
    \ the MIP-Home-Agent-Host may point to a\n   group of HAs located within the same\
    \ realm.  A Diameter client or\n   agent may use the MIP-Home-Agent-Host AVP,\
    \ for instance, to find out\n   in which realm the HA is located.\n   The ABNF\
    \ allows returning up to two MIPv6 HA addresses.  This is a\n   useful feature\
    \ for deployments where the HA has both IPv6 and IPv4\n   addresses, and particularly\
    \ addresses Dual Stack Mobile IPv6\n   (DSMIPv6) deployment scenarios [DSMIPv6].\n\
    \   The MIP6-Agent-Info AVP MAY also be attached by the NAS or by the\n   intermediating\
    \ Diameter proxies in a request message when sent to the\n   Diameter server as\
    \ a hint of a locally assigned HA.  This AVP MAY\n   also be attached by the intermediating\
    \ Diameter proxies in a reply\n   message from the Diameter server, if locally\
    \ assigned HAs are\n   authorized by the Diameter server.  There MAY be multiple\
    \ instances\n   of the MIP6-Agent-Info AVP in Diameter messages, for example,\
    \ in\n   cases where the NAS receives HA information from an MN's home network\n\
    \   and locally allocated HA information from the visited network.  See\n   Section\
    \ 4.2.5 for further discussion on possible scenarios.\n"
- title: 4.2.2.  MIP-Home-Agent-Address AVP
  contents:
  - "4.2.2.  MIP-Home-Agent-Address AVP\n   The MIP-Home-Agent-Address AVP (AVP Code\
    \ 334 [RFC4004]) is of type\n   Address and contains the IPv6 or IPv4 address\
    \ of the MIPv6 HA.  The\n   Diameter server MAY decide to assign an HA to the\
    \ MN that is in close\n   proximity to the point of attachment (e.g., determined\
    \ by the NAS-\n   Identifier AVP).  There may be other reasons for dynamically\n\
    \   assigning HAs to the MN, for example, to share the traffic load.\n"
- title: 4.2.3.  MIP-Home-Agent-Host AVP
  contents:
  - "4.2.3.  MIP-Home-Agent-Host AVP\n   The MIP-Home-Agent-Host AVP (AVP Code 348\
    \ [RFC4004]) is of type\n   Grouped and contains the identity of the assigned\
    \ MIPv6 HA.  Both the\n   Destination-Realm and the Destination-Host AVPs of the\
    \ HA are\n   included in the grouped AVP.  The usage of the MIP-Home-Agent-Host\n\
    \   AVP is equivalent to the MIP-Home-Agent-Address AVP but offers an\n   additional\
    \ level of indirection by using the DNS infrastructure.  The\n   Destination-Host\
    \ AVP is used to identify an HA, and the Destination-\n   Realm AVP is used to\
    \ identify the realm where the HA is located.\n   Depending on the actual deployment\
    \ and DNS configuration, the\n   Destination-Host AVP MAY represent one or more\
    \ home agents.  It is\n   RECOMMENDED that the Destination-Host AVP identifies\
    \ exactly one HA.\n   It is RECOMMENDED that the MIP-Home-Agent-Host AVP is always\
    \ included\n   in the MIP6-Agent-Info AVP.  In this way, the HA can be associated\n\
    \   with the corresponding realm of the Diameter entity that added the\n   MIP6-Agent-Info\
    \ AVP using the Destination-Realm AVP, which is\n   included in the MIP-Home-Agent-Host\
    \ AVP.\n"
- title: 4.2.4.  MIP6-Home-Link-Prefix AVP
  contents:
  - "4.2.4.  MIP6-Home-Link-Prefix AVP\n   The MIP6-Home-Link-Prefix AVP (AVP Code\
    \ 125) is of type OctetString\n   and contains the Mobile IPv6 home network prefix\
    \ information in a\n   network byte order.  The home network prefix MUST be encoded\
    \ as the\n   8-bit prefix length information (one octet) followed by the 128-bit\n\
    \   field (16 octets) for the available home network prefix.  The\n   trailing\
    \ bits of the IPv6 prefix after the prefix length bits MUST be\n   set to zero\
    \ (e.g., if the prefix length is 60, then the remaining 68\n   bits MUST be set\
    \ to zero).\n   The HAAA MAY act as a central entity managing prefixes for MNs.\
    \  In\n   this case, the HAAA returns to the NAS the prefix allocated to the\n\
    \   MN.  The NAS/ASP then delivers the home link prefix to the MN using,\n   e.g.,\
    \ mechanisms described in [INTEGRATED].  The NAS/ASP MAY propose\n   to the HAAA\
    \ a specific prefix to allocate to the MN by including the\n   MIP6-Home-Link-Prefix\
    \ AVP in the request message.  However, the HAAA\n   MAY override the prefix allocation\
    \ hint proposed by the NAS/ASP and\n   return a different prefix in the response\
    \ message.\n"
- title: 4.2.5.  MIP6-Feature-Vector AVP
  contents:
  - "4.2.5.  MIP6-Feature-Vector AVP\n   The MIP6-Feature-Vector AVP (AVP Code 124)\
    \ is of type Unsigned64 and\n   contains a 64-bit flags field of supported capabilities\
    \ of the NAS/\n   ASP.  Sending and receiving the MIP6-Feature-Vector AVP with\
    \ value 0\n   MUST be supported, although that does not provide much guidance\
    \ about\n   specific needs of bootstrapping.\n   The NAS MAY include this AVP\
    \ to indicate capabilities of the NAS/ASP\n   to the Diameter server.  For example,\
    \ the NAS may indicate that a\n   local HA can be provided.  Similarly, the Diameter\
    \ server MAY include\n   this AVP to inform the NAS/ASP about which of the NAS/ASP\
    \ indicated\n   capabilities are supported or authorized by the ASA/MSA(/MSP).\n\
    \   The following capabilities are defined in this document:\n   MIP6_INTEGRATED\
    \ (0x0000000000000001)\n      When this flag is set by the NAS, it means that\
    \ the Mobile IPv6\n      integrated scenario bootstrapping functionality is supported\
    \ by\n      the NAS.  When this flag is set by the Diameter server, then the\n\
    \      Mobile IPv6 integrated scenario bootstrapping is supported by the\n   \
    \   Diameter server.\n   LOCAL_HOME_AGENT_ASSIGNMENT (0x0000000000000002)\n  \
    \    When this flag is set in the request message, a local home agent\n      outside\
    \ the home realm is requested and may be assigned to the MN.\n      When this\
    \ flag is set by the Diameter server in the answer\n      message, then the assignment\
    \ of local HAs is authorized by the\n      Diameter server.\n      A local HA\
    \ may be assigned by the NAS, LAAA, or VAAA depending on\n      the network architecture\
    \ and the deployment.\n   The following examples show how the LOCAL_HOME_AGENT_ASSIGNMENT\n\
    \   (referred to as LOCAL-bit in the examples) capability and the MIP-\n   Agent-Info\
    \ AVP (referred to as HA-Info in the examples) are used to\n   assign HAs -- either\
    \ a local HA (L-HA) or a home network HA (H-HA).\n   Below are examples of request\
    \ message combinations as seen by the\n   HAAA:\n    LOCAL-bit  HA-Info  Meaning\n\
    \      0          -      ASP or [LV]AAA is not able to assign an L-HA.\n     \
    \ 0         L-HA    Same as above.  HA-Info must be ignored.\n      1        \
    \  -      ASP or [LV]AAA can/wishes to assign an L-HA.\n      1         L-HA \
    \   Same as above but the ASP or [LV]AAA also\n                        provides\
    \ a hint of the assigned L-HA.\n   The same as above but for answer message combinations\
    \ as seen by the\n   NAS:\n  LOCAL-bit  HA-Info  Meaning\n    0          -   \
    \   No HA assignment allowed for HAAA or [LV]AAA.\n    0         H-HA    L-HA\
    \ is not allowed.  HAAA assigns an H-HA.\n    1          -      L-HA is allowed.\
    \  No HAAA- or [LV]AAA-assigned HA.\n    1         L-HA    L-HA is allowed.  [LV]AAA\
    \ also assigns an L-HA.\n    1         H-HA    L-HA is allowed.  HAAA also assigns\
    \ an HA.\n    1         H-HA    L-HA is allowed.  HAAA assigns an H-HA and\n \
    \           + L-HA    [LV]AAA also assigns an L-HA.\n   An NAS should expect to\
    \ receive multiple MIP6-Agent-Info AVPs.\n"
- title: 5.  Examples
  contents:
  - '5.  Examples

    '
- title: 5.1.  Home Agent Assignment by the NAS
  contents:
  - "5.1.  Home Agent Assignment by the NAS\n   In this scenario, we consider the\
    \ case where the NAS wishes to\n   allocate a local HA to the MN.  The NAS will\
    \ also inform the Diameter\n   server about the HA address it has assigned to\
    \ the visiting MN (e.g.,\n   2001:db8:1:c020::1).  The Diameter-EAP-Request message,\
    \ therefore,\n   has the MIP6-Feature-Vector with the LOCAL_HOME_AGENT_ASSIGNMENT\
    \ and\n   the MIP6_INTEGRATED set.  The MIP6-Agent-Info AVP contains the MIP-\n\
    \   Home-Agent-Address AVP with the address of the proposed HA.\n            \
    \                                                    Diameter\n   NAS/VAAA   \
    \                                                    Server\n    |           \
    \                                                      |\n    |  Diameter-EAP-Request\
    \                                           |\n    |  MIP6-Feature-Vector=(LOCAL_HOME_AGENT_ASSIGNMENT\
    \               |\n    |                       | MIP6_INTEGRATED)            \
    \            |\n    |  MIP6-Agent-Info{                                      \
    \         |\n    |       MIP-Home-Agent-Address(2001:db8:1:c020::1)}         \
    \      |\n    |  }                                                           \
    \   |\n    |  Auth-Request-Type=AUTHORIZE_AUTHENTICATE                       |\n\
    \    |  EAP-Payload(EAP Start)                                         |\n   \
    \ |---------------------------------------------------------------->|\n    | \
    \                                                                |\n    |    \
    \                                                             |\n    :       \
    \       ...more EAP Request/Response pairs...              :\n    |          \
    \                                                       |\n    |             \
    \                                                    |\n    |                \
    \                            Diameter-EAP-Answer  |\n    |               MIP6-Feature-Vector=(LOCAL_HOME_AGENT_ASSIGNMENT\
    \  |\n    |                                    | MIP6_INTEGRATED)           |\n\
    \    |                                   Result-Code=DIAMETER_SUCCESS  |\n   \
    \ |                                       EAP-Payload(EAP Success)  |\n    | \
    \                                        EAP-Master-Session-Key  |\n    |    \
    \                                       (authorization AVPs)  |\n    |       \
    \                                                    ...   |\n    |<----------------------------------------------------------------|\n\
    \    |                                                                 |\n   \
    \             Figure 2: Home Agent Assignment by the NAS\n   Depending on the\
    \ Diameter server's configuration and the user's\n   subscription profile, the\
    \ Diameter server either accepts or rejects\n   the local HA allocated by the\
    \ NAS.  In our example, the Diameter\n   server accepts the proposal, and the\
    \ MIP6-Feature-Vector AVP with\n   LOCAL_HOME_AGENT_ASSIGNMENT flag (together\
    \ with the MIP6_INTEGRATED\n   flag) is set and returned to the NAS.\n"
- title: 5.2.  Home Agent Assignment by the Diameter Server
  contents:
  - "5.2.  Home Agent Assignment by the Diameter Server\n   In this scenario, we consider\
    \ the case where the NAS supports the\n   Diameter MIPv6 integrated scenario as\
    \ defined in this document, but\n   does not offer local HA assignment.  Hence,\
    \ the MIP6-Feature-Vector\n   AVP only has the MIP6_INTEGRATED flag set.  The\
    \ Diameter server\n   allocates an HA to the mobile node and conveys the address\
    \ in the\n   MIP-Home-Agent-Address AVP that is encapsulated in the MIP6-Agent-\n\
    \   Info AVP.  Additionally, the MIP6-Feature-Vector AVP has the\n   MIP6_INTEGRATED\
    \ flag set.\n                                                                Diameter\n\
    \   NAS                                                            Server\n  \
    \  |                                                                 |\n    |\
    \  Diameter-EAP-Request                                           |\n    |  MIP6-Feature-Vector=(MIP6_INTEGRATED)\
    \                          |\n    |  Auth-Request-Type=AUTHORIZE_AUTHENTICATE\
    \                       |\n    |  EAP-Payload(EAP Start)                     \
    \                    |\n    |---------------------------------------------------------------->|\n\
    \    |                                                                 |\n   \
    \ |                                                                 |\n    : \
    \             ...more EAP Request/Response pairs...              :\n    |    \
    \                                                             |\n    |       \
    \                                                          |\n    |          \
    \                                  Diameter-EAP-Answer  |\n    |             \
    \                                  MIP6-Agent-Info{  |\n    |            MIP-Home-Agent-Address(2001:db8:6000:302::1)\
    \         |\n    |                                                           \
    \   }  |\n    |                          MIP6-Feature-Vector=(MIP6_INTEGRATED)\
    \  |\n    |                                   Result-Code=DIAMETER_SUCCESS  |\n\
    \    |                                       EAP-Payload(EAP Success)  |\n   \
    \ |                                         EAP-Master-Session-Key  |\n    | \
    \                                          (authorization AVPs)  |\n    |    \
    \                                                       ...   |\n    |<----------------------------------------------------------------|\n\
    \    |                                                                 |\n   \
    \       Figure 3: Home Agent Assignment by the Diameter Server\n"
- title: 5.3.  Home Agent Assignment by the NAS or Diameter Server
  contents:
  - "5.3.  Home Agent Assignment by the NAS or Diameter Server\n   This section shows\
    \ another message flow for the MIPv6 integrated\n   scenario bootstrapping where\
    \ the NAS informs the Diameter server that\n   it is able to locally assign an\
    \ HA to the MN.  The Diameter server is\n   able to provide an HA to the MN but\
    \ also authorizes the assignment of\n   the local HA.  The Diameter server then\
    \ replies to the NAS with\n   HA-related bootstrapping information.\n   Whether\
    \ the NAS/ASP then offers a locally assigned HA or the\n   Diameter-server-assigned\
    \ HA to the MN is, in this example, based on\n   the local ASP policy.\n     \
    \                                                           Diameter\n   NAS/VAAA\
    \                                                       Server\n    |        \
    \                                                         |\n    |  Diameter-EAP-Request\
    \                                           |\n    |  MIP6-Feature-Vector=(LOCAL_HOME_AGENT_ASSIGNMENT\
    \               |\n    |                       | MIP6_INTEGRATED)            \
    \            |\n    |  MIP6-Agent-Info{                                      \
    \         |\n    |       MIP-Home-Agent-Address(2001:db8:1:c020::1)}         \
    \      |\n    |  }                                                           \
    \   |\n    |  Auth-Request-Type=AUTHORIZE_AUTHENTICATE                       |\n\
    \    |  EAP-Payload(EAP Start)                                         |\n   \
    \ |---------------------------------------------------------------->|\n    | \
    \                                                                |\n    |    \
    \                                                             |\n    :       \
    \       ...more EAP Request/Response pairs...              :\n    |          \
    \                                                       |\n    |             \
    \                                                    |\n    |                \
    \                            Diameter-EAP-Answer  |\n    |                   \
    \                            MIP6-Agent-Info{  |\n    |                  MIP-Home-Agent-Address(2001:db8:6000:302::1)}\
    \  |\n    |               MIP6-Feature-Vector=(LOCAL_HOME_AGENT_ASSIGNMENT  |\n\
    \    |                                    | MIP6_INTEGRATED)           |\n   \
    \ |                                   Result-Code=DIAMETER_SUCCESS  |\n    | \
    \                                      EAP-Payload(EAP Success)  |\n    |    \
    \                                     EAP-Master-Session-Key  |\n    |       \
    \                                    (authorization AVPs)  |\n    |          \
    \                                                 ...   |\n    |<----------------------------------------------------------------|\n\
    \    |                                                                 |\n   \
    \    Figure 4: Home Agent Assignment by the NAS or Diameter Server\n   If the\
    \ Diameter server does not allow the MN to use a locally\n   assigned HA, the\
    \ Diameter server returns to the MN the MIP6-Feature-\n   Vector AVP with the\
    \ LOCAL_HOME_AGENT_ASSIGNMENT bit unset and the HA\n   address it allocated.\n"
- title: 6.  Attribute-Value Pair Occurrence Tables
  contents:
  - "6.  Attribute-Value Pair Occurrence Tables\n   Figure 5 lists the MIPv6 bootstrapping\
    \ NAS-to-HAAA interface AVPs\n   along with a specification determining how many\
    \ of each new AVP may\n   be included in a Diameter command.  They may be present\
    \ in any\n   Diameter application request and answer commands, where permitted\
    \ by\n   the command ABNF.\n                                     +-----------+\n\
    \                                     |  Command  |\n                        \
    \             |-----+-----+\n      Attribute Name                 | Req | Ans\
    \ |\n      -------------------------------|-----+-----|\n      MIP6-Agent-Info\
    \                | 0+  | 0+  |\n      MIP6-Feature-Vector            | 0-1 | 0-1\
    \ |\n                                     +-----+-----+\n          Figure 5: Generic\
    \ Request and Answer Commands AVP Table\n"
- title: 7.  IANA Considerations
  contents:
  - '7.  IANA Considerations

    '
- title: 7.1.  Registration of New AVPs
  contents:
  - "7.1.  Registration of New AVPs\n   This specification defines the following AVPs\
    \ that have been\n   allocated from a normal Diameter AVP Code space (values >=\
    \ 256):\n     MIP6-Agent-Info                is set to 486\n   The following new\
    \ AVPs are to be allocated from RADIUS Attribute Type\n   space [RFC2865] so that\
    \ they are RADIUS backward-compatible (AVP Code\n   values between 0-255):\n \
    \    MIP6-Feature-Vector            is set to 124\n     MIP6-Home-Link-Prefix\
    \          is set to 125\n"
- title: '7.2.  New Registry: Mobility Capability'
  contents:
  - "7.2.  New Registry: Mobility Capability\n   IANA has created a new registry for\
    \ the Mobility Capability as\n   described in Section 4.2.5.\n   Token       \
    \                      | Value               | Description\n   ----------------------------------+---------------------+------------\n\
    \   MIP6_INTEGRATED                   | 0x0000000000000001  | [RFC5447]\n   LOCAL_HOME_AGENT_ASSIGNMENT\
    \       | 0x0000000000000002  | [RFC5447]\n   Available for Assignment via IANA\
    \ | 2^x                 |\n   Allocation rule: Only numeric values that are 2^x\
    \ (power of two,\n   where x >= 2) are allowed, based on the allocation policy\
    \ described\n   below.\n   Following the example policies described in [RFC5226],\
    \ new values for\n   the Mobility Capability Registry will be assigned based on\
    \ the\n   \"Specification Required\" policy.  No mechanism to mark entries as\n\
    \   \"deprecated\" is envisioned.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   The security considerations for the Diameter\
    \ interaction required to\n   accomplish the integrated scenario are described\
    \ in [INTEGRATED].\n   Additionally, the security considerations for the Diameter\
    \ base\n   protocol [RFC3588], the Diameter NASREQ application [RFC4005], and\n\
    \   the Diameter EAP application (with respect to network access\n   authentication\
    \ and the transport of keying material) [RFC4072] are\n   applicable to this document.\
    \  Developers should insure that special\n   attention is paid to configuring\
    \ the security associations protecting\n   the messages that enable the global\
    \ positioning and allocation of\n   home agents, for instance, as outlined in\
    \ Section 5.\n   Furthermore, the Diameter messages may be transported between\
    \ the NAS\n   and the Diameter server via one or more AAA brokers or Diameter\n\
    \   agents (such as proxies).  In this case, the AAA communication from\n   the\
    \ NAS to the Diameter server relies on the security properties of\n   the intermediate\
    \ AAA brokers and Diameter agents.\n"
- title: 9.  Acknowledgments
  contents:
  - "9.  Acknowledgments\n   This document is heavily based on the ongoing work for\
    \ RADIUS MIPv6\n   interaction.  Hence, credits go to respective authors for their\
    \ work\n   with \"RADIUS Mobile IPv6 Support\" (November 2008).  Furthermore,\
    \ the\n   authors of this document would like to thank the authors of \"Diameter\n\
    \   Mobile IPv6 Application\" (November 2004) -- Franck Le, Basavaraj\n   Patil,\
    \ Charles E. Perkins, and Stefano Faccin -- for their work in\n   the context\
    \ of MIPv6 Diameter interworking.  Their work influenced\n   this document.  Jouni\
    \ Korhonen would like to thank the Academy of\n   Finland and TEKES MERCoNe Project\
    \ for providing funding to work on\n   this document while he was with TeliaSonera.\
    \  Julien Bournelle would\n   like to thank GET/INT since he began to work on\
    \ this document while\n   he was in their employ.  Authors would also like to\
    \ acknowledge\n   Raymond Hsu for his valuable feedback on local HA assignment\
    \ and\n   Wolfgang Fritsche for his thorough review.  Additionally, we would\n\
    \   like to Domagoj Premec for his review comments.\n   Finally, we would like\
    \ to thank Alper Yegin, Robert Marks, and David\n   Frascone for their comments\
    \ at the second WG Last Call.\n"
- title: 10.  References
  contents:
  - '10.  References

    '
- title: 10.1.  Normative References
  contents:
  - "10.1.  Normative References\n   [RFC2119]     Bradner, S., \"Key words for use\
    \ in RFCs to Indicate\n                 Requirement Levels\", BCP 14, RFC 2119,\
    \ March 1997.\n   [RFC2865]     Rigney, C., Willens, S., Rubens, A., and W. Simpson,\n\
    \                 \"Remote Authentication Dial In User Service (RADIUS)\",\n \
    \                RFC 2865, June 2000.\n   [RFC3588]     Calhoun, P., Loughney,\
    \ J., Guttman, E., Zorn, G., and\n                 J. Arkko, \"Diameter Base Protocol\"\
    , RFC 3588,\n                 September 2003.\n   [RFC3775]     Johnson, D., Perkins,\
    \ C., and J. Arkko, \"Mobility\n                 Support in IPv6\", RFC 3775,\
    \ June 2004.\n   [RFC4004]     Calhoun, P., Johansson, T., Perkins, C., Hiller,\
    \ T.,\n                 and P. McCann, \"Diameter Mobile IPv4 Application\",\n\
    \                 RFC 4004, August 2005.\n   [RFC4005]     Calhoun, P., Zorn,\
    \ G., Spence, D., and D. Mitton,\n                 \"Diameter Network Access Server\
    \ Application\", RFC 4005,\n                 August 2005.\n   [RFC4072]     Eronen,\
    \ P., Hiller, T., and G. Zorn, \"Diameter\n                 Extensible Authentication\
    \ Protocol (EAP) Application\",\n                 RFC 4072, August 2005.\n"
- title: 10.2.  Informative References
  contents:
  - "10.2.  Informative References\n   [AAA]         Giaretta, G., Guardini, I., Demaria,\
    \ E., Bournelle, J.,\n                 and R. Lopez, \"AAA Goals for Mobile IPv6\"\
    , Work\n                 in Progress, May 2008.\n   [DSMIPv6]     Solimand, H.,\
    \ \"Mobile IPv6 Support for Dual Stack Hosts\n                 and Routers (DSMIPv6)\"\
    , Work in Progress,\n                 December 2008.\n   [INTEGRATED]  Chowdhury,\
    \ K. and A. Yegin, \"MIP6-bootstrapping for the\n                 Integrated Scenario\"\
    , Work in Progress, April 2008.\n   [RFC3753]     Manner, J. and M. Kojo, \"Mobility\
    \ Related Terminology\",\n                 RFC 3753, June 2004.\n   [RFC4640]\
    \     Patel, A. and G. Giaretta, \"Problem Statement for\n                 bootstrapping\
    \ Mobile IPv6 (MIPv6)\", RFC 4640,\n                 September 2006.\n   [RFC5026]\
    \     Giaretta, G., Kempf, J., and V. Devarapalli, \"Mobile\n                \
    \ IPv6 Bootstrapping in Split Scenario\", RFC 5026,\n                 October\
    \ 2007.\n   [RFC5226]     Narten, T. and H. Alvestrand, \"Guidelines for Writing\n\
    \                 an IANA Considerations Section in RFCs\", BCP 26,\n        \
    \         RFC 5226, May 2008.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Jouni Korhonen (editor)\n   Nokia Siemens Networks\n \
    \  Linnoitustie 6\n   Espoo  FIN-02600\n   Finland\n   EMail: jouni.nospam@gmail.com\n\
    \   Julien Bournelle\n   Orange Labs\n   38-4O rue du general Leclerc\n   Issy-Les-Moulineaux\
    \  92794\n   France\n   EMail: julien.bournelle@orange-ftgroup.com\n   Hannes\
    \ Tschofenig\n   Nokia Siemens Networks\n   Linnoitustie 6\n   Espoo  02600\n\
    \   Finland\n   EMail: Hannes.Tschofenig@nsn.com\n   URI:   http://www.tschofenig.priv.at\n\
    \   Charles E. Perkins\n   WiChorus Inc.\n   3590 North First St., Suite 300\n\
    \   San Jose, CA  95134\n   US\n   EMail: charliep@wichorus.com\n   Kuntal Chowdhury\n\
    \   Starent Networks\n   30 International Place\n   Tewksbury, MA  01876\n   US\n\
    \   EMail: kchowdhury@starentnetworks.com\n"
