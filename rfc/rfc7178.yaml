- contents:
  - "         Transparent Interconnection of Lots of Links (TRILL):\n                        RBridge
    Channel Support\n"
  title: __initial_text__
- contents:
  - "Abstract\n   This document specifies a general channel mechanism for sending\n
    \  messages, such as Bidirectional Forwarding Detection (BFD) messages,\n   between
    Routing Bridges (RBridges) and between RBridges and end\n   stations in an RBridge
    campus through extensions to the Transparent\n   Interconnection of Lots of Links
    (TRILL) protocol.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    5741.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7178.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (http://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n
    \     1.1. RBridge Channel Requirements ...............................3\n      1.2.
    Relation to the MPLS Generic Associated Channel ............4\n      1.3. Terminology
    ................................................4\n   2. Inter-RBridge Channel
    Messages ..................................4\n      2.1. RBridge Channel Message
    Inner Frame ........................6\n           2.1.1. RBridge Channel Header
    ..............................6\n           2.1.2. Inner Ethernet Header ...............................8\n
    \          2.1.3. Inner.VLAN Tag ......................................8\n      2.2.
    TRILL Header for RBridge Channel Messages ..................9\n      2.3. Ethernet
    Link Header and Trailer ..........................10\n      2.4. Special Transmission
    and Rate Considerations ..............10\n   3. Processing RBridge Channel TRILL
    Data Messages .................11\n      3.1. Processing the RBridge Channel Header
    .....................12\n      3.2. RBridge Channel Errors ....................................13\n
    \  4. Native RBridge Channel Frames ..................................14\n   5.
    Indicating Support for RBridge Channel Protocols ...............16\n   6. Congestion
    Considerations ......................................16\n   7. Allocation Considerations
    ......................................17\n      7.1. IANA Considerations .......................................17\n
    \     7.2. IEEE Registration Authority Considerations ................18\n   8.
    Security Considerations ........................................18\n   9. References
    .....................................................19\n      9.1. Normative
    References ......................................19\n      9.2. Informative References
    ....................................20\n   10. Acknowledgments ...............................................20\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   RBridge campuses provide transparent least-cost forwarding
    using the\n   Transparent Interconnection of Lots of Links (TRILL) protocol that\n
    \  builds on Intermediate System to Intermediate System (IS-IS) routing\n   [IS-IS]
    [RFC1195] [RFC7176].  Devices that implement TRILL are called\n   Routing Bridges
    (RBridges) or TRILL Switches.  However, the TRILL\n   base protocol standard [RFC6325]
    provides only for TRILL Data\n   messages and TRILL IS-IS messages.\n   This document
    specifies a general channel mechanism for the\n   transmission of other messages
    within an RBridge campus, such as BFD\n   [RFC5880] messages, (1) between RBridges
    and end stations that are\n   directly connected on the same link and (2) between
    RBridges.  This\n   mechanism supports a requirement to be able to operate with
    minimal\n   configuration.\n"
  - contents:
    - "1.1.  RBridge Channel Requirements\n   It is anticipated that various protocols
      operating at the TRILL layer\n   will be desired in RBridge campuses.  For example,
      there is a need\n   for rapid-response continuity checking with a protocol such
      as BFD\n   [RFC5880] [RFC5882] and for a variety of optional reporting.\n   To
      avoid the requirement to design and specify a way to carry each\n   such protocol,
      this document specifies a general channel for sending\n   messages between RBridges
      in a campus at the TRILL level by extending\n   the TRILL protocol.  To accommodate
      a wide variety of protocols, this\n   RBridge Channel facility accommodates
      all the regular modes of TRILL\n   Data transmission including single- and multiple-hop
      unicast as well\n   as VLAN-scoped multi-destination distribution.\n   To minimize
      any unnecessary burden on transit RBridges and to provide\n   a more realistic
      test of network continuity and the like, RBridge\n   Channel messages are designed
      to look like TRILL Data frames and, in\n   the case of multi-hop messages, can
      normally be handled by transit\n   RBridges as if they were TRILL Data frames;
      however, to enable\n   processing at transit RBridges when required by particular
      messages,\n   they may optionally use the RBridge Channel Alert TRILL extended\n
      \  header flags [RFC7179] that causes a transit RBridge implementing the\n   flag
      to more closely examine a flagged frame.\n   This document also specifies a
      format for sending RBridge Channel\n   messages between RBridges and end stations
      that are directly\n   connected over a link, in either direction, when provided
      for by the\n   protocol involved.  For the most part, this format is the same
      as the\n   format that is encapsulated by TRILL Data for inter-RBridge Channel\n
      \  messages.\n   Each particular protocol using the RBridge Channel facility
      will\n   likely use only a subset of the facilities specified herein.\n"
    title: 1.1.  RBridge Channel Requirements
  - contents:
    - "1.2.  Relation to the MPLS Generic Associated Channel\n   The RBridge Channel
      is similar to the MPLS Generic Associated Channel\n   specified in [RFC5586].
      \ Instead of using a special MPLS label to\n   indicate a special channel message,
      an RBridge Channel message is\n   indicated by a special multicast Inner.MacDA
      and inner Ethertype (see\n   Section 2.1).\n"
    title: 1.2.  Relation to the MPLS Generic Associated Channel
  - contents:
    - "1.3.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\",
      \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and
      \"OPTIONAL\" in this\n   document are to be interpreted as described in [RFC2119].\n
      \  The terminology and acronyms of [RFC6325] are used in this document\n   with
      the additions listed below.\n      BFD - Bidirectional Forwarding Detection\n
      \     CHV - Channel Header Version\n      MH - Multi-Hop\n      NA - Native\n
      \     SL - Silent\n"
    title: 1.3.  Terminology
  title: 1.  Introduction
- contents:
  - "2.  Inter-RBridge Channel Messages\n   Channel messages between RBridges are
    transmitted as TRILL Data\n   frames.  (For information on channel messages that
    can be transmitted\n   between RBridges and end stations that are directly connected
    by a\n   link, see Section 4.)  Inter-RBridge Channel messages are identified\n
    \  as such by their Inner.MacDA, which is the All-Egress-RBridges\n   multicast
    address, together with their inner Ethertype, which is the\n   RBridge-Channel
    Ethertype.  This Ethertype is part of and starts the\n   RBridge Channel Header.\n
    \  The diagram below shows the overall structure of an RBridge Channel\n   Message
    frame on a link between two RBridges:\n              Frame Structure             Section
    of This Document\n                                          ------------------------\n
    \    +--------------------------------+\n     |          Link Header           |
    \  Section 2.3 if Ethernet link\n     +--------------------------------+\n     |
    \         TRILL Header          |   Section 2.2\n     +--------------------------------+\n
    \    |     Inner Ethernet Header      |   Section 2.1.2\n     +--------------------------------+\n
    \    |     RBridge Channel Header     |   Section 2.1.1\n     +--------------------------------+\n
    \    |   Protocol-Specific Payload    |   See specific channel protocol\n     +--------------------------------+\n
    \    | Link Trailer (FCS if Ethernet) |\n     +--------------------------------+\n
    \               Figure 1: RBridge Channel Frame Structure\n   Optionally, some
    channel messages may require examination of the\n   frame by transit RBridges
    that support the RBridge Channel feature,\n   to determine if they need to take
    any action.  To indicate this, such\n   messages use an RBridge Channel Alert
    extended TRILL Header flag as\n   further described in Section 3 below.\n   Sections
    2.1 and 2.2 describe the inner frame and the TRILL Header\n   for frames sent
    in an RBridge Channel.  As always, the outer Link\n   Header and Link Trailer
    are whatever is needed to get a TRILL Data\n   frame to the next-hop RBridge,
    depending on the technology of the\n   link, and can change with each hop for
    multi-hop messages.  Section\n   2.3 describes the outer Link Header for Ethernet
    links, and Section\n   2.4 discusses some special considerations for the first
    hop\n   transmission of RBridge Channel messages.\n   Section 3 describes some
    details of RBridge Channel message\n   processing.  Section 4 provides the specifications
    for native RBridge\n   Channel frames between RBridges and end stations that are
    directly\n   connected over a link.  Section 5 describes how support for RBridge\n
    \  Channel protocols is indicated.  And Sections 6, 7, and 8 give\n   congestion,
    allocation (IANA and IEEE), and security considerations\n   respectively.\n"
  - contents:
    - "2.1.  RBridge Channel Message Inner Frame\n   The encapsulated inner frame
      within an RBridge Channel message frame\n   is as shown below.\n       0                   1
      \                  2                   3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3
      4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n    Inner Ethernet Header:\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |         Special Inner.MacDA = All-Egress-RBridges             |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |   Special Inner.MacDA cont.   |         Inner.MacSA           |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                       Inner.MacSA cont.                       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |       VLAN Tag Ethertype      |  Priority, DEI, VLAN ID       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \   RBridge Channel Header:\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |    RBridge-Channel Ethertype  |  CHV  |   Channel Protocol    |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |          Flags        |  ERR  |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \   Information specific to the RBridge Channel Protocol:\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                                                               |\n      +
      \                Channel-Protocol-Specific Data\n      |  ...\n            Figure
      2: RBridge Channel Inner Frame Header Fields\n   The Channel-Protocol-Specific
      Data contains the information related\n   to the specific channel protocol used
      in the channel message.\n   Details of that data are outside the scope of this
      document, except\n   in the case of the RBridge Channel Error protocol specified
      in\n   Section 3.2.\n"
    - contents:
      - "2.1.1.  RBridge Channel Header\n   As shown in Figure 2, the RBridge Channel
        Header starts with the\n   RBridge-Channel Ethertype (see Section 7.2).  Following
        that is a\n   four-byte quantity with four sub-fields as follows:\n      CHV:
        A 4-bit field that gives the RBridge Channel Header Version.\n         This
        document specifies version zero.\n      Channel Protocol: A 12-bit unsigned
        integer that specifies the\n         particular RBridge Channel protocol to
        which the message\n         applies.\n      Flags: Provides 12 bits of flags
        as described below.\n      ERR: A 4-bit unsigned integer used in connection
        with error\n         reporting at the RBridge Channel level as described in
        Section\n         3.\n   The flag bits are numbered from 0 to 11 as shown
        below.\n                | 0  1  2  3  4  5  6  7  8  9 10 11|\n                +--+--+--+--+--+--+--+--+--+--+--+--+\n
        \               |SL|MH|NA|        Reserved          |\n                +--+--+--+--+--+--+--+--+--+--+--+--+\n
        \                Figure 3: Channel Header Flag Bits\n      Bit 0: The SL or
        Silent bit, the high-order bit in network order.\n         If it is a one,
        it suppresses RBridge Channel Error messages\n         (see Section 3).\n
        \     Bit 1: The MH or Multi-Hop bit.  It is used to inform the\n         destination
        RBridge protocol that the message may be multi-hop\n         (MH=1) or was
        intended to be one-hop only (MH=0).\n      Bit 2: The NA or Native bit.  It
        is used as described in Section\n         4.\n      Reserved: Bits reserved
        for future specification that MUST be sent\n         as zero and ignored on
        receipt.\n   The RBridge Channel Protocol field specifies the protocol that
        the\n   channel message relates to.  The initial defined value is listed\n
        \  below.\n         Protocol  Name - Section of This Document\n         --------
        \ -------------------------------\n          0x001    RBridge Channel Error
        - Section 3\n   IANA Considerations for RBridge Channel protocol numbers are
        provided\n   in Section 7.  These include provisions for Private Use protocol\n
        \  numbers.  Because different uses of Private Use RBridge Channel\n   protocol
        numbers may conflict, such use MUST be within a private\n   network.  It is
        the responsibility of the private network manager to\n   avoid conflicting
        use of these code points and unacceptable burdens\n   within the private network
        from their use.\n"
      title: 2.1.1.  RBridge Channel Header
    - contents:
      - "2.1.2.  Inner Ethernet Header\n   The special Inner.MacDA is the All-Egress-RBridges
        multicast Media\n   Access Control (MAC) address to signal that the frame
        is intended for\n   the egress (decapsulating) RBridge itself (or the egress
        RBridges\n   themselves if the frame is multi-destination).  (This address
        is\n   called the All-ESADI-RBridges address in [RFC6325].)  The RBridge-\n
        \  Channel Ethertype indicates that the frame is an RBridge Channel\n   message.
        \ The only other Ethertype currently specified for use with\n   the All-Egress-RBridges
        Inner.MacDA is L2-IS-IS to indicate an ESADI\n   frame [RFC6325].  In the
        future, additional Ethertypes may be\n   specified for use with the All-Egress-RBridges
        multicast address.\n   The RBridge originating the channel message selects
        the Inner.MacSA.\n   The Inner.MacSA MUST be set by the originating RBridge
        to a MAC\n   address unique within the campus owned by the originating RBridge.\n
        \  This MAC address can be considered, in effect, the MAC address of a\n   virtual
        internal end station that handles the RBridge Channel frames\n   originated
        by or destined for that RBridge.  It MAY be the same as\n   the Inner.MacSA
        used by the RBridge when it originates ESADI frames\n   [RFC6325].\n"
      title: 2.1.2.  Inner Ethernet Header
    - contents:
      - "2.1.3.  Inner.VLAN Tag\n   As with all frames formatted to be processed as
        a TRILL Data frame,\n   an Inner.VLAN tag is present.  Use of a VLAN tag Ethertype
        other than\n   0x8100 or stacked tags is beyond the scope of this document
        but is an\n   obvious extension.\n   Multi-destination RBridge Channel messages
        are, like all multi-\n   destination TRILL Data messages, VLAN scoped so the
        Inner.VLAN ID\n   MUST be set to the VLAN of interest.  To the extent that
        distribution\n   tree pruning is in effect in the campus, such channel messages
        may\n   only reach RBridges advertising that they have connectivity to that\n
        \  VLAN.\n   For channel messages sent as known unicast TRILL Data frames,
        the\n   default value for the Inner.VLAN ID is VLAN 1, but particular RBridge\n
        \  Channel protocols MAY specify other values.\n   The Inner.VLAN also specifies
        a three-bit frame priority for which\n   the following recommendations apply:\n
        \  1.  For one-hop channel messages critical to network connectivity,\n       such
        as one-hop BFD for rapid link-failure detection in support\n       of TRILL
        IS-IS, the RECOMMENDED priority is 7.\n   2.  For single and multi-hop unicast
        channel messages important to\n       network operation but not critical for
        connectivity, the\n       RECOMMENDED priority is 6.\n   3.  For other unicast
        channel messages and all multi-destination\n       channel messages, it is
        RECOMMENDED that the default priority\n       zero be used.  In any case,
        priorities higher than 5 SHOULD NOT\n       be used for such frames.\n   There
        is one additional bit in a VLAN tag value between the 12-bit\n   VLAN ID and
        3-bit priority, the Drop Eligibility Indicator (DEI)\n   [RFC7180].  It is
        RECOMMENDED that this bit be zero for the first two\n   categories of channel
        messages listed immediately above.  The setting\n   of this bit for channel
        messages in the third category may be\n   dependent on the channel protocol
        and no general recommendation is\n   made for that case.\n"
      title: 2.1.3.  Inner.VLAN Tag
    title: 2.1.  RBridge Channel Message Inner Frame
  - contents:
    - "2.2.  TRILL Header for RBridge Channel Messages\n   After the outer Link Header
      (that, for an Ethernet link, ends with\n   the TRILL Ethertype) and before the
      encapsulated frame, the channel\n   message's TRILL Header initially appears
      as follows:\n      0                   1                   2                   3\n
      \     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n                                     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \                                    |V=0| R |M| Op-Len  | Hop Count |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |       Egress Nickname         |       Ingress Nickname        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \             Figure 4: RBridge Channel TRILL Header Fields\n   The TRILL Header
      version (V) MUST be zero; the R bits are reserved;\n   the M bit is set appropriately
      as the channel message is to be\n   forwarded as known destination unicast (M=0)
      or multi-destination\n   (M=1), regardless of the fact that the Inner.MacDA
      is always the All-\n   Egress-RBridges multicast address; and Op-Len is set
      appropriately\n   for the length of the TRILL Header extensions area, if any,
      all as\n   specified in [RFC6325].\n   When an RBridge Channel message is originated,
      the Hop Count field\n   defaults to the maximum value, 0x3F, but particular
      RBridge Channel\n   protocols MAY specify other values.  For messages sent a
      known number\n   of hops, such as one-hop messages or a two-hop self-addressed
      message\n   intended to loop back through an immediate neighbor RBridge, setting\n
      \  the Hop Count field in the TRILL Header to the maximum value and\n   checking
      its value on receipt provides an additional validity check\n   as discussed
      in [RFC5082], where this type of field is referred to as\n   \"TTL\" or \"Hop
      Limit\".\n   The RBridge originating a channel message places a nickname that
      it\n   holds in the Ingress Nickname field.\n   There are several cases for
      the Egress Nickname field.  If the\n   channel message is multi-destination,
      then the Egress Nickname\n   designates the distribution tree to use.  If the
      channel message is a\n   multi-hop unicast message, then the Egress Nickname
      is a nickname of\n   the target RBridge; this includes the special case of a
      message\n   intended to loop back from an immediate neighbor where the originator\n
      \  places one of its own nicknames in both the Ingress Nickname and\n   Egress
      Nickname fields.  If the channel message is a one-hop unicast\n   message, there
      are two possibilities for the Egress Nickname.\n   o  The Egress Nickname can
      be set to a nickname of the target\n      neighbor RBridge.\n   o  The special
      nickname Any-RBridge may be used.  RBridges supporting\n      the RBridge Channel
      facility MUST recognize the Any-RBridge\n      special nickname and accept TRILL
      Data frames having that value in\n      the Egress Nickname field as being sent
      to them as the egress.\n      Thus, for such RBridges, using this egress nickname
      guarantees\n      processing by an immediate neighbor regardless of the state
      of\n      nicknames.\n"
    title: 2.2.  TRILL Header for RBridge Channel Messages
  - contents:
    - "2.3.  Ethernet Link Header and Trailer\n   An RBridge Channel frame has the
      usual Link Header and Link Trailer\n   for a TRILL Data frame depending on the
      type of link on which it is\n   sent.\n   For an Ethernet link [RFC6325], the
      Outer.MacSA is the MAC address of\n   the port from which the frame is sent.
      \ The Outer.MacDA is the MAC\n   address of the next-hop RBridge port for unicast
      RBridge Channel\n   messages or the All-RBridges multicast address for multi-destination\n
      \  RBridge Channel messages.  The Outer.VLAN tag specifies the\n   designated
      VLAN for that hop, and the priority should be the same as\n   in the Inner.VLAN
      tag; however, the output port may have been\n   configured to strip VLAN tags,
      in which case no Outer.VLAN tag\n   appears on the wire.  And the Link Trailer
      is the Ethernet FCS.\n"
    title: 2.3.  Ethernet Link Header and Trailer
  - contents:
    - "2.4.  Special Transmission and Rate Considerations\n   If a multi-hop RBridge
      Channel message is received by an RBridge, the\n   criteria and method of forwarding
      it are the same as for any TRILL\n   Data frame.  If it is so forwarded, it
      will be on a link that was\n   included in the routing topology because it was
      in the Report state\n   as specified in [RFC7177].\n   However, special considerations
      apply to single-hop messages because,\n   for some RBridge Channel protocols,
      it may be desirable to send\n   RBridge Channel messages over a link that is
      not yet fully up.  In\n   particular, it is permissible, if specified by the
      particular channel\n   protocol, for the source RBridge that has created an
      RBridge Channel\n   message to attempt to transmit it to a next-hop RBridge
      when the link\n   is in the Detect or 2-Way state, as specified in [RFC7177],
      as well\n   as when it is in the Report state.  Such messages can also be sent
      on\n   point-to-point links that are not in the Up state.\n   RBridge Channel
      messages represent a burden on the RBridges, and\n   links in a campus and should
      be rate limited, especially if they are\n   sent as high priority, multi-destination,
      or multi-hop frames or have\n   an RBridge Channel Alert extended header flag
      set.  See Section 6,\n   \"Congestion Considerations\".\n"
    title: 2.4.  Special Transmission and Rate Considerations
  title: 2.  Inter-RBridge Channel Messages
- contents:
  - "3.  Processing RBridge Channel TRILL Data Messages\n   RBridge Channel TRILL
    Data messages are designed to look like and, to\n   the extent practical, be forwarded
    as regular TRILL Data frames.  On\n   receiving a channel message, an RBridge
    performs the usual initial\n   tests on the frame and makes the same forwarding
    and/or decapsulation\n   decisions as for a regular TRILL Data frame [RFC6325]
    with the\n   following exceptions for RBridges implementing the RBridge Channel\n
    \  facility:\n   1.  An RBridge implementing the RBridge Channel facility MUST\n
    \      recognize the Any-RBridge egress nickname in TRILL Data frames,\n       decapsulating
    such frames if they meet other checks.  (Such a\n       frame cannot be a valid
    multi-destination frame because the Any-\n       RBridge nickname is not a valid
    distribution tree root.)\n   2.  If an RBridge Channel Alert extended header flag
    is set, then the\n       RBridge MUST process the RBridge Channel message as described\n
    \      below even if it is not egressing the frame.  If it is egressing\n       the
    frame, then no additional processing beyond egress processing\n       is needed
    even if an RBridge Channel Alert flag is set.\n   3.  On decapsulation, the special
    Inner.MacDA value of All-Egress-\n       RBridges MUST be recognized to trigger
    checking the\n       Inner.Ethertype and processing as an RBridge Channel message
    if\n       that Ethertype is RBridge-Channel.\n   RBridge Channel messages SHOULD
    only be sent to RBridges that\n   advertise support for the channel protocol involved
    as described in\n   Section 5.\n   All RBridges supporting the RBridge Channel
    facility MUST recognize\n   the RBridge-Channel inner Ethertype.\n"
  - contents:
    - "3.1.  Processing the RBridge Channel Header\n   Knowing that it has an RBridge
      Channel message, the egress RBridge,\n   and any transit RBridge if an RBridge
      Channel Alert bit is set in the\n   TRILL Header, looks at the CHV (RBridge
      Channel Header Version) and\n   Channel Protocol fields.\n   If any of the following
      conditions occur at an egress RBridge, the\n   frame is not processed, an error
      may be generated as specified in\n   Section 3.2, and the frame is discarded.
      \ The behavior is the same if\n   the frame is being processed at a transit
      RBridge because the RBridge\n   Critical Channel Alert flag is set [RFC7179].
      \ However, if these\n   conditions are detected at a transit RBridge examining
      the message\n   because the RBridge Non-critical Channel Alert flag is set [RFC7179]\n
      \  but the RBridge Critical Channel Alert flag is not set, no error is\n   generated,
      and the frame is still forwarded normally.\n   Error Conditions:\n   1.  The
      Ethertype is not RBridge-Channel and not any other Ethertype\n       known to
      the RBridge as usable with the All-Egress-RBridges\n       Inner.MacDA, or the
      frame is so short that the Ethertype is\n       truncated.\n   2.  The CHV field
      is non-zero, or the frame is so short that the\n       version zero Channel
      Header is truncated.\n   3.  The Channel Protocol field is a reserved value
      or a value unknown\n       to the processing RBridge.\n   4.  The ERR field
      is non-zero, and Channel Protocol is a value other\n       than 0x001.\n   5.
      \ The RBridge Channel Header NA flag is set to one, indicating that\n       the
      frame should have been received as a native frame rather than\n       a TRILL
      Data frame.\n   If the CHV field and NA flag are zero and the processing RBridge\n
      \  recognizes the Channel Protocol value, it processes the message in\n   accordance
      with that channel protocol.  The processing model is as if\n   the received
      frame starting with and including the TRILL Header is\n   delivered to the Channel
      protocol along with a flag indicating\n   whether this is (a) transit RBridge
      processing due to an RBridge\n   Channel Alert flag being set or (b) egress
      processing.\n   Errors within a recognized Channel Protocol are handled by that\n
      \  channel protocol itself and do not produce RBridge Channel Error\n   frames.\n"
    title: 3.1.  Processing the RBridge Channel Header
  - contents:
    - "3.2.   RBridge Channel Errors\n   A variety of problems at the RBridge Channel
      level cause the return\n   of an RBridge Channel Error frame unless one of the
      following apply:\n   (a) the \"SL\" (Silent) flag is a one in the channel message
      for which\n   the problem was detected, (b) the processing is due to the RBridge\n
      \  Non-critical Channel Alert flag being set, (c) the frame in error\n   appears,
      itself, to be an RBridge Channel Error frame (has a non-zero\n   ERR field or
      a Channel Protocol of 0x001), or (d) the error is\n   suppressed due to rate
      limiting.\n   An RBridge Channel Error frame is a multi-hop unicast RBridge
      Channel\n   message with the Ingress Nickname set to a nickname of the RBridge\n
      \  detecting the error and the Egress Nickname set to the value of the\n   Ingress
      Nickname in the channel message for which the error was\n   detected.  No per-hop
      transit processing is specified for such error\n   frames, so the RBridge Channel
      Alert extended header flags SHOULD, if\n   an extension is present, be set to
      zero.  The SL and MH flags SHOULD\n   be set to one; the NA flag MUST be zero;
      and the ERR field MUST be\n   non-zero as described below.  For the protocol-specific
      data area, an\n   RBridge Channel Message Error frame has at least the first
      256 bytes\n   (or less if less are available) of the erroneous decapsulated
      channel\n   message starting with the TRILL Header.  (Note: The TRILL Header
      does\n   not include the TRILL Ethertype that is part of the Link Header on\n
      \  Ethernet links.)\n   The following values for ERR are specified:\n      ERR
      \  RBridge Channel Error Code Meaning\n      ---   ----------------------------------\n
      \      0    No error\n       1    Frame too short (truncated Ethertype or Channel
      Header)\n       2    Unrecognized Ethertype\n       3    Unimplemented value
      of CHV\n       4    Wrong value of NA flag\n       5    Channel Protocol is
      reserved or unimplemented\n      6-14  Unassigned (see Section 7)\n      15
      \   Reserved (see Note)\n      Note:  Intended to be allocated by Standards
      Action for an error\n             code expansion feature when it appears likely
      that all\n             other available error codes are being allocated.\n   All
      RBridges implementing the RBridge Channel feature MUST recognize\n   the RBridge
      Channel Error protocol value (0x001).  They MUST NOT\n   generate an RBridge
      Channel Error message in response to an RBridge\n   Channel Error message, that
      is, a channel message with a protocol\n   value of 0x001 or with a non-zero
      ERR field.\n"
    title: 3.2.   RBridge Channel Errors
  title: 3.  Processing RBridge Channel TRILL Data Messages
- contents:
  - "4.  Native RBridge Channel Frames\n   Other sections of this document specify
    non-native RBridge Channel\n   messages and their processing, that is, RBridge
    Channel messages\n   formatted as TRILL Data frames and sent between RBridges.
    \ This\n   section specifies the differences for native RBridge Channel\n   messages.\n
    \  If provided for by the channel protocol involved, native RBridge\n   Channel
    messages may be sent between end stations and RBridges that\n   are directly connected
    over a link, in either direction.  On an\n   Ethernet link, such native frames
    have the RBridge-Channel Ethertype\n   and are like the encapsulated frame inside
    an RBridge Channel message\n   except as follows:\n   1.  TRILL does not require
    the presence of a VLAN tag on such native\n       RBridge Channel frames.  However,
    port configuration, link\n       characteristics, or the channel protocol involved
    may require\n       such tagging.\n   2.  If the frame is unicast, the destination
    MAC address is the\n       unicast MAC address of the RBridge or end-station port
    that is\n       its intended destination.  If the frame is multicast by an end\n
    \      station to all the RBridges on a link that support an RBridge\n       Channel
    protocol using this transport, the destination MAC\n       address is the All-Edge-RBridges
    multicast address (see Section\n       7).  A native RBridge Channel frame received
    at an ingress\n       RBridge is discarded if its destination MAC address is neither\n
    \      the unicast address of the port nor the multicast address All-\n       Edge-RBridges.
    \ If the frame is multicast by an RBridge to all\n       the devices that TRILL
    considers to be end stations on a link and\n       that support an RBridge Channel
    protocol using this transport,\n       the destination MAC address is the TRILL-End-Stations
    multicast\n       address (see Section 7).  A native RBridge Channel frame received\n
    \      at an end station is discarded if its destination MAC address is\n       neither
    the unicast address of the port nor the multicast address\n       TRILL-End-Stations.\n
    \  3.  The RBridge-Channel outer Ethertype must be present.  In the\n       future,
    there may be other protocols using the All-Edge-RBridges\n       and/or TRILL-End-Stations
    multicast addresses on native frames\n       distinguished by different Ethertypes.\n
    \  4.  The NA or Native bit in the RBridge Channel Header flags MUST be\n       a
    one.\n   5.  There might be additional tags present between the Outer.MacDA,\n
    \      Outer.MacSA pair, and the RBridge-Channel Ethertype.\n   The RBridge Channel
    protocol number space for native RBridge Channel\n   messages and TRILL Data formatted
    RBridge Channel messages is the\n   same.  If provided for by the channel protocol
    involved, the receipt\n   of a native RBridge Channel frame MAY lead to the generation
    and\n   transmission of one or more Inter-RBridge Channel frames.  The\n   decapsulation
    and processing of a TRILL Data RBridge Channel frame\n   MAY, if provided for
    by the channel protocol involved, result in the\n   sending of one or more native
    RBridge Channel frames to one or more\n   end stations.  Thus, there could be
    an RBridge Channel protocol that\n   involved an RBridge Channel message sent
    (1) from an origin RBridge\n   where the message is created, (2) through one or
    more transit\n   RBridges, and (3) from a final RBridge as a native RBridge Channel\n
    \  message to an end station (or the reverse of such a three-part path);\n   however,
    to do this, the RBridge Channel protocol involved must be\n   implemented at the
    RBridge where the channel message is changed\n   between a native frame and a
    TRILL Data format frame, and that\n   RBridge must change the channel message
    itself, at a minimum\n   complementing the NA flag in the Channel Header and making\n
    \  appropriate MAC address changes.\n   An erroneous native channel message results
    in a native RBridge\n   Channel Error message under the same conditions for which
    a TRILL\n   Data RBridge Channel message would result in a TRILL Data RBridge\n
    \  Channel Error message.  However, in a native RBridge Channel Error\n   message,
    the NA flag MUST be one.  Also, since there is no TRILL\n   Header in native RBridge
    Channel protocol frames, the beginning part\n   of the frame in which the error
    was detected that is included in\n   native RBridge Channel Error frames starts
    with the RBridge Channel\n   Header (including the RBridge-Channel Ethertype).
    \ The destination\n   MAC address of such error messages is set to the source
    MAC address\n   of the native RBridge Channel message that was in error.\n   There
    is no mechanism to stop end stations from directly exchanging\n   native RBridge
    Channel messages, but such usage is beyond the scope\n   of this document.\n"
  title: 4.  Native RBridge Channel Frames
- contents:
  - "5.  Indicating Support for RBridge Channel Protocols\n   Support for RBridge
    Channel protocols is indicated by the presence of\n   one or more TLVs and/or
    sub-TLVs in an RBridge's Link State PDU (LSP)\n   as documented in [RFC7176].\n
    \  RBridge Channel protocols 0 and 0xFFF are reserved, and protocol 1,\n   the
    RBridge Channel Error protocol, MUST be implemented as part of\n   the RBridge
    Channel feature.  Thus, if an RBridge supports the\n   RBridge Channel feature,
    it should be advertising support for\n   protocol 1 and not advertising support
    for protocols 0 or 0xFFF in\n   its LSP.  However, indication of support or non-support
    for RBridge\n   Channel protocol 1 is ignored on receipt, and support for it is\n
    \  always assumed if support for any RBridge Channel is indicated in the\n   RBridge's
    LSP.\n"
  title: 5.  Indicating Support for RBridge Channel Protocols
- contents:
  - "6.  Congestion Considerations\n   The bandwidth resources used by RBridge Channel
    protocols are\n   recommended to be small compared to the total bandwidth of the
    links\n   they traverse.  When doing network planning, the bandwidth\n   requirements
    for TRILL Data, TRILL IS-IS, TRILL ESADI, RBridge\n   Channel protocol traffic,
    and any other link-local traffic need to be\n   taken into account.\n   Specifications
    for particular RBridge Channel protocols MUST consider\n   congestion and bandwidth
    usage implications and provide guidance on\n   bandwidth or packet-frequency management.
    \ RBridge Channel protocols\n   can have built-in bandwidth management in their
    protocols.  Outgoing\n   channel messages SHOULD be rate-limited, by configuring
    the\n   underlying protocols or otherwise, to prevent aggressive connectivity\n
    \  verification or other applications consuming excessive bandwidth,\n   causing
    congestion, or becoming denial-of-service attacks.\n   If these conditions cannot
    be followed, an adaptive loss-based scheme\n   SHOULD be applied to congestion-control
    outgoing RBridge Channel\n   traffic, so that it competes fairly, taking into
    account packet\n   priorities and drop eligibility as indicated in the Inner.VLAN,
    with\n   TCP or similar traffic within an order of magnitude.  One method of\n
    \  determining an acceptable bandwidth for RBridge Channel traffic is\n   described
    in [RFC5348]; other methods exist.  For example, bandwidth\n   or packet-frequency
    management can include any of the following: a\n   negotiation of transmission
    interval/rate such as that provided in\n   BFD [RFC5880], a throttled transmission
    rate on \"congestion detected\"\n   situations, a gradual ramp-up after shutdown
    due to congestion and\n   until basic connectivity is verified, and other mechanisms.\n
    \  Connectivity-checking applications such as BFD [RFC5880] SHOULD be\n   rate-limited
    to below 5% of the bitrate of the associated link or\n   links.  For this purpose,
    the mean or sustained bitrate of the link\n   or links is used.\n   Incoming RBridge
    Channel messages MAY be rate-limited as a protection\n   against denial-of-service
    attacks.  This throttling of incoming\n   messages SHOULD honor packet priorities
    and drop eligibility\n   indications as indicated in the Inner.VLAN, preferentially
    discarding\n   drop-eligible and lower-priority packets.\n"
  title: 6.  Congestion Considerations
- contents:
  - "7.  Allocation Considerations\n   The following subsections give IANA and IEEE
    allocation\n   considerations.  In this document, the allocation procedure\n   specifications
    are as defined in [RFC5226].\n"
  - contents:
    - "7.1.  IANA Considerations\n   IANA has allocated a previously unassigned TRILL
      Nickname as follows:\n         Any-RBridge           0xFFC0\n   IANA has added
      \"All-Egress-RBridges\" to the TRILL Parameter Registry\n   as an alternative
      name for the \"All-ESADI-RBridges\" multicast\n   address.\n   IANA has allocated
      two previously unassigned TRILL multicast\n   addresses as follows:\n         TRILL-End-Stations
      \   01-80-C2-00-00-45\n         All-Edge-RBridges     01-80-C2-00-00-46\n   IANA
      has created an additional sub-registry in the TRILL Parameter\n   Registry for
      RBridge Channel Protocols, with initial contents as\n   follows:\n      Protocol
      \     Description                     Reference\n      --------      -----------
      \                    ---------\n      0x000         Reserved; not to be allocated
      \  (This document)\n      0x001         RBridge Channel Error           (This
      document)\n      0x002-0x0FF   Unassigned (1)\n      0x100-0xFF7   Unassigned
      (2)\n      0xFF8-0xFFE   Reserved for Private Use\n      0xFFF         Reserved;
      not to be allocated   (This document)\n   (1) RBridge Channel protocol code
      points from 0x002 to 0x0FF require\n       a Standards Action, as modified by
      [RFC7120], for allocation.\n   (2) RBridge Channel protocol code points from
      0x100 to 0xFF7 are RFC\n       Required to allocate a single value or IESG Approval
      to allocate\n       multiple values.\n   IANA has created an additional sub-registry
      in the TRILL Parameter\n   Registry for RBridge Channel Header Flags with initial
      contents as\n   follows:\n         Flag Bit  Mnemonic  Allocation\n         --------
      \ --------  ----------\n            0         SL     Silent\n            1         MH
      \    Multi-hop\n            2         NA     Native\n           3-11       -
      \     Unassigned\n   Allocation of an RBridge Channel Header Flag is based on
      IETF Review.\n   IANA has created an additional sub-registry in the TRILL Parameter\n
      \  Registry for RBridge Channel Error Codes with initial contents as\n   listed
      in Section 3.2 above and with available values allocated by\n   Standards Action
      as modified by [RFC7120].\n"
    title: 7.1.  IANA Considerations
  - contents:
    - "7.2.  IEEE Registration Authority Considerations\n   The IEEE Registration
      Authority has assigned the Ethertype 0x8946 for\n   TRILL RBridge Channel.\n"
    title: 7.2.  IEEE Registration Authority Considerations
  title: 7.  Allocation Considerations
- contents:
  - "8.  Security Considerations\n   No general integrity, authentication, or encryption
    mechanisms are\n   provided herein for RBridge Channel messages.  If these services
    are\n   required for a particular RBridge Channel protocol, they MUST be\n   supplied
    by that channel protocol.  See, for example, the BFD\n   Authentication mechanism
    [RFC5880].\n   See [RFC6325] for general TRILL security considerations.  As stated\n
    \  therein, no protection is provided by TRILL against forging of the\n   Ingress
    Nickname in a TRILL Data formatted channel message or the\n   Outer.MacSA in a
    native RBridge Channel frame on an Ethernet link.\n   This may result in misdirected
    return responses or error messages.\n   However, link-level security protocols
    may be used to authenticate\n   the origin station on a link and protect against
    attacks on links.\n   See also Section 6 concerning congestion.\n   If indications
    of RBridge Channel Protocol support are improperly\n   absent from an RBridge's
    LSP, it could deny all RBridge Channel\n   services, for example, some BFD services,
    for the RBridge in\n   question.  If a particular RBridge Channel protocol is
    incorrectly\n   not advertised as supported, it could deny the service of that\n
    \  channel protocol to the RBridge in question.\n   Incorrect indication of RBridge
    Channel Protocol support or incorrect\n   assertion of support for a channel protocol
    could encourage RBridge\n   Channel messages to be sent to an RBridge that does
    not support the\n   channel feature or the particular channel protocol used.  The
    inner\n   frame of such messages could be decapsulated and that inner frame\n
    \  could be sent out all ports that are Appointed Forwarders for the\n   frame's
    Inner.VLAN.  However, this is unlikely to cause much harm; in\n   particular,
    there are two possibilities as follows: (a) if end\n   stations do not recognize
    the RBridge-Channel Ethertype of the frame,\n   they will drop it, and (b) if
    end stations do recognize the RBridge-\n   Channel Ethertype and the channel protocol
    indicated in the frame,\n   they should refuse to process the frame due to an
    incorrect value of\n   the RBridge Channel Header NA flag.\n"
  title: 8.  Security Considerations
- contents:
  - '9.  References

    '
  - contents:
    - "9.1.  Normative References\n   [IS-IS]    International Organization for Standardization,\n
      \             \"Intermediate System to Intermediate System intra-domain\n              routeing
      information exchange protocol for use in\n              conjunction with the
      protocol for providing the\n              connectionless-mode network service
      (ISO 8473)\", Second\n              Edition, November 2002.\n   [RFC1195]  Callon,
      R., \"Use of OSI IS-IS for routing in TCP/IP and\n              dual environments\",
      RFC 1195, December 1990.\n   [RFC2119]  Bradner, S., \"Key words for use in
      RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March
      1997.\n   [RFC5226]  Narten, T. and H. Alvestrand, \"Guidelines for Writing
      an\n              IANA Considerations Section in RFCs\", BCP 26, RFC 5226,\n
      \             May 2008.\n   [RFC5348]  Floyd, S., Handley, M., Padhye, J., and
      J. Widmer, \"TCP\n              Friendly Rate Control (TFRC): Protocol Specification\",
      RFC\n              5348, September 2008.\n   [RFC6325]  Perlman, R., Eastlake
      3rd, D., Dutt, D., Gai, S., and A.\n              Ghanwani, \"Routing Bridges
      (RBridges): Base Protocol\n              Specification\", RFC 6325, July 2011.\n
      \  [RFC7120]  Cotton, M., \"Early IANA Allocation of Standards Track Code\n
      \             Points\", BCP 100, RFC 7120, January 2014.\n   [RFC7176]  Eastlake
      3rd, D., Senevirathne, T., Ghanwani, A., Dutt,\n              D., and A. Banerjee,
      \"Transparent Interconnection of Lots\n              of Links (TRILL) Use of
      IS-IS\", RFC 7176, May 2014.\n   [RFC7177]  Eastlake 3rd, D., Perlman, R., Ghanwani,
      A., Yang, H., and\n              V. Manral, \"Transparent Interconnection of
      Lots of Links\n              (TRILL): Adjacency\", RFC 7177, May 2014.\n   [RFC7179]
      \ Eastlake 3rd, D., Ghanwani, A., Manral, V., Li, Y., and C.\n              Bestler,
      \"Transparent Interconnection of Lots of Links\n              (TRILL): Header
      Extension\", RFC 7179, May 2014.\n"
    title: 9.1.  Normative References
  - contents:
    - "9.2.  Informative References\n   [RFC5082]  Gill, V., Heasley, J., Meyer, D.,
      Savola, P., Ed., and C.\n              Pignataro, \"The Generalized TTL Security
      Mechanism\n              (GTSM)\", RFC 5082, October 2007.\n   [RFC5586]  Bocci,
      M., Ed., Vigoureux, M., Ed., and S. Bryant, Ed.,\n              \"MPLS Generic
      Associated Channel\", RFC 5586, June 2009.\n   [RFC5880]  Katz, D. and D. Ward,
      \"Bidirectional Forwarding Detection\n              (BFD)\", RFC 5880, June
      2010.\n   [RFC5882]  Katz, D. and D. Ward, \"Generic Application of\n              Bidirectional
      Forwarding Detection (BFD)\", RFC 5882, June\n              2010.\n   [RFC7180]
      \ Eastlake 3rd, D., Zhang, M., Ghanwani, A., Manral, V., and\n              A.
      Banerjee, \"Transparent Interconnection of Lots of Links\n              (TRILL):
      Clarifications, Corrections, and Updates\", RFC\n              7180, May 2014.\n"
    title: 9.2.  Informative References
  title: 9.  References
- contents:
  - "10.  Acknowledgments\n   The authors gratefully acknowledge the comments and
    contributions of\n   the follows, listed is alphabetic order: Stewart Bryant,
    Somnath\n   Chatterjee, Adrian Farrel, Stephen Farrell, Miguel A. Garcia, Anoop\n
    \  Ghanwani, Brian Haberman, Rakesh Kumar, Barry Leiba, and Tissa\n   Senevirathne.\n"
  title: 10.  Acknowledgments
- contents:
  - "Authors' Addresses\n   Donald Eastlake 3rd\n   Huawei R&D USA\n   155 Beaver
    Street\n   Milford, MA 01757\n   USA\n   Phone: +1-508-333-2270\n   EMail: d3e3e3@gmail.com\n
    \  Vishwas Manral\n   Ionos Corp.\n   4100 Moorpark Ave.\n   San Jose, CA  95117\n
    \  USA\n   EMail: vishwas@ionosnetworks.com\n   Yizhou Li\n   Huawei Technologies\n
    \  101 Software Avenue,\n   Nanjing 210012\n   China\n   Phone: +86-25-56622310\n
    \  EMail: liyizhou@huawei.com\n   Sam Aldrin\n   Huawei Technologies\n   2330
    Central Expressway\n   Santa Clara, CA 95050\n   USA\n   Phone: +1-408-330-5000\n
    \  EMail: sam.aldrin@huawei.com\n   Dave Ward\n   Cisco Systems\n   170 W. Tasman
    Drive\n   San Jose, CA 95134\n   USA\n   EMail: dward@cisco.com\n"
  title: Authors' Addresses
