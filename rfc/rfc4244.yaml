- title: __initial_text__
  contents:
  - "         An Extension to the Session Initiation Protocol (SIP)\n            \
    \       for Request History Information\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2005).\n"
- title: Abstract
  contents:
  - "Abstract\n   This document defines a standard mechanism for capturing the history\n\
    \   information associated with a Session Initiation Protocol (SIP)\n   request.\
    \  This capability enables many enhanced services by providing\n   the information\
    \ as to how and why a call arrives at a specific\n   application or user.  This\
    \ document defines a new optional SIP\n   header, History-Info, for capturing\
    \ the history information in\n   requests.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n      1.3. Background:  Why define a Generic \"Request History\"\
    \n           4.3.1. User Agent Client (UAC) Behavior ...................12\n \
    \          4.3.2. User Agent Server (UAS) Behavior ...................13\n   \
    \        4.3.3. Proxy Behavior .....................................13\n     \
    \      4.3.4. Redirect Server Behavior ...........................18\n      4.4.\
    \ Security for History-Info .................................18\n      4.5. Example\
    \ Applications Using History-Info ...................19\n           4.5.1. Example\
    \ with Privacy Header for Entire\n                  Request at Proxy2 ..................................21\n\
    \           4.5.2. Example with Privacy Header for Specific\n                \
    \  URI (UA4) at Proxy2 ................................22\n   5. Application Considerations\
    \ .....................................24\n   6. Security Considerations ........................................25\n\
    \   7. IANA Considerations ............................................25\n  \
    \    7.1. Registration of New SIP History-Info Header ...............25\n    \
    \  7.2. Registration of \"history\" for SIP Privacy Header ..........26\n   8.\
    \ Normative References ...........................................26\n   9. Informative\
    \ References .........................................26\n   10. Acknowledgements\
    \ ..............................................26\n   11. Contributors' Addresses\
    \ .......................................27\n   Appendix. Example Scenarios........................................28\n\
    \      Appendix A. Sequentially forking (History-Info in Response).....28\n  \
    \    Appendix B. Voicemail...........................................34\n    \
    \  Appendix C. Automatic Call Distribution Example.................39\n      Appendix\
    \ D. Session via Redirect and Proxy Servers..............41\n"
- title: 1.  Introduction
  contents:
  - '1.  Introduction

    '
- title: 1.1.  Overview
  contents:
  - "1.1.  Overview\n   Many services that SIP is anticipated to support require the\
    \ ability\n   to determine why and how the call arrived at a specific application.\n\
    \   Examples of such services include (but are not limited to) sessions\n   initiated\
    \ to call centers via \"click to talk\" SIP Uniform Resource\n   Locators (URLs)\
    \ on a web page, \"call history/logging\" style services\n   within intelligent\
    \ \"call management\" software for SIP User Agents\n   (UAs), and calls to voicemail\
    \ servers.  Although SIP implicitly\n   provides the redirect/retarget capabilities\
    \ that enable calls to be\n   routed to chosen applications, there is currently\
    \ no standard\n   mechanism within SIP for communicating the history of such a\
    \ request.\n   This \"request history\" information allows the receiving application\n\
    \   to determine hints about how and why the call arrived at the\n   application/user.\n\
    \   This document defines a new SIP header, History-Info, to provide a\n   standard\
    \ mechanism for capturing the request history information to\n   enable a wide\
    \ variety of services for networks and end-users.  The\n   History-Info header\
    \ provides a building block for development of new\n   services.\n   Section 1.3\
    \ provides additional background motivation for the Request\n   History capability.\
    \  Section 2 identifies the requirements for a\n   solution, with Section 3 providing\
    \ an overall description of the\n   solution.\n   Section 4 provides the details\
    \ of the additions to the SIP protocol.\n   Example uses of the new header are\
    \ included in Section 4.5, with\n   additional scenarios included in the Appendix.\n\
    \   Section 5 summarizes the application considerations identified in the\n  \
    \ previous sections.  Section 6 summarizes the security solution.\n"
- title: 1.2.  Conventions Used in This Document
  contents:
  - "1.2.  Conventions Used in This Document\n   The key words \"MUST\", \"MUST NOT\"\
    , \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in RFC 2119 [RFC2119].\n"
- title: '1.3.  Background:  Why define a Generic "Request History" capability?'
  contents:
  - "1.3.  Background:  Why define a Generic \"Request History\" capability?\n   SIP\
    \ implicitly provides redirect/retarget capabilities that enable\n   calls to\
    \ be routed to specific applications as defined in [RFC3261].\n   The term 'retarget'\
    \ will be used henceforth in this document to refer\n   to the process of a Proxy\
    \ Server/User Agent Client (UAC) changing a\n   Uniform Resource Identifier (URI)\
    \ in a request and thus changing the\n   target of the request.  This term is\
    \ chosen to avoid associating this\n   request history only with the specific\
    \ SIP Redirect Server capability\n   that provides for a response to be sent back\
    \ to a UAC requesting that\n   the UAC should retarget the original request to\
    \ an alternate URI.\n   The rules for determining request targets as described\
    \ in Section\n   16.5 of [RFC3261] are consistent with the use of the retarget\
    \ term in\n   this document.\n   The motivation for the request history is that\
    \ in the process of\n   retargeting, old routing information can be forever lost.\
    \  This lost\n   information may be important history that allows elements to\
    \ which\n   the call is retargeted to process the call in a locally defined,\n\
    \   application-specific manner.  The proposal in this document is to\n   provide\
    \ a mechanism for transporting the request history.  It is not\n   proposing any\
    \ application-specific behavior for a Proxy or UA upon\n   receipt of the information.\
    \  Indeed, such behavior should be a local\n   decision for the recipient application.\n\
    \   Current network applications provide the ability for elements\n   involved\
    \ with the call to exchange additional information relating to\n   how and why\
    \ the call was routed to a particular destination.  The\n   following are examples\
    \ of such applications:\n   1. Web \"referral\" applications, whereby an application\
    \ residing\n      within a web server determines that a visitor to a website has\n\
    \      arrived at the site via an \"associate\" site that will receive some\n\
    \      \"referral\" commission for generating this traffic\n   2. Email forwarding\
    \ whereby the forwarded-to user obtains a \"history\"\n      of who sent the email\
    \ to whom and at what time\n   3. Traditional telephony services such as voicemail,\
    \ call-center\n      \"automatic call distribution\", and \"follow-me\" style\
    \ services\n   Several of the aforementioned applications currently define\n \
    \  application-specific mechanisms through which it is possible to\n   obtain\
    \ the necessary history information.\n   In addition, request history information\
    \ could be used to enhance\n   basic SIP functionality by providing the following:\n\
    \   o Some diagnostic information for debugging SIP requests.  (Note that\n  \
    \   the diagnostic utility of this mechanism is limited by the fact\n     that\
    \ its use by entities that retarget is optional.)\n   o A stronger security solution\
    \ for SIP.  A side effect is that each\n     proxy that captures the \"request\
    \ history\" information in a secure\n     manner provides an additional means\
    \ (without requiring signed keys)\n     for the original requestor to be assured\
    \ that the request was\n     properly retargeted.\n"
- title: 2.  "Request History" Requirements
  contents:
  - "2.  \"Request History\" Requirements\n   The following list constitutes a set\
    \ of requirements for a \"Request\n   History\" capability.\n   1) CAPABILITY-req:\
    \  The \"Request History\" capability provides a\n      capability to inform proxies\
    \ and UAs involved in processing a\n      request about the history/progress of\
    \ that request.  Although this\n      is inherently provided when the retarget\
    \ is in response to a SIP\n      redirect, it is deemed useful for non-redirect\
    \ retargeting\n      scenarios, as well.\n   2) OPTIONALITY-req: The \"Request\
    \ History\" information is optional.\n      2.1) In many cases, it is anticipated\
    \ that whether the history is\n           added to the Request would be a local\
    \ policy decision\n           enforced by the specific application; thus, no specific\n\
    \           protocol element is needed.\n      2.2) Due to the capability being\
    \ \"optional\" from the SIP protocol\n           perspective, the impact to an\
    \ application of not having the\n           \"Request History\" must be described.\
    \  Applicability\n           guidelines to be addressed by applications using\
    \ this\n           capability must be provided as part of the solution to these\n\
    \           requirements.\n   3) GENERATION-req: \"Request History\" information\
    \ is generated when\n      the request is retargeted.\n      3.1) In some scenarios,\
    \ it might be possible for more than one\n           instance of retargeting to\
    \ occur within the same Proxy.  A\n           proxy should also generate Request\
    \ History information for\n           the 'internal retargeting'.\n      3.2)\
    \ An entity (UA or proxy) retargeting in response to a redirect\n           or\
    \ REFER should include any Request History information from\n           the redirect/REFER\
    \ in the new request.\n   4) ISSUER-req: \"Request History\" information can be\
    \ generated by a UA\n      or proxy.  It can be passed in both requests and responses.\n\
    \   5) CONTENT-req:  The \"Request History\" information for each\n      occurrence\
    \ of retargeting shall include the following:\n      5.1) The new URI or address\
    \ to which the request is in the process\n           of being retargeted,\n  \
    \    5.2) The URI or address from which the request was retargeted,\n      5.3)\
    \ The reason for the Request-URI or address modification,\n      5.4) Chronological\
    \ ordering of the Request History information.\n   6) REQUEST-VALIDITY-req:  Request\
    \ History is applicable to requests\n      not sent within an established dialog\
    \ (e.g., INVITE, REGISTER,\n      MESSAGE, and OPTIONS).\n   7) BACKWARDS-req:\
    \ Request History information may be passed from the\n      generating entity\
    \ backwards towards the UAC.  This is needed to\n      enable services that inform\
    \ the calling party about the dialog\n      establishment attempts.\n   8) FORWARDS-req:\
    \  Request History information may also be included by\n      the generating entity\
    \ in the request, if it is forwarded onwards.\n"
- title: 2.1.  Security Requirements
  contents:
  - "2.1.  Security Requirements\n   The Request History information is being inserted\
    \ by a network\n   element retargeting a Request, resulting in a slightly different\n\
    \   problem than the basic SIP header problem, thus requiring specific\n   consideration.\
    \  It is recognized that these security requirements can\n   be generalized to\
    \ a basic requirement of being able to secure\n   information that is inserted\
    \ by proxies.\n   The potential security problems include the following:\n   1)\
    \ A rogue application could insert a bogus Request History entry\n      either\
    \ by adding an additional entry as a result of retargeting or\n      entering\
    \ invalid information.\n   2) A rogue application could re-arrange the Request\
    \ History\n      information to change the nature of the end application or to\n\
    \      mislead the receiver of the information.\n   3) A rogue application could\
    \ delete some or all of the Request\n      History information.\n   Thus, a security\
    \ solution for \"Request History\" must meet the\n   following requirements:\n\
    \   1) SEC-req-1: The entity receiving the Request History must be able\n    \
    \  to determine whether any of the previously added Request History\n      content\
    \ has been altered.\n   2) SEC-req-2: The ordering of the Request History information\
    \ must be\n      preserved at each instance of retargeting.\n   3) SEC-req-3:\
    \ The entity receiving the information conveyed by the\n      Request History\
    \ must be able to authenticate the entity providing\n      the request.\n   4)\
    \ SEC-req-4: To ensure the confidentiality of the Request History\n      information,\
    \ only entities that process the request should have\n      visibility to the\
    \ information.\n   It should be noted that these security requirements apply to\
    \ any\n   entity making use of the Request History information, either by\n  \
    \ retargeting and capturing the information, or as an application\n   making use\
    \ of the information received in either a Request or\n   Response.\n"
- title: 2.2.  Privacy Requirements
  contents:
  - "2.2.  Privacy Requirements\n   Since the Request-URI that is captured could inadvertently\
    \ reveal\n   information about the originator, there are general privacy\n   requirements\
    \ that MUST be met:\n   1) PRIV-req-1: The entity retargeting the Request must\
    \ ensure that it\n      maintains the network-provided privacy (as described in\
    \ [RFC3323])\n      associated with the Request as it is retargeted.\n   2) PRIV-req-2:\
    \ The entity receiving the Request History must maintain\n      the privacy associated\
    \ with the information.\n      In addition, local policy at a proxy may identify\
    \ privacy\n      requirements associated with the Request-URI being captured in\
    \ the\n      Request History information.\n   3) PRIV-req-3: Request History information\
    \ subject to privacy\n      requirements shall not be included in outgoing messages\
    \ unless it\n      is protected as described in [RFC3323].\n"
- title: 3.  Request History Information Description
  contents:
  - "3.  Request History Information Description\n   The fundamental functionality\
    \ provided by the request history\n   information is the ability to inform proxies\
    \ and UAs involved in\n   processing a request about the history or progress of\
    \ that request\n   (CAPABILITY-req).  The solution is to capture the Request-URIs\
    \ as a\n   request is forwarded in a new header for SIP messages: History-Info\n\
    \   (CONTENT-req).  This allows for the capturing of the history of a\n   request\
    \ that would be lost with the normal SIP processing involved in\n   the subsequent\
    \ forwarding of the request.  This solution proposes no\n   changes in the fundamental\
    \ determination of request targets or in the\n   request forwarding as defined\
    \ in Sections 16.5 and 16.6 of the SIP\n   protocol specification [RFC3261].\n\
    \   The History-Info header can appear in any request not associated with\n  \
    \ an established dialog (e.g., INVITE, REGISTER, MESSAGE, REFER and\n   OPTIONS,\
    \ PUBLISH and SUBSCRIBE, etc.) (REQUEST-VALIDITY-req) and any\n   valid response\
    \ to these requests (ISSUER-req).\n   The History-Info header is added to a Request\
    \ when a new request is\n   created by a UAC or forwarded by a Proxy, or when\
    \ the target of a\n   request is changed.  The term 'retarget' is introduced to\
    \ refer to\n   this changing of the target of a request and the subsequent\n \
    \  forwarding of that request.  It should be noted that retargeting only\n   occurs\
    \ when the Request-URI indicates a domain for which the\n   processing entity\
    \ is responsible.  In terms of the SIP protocol, the\n   processing associated\
    \ with retargeting is described in Sections 16.5\n   and 16.6 of [RFC3261].  As\
    \ described in Section 16.5 of [RFC3261], it\n   is possible for the target of\
    \ a request to be changed by the same\n   proxy multiple times (referred to as\
    \ 'internal retargeting' in\n   Section 2), as the proxy MAY add targets to the\
    \ target set after\n   beginning Request Forwarding.  Section 16.6 of [RFC3261]\
    \ describes\n   Request Forwarding.  It is during this process of Request Forwarding\n\
    \   that the History Information is captured as an optional, additional\n   header\
    \ field.  Thus, the addition of the History-Info header does not\n   impact fundamental\
    \ SIP Request Forwarding.  An entity (UA or proxy)\n   changing the target of\
    \ a request in response to a redirect or REFER\n   SHOULD also propagate any History-Info\
    \ header from the initial\n   Request in the new request (GENERATION-req, FORWARDS-req).\n"
- title: 3.1.  Optionality of History-Info
  contents:
  - "3.1.  Optionality of History-Info\n   The History-Info header is optional in\
    \ that neither UAs nor Proxies\n   are required to support it.  A new Supported\
    \ header, \"histinfo\", is\n   included in the Request to indicate whether the\
    \ History-Info header\n   is returned in Responses (BACKWARDS-req).  In addition\
    \ to the\n   \"histinfo\" Supported header, local policy determines whether or\
    \ not\n   the header is added to any request, or for a specific Request-URI,\n\
    \   being retargeted.  It is possible that this could restrict the\n   applicability\
    \ of services that make use of the Request History\n   Information to be limited\
    \ to retargeting within domain(s) controlled\n   by the same local policy, or\
    \ between domain(s) which negotiate\n   policies with other domains to ensure\
    \ support of the given policy, or\n   services for which complete History Information\
    \ isn't required to\n   provide the service (OPTIONALITY-req).  All applications\
    \ making use\n   of the History-Info header MUST clearly define the impact of\
    \ the\n   information not being available and specify the processing of such a\n\
    \   request.\n"
- title: 3.2.  Securing History-Info
  contents:
  - "3.2.  Securing History-Info\n   This document defines a new header for SIP. \
    \ The use of the Transport\n   Layer Security (TLS) protocol [RFC2246] as a mandatory\
    \ mechanism to\n   ensure the overall confidentiality of the History-Info headers\
    \ (SEC-\n   req-4) is strongly RECOMMENDED.  This results in History-Info having\n\
    \   at least the same level of security as other headers in SIP that are\n   inserted\
    \ by intermediaries.  If TLS is not available for the\n   connection over which\
    \ the request is being forwarded, then the\n   request MUST NOT include the History-Info\
    \ header or the request MUST\n   be redirected to the client, including the History-Info\
    \ header, so\n   that the request can be retargeted by the client.\n   With the\
    \ level of security provided by TLS (SEC-req-3), the\n   information in the History-Info\
    \ header can thus be evaluated to\n   determine if information has been removed\
    \ by evaluating the indices\n   for gaps (SEC-req-1, SEC-req-2).  It would be\
    \ up to the application\n   to define whether it can make use of the information\
    \ in the case of\n   missing entries.\n   Note that while using the SIPS scheme\
    \ protects History-Info from\n   tampering by arbitrary parties outside the SIP\
    \ message path, all the\n   intermediaries on the path are trusted implicitly.\
    \  A malicious\n   intermediary could arbitrarily delete, rewrite, or modify History-\n\
    \   Info.  This specification does not attempt to prevent or detect\n   attacks\
    \ by malicious intermediaries.\n"
- title: 3.3.  Ensuring the Privacy of History-Info
  contents:
  - "3.3.  Ensuring the Privacy of History-Info\n   Since the History-Info header\
    \ can inadvertently reveal information\n   about the requestor as described in\
    \ [RFC3323], the Privacy header\n   SHOULD be used to determine whether an intermediary\
    \ can include the\n   History-Info header in a Request that it receives and forwards\n\
    \   (PRIV-req-2) or that it retargets (PRIV-req-1).  Thus, the History-\n   Info\
    \ header SHOULD NOT be included in Requests where the requestor\n   has indicated\
    \ a priv-value of Session- or Header-level privacy.\n   In addition, the History-Info\
    \ header can reveal general routing\n   information, which may be viewed by a\
    \ specific intermediary or\n   network, to be subject to privacy restrictions.\
    \  Thus, local policy\n   MAY also be used to determine whether to include the\
    \ History-Info\n   header at all, whether to capture a specific Request-URI in\
    \ the\n   header, or whether it be included only in the Request as it is\n   retargeted\
    \ within a specific domain (PRIV-req-3).  In the latter\n   case, this is accomplished\
    \ by adding a new priv-value, history, to\n   the Privacy header [RFC3323] indicating\
    \ whether any or a specific\n   History-Info header(s) SHOULD be forwarded.\n\
    \   It is recognized that satisfying the privacy requirements can impact\n   the\
    \ functionality of this solution by overriding the request to\n   generate the\
    \ information.  As with the optionality and security\n   requirements, applications\
    \ making use of History-Info SHOULD address\n   any impact this may have or MUST\
    \ explain why it does not impact the\n   application.\n"
- title: 4.  Request History Information Protocol Details
  contents:
  - "4.  Request History Information Protocol Details\n   This section contains the\
    \ details and usage of the proposed new SIP\n   protocol elements.  It also discusses\
    \ the security aspects of the\n   solution.\n"
- title: 4.1.  Protocol Structure of History-Info
  contents:
  - "4.1.  Protocol Structure of History-Info\n   History-Info is a header field as\
    \ defined by [RFC3261].  It is an\n   optional header field and MAY appear in\
    \ any request or response not\n   associated with a dialog or which starts a dialog.\
    \  For example,\n   History-Info MAY appear in INVITE, REGISTER, MESSAGE, REFER,\
    \ OPTIONS,\n   SUBSCRIBE, and PUBLISH and any valid responses, plus NOTIFY requests\n\
    \   that initiate a dialog.\n   This document adds the following entry to Table\
    \ 2 of [RFC3261].  The\n   additions to this table are also provided for extension\
    \ methods at\n   the time of publication of this document.  This is provided as\
    \ a\n   courtesy to the reader and is not normative in any way.\n      Header\
    \ field    where   proxy   ACK  BYE  CAN  INV  OPT  REG  MSG\n      ------------\
    \    -----   -----   ---  ---  ---  ---  ---  ---  ---\n      History-Info   \
    \         amdr     -    -    -    o    o    o    o\n                         \
    \             SUB  NOT  REF  INF  UPD  PRA  PUB\n                            \
    \          ---  ---  ---  ---  ---  ---  ---\n      History-Info            amdr\
    \     o    o    o    -    -    -    o\n   The History-Info header carries the\
    \ following information, with the\n   mandatory parameters required when the header\
    \ is included in a\n   request or response:\n     o Targeted-to-URI (hi-targeted-to-uri):\
    \ A mandatory parameter for\n       capturing the Request-URI for the specific\
    \ Request as it is\n       forwarded.\n     o Index (hi-index): A mandatory parameter\
    \ for History-Info\n       reflecting the chronological order of the information,\
    \ indexed to\n       also reflect the forking and nesting of requests.  The format\
    \ for\n       this parameter is a string of digits, separated by dots to\n   \
    \    indicate the number of forward hops and retargets.  This results\n      \
    \ in a tree representation of the history of the request, with the\n       lowest-level\
    \ index reflecting a branch of the tree.  By adding\n       the new entries in\
    \ order (i.e., following existing entries per\n       the details in Section 4.3.3.1),\
    \ including the index and securing\n       the header, the ordering of the History-Info\
    \ headers in the\n       request is assured (SEC-req-2).  In addition, applications\
    \ may\n       extract a variety of metrics (total number of retargets, total\n\
    \       number of retargets from a specific branch, etc.) based upon the\n   \
    \    index values.\n     o Reason: An optional parameter for History-Info, reflected\
    \ in the\n       History-Info header by including the Reason Header [RFC3326]\n\
    \       escaped in the hi-targeted-to-uri.  A reason is not included for\n   \
    \    a hi-targeted-to-uri when it is first added in a History-Info\n       header,\
    \ but rather is added when the retargeting actually occurs.\n       Note that\
    \ this does appear to complicate the security problem;\n       however, retargeting\
    \ only occurs when the hi-targeted-to-uri\n       indicates a domain for which\
    \ the processing entity is\n       responsible.  Thus, it would be the same processing\
    \ entity that\n       initially added the hi-targeted-to-URI to the header that\
    \ would\n       be updating it with the Reason.\n     o Privacy: An optional parameter\
    \ for History-Info, reflected in the\n       History-Info header field values\
    \ by including the Privacy Header\n       [RFC3323] with a priv-value of \"history\"\
    \ escaped in the hi-\n       targeted-to-uri or by adding the Privacy header with\
    \ a priv-value\n       of \"history\" to the Request.  The use of the Privacy\
    \ Header with\n       a priv-value of \"history\" indicates whether a specific\
    \ or all\n       History-Info headers should not be forwarded.\n     o Extension\
    \ (hi-extension): An optional parameter to allow for\n       future optional extensions.\
    \  As per [RFC3261], any implementation\n       not understanding an extension\
    \ should ignore it.\n   The following summarizes the syntax of the History-Info\
    \ header, based\n   upon the standard SIP syntax [RFC3261]:\n          History-Info\
    \ = \"History-Info\" HCOLON\n                            hi-entry *(COMMA hi-entry)\n\
    \          hi-entry = hi-targeted-to-uri *( SEMI hi-param )\n          hi-targeted-to-uri=\
    \ name-addr\n          hi-param = hi-index / hi-extension\n          hi-index\
    \ = \"index\" EQUAL 1*DIGIT *(DOT 1*DIGIT)\n          hi-extension = generic-param\n"
- title: 4.2.  Protocol Examples
  contents:
  - "4.2.  Protocol Examples\n   The following provides some examples of the History-Info\
    \ header.\n   Note that the backslash and CRLF between the fields in the examples\n\
    \   below are for readability purposes only.\n      History-Info:<sip:UserA@ims.example.com?Reason=SIP%3B\\\
    \n         cause%3D302>;index=1;foo=bar\n      History-Info: <sip:UserA@ims.example.com?Reason=SIP%3B\
    \ \\\n         cause%3D302>; index=1.1,\n         <sip:UserB@example.com?Privacy=history&Reason=SIP%3B\\\
    \n         cause%3D486>;index=1.2,\n         <sip:45432@vm.example.com>;index=1.3\n"
- title: 4.3.  Protocol Usage
  contents:
  - "4.3.  Protocol Usage\n   This section describes the processing specific to UAs\
    \ and Proxies for\n   the History-Info header, the \"histinfo\" option tag, and\
    \ the priv-\n   value of \"history\".  As discussed in Section 1.3, the fundamental\n\
    \   objective is to capture the target Request-URIs as a request is\n   forwarded.\
    \  This allows for the capturing of the history of a request\n   that would be\
    \ lost due to subsequent (re)targeting and forwarding.\n   To accomplish this\
    \ for the entire history of a request, either the\n   UAC must capture the Request-URI\
    \ in a History-Info header in the\n   initial request or a proxy must add a History-Info\
    \ header with both a\n   hi-entry for the Request-URI in the initial request and\
    \ a hi-entry\n   for the target Request-URI as the request is forwarded.  The\
    \ basic\n   processing is for each entity forwarding a request to add a hi-entry\n\
    \   for the target Request-URI, updating the index and adding the Reason\n   as\
    \ appropriate for any retargeted Request-URI.\n"
- title: 4.3.1.  User Agent Client (UAC) Behavior
  contents:
  - "4.3.1.  User Agent Client (UAC) Behavior\n   The UAC SHOULD include the \"histinfo\"\
    \ option tag in the Supported\n   header in any request not associated with an\
    \ established dialog for\n   which the UAC would like the History-Info header\
    \ in the response.  In\n   addition, the UAC MAY improve the diagnostic utility\
    \ of its request\n   by adding a History-Info header, using the Request-URI of\
    \ the request\n   as the hi-target-to-uri and initializing the index to the RECOMMENDED\n\
    \   value of 1 in the hi-entry.  As a result, intermediaries and the UAS\n   will\
    \ know at least the original Request-URI, and if the Request-URI\n   was modified\
    \ by a previous hop.\n   In the case where the request is routed to a redirect\
    \ server and the\n   UAC receives a 3xx response with a Contact header, the UAC\
    \ MAY\n   maintain the previous hi-entry(s) in the request.  In this case, the\n\
    \   reason header SHOULD be associated with the hi-targeted-to-uri in the\n  \
    \ previous (last) hi-entry, as described in Section 4.3.3.1.2. A new\n   hi-entry\
    \ MAY then be added for the URI from the Contact header (which\n   becomes the\
    \ new Request-URI).  In this case, the index is created by\n   reading and incrementing\
    \ the value of the index from the previous\n   hi-entry, thus following the same\
    \ rules as those prescribed for a\n   proxy in retargeting, described in Section\
    \ 4.3.3.1.3. An example of\n   this scenario can be found in Appendix D.\n   A\
    \ UAC that does not want the History-Info header added due to privacy\n   considerations\
    \ SHOULD include a Privacy header with a priv-value(s)\n   of \"session\", \"\
    header\", or \"history\" in the request.\n   With the exception of the processing\
    \ of a 3xx response described\n   above, the processing of the History-Info header\
    \ received in the\n   Response is application specific and outside the scope of\
    \ this\n   document.  However, the validity of the information SHOULD be ensured\n\
    \   prior to any application usage.  For example, the entries MAY be\n   evaluated\
    \ to determine gaps in indices, which could indicate that an\n   entry has been\
    \ maliciously removed or removed for privacy reasons.\n   Either way, an application\
    \ MAY want to be aware of potentially\n   missing information.\n"
- title: 4.3.2.  User Agent Server (UAS) Behavior
  contents:
  - "4.3.2.  User Agent Server (UAS) Behavior\n   The processing of the History-Info\
    \ header by a UAS in a Request\n   depends upon local policy and specific applications\
    \ at the UAS that\n   might make use of the information.  Prior to any application\
    \ usage of\n   the information, the validity SHOULD be ascertained.  For example,\n\
    \   the entries MAY be evaluated to determine gaps in indices, which\n   could\
    \ indicate that an entry has been maliciously removed or removed\n   for privacy\
    \ reasons.  Either way, an application MAY want to be aware\n   of potentially\
    \ missing information.\n   If the \"histinfo\" option tag is received in a request,\
    \ the UAS SHOULD\n   include any History-Info received in the request in the subsequent\n\
    \   response.\n"
- title: 4.3.3.  Proxy Behavior
  contents:
  - "4.3.3.  Proxy Behavior\n   The inclusion of the History-Info header in a Request\
    \ does not alter\n   the fundamental processing of proxies for determining request\
    \ targets\n   as defined in Section 16.5 of [RFC3261].  Whether a proxy adds the\n\
    \   History-Info header or a new hi-entry as it forwards a Request\n   depends\
    \ upon the following considerations:\n      1. Whether the Request contains the\
    \ \"histinfo\" option tag in the\n         Supported header.\n      2. Whether\
    \ the proxy supports the History-Info header.\n      3. Whether the Request contains\
    \ a Privacy header with a priv-value\n         of \"session\", \"header\", or\
    \ \"history\".\n      4. Whether any History-Info header added for a proxy/domain\
    \ should\n         go outside that domain.  An example being the use of the\n\
    \         History-Info header within the specific domain in which it is\n    \
    \     retargeted, however, policies (for privacy, user and network\n         security,\
    \ etc.) would prohibit the exposure of that information\n         outside that\
    \ domain.  To accommodate such a scenario, a proxy\n         MAY insert the Privacy\
    \ header with a priv-value of \"history\"\n         when the request is being\
    \ forwarded within the same domain.  An\n         example of such an application\
    \ is provided in Appendix C.\n      5. Whether a hi-entry is added for a specific\
    \ Request-URI due to\n         local privacy policy considerations.  A proxy MAY\
    \ add the\n         Privacy header with a priv-value of \"history\" associated\
    \ with\n         the specific hi-targeted-to-uri.\n   An example policy would\
    \ be a proxy that only adds the History-Info\n   header if the \"histinfo\" option\
    \ tag is in the Supported header.\n   Other proxies may have a policy that they\
    \ always add the header, but\n   never forward it outside a particular domain,\
    \ accomplishing this by\n   adding a Privacy header with a priv-value of \"history\"\
    \ to each hi-\n   entry to allow the information to be collected for internal\n\
    \   retargeting only.\n   Each application making use of the History-Info header\
    \ SHOULD address\n   the impacts of the local policies on the specific application\
    \ (e.g.,\n   what specification of local policy is optimally required for a\n\
    \   specific application and any potential limitations imposed by local\n   policy\
    \ decisions).\n   Consistent with basic SIP processing of optional headers, proxies\n\
    \   SHOULD maintain the History-Info header(s), received in messages\n   being\
    \ forwarded, independent of whether local policy supports\n   History-Info.\n\
    \   The specific processing by proxies for adding the History-Info\n   headers\
    \ in Requests and Responses, to accommodate the considerations\n   outlined above,\
    \ is described in detail in the following sections.\n"
- title: 4.3.3.1.  Adding the History-Info Header to Requests
  contents:
  - "4.3.3.1.  Adding the History-Info Header to Requests\n   Upon evaluation of the\
    \ considerations under which the History-Info\n   header is to be included in\
    \ requests (e.g., no Privacy header\n   overriding inclusion, local policy supports,\
    \ etc.), detailed in\n   Section 4.3.3, a proxy SHOULD add a hi-entry as it forwards\
    \ a\n   Request.  Section 16.6 of [RFC3261] defines the steps to be followed\n\
    \   as the proxy forwards a Request.  Step 5 prescribes the addition of\n   optional\
    \ headers.  Although this would seem the appropriate step for\n   adding the History-Info\
    \ header, the interaction with Step 6,\n   \"Postprocess routing information\"\
    , and the impact of a strict route\n   in the Route header could result in the\
    \ Request-URI being changed;\n   thus, adding the History-Info header between\
    \ Steps 8 (adding Via\n   header) and 9 (adding Content-Length) is RECOMMENDED.\
    \  Note that in\n   the case of loose routing, the Request-URI does not change\
    \ during the\n   forwarding of a Request; thus, the capturing of History-Info\
    \ for such\n   a request would result in duplicate Request-URIs with different\n\
    \   indices.  The hi-entry MUST be added following any hi-entry received\n   in\
    \ the request being forwarded.  Additionally, if a request is\n   received that\
    \ doesn't include a History-Info header, the proxy MAY\n   add a History-Info\
    \ header with a hi-entry preceding the one being\n   added for the current request\
    \ being forwarded.  The index for this\n   hi-entry is RECOMMENDED to start at\
    \ 1.  The following subsections\n   define the details of creating the information\
    \ associated with each\n   hi-entry.\n"
- title: 4.3.3.1.1.  Privacy in the History-Info Header
  contents:
  - "4.3.3.1.1.  Privacy in the History-Info Header\n   If there is a Privacy header\
    \ in the request with a priv-value of\n   \"session\", \"header\", or \"history\"\
    , a hi-entry MAY be added, if the\n   request is being forwarded to a Request-URI\
    \ associated with a domain\n   for which the processing entity is responsible\
    \ (and provided local\n   policy supports the History-Info header, etc.).  If\
    \ a request is\n   being forwarded to a Request-URI associated with a domain for\
    \ which\n   the proxy is not responsible and there is a Privacy header in the\n\
    \   request with a priv-value of \"session\", \"header\", or \"history\", the\n\
    \   proxy SHOULD remove any hi-entry(s) prior to forwarding, depending\n   upon\
    \ local policy and whether the proxy might know a priori that it\n   can rely\
    \ on a downstream privacy service to apply the requested\n   privacy.\n   For\
    \ the scenario where there is no Privacy header in the request and\n   the request\
    \ is being forwarded to a Request-URI associated with the\n   domain(s) for which\
    \ this entity is responsible, there are several\n   additional considerations:\n\
    \     o If there is no local policy associated with privacy, then a hi-\n    \
    \   entry MAY be added to the Request.\n     o If the proxy's local policies,\
    \ per consideration 4 in section\n       4.3.3, indicate that the History-Info\
    \ header should not be\n       forwarded beyond the domain for which this intermediary\
    \ is\n       responsible, then a Privacy header with a priv-value of \"history\"\
    \n       SHOULD be associated with each hi-entry added by that proxy in\n    \
    \   this scenario.\n     o If the proxy's policy, per consideration 5 in Section\
    \ 4.3.3,\n       indicates that History-Info for a specific Request-URI should\
    \ not\n       be forwarded beyond the domain for which this intermediary is\n\
    \       responsible, then a Privacy header with a priv-value of \"history\"\n\
    \       SHOULD be associated with the specific hi-entry, for that\n       specific\
    \ hi-targeted-to-uri, added by that proxy in this\n       scenario.\n   If a request\
    \ is being forwarded to a Request-URI associated with a\n   domain for which the\
    \ proxy is not responsible and local policy\n   requires privacy associated with\
    \ any, or with specific, hi-entries it\n   has added, any hi-entry with a priv-value\
    \ of \"history\" SHOULD be\n   removed prior to forwarding.\n"
- title: 4.3.3.1.2.  Reason in the History-Info Header
  contents:
  - "4.3.3.1.2.  Reason in the History-Info Header\n   For retargets that are the\
    \ result of an explicit SIP response, a\n   Reason MUST be associated with the\
    \ hi-targeted-to-uri.  If the SIP\n   response does not include a Reason header,\
    \ the SIP Response Code that\n   triggered the retargeting MUST be included as\
    \ the Reason associated\n   with the hi-targeted-to-uri that has been retargeted.\
    \  If the\n   response contains a non-SIP Reason header (e.g., Q.850), it MUST\
    \ be\n   captured as an additional Reason associated with the hi-targeted-to-\n\
    \   uri that has been retargeted, along with the SIP Response Code.  If\n   the\
    \ Reason header is a SIP reason, then it MUST be used as the Reason\n   associated\
    \ with the hi-targeted-to-uri rather than the SIP response\n   code.\n   For retargets\
    \ as a result of timeouts or internal events, a Reason\n   MAY be associated with\
    \ the hi-targeted-to-uri that has been\n   retargeted.\n   The addition of the\
    \ Reason should occur prior to the forwarding of\n   the request (which may add\
    \ a new hi-entry with a new hi-targeted-to-\n   uri) as it is associated with\
    \ the hi-targeted-to-uri that has been\n   retargeted, since it reflects the reason\
    \ why the Request to that\n   specific URI was not successful.\n"
- title: 4.3.3.1.3.  Indexing in the History-Info Header
  contents:
  - "4.3.3.1.3.  Indexing in the History-Info Header\n   In order to maintain ordering\
    \ and accurately reflect the nesting and\n   retargeting of the request, an index\
    \ MUST be included along with the\n   Targeted-to-URI being captured.  Per the\
    \ syntax in Section 4.1, the\n   index consists of a dot-delimited series of digits\
    \ (e.g., 1.1.2).\n   Each dot reflects a hop or level of nesting; thus, the number\
    \ of hops\n   is determined by the total number of dots.  Within each level, the\n\
    \   integer reflects the number of peer entities to which the request has\n  \
    \ been routed.  Thus, the indexing results in a logical tree\n   representation\
    \ for the history of the Request.  It is recommended\n   that for each level of\
    \ indexing, the index start at 1.  It is\n   recommended that an increment of\
    \ 1 is used for advancing to a new\n   branch.\n   The basic rules for adding\
    \ the index are summarized as follows:\n     1. Basic Forwarding:  In the case\
    \ of a Request that is being\n        forwarded, the index is determined by adding\
    \ another level of\n        indexing since the depth/length of the branch is increasing.\
    \  To\n        accomplish this, the proxy reads the value from the History-Info\n\
    \        header in the received request, if available, and adds another\n    \
    \    level of indexing by appending the dot delimiter followed by an\n       \
    \ initial index for the new level RECOMMENDED to be 1.  For\n        example,\
    \ if the index in the last History-Info header field in\n        the received\
    \ request is 1.1, this proxy would initialize its\n        index to 1.1.1 and\
    \ forward the request.\n     2. Retargeting within a Proxy - 1st instance:  For\
    \ the first\n        instance of retargeting within a Proxy, the calculation of\
    \ the\n        index follows that prescribed for basic forwarding.\n     3. Retargeting\
    \ within a Proxy - subsequent instance: For each\n        subsequent retargeting\
    \ of a request by the same proxy, another\n        branch is added.  With the\
    \ index for each new branch calculated\n        by incrementing the last/lowest\
    \ digit at the current level, the\n        index in the next request forwarded\
    \ by this same proxy,\n        following the example above, would be 1.1.2.\n\
    \     4. Retargeting based upon a Response:  In the case of retargeting\n    \
    \    due to a specific response (e.g., 302), the index would be\n        calculated\
    \ per rule 3.  That is, the lowest/last digit of the\n        index is incremented\
    \ (i.e., a new branch is created), with the\n        increment RECOMMENDED to\
    \ be 1.  For example, if the index in the\n        History-Info header of the\
    \ received request was 1.2, then the\n        index in the History-Info header\
    \ field for the new hi-targeted-\n        to-URI would be 1.3.\n     5. Retargeting\
    \ the request in parallel (forking): If the request\n        forwarding is done\
    \ in parallel, the index MUST be captured for\n        each forked request per\
    \ the rules above, with each new Request\n        having a unique index.  The\
    \ only difference in the messaging for\n        this scenario and the messaging\
    \ produced per basic proxy\n        retargeting in rules 2 and 3 is these forwarded\
    \ requests do not\n        have History-Info entries associated with their peers.\
    \  The\n        proxy builds the subsequent response (or request) using the\n\
    \        aggregated information associated with each of those requests\n     \
    \   and including the header entries in the order indicated by the\n        indexing.\
    \  Responses are processed as described in Section 16.7\n        of [RFC3261]\
    \ with the aggregated History-Info entries processed\n        similar to Step\
    \ 7 \"Aggregate Authentication Header Field\n        Values\".  Section 4.5 provides\
    \ an example of a parallel request\n        scenario, highlighting this indexing\
    \ mechanism.\n"
- title: 4.3.3.2.  Processing History-Info in Responses
  contents:
  - "4.3.3.2.  Processing History-Info in Responses\n   A proxy that receives a Request\
    \ with the \"histinfo\" option tag in the\n   Supported header, and depending\
    \ upon a local policy supporting the\n   capture of History-Info, SHOULD return\
    \ captured History-Info in\n   subsequent, provisional, and final responses to\
    \ the Request, subject\n   to the following considerations for privacy:\n    \
    \ o If the response is being forwarded to a Request-URI associated\n       with\
    \ a domain for which the proxy is not responsible and there\n       was a Privacy\
    \ header, in the request received by the proxy, with\n       a priv-value of \"\
    session\", \"header\", or \"history\", the proxy MUST\n       remove the History-Info\
    \ header (i.e., all hi-entries) prior to\n       forwarding.\n     o If a request\
    \ is being forwarded to a Request-URI associated with\n       a domain for which\
    \ the proxy is not responsible and local policy\n       requires privacy associated\
    \ with any or all hi-entry(s) it has\n       added, any hi-entry with a priv-value\
    \ of \"history\" MUST be\n       removed prior to forwarding.\n     o If a proxy\
    \ receives a response from another intermediary\n       associated with a domain\
    \ for which it is responsible, including\n       hi-entry(s) with privacy headers,\
    \ and that response is to be\n       forwarded to a domain for which it is not\
    \ responsible, then those\n       hi-entry(s) MUST be removed.\n   The processing\
    \ of History-Info in responses follows the methodology\n   described in Section\
    \ 16.7 of [RFC3261], with the processing of\n   History-Info headers adding an\
    \ additional step, just before Step 9,\n   \"Forwarding the Response\".\n"
- title: 4.3.4.  Redirect Server Behavior
  contents:
  - "4.3.4.  Redirect Server Behavior\n   A redirect server SHOULD NOT add any new\
    \ History-Info, as that would\n   be done by the entity receiving the 3xx response.\
    \  However, a\n   redirect server MAY include History-Info in responses by adding\
    \ any\n   History-Info headers received in a request to a subsequent response.\n"
- title: 4.4.  Security for History-Info
  contents:
  - "4.4.  Security for History-Info\n   As discussed in Section 3, the security requirements\
    \ are met by\n   recommending the use of TLS (a basic SIP requirement per [RFC3261])\n\
    \   for hop-by-hop security.  If TLS is not available on the connection\n   over\
    \ which a request containing a History-Info header is being\n   forwarded, then\
    \ either of the following two options MUST be\n   implemented:\n     o The History-Info\
    \ header MUST be removed prior to forwarding the\n       request, or\n     o The\
    \ request MUST be redirected, including the History-Info header\n       in the\
    \ response, to allow the UAC to securely issue the request,\n       including\
    \ the History-Info header.\n"
- title: 4.5.  Example Applications Using History-Info
  contents:
  - "4.5.  Example Applications Using History-Info\n   This scenario highlights an\
    \ example where the History-Info in the\n   response is primarily of use in not\
    \ retrying routes that have already\n   been tried by another proxy.  Note that\
    \ this is just an example and\n   that there may be valid reasons why a Proxy\
    \ would want to retry the\n   routes, and thus, this would likely be a local proxy\
    \ or even user-\n   specific policy.\n   UA1 sends a call to Bob to proxy 1. \
    \ Proxy 1 forwards the request to\n   Proxy 2.  Proxy 2 sends the requests in\
    \ parallel and tries several\n   places (UA2, UA3, and UA4) before sending a response\
    \ to Proxy 1 that\n   all the places are busy.  Proxy 1, without the History-Info,\
    \ would\n   try some of the same places (e.g., UA3) based upon registered\n  \
    \ contacts for Bob, before completing at UA5.  However, with the\n   History-Info,\
    \ Proxy 1 determines that UA3 has already received the\n   invite; thus, the INVITE\
    \ goes directly to UA5.\n   Section 4.5.1 provides this same scenario using one\
    \ of the privacy\n   mechanisms, with Proxy2 (P2) adding the Privacy header indicating\n\
    \   that the History-Info header is not to be propagated outside P2's\n   domain.\
    \  This scenario highlights the potential functionality lost\n   with the use\
    \ of \"history\" privacy in the Privacy header for the\n   entire request and\
    \ the need for careful consideration on the use of\n   privacy for History-Info.\n\
    \   Section 4.5.2 also provides the same scenario using one of the\n   privacy\
    \ mechanisms, however, due to local policy at Proxy2, only one\n   of the Request-URIs\
    \ (UA4) in the History-Info contains a priv-value\n   of \"history\", thus allowing\
    \ some optimized functionality in the\n   routing of the request, but still maintaining\
    \ privacy for specific\n   URIs.\n   The formatting in these scenarios is for\
    \ visual purposes; thus,\n   backslash and CRLF are used between the fields for\
    \ readability and\n   the headers in the URI are not shown properly formatted\
    \ for escaping.\n   Refer to Section 4.2 examples for the proper formatting. \
    \ Additional\n   detailed scenarios are available in the appendix.\n   UA1   \
    \     Proxy1  Proxy2     UA2      UA3      UA4      UA5\n   |            |   \
    \      |        |        |        |        |\n   |--INVITE -->|         |    \
    \    |        |        |        |\n   |            |-INVITE->|        |      \
    \  |        |        |\n                 Supported: histinfo\n               \
    \  History-Info: <sip:Bob@P1.example.com>;index=1,\n                         \
    \      <sip:Bob@P2.example.com>; index=1.1\n   |            |         |      \
    \  |        |        |        |\n   |            |         |-INVITE>|        |\
    \        |        |\n                 History-Info: <sip:Bob@P1.example.com>;index=1,\n\
    \                               <sip:Bob@P2.example.com>;index=1.1,\n        \
    \                       <sip:User2@UA2.example.com>;index=1.1.1\n   |        \
    \    |         |        |        |        |        |\n   |            |      \
    \   |-----INVITE ---->|        |        |\n                  History-Info:<sip:Bob@P1.example.com>;index=1,\n\
    \                               <sip:Bob@P2.example.com>; index=1.1,\n       \
    \                        <sip:User3@UA3.example.com>;index=1.1.2\n   |       \
    \     |         |        |        |        |        |\n   |            |     \
    \    |-------INVITE------------>|        |\n                  History-Info:<sip:Bob@P1.example.com>;index=1,\n\
    \                               <sip:Bob@P2.example.com>;index=1.1,\n        \
    \                       <sip:User4@UA4.example.com>;index=1.1.3\n   /* All Responses\
    \ from the INVITEs indicate non-success/non-\n   availability*/\n   |        \
    \    |         |        |        |        |        |\n   |            |<-480 ---|\
    \        |        |        |        |\n                History-Info: <sip:Bob@P1.example.com>;index=1,\n\
    \                   <sip:Bob@P2.example.com>; index=1.1,\n                   <sip:User2@UA2.example.com?Reason=SIP;\\\
    \n                    cause=408;text=\"RequestTimeout\">;index=1.1.1,\n      \
    \             <sip:User3@UA3.example.com?Reason=SIP; \\\n                    cause=487;text=\"\
    Request Terminated\">; index=1.1.2,\n                   <sip:User4@UA4.example.com?Reason=SIP;\\\
    \n                    cause=603;text=\"Decline\">; index=1.1.3\n   |         \
    \   |         |        |        |        |        |\n  /* Upon receipt of the\
    \ response, P1 determines another route for the\n   INVITE, but finds that it\
    \ matches a route already attempted\n  (e.g., UA3), thus the INVITE is only forwarded\
    \ to UA5, where\n   the session is successfully established  */\n   |        \
    \    |         |        |        |        |        |\n   |            |----------------INVITE\
    \ --------------------->|\n                History-Info: <sip:Bob@P1.example.com>;index=1,\n\
    \                   <sip:Bob@P2.example.com>; index=1.1,\n                   <sip:User2@UA2.example.com?Reason=SIP;cause=408;\\\
    \n                    text=\"RequestTimeout\">;index=1.1.1,\n                \
    \   <sip:User3@UA3.example.com?Reason=SIP;cause=487;\\\n                    text=\"\
    Request Terminated\">; index=1.1.2,\n                   <sip:User4@UA4.example.com?Reason=SIP;cause=603;\\\
    \n                    text=\"Decline\">; index=1.1.3\n                   <sip:User5@UA5.example.com>;index=1.2\n\
    \   |            |         |        |        |        |        |\n   |       \
    \     |<-----200 OK---------------------------------|\n   |<--200 OK---|     \
    \    |        |        |        |        |\n   |            |         |      \
    \  |        |        |        |\n   |--ACK --------------------------------------------------->|\n"
- title: 4.5.1.  Example with Privacy Header for Entire Request at Proxy2
  contents:
  - "4.5.1.  Example with Privacy Header for Entire Request at Proxy2\n   UA1    \
    \    Proxy1  Proxy2     UA2      UA3      UA4      UA5\n   |            |    \
    \     |        |        |        |        |\n   |--INVITE -->|         |     \
    \   |        |        |        |\n   |            |-INVITE->|        |       \
    \ |        |        |\n                 Supported: histinfo\n                \
    \ History-Info: <sip:Bob@P1.example.com>;index=1,\n                          \
    \     <sip:Bob@P2.example.com>;index=1.1\n   |            |         |        |\
    \        |        |        |\n   |            |         |-INVITE>|        |  \
    \      |        |\n                 Privacy: history\n                 History-Info:<sip:Bob@P1.example.com>;index=1,\n\
    \                              <sip:Bob@P2.example.com>;index=1.1,\n         \
    \                     <sip:User2@UA2.example.com>;index=1.1.1\n   |          \
    \  |         |        |        |        |        |\n   |            |        \
    \ |-----INVITE ---->|        |        |\n                  Privacy: history\n\
    \                  History-Info:<sip:Bob@P1.example.com>;index=1,\n          \
    \                     <sip:Bob@P2.example.com>; index=1.1,\n                 \
    \              <sip:User3@UA3.example.com>;index=1.1.2\n   |            |    \
    \     |        |        |        |        |\n   |            |         |-------INVITE------------>|\
    \        |\n                  Privacy: history\n                  History-Info:<sip:Bob@P1.example.com>;index=1,\n\
    \                               <sip:Bob@P2.example.com>;index=1.1,\n        \
    \                       <sip:User4@UA4.example.com>;index=1.1.3\n   /* All Responses\
    \ from the INVITEs indicate non-success/non-\n   availability and only the initial,\
    \ received History-Info entries\n   are NOT returned to P1 due to the Privacy\
    \ header value.*/\n   |            |         |        |        |        |    \
    \    |\n   |            |<-480 ---|        |        |        |        |\n    \
    \            History-Info: <sip:Bob@P1.example.com>;index=1,\n               \
    \    <sip:Bob@P2.example.com>; index=1.1\n   |            |         |        |\
    \        |        |        |\n   /* Upon receipt of the response, P1 determines\
    \ another route for the\n   INVITE, including UA3, which was attempted by P2,\
    \ but due to\n   Privacy P1 is not aware of this, so UA3 is re-attempted prior\
    \ to\n   forwarding the INVITE to UA5, where the session is successfully\n   established\
    \  */\n   |            |         |        |        |        |        |\n   | \
    \           |--------------INVITE ----->|        |        |\n                \
    \  History-Info: <sip:Bob@P1.example.com>;index=1,\n                         \
    \       <sip:Bob@P2.example.com>; index=1.1,\n                               \
    \ <sip:User3@UA3.example.com>; index=1.2\n   |            |         |        |\
    \        |        |        |\n   |            |<-- 486 -------------------|  \
    \      |        |\n                  History-Info: <sip:Bob@P1.example.com>;index=1,\n\
    \                                <sip:Bob@P2.example.com>; index=1.1,\n      \
    \                          <sip:User3@UA3.example.com>; index=1.2\n   |      \
    \      |         |        |        |        |        |\n   |            |----------------INVITE\
    \ --------------------->|\n                History-Info: <sip:Bob@P1.example.com>;index=1,\n\
    \                   <sip:Bob@P2.example.com>; index=1.1,\n                   <sip:User3@UA3.example.com?Reason=SIP;cause=486;\\\
    \n                    text=\"Busy Here\">;index=1.2,\n                   <sip:User5@UA5.example.com>;index=1.3\n\
    \   |            |         |        |        |        |        |\n   |       \
    \     |<-----200 OK---------------------------------|\n   |<--200 OK---|     \
    \    |        |        |        |        |\n   |            |         |      \
    \  |        |        |        |\n   |--ACK --------------------------------------------------->|\n"
- title: 4.5.2.  Example with Privacy Header for Specific URI (UA4) at Proxy2
  contents:
  - "4.5.2.  Example with Privacy Header for Specific URI (UA4) at Proxy2\n   UA1\
    \        Proxy1  Proxy2     UA2      UA3      UA4      UA5\n   |            |\
    \         |        |        |        |        |\n   |--INVITE -->|         | \
    \       |        |        |        |\n   |            |-INVITE->|        |   \
    \     |        |        |\n                 Supported: histinfo\n            \
    \     History-Info: <sip:Bob@P1.example.com>;index=1,\n                      \
    \         <sip:Bob@P2.example.com>; index=1.1\n   |            |         |   \
    \     |        |        |        |\n   |            |         |-INVITE>|     \
    \   |        |        |\n                 History-Info:<sip:Bob@P1.example.com>;index=1,\n\
    \                              <sip:Bob@P2.example.com>;index=1.1,\n         \
    \                     <sip:User2@UA2.example.com>;index=1.1.1\n   |          \
    \  |         |        |        |        |        |\n   |            |        \
    \ |-----INVITE ---->|        |        |\n                  History-Info:<sip:Bob@P1.example.com>;index=1,\n\
    \                               <sip:Bob@P2.example.com>;index=1.1,\n        \
    \                       <sip:User3@UA3.example.com>;index=1.1.2\n   |        \
    \    |         |        |        |        |        |\n   |            |      \
    \   |-------INVITE------------>|        |\n                  History-Info: <sip:Bob@P1.example.com>;index=1,\n\
    \                                <sip:Bob@P2.example.com>;index=1.1,\n       \
    \                         <sip:User4@UA4.example.com?\\\n                    \
    \             Privacy=history>; index=1.1.3\n   /* All Responses from the INVITEs\
    \ indicate non-success/non-\n   availability.  The History-Info associated with\
    \ UA4 is not returned\n   in the response due to the privacy header associated\
    \ with that URI */\n   |            |         |        |        |        |   \
    \     |\n   |            |<-480 ---|        |        |        |        |\n   \
    \             History-Info: <sip:Bob@P1.example.com>;index=1,\n              \
    \     <sip:Bob@P2.example.com>; index=1.1,\n                   <sip:User2@UA2.example.com?Reason=SIP;\\\
    \n                    cause=408;text=\"RequestTimeout\">;index=1.1.1,\n      \
    \             <sip:User3@UA3.example.com?Reason=SIP; \\\n                    cause=487;text=\"\
    Request Terminated\">; index=1.1.2,\n   |            |         |        |    \
    \    |        |        |\n  /* Upon receipt of the response, P1 determines another\
    \ route for the\n   INVITE, but finds that it matches a route already attempted\n\
    \  (e.g., UA3), thus the INVITE is only forwarded to UA5, where\n   the session\
    \ is successfully established  */\n   |            |         |        |      \
    \  |        |        |\n   |            |----------------INVITE --------------------->|\n\
    \                History-Info: <sip:Bob@P1.example.com>;index=1,\n           \
    \        <sip:Bob@P2.example.com>; index=1.1,\n                   <sip:User2@UA2.example.com?Reason=SIP;cause=408;\\\
    \n                    text=\"RequestTimeout\">;index=1.1.1,\n                \
    \   <sip:User3@UA3.example.com?Reason=SIP;cause=487;\\\n                    text=\"\
    Request Terminated\">; index=1.1.2,\n                   <sip:User5@UA5.example.com>;index=1.2\n\
    \   |            |         |        |        |        |        |\n   |       \
    \     |<-----200 OK---------------------------------|\n   |<--200 OK---|     \
    \    |        |        |        |        |\n   |            |         |      \
    \  |        |        |        |\n   |--ACK --------------------------------------------------->|\n"
- title: 5.  Application Considerations
  contents:
  - "5.  Application Considerations\n   As seen by the example scenarios in the appendix,\
    \ History-Info\n   provides a very flexible building block that can be used by\n\
    \   intermediaries and UAs for a variety of services.  As such, any\n   services\
    \ making use of History-Info must be designed with the\n   following considerations:\n\
    \   1) History-Info is optional; thus, a service MUST define default\n      behavior\
    \ for requests and responses not containing History-Info\n      headers.\n   2)\
    \ History-Info may be impacted by privacy considerations.\n      Applications\
    \ requiring History-Info need to be aware that if\n      Header-, Session-, or\
    \ History-level privacy is requested by a UA\n      (or imposed by an intermediary)\
    \ that History-Info may not be\n      available in a request or response.  This\
    \ would be addressed by an\n      application in the same manner as the previous\
    \ consideration by\n      ensuring there is reasonable default behavior should\
    \ the\n      information not be available.\n   3) History-Info may be impacted\
    \ by local policy.  Each application\n      making use of the History-Info header\
    \ SHOULD address the impacts\n      of the local policies on the specific application\
    \ (e.g., what\n      specification of local policy is optimally required for a\
    \ specific\n      application and any potential limitations imposed by local policy\n\
    \      decisions).  Note that this is related to the optionality and\n      privacy\
    \ considerations identified in 1 and 2 above, but goes\n      beyond that.  For\
    \ example, due to the optionality and privacy\n      considerations, an entity\
    \ may receive only partial History-Info\n      entries; will this suffice?  Note\
    \ that this would be a limitation\n      for debugging purposes, but might be\
    \ perfectly satisfactory for\n      some models whereby only the information from\
    \ a specific\n      intermediary is required.\n   4) The security associated with\
    \ the History-Info header requires the\n      use of TLS.  In the case of TLS\
    \ not being available for a\n      connection over which a request is being forwarded,\
    \ the History-\n      Info header may be removed from a request.  The impact of\
    \ lack of\n      having the information depends upon the nature of the specific\n\
    \      application (e.g., Is the information something that appears on a\n   \
    \   display or is it processed by automata which could have negative\n      impacts\
    \ on the subsequent processing of a request?).  It is\n      suggested that the\
    \ impact of an intermediary not supporting the\n      security recommendations\
    \ should be evaluated by the application to\n      ensure that the impacts have\
    \ been sufficiently addressed by the\n      application.\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   The threat model and related security and privacy\
    \ requirements for\n   the History-Info header are described in Sections 2.1 and\
    \ 2.2 of this\n   document.  Sections 3.2, 3.3, and 4.4 provide normative\n  \
    \ recommendations related to security and privacy fulfilling these\n   requirements.\
    \  The use of TLS is mandated between the entities (i.e.,\n   UAC to Proxy, Proxy\
    \ to Proxy, and Proxy to UAS) that use the\n   History-Info header.  The appropriate\
    \ handling of a request in the\n   case that TLS is not available for a specific\
    \ connection is described\n   in Section 5.\n   With TLS, History-Info headers\
    \ are no less, nor no more, secure than\n   other SIP headers, which generally\
    \ have even more impact on the\n   subsequent processing of SIP sessions than\
    \ the History-Info header.\n"
- title: 7.  IANA Considerations
  contents:
  - '7.  IANA Considerations

    '
- title: 7.1.  Registration of New SIP History-Info Header
  contents:
  - "7.1.  Registration of New SIP History-Info Header\n   This document defines a\
    \ new SIP header field name: History-Info and a\n   new option tag: histinfo.\n\
    \   The following changes have been made to\n   http:///www.iana.org/assignments/sip-parameters\n\
    \   The following row has been added to the header field section:\n   Header Name\
    \             Compact Form               Reference\n   -----------           \
    \  ------------               ---------\n   History-Info               none  \
    \                  [RFC4244]\n   The following has been added to the Options Tags\
    \ section:\n   Name          Description                          Reference\n\
    \   ----          -----------                          ---------\n   histinfo\
    \      When used with the Supported header, [RFC4244]\n                 this option\
    \ tag indicates support\n                 for the History Information to be\n\
    \                 captured for requests and returned in\n                 subsequent\
    \ responses.  This tag is not\n                 used in a Proxy-Require or Require\n\
    \                 header field since support of\n                 History-Info\
    \ is optional.\n"
- title: 7.2.  Registration of "history" for SIP Privacy Header
  contents:
  - "7.2.  Registration of \"history\" for SIP Privacy Header\n   This document defines\
    \ a new priv-value for the SIP Privacy header:\n   history\n   The following changes\
    \ have been made to\n   http://www.iana.org/assignments/sip-priv-values\n   The\
    \ following has been added to the registration for the SIP Privacy\n   header:\n\
    \   Name      Description               Registrant   Reference\n   ----      -----------\
    \               ----------   ---------\n   history   Privacy requested for   \
    \  Mary Barnes  [RFC4244]\n             History-Info header(s)    mary.barnes@nortel.com\n"
- title: 8.  Normative References
  contents:
  - "8.  Normative References\n   [RFC3261]  Rosenberg, J., Schulzrinne, H., Camarillo,\
    \ G., Johnston,\n              A., Peterson, J., Sparks, R., Handley, M., and\
    \ E.\n              Schooler, \"SIP: Session Initiation Protocol\", RFC 3261,\n\
    \              June 2002.\n   [RFC3326]  Schulzrinne, H., Oran, D., and G. Camarillo,\
    \ \"The Reason\n              Header Field for the Session Initiation Protocol\
    \ (SIP)\",\n              RFC 3326, December 2002.\n   [RFC3323]  Peterson, J.,\
    \ \"A Privacy Mechanism for the Session\n              Initiation Protocol (SIP)\"\
    , RFC 3323, November 2002.\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC2246]  Dierks, T. and C. Allen, \"The TLS Protocol Version 1.0\"\
    ,\n              RFC 2246, January 1999.\n"
- title: 9.  Informative References
  contents:
  - "9.  Informative References\n   [RFC3665]  Johnston, A., Donovan, S., Sparks,\
    \ R., Cunningham, C., and\n              K. Summers, \"Session Initiation Protocol\
    \ (SIP) Basic Call\n              Flow Examples\", BCP 75, RFC 3665, December\
    \ 2003.\n"
- title: 10.  Acknowledgements
  contents:
  - "10.  Acknowledgements\n   The editor would like to acknowledge the constructive\
    \ feedback\n   provided by Robert Sparks, Paul Kyzivat, Scott Orton, John Elwell,\n\
    \   Nir Chen, Francois Audet, Palash Jain, Brian Stucker, Norma Ng,\n   Anthony\
    \ Brown, Jayshree Bharatia, Jonathan Rosenberg, Eric Burger,\n   Martin Dolly,\
    \ Roland Jesske, Takuya Sawada, Sebastien Prouvost, and\n   Sebastien Garcin.\n\
    \   The editor would like to acknowledge the significant input from Rohan\n  \
    \ Mahy on some of the normative aspects of the ABNF, particularly\n   around the\
    \ need for and format of the index and around the security\n   aspects.\n"
- title: 11.  Contributors' Addresses
  contents:
  - "11.  Contributors' Addresses\n   Cullen, Mark, and Jon contributed to the development\
    \ of the initial\n   requirements.\n   Cullen and Mark provided substantial input\
    \ in the form of email\n   discussion in the development of the initial version\
    \ of the\n   individual solution document.\n   Cullen Jennings\n   Cisco Systems\n\
    \   170 West Tasman Dr\n   MS: SJC-21/3\n   Phone: +1 408 421 9990\n   EMail:\
    \ fluffy@cisco.com\n   Jon Peterson\n   NeuStar, Inc.\n   1800 Sutter Street,\
    \ Suite 570\n   Concord, CA  94520\n   USA\n   Phone: +1 925-363-8720\n   EMail:\
    \ Jon.Peterson@NeuStar.biz\n   Mark Watson\n   Digital Fountain\n   39141 Civic\
    \ Center Drive Suite 300\n   Fremont, CA 94538\n   U.S.A.\n   EMail: mark@digitalfountain.com\n"
- title: Appendix.  Example Scenarios
  contents:
  - "Appendix.  Example Scenarios\n   The scenarios in Appendices A-D provide sample\
    \ use cases for the\n   History-Info header for informational purposes only. \
    \ They are not\n   intended to be normative and the formatting is for visual purposes;\n\
    \   thus, the headers in the URI are not shown properly formatted for\n   escaping.\
    \  Refer to Section 4.2 examples with the proper formatting.\n"
- title: Appendix A.  Sequentially Forking (History-Info in Response)
  contents:
  - "Appendix A.  Sequentially Forking (History-Info in Response)\n   This scenario\
    \ highlights an example where the History-Info in the\n   response is useful to\
    \ an application or user that originated the\n   request.\n   Alice at UA1 sends\
    \ a call to Bob via Proxy1.  Proxy1 sequentially\n   tries several places (UA2,\
    \ UA3 and UA4) unsuccessfully before sending\n   a response to Alice.\n   This\
    \ scenario is provided to show that by providing the History-Info\n   to UA1,\
    \ the end-user or an application at UA1 could make a decision\n   on how best\
    \ to attempt finding Bob.  Without this mechanism, UA1\n   might well attempt\
    \ UA3 (and thus UA4) and then re-attempt UA4 on a\n   third manual attempt at\
    \ reaching Bob.  With this mechanism, either\n   the end-user or application could\
    \ know that Bob is busy on his home\n   phone and is physically not in the office.\
    \  If there were an\n   alternative address for Bob known to this end-user or\
    \ application,\n   that hasn't been attempted, then either the application or\
    \ the end-\n   user could attempt that.  The intent here is to highlight an example\n\
    \   of the flexibility of this mechanism that enables applications well\n   beyond\
    \ SIP as it is certainly well beyond the scope of this document\n   to prescribe\
    \ detailed applications.\n   In this scenario, since UA1 has not included the\
    \ original Request-URI\n   in the INVITE, the proxy adds a hi-entry to capture\
    \ the original\n   Request-URI to provide the complete set of information, as\
    \ discussed\n   in Section 4.3.3.1.\n   UA1      Proxy1                UA2   \
    \   UA3      UA4\n   |            |                  |        |        |\n   |-INVITE\
    \ F1->|                  |        |        |\n   |            |              \
    \    |        |        |\n   |            |--INVITE F2------>|        |      \
    \  |\n   |<--100 F3---|                  |        |        |\n   |           \
    \ |<-302 F4----------|        |        |\n   |            |                  |\
    \        |        |\n   |            |-------INVITE F5 --------->|        |\n\
    \   |            |                  |        |        |\n   |            |<-------180\
    \ F6 ------------|        |\n   |<---180 F7--|                  |        |   \
    \     |\n   |  . .       |---retransmit INVITE ----->|        |\n   |        \
    \    |                  |        |        |\n   |            |      ( timeout\
    \ ) |        |        |\n   |            |                  |        |       \
    \ |\n   |            |------INVITE F8 ------------------->|\n   |<--100 F9 --|\
    \                  |        |        |\n   |            |                  | \
    \       |        |\n   |            |<-486 F10 --------------------------|\n \
    \  |            |                  |        |        |\n   |            |-- ACK\
    \ F11------------------------->|\n   |<--486 F12--|                  |       \
    \ |        |\n   |            |                  |        |        |\n   |--ACK\
    \ F13-->|                  |        |        |\n   |            |            \
    \      |        |        |\n   Message Details\n   F1 INVITE UA1 ->Proxy1\n  \
    \ INVITE sip:UserA@example.com SIP/2.0\n   Via: SIP/2.0/UDP example.net:5060\n\
    \   From: Alice <sip:User1@example.net>\n   To: Bob <sip:UserA@example.com>\n\
    \   Call-Id: 12345600@example.net\n   CSeq: 1 INVITE\n   Contact: Alice <sip:User1@example.net>\n\
    \   Content-Type: application/sdp\n   Content-Length: <appropriate value>\n  \
    \ v=0\n   o=UserA 2890844526 2890844526 IN IP4 client.example.net\n   s=Session\
    \ SDP\n   c=IN IP4 192.0.2.3\n   t=0 0\n   m=audio 49170 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /*Client for UA1 prepares to receive data on port 49170\n   from\
    \ the network. */\n      F2 INVITE  Proxy1 ->UA2\n      INVITE sip:UserA@ims.example.com\
    \ SIP/2.0\n      Via: SIP/2.0/UDP ims.example.com:5060;branch=1\n        Via:\
    \ SIP/2.0/UDP example.net:5060\n      Record-Route: <sip:UserA@example.com>\n\
    \      From: Alice <sip:User1@example.net>\n      To: Bob <sip:UserA@example.com>\n\
    \      Call-Id: 12345600@example.net\n      CSeq: 1 INVITE\n      History-Info:\
    \ <sip:UserA@example.com>; index=1,\n       <sip:UserA@ims.example.com>; index=1.1\n\
    \      Contact: Alice <sip:User1@example.net>\n      Content-Type: application/sdp\n\
    \      Content-Length: <appropriate value>\n      v=0\n      o=UserA 2890844526\
    \ 2890844526 IN IP4 client.example.net\n      s=Session SDP\n      c=IN IP4 192.0.2.3\n\
    \      t=0 0\n      m=audio 49170 RTP/AVP 0\n      a=rtpmap:0 PCMU/8000\n    \
    \  F3 100 Trying Proxy1 ->UA1\n      SIP/2.0 100 Trying\n      Via: SIP/2.0/UDP\
    \ example.net:5060\n      From: Alice <sip:User1@example.net>\n      To: Bob <sip:UserA@example.com>\n\
    \      Call-Id: 12345600@example.net\n      CSeq: 1 INVITE\n      Content-Length:\
    \ 0\n      F4 302 Moved Temporarily UA2 ->Proxy1\n      SIP/2.0 302 Moved Temporarily\n\
    \      Via: SIP/2.0/UDP ims.example.com:5060;branch=1\n      Via: SIP/2.0/UDP\
    \ example.net:5060\n      From: Alice <sip:User1@example.net>\n      To: Bob <sip:UserA@example.com>;tag=3\n\
    \      Call-Id: 12345600@example.net\n      CSeq: 1 INVITE\n      Contact: <sip:UserB@example.com>\n\
    \      Content-Length: 0\n      F5 INVITE Proxy1 -> UA3\n      INVITE sip:UserB@example.com\
    \ SIP/2.0\n      Via: SIP/2.0/UDP ims.example.com:5060;branch=2\n      Via: SIP/2.0/UDP\
    \ example.net:5060\n      From: Alice <sip:User1@example.net>\n      To: Bob <sip:UserA@example.com>\n\
    \      Call-Id: 12345600@example.net\n      History-Info: <sip:UserA@example.com>;\
    \ index=1,\n       <sip:UserA@ims.example.com?Reason=SIP;\\\n       cause=302;\
    \ text=\"Moved Temporarily\">; index=1.1,\n       <sip:UserB@example.com>;index=1.2\n\
    \      CSeq: 1 INVITE\n      Contact: Alice <sip:User1@example.net>\n      Content-Type:\
    \ application/sdp\n      Content-Length: <appropriate value>\n      v=0\n    \
    \  o=User1 2890844526 2890844526 IN IP4 client.example.net\n      s=Session SDP\n\
    \      c=IN IP4 192.0.2.3\n      t=0 0\n      m=audio 49170 RTP/AVP 0\n      a=rtpmap:0\
    \ PCMU/8000\n      F6 180 Ringing UA3 ->Proxy1\n      SIP/2.0 180 Ringing\n  \
    \    Via: SIP/2.0/UDP example.net:5060\n      From: Alice <sip:User1@example.net>\n\
    \      To: Bob <sip:UserA@example.com>;tag=5\n      Call-ID: 12345600@example.net\n\
    \      CSeq: 1 INVITE\n      Content-Length: 0\n      F7 180 Ringing Proxy1 ->\
    \ UA1\n      SIP/2.0 180 Ringing\n      SIP/2.0/UDP example.net:5060\n      From:\
    \ Alice <sip:User1@example.net>\n      To: Bob <sip:UserA@example.com>\n     \
    \ Call-Id: 12345600@example.net\n      CSeq: 1 INVITE\n      Content-Length: 0\n\
    \      /* User B is not available.  INVITE is sent multiple\n      times until\
    \ it times out. */\n        /* The proxy forwards the INVITE to UA4 after adding\
    \ the\n      additional History Information entry. */\n      F8 INVITE Proxy1\
    \ -> UA4\n      INVITE sip:UserC@example.com SIP/2.0\n      Via: SIP/2.0/UDP ims.example.com:5060;branch=3\n\
    \      Via: SIP/2.0/UDP example.net:5060\n      From: Alice <sip:User1@example.net>\n\
    \      To: Bob <sip:UserA@example.com>\n      Call-Id: 12345600@example.net\n\
    \      History-Info: <sip:UserA@example.com>; index=1,\n       <sip:UserA@ims.example.com?Reason=SIP;\\\
    \n       cause=302; text=\"Moved Temporarily\">;index=1.1,\n       <sip:UserB@example.com?Reason=SIP;cause=480;\\\
    \n       text=\"Temporarily Unavailable\" >;index=1.2,\n       <sip:UserC@example.com>;index=1.3\n\
    \      CSeq: 1 INVITE\n      Contact: Alice <sip:User1@example.net>\n      Content-Type:\
    \ application/sdp\n      Content-Length: <appropriate value>\n      v=0\n    \
    \  o=User1 2890844526 2890844526 IN IP4 client.example.net\n      s=Session SDP\n\
    \      c=IN IP4 192.0.2.3\n      t=0 0\n      m=audio 49170 RTP/AVP 0\n      a=rtpmap:0\
    \ PCMU/8000\n      F9 100 Trying Proxy1 ->UA1\n      SIP/2.0 100 Trying\n    \
    \  Via: SIP/2.0/UDP example.net:5060\n      From: Alice <sip:User1@example.net>\n\
    \      To: Bob <sip:UserA@example.com>\n      Call-Id: 12345600@example.net\n\
    \      CSeq: 1 INVITE\n      Content-Length: 0\n      F10 486 Busy Here UA4 ->\
    \ Proxy1\n      SIP/2.0  486 Busy Here\n      Via: SIP/2.0/UDP ims.example.com:5060;branch=3\n\
    \      Via: SIP/2.0/UDP example.net:5060\n      From: Alice <sip:User1@example.net>\n\
    \      To: Bob <sip:UserA@example.com>\n      Call-Id: 12345600@example.net\n\
    \      CSeq: 1 INVITE\n      Content-Length: 0\n      F11 ACK Proxy1 -> UA4\n\
    \      ACK sip:UserC@example.com SIP/2.0\n      Via: SIP/2.0/UDP example.net:5060\n\
    \      From: Alice <sip:User1@example.net>\n      To: Bob <sip:UserA@example.com>\n\
    \      Call-Id: 12345600@example.net\n      CSeq: 1 ACK\n      Content-Length:\
    \ 0\n       /* The proxy forwards the 486 to Alice after adding the\n        \
    \  associated History Information entries from the series of\n          INVITES\
    \ */\n      F12 486 Busy Here Proxy1 -> UA1\n      SIP/2.0  486 Busy Here\n  \
    \    Via: SIP/2.0/UDP example.net:5060\n      From: Alice <sip:User1@example.net>\n\
    \      To: Bob <sip:UserA@example.com>\n      Call-Id: 12345600@example.net\n\
    \      History-Info:  <sip:UserA@example.com>; index=1,\n       <sip:UserA@ims.example.com?Reason=SIP;\\\
    \n       cause=302; text=\"Moved Temporarily\">;index=1.1,\n       <sip:UserB@example.com?Reason=SIP;cause=480;\\\
    \n       text=\"Temporarily Unavailable\" >;index=1.2,\n       <sip:UserC@example.com>;index=1.3\n\
    \      CSeq: 1 INVITE\n      Content-Length: 0\n      F13 ACK Alice -> Proxy 1\n\
    \      ACK sip:UserA@example.com SIP/2.0\n      Via: SIP/2.0/UDP example.net:5060\n\
    \      From: Alice <sip:User1@example.net>\n      To: Bob <sip:UserA@example.com>\n\
    \      Call-Id: 12345600@example.net\n      CSeq: 1 ACK\n      Content-Length:\
    \ 0\n"
- title: Appendix B.  Voicemail
  contents:
  - "Appendix B.  Voicemail\n   This scenario highlights an example where the History-Info\
    \ in the\n   request is primarily of use by an edge service (e.g., voicemail\n\
    \   server).  It should be noted that this isn't intended to be a\n   complete\
    \ specification for this specific edge service as it is quite\n   likely that\
    \ additional information is needed by the edge service.\n   History-Info is just\
    \ one building block that this service makes use\n   of.\n   UA1 called UA A,\
    \ which had been forwarded to UA B, which forwarded to\n   a UA VM (voicemail\
    \ server).  Based upon the retargeted URIs and\n   Reasons (and other information)\
    \ in the INVITE, the VM server makes a\n   policy decision about what mailbox\
    \ to use, which greeting to play,\n   etc.\n   UA1          Proxy           UA-A\
    \         UA-B        UA-VM\n   |              |              |             |\
    \          |\n   |--INVITE F1-->|              |             |          |\n  \
    \ |              |              |             |          |\n   |             \
    \ |--INVITE F2-->|             |          |\n   |<--100 F3-----|             \
    \ |             |          |\n   |              |<-302 F4------|             |\
    \          |\n   |              |              |             |          |\n  \
    \ |              |--------INVITE F5---------->|          |\n   |             \
    \ |              |             |          |\n   |              |<--------180 F6-------------|\
    \          |\n   |<---180 F7----|              |             |          |\n  \
    \ |  . . .       |              |             |          |\n   |             \
    \ |------retransmit INVITE---->|          |\n   |  . . .       |             \
    \ |             |          |\n   |              |       (timeout)            |\
    \          |\n   |              |              |             |          |\n  \
    \ |              |-------INVITE F8---------------------->|\n   |             \
    \ |              |             |          |\n   |              |<-200 F9-------------------------------|\n\
    \   |              |              |             |          |\n   |<-200 F10-----|\
    \              |             |          |\n   |              |              |\
    \             |          |\n   |--ACK F11-------------------------------------------->|\n\
    \   Message Details\n   INVITE F1   UA1->Proxy\n   INVITE sip:UserA@example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP example.net:5060\n   From: BigGuy <sip:User1@example.net>\n\
    \   To: LittleGuy <sip:UserA@example.com>\n   Call-Id: 12345600@example.net\n\
    \   CSeq: 1 INVITE\n   Contact: BigGuy <sip:User1@example.net>\n   Content-Type:\
    \ application/sdp\n   Content-Length: <appropriate value>\n   v=0\n   o=UserA\
    \ 2890844526 2890844526 IN IP4 client.example.net\n   s=Session SDP\n   c=IN IP4\
    \ 192.0.2.3\n   t=0 0\n   m=audio 49170 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n \
    \  /*Client for UA1 prepares to receive data on port 49170\n   from the network.\
    \ */\n   INVITE F2 Proxy->UA-A\n   INVITE sip:UserA@ims.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDPims.example.com:5060;branch=1\n     Via: SIP/2.0/UDP example.net:5060\n\
    \   Record-Route: <sip:UserA@example.com>\n   From: BigGuy <sip:User1@example.net>\n\
    \   To: LittleGuy <sip:UserA@example.com>\n   Call-Id: 12345600@example.net\n\
    \   CSeq: 1 INVITE\n   History-Info: <sip:UserA@ims.example.com>; index=1\n  \
    \ Contact: BigGuy <sip:User1@example.net>\n   Content-Type: application/sdp\n\
    \   Content-Length: <appropriate value>\n   v=0\n   o=UserA 2890844526 2890844526\
    \ IN IP4 client.example.net\n   s=Session SDP\n   c=IN IP4 192.0.2.3\n   t=0 0\n\
    \   m=audio 49170 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   100 Trying F3 Proxy->UA1\n\
    \   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP example.net:5060\n   From: BigGuy\
    \ <sip:User1@example.net>\n   To: LittleGuy <sip:UserA@example.com>\n   Call-Id:\
    \ 12345600@example.net\n   CSeq: 1 INVITE\n   Content-Length: 0\n   302 Moved\
    \ Temporarily F4  UserA->Proxy\n   SIP/2.0 302 Moved Temporarily\n   Via: SIP/2.0/UDP\
    \ ims.example.com:5060;branch=1\n   Via: SIP/2.0/UDP example.net:5060\n   From:\
    \ BigGuy <sip:User1@example.net>\n   To: LittleGuy<sip:UserA@example.com>;tag=3\n\
    \   Call-Id: 12345600@example.net\n   CSeq: 1 INVITE\n   Contact: <sip:UserB@example.com>\n\
    \   Content-Length: 0\n   INVITE F5 Proxy-> UA-B\n   INVITE sip:UserB@example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ims.example.com:5060;branch=2\n   Via: SIP/2.0/UDP\
    \ example.net:5060\n   From: BigGuy <sip:User1@example.net>\n   To: LittleGuy\
    \ <sip:UserA@example.com>\n   Call-Id: 12345600@example.net\n   History-Info:\
    \ <sip:UserA@ims.example.com?Reason=SIP;\\\n    cause=302; text=\"Moved Temporarily\"\
    >; index=1,\n    <sip:UserB@example.com>;index=2\n   CSeq: 1 INVITE\n   Contact:\
    \ BigGuy <sip:User1@example.net>\n   Content-Type: application/sdp\n   Content-Length:\
    \ <appropriate value>\n   v=0\n   o=User1 2890844526 2890844526 IN IP4 client.example.net\n\
    \   s=Session SDP\n   c=IN IP4 192.0.2.3\n   t=0 0\n   m=audio 49170 RTP/AVP 0\n\
    \   a=rtpmap:0 PCMU/8000\n   180 Ringing F6  UA-B ->Proxy\n   SIP/2.0 180 Ringing\n\
    \   Via: SIP/2.0/UDP example.net:5060\n   From: BigGuy <sip:User1@example.net>\n\
    \   To: LittleGuy <sip:UserA@example.com>;tag=5\n   Call-ID: 12345600@example.net\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   180 Ringing F7  Proxy-> UA1\n   SIP/2.0\
    \ 180 Ringing\n   SIP/2.0/UDP example.net:5060\n   From: BigGuy <sip:User1@example.net>\n\
    \   To: LittleGuy <sip:UserA@example.com>\n   Call-Id: 12345600@example.net\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   /* User B is not available.  INVITE\
    \ is sent multiple\n   times until it times out. */\n     /* The proxy forwards\
    \ the INVITE to UA-VM after adding the\n   additional History Information entry.\
    \ */\n   INVITE F8  Proxy-> UA-VM\n   INVITE sip:VM@example.com SIP/2.0\n   Via:\
    \ SIP/2.0/UDP ims.example.com:5060;branch=3\n   Via: SIP/2.0/UDP example.net:5060\n\
    \   From: BigGuy <sip:User1@example.net>\n   To: LittleGuy <sip:UserA@example.com>\n\
    \   Call-Id: 12345600@example.net\n   History-Info:<sip:UserA@ims.example.com?Reason=SIP;\\\
    \n    cause=302; text=\"Moved Temporarily\">;index=1,\n    <sip:UserB@example.com?Reason=SIP;cause=480;\\\
    \n    text=\"Temporarily Unavailable\" >;index=2,\n    <sip:VM@example.com>;index=3\n\
    \   CSeq: 1 INVITE\n   Contact: BigGuy <sip:User1@example.net>\n   Content-Type:\
    \ application/sdp\n   Content-Length: <appropriate value>\n   v=0\n   o=User1\
    \ 2890844526 2890844526 IN IP4 client.example.net\n   s=Session SDP\n   c=IN IP4\
    \ 192.0.2.3\n   t=0 0\n   m=audio 49170 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n \
    \  200 OK F9\n   SIP/2.0 200 OK UA-VM->Proxy\n   Via: SIP/2.0/UDP ims.example.com:5060;branch=3\n\
    \   Via: SIP/2.0/UDP example.net:5060\n   From: BigGuy <sip:User1@example.net>\n\
    \   To: LittleGuy <sip:UserA@example.com>;tag=3\n   Call-Id: 12345600@example.net\n\
    \   CSeq: 1 INVITE\n   Contact: TheVoiceMail <sip:VM@example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: <appropriate value>\n   v=0\n   o=UserA\
    \ 2890844527 2890844527 IN IP4 vm.example.com\n   s=Session SDP\n   c=IN IP4 192.0.2.4\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   200 OK F10 \
    \ Proxy->UA1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ims.example.com:5060;branch=3\n\
    \   Via: SIP/2.0/UDP example.net:5060\n   From: BigGuy <sip:User1@example.net>\n\
    \   To: LittleGuy <sip:UserA@example.com>;tag=3\n   Call-Id: 12345600@example.net\n\
    \   CSeq: 1 INVITE\n   Contact: TheVoiceMail <sip:VM@example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: <appropriate value>\n   v=0\n   o=UserA\
    \ 2890844527 2890844527 IN IP4 vm.example.com\n   s=Session SDP\n   c=IN IP4 192.0.2.4\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   ACK F11 UA1->\
    \ UA-VM\n   ACK sip:VM@example.com SIP/2.0\n   Via: SIP/2.0/UDP example.net:5060\n\
    \   From: BigGuy <sip:User1@example.net>\n   To: LittleGuy<sip:UserA@example.com>;tag=3\n\
    \   Call-Id: 12345600@example.net\n   CSeq: 1 ACK\n   Content-Length: 0\n   /*\
    \ RTP streams are established between UA1 and\n   UA-VM. UA-VM starts announcement\
    \ for UA1 */\n"
- title: Appendix C.  Automatic Call Distribution Example
  contents:
  - "Appendix C.  Automatic Call Distribution Example\n   This scenario highlights\
    \ an example of an Automatic Call Distribution\n   service, where the agents are\
    \ divided into groups based upon the type\n   of customers they handle.  In this\
    \ example, the Gold customers are\n   given higher priority than Silver customers,\
    \ so a Gold call would get\n   serviced even if all the agents servicing the Gold\
    \ group (ACDGRP1)\n   were busy, by retargeting the request to the Silver Group.\
    \  Upon\n   receipt of the call at the agent assigned to handle the incoming\n\
    \   call, based upon the History-Info header in the message, the\n   application\
    \ at the agent can provide an indication that this is a\n   Gold call, from how\
    \ many groups it might have overflowed before\n   reaching the agent, etc. and\
    \ thus can be handled appropriately by the\n   agent.\n   For scenarios whereby\
    \ calls might overflow from the Silver to the\n   Gold, clearly the alternate\
    \ group identification, internal routing,\n   or actual agent that handles the\
    \ call SHOULD not be sent to UA1.\n   Thus, for this scenario, one would expect\
    \ that the Proxy would not\n   support the sending of the History-Info in the\
    \ response, even if\n   requested by the calling UA.\n   As with the other examples,\
    \ this is not prescriptive of how one would\n   do this type of service but an\
    \ example of a subset of processing that\n   might be associated with such a service.\
    \  In addition, this example\n   is not addressing any aspects of Agent availability,\
    \ which might also\n   be done via a SIP interface.\n   UA1          Proxy   \
    \     ACDGRP1 Svr   ACDGRP2 Svr UA2-ACDGRP2\n   |              |             \
    \ |             |          |\n   |--INVITE F1-->|              |             |\
    \          |\n    Supported:histinfo\n   |              |              |     \
    \        |          |\n   |              |--INVITE F2-->|             |      \
    \    |\n                    Supported:histinfo\n                    History-Info:\
    \ <sip:Gold@example.com>; index=1\n                    History-Info: <sip:ACDGRP1@example.com>;\
    \ index=1.1\n   |              |              |             |          |\n   |\
    \              |<-302 F3------|             |          |\n                   \
    \ Contact: <sip:ACDGRP2@ACD.com>\n   |              |              |         \
    \    |          |\n   |              |--------INVITE F4---------->|          |\n\
    \                    History-Info: <sip:Gold@example.com>; index=1\n         \
    \           History-Info: <sip:ACDGRP1@example.com>; index=1.1\n             \
    \       History-Info: <sip:ACDGRP2@example.com>; index=1.2\n   |             \
    \ |              |             |          |\n   |              |             \
    \ |             |          |\n   |              |              |             |INVITE\
    \ F5>|\n                    History-Info: <sip:Gold@example.com>; index=1\n  \
    \                  History-Info: <sip:ACDGRP1@example.com>; index=1.1\n      \
    \              History-Info: <sip:ACDGRP2@example.com>; index=1.2\n   |      \
    \        |              |             |          |\n   |              |      \
    \        |             |<-200 F6--|\n   |              |              |      \
    \       |          |\n   |              |<-200 F7--------------------|       \
    \   |\n                    History-Info: <sip:Gold@example.com>; index=1\n   \
    \                 History-Info: <sip:ACDGRP1@example.com>; index=1.1\n       \
    \             History-Info: <sip:ACDGRP2@example.com>; index=1.2\n   |<-200 F8------|\
    \              |             |          |\n   < No History-Info included in the\
    \ response due to Local Policy>\n   |              |              |          \
    \   |          |\n   |--ACK F9--------------------------------------------->|\n"
- title: Appendix D.  Session via Redirect and Proxy Servers
  contents:
  - "Appendix D.  Session via Redirect and Proxy Servers\n   In this scenario, Alice\
    \ places a call to Bob using first a Redirect\n   server then a Proxy Server.\
    \  The INVITE message is first sent to the\n   Redirect Server.  The Server returns\
    \ a 302 Moved Temporarily response\n   (F2) containing a Contact header with Bob's\
    \ current SIP address.\n   Alice then generates a new INVITE with Bob's current\
    \ SIP address\n   included in another History-Info entry.  The INVITE is then\
    \ sent to\n   Bob via the Proxy Server, with Bob receiving the complete History\n\
    \   information; the call then proceeds normally.  The complete call flow\n  \
    \ for this scenario, without the use of History-Info, is described in\n   Section\
    \ 3.6 of the SIP Basic Call Flow Examples [RFC3665].\n   Alice        Redirect\
    \ Server     Proxy 3             Bob\n     |                |                |\
    \                |\n     |   INVITE F1    |                |                |\n\
    \     |--------------->|                |                |\n     |     302 F2\
    \     |                |                |\n     |<---------------|           \
    \     |                |\n     |     ACK F3     |                |           \
    \     |\n     |--------------->|                |                |\n     |   \
    \  INVITE F4                   |                |\n     |-------------------------------->|\
    \    INVITE F5   |\n     |             100  F6             |--------------->|\n\
    \   Message Details\n   F1 INVITE Alice -> Redirect Server\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bKbf9f44\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   History-Info: <sip:bob@biloxi.example.com>; index=1\n \
    \  Contact: <sip:alice@client.atlanta.example.com>\n   Content-Length: 0\n   F2\
    \ 302 Moved Temporarily Redirect Proxy -> Alice\n   SIP/2.0 302 Moved Temporarily\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bKbf9f44\n  \
    \  ;received=192.0.2.1\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=53fHlqlQ2\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   History-Info: <sip:bob@biloxi.example.com>; index=1\n \
    \  Contact: <sip:bob@chicago.example.com;transport=tcp>\n   Content-Length: 0\n\
    \   F3 ACK Alice -> Redirect Server\n   ACK sip:bob@biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bKbf9f44\n  \
    \ Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=53fHlqlQ2\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F4 INVITE Alice -> Proxy 3\n   INVITE\
    \ sip:bob@chicago.example.com SIP/2.0\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   History-Info: <sip:bob@biloxi.example.com?Reason=SIP;cause=302>\\\
    \n                  text=\"Moved Temporarily\">; index=1,\n                 <sip:bob@chicago.example.com>;\
    \ index=2\n   Contact: <sip:alice@client.atlanta.example.com;transport=tcp>\n\
    \   Content-Length: 0\n   F5 INVITE Proxy 3 -> Bob\n   INVITE sip:bob@client.chicago.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss3.chicago.example.com:5060;branch=z9hG4bK721e.1\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.1\n   Max-Forwards: 69\n   Record-Route: <sip:ss3.chicago.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 INVITE\n   History-Info:\
    \ <sip:bob@biloxi.example.com?Reason=SIP;cause=302>\\\n                  text=\"\
    Moved Temporarily\">; index=1,\n                 <sip:bob@chicago.example.com>;\
    \ index=2,\n                 <sip:bob@client.chicago.example.com>; index=2.1\n\
    \   Contact: <sip:alice@client.atlanta.example.com;transport=tcp>\n   Content-Length:\
    \ 0\n   Detailed Call Flow continues per section 6.3 in [RFC3665].\n"
- title: Editor's Address
  contents:
  - "Editor's Address\n   Mary Barnes\n   Nortel\n   2201 Lakeside Blvd\n   Richardson,\
    \ TX USA\n   Phone:  1-972-684-5432\n   EMail:  mary.barnes@nortel.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2005).\n   This\
    \ document is subject to the rights, licenses and restrictions\n   contained in\
    \ BCP 78, and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET\n   ENGINEERING\
    \ TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,\n   INCLUDING BUT NOT\
    \ LIMITED TO ANY WARRANTY THAT THE USE OF THE\n   INFORMATION HEREIN WILL NOT\
    \ INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY OR FITNESS\
    \ FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at ietf-\n   ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
