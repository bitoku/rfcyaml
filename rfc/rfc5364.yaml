- title: __initial_text__
  contents:
  - "  Extensible Markup Language (XML) Format Extension for Representing\n      \
    \         Copy Control Attributes in Resource Lists\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Abstract
  contents:
  - "Abstract\n   In certain types of multimedia communications, a Session Initiation\n\
    \   Protocol (SIP) request is distributed to a group of SIP User Agents\n   (UAs).\
    \  The sender sends a single SIP request to a server which\n   further distributes\
    \ the request to the group.  This SIP request\n   contains a list of Uniform Resource\
    \ Identifiers (URIs), which\n   identify the recipients of the SIP request.  This\
    \ URI list is\n   expressed as a resource list XML document.  This specification\n\
    \   defines an XML extension to the XML resource list format that allows\n   the\
    \ sender of the request to qualify a recipient with a copy control\n   level similar\
    \ to the copy control level of existing email systems.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  2\n   2.  Terminology  . . . . . . . . . . . . . . . . . . . .\
    \ . . . . .  3\n   3.  Overview of Operation  . . . . . . . . . . . . . . . .\
    \ . . . .  3\n   4.  Extension to the Resource List Data Format . . . . . . .\
    \ . . .  6\n   5.  XML Schema . . . . . . . . . . . . . . . . . . . . . . . .\
    \ . .  8\n   6.  Examples . . . . . . . . . . . . . . . . . . . . . . . . . .\
    \ .  9\n   7.  Carrying URI Lists in SIP  . . . . . . . . . . . . . . . . . .\
    \ 10\n   8.  Security Considerations  . . . . . . . . . . . . . . . . . . . 11\n\
    \   9.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 13\n  \
    \   9.1.  Disposition Type Registration  . . . . . . . . . . . . . . 13\n    \
    \ 9.2.  XML Namespace Registration . . . . . . . . . . . . . . . . 13\n     9.3.\
    \  XML Schema Registration  . . . . . . . . . . . . . . . . . 14\n   10. Acknowledgments\
    \  . . . . . . . . . . . . . . . . . . . . . . . 14\n   11. References . . . .\
    \ . . . . . . . . . . . . . . . . . . . . . . 14\n     11.1. Normative References\
    \ . . . . . . . . . . . . . . . . . . . 14\n     11.2. Informative References\
    \ . . . . . . . . . . . . . . . . . . 15\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   RFC 5363 [RFC5363] describes a generic framework for carrying\
    \ Uniform\n   Resource Identifier (URI) lists in SIP [RFC3261] messages.\n   Specifically,\
    \ the document provides a common framework for specific\n   implementations of\
    \ URI-list services, such as conferences initiated\n   with INVITE requests [RFC5366]\
    \ or Multiple-recipient MESSAGE requests\n   [RFC5365].\n   Common to all URI-list\
    \ services is the presence of a SIP request that\n   contains a collection of\
    \ resources, typically expressed as an XML\n   resource list [RFC4826].  SIP requests\
    \ carrying resource lists can\n   appear either in requests received by the URI-list\
    \ server, indicating\n   the list of intended recipients, or in each of the requests\
    \ that the\n   URI-list server sends to recipients, indicating the list of\n \
    \  recipients of the same SIP request.\n   Although the XML resource list [RFC4826]\
    \ provides a powerful\n   mechanism for describing a list of resources, there\
    \ is a need for a\n   copy control attribute to determine whether a resource is\
    \ receiving a\n   SIP request as a primary recipient, a carbon copy, or a blind\
    \ carbon\n   copy.  This is similar to common email systems, where the sender\
    \ can\n   categorize each recipient as a \"to\", \"cc\", or \"bcc\" recipient.\n\
    \   This document addresses this problem by providing an extension to the\n  \
    \ XML resource list [RFC4826] that enables the sender to supply a copy\n   control\
    \ attribute that labels each recipient as a \"to\", \"cc\", or\n   \"bcc\" recipient.\
    \  This attribute indicates whether the recipient is\n   receiving a primary copy\
    \ of the SIP request, a carbon copy, or a\n   blind carbon copy.  Additionally,\
    \ we provide the sender with the\n   capability of indicating in the URI list\
    \ that one or more resources\n   should be anonymized, so that some recipients'\
    \ URIs are not disclosed\n   to the other recipients.  Instead, these URIs are\
    \ replaced with\n   anonymous URIs.\n   The remainder of this document is organized\
    \ as follows: Section 2\n   introduces the terminology used throughout this specification.\n\
    \   Section 3 gives an overview of operation.  Section 4 formally defines\n  \
    \ an extension to URI lists.  The XML schema definition is provided in\n   Section\
    \ 5.  Section 6 shows examples of the URI lists with the\n   extensions defined\
    \ in this document.  Section 7 discusses the\n   implications of carrying URI\
    \ lists in SIP messages.\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\"\
    , \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and\
    \ \"OPTIONAL\" in this\n   document are to be interpreted as described in BCP\
    \ 14, RFC 2119\n   [RFC2119] and indicate requirement levels for compliant\n \
    \  implementations.\n   URI-list service:  SIP application service that receives\
    \ a SIP\n      request containing a URI list and sends a similar SIP request to\n\
    \      each URI in the list.\n   Intended recipient:  The intended final recipient\
    \ of the request to\n      be generated by URI-list service.\n   Copy control:\
    \   An attribute assigned by the sender to a URI in an\n      XML resource list.\
    \  Its purpose is to indicate to the recipient\n      whether he is getting a\
    \ primary, carbon, or blind carbon copy of\n      the SIP request.\n   Recipient\
    \ list or recipient XML resource list:   An XML resource list\n      containing\
    \ the list of intended recipients.  The sender sets this\n      list in the SIP\
    \ request he sends to the URI-list server.\n   Recipient-history list or recipient-history\
    \ XML resource list:   An\n      XML resource list containing the visible list\
    \ of recipients (i.e.,\n      those non-anonymous non-bcc).  The URI-list server\
    \ creates this\n      list, based on the recipient list, and includes it in each\
    \ of the\n      SIP requests it sends to each recipient.\n"
- title: 3.  Overview of Operation
  contents:
  - "3.  Overview of Operation\n   Figure 1 depicts a general overview of the operation\
    \ of a URI-list\n   server.  A SIP User Agent Client (UAC) issuer sends a SIP\
    \ request\n   (F1) to a URI-list server containing a recipient list.  The URI-list\n\
    \   server generates a SIP request to each recipient, according to the\n   specific\
    \ SIP method.  Each of these SIP requests contains a\n   recipient-history list\
    \ that indicates the visible list of recipients\n   of the SIP request.\n   +--------+\
    \        +---------+        +--------+ +--------+ +--------+\n   |SIP UAC |  \
    \      | URI-list|        |intended| |intended| |intended|\n   | issuer |    \
    \    |  server |        | recip. | | recip. | | recip. |\n   |        |      \
    \  |         |        |   1    | |   2    | |   3    |\n   +--------+        +---------+\
    \        +--------+ +--------+ +--------+\n       |                  |       \
    \          |          |          |\n       | F1 SIP request   |              \
    \   |          |          |\n       |  (recipt. list)  |                 |   \
    \       |          |\n       | ---------------->|                 |          |\
    \          |\n       | F2 2xx response  |                 |          |       \
    \   |\n       |<---------------- | F3 SIP request  |          |          |\n \
    \      |                  | (recp-hist.list)|          |          |\n       |\
    \                  | --------------->|          |          |\n       |       \
    \           | F4 SIP request  |          |          |\n       |              \
    \    | (recp-hist.list)|          |          |\n       |                  | -------------------------->|\
    \          |\n       |                  | F5 SIP request  |          |       \
    \   |\n       |                  | (recp-hist.list)|          |          |\n \
    \      |                  | ------------------------------------->|\n       |\
    \                  |  F6 200 OK      |          |          |\n       |       \
    \           |<--------------- |          |          |\n       |              \
    \    |  F7 200 OK      |          |          |\n       |                  |<--------------------------\
    \ |          |\n       |                  |  F8 200 OK      |          |     \
    \     |\n       |                  |<------------------------------------- |\n\
    \       |                  |                 |          |          |\n       |\
    \                  |                 |          |          |\n       |       \
    \           |                 |          |          |\n                      Figure\
    \ 1: Example of operation\n   The URI-list mechanism allows a sender to specify\
    \ multiple targets\n   for a SIP request by including a recipient XML resource\
    \ list\n   [RFC4826] in the body of the SIP request.  This recipient list\n  \
    \ includes the target URIs of the SIP request (the actual procedures\n   are method\
    \ specific and outside the scope of this document).  Each\n   target URI may also\
    \ be marked with a copy control attribute to\n   indicate the copy level in which\
    \ the recipient is receiving the SIP\n   request.  This is achieved by the sender\
    \ qualifying each URI in the\n   URI list with a 'copyControl' attribute.  The\
    \ available values of the\n   'copyControl' attribute include \"to\", \"cc\",\
    \ and \"bcc\" (analogous to\n   email).  This is discussed in greater detail in\
    \ Section 4.  When the\n   URI-list server expands the request to each recipient,\
    \ the URI-list\n   server includes a recipient-history XML resource list built\
    \ upon the\n   recipient list received from the sender.  The recipient-history\
    \ XML\n   resource list replaces the recipient list in the SIP requests\n   generated\
    \ by the URI-list server towards each recipient.  The URI-\n   list server copies\
    \ from the recipient list those targets that are\n   marked with the \"to\" and\
    \ \"cc\" copy control level, and pastes them in\n   the recipient-history list.\
    \  The URI-list server explicitly excludes\n   from the recipient-history list\
    \ those URIs marked with a \"bcc\" copy\n   control, although it is able to preserve\
    \ the address of a \"bcc\"\n   tagged URI when it matches the URI of the recipient\
    \ of the SIP\n   request (this is described later in Section 4).  When a recipient\n\
    \   receives the SIP request containing the recipient-history XML\n   resource\
    \ list, he is able to determine which other visible recipients\n   are getting\
    \ a copy of the SIP request, and whether they are marked\n   with the \"to\" or\
    \ \"cc\" copy control level.  Later, if needed, the\n   recipient can generate\
    \ a reply to those visible recipients.\n   In addition to the 'copyControl' attribute\
    \ for a URI in an XML\n   resource list, we define a second boolean attribute\
    \ called\n   'anonymize'.  The sender of a SIP request can mark a URI in a\n \
    \  recipient XML resource list with the 'anonymize' attribute to\n   indicate\
    \ the URI-list server that the URI marked with that attribute\n   is to be replaced\
    \ with an anonymous URI in the recipient-history XML\n   resource list.  This\
    \ provides knowledge to the recipients of a SIP\n   request of the number of additional\
    \ visible recipients whose URIs\n   have not been disclosed.\n   There are cases\
    \ when the sender marks several URIs with the\n   'anonymize' attribute.  The\
    \ URI-list server can group the anonymized\n   URIs in a single anonymized URI\
    \ within its copy control level, and\n   provide a count of the number of anonymized\
    \ URIs.  To support this\n   scenario, we define a new 'count' attribute to a\
    \ URI in the\n   recipient-history XML resource list.  It is expected that the\
    \ 'count'\n   attribute is only used with anonymous URIs, although syntactically\
    \ it\n   is possible to add a 'count' attribute to any URI in any XML resource\n\
    \   list.\n   Initially, it may be thought that the 'anonymize' attribute overlaps\n\
    \   with the \"bcc\" value of the 'copyControl' attribute.  However, there\n \
    \  are differences between them.  If the sender qualifies a URI with a\n   'copyControl'\
    \ attribute of \"bcc\" in the recipient XML resource list,\n   the URI-list server\
    \ will typically remove that URI from the\n   recipient-history XML resource list\
    \ (unless the URI-list server\n   decides to preserve a \"bcc\" marked URI when\
    \ that URI is itself the\n   recipient of the SIP request).  Recipients of the\
    \ SIP request will\n   not notice that one or more extra \"bcc\" URIs also received\
    \ the\n   request.  However, if the sender qualifies a URI with the 'anonymize'\n\
    \   attribute in the recipient XML resource list, the URI-list server\n   will\
    \ replace the URI with an anonymous one in the recipient-history\n   list.  Recipients\
    \ of the SIP request will notice that there have been\n   one or more additional\
    \ recipients of the same request, but their URIs\n   are not disclosed.\n"
- title: 4.  Extension to the Resource List Data Format
  contents:
  - "4.  Extension to the Resource List Data Format\n   This document defines an extension\
    \ to the XML resource list data\n   format [RFC4826] that allows the sender to\
    \ indicate a copy control\n   attribute that qualifies a recipient with a copy\
    \ control level.  We\n   define a new 'copyControl' attribute to the <entry> element\
    \ of the\n   resource list document format [RFC4826].  The 'copyControl' attribute\n\
    \   has similar semantics to the type of destination address in email\n   systems.\
    \  It can take the values \"to\", \"cc\", and \"bcc\".  A \"to\" value\n   of\
    \ the 'copyControl' attribute indicates that the resource is\n   considered a\
    \ primary recipient of the SIP request.  A \"cc\" value\n   indicates that the\
    \ resource receives a carbon copy of the SIP\n   request.  A \"bcc\" value indicates\
    \ that the resource receives a blind\n   carbon copy of the SIP request (i.e.,\
    \ this URI is not disclosed to\n   other recipients of the SIP request).  The\
    \ default 'copyControl'\n   value is \"bcc\".  That is, the absence of a 'copyControl'\
    \ attribute\n   MUST be treated as if the 'copyControl' was set to \"bcc\".\n\
    \   When creating a recipient-history list, URI-list servers use \"bcc\"\n   'copyControl'\
    \ attributes to route SIP requests.  In addition, URI-\n   list servers behave\
    \ similarly to email systems [RFC2822] with respect\n   to the treatment of these\
    \ URIs marked with a \"bcc\" copy control,\n   because they have two ways of treating\
    \ \"bcc\" marked URIs.  URI-list\n   servers MUST treat these \"bcc\" marked URIs\
    \ in either of the following\n   two ways:\n   o  URI-list servers MUST remove\
    \ all URIs marked with a \"bcc\" copy\n      control in recipient-history lists.\
    \  This mechanism allows URI-\n      list servers to send the same recipient-history\
    \ list to each\n      recipient of the SIP request.  However, recipients who are\
    \ tagged\n      with \"bcc\" values are not explicitly informed about it.\n  \
    \ o  URI-list servers MUST preserve with a \"bcc\" copy control in the\n     \
    \ recipient-history list the URI that identifies the recipient (if\n      any)\
    \ and MUST remove the remaining URIs marked with a \"bcc\" copy\n      control.\
    \  Consequently, each recipient receives a different\n      recipient-history\
    \ list.  However, recipients who have been marked\n      with a \"bcc\" copy control\
    \ are explicitly informed about it.\n   Implementations that are able to receive\
    \ recipient-history lists must\n   pay attention to the contents of the list.\
    \  If the recipient's URI is\n   not included in the recipient-history list or\
    \ if it is included but\n   tagged with a \"bcc\" copy control, then implementations\
    \ SHOULD prevent\n   the user from replying to all the recipients of the SIP request.\n\
    \   This would allow the non-blind recipients to notice the existence of\n   blind\
    \ recipients of the SIP request.\n   A new 'anonymize' attribute can be included\
    \ in a <entry> element of\n   the resource list document format [RFC4826].  If\
    \ set to a \"true\"\n   value, it provides an indication to the URI-list server\
    \ for not\n   disclosing the URI itself in a URI list sent to the recipient, but\n\
    \   instead to anonymize the URI (i.e., making it bogus in the recipient-\n  \
    \ history XML resource list).  URI-list servers can use URIs tagged\n   with the\
    \ 'anonymize' attribute for routing SIP requests, but MUST\n   convert them to\
    \ the SIP URI \"sip:anonymous@anonymous.invalid\" in\n   recipient-history lists.\
    \  The default value of the 'anonymize'\n   attribute is \"false\".\n   There\
    \ are occasions where the URI-list server encounters the same URI\n   entry duplicated\
    \ in a resource list, where duplicated URI entries are\n   tagged with the same\
    \ or different values of the 'copyControl'\n   attribute.  There are no reasonable\
    \ usages that justify duplicated\n   URIs in resource lists; thus, this is considered\
    \ an error.  URI-list\n   servers should not send duplicated copies of the same\
    \ SIP request to\n   the same intended recipient.  In case the URI-list server\
    \ encounters\n   the same URI entry duplicated in a resource list, it should send\
    \ at\n   most a single copy of the request to that intended recipient.  For\n\
    \   each set of duplicated URI entries, the URI-list server MUST select\n   the\
    \ highest precedence value of the 'copyControl' attribute for the\n   same intended\
    \ recipient.  The order of precedence of the values of\n   the 'copyControl' attribute\
    \ is: \"to\", \"cc\", and \"bcc\".  Once the URI-\n   list server has selected\
    \ a value for the 'copyControl' attribute of\n   an intended recipient, the URI-list\
    \ server can continue processing\n   the request.\n   Processing of URIs tagged\
    \ with a 'copyControl' attribute set to a\n   \"bcc\" value has higher precedence\
    \ over the 'anonymize' attribute.\n   Thus, if the 'copyControl' of a URI is set\
    \ to \"bcc\", the URI-list\n   server MUST remove that URI from the recipient-history\
    \ list, and the\n   'anonymize' attribute will be ignored.  Therefore, the 'anonymize'\n\
    \   attribute is only useful for those URIs tagged with a 'copyControl'\n   of\
    \ \"to\" or \"cc\".\n   A new 'count' attribute can be also included in an <entry>\
    \ element of\n   the resource list document format [RFC4826].  It provides the\
    \ number\n   of equal URIs.  Typically, recipient lists created by UACs will not\n\
    \   have equal (or duplicate) URI entries; thus, it is not expected to\n   contain\
    \ URIs tagged with 'count' attributes.  However, recipient-\n   history lists\
    \ can contain duplicated anonymized URIs; therefore, it\n   is expected that recipient-history\
    \ lists will contain 'count'\n   attributes.  The default value of the 'count'\
    \ attribute is \"1\".\n   The 'copyControl', 'anonymize', and 'count' attributes\
    \ SHOULD be\n   included as modifiers of any of the child elements included in\
    \ the\n   <list> element of a resource list (e.g., attribute of the <entry> or\n\
    \   <external> elements).\n   Section 5 describes the format of the 'copyControl',\
    \ 'anonymize', and\n   'count' attributes.  Implementations according to this\
    \ specification\n   MUST support this XML schema.\n   Implementations that receive\
    \ recipient-history lists must pay\n   attention to the contents of the list.\
    \  If the recipient's URI is not\n   included in recipient-history list or if\
    \ it is included but tagged\n   with a \"bcc\" copy control, then they SHOULD\
    \ prevent the user from\n   replying to all the recipients of the SIP request.\
    \  This would allow\n   the non-blind recipients to notice the existence of blind\
    \ recipients\n   in the original SIP request.\n"
- title: 5.  XML Schema
  contents:
  - "5.  XML Schema\n   <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n   <xs:schema\
    \ targetNamespace=\"urn:ietf:params:xml:ns:copycontrol\"\n       xmlns=\"urn:ietf:params:xml:ns:copycontrol\"\
    \n       xmlns:rls=\"urn:ietf:params:xml:ns:resource-lists\"\n       xmlns:xs=\"\
    http://www.w3.org/2001/XMLSchema\"\n       elementFormDefault=\"qualified\"\n\
    \       attributeFormDefault=\"unqualified\">\n       <xs:annotation>\n      \
    \   <xs:documentation xml:lang=\"en\">\n            Adds the copyControl, anonymize,\
    \ and count attributes\n            to URIs included in a resource list.\n   \
    \      </xs:documentation>\n       </xs:annotation>\n      <xs:import namespace=\"\
    urn:ietf:params:xml:ns:resource-lists\"\n            schemaLocation=\"urn:ietf:params:xml:schema:resource-lists\"\
    />\n       <xs:attribute name=\"copyControl\">\n          <xs:simpleType>\n  \
    \           <xs:restriction base=\"xs:string\">\n                <xs:enumeration\
    \ value=\"to\"/>\n                <xs:enumeration value=\"cc\"/>\n           \
    \     <xs:enumeration value=\"bcc\"/>\n             </xs:restriction>\n      \
    \    </xs:simpleType>\n       </xs:attribute>\n      <xs:attribute name=\"anonymize\"\
    \ type=\"xs:boolean\" default=\"false\"/>\n      <xs:attribute name=\"count\"\
    \ type=\"xs:nonNegativeInteger\"\n                                 default=\"\
    1\"/>\n   </xs:schema>\n     Figure 2: XML schema of the extension to the resource\
    \ list format\n"
- title: 6.  Examples
  contents:
  - "6.  Examples\n   This section shows two examples of URI lists that can be included\
    \ in\n   SIP requests.  The first example in Figure 3 shows a recipient list\n\
    \   that the UAC sends to the URI-list server.  This corresponds to a\n   list\
    \ that will be included in the flow F2 in Figure 1.  The recipient\n   list contains\
    \ a flat list according to the resource list data format\n   specified in RFC\
    \ 4826 [RFC4826].  Each resource indicates the copy\n   control of a resource\
    \ with a 'copyControl' attribute.  Some of the\n   resources are also marked with\
    \ the 'anonymize' attribute.  This\n   provides an indication to the URI-list\
    \ service for not disclosing\n   their URIs in a recipient-history list.  The\
    \ last two <entry>\n   elements are marked with a 'copyControl' attribute of \"\
    bcc\".  This\n   provides an indication to the URI-list server for removing these\
    \ URIs\n   in the recipient-history list.\n   <?xml version=\"1.0\" encoding=\"\
    UTF-8\"?>\n   <resource-lists xmlns=\"urn:ietf:params:xml:ns:resource-lists\"\n\
    \             xmlns:cp=\"urn:ietf:params:xml:ns:copycontrol\">\n     <list>\n\
    \       <entry uri=\"sip:bill@example.com\" cp:copyControl=\"to\" />\n       <entry\
    \ uri=\"sip:randy@example.net\" cp:copyControl=\"to\"\n                      \
    \                    cp:anonymize=\"true\"/>\n       <entry uri=\"sip:eddy@example.com\"\
    \ cp:copyControl=\"to\"\n                                         cp:anonymize=\"\
    true\"/>\n       <entry uri=\"sip:joe@example.org\" cp:copyControl=\"cc\" />\n\
    \       <entry uri=\"sip:carol@example.net\" cp:copyControl=\"cc\"\n         \
    \                                 cp:anonymize=\"true\"/>\n       <entry uri=\"\
    sip:ted@example.net\" cp:copyControl=\"bcc\" />\n       <entry uri=\"sip:andy@example.com\"\
    \ cp:copyControl=\"bcc\" />\n     </list>\n   </resource-lists>\n     Figure 3:\
    \ Recipient list sent from the UAC to the URI-list server\n   Upon receipt of\
    \ the SIP request containing the recipient list of\n   Figure 3, the URI-list\
    \ server creates a SIP request to each of the\n   URIs listed in the recipient\
    \ list (so, in our example, it creates 7\n   SIP requests).  The URI-list server\
    \ processes the recipient list and\n   creates a recipient-history list that is\
    \ included in each of the\n   outgoing SIP requests.  The process is as follows:\
    \ the URI-list\n   server creates a new recipient-history list, based on the recipient\n\
    \   list, but with changes.  First, it copies all the URIs (<entry>\n   elements)\
    \ marked with the \"to\" or \"cc\" 'copyControl' attributes,\n   which do not\
    \ contain an 'anonymize' attribute (or when the\n   'anonymize' attribute is set\
    \ to \"false\").  Then all the URIs marked\n   with a 'copyControl' attribute\
    \ set to \"to\" and 'anonymize' attribute\n   set to \"true\" are replaced with\
    \ the SIP anonymous URI\n   \"sip:anonymous@anonymous.invalid\".  In this entry,\
    \ the URI-list\n   server also adds the original value of the 'copyControl' attribute\n\
    \   (\"to\" in our example), and it adds a 'count' attribute containing the\n\
    \   number of anonymous entries in this group (\"2\" in our example).  Then\n\
    \   the URI-list server does the same operation to the URIs tagged with\n   the\
    \ 'copyControl' attribute set to \"cc\" and 'anonymize' attribute set\n   to \"\
    true\", adding also the 'count' attribute containing the number of\n   anonymous\
    \ attributes in this group (\"1\" in the example).  Last, the\n   URI-list server\
    \ removes all URIs marked with the \"bcc\" 'copyControl'\n   attribute.  The resulting\
    \ recipient-history list is shown in\n   Figure 4.\n   <?xml version=\"1.0\" encoding=\"\
    UTF-8\"?>\n   <resource-lists xmlns=\"urn:ietf:params:xml:ns:resource-lists\"\n\
    \             xmlns:cp=\"urn:ietf:params:xml:ns:copycontrol\">\n     <list>\n\
    \       <entry uri=\"sip:bill@example.com\" cp:copyControl=\"to\" />\n       <entry\
    \ uri=\"sip:anonymous@anonymous.invalid\" cp:copyControl=\"to\"\n            \
    \                                        cp:count=\"2\"/>\n       <entry uri=\"\
    sip:joe@example.org\" cp:copyControl=\"cc\" />\n       <entry uri=\"sip:anonymous@anonymous.invalid\"\
    \ cp:copyControl=\"cc\"\n                                                    cp:count=\"\
    1\"/>\n     </list>\n   </resource-lists>\n     Figure 4: Recipient-history list\
    \ sent from the URI-list server to\n                              each recipient\n"
- title: 7.  Carrying URI Lists in SIP
  contents:
  - "7.  Carrying URI Lists in SIP\n   A SIP UAC (User Agent Client) that composes\
    \ a SIP request can include\n   a URI list with the extensions specified in this\
    \ document to indicate\n   the list of intended recipients.  On doing so, as specified\
    \ in RFC\n   5363 [RFC5363], the UAC adds a Content-Disposition [RFC2183] header\n\
    \   field set to the value 'recipient-list'.  Typically UACs send these\n   'recipient-list'\
    \ bodies to URI-list services (this corresponds to\n   flow F1 in Figure 1). \
    \ A body whose Content-Disposition type is\n   'recipient-list' contains a URI\
    \ list that includes the intended\n   recipients of the SIP request, something\
    \ known throughout this\n   document as a recipient list.  The <entry> element\
    \ in the URI list\n   MAY also include a 'copyControl' and 'anonymize' attributes,\
    \ as\n   specified in Section 4.\n   To be able to inform intended recipients\
    \ of who else is receiving a\n   copy of the SIP request, we define a new mail\
    \ disposition type to be\n   included in a Content-Disposition [RFC2183] header\
    \ field of a SIP\n   request.  The value of this new disposition type is 'recipient-list-\n\
    \   history' and its purpose is to indicate a list of recipients that a\n   SIP\
    \ request was sent to, something known throughout this document as\n   a recipient-history\
    \ list.  A body whose Content-Disposition type is\n   'recipient-list-history'\
    \ contains a URI list with the visible\n   (including anonymized) recipients of\
    \ the SIP request.  The <entry>\n   element in the URI list MAY also include a\
    \ 'copyControl' and 'count'\n   attributes, as specified in Section 4.\n   On\
    \ sending a SIP request that contains a recipient-history list, if\n   the intended\
    \ recipient does not support this specification, the SIP\n   request should not\
    \ fail.  In order to ensure successful receipt of\n   the SIP requests that include\
    \ 'recipient-list-history' bodies, User\n   Agents (such as URI-list servers)\
    \ that build SIP requests with the\n   Content-Disposition header field set to\
    \ 'recipient-list-history'\n   SHOULD add a \"handling\" parameter [RFC3204] set\
    \ to \"optional\".\n   Otherwise, the SIP request could fail and never be received\
    \ by the\n   intended recipient.\n   Even though \"Message Body Handling in SIP\"\
    \ [SIP_BODY] mandates\n   support for multipart bodies, legacy recipients may\
    \ not support them.\n   In such a case, if the request sent by the relay to the\
    \ recipient\n   needs to contain another body (e.g., a MESSAGE request carrying\
    \ a\n   message in its body), the relay will not be able to use this\n   extension\
    \ because the recipient would not be able to process a\n   multipart body with\
    \ the original body plus the 'recipient-list-\n   history' body.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   RFC 5363 [RFC5363] discusses issues related to\
    \ SIP URI-list services.\n   Implementations of this specification MUST follow\
    \ the security-\n   related rules in RFC 5363 [RFC5363].  These rules include\
    \ opt-in\n   lists and mandatory authentication and authorization of clients.\n\
    \   User Agent Clients SHOULD NOT hand SIP requests containing URI-list\n   services\
    \ to unauthenticated and untrusted parties.  This is to avoid\n   man-in-the-middle\
    \ attacks or acquiring URI lists for performing spam\n   attacks.\n   URI lists\
    \ may contain private information, such as SIP URIs.  It is\n   therefore not\
    \ desirable that these URI lists are known by third\n   parties.  Eavesdroppers\
    \ are able to watch URI lists contained in SIP\n   requests unless the SIP message\
    \ is sent over a secured channel, by\n   using any of the available SIP mechanisms,\
    \ such as Transport Layer\n   Security (TLS) [RFC4346], or unless the URI-list\
    \ body itself is\n   encrypted with, e.g., S/MIME [RFC3851].  Therefore, it is\
    \ RECOMMENDED\n   that URI-list bodies are encrypted with S/MIME [RFC3851] or\
    \ that the\n   SIP request is encrypted with TLS [RFC4346] or any other suitable\n\
    \   encryption mechanism.\n   Note that this URI list does not indicate the actual\
    \ participants in\n   the session.  It indicates only the URIs invited and that\
    \ might\n   accept the request.  It does not assert that these parties actually\n\
    \   exist, that they are reachable at the given URI, or that they have\n   accepted\
    \ the invitation.  No inferences about billing should be made\n   from this information.\
    \  It is subject to spoofing by loading the list\n   with falsified content.\n\
    \   Issuers of SIP request use the \"bcc\" copy control attribute described\n\
    \   in Section 4 to facilitate sending SIP requests to recipients without\n  \
    \ revealing the URIs of one or more of the other recipients.\n   Mishandling this\
    \ use of \"bcc\" copy control has implications for\n   confidential information\
    \ that might be revealed, which could\n   eventually lead to security problems\
    \ through knowledge of even the\n   existence of a particular URI.  For example,\
    \ if using the first\n   method described in Section 4, where the \"bcc\" tagged\
    \ URIs are\n   removed from the recipient-history list, blind recipients have\
    \ no\n   explicit indication that they have been sent a blind copy of the SIP\n\
    \   request, except insofar as their URI does not appear in the\n   recipient-history\
    \ list.  Because of this, one of the blind URIs could\n   potentially send a reply\
    \ to all of the shown recipients and\n   accidentally reveal that the message\
    \ went to the blind recipient.\n   When the second method from Section 4 is used,\
    \ the blind recipient's\n   address appears in the recipient-history list of a\
    \ separate copy of\n   the list.  If the \"bcc\" tagged URI sent contains all\
    \ of the \"bcc\"\n   tagged URIs, all of the \"bcc\" recipients will be seen by\
    \ each \"bcc\"\n   recipient.  Even if a separate message is sent to each \"bcc\"\
    \n   recipient with only the individual's URI, implementations still need\n  \
    \ to be careful to process replies to the message as per Section 4 so\n   as not\
    \ to accidentally reveal the blind recipient to other\n   recipients.\n"
- title: 9.  IANA Considerations
  contents:
  - "9.  IANA Considerations\n   IANA has made registrations according to the following\
    \ subsections: a\n   new disposition type, a new XML namespace, and a new XML\
    \ schema.\n"
- title: 9.1.  Disposition Type Registration
  contents:
  - "9.1.  Disposition Type Registration\n   Section 7 defines a new 'recipient-list-history'\
    \ value of the Mail\n   Content Disposition Values registry.  This value has been\
    \ registered\n   in the IANA registry of Mail Content Disposition Values with\
    \ the\n   following registration data:\n   +------------------------+------------------------------+-----------+\n\
    \   | Name                   | Description                  | Reference |\n  \
    \ +------------------------+------------------------------+-----------+\n   |\
    \ recipient-list-history | the body contains a list of  | [RFC5364] |\n   |  \
    \                      | URIs that indicates the      |           |\n   |    \
    \                    | recipients of the request    |           |\n   +------------------------+------------------------------+-----------+\n\
    \    Table 1: Registration of the 'recipient-list-history' Mail Content\n    \
    \                         Disposition Value\n"
- title: 9.2.  XML Namespace Registration
  contents:
  - "9.2.  XML Namespace Registration\n   This section registers a new XML namespace\
    \ in the IANA XML registry,\n   as per the guidelines in RFC 3688 [RFC3688].\n\
    \   URI: The URI for this namespace is urn:ietf:params:xml:ns:copycontrol\n  \
    \ Registrant Contact: IETF SIPPING working group (sipping@ietf.org),\n   Miguel\
    \ Garcia-Martin (miguel.a.garcia@ericsson.com).\n   XML:\n         BEGIN\n   \
    \      <?xml version=\"1.0\"?>\n         <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML\
    \ Basic 1.0//EN\"\n           \"http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd\"\
    >\n         <html xmlns=\"http://www.w3.org/1999/xhtml\">\n         <head>\n \
    \          <meta http-equiv=\"content-type\"\n              content=\"text/html;charset=iso-8859-1\"\
    />\n           <title>Copy Control Namespace</title>\n         </head>\n     \
    \    <body>\n           <h1>Namespace for the Copy Control Attribute Extension\n\
    \           in Resource Lists</h1>\n           <h2>urn:ietf:params:xml:ns:copycontrol</h2>\n\
    \           <p>See <a href=\"http://www.rfc-editor.org/rfc/rfc5364.txt\">\n  \
    \             RFC5364</a>.</p>\n         </body>\n         </html>\n         END\n"
- title: 9.3.  XML Schema Registration
  contents:
  - "9.3.  XML Schema Registration\n   This section registers a new XML schema in\
    \ the IANA XML registry per\n   the procedures in RFC 3688 [RFC3688].\n   URI:\
    \ urn:ietf:params:xml:schema:copycontrol\n   Registrant Contact: IETF SIPPING\
    \ working group (sipping@ietf.org),\n   Miguel Garcia-Martin (miguel.a.garcia@ericsson.com).\n\
    \   The XML for this schema can be found as the sole content of\n   Section 5.\n"
- title: 10.  Acknowledgments
  contents:
  - "10.  Acknowledgments\n   Thanks to Dean Willis, Jari Urpalainen, Pekka Kuure,\
    \ Atsushi Sato,\n   Brian Rosen, Mary Barnes, James Polk, Brian E. Carpenter,\
    \ and Chris\n   Newman for reviewing this document and providing helpful comments.\n"
- title: 11.  References
  contents:
  - '11.  References

    '
- title: 11.1.  Normative References
  contents:
  - "11.1.  Normative References\n   [RFC2119]   Bradner, S., \"Key words for use\
    \ in RFCs to Indicate\n               Requirement Levels\", BCP 14, RFC 2119,\
    \ March 1997.\n   [RFC2183]   Troost, R., Dorner, S., and K. Moore, \"Communicating\n\
    \               Presentation Information in Internet Messages: The\n         \
    \      Content-Disposition Header Field\", RFC 2183, August 1997.\n   [RFC3204]\
    \   Zimmerer, E., Peterson, J., Vemuri, A., Ong, L., Audet,\n               F.,\
    \ Watson, M., and M. Zonoun, \"MIME media types for ISUP\n               and QSIG\
    \ Objects\", RFC 3204, December 2001.\n   [RFC3261]   Rosenberg, J., Schulzrinne,\
    \ H., Camarillo, G., Johnston,\n               A., Peterson, J., Sparks, R., Handley,\
    \ M., and E.\n               Schooler, \"SIP: Session Initiation Protocol\", RFC\
    \ 3261,\n               June 2002.\n   [RFC3688]   Mealling, M., \"The IETF XML\
    \ Registry\", BCP 81, RFC 3688,\n               January 2004.\n   [RFC3851]  \
    \ Ramsdell, B., \"Secure/Multipurpose Internet Mail\n               Extensions\
    \ (S/MIME) Version 3.1 Message Specification\",\n               RFC 3851, July\
    \ 2004.\n   [RFC4346]   Dierks, T. and E. Rescorla, \"The Transport Layer Security\n\
    \               (TLS) Protocol Version 1.1\", RFC 4346, April 2006.\n   [RFC4826]\
    \   Rosenberg, J., \"Extensible Markup Language (XML) Formats\n              \
    \ for Representing Resource Lists\", RFC 4826, May 2007.\n   [RFC5363]   Camarillo,\
    \ G. and A.B. Roach, \"Framework and Security\n               Considerations for\
    \ Session Initiation Protocol (SIP) URI-\n               List Services\", RFC\
    \ 5363, October 2008.\n"
- title: 11.2.  Informative References
  contents:
  - "11.2.  Informative References\n   [RFC2822]   Resnick, P., \"Internet Message\
    \ Format\", RFC 2822,\n               April 2001.\n   [RFC5366]   Camarillo, G.\
    \ and A. Johnston, \"Conference Establishment\n               Using Request-Contained\
    \ Lists in the Session Initiation\n               Protocol (SIP)\", RFC 5366,\
    \ October 2008.\n   [RFC5365]   Garcia-Martin, M. and G. Camarillo, \"Multiple-Recipient\n\
    \               MESSAGE Requests in the Session Initiation Protocol\n        \
    \       (SIP)\", RFC 5365, October 2008.\n   [SIP_BODY]  Camarillo, G., \"Message\
    \ Body Handling in the Session\n               Initiation Protocol (SIP)\", Work\
    \ in Progress,\n               August 2008.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Miguel A. Garcia-Martin\n   Ericsson\n   Via de los Poblados\
    \ 13\n   Madrid  28033\n   Spain\n   EMail: miguel.a.garcia@ericsson.com\n   Gonzalo\
    \ Camarillo\n   Ericsson\n   Hirsalantie 11\n   Jorvas  02420\n   Finland\n  \
    \ EMail: Gonzalo.Camarillo@ericsson.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2008).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
