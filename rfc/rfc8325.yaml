- contents:
  - '                    Mapping Diffserv to IEEE 802.11

    '
  title: __initial_text__
- contents:
  - "Abstract\n   As Internet traffic is increasingly sourced from and destined to\n
    \  wireless endpoints, it is crucial that Quality of Service (QoS) be\n   aligned
    between wired and wireless networks; however, this is not\n   always the case
    by default.  This document specifies a set of\n   mappings from Differentiated
    Services Code Point (DSCP) to IEEE\n   802.11 User Priority (UP) to reconcile
    the marking recommendations\n   offered by the IETF and the IEEE so as to maintain
    consistent QoS\n   treatment between wired and IEEE 802.11 wireless networks.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    7841.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   https://www.rfc-editor.org/info/rfc8325.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2018 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (https://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .
    . . . . .   3\n     1.1.  Related Work  . . . . . . . . . . . . . . . . . . .
    . . .   3\n     1.2.  Interaction with RFC 7561 . . . . . . . . . . . . . . .
    .   4\n     1.3.  Applicability Statement . . . . . . . . . . . . . . . . .   4\n
    \    1.4.  Document Organization . . . . . . . . . . . . . . . . . .   5\n     1.5.
    \ Requirements Language . . . . . . . . . . . . . . . . . .   5\n     1.6.  Terminology
    Used in This Document . . . . . . . . . . . .   6\n   2.  Service Comparison and
    Default Interoperation of Diffserv and\n       IEEE 802.11 . . . . . . . . . .
    . . . . . . . . . . . . . . .   9\n     2.1.  Diffserv Domain Boundaries  . .
    . . . . . . . . . . . . .   9\n     2.2.  EDCF Queuing  . . . . . . . . . . .
    . . . . . . . . . . .  10\n     2.3.  Default DSCP-to-UP Mappings and Conflicts
    . . . . . . . .  10\n     2.4.  Default UP-to-DSCP Mappings and Conflicts . .
    . . . . . .  11\n   3.  Recommendations for Capabilities of Wireless Device Marking\n
    \      and Mapping . . . . . . . . . . . . . . . . . . . . . . . . .  13\n   4.
    \ Recommendations for DSCP-to-UP Mapping  . . . . . . . . . . .  13\n     4.1.
    \ Network Control Traffic . . . . . . . . . . . . . . . . .  14\n       4.1.1.
    \ Network Control Protocols . . . . . . . . . . . . . .  14\n       4.1.2.  Operations,
    Administration, and  Maintenance (OAM)  .  15\n     4.2.  User Traffic  . . .
    . . . . . . . . . . . . . . . . . . .  15\n       4.2.1.  Telephony . . . . .
    . . . . . . . . . . . . . . . . .  15\n       4.2.2.  Signaling . . . . . . .
    . . . . . . . . . . . . . . .  16\n       4.2.3.  Multimedia Conferencing . .
    . . . . . . . . . . . . .  17\n       4.2.4.  Real-Time Interactive . . . . .
    . . . . . . . . . . .  17\n       4.2.5.  Multimedia Streaming  . . . . . . .
    . . . . . . . . .  17\n       4.2.6.  Broadcast Video . . . . . . . . . . . .
    . . . . . . .  18\n       4.2.7.  Low-Latency Data  . . . . . . . . . . . . .
    . . . . .  18\n       4.2.8.  High-Throughput Data  . . . . . . . . . . . . .
    . . .  18\n       4.2.9.  Standard  . . . . . . . . . . . . . . . . . . . . .
    .  19\n       4.2.10. Low-Priority Data . . . . . . . . . . . . . . . . . .  20\n
    \    4.3.  Summary of Recommendations for DSCP-to-UP Mapping . . . .  20\n   5.
    \ Recommendations for Upstream Mapping and Marking  . . . . . .  21\n     5.1.
    \ Upstream DSCP-to-UP Mapping within the Wireless Client\n           Operating
    System  . . . . . . . . . . . . . . . . . . . .  22\n     5.2.  Upstream UP-to-DSCP
    Mapping at the Wireless AP  . . . . .  22\n     5.3.  Upstream DSCP-Passthrough
    at the Wireless AP  . . . . . .  23\n     5.4.  Upstream DSCP Marking at the Wireless
    AP  . . . . . . . .  24\n   6.  Overview of IEEE 802.11 QoS . . . . . . . . .
    . . . . . . . .  24\n     6.1.  Distributed Coordination Function (DCF) . . .
    . . . . . .  25\n       6.1.1.  Slot Time . . . . . . . . . . . . . . . . . .
    . . . .  25\n       6.1.2.  Interframe Space (IFS)  . . . . . . . . . . . . .
    . .  26\n       6.1.3.  Contention Window (CW)  . . . . . . . . . . . . . . .
    \ 26\n     6.2.  Hybrid Coordination Function (HCF)  . . . . . . . . . . .  27\n
    \      6.2.1.  User Priority (UP)  . . . . . . . . . . . . . . . . .  27\n       6.2.2.
    \ Access Category (AC)  . . . . . . . . . . . . . . . .  28\n       6.2.3.  Arbitration
    Interframe Space (AIFS) . . . . . . . . .  29\n       6.2.4.  Access Category
    CWs . . . . . . . . . . . . . . . . .  29\n     6.3.  IEEE 802.11u QoS Map Set
    \ . . . . . . . . . . . . . . . .  30\n   7.  IANA Considerations . . . . . .
    . . . . . . . . . . . . . . .  31\n   8.  Security Considerations . . . . . .
    . . . . . . . . . . . . .  31\n     8.1.  Security Recommendations for General
    QoS  . . . . . . . .  31\n     8.2.  Security Recommendations for WLAN QoS . .
    . . . . . . . .  32\n   9.  References  . . . . . . . . . . . . . . . . . . .
    . . . . . .  34\n     9.1.  Normative References  . . . . . . . . . . . . . .
    . . . .  34\n     9.2.  Informative References  . . . . . . . . . . . . . . .
    . .  35\n   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .
    \ 37\n   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  37\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   The wireless medium defined by IEEE 802.11 [IEEE.802.11-2016]
    has\n   become the preferred medium for endpoints connecting to business and\n
    \  private networks.  However, it presents several design challenges for\n   ensuring
    end-to-end QoS.  Some of these challenges relate to the\n   nature of the IEEE
    802.11 Radio Frequency (RF) medium itself, being a\n   half-duplex and shared
    medium, while other challenges relate to the\n   fact that the IEEE 802.11 standard
    is not administered by the same\n   standards body as IP networking standards.
    \ While the IEEE has\n   developed tools to enable QoS over wireless networks,
    little guidance\n   exists on how to maintain consistent QoS treatment between
    wired IP\n   networks and wireless IEEE 802.11 networks.  The purpose of this\n
    \  document is to provide such guidance.\n"
  - contents:
    - "1.1.  Related Work\n   Several RFCs outline Diffserv QoS recommendations over
      IP networks,\n   including:\n   RFC 2474    Specifies the Diffserv Codepoint
      Field.  This RFC also\n               details Class Selectors, as well as the
      Default\n               Forwarding (DF) PHB for best effort traffic.  The Default\n
      \              Forwarding PHB is referred to as the Default PHB in RFC\n               2474.\n
      \  RFC 2475    Defines a Diffserv architecture.\n   RFC 3246    Specifies the
      Expedited Forwarding (EF) Per-Hop Behavior\n               (PHB).\n   RFC 2597
      \   Specifies the Assured Forwarding (AF) PHB.\n   RFC 3662    Specifies a Lower-Effort
      Per-Domain Behavior (PDB).\n   RFC 4594    Presents configuration guidelines
      for Diffserv service\n               classes.\n   RFC 5127    Presents the aggregation
      of Diffserv service classes.\n   RFC 5865    Specifies a DSCP for capacity-admitted
      traffic.\n   Note: [RFC4594] is intended to be viewed as a framework for\n   supporting
      Diffserv in any network, including wireless networks;\n   thus, it describes
      different types of traffic expected in IP networks\n   and provides guidance
      as to what DSCP marking(s) should be associated\n   with each traffic type.
      \ As such, this document draws heavily on\n   [RFC4594], as well as [RFC5127],
      and [RFC8100].\n   In turn, the relevant standard for wireless QoS is IEEE 802.11,
      which\n   is being progressively updated; at the time of writing, the current\n
      \  version of which is [IEEE.802.11-2016].\n"
    title: 1.1.  Related Work
  - contents:
    - "1.2.  Interaction with RFC 7561\n   There is also a recommendation from the
      Global System for Mobile\n   Communications Association (GSMA) on DSCP-to-UP
      Mapping for IP Packet\n   eXchange (IPX), specifically their Guidelines for
      IPX Provider\n   networks [GSMA-IPX_Guidelines].  These GSMA Guidelines were
      developed\n   without reference to existing IETF specifications for various\n
      \  services, referenced in Section 1.1.  In turn, [RFC7561] was written\n   based
      on these GSMA Guidelines, as explicitly called out in\n   [RFC7561], Section
      4.2.  Thus, [RFC7561] conflicts with the overall\n   Diffserv traffic-conditioning
      service plan, both in the services\n   specified and the codepoints specified
      for them.  As such, these two\n   plans cannot be normalized.  Rather, as discussed
      in [RFC2474],\n   Section 2, the two domains (IEEE 802.11 and GSMA) are different\n
      \  Differentiated Services Domains separated by a Differentiated\n   Services
      Boundary.  At that boundary, codepoints from one domain are\n   translated to
      codepoints for the other, and maybe to Default (zero)\n   if there is no corresponding
      service to translate to.\n"
    title: 1.2.  Interaction with RFC 7561
  - contents:
    - "1.3.  Applicability Statement\n   This document is applicable to the use of
      Differentiated Services\n   that interconnect with IEEE 802.11 wireless LANs
      (referred to as\n   Wi-Fi, throughout this document, for simplicity).  These
      guidelines\n   are applicable whether the wireless access points (APs) are deployed\n
      \  in an autonomous manner, managed by (centralized or distributed) WLAN\n   controllers,
      or some hybrid deployment option.  This is because, in\n   all these cases,
      the wireless AP is the bridge between wired and\n   wireless media.\n   This
      document applies to IP networks using Wi-Fi infrastructure at\n   the link layer.
      \ Such networks typically include wired LANs with\n   wireless APs at their
      edges; however, such networks can also include\n   Wi-Fi backhaul, wireless
      mesh solutions, or any other type of AP-to-\n   AP wireless network that extends
      the wired-network infrastructure.\n"
    title: 1.3.  Applicability Statement
  - contents:
    - "1.4.  Document Organization\n   This document is organized as follows:\n   Section
      1 introduces the wired-to-wireless QoS challenge, references\n   related work,
      outlines the organization of the document, and\n   specifies both the requirements
      language and the terminology used in\n   this document.\n   Section 2 begins
      the discussion with a comparison of IETF Diffserv\n   QoS and Wi-Fi QoS standards
      and highlights discrepancies between\n   these that require reconciliation.\n
      \  Section 3 presents the marking and mapping capabilities that wireless\n   APs
      and wireless endpoint devices are recommended to support.\n   Section 4 presents
      DSCP-to-UP mapping recommendations for each of the\n   [RFC4594] service classes,
      which are primarily applicable in the\n   downstream (wired-to-wireless) direction.\n
      \  Section 5, in turn, considers upstream (wireless-to-wired) QoS\n   options,
      their respective merits and recommendations.\n   Section 6 (in the form of an
      Appendix) presents a brief overview of\n   how QoS is achieved over IEEE 802.11
      wireless networks, given the\n   shared, half-duplex nature of the wireless
      medium.\n   Section 7 contains IANA considerations.\n   Section 8 presents security
      considerations relative to DSCP-to-UP\n   mapping, UP-to-DSCP mapping, and re-marking.\n"
    title: 1.4.  Document Organization
  - contents:
    - "1.5.  Requirements Language\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\",
      \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT
      RECOMMENDED\", \"MAY\", and\n   \"OPTIONAL\" in this document are to be interpreted
      as described in BCP\n   14 [RFC2119] [RFC8174] when, and only when, they appear
      in all\n   capitals, as shown here.\n"
    title: 1.5.  Requirements Language
  - contents:
    - "1.6.  Terminology Used in This Document\n   Key terminology used in this document
      includes:\n   AC:  Access Category.  A label for the common set of enhanced\n
      \     distributed channel access (EDCA) parameters that are used by a\n      QoS
      station (STA) to contend for the channel in order to transmit\n      medium
      access control (MAC) service data units (MSDUs) with\n      certain priorities;
      see [IEEE.802.11-2016], Section 3.2.\n   AIFS:  Arbitration Interframe Space.
      \ Interframe space used by QoS\n      stations before transmission of data and
      other frame types defined\n      by [IEEE.802.11-2016], Section 10.3.2.3.6.\n
      \  AP:  Access Point.  An entity that contains one station (STA) and\n      provides
      access to the distribution services, via the wireless\n      medium (WM) for
      associated STAs.  An AP comprises a STA and a\n      distribution system access
      function (DSAF); see\n      [IEEE.802.11-2016], Section 3.1.\n   BSS:  Basic
      Service Set. Informally, a wireless cell; formally, a set\n      of stations
      that have successfully synchronized using the JOIN\n      service primitives
      and one STA that has used the START primitive.\n      Alternatively, a set of
      STAs that have used the START primitive\n      specifying matching mesh profiles
      where the match of the mesh\n      profiles has been verified via the scanning
      procedure.  Membership\n      in a BSS does not imply that wireless communication
      with all other\n      members of the BSS is possible.  See the definition in\n
      \     [IEEE.802.11-2016], Section 3.1.\n   Contention Window:  See CW.\n   CSMA/CA:
      \ Carrier Sense Multiple Access with Collision Avoidance.  A\n      MAC method
      in which carrier sensing is used, but nodes attempt to\n      avoid collisions
      by transmitting only when the channel is sensed\n      to be \"idle\".  When
      these do transmit, nodes transmit their packet\n      data in its entirety.\n
      \  CSMA/CD:  Carrier Sense Multiple Access with Collision Detection.  A\n      MAC
      method (used most notably in early Ethernet technology) for\n      local area
      networking.  It uses a carrier-sensing scheme in which\n      a transmitting
      station detects collisions by sensing transmissions\n      from other stations
      while transmitting a frame.  When this\n      collision condition is detected,
      the station stops transmitting\n      that frame, transmits a jam signal, and
      then waits for a random\n      time interval before trying to resend the frame.\n
      \  CW:  Contention Window.  Limits a CWMin and CWMax, from which a\n      random
      backoff is computed.\n   CWMax:  Contention Window Maximum.  The maximum value
      (in units of\n      Slot Time) that a CW can take.\n   CWMin:  Contention Window
      Minimum.  The minimum value that a CW can\n      take.\n   DCF:  Distributed
      Coordinated Function.  A class of coordination\n      function where the same
      coordination function logic is active in\n      every station (STA) in the BSS
      whenever the network is in\n      operation.\n   DIFS:  Distributed (Coordination
      Function) Interframe Space.  A unit\n      of time during which the medium has
      to be detected as idle before\n      a station should attempt to send frames,
      as per\n      [IEEE.802.11-2016], Section 10.3.2.3.5.\n   DSCP:  Differentiated
      Service Code Point [RFC2474] and [RFC2475].\n      The DSCP is carried in the
      first 6 bits of the IPv4 Type of\n      Service (TOS) field and the IPv6 Traffic
      Class field (the\n      remaining 2 bits are used for IP Explicit Congestion
      Notification\n      (ECN) [RFC3168]).\n   EIFS:  Extended Interframe Space.
      \ A unit of time that a station has\n      to defer before transmitting a frame
      if the previous frame\n      contained an error, as per [IEEE.802.11-2016],
      Section 10.3.2.3.7.\n   HCF:  Hybrid Coordination Function.  A coordination
      function that\n      combines and enhances aspects of the contention-based and\n
      \     contention-free access methods to provide QoS stations (STAs) with\n      prioritized
      and parameterized QoS access to the WM, while\n      continuing to support non-QoS
      STAs for best-effort transfer; see\n      [IEEE.802.11-2016], Section 3.1.\n
      \  IFS:  Interframe Space.  Period of silence between transmissions over\n      IEEE
      802.11 networks.  [IEEE.802.11-2016] describes several types\n      of Interframe
      Spaces.\n   Random Backoff Timer:  A pseudorandom integer period of time (in\n
      \     units of Slot Time) over the interval (0,CW), where CWmin is less\n      than
      or equal to CW, which in turn is less than or equal to CWMax.\n      Stations
      desiring to initiate transfer of data frames and/or\n      management frames
      using the DCF shall invoke the carrier sense\n      mechanism to determine the
      busy-or-idle state of the medium.  If\n      the medium is busy, the STA shall
      defer until the medium is\n      determined to be idle without interruption
      for a period of time\n      equal to DIFS when the last frame detected on the
      medium was\n      received correctly or after the medium is determined to be
      idle\n      without interruption for a period of time equal to EIFS when the\n
      \     last frame detected on the medium was not received correctly.\n      After
      this DIFS or EIFS medium idle time, the STA shall then\n      generate a random
      backoff period for an additional deferral time\n      before transmitting.  See
      [IEEE.802.11-2016], Section 10.3.3.\n   RF:  Radio Frequency.\n   SIFS:  Short
      Interframe Space.  An IFS used before transmission of\n      specific frames
      as defined in [IEEE.802.11-2016],\n      Section 10.3.2.3.3.\n   Slot Time:
      \ A unit of time used to count time intervals in IEEE\n      802.11 networks;
      it is defined in [IEEE.802.11-2016],\n      Section 10.3.2.13.\n   Trust:  From
      a QoS-perspective, \"trust\" refers to the accepting of\n      the QoS markings
      of a packet by a network device.  Trust is\n      typically extended at Layer
      3 (by accepting the DSCP), but may\n      also be extended at lower layers,
      such as at Layer 2 by accepting\n      UP markings.  For example, if an AP is
      configured to trust DSCP\n      markings and it receives a packet marked EF,
      then it would treat\n      the packet with the Expedite Forwarding PHB and propagate
      the EF\n      marking value (DSCP 46) as it transmits the packet.\n      Alternatively,
      if a network device is configured to operate in an\n      untrusted manner,
      then it would re-mark packets as these entered\n      the device, typically
      to DF (or to a different marking value at\n      the network administrator's
      preference).  Note: The terms\n      \"trusted\" and \"untrusted\" are used
      extensively in [RFC4594].\n   UP:  User Priority.  A value associated with an
      MSDU that indicates\n      how the MSDU is to be handled.  The UP is assigned
      to an MSDU in\n      the layers above the MAC; see [IEEE.802.11-2016], Section
      3.1.\n      The UP defines a level of priority for the associated frame, on
      a\n      scale of 0 to 7.\n   Wi-Fi:  An interoperability certification defined
      by the Wi-Fi\n      Alliance.  However, this term is commonly used, including
      in the\n      present document, to be the equivalent of IEEE 802.11.\n   Wireless:
      \ In the context of this document, \"wireless\" refers to the\n      media defined
      in IEEE 802.11 [IEEE.802.11-2016], and not 3G/4G LTE\n      or any other radio
      telecommunications specification.\n"
    title: 1.6.  Terminology Used in This Document
  title: 1.  Introduction
- contents:
  - "2.  Service Comparison and Default Interoperation of Diffserv and\n    IEEE 802.11\n
    \  (Section 6 provides a brief overview of IEEE 802.11 QoS.)\n   The following
    comparisons between IEEE 802.11 and Diffserv services\n   should be noted:\n      [IEEE.802.11-2016]
    does not support an EF PHB service [RFC3246],\n      as it is not possible to
    assure that a given access category will\n      be serviced with strict priority
    over another (due to the random\n      element within the contention process)\n
    \     [IEEE.802.11-2016] does not support an AF PHB service [RFC2597],\n      again
    because it is not possible to assure that a given access\n      category will
    be serviced with a minimum amount of assured\n      bandwidth (due to the non-deterministic
    nature of the contention\n      process)\n      [IEEE.802.11-2016] loosely supports
    a Default PHB ([RFC2474]) via\n      the Best Effort Access Category (AC_BE)\n
    \     [IEEE.802.11-2016] loosely supports a Lower Effort PDB service\n      ([RFC3662])
    via the Background Access Category (AC_BK)\n   As such, these high-level considerations
    should be kept in mind when\n   mapping from Diffserv to [IEEE.802.11-2016] (and
    vice versa);\n   however, APs may or may not always be positioned at Diffserv
    domain\n   boundaries, as will be discussed next.\n"
  - contents:
    - "2.1.  Diffserv Domain Boundaries\n   It is important to recognize that the
      wired-to-wireless edge may or\n   may not function as an edge of a Diffserv
      domain or a domain\n   boundary.\n   In most commonly deployed WLAN models,
      the wireless AP represents not\n   only the edge of the Diffserv domain, but
      also the edge of the\n   network infrastructure itself.  As such, only client
      endpoint devices\n   (and no network infrastructure devices) are downstream
      from the\n   access points in these deployment models.  Note: security\n   considerations
      and recommendations for hardening such Wi-Fi-at-the-\n   edge deployment models
      are detailed in Section 8; these\n   recommendations include mapping network
      control protocols (which are\n   not used downstream from the AP in this deployment
      model) to UP 0.\n   Alternatively, in other deployment models, such as Wi-Fi
      backhaul,\n   wireless mesh infrastructures, wireless AP-to-AP deployments,
      or in\n   cases where a Wi-Fi link connects to a device providing service via\n
      \  another technology (e.g., Wi-Fi to Bluetooth or Zigbee router), the\n   wireless
      AP extends the network infrastructure and thus, typically,\n   the Diffserv
      domain.  In such deployments, both client devices and\n   infrastructure devices
      may be expected downstream from the APs, and,\n   as such, network control protocols
      are RECOMMENDED to be mapped to UP\n   7 in this deployment model, as is discussed
      in Section 4.1.1.\n   Thus, as can be seen from these two examples, the QoS
      treatment of\n   packets at the AP will depend on the position of the AP in
      the\n   network infrastructure and on the WLAN deployment model.\n   However,
      regardless of whether or not the AP is at the Diffserv\n   boundary, marking-specific
      incompatibilities exist from Diffserv to\n   802.11 (and vice versa) that must
      be reconciled, as will be discussed\n   next.\n"
    title: 2.1.  Diffserv Domain Boundaries
  - contents:
    - "2.2.  EDCF Queuing\n   [IEEE.802.11-2016] displays a reference implementation
      queuing model\n   in Figure 10-24, which depicts four transmit queues, one per
      access\n   category.\n   However, in practical implementations, it is common
      for WLAN network\n   equipment vendors to implement dedicated transmit queues
      on a per-UP\n   (versus a per-AC) basis, which are then dequeued into their\n
      \  associated AC in a preferred (or even in a strict priority manner).\n   For
      example, it is common for vendors to dequeue UP 5 ahead of UP 4\n   to the hardware
      performing the EDCA function (EDCAF) for the Video\n   Access Category (AC_VI).\n
      \  Some of the recommendations made in Section 4 make reference to this\n   common
      implementation model of queuing per UP.\n"
    title: 2.2.  EDCF Queuing
  - contents:
    - "2.3.  Default DSCP-to-UP Mappings and Conflicts\n   While no explicit guidance
      is offered in mapping (6-Bit) Layer 3 DSCP\n   values to (3-Bit) Layer 2 markings
      (such as IEEE 802.1D, 802.1p or\n   802.11e), a common practice in the networking
      industry is to map\n   these by what we will refer to as \"default DSCP-to-UP
      mapping\" (for\n   lack of a better term), wherein the three Most Significant
      Bits\n   (MSBs) of the DSCP are used as the corresponding L2 markings.\n   Note:
      There are mappings provided in [IEEE.802.11-2016], Annex V\n   Tables V-1 and
      V2, but it bears mentioning that these mappings are\n   provided as examples
      (as opposed to explicit recommendations).\n   Furthermore, some of these mappings
      do not align with the intent and\n   recommendations expressed in [RFC4594],
      as will be discussed in this\n   and the following section (Section 2.4).\n
      \  However, when this default DSCP-to-UP mapping method is applied to\n   packets
      marked per recommendations in [RFC4594] and destined to\n   802.11 WLAN clients,
      it will yield a number of inconsistent QoS\n   mappings, specifically:\n   o
      \ Voice (EF-101110) will be mapped to UP 5 (101), and treated in the\n      Video
      Access Category (AC_VI) rather than the Voice Access\n      Category (AC_VO),
      for which it is intended\n   o  Multimedia Streaming (AF3-011xx0) will be mapped
      to UP 3 (011) and\n      treated in the Best Effort Access Category (AC_BE)
      rather than the\n      Video Access Category (AC_VI), for which it is intended\n
      \  o  Broadcast Video (CS3-011000) will be mapped to UP 3 (011) and\n      treated
      in the Best Effort Access Category (AC_BE) rather than the\n      Video Access
      Category (AC_VI), for which it is intended\n   o  OAM traffic (CS2-010000) will
      be mapped to UP 2 (010) and treated\n      in the Background Access Category
      (AC_BK), which is not the intent\n      expressed in [RFC4594] for this service
      class\n   It should also be noted that while [IEEE.802.11-2016] defines an\n
      \  intended use for each access category through the AC naming\n   convention
      (for example, UP 6 and UP 7 belong to AC_VO, the Voice\n   Access Category),
      [IEEE.802.11-2016] does not:\n   o  define how upper-layer markings (such as
      DSCP) should map to UPs\n      (and, hence, to ACs)\n   o  define how UPs should
      translate to other mediums' Layer 2 QoS\n      markings\n   o  strictly restrict
      each access category to applications reflected\n      in the AC name\n"
    title: 2.3.  Default DSCP-to-UP Mappings and Conflicts
  - contents:
    - "2.4.  Default UP-to-DSCP Mappings and Conflicts\n   In the opposite direction
      of flow (the upstream direction, that is,\n   from wireless-to-wired), many
      APs use what we will refer to as\n   \"default UP-to-DSCP mapping\" (for lack
      of a better term), wherein\n   DSCP values are derived from UP values by multiplying
      the UP values\n   by 8 (i.e., shifting the three UP bits to the left and adding
      three\n   additional zeros to generate a DSCP value).  This derived DSCP value\n
      \  is then used for QoS treatment between the wireless AP and the\n   nearest
      classification and marking policy enforcement point (which\n   may be the centralized
      wireless LAN controller, relatively deep\n   within the network).  Alternatively,
      in the case where there is no\n   other classification and marking policy enforcement
      point, then this\n   derived DSCP value will be used on the remainder of the
      Internet\n   path.\n   It goes without saying that when six bits of marking
      granularity are\n   derived from three, then information is lost in translation.\n
      \  Servicing differentiation cannot be made for 12 classes of traffic\n   (as
      recommended in [RFC4594]), but for only eight (with one of these\n   classes
      being reserved for future use (i.e., UP 7, which maps to DSCP\n   CS7).\n   Such
      default upstream mapping can also yield several inconsistencies\n   with [RFC4594],
      including:\n   o  Mapping UP 6 (which would include Voice or Telephony traffic,
      see\n      [RFC4594]) to CS6, which [RFC4594] recommends for Network Control\n
      \  o  Mapping UP 4 (which would include Multimedia Conferencing and/or\n      Real-Time
      Interactive traffic, see [RFC4594]) to CS4, thus losing\n      the ability to
      differentiate between these two distinct service\n      classes, as recommended
      in [RFC4594], Sections 4.3 and 4.4\n   o  Mapping UP 3 (which would include
      Multimedia Streaming and/or\n      Broadcast Video traffic, see [RFC4594]) to
      CS3, thus losing the\n      ability to differentiate between these two distinct
      service\n      classes, as recommended in [RFC4594], Sections 4.5 and 4.6\n
      \  o  Mapping UP 2 (which would include Low-Latency Data and/or OAM\n      traffic,
      see [RFC4594]) to CS2, thus losing the ability to\n      differentiate between
      these two distinct service classes, as\n      recommended in [RFC4594], Sections
      4.7 and 3.3, and possibly\n      overwhelming the queues provisioned for OAM
      (which is typically\n      lower in capacity (being Network Control Traffic),
      as compared to\n      Low-Latency Data queues (being user traffic))\n   o  Mapping
      UP 1 (which would include High-Throughput Data and/or Low-\n      Priority Data
      traffic, see [RFC4594]) to CS1, thus losing the\n      ability to differentiate
      between these two distinct service\n      classes, as recommended in [RFC4594],
      Sections 4.8 and 4.10, and\n      causing legitimate business-relevant High-Throughput
      Data to\n      receive a [RFC3662] Lower-Effort PDB, for which it is not intended\n
      \  The following sections address these limitations and concerns in\n   order
      to reconcile [RFC4594] and [IEEE.802.11-2016].  First\n   downstream (wired-to-wireless)
      DSCP-to-UP mappings will be aligned\n   and then upstream (wireless-to-wired)
      models will be addressed.\n"
    title: 2.4.  Default UP-to-DSCP Mappings and Conflicts
  title: 2.  Service Comparison and Default Interoperation of Diffserv and
- contents:
  - "3.  Recommendations for Capabilities of Wireless Device Marking and\n    Mapping\n
    \  This document assumes and RECOMMENDS that all wireless APs (as the\n   interconnects
    between wired-and-wireless networks) support the\n   ability to:\n   o  mark DSCP,
    per Diffserv standards\n   o  mark UP, per the [IEEE.802.11-2016] standard\n   o
    \ support fully configurable mappings between DSCP and UP\n   o  process DSCP
    markings set by wireless endpoint devices\n   This document further assumes and
    RECOMMENDS that all wireless\n   endpoint devices support the ability to:\n   o
    \ mark DSCP, per Diffserv standards\n   o  mark UP, per the [IEEE.802.11-2016]
    standard\n   o  support fully configurable mappings between DSCP (set by\n      applications
    in software) and UP (set by the operating system and/\n      or wireless network
    interface hardware drivers)\n   Having made the assumptions and recommendations
    above, it bears\n   mentioning that, while the mappings presented in this document
    are\n   RECOMMENDED to replace the current common default practices (as\n   discussed
    in Sections 2.3 and 2.4), these mapping recommendations are\n   not expected to
    fit every last deployment model; as such, they MAY be\n   overridden by network
    administrators, as needed.\n"
  title: 3.  Recommendations for Capabilities of Wireless Device Marking and
- contents:
  - "4.  Recommendations for DSCP-to-UP Mapping\n   The following section specifies
    downstream (wired-to-wireless)\n   mappings between [RFC4594], \"Configuration
    Guidelines for Diffserv\n   Service Classes\" and [IEEE.802.11-2016].  As such,
    this section draws\n   heavily from [RFC4594], including service class definitions
    and\n   recommendations.\n   This section assumes [IEEE.802.11-2016] wireless
    APs and/or WLAN\n   controllers that support customizable, non-default DSCP-to-UP
    mapping\n   schemes.\n   This section also assumes that [IEEE.802.11-2016] APs
    and endpoint\n   devices differentiate UP markings with corresponding queuing
    and\n   dequeuing treatments, as described in Section 2.2.\n"
  - contents:
    - "4.1.  Network Control Traffic\n   Network Control Traffic is defined as packet
      flows that are essential\n   for stable operation of the administered network
      [RFC4594],\n   Section 3.  Network Control Traffic is different from user\n
      \  application control (signaling) that may be generated by some\n   applications
      or services.  Network Control Traffic MAY be split into\n   two service classes:\n
      \  o  Network Control, and\n   o  Operations, Administration, and Maintenance
      (OAM)\n"
    - contents:
      - "4.1.1.  Network Control Protocols\n   The Network Control service class is
        used for transmitting packets\n   between network devices (e.g., routers)
        that require control\n   (routing) information to be exchanged between nodes
        within the\n   administrative domain, as well as across a peering point between\n
        \  different administrative domains.\n   [RFC4594], Section 3.2, recommends
        that Network Control Traffic be\n   marked CS6 DSCP.  Additionally, as stated
        in [RFC4594], Section 3.1:\n   \"CS7 DSCP value SHOULD be reserved for future
        use, potentially for\n   future routing or control protocols.\"\n   By default
        (as described in Section 2.4), packets marked DSCP CS7\n   will be mapped
        to UP 7 and serviced within the Voice Access Category\n   (AC_VO).  This represents
        the RECOMMENDED mapping for CS7, that is,\n   packets marked to CS7 DSCP are
        RECOMMENDED to be mapped to UP 7.\n   However, by default (as described in
        Section 2.4), packets marked\n   DSCP CS6 will be mapped to UP 6 and serviced
        within the Voice Access\n   Category (AC_VO); such mapping and servicing is
        a contradiction to\n   the intent expressed in [RFC4594], Section 3.2.  As
        such, it is\n   RECOMMENDED to map Network Control Traffic marked CS6 to UP
        7 (per\n   [IEEE.802.11-2016], Section 10.2.4.2, Table 10-1), thereby admitting\n
        \  it to the Voice Access Category (AC_VO), albeit with a marking\n   distinguishing
        it from (data-plane) voice traffic.\n   It should be noted that encapsulated
        routing protocols for\n   encapsulated or overlay networks (e.g., VPN, Network
        Virtualization\n   Overlays, etc.) are not Network Control Traffic for any
        physical\n   network at the AP; hence, they SHOULD NOT be marked with CS6
        in the\n   first place.\n   Additionally, and as previously noted, the Security
        Considerations\n   section (Section 8) contains additional recommendations
        for hardening\n   Wi-Fi-at-the-edge deployment models, where, for example,
        network\n   control protocols are not expected to be sent nor received between\n
        \  APs and client endpoint devices that are downstream.\n"
      title: 4.1.1.  Network Control Protocols
    - contents:
      - "4.1.2.  Operations, Administration, and Maintenance (OAM)\n   The OAM (Operations,
        Administration, and Maintenance) service class\n   is recommended for OAM&P
        (Operations, Administration, and Maintenance\n   and Provisioning).  The OAM
        service class can include network\n   management protocols, such as SNMP,
        Secure Shell (SSH), TFTP, Syslog,\n   etc., as well as network services, such
        as NTP, DNS, DHCP, etc.\n   [RFC4594], Section 3.3, recommends that OAM traffic
        be marked CS2\n   DSCP.\n   By default (as described in Section 2.3), packets
        marked DSCP CS2\n   will be mapped to UP 2 and serviced with the Background
        Access\n   Category (AC_BK).  Such servicing is a contradiction to the intent\n
        \  expressed in [RFC4594], Section 3.3.  As such, it is RECOMMENDED that\n
        \  a non-default mapping be applied to OAM traffic, such that CS2 DSCP\n   is
        mapped to UP 0, thereby admitting it to the Best Effort Access\n   Category
        (AC_BE).\n"
      title: 4.1.2.  Operations, Administration, and Maintenance (OAM)
    title: 4.1.  Network Control Traffic
  - contents:
    - "4.2.  User Traffic\n   User traffic is defined as packet flows between different
      users or\n   subscribers.  It is the traffic that is sent to or from end-terminals\n
      \  and that supports a very wide variety of applications and services\n   [RFC4594],
      Section 4.\n   Network administrators can categorize their applications according
      to\n   the type of behavior that they require and MAY choose to support all\n
      \  or a subset of the defined service classes.\n"
    - contents:
      - "4.2.1.  Telephony\n   The Telephony service class is recommended for applications
        that\n   require real-time, very low delay, very low jitter, and very low\n
        \  packet loss for relatively constant-rate traffic sources (inelastic\n   traffic
        sources).  This service class SHOULD be used for IP telephony\n   service.
        \ The fundamental service offered to traffic in the Telephony\n   service
        class is minimum jitter, delay, and packet loss service up to\n   a specified
        upper bound.  [RFC4594], Section 4.1, recommends that\n   Telephony traffic
        be marked EF DSCP.\n   Traffic marked to DSCP EF will map by default (as described
        in\n   Section 2.3) to UP 5 and, thus, to the Video Access Category (AC_VI)\n
        \  rather than to the Voice Access Category (AC_VO), for which it is\n   intended.
        \ Therefore, a non-default DSCP-to-UP mapping is\n   RECOMMENDED, such that
        EF DSCP is mapped to UP 6, thereby admitting\n   it into the Voice Access
        Category (AC_VO).\n   Similarly, the VOICE-ADMIT DSCP (44 decimal / 101100
        binary)\n   described in [RFC5865] is RECOMMENDED to be mapped to UP 6, thereby\n
        \  admitting it also into the Voice Access Category (AC_VO).\n"
      title: 4.2.1.  Telephony
    - contents:
      - "4.2.2.  Signaling\n   The Signaling service class is recommended for delay-sensitive\n
        \  client-server (e.g., traditional telephony) and peer-to-peer\n   application
        signaling.  Telephony signaling includes signaling\n   between 1) IP phone
        and soft-switch, 2) soft-client and soft-switch,\n   and 3) media gateway
        and soft-switch as well as peer-to-peer using\n   various protocols.  This
        service class is intended to be used for\n   control of sessions and applications.
        \ [RFC4594], Section 4.2,\n   recommends that Signaling traffic be marked
        CS5 DSCP.\n   While Signaling is recommended to receive a superior level of
        service\n   relative to the default class (i.e., AC_BE), it does not require
        the\n   highest level of service (i.e., AC_VO).  This leaves only the Video\n
        \  Access Category (AC_VI), which it will map to by default (as\n   described
        in Section 2.3).  Therefore, it is RECOMMENDED to map\n   Signaling traffic
        marked CS5 DSCP to UP 5, thereby admitting it to\n   the Video Access Category
        (AC_VI).\n   Note: Signaling traffic is not control-plane traffic from the\n
        \  perspective of the network (but rather is data-plane traffic); as\n   such,
        it does not merit provisioning in the Network Control service\n   class (marked
        CS6 and mapped to UP 6).  However, Signaling traffic is\n   control-plane
        traffic from the perspective of the voice/video\n   telephony overlay-infrastructure.
        \ As such, Signaling should be\n   treated with preferential servicing versus
        other data-plane flows.\n   This may be achieved in common WLAN deployments
        by mapping Signaling\n   traffic marked CS5 to UP 5.  On APs supporting per-UP
        EDCAF queuing\n   logic (as described in Section 2.2), this will result in
        preferential\n   treatment for Signaling traffic versus other video flows
        in the same\n   access category (AC_VI), which are marked to UP 4, as well
        as\n   preferred treatment over flows in the Best Effort (AC_BE) and\n   Background
        (AC_BK) Access Categories.\n"
      title: 4.2.2.  Signaling
    - contents:
      - "4.2.3.  Multimedia Conferencing\n   The Multimedia Conferencing service class
        is recommended for\n   applications that require real-time service for rate-adaptive\n
        \  traffic.  [RFC4594], Section 4.3, recommends Multimedia Conferencing\n
        \  traffic be marked AF4x (that is, AF41, AF42, and AF43, according to\n   the
        rules defined in [RFC2475]).\n   The primary media type typically carried
        within the Multimedia\n   Conferencing service class is video; as such, it
        is RECOMMENDED to\n   map this class into the Video Access Category (AC_VI),
        which it does\n   by default (as described in Section 2.3).  Specifically,
        it is\n   RECOMMENDED to map AF41, AF42, and AF43 to UP 4, thereby admitting\n
        \  Multimedia Conferencing into the Video Access Category (AC_VI).\n"
      title: 4.2.3.  Multimedia Conferencing
    - contents:
      - "4.2.4.  Real-Time Interactive\n   The Real-Time Interactive service class
        is recommended for\n   applications that require low loss and jitter and very
        low delay for\n   variable-rate inelastic traffic sources.  Such applications
        may\n   include inelastic video-conferencing applications, but may also\n
        \  include gaming applications (as pointed out in [RFC4594], Sections\n   2.1
        through 2.3 and Section 4.4).  [RFC4594], Section 4.4, recommends\n   Real-Time
        Interactive traffic be marked CS4 DSCP.\n   The primary media type typically
        carried within the Real-Time\n   Interactive service class is video; as such,
        it is RECOMMENDED to map\n   this class into the Video Access Category (AC_VI),
        which it does by\n   default (as described in Section 2.3).  Specifically,
        it is\n   RECOMMENDED to map CS4 to UP 4, thereby admitting Real-Time\n   Interactive
        traffic into the Video Access Category (AC_VI).\n"
      title: 4.2.4.  Real-Time Interactive
    - contents:
      - "4.2.5.  Multimedia Streaming\n   The Multimedia Streaming service class is
        recommended for\n   applications that require near-real-time packet forwarding
        of\n   variable-rate elastic traffic sources.  Typically, these flows are\n
        \  unidirectional.  [RFC4594], Section 4.5, recommends Multimedia\n   Streaming
        traffic be marked AF3x (that is, AF31, AF32, and AF33,\n   according to the
        rules defined in [RFC2475]).\n   The primary media type typically carried
        within the Multimedia\n   Streaming service class is video; as such, it is
        RECOMMENDED to map\n   this class into the Video Access Category (AC_VI),
        which it will by\n   default (as described in Section 2.3).  Specifically,
        it is\n   RECOMMENDED to map AF31, AF32, and AF33 to UP 4, thereby admitting\n
        \  Multimedia Streaming into the Video Access Category (AC_VI).\n"
      title: 4.2.5.  Multimedia Streaming
    - contents:
      - "4.2.6.  Broadcast Video\n   The Broadcast Video service class is recommended
        for applications\n   that require near-real-time packet forwarding with very
        low packet\n   loss of constant rate and variable-rate inelastic traffic sources.\n
        \  Typically these flows are unidirectional.  [RFC4594] Section 4.6\n   recommends
        Broadcast Video traffic be marked CS3 DSCP.\n   As directly implied by the
        name, the primary media type typically\n   carried within the Broadcast Video
        service class is video; as such,\n   it is RECOMMENDED to map this class into
        the Video Access Category\n   (AC_VI); however, by default (as described in
        Section 2.3), this\n   service class will map to UP 3 and, thus, the Best
        Effort Access\n   Category (AC_BE).  Therefore, a non-default mapping is RECOMMENDED,\n
        \  such that CS4 maps to UP 4, thereby admitting Broadcast Video into\n   the
        Video Access Category (AC_VI).\n"
      title: 4.2.6.  Broadcast Video
    - contents:
      - "4.2.7.  Low-Latency Data\n   The Low-Latency Data service class is recommended
        for elastic and\n   time-sensitive data applications, often of a transactional
        nature,\n   where a user is waiting for a response via the network in order
        to\n   continue with a task at hand.  As such, these flows are considered\n
        \  foreground traffic, with delays or drops to such traffic directly\n   impacting
        user productivity.  [RFC4594], Section 4.7, recommends\n   Low-Latency Data
        be marked AF2x (that is, AF21, AF22, and AF23,\n   according to the rules
        defined in [RFC2475]).\n   By default (as described in Section 2.3), Low-Latency
        Data will map\n   to UP 2 and, thus, to the Background Access Category (AC_BK),
        which\n   is contrary to the intent expressed in [RFC4594].\n   Mapping Low-Latency
        Data to UP 3 may allow targeted traffic to\n   receive a superior level of
        service via per-UP transmit queues\n   servicing the EDCAF hardware for the
        Best Effort Access Category\n   (AC_BE), as described in Section 2.2.  Therefore
        it is RECOMMENDED to\n   map Low-Latency Data traffic marked AF2x DSCP to
        UP 3, thereby\n   admitting it to the Best Effort Access Category (AC_BE).\n"
      title: 4.2.7.  Low-Latency Data
    - contents:
      - "4.2.8.  High-Throughput Data\n   The High-Throughput Data service class is
        recommended for elastic\n   applications that require timely packet forwarding
        of variable-rate\n   traffic sources and, more specifically, is configured
        to provide\n   efficient, yet constrained (when necessary) throughput for
        TCP\n   longer-lived flows.  These flows are typically not user interactive.\n
        \  According to [RFC4594], Section 4.8, it can be assumed that this\n   class
        will consume any available bandwidth and that packets\n   traversing congested
        links may experience higher queuing delays or\n   packet loss.  It is also
        assumed that this traffic is elastic and\n   responds dynamically to packet
        loss.  [RFC4594], Section 4.8,\n   recommends High-Throughput Data be marked
        AF1x (that is, AF11, AF12,\n   and AF13, according to the rules defined in
        [RFC2475]).\n   By default (as described in Section 2.3), High-Throughput
        Data will\n   map to UP 1 and, thus, to the Background Access Category (AC_BK),\n
        \  which is contrary to the intent expressed in [RFC4594].\n   Unfortunately,
        there really is no corresponding fit for the High-\n   Throughput Data service
        class within the constrained 4 Access\n   Category [IEEE.802.11-2016] model.
        \ If the High-Throughput Data\n   service class is assigned to the Best Effort
        Access Category (AC_BE),\n   then it would contend with Low-Latency Data (while
        [RFC4594]\n   recommends a distinction in servicing between these service
        classes)\n   as well as with the default service class; alternatively, if
        it is\n   assigned to the Background Access Category (AC_BK), then it would\n
        \  receive a less-then-best-effort service and contend with Low-Priority\n
        \  Data (as discussed in Section 4.2.10).\n   As such, since there is no directly
        corresponding fit for the High-\n   Throughout Data service class within the
        [IEEE.802.11-2016] model, it\n   is generally RECOMMENDED to map High-Throughput
        Data to UP 0, thereby\n   admitting it to the Best Effort Access Category
        (AC_BE).\n"
      title: 4.2.8.  High-Throughput Data
    - contents:
      - "4.2.9.  Standard\n   The Standard service class is recommended for traffic
        that has not\n   been classified into one of the other supported forwarding
        service\n   classes in the Diffserv network domain.  This service class provides\n
        \  the Internet's \"best-effort\" forwarding behavior.  [RFC4594],\n   Section
        4.9, states that the \"Standard service class MUST use the\n   Default Forwarding
        (DF) PHB\".\n   The Standard service class loosely corresponds to the\n   [IEEE.802.11-2016]
        Best Effort Access Category (AC_BE); therefore, it\n   is RECOMMENDED to map
        Standard service class traffic marked DF DSCP\n   to UP 0, thereby admitting
        it to the Best Effort Access Category\n   (AC_BE).  This happens to correspond
        to the default mapping (as\n   described in Section 2.3).\n"
      title: 4.2.9.  Standard
    - contents:
      - "4.2.10.  Low-Priority Data\n   The Low-Priority Data service class serves
        applications that the user\n   is willing to accept without service assurances.
        \ This service class\n   is specified in [RFC3662] and [LE-PHB].\n   [RFC3662]
        and [RFC4594] both recommend Low-Priority Data be marked\n   CS1 DSCP.\n   Note:
        This marking recommendation may change in the future, as\n   [LE-PHB] defines
        a Lower Effort (LE) PHB for Low-Priority Data\n   traffic and recommends an
        additional DSCP for this traffic.\n   The Low-Priority Data service class
        loosely corresponds to the\n   [IEEE.802.11-2016] Background Access Category
        (AC_BK); therefore, it\n   is RECOMMENDED to map Low-Priority Data traffic
        marked CS1 DSCP to UP\n   1, thereby admitting it to the Background Access
        Category (AC_BK).\n   This happens to correspond to the default mapping (as
        described in\n   Section 2.3).\n"
      title: 4.2.10.  Low-Priority Data
    title: 4.2.  User Traffic
  - contents:
    - "4.3.  Summary of Recommendations for DSCP-to-UP Mapping\n   Figure 1 summarizes
      the [RFC4594] DSCP marking recommendations mapped\n   to [IEEE.802.11-2016]
      UP and Access Categories applied in the\n   downstream direction (i.e., from
      wired-to-wireless networks).\n  +-------------------------------------------------------------------+\n
      \ | IETF Diffserv | PHB  |Reference |         IEEE 802.11              |\n  |
      Service Class |      |   RFC    |User Priority|  Access Category   |\n  |===============+======+==========+=============+====================|\n
      \ |               |      |          |     7       |    AC_VO (Voice)   |\n  |Network
      Control| CS7  | RFC 2474 |            OR                    |\n  |(reserved
      for  |      |          |     0       | AC_BE (Best Effort)|\n  | future use)
      \  |      |          |See Security Considerations-Sec.8 |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |               |      |          |     7       |    AC_VO (Voice)   |\n  |Network
      Control| CS6  | RFC 2474 |            OR                    |\n  |               |
      \     |          |     0       | AC_BE (Best Effort)|\n  |               |      |
      \         |    See Security Considerations   |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |   Telephony   |  EF  | RFC 3246 |     6       |    AC_VO (Voice)   |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |  VOICE-ADMIT  |  VA  | RFC 5865 |     6       |    AC_VO (Voice)   |\n  |
      \              |      |          |             |                    |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |   Signaling   | CS5  | RFC 2474 |     5       |    AC_VI (Video)   |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |   Multimedia  | AF41 |          |             |                    |\n  |
      Conferencing  | AF42 | RFC 2597 |     4       |    AC_VI (Video)   |\n  |               |
      AF43 |          |             |                    |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |   Real-Time   | CS4  | RFC 2474 |     4       |    AC_VI (Video)   |\n  |
      \ Interactive  |      |          |             |                    |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |  Multimedia   | AF31 |          |             |                    |\n  |
      \ Streaming    | AF32 | RFC 2597 |     4       |    AC_VI (Video)   |\n  |               |
      AF33 |          |             |                    |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |Broadcast Video| CS3  | RFC 2474 |     4       |    AC_VI (Video)   |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |    Low-       | AF21 |          |             |                    |\n  |
      \   Latency    | AF22 | RFC 2597 |     3       | AC_BE (Best Effort)|\n  |    Data
      \      | AF23 |          |             |                    |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |     OAM       | CS2  | RFC 2474 |     0       | AC_BE (Best Effort)|\n  +---------------+------+----------+-------------+--------------------+\n
      \ |    High-      | AF11 |          |             |                    |\n  |
      \ Throughput   | AF12 | RFC 2597 |     0       | AC_BE (Best Effort)|\n  |    Data
      \      | AF13 |          |             |                    |\n  +---------------+------+----------+-------------+--------------------+\n
      \ |   Standard    | DF   | RFC 2474 |     0       | AC_BE (Best Effort)|\n  +---------------+------+----------+-------------+--------------------+\n
      \ | Low-Priority  | CS1  | RFC 3662 |     1       | AC_BK (Background) |\n  |
      \    Data      |      |          |             |                    |\n  +--------------------------------------------------------------------+\n
      \ Note: All unused codepoints are RECOMMENDED to be mapped to UP 0\n  (See Security
      Considerations below)\n       Figure 1: Summary of Mapping Recommendations from
      Downstream\n                       DSCP to IEEE 802.11 UP and AC\n"
    title: 4.3.  Summary of Recommendations for DSCP-to-UP Mapping
  title: 4.  Recommendations for DSCP-to-UP Mapping
- contents:
  - "5.  Recommendations for Upstream Mapping and Marking\n   In the upstream direction
    (i.e., wireless-to-wired), there are three\n   types of mapping that may be implemented:\n
    \  o  DSCP-to-UP mapping within the wireless client operating system,\n      and\n
    \  o  UP-to-DSCP mapping at the wireless AP, or\n   o  DSCP-Passthrough at the
    wireless AP (effectively a 1:1 DSCP-to-\n      DSCP mapping)\n   As an alternative
    to the latter two options, the network\n   administrator MAY choose to use the
    wireless-to-wired edge as a\n   Diffserv boundary and explicitly set (or reset)
    DSCP markings\n   according to administrative policy, thus making the wireless
    edge a\n   Diffserv policy enforcement point; this approach is RECOMMENDED\n   whenever
    the APs support the required classification and marking\n   capabilities.\n   Each
    of these options will now be considered.\n"
  - contents:
    - "5.1.  Upstream DSCP-to-UP Mapping within the Wireless Client Operating\n      System\n
      \  Some operating systems on wireless client devices utilize a similar\n   default
      DSCP-to-UP mapping scheme as that described in Section 2.3.\n   As such, this
      can lead to the same conflicts as described in that\n   section, but in the
      upstream direction.\n   Therefore, to improve on these default mappings, and
      to achieve\n   parity and consistency with downstream QoS, it is RECOMMENDED
      that\n   wireless client operating systems instead utilize the same DSCP-to-UP\n
      \  mapping recommendations presented in Section 4.  Note that it is\n   explicitly
      stated that packets requesting a marking of CS6 or CS7\n   DSCP SHOULD be mapped
      to UP 0 (and not to UP 7).  Furthermore, in\n   such cases, the wireless client
      operating system SHOULD re-mark such\n   packets to DSCP 0.  This is because
      CS6 and CS7 DSCP, as well as UP 7\n   markings, are intended for network control
      protocols, and these\n   SHOULD NOT be sourced from wireless client endpoint
      devices.  This\n   recommendation is detailed in the Security Considerations
      section\n   (Section 8).\n"
    title: 5.1.  Upstream DSCP-to-UP Mapping within the Wireless Client Operating
  - contents:
    - "5.2.  Upstream UP-to-DSCP Mapping at the Wireless AP\n   UP-to-DSCP mapping
      generates a DSCP value for the IP packet (either\n   an unencapsulated IP packet
      or an IP packet encapsulated within a\n   tunneling protocol such as Control
      and Provisioning of Wireless\n   Access Points (CAPWAP) -- and destined towards
      a wireless LAN\n   controller for decapsulation and forwarding) from the Layer
      2\n   [IEEE.802.11-2016] UP marking.  This is typically done in the manner\n
      \  described in Section 2.4.\n   It should be noted that any explicit re-marking
      policy to be\n   performed on such a packet generally takes place at the nearest\n
      \  classification and marking policy enforcement point, which may be:\n   o
      \ At the wireless AP, and/or\n   o  At the wired network switch port, and/or\n
      \  o  At the wireless LAN controller\n   Note: Multiple classification and marking
      policy enforcement points\n   may exist, as some devices have the capability
      to re-mark at only\n   Layer 2 or Layer 3, while other devices can re-mark at
      either/both\n   layers.\n   As such, UP-to-DSCP mapping allows for wireless
      L2 markings to affect\n   the QoS treatment of a packet over the wired IP network
      (that is,\n   until the packet reaches the nearest classification and marking\n
      \  policy enforcement point).\n   It should be further noted that nowhere in
      the [IEEE.802.11-2016]\n   specification is there an intent expressed for UP
      markings to be used\n   to influence QoS treatment over wired IP networks.  Furthermore,\n
      \  [RFC2474], [RFC2475], and [RFC8100] all allow for the host to set\n   DSCP
      markings for end-to-end QoS treatment over IP networks.\n   Therefore, wireless
      APs MUST NOT leverage Layer 2 [IEEE.802.11-2016]\n   UP markings as set by wireless
      hosts and subsequently perform a\n   UP-to-DSCP mapping in the upstream direction.
      \ But rather, if\n   wireless host markings are to be leveraged (as per business\n
      \  requirements, technical constraints, and administrative policies),\n   then
      it is RECOMMENDED to pass through the Layer 3 DSCP markings set\n   by these
      wireless hosts instead, as is discussed in the next section.\n"
    title: 5.2.  Upstream UP-to-DSCP Mapping at the Wireless AP
  - contents:
    - "5.3.  Upstream DSCP-Passthrough at the Wireless AP\n   It is generally NOT
      RECOMMENDED to pass through DSCP markings from\n   unauthenticated and unauthorized
      devices, as these are typically\n   considered untrusted sources.\n   When business
      requirements and/or technical constraints and/or\n   administrative policies
      require QoS markings to be passed through at\n   the wireless edge, then it
      is RECOMMENDED to pass through Layer 3\n   DSCP markings (over Layer 2 [IEEE.802.11-2016]
      UP markings) in the\n   upstream direction, with the exception of CS6 and CS7
      (as will be\n   discussed further), for the following reasons:\n   o  [RFC2474],
      [RFC2475], and [RFC8100] all allow for hosts to set\n      DSCP markings to
      achieve an end-to-end differentiated service\n   o  [IEEE.802.11-2016] does
      not specify that UP markings are to be\n      used to affect QoS treatment over
      wired IP networks\n   o  Most present wireless device operating systems generate
      UP values\n      by the same method as described in Section 2.3 (i.e., by using
      the\n      3 MSBs of the encapsulated 6-bit DSCP); then, at the AP, these\n
      \     3-bit markings are converted back into DSCP values, typically in\n      the
      default manner described in Section 2.4; as such, information\n      is lost
      in the translation from a 6-bit marking to a 3-bit marking\n      (which is
      then subsequently translated back to a 6-bit marking);\n      passing through
      the original (encapsulated) DSCP marking prevents\n      such loss of information\n
      \  o  A practical implementation benefit is also realized by passing\n      through
      the DSCP set by wireless client devices, as enabling\n      applications to
      mark DSCP is much more prevalent and accessible to\n      programmers of applications
      running on wireless device platforms,\n      vis-a-vis trying to explicitly
      set UP values, which requires\n      special hooks into the wireless device
      operating system and/or\n      hardware device drivers, many of which do not
      support such\n      functionality\n   CS6 and CS7 are exceptions to this passthrough
      recommendation because\n   wireless hosts SHOULD NOT use them (see Section 5.1)
      and traffic with\n   those two markings poses a threat to operation of the wired
      network\n   (see Section 8.2).  CS6 and CS7 SHOULD NOT be passed through to
      the\n   wired network in the upstream direction unless the AP has been\n   specifically
      configured to do that by a network administrator or\n   operator.\n"
    title: 5.3.  Upstream DSCP-Passthrough at the Wireless AP
  - contents:
    - "5.4.  Upstream DSCP Marking at the Wireless AP\n   An alternative option to
      mapping is for the administrator to treat\n   the wireless edge as the edge
      of the Diffserv domain and explicitly\n   set (or reset) DSCP markings in the
      upstream direction according to\n   administrative policy.  This option is RECOMMENDED
      over mapping, as\n   this typically is the most secure solution because the
      network\n   administrator directly enforces the Diffserv policy across the IP\n
      \  network (versus an application developer and/or the developer of the\n   operating
      system of the wireless endpoint device, who may be\n   functioning completely
      independently of the network administrator).\n"
    title: 5.4.  Upstream DSCP Marking at the Wireless AP
  title: 5.  Recommendations for Upstream Mapping and Marking
- contents:
  - "6.  Overview of IEEE 802.11 QoS\n   QoS is enabled on wireless networks by means
    of the Hybrid\n   Coordination Function (HCF).  To give better context to the\n
    \  enhancements in HCF that enable QoS, it may be helpful to begin with\n   a
    review of the original Distributed Coordination Function (DCF).\n"
  - contents:
    - "6.1.  Distributed Coordination Function (DCF)\n   As has been noted, the Wi-Fi
      medium is a shared medium, with each\n   station -- including the wireless AP
      -- contending for the medium on\n   equal terms.  As such, it shares the same
      challenge as any other\n   shared medium in requiring a mechanism to prevent
      (or avoid)\n   collisions, which can occur when two (or more) stations attempt\n
      \  simultaneous transmission.\n   The IEEE Ethernet Working Group solved this
      challenge by implementing\n   a Carrier Sense Multiple Access/Collision Detection
      (CSMA/CD)\n   mechanism that could detect collisions over the shared physical
      cable\n   (as collisions could be detected as reflected energy pulses over the\n
      \  physical wire).  Once a collision was detected, then a predefined set\n   of
      rules was invoked that required stations to back off and wait\n   random periods
      of time before reattempting transmission.  While CSMA/\n   CD improved the usage
      of Ethernet as a shared medium, it should be\n   noted the ultimate solution
      to solving Ethernet collisions was the\n   advance of switching technologies,
      which treated each Ethernet cable\n   as a dedicated collision domain.\n   However,
      unlike Ethernet (which uses physical cables), collisions\n   cannot be directly
      detected over the wireless medium, as RF energy is\n   radiated over the air
      and colliding bursts are not necessarily\n   reflected back to the transmitting
      stations.  Therefore, a different\n   mechanism is required for this medium.\n
      \  As such, the IEEE modified the CSMA/CD mechanism to adapt it to\n   wireless
      networks to provide Carrier Sense Multiple Access/Collision\n   Avoidance (CSMA/CA).
      \ The original CSMA/CA mechanism used in IEEE\n   802.11 was the Distributed
      Coordination Function.  DCF is a timer-\n   based system that leverages three
      key sets of timers, the slot time,\n   interframe spaces and CWs.\n"
    - contents:
      - "6.1.1.  Slot Time\n   The slot time is the basic unit of time measure for
        both DCF and HCF,\n   on which all other timers are based.  The slot-time
        duration varies\n   with the different generations of data rates and performances\n
        \  described by [IEEE.802.11-2016].  For example, [IEEE.802.11-2016]\n   specifies
        the slot time to be 20 microseconds ([IEEE.802.11-2016],\n   Table 15-5) for
        legacy implementations (such as IEEE 802.11b,\n   supporting 1, 2, 5.5, and
        11 Mbps data rates), while newer\n   implementations (including IEEE 802.11g,
        802.11a, 802.11n, and\n   802.11ac, supporting data rates from 6.5 Mbps to
        over 2 Gbps per\n   spatial stream) define a shorter slot time of 9 microseconds\n
        \  ([IEEE.802.11-2016], Section 17.4.4, Table 17-21).\n"
      title: 6.1.1.  Slot Time
    - contents:
      - "6.1.2.  Interframe Space (IFS)\n   The time interval between frames that
        are transmitted over the air is\n   called the Interframe Space (IFS).  Several
        IFSs are defined in\n   [IEEE.802.11-2016], with the most relevant to DCF
        being the Short\n   Interframe Space (SIFS), the DCF Interframe Space (DIFS),
        and the\n   Extended Interframe Space (EIFS).\n   The SIFS is the amount of
        time in microseconds required for a\n   wireless interface to process a received
        RF signal and its associated\n   frame (as specified in [IEEE.802.11-2016])
        and to generate a response\n   frame.  Like slot times, the SIFS can vary
        according to the\n   performance implementation of [IEEE.802.11-2016].  The
        SIFS for IEEE\n   802.11a, 802.11n, and 802.11ac (in 5 GHz) is 16 microseconds\n
        \  ([IEEE.802.11-2016], Section 17.4.4, Table 17-21).\n   Additionally, a
        station must sense the status of the wireless medium\n   before transmitting.
        \ If it finds that the medium is continuously\n   idle for the duration of
        a DIFS, then it is permitted to attempt\n   transmission of a frame (after
        waiting an additional random backoff\n   period, as will be discussed in the
        next section).  If the channel is\n   found busy during the DIFS interval,
        the station must defer its\n   transmission until the medium is found to be
        idle for the duration of\n   a DIFS interval.  The DIFS is calculated as:\n
        \     DIFS = SIFS + (2 * Slot time)\n   However, if all stations waited only
        a fixed amount of time before\n   attempting transmission, then collisions
        would be frequent.  To\n   offset this, each station must wait, not only a
        fixed amount of time\n   (the DIFS), but also a random amount of time (the
        random backoff)\n   prior to transmission.  The range of the generated random
        backoff\n   timer is bounded by the CW.\n"
      title: 6.1.2.  Interframe Space (IFS)
    - contents:
      - "6.1.3.  Contention Window (CW)\n   Contention windows bound the range of
        the generated random backoff\n   timer that each station must wait (in addition
        to the DIFS) before\n   attempting transmission.  The initial range is set
        between 0 and the\n   CW minimum value (CWmin), inclusive.  The CWmin for
        DCF (in 5 GHz) is\n   specified as 15 slot times ([IEEE.802.11-2016], Section
        17.4.4,\n   Table 17-21).\n   However, it is possible that two (or more) stations
        happen to pick\n   the exact same random value within this range.  If this
        happens, then\n   a collision may occur.  At this point, the stations effectively
        begin\n   the process again, waiting a DIFS and generate a new random backoff\n
        \  value.  However, a key difference is that for this subsequent\n   attempt,
        the CW approximately doubles in size (thus, exponentially\n   increasing the
        range of the random value).  This process repeats as\n   often as necessary
        if collisions continue to occur, until the maximum\n   CW size (CWmax) is
        reached.  The CWmax for DCF is specified as 1023\n   slot times ([IEEE.802.11-2016],
        Section 17.4.4, Table 17-21).\n   At this point, transmission attempts may
        still continue (until some\n   other predefined limit is reached), but the
        CW sizes are fixed at the\n   CWmax value.\n   Incidentally it may be observed
        that a significant amount of jitter\n   can be introduced by this contention
        process for wireless\n   transmission access.  For example, the incremental
        transmission delay\n   of 1023 slot times (CWmax) using 9-microsecond slot
        times may be as\n   high as 9 ms of jitter per attempt.  And, as previously
        noted,\n   multiple attempts can be made at CWmax.\n"
      title: 6.1.3.  Contention Window (CW)
    title: 6.1.  Distributed Coordination Function (DCF)
  - contents:
    - "6.2.  Hybrid Coordination Function (HCF)\n   Therefore, as can be seen from
      the preceding description of DCF,\n   there is no preferential treatment of
      one station over another when\n   contending for the shared wireless media;
      nor is there any\n   preferential treatment of one type of traffic over another
      during the\n   same contention process.  To support the latter requirement,
      the IEEE\n   enhanced DCF in 2005 to support QoS, specifying HCF in IEEE 802.11,\n
      \  which was integrated into the main IEEE 802.11 standard in 2007.\n"
    - contents:
      - "6.2.1.  User Priority (UP)\n   One of the key changes to the frame format
        in [IEEE.802.11-2016] is\n   the inclusion of a QoS Control field, with 3
        bits dedicated for QoS\n   markings.  These bits are referred to the User
        Priority (UP) bits and\n   these support eight distinct marking values: 0-7,
        inclusive.\n   While such markings allow for frame differentiation, these
        alone do\n   not directly affect over-the-air treatment.  Rather, it is the\n
        \  non-configurable and standard-specified mapping of UP markings to the\n
        \  Access Categories (ACs) from [IEEE.802.11-2016] that generate\n   differentiated
        treatment over wireless media.\n"
      title: 6.2.1.  User Priority (UP)
    - contents:
      - "6.2.2.  Access Category (AC)\n   Pairs of UP values are mapped to four defined
        access categories that\n   correspondingly specify different treatments of
        frames over the air.\n   These access categories (in order of relative priority
        from the top\n   down) and their corresponding UP mappings are shown in Figure
        2\n   (adapted from [IEEE.802.11-2016], Section 10.2.4.2, Table 10-1).\n                +-----------------------------------------+\n
        \               |   User    |   Access   | Designative    |\n                |
        Priority  |  Category  | (informative)  |\n                |===========+============+================|\n
        \               |     7     |    AC_VO   |     Voice      |\n                +-----------+------------+----------------+\n
        \               |     6     |    AC_VO   |     Voice      |\n                +-----------+------------+----------------+\n
        \               |     5     |    AC_VI   |     Video      |\n                +-----------+------------+----------------+\n
        \               |     4     |    AC_VI   |     Video      |\n                +-----------+------------+----------------+\n
        \               |     3     |    AC_BE   |   Best Effort  |\n                +-----------+------------+----------------+\n
        \               |     0     |    AC_BE   |   Best Effort  |\n                +-----------+------------+----------------+\n
        \               |     2     |    AC_BK   |   Background   |\n                +-----------+------------+----------------+\n
        \               |     1     |    AC_BK   |   Background   |\n                +-----------------------------------------+\n
        \                 Figure 2: Mappings between IEEE 802.11\n                    Access
        Categories and User Priority\n   The manner in which these four access categories
        achieve\n   differentiated service over-the-air is primarily by tuning the
        fixed\n   and random timers that stations have to wait before sending their\n
        \  respective types of traffic, as will be discussed next.\n"
      title: 6.2.2.  Access Category (AC)
    - contents:
      - "6.2.3.  Arbitration Interframe Space (AIFS)\n   As previously mentioned,
        each station must wait a fixed amount of\n   time to ensure the medium is
        idle before attempting transmission.\n   With DCF, the DIFS is constant for
        all types of traffic.  However,\n   with [IEEE.802.11-2016], the fixed amount
        of time that a station has\n   to wait will depend on the access category
        and is referred to as an\n   Arbitration Interframe Space (AIFS).  AIFSs are
        defined in slot times\n   and the AIFSs per access category are shown in Figure
        3 (adapted from\n   [IEEE.802.11-2016], Section 9.4.2.29, Table 9-137).\n
        \              +-------------------------------------------+\n               |
        \  Access   | Designative     |   AIFS     |\n               |  Category  |
        (informative)   |(slot times)|\n               |============+=================+============|\n
        \              |   AC_VO    |     Voice       |     2      |\n               +------------+-----------------+------------+\n
        \              |   AC_VI    |     Video       |     2      |\n               +------------+-----------------+------------+\n
        \              |   AC_BE    |   Best Effort   |     3      |\n               +------------+-----------------+------------+\n
        \              |   AC_BK    |   Background    |     7      |\n               +------------+-----------------+------------+\n
        \       Figure 3: Arbitration Interframe Spaces by Access Category\n"
      title: 6.2.3.  Arbitration Interframe Space (AIFS)
    - contents:
      - "6.2.4.  Access Category CWs\n   Not only is the fixed amount of time that
        a station has to wait\n   skewed according to its [IEEE.802.11-2016] access
        category, but so\n   are the relative sizes of the CWs that bound the random
        backoff\n   timers, as shown in Figure 4 (adapted from [IEEE.802.11-2016],\n
        \  Section 9.4.2.29, Table 9-137).\n         +-------------------------------------------------------+\n
        \        |   Access  |  Designative    |   CWmin    |   CWmax    |\n         |
        \ Category |  (informative)  |(slot times)|(slot times)|\n         |===========+=================+============|============|\n
        \        |   AC_VO   |     Voice       |     3      |     7      |\n         +-----------+-----------------+------------+------------+\n
        \        |   AC_VI   |     Video       |     7      |     15     |\n         +-----------+-----------------+------------+------------+\n
        \        |   AC_BE   |   Best Effort   |     15     |    1023    |\n         +-----------+-----------------+------------+------------+\n
        \        |   AC_BK   |   Background    |     15     |    1023    |\n         +-----------+-----------------+------------+------------+\n
        \                  Figure 4: CW Sizes by Access Category\n   When the fixed
        and randomly generated timers are added together on a\n   per-access-category
        basis, then traffic assigned to the Voice Access\n   Category (i.e., traffic
        marked to UP 6 or 7) will receive a\n   statistically superior service relative
        to traffic assigned to the\n   Video Access Category (i.e., traffic marked
        UP 5 and 4), which, in\n   turn, will receive a statistically superior service
        relative to\n   traffic assigned to the Best Effort Access Category traffic
        (i.e.,\n   traffic marked UP 3 and 0), which finally will receive a\n   statistically
        superior service relative to traffic assigned to the\n   Background Access
        Category traffic (i.e., traffic marked to UP 2 and\n   1).\n"
      title: 6.2.4.  Access Category CWs
    title: 6.2.  Hybrid Coordination Function (HCF)
  - contents:
    - "6.3.  IEEE 802.11u QoS Map Set\n   IEEE 802.11u [IEEE.802-11u-2011] is an addendum
      that has now been\n   included within the main standard ([IEEE.802.11-2016]),
      and which\n   includes, among other enhancements, a mechanism by which wireless
      APs\n   can communicate DSCP to/from UP mappings that have been configured on\n
      \  the wired IP network.  Specifically, a QoS Map Set information\n   element
      (described in [IEEE.802.11-2016], Section 9.4.2.95, and\n   commonly referred
      to as the \"QoS Map element\") is transmitted from an\n   AP to a wireless endpoint
      device in an association / re-association\n   Response frame (or within a special
      QoS Map Configure frame).\n   The purpose of the QoS Map element is to provide
      the mapping of\n   higher-layer QoS constructs (i.e., DSCP) to User Priorities.
      \ One\n   intended effect of receiving such a map is for the wireless endpoint\n
      \  device (that supports this function and is administratively\n   configured
      to enable it) to perform corresponding DSCP-to-UP mapping\n   within the device
      (i.e., between applications and the operating\n   system / wireless network
      interface hardware drivers) to align with\n   what the APs are mapping in the
      downstream direction, so as to\n   achieve consistent end-to-end QoS in both
      directions.\n   The QoS Map element includes two key components:\n   1)  each
      of the eight UP values (0-7) is associated with a range of\n       DSCP values,
      and\n   2)  (up to 21) exceptions from these range-based DSCP to/from UP\n       mapping
      associations may be optionally and explicitly specified.\n   In line with the
      recommendations put forward in this document, the\n   following recommendations
      apply when the QoS Map element is enabled:\n   1)  each of the eight UP values
      (0-7) are RECOMMENDED to be mapped to\n       DSCP 0 (as a baseline, so as to
      meet the recommendation made in\n       Section 8.2, and\n   2)  (up to 21)
      exceptions from this baseline mapping are RECOMMENDED\n       to be made in
      line with Section 4.3, to correspond to the\n       Diffserv Codepoints that
      are in use over the IP network.\n   It is important to note that the QoS Map
      element is intended to be\n   transmitted from a wireless AP to a non-AP station.
      \ As such, the\n   model where this element is used is that of a network where
      the AP is\n   the edge of the Diffserv domain.  Networks where the AP extends
      the\n   Diffserv domain by connecting other APs and infrastructure devices\n
      \  through the IEEE 802.11 medium are not included in the cases covered\n   by
      the presence of the QoS Map element, and therefore are not\n   included in the
      present recommendation.\n"
    title: 6.3.  IEEE 802.11u QoS Map Set
  title: 6.  Overview of IEEE 802.11 QoS
- contents:
  - "7.  IANA Considerations\n   This document has no IANA actions.\n"
  title: 7.  IANA Considerations
- contents:
  - "8.  Security Considerations\n   The recommendations in this document concern
    widely deployed wired\n   and wireless network functionality, and, for that reason,
    do not\n   present additional security concerns that do not already exist in\n
    \  these networks.  In fact, several of the recommendations made in this\n   document
    serve to protect wired and wireless networks from potential\n   abuse, as is discussed
    further in this section.\n"
  - contents:
    - "8.1.  Security Recommendations for General QoS\n   It may be possible for a
      wired or wireless device (which could be\n   either a host or a network device)
      to mark packets (or map packet\n   markings) in a manner that interferes with
      or degrades existing QoS\n   policies.  Such marking or mapping may be done
      intentionally or\n   unintentionally by developers and/or users and/or administrators
      of\n   such devices.\n   To illustrate: A gaming application designed to run
      on a smartphone\n   or tablet may request that all its packets be marked DSCP
      EF and/or\n   UP 6.  However, if the traffic from such an application is forwarded\n
      \  without change over a business network, then this could interfere\n   with
      QoS policies intended to provide priority services for business\n   voice applications.\n
      \  To mitigate such scenarios, it is RECOMMENDED to implement general\n   QoS
      security measures, including:\n   o  Setting a traffic conditioning policy reflective
      of business\n      objectives and policy, such that traffic from authorized
      users\n      and/or applications and/or endpoints will be accepted by the\n
      \     network; otherwise, packet markings will be \"bleached\" (i.e.,\n      re-marked
      to DSCP DF and/or UP 0).  Additionally, Section 5.3 made\n      it clear that
      it is generally NOT RECOMMENDED to pass through DSCP\n      markings from unauthorized
      and/or unauthenticated devices, as\n      these are typically considered untrusted
      sources.  This is\n      especially relevant for Internet of Things (IoT) deployments,\n
      \     where tens of billions of devices are being connected to IP\n      networks
      with little or no security capabilities, leaving them\n      vulnerable to be
      utilized as agents for DDoS attacks.  These\n      attacks can be amplified
      with preferential QoS treatments, should\n      the packet markings of such
      devices be trusted.\n   o  Policing EF marked packet flows, as detailed in [RFC2474],\n
      \     Section 7, and [RFC3246], Section 3.\n   In addition to these general
      QoS security recommendations, WLAN-\n   specific QoS security recommendations
      can serve to further mitigate\n   attacks and potential network abuse.\n"
    title: 8.1.  Security Recommendations for General QoS
  - contents:
    - "8.2.  Security Recommendations for WLAN QoS\n   The wireless LAN presents a
      unique DoS attack vector, as endpoint\n   devices contend for the shared media
      on a completely egalitarian\n   basis with the network (as represented by the
      AP).  This means that\n   any wireless client could potentially monopolize the
      air by sending\n   packets marked to preferred UP values (i.e., UP values 4-7)
      in the\n   upstream direction.  Similarly, airtime could be monopolized if\n
      \  excessive amounts of downstream traffic were marked/mapped to these\n   same
      preferred UP values.  As such, the ability to mark/map to these\n   preferred
      UP values (of UP 4-7) should be controlled.\n   If such marking/mapping were
      not controlled, then, for example, a\n   malicious user could cause WLAN DoS
      by flooding traffic marked CS7\n   DSCP downstream.  This codepoint would map
      by default (as described\n   in Section 2.3) to UP 7 and would be assigned to
      the Voice Access\n   Category (AC_VO).  Such a flood could cause Denial-of-Service
      to not\n   only wireless voice applications, but also to all other traffic\n
      \  classes.  Similarly, an uninformed application developer may request\n   all
      traffic from his/her application be marked CS7 or CS6, thinking\n   this would
      achieve the best overall servicing of their application\n   traffic, while not
      realizing that such a marking (if honored by the\n   client operating system)
      could cause not only WLAN DoS, but also IP\n   network instability, as the traffic
      marked CS7 or CS6 finds its way\n   into queues intended for servicing (relatively
      low-bandwidth) network\n   control protocols, potentially starving legitimate
      network control\n   protocols in the process.\n   Therefore, to mitigate such
      an attack, it is RECOMMENDED that all\n   packets marked to Diffserv Codepoints
      not authorized or explicitly\n   provisioned for use over the wireless network
      by the network\n   administrator be mapped to UP 0; this recommendation applies
      both at\n   the AP (in the downstream direction) and within the operating system\n
      \  of the wireless endpoint device (in the upstream direction).\n   Such a policy
      of mapping unused codepoints to UP 0 would also prevent\n   an attack where
      non-standard codepoints were used to cause WLAN DoS.\n   Consider the case where
      codepoints are mapped to UP values using a\n   range function (e.g., DSCP values
      48-55 all map to UP 6), then an\n   attacker could flood packets marked, for
      example, to DSCP 49, in\n   either the upstream or downstream direction over
      the WLAN, causing\n   DoS to all other traffic classes in the process.\n   In
      the majority of WLAN deployments, the AP represents not only the\n   edge of
      the Diffserv domain, but also the edge of the network\n   infrastructure itself;
      that is, only wireless client endpoint devices\n   are downstream from the AP.
      \ In such a deployment model, CS6 and CS7\n   also fall into the category of
      codepoints that are not in use over\n   the wireless LAN (since only wireless
      client endpoint devices are\n   downstream from the AP in this model and these
      devices do not\n   (legitimately) participate in network control protocol exchanges).\n
      \  As such, it is RECOMMENDED that CS6 and CS7 DSCP be mapped to UP 0 in\n   these
      Wi-Fi-at-the-edge deployment models.  Otherwise, it would be\n   easy for a
      malicious application developer, or even an inadvertently\n   poorly programmed
      IoT device, to cause WLAN DoS and even wired IP\n   network instability by flooding
      traffic marked CS6 DSCP, which would,\n   by default (as described in Section
      2.3), be mapped to UP 6, causing\n   all other traffic classes on the WLAN to
      be starved, as well as\n   hijacking queues on the wired IP network that are
      intended for the\n   servicing of routing protocols.  To this point, it was
      also\n   recommended in Section 5.1 that packets requesting a marking of CS6\n
      \  or CS7 DSCP SHOULD be re-marked to DSCP 0 and mapped to UP 0 by the\n   wireless
      client operating system.\n   Finally, it should be noted that the recommendations
      put forward in\n   this document are not intended to address all attack vectors\n
      \  leveraging QoS marking abuse.  Mechanisms that may further help\n   mitigate
      security risks of both wired and wireless networks deploying\n   QoS include
      strong device- and/or user-authentication, access-\n   control, rate-limiting,
      control-plane policing, encryption, and other\n   techniques; however, the implementation
      recommendations for such\n   mechanisms are beyond the scope of this document
      to address in\n   detail.  Suffice it to say that the security of the devices
      and\n   networks implementing QoS, including QoS mapping between wired and\n
      \  wireless networks, merits consideration in actual deployments.\n"
    title: 8.2.  Security Recommendations for WLAN QoS
  title: 8.  Security Considerations
- contents:
  - '9.  References

    '
  - contents:
    - "9.1.  Normative References\n   [IEEE.802.11-2016]\n              IEEE, \"IEEE
      Standard for Information technology -\n              Telecommunications and
      information exchange between\n              systems - Local and metropolitan
      area networks - Specific\n              requirements - Part 11: Wireless LAN
      Medium Access Control\n              (MAC) and Physical Layer (PHY) Specifications\",\n
      \             IEEE 802.11, DOI 10.1109/IEEESTD.2016.7786995, December\n              2016,
      <https://standards.ieee.org/findstds/\n              standard/802.11-2016.html>.\n
      \  [RFC2119]  Bradner, S., \"Key words for use in RFCs to Indicate\n              Requirement
      Levels\", BCP 14, RFC 2119,\n              DOI 10.17487/RFC2119, March 1997,\n
      \             <https://www.rfc-editor.org/info/rfc2119>.\n   [RFC2474]  Nichols,
      K., Blake, S., Baker, F., and D. Black,\n              \"Definition of the Differentiated
      Services Field (DS\n              Field) in the IPv4 and IPv6 Headers\", RFC
      2474,\n              DOI 10.17487/RFC2474, December 1998,\n              <https://www.rfc-editor.org/info/rfc2474>.\n
      \  [RFC2597]  Heinanen, J., Baker, F., Weiss, W., and J. Wroclawski,\n              \"Assured
      Forwarding PHB Group\", RFC 2597,\n              DOI 10.17487/RFC2597, June
      1999,\n              <https://www.rfc-editor.org/info/rfc2597>.\n   [RFC3168]
      \ Ramakrishnan, K., Floyd, S., and D. Black, \"The Addition\n              of
      Explicit Congestion Notification (ECN) to IP\",\n              RFC 3168, DOI
      10.17487/RFC3168, September 2001,\n              <https://www.rfc-editor.org/info/rfc3168>.\n
      \  [RFC3246]  Davie, B., Charny, A., Bennet, J., Benson, K., Le Boudec,\n              J.,
      Courtney, W., Davari, S., Firoiu, V., and D.\n              Stiliadis, \"An
      Expedited Forwarding PHB (Per-Hop\n              Behavior)\", RFC 3246, DOI
      10.17487/RFC3246, March 2002,\n              <https://www.rfc-editor.org/info/rfc3246>.\n
      \  [RFC3662]  Bless, R., Nichols, K., and K. Wehrle, \"A Lower Effort\n              Per-Domain
      Behavior (PDB) for Differentiated Services\",\n              RFC 3662, DOI 10.17487/RFC3662,
      December 2003,\n              <https://www.rfc-editor.org/info/rfc3662>.\n   [RFC4594]
      \ Babiarz, J., Chan, K., and F. Baker, \"Configuration\n              Guidelines
      for DiffServ Service Classes\", RFC 4594,\n              DOI 10.17487/RFC4594,
      August 2006,\n              <https://www.rfc-editor.org/info/rfc4594>.\n   [RFC5865]
      \ Baker, F., Polk, J., and M. Dolly, \"A Differentiated\n              Services
      Code Point (DSCP) for Capacity-Admitted Traffic\",\n              RFC 5865,
      DOI 10.17487/RFC5865, May 2010,\n              <https://www.rfc-editor.org/info/rfc5865>.\n
      \  [RFC8174]  Leiba, B., \"Ambiguity of Uppercase vs Lowercase in RFC\n              2119
      Key Words\", BCP 14, RFC 8174, DOI 10.17487/RFC8174,\n              May 2017,
      <https://www.rfc-editor.org/info/rfc8174>.\n"
    title: 9.1.  Normative References
  - contents:
    - "9.2.  Informative References\n   [GSMA-IPX_Guidelines]\n              GSM Association,
      \"Guidelines for IPX Provider networks\n              (Previously Inter-Service
      Provider IP Backbone Guidelines)\n              Version 11.0\", Official Document
      IR.34, November 2014,\n              <https://www.gsma.com/newsroom/wp-content/uploads/\n
      \             IR.34-v11.0.pdf>.\n   [IEEE.802-11u-2011]\n              IEEE,
      \"IEEE Standard for Information technology -\n              Telecommunications
      and information exchange between\n              systems - Local and metropolitan
      area networks - Specific\n              requirements - Part 11: Wireless LAN
      Medium Access Control\n              (MAC) and Physical Layer (PHY) specifications:
      Amendment\n              9: Interworking with External Networks\", IEEE 802.11,\n
      \             DO 10.1109/IEEESTD.2011.5721908, February 2011,\n              <http://standards.ieee.org/getieee802/\n
      \             download/802.11u-2011.pdf>.\n   [LE-PHB]   Bless, R., \"A Lower
      Effort Per-Hop Behavior (LE PHB)\",\n              Work in Progress, draft-ietf-tsvwg-le-phb-02,
      June 2017.\n   [RFC2475]  Blake, S., Black, D., Carlson, M., Davies, E., Wang,
      Z.,\n              and W. Weiss, \"An Architecture for Differentiated\n              Services\",
      RFC 2475, DOI 10.17487/RFC2475, December 1998,\n              <https://www.rfc-editor.org/info/rfc2475>.\n
      \  [RFC5127]  Chan, K., Babiarz, J., and F. Baker, \"Aggregation of\n              Diffserv
      Service Classes\", RFC 5127, DOI 10.17487/RFC5127,\n              February 2008,
      <https://www.rfc-editor.org/info/rfc5127>.\n   [RFC7561]  Kaippallimalil, J.,
      Pazhyannur, R., and P. Yegani,\n              \"Mapping Quality of Service (QoS)
      Procedures of Proxy\n              Mobile IPv6 (PMIPv6) and WLAN\", RFC 7561,\n
      \             DOI 10.17487/RFC7561, June 2015,\n              <https://www.rfc-editor.org/info/rfc7561>.\n
      \  [RFC8100]  Geib, R., Ed. and D. Black, \"Diffserv-Interconnection\n              Classes
      and Practice\", RFC 8100, DOI 10.17487/RFC8100,\n              March 2017, <https://www.rfc-editor.org/info/rfc8100>.\n"
    title: 9.2.  Informative References
  title: 9.  References
- contents:
  - "Acknowledgements\n   The authors wish to thank David Black, Gorry Fairhurst,
    Ruediger\n   Geib, Vincent Roca, Brian Carpenter, David Blake, Cullen Jennings,\n
    \  David Benham, and the TSVWG.\n   The authors also acknowledge a great many
    inputs, notably from David\n   Kloper, Mark Montanez, Glen Lavers, Michael Fingleton,
    Sarav\n   Radhakrishnan, Karthik Dakshinamoorthy, Simone Arena, Ranga Marathe,\n
    \  Ramachandra Murthy, and many others.\n"
  title: Acknowledgements
- contents:
  - "Authors' Addresses\n   Tim Szigeti\n   Cisco Systems\n   Vancouver, British Columbia
    \ V6K 3L4\n   Canada\n   Email: szigeti@cisco.com\n   Jerome Henry\n   Cisco Systems\n
    \  Research Triangle Park, North Carolina  27709\n   United States of America\n
    \  Email: jerhenry@cisco.com\n   Fred Baker\n   Santa Barbara, California  93117\n
    \  United States of America\n   Email: FredBaker.IETF@gmail.com\n"
  title: Authors' Addresses
