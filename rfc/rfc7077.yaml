- title: __initial_text__
  contents:
  - '               Update Notifications for Proxy Mobile IPv6

    '
- title: Abstract
  contents:
  - "Abstract\n   This document specifies protocol enhancements for allowing the local\n\
    \   mobility anchor in a Proxy Mobile IPv6 domain to asynchronously\n   notify\
    \ the mobile access gateway about changes related to a mobility\n   session. \
    \ These Update Notification messages are exchanged using a\n   new Mobility Header\
    \ message type specifically designed for this\n   purpose.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7077.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2013 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Conventions and Terminology .....................................4\n  \
    \    2.1. Conventions ................................................4\n    \
    \  2.2. Terminology ................................................4\n   3. Notification\
    \ Message - Usage Examples ...........................4\n   4. Message Formats\
    \ .................................................5\n      4.1. Update Notification\
    \ (UPN) ..................................5\n      4.2. Update Notification Acknowledgement\
    \ (UPA) ..................7\n   5. LMA Considerations ..............................................9\n\
    \      5.1. Constructing the Update Notification Message ..............10\n  \
    \    5.2. Receiving the Update Notification Acknowledgement\n           Message\
    \ ...................................................11\n   6. MAG Considerations\
    \ .............................................12\n      6.1. Receiving the Update\
    \ Notification Message .................12\n      6.2. Constructing the Update\
    \ Notification Acknowledgement\n           Message ...................................................15\n\
    \   7. Protocol Configuration Variables ...............................16\n  \
    \ 8. Security Considerations ........................................16\n   9.\
    \ Acknowledgements ...............................................17\n   10. IANA\
    \ Considerations ...........................................17\n   11. References\
    \ ....................................................19\n      11.1. Normative\
    \ References .....................................19\n      11.2. Informative\
    \ References ...................................19\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   In some situations, there is a need for the local mobility\
    \ anchor\n   (LMA) to send asynchronous notification messages to the mobile access\n\
    \   gateway (MAG) in the course of a mobility session.  These situations\n   include\
    \ changes to mobility session parameters and policy parameters.\n   In this context,\
    \ \"Asynchronous messages\" is used to mean messages\n   that are not synchronous\
    \ with the Proxy Binding Update and Proxy\n   Binding Acknowledgement messages\
    \ of the base Proxy Mobile IPv6\n   specification [RFC5213].  The base Proxy Mobile\
    \ IPv6 specification\n   does not have a provision for sending unsolicited Update\
    \ Notification\n   messages from the local mobility anchor to the mobile access\
    \ gateway.\n   Proxy Mobile IPv6 [RFC5213] is a network-based mobility management\n\
    \   protocol.  It is designed to provide IP mobility management support\n   to\
    \ a mobile node without requiring the participation of the mobile\n   node in\
    \ any IP mobility-related signaling.  The protocol defines two\n   mobility management\
    \ entities: the LMA and the MAG.  These entities\n   are responsible for managing\
    \ IP mobility management support for a\n   mobile node in a Proxy Mobile IPv6\
    \ domain.  The setup of the mobility\n   session is initiated by the mobile access\
    \ gateway by sending a Proxy\n   Binding Update message and acknowledged by the\
    \ local mobility anchor\n   in the Proxy Binding Acknowledgement message.  Once\
    \ the mobility\n   session is set up, currently there is no mechanism for the\
    \ local\n   mobility anchor to inform the mobile access gateway about changes\
    \ to\n   the mobility session or any parameters related to the mobility\n   session.\
    \  However, there are mechanisms in the Proxy Mobile IPv6\n   protocol that allow\
    \ a local mobility anchor to send signaling\n   messages to the mobile access\
    \ gateway asynchronously, as defined in\n   the Proxy Mobile IPv6 Heartbeat message\
    \ [RFC5847] or in the Binding\n   Revocation message [RFC5846], but these signaling\
    \ messages are\n   designed for a very specific purpose and are not sufficient\
    \ for\n   supporting a notification framework.\n   One such scenario where such\
    \ a mechanism is needed is when the local\n   mobility anchor wants to inform\
    \ the mobile access gateway that it\n   needs to re-register the mobility session\
    \ for a mobile node.  It is\n   possible to achieve a similar effect by using\
    \ a short lifetime for\n   the mobility sessions, but in several networks this\
    \ results in an\n   unacceptable, and mostly unnecessary, increase in the signaling\n\
    \   load and overhead.  A more suitable scenario would be to enable\n   demand-based\
    \ signaling from the local mobility anchor to one or more\n   mobile access gateways.\
    \  Another example is when there is a change in\n   a QoS policy [PMIPv6-QoS],\
    \ an IP flow mobility policy\n   [PMIPv6-FLOW-MOB], or an IPv4 traffic offload\
    \ policy [RFC6909] for a\n   mobility session.  In this case, the local mobility\
    \ anchor wants to\n   request that the mobile access gateway perform re-registration\
    \ of the\n   mobility session in order to update the policies associated with\
    \ the\n   mobility session of a mobile node.\n   This document defines a new Mobility\
    \ Header message for allowing the\n   local mobility anchor to send notification\
    \ messages to the mobile\n   access gateway and a corresponding Mobility Header\
    \ message for the\n   mobile access gateway to acknowledge the notification message.\
    \  The\n   purpose of the notification message is twofold: (1) to enable the\n\
    \   local mobility anchor to notify the mobile access gateway about the\n   updated\
    \ session parameters and (2) to enable the local mobility\n   anchor to request\
    \ that the mobile access gateway renegotiate the\n   session parameters.\n"
- title: 2.  Conventions and Terminology
  contents:
  - '2.  Conventions and Terminology

    '
- title: 2.1.  Conventions
  contents:
  - "2.1.  Conventions\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"\
    SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\"\
    , and \"OPTIONAL\" in this\n   document are to be interpreted as described in\
    \ RFC 2119 [RFC2119].\n"
- title: 2.2.  Terminology
  contents:
  - "2.2.  Terminology\n   All the mobility-related terms used in this document are\
    \ to be\n   interpreted as defined in the base Proxy Mobile IPv6 specifications\n\
    \   [RFC5213] and [RFC5844].\n"
- title: 3.  Notification Message - Usage Examples
  contents:
  - "3.  Notification Message - Usage Examples\n   Use Case 1: Consider a use case\
    \ where the local mobility anchor wants\n   the mobile access gateway to re-register\
    \ a specific mobility session.\n   MN     MAG       LMA\n   |------>|        |\
    \    1.  Mobile Node Attach\n   |       |------->|    2.  Proxy Binding Update\n\
    \   |       |<-------|    3.  Proxy Binding Acknowledgement\n   |       |========|\
    \    4.  Tunnel/Route Setup\n   |       |        |\n   |       |<-------|    5.\
    \  Update Notification (FORCE-REREGISTRATION)\n   |       |------->|    6.  Update\
    \ Notification Acknowledgement\n   |       |        |\n   |       |------->| \
    \   7.  Proxy Binding Update\n   |       |<-------|    8.  Proxy Binding Acknowledgement\n\
    \   |       |        |\n            Figure 1: Update Notification: FORCE-REREGISTRATION\n\
    \   Use Case 2: Consider a use case where the local mobility anchor wants\n  \
    \ to notify the mobile access gateway of the updated session\n   parameters, for\
    \ example, an updated QoS profile or an updated IPv4\n   offload policy.\n   MN\
    \     MAG     LMA\n   |------>|        |    1.  Mobile Node Attach\n   |     \
    \  |------->|    2.  Proxy Binding Update\n   |       |<-------|    3.  Proxy\
    \ Binding Acknowledgement\n   |       |========|    4.  Tunnel/Route Setup\n \
    \  |       |        |\n   |       |<-------|    5.  Update Notification\n   |\
    \       |        |           (UPDATE-SESSION-PARAMETERS)\n   |       |------->|\
    \    6.  Update Notification Acknowledgement\n   |       +        |    7.  MAG\
    \ applies the new policy option\n   |       |        |\n         Figure 2: Update\
    \ Notification: UPDATE-SESSION-PARAMETERS\n"
- title: 4.  Message Formats
  contents:
  - '4.  Message Formats

    '
- title: 4.1.  Update Notification (UPN)
  contents:
  - "4.1.  Update Notification (UPN)\n   The Update Notification is a Mobility Header\
    \ message that has an MH\n   Type value of 19.  It is used by the local mobility\
    \ anchor to notify\n   the mobile access gateway that some parameters related\
    \ to the\n   mobility session have changed.\n   The format of the Update Notification\
    \ message is as follows:\n   0                   1                   2       \
    \            3\n   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9\
    \ 0 1\n                                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                                   |           Sequence #          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    Notification Reason        |A|D|          Reserved         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                                                               |\n   .  \
    \                                                             .\n   .        \
    \                Mobility options                       .\n   .              \
    \                                                 .\n   |                    \
    \                                           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                   Figure 3: Update Notification Message\n   Sequence Number\n\
    \      This 16-bit unsigned integer is used by the local mobility anchor\n   \
    \   to match the received Update Notification Acknowledgement message\n      with\
    \ this Update Notification message.  This Sequence Number could\n      be a random\
    \ number and can be managed under the same variable used\n      in Proxy Mobile\
    \ IPv6 signaling messages [RFC5213].\n      Implementations MUST ensure that there\
    \ is no collision between the\n      Sequence Numbers of all outstanding Update\
    \ Notification messages\n      at any time.\n   Notification Reason\n      This\
    \ 16-bit unsigned integer indicates the Notification Reason\n      code.  This\
    \ code corresponds to the reason that the local mobility\n      anchor sent the\
    \ Update Notification to the mobile access gateway.\n      This field does not\
    \ contain any structure and MUST be treated as\n      an enumeration.  The reason\
    \ code can indicate a vendor-specific\n      reason if the semantics of the Update\
    \ Notification message are to\n      be based on the attached vendor-specific\
    \ options, not solely from\n      the reason code.  These attached options can\
    \ be deployment\n      specific and are not specified in this document.  The following\n\
    \      Notification Reason values are currently defined:\n      (0) -     Reserved\n\
    \                This value is currently reserved and cannot be used.\n      (1)\
    \ -     FORCE-REREGISTRATION\n                Request to re-register the session\
    \ by sending a Proxy\n                Binding Update for the mobility session.\n\
    \      (2) -     UPDATE-SESSION-PARAMETERS\n                Request to apply the\
    \ updated session parameters obtained\n                from the message on the\
    \ mobility session.\n      (3) -     VENDOR-SPECIFIC-REASON\n                This\
    \ Notification Reason is for vendor-specific use.\n                The processing\
    \ rules are to be based on the\n                Vendor-Specific Mobility option(s)\
    \ [RFC5094] present in\n                the message.\n      (4) -     ANI-PARAMS-REQUESTED\n\
    \                Request to send currently known Access Network\n            \
    \    Identifier (ANI) [RFC6757] parameters for the mobility\n                session.\n\
    \      (255) -   Reserved\n                This value is currently reserved and\
    \ cannot be used.\n   Acknowledgement Requested Flag ((A) Flag)\n      When this\
    \ flag is set to a value of (1), it is an indication that\n      the local mobility\
    \ anchor is requesting that the mobile access\n      gateway send an Update Notification\
    \ Acknowledgement message.  When\n      this flag is set to a value of (0), it\
    \ is an indication that the\n      local mobility anchor is not requesting any\
    \ Update Notification\n      Acknowledgement messages.\n   Retransmit Flag ((D)\
    \ Flag)\n      When this flag is set to a value of (1), it is an indication that\n\
    \      the message is a retransmitted message and has the same Sequence\n    \
    \  Number and other message contents as in the previously sent\n      message.\
    \  The (D) flag is set for retransmitted request messages,\n      to aid the reliable\
    \ detection of duplicate requests at the\n      receiver of the request message.\
    \  It is set when originating\n      requests that have not yet been acknowledged,\
    \ as an indication of\n      a possible duplicate due to a retransmission.  This\
    \ flag MUST be\n      cleared when sending a request for the first time for a\
    \ given\n      Sequence Number; otherwise, the sender MUST set this flag.\n  \
    \ Reserved\n      This field is unused for now.  The value MUST be initialized\
    \ to 0\n      by the sender and MUST be ignored by the receiver.\n   Mobility\
    \ Options\n      This variable-length field is of such length that the complete\n\
    \      Mobility Header is an integer multiple of 8 octets long; the Pad1\n   \
    \   and PadN options [RFC6275] can be used for padding.  This field\n      contains\
    \ zero or more TLV-encoded mobility options.  Any of the\n      Mobility Header\
    \ options, including Vendor-Specific Mobility\n      options [RFC5094], can be\
    \ included here.  The receiver MUST ignore\n      and skip any options that it\
    \ does not understand.  These mobility\n      options are used by the mobile access\
    \ gateway to identify the\n      specific binding for which the Update Notification\
    \ message is\n      sent.\n"
- title: 4.2.  Update Notification Acknowledgement (UPA)
  contents:
  - "4.2.  Update Notification Acknowledgement (UPA)\n   The Update Notification Acknowledgement\
    \ is a Mobility Header message\n   that has an MH Type value of 20.  The mobile\
    \ access gateway sends\n   this message in order to acknowledge that it has received\
    \ an Update\n   Notification message with the (A) flag set and to indicate the\
    \ status\n   after processing the message.\n   The format of the Update Notification\
    \ Acknowledgement message is as\n   follows:\n   0                   1       \
    \            2                   3\n   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9\
    \ 0 1 2 3 4 5 6 7 8 9 0 1\n                                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                                   |           Sequence #          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |   Status Code |                   Reserved                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                                                               |\n   .  \
    \                                                             .\n   .        \
    \                Mobility options                       .\n   .              \
    \                                                 .\n   |                    \
    \                                           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \           Figure 4: Update Notification Acknowledgement Message\n   Sequence\
    \ Number\n      This 16-bit unsigned integer is copied from the Update\n     \
    \ Notification message and is used for matching the Update\n      Notification\
    \ Acknowledgement message with the Update Notification\n      message.\n   Status\
    \ Code\n      This 8-bit unsigned integer indicates the status code and\n    \
    \  specifies the result of the processing of the Update Notification\n      message.\
    \  Status codes between 0 and 127 signify successful\n      processing of the\
    \ Update Notification message, and codes between\n      128 and 255 signify that\
    \ an error occurred during processing of\n      the Update Notification message.\
    \  The following status code values\n      are currently defined:\n      (0) -\
    \     SUCCESS\n                The mobile access gateway successfully processed\
    \ the\n                received Update Notification message.\n      (128) -  \
    \ FAILED-TO-UPDATE-SESSION-PARAMETERS\n                The mobile access gateway\
    \ was not able to apply the\n                session parameters sent by the local\
    \ mobility anchor in\n                the Update Notification message.\n     \
    \ (129) -   MISSING-VENDOR-SPECIFIC-OPTION\n                The received Update\
    \ Notification message does not have\n                the required Vendor-Specific\
    \ Mobility option(s) needed\n                for handling the message.\n   Reserved\n\
    \      This field is unused for now.  The value MUST be initialized to 0\n   \
    \   by the sender and MUST be ignored by the receiver.\n   Mobility Options\n\
    \      This variable-length field is of such length that the complete\n      Mobility\
    \ Header is an integer multiple of 8 octets long; the Pad1\n      and PadN options\
    \ [RFC6275] can be used for padding.  This field\n      contains zero or more\
    \ TLV-encoded mobility options.  Any of the\n      Mobility Header options, including\
    \ Vendor-Specific Mobility\n      options [RFC5094], can be included here.  The\
    \ receiver MUST ignore\n      and skip any options that it does not understand.\
    \  These mobility\n      options are used by the mobile access gateway to identify\
    \ the\n      specific binding for which the Update Notification Acknowledgement\n\
    \      message is sent.\n"
- title: 5.  LMA Considerations
  contents:
  - "5.  LMA Considerations\n   o  The local mobility anchor sends the Update Notification\
    \ message in\n      response to a condition that is specified in the Notification\n\
    \      Reason field.  The Notification Reason field in the Update\n      Notification\
    \ message MUST be set to a specific value that\n      identifies the reason for\
    \ which the Update Notification message is\n      being sent.  The Notification\
    \ Reason, based on the chosen value,\n      may require a specific action that\
    \ the mobile access gateway needs\n      to perform (for example, requiring re-registration\
    \ of a mobility\n      session).\n   o  The Update Notification message MUST include\
    \ either the Mobile\n      Node Identifier option [RFC4283] or the Mobile Node\
    \ Group\n      Identifier option [RFC6602].\n      *  If the Mobile Node Identifier\
    \ option is present, it indicates\n         that the Update Notification message\
    \ is sent for that specific\n         mobility session.\n      *  If the Mobile\
    \ Node Group Identifier option is present, it\n         indicates that the Update\
    \ Notification message is sent for the\n         set of mobility sessions identified\
    \ by the Group Identifier.\n         The Group Identifier is negotiated as part\
    \ of the initial Proxy\n         Mobile IPv6 signaling.  If the Group Identifier\
    \ is not\n         negotiated in the initial Proxy Mobile IPv6 signaling, a value\n\
    \         of (1) for the Group Identifier can always be used.  The Group\n   \
    \      Identifier value of (1) identifies all the mobility sessions\n        \
    \ established between that local mobility anchor and the mobile\n         access\
    \ gateway.\n   o  The Update Notification message MAY contain a modified session\n\
    \      parameter in the form of a mobility option (e.g., an IPv4 traffic\n   \
    \   offload option or a QoS option), so the mobile access gateway can\n      apply\
    \ them on the identified mobility session.\n"
- title: 5.1.  Constructing the Update Notification Message
  contents:
  - "5.1.  Constructing the Update Notification Message\n   The local mobility anchor,\
    \ when sending the Update Notification\n   message to the mobile access gateway,\
    \ has to construct the message as\n   specified below:\n   o  For requesting an\
    \ Acknowledgement message and an indication about\n      the result of processing\
    \ the message from the mobile access\n      gateway for the Update Notification\
    \ message, the (A) flag in the\n      Update Notification message MUST be set\
    \ to a value of (1);\n      otherwise, it MUST be set to a value of (0).  However,\
    \ if the\n      Notification Reason is set to a value of (1)\n      \"FORCE-REREGISTRATION\"\
    \ or (4) \"ANI-PARAMS-REQUESTED\", then it is\n      RECOMMENDED that the (A)\
    \ flag be set to a value of (0).  For\n      certain general notifications that\
    \ are informational in nature,\n      the local mobility anchor may choose not\
    \ to request\n      acknowledgement for the Update Notification message.\n   o\
    \  The Sequence Number field of the message MUST be initialized to a\n      random\
    \ number and increased monotonically for subsequent messages.\n      Once the\
    \ Sequence Number hits the maximum value, it should be\n      wrapped around to\
    \ 0.  Furthermore, if the message is a\n      retransmission of a previously sent\
    \ message, then the Sequence\n      Number value is not changed.\n   o  When using\
    \ IPv4 transport, the source address in the IPv4 header\n      MUST be set to\
    \ the local mobility anchor's IPv4 address\n      (IPv4-LMAA), and the destination\
    \ address in the IPv4 header MUST\n      be set to the IPv4-Proxy-CoA (Care-of\
    \ Address) of the mobile\n      access gateway.  The Mobility Header (without\
    \ the IPv6 header)\n      containing the Update Notification message is encapsulated\
    \ in a\n      UDP header with the destination port of 5436 [RFC5844].  If IPsec\n\
    \      Encapsulating Security Payload (ESP) [RFC4303] is used to protect\n   \
    \   signaling, the packet is processed using transport mode ESP.\n   o  The format\
    \ of the Update Notification message sent over IPv4 and\n      protected using\
    \ ESP is shown below:\n         IPv4 header (src=IPv4-LMAA, dst=IPv4-Proxy-CoA)\n\
    \           ESP header (in transport mode)\n             UDP header (sport=5436,\
    \ dport=5436)\n               Mobility Header (Update Notification)\n        \
    \         (one or more Mobility Header options)\n   o  When using IPv6 transport,\
    \ the source address in the IPv6 header\n      MUST be set to the local mobility\
    \ anchor's IPv6 address (LMAA).\n      The destination address in the IPv6 header\
    \ MUST be set to the\n      Proxy-CoA of the mobile access gateway.  The Mobility\
    \ Header is\n      part of the IPv6 headers.\n   o  The format of the Update Notification\
    \ message sent over IPv6 and\n      protected using ESP is shown below:\n    \
    \     IPv6 header (src=LMAA, dst=Proxy-CoA)\n           Mobility Header (Update\
    \ Notification)\n           ESP header (in transport mode)\n             (one\
    \ or more Mobility Header options)\n"
- title: 5.2.  Receiving the Update Notification Acknowledgement Message
  contents:
  - "5.2.  Receiving the Update Notification Acknowledgement Message\n   o  If the\
    \ local mobility anchor does not receive an Update\n      Notification Acknowledgement\
    \ message from the mobile access\n      gateway for the Update Notification message\
    \ with the (A) flag set,\n      then the local mobility anchor MUST retransmit\
    \ the message.  The\n      related considerations are as follows:\n      *  When\
    \ retransmitting an Update Notification message, the\n         Sequence Number\
    \ value and other message contents MUST be the\n         same as in the original\
    \ message.  The (D) flag in the message\n         MUST be set to a value of (1).\n\
    \      *  There MUST be a minimum delay of\n         MIN_DELAY_BETWEEN_UPDATE_NOTIFICATION_REPLAY\
    \ (Section 7), with\n         a default value of 1000 milliseconds, between two\
    \ retransmit\n         messages.\n      *  The message MUST be retransmitted up\
    \ to the number of times\n         defined by the configuration variable\n   \
    \      MAX_UPDATE_NOTIFICATION_RETRANSMIT_COUNT (Section 7), with a\n        \
    \ default value of (1).  If there is no Update Notification\n         Acknowledgement\
    \ message after the retransmission count reaches\n         the value defined by\
    \ the configuration variable\n         MAX_UPDATE_NOTIFICATION_RETRANSMIT_COUNT,\
    \ then the message MUST\n         be discarded, and the event SHOULD be logged.\n\
    \   o  If the local mobility anchor receives a Binding Error message with\n  \
    \    the Status field set to 2 as described in [RFC6275], this\n      indicates\
    \ that the mobile access gateway does not support the\n      Update Notification\
    \ message, and hence the local mobility anchor\n      MUST NOT send any further\
    \ Update Notification messages to that\n      mobile access gateway unless an\
    \ administrative action is taken.\n   o  When receiving an Update Notification\
    \ Acknowledgement message, the\n      local mobility anchor MUST verify the Mobility\
    \ Header as described\n      in Section 9.2 of [RFC6275].  If the packet is dropped\
    \ due to\n      failure of any of the Mobility Header test checks, the local\n\
    \      mobility anchor MUST follow the processing rules as described in\n    \
    \  Section 9.2 of [RFC6275].\n   o  Upon receiving the Update Notification Acknowledgement\
    \ message,\n      the local mobility anchor MUST verify that the received message\
    \ is\n      protected by the security association that is being used to\n    \
    \  protect the other signaling messages between those two peers.  For\n      example,\
    \ if the Proxy Binding Update and Proxy Binding\n      Acknowledgement messages\
    \ are protected using an IPsec security\n      association [RFC4301], then the\
    \ Update Notification\n      Acknowledgement message MUST have the IPsec protection\
    \ with the\n      currently established IPsec security association that is being\n\
    \      used for protecting the other Proxy Mobile IPv6 signaling\n      messages.\n\
    \   o  If the local mobility anchor receives an Update Notification\n      Acknowledgement\
    \ message with a failure status and a value of 128\n      or greater, then it\
    \ SHOULD log an error.\n   o  If the Sequence Number in the received Update Notification\n\
    \      Acknowledgement message does not match any of the Update\n      Notification\
    \ messages that the local mobility anchor sent, then\n      the message MUST be\
    \ discarded, and the message should be logged.\n   o  If the local mobility anchor\
    \ receives an Update Notification\n      Acknowledgement message from the mobile\
    \ access gateway for an\n      Update Notification message that did not have the\
    \ (A) flag set,\n      the local mobility anchor MUST process the received message\
    \ in the\n      same way as a response to an Update Notification message with\
    \ the\n      (A) flag set.\n"
- title: 6.  MAG Considerations
  contents:
  - '6.  MAG Considerations

    '
- title: 6.1.  Receiving the Update Notification Message
  contents:
  - "6.1.  Receiving the Update Notification Message\n   o  When receiving an Update\
    \ Notification message, the mobile access\n      gateway MUST verify the Mobility\
    \ Header as described in\n      Section 9.2. of [RFC6275].  If the packet is dropped\
    \ due to\n      failure of any of the Mobility Header test checks, the mobile\n\
    \      access gateway MUST follow the processing rules as described in\n     \
    \ Section 9.2 of [RFC6275].\n   o  Upon receiving the Update Notification message,\
    \ the mobile access\n      gateway MUST verify that the received packet is protected\
    \ by the\n      security association that is being used to protect the other\n\
    \      signaling messages between those two peers.  For example, if the\n    \
    \  Proxy Binding Update and Proxy Binding Acknowledgement messages\n      are\
    \ protected using an IPsec security association, then the Update\n      Notification\
    \ message MUST have the IPsec protection with the\n      currently established\
    \ IPsec security association that is being\n      used for protecting the other\
    \ Proxy Mobile IPv6 signaling\n      messages.\n   o  If the received Update Notification\
    \ message is a retransmission of\n      a previously received message, as identified\
    \ by the Sequence\n      Number, then the mobile access gateway MUST NOT handle\
    \ the message\n      as a new request.  The (D) flag is used as an indication\
    \ of a\n      retransmitted request, e.g., due to lost messages or the local\n\
    \      mobility anchor not seeing the requested update actions.  If the\n    \
    \  mobile access gateway has not seen the (potentially lost) initial\n      request\
    \ message, it MUST treat the received Update Notification\n      message (with\
    \ the (D) flag set) as an initial request and continue\n      processing based\
    \ on that.  If the mobile access gateway detects\n      that the request is a\
    \ retransmission based on the (D) flag and the\n      Sequence Number, then it\
    \ SHOULD redo the requested update action,\n      e.g., when the Acknowledgement\
    \ Requested ((A)) flag is not set.\n      The mobile access gateway MUST always\
    \ respond to the retransmitted\n      request if the (A) flag is set.\n   o  Upon\
    \ accepting the Update Notification message, the mobile access\n      gateway\
    \ MUST process the message and perform the actions based on\n      the Notification\
    \ Reason.\n      *  If the (A) flag in the message is set to a value of (1), the\n\
    \         mobile access gateway MUST send an Update Notification\n         Acknowledgement\
    \ message with the status code field set based on\n         the result of processing\
    \ the Update Notification message.\n      *  If the Notification Reason is set\
    \ to a value of (1)\n         \"FORCE-REREGISTRATION\", then the mobile access\
    \ gateway MUST\n         send a Proxy Binding Update message to the local mobility\n\
    \         anchor and obtain the updated session parameters for that\n        \
    \ mobility session.\n      *  If the Notification Reason is set to a value of\
    \ (2)\n         \"UPDATE-SESSION-PARAMETERS\", then the mobile access gateway\n\
    \         MUST apply the session parameters that are obtained from the\n     \
    \    Update Notification message in the form of mobility options.\n         However,\
    \ if the mobile access gateway is unable to apply the\n         received session\
    \ parameters, then the mobile access gateway\n         MUST apply the following\
    \ considerations:\n         +  If the received Update Notification message has\
    \ the (A) flag\n            in the message set to a value of (0), then the mobile\
    \ access\n            gateway MUST drop the received Update Notification message\n\
    \            and log the error.\n         +  If the received Update Notification\
    \ message has the (A) flag\n            in the message set to a value of (1),\
    \ then the mobile access\n            gateway MUST send an Update Notification\
    \ Acknowledgement\n            message with a status code value of 128\n     \
    \       (FAILED-TO-UPDATE-SESSION-PARAMETERS).\n      *  If the Notification Reason\
    \ is set to a value of (3)\n         \"VENDOR-SPECIFIC-REASON\", then the mobile\
    \ access gateway MUST\n         apply the considerations related to handling of\
    \ the\n         Vendor-Specific Mobility option [RFC5094] that is carried in\n\
    \         the Update Notification message.  However, if there is no\n        \
    \ Vendor-Specific Mobility option present in the message, the\n         mobile\
    \ access gateway MUST apply the following considerations:\n         +  If the\
    \ received Update Notification message has the (A) flag\n            in the message\
    \ set to a value of (0), then the mobile access\n            gateway MUST drop\
    \ the received Update Notification message\n            and log the error.\n \
    \        +  If the received Update Notification message has the (A) flag\n   \
    \         in the message set to a value of (1), then the mobile access\n     \
    \       gateway MUST send an Update Notification Acknowledgement\n           \
    \ message with a status code value of 129\n            (MISSING-VENDOR-SPECIFIC-OPTION).\n\
    \      *  If the Notification Reason is set to a value of (4)\n         \"ANI-PARAMS-REQUESTED\"\
    , then the mobile access gateway MUST\n         send a Proxy Binding Update message\
    \ to the local mobility\n         anchor with the Access Network Identifier option\
    \ [RFC6757].\n         The Access Network Identifier option MUST reflect the current\n\
    \         access network parameters for that mobility session as known to\n  \
    \       the mobile access gateway at the time of sending the Proxy\n         Binding\
    \ Update message.\n      *  For other Notification Reason values not reserved\
    \ by this\n         document, the processing required on the mobile access gateway\n\
    \         is out of scope for this document and will be specified for\n      \
    \   each Notification Reason defined by other documents.\n"
- title: 6.2.  Constructing the Update Notification Acknowledgement Message
  contents:
  - "6.2.  Constructing the Update Notification Acknowledgement Message\n   The mobile\
    \ access gateway, when sending the Update Notification\n   Acknowledgement message\
    \ to the local mobility anchor, has to\n   construct the message as specified\
    \ below:\n   o  The Sequence Number MUST be the same as the Sequence Number from\n\
    \      the received Update Notification message.\n   o  The Status field of the\
    \ Update Notification message MUST be set to\n      a value that reflects the\
    \ status of the processing of the Update\n      Notification request.  A value\
    \ of 0 (SUCCESS) indicates that the\n      handling of the Update Notification\
    \ message was successful.\n   o  The Update Notification Acknowledgement message\
    \ MUST contain\n      either the Mobile Node Identifier option or the Mobile Node\
    \ Group\n      Identifier option, copied from the Update Notification message.\n\
    \      Furthermore, the mobile access gateway MAY include other Mobility\n   \
    \   Header options.\n   o  The source address in the IP header of the Update Notification\n\
    \      Acknowledgement message MUST be set to the destination IP address\n   \
    \   of the received Update Notification message.\n   o  The destination address\
    \ in the IP header of the Update\n      Notification Acknowledgement message MUST\
    \ be set to the source\n      address of the received Update Notification message.\n\
    \   o  If IPsec ESP is used to protect signaling, the packet is processed\n  \
    \    using transport mode ESP.\n   o  The format of the Update Notification Acknowledgement\
    \ message sent\n      over IPv4 and protected using ESP is shown below:\n    \
    \  IPv4 header (src=IPv4-Proxy-CoA, dst=IPv4-LMAA)\n        ESP header (in transport\
    \ mode)\n          UDP header (sport=5436, dport=5436)\n            Mobility Header\
    \ (Update Notification Acknowledgement)\n              (one or more Mobility Header\
    \ options)\n   o  The format of the Update Notification Acknowledgement message\
    \ sent\n      over IPv6 and protected using ESP is shown below:\n      IPv6 header\
    \ (src=Proxy-CoA, dst=LMAA)\n        Mobility Header (Update Notification Acknowledgement)\n\
    \        ESP header (in transport mode)\n          (one or more Mobility Header\
    \ options)\n"
- title: 7.  Protocol Configuration Variables
  contents:
  - "7.  Protocol Configuration Variables\n   This specification defines the following\
    \ configuration variables that\n   control the Update Notification feature.\n\
    \   The mobility entities, the local mobility anchor, and the mobile\n   access\
    \ gateway have to allow these variables to be configured by the\n   system management.\
    \  The configured values for these protocol\n   variables have to survive server\
    \ reboots and service restarts.\n   MAX_UPDATE_NOTIFICATION_RETRANSMIT_COUNT\n\
    \      This variable specifies the maximum number of times a local\n      mobility\
    \ anchor can retransmit an Update Notification message\n      before it receives\
    \ an Update Notification Acknowledgement message.\n      The default value for\
    \ this parameter is 1.  The suggested range of\n      configured values for this\
    \ variable is between 0 and 5.\n   MIN_DELAY_BETWEEN_UPDATE_NOTIFICATION_REPLAY\n\
    \      This variable specifies the minimum delay in seconds before an\n      Update\
    \ Notification message is retransmitted.  The default value\n      for this parameter\
    \ is 1000 milliseconds.  The suggested range of\n      configured values for this\
    \ variable is between 500 and\n      5000 milliseconds.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   The Update Notification protocol described in\
    \ this specification is\n   for use between a local mobility anchor and a mobile\
    \ access gateway.\n   This specification defines two new Mobility Header messages:\
    \ Update\n   Notification messages and Update Notification Acknowledgement\n \
    \  messages.  These Mobility Header messages are to be protected using\n   the\
    \ same security mechanism that is used for protecting the Proxy\n   Mobile IPv6\
    \ signaling messages exchanged between a given local\n   mobility anchor and mobile\
    \ access gateway.\n   If IPsec is used, the IPsec security association that is\
    \ used for\n   protecting the Proxy Binding Update and Proxy Binding Acknowledgement\n\
    \   also needs to be used for protecting Update Notification and Update\n   Notification\
    \ Acknowledgement messages.  A Proxy Mobile IPv6\n   implementation and the IPsec\
    \ layer are typically able to communicate\n   with each other through an implementation-specific\
    \ interface, for\n   example, to exchange configuration and notification information.\n\
    \   The traffic selectors associated with the Security Policy Database\n   (SPD)\
    \ entry for protecting Proxy Binding Update and Proxy Binding\n   Acknowledgement\
    \ messages (Section 4.2 of [RFC5213]) have to be\n   extended to include the Mobility\
    \ Header Type values 19 and 20, which\n   have been allocated for Update Notification\
    \ and Update Notification\n   Acknowledgement messages, respectively.  Furthermore,\
    \ any time there\n   is rekeying of the IPsec security association between the\
    \ mobile\n   access gateway and the local mobility anchor, the newly established\n\
    \   IPsec security association will be used for protecting the Update\n   Notification\
    \ and Update Notification Acknowledgement messages.\n"
- title: 9.  Acknowledgements
  contents:
  - "9.  Acknowledgements\n   The authors would like to thank Basavaraj Patil, Rajeev\
    \ Koodli,\n   Lionel Morand, Itsuma Tanaka, Rajesh Pazhyannur, Carlos Jesus\n\
    \   Bernardos Cano, John Kaippallimalil, Brian Haberman, and other\n   members\
    \ of the NETEXT working group for all the comments and\n   discussions on the\
    \ document.\n   The authors would like to thank Barry Leiba, Robert Sparks, Carlos\n\
    \   Pignataro, Benoit Claise, Stephen Farrell, and Jari Arkko for their\n   inputs\
    \ to the document as part of the IESG review process.\n"
- title: 10.  IANA Considerations
  contents:
  - "10.  IANA Considerations\n   IANA has taken the following actions.\n   o  This\
    \ specification defines a new Mobility Header Type message,\n      Update Notification.\
    \  This Mobility Header message is described in\n      Section 4.1.  The type\
    \ value 19 for this message has been\n      allocated from the \"Mobility Header\
    \ Types - for the MH Type field\n      in the Mobility Header\" registry at\n\
    \      <http://www.iana.org/assignments/mobility-parameters>.\n   o  This specification\
    \ defines a new Mobility Header Type message,\n      Update Notification Acknowledgement.\
    \  This Mobility Header message\n      is described in Section 4.2.  The type\
    \ value 20 for this message\n      has been allocated from the \"Mobility Header\
    \ Types - for the MH\n      Type field in the Mobility Header\" registry at\n\
    \      <http://www.iana.org/assignments/mobility-parameters>.\n   o  This specification\
    \ defines a new registry for Notification\n      Reasons.  It is called the \"\
    Update Notification Reasons Registry\".\n      This registry has been created\
    \ under the \"Mobile IPv6 Parameters\"\n      registry at <http://www.iana.org/assignments/mobility-parameters>.\n\
    \      The Notification Reason is a field in the Update Notification\n      message\
    \ (Section 4.1).  The number space for the Notification\n      Reason field needs\
    \ to be managed by IANA, under the \"Update\n      Notification Reason Registry\"\
    .  This specification reserves the\n      following type values.  The allocation\
    \ policy for this field is\n      \"Specification Required\" [RFC5226].\n    \
    \     +=====+===========================+====================+\n         |Value|\
    \       Description         |     Reference      |\n         +=====+===========================+====================+\n\
    \         | 0   | Reserved                  |     [RFC7077]      |\n         +=====+================================================+\n\
    \         | 1   | FORCE-REREGISTRATION      |     [RFC7077]      |\n         +=====+================================================+\n\
    \         | 2   | UPDATE-SESSION-PARAMETERS |     [RFC7077]      |\n         +=====+================================================+\n\
    \         | 3   | VENDOR-SPECIFIC-REASON    |     [RFC7077]      |\n         +=====+================================================+\n\
    \         | 4   | ANI-PARAMS-REQUESTED      |     [RFC7077]      |\n         +=====+================================================+\n\
    \         |255  | Reserved                  |     [RFC7077]      |\n         +=====+================================================+\n\
    \   o  This specification defines a new registry for Status.  It is\n      called\
    \ the \"Update Notification Acknowledgement Status Registry\".\n      This registry\
    \ has been created under the \"Mobile IPv6 Parameters\"\n      registry at <http://www.iana.org/assignments/mobility-parameters>.\n\
    \      The status is a field in the Update Notification Acknowledgement\n    \
    \  message (Section 4.2).  The number space for the Status field\n      needs\
    \ to be managed by IANA, under the \"Update Notification\n      Acknowledgement\
    \ Status Registry\".  This specification reserves the\n      following type values.\
    \  The allocation policy for this field is\n      \"Specification Required\".\
    \  Status codes between 0 and 127 signify\n      successful processing of the\
    \ Update Notification message, and\n      codes between 128 and 255 signify that\
    \ an error occurred during\n      processing of the Update Notification message.\n\
    \         +=====+=====================================+=============+\n      \
    \   |Value|       Description                   |  Reference  |\n         +=====+=====================================+=============+\n\
    \         | 0   | SUCCESS                             |  [RFC7077]  |\n      \
    \   +=====+=====================================+=============+\n         |128\
    \  | FAILED-TO-UPDATE-SESSION-PARAMETERS |  [RFC7077]  |\n         +=====+=====================================+=============+\n\
    \         |129  | MISSING-VENDOR-SPECIFIC-OPTION      |  [RFC7077]  |\n      \
    \   +=====+=====================================+=============+\n"
- title: 11.  References
  contents:
  - '11.  References

    '
- title: 11.1.  Normative References
  contents:
  - "11.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC4283]  Patel, A., Leung, K., Khalil, M., Akhtar, H., and K.\n\
    \              Chowdhury, \"Mobile Node Identifier Option for Mobile IPv6\n  \
    \            (MIPv6)\", RFC 4283, November 2005.\n   [RFC5094]  Devarapalli, V.,\
    \ Patel, A., and K. Leung, \"Mobile IPv6\n              Vendor Specific Option\"\
    , RFC 5094, December 2007.\n   [RFC5213]  Gundavelli, S., Leung, K., Devarapalli,\
    \ V., Chowdhury, K.,\n              and B. Patil, \"Proxy Mobile IPv6\", RFC 5213,\
    \ August 2008.\n   [RFC5844]  Wakikawa, R. and S. Gundavelli, \"IPv4 Support for\
    \ Proxy\n              Mobile IPv6\", RFC 5844, May 2010.\n   [RFC6275]  Perkins,\
    \ C., Johnson, D., and J. Arkko, \"Mobility Support\n              in IPv6\",\
    \ RFC 6275, July 2011.\n   [RFC6602]  Abinader, F., Gundavelli, S., Leung, K.,\
    \ Krishnan, S., and\n              D. Premec, \"Bulk Binding Update Support for\
    \ Proxy Mobile\n              IPv6\", RFC 6602, May 2012.\n"
- title: 11.2.  Informative References
  contents:
  - "11.2.  Informative References\n   [PMIPv6-FLOW-MOB]\n              Bernardos,\
    \ CJ., Ed., \"Proxy Mobile IPv6 Extensions to\n              Support Flow Mobility\"\
    , Work in Progress, October 2013.\n   [PMIPv6-QoS]\n              Liebsch, M.,\
    \ Seite, P., Yokota, H., Korhonen, J., and S.\n              Gundavelli, \"Quality\
    \ of Service Option for Proxy Mobile\n              IPv6\", Work in Progress,\
    \ November 2013.\n   [RFC4301]  Kent, S. and K. Seo, \"Security Architecture for\
    \ the\n              Internet Protocol\", RFC 4301, December 2005.\n   [RFC4303]\
    \  Kent, S., \"IP Encapsulating Security Payload (ESP)\", RFC\n              4303,\
    \ December 2005.\n   [RFC5226]  Narten, T. and H. Alvestrand, \"Guidelines for\
    \ Writing an\n              IANA Considerations Section in RFCs\", BCP 26, RFC\
    \ 5226,\n              May 2008.\n   [RFC5846]  Muhanna, A., Khalil, M., Gundavelli,\
    \ S., Chowdhury, K.,\n              and P. Yegani, \"Binding Revocation for IPv6\
    \ Mobility\", RFC\n              5846, June 2010.\n   [RFC5847]  Devarapalli,\
    \ V., Koodli, R., Lim, H., Kant, N., Krishnan,\n              S., and J. Laganier,\
    \ \"Heartbeat Mechanism for Proxy Mobile\n              IPv6\", RFC 5847, June\
    \ 2010.\n   [RFC6757]  Gundavelli, S., Korhonen, J., Grayson, M., Leung, K., and\n\
    \              R. Pazhyannur, \"Access Network Identifier (ANI) Option for\n \
    \             Proxy Mobile IPv6\", RFC 6757, October 2012.\n   [RFC6909]  Gundavelli,\
    \ S., Zhou, X., Korhonen, J., Feige, G., and R.\n              Koodli, \"IPv4\
    \ Traffic Offload Selector Option for Proxy\n              Mobile IPv6\", RFC\
    \ 6909, April 2013.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Suresh Krishnan\n   Ericsson\n   8400 Blvd Decarie\n \
    \  Town of Mount Royal, Quebec\n   Canada\n   Phone: +1 514 345 7900 x42871\n\
    \   EMail: suresh.krishnan@ericsson.com\n   Sri Gundavelli\n   Cisco\n   170 West\
    \ Tasman Drive\n   San Jose, CA  95134\n   USA\n   EMail: sgundave@cisco.com\n\
    \   Marco Liebsch\n   NEC\n   Kurfuersten-Anlage 36\n   D-69115 Heidelberg\n \
    \  Germany\n   EMail: marco.liebsch@neclab.eu\n   Hidetoshi Yokota\n   KDDI\n\
    \   EMail: yokota@kddilabs.jp\n   Jouni Korhonen\n   Broadcom\n   Porkkalankatu\
    \ 24\n   Helsinki  FIN-00180\n   Finland\n   EMail: jouni.nospam@gmail.com\n"
