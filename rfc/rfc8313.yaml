- title: __initial_text__
  contents:
  - '          Use of Multicast across Inter-domain Peering Points

    '
- title: Abstract
  contents:
  - "Abstract\n   This document examines the use of Source-Specific Multicast (SSM)\n\
    \   across inter-domain peering points for a specified set of deployment\n   scenarios.\
    \  The objectives are to (1) describe the setup process for\n   multicast-based\
    \ delivery across administrative domains for these\n   scenarios and (2) document\
    \ supporting functionality to enable this\n   process.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo documents an Internet Best Current Practice.\n\
    \   This document is a product of the Internet Engineering Task Force\n   (IETF).\
    \  It represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   BCPs is available in Section\
    \ 2 of RFC 7841.\n   Information about the current status of this document, any\
    \ errata,\n   and how to provide feedback on it may be obtained at\n   https://www.rfc-editor.org/info/rfc8313.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2018 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (https://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n\
    \   2. Overview of Inter-domain Multicast Application Transport ........6\n  \
    \ 3. Inter-domain Peering Point Requirements for Multicast ...........7\n    \
    \  3.1. Native Multicast ...........................................8\n      3.2.\
    \ Peering Point Enabled with GRE Tunnel .....................10\n      3.3. Peering\
    \ Point Enabled with AMT - Both Domains\n           Multicast Enabled .........................................12\n\
    \      3.4. Peering Point Enabled with AMT - AD-2 Not\n           Multicast Enabled\
    \ .........................................14\n      3.5. AD-2 Not Multicast Enabled\
    \ - Multiple AMT Tunnels\n           through AD-2 ..............................................16\n\
    \   4. Functional Guidelines ..........................................18\n  \
    \    4.1. Network Interconnection Transport Guidelines ..............18\n    \
    \       4.1.1. Bandwidth Management ...............................19\n      4.2.\
    \ Routing Aspects and Related Guidelines ....................20\n           4.2.1.\
    \ Native Multicast Routing Aspects ...................21\n           4.2.2. GRE\
    \ Tunnel over Interconnecting Peering Point ......22\n           4.2.3. Routing\
    \ Aspects with AMT Tunnels ...................22\n           4.2.4. Public Peering\
    \ Routing Aspects .....................24\n      4.3. Back-Office Functions -\
    \ Provisioning and Logging\n           Guidelines ................................................26\n\
    \           4.3.1. Provisioning Guidelines ............................26\n  \
    \         4.3.2. Inter-domain Authentication Guidelines .............28\n    \
    \       4.3.3. Log-Management Guidelines ..........................28\n      4.4.\
    \ Operations - Service Performance and Monitoring\n           Guidelines ................................................30\n\
    \      4.5. Client Reliability Models / Service Assurance Guidelines ..32\n  \
    \    4.6. Application Accounting Guidelines .........................32\n   5.\
    \ Troubleshooting and Diagnostics ................................32\n   6. Security\
    \ Considerations ........................................33\n      6.1. DoS Attacks\
    \ (against State and Bandwidth) .................33\n      6.2. Content Security\
    \ ..........................................35\n      6.3. Peering Encryption\
    \ ........................................37\n      6.4. Operational Aspects .......................................37\n\
    \   7. Privacy Considerations .........................................39\n  \
    \ 8. IANA Considerations ............................................40\n   9.\
    \ References .....................................................40\n      9.1.\
    \ Normative References ......................................40\n      9.2. Informative\
    \ References ....................................42\n   Acknowledgments ...................................................43\n\
    \   Authors' Addresses ................................................44\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Content and data from several types of applications (e.g.,\
    \ live video\n   streaming, software downloads) are well suited for delivery via\n\
    \   multicast means.  The use of multicast for delivering such content or\n  \
    \ other data offers significant savings in terms of utilization of\n   resources\
    \ in any given administrative domain.  End User (EU) demand\n   for such content\
    \ or other data is growing.  Often, this requires\n   transporting the content\
    \ or other data across administrative domains\n   via inter-domain peering points.\n\
    \   The objectives of this document are twofold:\n   o  Describe the technical\
    \ process and establish guidelines for\n      setting up multicast-based delivery\
    \ of application content or\n      other data across inter-domain peering points\
    \ via a set of\n      use cases (where \"Use Case 3.1\" corresponds to Section\
    \ 3.1,\n      \"Use Case 3.2\" corresponds to Section 3.2, etc.).\n   o  Catalog\
    \ all required exchanges of information between the\n      administrative domains\
    \ to support multicast-based delivery.  This\n      enables operators to initiate\
    \ necessary processes to support\n      inter-domain peering with multicast.\n\
    \   The scope and assumptions for this document are as follows:\n   o  Administrative\
    \ Domain 1 (AD-1) sources content to one or more EUs\n      in one or more Administrative\
    \ Domain 2 (AD-2) entities.  AD-1 and\n      AD-2 want to use IP multicast to\
    \ allow support for large and\n      growing EU populations, with a minimum amount\
    \ of duplicated\n      traffic to send across network links.\n      *  This document\
    \ does not detail the case where EUs are\n         originating content.  To support\
    \ that additional service, it is\n         recommended that some method (outside\
    \ the scope of this\n         document) be used by which the content from EUs\
    \ is transmitted\n         to the application in AD-1 and AD-1 can send out the\
    \ traffic as\n         IP multicast.  From that point on, the descriptions in\
    \ this\n         document apply, except that they are not complete because they\n\
    \         do not cover the transport or operational aspects of the leg\n     \
    \    from the EU to AD-1.\n      *  This document does not detail the case where\
    \ AD-1 and AD-2 are\n         not directly connected to each other and are instead\
    \ connected\n         via one or more other ADs (as opposed to a peering point)\
    \ that\n         serve as transit providers.  The cases described in this\n  \
    \       document where tunnels are used between AD-1 and AD-2 can be\n       \
    \  applied to such scenarios, but SLA (\"Service Level Agreement\")\n        \
    \ control, for example, would be different.  Additional issues\n         will\
    \ likely exist as well in such scenarios.  This topic is\n         left for further\
    \ study.\n   o  For the purposes of this document, the term \"peering point\"\
    \ refers\n      to a network connection (\"link\") between two administrative\n\
    \      network domains over which traffic is exchanged between them.\n      This\
    \ is also referred to as a Network-to-Network Interface (NNI).\n      Unless otherwise\
    \ noted, it is assumed that the peering point is a\n      private peering point,\
    \ where the network connection is a\n      physically or virtually isolated network\
    \ connection solely between\n      AD-1 and AD-2.  The other case is that of a\
    \ broadcast peering\n      point, which is a common option in public Internet\
    \ Exchange Points\n      (IXPs).  See Section 4.2.4 for more details.\n   o  AD-1\
    \ is enabled with native multicast.  A peering point exists\n      between AD-1\
    \ and AD-2.\n   o  It is understood that several protocols are available for this\n\
    \      purpose, including Protocol-Independent Multicast - Sparse Mode\n     \
    \ (PIM-SM) and Protocol-Independent Multicast - Source-Specific\n      Multicast\
    \ (PIM-SSM) [RFC7761], the Internet Group Management\n      Protocol (IGMP) [RFC3376],\
    \ and Multicast Listener Discovery (MLD)\n      [RFC3810].\n   o  As described\
    \ in Section 2, the source IP address of the (so-called\n      \"(S,G)\") multicast\
    \ stream in the originating AD (AD-1) is known.\n      Under this condition, using\
    \ PIM-SSM is beneficial, as it allows\n      the receiver's upstream router to\
    \ send a join message directly to\n      the source without the need to invoke\
    \ an intermediate Rendezvous\n      Point (RP).  The use of SSM also presents\
    \ an improved threat\n      mitigation profile against attack, as described in\
    \ [RFC4609].\n      Hence, in the case of inter-domain peering, it is recommended\
    \ that\n      only SSM protocols be used; the setup of inter-domain peering for\n\
    \      ASM (Any-Source Multicast) is out of scope for this document.\n   o  The\
    \ rest of this document assumes that PIM-SSM and BGP are used\n      across the\
    \ peering point, plus Automatic Multicast Tunneling (AMT)\n      [RFC7450] and/or\
    \ Generic Routing Encapsulation (GRE), according to\n      the scenario in question.\
    \  The use of other protocols is beyond\n      the scope of this document.\n \
    \  o  AMT is set up at the peering point if either the peering point or\n    \
    \  AD-2 is not multicast enabled.  It is assumed that an AMT relay\n      will\
    \ be available to a client for multicast delivery.  The\n      selection of an\
    \ optimal AMT relay by a client is out of scope for\n      this document.  Note\
    \ that using AMT is necessary only when native\n      multicast is unavailable\
    \ in the peering point (Use Case 3.3) or in\n      the downstream administrative\
    \ domain (Use Cases 3.4 and 3.5).\n   o  It is assumed that the collection of\
    \ billing data is done at the\n      application level and is not considered to\
    \ be a networking issue.\n      The settlements process for EU billing and/or\
    \ inter-provider\n      billing is out of scope for this document.\n   o  Inter-domain\
    \ network connectivity troubleshooting is only\n      considered within the context\
    \ of a cooperative process between the\n      two domains.\n   This document also\
    \ attempts to identify ways by which the peering\n   process can be improved.\
    \  Development of new methods for improvement\n   is beyond the scope of this\
    \ document.\n"
- title: 2.  Overview of Inter-domain Multicast Application Transport
  contents:
  - "2.  Overview of Inter-domain Multicast Application Transport\n   A multicast-based\
    \ application delivery scenario is as follows:\n   o  Two independent administrative\
    \ domains are interconnected via a\n      peering point.\n   o  The peering point\
    \ is either multicast enabled (end-to-end native\n      multicast across the two\
    \ domains) or connected by one of two\n      possible tunnel types:\n      * \
    \ A GRE tunnel [RFC2784] allowing multicast tunneling across the\n         peering\
    \ point, or\n      *  AMT [RFC7450].\n   o  A service provider controls one or\
    \ more application sources in\n      AD-1 that will send multicast IP packets\
    \ via one or more (S,G)s\n      (multicast traffic flows; see Section 4.2.1 if\
    \ you are unfamiliar\n      with IP multicast).  It is assumed that the service\
    \ being provided\n      is suitable for delivery via multicast (e.g., live video\
    \ streaming\n      of popular events, software downloads to many devices) and\
    \ that\n      the packet streams will be carried by a suitable multicast\n   \
    \   transport protocol.\n   o  An EU controls a device connected to AD-2, which\
    \ runs an\n      application client compatible with the service provider's\n \
    \     application source.\n   o  The application client joins appropriate (S,G)s\
    \ in order to\n      receive the data necessary to provide the service to the\
    \ EU.  The\n      mechanisms by which the application client learns the appropriate\n\
    \      (S,G)s are an implementation detail of the application and are out\n  \
    \    of scope for this document.\n   The assumption here is that AD-1 has ultimate\
    \ responsibility for\n   delivering the multicast-based service on behalf of the\
    \ content\n   source(s).  All relevant interactions between the two domains\n\
    \   described in this document are based on this assumption.\n   Note that AD-2\
    \ may be an independent network domain (e.g., a Tier 1\n   network operator domain).\
    \  Alternately, AD-2 could also be an\n   enterprise network domain operated by\
    \ a single customer of AD-1.  The\n   peering point architecture and requirements\
    \ may have some unique\n   aspects associated with enterprise networks; see Section\
    \ 3.\n   The use cases describing various architectural configurations for\n \
    \  multicast distribution, along with associated requirements, are\n   described\
    \ in Section 3.  Section 4 contains a comprehensive list of\n   pertinent information\
    \ that needs to be exchanged between the two\n   domains in order to support functions\
    \ to enable application\n   transport.\n"
- title: 3.  Inter-domain Peering Point Requirements for Multicast
  contents:
  - "3.  Inter-domain Peering Point Requirements for Multicast\n   The transport of\
    \ applications using multicast requires that the\n   inter-domain peering point\
    \ be enabled to support such a process.\n   This section presents five use cases\
    \ for consideration.\n"
- title: 3.1.  Native Multicast
  contents:
  - "3.1.  Native Multicast\n   This use case involves end-to-end native multicast\
    \ between the two\n   administrative domains, and the peering point is also native\n\
    \   multicast enabled.  See Figure 1.\n      -------------------             \
    \  -------------------\n     /       AD-1        \\             /        AD-2\
    \       \\\n    / (Multicast Enabled) \\           / (Multicast Enabled) \\\n\
    \   /                       \\         /                       \\\n   | +----+\
    \                |         |                       |\n   | |    |       +------+\
    \ |         |  +------+             |   +----+\n   | | AS |------>|  BR  |-|---------|->|\
    \  BR  |-------------|-->| EU |\n   | |    |       +------+ |   I1    |  +------+\
    \             |I2 +----+\n   \\ +----+                /         \\           \
    \            /\n    \\                     /           \\                    \
    \ /\n     \\                   /             \\                   /\n      -------------------\
    \               -------------------\n   AD = Administrative Domain (independent\
    \ autonomous system)\n   AS = multicast (e.g., content) Application Source\n \
    \  BR = Border Router\n   I1 = AD-1 and AD-2 multicast interconnection (e.g.,\
    \ MP-BGP)\n   I2 = AD-2 and EU multicast connection\n      Figure 1: Content Distribution\
    \ via End-to-End Native Multicast\n   Advantages of this configuration:\n   o\
    \  Most efficient use of bandwidth in both domains.\n   o  Fewer devices in the\
    \ path traversed by the multicast stream when\n      compared to an AMT-enabled\
    \ peering point.\n   From the perspective of AD-1, the one disadvantage associated\
    \ with\n   native multicast to AD-2 instead of individual unicast to every EU\
    \ in\n   AD-2 is that it does not have the ability to count the number of EUs\n\
    \   as well as the transmitted bytes delivered to them.  This information\n  \
    \ is relevant from the perspective of customer billing and operational\n   logs.\
    \  It is assumed that such data will be collected by the\n   application layer.\
    \  The application-layer mechanisms for generating\n   this information need to\
    \ be robust enough so that all pertinent\n   requirements for the source provider\
    \ and the AD operator are\n   satisfactorily met.  The specifics of these methods\
    \ are beyond the\n   scope of this document.\n   Architectural guidelines for\
    \ this configuration are as follows:\n   a.  Dual homing for peering points between\
    \ domains is recommended as\n       a way to ensure reliability with full BGP\
    \ table visibility.\n   b.  If the peering point between AD-1 and AD-2 is a controlled\n\
    \       network environment, then bandwidth can be allocated accordingly\n   \
    \    by the two domains to permit the transit of non-rate-adaptive\n       multicast\
    \ traffic.  If this is not the case, then the multicast\n       traffic must support\
    \ congestion control via any of the mechanisms\n       described in Section 4.1\
    \ of [BCP145].\n   c.  The sending and receiving of multicast traffic between\
    \ two\n       domains is typically determined by local policies associated with\n\
    \       each domain.  For example, if AD-1 is a service provider and AD-2\n  \
    \     is an enterprise, then AD-1 may support local policies for\n       traffic\
    \ delivery to, but not traffic reception from, AD-2.\n       Another example is\
    \ the use of a policy by which AD-1 delivers\n       specified content to AD-2\
    \ only if such delivery has been accepted\n       by contract.\n   d.  It is assumed\
    \ that relevant information on multicast streams\n       delivered to EUs in AD-2\
    \ is collected by available capabilities\n       in the application layer.  The\
    \ precise nature and formats of the\n       collected information will be determined\
    \ by directives from the\n       source owner and the domain operators.\n"
- title: 3.2.  Peering Point Enabled with GRE Tunnel
  contents:
  - "3.2.  Peering Point Enabled with GRE Tunnel\n   The peering point is not native\
    \ multicast enabled in this use case.\n   There is a GRE tunnel provisioned over\
    \ the peering point.  See\n   Figure 2.\n       -------------------          \
    \    -------------------\n      /       AD-1        \\            /        AD-2\
    \       \\\n     / (Multicast Enabled) \\          / (Multicast Enabled) \\\n\
    \    /                       \\        /                       \\\n    | +----+\
    \          +---+ |  (I1)  | +---+                 |\n    | |    |   +--+   |uBR|-|--------|-|uBR|\
    \   +--+          |   +----+\n    | | AS |-->|BR|   +---+-|        | +---+   |BR|\
    \ -------->|-->| EU |\n    | |    |   +--+<........|........|........>+--+   \
    \       |I2 +----+\n    \\ +----+                /   I1   \\                 \
    \      /\n     \\                     /   GRE    \\                     /\n  \
    \    \\                   /   Tunnel   \\                   /\n       -------------------\
    \              -------------------\n   AD = Administrative Domain (independent\
    \ autonomous system)\n   AS = multicast (e.g., content) Application Source\n \
    \  uBR = unicast Border Router - not necessarily multicast enabled;\n        \
    \ may be the same router as BR\n   BR = Border Router - for multicast\n   I1 =\
    \ AD-1 and AD-2 multicast interconnection (e.g., MP-BGP)\n   I2 = AD-2 and EU\
    \ multicast connection\n               Figure 2: Content Distribution via GRE\
    \ Tunnel\n   In this case, interconnection I1 between AD-1 and AD-2 in Figure\
    \ 2 is\n   multicast enabled via a GRE tunnel [RFC2784] between the two BRs and\n\
    \   encapsulating the multicast protocols across it.\n   Normally, this approach\
    \ is chosen if the uBR physically connected to\n   the peering link cannot or\
    \ should not be enabled for IP multicast.\n   This approach may also be beneficial\
    \ if the BR and uBR are the same\n   device but the peering link is a broadcast\
    \ domain (IXP); see\n   Section 4.2.4.\n   The routing configuration is basically\
    \ unchanged: instead of running\n   BGP (SAFI-2) (\"SAFI\" stands for \"Subsequent\
    \ Address Family\n   Identifier\") across the native IP multicast link between\
    \ AD-1 and\n   AD-2, BGP (SAFI-2) is now run across the GRE tunnel.\n   Advantages\
    \ of this configuration:\n   o  Highly efficient use of bandwidth in both domains,\
    \ although not as\n      efficient as the fully native multicast use case (Section\
    \ 3.1).\n   o  Fewer devices in the path traversed by the multicast stream when\n\
    \      compared to an AMT-enabled peering point.\n   o  Ability to support partial\
    \ and/or incremental IP multicast\n      deployments in AD-1 and/or AD-2: only\
    \ the path or paths between\n      the AS/BR (AD-1) and the BR/EU (AD-2) need\
    \ to be multicast\n      enabled.  The uBRs may not support IP multicast or enabling\
    \ it\n      could be seen as operationally risky on that important edge node,\n\
    \      whereas dedicated BR nodes for IP multicast may (at least\n      initially)\
    \ be more acceptable.  The BR can also be located such\n      that only parts\
    \ of the domain may need to support native IP\n      multicast (e.g., only the\
    \ core in AD-1 but not edge networks\n      towards the uBR).\n   o  GRE is an\
    \ existing technology and is relatively simple to\n      implement.\n   Disadvantages\
    \ of this configuration:\n   o  Per Use Case 3.1, current router technology cannot\
    \ count the\n      number of EUs or the number of bytes transmitted.\n   o  The\
    \ GRE tunnel requires manual configuration.\n   o  The GRE tunnel must be established\
    \ prior to starting the stream.\n   o  The GRE tunnel is often left pinned up.\n\
    \   Architectural guidelines for this configuration include the\n   following:\n\
    \   Guidelines (a) through (d) are the same as those described in\n   Use Case\
    \ 3.1.  Two additional guidelines are as follows:\n   e.  GRE tunnels are typically\
    \ configured manually between peering\n       points to support multicast delivery\
    \ between domains.\n   f.  It is recommended that the GRE tunnel (tunnel server)\n\
    \       configuration in the source network be such that it only\n       advertises\
    \ the routes to the application sources and not to the\n       entire network.\
    \  This practice will prevent unauthorized delivery\n       of applications through\
    \ the tunnel (for example, if the\n       application (e.g., content) is not part\
    \ of an agreed-upon\n       inter-domain partnership).\n"
- title: 3.3.  Peering Point Enabled with AMT - Both Domains Multicast Enabled
  contents:
  - "3.3.  Peering Point Enabled with AMT - Both Domains Multicast Enabled\n   It\
    \ is assumed that both administrative domains in this use case are\n   native\
    \ multicast enabled here; however, the peering point is not.\n   The peering point\
    \ is enabled with AMT.  The basic configuration is\n   depicted in Figure 3.\n\
    \       -------------------              -------------------\n      /       AD-1\
    \        \\            /        AD-2       \\\n     / (Multicast Enabled) \\ \
    \         / (Multicast Enabled) \\\n    /                       \\        /  \
    \                     \\\n    | +----+          +---+ |   I1   | +---+       \
    \          |\n    | |    |   +--+   |uBR|-|--------|-|uBR|   +--+          | \
    \  +----+\n    | | AS |-->|AR|   +---+-|        | +---+   |AG| -------->|-->|\
    \ EU |\n    | |    |   +--+<........|........|........>+--+          |I2 +----+\n\
    \    \\ +----+                /  AMT   \\                       /\n     \\   \
    \                  /  Tunnel  \\                     /\n      \\             \
    \      /            \\                   /\n       -------------------       \
    \       -------------------\n   AD = Administrative Domain (independent autonomous\
    \ system)\n   AS = multicast (e.g., content) Application Source\n   AR = AMT Relay\n\
    \   AG = AMT Gateway\n   uBR = unicast Border Router - not multicast enabled;\n\
    \         also, either AR = uBR (AD-1) or uBR = AG (AD-2)\n   I1 = AMT interconnection\
    \ between AD-1 and AD-2\n   I2 = AD-2 and EU multicast connection\n          \
    \  Figure 3: AMT Interconnection between AD-1 and AD-2\n   Advantages of this\
    \ configuration:\n   o  Highly efficient use of bandwidth in AD-1.\n   o  AMT\
    \ is an existing technology and is relatively simple to\n      implement.  Attractive\
    \ properties of AMT include the following:\n      *  Dynamic interconnection between\
    \ the gateway-relay pair across\n         the peering point.\n      *  Ability\
    \ to serve clients and servers with differing policies.\n   Disadvantages of this\
    \ configuration:\n   o  Per Use Case 3.1 (AD-2 is native multicast), current router\n\
    \      technology cannot count the number of EUs or the number of bytes\n    \
    \  transmitted to all EUs.\n   o  Additional devices (AMT gateway and relay pairs)\
    \ may be introduced\n      into the path if these services are not incorporated\
    \ into the\n      existing routing nodes.\n   o  Currently undefined mechanisms\
    \ for the AG to automatically select\n      the optimal AR.\n   Architectural\
    \ guidelines for this configuration are as follows:\n   Guidelines (a) through\
    \ (d) are the same as those described in\n   Use Case 3.1.  In addition,\n   e.\
    \  It is recommended that AMT relay and gateway pairs be configured\n       at\
    \ the peering points to support multicast delivery between\n       domains.  AMT\
    \ tunnels will then configure dynamically across the\n       peering points once\
    \ the gateway in AD-2 receives the (S,G)\n       information from the EU.\n"
- title: 3.4.  Peering Point Enabled with AMT - AD-2 Not Multicast Enabled
  contents:
  - "3.4.  Peering Point Enabled with AMT - AD-2 Not Multicast Enabled\n   In this\
    \ AMT use case, AD-2 is not multicast enabled.  Hence, the\n   interconnection\
    \ between AD-2 and the EU is also not multicast\n   enabled.  This use case is\
    \ depicted in Figure 4.\n      -------------------               -------------------\n\
    \      /       AD-1        \\            /        AD-2       \\\n     / (Multicast\
    \ Enabled) \\          / (Not Multicast      \\\n    /                       \\\
    \        /              Enabled) \\ N(large)\n    | +----+          +---+ |  \
    \      | +---+                 |  # EUs\n    | |    |   +--+   |uBR|-|--------|-|uBR|\
    \                 |   +----+\n    | | AS |-->|AR|   +---+-|        | +---+   \
    \ ................>|EU/G|\n    | |    |   +--+<........|........|........... \
    \           |I2 +----+\n    \\ +----+                / N x AMT\\             \
    \          /\n     \\                     /  Tunnel  \\                     /\n\
    \      \\                   /            \\                   /\n       -------------------\
    \              -------------------\n   AS = multicast (e.g., content) Application\
    \ Source\n   uBR = unicast Border Router - not multicast enabled;\n         otherwise,\
    \ AR = uBR (in AD-1)\n   AR = AMT Relay\n   EU/G = Gateway client embedded in\
    \ EU device\n   I2 = AMT tunnel connecting EU/G to AR in AD-1 through\n      \
    \  non-multicast-enabled AD-2\n       Figure 4: AMT Tunnel Connecting AD-1 AMT\
    \ Relay and EU Gateway\n   This use case is equivalent to having unicast distribution\
    \ of the\n   application through AD-2.  The total number of AMT tunnels would\
    \ be\n   equal to the total number of EUs requesting the application.  The\n \
    \  peering point thus needs to accommodate the total number of AMT\n   tunnels\
    \ between the two domains.  Each AMT tunnel can provide the\n   data usage associated\
    \ with each EU.\n   Advantages of this configuration:\n   o  Efficient use of\
    \ bandwidth in AD-1 (the closer the AR is to the\n      uBR, the more efficient).\n\
    \   o  Ability of AD-1 to introduce content delivery based on IP\n      multicast,\
    \ without any support by network devices in AD-2: only\n      the application\
    \ side in the EU device needs to perform AMT gateway\n      library functionality\
    \ to receive traffic from the AMT relay.\n   o  Allows AD-2 to \"upgrade\" to\
    \ Use Case 3.5 (see Section 3.5) at a\n      later time, without any change in\
    \ AD-1 at that time.\n   o  AMT is an existing technology and is relatively simple\
    \ to\n      implement.  Attractive properties of AMT include the following:\n\
    \      *  Dynamic interconnection between the AMT gateway-relay pair\n       \
    \  across the peering point.\n      *  Ability to serve clients and servers with\
    \ differing policies.\n   o  Each AMT tunnel serves as a count for each EU and\
    \ is also able to\n      track data usage (bytes) delivered to the EU.\n   Disadvantages\
    \ of this configuration:\n   o  Additional devices (AMT gateway and relay pairs)\
    \ are introduced\n      into the transport path.\n   o  Assuming multiple peering\
    \ points between the domains, the EU\n      gateway needs to be able to find the\
    \ \"correct\" AMT relay in AD-1.\n   Architectural guidelines for this configuration\
    \ are as follows:\n   Guidelines (a) through (c) are the same as those described\
    \ in\n   Use Case 3.1.  In addition,\n   d.  It is necessary that proper procedures\
    \ be implemented such that\n       the AMT gateway at the EU device is able to\
    \ find the correct AMT\n       relay for each (S,G) content stream.  Standard\
    \ mechanisms for\n       that selection are still subject to ongoing work.  This\
    \ includes\n       the use of anycast gateway addresses, anycast DNS names, or\n\
    \       explicit configuration that maps (S,G) to a relay address; or\n      \
    \ letting the application in the EU/G provide the relay address to\n       the\
    \ embedded AMT gateway function.\n   e.  The AMT tunnel's capabilities are expected\
    \ to be sufficient for\n       the purpose of collecting relevant information\
    \ on the multicast\n       streams delivered to EUs in AD-2.\n"
- title: 3.5.  AD-2 Not Multicast Enabled - Multiple AMT Tunnels through AD-2
  contents:
  - "3.5.  AD-2 Not Multicast Enabled - Multiple AMT Tunnels through AD-2\n   Figure\
    \ 5 illustrates a variation of Use Case 3.4:\n      -------------------      \
    \         -------------------\n      /       AD-1        \\            /     \
    \   AD-2       \\\n     / (Multicast Enabled) \\          / (Not Multicast   \
    \   \\\n    /                 +---+ \\  (I1)  / +---+        Enabled) \\\n   \
    \ | +----+          |uBR|-|--------|-|uBR|                 |\n    | |    |   +--+\
    \   +---+ |        | +---+           +---+ |   +----+\n    | | AS |-->|AR|<........|....\
    \    | +---+           |AG/|....>|EU/G|\n    | |    |   +--+         |  ......|.|AG/|..........>|AR2|\
    \ |I3 +----+\n    \\ +----+                /   I1   \\ |AR1|   I2      +---+ /\n\
    \     \\                     /  Single  \\+---+                /\n      \\   \
    \                / AMT Tunnel \\                   /\n       -------------------\
    \              -------------------\n   uBR = unicast Border Router - not multicast\
    \ enabled;\n         also, either AR = uBR (AD-1) or uBR = AGAR1 (AD-2)\n   AS\
    \ = multicast (e.g., content) Application Source\n   AR = AMT Relay in AD-1\n\
    \   AGAR1 = AMT Gateway/Relay node in AD-2 across peering point\n   I1 = AMT tunnel\
    \ connecting AR in AD-1 to gateway in AGAR1 in AD-2\n   AGAR2 = AMT Gateway/Relay\
    \ node at AD-2 network edge\n   I2 = AMT tunnel connecting relay in AGAR1 to gateway\
    \ in AGAR2\n   EU/G = Gateway client embedded in EU device\n   I3 = AMT tunnel\
    \ connecting EU/G to AR in AGAR2\n          Figure 5: AMT Tunnel Connecting AMT\
    \ Gateways and Relays\n   Use Case 3.4 results in several long AMT tunnels crossing\
    \ the entire\n   network of AD-2 linking the EU device and the AMT relay in AD-1\n\
    \   through the peering point.  Depending on the number of EUs, there is\n   a\
    \ likelihood of an unacceptably high amount of traffic due to the\n   large number\
    \ of AMT tunnels -- and unicast streams -- through the\n   peering point.  This\
    \ situation can be alleviated as follows:\n   o  Provisioning of strategically\
    \ located AMT nodes in AD-2.  An\n      AMT node comprises co-location of an AMT\
    \ gateway and an AMT relay.\n      No change is required by AD-1, as compared\
    \ to Use Case 3.4.  This\n      can be done whenever AD-2 sees fit (e.g., too\
    \ much traffic across\n      the peering point).\n   o  One such node is on the\
    \ AD-2 side of the peering point (AMT node\n      AGAR1 in Figure 5).\n   o  A\
    \ single AMT tunnel established across the peering point linking\n      the AMT\
    \ relay in AD-1 to the AMT gateway in AMT node AGAR1\n      in AD-2.\n   o  AMT\
    \ tunnels linking AMT node AGAR1 at the peering point in AD-2 to\n      other\
    \ AMT nodes located at the edges of AD-2: e.g., AMT tunnel I2\n      linking the\
    \ AMT relay in AGAR1 to the AMT gateway in AMT\n      node AGAR2 (Figure 5).\n\
    \   o  AMT tunnels linking an EU device (via a gateway client embedded in\n  \
    \    the device) and an AMT relay in an appropriate AMT node at the\n      edge\
    \ of AD-2: e.g., I3 linking the EU gateway in the device to the\n      AMT relay\
    \ in AMT node AGAR2.\n   o  In the simplest option (not shown), AD-2 only deploys\
    \ a single\n      AGAR1 node and lets the EU/G build AMT tunnels directly to it.\n\
    \      This setup already solves the problem of replicated traffic across\n  \
    \    the peering point.  As soon as there is a need to support more AMT\n    \
    \  tunnels to the EU/G, then additional AGAR2 nodes can be deployed\n      by\
    \ AD-2.\n   The advantage of such a chained set of AMT tunnels is that the total\n\
    \   number of unicast streams across AD-2 is significantly reduced, thus\n   freeing\
    \ up bandwidth.  Additionally, there will be a single unicast\n   stream across\
    \ the peering point instead of, possibly, an unacceptably\n   large number of\
    \ such streams per Use Case 3.4.  However, this implies\n   that several AMT tunnels\
    \ will need to be dynamically configured by\n   the various AMT gateways, based\
    \ solely on the (S,G) information\n   received from the application client at\
    \ the EU device.  A suitable\n   mechanism for such dynamic configurations is\
    \ therefore critical.\n   Architectural guidelines for this configuration are\
    \ as follows:\n   Guidelines (a) through (c) are the same as those described in\n\
    \   Use Case 3.1.  In addition,\n   d.  It is necessary that proper procedures\
    \ be implemented such that\n       the various AMT gateways (at the EU devices\
    \ and the AMT nodes in\n       AD-2) are able to find the correct AMT relay in\
    \ other AMT nodes\n       as appropriate.  Standard mechanisms for that selection\
    \ are still\n       subject to ongoing work.  This includes the use of anycast\n\
    \       gateway addresses, anycast DNS names, or explicit configuration\n    \
    \   that maps (S,G) to a relay address.  On the EU/G, this mapping\n       information\
    \ may come from the application.\n   e.  The AMT tunnel's capabilities are expected\
    \ to be sufficient for\n       the purpose of collecting relevant information\
    \ on the multicast\n       streams delivered to EUs in AD-2.\n"
- title: 4.  Functional Guidelines
  contents:
  - "4.  Functional Guidelines\n   Supporting functions and related interfaces over\
    \ the peering point\n   that enable the multicast transport of the application\
    \ are listed in\n   this section.  Critical information parameters that need to\
    \ be\n   exchanged in support of these functions are enumerated, along with\n\
    \   guidelines as appropriate.  Specific interface functions for\n   consideration\
    \ are as follows.\n"
- title: 4.1.  Network Interconnection Transport Guidelines
  contents:
  - "4.1.  Network Interconnection Transport Guidelines\n   The term \"network interconnection\
    \ transport\" refers to the\n   interconnection points between the two administrative\
    \ domains.  The\n   following is a representative set of attributes that the two\n\
    \   administrative domains will need to agree on to support multicast\n   delivery.\n\
    \   o  Number of peering points.\n   o  Peering point addresses and locations.\n\
    \   o  Connection type - Dedicated for multicast delivery or shared with\n   \
    \   other services.\n   o  Connection mode - Direct connectivity between the two\
    \ ADs or via\n      another ISP.\n   o  Peering point protocol support - Multicast\
    \ protocols that will be\n      used for multicast delivery will need to be supported\
    \ at these\n      points.  Examples of such protocols include External BGP (EBGP)\n\
    \      [RFC4760] peering via MP-BGP (Multiprotocol BGP) SAFI-2 [RFC4760].\n  \
    \ o  Bandwidth allocation - If shared with other services, then there\n      needs\
    \ to be a determination of the share of bandwidth reserved for\n      multicast\
    \ delivery.  See Section 4.1.1 below for more details.\n   o  QoS requirements\
    \ - Delay and/or latency specifications that need\n      to be specified in an\
    \ SLA.\n   o  AD roles and responsibilities - The role played by each AD for\n\
    \      provisioning and maintaining the set of peering points to support\n   \
    \   multicast delivery.\n"
- title: 4.1.1.  Bandwidth Management
  contents:
  - "4.1.1.  Bandwidth Management\n   Like IP unicast traffic, IP multicast traffic\
    \ carried across\n   non-controlled networks must comply with congestion control\n\
    \   principles as described in [BCP41] and as explained in detail for UDP\n  \
    \ IP multicast in [BCP145].\n   Non-controlled networks (such as the Internet)\
    \ are networks where\n   there is no policy for managing bandwidth other than\
    \ best effort with\n   a fair share of bandwidth under congestion.  As a simplified\
    \ rule of\n   thumb, complying with congestion control principles means reducing\n\
    \   bandwidth under congestion in a way that is fair to competing\n   (typically\
    \ TCP) flows (\"rate adaptive\").\n   In many instances, multicast content delivery\
    \ evolves from\n   intra-domain deployments where it is handled as a controlled\
    \ network\n   service and does not comply with congestion control principles.\
    \  It\n   was given a reserved amount of bandwidth and admitted to the network\n\
    \   so that congestion never occurs.  Therefore, the congestion control\n   issue\
    \ should be given specific attention when evolving to an\n   inter-domain peering\
    \ deployment.\n   In the case where end-to-end IP multicast traffic passes across\
    \ the\n   network of two ADs (and their subsidiaries/customers), both ADs must\n\
    \   agree on a consistent traffic-management policy.  If, for example,\n   AD-1\
    \ sources non-congestion-aware IP multicast traffic and AD-2\n   carries it as\
    \ best-effort traffic across links shared with other\n   Internet traffic (subject\
    \ to congestion), this will not work: under\n   congestion, some amount of that\
    \ traffic will be dropped, often\n   rendering the remaining packets as undecodable\
    \ garbage clogging up\n   the network in AD-2; because this traffic is not congestion\
    \ aware,\n   the loss does not reduce this rate.  Competing traffic will not get\n\
    \   their fair share under congestion, and EUs will be frustrated by the\n   extremely\
    \ bad quality of both their IP multicast traffic and other\n   (e.g., TCP) traffic.\
    \  Note that this is not an IP multicast\n   technology issue but is solely a\
    \ transport-layer / application-layer\n   issue: the problem would just as likely\
    \ happen if AD-1 were to send\n   non-rate-adaptive unicast traffic -- for example,\
    \ legacy IPTV\n   video-on-demand traffic, which is typically also non-congestion\n\
    \   aware.  Note that because rate adaptation in IP unicast video is\n   commonplace\
    \ today due to the availability of ABR (Adaptive Bitrate)\n   video, it is very\
    \ unlikely that this will happen in reality with IP\n   unicast.\n   While the\
    \ rules for traffic management apply whether IP multicast is\n   tunneled or not,\
    \ the one feature that can make AMT tunnels more\n   difficult is the unpredictability\
    \ of bandwidth requirements across\n   underlying links because of the way they\
    \ can be used: with native IP\n   multicast or GRE tunnels, the amount of bandwidth\
    \ depends on the\n   amount of content -- not the number of EUs -- and is therefore\
    \ easier\n   to plan for.  AMT tunnels terminating in the EU/G, on the other hand,\n\
    \   scale with the number of EUs.  In the vicinity of the AMT relay, they\n  \
    \ can introduce a very large amount of replicated traffic, and it is\n   not always\
    \ feasible to provision enough bandwidth for all possible\n   EUs to get the highest\
    \ quality for all their content during peak\n   utilization in such setups --\
    \ unless the AMT relays are very close to\n   the EU edge.  Therefore, it is also\
    \ recommended that IP multicast\n   rate adaptation be used, even inside controlled\
    \ networks, when using\n   AMT tunnels directly to the EU/G.\n   Note that rate-adaptive\
    \ IP multicast traffic in general does not mean\n   that the sender is reducing\
    \ the bitrate but rather that the EUs that\n   experience congestion are joining\
    \ to a lower-bitrate (S,G) stream of\n   the content, similar to ABR streaming\
    \ over TCP.  Therefore, migration\n   from a non-rate-adaptive bitrate to a rate-adaptive\
    \ bitrate in IP\n   multicast will also change the dynamic (S,G) join behavior\
    \ in the\n   network, resulting in potentially higher performance requirements\
    \ for\n   IP multicast protocols (IGMP/PIM), especially on the last hops where\n\
    \   dynamic changes occur (including AMT gateways/relays): in non-rate-\n   adaptive\
    \ IP multicast, only \"channel change\" causes state change, but\n   in rate-adaptive\
    \ multicast, congestion also causes state change.\n   Even though not fully specified\
    \ in this document, peerings that rely\n   on GRE/AMT tunnels may be across one\
    \ or more transit ADs instead of\n   an exclusive (non-shared, L1/L2) path.  Unless\
    \ those transit ADs are\n   explicitly contracted to provide other than \"best\
    \ effort\" transit for\n   the tunneled traffic, the tunneled IP multicast traffic\
    \ must be\n   rate adaptive in order to not violate BCP 41 across those\n   transit\
    \ ADs.\n"
- title: 4.2.  Routing Aspects and Related Guidelines
  contents:
  - "4.2.  Routing Aspects and Related Guidelines\n   The main objective for multicast\
    \ delivery routing is to ensure that\n   the EU receives the multicast stream\
    \ from the \"most optimal\" source\n   [INF_ATIS_10], which typically:\n   o \
    \ Maximizes the multicast portion of the transport and minimizes any\n      unicast\
    \ portion of the delivery, and\n   o  Minimizes the overall combined route distance\
    \ of the network(s).\n   This routing objective applies to both native multicast\
    \ and AMT; the\n   actual methodology of the solution will be different for each.\n\
    \   Regardless, the routing solution is expected to:\n   o  Be scalable,\n   o\
    \  Avoid or minimize new protocol development or modifications, and\n   o  Be\
    \ robust enough to achieve high reliability and to automatically\n      adjust\
    \ to changes and problems in the multicast infrastructure.\n   For both native\
    \ and AMT environments, having a source as close as\n   possible to the EU network\
    \ is most desirable; therefore, in some\n   cases, an AD may prefer to have multiple\
    \ sources near different\n   peering points.  However, that is entirely an implementation\
    \ issue.\n"
- title: 4.2.1.  Native Multicast Routing Aspects
  contents:
  - "4.2.1.  Native Multicast Routing Aspects\n   Native multicast simply requires\
    \ that the administrative domains\n   coordinate and advertise the correct source\
    \ address(es) at their\n   network interconnection peering points (i.e., BRs).\
    \  An example of\n   multicast delivery via a native multicast process across\
    \ two\n   administrative domains is as follows, assuming that the\n   interconnecting\
    \ peering points are also multicast enabled:\n   o  Appropriate information is\
    \ obtained by the EU client, who is a\n      subscriber to AD-2 (see Use Case\
    \ 3.1).  This information is in the\n      form of metadata, and it contains instructions\
    \ directing the EU\n      client to launch an appropriate application if necessary,\
    \ as well\n      as additional information for the application about the source\n\
    \      location and the group (or stream) ID in the form of (S,G) data.\n    \
    \  The \"S\" portion provides the name or IP address of the source of\n      the\
    \ multicast stream.  The metadata may also contain alternate\n      delivery information,\
    \ such as specifying the unicast address of\n      the stream.\n   o  The client\
    \ uses the join message with (S,G) to join the multicast\n      stream [RFC4604].\
    \  To facilitate this process, the two ADs need to\n      do the following:\n\
    \      *  Advertise the source ID(s) over the peering points.\n      *  Exchange\
    \ such relevant peering point information as capacity\n         and utilization.\n\
    \      *  Implement compatible multicast protocols to ensure proper\n        \
    \ multicast delivery across the peering points.\n"
- title: 4.2.2.  GRE Tunnel over Interconnecting Peering Point
  contents:
  - "4.2.2.  GRE Tunnel over Interconnecting Peering Point\n   If the interconnecting\
    \ peering point is not multicast enabled and\n   both ADs are multicast enabled,\
    \ then a simple solution is to\n   provision a GRE tunnel between the two ADs;\
    \ see Use Case 3.2\n   (Section 3.2).  The termination points of the tunnel will\
    \ usually be\n   a network engineering decision but generally will be between\
    \ the BRs\n   or even between the AD-2 BR and the AD-1 source (or source access\n\
    \   router).  The GRE tunnel would allow end-to-end native multicast or\n   AMT\
    \ multicast to traverse the interface.  Coordination and\n   advertisement of\
    \ the source IP are still required.\n   The two ADs need to follow the same process\
    \ as the process described\n   in Section 4.2.1 to facilitate multicast delivery\
    \ across the peering\n   points.\n"
- title: 4.2.3.  Routing Aspects with AMT Tunnels
  contents:
  - "4.2.3.  Routing Aspects with AMT Tunnels\n   Unlike native multicast (with or\
    \ without GRE), an AMT multicast\n   environment is more complex.  It presents\
    \ a two-layered problem\n   in that there are two criteria that should be simultaneously\
    \ met:\n   o  Find the closest AMT relay to the EU that also has multicast\n \
    \     connectivity to the content source, and\n   o  Minimize the AMT unicast\
    \ tunnel distance.\n   There are essentially two components in the AMT specification:\n\
    \   AMT relays:  These serve the purpose of tunneling UDP multicast\n      traffic\
    \ to the receivers (i.e., endpoints).  The AMT relay will\n      receive the traffic\
    \ natively from the multicast media source and\n      will replicate the stream\
    \ on behalf of the downstream AMT\n      gateways, encapsulating the multicast\
    \ packets into unicast packets\n      and sending them over the tunnel toward\
    \ the AMT gateways.  In\n      addition, the AMT relay may collect various usage\
    \ and activity\n      statistics.  This results in moving the replication point\
    \ closer\n      to the EU and cuts down on traffic across the network.  Thus,\
    \ the\n      linear costs of adding unicast subscribers can be avoided.\n    \
    \  However, unicast replication is still required for each requesting\n      endpoint\
    \ within the unicast-only network.\n   AMT gateway:  The gateway will reside on\
    \ an endpoint; this could be\n      any type of IP host, such as a Personal Computer\
    \ (PC), mobile\n      phone, Set-Top Box (STB), or appliances.  The AMT gateway\
    \ receives\n      join and leave requests from the application via an Application\n\
    \      Programming Interface (API).  In this manner, the gateway allows\n    \
    \  the endpoint to conduct itself as a true multicast endpoint.  The\n      AMT\
    \ gateway will encapsulate AMT messages into UDP packets and\n      send them\
    \ through a tunnel (across the unicast-only\n      infrastructure) to the AMT\
    \ relay.\n   The simplest AMT use case (Section 3.3) involves peering points that\n\
    \   are not multicast enabled between two multicast-enabled ADs.  An\n   AMT tunnel\
    \ is deployed between an AMT relay on the AD-1 side of the\n   peering point and\
    \ an AMT gateway on the AD-2 side of the peering\n   point.  One advantage of\
    \ this arrangement is that the tunnel is\n   established on an as-needed basis\
    \ and need not be a provisioned\n   element.  The two ADs can coordinate and advertise\
    \ special AMT relay\n   anycast addresses with, and to, each other.  Alternately,\
    \ they may\n   decide to simply provision relay addresses, though this would not\
    \ be\n   an optimal solution in terms of scalability.\n   Use Cases 3.4 and 3.5\
    \ describe AMT situations that are more\n   complicated, as AD-2 is not multicast\
    \ enabled in these two cases.\n   For these cases, the EU device needs to be able\
    \ to set up an AMT\n   tunnel in the most optimal manner.  There are many methods\
    \ by which\n   relay selection can be done, including the use of DNS-based queries\n\
    \   and static lookup tables [RFC7450].  The choice of the method is\n   implementation\
    \ dependent and is up to the network operators.\n   Comparison of various methods\
    \ is out of scope for this document and\n   is left for further study.\n   An\
    \ illustrative example of a relay selection based on DNS queries as\n   part of\
    \ an anycast IP address process is described here for Use\n   Cases 3.4 and 3.5\
    \ (Sections 3.4 and 3.5).  Using an anycast\n   IP address for AMT relays allows\
    \ all AMT gateways to find the\n   \"closest\" AMT relay -- the nearest edge of\
    \ the multicast topology of\n   the source.  Note that this is strictly illustrative;\
    \ the choice of\n   the method is up to the network operators.  The basic process\
    \ is as\n   follows:\n   o  Appropriate metadata is obtained by the EU client\
    \ application.\n      The metadata contains instructions directing the EU client\
    \ to an\n      ordered list of particular destinations to seek the requested\n\
    \      stream and, for multicast, specifies the source location and the\n    \
    \  group (or stream) ID in the form of (S,G) data.  The \"S\" portion\n      provides\
    \ the URI (name or IP address) of the source of the\n      multicast stream, and\
    \ the \"G\" identifies the particular stream\n      originated by that source.\
    \  The metadata may also contain\n      alternate delivery information such as\
    \ the address of the unicast\n      form of the content to be used -- for example,\
    \ if the multicast\n      stream becomes unavailable.\n   o  Using the information\
    \ from the metadata and, possibly, information\n      provisioned directly in\
    \ the EU client, a DNS query is initiated in\n      order to connect the EU client\
    \ / AMT gateway to an AMT relay.\n   o  Query results are obtained and may return\
    \ an anycast address or a\n      specific unicast address of a relay.  Multiple\
    \ relays will\n      typically exist.  The anycast address is a routable\n   \
    \   \"pseudo-address\" shared among the relays that can gain multicast\n     \
    \ access to the source.\n   o  If a specific IP address unique to a relay was\
    \ not obtained, the\n      AMT gateway then sends a message (e.g., the discovery\
    \ message) to\n      the anycast address such that the network is making the routing\n\
    \      choice of a particular relay, e.g., the relay that is closest to\n    \
    \  the EU.  Details are outside the scope of this document.  See\n      [RFC4786].\n\
    \   o  The contacted AMT relay then returns its specific unicast IP\n      address\
    \ (after which the anycast address is no longer required).\n      Variations may\
    \ exist as well.\n   o  The AMT gateway uses that unicast IP address to initiate\
    \ a\n      three-way handshake with the AMT relay.\n   o  The AMT gateway provides\
    \ the (S,G) information to the AMT relay\n      (embedded in AMT protocol messages).\n\
    \   o  The AMT relay receives the (S,G) information and uses it to join\n    \
    \  the appropriate multicast stream, if it has not already subscribed\n      to\
    \ that stream.\n   o  The AMT relay encapsulates the multicast stream into the\
    \ tunnel\n      between the relay and the gateway, providing the requested content\n\
    \      to the EU.\n"
- title: 4.2.4.  Public Peering Routing Aspects
  contents:
  - "4.2.4.  Public Peering Routing Aspects\n   Figure 6 shows an example of a broadcast\
    \ peering point.\n              AD-1a            AD-1b\n              BR     \
    \           BR\n               |                 |\n             --+-+---------------+-+--\
    \ broadcast peering point LAN\n                 |                 |\n        \
    \         BR               BR\n                AD-2a            AD-2b\n      \
    \               Figure 6: Broadcast Peering Point\n   A broadcast peering point\
    \ is an L2 subnet connecting three or more\n   ADs.  It is common in IXPs and\
    \ usually consists of Ethernet\n   switch(es) operated by the IXP connecting to\
    \ BRs operated by the ADs.\n   In an example setup domain, AD-2a peers with AD-1a\
    \ and wants to\n   receive IP multicast from it.  Likewise, AD-2b peers with AD-1b\
    \ and\n   wants to receive IP multicast from it.\n   Assume that one or more IP\
    \ multicast (S,G) traffic streams can be\n   served by both AD-1a and AD-1b --\
    \ for example, because both AD-1a and\n   AD-1b contact this content from the\
    \ same content source.\n   In this case, AD-2a and AD-2b can no longer control\
    \ which upstream\n   domain -- AD-1a or AD-1b -- will forward this (S,G) into\
    \ the LAN.\n   The AD-2a BR requests the (S,G) from the AD-1a BR, and the AD-2b\
    \ BR\n   requests the same (S,G) from the AD-1b BR.  To avoid duplicate\n   packets,\
    \ an (S,G) can be forwarded by only one router onto the LAN;\n   PIM-SM / PIM-SSM\
    \ detects requests for duplicate transmissions and\n   resolves them via the so-called\
    \ \"assert\" protocol operation, which\n   results in only one BR forwarding the\
    \ traffic.  Assume that this is\n   the AD-1a BR.  AD-2b will then receive unexpected\
    \ multicast traffic\n   from a provider with whom it does not have a mutual agreement\
    \ for\n   that traffic.  Quality issues in EUs behind AD-2b caused by AD-1a\n\
    \   will cause a lot of issues related to responsibility and\n   troubleshooting.\n\
    \   In light of these technical issues, we describe, via the following\n   options,\
    \ how IP multicast can be carried across broadcast peering\n   point LANs:\n \
    \  1.  IP multicast is tunneled across the LAN.  Any of the GRE/AMT\n       tunneling\
    \ solutions mentioned in this document are applicable.\n       This is the one\
    \ case where a GRE tunnel between the upstream BR\n       (e.g., AD-1a) and downstream\
    \ BR (e.g., AD-2a) is specifically\n       recommended, as opposed to tunneling\
    \ across uBRs (which are not\n       the actual BRs).\n   2.  The LAN has only\
    \ one upstream AD that is sourcing IP multicast,\n       and native IP multicast\
    \ is used.  This is an efficient way to\n       distribute the same IP multicast\
    \ content to multiple downstream\n       ADs.  Misbehaving downstream BRs can\
    \ still disrupt the delivery\n       of IP multicast from the upstream BR to other\
    \ downstream BRs;\n       therefore, strict rules must be followed to prohibit\
    \ such a case.\n       The downstream BRs must ensure that they will always consider\n\
    \       only the upstream BR as a source for multicast traffic: e.g., no\n   \
    \    BGP SAFI-2 peerings between the downstream ADs across the peering\n     \
    \  point LAN, so that the upstream BR is the only possible next hop\n       reachable\
    \ across this LAN.  Also, routing policies can be\n       configured to avoid\
    \ falling back to using SAFI-1 (unicast) routes\n       for IP multicast if unicast\
    \ BGP peering is not limited in the\n       same way.\n   3.  The LAN has multiple\
    \ upstream ADs, but they are federated and\n       agree on a consistent policy\
    \ for IP multicast traffic across the\n       LAN.  One policy is that each possible\
    \ source is only announced\n       by one upstream BR.  Another policy is that\
    \ sources are\n       redundantly announced (the problematic case mentioned in\
    \ the\n       example in Figure 6 above), but the upstream domains also provide\n\
    \       mutual operational insight to help with troubleshooting (outside\n   \
    \    the scope of this document).\n"
- title: 4.3.  Back-Office Functions - Provisioning and Logging Guidelines
  contents:
  - "4.3.  Back-Office Functions - Provisioning and Logging Guidelines\n   \"Back\
    \ office\" refers to the following:\n   o  Servers and content-management systems\
    \ that support the delivery\n      of applications via multicast and interactions\
    \ between ADs.\n   o  Functionality associated with logging, reporting, ordering,\n\
    \      provisioning, maintenance, service assurance, settlement, etc.\n"
- title: 4.3.1.  Provisioning Guidelines
  contents:
  - "4.3.1.  Provisioning Guidelines\n   Resources for basic connectivity between\
    \ ADs' providers need to be\n   provisioned as follows:\n   o  Sufficient capacity\
    \ must be provisioned to support multicast-based\n      delivery across ADs.\n\
    \   o  Sufficient capacity must be provisioned for connectivity between\n    \
    \  all supporting back offices of the ADs as appropriate.  This\n      includes\
    \ activating proper security treatment for these\n      back-office connections\
    \ (gateways, firewalls, etc.) as\n      appropriate.\n   Provisioning aspects\
    \ related to multicast-based inter-domain delivery\n   are as follows.\n   The\
    \ ability to receive a requested application via multicast is\n   triggered via\
    \ receipt of the necessary metadata.  Hence, this\n   metadata must be provided\
    \ to the EU regarding the multicast URL --\n   and unicast fallback if applicable.\
    \  AD-2 must enable the delivery of\n   this metadata to the EU and provision\
    \ appropriate resources for this\n   purpose.\n   It is assumed that native multicast\
    \ functionality is available across\n   many ISP backbones, peering points, and\
    \ access networks.  If,\n   however, native multicast is not an option (Use Cases\
    \ 3.4 and 3.5),\n   then:\n   o  The EU must have a multicast client to use AMT\
    \ multicast obtained\n      from either (1) the application source (per agreement\
    \ with AD-1)\n      or (2) AD-1 or AD-2 (if delegated by the application source).\n\
    \   o  If provided by AD-1 or AD-2, then the EU could be redirected to a\n   \
    \   client download site.  (Note: This could be an application source\n      site.)\
    \  If provided by the application source, then this source\n      would have to\
    \ coordinate with AD-1 to ensure that the proper\n      client is provided (assuming\
    \ multiple possible clients).\n   o  Where AMT gateways support different application\
    \ sets, all AD-2\n      AMT relays need to be provisioned with all source and\
    \ group\n      addresses for streams it is allowed to join.\n   o  DNS across\
    \ each AD must be provisioned to enable a client gateway\n      to locate the\
    \ optimal AMT relay (i.e., longest multicast path and\n      shortest unicast\
    \ tunnel) with connectivity to the content's\n      multicast source.\n   Provisioning\
    \ aspects related to operations and customer care are as\n   follows.\n   It is\
    \ assumed that each AD provider will provision operations and\n   customer care\
    \ access to their own systems.\n   AD-1's operations and customer care functions\
    \ must be able to see\n   enough of what is happening in AD-2's network or in\
    \ the service\n   provided by AD-2 to verify their mutual goals and operations,\
    \ e.g.,\n   to know how the EUs are being served.  This can be done in two ways:\n\
    \   o  Automated interfaces are built between AD-1 and AD-2 such that\n      operations\
    \ and customer care continue using their own systems.\n      This requires coordination\
    \ between the two ADs, with appropriate\n      provisioning of necessary resources.\n\
    \   o  AD-1's operations and customer care personnel are provided direct\n   \
    \   access to AD-2's systems.  In this scenario, additional\n      provisioning\
    \ in these systems will be needed to provide necessary\n      access.  The two\
    \ ADs must agree on additional provisioning to\n      support this option.\n"
- title: 4.3.2.  Inter-domain Authentication Guidelines
  contents:
  - "4.3.2.  Inter-domain Authentication Guidelines\n   All interactions between pairs\
    \ of ADs can be discovered and/or\n   associated with the account(s) utilized\
    \ for delivered applications.\n   Supporting guidelines are as follows:\n   o\
    \  A unique identifier is recommended to designate each master\n      account.\n\
    \   o  AD-2 is expected to set up \"accounts\" (a logical facility\n      generally\
    \ protected by credentials such as login passwords) for\n      use by AD-1.  Multiple\
    \ accounts, and multiple types or partitions\n      of accounts, can apply, e.g.,\
    \ customer accounts, security\n      accounts.\n   The reason to specifically\
    \ mention the need for AD-1 to initiate\n   interactions with AD-2 (and use some\
    \ account for that), as opposed to\n   the opposite, is based on the recommended\
    \ workflow initiated by\n   customers (see Section 4.4): the customer contacts\
    \ the content\n   source, which is part of AD-1.  Consequently, if AD-1 sees the\
    \ need\n   to escalate the issue to AD-2, it will interact with AD-2 using the\n\
    \   aforementioned guidelines.\n"
- title: 4.3.3.  Log-Management Guidelines
  contents:
  - "4.3.3.  Log-Management Guidelines\n   Successful delivery (in terms of user experience)\
    \ of applications or\n   content via multicast between pairs of interconnecting\
    \ ADs can be\n   improved through the ability to exchange appropriate logs for\
    \ various\n   workflows -- troubleshooting, accounting and billing, optimization\
    \ of\n   traffic and content transmission, optimization of content and\n   application\
    \ development, and so on.\n   Specifically, AD-1 take over primary responsibility\
    \ for customer\n   experience on behalf of the content source, with support from\
    \ AD-2 as\n   needed.  The application/content owner is the only participant who\n\
    \   has, and needs, full insight into the application level and can map\n   the\
    \ customer application experience to the network traffic flows --\n   which, with\
    \ the help of AD-2 or logs from AD-2, it can then analyze\n   and interpret.\n\
    \   The main difference between unicast delivery and multicast delivery\n   is\
    \ that the content source can infer a lot more about downstream\n   network problems\
    \ from a unicast stream than from a multicast stream:\n   the multicast stream\
    \ is not per EU, except after the last\n   replication, which is in most cases\
    \ not in AD-1.  Logs from the\n   application, including the receiver side at\
    \ the EU, can provide\n   insight but cannot help to fully isolate network problems\
    \ because of\n   the IP multicast per-application operational state built across\
    \ AD-1\n   and AD-2 (aka the (S,G) state and any other operational-state\n   features,\
    \ such as Diffserv QoS).\n   See Section 7 for more discussion regarding the privacy\n\
    \   considerations of the model described here.\n   Different types of logs are\
    \ known to help support operations in AD-1\n   when provided by AD-2.  This could\
    \ be done as part of AD-1/AD-2\n   contracts.  Note that except for implied multicast-specific\
    \ elements,\n   the options listed here are not unique or novel for IP multicast,\
    \ but\n   they are more important for services novel to the operators than for\n\
    \   operationally well-established services (such as unicast).  We\n   therefore\
    \ detail them as follows:\n   o  Usage information logs at an aggregate level.\n\
    \   o  Usage failure instances at an aggregate level.\n   o  Grouped or sequenced\
    \ application access: performance, behavior,\n      and failure at an aggregate\
    \ level to support potential\n      application-provider-driven strategies.  Examples\
    \ of aggregate\n      levels include grouped video clips, web pages, and software-\n\
    \      download sets.\n   o  Security logs, aggregated or summarized according\
    \ to agreement\n      (with additional detail potentially provided during security\n\
    \      events, by agreement).\n   o  Access logs (EU), when needed for troubleshooting.\n\
    \   o  Application logs (\"What is the application doing?\"), when needed\n  \
    \    for shared troubleshooting.\n   o  Syslogs (network management), when needed\
    \ for shared\n      troubleshooting.\n   The two ADs may supply additional security\
    \ logs to each other, as\n   agreed upon in contract(s).  Examples include the\
    \ following:\n   o  Information related to general security-relevant activity,\
    \ which\n      may be of use from a protection or response perspective: types\
    \ and\n      counts of attacks detected, related source information, related\n\
    \      target information, etc.\n   o  Aggregated or summarized logs according\
    \ to agreement (with\n      additional detail potentially provided during security\
    \ events, by\n      agreement).\n"
- title: 4.4.  Operations - Service Performance and Monitoring Guidelines
  contents:
  - "4.4.  Operations - Service Performance and Monitoring Guidelines\n   \"Service\
    \ performance\" refers to monitoring metrics related to\n   multicast delivery\
    \ via probes.  The focus is on the service provided\n   by AD-2 to AD-1 on behalf\
    \ of all multicast application sources\n   (metrics may be specified for SLA use\
    \ or otherwise).  Associated\n   guidelines are as follows:\n   o  Both ADs are\
    \ expected to monitor, collect, and analyze service\n      performance metrics\
    \ for multicast applications.  AD-2 provides\n      relevant performance information\
    \ to AD-1; this enables AD-1 to\n      create an end-to-end performance view on\
    \ behalf of the multicast\n      application source.\n   o  Both ADs are expected\
    \ to agree on the types of probes to be used\n      to monitor multicast delivery\
    \ performance.  For example, AD-2 may\n      permit AD-1's probes to be utilized\
    \ in the AD-2 multicast service\n      footprint.  Alternately, AD-2 may deploy\
    \ its own probes and relay\n      performance information back to AD-1.\n   \"\
    Service monitoring\" generally refers to a service (as a whole)\n   provided on\
    \ behalf of a particular multicast application source\n   provider.  It thus involves\
    \ complaints from EUs when service problems\n   occur.  EUs direct their complaints\
    \ to the source provider; the\n   source provider in turn submits these complaints\
    \ to AD-1.  The\n   responsibility for service delivery lies with AD-1; as such,\
    \ AD-1\n   will need to determine where the service problem is occurring -- in\n\
    \   its own network or in AD-2.  It is expected that each AD will have\n   tools\
    \ to monitor multicast service status in its own network.\n   o  Both ADs will\
    \ determine how best to deploy multicast service\n      monitoring tools.  Typically,\
    \ each AD will deploy its own set of\n      monitoring tools, in which case both\
    \ ADs are expected to inform\n      each other when multicast delivery problems\
    \ are detected.\n   o  AD-2 may experience some problems in its network.  For\
    \ example,\n      for the AMT use cases (Sections 3.3, 3.4, and 3.5), one or more\n\
    \      AMT relays may be experiencing difficulties.  AD-2 may be able to\n   \
    \   fix the problem by rerouting the multicast streams via alternate\n      AMT\
    \ relays.  If the fix is not successful and multicast service\n      delivery\
    \ degrades, then AD-2 needs to report the issue to AD-1.\n   o  When a problem\
    \ notification is received from a multicast\n      application source, AD-1 determines\
    \ whether the cause of the\n      problem is within its own network or within\
    \ AD-2.  If the cause is\n      within AD-2, then AD-1 supplies all necessary\
    \ information to AD-2.\n      Examples of supporting information include the following:\n\
    \      *  Kind(s) of problem(s).\n      *  Starting point and duration of problem(s).\n\
    \      *  Conditions in which one or more problems occur.\n      *  IP address\
    \ blocks of affected users.\n      *  ISPs of affected users.\n      *  Type of\
    \ access, e.g., mobile versus desktop.\n      *  Network locations of affected\
    \ EUs.\n   o  Both ADs conduct some form of root-cause analysis for multicast\n\
    \      service delivery problems.  Examples of various factors for\n      consideration\
    \ include:\n      *  Verification that the service configuration matches the product\n\
    \         features.\n      *  Correlation and consolidation of the various customer\
    \ problems\n         and resource troubles into a single root-service problem.\n\
    \      *  Prioritization of currently open service problems, giving\n        \
    \ consideration to problem impacts, SLAs, etc.\n      *  Conducting service tests,\
    \ including tests performed once or a\n         series of tests over a period\
    \ of time.\n      *  Analysis of test results.\n      *  Analysis of relevant\
    \ network fault or performance data.\n      *  Analysis of the problem information\
    \ provided by the customer.\n   o  Once the cause of the problem has been determined\
    \ and the problem\n      has been fixed, both ADs need to work jointly to verify\
    \ and\n      validate the success of the fix.\n"
- title: 4.5.  Client Reliability Models / Service Assurance Guidelines
  contents:
  - "4.5.  Client Reliability Models / Service Assurance Guidelines\n   There are\
    \ multiple options for instituting reliability architectures.\n   Most are at\
    \ the application level.  Both ADs should work these\n   options out per their\
    \ contract or agreement and also with the\n   multicast application source providers.\n\
    \   Network reliability can also be enhanced by the two ADs if they\n   provision\
    \ alternate delivery mechanisms via unicast means.\n"
- title: 4.6.  Application Accounting Guidelines
  contents:
  - "4.6.  Application Accounting Guidelines\n   Application-level accounting needs\
    \ to be handled differently in the\n   application than in IP unicast, because\
    \ the source side does not\n   directly deliver packets to individual receivers.\
    \  Instead, this\n   needs to be signaled back by the receiver to the source.\n\
    \   For network transport diagnostics, AD-1 and AD-2 should have\n   mechanisms\
    \ in place to ensure proper accounting for the volume of\n   bytes delivered through\
    \ the peering point and, separately, the number\n   of bytes delivered to EUs.\n"
- title: 5.  Troubleshooting and Diagnostics
  contents:
  - "5.  Troubleshooting and Diagnostics\n   Any service provider supporting multicast\
    \ delivery of content should\n   be able to collect diagnostics as part of multicast\
    \ troubleshooting\n   practices and resolve network issues accordingly.  Issues\
    \ may become\n   apparent or identifiable through either (1) network monitoring\n\
    \   functions or (2) problems reported by customers, as described in\n   Section\
    \ 4.4.\n   It is recommended that multicast diagnostics be performed, leveraging\n\
    \   established operational practices such as those documented in\n   [MDH-05].\
    \  However, given that inter-domain multicast creates a\n   significant interdependence\
    \ of proper networking functionality\n   between providers, there exists a need\
    \ for providers to be able to\n   signal (or otherwise alert) each other if there\
    \ are any issues noted\n   by either one.\n   For troubleshooting purposes, service\
    \ providers may also wish to\n   allow limited read-only administrative access\
    \ to their routers to\n   their AD peers.  Access to active troubleshooting tools\
    \ -- especially\n   [Traceroute] and the tools discussed in [Mtrace-v2] -- is\
    \ of specific\n   interest.\n   Another option is to include this functionality\
    \ in the IP multicast\n   receiver application on the EU device and allow these\
    \ diagnostics to\n   be remotely used by support operations.  Note, though, that\
    \ AMT\n   does not allow the passing of traceroute or mtrace requests;\n   therefore,\
    \ troubleshooting in the presence of AMT does not work as\n   well end to end\
    \ as it can with native (or even GRE-encapsulated) IP\n   multicast, especially\
    \ with regard to traceroute and mtrace.  Instead,\n   troubleshooting directly\
    \ on the actual network devices is then more\n   likely necessary.\n   The specifics\
    \ of notifications and alerts are beyond the scope of\n   this document, but general\
    \ guidelines are similar to those described\n   in Section 4.4.  Some general\
    \ communications issues are as follows.\n   o  Appropriate communications channels\
    \ will be established between\n      the customer service and operations groups\
    \ from both ADs to\n      facilitate information-sharing related to diagnostic\n\
    \      troubleshooting.\n   o  A default resolution period may be considered to\
    \ resolve open\n      issues.  Alternately, mutually acceptable resolution periods\
    \ could\n      be established, depending on the severity of the identified\n \
    \     trouble.\n"
- title: 6.  Security Considerations
  contents:
  - '6.  Security Considerations

    '
- title: 6.1.  DoS Attacks (against State and Bandwidth)
  contents:
  - "6.1.  DoS Attacks (against State and Bandwidth)\n   Reliable IP multicast operations\
    \ require some basic protection\n   against DoS (Denial of Service) attacks.\n\
    \   SSM IP multicast is self-protecting against attacks from illicit\n   sources;\
    \ such traffic will not be forwarded beyond the first-hop\n   router, because\
    \ that would require (S,G) membership reports from the\n   receiver.  Only valid\
    \ traffic from sources will be forwarded, because\n   RPF (\"Reverse Path Forwarding\"\
    ) is part of the protocols.  One can\n   say that protection against spoofed source\
    \ traffic performed in the\n   style of [BCP38] is therefore built into PIM-SM\
    \ / PIM-SSM.\n   Receivers can attack SSM IP multicast by originating such (S,G)\n\
    \   membership reports.  This can result in a DoS attack against state\n   through\
    \ the creation of a large number of (S,G) states that create\n   high control-plane\
    \ load or even inhibit the later creation of a valid\n   (S,G).  In conjunction\
    \ with collaborating illicit sources, it can\n   also result in the forwarding\
    \ of traffic from illicit sources.\n   Today, these types of attacks are usually\
    \ mitigated by explicitly\n   defining the set of permissible (S,G) on, for example,\
    \ the last-hop\n   routers in replicating IP multicast to EUs (e.g., via (S,G)\
    \ access\n   control lists applied to IGMP/MLD membership state creation).  Each\n\
    \   AD (say, \"ADi\") is expected to know what sources located in ADi are\n  \
    \ permitted to send and what their valid (S,G)s are.  ADi can therefore\n   also\
    \ filter invalid (S,G)s for any \"S\" located inside ADi, but not\n   sources\
    \ located in another AD.\n   In the peering case, without further information,\
    \ AD-2 is not aware\n   of the set of valid (S,G) from AD-1, so this set needs\
    \ to be\n   communicated via operational procedures from AD-1 to AD-2 to provide\n\
    \   protection against this type of DoS attack.  Future work could signal\n  \
    \ this information in an automated way: BGP extensions, DNS resource\n   records,\
    \ or backend automation between AD-1 and AD-2.  Backend\n   automation is, in\
    \ the short term, the most viable solution: unlike\n   BGP extensions or DNS resource\
    \ records, backend automation does not\n   require router software extensions.\
    \  Observation of traffic flowing\n   via (S,G) state could also be used to automate\
    \ the recognition of\n   invalid (S,G) state created by receivers in the absence\
    \ of explicit\n   information from AD-1.\n   The second type of DoS attack through\
    \ (S,G) membership reports exists\n   when the attacking receiver creates too\
    \ much valid (S,G) state and\n   the traffic carried by these (S,G)s congests\
    \ bandwidth on links\n   shared with other EUs.  Consider the uplink to a last-hop\
    \ router\n   connecting to 100 EUs.  If one EU joins to more multicast content\n\
    \   than what fits into this link, then this would also impact the\n   quality\
    \ of the same content for the other 99 EUs.  If traffic is not\n   rate adaptive,\
    \ the effects are even worse.\n   The mitigation technique is the same as what\
    \ is often employed for\n   unicast: policing of the per-EU total amount of traffic.\
    \  Unlike\n   unicast, though, this cannot be done anywhere along the path (e.g.,\n\
    \   on an arbitrary bottleneck link); it has to happen at the point of\n   last\
    \ replication to the different EU.  Simple solutions such as\n   limiting the\
    \ maximum number of joined (S,G)s per EU are readily\n   available; solutions\
    \ that take consumed bandwidth into account are\n   available as vendor-specific\
    \ features in routers.  Note that this is\n   primarily a non-peering issue in\
    \ AD-2; it only becomes a peering\n   issue if the peering link itself is not\
    \ big enough to carry all\n   possible content from AD-1 or, as in Use Case 3.4,\
    \ when the AMT relay\n   in AD-1 is that last replication point.\n   Limiting\
    \ the amount of (S,G) state per EU is also a good first\n   measure to prohibit\
    \ too much undesired \"empty\" state from being built\n   (state not carrying\
    \ traffic), but it would not suffice in the case of\n   DDoS attacks, e.g., viruses\
    \ that impact a large number of EU devices.\n"
- title: 6.2.  Content Security
  contents:
  - "6.2.  Content Security\n   Content confidentiality, DRM (Digital Rights Management),\n\
    \   authentication, and authorization are optional, based on the content\n   delivered.\
    \  For content that is \"FTA\" (Free To Air), the following\n   considerations\
    \ can be ignored, and content can be sent unencrypted\n   and without EU authentication\
    \ and authorization.  Note, though, that\n   the mechanisms described here may\
    \ also be desirable for the\n   application source to better track users even\
    \ if the content itself\n   would not require it.\n   For inter-domain content,\
    \ there are at least two models for content\n   confidentiality, including (1)\
    \ DRM authentication and authorization\n   and (2) EU authentication and authorization:\n\
    \   o  In the classical (IP)TV model, responsibility is per domain, and\n    \
    \  content is and can be passed on unencrypted.  AD-1 delivers\n      content\
    \ to AD-2; AD-2 can further process the content, including\n      features like\
    \ ad insertion, and AD-2 is the sole point of contact\n      regarding the contact\
    \ for its EUs.  In this document, we do not\n      consider this case because\
    \ it typically involves service aspects\n      operated by AD-2 that are higher\
    \ than the network layer; this\n      document focuses on the network-layer AD-1/AD-2\
    \ peering case but\n      not the application-layer peering case.  Nevertheless,\
    \ this model\n      can be derived through additional work beyond what is described\n\
    \      here.\n   o  The other model is the one in which content confidentiality,\
    \ DRM,\n      EU authentication, and EU authorization are end to end:\n      responsibilities\
    \ of the multicast application source provider and\n      receiver application.\
    \  This is the model assumed here.  It is also\n      the model used in Internet\
    \ \"Over the Top\" (OTT) video delivery.\n      Below, we discuss the threats\
    \ incurred in this model due to the\n      use of IP multicast in AD-1 or AD-2\
    \ and across the peering point.\n   End-to-end encryption enables end-to-end EU\
    \ authentication and\n   authorization: the EU may be able to join (via IGMP/MLD)\
    \ and receive\n   the content, but it can only decrypt it when it receives the\n\
    \   decryption key from the content source in AD-1.  The key is the\n   authorization.\
    \  Keeping that key to itself and prohibiting playout of\n   the decrypted content\
    \ to non-copy-protected interfaces are typical\n   DRM features in that receiver\
    \ application or EU device operating\n   system.\n   End-to-end encryption is\
    \ continuously attacked.  Keys may be subject\n   to brute-force attacks so that\
    \ content can potentially be decrypted\n   later, or keys are extracted from the\
    \ EU application/device and\n   shared with other unauthenticated receivers. \
    \ One important class of\n   content is where the value is in live consumption,\
    \ such as sports or\n   other event (e.g., concert) streaming.  Extraction of\
    \ keying material\n   from compromised authenticated EUs and sharing with unauthenticated\n\
    \   EUs are not sufficient.  It is also necessary for those\n   unauthenticated\
    \ EUs to get a streaming copy of the content itself.\n   In unicast streaming,\
    \ they cannot get such a copy from the content\n   source (because they cannot\
    \ authenticate), and, because of asymmetric\n   bandwidths, it is often impossible\
    \ to get the content from\n   compromised EUs to a large number of unauthenticated\
    \ EUs.  EUs behind\n   classical \"16 Mbps down, 1 Mbps up\" ADSL links are the\
    \ best example.\n   With increasing broadband access speeds, unicast peer-to-peer\
    \ copying\n   of content becomes easier, but it likely will always be easily\n\
    \   detectable by the ADs because of its traffic patterns and volume.\n   When\
    \ IP multicast is being used without additional security, AD-2 is\n   not aware\
    \ of which EU is authenticated for which content.  Any\n   unauthenticated EU\
    \ in AD-2 could therefore get a copy of the\n   encrypted content without triggering\
    \ suspicion on the part of AD-2 or\n   AD-1 and then either (1) live-decode it,\
    \ in the presence of the\n   compromised authenticated EU and key-sharing or (2)\
    \ decrypt it later,\n   in the presence of federated brute-force key-cracking.\n\
    \   To mitigate this issue, the last replication point that is creating\n   (S,G)\
    \ copies to EUs would need to permit those copies only after\n   authentication\
    \ of the EUs.  This would establish the same\n   authenticated \"EU only\" copy\
    \ that is used in unicast.\n   Schemes for per-EU IP multicast authentication/authorization\
    \ (and, as\n   a result, non-delivery or copying of per-content IP multicast\n\
    \   traffic) have been built in the past and are deployed in service\n   providers\
    \ for intra-domain IPTV services, but no standards exist for\n   this.  For example,\
    \ there is no standardized RADIUS attribute for\n   authenticating the IGMP/MLD\
    \ filter set, but such implementations\n   exist.  The authors of this document\
    \ are specifically also not aware\n   of schemes where the same authentication\
    \ credentials used to get the\n   encryption key from the content source could\
    \ also be used to\n   authenticate and authorize the network-layer IP multicast\
    \ replication\n   for the content.  Such schemes are technically not difficult\
    \ to build\n   and would avoid creating and maintaining a separate network\n \
    \  traffic-forwarding authentication/authorization scheme decoupled from\n   the\
    \ end-to-end authentication/authorization system of the\n   application.\n   If\
    \ delivery of such high-value content in conjunction with the\n   peering described\
    \ here is desired, the short-term recommendations are\n   for sources to clearly\
    \ isolate the source and group addresses used\n   for different content bundles,\
    \ communicate those (S,G) patterns from\n   AD-1 to AD-2, and let AD-2 leverage\
    \ existing per-EU authentication/\n   authorization mechanisms in network devices\
    \ to establish filters for\n   (S,G) sets to each EU.\n"
- title: 6.3.  Peering Encryption
  contents:
  - "6.3.  Peering Encryption\n   Encryption at peering points for multicast delivery\
    \ may be used per\n   agreement between AD-1 and AD-2.\n   In the case of a private\
    \ peering link, IP multicast does not have\n   attack vectors on a peering link\
    \ different from those of IP unicast,\n   but the content owner may have defined\
    \ strict constraints against\n   unauthenticated copying of even the end-to-end\
    \ encrypted content; in\n   this case, AD-1 and AD-2 can agree on additional transport\
    \ encryption\n   across that peering link.  In the case of a broadcast peering\n\
    \   connection (e.g., IXP), transport encryption is again the easiest way\n  \
    \ to prohibit unauthenticated copies by other ADs on the same peering\n   point.\n\
    \   If peering is across a tunnel that spans intermittent transit ADs\n   (not\
    \ discussed in detail in this document), then encryption of that\n   tunnel traffic\
    \ is recommended.  It not only prohibits possible\n   \"leakage\" of content but\
    \ also protects the information regarding what\n   content is being consumed in\
    \ AD-2 (aggregated privacy protection).\n   See Section 6.4 for reasons why the\
    \ peering point may also need to be\n   encrypted for operational reasons.\n"
- title: 6.4.  Operational Aspects
  contents:
  - "6.4.  Operational Aspects\n   Section 4.3.3 discusses the exchange of log information,\
    \ and\n   Section 7 discusses the exchange of program information.  All these\n\
    \   operational pieces of data should by default be exchanged via\n   authenticated\
    \ and encrypted peer-to-peer communication protocols\n   between AD-1 and AD-2\
    \ so that only the intended recipients in the\n   peers' AD have access to it.\
    \  Even exposure of the least sensitive\n   information to third parties opens\
    \ up attack vectors.  Putting valid\n   (S,G) information, for example, into DNS\
    \ (as opposed to passing it\n   via secured channels from AD-1 to AD-2) to allow\
    \ easier filtering of\n   invalid (S,G) information would also allow attackers\
    \ to more easily\n   identify valid (S,G) information and change their attack\
    \ vector.\n   From the perspective of the ADs, security is most critical for log\n\
    \   information, as it provides operational insight into the originating\n   AD\
    \ but also contains sensitive user data.\n   Sensitive user data exported from\
    \ AD-2 to AD-1 as part of logs could\n   be as much as the equivalent of 5-tuple\
    \ unicast traffic flow\n   accounting (but not more, e.g., no application-level\
    \ information).\n   As mentioned in Section 7, in unicast, AD-1 could capture\
    \ these\n   traffic statistics itself because this is all about traffic flows\n\
    \   (originated by AD-1) to EU receivers in AD-2, and operationally\n   passing\
    \ it from AD-2 to AD-1 may be necessary when IP multicast is\n   used because\
    \ of the replication taking place in AD-2.\n   Nevertheless, passing such traffic\
    \ statistics inside AD-1 from a\n   capturing router to a backend system is likely\
    \ less subject to\n   third-party attacks than passing it \"inter-domain\" from\
    \ AD-2 to AD-1,\n   so more diligence needs to be applied to secure it.\n   If\
    \ any protocols used for the operational exchange of information are\n   not easily\
    \ secured at the transport layer or higher (because of the\n   use of legacy products\
    \ or protocols in the network), then AD-1 and\n   AD-2 can also consider ensuring\
    \ that all operational data exchanges\n   go across the same peering point as\
    \ the traffic and use network-layer\n   encryption of the peering point (as discussed\
    \ previously) to\n   protect it.\n   End-to-end authentication and authorization\
    \ of EUs may involve some\n   kind of token authentication and are done at the\
    \ application layer,\n   independently of the two ADs.  If there are problems\
    \ related to the\n   failure of token authentication when EUs are supported by\
    \ AD-2, then\n   some means of validating proper operation of the token authentication\n\
    \   process (e.g., validating that backend servers querying the multicast\n  \
    \ application source provider's token authentication server are\n   communicating\
    \ properly) should be considered.  Implementation details\n   are beyond the scope\
    \ of this document.\n   In the event of a security breach, the two ADs are expected\
    \ to have a\n   mitigation plan for shutting down the peering point and directing\n\
    \   multicast traffic over alternative peering points.  It is also\n   expected\
    \ that appropriate information will be shared for the purpose\n   of securing\
    \ the identified breach.\n"
- title: 7.  Privacy Considerations
  contents:
  - "7.  Privacy Considerations\n   The described flow of information about content\
    \ and EUs as described\n   in this document aims to maintain privacy:\n   AD-1\
    \ is operating on behalf of (or owns) the content source and is\n   therefore\
    \ part of the content-consumption relationship with the EU.\n   The privacy considerations\
    \ between the EU and AD-1 are therefore\n   generally the same (with one exception;\
    \ see below) as they would be\n   if no IP multicast was used, especially because\
    \ end-to-end encryption\n   can and should be used for any privacy-conscious content.\n\
    \   Information related to inter-domain multicast transport service is\n   provided\
    \ to AD-1 by the AD-2 operators.  AD-2 is not required to gain\n   additional\
    \ insight into the user's behavior through this process\n   other than what it\
    \ would already have without service collaboration\n   with AD-1, unless AD-1\
    \ and AD-2 agree on it and get approval from\n   the EU.\n   For example, if it\
    \ is deemed beneficial for the EU to get support\n   directly from AD-2, then\
    \ it would generally be necessary for AD-2 to\n   be aware of the mapping between\
    \ content and network (S,G) state so\n   that AD-2 knows which (S,G) to troubleshoot\
    \ when the EU complains\n   about problems with specific content.  The degree\
    \ to which this\n   dissemination is done by AD-1 explicitly to meet privacy expectations\n\
    \   of EUs is typically easy to assess by AD-1.  Two simple examples are\n   as\
    \ follows:\n   o  For a sports content bundle, every EU will happily click on\
    \ the\n      \"I approve that the content program information is shared with\n\
    \      your service provider\" button, to ensure best service reliability,\n \
    \     because service-conscious AD-2 would likely also try to ensure\n      that\
    \ high-value content, such as the (S,G) for the Super Bowl,\n      would be the\
    \ first to receive care in the case of network issues.\n   o  If the content in\
    \ question was content for which the EU expected\n      more privacy, the EU should\
    \ prefer a content bundle that included\n      this content in a large variety\
    \ of other content, have all content\n      end-to-end encrypted, and not share\
    \ programming information with\n      AD-2, to maximize privacy.  Nevertheless,\
    \ the privacy of the EU\n      against AD-2 observing traffic would still be lower\
    \ than in the\n      equivalent setup using unicast, because in unicast, AD-2\
    \ could not\n      correlate which EUs are watching the same content and use that\
    \ to\n      deduce the content.  Note that even the setup in Section 3.4,\n  \
    \    where AD-2 is not involved in IP multicast at all, does not\n      provide\
    \ privacy against this level of analysis by AD-2, because\n      there is no transport-layer\
    \ encryption in AMT; therefore, AD-2 can\n      correlate by on-path traffic analysis\
    \ who is consuming the same\n      content from an AMT relay from both the (S,G)\
    \ join messages in AMT\n      and the identical content segments (that were replicated\
    \ at the\n      AMT relay).\n   In summary, because only content to be consumed\
    \ by multiple EUs is\n   carried via IP multicast here and all of that content\
    \ can be\n   end-to-end encrypted, the only privacy consideration specific to\
    \ IP\n   multicast is for AD-2 to know or reconstruct what content an EU is\n\
    \   consuming.  For content for which this is undesirable, some form of\n   protections\
    \ as explained above are possible, but ideally, the model\n   described in Section\
    \ 3.4 could be used in conjunction with future\n   work, e.g., adding Datagram\
    \ Transport Layer Security (DTLS)\n   encryption [RFC6347] between the AMT relay\
    \ and the EU.\n   Note that IP multicast by nature would permit the EU's privacy\n\
    \   against the content source operator because, unlike unicast, the\n   content\
    \ source does not natively know which EU is consuming which\n   content: in all\
    \ cases where AD-2 provides replication, only AD-2\n   knows this directly.  This\
    \ document does not attempt to describe a\n   model that maintains such a level\
    \ of privacy against the content\n   source; rather, we describe a model that\
    \ only protects against\n   exposure to intermediate parties -- in this case,\
    \ AD-2.\n"
- title: 8.  IANA Considerations
  contents:
  - "8.  IANA Considerations\n   This document does not require any IANA actions.\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [RFC2784]  Farinacci, D., Li, T., Hanks, S., Meyer,\
    \ D., and P.\n              Traina, \"Generic Routing Encapsulation (GRE)\", RFC\
    \ 2784,\n              DOI 10.17487/RFC2784, March 2000,\n              <https://www.rfc-editor.org/info/rfc2784>.\n\
    \   [RFC3376]  Cain, B., Deering, S., Kouvelas, I., Fenner, B., and A.\n     \
    \         Thyagarajan, \"Internet Group Management Protocol,\n              Version\
    \ 3\", RFC 3376, DOI 10.17487/RFC3376, October 2002,\n              <https://www.rfc-editor.org/info/rfc3376>.\n\
    \   [RFC3810]  Vida, R., Ed., and L. Costa, Ed., \"Multicast Listener\n      \
    \        Discovery Version 2 (MLDv2) for IPv6\", RFC 3810,\n              DOI\
    \ 10.17487/RFC3810, June 2004,\n              <https://www.rfc-editor.org/info/rfc3810>.\n\
    \   [RFC4760]  Bates, T., Chandra, R., Katz, D., and Y. Rekhter,\n           \
    \   \"Multiprotocol Extensions for BGP-4\", RFC 4760,\n              DOI 10.17487/RFC4760,\
    \ January 2007,\n              <https://www.rfc-editor.org/info/rfc4760>.\n  \
    \ [RFC4604]  Holbrook, H., Cain, B., and B. Haberman, \"Using Internet\n     \
    \         Group Management Protocol Version 3 (IGMPv3) and Multicast\n       \
    \       Listener Discovery Protocol Version 2 (MLDv2) for\n              Source-Specific\
    \ Multicast\", RFC 4604,\n              DOI 10.17487/RFC4604, August 2006,\n \
    \             <https://www.rfc-editor.org/info/rfc4604>.\n   [RFC4609]  Savola,\
    \ P., Lehtonen, R., and D. Meyer, \"Protocol\n              Independent Multicast\
    \ - Sparse Mode (PIM-SM) Multicast\n              Routing Security Issues and\
    \ Enhancements\", RFC 4609,\n              DOI 10.17487/RFC4609, October 2006,\n\
    \              <https://www.rfc-editor.org/info/rfc4609>.\n   [RFC7450]  Bumgardner,\
    \ G., \"Automatic Multicast Tunneling\", RFC 7450,\n              DOI 10.17487/RFC7450,\
    \ February 2015,\n              <https://www.rfc-editor.org/info/rfc7450>.\n \
    \  [RFC7761]  Fenner, B., Handley, M., Holbrook, H., Kouvelas, I.,\n         \
    \     Parekh, R., Zhang, Z., and L. Zheng, \"Protocol Independent\n          \
    \    Multicast - Sparse Mode (PIM-SM): Protocol Specification\n              (Revised)\"\
    , STD 83, RFC 7761, DOI 10.17487/RFC7761,\n              March 2016, <https://www.rfc-editor.org/info/rfc7761>.\n\
    \   [BCP38]    Ferguson, P. and D. Senie, \"Network Ingress Filtering:\n     \
    \         Defeating Denial of Service Attacks which employ IP Source\n       \
    \       Address Spoofing\", BCP 38, RFC 2827, May 2000,\n              <https://www.rfc-editor.org/info/rfc2827>.\n\
    \   [BCP41]    Floyd, S., \"Congestion Control Principles\", BCP 41,\n       \
    \       RFC 2914, September 2000,\n              <https://www.rfc-editor.org/info/rfc2914>.\n\
    \   [BCP145]   Eggert, L., Fairhurst, G., and G. Shepherd, \"UDP Usage\n     \
    \         Guidelines\", BCP 145, RFC 8085, March 2017,\n              <https://www.rfc-editor.org/info/rfc8085>.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [RFC4786]  Abley, J. and K. Lindqvist, \"Operation\
    \ of Anycast\n              Services\", BCP 126, RFC 4786, DOI 10.17487/RFC4786,\n\
    \              December 2006, <https://www.rfc-editor.org/info/rfc4786>.\n   [RFC6347]\
    \  Rescorla, E. and N. Modadugu, \"Datagram Transport Layer\n              Security\
    \ Version 1.2\", RFC 6347, DOI 10.17487/RFC6347,\n              January 2012,\
    \ <https://www.rfc-editor.org/info/rfc6347>.\n   [INF_ATIS_10]\n             \
    \ \"CDN Interconnection Use Cases and Requirements in a\n              Multi-Party\
    \ Federation Environment\", ATIS Standard\n              A-0200010, December 2012.\n\
    \   [MDH-05]   Thaler, D. and B. Aboba, \"Multicast Debugging Handbook\",\n  \
    \            Work in Progress, draft-ietf-mboned-mdh-05, November 2000.\n   [Traceroute]\n\
    \              \"traceroute.org\", <http://traceroute.org/#source%20code>.\n \
    \  [Mtrace-v2]\n              Asaeda, H., Meyer, K., and W. Lee, Ed., \"Mtrace\
    \ Version 2:\n              Traceroute Facility for IP Multicast\", Work in Progress,\n\
    \              draft-ietf-mboned-mtrace-v2-22, December 2017.\n"
- title: Acknowledgments
  contents:
  - "Acknowledgments\n   The authors would like to thank the following individuals\
    \ for their\n   suggestions, comments, and corrections:\n      Mikael Abrahamsson\n\
    \      Hitoshi Asaeda\n      Dale Carder\n      Tim Chown\n      Leonard Giuliano\n\
    \      Jake Holland\n      Joel Jaeggli\n      Henrik Levkowetz\n      Albert\
    \ Manfredi\n      Stig Venaas\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Percy S. Tarapore (editor)\n   AT&T\n   Phone: 1-732-420-4172\n\
    \   Email: tarapore@att.com\n   Robert Sayko\n   AT&T\n   Phone: 1-732-420-3292\n\
    \   Email: rs1983@att.com\n   Greg Shepherd\n   Cisco\n   Email: shep@cisco.com\n\
    \   Toerless Eckert (editor)\n   Huawei USA - Futurewei Technologies Inc.\n  \
    \ Email: tte+ietf@cs.fau.de, toerless.eckert@huawei.com\n   Ram Krishnan\n   SupportVectors\n\
    \   Email: ramkri123@gmail.com\n"
