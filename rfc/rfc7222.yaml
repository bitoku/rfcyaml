- title: __initial_text__
  contents:
  - '            Quality-of-Service Option for Proxy Mobile IPv6

    '
- title: Abstract
  contents:
  - "Abstract\n   This specification defines a new mobility option, the Quality-of-\n\
    \   Service (QoS) option, for Proxy Mobile IPv6.  This option can be used\n  \
    \ by the local mobility anchor and the mobile access gateway for\n   negotiating\
    \ Quality-of-Service parameters for a mobile node's IP\n   flows.  The negotiated\
    \ QoS parameters can be used for QoS policing\n   and marking of packets to enforce\
    \ QoS differentiation on the path\n   between the local mobility anchor and the\
    \ mobile access gateway.\n   Furthermore, making QoS parameters available on the\
    \ mobile access\n   gateway enables mapping of these parameters to QoS rules that\
    \ are\n   specific to the access technology and allows those rules to be\n   enforced\
    \ on the access network using access-technology-specific\n   approaches.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7222.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Conventions and Terminology .....................................4\n  \
    \    2.1. Conventions ................................................4\n    \
    \  2.2. Terminology ................................................5\n   3. Overview\
    \ of QoS Support in Proxy Mobile IPv6 ....................7\n      3.1. Quality-of-Service\
    \ Option -- Usage Examples ................9\n      3.2. Quality-of-Service Attributes\
    \ -- Usage Examples ...........11\n   4. Protocol Messaging Extensions ..................................12\n\
    \      4.1. Quality-of-Service Option .................................12\n  \
    \    4.2. Quality-of-Service Attributes .............................14\n    \
    \       4.2.1. Per-Mobile-Node Aggregate Maximum Downlink\n                  Bit\
    \ Rate ...........................................16\n           4.2.2. Per-Mobile-Node\
    \ Aggregate Maximum Uplink Bit Rate ..17\n           4.2.3. Per-Mobility-Session\
    \ Aggregate Maximum\n                  Downlink Bit Rate ..................................18\n\
    \           4.2.4. Per-Mobility-Session Aggregate Maximum\n                  Uplink\
    \ Bit Rate ....................................20\n           4.2.5. Allocation\
    \ and Retention Priority ..................22\n           4.2.6. Aggregate Maximum\
    \ Downlink Bit Rate ................23\n           4.2.7. Aggregate Maximum Uplink\
    \ Bit Rate ..................25\n           4.2.8. Guaranteed Downlink Bit Rate\
    \ .......................26\n           4.2.9. Guaranteed Uplink Bit Rate .........................27\n\
    \           4.2.10. QoS Traffic Selector ..............................28\n  \
    \         4.2.11. QoS Vendor-Specific Attribute .....................29\n    \
    \  4.3. New Status Code for Proxy Binding Acknowledgement .........30\n      4.4.\
    \ New Notification Reason for Update Notification Message ...30\n      4.5. New\
    \ Status Code for Update Notification\n           Acknowledgement Message ...................................31\n\
    \   5. Protocol Considerations ........................................31\n  \
    \    5.1. Local Mobility Anchor Considerations ......................31\n    \
    \  5.2. Mobile Access Gateway Considerations ......................35\n   6. QoS\
    \ Services in Integrated WLAN-3GPP Networks ..................39\n      6.1. Technical\
    \ Scope and Procedure .............................39\n      6.2. Relevant QoS\
    \ Attributes ...................................41\n   7. IANA Considerations\
    \ ............................................42\n   8. Security Considerations\
    \ ........................................44\n   9. Acknowledgements ...............................................44\n\
    \   10. References ....................................................44\n  \
    \    10.1. Normative References .....................................44\n    \
    \  10.2. Informative References ...................................45\n   Appendix\
    \ A.  Information When Implementing 3GPP QoS in IP\n                Transport\
    \ Network ....................................47\n     A.1.  Mapping Tables ............................................47\n\
    \     A.2.  Use Cases and Protocol Operations .........................48\n  \
    \     A.2.1.  Handover of Existing QoS Rules ........................48\n    \
    \   A.2.2.  Establishment of QoS Rules ............................50\n      \
    \ A.2.3.  Dynamic Update to QoS Policy ..........................52\n   Appendix\
    \ B.  Information When Implementing PMIP-Based QoS Support\n                with\
    \ IEEE 802.11e ....................................53\n   Appendix C.  Information\
    \ When Implementing with a Broadband\n                Network Gateway ......................................57\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Mobile operators deploy Proxy Mobile IPv6 (PMIPv6) [RFC5213]\
    \ to\n   enable network-based mobility management for mobile nodes (MNs).\n  \
    \ Users can access IP-based services from their mobile device by using\n   various\
    \ radio access technologies.  The currently supported mobile\n   standards have\
    \ adequate support for QoS-based service differentiation\n   for subscriber traffic\
    \ in cellular radio access networks.  QoS\n   policies are typically controlled\
    \ by a policy control function,\n   whereas the policies are enforced by one or\
    \ more gateways in the\n   infrastructure, such as the local mobility anchor (LMA)\
    \ and the\n   mobile access gateway (MAG), as well as by access network elements.\n\
    \   Policy control and in-band QoS differentiation for access to the\n   mobile\
    \ operator network through alternative non-cellular access\n   technologies are\
    \ not supported in the currently specified standards.\n   Although support for\
    \ IP session handovers and IP flow mobility across\n   access technologies already\
    \ exists in cellular standards [TS23.402],\n   QoS policy handovers across access\
    \ technologies has not received much\n   attention so far.\n   Based on the deployment\
    \ trends, Wireless LAN (WLAN) can be considered\n   as the dominant alternative\
    \ access technology to complement cellular\n   radio access.  Since the 802.11e\
    \ extension [IEEE802.11e-2005]\n   provides QoS extensions to WLAN, it is beneficial\
    \ to apply QoS\n   policies to WLAN access, which enables QoS classification of\
    \ downlink\n   as well as uplink traffic between a mobile node and its local\n\
    \   mobility anchor.  For realizing this capability, this specification\n   identifies\
    \ three functional operations:\n      (a) Maintaining QoS classification during\
    \ a handover between\n      cellular radio access and WLAN access by means of\
    \ establishing QoS\n      policies in the handover target access network,\n  \
    \    (b) mapping of QoS classes and associated policies between\n      different\
    \ access systems, and\n      (c) establishment of QoS policies for new data sessions/flows,\n\
    \      which are initiated while using WLAN access.\n   This document specifies\
    \ an extension to the PMIPv6 protocol [RFC5213]\n   to establish QoS policies\
    \ for a mobile node's data traffic on the\n   local mobility anchor and the mobile\
    \ access gateway.  QoS policies\n   are conveyed in-band with PMIPv6 signaling\
    \ using the specified QoS\n   option and are enforced on the local mobility anchor\
    \ for downlink\n   traffic and on the mobile access gateway and its access network\
    \ for\n   the uplink traffic.  The specified option allows association between\n\
    \   IP session classification characteristics, such as a Differentiated\n   Services\
    \ Code Point (DSCP) [RFC2474], and the expected QoS class for\n   the IP session.\
    \  This document specifies fundamental QoS attributes\n   that apply on a per-mobile-node,\
    \ per-mobility-session, or per-flow\n   basis.  The specified attributes are not\
    \ specific to any access\n   technology but are compatible with the Third Generation\
    \ Partnership\n   Project (3GPP) and IEEE 802.11 Wireless LAN QoS specifications\n\
    \   [IEEE802.11-2012].\n   Additional QoS attributes can be specified and used\
    \ with the QoS\n   option, e.g., to represent more specific descriptions of latency\n\
    \   constraints or jitter bounds.  The specification of such additional\n   QoS\
    \ attributes as well as the handling of QoS policies between the\n   mobile access\
    \ gateway and the access network are out of the scope of\n   this specification.\n"
- title: 2.  Conventions and Terminology
  contents:
  - '2.  Conventions and Terminology

    '
- title: 2.1.  Conventions
  contents:
  - "2.1.  Conventions\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"\
    SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\"\
    , and \"OPTIONAL\" in this\n   document are to be interpreted as described in\
    \ RFC 2119 [RFC2119].\n"
- title: 2.2.  Terminology
  contents:
  - "2.2.  Terminology\n   All the mobility-related terms used in this document are\
    \ to be\n   interpreted as defined in the Proxy Mobile IPv6 specifications\n \
    \  [RFC5213], [RFC5844], and [RFC7077].  Additionally, this document\n   uses\
    \ the following abbreviations:\n   Aggregate Maximum Bit Rate (AMBR)\n      AMBR\
    \ defines the upper limit on the bit rate that can be provided\n      by the network\
    \ for a set of IP flows.  IP packets within the flows\n      exceeding the AMBR\
    \ limit may be discarded by the rate-shaping\n      function where the AMBR parameter\
    \ is enforced.  Variants of the\n      \"AMBR\" term can be defined by restricting\
    \ the target set of IP\n      flows on which the AMBR is applied to a mobile node,\
    \ mobility\n      session, or flow direction.  For example, Per-Mobile-Node\n\
    \      Aggregate Maximum Downlink Bit Rate, Per-Mobile-Node Aggregate\n      Maximum\
    \ Uplink Bit Rate, Per-Mobility-Session Aggregate Maximum\n      Downlink Bit\
    \ Rate, and Per-Mobility-Session Aggregate Maximum\n      Uplink Bit Rate are\
    \ used in this document.\n   Allocation and Retention Priority (AARP)\n      AARP\
    \ is used in congestion situations when there are insufficient\n      resources\
    \ for meeting all Service Requests.  It is used primarily\n      by the Admission\
    \ Control function to determine whether a\n      particular Service Request must\
    \ be rejected due to lack of\n      resources or honored by preempting an existing\
    \ low-priority\n      service.\n   Differentiated Services Code Point (DSCP)\n\
    \      In the Differentiated Services Architecture [RFC2474], packets are\n  \
    \    classified and marked to receive a particular per-hop forwarding\n      behavior\
    \ on nodes along their path based on the marking present on\n      the packet.\
    \  This marking on IPv4 and IPv6 packets that defines a\n      specific per-hop\
    \ behavior is known as DSCP.  Refer to [RFC2474],\n      [RFC2475], [RFC4594],\
    \ and [RFC2983] for a complete explanation.\n   Downlink (DL) Traffic\n      The\
    \ mobile node's IP packets that the mobile access gateway\n      receives from\
    \ the local mobility anchor are referred to as the\n      Downlink traffic.  The\
    \ \"Downlink\" term used in the QoS attribute\n      definition is always from\
    \ the reference point of the mobile node,\n      and it implies traffic heading\
    \ towards the mobile node.\n   Guaranteed Bit Rate (GBR)\n      GBR denotes the\
    \ assured bit rate that will be provided by the\n      network for a set of IP\
    \ flows.  It is assumed that the network\n      reserves the resources for supporting\
    \ the GBR parameter.  Variants\n      of the \"GBR\" term can be defined by limiting\
    \ the scope of the\n      target IP flows on which the GBR is applied to a mobile\
    \ node,\n      mobility session, or flow direction.  For example, Guaranteed\n\
    \      Downlink Bit Rate and Guaranteed Uplink Bit Rate are used in this\n   \
    \   document.\n   Mobility Session\n      The term \"mobility session\" is defined\
    \ in [RFC5213].  It refers to\n      the creation or existence of state associated\
    \ with the mobile\n      node's mobility binding on the local mobility anchor\
    \ and on the\n      mobile access gateway.\n   QoS Service Request\n      A QoS\
    \ Service Request is a set of QoS parameters that are defined\n      to be enforced\
    \ on one or more mobile node's IP flows.  The\n      parameters at the minimum\
    \ include a DSCP marking and additionally\n      may include Guaranteed Bit Rate\
    \ or Aggregate Maximum Bit Rate.\n      The Quality-of-Service option defined\
    \ in this document represents\n      a QoS Service Request.\n   Service Identifier\n\
    \      In some mobility architectures, multiple services within the same\n   \
    \   mobility service subscription are offered to a mobile node.  Each\n      of\
    \ those services provide a specific service (for example,\n      Internet Service\
    \ and Voice Over IP Service) and has an identifier\n      called \"Service Identifier\"\
    . 3GPP APN (Access Point Name) is an\n      example of a Service Identifier. \
    \ Refer to [RFC5149] for the\n      definition of the Service Identifier and the\
    \ mobility option used\n      for carrying the Service Identifier.\n   Uplink\
    \ (UL) Traffic\n      The mobile node's IP packets that the mobile access gateway\n\
    \      forwards to the local mobility anchor are referred to as the\n      Uplink\
    \ traffic.  The \"Uplink\" term used in the QoS attribute\n      definitions is\
    \ based on the reference point of the mobile node,\n      and it implies traffic\
    \ originating from the mobile node.\n"
- title: 3.  Overview of QoS Support in Proxy Mobile IPv6
  contents:
  - "3.  Overview of QoS Support in Proxy Mobile IPv6\n   The Quality-of-Service support\
    \ in Proxy Mobile IPv6 specified in this\n   document is based on the Differentiated\
    \ Services Architecture\n   ([RFC2474] and [RFC2475]).  The access and the home\
    \ network in the\n   Proxy Mobile IPv6 domain are assumed to be DiffServ-enabled,\
    \ with\n   every network node in the forwarding path for the mobile node's IP\n\
    \   traffic being DiffServ-compliant.  The per-hop behavior for providing\n  \
    \ differential treatment based on the DiffServ marking in the packet is\n   assumed\
    \ to be supported in the Proxy Mobile IPv6 domain.\n   The local mobility anchor\
    \ in the home network and the mobile access\n   gateway in the access network\
    \ define the network boundary between the\n   access and the home network.  As\
    \ the tunnel entry and exit points for\n   the mobile node's IP traffic, these\
    \ entities are the logical choice\n   for being chosen as the QoS enforcement\
    \ points.  The basic QoS\n   functions such as marking, metering, policing, and\
    \ rate-shaping on\n   the mobile node's IP flows can be enforced at these nodes.\n\
    \   The local mobility anchor and the mobile access gateway can negotiate\n  \
    \ the Quality-of-Service parameters for a mobile node's IP flows based\n   on\
    \ the signaling extensions defined in this document.  The QoS\n   services that\
    \ can be enabled for a mobile node are for meeting both\n   the quantitative performance\
    \ requirements (such as Guaranteed Bit\n   Rate) as well as for realizing relative\
    \ performance treatment by way\n   of class-based differentiation.  The subscriber's\
    \ policy and the\n   charging profile (for example, [TS22.115]) are key considerations\
    \ for\n   the mobility entities in the QoS service negotiation.  The decision\n\
    \   on the type of QoS services that are to be enabled for a mobile node\n   is\
    \ based on the subscriber profile and based on available network\n   resources.\
    \  The negotiated QoS parameters are used for providing QoS\n   differentiation\
    \ on the path between the local mobility anchor and the\n   mobile access gateway.\
    \  The signaling related to QoS services is\n   strictly between the mobility\
    \ entities and does not result in per-\n   flow state or signaling to any other\
    \ node in the network.\n     +=======+\n     |  MN-1 |\n     +=======+\n     \
    \  | | |                                                    Flow-6\n       Flow-1<--(GBR:\
    \ 64 Kbps)                                       |\n       |                 \
    \                                     Flow-4 |\n         Flow-2              \
    \                                    | | |\n       | |                       \
    \                           Flow-1 | |\n         | Flow-3                    \
    \                            | | |\n       |_|_|                             \
    \               DSCP-X   | | |\n      (     )<--(Per-Session-AMBR: 1 Mbps)   \
    \                :   | | |\n       | | |                                     \
    \     DSCP-Z :   | | |\n         | |                                         \
    \      : :   | | |\n       | | |             +=====+                        +==:=v+\
    \  | | |\n         | '- -- - - - --|     |                        |  : o|--' |\
    \ |\n       | '- - ---  - -  -|     |           __           |  v o|----' |\n\
    \       '- - - - -  - -  -|     |       _--'  '--_       |  o--|------'\n    \
    \                     |     |      (          )      |     |\n               \
    \          | MAG |=====( IP Network )=====| LMA |\n                         |\
    \     |      (          )      |     |\n       ,- - - - - - - - -|     |     \
    \   '--__--'        |    o|-- - -,\n         ,- - -- - -- - -|     |         \
    \               |    o|--- , |\n       | | ,- -  - - -- -|     |             \
    \           |    o|--, | |\n         | |             +=====+                 \
    \       +====^+  | | |\n       |_|_|                                         \
    \        :   | | |\n      ( _ _ )<--(Per-Session-AMBR: 2 Mbps)               \
    \    :   | | |\n       | | |                                            DSCP-Y\
    \   | | |\n         | |                                                     |\
    \ | |\n       | | |                                                     | | |\n\
    \         | Flow-6                                           Flow-2 | |\n    \
    \   | |                                                         | |\n        \
    \ Flow-5 (MBR: 100 Kbps)                               Flow-3 |\n       |    \
    \                                                         |\n       Flow-4  (GBR:\
    \ 64 Kbps)                                   Flow-5\n       | | |\n     +=======+\n\
    \     |  MN-2 |\n     +=======+\n                           Figure 1: QoS Support\n\
    \   Figure 1 illustrates the support of QoS services in a Proxy Mobile\n   IPv6\
    \ domain.  The local mobility anchor and the mobile access gateway\n   have negotiated\
    \ QoS parameters for the mobility sessions belonging to\n   MN-1 and MN-2.  The\
    \ negotiated QoS parameters include a Per-Session-\n   AMBR of 1 Mbps and 2 Mbps\
    \ for MN-1 and MN-2 respectively.\n   Furthermore, different IP flows from MN-1\
    \ and MN-2 are given\n   different QoS service treatment, for example, a GBR of\
    \ 64 Kbps for\n   Flow-1 and Flow-4 is assured, a DSCP marking enforcement of\
    \ \"Z\" on\n   Flow-6, and an MBR of 100 Kbps on Flow-5.\n"
- title: 3.1.  Quality-of-Service Option -- Usage Examples
  contents:
  - "3.1.  Quality-of-Service Option -- Usage Examples\n   Use Case 1: Figure 2 illustrates\
    \ a scenario where a local mobility\n   anchor initiates a QoS Service Request\
    \ to a mobile access gateway.\n      +-----+            +-----+              +-----+\n\
    \      | MN  |            | MAG |              | LMA |\n      +-----+        \
    \    +-----+              +-----+\n         |                   |            \
    \       |\n   1)    |---- MN Attach ----|                   |\n   2)    |    \
    \               |------ PBU ------->|\n   3)    |                   |<----- PBA\
    \ --------|\n         |                   |                   |\n   4)    |  \
    \                 |o=================o|\n         |                   |   PMIPv6\
    \ Tunnel   |\n         |                   |                   |\n         | \
    \ (LMA initiates QoS Service Request)  |\n   5)    |                   |<-----\
    \ UPN (QoS)---|\n         |                   |                   |\n        \
    \ |  (MAG proposes a revised QoS Request) |\n   6)    |                   |------\
    \ UPA (QoS')->|\n         |                   |                   |\n   7)   \
    \ |                   |<----- UPN (QoS')--|\n   8)    |                   |------\
    \ UPA (QoS')->|\n         |  QoS Rules     ---|                   |\n   9)   \
    \ | Established <-|   |  QoS Rules     ---|\n   10)   |                ---| Established\
    \ <-|   |\n         |                   |                ---|\n   11)   |<----------------->|\
    \                   |\n      Figure 2: LMA-Initiated QoS Service Request\n   o\
    \  (1) to (4): MAG detects the mobile node's attachment to the access\n      link\
    \ and initiates the signaling with the local mobility anchor.\n      Upon completing\
    \ the signaling, the LMA and MAG establish the\n      mobility session and the\
    \ forwarding state.\n   o  (5) to (8): The LMA initiates a QoS Service Request\
    \ to the mobile\n      access gateway.  The trigger for this service can be based\
    \ on a\n      trigger from a policy function, and the specific details of that\n\
    \      trigger are outside the scope of this document.  The LMA sends an\n   \
    \   Update Notification (UPN) message [RFC7077] to the MAG.  The\n      message\
    \ includes the QoS option (Section 4.1), which includes a\n      set of QoS parameters.\
    \  On determining that it cannot support the\n      requested QoS Service Request\
    \ for that mobile, the MAG sends an\n      Update Notification Acknowledgement\
    \ (UPA) message.  The message\n      contains a revised QoS option with an updated\
    \ set of QoS\n      attributes.  The LMA accepts the revised QoS Service Request\
    \ by\n      sending a new Update Notification message including the updated\n\
    \      QoS option.\n   o  (9) to (11): Upon successfully negotiating a QoS Service\
    \ Request,\n      the MAG and the LMA install the QoS rules for that Service\n\
    \      Request.  Furthermore, the MAG (using access-technology-specific\n    \
    \  mechanisms) installs the QoS rules on the access network.\n   Use Case 2: Figure\
    \ 3 illustrates a scenario where a mobile access\n   gateway initiates a QoS Service\
    \ Request to a local mobility anchor.\n      +-----+            +-----+      \
    \        +-----+\n      | MN  |            | MAG |              | LMA |\n    \
    \  +-----+            +-----+              +-----+\n         |               \
    \    |                   |\n   1)    |---- MN Attach ----|                   |\n\
    \   2)    |                   |------ PBU ------->|\n   3)    |              \
    \     |<----- PBA --------|\n         |                   |                  \
    \ |\n   4)    |                   |o=================o|\n         |          \
    \         |   PMIPv6 Tunnel   |\n         |                   |              \
    \     |\n         |  (MAG initiates QoS Service Request)  |\n   5)    |      \
    \             |------ PBU (QoS)-->|\n   6)    |                   |<----- PBA\
    \ (QoS)---|\n         |  QoS Rules     ---|                   |\n   7)    | Established\
    \ <-|   |  QoS Rules     ---|\n   8)    |                ---| Established <-|\
    \   |\n         |                   |                ---|\n   9)    |<----------------->|\
    \                   |\n       Figure 3: MAG-Initiated QoS Service Request\n  \
    \ o  (1) to (4): MAG detects the mobile node's attachment to the access\n    \
    \  link and initiates the signaling with the local mobility anchor.\n      Upon\
    \ completing the signaling, the LMA and MAG establish the\n      mobility session\
    \ and the forwarding state.\n   o  (5) to (6): The MAG initiates a QoS Service\
    \ Request to the local\n      mobility anchor.  The trigger for this service can\
    \ be based on a\n      trigger from the mobile node using access-technology-specific\n\
    \      mechanisms.  The specific details of that trigger are outside the\n   \
    \   scope of this document.  The MAG sends a Proxy Binding Update\n      (PBU)\
    \ message [RFC5213] to the LMA.  The message includes the QoS\n      option (Section\
    \ 4.1), which includes a set of QoS parameters.  The\n      LMA agrees to the\
    \ proposed QoS Service Request by sending a Proxy\n      Binding Acknowledgement\
    \ (PBA) message.\n   o  (7) to (9): Upon successfully negotiating a QoS Service\
    \ Request,\n      the MAG and the LMA install the QoS rules for that Service\n\
    \      Request.  Furthermore, the MAG using access-technology-specific\n     \
    \ mechanisms installs the QoS rules on the access network.\n"
- title: 3.2.  Quality-of-Service Attributes -- Usage Examples
  contents:
  - "3.2.  Quality-of-Service Attributes -- Usage Examples\n   This section identifies\
    \ the use cases where the Quality-of-Service\n   option (Section 4.1) and its\
    \ attributes (Section 4.2) defined in this\n   document are relevant.\n   o  The\
    \ subscription policy offered to a mobile subscriber requires\n      the service\
    \ provider to enforce Aggregate Maximum Bit Rate (AMBR)\n      limits on the subscriber's\
    \ IP traffic.  The local mobility anchor\n      and the mobile access gateway\
    \ negotiate the uplink and the\n      downlink AMBR values for the mobility session\
    \ and enforce them in\n      the access and the home network.  The QoS option\
    \ (Section 4.1)\n      with the QoS attributes Per-Session-Agg-Max-DL-Bit-Rate\n\
    \      (Section 4.2.3) and Per-Session-Agg-Max-UL-Bit-Rate\n      (Section 4.2.4)\
    \ is used for this purpose.\n   o  In Community Wi-Fi deployments, the residential\
    \ gateway\n      participating in the Wi-Fi service is shared between the home\
    \ user\n      and the community Wi-Fi users.  In order to ensure the home user's\n\
    \      Wi-Fi service is not impacted because of the community Wi-Fi\n      service,\
    \ the service provider enables Guaranteed Bit Rate (GBR)\n      for the home user's\
    \ traffic.  The QoS option (Section 4.1) with\n      the QoS attributes Guaranteed-DL-Bit-Rate\
    \ (Section 4.2.8) and\n      Guaranteed-UL-Bit-Rate (Section 4.2.9) is used for\
    \ this purpose.\n   o  A mobile user using the service provider's Voice over IP\n\
    \      infrastructure establishes a VoIP call with some other user in the\n  \
    \    network.  The negotiated call parameters for the VoIP call require\n    \
    \  a dedicated bandwidth of certain fixed value for the media flows\n      associated\
    \ with that VoIP session.  The application function in\n      the VoIP infrastructure\
    \ notifies the local mobility anchor to\n      enforce the GBR limits on that\
    \ IP flow identified by the flow\n      definition.  The QoS option (Section 4.1)\
    \ with the QoS attributes\n      Guaranteed-DL-Bit-Rate (Section 4.2.8), Guaranteed-UL-Bit-Rate\n\
    \      (Section 4.2.9), and QoS-Traffic-Selector (Section 4.2.10) is used\n  \
    \    for this purpose.\n   o  An emergency service may require network resources\
    \ in conditions\n      when the network resources have been fully allocated to\
    \ other\n      users and the network may be experiencing severe congestion.  In\n\
    \      such cases, the service provider may want to revoke resources that\n  \
    \    have been allocated and reassign them to emergency services.  The\n     \
    \ local mobility anchor and the mobile access gateway negotiate\n      Allocation\
    \ and Retention Priority (AARP) values for the IP\n      sessions associated with\
    \ the emergency applications.  The QoS\n      option (Section 4.1) with the QoS\
    \ attribute Allocation-Retention-\n      Priority (Section 4.2.5) is used for\
    \ this purpose.\n"
- title: 4.  Protocol Messaging Extensions
  contents:
  - '4.  Protocol Messaging Extensions

    '
- title: 4.1.  Quality-of-Service Option
  contents:
  - "4.1.  Quality-of-Service Option\n   The Quality-of-Service option is a mobility\
    \ header option used by\n   local mobility anchors and mobile access gateways\
    \ for negotiating QoS\n   parameters associated with a mobility session.  This\
    \ option can be\n   carried in Proxy Binding Update (PBU) [RFC5213], Proxy Binding\n\
    \   Acknowledgement (PBA) [RFC5213], Update Notification (UPN) [RFC7077]\n   and\
    \ Update Notification Acknowledgement (UPA) [RFC7077] messages.\n   There can\
    \ be more than one instance of the Quality-of-Service option\n   in a single message.\
    \  Each instance of the Quality-of-Service option\n   represents a specific QoS\
    \ Service Request.\n   The alignment requirement for this option is 4n.\n    0\
    \                   1                   2                   3\n    0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |      Type     |    Length     |     SR-ID     |       TC      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       OC      |                   Reserved                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   ~                        QoS Attribute(s)                       ~\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                           Figure 4: QoS Option\n   o  Type: 58\n   o  Length:\
    \ 8-bit unsigned integer indicating the length of the option\n      in octets,\
    \ excluding the Type and Length fields.\n   o  Service Request Identifier (SR-ID):\
    \ An 8-bit unsigned integer used\n      for identifying the QoS Service Request.\
    \  Its uniqueness is within\n      the scope of a mobility session.  The local\
    \ mobility anchor always\n      allocates the Service Request Identifier.  When\
    \ a new QoS Service\n      Request is initiated by a mobile access gateway, the\
    \ Service\n      Request Identifier in the initial request message is set to a\n\
    \      value of (0), and the local mobility anchor allocates a Service\n     \
    \ Request Identifier and includes it in the response.  For any new\n      QoS\
    \ Service Requests initiated by a local mobility anchor, the\n      Service Request\
    \ Identifier is set to the allocated value.\n   o  Traffic Class (TC): Traffic\
    \ Class consists of a 6-bit DSCP field\n      followed by a 2-bit reserved field.\n\
    \      Differentiated Services Code Point (DSCP)\n         A 6-bit unsigned integer\
    \ indicating the code point value, as\n         defined in [RFC2475] to be used\
    \ for the mobile node's IP flows.\n         When this DSCP marking needs to be\
    \ applied only for a subset of\n         a mobile node's IP flows, there will\
    \ be a Traffic Selector\n         attribute (Section 4.2.10) in the option, which\
    \ provides the\n         flow selectors.  In the absence of any such Traffic Selector\n\
    \         attribute, the DSCP marking applies to all the IP flows\n         associated\
    \ with the mobility session.\n      Reserved\n         The last two bits in the\
    \ Traffic Class field are currently\n         unused.  These bits MUST be initialized\
    \ by the sender to (0)\n         and MUST be ignored by the receiver.\n   o  Operational\
    \ Code (OC): 1-octet Operational code indicates the type\n      of QoS request.\n\
    \      RESPONSE:   (0)\n         Response to a QoS request\n      ALLOCATE:  \
    \ (1)\n         Request to allocate QoS resources\n      DE-ALLOCATE:   (2)\n\
    \         Request to de-Allocate QoS resources\n      MODIFY:   (3)\n        \
    \ Request to modify QoS parameters for a previously negotiated\n         QoS Service\
    \ Request\n      QUERY:   (4)\n         Query to list the previously negotiated\
    \ QoS Service Requests\n         that are still active\n      NEGOTIATE:   (5)\n\
    \         Response to a QoS Service Request with a counter QoS proposal\n    \
    \  Reserved:   (6) to (255)\n         Currently not used.  Receiver MUST ignore\
    \ the option received\n         with any value in this range.\n   o  Reserved:\
    \ This field is unused for now.  The value MUST be\n      initialized to a value\
    \ of (0) by the sender and MUST be ignored by\n      the receiver.\n   o  QoS\
    \ Attribute(s): Zero or more TLV-encoded QoS attributes.  The\n      format of\
    \ the QoS attribute is defined in Section 4.2.  The\n      interpretation and\
    \ usage of the QoS attribute is based on the\n      value in the Type field.\n"
- title: 4.2.  Quality-of-Service Attributes
  contents:
  - "4.2.  Quality-of-Service Attributes\n   This section identifies the format of\
    \ a Quality-of-Service attribute.\n   A QoS attribute can be included in the Quality-of-Service\
    \ option\n   defined in Section 4.1.  This section identifies the QoS attributes\n\
    \   defined by this specification.\n    0                   1                \
    \   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3\
    \ 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    Type       |     Length    |           Value               ~\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \            Figure 5: Format of a Quality-of-Service Attribute\n   o  Type: 8-bit\
    \ unsigned integer indicating the type of the QoS\n      attribute.  This specification\
    \ reserves the following values.\n      (0) -  Reserved\n         This value is\
    \ reserved and cannot be used\n      (1) -  Per-MN-Agg-Max-DL-Bit-Rate\n     \
    \    This QoS attribute, Per-Mobile-Node Aggregate Maximum Downlink\n        \
    \ Bit Rate, is defined in Section 4.2.1.\n      (2) -  Per-MN-Agg-Max-UL-Bit-Rate\n\
    \         This QoS attribute, Per-Mobile-Node Aggregate Maximum Uplink\n     \
    \    Bit Rate, is defined in Section 4.2.2.\n      (3) -  Per-Session-Agg-Max-DL-Bit-Rate\n\
    \         This QoS attribute, Per-Mobility-Session Aggregate Maximum\n       \
    \  Downlink Bit Rate, is defined in Section 4.2.3.\n      (4) -  Per-Session-Agg-Max-UL-Bit-Rate\n\
    \         This QoS attribute, Per-Mobility-Session Aggregate Maximum\n       \
    \  Uplink Bit Rate, is defined in Section 4.2.4.\n      (5) -  Allocation-Retention-Priority\n\
    \         This QoS attribute, Allocation and Retention Priority, is\n        \
    \ defined in Section 4.2.5.\n      (6) -  Aggregate-Max-DL-Bit-Rate\n        \
    \ This QoS attribute, Aggregate Maximum Downlink Bit Rate, is\n         defined\
    \ in Section 4.2.6.\n      (7) -  Aggregate-Max-UL-Bit-Rate\n         This QoS\
    \ attribute, Aggregate Maximum Uplink Bit Rate, is\n         defined in Section\
    \ 4.2.7.\n      (8) -  Guaranteed-DL-Bit-Rate\n         This QoS attribute, Guaranteed\
    \ Downlink Bit Rate, is defined in\n         Section 4.2.8.\n      (9) -  Guaranteed-UL-Bit-Rate\n\
    \         This QoS attribute, Guaranteed Uplink Bit Rate, is defined in\n    \
    \     Section 4.2.9.\n      (10) -  QoS-Traffic-Selector\n         This QoS attribute,\
    \ QoS Traffic Selector, is defined in\n         Section 4.2.10.\n      (11) -\
    \  QoS-Vendor-Specific-Attribute\n         This QoS attribute, QoS Vendor-Specific\
    \ Attribute, is defined\n         in Section 4.2.11.\n      (12) to (254) -  Reserved\n\
    \         These values are reserved for future allocation.\n      (255) -  Reserved\n\
    \         This value is reserved and cannot be used.\n   o  Length: 8-bit unsigned\
    \ integer indicating the number of octets\n      needed to encode the Value, excluding\
    \ the Type and Length fields.\n   o  Value: The format of this field is based\
    \ on the Type value.\n"
- title: 4.2.1.  Per-Mobile-Node Aggregate Maximum Downlink Bit Rate
  contents:
  - "4.2.1.  Per-Mobile-Node Aggregate Maximum Downlink Bit Rate\n   This attribute,\
    \ Per-MN-Agg-Max-DL-Bit-Rate, represents the maximum\n   downlink bit rate for\
    \ a mobile node.  It is a variant of the \"AMBR\"\n   term defined in Section\
    \ 2.2.  This value is an aggregate across all\n   mobility sessions associated\
    \ with that mobile node.\n   This attribute can be included in the Quality-of-Service\
    \ option\n   defined in Section 4.1, and it is an optional attribute.  There can\n\
    \   only be a single instance of this attribute present in a QoS option.\n   When\
    \ this attribute is present in a Proxy Binding Update sent by a\n   mobile access\
    \ gateway or in an Update Notification message sent by a\n   local mobility anchor,\
    \ it indicates the maximum aggregate downlink\n   bit rate that is being requested\
    \ for the mobile node at the peer.\n   When this attribute is present in a Proxy\
    \ Binding Acknowledgement\n   message or in an Update Notification Acknowledgement\
    \ message, it\n   indicates the maximum aggregate downlink bit rate that the peer\n\
    \   agrees to offer.\n   If multiple mobility sessions are established for a mobile\
    \ node,\n   through multiple mobile access gateways with sessions anchored either\n\
    \   on a single local mobility anchor or spread out across multiple local\n  \
    \ mobility anchors, then it depends on the operator's policy and the\n   specific\
    \ deployment as to how the total bandwidth for the mobile node\n   on each MAG-LMA\
    \ pair is computed.\n   When a QoS option includes both the Per-MN-Agg-Max-DL-Bit-Rate\n\
    \   attribute and the QoS-Traffic-Selector attribute (Section 4.2.10),\n   then\
    \ the QoS-Traffic-Selector attribute does not apply to this\n   attribute.\n \
    \   0                   1                   2                   3\n    0 1 2 3\
    \ 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |            Reserved           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                   Per-MN-Agg-Max-DL-Bit-Rate                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 1\n   o  Length: The length in octets of the attribute, excluding\
    \ the Type\n      and Length fields.  This value is set to (6).\n   o  Reserved:\
    \ This field is unused for now.  The value MUST be\n      initialized by the sender\
    \ to 0 and MUST be ignored by the\n      receiver.\n   o  Per-MN-Agg-Max-DL-Bit-Rate:\
    \ This is a 32-bit unsigned integer that\n      indicates the aggregate maximum\
    \ downlink bit rate that is\n      requested/allocated for all the mobile node's\
    \ IP flows.  The\n      measurement units for Per-MN-Agg-Max-DL-Bit-Rate are bits\
    \ per\n      second.\n"
- title: 4.2.2.  Per-Mobile-Node Aggregate Maximum Uplink Bit Rate
  contents:
  - "4.2.2.  Per-Mobile-Node Aggregate Maximum Uplink Bit Rate\n   This attribute,\
    \ Per-MN-Agg-Max-UL-Bit-Rate, represents the maximum\n   uplink bit rate for the\
    \ mobile node.  It is a variant of the \"AMBR\"\n   term defined in Section 2.2.\
    \  This value is an aggregate across all\n   mobility sessions associated with\
    \ that mobile node.\n   This attribute can be included in the Quality-of-Service\
    \ option\n   defined in Section 4.1, and it is an optional attribute.  There can\n\
    \   only be a single instance of this attribute present in a QoS option.\n   When\
    \ this attribute is present in a Proxy Binding Update sent by a\n   mobile access\
    \ gateway or in an Update Notification message sent by\n   the local mobility\
    \ anchor, it indicates the maximum aggregate uplink\n   bit rate that is being\
    \ requested for the mobile node at the peer.\n   When this attribute is present\
    \ in a Proxy Binding Acknowledgement\n   message or in an Update Notification\
    \ Acknowledgement message, it\n   indicates the maximum aggregate uplink bit rate\
    \ that the peer agrees\n   to offer for that mobile node.\n   If multiple mobility\
    \ sessions are established for a mobile node,\n   through multiple mobile access\
    \ gateways with sessions anchored either\n   on a single local mobility anchor\
    \ or spread out across multiple local\n   mobility anchors, then it depends on\
    \ the operator's policy and the\n   specific deployment as to how the total bandwidth\
    \ for the mobile node\n   on each MAG-LMA pair is computed.\n   When a QoS option\
    \ includes both the Per-MN-Agg-Max-UL-Bit-Rate\n   attribute and the QoS-Traffic-Selector\
    \ attribute (Section 4.2.10),\n   then the QoS-Traffic-Selector attribute does\
    \ not apply to this\n   attribute.\n    0                   1                \
    \   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3\
    \ 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |            Reserved           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                   Per-MN-Agg-Max-UL-Bit-Rate                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 2\n   o  Length: The length in octets of the attribute, excluding\
    \ the Type\n      and Length fields.  This value is set to (6).\n   o  Reserved:\
    \ This field is unused for now.  The value MUST be\n      initialized by the sender\
    \ to 0 and MUST be ignored by the\n      receiver.\n   o  Per-MN-Agg-Max-UL-Bit-Rate:\
    \ This is a 32-bit unsigned integer that\n      indicates the aggregate maximum\
    \ uplink bit rate that is requested/\n      allocated for the mobile node's IP\
    \ flows.  The measurement units\n      for Per-MN-Agg-Max-UL-Bit-Rate are bits\
    \ per second.\n"
- title: 4.2.3.  Per-Mobility-Session Aggregate Maximum Downlink Bit Rate
  contents:
  - "4.2.3.  Per-Mobility-Session Aggregate Maximum Downlink Bit Rate\n   This attribute,\
    \ Per-Session-Agg-Max-DL-Bit-Rate, represents the\n   maximum downlink bit rate\
    \ for the mobility session.  It is a variant\n   of the \"AMBR\" term defined\
    \ in Section 2.2.\n   This attribute can be included in the Quality-of-Service\
    \ option\n   defined in Section 4.1, and it is an optional attribute.  There can\n\
    \   only be a single instance of this attribute present in a QoS option.\n   When\
    \ this attribute is present in a Proxy Binding Update sent by a\n   mobile access\
    \ gateway or in an Update Notification message sent by\n   the local mobility\
    \ anchor, it indicates the maximum aggregate\n   downlink bit rate that is being\
    \ requested for that mobility session.\n   When this attribute is present in a\
    \ Proxy Binding Acknowledgement\n   message or in an Update Notification Acknowledgement\
    \ message, it\n   indicates the maximum aggregate downlink bit rate that the peer\n\
    \   agrees to offer for that mobility session.\n   When a QoS option includes\
    \ both the Per-Session-Agg-Max-DL-Bit-Rate\n   attribute and the QoS-Traffic-Selector\
    \ attribute (Section 4.2.10),\n   then the QoS-Traffic-Selector attribute does\
    \ not apply to this\n   attribute.\n    0                   1                \
    \   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3\
    \ 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |S|E|        Reserved           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                 Per-Session-Agg-Max-DL-Bit-Rate               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 3\n   o  Length: The length of the attribute in octets, excluding\
    \ the Type\n      and Length fields.  This value is set to (6).\n   o  Service\
    \ (S) flag: This flag is used for extending the scope of the\n      target flows\
    \ for Per-Session-Agg-Max-DL-Bit-Rate to the mobile\n      node's other mobility\
    \ sessions sharing the same Service\n      Identifier. 3GPP Access Point Name\
    \ (APN) is an example of a\n      Service Identifier, and that identifier is carried\
    \ using the\n      Service Selection mobility option [RFC5149].\n      *  When\
    \ the (S) flag is set to a value of (1), then the Per-\n         Session-Agg-Max-DL-Bit-Rate\
    \ is measured as an aggregate across\n         all the mobile node's other mobility\
    \ sessions sharing the same\n         Service Identifier associated with this\
    \ mobility session.\n      *  When the (S) flag is set to a value of (0), then\
    \ the target\n         flows are limited to the current mobility session.\n  \
    \    *  The (S) flag MUST NOT be set to a value of (1) when there is no\n    \
    \     Service Identifier associated with the mobility session.\n   o  Exclude\
    \ (E) flag: This flag is used to request that the downlink\n      flows for which\
    \ the network is providing Guaranteed-Bit-Rate\n      service be excluded from\
    \ the target IP flows for which Per-\n      Session-Agg-Max-DL-Bit-Rate is measured.\n\
    \      *  When the (E) flag is set to a value of (1), then the request is\n  \
    \       to exclude the IP flows for which Guaranteed-DL-Bit-Rate\n         (Section\
    \ 4.2.8) is negotiated from the flows for which Per-\n         Session-Agg-Max-DL-Bit-Rate\
    \ is measured.\n      *  When the (E) flag is set to a value of (0), then the\
    \ request is\n         not to exclude any IP flows from the target IP flows for\
    \ which\n         Per-Session-Agg-Max-DL-Bit-Rate is measured.\n      *  When\
    \ the (S) flag and (E) flag are both set to a value of (1),\n         then the\
    \ request is to exclude all the IP flows sharing the\n         Service Identifier\
    \ associated with this mobility session from\n         the target flows for which\
    \ Per-Session-Agg-Max-DL-Bit-Rate is\n         measured.\n   o  Reserved: This\
    \ field is unused for now.  The value MUST be\n      initialized by the sender\
    \ to 0 and MUST be ignored by the\n      receiver.\n   o  Per-Session-Agg-Max-DL-Bit-Rate:\
    \ This is a 32-bit unsigned integer\n      that indicates the aggregate maximum\
    \ downlink bit rate that is\n      requested/allocated for all the IP flows associated\
    \ with that\n      mobility session.  The measurement units for Per-Session-Agg-Max-\n\
    \      DL-Bit-Rate are bits per second.\n"
- title: 4.2.4.  Per-Mobility-Session Aggregate Maximum Uplink Bit Rate
  contents:
  - "4.2.4.  Per-Mobility-Session Aggregate Maximum Uplink Bit Rate\n   This attribute,\
    \ Per-Session-Agg-Max-UL-Bit-Rate, represents the\n   maximum uplink bit rate\
    \ for the mobility session.  It is a variant of\n   the \"AMBR\" term defined\
    \ in Section 2.2.\n   This attribute can be included in the Quality-of-Service\
    \ option\n   defined in Section 4.1, and it is an optional attribute.  There can\n\
    \   only be a single instance of this attribute present in a QoS option.\n   When\
    \ this attribute is present in a Proxy Binding Update sent by a\n   mobile access\
    \ gateway or in an Update Notification message [RFC7077]\n   sent by the local\
    \ mobility anchor, it indicates the maximum aggregate\n   uplink bit rate that\
    \ is being requested for that mobility session.\n   When this attribute is present\
    \ in a Proxy Binding Acknowledgement\n   message or in an Update Notification\
    \ Acknowledgement [RFC7077]\n   message, it indicates the maximum aggregate uplink\
    \ bit rate that the\n   peer agrees to offer for that mobility session.\n   When\
    \ a QoS option includes both the Per-Session-Agg-Max-UL-Bit-Rate\n   attribute\
    \ and the QoS-Traffic-Selector attribute (Section 4.2.10),\n   then the QoS-Traffic-Selector\
    \ attribute does not apply to this\n   attribute.\n    0                   1 \
    \                  2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |S|E|         Reserved          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                   Per-Session-Agg-Max-UL-Bit-Rate             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 4\n   o  Length: The length of the attribute in octets, excluding\
    \ the Type\n      and Length fields.  This value is set to (6).\n   o  Service\
    \ (S) flag: This flag is used for extending the scope of the\n      target flows\
    \ for Per-Session-Agg-Max-UL-Bit-Rate to the mobile\n      node's other mobility\
    \ sessions sharing the same Service\n      Identifier. 3GPP Access Point Name\
    \ (APN) is an example of a\n      Service Identifier, and that identifier is carried\
    \ using the\n      Service Selection mobility option [RFC5149].\n      *  When\
    \ the (S) flag is set to a value of (1), then the Per-\n         Session-Agg-Max-UL-Bit-Rate\
    \ is measured as an aggregate across\n         all the mobile node's other mobility\
    \ sessions sharing the same\n         Service Identifier associated with this\
    \ mobility session.\n      *  When the (S) flag is set to a value of (0), then\
    \ the target\n         flows are limited to the current mobility session.\n  \
    \    *  The (S) flag MUST NOT be set to a value of (1) when there is no\n    \
    \     Service Identifier associated with the mobility session.\n   o  Exclude\
    \ (E) flag: This flag is used to request that the uplink\n      flows for which\
    \ the network is providing Guaranteed-Bit-Rate\n      service be excluded from\
    \ the target IP flows for which Per-\n      Session-Agg-Max-UL-Bit-Rate is measured.\n\
    \      *  When the (E) flag is set to a value of (1), then the request is\n  \
    \       to exclude the IP flows for which Guaranteed-UL-Bit-Rate\n         (Section\
    \ 4.2.9) is negotiated from the flows for which Per-\n         Session-Agg-Max-UL-Bit-Rate\
    \ is measured.\n      *  When the (E) flag is set to a value of (0), then the\
    \ request is\n         not to exclude any IP flows from the target IP flows for\
    \ which\n         Per-Session-Agg-Max-UL-Bit-Rate is measured.\n      *  When\
    \ the (S) flag and (E) flag are both set to a value of (1),\n         then the\
    \ request is to exclude all the IP flows sharing the\n         Service Identifier\
    \ associated with this mobility session from\n         the target flows for which\
    \ Per-Session-Agg-Max-UL-Bit-Rate is\n         measured.\n   o  Reserved: This\
    \ field is unused for now.  The value MUST be\n      initialized by the sender\
    \ to 0 and MUST be ignored by the\n      receiver.\n   o  Per-Session-Agg-Max-UL-Bit-Rate:\
    \ This is a 32-bit unsigned integer\n      that indicates the aggregate maximum\
    \ uplink bit rate that is\n      requested/allocated for all the IP flows associated\
    \ with that\n      mobility session.  The measurement units for Per-Session-Agg-Max-\n\
    \      UL-Bit-Rate are bits per second.\n"
- title: 4.2.5.  Allocation and Retention Priority
  contents:
  - "4.2.5.  Allocation and Retention Priority\n   This attribute, Allocation-Retention-Priority,\
    \ represents allocation\n   and retention priority for the mobility session or\
    \ a set of IP flows.\n   It is defined in Section 2.2.\n   This attribute can\
    \ be included in the Quality-of-Service option\n   defined in Section 4.1, and\
    \ it is an optional attribute.  There can\n   only be a single instance of this\
    \ attribute present in a QoS option.\n   When the QoS option includes both the\
    \ Allocation-Retention-Priority\n   attribute and the QoS-Traffic-Selector attribute\
    \ (Section 4.2.10),\n   then the Allocation-Retention-Priority attribute is to\
    \ be applied at\n   a flow level.  The traffic selector in the QoS-Traffic-Selector\n\
    \   attribute identifies the target flows.\n   When the QoS option including the\
    \ Allocation-Retention-Priority\n   attribute does not include the QoS-Traffic-Selector\
    \ attribute\n   (Section 4.2.10), then the Allocation-Retention-Priority attribute\
    \ is\n   to be applied to all the IP flows associated with that mobility\n   session.\n\
    \    0                   1                   2                   3\n    0 1 2\
    \ 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |    Reserved   |   PL  |PC |PV |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 5\n   o  Length: The length of the attribute in octets, excluding\
    \ the Type\n      and Length fields.  This value is set to (2).\n   o  Reserved:\
    \ This field is unused for now.  The value MUST be\n      initialized by the sender\
    \ to 0 and MUST be ignored by the\n      receiver.\n   o  Priority-Level (PL):\
    \ This is a 4-bit unsigned integer value.  It\n      is used to decide whether\
    \ a mobility session establishment or\n      modification request can be accepted;\
    \ this is typically used for\n      admission control of Guaranteed Bit Rate traffic\
    \ in case of\n      resource limitations.  The priority level can also be used\
    \ to\n      decide which existing mobility session to preempt during resource\n\
    \      limitations.  The priority level defines the relative timeliness\n    \
    \  of a resource request.\n      Values 1 to 15 are defined, with value 1 as the\
    \ highest level of\n      priority.\n      Values 1 to 8 should only be assigned\
    \ for services that are\n      authorized to receive prioritized treatment within\
    \ an operator\n      domain.  Values 9 to 15 may be assigned to resources that\
    \ are\n      authorized by the home network and thus applicable when a mobile\n\
    \      node is roaming.\n   o  Preemption-Capability (PC): This is a 2-bit unsigned\
    \ integer\n      value.  It defines whether a service data flow can get resources\n\
    \      that were already assigned to another service data flow with a\n      lower\
    \ priority level.  The following values are defined:\n         Enabled (0): This\
    \ value indicates that the service data flow is\n         allowed to get resources\
    \ that were already assigned to another\n         IP data flow with a lower priority\
    \ level.\n         Disabled (1): This value indicates that the service data flow\n\
    \         is not allowed to get resources that were already assigned to\n    \
    \     another IP data flow with a lower priority level.  The values\n        \
    \ (2) and (3) are reserved.\n   o  Preemption-Vulnerability (PV): This is a 2-bit\
    \ unsigned integer\n      value.  It defines whether a service data flow can lose\
    \ the\n      resources assigned to it in order to admit a service data flow\n\
    \      with a higher priority level.  The following values are defined:\n    \
    \     Enabled (0): This value indicates that the resources assigned\n        \
    \ to the IP data flow can be preempted and allocated to a service\n         data\
    \ flow with a higher priority level.\n         Disabled (1): This value indicates\
    \ that the resources assigned\n         to the IP data flow shall not be preempted\
    \ and allocated to a\n         service data flow with a higher priority level.\
    \  The values (2)\n         and (3) are reserved.\n"
- title: 4.2.6.  Aggregate Maximum Downlink Bit Rate
  contents:
  - "4.2.6.  Aggregate Maximum Downlink Bit Rate\n   This attribute, Aggregate-Max-DL-Bit-Rate,\
    \ represents the maximum\n   downlink bit rate for the mobility session.  It is\
    \ a variant of the\n   \"AMBR\" term defined in Section 2.2.\n   This attribute\
    \ can be included in the Quality-of-Service option\n   defined in Section 4.1,\
    \ and it is an optional attribute.  There can\n   only be a single instance of\
    \ this attribute present in a QoS option.\n   When this attribute is present in\
    \ a Proxy Binding Update sent by a\n   mobile access gateway or in an Update Notification\
    \ message sent by\n   the local mobility anchor, it indicates the maximum aggregate\
    \ bit\n   rate for downlink IP flows that is being requested.\n   When this attribute\
    \ is present in a Proxy Binding Acknowledgement\n   message or in an Update Notification\
    \ Acknowledgement message, it\n   indicates the maximum aggregate downlink bit\
    \ rate that the peer\n   agrees to offer.\n   When a QoS option includes both\
    \ the Aggregate-Max-DL-Bit-Rate\n   attribute and the QoS-Traffic-Selector attribute\
    \ (Section 4.2.10),\n   then the Aggregate-Max-DL-Bit-Rate attribute is to be\
    \ enforced at a\n   flow level, and the traffic selectors present in the QoS-Traffic-\n\
    \   Selector attribute identify those target flows.\n   When the QoS option that\
    \ includes the Aggregate-Max-DL-Bit-Rate\n   attribute does not include the QoS-Traffic-Selector\
    \ attribute\n   (Section 4.2.10), then the Aggregate-Max-DL-Bit-Rate attribute\
    \ is to\n   be applied to all the IP flows associated with the mobility session.\n\
    \    0                   1                   2                   3\n    0 1 2\
    \ 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |            Reserved           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                   Aggregate-Max-DL-Bit-Rate                   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 6\n   o  Length: The length of the attribute in octets, excluding\
    \ the Type\n      and Length fields.  This value is set to (6).\n   o  Reserved:\
    \ This field is unused for now.  The value MUST be\n      initialized by the sender\
    \ to 0 and MUST be ignored by the\n      receiver.\n   o  Aggregate-Max-DL-Bit-Rate:\
    \ This is a 32-bit unsigned integer that\n      indicates the aggregate maximum\
    \ downlink bit rate that is\n      requested/allocated for downlink IP flows.\
    \  The measurement units\n      for Aggregate-Max-DL-Bit-Rate are bits per second.\n"
- title: 4.2.7.  Aggregate Maximum Uplink Bit Rate
  contents:
  - "4.2.7.  Aggregate Maximum Uplink Bit Rate\n   This attribute, Aggregate-Max-UL-Bit-Rate,\
    \ represents the maximum\n   uplink bit rate for the mobility session.  It is\
    \ a variant of the\n   \"AMBR\" term defined in Section 2.2.\n   This attribute\
    \ can be included in the Quality-of-Service option\n   defined in Section 4.1,\
    \ and it is an optional attribute.  There can\n   only be a single instance of\
    \ this attribute present in a QoS option.\n   When this attribute is present in\
    \ a Proxy Binding Update sent by a\n   mobile access gateway or in an Update Notification\
    \ message sent by\n   the local mobility anchor, it indicates the maximum aggregate\
    \ uplink\n   bit rate that is being requested.\n   When this attribute is present\
    \ in a Proxy Binding Acknowledgement\n   message or in an Update Notification\
    \ Acknowledgement message, it\n   indicates the maximum aggregate uplink bit rate\
    \ that the peer agrees\n   to offer.\n   When a QoS option includes both the Aggregate-Max-UL-Bit-Rate\n\
    \   attribute and the QoS-Traffic-Selector attribute (Section 4.2.10),\n   then\
    \ the Aggregate-Max-UL-Bit-Rate attribute is to be enforced at a\n   flow level,\
    \ and the traffic selectors present in the QoS-Traffic-\n   Selector attribute\
    \ identify those target flows.\n   When the QoS option that includes the Aggregate-Max-UL-Bit-Rate\n\
    \   attribute does not include the QoS-Traffic-Selector attribute\n   (Section\
    \ 4.2.10), then the Aggregate-Max-UL-Bit-Rate attribute is to\n   be applied to\
    \ all the IP flows associated with the mobility session.\n    0              \
    \     1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2\
    \ 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |            Reserved           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                   Aggregate-Max-UL-Bit-Rate                   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 7\n   o  Length: The length of the attribute in octets, excluding\
    \ the Type\n      and Length fields.  This value is set to (6).\n   o  Reserved:\
    \ This field is unused for now.  The value MUST be\n      initialized by the sender\
    \ to 0 and MUST be ignored by the\n      receiver.\n   o  Aggregate-Max-UL-Bit-Rate:\
    \ This is a 32-bit unsigned integer that\n      indicates the aggregate maximum\
    \ uplink bit rate that is requested/\n      allocated for all the IP flows associated\
    \ with that mobility\n      session.  The measurement units for Aggregate-Max-UL-Bit-Rate\
    \ are\n      bits per second.\n"
- title: 4.2.8.  Guaranteed Downlink Bit Rate
  contents:
  - "4.2.8.  Guaranteed Downlink Bit Rate\n   This attribute, Guaranteed-DL-Bit-Rate,\
    \ represents the assured bit\n   rate on the downlink path that will be provided\
    \ for a set of IP flows\n   associated with a mobility session.  It is a variant\
    \ of the \"GBR\"\n   term defined in Section 2.2.\n   This attribute can be included\
    \ in the Quality-of-Service option\n   defined in Section 4.1, and it is an optional\
    \ attribute.  There can\n   only be a single instance of this attribute present\
    \ in a QoS option.\n   When this attribute is present in a Proxy Binding Update\
    \ sent by a\n   mobile access gateway or in an Update Notification message sent\
    \ by\n   the local mobility anchor, it indicates the guaranteed downlink bit\n\
    \   rate that is being requested.\n   When this attribute is present in a Proxy\
    \ Binding Acknowledgement\n   message or in an Update Notification Acknowledgement\
    \ message, it\n   indicates the guaranteed downlink bit rate that the peer agrees\
    \ to\n   offer.\n   When a QoS option includes both the Guaranteed-DL-Bit-Rate\
    \ attribute\n   and the QoS-Traffic-Selector attribute (Section 4.2.10), then\
    \ the\n   Guaranteed-DL-Bit-Rate attribute is to be enforced at a flow level,\n\
    \   and the traffic selectors present in the QoS-Traffic-Selector\n   attribute\
    \ identify those target flows.\n   When the QoS option that includes the Guaranteed-DL-Bit-Rate\n\
    \   attribute does not include the QoS-Traffic-Selector attribute\n   (Section\
    \ 4.2.10), then the Guaranteed-DL-Bit-Rate attribute is to be\n   applied to all\
    \ the IP flows associated with the mobility session.\n    0                  \
    \ 1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4\
    \ 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |            Reserved           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                    Guaranteed-DL-Bit-Rate                     |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 8\n   o  Length: The length of the attribute in octets, excluding\
    \ the Type\n      and Length fields.  This value is set to (6).\n   o  Reserved:\
    \ This field is unused for now.  The value MUST be\n      initialized by the sender\
    \ to 0 and MUST be ignored by the\n      receiver.\n   o  Guaranteed-DL-Bit-Rate:\
    \ This is a 32-bit unsigned integer that\n      indicates the guaranteed bandwidth\
    \ in bits per second for downlink\n      IP flows.  The measurement units for\
    \ Guaranteed-DL-Bit-Rate are\n      bits per second.\n"
- title: 4.2.9.  Guaranteed Uplink Bit Rate
  contents:
  - "4.2.9.  Guaranteed Uplink Bit Rate\n   This attribute, Guaranteed-UL-Bit-Rate,\
    \ represents the assured bit\n   rate on the uplink path that will be provided\
    \ for a set of IP flows\n   associated with a mobility session.  It is a variant\
    \ of the \"GBR\"\n   term defined in Section 2.2.\n   This attribute can be included\
    \ in the Quality-of-Service option\n   defined in Section 4.1, and it is an optional\
    \ attribute.  There can\n   only be a single instance of this attribute present\
    \ in a QoS option.\n   When this attribute is present in a Proxy Binding Update\
    \ sent by a\n   mobile access gateway or in an Update Notification message sent\
    \ by\n   the local mobility anchor, it indicates the guaranteed uplink bit\n \
    \  rate that is being requested.\n   When this attribute is present in a Proxy\
    \ Binding Acknowledgement\n   message or in an Update Notification Acknowledgement\
    \ message, it\n   indicates the guaranteed uplink bit rate that the peer agrees\
    \ to\n   offer.\n   When a QoS option includes both the Guaranteed-UL-Bit-Rate\
    \ attribute\n   and the QoS-Traffic-Selector attribute (Section 4.2.10), then\
    \ the\n   Guaranteed-UL-Bit-Rate attribute is to be enforced at a flow level,\n\
    \   and the traffic selectors present in the QoS-Traffic-Selector\n   attribute\
    \ identify those target flows.\n   When the QoS option that includes the Guaranteed-UL-Bit-Rate\n\
    \   attribute does not include the QoS-Traffic-Selector attribute\n   (Section\
    \ 4.2.10), then the Guaranteed-UL-Bit-Rate attribute is to be\n   applied to all\
    \ the IP flows associated with the mobility session.\n    0                  \
    \ 1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4\
    \ 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |            Reserved           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Guaranteed-UL-Bit-Rate                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 9\n   o  Length: The length of the attribute in octets, excluding\
    \ the Type\n      and Length fields.  This value is set to (6).\n   o  Reserved:\
    \ This field is unused for now.  The value MUST be\n      initialized by the sender\
    \ to 0 and MUST be ignored by the\n      receiver.\n   o  Guaranteed-UL-Bit-Rate:\
    \ This is a 32-bit unsigned integer that\n      indicates the guaranteed bandwidth\
    \ in bits per second for uplink\n      IP flows.  The measurement units for Guaranteed-UL-Bit-Rate\
    \ are\n      bits per second.\n"
- title: 4.2.10.  QoS Traffic Selector
  contents:
  - "4.2.10.  QoS Traffic Selector\n   This attribute, QoS-Traffic-Selector, includes\
    \ the parameters used to\n   match packets for a set of IP flows.\n   This attribute\
    \ can be included in the Quality-of-Service option\n   defined in Section 4.1,\
    \ and it is an optional attribute.\n   When a QoS option that includes the QoS-Traffic-Selector\
    \ also\n   includes any one or more of the attributes Allocation-Retention-\n\
    \   Priority (Section 4.2.5), Aggregate-Max-DL-Bit-Rate (Section 4.2.6),\n   Aggregate-Max-UL-Bit-Rate\
    \ (Section 4.2.7), Guaranteed-DL-Bit-Rate\n   (Section 4.2.8), and Guaranteed-UL-Bit-Rate\
    \ (Section 4.2.9), then\n   those included attributes are to be enforced at a\
    \ flow level, and the\n   traffic selectors present in the QoS-Traffic-Selector\
    \ attribute\n   identify those target flows.  Furthermore, the DSCP marking in\
    \ the\n   QoS option is to be applied only to a partial set of the mobile\n  \
    \ node's IP flows, and the traffic selectors present in the QoS-\n   Traffic-Selector\
    \ attribute identify those target flows.\n    0                   1          \
    \         2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0\
    \ 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |   Reserved    |    TS Format  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   ~                        Traffic Selector ...                   ~\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 10\n   o  Length: The length of the attribute in octets, excluding\
    \ the Type\n      and Length fields.\n   o  Reserved: This field is unused for\
    \ now.  The value MUST be\n      initialized by the sender to 0 and MUST be ignored\
    \ by the\n      receiver.\n   o  TS Format: An 8-bit unsigned integer indicating\
    \ the Traffic\n      Selector Format.  The values are allocated from the \"Traffic\n\
    \      Selector Format\" namespace for the traffic selector sub-option\n     \
    \ defined in [RFC6089]; those defined in [RFC6089] are repeated here\n      for\
    \ clarity.  Value (0) is reserved and MUST NOT be used.  When\n      the value\
    \ of the TS Format field is set to (1), the format that\n      follows is the\
    \ IPv4 Binary Traffic Selector specified in\n      Section 3.1 of [RFC6088], and\
    \ when the value of TS Format field is\n      set to (2), the format that follows\
    \ is the IPv6 Binary Traffic\n      Selector specified in Section 3.2 of [RFC6088].\n\
    \   o  Traffic Selector: variable-length field for including the traffic\n   \
    \   specification identified by the TS format field.\n"
- title: 4.2.11.  QoS Vendor-Specific Attribute
  contents:
  - "4.2.11.  QoS Vendor-Specific Attribute\n   This attribute is used for carrying\
    \ vendor-specific QoS attributes.\n   The interpretation and the handling of this\
    \ option are specific to\n   the vendor implementation.\n   This attribute can\
    \ be included in the Quality-of-Service option\n   defined in Section 4.1, and\
    \ it is an optional attribute.  There can\n   be multiple instances of this attribute\
    \ with different sub-type\n   values present in a single QoS option.\n    0  \
    \                 1                   2                   3\n    0 1 2 3 4 5 6\
    \ 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Type      |     Length    |             Reserved          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                          Vendor ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    Sub-Type   |                   ...                         ~\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   o  Type: 11\n   o  Length: The length of the attribute in octets, excluding\
    \ the Type\n      and Length fields.\n   o  Reserved: This field is unused for\
    \ now.  The value MUST be\n      initialized by the sender to 0 and MUST be ignored\
    \ by the\n      receiver.\n   o  Vendor ID: The Vendor ID is the SMI (Structure\
    \ of Management\n      Information) Network Management Private Enterprise Code\
    \ of the\n      IANA-maintained \"Private Enterprise Numbers\" registry [SMI].\n\
    \   o  Sub-Type: An 8-bit field indicating the type of vendor-specific\n     \
    \ information carried in the option.  The namespace for this sub-\n      type\
    \ is managed by the vendor identified by the Vendor ID field.\n"
- title: 4.3.  New Status Code for Proxy Binding Acknowledgement
  contents:
  - "4.3.  New Status Code for Proxy Binding Acknowledgement\n   This document defines\
    \ the following new status code value for use in\n   Proxy Binding Acknowledgement\
    \ message.\n   CANNOT_MEET_QOS_SERVICE_REQUEST (Cannot meet QoS Service Request):\n\
    \   179\n"
- title: 4.4.  New Notification Reason for Update Notification Message
  contents:
  - "4.4.  New Notification Reason for Update Notification Message\n   This document\
    \ defines the following new Notification Reason value for\n   use in Update Notification\
    \ message.\n   QOS_SERVICE_REQUEST (QoS Service Requested): 5\n"
- title: 4.5.  New Status Code for Update Notification Acknowledgement Message
  contents:
  - "4.5.  New Status Code for Update Notification Acknowledgement Message\n   This\
    \ document defines the following new status code value for use in\n   Update Notification\
    \ Acknowledgement message.\n   CANNOT_MEET_QOS_SERVICE_REQUEST (Cannot meet QoS\
    \ Service Request):\n   130\n"
- title: 5.  Protocol Considerations
  contents:
  - '5.  Protocol Considerations

    '
- title: 5.1.  Local Mobility Anchor Considerations
  contents:
  - "5.1.  Local Mobility Anchor Considerations\n   o  The conceptual Binding Cache\
    \ entry data structure maintained by\n      the local mobility anchor, described\
    \ in Section 5.1 of [RFC5213],\n      can be extended to store a list of negotiated\
    \ Quality-of-Service\n      requests to be enforced.  There can be multiple such\
    \ entries, and\n      each entry must include the Service Request Identifier,\
    \ DSCP\n      value, and the attributes defined in Section 4.2.\n   LMA Receiving\
    \ a QoS Service Request:\n   o  On receiving a Proxy Binding Update message with\
    \ an instance of\n      the Quality-of-Service option included in the message\
    \ and the\n      Operational Code field of the Quality-of-Service option set to\n\
    \      QUERY, then the local mobility anchor includes all the Quality-of-\n  \
    \    Service option(s) reflecting the currently negotiated QoS Service\n     \
    \ Requests for that mobility session in the response message.  The\n      Operational\
    \ Code field in each of the Quality-of-Service\n      option(s), which is included\
    \ in the response message, is set to\n      RESPONSE.\n   o  On receiving a Proxy\
    \ Binding Update message with one or more\n      instances of the Quality-of-Service\
    \ option included in the message\n      and the Operational Code field set to\
    \ ALLOCATE, the local mobility\n      anchor processes the option(s) and determines\
    \ if the QoS Service\n      Request for the proposed QoS Service Request(s) can\
    \ be met.  Each\n      instance of the Quality-of-Service option represents a\
    \ specific\n      QoS Service Request.  This determination to accept the request(s)\n\
    \      can be based on policy configured on the local mobility anchor,\n     \
    \ available network resources, or other considerations.\n   o  If the local mobility\
    \ anchor can support the proposed QoS Service\n      Requests in entirety, then\
    \ it sends a Proxy Binding\n      Acknowledgement message with a status code value\
    \ of (0).\n      *  The message includes all the Quality-of-Service option\n \
    \        instances copied (including all the option content) from the\n      \
    \   received Proxy Binding Update message.  The local mobility\n         anchor\
    \ assigns a Service Request Identifier to each Service\n         Request and sets\
    \ the SR-ID field of each included Quality-of-\n         Service option accordingly.\n\
    \      *  The Operational Code field in each of the Quality-of-Service\n     \
    \    option(s) is set to RESPONSE.\n      *  The local mobility anchor should\
    \ enforce the Quality-of-Service\n         rules for all the negotiated QoS Service\
    \ Requests on the mobile\n         node's uplink and downlink traffic.\n   o \
    \ If the local mobility anchor cannot support any of the requested\n      QoS\
    \ Service Requests in entirety, it rejects the request and sends\n      a Proxy\
    \ Binding Acknowledgement message with the status code value\n      set to CANNOT_MEET_QOS_SERVICE_REQUEST\
    \ (Cannot meet QoS Service\n      Request).\n      *  Since the local mobility\
    \ anchor cannot support the requested\n         QoS services for that mobile node,\
    \ the Proxy Binding\n         Acknowledgement message will not include any Quality-of-Service\n\
    \         options.  This serves as an indication to the mobile access\n      \
    \   gateway that QoS services are not supported for that mobile\n         node.\n\
    \      *  The denial of a QoS Service Request MUST NOT result in removal\n   \
    \      of the mobility session for that mobile node.\n   o  If the local mobility\
    \ anchor can support QoS services for the\n      mobile node, but only with lower\
    \ quality values than indicated in\n      the QoS attributes of a received QoS\
    \ option or only for some of\n      the received QoS Service Requests, the local\
    \ mobility anchor\n      includes the QoS option for the supported QoS Service\
    \ Requests in\n      the Proxy Binding Acknowledgement message with an updated\
    \ set of\n      QoS attributes.\n      *  If the local mobility anchor cannot\
    \ support some of the\n         received QoS Service Requests for that mobile\
    \ node, then the\n         Quality-of-Service option for these QoS Service Requests\
    \ is not\n         included in the Proxy Binding Acknowledgement message.  This\n\
    \         serves as an indication to the mobile access gateway that a\n      \
    \   particular QoS Service Request is not supported for that mobile\n        \
    \ node.  This includes the case where the attributes in a QoS\n         option\
    \ have conflicting requirements, for example, Per-Session-\n         Agg-Max-UL-Bit-Rate\
    \ is lower than Guaranteed-UL-Bit-Rate.\n      *  The local mobility anchor includes\
    \ only QoS options in the\n         Proxy Binding Acknowledgement message for\
    \ supported QoS\n         attributes.  The contents of each option (including\
    \ the QoS\n         attributes) reflect the QoS service parameters that the local\n\
    \         mobility anchor can support for that mobile node.  The local\n     \
    \    mobility anchor sets the values of each supported QoS attribute\n       \
    \  according to the level of QoS it can support for the mobile\n         node.\
    \  The Service Request Identifier in each of the included\n         QoS options\
    \ is set to a value of (0).  The Operational Code\n         field in each of the\
    \ included Quality-of-Service option(s) is\n         set to NEGOTIATE.  This serves\
    \ as an indication for the mobile\n         access gateway to resend the Proxy\
    \ Binding Update message with\n         the revised QoS parameters.\n   LMA Sending\
    \ a QoS Service Request:\n   o  The local mobility anchor, at any time, can initiate\
    \ a QoS Service\n      Request for a mobile node by sending an Update Notification\n\
    \      message [RFC7077].  The Notification Reason in the Update\n      Notification\
    \ message is set to a value of QOS_SERVICE_REQUEST, and\n      the Acknowledgement\
    \ Requested (A) flag is set to a value of (1).\n      *  New QoS Service Request:\n\
    \         +  The message includes one or more instances of the Quality-\n    \
    \        of-Service option.  Each instance of the option will include\n      \
    \      one or more QoS attributes.\n         +  The Operational Code field in\
    \ the Quality-of-Service option\n            is set to ALLOCATE.\n         + \
    \ The Service Request Identifier is set to the allocated\n            value.\n\
    \         +  The DSCP field in the Traffic Class (TC) field is set to the\n  \
    \          requested DSCP value.\n      *  Modification of an existing QoS Service\
    \ Request:\n         +  The message includes one or more instances of the Quality-\n\
    \            of-Service option with the QoS attributes reflecting the\n      \
    \      updated values in the attributes and the updated list of\n            attributes.\n\
    \         +  The Operational Code field in the Quality-of-Service option\n   \
    \         is set to MODIFY.\n         +  The Service Request Identifier is set\
    \ to a value that was\n            allocated for that QoS Service Request.\n \
    \        +  The DSCP field in the Traffic Class (TC) field is set to the\n   \
    \         requested DSCP value.\n      *  Deletion of an existing QoS Service\
    \ Request:\n         +  The message includes the Quality-of-Service option(s)\
    \ with\n            the relevant QoS attributes.\n         +  The Operational\
    \ Code field in the Quality-of-Service option\n            is set to DE-ALLOCATE.\n\
    \         +  The Service Request Identifier is set to a value that was\n     \
    \       allocated for that QoS Service Request.\n         +  The DSCP field in\
    \ the Traffic Class (TC) field is set to the\n            DSCP value associated\
    \ with that request.\n      *  Query for the previously negotiated QoS Service\
    \ Requests:\n         +  The message includes a single instance of the Quality-of-\n\
    \            Service option without including any QoS attributes.\n         +\
    \  The Operational Code field in the Quality-of-Service option\n            is\
    \ set to QUERY.\n         +  The Service Request Identifier is set to a value\
    \ of (0).\n         +  The DSCP field in the Traffic Class (TC) field is set to\
    \ a\n            value of (0).\n   o  Handling a Response to the QoS Service Request:\n\
    \      *  If the received Update Notification Acknowledgement [RFC7077]\n    \
    \     message has the Status Code field set to a value (0), the local\n      \
    \   mobility anchor should enforce the Quality-of-Service rules for\n        \
    \ the negotiated QoS parameters on the mobile node's uplink and\n         downlink\
    \ traffic.\n      *  If the received Update Notification Acknowledgement message\
    \ has\n         the Status Code field set to a value\n         CANNOT_MEET_QOS_SERVICE_REQUEST,\
    \ the local mobility anchor\n         applies the following considerations:\n\
    \         +  The denial of a QoS Service Request results in removal of\n     \
    \       any QoS state associated with that request.\n         +  If the message\
    \ did not include any Quality-of-Service\n            option(s), then it is an\
    \ indication from the mobile access\n            gateway that QoS services are\
    \ not enabled for the mobile\n            node.\n         +  If the Operational\
    \ Code field in the Quality-of-Service\n            option is set to a value of\
    \ NEGOTIATE and the message\n            includes one or more instances of the\
    \ Quality-of-Service\n            option, but the option contents reflect a downgraded/revised\n\
    \            set of QoS parameters, then the local mobility anchor MAY\n     \
    \       choose to agree to proposed QoS Service Request by resending\n       \
    \     a new Update Notification message with the updated Quality-\n          \
    \  of-Service option(s).\n   General Considerations:\n   o  Any time the local\
    \ mobility anchor removes a mobile node's\n      mobility session by removing\
    \ a Binding Cache entry [RFC5213] for\n      which QoS resources have been previously\
    \ allocated, those\n      allocated resources are released.\n   o  Any time the\
    \ local mobility anchor receives a Proxy Binding Update\n      with HI hint =\
    \ 3 (inter-MAG handover), the local mobility anchor\n      when sending a Proxy\
    \ Binding Acknowledgement message includes the\n      QoS option(s) for each of\
    \ the QoS Service Requests that are active\n      for that mobile node.  This\
    \ allows the mobile access gateway to\n      allocate QoS resources on the current\
    \ path.  This is relevant for\n      the scenario where a mobile node performs\
    \ a handover to a new\n      mobile access gateway that is unaware of the previously\
    \ negotiated\n      QoS services.\n"
- title: 5.2.  Mobile Access Gateway Considerations
  contents:
  - "5.2.  Mobile Access Gateway Considerations\n   o  The conceptual Binding Update\
    \ List entry data structure maintained\n      by the mobile access gateway, described\
    \ in Section 6.1 of\n      [RFC5213], can be extended to store a list of negotiated\
    \ Quality-\n      of-Service requests to be enforced.  There can be multiple such\n\
    \      entries, and each entry must include the Service Request\n      Identifier,\
    \ DSCP value and the attributes defined in Section 4.2.\n   MAG Receiving a QoS\
    \ Service Request:\n   o  On receiving an Update Notification message with one\
    \ or more\n      instances of the Quality-of-Service option included in the\n\
    \      message, the mobile access gateway processes the option(s) and\n      determines\
    \ if the QoS Service Request for the proposed QoS Service\n      Request(s) can\
    \ be met.  Each instance of the Quality-of-Service\n      option represents a\
    \ specific QoS Service Request.  This\n      determination to accept the request(s)\
    \ can be based on policy\n      configured on the mobile access gateway, available\
    \ network\n      resources, or other considerations.\n   o  If the mobile access\
    \ gateway can support the proposed QoS Service\n      Requests in entirety, then\
    \ it sends an Update Notification\n      Acknowledgement message with a status\
    \ code value of (0).\n      *  The message includes all the Quality-of-Service\
    \ option\n         instances copied (including all the option content) from the\n\
    \         received Update Notification message.  However, if the\n         Operational\
    \ Code field in the request is a QUERY, then the\n         message includes all\
    \ the Quality-of-Service option(s)\n         reflecting the currently negotiated\
    \ QoS Service Requests for\n         that mobility session.\n      *  The Operational\
    \ Code field in each of the Quality-of-Service\n         option(s) is set to RESPONSE.\n\
    \      *  The mobile access gateway should enforce the Quality-of-Service\n  \
    \       rules for all the negotiated QoS Service Requests on the mobile\n    \
    \     node's uplink and downlink traffic.\n   o  If the mobile access gateway\
    \ cannot support any of the requested\n      QoS Service Requests in entirety,\
    \ then it rejects the request and\n      sends an Update Notification Acknowledgement\
    \ message with the\n      status code set to CANNOT_MEET_QOS_SERVICE_REQUEST (Cannot\
    \ meet\n      QoS Service Request).\n      *  The denial for QoS Service Request\
    \ MUST NOT result in removal\n         of the mobility session for that mobile\
    \ node.\n      *  The Update Notification Acknowledgement message may include\
    \ the\n         Quality-of-Service option(s) based on the following\n        \
    \ considerations.\n         +  If the mobile access gateway cannot support QoS\
    \ services for\n            that mobile node, then the Quality-of-Service option\
    \ is not\n            included in the Update Notification Acknowledgement message.\n\
    \            This serves as an indication to the local mobility anchor\n     \
    \       that QoS services are not supported for that mobile node.\n         +\
    \  If the mobile access gateway can support QoS services for\n            the\
    \ mobile node, but only with lower quality values than\n            indicated\
    \ in the QoS attributes of a received QoS option,\n            the mobile access\
    \ gateway includes the QoS option in the\n            Update Notification Acknowledgement\
    \ message with an updated\n            set of QoS attributes.  The mobile access\
    \ gateway sets the\n            values of each QoS attribute according to the\
    \ level of QoS\n            it can support for the mobile node.  The mobile access\n\
    \            gateway includes only QoS options in the Update Notification\n  \
    \          Acknowledgement message for supported QoS attributes.  If\n       \
    \     the mobile access gateway receives one or multiple QoS\n            options,\
    \ whose QoS attributes are not supported, it omits\n            these QoS options\
    \ in the Update Notification Acknowledgement\n            message.  This includes\
    \ the case where the attributes in a\n            QoS option have conflicting\
    \ requirements, for example, Per-\n            Session-Agg-Max-UL-Bit-Rate is\
    \ lower than Guaranteed-UL-Bit-\n            Rate.  The contents of each option\
    \ (including the QoS\n            attributes) reflect the QoS service parameters\
    \ that the\n            mobile access gateway can support for that mobile node.\
    \  The\n            Operational Code field in each of the Quality-of-Service\n\
    \            option(s) is set to NEGOTIATE.  This serves as an indication\n  \
    \          to the local mobility anchor to resend the Update\n            Notification\
    \ message with the revised QoS parameters.\n   MAG Sending a QoS Service Request:\n\
    \   o  The mobile access gateway, at any time, can initiate a QoS Service\n  \
    \    Request for a mobile node by sending a Proxy Binding Update\n      message.\
    \  The QoS Service Request can be initiated as part of the\n      initial Binding\
    \ registration or during Binding re-registrations.\n      *  New QoS Service Request:\n\
    \         +  The message includes one or more instances of the Quality-\n    \
    \        of-Service option.  Each instance of the option will include\n      \
    \      one or more QoS attributes.\n         +  The Operational Code field in\
    \ each of the Quality-of-Service\n            option is set to ALLOCATE.\n   \
    \      +  The Service Request Identifier is set to a value of (0).\n         +\
    \  The DSCP value in the Traffic Class field reflects the\n            requested\
    \ DSCP value.\n      *  Modification of an existing QoS Service Request:\n   \
    \      +  The message includes one or more instances of the Quality-\n       \
    \     of-Service option with the QoS attributes reflecting the\n            updated\
    \ values in the attributes and the updated list of\n            attributes.\n\
    \         +  The Operational Code field in the Quality-of-Service option\n   \
    \         is set to MODIFY.\n         +  The Service Request Identifier is set\
    \ to a value that was\n            allocated for that QoS Service Request.\n \
    \        +  The DSCP field in the Traffic Class (TC) field is set to the\n   \
    \         requested DSCP value.\n      *  Deletion of an existing QoS Service\
    \ Request:\n         +  The message includes the Quality-of-Service option(s)\
    \ with\n            the relevant QoS attributes.\n         +  The Operational\
    \ Code field in the Quality-of-Service option\n            is set to DE-ALLOCATE.\n\
    \         +  The Service Request Identifier is set to a value that was\n     \
    \       allocated for that QoS Service Request.\n         +  The DSCP field in\
    \ the Traffic Class (TC) field is set to the\n            DSCP value associated\
    \ with that request.\n      *  Query for the previously negotiated QoS Service\
    \ Requests:\n         +  The message includes a single instance of the Quality-of-\n\
    \            Service option without including any QoS attributes.\n         +\
    \  The Operational Code field in the Quality-of-Service option\n            is\
    \ set to QUERY.\n         +  The Service Request Identifier is set to a value\
    \ of (0).\n         +  The DSCP field in the Traffic Class (TC) field is set to\
    \ a\n            value of (0).\n   o  Handling a Response to the QoS Service Request:\n\
    \      *  If the received Proxy Binding Acknowledgement message has the\n    \
    \     Status Code field set to a value of (0), the mobile access\n         gateway\
    \ should enforce the Quality-of-Service rules for the\n         negotiated QoS\
    \ parameters on the mobile node's uplink and\n         downlink traffic.\n   \
    \   *  If the received Proxy Binding Acknowledgement message has the\n       \
    \  Status Code field set to a value of\n         CANNOT_MEET_QOS_SERVICE_REQUEST,\
    \ the mobile access gateway\n         applies the following considerations.\n\
    \         +  The denial of a QoS Service Request results in removal of\n     \
    \       any QoS state associated with that request.\n         +  If the message\
    \ did not include any Quality-of-Service\n            option(s), then it is an\
    \ indication from the local mobility\n            anchor that QoS services are\
    \ not enabled for the mobile\n            node.\n         +  If the Operational\
    \ Code field in the Quality-of-Service\n            option is set to a value of\
    \ NEGOTIATE and the message\n            includes one or more instances of the\
    \ Quality-of-Service\n            option, but the option contents reflect a downgraded/revised\n\
    \            set of QoS parameters, then the mobile access gateway MAY\n     \
    \       choose to agree to proposed QoS Service Request by resending\n       \
    \     a new Proxy Binding Update message with the updated Quality-\n         \
    \   of-Service option.\n      *  General Considerations:\n         +  There can\
    \ be more than one QoS Service Request in a single\n            message.  If so,\
    \ the message includes an instance of a\n            Quality-of-Service option\
    \ for each of those Service\n            Requests.  Furthermore, the DSCP value\
    \ is different in each\n            of those requests.\n         +  Any time the\
    \ mobile access gateway removes a mobile node's\n            mobility session\
    \ by removing a Binding Update List entry\n            [RFC5213] for which QoS\
    \ resources have been previously\n            allocated, those allocated resources\
    \ are released.\n"
- title: 6.  QoS Services in Integrated WLAN-3GPP Networks
  contents:
  - '6.  QoS Services in Integrated WLAN-3GPP Networks

    '
- title: 6.1.  Technical Scope and Procedure
  contents:
  - "6.1.  Technical Scope and Procedure\n   The QoS option specified in this document\
    \ can provide the equivalent\n   level of QoS information defined in 3GPP, which\
    \ is used to enforce\n   QoS policies for IP flows that have been established\
    \ while the mobile\n   node is attached to WLAN access or moved from 3GPP to WLAN\
    \ access.\n   The QoS classification defined by the 3GPP specification [TS23.207]\n\
    \   [TS29.212] is provided by Differentiated Services techniques in the\n   IP\
    \ transport network.  The QoS classification used in the IP\n   transport network\
    \ is further translated to WLAN QoS-specific\n   techniques in the WLAN access\
    \ using appropriate WLAN QoS\n   specifications [IEEE802.11aa-2012] [WMM1.2.0].\
    \  The details are\n   described in Appendix A and Appendix B.\n   Figure 6 illustrates\
    \ a generalized architecture where the QoS option\n   can be used.  The QoS policies\
    \ could be retrieved from a Policy\n   Control Function (PCF), such as defined\
    \ in current cellular mobile\n   communication standards, which aims to assign\
    \ an appropriate QoS\n   class to a mobile node's individual flows.  Alternatively,\
    \ more\n   static and default QoS rules could be made locally available, e.g.,\n\
    \   on a local mobility anchor, through administration.\n           Non-cellular\
    \ access       |  Cellular Core Network   Cellular\n              (e.g., WLAN)\
    \           |      (e.g., EPC)           Access\n                            \
    \         |                        (e.g.,\n                                  \
    \   |         +-----------+     EUTRAN)\n                                    \
    \ |         |    PCF    |\n                                     |         |(e.g.,PCRF)|\n\
    \             +----+                  |         +-----+-----+\n             |WiFi|\
    \           (I)    |               |\n             | AP |---+    +---+---+ | \
    \              |             ((O))\n             +----+   |    |WiFi AR| |  PMIPv6\
    \    +-----+     +---+  |\n                      +----+ (MAG) +=|============|\
    \ LMA |=====|MAG+--|\n                      |    |  WLC  | |  tunnel    +-----+\
    \     +---+  |\n             +----+   |    +-------+ |             //\n      \
    \       |WiFi|---+              |            //\n             | AP |         \
    \         |           //\n             +----+           (II)   |          //\n\
    \                           +-------+ |         //\n   +----+    +------+    \
    \  |WiFi AR| |        //\n   |WiFi+----+  WLC +------+ (MAG) |=|=======//\n  \
    \ | AP |    |      |      |       | |\n   +----+    +------+      +------ + |\n\
    \                 ^            ^      |\n                 |            |     \
    \ |\n                 +------------+\n                QoS inter-working\n   Figure\
    \ 6: Architecture for QoS Inter-Working between Cellular Access\n            \
    \              and Non-Cellular Access\n   During a mobile node's handover from\
    \ cellular access to non-cellular\n   access, e.g., a wireless LAN (WLAN) radio\
    \ access network, the mobile\n   node's QoS policy rules, as previously established\
    \ on the local\n   mobility anchor for the mobile node's communication through\
    \ the\n   cellular access network, are moved to the handover target mobile\n \
    \  access gateway serving the non-cellular access network.  Such a non-\n   cellular\
    \ mobile access gateway can have an access-technology-specific\n   controller\
    \ or function co-located, e.g., a Wireless LAN Controller\n   (WLC), as depicted\
    \ in option (I) of Figure 6.  Alternatively, the\n   access-specific architecture\
    \ can be distributed, and the access-\n   technology-specific control function\
    \ is located external to the\n   mobile access gateway, as depicted in option\
    \ (II).  In this case, the\n   mobile access gateway and the access-technology-specific\
    \ control\n   function (e.g., the WLC) must provide some protocol for QoS inter-\n\
    \   working.  Details of such inter-working are out of the scope of this\n   specification.\n"
- title: 6.2.  Relevant QoS Attributes
  contents:
  - "6.2.  Relevant QoS Attributes\n   The QoS Option shall at least contain a DSCP\
    \ value being associated\n   with IP flows of a mobility session.  The DSCP value\
    \ should\n   correspond to the 3GPP QoS Class Index (QCI), which identifies the\n\
    \   type of service in terms of QoS characteristics (e.g., conversational\n  \
    \ voice, streaming video, signaling, and best effort); more details on\n   DSCP\
    \ and QCI mapping are given in Appendix A.  Optional QoS\n   information could\
    \ also be added.  For instance, in order to comply\n   with the bearer model defined\
    \ in 3GPP [TS23.203], the following QoS\n   parameters are conveyed for each PMIPv6\
    \ mobility session:\n   o  Default, non-GBR bearer (QCI=5-9)\n      *  DSCP=(BE,\
    \ AF11, AF21, AF31, AF32)\n      *  Per-MN AMBR-UL/DL\n      *  Per-Session AMBR-UL/DL\
    \ {S=1,E=1}\n      *  AARP\n      APN (Access Point Name) is provided via the\
    \ Service Selection ID\n      defined in [RFC5149].  If APN is not interpreted\
    \ by Wi-Fi AP, the\n      latter will police only based on Per-MN AMBR-UL/DL (without\
    \ Per-\n      Session AMBR-UL/DL) on the Wi-Fi link.\n   o  Dedicated, GBR bearer\
    \ (QCI=1-4)\n      *  DSCP=(EF, AF41)\n      *  GBR-UL/DL\n      *  MBR-UL/DL\n\
    \      *  AARP\n      *  TS\n      Wi-Fi AP will perform the policy enforcement\
    \ with the minimum bit\n      rate=GBR and the maximum bit rate=MBR.\n   o  Dedicated,\
    \ non-GBR bearer (QCI=5-9)\n      *  DSCP=(BE, AF11, AF21, AF31, AF32)\n     \
    \ *  Per-MN AMBR-UL/DL\n      *  Per-Session AMBR-UL/DL {S=1,E=1}\n      *  AARP\n\
    \      *  TS\n      If APN is not interpreted by Wi-Fi AP, it will police based\
    \ only\n      on Per-MN AMBR-UL/DL (without Per-Session AMBR-UL/DL) on the Wi-Fi\n\
    \      link.\n   If DSCP values follow the 3GPP specification and deployment,\
    \ the code\n   point can carry intrinsically additional attributes according to\n\
    \   Figure 7 in Appendix A.\n   For some optional QoS attributes, the signaling\
    \ can differentiate\n   enforcement per mobility session and per IP flow.  For\
    \ the latter, as\n   long as the AMBR constraints are met, the rule associated\
    \ with the\n   identified flow(s) overrules the aggregated rules that apply per\n\
    \   mobile node or per mobility session.  Additional attributes can be\n   appended\
    \ to the QoS option, but their definition and specification is\n   out of scope\
    \ of this document and are left as considerations for\n   actual deployment.\n"
- title: 7.  IANA Considerations
  contents:
  - "7.  IANA Considerations\n   IANA has completed the following actions:\n   o \
    \ Action-1: This specification defines a new mobility option, the\n      Quality-of-Service\
    \ (QoS) option.  The format of this option is\n      described in Section 4.1.\
    \  The type value 58 for this mobility\n      option has been allocated from the\
    \ \"Mobility Options\" registry at\n      <http://www.iana.org/assignments/mobility-parameters>.\n\
    \   o  Action-2: This specification defines a new mobility attribute\n      format,\
    \ the Quality-of-Service attribute.  The format of this\n      attribute is described\
    \ in Section 4.2.  This attribute can be\n      carried in the Quality-of-Service\
    \ mobility option.  The type\n      values for this attribute are managed by IANA\
    \ in a new registry,\n      the \"Quality-of-Service Attribute Registry\".  This\
    \ registry is\n      maintained under the \"Mobile IPv6 parameters\" registry\
    \ at\n      <http://www.iana.org/assignments/mobility-parameters>.  This\n   \
    \   specification reserves the type values listed below.  All other\n      values\
    \ (12 - 254) are unassigned and may be assigned by IANA using\n      the Specification\
    \ Required policy [RFC5226].  The Designated\n      Expert reviewing the value\
    \ assignment is expected to verify that\n      the protocol extension follows\
    \ the Proxy Mobile IPv6 architecture\n      and does not raise backward-compatibility\
    \ issues with existing\n      deployments.\n   +=====+=================================+=================+\n\
    \   |Value|       Description               |   Reference     |\n   +=====+=================================+=================+\n\
    \   | 0   | Reserved                        |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 1   | Per-MN-Agg-Max-DL-Bit-Rate      |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 2   | Per-MN-Agg-Max-UL-Bit-Rate      |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 3   | Per-Session-Agg-Max-DL-Bit-Rate |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 4   | Per-Session-Agg-Max-UL-Bit-Rate |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 5   | Allocation-Retention-Priority   |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 6   | Aggregate-Max-DL-Bit-Rate       |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 7   | Aggregate-Max-UL-Bit-Rate       |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 8   | Guaranteed-DL-Bit-Rate          |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 9   | Guaranteed-UL-Bit-Rate          |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 10  | QoS-Traffic-Selector            |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 11  | QoS-Vendor-Specific-Attribute   |   RFC 7222      |\n   +=====+===================================================+\n\
    \   | 255 | Reserved                        |   RFC 7222      |\n   +=====+===================================================+\n\
    \   o  Action-3: This document defines a new status code,\n      CANNOT_MEET_QOS_SERVICE_REQUEST\
    \ (179), for use in Proxy Binding\n      Acknowledgement messages, as described\
    \ in Section 4.3.  This value\n      has been assigned from the \"Status Codes\"\
    \ registry at\n      <http://www.iana.org/assignments/mobility-parameters>.\n\
    \   o  Action-4: This document defines a new Notification Reason,\n      QOS_SERVICE_REQUEST\
    \ (5), for use in Update Notification messages\n      [RFC7077] as described in\
    \ Section 4.4.  This value has been\n      assigned from the \"Update Notification\
    \ Reasons Registry\" at\n      <http://www.iana.org/assignments/mobility-parameters>.\n\
    \   o  Action-5: This document defines a new status code,\n      CANNOT_MEET_QOS_SERVICE_REQUEST\
    \ (130), for use in Update\n      Notification Acknowledgement messages [RFC7077]\
    \ as described in\n      Section 4.5.  This value has been assigned from the \"\
    Update\n      Notification Acknowledgement Status Registry\" at\n      <http://www.iana.org/assignments/mobility-parameters>.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   The Quality-of-Service option defined in this\
    \ specification is for\n   use in Proxy Binding Update, Proxy Binding Acknowledgement,\
    \ Update\n   Notification, and Update Notification Acknowledgement messages. \
    \ This\n   option is carried in these messages like any other mobility header\n\
    \   option.  [RFC5213] and [RFC7077] identify the security considerations\n  \
    \ for these signaling messages.  When included in these signaling\n   messages,\
    \ the Quality-of-Service option does not require additional\n   security considerations.\n"
- title: 9.  Acknowledgements
  contents:
  - "9.  Acknowledgements\n   The authors of this document thank the members of NetExt\
    \ working\n   group for the valuable feedback to different versions of this\n\
    \   specification.  In particular, the authors want to thank Basavaraj\n   Patil,\
    \ Behcet Sarikaya, Charles Perkins, Dirk von Hugo, Mark Grayson,\n   Tricci So,\
    \ Ahmad Muhanna, Pete McCann, Byju Pularikkal, John\n   Kaippallimalil, Rajesh\
    \ Pazhyannur, Carlos J. Bernardos Cano, Michal\n   Hoeft, Ryuji Wakikawa, Liu\
    \ Dapeng, Seil Jeon, and Georgios\n   Karagiannis.\n   The authors would like\
    \ to thank all the IESG reviewers, especially,\n   Ben Campbell, Barry Leiba,\
    \ Jari Arkko, Alissa Cooper, Stephen\n   Farrell, Ted Lemon, and Alia Atlas for\
    \ their valuable comments and\n   suggestions to improve this specification.\n\
    \   Finally, the authors would like to express sincere and profound\n   appreciation\
    \ to our Internet Area Director, Brian Haberman, for his\n   guidance and great\
    \ support in allowing us to complete this work.\n"
- title: 10.  References
  contents:
  - '10.  References

    '
- title: 10.1.  Normative References
  contents:
  - "10.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC5213]  Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury,\
    \ K.,\n              and B. Patil, \"Proxy Mobile IPv6\", RFC 5213, August 2008.\n\
    \   [RFC5226]  Narten, T. and H. Alvestrand, \"Guidelines for Writing an\n   \
    \           IANA Considerations Section in RFCs\", BCP 26, RFC 5226,\n       \
    \       May 2008.\n   [RFC5844]  Wakikawa, R. and S. Gundavelli, \"IPv4 Support\
    \ for Proxy\n              Mobile IPv6\", RFC 5844, May 2010.\n   [RFC6088]  Tsirtsis,\
    \ G., Giarreta, G., Soliman, H., and N. Montavont,\n              \"Traffic Selectors\
    \ for Flow Bindings\", RFC 6088, January\n              2011.\n   [RFC7077]  Krishnan,\
    \ S., Gundavelli, S., Liebsch, M., Yokota, H., and\n              J. Korhonen,\
    \ \"Update Notifications for Proxy Mobile IPv6\",\n              RFC 7077, November\
    \ 2013.\n"
- title: 10.2.  Informative References
  contents:
  - "10.2.  Informative References\n   [GSMA.IR.34]\n              GSMA, \"Guidelines\
    \ for IPX Provider networks (Previously\n              Inter-Service Provider\
    \ IP Backbone Guidelines)\", Official\n              Document PRD IR.34, May 2013.\n\
    \   [IEEE802.11-2012]\n              IEEE, \"Part 11: Wireless LAN Medium Access\
    \ Control (MAC)\n              and Physical Layer (PHY) Specifications\", 2012.\n\
    \   [IEEE802.11aa-2012]\n              IEEE, \"Part 11: Wireless LAN Medium Access\
    \ Control (MAC)\n              and Physical Layer (PHY) Specifications, Amendment\
    \ 2: MAC\n              Enhancements for Robust Audio Video Streaming\", 2012.\n\
    \   [IEEE802.11e-2005]\n              IEEE, \"Part 11: Wireless LAN Medium Access\
    \ Control (MAC)\n              and Physical Layer (PHY) Specifications, Amendment\
    \ 8:\n              Medium Access Control (MAC) Quality of Service (QoS)\n   \
    \           Enhancements\", 2005.\n   [RFC2474]  Nichols, K., Blake, S., Baker,\
    \ F., and D. Black,\n              \"Definition of the Differentiated Services\
    \ Field (DS\n              Field) in the IPv4 and IPv6 Headers\", RFC 2474, December\n\
    \              1998.\n   [RFC2475]  Blake, S., Black, D., Carlson, M., Davies,\
    \ E., Wang, Z.,\n              and W. Weiss, \"An Architecture for Differentiated\n\
    \              Services\", RFC 2475, December 1998.\n   [RFC2983]  Black, D.,\
    \ \"Differentiated Services and Tunnels\", RFC\n              2983, October 2000.\n\
    \   [RFC4594]  Babiarz, J., Chan, K., and F. Baker, \"Configuration\n        \
    \      Guidelines for DiffServ Service Classes\", RFC 4594, August\n         \
    \     2006.\n   [RFC5149]  Korhonen, J., Nilsson, U., and V. Devarapalli, \"Service\n\
    \              Selection for Mobile IPv6\", RFC 5149, February 2008.\n   [RFC6089]\
    \  Tsirtsis, G., Soliman, H., Montavont, N., Giaretta, G.,\n              and\
    \ K. Kuladinithi, \"Flow Bindings in Mobile IPv6 and\n              Network Mobility\
    \ (NEMO) Basic Support\", RFC 6089, January\n              2011.\n   [SMI]   \
    \   IANA, \"PRIVATE ENTERPRISE NUMBERS\", SMI Network Management\n           \
    \   Private Enterprise Codes, April 2014,\n              <http://www.iana.org/assignments/enterprise-numbers>.\n\
    \   [TS22.115] 3GPP, \"Technical Specification Group Services and System\n   \
    \           Aspects; Service aspects; Charging and billing\", 3GPP TS\n      \
    \        22.115, 2010.\n   [TS23.203] 3GPP, \"Technical Specification Group Services\
    \ and System\n              Aspects; Policy and charging control architecture\"\
    , 3GPP\n              TS 23.203, 2013.\n   [TS23.207] 3GPP, \"End-to-End Quality\
    \ of Service (QoS) Concept and\n              Architecture, Release 10\", 3GPP\
    \ TS 23.207, 2011.\n   [TS23.402] 3GPP, \"Technical Specification Group Services\
    \ and System\n              Aspects; Architecture enhancements for non-3GPP accesses\"\
    ,\n              3GPP TS 23.402, 2012.\n   [TS29.212] 3GPP, \"Policy and Charging\
    \ Control over Gx/Sd Reference\n              Point, Release 11\", 3GPP TS 29.212,\
    \ 2011.\n   [WMM1.2.0] Wi-Fi Alliance, \"Wi-Fi Multimedia Technical Specification\n\
    \              (with WMM-Power Save and WMM-Admission Control)\", Version\n  \
    \            1.2.0.\n"
- title: Appendix A.  Information When Implementing 3GPP QoS in IP Transport
  contents:
  - "Appendix A.  Information When Implementing 3GPP QoS in IP Transport\n       \
    \      Network\n"
- title: A.1.  Mapping Tables
  contents:
  - "A.1.  Mapping Tables\n   Mapping between 3GPP QCI values and DSCP is defined\
    \ in [GSMA.IR.34]\n   as follows.\n   +=====+================+===========================+======+\n\
    \   | QCI | Traffic Class  | DiffServ Per-Hop-Behavior | DSCP |\n   +=====+================+===========================+======+\n\
    \   |  1  | Conversational |              EF           |101110|\n   +=====+===================================================+\n\
    \   |  2  | Conversational |              EF           |101110|\n   +=====+===================================================+\n\
    \   |  3  | Conversational |              EF           |101110|\n   +=====+===================================================+\n\
    \   |  4  |   Streaming    |             AF41          |100010|\n   +=====+===================================================+\n\
    \   |  5  |  Interactive   |             AF31          |011010|\n   +=====+===================================================+\n\
    \   |  6  |  Interactive   |             AF32          |011100|\n   +=====+===================================================+\n\
    \   |  7  |  Interactive   |             AF21          |010010|\n   +=====+===================================================+\n\
    \   |  8  |  Interactive   |             AF11          |001010|\n   +=====+===================================================+\n\
    \   |  9  |   Background   |              BE           |000000|\n   +=====+===================================================+\n\
    \                     Figure 7: QCI/DSCP Mapping Table\n   Mapping between QoS\
    \ attributes defined in this document and 3GPP QoS\n   parameters is as follows.\n\
    \          +=======+===============================+=============+\n         \
    \ |Section|        PMIPv6 QoS             |  3GPP QoS   |\n          |       |\
    \        Attribute              | Parameter   |\n          +=======+===============================+=============+\n\
    \          | 4.2.1 |   Per-MN-Agg-Max-DL-Bit-Rate  |  UE AMBR-DL |\n         \
    \ +-------+-------------------------------+-------------+\n          | 4.2.2 |\
    \   Per-MN-Agg-Max-UL-Bit-Rate  |  UE AMBR-UL |\n          +-------+-------------------------------+-------------+\n\
    \          | 4.2.3 |Per-Session-Agg-Max-DL-Bit-Rate| APN AMBR-DL |\n         \
    \ |       |          Flags: (S=1, E=1)    |             |\n          +-------+-------------------------------+-------------+\n\
    \          | 4.2.4 |Per-Session-Agg-Max-UL-Bit-Rate| APN AMBR-UL |\n         \
    \ |       |          Flags: (S=1, E=1)    |             |\n          +-------+-------------------------------+-------------+\n\
    \          | 4.2.5 | Allocation-Retention-Priority |     ARP     |\n         \
    \ +-------+-------------------------------+-------------+\n          | 4.2.6 |\
    \   Aggregate-Max-DL-Bit-Rate   |    MBR-DL   |\n          +-------+-------------------------------+-------------+\n\
    \          | 4.2.7 |   Aggregate-Max-UL-Bit-Rate   |    MBR-UL   |\n         \
    \ +-------+-------------------------------+-------------+\n          | 4.2.8 |\
    \    Guaranteed-DL-Bit-Rate     |    GBR-DL   |\n          +-------+-------------------------------+-------------+\n\
    \          | 4.2.9 |    Guaranteed-UL-Bit-Rate     |    GBR-UL   |\n         \
    \ +-------+-------------------------------+-------------+\n          | 4.2.10|\
    \     QoS-Traffic-Selector      |     TFT     |\n          +-------+-------------------------------+-------------+\n\
    \      Figure 8: QoS Attributes and 3GPP QoS Parameters Mapping Table\n"
- title: A.2.  Use Cases and Protocol Operations
  contents:
  - "A.2.  Use Cases and Protocol Operations\n   The following subsections provide\
    \ example message flow charts for\n   scenarios where the QoS option extensions\
    \ will apply as described in\n   Section 6.1 to the protocol operation for QoS\
    \ rules establishment\n   (Appendices A.2.1 and A.2.2) and to modification (Appendix\
    \ A.2.3).\n"
- title: A.2.1.  Handover of Existing QoS Rules
  contents:
  - "A.2.1.  Handover of Existing QoS Rules\n   In Figure 9, the MN is first connected\
    \ to the LTE network with a\n   multimedia session, such as a video call, with\
    \ appropriate QoS\n   parameters set by the Policy Control Function.  Then, the\
    \ MN\n   discovers a Wi-Fi AP (e.g., at home or in a cafe) and switches to it,\n\
    \   provided that Wi-Fi access has a higher priority when available.  Not\n  \
    \ only is the session continued, but the QoS is also maintained after\n   moving\
    \ to the Wi-Fi access.  In order for that to happen, the LMA\n   delivers the\
    \ QoS parameters according to the bearer type on the 3GPP\n   access to the MAG\
    \ via the PMIPv6 signaling with the QoS option\n   (OC=ALLOCATE, SR-ID, QoS attributes,\
    \ etc.).  The equivalent QoS\n   treatment is provided by the Wi-Fi AP toward\
    \ the MN on the Wi-Fi\n   link.\n                                            \
    \  +--------+\n                                              |Policy  |\n    \
    \                                          |Control |\n                      \
    \                        |Function|\n                                        \
    \      +---+----+\n                                                  |\n     \
    \     +----+       +-------+              +---+----+\n    +--+  |LTE |_______|\
    \  SGW  |              |  PGW   |\n    |MN|~~|eNB |       |       |==============|\
    \ (LMA)  |\n    +--+  +----+       +-------+            //+--------+\n     : \
    \                                    //\n     :                              \
    \      //\n     V    +----+       +-------+ PMIPv6  //\n    +--+  |WiFi|_______|\
    \  WLC  |=========\n    |MN|~~| AP |       | (MAG) | tunnel\n    +--+  +----+\
    \       +-------+\n              Figure 9: Handover Scenario (from LTE to WLAN)\n\
    \   Figure 10 shows an example of how the QoS rules can be conveyed and\n   enforced\
    \ between the LMA and MN in the case of a handover from 3GPP\n   access to WLAN\
    \ access.\n   +--+            +--+             +---+                       +---+\n\
    \   |MN|            |AP|             |MAG|                       |LMA|\n   +--+\
    \            +--+             +---+                       +---+\n    ||      \
    \        |                 |     To                    |data\n    |+--detach \
    \     |                 |  cellular<-==data[DSCP]==-|<----\n    +----attach-----+\
    \                 |   access             [QoS rules]\n    |               |-INFO[MNattach]->|\
    \                           |\n    |               |                 |-------PBU[handover]------>|\n\
    \    |               |                 |                           |\n    |  \
    \             |                 |<--PBA[QoS option(OC=1 )]--|\n    |         \
    \      |<-INFO[QoSrules]-|                           |\n    |               |\
    \                 |                           |\n    |             Apply     \
    \       Establish                   Update\n    |             mapped         \
    \ MN's uplink              MN's downlink\n    |            QoS rules        DSCP\
    \ rules                 DSCP rules\n    |               |                 +===========================+\n\
    \    |               |                 |                           |\n    |  \
    \             |(B)              |(A)                        |data\n    |<--data[QC]----|<---data[DSCP]---|<-======data[DSCP]========-|<----\n\
    \    |               |                 |                           |\n    |  \
    \             |                 |                           |data\n    |---data[QC]--->|-->data[DSCP]--->|-=======data[DSCP]=======->|--->\n\
    \    |               |(C)              |(D)                        |\n    |  \
    \             |                 |                           |\n   (A): Apply DSCP\
    \ at link to AP\n   (B): Enforce mapped QoS rules to access technology\n   (C):\
    \ Map MN-indicated QoS Class (QC) to DSCP on the AP-MAG link, or\n        validate\
    \ MN-indicated QC and apply DSCP on the AP-MAG link\n        according to QoS\
    \ rules\n   (D): Validate received DSCP and apply DSCP according to QoS rules\n\
    \                     Figure 10: Handover of QoS Rules\n"
- title: A.2.2.  Establishment of QoS Rules
  contents:
  - "A.2.2.  Establishment of QoS Rules\n   A single operator has deployed both a\
    \ fixed access network and a\n   mobile access network.  In this scenario, the\
    \ operator may wish a\n   harmonized QoS management on both accesses, but the\
    \ fixed access\n   network does not implement a QoS control framework.  So, the\
    \ operator\n   chooses to rely on the 3GPP policy control function, which is a\n\
    \   standard framework to provide a QoS control, and to enforce the 3GPP\n   QoS\
    \ policy on the Wi-Fi access network.  The PMIP interface is used\n   to realize\
    \ this QoS policy provisioning.\n   The use case is depicted on Figure 11.  The\
    \ MN first attaches to the\n   Wi-Fi network.  During the attachment process,\
    \ the LMA, which may\n   communicate with Policy Control Function (using procedures\
    \ outside\n   the scope of this document), provides the QoS parameters to the\
    \ MAG\n   via the QoS option (OC=ALLOCATE) in the PMIP signaling (i.e., PBA).\n\
    \   Subsequently, an application on the MN may trigger the request for\n   alternative\
    \ QoS resources, e.g., by use of the WMM-API (Wi-Fi\n   Multimedia - API).  The\
    \ MN may request that traffic resources be\n   reserved using L2 signaling, e.g.,\
    \ sending an Add Traffic System\n   (ADDTS) message [IEEE802.11-2012].  The request\
    \ is relayed to the\n   MAG, which includes the QoS parameters in the QoS option\n\
    \   (OC=ALLOCATE) on the PMIP signaling (i.e., the PBU initiated upon\n   flow\
    \ creation).  The LMA, in coordination with the PCF, can then\n   authorize the\
    \ enforcement of such QoS policy.  Then, the QoS\n   parameters are provided to\
    \ the MAG via the QoS option (OC=ALLOCATE,\n   SR-ID, QoS attributes, etc.) in\
    \ the PMIP signaling, and the\n   equivalent QoS treatment is provided towards\
    \ the MN on the Wi-Fi\n   link.\n                                            |\n\
    \                                            |\n                             \
    \               | +--------+\n                                            | |Policy\
    \  |\n                                            | |Control |\n             \
    \                               | |Function|\n                               \
    \             | +---+----+\n                                            |    \
    \ |\n                                            | +---+----+\n              +----+\
    \       +-------+ PMIPv6 | |  PGW   |\n        +--+  |WiFi|_______|  WLC  |========|=|\
    \ (LMA)  |\n        |MN|~~| AP |       | (MAG) | tunnel | +--------+\n       \
    \ +--+  +----+       +-------+        |\n                                    \
    \        |\n                         Wi-Fi Access       |\n                  \
    \        Network           |   Cellular\n                                    \
    \        |    Network\n                                            |\n       \
    \             Figure 11: QoS Policy Provisioning\n   Figure 12 shows an example\
    \ of how the QoS rules can be conveyed and\n   enforced between the LMA and MN\
    \ in the case of initial attachment to\n   WLAN access.\n   +--+            +--+\
    \             +---+                       +---+\n   |MN|            |AP|-------------|MAG|-----------------------|LMA|\n\
    \   +--+            +--+             +---+                       +---+\n    |\
    \               |                 |                           |\n    |       \
    \        |                 |                           |\n    +----attached---+\
    \                 |                      [QoS rules]\n    |               |  \
    \               |                           |\n   new session      |(E)      \
    \        |(F)                        |data\n    |----data[QC]-->|---data[DSCPa]-->|-======data[DSCPb]=======->|--->\n\
    \    |               |                 |--PBU[update,QoS option]-->|\n    |  \
    \             |                 |     (ReReg) (OC=1) Validate and\n    |     \
    \          |                 |                     add QoS rule\n    |       \
    \        |                 |<----PBA[QoS option]----|\n    |               |<-INFO[QoSrules]-|\
    \        (OC=1, SR-ID)[QoS rules']\n    |               |                 |  \
    \                         |\n    |             Apply           Establish     \
    \                  |\n    |            adapted         MN's uplink           \
    \           |\n    |           QoS rules        DSCP rules                   \
    \    |\n    |               |                 |                           |\n\
    \    |               |                 |                           |\n    |  \
    \             |                 |                           |data\n    |<--data[QC]----|<---data[DSCP]---|<-======data[DSCP]========-|<----\n\
    \    |               |                 |                           |\n    |  \
    \             |                 |                           |data\n    |---data[QC]--->|-->data[DSCP]--->|-=======data[DSCP]=======->|--->\n\
    \    |               |                 |                           |\n    |  \
    \             |                 |                           |\n   (E): AP may\
    \ enforce uplink QoS rules according to priority class\n        set by the MN\n\
    \   (F): MAG can enforce a default QoS class until the local mobility\n      \
    \  anchor classifies the new flow (notified with PBA) or the mobile\n        access\
    \ gateway classifies new flow and proposes the associated\n        QoS class to\
    \ the local mobility anchor for validation (proposed\n        with PBU, notification\
    \ of validation result with PBA)\n      Figure 12: Adding New QoS Service Request\
    \ for MN-Initiated Flow\n"
- title: A.2.3.  Dynamic Update to QoS Policy
  contents:
  - "A.2.3.  Dynamic Update to QoS Policy\n   A mobile node is attached to the WLAN\
    \ access and has obtained QoS\n   parameters from the LMA for that mobility session.\
    \  Having obtained\n   the QoS parameters, a new application, e.g., IP Multimedia\
    \ Subsystems\n   (IMS) application, gets launched on the mobile node that requires\n\
    \   certain QoS support.\n   The application on the mobile node initiates the\
    \ communications via a\n   dedicated network function (e.g., IMS Call Session\
    \ Control Function).\n   Once the communication is established, the application\
    \ network\n   function notifies the PCF about the new IP flow.  The PCF function\
    \ in\n   turn notifies the LMA about the needed QoS parameters identifying the\n\
    \   IP flow and QoS parameters.  LMA sends an Update Notification message\n  \
    \ [RFC7077] to the MAG with the Notification Reason value set to\n   QOS_SERVICE_REQUEST.\
    \  On receiving the Update Notification message,\n   the MAG completes the PBU/PBA\
    \ signaling for obtaining the new QoS\n   parameters via the QoS options (OC=MODIFY,\
    \ SR-ID, QoS attributes,\n   etc.).  The MAG provisions the newly obtained QoS\
    \ parameters on the\n   access network to ensure the newly established IP flow\
    \ gets its\n   requested network resources.\n   Upon termination of the established\
    \ IP flow, the application function\n   again notifies the PCF function to remove\
    \ the established QoS\n   parameters.  The PCF notifies the LMA to withdraw the\
    \ QoS resources\n   established for that voice flow.  The LMA sends an Update\n\
    \   Notification message to the MAG with the \"Notification Reason\" value\n \
    \  set to \"FORCE-REREGISTRATION\".  On receiving this Update Notification\n \
    \  Acknowledgement message, the MAG completes the PBU/PBA signaling for\n   removing\
    \ the existing QoS rules (OC=DE-ALLOCATE, SR-ID).  The MAG\n   then removes the\
    \ QoS parameters from the corresponding IP flow and\n   releases the dedicated\
    \ network resources on the access network.\n"
- title: Appendix B.  Information When Implementing PMIP-Based QoS Support with
  contents:
  - "Appendix B.  Information When Implementing PMIP-Based QoS Support with\n    \
    \         IEEE 802.11e\n   This section shows, as an example, the end-to-end QoS\
    \ management with\n   a 802.11e-capable WLAN access link and a PMIP-based QoS\
    \ support.\n   The 802.11e, or Wi-Fi Multimedia (WMM), specification provides\n\
    \   prioritization of packets for four types of traffic, or access\n   categories\
    \ (ACs):\n      Voice (AC_VO): Very high-priority queue with minimum delay.  Time-\n\
    \      sensitive data such as VoIP and streaming mode are automatically\n    \
    \  sent to this queue.\n      Video (AC_VI): High-priority queue with low delay.\
    \  Time-sensitive\n      video data is automatically sent to this queue.\n   \
    \   Best effort (AC_BE): Medium-priority queue with medium throughput\n      and\
    \ delay.  Most traditional IP data is sent to this queue.\n      Background (AC_BK):\
    \ Lowest-priority queue with high throughput.\n      Bulk data that requires maximum\
    \ throughput but is not time-\n      sensitive (for example, FTP data) is sent\
    \ to the queue.\n   The access point uses the 802.11e indicator to prioritize\
    \ traffic on\n   the WLAN interface.  On the wired side, the access point uses\
    \ the\n   802.1p priority tag and DSCP.  To allow consistent QoS management on\n\
    \   both wireless and wired interfaces, the access point relies on the\n   802.11e\
    \ specification, which defines mapping between the 802.11e\n   access categories\
    \ and the IEEE 802.1D priority (802.1p tag).  The\n   end-to-end QoS architecture\
    \ is depicted in Figure 13, and the 802.11e\n   /802.1D priority mapping is shown\
    \ in the following table:\n                     +-----------+------------------+\n\
    \                     | 802.1e AC | 802.1D priority  |\n                     +-----------+------------------+\n\
    \                     |  AC_VO    |       7,6        |\n                     +-----------+------------------+\n\
    \                     |  AC_VI    |       5,4        |\n                     +-----------+------------------+\n\
    \                     |  AC_BE    |       0,3        |\n                     +-----------+------------------+\n\
    \                     |  AC_BK    |       2,1        |\n                     +-----------+------------------+\n\
    \                +=============+                          +-----+\n          \
    \       DSCP/802.1p                             | PDP |\n                 mapping\
    \ table                           +-----+\n                +=============+   \
    \  PEP                     |\n                         `._     +---+---+     \
    \             |\n                            `._  |WiFi AR|    PMIPv6     +-----+\n\
    \                               - + (MAG) +===============| LMA |\n          \
    \                       |  WLC  |    tunnel     +-----+\n                    \
    \             +-------+                 PEP\n                                \
    \     |\n                    ==Video==   802.1p/DSCP\n                    ==Voice==\
    \        |\n                    == B.E.==     +----+\n             +----+    \
    \           |WLAN| PEP\n             | MN |----802.11e----| AP |\n           \
    \  +----+               +----+\n             Figure 13: End-to-End QoS Management\
    \ with 802.11e\n   When receiving a packet from the MN, the AP checks whether\
    \ the frame\n   contains 802.11e markings in the L2 header.  If not, the AP checks\n\
    \   the DSCP field.  If the uplink packet contains the 802.11e marking,\n   the\
    \ access point maps the access categories to the corresponding\n   802.1D priority\
    \ as per the table above.  If the frame does not\n   contain 802.11e marking,\
    \ the access point examines the DSCP field.\n   If DSCP is present, the AP maps\
    \ DSCP values to a 802.1p value (i.e.,\n   802.1D priority).  This mapping is\
    \ not standardized and may differ\n   between operators; a mapping example is\
    \ given in the following table.\n                +-------------------+--------+------------+\n\
    \                | Type of traffic   | 802.1p | DSCP value |\n               \
    \ +-------------------+--------+------------+\n                |  Network Control\
    \  |   7    |     56     |\n                +-------------------+--------+------------+\n\
    \                |  Voice            |   6    |  46 (EF)   |\n               \
    \ +-------------------+--------+------------+\n                |  Video      \
    \      |   5    | 34 (AF 41) |\n                +-------------------+--------+------------+\n\
    \                |  Voice Control    |   4    | 26 (AF 31) |\n               \
    \ +-------------------+--------+------------+\n                | Background Gold\
    \   |   2    | 18 (AF 21) |\n                +-------------------+--------+------------+\n\
    \                | Background Silver |   1    | 10 (AF 11) |\n               \
    \ +-------------------+--------+------------+\n                |  Best Effort\
    \      |  0,3   |  0 (BE)    |\n                +-------------------+--------+------------+\n\
    \   The access point prioritizes ingress traffic on the Ethernet port\n   based\
    \ on the 802.1p tag or the DSCP value.  If the 802.1p priority\n   tag is not\
    \ present, the access point checks the DSCP/802.1p mapping\n   table.  The next\
    \ step is to map the 802.1p priority to the\n   appropriate egress queue.  When\
    \ 802.11e support is enabled on the\n   wireless link, the access point uses the\
    \ IEEE standardized 802.1p/\n   802.11e correspondence table to map the traffic\
    \ to the appropriate\n   hardware queues.\n   When the 802.11e-capable client\
    \ sends traffic to the AP, it usually\n   marks packets with a DSCP value.  In\
    \ that case, the MAG/LMA can come\n   into play for QoS renegotiation and call\
    \ flows depicted in Appendix A\n   apply.  Sometimes, when communication is initiated\
    \ on the WLAN\n   access, the application does not mark upstream packets.  If\
    \ the\n   uplink packet does not contain any QoS marking, the AP/MAG could\n \
    \  determine the DSCP field according to traffic selectors received from\n   the\
    \ LMA.  Figure 14 gives the call flow corresponding to that use\n   case and shows\
    \ where QoS tags mapping does come into play.  The main\n   steps are as follows:\n\
    \      (A): During the MN attachment process, the MAG fetches QoS\n      policies\
    \ from the LMA.  After this step, both the MAG and LMA are\n      provisioned\
    \ with QoS policies.\n      (B): The MN starts a new IP communication without\
    \ making IP\n      packets with DSCP tags.  The MAG uses the traffic selector\
    \ to\n      determine the DSCP value; it then marks the IP packet and forwards\n\
    \      within the PMIP tunnel.\n      (C): The LMA checks the DSCP value with\
    \ respect to the traffic\n      selector.  If the QoS policies are valid, the\
    \ LMA forwards the\n      packet without renegotiating the QoS rules.\n      (D):\
    \ When receiving a marked packet, the MAG, the AP, and the MN\n      use 802.11e\
    \ (or WMM), 802.1p tags, and DSCP values to prioritize\n      the traffic.\n \
    \    +--+            +--+             +---+                     +---+\n     |MN|\
    \            |AP|             |MAG|                     |LMA|\n     +--+     \
    \       + -+             +---+                     +---+\n   (A)|----attach-----|---------------->|-----------PBU---------->|\n\
    \      |<--------------|---------------- |<----PBA[QoS option]-----|\n      .\
    \               .            [QoS rules]              [QoS rules]\n   (B).   \
    \            .                 .                         |\n     new session \
    \     |                 |                         |\n      |----data[]---->|----data[]------>|-======data[DSCP]======->|\n\
    \      |               |                 |                         |\n   (C)|\
    \               |                 |              Validate QoS rule\n      |  \
    \             |                 |                         |--->\n      |     \
    \          |                 |<======data[DSCP]========|<----\n      |       \
    \        |                 |                         |\n      |              \
    \ |               mapping                     |\n   (D)|               |     \
    \       DSCP/802.1p                    |\n      |               |<----data--------|\
    \                         |\n      |               |  [802.1p/DSCP]  |       \
    \                  |\n      |               |                 |              \
    \           |\n      |             mapping             |                     \
    \    |\n      |          802.1p/802.11e         |                         |\n\
    \      |<--data[WMM]---|                 |                         |\n      |\
    \               |                 |                         |\n      |---data[WMM]-->|------data------>|=======data[DSCP]=======>|--->\n\
    \      |               |  [802.1p/DSCP]  |                         |\n      |\
    \               |                 |                         |\n      Figure 14:\
    \ Prioritization of a Flow Created on the WLAN Access\n"
- title: Appendix C.  Information When Implementing with a Broadband Network
  contents:
  - "Appendix C.  Information When Implementing with a Broadband Network\n       \
    \      Gateway\n   This section shows an example of QoS interworking between the\
    \ PMIPv6\n   domain and the broadband access.  The Broadband Network Gateway (BNG)\n\
    \   or Broadband Remote Access Server (BRAS) has the MAG function, and\n   the\
    \ CPE (Customer Premise Equipment) or Residential Gateway (RG) is\n   connected\
    \ via the broadband access network.  The MN is attached to\n   the RG via, e.g.,\
    \ Wi-Fi AP in the broadband home network.  In the\n   segment of the broadband\
    \ access network, the BNG and RG are the\n   Policy Enforcement Point (PEP) for\
    \ the downlink and uplink traffic,\n   respectively.  The QoS information is downloaded\
    \ from the LMA to the\n   BNG via the PMIPv6 with the QoS option defined in this\
    \ document.\n   Based on the received QoS parameters (e.g., DSCP values), the\n\
    \   broadband access network and the RG provide appropriate QoS treatment\n  \
    \ to the downlink and uplink traffic to/from the MN.\n                       \
    \                                  +-----+\n                                 \
    \                        | PDP |\n                                           \
    \              +-----+\n                                    PEP              \
    \       |\n                                 +-------+                  |\n   \
    \                              | BNG/  |    PMIPv6     +-----+\n             \
    \                    | BRAS  +===============| LMA |\n                       \
    \          | (MAG) |    tunnel     +-----+\n                                 +-------+\
    \                 PEP\n                      Broadband  (   |   )\n          \
    \              Access  (   DSCP  )\n                       Network   (   |   )\n\
    \                                  +-----+\n               +----+            \
    \ | CPE | PEP\n               | MN |-------------| /RG |\n               +----+\
    \  Broadband  +-----+\n                      Home Network\n      Figure 15: End-to-End\
    \ QoS Management with the Broadband Access\n                                 \
    \ Network\n   In the segment of the broadband access network, QoS mapping between\n\
    \   3GPP QCI values and DSCP described in Section 6.2 is applied.  In the\n  \
    \ segment of the broadband home network, if the MN is attached to the\n   RG via\
    \ Wi-Fi, the same QoS mapping as described in Appendix B can be\n   applied.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Marco Liebsch\n   NEC\n   Kurfuersten-Anlage 36\n   Heidelberg\
    \  D-69115\n   Germany\n   EMail: liebsch@neclab.eu\n   Pierrick Seite\n   Orange\n\
    \   4, rue du Clos Courtel, BP 91226\n   Cesson-Sevigne  35512\n   France\n  \
    \ EMail: pierrick.seite@orange.com\n   Hidetoshi Yokota\n   KDDI Lab\n   2-1-15\
    \ Ohara\n   Saitama, Fujimino  356-8502\n   Japan\n   EMail: yokota@kddilabs.jp\n\
    \   Jouni Korhonen\n   Broadcom Communications\n   Porkkalankatu 24\n   Helsinki\
    \  FIN-00180\n   Finland\n   EMail: jouni.nospam@gmail.com\n   Sri Gundavelli\n\
    \   Cisco\n   170 West Tasman Drive\n   San Jose, CA  95134\n   USA\n   EMail:\
    \ sgundave@cisco.com\n"
