- contents:
  - "          Transparent Interconnection of Lots of Links (TRILL)\n                      Distributed
    Layer 3 Gateway\n"
  title: __initial_text__
- contents:
  - "Abstract\n   The base TRILL (Transparent Interconnection of Lots of Links)\n
    \  protocol provides optimal pair-wise data frame forwarding for Layer 2\n   intra-subnet
    traffic but not for Layer 3 inter-subnet traffic.  A\n   centralized gateway solution
    is typically used for Layer 3 inter-\n   subnet traffic forwarding but has the
    following issues:\n   1. Sub-optimum forwarding paths for inter-subnet traffic.\n
    \  2. A centralized gateway that may need to support a very large number\n      of
    gateway interfaces in a Data Center, one per tenant per Data\n      Label used
    by that tenant, to provide interconnect functionality\n      for all the Layer
    2 Virtual Networks in a TRILL campus.\n   3. A traffic bottleneck at the gateway.\n
    \  This document specifies an optional TRILL distributed gateway\n   solution
    that resolves these centralized gateway issues.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    7841.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7956.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2016 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (http://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n
    \     1.1. Document Organization ......................................3\n   2.
    Conventions Used in This Document ...............................4\n   3. Simplified
    Example and Problem Statement ........................5\n      3.1. Simplified
    Example .........................................6\n      3.2. Problem Statement
    Summary ..................................8\n   4. Layer 3 Traffic Forwarding
    Model ................................9\n   5. Distributed Gateway Solution Details
    ...........................10\n      5.1. Local Routing Information .................................11\n
    \     5.2. Local Routing Information Synchronization .................12\n      5.3.
    Active-Active Access ......................................14\n      5.4. Data
    Traffic Forwarding Process ...........................15\n   6. Distributed Layer
    3 Gateway Process Example ....................16\n      6.1. Control-Plane Process
    .....................................17\n      6.2. Data-Plane Process ........................................19\n
    \  7. TRILL Protocol Extensions ......................................20\n      7.1.
    The Tenant Label and Gateway MAC APPsub-TLV ...............20\n      7.2. The
    SE Flag in the NickFlags APPsub-TLV ...................21\n      7.3. The IPv4
    Prefix APPsub-TLV ................................22\n      7.4. The IPv6 Prefix
    APPsub-TLV ................................23\n   8. Security Considerations ........................................24\n
    \  9. Management Considerations ......................................24\n   10.
    IANA Considerations ...........................................24\n   11. References
    ....................................................25\n      11.1. Normative
    References .....................................25\n      11.2. Informative References
    ...................................26\n   Acknowledgments ...................................................27\n
    \  Authors' Addresses ................................................28\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   The TRILL (Transparent Interconnection of Lots of Links)
    protocol\n   [RFC6325] [RFC7780] provides a solution for least-cost transparent\n
    \  routing in multi-hop networks with arbitrary topologies and link\n   technologies,
    using IS-IS [IS-IS] [RFC7176] link-state routing and a\n   hop count.  TRILL switches
    are sometimes called RBridges (Routing\n   Bridges).\n   The base TRILL protocol
    provides optimal unicast forwarding for\n   Layer 2 intra-subnet traffic but not
    for Layer 3 inter-subnet\n   traffic, where \"subnet\" means a different IP address
    prefix and,\n   typically, a different Data Label (VLAN or FGL (Fine-Grained Label)).\n
    \  This document specifies a TRILL-based distributed Layer 3 gateway\n   solution
    that provides optimal unicast forwarding for Layer 3\n   inter-subnet traffic.
    \ With distributed gateway support, an edge\n   RBridge provides routing based
    on the Layer 2 identity (address and\n   Virtual Network (VN, i.e., Data Label))
    among End Stations (ESs) that\n   belong to the same subnet and also provides
    routing based on the\n   Layer 3 identity among ESs that belong to different subnets
    of the\n   same routing domain.  An edge RBridge supporting this feature needs\n
    \  to provide routing instances and Layer 3 gateway interfaces for\n   locally
    connected ESs.  Such routing instances provide IP address\n   isolation between
    tenants.  In the TRILL distributed Layer 3 gateway\n   solution, inter-subnet
    traffic can be fully spread over edge\n   RBridges, so there is no single bottleneck.\n"
  - contents:
    - "1.1.  Document Organization\n   This document is organized as follows: Section
      3 gives a simplified\n   example and also a more detailed problem statement.
      \ Section 4 gives\n   the Layer 3 traffic forwarding model.  Section 5 provides
      a\n   distributed gateway solution overview.  Section 6 gives a detailed\n   distributed
      gateway solution example.  Section 7 describes the TRILL\n   protocol extensions
      needed to support this distributed gateway\n   solution.\n"
    title: 1.1.  Document Organization
  title: 1.  Introduction
- contents:
  - "2.  Conventions Used in This Document\n   The key words \"MUST\", \"MUST NOT\",
    \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\",
    \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described
    in RFC 2119 [RFC2119].\n   The terms and acronyms in [RFC6325] are used, with
    the following\n   additions:\n   AGG: Aggregation switch.\n   ARP: Address Resolution
    Protocol [RFC826].\n   Campus: The name for a network using the TRILL protocol
    in the same\n      sense that a \"bridged LAN\" is the name for a network using\n
    \     bridging.  In TRILL, the word \"campus\" has no academic\n      implication.\n
    \  COR: Core switch.\n   Data Label: VLAN or FGL [RFC7172].\n   DC: Data Center.\n
    \  Edge RBridge: An RBridge that connects to one or more ESs without any\n      intervening
    RBridges.\n   ES: End Station.  A Virtual Machine or physical server, whose address\n
    \     is either the destination or source of a data frame.\n   FGL: Fine-Grained
    Label [RFC7172].\n   Gateway interface: A Layer 3 virtual interface that terminates\n
    \     Layer 2 forwarding and forwards IP traffic to the destination\n      using
    IP forwarding rules.  Incoming traffic from a physical port\n      on a gateway
    will be distributed to its virtual gateway interface\n      based on the Data
    Label (VLAN or FGL).\n   Inner.MacDA: The inner MAC destination address in a TRILL
    Data packet\n      [RFC6325].\n   Inner.MacSA: The inner MAC source address in
    a TRILL Data packet\n      [RFC6325].\n   Inner.VLAN: The inner VLAN tag in a
    TRILL Data packet payload\n      [RFC6325].\n   L2: Layer 2.\n   L3: IP Layer
    3.\n   LSP: Link State PDU\n   ND: IPv6's Neighbor Discovery [RFC4861].\n   ToR:
    Top of Rack.\n   VN: Virtual Network.  In a TRILL campus, a unique 12-bit VLAN
    ID or a\n      24-bit FGL [RFC7172] identifies each VN.\n   VRF: Virtual Routing
    and Forwarding.  In IP-based computer networks,\n      VRF technology supports
    multiple instances of routing tables\n      existing within the same router at
    the same time.\n"
  title: 2.  Conventions Used in This Document
- contents:
  - "3.  Simplified Example and Problem Statement\n   There is normally a Data Label
    (VLAN or FGL) associated with each IP\n   subnet.  For traffic within a subnet
    -- that is, IP traffic to\n   another ES in the same Data Label attached to the
    TRILL campus -- the\n   ES just ARPs for the MAC address of the destination ES's
    IP.  It then\n   uses this MAC address for traffic to that destination.  TRILL
    routes\n   the ingressed TRILL Data packets to the destination's edge RBridge\n
    \  based on the egress nickname for that destination MAC address and\n   Data
    Label.  This is the regular TRILL base protocol [RFC6325]\n   process.\n   If
    two ESs of the same tenant are on different subnets and need to\n   communicate
    with each other, their packets are typically forwarded to\n   an IP L3 gateway
    that performs L3 routing and, if necessary, changes\n   the Data Label.  Either
    a centralized L3 gateway solution or the\n   distributed L3 gateway solution specified
    in this document can be\n   used for inter-subnet traffic forwarding.\n   Section
    3.1 gives a simplified example in a TRILL campus with and\n   without a distributed
    L3 gateway using VLAN Data Labels.  Section 3.2\n   gives a detailed description
    of the issues related to using a\n   centralized gateway (i.e., without a distributed
    L3 gateway).  The\n   remainder of this document, particularly Section 5, describes
    the\n   distributed gateway solution in detail.\n"
  - contents:
    - "3.1.  Simplified Example\n   Figure 1 depicts a TRILL DC network, where ToR
      switches are edge\n   RBridges and the AGGs and CORs are non-edge RBridges.\n
      \                    -------                --------\n                     |
      COR1|                | COR2 |\n                     -------                --------\n
      \                       |                      |\n                     -------
      \               -------\n                     |AGG1 |                |AGG2 |\n
      \                    -------                -------\n                        |
      \                     |\n          -----------------------------------------------------\n
      \         |  -------------|------------------|----------------|\n          |
      \ |            |  |               |  |          |  |\n        -------          -------
      \          -------        -------\n        | RB1 |          | RB2 |           |
      RB3 |        | RB4 |\n        |ToR1 |          |ToR2 |           |ToR3 |        |ToR4
      |\n        -------          -------           -------        -------\n         |
      \   |           |    |            |    |         |    |\n      -----  -----
      \    -----  -----      -----  -----   -----  -----\n      |ES1|  |ES2|     |ES3|
      \ |ES4|      |ES5|  |ES6|   |ES7|  |ES8|\n      -----  -----     -----  -----
      \     -----  -----   -----  -----\n                   Figure 1: A Typical TRILL
      DC Network\n   ES1 through ES8 belong to one tenant network, and the tenant
      has\n   four subnets with each subnet corresponding to one VLAN (which\n   indicates
      one individual L2 VN).  Each ES's IP address, VLAN, and\n   subnet are listed
      below:\n           +----+----------------+-----------------+----------+\n           |
      ES |   IP Address   |    Subnet       |  VLAN    |\n           +----+----------------+-----------------+----------+\n
      \          | ES1| 192.0.2.2      | 192.0.2.0/24    |   10     |\n           +----+----------------+-----------------+----------+\n
      \          | ES2| 198.51.100.2   | 198.51.100.0/24 |   11     |\n           +----+----------------+-----------------+----------+\n
      \          | ES3| 192.0.2.3      | 192.0.2.0/24    |   10     |\n           +----+----------------+-----------------+----------+\n
      \          | ES4| 198.51.100.3   | 198.51.100.0/24 |   11     |\n           +----+----------------+-----------------+----------+\n
      \          | ES5| 203.0.113.2    | 203.0.113.0/25  |   12     |\n           +----+----------------+-----------------+----------+\n
      \          | ES6| 203.0.113.130  | 203.0.113.128/25|   13     |\n           +----+----------------+-----------------+----------+\n
      \          | ES7| 203.0.113.3    | 203.0.113.0/25  |   12     |\n           +----+----------------+-----------------+----------+\n
      \          | ES8| 203.0.113.131  | 203.0.113.128/25|   13     |\n           +----+----------------+-----------------+----------+\n
      \  Assume that a centralized gateway solution is used with both COR1 and\n   COR2
      acting as centralized gateways for redundancy in Figure 1.  COR1\n   and COR2
      each have four gateway interfaces for the four subnets in\n   the tenant.  In
      the centralized L3 gateway solution, all traffic\n   within the tenant between
      different VLANs must go through the\n   centralized L3 gateway device of COR1
      or COR2, even if the traffic is\n   between two ESs connected to the same edge
      RBridge, because only the\n   L3 gateway can change the VLAN labeling of the
      traffic.\n   This is generally sub-optimal because the two ESs may be connected
      to\n   the same ToR where L3 switching could have been performed locally.\n
      \  For example, in Figure 1 above, the unicast IP traffic between ES1\n   and
      ES2 has to go through a centralized gateway of COR1 or COR2.  It\n   can't be
      locally routed between them on ToR1.  However, if an edge\n   RBridge has the
      distributed gateway capabilities specified in this\n   document, then it can
      still perform optimum L2 forwarding for\n   intra-subnet traffic and, in addition,
      optimum L3 forwarding for\n   inter-subnet traffic, thus delivering optimum
      forwarding for unicast\n   packets in all important cases.\n   With a distributed
      L3 gateway, each edge RBridge acts as a default L3\n   gateway for local connecting
      ESs and has IP router capabilities to\n   direct IP communications to other
      edge RBridges.  Each edge RBridge\n   only needs gateway interfaces for local
      connecting ESs, i.e., RB1 and\n   RB2 need gateway interfaces only for VLAN
      10 and VLAN 11 while RB3\n   and RB4 need gateway interfaces only for VLAN 12
      and VLAN 13.  No\n   device needs to maintain gateway interfaces for all VLANs
      in the\n   entire network.  This will enhance scalability in terms of the number\n
      \  of tenants and subnets per tenant.\n   When each ES ARPs for its L3 gateway,
      that is, its IP router, the\n   edge RBridge to which it is connected will respond
      with that\n   RBridge's \"gateway MAC\".  When the ES later sends IP traffic
      to the\n   L3 gateway, which it does if the destination IP is outside of its\n
      \  subnet, the edge RBridge intercepts the IP packet because the\n   destination
      MAC is its gateway MAC.  That RBridge routes the IP\n   packet using the routing
      instance associated with that tenant,\n   handling it in one of three ways:\n
      \  (1) ES1 communicates with ES2.  The destination IP is connected to\n       the
      same edge RBridge; the RBridge of ToR1 can simply transmit\n       the IP packet
      out the right edge port in the destination VLAN.\n   (2) If the destination
      IP is located in an outside network, the edge\n       RBridge encapsulates it
      as a TRILL Data packet and sends it to\n       the actual TRILL campus edge
      RBridge connecting to an external IP\n       router.\n   (3) ES1 communicates
      with ES4.  The destination ES is connected to a\n       different edge RBridge;
      the ingress RBridge ToR1 uses TRILL\n       encapsulation to route the IP packet
      to the correct egress\n       RBridge ToR2, using the egress RBridge's gateway
      MAC and an\n       Inner.VLAN identifying the tenant.  Finally, the egress RBridge\n
      \      terminates the TRILL encapsulation and routes the IP packet to\n       the
      destination ES based on the routing instance for that tenant.\n"
    title: 3.1.  Simplified Example
  - contents:
    - "3.2.  Problem Statement Summary\n   With FGL [RFC7172], in theory, up to 16
      million L2 VNs can be\n   supported in a TRILL campus.  To support inter-subnet
      traffic, a very\n   large number of L3 gateway interfaces could be needed on
      a\n   centralized gateway, if each VN corresponds to a subnet and there are\n
      \  many tenants with many subnets per tenant.  It is a big burden for\n   the
      centralized gateway to support so many interfaces.  In addition,\n   all inter-subnet
      traffic will go through a centralized gateway that\n   may become a traffic
      bottleneck.\n   The centralized gateway has the following issues:\n   1. Sub-optimum
      forwarding paths for inter-subnet traffic can occur\n      due to the requirements
      to perform IP routing and possibly change\n      Data Labels at a centralized
      gateway.\n   2. The centralized gateway may need to support a very large number
      of\n      gateway interfaces -- in a DC, one per tenant per Data Label used\n
      \     by that tenant -- to provide interconnect functionality for all\n      the
      L2 VNs in the TRILL campus.\n   3. There may be a traffic bottleneck at the
      centralized gateway.\n   A distributed gateway on edge RBridges addresses these
      issues.\n   Through the distributed L3 gateway solution, the inter-subnet traffic\n
      \  is fully dispersed and is transmitted along optimal pair-wise\n   forwarding
      paths, improving network efficiency.\n"
    title: 3.2.  Problem Statement Summary
  title: 3.  Simplified Example and Problem Statement
- contents:
  - "4.  Layer 3 Traffic Forwarding Model\n   In a DC network, each tenant has one
    or more L2 VNs, and, in normal\n   cases, each tenant corresponds to one routing
    domain.  Normally, each\n   L2 VN uses a different Data Label and corresponds
    to one or more IP\n   subnets.\n   Each L2 VN in a TRILL campus is identified
    by a unique 12-bit VLAN ID\n   or 24-bit FGL [RFC7172].  Different routing domains
    may have\n   overlapping address space but need distinct and separate routes.
    \ The\n   ESs that belong to the same subnet communicate through L2 forwarding;\n
    \  ESs of the same tenant that belong to different subnets communicate\n   through
    L3 routing.\n   Figure 2 depicts the model where there are n VRFs corresponding
    to\n   n tenants, with each tenant having up to m segments/subnets (VNs).\n              +---------------------------------------------+\n
    \             |                                             |\n              |
    \     +-----------+         +-----------+    |\n              |      | Tenant
    n  |---------|  VRF n    |    |\n              |   +------------+ |     +------------+
    \ |    |\n              |   |  +-----+   | |     |            |  |    |\n              |
    \  |  | VN1 |   | |     |            |  |    |\n              |   |  +-----+   |
    |     |    VRF 1   |  |    |\n              |   |     ..     +-------+            |
    \ |    |\n              |   |  +-----+   | |     |            |  |    |\n              |
    \  |  | VNm |   | |     |            |  |    |\n              |   |  +-----+   |
    |     |            |  |    |\n              |   |  Tenant1   |-+     |            |
    \ |    |\n              |   +------------+       |            |  |    |\n              |
    \  +------------+       +------------+       |\n              |                                             |\n
    \             |               Edge RBridge                  |\n              +---------------------------------------------+\n
    \           Figure 2: Edge RBridge Model as Distributed Gateway\n"
  title: 4.  Layer 3 Traffic Forwarding Model
- contents:
  - "5.  Distributed Gateway Solution Details\n   With the TRILL distributed gateway
    solution, an edge RBridge\n   continues to perform routing based on the L2 MAC
    address for the ESs\n   that are on the same subnet but performs IP routing for
    the ESs that\n   are on the different subnets of the same tenant.\n   As the IP
    address space in different routing domains can overlap, VRF\n   instances need
    to be created on each edge RBridge to isolate the IP\n   forwarding process for
    different routing domains present on the edge\n   RBridge.  A Tenant ID unique
    across the TRILL campus identifies each\n   routing domain.  The network operator
    MUST configure the Tenant IDs\n   on each edge RBridge for each routing domain
    consistently so that the\n   same ID always refers to the same tenant.  Otherwise,
    data might be\n   delivered to the wrong tenant.  If a routing domain spreads
    over\n   multiple edge RBridges, routing information for the routing domain is\n
    \  synchronized among these edge RBridges through the link-state\n   database
    to ensure reachability to all ESs in that routing domain.\n   The routing information
    is, in effect, labeled with the Tenant ID to\n   differentiate the routing domains.\n
    \  From the data-plane perspective, all edge RBridges are connected to\n   each
    other via one or more TRILL hops; however, they are always just\n   a single IP
    hop away.  When an ingress RBridge receives inter-subnet\n   IP traffic from a
    local ES whose destination MAC is the edge\n   RBridge's gateway MAC, that RBridge
    will perform Ethernet header\n   termination.  The tenant involved is determined
    by the VLAN of the\n   traffic and the port on which it arrives.  The edge RBridge
    looks up\n   in its IP routing table for that tenant how to route the traffic
    to\n   the IP next hop.  If the destination ES is connected to a remote edge\n
    \  RBridge, the remote RBridge will be the IP next hop for traffic\n   forwarding.
    \ For such inter-subnet traffic, the ingress RBridge will\n   rewrite the original
    Ethernet header with the ingress RBridge's\n   gateway MAC address as the Inner.MacSA
    and the egress RBridge's\n   gateway MAC address as the Inner.MacDA and then perform
    TRILL\n   encapsulation to the remote RBridge's nickname, setting the inner\n
    \  Data Label to indicate the tenant involved.  TRILL then routes it to\n   the
    remote edge RBridge through the TRILL campus.\n   When that remote edge RBridge
    receives the traffic, it will\n   decapsulate the TRILL Data packet and see that
    the inner destination\n   MAC is its gateway MAC.  It then terminates the inner
    Ethernet\n   encapsulation and looks up the destination IP in the RBridge's IP\n
    \  forwarding table for the tenant indicated by the inner Data Label, to\n   route
    it to the destination ES.\n   Through this method, TRILL with distributed gateways
    provides optimum\n   pair-wise data routing for inter-subnet traffic.\n"
  - contents:
    - "5.1.  Local Routing Information\n   An ES can be locally connected to an edge
      RBridge through an L2\n   network (such as a point-to-point Ethernet link or
      a bridged LAN) or\n   externally connected through an L3 IP network.\n   If
      the ES is connected to an edge RBridge through an L2 network, then\n   the edge
      RBridge acts as an L3 gateway for the ES.  A gateway\n   interface is established
      on the edge RBridge for the connecting ES.\n   Because the ESs in a subnet may
      be spread over multiple edge\n   RBridges, each such edge RBridge that establishes
      its gateway\n   interface for the subnet SHOULD share the same gateway MAC and\n
      \  gateway IP address configuration.  Sharing the configuration and\n   insuring
      configuration consistency can be done by local configuration\n   and Network
      Configuration Protocol (NETCONF) / YANG models.\n   With a distributed gateway,
      the edge RBridge to which an ES is\n   connected appears to be the local IP
      router on its link.  As in any\n   IP network, before the ES starts to send
      inter-subnet traffic, it\n   acquires its gateway's MAC through the ARP/ND process.
      \ Local\n   connecting edge RBridges that support this distributed gateway\n
      \  feature always respond with the gateway MAC address when receiving\n   ARP/ND
      requests for the gateway IP.  Through the ARP/ND process, the\n   edge RBridge
      can learn the IP and MAC correspondence of a local ES\n   connected to the edge
      RBridge by L2 and then generate local IP\n   routing entries for that ES in
      the corresponding routing domain.\n   To TRILL, an IP router connected to an
      edge RBridge looks like an ES.\n   If a router/ES is located in an external
      IP network, it normally\n   provides access to one or more IP prefixes.  The
      router/ES SHOULD run\n   an IP routing protocol with the connecting TRILL edge
      RBridge.  The\n   edge RBridge will learn the IP prefixes behind the router/ES
      through\n   that IP routing protocol, and the RBridge will then generate local
      IP\n   routing entries in the corresponding routing domain.  If such a\n   routing
      protocol is not run with the edge RBridge, then only the IP\n   prefixes behind
      the router/ES that are explicitly configured on the\n   edge RBridge will be
      accessible.\n"
    title: 5.1.  Local Routing Information
  - contents:
    - "5.2.  Local Routing Information Synchronization\n   When a routing instance
      is created on an edge RBridge, the Tenant ID,\n   tenant Data Label (VLAN or
      FGL), and tenant gateway MAC that\n   correspond to that instance are configured
      and MUST be globally\n   advertised (see Section 7.1).  The Tenant ID uniquely
      identifies that\n   tenant throughout the campus.  The tenant Data Label identifies
      that\n   tenant at the edge RBridge.  The tenant gateway MAC MAY identify that\n
      \  tenant, all tenants, or some subset of tenants at the edge RBridge.\n   When
      an ingress RBridge performs inter-subnet traffic TRILL\n   encapsulation, the
      ingress RBridge uses the Data Label advertised by\n   the egress RBridge as
      the inner VLAN or FGL and uses the tenant\n   gateway MAC advertised by the
      egress RBridge as the Inner.MacDA.  The\n   egress RBridge relies on this tenant
      Data Label to find the local VRF\n   instance for the IP forwarding process
      when receiving inter-subnet\n   traffic from the TRILL campus.  (The role of
      the tenant Data Label is\n   akin to an MPLS VPN Label in an MPLS IP / MPLS
      VPN network.)  Tenant\n   Data Labels are independently allocated on each edge
      RBridge for each\n   routing domain.  An edge RBridge can use an access Data
      Label from a\n   routing domain to act as the inter-subnet Data Label, or the
      edge\n   RBridge can use a Data Label different from any access Data Labels
      to\n   be a tenant Data Label.  It is implementation dependent, and there is\n
      \  no restriction on this assignment of Data Labels.\n   The tenant gateway
      MAC differentiates inter-subnet L3 traffic from\n   intra-subnet L2 traffic
      on the egress RBridge.  Each tenant on an\n   RBridge can use a different gateway
      MAC or the same tenant gateway\n   MAC for inter-subnet traffic purposes.  This
      is also implementation\n   dependent, and there is no restriction on it.\n   When
      a local IP prefix is learned in a routing instance on an edge\n   RBridge, the
      edge RBridge should advertise the IP prefix information\n   for the routing
      instance so that other edge RBridges will generate IP\n   routing entries.  If
      the ESs in a VN are spread over multiple\n   RBridges, these RBridges MUST advertise
      each local connecting ES's IP\n   address in the VN to other RBridges.  If the
      ESs in a VN are only\n   connected to one edge RBridge, that RBridge only needs
      to advertise\n   the subnet corresponding to the VN to other RBridges using
      host\n   routes.  A Tenant ID unique across the TRILL campus is also carried\n
      \  in the advertisement to differentiate IP prefixes between different\n   tenants,
      because the IP address space of different tenants can\n   overlap (see Sections
      7.3 and 7.4).\n   If a tenant is deleted on an edge RBridge RB1, RB1 updates
      the local\n   tenant Data Label, tenant gateway MAC, and related IP prefix\n
      \  information it is advertising to include only the rest of the\n   tenants.
      \ It may take some time for these updates to reach all other\n   RBridges, so
      during this period of time there may be transient route\n   inconsistency among
      the edge RBridges.  If there is traffic in flight\n   during this time, it will
      be dropped at the egress RBridge due to\n   local tenant deletion.  When a stable
      state is reached, the traffic\n   to the deleted tenant will be dropped by the
      ingress RBridge.\n   Therefore, the transient route inconsistency won't cause
      issues other\n   than wasting some network bandwidth.\n   If a new tenant is
      created and a previously used tenant Data Label is\n   assigned to the new tenant
      immediately, this may cause a security\n   policy violation for the traffic
      in flight, because when the egress\n   RBridge receives traffic from the old
      tenant, it will forward it in\n   the new tenant's routing instance and deliver
      it to the wrong\n   destination.  So, a tenant Data Label MUST NOT be reallocated
      until a\n   reasonable amount of time -- for example, twice the IS-IS\n   Holding
      Time generally in use in the TRILL campus -- has passed to\n   allow any traffic
      in flight to be discarded.\n   When the ARP entry in an edge RBridge for an
      ES times out, it will\n   trigger an edge RBridge LSP advertisement to other
      edge RBridges with\n   the corresponding IP routing entry deleted.  If the ES
      is an IP\n   router, the edge RBridge also notifies other edge RBridges that
      they\n   must delete the routing entries corresponding to the IP prefixes\n
      \  accessible through that IP router.  During the IP prefix deleting\n   process,
      if there is traffic in flight, the traffic will be discarded\n   at the egress
      RBridge because there is no local IP routing entry to\n   the destination.\n
      \  If an edge RBridge changes its tenant gateway MAC, it will trigger an\n   edge
      RBridge LSP advertisement to other edge RBridges, giving the new\n   gateway
      MAC to be used as the Inner.MacDA for future traffic destined\n   to the edge
      RBridge.  During the gateway MAC changing process, if\n   there is traffic in
      flight using the old gateway MAC as the\n   Inner.MacDA, the traffic will be
      discarded or will be forwarded as L2\n   intra-subnet traffic on the edge RBridge.
      \ If the inter-subnet tenant\n   Data Label is a unique Data Label that is different
      from any access\n   Data Labels, when the edge RBridge receives the traffic
      whose\n   Inner.MacDA is different from the local tenant gateway MAC, the\n
      \  traffic will be discarded.  If the edge RBridge uses one of the\n   access
      Data Labels as an inter-subnet tenant Data Label, the traffic\n   will be forwarded
      as L2 intra-subnet traffic unless a special\n   traffic-filtering policy is
      enforced on the edge RBridge.\n   If there are multiple nicknames owned by an
      edge RBridge, the edge\n   RBridge can also specify one nickname as the egress
      nickname for\n   inter-subnet traffic forwarding.  A NickFlags APPsub-TLV with
      the\n   SE flag set can be used for this purpose.  If the edge RBridge\n   doesn't
      specify a nickname for this purpose, the ingress RBridge can\n   use any one
      of the nicknames owned by the egress as the egress\n   nickname for inter-subnet
      traffic forwarding.\n   TRILL Extended Level 1 Flooding Scope (E-L1FS) FS-LSP
      [RFC7780]\n   APPsub-TLVs are used for IP routing information synchronization
      in\n   each routing domain among edge RBridges.  Based on the synchronized\n
      \  information from other edge RBridges, each edge RBridge generates\n   routing
      entries in each routing domain for remote IP addresses and\n   subnets.\n   Through
      this solution, the intra-subnet forwarding and inter-subnet\n   IP routing functions
      are integrated, and network management and\n   deployment are simplified.\n"
    title: 5.2.  Local Routing Information Synchronization
  - contents:
    - "5.3.  Active-Active Access\n   TRILL active-active service provides ESs with
      flow-level load balance\n   and resilience against link failures at the edge
      of TRILL campuses,\n   as described in [RFC7379].\n   If an ES is connected
      to two TRILL RBridges, say RB1 and RB2, in\n   active-active mode, RB1 and RB2
      MUST both be configured to act as a\n   distributed L3 gateway for the ES in
      order to use a distributed\n   gateway.  RB1 and RB2 each learn the ES's IP
      address through the\n   ARP/ND process, and then they announce the IP address
      to the TRILL\n   campus independently.  The remote ingress RBridge will generate
      an IP\n   routing entry corresponding to the IP address with two IP next hops\n
      \  of RB1 and RB2.  When the ingress RBridge receives inter-subnet\n   traffic
      from a local access network, the ingress RBridge selects RB1\n   or RB2 as the
      IP next hop based on least cost or, if costs are equal,\n   the local load-balancing
      algorithm.  The traffic will then be\n   transmitted to the selected next-hop
      destination RB1 or RB2 through\n   the TRILL campus.\n"
    title: 5.3.  Active-Active Access
  - contents:
    - "5.4.  Data Traffic Forwarding Process\n   After ES1, connected by L2 in VLAN-x,
      acquires its gateway's MAC, it\n   can start inter-subnet data traffic transmission
      to ES2 in VLAN-y.\n   When the edge RBridge attached to ES1 receives inter-subnet
      traffic\n   from ES1, that RBridge performs L2 header termination; then, using\n
      \  the local VRF corresponding to VLAN-x, it performs the IP routing\n   process
      in that VRF.\n   If destination ES2 is attached to the same edge RBridge, the
      traffic\n   will be locally forwarded to ES2 by that RBridge.  Compared to the\n
      \  centralized gateway solution, the forwarding path is optimal, and a\n   traffic
      detour through the centralized gateway is avoided.\n   If ES2 is attached to
      a remote edge RBridge, the remote edge RBridge\n   is the IP next hop, and the
      inter-subnet traffic is forwarded to the\n   IP next hop through TRILL encapsulation.
      \ If there are multiple\n   equal-cost shortest paths between the ingress RBridge
      and the egress\n   RBridge, all these paths can be used for inter-subnet traffic\n
      \  forwarding, so load-spreading can be achieved for inter-subnet\n   traffic.\n
      \  When the remote RBridge receives the inter-subnet TRILL-encapsulated\n   traffic,
      the RBridge decapsulates these TRILL packets and checks the\n   Inner.MacDA.
      \ If that MAC address is the local gateway MAC\n   corresponding to the inner
      label (VLAN or FGL), the inner label will\n   be used to find the corresponding
      local VRF; the IP routing process\n   in that VRF will then be performed, and
      the traffic will be locally\n   forwarded to destination ES2.\n   In summary,
      this solution avoids traffic detours through a central\n   gateway.  Both inter-subnet
      and intra-subnet traffic can be forwarded\n   along pair-wise shortest paths,
      and network bandwidth is conserved.\n"
    title: 5.4.  Data Traffic Forwarding Process
  title: 5.  Distributed Gateway Solution Details
- contents:
  - "6.  Distributed Layer 3 Gateway Process Example\n   This section gives a detailed
    description of a distributed L3 gateway\n   solution example for IPv4 and IPv6.\n
    \  In Figure 3, RB1 and RB2 support the distribution gateway function,\n   ES1
    connects to RB1, and ES2 connects to RB2.  ES1 and ES2 belong to\n   Tenant1 but
    are in different subnets.\n                     ---------             ---------\n
    \                    |  RB3  |             |  RB4  |\n                     ---------
    \            ---------\n                     #   *                     #  *\n
    \                    #   **************************\n                     ###########################
    \ *\n                     #                            *\n                     #
    \                           *\n                     #                            *\n
    \                    ---------              ---------\n                     |
    \ RB1  |              |  RB2  |\n                     ---------              ---------\n
    \                       |                       |\n                      -----
    \                  -----\n                      |ES1|                   |ES2|\n
    \                     -----                   -----\n                  Figure
    3: Distributed Gateway Scenario\n   For IPv4, the IP address, VLAN, and subnet
    information of ES1 and ES2\n   are as follows:\n    +----+----------+------------------+------------------+----------+\n
    \   | ES | Tenant   |   IP Address     |  Subnet          |  VLAN    |\n    +----+----------+------------------+------------------+----------+\n
    \   | ES1| Tenant1  |   192.0.2.2      |  192.0.2.0/24    |   10     |\n    +----+----------+------------------+------------------+----------+\n
    \   | ES2| Tenant1  |   198.51.100.2   |  198.51.100.0/24 |   20     |\n    +----+----------+------------------+------------------+----------+\n
    \                      Figure 4: IPv4 ES Information\n   For IPv6, the IP address,
    VLAN, and subnet information of ES1 and ES2\n   are as follows:\n    +----+----------+------------------+------------------+----------+\n
    \   | ES | Tenant   | IP Address       | Subnet           |  VLAN    |\n    +----+----------+------------------+------------------+----------+\n
    \   | ES1| Tenant1  | 2001:db8:0:1::2  |2001:db8:0:1::0/64|   10     |\n    +----+----------+------------------+------------------+----------+\n
    \   | ES2| Tenant1  | 2001:db8:0:2::2  |2001:db8:0:2::0/64|   20     |\n    +----+----------+------------------+------------------+----------+\n
    \                      Figure 5: IPv6 ES Information\n   The nickname, VRF, tenant
    Label, and tenant gateway MAC for Tenant1\n   on RB1 and RB2 are as follows:\n
    \   +----+---------+-----------+-------+--------------+--------------+\n    |
    RB | Nickname|  Tenant   | VRF   | Tenant Label |  Gateway MAC |\n    +----+---------+-----------+-------+--------------+--------------+\n
    \   | RB1|  nick1  |  Tenant1  | VRF1  |    100       |    MAC1      |\n    +----+---------+-----------+-------+--------------+--------------+\n
    \   | RB2|  nick2  |  Tenant1  | VRF2  |    100       |    MAC2      |\n    +----+---------+-----------+-------+--------------+--------------+\n
    \                      Figure 6: RBridge Information\n"
  - contents:
    - "6.1.  Control-Plane Process\n   RB1 advertises the following local routing
      information to the TRILL\n   campus:\n                  Tenant ID: 1\n                  Tenant
      gateway MAC: MAC1\n                  Tenant Label for Tenant1: VLAN 100\n                  IPv4
      prefix for Tenant1: 192.0.2.0/24\n                  IPv6 prefix for Tenant1:
      2001:db8:0:1::0/64\n   RB2 announces the following local routing information
      to the TRILL\n   campus:\n                  Tenant ID: 1\n                  Tenant
      gateway MAC: MAC2\n                  Tenant Label for Tenant1: VLAN 100\n                  IPv4
      prefix for Tenant1: 198.51.100.0/24\n                  IPv6 prefix for Tenant1:
      2001:db8:0:2::0/64\n   Relying on the routing information from RB2, remote routing
      entries\n   on RB1 are generated as follows:\n     +------------------+-------------+--------------+----------------+\n
      \    |  Prefix/Mask     | Inner.MacDA | Inner VLAN   | Egress Nickname|\n     +------------------+-------------+--------------+----------------+\n
      \    |198.51.100.0/24   |    MAC2     |    100       |     nick2      |\n     +------------------+-------------+--------------+----------------+\n
      \    |2001:db8:0:2::0/64|    MAC2     |    100       |     nick2      |\n     +------------------+-------------+--------------+----------------+\n
      \              Figure 7: Tenant1 Remote Routing Table on RB1\n   Similarly,
      relying on the routing information from RB1, remote\n   routing entries on RB2
      are generated as follows:\n     +------------------+-------------+--------------+----------------+\n
      \    |   Prefix/Mask    | Inner.MacDA | Inner VLAN   | Egress Nickname|\n     +------------------+-------------+--------------+----------------+\n
      \    |  192.0.2.0/24    |     MAC1    |    100       |     nick1      |\n     +------------------+-------------+--------------+----------------+\n
      \    |2001:db8:0:1::0/64|     MAC1    |    100       |     nick1      |\n     +------------------+-------------+--------------+----------------+\n
      \              Figure 8: Tenant1 Remote Routing Table on RB2\n"
    title: 6.1.  Control-Plane Process
  - contents:
    - "6.2.  Data-Plane Process\n   Assuming that ES1 sends unicast inter-subnet traffic
      to ES2, the\n   traffic forwarding process is as follows:\n   1. ES1 sends unicast
      inter-subnet traffic to RB1 with RB1's gateway's\n      MAC as the destination
      MAC and the VLAN as VLAN 10.\n   2. Ingress RBridge (RB1) forwarding process:\n
      \     RB1 checks the destination MAC.  If the destination MAC equals the\n      local
      gateway MAC, the gateway function will terminate the L2\n      header and perform
      L3 routing.\n      RB1 looks up IP routing table information by destination
      IP and\n      Tenant ID to get IP next-hop information, which includes the\n
      \     egress RBridge's gateway MAC (MAC2), tenant Label (VLAN 100), and\n      egress
      nickname (nick2).  Using this information, RB1 will perform\n      inner Ethernet
      header encapsulation and TRILL encapsulation.  RB1\n      will use MAC2 as the
      Inner.MacDA, MAC1 (RB1's own gateway MAC) as\n      the Inner.MacSA, VLAN 100
      as the Inner.VLAN, nick2 as the egress\n      nickname, and nick1 as the ingress
      nickname.\n      RB1 looks up TRILL forwarding information by egress nickname
      and\n      sends the traffic to the TRILL next hop as per [RFC6325].  The\n
      \     traffic will be sent to RB3 or RB4 as a result of load-balancing.\n   Assuming
      that the traffic is forwarded to RB3, the following occurs:\n   3. Transit RBridge
      (RB3) forwarding process:\n      RB3 looks up TRILL forwarding information by
      egress nickname and\n      forwards the traffic to RB2 as per [RFC6325].\n   4.
      Egress RBridge forwarding process:\n      As the egress nickname is RB2's own
      nickname, RB2 performs TRILL\n      decapsulation.  It then checks the Inner.MacDA
      and, because that\n      MAC is equal to the local gateway MAC, performs inner
      Ethernet\n      header termination.  Using the inner VLAN, RB2 finds the local\n
      \     corresponding VRF and looks up the packet's destination IP address\n      in
      the VRF's IP routing table.  The traffic is then locally\n      forwarded to
      ES2 with VLAN 20.\n"
    title: 6.2.  Data-Plane Process
  title: 6.  Distributed Layer 3 Gateway Process Example
- contents:
  - "7.  TRILL Protocol Extensions\n   If an edge RBridge RB1 participates in the
    distributed gateway\n   function, it announces its tenant gateway MAC and tenant
    Data Label\n   to the TRILL campus through the tenant Label and gateway MAC\n
    \  APPsub-TLV.  It should announce its local IPv4 and IPv6 prefixes\n   through
    the IPv4 Prefix APPsub-TLV and the IPv6 Prefix APPsub-TLV,\n   respectively.  If
    RB1 has multiple nicknames, it can announce\n   one nickname for use by the distributed
    gateway, by using the\n   NickFlags APPsub-TLV with the SE flag set to 1.\n   The
    remote ingress RBridges belonging to the same routing domain use\n   this information
    to generate IP routing entries in that routing\n   domain.  These RBridges use
    the nickname, tenant gateway MAC, and\n   tenant Label of RB1 to perform inter-subnet
    TRILL encapsulation when\n   they receive inter-subnet traffic from a local ES.
    \ The nickname is\n   used as the egress nickname, the tenant gateway MAC is used
    as the\n   Inner.MacDA, and the tenant Data Label is used as the Inner.Label.\n
    \  The following APPsub-TLVs MUST be included in a TRILL GENINFO TLV in\n   E-L1FS
    FS-LSPs [RFC7780].\n"
  - contents:
    - "7.1.  The Tenant Label and Gateway MAC APPsub-TLV\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |   Type                        | (2 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |   Length                      | (2 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                     Tenant ID   (4 bytes)                     |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    | Resv1 |     Label1            | (2 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    | Resv2 |     Label2            | (2 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+....-+-+-+-+-+-+-+-+-+\n
      \    |            Tenant Gateway MAC   (6 bytes)                     |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+....-+-+-+-+-+-+-+-+-+\n
      \    o  Type: Set to the TENANT-GWMAC-LABEL sub-TLV type (7).  2 bytes,\n        because
      this APPsub-TLV appears in an extended TLV [RFC7356].\n     o  Length: If the
      Label1 field is used to represent a VLAN, the\n        value of the Length field
      is 12.  If the Label1 and Label2\n        fields are used to represent an FGL,
      the value of the\n        Length field is 14.\n     o  Tenant ID: This identifies
      a Tenant ID unique across the TRILL\n        campus.\n     o  Resv1: 4 bits
      that MUST be sent as zero and ignored on receipt.\n     o  Label1: If the value
      of the Length field is 12, it identifies a\n        tenant Label corresponding
      to a VLAN ID.  If the value of the\n        Length field is 14, it identifies
      the higher 12 bits of a tenant\n        Label corresponding to an FGL.\n     o
      \ Resv2: 4 bits that MUST be sent as zero and ignored on receipt.\n        Only
      present if the Length field is 14.\n     o  Label2: This field has the lower
      12 bits of the tenant Label\n        corresponding to an FGL.  Only present
      if the Length field\n        is 14.\n     o  Tenant Gateway MAC: This identifies
      the local gateway MAC\n        corresponding to the Tenant ID.  The remote ingress
      RBridges use\n        the gateway MAC as the Inner.MacDA.  The advertising TRILL\n
      \       RBridge uses the gateway MAC to differentiate L2 intra-subnet\n        traffic
      and L3 inter-subnet traffic in the egress direction.\n"
    title: 7.1.  The Tenant Label and Gateway MAC APPsub-TLV
  - contents:
    - "7.2.  The SE Flag in the NickFlags APPsub-TLV\n   The NickFlags APPsub-TLV
      is specified in [RFC7780], where the IN flag\n   is described.  The SE Flag
      is assigned as follows:\n               +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+\n
      \              |   Nickname                                    |\n               +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+\n
      \              |IN|SE|         RESV                            |\n               +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+\n
      \                               NICKFLAG RECORD\n   o  SE: If the SE flag is
      set to 1, it indicates that the advertising\n      RBridge suggests that the
      Nickname SHOULD be used as the\n      Inter-Subnet Egress nickname for inter-subnet
      traffic forwarding.\n      If the SE flag is set to 0, that Nickname SHOULD
      NOT be used for\n      that purpose.  The SE flag is ignored if the NickFlags
      APPsub-TLV\n      is advertised by an RBridge that does not own the Nickname.\n"
    title: 7.2.  The SE Flag in the NickFlags APPsub-TLV
  - contents:
    - "7.3.  The IPv4 Prefix APPsub-TLV\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |   Type                        |                    (2 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |   Total Length                |                    (2 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |                     Tenant ID                    | (4 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |PrefixLength(1)|                                    (1 byte)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |                     Prefix (1)                   | (variable)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |     .....     |                                    (1 byte)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |                    .....                         | (variable)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |PrefixLength(N)|                                    (1 byte)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |                     Prefix (N)                   | (variable)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    o  Type: Set to the IPV4-PREFIX sub-TLV type (8).  2 bytes, because\n        this
      APPsub-TLV appears in an extended TLV [RFC7356].\n     o  Total Length: This
      2-byte unsigned integer indicates the total\n        length of the Tenant ID,
      Prefix Length, and Prefix fields,\n        in octets.  A value of 0 indicates
      that no IPv4 prefix is being\n        advertised.\n     o  Tenant ID: This identifies
      a Tenant ID unique across the TRILL\n        campus.\n     o  Prefix Length:
      The Prefix Length field indicates the length,\n        in bits, of the IPv4
      address prefix.  A length of 0 (i.e., the\n        prefix itself is 0 octets)
      indicates a prefix that matches all\n        IPv4 addresses.\n     o  Prefix:
      The Prefix field contains an IPv4 address prefix,\n        followed by enough
      trailing bits to make the end of the field\n        fall on an octet boundary.
      \ Note that the value of the trailing\n        bits is irrelevant.  For example,
      if the Prefix Length is 12,\n        indicating 12 bits, then the Prefix is
      2 octets and the\n        low-order 4 bits of the Prefix are irrelevant.\n"
    title: 7.3.  The IPv4 Prefix APPsub-TLV
  - contents:
    - "7.4.  The IPv6 Prefix APPsub-TLV\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |   Type                        |                    (2 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |   Total Length                |                    (2 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |                     Tenant ID                    | (4 bytes)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |PrefixLength(1)|                                    (1 byte)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |                     Prefix (1)                   | (variable)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |     .....       |                                  (1 byte)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |                    .....                         | (variable)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |PrefixLength(N)|                                    (1 byte)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    |                     Prefix (N)                   | (variable)\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...-+-+-+-+-+-+-+-+\n
      \    o  Type: Set to the IPV6-PREFIX sub-TLV type (9).  2 bytes, because\n        this
      APPsub-TLV appears in an extended TLV [RFC7356].\n     o  Total Length: This
      2-byte unsigned integer indicates the total\n        length of the Tenant ID,
      Prefix Length, and Prefix fields,\n        in octets.  A value of 0 indicates
      that no IPv6 prefix is being\n        advertised.\n     o  Tenant ID: This identifies
      a Tenant ID unique across the TRILL\n        campus.\n     o  Prefix Length:
      The Prefix Length field indicates the length,\n        in bits, of the IPv6
      address prefix.  A length of 0 (i.e., the\n        prefix itself is 0 octets)
      indicates a prefix that matches all\n        IPv6 addresses.\n     o  Prefix:
      The Prefix field contains an IPv6 address prefix,\n        followed by enough
      trailing bits to make the end of the field\n        fall on an octet boundary.
      \ Note that the value of the trailing\n        bits is irrelevant.  For example,
      if the Prefix Length is 100,\n        indicating 100 bits, then the Prefix is
      13 octets and the\n        low-order 4 bits of the Prefix are irrelevant.\n"
    title: 7.4.  The IPv6 Prefix APPsub-TLV
  title: 7.  TRILL Protocol Extensions
- contents:
  - "8.  Security Considerations\n   Correct configuration of the participating edge
    RBridges is important\n   to assure that data is not delivered to the wrong tenant,
    as such\n   incorrect delivery would violate security constraints.  IS-IS\n   security
    [RFC5310] can be used to secure the information advertised\n   by the edge RBridges
    in LSPs and FS-LSPs.\n   To avoid the mishandling of data in flight, see Section
    5.2 for\n   constraints on the reuse of a tenant Label and on tenant gateway MAC\n
    \  changes.  Selecting tenant Labels and IDs in a pseudorandom fashion\n   [RFC4086]
    can make it more difficult for an adversary to guess a\n   tenant Label or ID
    that is in use.\n   Particularly sensitive data should be encrypted end-to-end
    --\n   that is, from the source ES to the destination ES.  Since the TRILL\n   campus
    is, for the most part, transparent to ES traffic, such ESs are\n   free to use
    whatever end-to-end security protocol they would like.\n   For general TRILL security
    considerations, see [RFC6325].\n"
  title: 8.  Security Considerations
- contents:
  - "9.  Management Considerations\n   The configuration at each RBridge to support
    the distributed L3\n   gateway feature is visible, via the link-state database,
    to all other\n   RBridges in the campus.  Operations, Administration, and Maintenance\n
    \  (OAM) facilities for TRILL are primarily specified in [RFC7455]\n   and [RFC7456].\n"
  title: 9.  Management Considerations
- contents:
  - "10.  IANA Considerations\n   IANA has assigned three APPsub-TLV type numbers
    that are lower than\n   255 in the \"TRILL APPsub-TLV Types under IS-IS TLV 251
    Application\n   Identifier 1\" registry.  The registry has been updated as follows:\n
    \        Type         Name            Reference\n         ----   ------------------
    \  -------------\n          7     TENANT-GWMAC-LABEL   this document\n          8
    \    IPV4-PREFIX          this document\n          9     IPV6-PREFIX          this
    document\n   IANA has assigned a flag bit in the NickFlags APPsub-TLV as described\n
    \  in Section 7.2 and updated the \"NickFlags Bits\" registry, created by\n   [RFC7780],
    as follows:\n          Bit   Mnemonic      Description        Reference\n         -----
    \ --------  -------------------   -------------\n           1       SE     Inter-Subnet
    Egress   this document\n"
  title: 10.  IANA Considerations
- contents:
  - '11.  References

    '
  - contents:
    - "11.1.  Normative References\n   [IS-IS]    International Organization for Standardization,\n
      \             \"Intermediate System to Intermediate System intra-domain\n              routeing
      information exchange protocol for use in\n              conjunction with the
      protocol for providing the\n              connectionless-mode network service
      (ISO 8473)\",\n              ISO Standard 10589, 2002.\n   [RFC2119]  Bradner,
      S., \"Key words for use in RFCs to Indicate\n              Requirement Levels\",
      BCP 14, RFC 2119,\n              DOI 10.17487/RFC2119, March 1997,\n              <http://www.rfc-editor.org/info/rfc2119>.\n
      \  [RFC6325]  Perlman, R., Eastlake 3rd, D., Dutt, D., Gai, S., and A.\n              Ghanwani,
      \"Routing Bridges (RBridges): Base Protocol\n              Specification\",
      RFC 6325, DOI 10.17487/RFC6325, July 2011,\n              <http://www.rfc-editor.org/info/rfc6325>.\n
      \  [RFC7172]  Eastlake 3rd, D., Zhang, M., Agarwal, P., Perlman, R., and\n              D.
      Dutt, \"Transparent Interconnection of Lots of Links\n              (TRILL):
      Fine-Grained Labeling\", RFC 7172,\n              DOI 10.17487/RFC7172, May
      2014,\n              <http://www.rfc-editor.org/info/rfc7172>.\n   [RFC7176]
      \ Eastlake 3rd, D., Senevirathne, T., Ghanwani, A., Dutt,\n              D.,
      and A. Banerjee, \"Transparent Interconnection of Lots\n              of Links
      (TRILL) Use of IS-IS\", RFC 7176,\n              DOI 10.17487/RFC7176, May 2014,\n
      \             <http://www.rfc-editor.org/info/rfc7176>.\n   [RFC7356]  Ginsberg,
      L., Previdi, S., and Y. Yang, \"IS-IS Flooding\n              Scope Link State
      PDUs (LSPs)\", RFC 7356,\n              DOI 10.17487/RFC7356, September 2014,\n
      \             <http://www.rfc-editor.org/info/rfc7356>.\n   [RFC7780]  Eastlake
      3rd, D., Zhang, M., Perlman, R., Banerjee, A.,\n              Ghanwani, A.,
      and S. Gupta, \"Transparent Interconnection\n              of Lots of Links
      (TRILL): Clarifications, Corrections, and\n              Updates\", RFC 7780,
      DOI 10.17487/RFC7780, February 2016,\n              <http://www.rfc-editor.org/info/rfc7780>.\n"
    title: 11.1.  Normative References
  - contents:
    - "11.2.  Informative References\n   [RFC826]   Plummer, D., \"Ethernet Address
      Resolution Protocol: Or\n              Converting Network Protocol Addresses
      to 48.bit Ethernet\n              Address for Transmission on Ethernet Hardware\",
      STD 37,\n              RFC 826, DOI 10.17487/RFC0826, November 1982,\n              <http://www.rfc-editor.org/info/rfc826>.\n
      \  [RFC4086]  Eastlake 3rd, D., Schiller, J., and S. Crocker,\n              \"Randomness
      Requirements for Security\", BCP 106, RFC 4086,\n              DOI 10.17487/RFC4086,
      June 2005,\n              <http://www.rfc-editor.org/info/rfc4086>.\n   [RFC4861]
      \ Narten, T., Nordmark, E., Simpson, W., and H. Soliman,\n              \"Neighbor
      Discovery for IP version 6 (IPv6)\", RFC 4861,\n              DOI 10.17487/RFC4861,
      September 2007,\n              <http://www.rfc-editor.org/info/rfc4861>.\n   [RFC5310]
      \ Bhatia, M., Manral, V., Li, T., Atkinson, R., White, R.,\n              and
      M. Fanto, \"IS-IS Generic Cryptographic\n              Authentication\", RFC
      5310, DOI 10.17487/RFC5310,\n              February 2009, <http://www.rfc-editor.org/info/rfc5310>.\n
      \  [RFC7379]  Li, Y., Hao, W., Perlman, R., Hudson, J., and H. Zhai,\n              \"Problem
      Statement and Goals for Active-Active Connection\n              at the Transparent
      Interconnection of Lots of Links\n              (TRILL) Edge\", RFC 7379, DOI
      10.17487/RFC7379,\n              October 2014, <http://www.rfc-editor.org/info/rfc7379>.\n
      \  [RFC7455]  Senevirathne, T., Finn, N., Salam, S., Kumar, D., Eastlake\n              3rd,
      D., Aldrin, S., and Y. Li, \"Transparent\n              Interconnection of Lots
      of Links (TRILL): Fault\n              Management\", RFC 7455, DOI 10.17487/RFC7455,
      March 2015,\n              <http://www.rfc-editor.org/info/rfc7455>.\n   [RFC7456]
      \ Mizrahi, T., Senevirathne, T., Salam, S., Kumar, D., and\n              D.
      Eastlake 3rd, \"Loss and Delay Measurement in\n              Transparent Interconnection
      of Lots of Links (TRILL)\",\n              RFC 7456, DOI 10.17487/RFC7456, March
      2015,\n              <http://www.rfc-editor.org/info/rfc7456>.\n"
    title: 11.2.  Informative References
  title: 11.  References
- contents:
  - "Acknowledgments\n   The authors wish to acknowledge the important contributions
    of Donald\n   Eastlake, Gayle Noble, Mohammed Umair, Susan Hares, Guangrui Wu,\n
    \  Zhenbin Li, Zhibo Hu, Liang Xia, Scott Bradner, Stephen Farrell,\n   Shawn
    Emery, Ben Campbell, Russ White, Kathleen Moriarty, Suresh\n   Krishnan, Mirja
    Kuehlewind, and Francis Dupont.\n"
  title: Acknowledgments
- contents:
  - "Authors' Addresses\n   Weiguo Hao\n   Huawei Technologies\n   101 Software Avenue\n
    \  Nanjing  210012\n   China\n   Phone: +86-25-56623144\n   Email: haoweiguo@huawei.com\n
    \  Yizhou Li\n   Huawei Technologies\n   101 Software Avenue\n   Nanjing  210012\n
    \  China\n   Phone: +86-25-56625375\n   Email: liyizhou@huawei.com\n   Andrew
    Qu\n   MediaTec\n   Email: laodulaodu@gmail.com\n   Muhammad Durrani\n   Equinix
    Inc.\n   Email: mdurrani@equinix.com\n   Ponkarthick Sivamurugan\n   IP Infusion\n
    \  RMZ Centennial\n   Mahadevapura Post\n   Bangalore  560048\n   Email: Ponkarthick.sivamurugan@ipinfusion.com\n"
  title: Authors' Addresses
