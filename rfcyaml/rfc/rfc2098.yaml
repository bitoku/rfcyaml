- title: __initial_text__
  contents:
  - '      Toshiba''s Router Architecture Extensions for ATM : Overview

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This memo provides information for the Internet community.\
    \  This memo\n   does not specify an Internet standard of any kind.  Distribution\
    \ of\n   this memo is unlimited.\n"
- title: Abstract
  contents:
  - "Abstract\n   This memo describes a new internetworking architecture which makes\n\
    \   better use of the property of ATM.  IP datagrams are transferred\n   along\
    \ hop-by-hop path via routers, but datagram assembly/disassembly\n   and IP header\
    \ processing are not necessarily carried out at\n   individual routers in the\
    \ proposed architecture.  A concept of \"Cell\n   Switch Router (CSR)\" is introduced\
    \ as a new internetworking\n   equipment, which has ATM cell switching capabilities\
    \ in addition to\n   conventional IP datagram forwarding.  Proposed architecture\
    \ can\n   provide applications with high-throughput and low-latency ATM pipes\n\
    \   while retaining current router-based internetworking concept.  It\n   also\
    \ provides applications with specific QoS/bandwidth by cooperating\n   with internetworking\
    \ level resource reservation protocols such as\n   RSVP.\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The Internet is growing both in its size and its traffic\
    \ volume. In\n   addition, recent applications often require guaranteed bandwidth\
    \ and\n   QoS rather than best effort.  Such changes make the current hop-by-\n\
    \   hop datagram forwarding paradigm inadequate, then accelerate\n   investigations\
    \ on new internetworking architectures.\n   Roughly two distinct approaches can\
    \ be seen as possible solutions;\n   the use of ATM to convey IP datagrams, and\
    \ the revision of IP to\n   support flow concept and resource reservation.  Integration\
    \ or\n   interworking of these approaches will be necessary to provide end\n \
    \  hosts with high throughput and QoS guaranteed internetworking\n   services\
    \ over any datalink platforms as well as ATM.\n   New internetworking architecture\
    \ proposed in this draft is based on\n   \"Cell Switch Router (CSR)\" which has\
    \ the following properties.\n    - It makes the best use of ATM's property while\
    \ retaining current\n      router-based internetworking and routing architecture.\n\
    \    - It takes into account interoperability with future IP that\n      supports\
    \ flow concept and resource reservations.\n   Section 2 of this draft explains\
    \ background and motivations of our\n   proposal.  Section 3 describes an overview\
    \ of the proposed\n   internetworking architecture and its several remarkable\
    \ features.\n   Section 4 discusses control architectures for CSR, which will\
    \ need to\n   be further investigated.\n"
- title: 2.  Background and Motivation
  contents:
  - "2.  Background and Motivation\n   It is considered that the current hop-by-hop\
    \ best effort datagram\n   forwarding paradigm will not be adequate to support\
    \ future large\n   scale Internet which accommodates huge amount of traffic with\
    \ certain\n   QoS requirements.  Two major schools of investigations can be seen\
    \ in\n   IETF whose main purpose is to improve ability of the Internet with\n\
    \   regard to its throughput and QoS.  One is to utilize ATM technology\n   as\
    \ much as possible, and the other is to introduce the concept of\n   resource\
    \ reservation and flow into IP.\n"
- title: 1) Utilization of ATM
  contents:
  - "1) Utilization of ATM\n   Although basic properties of ATM; necessity of connection\
    \ setup,\n   necessity of traffic contract, etc.; is not necessarily suited to\n\
    \   conventional IP datagram transmission, its excellent throughput and\n   delay\
    \ characteristics let us to investigate the realization of IP\n   datagram transmission\
    \ over ATM.\n   A typical internetworking architecture is the \"Classical IP Model\"\
    \n   [RFC1577].  This model allows direct ATM connectivities only between\n  \
    \ nodes that share the same IP address prefix.  IP datagrams should\n   traverse\
    \ routers whenever they go beyond IP subnet boundaries even\n   though their source\
    \ and destination are accommodated in the same ATM\n   cloud.  Although an ATMARP\
    \ is introduced which is not based on legacy\n   datalink broadcast but on centralized\
    \ ATMARP servers, this model does\n   not require drastic changes to the legacy\
    \ internetworking\n   architectures with regard to the IP datagram forwarding\
    \ process.\n   This model still has problems of limited throughput and large\n\
    \   latency, compared with the ability of ATM, due to IP header\n   processing\
    \ at every router.  It will become more critical when\n   multimedia applications\
    \ that require much larger bandwidth and lower\n   latency become dominant in\
    \ the near future.\n   Another internetworking architecture is \"NHRP (Next Hop\
    \ Resolution\n   Protocol) Model\" [NHRP09].  This model aims at resolving throughput\n\
    \   and latency problems in the Classical IP Model and making the best\n   use\
    \ of ATM.  ATM connections can be directly established from an\n   ingress point\
    \ to an egress point of an ATM cloud even when they do\n   not share the same\
    \ IP address prefix.  In order to enable it, the\n   Next Hop Server [KAT95] is\
    \ introduced which can find an egress point\n   of the ATM cloud nearest to the\
    \ given destination and resolves its\n   ATM address.  A sort of query/response\
    \ protocols between the\n   server(s) and clients and possibly server and server\
    \ are specified.\n   After the ATM address of a desired egress point is resolved,\
    \ the\n   client establishes a direct ATM connection to that point through ATM\n\
    \   signaling procedures [ATM3.1].  Once a direct ATM connection has been\n  \
    \ set up through this procedure, IP datagrams do not have to experience\n   hop-by-hop\
    \ IP processing but can be transmitted over the direct ATM\n   connection.  Therefore,\
    \ high throughput and low latency\n   communications become possible even if they\
    \ go beyond IP subnet\n   boundaries.  It should be noted that the provision of\
    \ such direct ATM\n   connections does not mean disappearance of legacy routers\
    \ which\n   interconnect distinct ATM-based IP subnets.  For example, hop-by-hop\n\
    \   IP datagram forwarding function would still be required in the\n   following\
    \ cases:\n   - When you want to transmit IP datagrams before direct ATM connection\n\
    \     from an ingress point to an egress point of the ATM cloud is\n     established\n\
    \   - When you neither require a certain QoS nor transmit large amount of\n  \
    \   IP datagrams for some communication\n   - When the direct ATM connection is\
    \ not allowed by security or policy\n     reasons\n"
- title: 2) IP level resource reservation and flow support
  contents:
  - "2) IP level resource reservation and flow support\n   Apart from investigation\
    \ on specific datalink technology such as ATM,\n   resource reservation technologies\
    \ for desired IP level flows have\n   been studied and are still under discussion.\
    \  Their typical examples\n   are RSVP [RSVP13] and STII [RFC1819].\n   RSVP itself\
    \ is not a connection oriented technology since datagrams\n   can be transmitted\
    \ regardless of the result of the resource\n   reservation process.  After a resource\
    \ reservation process from a\n   receiver (or receivers) to a sender (or senders)\
    \ is successfully\n   completed, RSVP-capable routers along the path of the flow\
    \ reserve\n   their resources for datagram forwarding according to the requested\n\
    \   flow spec.\n   STII is regarded as a connection oriented IP which requires\n\
    \   connection setup process from a sender to a receiver (or receivers)\n   before\
    \ transmitting datagrams.  STII-capable routers along the path\n   of the requested\
    \ connection reserve their resources for datagram\n   forwarding according to\
    \ the flow spec.\n   Neither RSVP nor STII restrict underlying datalink networks\
    \ since\n   their primary purpose is to let routers provide each IP flow with\n\
    \   desired forwarding quality (by controlling their datagram scheduling\n   rules).\
    \  Since various datalink networks will coexist as well as ATM\n   in the future,\
    \ these IP level resource reservation technologies would\n   be necessary in order\
    \ to provide end-to-end IP flow with desired\n   bandwidth and QoS.\n   aking\
    \ this background into consideration, we should be aware of\n   several issues\
    \ which motivate our proposal.\n   - As of the time of writing, the ATM specific\
    \ internetworking\n     architecture proposed does not take into account interoperability\n\
    \     with IP level resource reservation or connection setup protocols.\n    \
    \ In particular, operating RSVP in the NHRP-based ATM cloud seems to\n     require\
    \ much effort since RSVP is a soft-state receiver-oriented\n     protocol with\
    \ multicast capability as a default, while ATM with\n     NHRP is a hard-state\
    \ sender-oriented protocol which does not\n     support multicast yet.\n   - Although\
    \ RSVP or STII-based routers will provide each IP flow with\n     a desired bandwidth\
    \ and QoS, they have some native throughput\n     limitations due to the processor-based\
    \ IP forwarding mechanism\n     compared with the hardware switching mechanism\
    \ of ATM.\n   The main objective of our proposal is to resolve the above issues.\n\
    \   The proposed internetworking architecture makes the best use of the\n   property\
    \ of ATM by extending legacy routers to handle future IP\n   features such as\
    \ flow support and resource reservation with the help\n   of ATM's cell switching\
    \ capabilities.\n"
- title: 3.  Internetworking Architecture Based On the Cell Switch Router (CSR)
  contents:
  - '3.  Internetworking Architecture Based On the Cell Switch Router (CSR)

    '
- title: 3.1  Overview
  contents:
  - "3.1  Overview\n   The Cell Switch Router (CSR) is a key network element of the\
    \ proposed\n   internetworking architecture.  The CSR provides cell switching\n\
    \   functionality in addition to conventional IP datagram forwarding.\n   Communications\
    \ with high throughput and low latency, that are native\n   properties of ATM,\
    \ become possible by using this cell switching\n   functionality even when the\
    \ communications pass through IP subnetwork\n   boundaries.  In an ATM internet\
    \ composed of CSRs, VPI/VCI-based cell\n   switching which bypasses datagram assembly/disassembly\
    \ and IP header\n   processing is possible at every CSR for communications which\
    \ lend\n   themselves to such (e.g., communications which require certain amount\n\
    \   of bandwidth and QoS), while conventional hop-by-hop datagram\n   forwarding\
    \ based on the IP header is also possible at every CSR for\n   other conventional\
    \ communications.\n   By using such cell-level switching capabilities, the CSR\
    \ is able to\n   concatenate incoming and outgoing ATM VCs, although the concatenation\n\
    \   in this case is controlled outside the ATM cloud (ATM's control/\n   management-plane)\
    \ unlike conventional ATM switch nodes.  That is, the\n   CSR is attached to ATM\
    \ networks via an ATM-UNI instead of NNI.  By\n   carrying out such VPI/VCI concatenations\
    \ at multiple CSRs\n   consecutively, ATM level connectivity composed of multiple\
    \ ATM VCs,\n   each of which connects adjacent CSRs (or CSR and hosts/routers),\
    \ can\n   be provided.  We call such an ATM pipe \"ATM Bypass-pipe\" to\n   differentiate\
    \ it from \"ATM VCC (VC connection)\" provided by a single\n   ATM datalink cloud\
    \ through ATM signaling.\n   Example network configurations based on CSRs are\
    \ shown in figure 1.\n   An ATM datalink network may be a large cloud which accommodates\n\
    \   multiple IP subnets X, Y and Z.  Or several distinct ATM datalinks\n   may\
    \ accommodate single IP subnet X, Y and Z respectively.  The latter\n   configuration\
    \ would be straightforward in discussing the CSR, but the\n   CSR is also applicable\
    \ to the former configuration as well.  In\n   addition, the CSR would be applicable\
    \ as a router which interconnects\n   multiple NHRP-based ATM clouds.\n   Two\
    \ different kinds of ATM VCs are defined between adjacent CSRs or\n   between\
    \ CSR and ATM-attached hosts/routers.\n"
- title: 1) Default-VC
  contents:
  - "1) Default-VC\n   It is a general purpose VC used by any communications which\
    \ select\n   conventional hop-by-hop IP routed paths.  All incoming cells received\n\
    \   from this VC are assembled to IP datagrams and handled based on their\n  \
    \ IP headers.  VCs set up in the Classical IP Model are classified into\n   this\
    \ category.\n"
- title: 2) Dedicated-VC
  contents:
  - "2) Dedicated-VC\n   It is used by specific communications (IP flows) which are\
    \ specified\n   by, for example, any combination of the destination IP address/port,\n\
    \   the source IP address/port or IPv6 flow label.  It can be\n   concatenated\
    \ with other Dedicated-VCs which accommodate the same IP\n   flow as it, and can\
    \ constitute an ATM Bypass-pipe for those IP flows.\n   Ingress/egress nodes of\
    \ the Bypass-pipe can be either CSRs or ATM-\n   attached routers/hosts both of\
    \ which speak a Bypass-pipe control\n   protocol.  (we call that \"Bypass-capable\
    \ nodes\") On the other hand,\n   intermediate nodes of the Bypass-pipe should\
    \ be CSRs since they need\n   to have cell switching capabilities as well as to\
    \ speak the Bypass-\n   pipe control protocol.\n   The route for a Bypass-pipe\
    \ follows IP routing information in each\n   CSR.  In figure 1, IP datagrams from\
    \ a source host or router X.1 to a\n   destination host or router Z.1 are transferred\
    \ over the route X.1 ->\n   CSR1 -> CSR2 -> Z.1 regardless of whether the communication\
    \ is on a\n   hop-by-hop basis or Bypass-pipe basis.  Routes for individual\n\
    \   Dedicated-VCs which constitutes the Bypass-pipe X.1 --> Z.1 (X.1 ->\n   CSR1,\
    \ CSR1 -> CSR2, CSR2 -> Z.1) would be determined based on ATM\n   routing protocols\
    \ such as PNNI [PNNI1.0], and would be independent of\n   IP level routing.\n\
    \   An example of IP datagram transmission mechanism is as follows.\n   o The\
    \ host/router X.1 checks an identifier of each IP datagram,\n     which may be\
    \ the \"destination IP address (prefix)\",\n     \"source/destination IP address\
    \ (prefix) pair\", \"destination IP\n     address and port\", \"source IP address\
    \ and Flow label (in IPv6)\",\n     and so on.  Based on either of those identifiers,\
    \ it determines\n     over which VC the datagram should be transmitted.\n   o\
    \ The CSR1/2 checks the VPI/VCI value of each incoming cell.  When\n     the mapping\
    \ from the incoming interface/VPI/VCI to outgoing\n     interface/VPI/VCI is found\
    \ in an ATM routing table, it is directly\n     forwarded to the specified interface\
    \ through an ATM switch module.\n     When the mapping in not found in the ATM\
    \ routing table (or the\n     table shows an IP module as an output interface),\
    \ the cell is\n     assembled to an IP datagram and then forwarded to an appropriate\n\
    \     outgoing interface/VPI/VCI based on an identifier of the datagram.\n   \
    \     IP subnet X           IP subnet Y          IP subnet Z\n  <--------------------->\
    \ <-----------------> <--------------------->\n  +-------+ Default  +-------+\
    \ Default   +-------+ Default  +-------+\n  |       |     -VC  | CSR 1 |     -VC\
    \   | CSR 2 |     -VC  |       |\n  | Host +=============+   +===============+\
    \   +=============+ Host |\n  |  X.1 +-------------+++++---------------+++++-------------+\
    \  Z.1 |\n  |      +-------------+++++---------------+++++-------------+     \
    \ |\n  |      +-------------+++++---------------+++++-------------+      |\n \
    \ |       |Dedicated |       | Dedicated |       |Dedicated |       |\n  +-------+\
    \     -VCs +-------+      -VCs +-------+     -VCs +-------+\n         <--------------------------------------------------->\n\
    \                             Bypass-pipe\n         Figure 1  Internetworking\
    \ Architecture based on CSR\n"
- title: 3.2  Features
  contents:
  - "3.2  Features\n   The main feature of the CSR-based internetworking architecture\
    \ is the\n   same as that of the NHRP-based architecture in the sense that they\n\
    \   both provide direct ATM level connectivity beyond IP subnet\n   boundaries.\
    \  There are, however, several notable differences in the\n   CSR-based architecture\
    \ compared with the NHRP-based one as follows.\n"
- title: 1) Relationship between IP routing and ATM routing
  contents:
  - "1) Relationship between IP routing and ATM routing\n   In the NHRP model, an\
    \ egress point of the ATM network is first\n   determined in the next hop resolution\
    \ phase based on IP level routing\n   information.  Then the actual route for\
    \ an ATM-VC to the obtained\n   egress point is determined in the ATM connection\
    \ setup phase based on\n   ATM level routing information.  Both kinds of routing\
    \ information\n   would be calculated according to factors such as network topology\
    \ and\n   available bandwidth for the large ATM cloud.  The ATM routing will be\n\
    \   based on PNNI phase1 [PNNI1.0] while the IP routing will be based on\n   OSPF,\
    \ BGP, IS-IS, etc.  We need to manage two different routing\n   protocols over\
    \ the large ATM cloud until Integtrated-PNNI [IPNNI96]\n   which takes both ATM\
    \ level metric and IP level metric into account\n   will be phased in in the future.\n\
    \   In the CSR model, IP level routing determines an egress point of the\n   ATM\
    \ cloud as well as determines inter-subnet level path to the point\n   that shows\
    \ which CSRs it should pass through.  ATM level routing\n   determines an intra-subnet\
    \ level path for ATM-VCs (both Dedicated-VC\n   and Default-VC) only between adjacent\
    \ nodes (CSRs or ATM-attached\n   hosts/routers).  Since the roles of routing\
    \ are hierarchically\n   subdivided into inter-subnet level (router level) and\
    \ intra-subnet\n   level (ATM SW level), ATM routing does not have to operate\
    \ all over\n   the ATM cloud but only in individual IP subnets independent from\
    \ each\n   other.  This will decrease the amount of information for ATM routing\n\
    \   protocol handling.  But an end-to-end ATM path may not be optimal\n   compared\
    \ with the NHRP model since the path should go through routers\n   at subnet boundaries\
    \ in the CSR model.\n"
- title: 2) Dynamic routing and redundancy support
  contents:
  - "2) Dynamic routing and redundancy support\n   A CSR-based network can dynamically\
    \ change routes for Bypass-pipes\n   when related IP level routing information\
    \ changes.  Bypass-pipes\n   related to the routing changes do not have to be\
    \ torn down nor\n   established from scratch since intermediate CSRs related to\
    \ IP\n   routing changes can follow them and change routes for related\n   Bypass-pipes\
    \ by themselves.\n   The same things apply when some error or outage happens in\
    \ any ATM\n   nodes/links/routers on the route of a Bypass-pipe.  CSRs that have\n\
    \   noticed such errors or outages would change routes for related\n   Bypass-pipes\
    \ by themselves.\n"
- title: 3) Interoperability with IP level resource reservation protocols in
  contents:
  - "3) Interoperability with IP level resource reservation protocols in\n   multicast\
    \ environments\n   As current NHRP specification assumes application of NHRP to\
    \ unicast\n   environments only, multicast IP flows should still be carried based\n\
    \   on a hop-by-hop manner with multicast routers.  In addition,\n   realization\
    \ of IP level resource reservation protocols such as RSVP\n   over NHRP environments\
    \ requires further investigation.\n   The CSR-based internetworking architecture\
    \ which keeps subnet-by-\n   subnet internetworking with regard to any control\
    \ protocol sequence\n   can provide multicast Bypass-pipes without requiring any\n\
    \   modifications in IP multicast over ATM [IPMC96] or multicast routing\n   techniques.\
    \  In addition, since the CSR can handle RSVP messages\n   which are transmitted\
    \ in a hop-by-hop manner, it can provide Bypass-\n   pipes which satisfy QoS requirements\
    \ by the cooperation of the RSVP\n   and the Bypass-pipe control protocol.\n"
- title: 4.  Control Architecture for CSR
  contents:
  - "4.  Control Architecture for CSR\n   Several issues with regard to a control\
    \ architecture for the CSR are\n   discussed in this section.\n"
- title: 4.1  Network Reference Model
  contents:
  - "4.1  Network Reference Model\n   In order to help understanding discussions in\
    \ this section, the\n   following network reference model is assumed.  Source\
    \ hosts S1, S2,\n   and destination hosts D1, D2 are attached to Ethernets, while\
    \ S3 and\n   D3 are attached to the ATM.  Routers R1 and R5 are attached to\n\
    \   Ethernets only, while R2, R3 and R4 are attached to the ATM.  The ATM\n  \
    \ datalink for subnet #3 and subnet #4 can either be physically\n   separated\
    \ datalinks or be the same datalink.  In other words, R3 can\n   be either one-port\
    \ or multi-port router.\n      Ether    Ether        ATM          ATM        Ether\
    \    Ether\n        |        |        +-----+      +-----+        |        |\n\
    \        |        |        |     |      |     |        |        |\n    S1--| \
    \  S2---|   S3---|     |      |     |---D3   |---D2   |--D1\n        |       \
    \ |        |     |      |     |        |        |\n        |---R1---|---R2---|\
    \     |--R3--|     |---R4---|---R5---|\n        |        |        |     |    \
    \  |     |        |        |\n        |        |        +-----+      +-----+ \
    \       |        |\n     subnet   subnet      subnet       subnet      subnet\
    \   subnet\n       #1       #2          #3           #4          #5       #6\n\
    \                   Figure 2  Network Reference Model\n   Bypass-pipes can be\
    \ configured [S3 or R2]-->R3-->[D3 or R4].  That\n   means that S3, D3, R2, R3\
    \ and R4 need to speak Bypass-pipe control\n   protocol, and means that R3 needs\
    \ to be the CSR.  We use term\n   \"Bypass-capable nodes\" for hosts/routers which\
    \ can speak Bypass-pipe\n   control protocol but are not necessarily CSRs.\n \
    \  As shown in this reference model, Bypass-pipe can be configured from\n   host\
    \ to host (S3-->R3-->D3), router to host (R2-->R3-->D3), host to\n   router (S3-->R3-->R4),\
    \ and router to router (R2-->R3-->R4).\n"
- title: 4.2  Possible Use of Bypass-pipe
  contents:
  - "4.2  Possible Use of Bypass-pipe\n   Possible use (or purposes) of Bypass-pipe\
    \ provided by CSRs, in other\n   words, possible triggers that initiate Bypass-pipe\
    \ setup procedure,\n   is discussed in this subsection.\n   Following two purposes\
    \ for Bypass-pipe setup are assumed at present;\n"
- title: a) Provision of low latency path
  contents:
  - "a) Provision of low latency path\n   This indicates cases in which end hosts\
    \ or routers initiate a\n   Bypass-pipe setup procedure when they will transmit\
    \ large amount of\n   datagrams toward a specific destination.  For instance,\n\
    \   - End hosts or routers initiate Bypass-pipe setup procedures based\n     on\
    \ the measurement of IP datagrams transmitted toward a certain\n     destination.\n\
    \   - End hosts or routers initiate Bypass-pipe setup procedures when\n     it\
    \ detects datagrams with certain higher layer protocols such as\n     ftp, nntp,\
    \ http, etc.\n   Other triggers may be possible depending on the policy in each\n\
    \   network.  In any case, the purpose of Bypass-pipe setup in each of\n   these\
    \ cases is to reduce IP processing burden at intermediate routers\n   as well\
    \ as to provide a communication path with low latency for burst\n   data transfer,\
    \ rather than to provide end host applications with\n   specific bandwidth/QoS.\n\
    \   There would be no rule for determining bandwidth for such kinds of\n   Bypass-pipes\
    \ since no explicit information about bandwidth/QoS\n   requirement by end hosts\
    \ is available without IP-level resource\n   reservation protocols such as RSVP.\
    \  Using UBR VCs as components of\n   the Bypass-pipe would be the easiest choice\
    \ although there is no\n   guarantees for cell loss quality, while using other\
    \ services such as\n   CBR/VBR/ABR with an adequate parameter tuning would be\
    \ possible.\n"
- title: b) Provision of specific bandwidth/QoS requested by hosts
  contents:
  - "b) Provision of specific bandwidth/QoS requested by hosts\n   This indicates\
    \ cases in which routers or end hosts initiate a\n   Bypass-pipe setup procedure\
    \ by triggers related to IP-level\n   bandwidth/QoS request from end hosts.  The\
    \ \"resource management\n   entity\" in the host or router, which has received\
    \ bandwidth/QoS\n   requests from applications or adjacent nodes may choose to\n\
    \   accommodate the requested IP flow to an existing VC or choose to\n   allocate\
    \ a new Dedicated-VC for the requested IP flow.  Selecting the\n   latter choice\
    \ at each router can correspond to the trigger for\n   constituting a Bypass-pipe.\
    \  When both an incoming VC and an outgoing\n   VC (or VCs) are dedicated to the\
    \ same IP flow(s), those VCs can be\n   concatenated at the CSR (ATM cut-through)\
    \ to constitute a Bypass-\n   pipe.  Bandwidth for the Bypass-pipe (namely, individual\
    \ VCs\n   constituting the Bypass-pipe) in this case would be determined based\n\
    \   on the bandwidth/QoS requirements by the end host which is conveyed\n   by,\
    \ e.g., RSVP messages.  The ATM service classes; e.g., CBR/VBR/ABR;\n   that would\
    \ be selected depends on the IP-level service classes\n   requested by the end\
    \ hosts.\n   Bypass-pipe provision for the purpose of b) will surely be beneficial\n\
    \   in the near future when related IP-level resource reservation\n   protocol\
    \ will become available as well as when definitions of\n   individual service\
    \ classes and flow specs offered to applications\n   become clear.  On the other\
    \ hand, Bypass-pipe setup for the purpose\n   of a) may be beneficial right now\
    \ since it does not require\n   availability of IP-level resource reservation\
    \ protocols.  In that\n   sense, a) can be regarded as a kind of short-term use\
    \ while b) is a\n   long-term use.\n"
- title: 4.3  Variations of Bypass-pipe Control Architecture
  contents:
  - "4.3  Variations of Bypass-pipe Control Architecture\n   A number of variations\
    \ regarding Bypass-pipe control architecture are\n   introduced.  Items which\
    \ are related to architectural variations are;\n    o Ways of providing Dedicated-VCs\n\
    \    o Channels for Bypass-pipe control message transfer\n    o Bypass-pipe control\
    \ procedures\n   Each of these items are discussed below.\n"
- title: 4.3.1  Ways of Providing Dedicated-VCs
  contents:
  - "4.3.1  Ways of Providing Dedicated-VCs\n   There are roughly three alternatives\
    \ regarding the way of providing\n   Dedicated-VCs in individual IP subnets as\
    \ components of a Bypass-\n   pipe.\n"
- title: a) On-demand SVC setup
  contents:
  - "a) On-demand SVC setup\n   Dedicated-VCs are set up in individual IP subnets\
    \ each time you want\n   to set up a Bypass-pipe through the ATM signaling procedure.\n"
- title: b) Picking up one from a bunch of (semi-)PVCs
  contents:
  - "b) Picking up one from a bunch of (semi-)PVCs\n   Several VCs are set up beforehand\
    \ between CSR and CSR, or CSR and\n   other ATM-attached nodes (hosts/router)\
    \ in each IP subnet. Unused VC\n   is picked up as a Dedicated-VC from these PVCs\
    \ in each IP subnet when\n   a Bypass-pipe is set up.\n"
- title: c) Picking up one VCI in PVP/SVP
  contents:
  - "c) Picking up one VCI in PVP/SVP\n   PVPs or SVPs are set up between CSR and\
    \ CSR, or CSR and other ATM-\n   attached nodes (hosts/routers) in each IP subnet.\
    \  PVPs would be set\n   up as a router/host initialization procedure, while SVPs,\
    \ on the\n   other hand, would be set up through ATM signaling when the first\
    \ VC\n   (either Default- or Dedicated-) setup request is initiated by either\n\
    \   of some peer nodes.  Then, Unused VCI value is picked up as a\n   Dedicated-VC\
    \ in the PVP/SVP in each IP subnet when a Bypass-pipe is\n   set up.  The SVP\
    \ can be released through ATM signaling when no VCI\n   value is in active state.\n\
    \   The best choice will be a) with regard to efficient network resource\n   usage.\
    \  However, you may go through three steps, ATMARP (for unicast\n   [RFC1577]\
    \ or multicast [IPMC96] in each IP subnet), SVC setup (in\n   each IP subnet)\
    \ and exchange of Bypass-pipe control message in this\n   case.  Whether a) is\
    \ practical choice or not will depend on whether\n   you can allow larger Bypass-pipe\
    \ setup time due to three-step\n   procedure mentioned above, or whether you can\
    \ send datagrams over\n   Default-VCs in a hop-by-hop manner while waiting for\
    \ the Bypass-pipe\n   set up.\n   In the case of b) or c), the issue of Bypass-pipe\
    \ setup time will be\n   improved since SVC setup step can be skipped.  In b),\
    \ each node (CSR\n   or ATM-attached host/router) should specify some traffic\
    \ descriptors\n   even for unused VCs, and the ATM datalink should reserve its\
    \ desired\n   resource (such as VCI value and bandwidth) for them.  In addition,\n\
    \   the ATM datalink may have to carry out UPC functions for those unused\n  \
    \ VCs.  Such burden would be reduced when you use UBR-PVCs and set peak\n   cell\
    \ rate for each of them equal to link rate, but bandwidth/QoS for\n   the Bypass-pipe\
    \ is not provided in this case.  In c), on the other\n   hand, traffic descriptors\
    \ which should be specified by each node for\n   the ATM datalink is not each\
    \ VC's but VP's only.  Resource\n   reservations for individual VCs will be carried\
    \ out not as a\n   functionality of the ATM datalink but of each CSR or ATM-attached\n\
    \   host/router if necessary.  A functionality which need to be provided\n   by\
    \ the ATM datalink is control of VPs' bandwidth only such as UPC and\n   dynamic\
    \ bandwidth negotiation if it would be widely available.\n"
- title: 4.3.2  Channels for Bypass-pipe Control Message Transfer
  contents:
  - "4.3.2  Channels for Bypass-pipe Control Message Transfer\n   There are several\
    \ alternatives regarding the channels for managing\n   (setting up, releasing,\
    \ and possibly changing the route of) a\n   Bypass-pipe.  This subsection explains\
    \ these alternatives and\n   discusses their properties.\n   Three alternatives\
    \ are discussed, Inband control message, Outband\n   control message, and use\
    \ of ATM signaling.\n"
- title: i) Inband Control Message
  contents:
  - "i) Inband Control Message\n   When setting up a Bypass-pipe, control messages\
    \ are transmitted over\n   a Dedicated-VC which will eventually be used as a component\
    \ of the\n   Bypass-pipe.  These messages are handled at each CSR, and similar\n\
    \   messages are transmitted to the next-hop node over a Dedicated-VC\n   along\
    \ the selected route (based on IP routing table).  Unlike outband\n   message\
    \ protocol described in ii), each message does not have to\n   indicate a Dedicated-VC\
    \ which will be used since the message itself\n   is carried over \"that\" VC.\n\
    \   The inband control message can be either \"datagram dedicated for\n   Bypass-pipe\
    \ control\" or \"actual IP datagram\" sent by user\n   application.  Actual IP\
    \ datagrams can be transmitted over Bypass-pipe\n   after it has been set up in\
    \ the former case.  In the latter case, on\n   the other hand, the first (or several)\
    \ IP datagram(s) received from\n   an unused Dedicated-VC are analyzed at IP level\
    \ and transmitted\n   toward adequate next hop over an unused Dedicated-VC.  Then\
    \ incoming\n   Dedicated-VC and outgoing Dedicated-VC are concatenated to construct\n\
    \   a Bypass-pipe.\n   In inband control, Bypass-pipe control messages transmitted\
    \ after a\n   Bypass-pipe has been set up cannot be identified at intermediate\
    \ CSRs\n   since those messages are forwarded at cell level there.  As a\n   possible\
    \ solution for this issue, intermediate CSRs can identify\n   Bypass-pipe control\
    \ messages by marking cell headers, e.g., PTI bit\n   which indicates F5 OAM cell.\
    \  With regard to Bypass-pipe release,\n   explicit release message may not be\
    \ necessary if individual CSRs\n   administer the amount of traffic over each\
    \ Dedicated-VC and deletes\n   concatenation information for an inactive Bypass-pipe\
    \ with their own\n   decision.\n"
- title: ii) Outband Control Message
  contents:
  - "ii) Outband Control Message\n   When a Bypass-pipe is set up or released, control\
    \ messages are\n   transmitted over VCs which are different from Dedicated-VCs\
    \ used as\n   components of the Bypass-pipe.  Unlike inband message protocol\n\
    \   described in i), each message has to indicate which Dedicated-VCs the\n  \
    \ message would like to control.  Therefore, an identifier that\n   uniquely discriminates\
    \ a VC, which is not a VPI/VCI that is not\n   identical at both endpoints of\
    \ the VC, need to be defined and be\n   given at VC initiation phase.  However,\
    \ an issue of control message\n   transmission after a Bypass-pipe has been set\
    \ up in inband case does\n   not exist.\n   Four alternatives are possible regarding\
    \ how to convey Bypass-pipe\n   control messages hop-by-hop over ATM datalink\
    \ networks.\n   1) Defines VC for Bypass-pipe control messages only.\n   2) Uses\
    \ Default-VC and discriminates Bypass-pipe control messages\n      from user datagrams\
    \ by an LLC/SANP value in RFC1483 encapsulation.\n   3) Uses Default-VC and discriminates\
    \ Bypass-pipe control messages\n      from user datagrams by a protocol field\
    \ value in IP header.\n   4) Uses Default-VC and discriminates Bypass-pipe control\
    \ messages\n      from user datagrams by a port ID in the UDP frame.\n   When\
    \ we take into account interoperability with Bypass-incapable\n   routers, 1)\
    \ will not be a good choice.  Whether we select 2) or 3) 4)\n   depends on whether\
    \ we should consider multiprotocol rather than IP\n   only.\n   In the case of\
    \ IP multicast, point-to-multipoint VCs in individual\n   subnets are concatenated\
    \ at CSRs consecutively in order to constitute\n   end-to-end multicast tree.\
    \  Above four alternatives may require the\n   same number of point-to-multipoint\
    \ Defalut-VCs as the number of\n   requested point-to-multipoint Dedicated-VCs\
    \ in multicast case.  The\n   fifth alternative which can reduce the necessary\
    \ number of VCs to\n   convey control messages in a multicast environment is;\n\
    \   5) Defines point-to-multipoint VC whose leaves are members of\n      multicast\
    \ group 224.0.0.1.  All nodes which are members of at\n      least one of active\
    \ multicast group would become leaves of this\n      point-to-multipoint VC.\n\
    \   Each upstream node may become a root of the point-to-multipoint VC,\n   or\
    \ a sort of multicast server to which each upstream node transmits\n   cells over\
    \ a point-to-point VC may become a root of that.  In any\n   case, Bypass-pipe\
    \ control messages for every multicast group are\n   transmitted to all nodes\
    \ which are members of either of the group.\n   When a downstream node has received\
    \ control messages which are not\n   related to a multicast group it belongs,\
    \ it should discard them by\n   referring to a destination group address on their\
    \ IP header.\n   Donwstream node would still need to use point-to-point VC to\
    \ send\n   control messages toward upstream.\n"
- title: iii)  Use of ATM Signaling Message
  contents:
  - "iii)  Use of ATM Signaling Message\n   Supposing that ATM signaling messages\
    \ can convey IP addresses (and\n   possibly port IDs) of source and destination,\
    \ it may be possible that\n   ATM signaling messages be used as Bypass-pipe control\
    \ messages also.\n   In that case, an ATM connection setup message indicates a\
    \ setup of a\n   Dedicated-VC to an ATM address of a desirable next-hop IP node,\
    \ and\n   also indicates a setup of a Bypass-pipe to an IP address (and\n   possibly\
    \ port ID) of a target destination node.  Information elements\n   for the Dedicated-VC\
    \ setup (ATM address of a next-hop node,\n   bandwidth, QoS, etc.) are handled\
    \ at ATM nodes, while information\n   elements for the Bypass-pipe setup (source\
    \ and destination IP\n   addresses, possibly their port IDs, or flow label for\
    \ IPv6, etc.) are\n   transparently transferred to the next-hop IP node.  The\
    \ next-hop IP\n   node accepts Dedicated-VC setup and handles such IP level information\n\
    \   elements.\n   ATM signaling messages can be transferred from receiver to sender\
    \ as\n   well as sender to receiver when you set zero Forward Cell Rate and\n\
    \   non-zero Backward Cell Rate as an ATM traffic descriptor information\n   element\
    \ in unicast case, or when Leaf Initiated Join capabilities\n   will become available\
    \ in multicast case.\n   Issues in this method are,\n    - Information elements\
    \ which specify IP level (and port level)\n      information need to be defined,\
    \ e.g., B-HLI or B-UUI, as an ATM\n      signaling specification.\n    - It would\
    \ be difficult to support soft-state Bypass-pipe control\n      which transmits\
    \ control messages periodically since ATM signaling\n      is a hard-state protocol.\n"
- title: 4.3.3  Bypass-pipe Control Procedures
  contents:
  - "4.3.3  Bypass-pipe Control Procedures\n   This subsection discusses several items\
    \ with regard to actual\n   procedures for Bypass-pipe control.\n"
- title: a) Distributed trigger vs. Centralized (restricted) trigger
  contents:
  - "a) Distributed trigger vs. Centralized (restricted) trigger\n   The first item\
    \ to be discussed is whether the functionality of\n   detecting a trigger of Dedicated-VC/Bypass-pipe\
    \ control is\n   distributed to all the nodes (including CSRs and hosts/edge devices)\n\
    \   or restricted to specific nodes.\n   In the case of the distributed trigger,\
    \ every node is regarded as\n   having a capability of detecting a trigger of\
    \ Bypass-pipe setup or\n   termination.  For example, every node detects datagrams\
    \ for ftp, and\n   sets up (or fetches) a Dedicated-VC individually to construct\
    \ a\n   Bypass-pipe.  After setting up or fetching the Dedicated-VCs,\n   messages\
    \ which informs (or requests) the transmission of the IP flow\n   over the Dedicated-VC\
    \ are exchanged between adjacent nodes.  That\n   enables peer nodes to share\
    \ the same knowledge about the mapping\n   relationship between the IP flow and\
    \ the Dedicated-VC.  There is no\n   end-to-end message transmission in the Bypass-pipe\
    \ control procedure\n   itself, but transmission between adjacent nodes only.\n\
    \   In the case of the centralized (or restricted) trigger, capability of\n  \
    \ detecting a trigger of Bypass-pipe setup or termination is restricted\n   to\
    \ nodes which are located at \"the boundary of the CSR-cloud\".  The\n   boundary\
    \ of the CSR-cloud signifies, for individual IP flows, the\n   node which is the\
    \ first-hop or the last-hop CSR-capable node.  For\n   example, a node which detects\
    \ datagrams for ftp can initiate Bypass-\n   pipe setup procedure only when its\
    \ previous hop is non-ATM or CSR-\n   incapable.  In this case, Bypass-pipe control\
    \ messages are originated\n   at the boundary of the CSR-cloud, and forwarded\
    \ hop-by-hop toward\n   another side of the boundary, which is similar to ATM\
    \ signaling\n   messages.  The semantics of the messages may be the request of\
    \ end-\n   to-end Bypass-pipe setup as well as notification or request of\n  \
    \ mapping relationship between the IP flow and the Dedicated-VC.\n"
- title: b) Upstream-initiated control vs. Downstream-initiated control
  contents:
  - "b) Upstream-initiated control vs. Downstream-initiated control\n   The second\
    \ item to be discussed is whether the setup of a Dedicated-\n   VC and the control\
    \ procedure for constructing a Bypass-pipe are\n   initiated by upstream side\
    \ or downstream side.\n   In the case of the upstream-initiated control, the upstream\
    \ node\n   takes the initiative when setting up a Dedicated-VC for a specific\
    \ IP\n   flow and creating the mapping relationship between the IP flow and\n\
    \   the Dedicated-VC.  For example, a CSR which detects datagrams for ftp\n  \
    \ sets up (or fetches) a Dedicated-VC toward its downstream neighbor\n   and notifies\
    \ its downstream neighbor that it will transmit a specific\n   IP flow over the\
    \ Dedicated-VC.  This means that the downstream node\n   is requested to receive\
    \ datagrams from the Dedicated-VC.\n   In the case of the downstream-initiated\
    \ control, the downstream node\n   takes the initiative when setting up a Dedicated-VC\
    \ for a specific IP\n   flow and creating the mapping relationship between the\
    \ IP flow and\n   the Dedicated-VC.  For example, a CSR which detects datagrams\
    \ for ftp\n   sets up (or fetches) a Dedicated-VC toward its upstream neighbor\
    \ and\n   requests its upstream neighbor to transmit a specific IP flow over\n\
    \   the Dedicated-VC.  This means that the upstream node is requested to\n   transmit\
    \ the IP flow over the Dedicated-VC.\n"
- title: c) Hard-state management vs. Soft-state management
  contents:
  - "c) Hard-state management vs. Soft-state management\n   The third item to be discussed\
    \ is whether the control (setup,\n   maintain, and release) of the Bypass-pipe\
    \ is based on hard-state or\n   soft-state.\n   In hard-state management, individual\
    \ nodes transmit Bypass-pipe\n   control messages only when they want to notify\
    \ or request any change\n   in their neighbors' state.  They should wait for an\
    \ acknowledgement\n   of the message before they change their internal state.\
    \  For example,\n   after setting up a Bypass-pipe, it is maintained until either\
    \ of a\n   peer nodes transmits a message to release the Bypass-pipe.\n   In soft-state\
    \ management, individual nodes periodically transmit\n   Bypass-pipe control messages\
    \ in order to maintain their neighbors'\n   state.  They do not have to wait for\
    \ an acknowledgement of the\n   message before they changes its internal state.\
    \  For example, even\n   after setting up a Bypass-pipe, either of a peer nodes\
    \ is required to\n   periodically transmit refresh messages to its neighbor in\
    \ order to\n   maintain the Bypass-pipe.\n"
- title: 5.  Security Considerations
  contents:
  - "5.  Security Considerations\n   Security issues are not discussed in this memo.\n"
- title: 6.  Summary
  contents:
  - "6.  Summary\n   Basic concept of Cell Switch Router (CSR) are clarified and control\n\
    \   architecture for CSR is discussed.  A number of methods to control\n   Bypass-pipe\
    \ will be possible each of which has its own advantages and\n   disadvantages.\
    \  Further investigation and discussion will be\n   necessary to design control\
    \ protocol which may depend on the\n   requirements by users.\n"
- title: 7.  References
  contents:
  - "7.  References\n   [IPMC96] Armitage, G., \"Support for Multicast over UNI 3.0/3.1\
    \ based\n   ATM Networks\", RFC 2022, November 1996.\n   [ATM3.1] The ATM-Forum,\
    \ \"ATM User-Network Interface Specification,\n   v.3.1\", Sept. 1994.\n   [RSVP13]\
    \ Braden, R., et al., \"Resource ReSerVation Protocol (RSVP),\n   Version 1 Functional\
    \ Specification\", Work in Progress.\n   [IPNNI96] R. Callon, et al., \"Issues\
    \ and Approaches for Integrated\n   PNNI\", The ATM Forum Contribution No. 96-0355,\
    \ April 1996.\n   [NHRP09]  Luciani, J., et al., \"NBMA Next Hop Resolution Protocol\n\
    \   (NHRP)\", Work in Progress.\n   [PNNI1.0] The ATM-Forum, \"P-NNI Specification\
    \ Version 1.0\", March\n   1996.\n   [RFC1483] Heinanen, J., \"Multiprotocol Encapsulation\
    \ over ATM\n   Adaptation Layer 5\", RFC 1483, July 1993.\n   [RFC1577] Laubach,\
    \ M., \"Classical IP and ARP over ATM\", RFC 1577,\n   October 1993.\n   [RFC1819]\
    \ Delgrossi, L, and L. Berger, \"Internet STream Protocol\n   Version 2 (STII)\
    \ Protocol Specification Version ST2+\", RFC 1819,\n   August 1995.\n"
- title: 8.  Authors' Addresses
  contents:
  - "8.  Authors' Addresses\n   Yasuhiro Katsube\n   R&D Center, Toshiba\n   1 Komukai\
    \ Toshiba-cho, Saiwai-ku, Kawasaki 210\n   Japan\n   Phone : +81-44-549-2238\n\
    \   EMail : katsube@isl.rdc.toshiba.co.jp\n   Ken-ichi Nagami\n   R&D Center,\
    \ Toshiba\n   1 Komukai Toshiba-cho, Saiwai-ku, Kawasaki 210\n   Japan\n   Phone\
    \ : +81-44-549-2238\n   EMail : nagami@isl.rdc.toshiba.co.jp\n   Hiroshi Esaki\n\
    \   R&D Center, Toshiba\n   1 Komukai Toshiba-cho, Saiwai-ku, Kawasaki 210\n \
    \  Japan\n   Phone : +81-44-549-2238\n   EMail : hiroshi@isl.rdc.toshiba.co.jp\n"
