- contents:
  - '       Content Negotiation for Messaging Services based on Email

    '
  title: __initial_text__
- contents:
  - "Status of this Memo\n   This document specifies an Internet standards track protocol
    for the\n   Internet community, and requests discussion and suggestions for\n
    \  improvements.  Please refer to the current edition of the \"Internet\n   Official
    Protocol Standards\" (STD 1) for the standardization state\n   and status of this
    protocol.  Distribution of this memo is unlimited.\n"
  title: Status of this Memo
- contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2002).  All Rights Reserved.\n"
  title: Copyright Notice
- contents:
  - "Abstract\n   This memo describes a content negotiation mechanism for facsimile,\n
    \  voice and other messaging services that use Internet email.\n   Services such
    as facsimile and voice messaging need to cope with new\n   message content formats,
    yet need to ensure that the content of any\n   given message is renderable by
    the receiving agent.  The mechanism\n   described here aims to meet these needs
    in a fashion that is fully\n   compatible with the current behaviour and expectations
    of Internet\n   email.\n"
  title: Abstract
- contents:
  - "Table of Contents\n   1. Introduction...................................................
    3\n     1.1 Structure of this document ................................. 4\n     1.2
    Document terminology and conventions ....................... 4\n        1.2.1
    Terminology............................................ 4\n        1.2.2 Design
    goals........................................... 5\n        1.2.3 Other document
    conventions............................. 5\n   2. Background and goals...........................................
    5\n     2.1 Background ................................................. 5\n        2.1.1
    Fax and email.......................................... 5\n        2.1.2 Current
    facilities in Internet Fax..................... 6\n     2.2 Closing the loop ...........................................
    6\n     2.3 Goals for content negotiation .............................. 8\n   3.
    Framework for content negotiation..............................10\n     3.1 Send
    data with an indication of alternatives ...............11\n        3.1.1 Choice
    of default data format..........................12\n        3.1.2 MDN request
    indicating alternate data formats..........12\n        3.1.3 Information about
    alternative data formats.............13\n     3.2 Receiver options ...........................................14\n
    \       3.2.1 Alternatives not recognized............................14\n        3.2.2
    Alternative not desired................................14\n        3.2.3 Alternative
    preferred..................................14\n     3.3 Send alternative message
    data ..............................16\n     3.4 Confirm receipt of resent message
    data .....................17\n   4. The Content-alternative header.................................18\n
    \  5. The Original-Message-ID message header.........................18\n   6.
    MDN extension for alternative data.............................19\n     6.1 Indicating
    readiness to send alternative data ..............19\n     6.2 Indicating a preference
    for alternative data ...............20\n     6.3 Indicating alternative data is
    no longer available .........21\n     6.4 Indicating loss of original data ...........................22\n
    \    6.5 Automatic sending of MDN responses .........................22\n   7.
    Internet Fax Considerations....................................22\n   8. Examples.......................................................23\n
    \    8.1 Sending enhanced Internet Fax image ........................23\n     8.2
    Internet fax with initial data usable ......................27\n     8.3 Negotiate
    to lower receiver capability .....................28\n     8.4 Sending an alternative
    content type ........................32\n   9. IANA Considerations............................................36\n
    \    9.1 New message headers ........................................36\n     9.2
    MDN extensions .............................................36\n        9.2.1
    Notification option 'Alternative-available'............36\n        9.2.2 Notification
    option 'Alternative-not-available'........36\n        9.2.3 Disposition modifier
    'Alternative-preferred'...........37\n        9.2.4 Disposition modifier 'Original-lost'...................37\n
    \  10. Internationalization considerations...........................37\n   11.
    Security Considerations.......................................37\n   12. Acknowledgements..............................................38\n
    \  13. References....................................................38\n   Appendix
    A: Implementation issues.................................40\n     A.1 Receiver
    state .............................................40\n     A.2 Receiver buffering
    of message data .........................41\n     A.3 Sender state ...............................................42\n
    \    A.4 Timeout of offer of alternatives ...........................42\n     A.5
    Timeout of receiver capabilities ...........................42\n     A.6 Relationship
    to timely delivery ............................43\n     A.7 Ephemeral capabilities
    .....................................43\n     A.8 Situations where MDNs must not
    be auto-generated ...........44\n   Appendix B: Candidates for further enhancements...................44\n
    \  Authors' Addresses................................................45\n   Full
    Copyright Statement..........................................46\n"
  title: Table of Contents
- contents:
  - "1. Introduction\n   This memo describes a mechanism for email based content negotiation\n
    \  which provides an Internet fax facility comparable to that of\n   traditional
    facsimile, which may be used by other messaging services\n   that need similar
    facilities.\n   \"Extended Facsimile using Internet Mail\" [1] specifies the transfer\n
    \  of image data using Internet email protocols.  \"Indicating Supported\n   Media
    Features Using Extensions to DSN and MDN\" [2] describes a\n   mechanism for providing
    the sender with the details of a receiver's\n   capabilities.  The capability
    information thus provided, if stored by\n   the sender, can be used in subsequent
    transfers between the same\n   sender and receiver.\n   Many communications are
    one-off or infrequent transfers between a\n   given sender and receiver, and cannot
    benefit from this \"do better\n   next time\" approach.\n   An alternative facility
    available in email (though not widely\n   implemented) is for the sender to use
    'multipart/alternative' [15] to\n   send a message in several different formats,
    and allow the receiver\n   to choose.  Apart from the obvious drawback of network
    bandwidth use,\n   this approach does not of itself allow the sender to truly
    tailor its\n   message to a given receiver, or to obtain confirmation that any
    of\n   the alternatives sent was usable by the receiver.\n   This memo describes
    a mechanism that allows better-than-baseline data\n   formats to be sent in the
    first communication between a sender and\n   receiver.  The same mechanism can
    also achieve a usable message\n   transfer when the sender has based the initial
    transmission on\n   incorrect information about the receiver's capabilities.  It
    allows\n   the sender of a message to indicate availability of alternative\n   formats,
    and the receiver to indicate that an alternative format\n   should be provided
    to replace the message data originally\n   transmitted.\n   When the sender does
    not have the correct information about a\n   receiver's capabilities, the mechanism
    described here may incur an\n   additional message round trip.  An important goal
    of this mechanism\n   is to allow enough information to be provided to determine
    whether or\n   not the extra round trip is required.\n"
  - contents:
    - "1.1 Structure of this document\n   The main part of this memo addresses the
      following areas:\n   Section 2 describes some of the background, and sets out
      some\n   specific goals that are addressed in this specification.\n   Section
      3 describes the proposed content negotiation framework,\n   indicating the flow
      of information between a sender and receiver.\n   Section 4 contains a detailed
      description of the 'Content-\n   alternative' header that is used to convey
      information about\n   alternative available formats.  This description is intended
      to stand\n   independently of the rest of this specification, with a view to
      being\n   usable in conjunction with other content negotiation protocols.\n
      \  Section 5 describes a new mail message header, 'Original-Message-ID',\n   which
      is used to correlate alternative data sent during negotiation\n   with the original
      message data, and to distinguish the continuation\n   of an old message transaction
      from the start of a new transaction.\n   Section 6 describes extensions to the
      Message Disposition\n   Notification (MDN) framework [4] that support negotiation
      between the\n   communicating parties.\n"
    title: 1.1 Structure of this document
  - contents:
    - '1.2 Document terminology and conventions

      '
    - contents:
      - "1.2.1 Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\",
        \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\",
        \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described
        in RFC 2119 [22].\n   Capability exchange\n      An exchange of information
        between communicating parties\n      indicating the kinds of information they
        can generate or consume.\n   Capability identification\n      Provision of
        information by the a receiving agent that indicates\n      the kinds of message
        data that it can accept for presentation to a\n      user.\n   Content negotiation\n
        \     An exchange of information (negotiation metadata) which leads to\n      selection
        of the appropriate representation (variant) when\n      transferring a data
        resource.\n   Message transaction\n      A sequence of exchanges between a
        message sender and receiver that\n      accomplish the transfer of message
        data.\n   RFC 2703 [17] introduces several other terms related to content\n
        \  negotiation.\n"
      title: 1.2.1 Terminology
    - contents:
      - "1.2.2 Design goals\n   In discussing the goals for content negotiation, {1},
        {2}, {3}\n   notation is used, per RFC 2542, \"Terminology and Goals for Internet\n
        \  Fax\" [3].  The meanings associated with these notations are:\n   {1}   there
        is general agreement that this is a critical\n         characteristic of any
        definition of content negotiation for\n         Internet Fax.\n   {2}   most
        believe that this is an important characteristic of\n         content negotiation
        for Internet Fax.\n   {3}   there is general belief that this is a useful
        feature of\n         content negotiation for Internet Fax, but that other
        factors\n         might override;  a definition that does not provide this\n
        \        element is acceptable.\n"
      title: 1.2.2 Design goals
    - contents:
      - "1.2.3 Other document conventions\n   NOTE:  Comments like this provide additional
        nonessential information\n   about the rationale behind this document.  Such
        information is not\n   needed for building a conformant implementation, but
        may help those\n   who wish to understand the design in greater depth.\n"
      title: 1.2.3 Other document conventions
    title: 1.2 Document terminology and conventions
  title: 1. Introduction
- contents:
  - '2. Background and goals

    '
  - contents:
    - '2.1 Background

      '
    - contents:
      - "2.1.1 Fax and email\n   One of the goals of the work to define a facsimile
        service using\n   Internet mail has been to deliver benefits of the traditional
        Group 3\n   Fax service in an email environment.  Traditional Group 3 Fax
        leans\n   heavily on the idea that an online exchange of information discloses\n
        \  a receiver's capabilities to the sender before any message data is\n   transmitted.\n
        \  By contrast, Internet mail has been developed to operate in a\n   different
        fashion, without any expectation that the sender and\n   receiver will exchange
        information prior to message transfer.  One\n   consequence of this is that
        all mail messages must contain some kind\n   of meaningful message data:  messages
        that are sent simply to elicit\n   information from a receiving message handling
        agent are not generally\n   acceptable in the Internet mail environment.\n
        \  To guarantee some level of interoperability, Group 3 Fax and Internet\n
        \  mail rely on all receivers being able to deal with some baseline\n   format
        (i.e., a basic image format or plain ASCII text,\n   respectively).  The role
        of capability exchange or content\n   negotiation is to permit better-than
        baseline capabilities to be\n   employed where available.\n   One of the challenges
        addressed by this specification is how to adapt\n   the email environment
        to provide a fax-like service.  A sender must\n   not make any a priori assumption
        that the receiver can recognize\n   anything other than a simple email message.
        \ There are some important\n   uses of email that are fundamentally incompatible
        with the fax model\n   of message passing and content negotiation (notably
        mailing lists).\n   So we need to have a way of recognizing when content negotiation
        is\n   possible, without breaking the existing email model.\n"
      title: 2.1.1 Fax and email
    - contents:
      - "2.1.2 Current facilities in Internet Fax\n   \"Extended Facsimile using Internet
        Mail\" [1] provides for a limited\n   provision of receiver capability information
        to the sender of a\n   message, using an extension to Message Disposition
        Notifications\n   [2,4], employing media feature tags [5] and media feature
        expressions\n   [6].\n   This mechanism provides for receiver capabilities
        to be disclosed\n   after a message has been received and processed.  This
        information\n   can be used for subsequent transmissions to the same receiver.
        \ But\n   many communications are one-off messages from a given sender to
        a\n   given receiver, and cannot benefit from this.\n"
      title: 2.1.2 Current facilities in Internet Fax
    title: 2.1 Background
  - contents:
    - "2.2 Closing the loop\n   Classic Internet mail is an \"open loop\" process:
      \ no information is\n   returned back to the point from which the message is
      sent.  This has\n   been unkindly --but accurately-- characterized as \"send
      and pray\",\n   since it lacks confirmation.\n   Sending a message and obtaining
      confirmation that the message has\n   been received is a \"closed loop\" process:
      \ the confirmation sent back\n   to the sender creates a loop around which information
      is passed.\n   Many Internet email agents are not designed to participate in
      a\n   closed loop process, and thus have no responsibility to respond to\n   receipt
      of a message.  Later additions to Internet standards, notably\n   Delivery Service
      Notification [18] and Message Disposition\n   Notification [4], specify means
      for certain confirmation responses to\n   be sent back to the sender, thereby
      closing the loop.  However\n   conformance to these enhancements is optional
      and full deployment is\n   in the future.\n   DSN must be fully implemented
      by the entire infrastructure; further\n   when support is lacking, the message
      is still sent on in open-loop\n   fashion.  Sometimes, transmission and delivery
      should instead be\n   aborted and the fact be reported to the sender.\n   Due
      to privacy considerations for end-users, MDN usage is entirely\n   voluntary.\n
      \  Content negotiation is a closed loop function (for the purposes of\n   this
      proposal -- see section 2.3, item (f)), and requires that the\n   recipient
      of a message make some response to the sender.  Since\n   content negotiation
      must retro-fit a closed-loop function over\n   Internet mail's voluntary and
      high-latency environment, a challenge\n   for content negotiation in email is
      to establish that consenting\n   parties can recognize a closed loop situation,
      and hence recognize\n   their responsibilities to close the loop.\n   Three
      different loops can be identified in a content negotiation:\n              Sender
      \                     Receiver\n                |                             |\n
      \        Initial message ------>------------  v\n                |                             |\n
      \              (1) ------------<--- Request alternative data\n                |
      \                            |\n        Send alternative ------>------------
      (2)\n                |                             |\n               (3) ------------<------
      Confirm receipt\n                                       of usable data\n   (1)
      \  Sender receives acknowledgement that negotiable content has\n         been
      received\n   (2)   Receiver receives confirmation that its request for data
      has\n         been received.\n   (3)   Sender receives confirmation that received
      data is processable,\n         or has been processed.\n   Although the content
      negotiation process is initiated by the sender,\n   it is not established until
      loop (1) is closed with an indication\n   that the receiver desires alternative
      content.\n   If content sent with the original message from the sender is\n
      \  processable by the receiver, and a confirmation is sent, then the\n   entire
      process is reduced to a simple send/confirm loop:\n                  Sender
      \                     Receiver\n                    |                             |\n
      \            Initial message ------>------------  v\n                    |                             |\n
      \                  (3) ------------<------ Confirm receipt\n                                           of
      usable data\n"
    title: 2.2 Closing the loop
  - contents:
    - "2.3 Goals for content negotiation\n   The primary goal {1} is to provide a
      mechanism that allows arbitrary\n   enhanced content features to be used with
      Internet fax systems.  The\n   mechanism should {2} support introduction of
      new features over time,\n   particularly those that are adopted for Group 3
      fax.\n   Further goals are:\n   (a)   Must {1} interwork with existing simple
      mode Internet fax\n         systems.\n   (b)   Must {1} interwork with existing
      email clients.\n         The term \"interwork\" used above means that the mechanism
      must\n         be introduced in a way that may be ignored by existing systems,\n
      \        and systems enhanced to use the negotiation mechanisms will\n         behave
      in a fashion that is expected by existing systems.\n         (I.e., existing
      clients are not expected in any way to\n         participate in or be aware
      of content negotiation.)\n   (c)   Must {1} avoid transmission of \"administrative
      non messages\".\n         (I.e., only messages that contain meaningful content
      for the\n         end user may be sent unless it is known that the receiving\n
      \        system will interpret them, and not attempt to display them.)\n         This
      requirement has been stated very strongly by the email\n         community.\n
      \        This means that a sender must not assume that a receiver can\n         understand
      the capability exchange protocol elements, so must\n         always start by
      sending some meaningful message data.\n   (d)   Avoid {1} multiple renderings
      of a message.  In situations\n         where multiple versions of a message
      are transferred, the\n         receiver must be able to reliably decide on a
      single version to\n         be displayed.\n   (e)   Minimize {2} round trips
      needed to complete a transmission.\n         Ideally {3} every enhanced transmission
      will result in simply\n         sending data that the recipient can process,
      and receiving a\n         confirmation response.\n   (f)   The solution adopted
      should not {3} transmit multiple versions\n         of the same data.  In particular,
      it must not {1} rely on\n         routinely sending multiple instances of the
      same data in a\n         single message.\n         This does not prohibit sending
      multiple versions of the same\n         data, but it must not be a requirement
      to do so.  A sender may\n         choose to send multiple versions together
      (e.g., plain text and\n         some other format), but the capability exchange
      mechanism\n         selected must not depend on such behaviour.\n   (g)   The
      solution adopted should {2} be consistent with and\n         applicable to other
      Internet email based applications; e.g.,\n         regular email, voice messaging,
      unified messaging, etc.\n   (h)   Allow for a graceful recovery from stale cache
      information.  A\n         sender might use historic information to send non-baseline
      data\n         with an initial message.  If this turns out to be unusable by\n
      \        the recipient, it should still be possible {3} for the baseline\n         data,
      or some other acceptable format, to be selected and\n         transferred.\n
      \  (i)   The mechanism defined should {2} operate cleanly in conjunction\n         with
      the mechanisms already defined for extended mode Internet\n         fax (extended
      DSN and MDN [2], etc.).\n   (j)   As much as possible, existing email mechanisms
      should {3} be\n         used rather than inventing new ones.  (It is clear that
      some\n         new mechanisms will be needed, but they should be defined\n         cautiously.)\n
      \  (k)   The mechanism should {2} be implementable in low memory\n         devices.
      \ That is, it should not depend on any party being able\n         to buffer
      arbitrary amounts of message data.\n         (It may not be possible to completely
      satisfy this goal in a\n         sending system.  But if the sender does not
      have enough memory\n         to buffer some given message, it can choose to
      not offer\n         content negotiation.)\n"
    title: 2.3 Goals for content negotiation
  title: 2. Background and goals
- contents:
  - "3. Framework for content negotiation\n   This section starts with an outline
    of the negotiation process, and\n   provides greater detail about each stage in
    following sub-sections.\n   1. Sender sends initial message data with an indication
    of\n      alternative formats available (section 3.1).  Initial data MAY be\n
    \     a baseline or some other guess of what the recipient can handle.\n   2.
    The receiver has three main options:\n      (a)   Does not recognize the optional
    alternative formats, and\n            passively accepts the data as sent (section
    3.2.1).\n      (b)   Does recognize the alternatives offered, and actively\n            accepts
    the data as sent (section 3.2.2).\n      (c)   Recognizes the alternatives offered,
    and determines that it\n            prefers to receive an alternative format.
    \ An MDN response\n            is sent (i) indicating that the original data was
    not\n            processed, and (ii) containing receiver capability\n            information
    so that the sender may select a suitable\n            alternative (section 3.2.3).\n
    \           Note that only recipients named in 'to:', 'cc:' or 'bcc:'\n            headers
    in the original message may request alternative data\n            formats in this
    way.  Recipients not named in the original\n            message headers MUST NOT
    attempt to initiate content\n            negotiation.\n            NOTE: the prohibition
    on initiation of negotiation by\n            recipients other than those explicitly
    addressed is to avoid\n            the sender from having to deal with negotiation
    requests\n            from unexpected parties.\n   3. On receipt of an MDN response
    indicating preference for an\n      alternative data format, the sender MUST select
    and transmit\n      message data matched to the receiver's declared capabilities,
    or\n      send an indication that the receiver's request cannot be honoured.\n
    \     When sending alternative data, the sender suppresses the\n      indication
    that alternative data is available, so the negotiation\n      process cannot loop.\n
    \  4. On receipt of final data from the sender, the receiver sends an\n      MDN
    response indicating acceptance (or otherwise) of the data\n      received.\n         NOTE:
    \ the receiver does not choose the particular data format\n         to be received;
    \ that choice rests with the sender.  We find\n         that this approach is
    simpler than having the receiver choose\n         an alternative, because it builds
    upon existing mechanisms in\n         email, and follows the same pattern as a
    traditional Group 3\n         fax.  Further, it deals with situations where the
    range of\n         alternatives may be difficult to describe.\n         This approach
    is similar to server driven negotiation in HTTP\n         using \"Accept\" headers
    [13].  This is distinct to the agent-\n         driven style of negotiation provided
    for HTTP as part of\n         Transparent Content Negotiation [14], or which might
    be\n         constructed in email using \"multipart/alternative\" and\n         \"message/external-body\"
    MIME types [15].\n"
  - contents:
    - "3.1 Send data with an indication of alternatives\n   A sender that is prepared
      to provide alternative message data formats\n   MUST send the following message
      elements:\n   (a)   a default message data format,\n   (b)   message identification,
      in the form of a Message-ID header.\n   (c)   appropriate 'Content-features'
      header(s) [7] describing the\n         default message data sent,\n   (d)   a
      request for Message Disposition Notification [4],\n   (e)   an indication that
      it is prepared to send different message\n         data, using an 'Alternative-available'
      MDN option field [9],\n         and\n   (f)   an indication of the alternative
      data formats available, in the\n         form of 'Content-alternative' header(s)
      [8].  Note:  more than\n         one Content-alternative' header MAY be specified;
      see section\n         3.1.3 for more information.\n   Having indicated the availability
      of alternative data formats, the\n   sender is expected to hold the necessary
      information for some time,\n   allowing the receiver an opportunity to request
      such data.  But,\n   unless it so indicates (see [9]), the sender is not expected
      to hold\n   this information indefinitely;  the exact length of time such\n
      \  information should be held is not specified here.  Thus, the\n   possibility
      exists that a request for alternative information may\n   arrive too late, and
      the sender will then send an indication that the\n   data is no longer available.
      \ If message transference is being\n   completed within a predetermined time
      interval (e.g., using [21]),\n   then the sender should normally maintain the
      data for at least that\n   period.\n"
    - contents:
      - "3.1.1 Choice of default data format\n   The normal default format is text/plain.
        \ This is the format sent\n   unless the sender has prior knowledge or expectation
        of other content\n   formats supported by the recipient.  Some uses of email
        presume some\n   other default format (e.g. Intenet fax [1] has TIFF profile
        S [11] as\n   its default format;  see section 7 of this document).\n   \"Extended
        Facsimile Using Internet Mail\" [1] and \"Indicating\n   Supported Media Features
        Using Extensions to DSN and MDN\" [2]\n   indicate a possible mechanism for
        a sender to have prior knowledge of\n   receiver capabilities.  This specification
        builds upon the mechanism\n   described there.\n   As always, the sender may
        gather information about the receiver in\n   other ways beyond the scope of
        this document (e.g., a directory\n   service or the suggested RESCAP protocol).\n"
      title: 3.1.1 Choice of default data format
    - contents:
      - "3.1.2 MDN request indicating alternate data formats\n   When a sender is
        indicating preparedness to send alternative message\n   data, it MUST request
        a Message Disposition Notification (MDN) [4].\n   It indicates its readiness
        to send alternative message data by\n   including the MDN option 'Alternative-available'
        [9] with the MDN\n   request.  Presence of this MDN request option simply
        indicates that\n   the sender is prepared to send some different data format
        if it has\n   more accurate or up-to-date information about the receiver's\n
        \  capabilities.  Of itself, this option does not indicate whether the\n   alternatives
        are likely to be better or worse than the default data\n   sent -- that information
        is provided by the \"Content-alternative\"\n   header(s) [8].\n   When using
        the 'Alternative-available' option in an MDN request, the\n   message MUST
        also contain a 'Message-ID:' header with a unique\n   message identifier.\n"
      title: 3.1.2 MDN request indicating alternate data formats
    - contents:
      - "3.1.3 Information about alternative data formats\n   A sender can provide
        information about the alternative message data\n   available by applying one
        or more 'Content-alternative' headers to\n   message body parts for which
        alternative data is available, each\n   indicating media features [5,6] of
        an available alternative.\n   The purpose of this information is to allow
        a receiver to decide\n   whether any of the available alternatives are preferable,
        or likely\n   to be preferable, to the default message data provided.\n   Not
        every available alternative is required to be described in this\n   way, but
        the sender should include enough information to allow a\n   receiver to determine
        whether or not it can expect more useful\n   message data if it chooses to
        indicate a preference for some\n   alternative that matches its capabilities.\n
        \  Alternative formats will often be variations of the content-type\n   originally
        sent.  When different content-types can be provided, they\n   should be indicated
        in a corresponding content-alternative header\n   using the 'type' media feature
        tag [24].  (See example 8.4.)\n      NOTE:  the sender is not necessarily
        expected to describe every\n      single alternative format that is available
        -- indeed, in cases\n      where content is generated on-the-fly rather than
        simply selected\n      from an enumeration of possibilities, this may be infeasible.
        \ The\n      sender is expected to use one or more 'Content-alternative'\n
        \     headers to reasonably indicate the range of alternative formats\n      available.\n
        \     The final format actually sent will always be selected by the\n      sender,
        based on the receiver's capabilities.  The 'Content-\n      alternative' headers
        are provided here simply to allow the\n      receiver to make a reasonable
        decision about whether to request an\n      alternative format that better
        matches its capabilities.\n      ALSO NOTE:  this header is intended to be
        usable independently of\n      the MDN extension that indicates the sender
        is prepared to send\n      alternative formats.  It could be used with a different
        protocol\n      having nothing to do with email or MDN.  Thus, the 'Content-\n
        \     alternative' header provides information about alternative data\n      formats
        without actually indicating if or how they might be\n      obtained.\n      Further,
        the 'Content-alternative' header applies to a MIME body\n      part, where
        the MDN 'Alternative-available' option applies to the\n      message as a
        whole.\n   The example sections of this memo show how the 'Content-features:'\n
        \  and 'Content-alternative:' MIME headers may be used to describe the\n   content
        provided and available alternatives.\n"
      title: 3.1.3 Information about alternative data formats
    title: 3.1 Send data with an indication of alternatives
  - contents:
    - "3.2 Receiver options\n   A negotiation-aware system receiving message data
      without an\n   indication of alternative data formats MUST process that message
      in\n   the same way as a standard Internet fax system or email user agent.\n
      \  Given an indication of alternative data format options, the receiver\n   has
      three primary options:\n   (a)   do not recognize the alternatives:  passively
      accept what is\n         provided,\n   (b)   do not prefer the alternatives:
      \ actively accept what is\n         provided, or\n   (c)   prefer some alternative
      format.\n"
    - contents:
      - "3.2.1 Alternatives not recognized\n   This corresponds to the case that the
        receiver is a simple mode\n   Internet fax recipient [12], or a traditional
        email user agent.\n   The receiver does not recognize the alternatives offered,
        or chooses\n   not to recognize them, and simply accepts the data as sent.
        \ A\n   standard MDN response [4] or an extended MDN response [2] MAY be\n
        \  generated at the receiver's option.\n"
      title: 3.2.1 Alternatives not recognized
    - contents:
      - "3.2.2 Alternative not desired\n   The receiver does recognize the alternatives
        offered, but\n   specifically chooses to accept the data originally offered.
        \ An MDN\n   response SHOULD be sent indicating acceptance of the data and
        also\n   containing the receiver's capabilities.\n   This is the same as the
        defined behaviour of an Extended Internet Fax\n   receiver [1,2].\n"
      title: 3.2.2 Alternative not desired
    - contents:
      - "3.2.3 Alternative preferred\n   This case extends the behaviour of Extended
        Internet Fax [1,2] to\n   allow an alternative form of data for the current
        message to be\n   transferred.  This option may be followed ONLY if the original\n
        \  message contains an 'Alternative-available' MDN option (alternative\n   data
        re-sends may not use this option).  Further, this option may be\n   followed
        ONLY if the recipient is explicitly addressed in the message\n   headers ('to:',
        'cc:' or 'bcc:').\n   The receiver recognizes that alternative data is available,
        and based\n   on the information provided determines that an alternative format\n
        \  would be preferable.  An MDN response [4] is sent, which MUST contain\n
        \  the following:\n   o  an 'Alternative-preferred' disposition modifier [9]
        indicating\n      that some data format other than that originally sent is\n
        \     preferred,\n   o  an 'Original-Message-ID:' field [4] with the message
        identifier\n      from the received message, and\n   o  receiver capabilities,
        per RFC 2530 [2].\n   On sending such an MDN response, the receiver MAY discard
        the message\n   data provided, in the expectation that some alternative will
        be sent.\n   But if the sender has indicated a limited lifetime for the\n
        \  alternative data, and the original data received is within the\n   receiver's
        capability to display, the receiver SHOULD NOT discard it.\n   Lacking sufficient
        memory to hold the original data for a period of\n   time within which alternative
        data would reasonably be received, the\n   receiver SHOULD accept and display
        the original data.  In the case\n   that the original data is not within the
        receiver's capability to\n   display then it SHOULD discard the original data
        and request an\n   alternative format.\n      NOTE:  the above rules are meant
        to ensure that the content\n      negotiation framework does not result in
        the loss of data that\n      would otherwise be received and displayed.\n
        \  Having requested alternative data and not displayed the original\n   data,
        the receiver MUST remember this fact and be prepared to take\n   corrective
        action if alternative data is not received within a\n   reasonable time (e.g.,
        if the MDN response or transmission of\n   alternative data is lost in transit).\n
        \  Corrective action might be any of the following:\n   (a)   re-send the
        MDN response, and continue waiting for an\n         alternative,\n   (b)   present
        the data originally supplied (if it is still\n         available), or\n   (c)
        \  generate an error response indicating loss of data.\n   On concluding that
        alternative data is not forthcoming, the preferred\n   option is (b), but
        this may not be possible for receivers with\n   limited memory.\n   See Appendix
        A for further discussion of receiver behaviour options.\n      NOTE:  A cache
        control indicator on recipient capabilities has\n      been considered, but
        is not included in this specification.\n      (Sometimes, a recipient may
        want to offer certain capabilities\n      only under certain circumstances,
        and does not wish them to be\n      remembered for future use; e.g., not wanting
        to receive colour\n      images for routine communications.)\n      NOTE:
        \ the receiver does not actually get to select any specific\n      data format
        offered by the sender.  The final choice of data\n      format is always made
        by the sender, based on the receiver's\n      declared capabilities.  This
        approach:\n      (a)   more closely matches the style of T.30 content negotiation,\n
        \     (b)   provides for clean integration with the current extended\n            mode
        Internet fax specification,\n      (c)   builds upon existing email mechanisms
        in a consistent\n            fashion, and\n      (d)   allows for cases (e.g.,
        dynamically generated content) where\n            it is not feasible for the
        sender to enumerate the\n            alternatives available.\n"
      title: 3.2.3 Alternative preferred
    title: 3.2 Receiver options
  - contents:
    - "3.3 Send alternative message data\n   Having offered to provide alternative
      data by including an\n   'Alternative-available' option with the original MDN
      request, and on\n   receipt of an MDN response indicating 'Alternative-preferred',
      the\n   sender SHOULD transmit alternative message data that best matches the\n
      \  receiver's declared capabilities.  (In the exceptional case that the\n   response
      requesting an alternative data format does not contain\n   receiver capabilities,
      a baseline format should be selected.)\n   If any part of the best available
      message data matching the receiver\n   capabilities is the same as that originally
      sent, it MUST still be\n   re-transmitted because the receiver may have discarded
      the original\n   data.  Any data sent as a result of receiving an 'Alternative-\n
      \  preferred' response should include an MDN request but SHOULD NOT\n   include
      an 'Alternative-available' disposition notification modifier.\n   If the sender
      is no longer able to send message data for any reason,\n   it MUST send a message
      to the receiver indicating a failed transfer.\n   It SHOULD also generate a
      report for the receiver indicating the\n   failure, containing an MDN request
      and including an 'Alternative-\n   not-available' disposition notification modifier.\n
      \  Any message sent to a receiver in response to a request for\n   alternative
      data MUST include an 'Original-Message-ID:' header [23]\n   containing the Original-message-ID
      value from the received\n   disposition notification message (which is the 'Message-ID:'
      from the\n   original message).  This header serves to correlate the re-send
      (or\n   failure message) with the original message, and also to distinguish
      a\n   re-send from an original message.\n"
    title: 3.3 Send alternative message data
  - contents:
    - "3.4 Confirm receipt of resent message data\n   When resent data is received
      (indicated by presence of an 'original-\n   message-ID:' header field), the
      receiver processes that data and\n   generates an MDN response indicating the
      final disposition of the\n   data received, and also indicating capabilities
      that may be used for\n   future messages, per RFC 2530 [2] and RFC 2532 [1].\n
      \  If the re-send indicates that alternative data is no longer available\n   (by
      including an 'Alternative-not-available' disposition notification\n   modifier),
      and the receiver still holds the original data sent, it\n   should display or
      process the original data and send an MDN response\n   indicating the final
      disposition of that data.  Thus, the response to\n   an 'Alternative-not-available'
      indication may be a successful\n   disposition notification.\n   If the re-send
      indicates that alternative data is no longer available\n   (by including an
      'Alternative-not-available' disposition notification\n   modifier), and the
      receiver has discarded the original data sent, it\n   SHOULD:\n   (a)   display
      or process the failure message received, OR\n   (b)   construct and display
      a message indicating that message data\n         has been lost, preferably indicating
      the sender, time, subject,\n         message identifier and other information
      that may help the\n         recipient user to identify the missing message.\n
      \  and send a message disposition response indicating a final message\n   disposition
      of \"deleted\".\n"
    title: 3.4 Confirm receipt of resent message data
  title: 3. Framework for content negotiation
- contents:
  - "4. The Content-alternative header\n   The 'Content-alternative:' header is a
    MIME header that can be\n   attached to a MIME body part to indicate availability
    of some\n   alternative form of the data it contains.  This header does not, of\n
    \  itself, indicate how the alternative form of data may be accessed.\n   Using
    the ABNF notation of RFC 2234 [10], the syntax of a 'Content-\n   alternative'
    header is defined as:\n      Content-alternative-header =\n          \"Content-alternative\"
    \":\" Alternative-feature-expression\n      Alternative-feature-expression =\n
    \         <As defined for 'Filter' by RFC 2533 [6]>\n   More than one 'Content-alternative:'
    header may be applied to a MIME\n   body part, in which case each one is taken
    to describe a separate\n   alternative data format that is available.\n   A content-alternative
    header is used with some MIME-encapsulated\n   data, and is interpreted in that
    context.  The intent is to indicate\n   possible variations of that data, and
    it is not necessarily expected\n   to be a complete free-standing description
    of a specific available\n   data.  Enough information should be provided for a
    receiver to be\n   able to decide whether or not the alternative thus described
    (a) is\n   likely to be an improvement over the actual data provided, and (b)
    is\n   likely to be processable by the receiver.\n   Thus, when interpreting a
    Content-alternative header value, a\n   receiver may assume that features not
    explicitly mentioned are not\n   different in the indicated alternative from the
    supplied data.  For\n   example, if a Content-alternative header does not mention
    an\n   alternative MIME content-type, the receiver may assume that the\n   available
    alternative uses the same content-type as the supplied\n   data.\n   See also
    the example in section 8.4.\n"
  title: 4. The Content-alternative header
- contents:
  - "5. The Original-Message-ID message header\n   The 'Original-Message-ID' header
    is used to correlate any message\n   response or re-send with the original message
    to which it relates\n   (see also sections 3.2.3,  3.3).  A re-send is distinct
    from the\n   original message, so it MUST have its own unique Message-ID value\n
    \  (per RFC 2822, section 3.6.4).\n   The syntax for this header is:\n      \"Original-Message-ID\"
    \":\" msg-id\n   where 'msg-id' is defined by RFC 2822 as:\n      msg-id = \"<\"
    id-left \"@\" id-right \">\"\n   The 'msg-id' value given must be identical to
    that supplied in the\n   Message-ID: header of the original message for which
    the current\n   message is a response or re-send.\n"
  title: 5. The Original-Message-ID message header
- contents:
  - "6. MDN extension for alternative data\n   Here, we define two extensions to the
    Message Disposition\n   Notification (MDN) protocol [4] to allow a sender to indicate\n
    \  readiness to send alternative message data formats, and to allow a\n   receiver
    to indicate a preference for some alternative format.\n   Indication of what alternatives
    may be available or preferred are not\n   covered here.  This functionality is
    provided by the 'Content-\n   alternative' MIME header [8] and \"Indicating Supported
    Media Features\n   Using Extensions to DSN and MDN\" [2].\n"
  - contents:
    - "6.1 Indicating readiness to send alternative data\n   A sender wishing to indicate
      its readiness to send alternative\n   message data formats must request an MDN
      response using the MDN\n   'Disposition-Notification-To:' header [4].\n   The
      MDN request is accompanied by a 'Disposition-Notification-\n   Options:' header
      containing the parameter 'Alternative-available'\n   with an importance value
      of 'optional'.  (The significance of\n   'optional' is that receiving agents
      unaware of this option do not\n   generate inappropriate failure responses.)\n
      \  This specification defines a value for 'attribute' to be used in an\n   MDN
      'Disposition-Notification-Options:' header [4]:\n      attribute =/ \"Alternative-available\"\n
      \  Thus, a sender includes the following headers to indicate that\n   alternative
      message data is available:\n      Disposition-Notification-To:\n          <sender-address>\n
      \     Disposition-Notification-Options:\n          Alternative-available=optional,<lifetime>\n
      \  where <lifetime> is \"transient\" or \"permanent\", indicating whether\n
      \  the alternative data will be made available for just a short while,\n   or
      for an indefinite period.  A value of \"permanent\" indicates that\n   the data
      is held on long term storage and can be expected to be\n   available for at
      least several days, and probably weeks or months.  A\n   value of \"transient\"
      indicates that the alternative data may be\n   discarded at any time, though
      it would normally be held for the\n   expected duration of a message transaction.\n
      \     NOTE: the <lifetime> parameter is provided to help low-memory\n      receivers
      (which are unable to store received data) avoid loss of\n      information through
      requesting an alternative data format that may\n      become unavailable.\n
      \  A message sent with a request for an MDN with an 'Alternative-\n   available'
      option MUST also contain a 'Message-ID:' header field\n   [20].\n"
    title: 6.1 Indicating readiness to send alternative data
  - contents:
    - "6.2 Indicating a preference for alternative data\n   The MDN specification
      [4] defines a number of message disposition\n   options that may be reported
      by the receiver of a message:\n      disposition-type = \"displayed\"\n                       /
      \"dispatched\"\n                       / \"processed\"\n                       /
      \"deleted\"\n                       / \"denied\"\n                       / \"failed\"\n
      \     disposition-modifier = ( \"error\" / \"warning\" )\n                           /
      ( \"superseded\" / \"expired\" /\n                               \"mailbox-terminated\"
      )\n                           / disposition-modifier-extension\n   This specification
      defines an additional value for 'disposition-\n   modifier-extension':\n      disposition-modifier-extension
      =/\n          \"Alternative-preferred\"\n   When a receiver requests that an
      alternative format be sent, it sends\n   a message disposition notification
      message containing the following\n   disposition field:\n      Disposition:\n
      \       <action-mode>/<sending-mode>,\n        deleted/alternative-preferred\n
      \  For example, an automatically generated response might contain:\n      Disposition:\n
      \       automatic-action/MDN-sent-automatically,\n        deleted/alternative-preferred\n
      \  An MDN response containing an 'alternative-preferred' disposition\n   modifier
      MUST also contain an 'Original-message-ID:' field [4] with\n   the 'Message-ID:'
      value from the original message.\n   An MDN response containing an 'alternative-preferred'
      disposition\n   modifier SHOULD also contain a 'Media-accept-features:' field
      [2]\n   indicating the capabilities that the sender should use in selecting\n
      \  an alternative form of message data.  If this field is not supplied,\n   the
      sender should assume some baseline feature capabilities.\n   Receiver capabilities
      supplied with an alternative-preferred\n   disposition notification MUST NOT
      be cached:  they may apply to the\n   current transaction only.\n"
    title: 6.2 Indicating a preference for alternative data
  - contents:
    - "6.3 Indicating alternative data is no longer available\n   A sender that receives
      a request for alternative data that is no\n   longer available, or is unable
      to provide alternative data matching\n   the receiver's capabilities, MUST respond
      with an indication of this\n   fact, sending a message containing data describing
      the failure.\n   Such a message MUST specify the MDN 'Disposition-Notification-To:'\n
      \  header [4], accompanied by a 'Disposition-Notification-Options:'\n   header
      containing the parameter 'Alternative-not-available' with an\n   importance
      value of 'required'.\n   This specification defines a value for 'attribute'
      to be used in an\n   MDN 'Disposition-Notification-Options:' header [4]:\n      attribute
      =/ \"Alternative-not-available\"\n   Thus, a sender includes the following headers
      to indicate that the\n   alternative message data previously offered is no longer
      available:\n      Disposition-Notification-To:\n          <sender-address>\n
      \     Disposition-Notification-Options:\n          Alternative-not-available=required,(TRUE)\n
      \  A message sent with a request for an MDN with an 'Alternative-not-\n   available'
      option MUST also contain an 'Original-message-ID:'  header\n   [23] containing
      the value from the 'Message-ID:' header of the\n   original message.\n"
    title: 6.3 Indicating alternative data is no longer available
  - contents:
    - "6.4 Indicating loss of original data\n   This specification defines an additional
      value for 'disposition-\n   modifier-extension':\n      disposition-modifier-extension
      =/\n          \"original-lost\"\n   When a receiver loses message data because
      it lacks memory to store\n   the original while waiting for an alternative to
      be sent, it sends a\n   message disposition notification containing the following
      field:\n      Disposition:\n        <action-mode>/<sending-mode>,\n        deleted/original-lost\n
      \  For example, an automatically generated response might contain:\n      Disposition:\n
      \       automatic-action/MDN-sent-automatically,\n        deleted/original-lost\n
      \  An MDN response containing an 'original-lost' disposition modifier\n   MUST
      also contain an 'Original-message-ID:' field [4] with the\n   'Message-ID:'
      value from the resent message, or from the original\n   message (if no re-send
      has been received).\n"
    title: 6.4 Indicating loss of original data
  - contents:
    - "6.5 Automatic sending of MDN responses\n   In sending an MDN response that
      requests alternative data, the\n   security concerns stated in RFC 2298 [4]
      (sections 2.1 and 6.2)\n   regarding automatic MDN responses must be respected.
      \ In particular,\n   a system capable of performing content negotiation MUST
      have an\n   option for its user to disable negotiation responses, either\n   generally,
      on a per-message basis, or both.\n"
    title: 6.5 Automatic sending of MDN responses
  title: 6. MDN extension for alternative data
- contents:
  - "7. Internet Fax Considerations\n   Internet fax is an application that uses email
    to exchange document\n   images (see RFC RFC 2305 [12] and RFC 2532 [1]).\n   Both
    sender and receiver parts of this specification involve the use\n   of media feature
    expressions.  In the context of Internet fax, any\n   such expressions SHOULD
    employ feature tags defined by \"Content\n   feature schema for Internet fax\"
    [16].  In a wider email context, any\n   valid media features MAY be used.\n   For
    Internet fax [12], \"image/tiff\" is the assumed content-type for\n   message
    data.  In particular, all Internet fax devices are presumed\n   to be capable
    of sending and receiving the TIFF profile S\n   capabilities (Section 3 of [11]).
    \ When communication is between\n   Internet fax devices, this capability may
    be assumed.  But when\n   dealing with devices that go beyond these capabilities
    defined for\n   Internet fax (e.g. generic email agents with fax capabilities)
    it\n   would be better not to assume fax capabilities, and for the\n   negotiating
    parties to be explicit with respect to all their\n   capabilities.\n   It would
    be better if even Internet fax devices do not assume that\n   they are communicating
    with other such devices.  When using Internet\n   email, there is no reliable
    way to establish this fact.  Therefore,\n   for any Internet fax device that may
    reasonably be expected to\n   exchange messages with any other email agent, it
    is RECOMMENDED that\n   Internet fax capabilities (such as image/tiff baseline
    format\n   handling) are not assumed but stated explicitly.\n   In particular,
    the 'Media-Accept-Features:' header in receiver MDN\n   responses SHOULD explicitly
    indicate (type=\"image/tiff\") and baseline\n   TIFF capabilities, rather than
    just assuming that they are\n   understood.\n"
  title: 7. Internet Fax Considerations
- contents:
  - '8. Examples

    '
  - contents:
    - "8.1 Sending enhanced Internet Fax image\n   An Internet fax sender has a profile-F
      (A4, 400x400dpi, MMR) image to\n   send to a receiver.  The baseline for Internet
      fax is 200x200dpi and\n   MH image compression.\n   Sender's initial message:\n
      \     Date: Wed,20 Sep 1995 00:18:00 (EDT)-0400\n      From: Jane Sender <Jane_Sender@example.com>\n
      \     Message-Id: <199509200019.12345@example.com>\n      Subject: Internet
      FAX Full Mode Content Negotiation\n      To: Tom Recipient <Tom_Recipient@example.org>\n
      \     Disposition-Notification-To: Jane_Sender@example.com\n      Disposition-Notification-Options:\n
      \         Alternative-available=optional,permanent\n      MIME-Version: 1.0\n
      \     Content-Type: multipart/mixed;\n                    boundary=\"RAA14128.773615765/
      example.com\"\n      --RAA14128.773615765/ example.com\n      Content-type:
      image/tiff\n      Content-Transfer-Encoding: base64\n      Content-features:\n
      \         (& (color=Binary)\n             (image-file-structure=TIFF-minimal)\n
      \            (dpi=200)\n             (dpi-xyratio=1)\n             (paper-size=A4)\n
      \            (image-coding=MH)\n             (MRC-mode=0)\n             (ua-media=stationery)
      )\n      Content-alternative:\n          (& (color=Binary)\n             (image-file-structure=TIFF-limited)\n
      \            (dpi=400)\n             (dpi-xyratio=1)\n             (paper-size=A4)\n
      \            (image-coding=MMR)\n             (MRC-mode=0)\n             (ua-media=stationery)
      )\n      [TIFF-FX Profile-S message goes here]\n      --RAA14128.773615765/
      example.com--\n   Receiver sends MDN response to initial message:\n      Date:
      Wed,20 Sep 1995 00:19:00 (EDT)-0400\n      From: Tom Recipient <Tom_Recipient@example.org>\n
      \     Message-Id: <199509200020.12345@example.org>\n      Subject: Re: Internet
      FAX Full Mode Content Negotiation\n      To: Jane Sender <Jane_Sender@example.com>\n
      \     MIME-Version: 1.0\n      Content-Type: multipart/report;\n                    report-type=disposition-notification;\n
      \                   boundary=\"RAA14128.773615766/example.org\"\n      --RAA14128.773615766/example.org\n
      \     The message sent on 1995 Sep 20 at 00:18:00 (EDT) -0400 to\n      Tom
      Recipient <Tom_Recipient@example.org> with subject \"Internet\n      FAX Full
      Mode Content Negotiation\" has been received.  An\n      alternative form of
      the message data is requested.\n      --RAA14128.773615766/example.org\n      Content-Type:
      message/disposition-notification\n      Reporting-UA: Toms-pc.cs.example.org;
      IFAX-FullMode\n      Original-Recipient: rfc822;Tom-Recipient@example.org\n
      \     Final-Recipient: rfc822;Tom-Recipient@example.org\n      Original-Message-ID:
      <199509200019.12345@example.com>\n      Disposition: automatic-action/MDN-sent-automatically;\n
      \                  deleted/alternative-preferred\n      Media-Accept-Features:\n
      \         (& (type=\"image/tiff\")\n             (color=Binary)\n             (image-file-structure=TIFF)\n
      \            (| (& (dpi=200) (dpi-xyratio=200/100) )\n                (& (dpi=200)
      (dpi-xyratio=1) )\n                (& (dpi=400) (dpi-xyratio=1) ) )\n             (|
      (image-coding=[MH,MR,MMR])\n                (& (image-coding=JBIG)\n                   (image-coding-constraint=JBIG-T85)\n
      \                  (JBIG-stripe-size=128) ) )\n             (MRC-mode=0)\n             (paper-size=[A4,B4])\n
      \            (ua-media=stationery) )\n      --RAA14128.773615766/example.org--\n
      \  Sender's message with enhanced content:\n      Date: Wed,20 Sep 1995 00:21:00
      (EDT)-0400\n      From: Jane Sender <Jane_Sender@example.com>\n      Message-Id:
      <199509200021.12345@example.com>\n      Original-Message-Id: <199509200019.12345@example.com>\n
      \     Subject: Internet FAX Full Mode Image Transmission\n      To: Tom Recipient
      <Tom_Recipient@example.org>\n      Disposition-Notification-To: Jane_Sender@example.com\n
      \     MIME-Version: 1.0\n      Content-Type: multipart/mixed;\n                    boundary=\"RAA14128.773615768/
      example.com\"\n      --RAA14128.773615768/ example.com\n      Content-type:
      image/tiff\n      Content-Transfer-Encoding: base64\n      [TIFF-FX profile-F
      message goes here]\n      --RAA14128.773615768/ example.com--\n   Receiver sends
      MDN confirmation of enhanced message content:\n      Date: Wed,20 Sep 1995 00:22:00
      (EDT)-0400\n      From: Tom Recipient <Tom_Recipient@example.org>\n      Message-Id:
      <199509200022.12345@example.org>\n      Subject: Re: Internet FAX Full Mode
      Image Transmission\n      To: Jane Sender <Jane_Sender@example.com>\n      MIME-Version:
      1.0\n      Content-Type: multipart/report;\n                    report-type=disposition-notification;\n
      \                   boundary=\"RAA14128.773615769/example.org\"\n      --RAA14128.773615769/example.org\n
      \     The message sent on 1995 Sep 20 at 00:21:00 (EDT) -0400 to Tom\n      Recipient
      <Tom_Recipient@example.org> with subject \" Internet FAX\n      Full Mode Image
      Transmission\" has been processed in Internet FAX\n      Full Mode.\n      --RAA14128.773615769/example.org\n
      \     Content-Type: message/disposition-notification\n      Reporting-UA: Toms-pc.cs.example.org;
      IFAX-FullMode\n      Original-Recipient: rfc822;Tom-Recipient@example.org\n
      \     Final-Recipient: rfc822;Tom-Recipient@example.org\n      Original-Message-ID:
      <199509200021.12345@example.com>\n      Disposition: automatic-action/MDN-sent-automatically;
      processed\n      Media-Accept-Features:\n          (& (type=\"image/tiff\")\n
      \            (color=Binary)\n             (image-file-structure=TIFF)\n             (|
      (& (dpi=200) (dpi-xyratio=200/100) )\n                (& (dpi=200) (dpi-xyratio=1)
      )\n                (& (dpi=400) (dpi-xyratio=1) ) )\n             (| (image-coding=[MH,MR,MMR])\n
      \               (& (image-coding=JBIG)\n                   (image-coding-constraint=JBIG-T85)\n
      \                  (JBIG-stripe-size=128) ) )\n             (MRC-mode=0)\n             (paper-size=[A4,B4])\n
      \            (ua-media=stationery) )\n      --RAA14128.773615769/example.org--\n"
    title: 8.1 Sending enhanced Internet Fax image
  - contents:
    - "8.2 Internet fax with initial data usable\n   This example shows how the second
      and subsequent transfers between\n   the systems in the previous example might
      be conducted.  Using\n   knowledge gained from the previous exchange, the sender
      includes\n   profile-F data with its first contact.\n   Sender's initial message:\n
      \     Date: Wed,20 Sep 1995 00:19:00 (EDT)-0400\n      From: Jane Sender <Jane_Sender@example.com>\n
      \     Message-Id: <199509200019.12345@example.com>\n      Subject: Internet
      FAX Full Mode Content Negotiation\n      To: Tom Recipient <Tom_Recipient@example.org>\n
      \     Disposition-Notification-To: Jane_Sender@example.com\n      Disposition-Notification-Options:\n
      \         Alternative-available=optional,permanent\n      MIME-Version: 1.0\n
      \     Content-Type: multipart/mixed;\n                    boundary=\"RAA14128.773615765/
      example.com\"\n      --RAA14128.773615765/ example.com\n      Content-type:
      image/tiff\n      Content-Transfer-Encoding: base64\n      Content-features:\n
      \         (& (color=Binary)\n             (image-file-structure=TIFF-limited)\n
      \            (dpi=400)\n             (dpi-xyratio=1)\n             (paper-size=A4)\n
      \            (image-coding=MMR)\n             (MRC-mode=0)\n             (ua-media=stationery)
      )\n      Content-alternative:\n          (& (color=Binary)\n             (image-file-structure=TIFF-minimal)\n
      \            (dpi=200)\n             (dpi-xyratio=1)\n             (paper-size=A4)\n
      \            (image-coding=MH)\n             (MRC-mode=0)\n             (ua-media=stationery)
      )\n      [TIFF-FX Profile-F message goes here]\n      --RAA14128.773615765/
      example.com--\n   Receiver sends MDN confirmation of received message content:\n
      \     Date: Wed,20 Sep 1995 00:22:00 (EDT)-0400\n      From: Tom Recipient <Tom_Recipient@example.org>\n
      \     Message-Id: <199509200022.12345@example.org>\n      Subject: Re: Internet
      FAX Full Mode Image Transmission\n      To: Jane Sender <Jane_Sender@example.com>\n
      \     MIME-Version: 1.0\n      Content-Type: multipart/report;\n                    report-type=disposition-notification;\n
      \                   boundary=\"RAA14128.773615769/example.org\"\n      --RAA14128.773615769/example.org\n
      \     The message sent on 1995 Sep 20 at 00:19:00 (EDT) -0400 to Tom\n      Recipient
      <Tom_Recipient@example.org> with subject \"Internet FAX\n      Full Mode Image
      Transmission\" has been processed in Internet FAX\n      Full Mode.\n      --RAA14128.773615769/example.org\n
      \     Content-Type: message/disposition-notification\n      Reporting-UA: Toms-pc.cs.example.org;
      IFAX-FullMode\n      Original-Recipient: rfc822;Tom-Recipient@example.org\n
      \     Final-Recipient: rfc822;Tom-Recipient@example.org\n      Original-Message-ID:
      <199509200021.12345@example.com>\n      Disposition: automatic-action/MDN-sent-automatically;
      processed\n      Media-Accept-Features:\n          (& (type=\"image/tiff\")\n
      \            (color=Binary)\n             (image-file-structure=TIFF)\n             (|
      (& (dpi=200) (dpi-xyratio=200/100) )\n                (& (dpi=200) (dpi-xyratio=1)
      )\n                (& (dpi=400) (dpi-xyratio=1) ) )\n             (| (image-coding=[MH,MR,MMR])\n
      \               (& (image-coding=JBIG)\n                   (image-coding-constraint=JBIG-T85)\n
      \                  (JBIG-stripe-size=128) ) )\n             (MRC-mode=0)\n             (paper-size=[A4,B4])\n
      \            (ua-media=stationery) )\n      --RAA14128.773615769/example.org--\n"
    title: 8.2 Internet fax with initial data usable
  - contents:
    - "8.3 Negotiate to lower receiver capability\n   In this example, the sender
      has incorrectly assumed that the receiver\n   has a higher capability, and must
      re-send lower capability data in\n   response to the receiver's response showing
      lesser capability.\n   An Internet fax sends a profile-F (A4, 400x400dpi, MMR)
      image.  When\n   the receiver cannot handle this, it falls back to baseline
      profile-S.\n   As this is a baseline format, it is not necessary to declare
      that\n   capability with the original message.  When a receiver is faced with\n
      \  data it cannot process from a negotiating sender, it can do no better\n   than
      to respond with a description of its actual capabilities and let\n   the sender
      determine the outcome.\n   Sender's initial message:\n      Date: Wed, 20 Sep
      1995 00:18:00 (EDT)-0400\n      From: Jane Sender <Jane_Sender@example.com>\n
      \     Message-Id: <199509200019.12345@example.com>\n      Subject: Internet
      FAX Full Mode Negotiate Down\n      To: Tom Recipient <Tom_Recipient@example.org>\n
      \     Disposition-Notification-To: Jane_Sender@example.com\n      Disposition-Notification-Options:\n
      \         Alternative-available=optional,permanent\n      MIME-Version: 1.0\n
      \     Content-Type: multipart/mixed;\n                    boundary=\"RAA14128.773615765/
      example.com\"\n      --RAA14128.773615765/ example.com\n      Content-type:
      image/tiff\n      Content-Transfer-Encoding: base64\n      Content-features:\n
      \         (& (color=Binary)\n             (image-file-structure=TIFF-limited)\n
      \            (dpi=400)\n             (dpi-xyratio=1)\n             (paper-size=A4)\n
      \            (image-coding=MMR)\n             (MRC-mode=0)\n             (ua-media=stationery)
      )\n      [TIFF-FX Profile-F message goes here]\n      --RAA14128.773615765/
      example.com--\n   Receiver sends MDN response to initial message:\n      Date:
      Wed,20 Sep 1995 00:19:00 (EDT)-0400\n      From: Tom Recipient <Tom_Recipient@example.org>\n
      \     Message-Id: <199509200020.12345@example.org>\n      Subject: Re: Internet
      FAX Full Mode Negotiate Down\n      To: Jane Sender <Jane_Sender@example.com>\n
      \     MIME-Version: 1.0\n      Content-Type: multipart/report;\n                    report-type=disposition-notification;\n
      \                   boundary=\"RAA14128.773615766/example.org\"\n      --RAA14128.773615766/example.org\n
      \     The message sent on 1995 Sep 20 at 00:18:00 (EDT) -0400 to\n      Tom
      Recipient <Tom_Recipient@example.org> with subject \"Internet\n      FAX Full
      Mode Content Negotiation\" has been received.  An\n      alternative form of
      the message data is requested.\n      --RAA14128.773615766/example.org\n      Content-Type:
      message/disposition-notification\n      Reporting-UA: Toms-pc.cs.example.org;
      IFAX-FullMode\n      Original-Recipient: rfc822;Tom-Recipient@example.org\n
      \     Final-Recipient: rfc822;Tom-Recipient@example.org\n      Original-Message-ID:
      <199509200019.12345@example.com>\n      Disposition: automatic-action/MDN-sent-automatically;\n
      \                  deleted/alternative-preferred\n      Media-Accept-Features:\n
      \         (& (type=\"image/tiff\")\n             (color=Binary)\n             (image-file-structure=TIFF-minimal)\n
      \            (dpi=200)\n             (dpi-xyratio=1)\n             (paper-size=A4)\n
      \            (image-coding=MH)\n             (MRC-mode=0)\n             (ua-media=stationery)
      )\n      --RAA14128.773615766/example.org--\n   Sender's message with baseline
      content:\n      Date: Wed,20 Sep 1995 00:21:00 (EDT)-0400\n      From: Jane
      Sender <Jane_Sender@example.com>\n      Message-Id: <199509200021.12345@example.com>\n
      \     Original-Message-Id: <199509200019.12345@example.com>\n      Subject:
      Internet FAX Full Mode Image Transmission\n      To: Tom Recipient <Tom_Recipient@example.org>\n
      \     Disposition-Notification-To: Jane_Sender@example.com\n      MIME-Version:
      1.0\n      Content-Type: multipart/mixed;\n                    boundary=\"RAA14128.773615768/
      example.com\"\n      --RAA14128.773615768/ example.com\n      Content-type:
      image/tiff\n      Content-Transfer-Encoding: base64\n      [TIFF-FX profile-S
      message goes here]\n      --RAA14128.773615768/ example.com--\n   Receiver sends
      MDN confirmation of impoverished message content:\n      Date: Wed,20 Sep 1995
      00:22:00 (EDT)-0400\n      From: Tom Recipient <Tom_Recipient@example.org>\n
      \     Message-Id: <199509200022.12345@example.org>\n      Subject: Re: Internet
      FAX Full Mode Image Transmission\n      To: Jane Sender <Jane_Sender@example.com>\n
      \     MIME-Version: 1.0\n      Content-Type: multipart/report;\n                    report-type=disposition-notification;\n
      \                   boundary=\"RAA14128.773615769/example.org\"\n      --RAA14128.773615769/example.org\n
      \     The message sent on 1995 Sep 20 at 00:21:00 (EDT) -0400 to Tom\n      Recipient
      <Tom_Recipient@example.org> with subject \" Internet FAX\n      Full Mode Image
      Transmission\" has been processed in Internet FAX\n      Full Mode.\n      --RAA14128.773615769/example.org\n
      \     Content-Type: message/disposition-notification\n      Reporting-UA: Toms-pc.cs.example.org;
      IFAX-FullMode\n      Original-Recipient: rfc822;Tom-Recipient@example.org\n
      \     Final-Recipient: rfc822;Tom-Recipient@example.org\n      Original-Message-ID:
      <199509200021.12345@example.com>\n      Disposition: automatic-action/MDN-sent-automatically;
      processed\n      Media-Accept-Features:\n          (& (color=Binary)\n             (image-file-structure=TIFF-minimal)\n
      \            (dpi=200)\n             (dpi-xyratio=1)\n             (paper-size=A4)\n
      \            (image-coding=MH)\n             (MRC-mode=0)\n             (ua-media=stationery)
      )\n      --RAA14128.773615769/example.org--\n"
    title: 8.3 Negotiate to lower receiver capability
  - contents:
    - "8.4 Sending an alternative content type\n   As noted in section 4, the sender
      can offer the data using a\n   different MIME content-type.  This example shows
      a profile-F (A4,\n   400x400dpi, MMR) image and a limited-colour PDF document
      offered as\n   alternatives to a baseline image/TIFF.\n   Sender's initial message:\n
      \       (Note that the MIME content type is not specified for the\n        image/tiff
      alternative, being the same as that provided, but\n        is mentioned for
      the application/pdf alternative.)\n      Date: Wed,20 Sep 1995 00:18:00 (EDT)-0400\n
      \     From: Jane Sender <Jane_Sender@example.com>\n      Message-Id: <199509200019.12345@example.com>\n
      \     Subject: Internet FAX Full Mode Content Negotiation\n      To: Tom Recipient
      <Tom_Recipient@example.org>\n      Disposition-Notification-To: Jane_Sender@example.com\n
      \     Disposition-Notification-Options:\n          Alternative-available=optional,permanent\n
      \     MIME-Version: 1.0\n      Content-Type: multipart/mixed;\n                    boundary=\"RAA14128.773615765/
      example.com\"\n      --RAA14128.773615765/ example.com\n      Content-type:
      image/tiff\n      Content-Transfer-Encoding: base64\n      Content-features:\n
      \         (& (color=Binary)\n             (image-file-structure=TIFF-minimal)\n
      \            (dpi=200)\n             (dpi-xyratio=1)\n             (paper-size=A4)\n
      \            (image-coding=MH)\n             (MRC-mode=0)\n             (ua-media=stationery)
      )\n      Content-alternative:\n          (& (color=Binary)\n             (image-file-structure=TIFF-limited)\n
      \            (dpi=400)\n             (dpi-xyratio=1)\n             (paper-size=A4)\n
      \            (image-coding=MMR)\n             (MRC-mode=0)\n             (ua-media=stationery)
      )\n      Content-alternative:\n          (& (type=\"application/pdf\")\n             (color=Limited)\n
      \            (dpi=400)\n             (paper-size=A4)\n             (ua-media=stationery)
      )\n      [TIFF-FX Profile-S message goes here]\n      --RAA14128.773615765/
      example.com--\n   Receiver sends MDN response to initial message:\n        (Note
      that this response indicates an ability to handle the\n        PDF MIME content-types,
      but with only binary colour.)\n      Date: Wed,20 Sep 1995 00:19:00 (EDT)-0400\n
      \     From: Tom Recipient <Tom_Recipient@example.org>\n      Message-Id: <199509200020.12345@example.org>\n
      \     Subject: Re: Internet FAX Full Mode Content Negotiation\n      To: Jane
      Sender <Jane_Sender@example.com>\n      MIME-Version: 1.0\n      Content-Type:
      multipart/report;\n                    report-type=disposition-notification;\n
      \                   boundary=\"RAA14128.773615766/example.org\"\n      --RAA14128.773615766/example.org\n
      \     The message sent on 1995 Sep 20 at 00:18:00 (EDT) -0400 to\n      Tom
      Recipient <Tom_Recipient@example.org> with subject \"Internet\n      FAX Full
      Mode Content Negotiation\" has been received.  An\n      alternative form of
      the message data is requested.\n      --RAA14128.773615766/example.org\n      Content-Type:
      message/disposition-notification\n      Reporting-UA: Toms-pc.cs.example.org;
      IFAX-FullMode\n      Original-Recipient: rfc822;Tom-Recipient@example.org\n
      \     Final-Recipient: rfc822;Tom-Recipient@example.org\n      Original-Message-ID:
      <199509200019.12345@example.com>\n      Disposition: automatic-action/MDN-sent-automatically;\n
      \                  deleted/alternative-preferred\n      Media-Accept-Features:\n
      \         (| (& (type=\"image/tiff\")\n                (color=Binary)\n                (image-file-structure=TIFF-minimal)\n
      \               (dpi=200)\n                (dpi-xyratio=1)\n                (image-coding=MH)\n
      \               (MRC-mode=0)\n                (paper-size=A4)\n                (ua-media=stationery)
      )\n             (& (type=\"application/pdf\")\n                (color=Binary)\n
      \               (dpi-xyratio=1)\n                (dpi=[200,400])\n                (paper-size=[A4,B4])\n
      \               (ua-media=stationery) ) )\n      --RAA14128.773615766/example.org--\n
      \  Resend with alternative content-type:\n      Date: Wed,20 Sep 1995 00:21:00
      (EDT)-0400\n      From: Jane Sender <Jane_Sender@example.com>\n      Message-Id:
      <199509200021.12345@example.com>\n      Original-Message-Id: <199509200019.12345@example.com>\n
      \     Subject: Internet FAX Full Mode Image Transmission\n      To: Tom Recipient
      <Tom_Recipient@example.org>\n      Disposition-Notification-To: Jane_Sender@example.com\n
      \     MIME-Version: 1.0\n      Content-Type: multipart/mixed;\n                    boundary=\"RAA14128.773615768/
      example.com\"\n      --RAA14128.773615768/ example.com\n      Content-type:
      application/pdf\n      Content-Transfer-Encoding: base64\n      [PDF data goes
      here]\n      --RAA14128.773615768/ example.com--\n   Receiver sends MDN confirmation
      of enhanced message content:\n        (Also indicating the PDF capability for
      future messages.)\n      Date: Wed,20 Sep 1995 00:22:00 (EDT)-0400\n      From:
      Tom Recipient <Tom_Recipient@example.org>\n      Message-Id: <199509200022.12345@example.org>\n
      \     Subject: Re: Internet FAX Full Mode Image Transmission\n      To: Jane
      Sender <Jane_Sender@example.com>\n      MIME-Version: 1.0\n      Content-Type:
      multipart/report;\n                    report-type=disposition-notification;\n
      \                   boundary=\"RAA14128.773615769/example.org\"\n      --RAA14128.773615769/example.org\n
      \     The message sent on 1995 Sep 20 at 00:21:00 (EDT) -0400 to Tom\n      Recipient
      <Tom_Recipient@example.org> with subject \" Internet FAX\n      Full Mode Image
      Transmission\" has been processed in Internet FAX\n      Full Mode.\n      --RAA14128.773615769/example.org\n
      \     Content-Type: message/disposition-notification\n      Reporting-UA: Toms-pc.cs.example.org;
      IFAX-FullMode\n      Original-Recipient: rfc822;Tom-Recipient@example.org\n
      \     Final-Recipient: rfc822;Tom-Recipient@example.org\n      Original-Message-ID:
      <199509200021.12345@example.com>\n      Disposition: automatic-action/MDN-sent-automatically;
      processed\n      Media-Accept-Features:\n          (| (& (type=\"image/tiff\")\n
      \               (color=Binary)\n                (image-file-structure=TIFF-minimal)\n
      \               (dpi=200)\n                (dpi-xyratio=1)\n                (image-coding=MH)\n
      \               (MRC-mode=0)\n                (paper-size=A4)\n                (ua-media=stationery)
      )\n             (& (type=\"application/pdf\")\n                (color=Binary)\n
      \               (dpi-xyratio=1)\n                (dpi=[200,400])\n                (paper-size=[A4,B4])\n
      \               (ua-media=stationery) ) )\n      --RAA14128.773615769/example.org--\n"
    title: 8.4 Sending an alternative content type
  title: 8. Examples
- contents:
  - '9. IANA Considerations

    '
  - contents:
    - "9.1 New message headers\n   This specification defines new email/MIME message
      headers:\n      Content-alternative\n      Original-Message-ID\n   As such,
      there being no registry of email headers, it is an update to\n   the specifications
      of RFC 2822 and RFC 2045.\n"
    title: 9.1 New message headers
  - contents:
    - "9.2 MDN extensions\n   This specification defines extensions to the Message
      Disposition\n   Notification (MDN) protocol.  The sections below are the registration\n
      \  templates for these extensions, as required by RFC 2298 [4], section\n   10.\n"
    - contents:
      - "9.2.1 Notification option 'Alternative-available'\n   (a)   Disposition-notification-option
        name:\n         Alternative-available\n   (b)   Syntax:\n         (see this
        document, section 6.1)\n   (c)   Character-encoding:\n         US-ASCII characters
        only are used\n   (d)   Semantics:\n         (see this document, section 6.1)\n"
      title: 9.2.1 Notification option 'Alternative-available'
    - contents:
      - "9.2.2 Notification option 'Alternative-not-available'\n   (a)   Disposition-notification-option
        name:\n         Alternative-not-available\n   (b)   Syntax:\n         (see
        this document, section 6.1)\n   (c)   Character-encoding:\n         US-ASCII
        characters only are used\n   (d)   Semantics\n         (see this document,
        section 6.3)\n"
      title: 9.2.2 Notification option 'Alternative-not-available'
    - contents:
      - "9.2.3 Disposition modifier 'Alternative-preferred'\n   (a)   Disposition-modifier
        name:\n         Alternative-preferred\n   (b)   Semantics:\n         (see
        this document, section 6.2)\n"
      title: 9.2.3 Disposition modifier 'Alternative-preferred'
    - contents:
      - "9.2.4 Disposition modifier 'Original-lost'\n   (a)   Disposition-modifier
        name:\n         Original-lost\n   (b)   Semantics:\n         (see this document,
        section 6.4)\n"
      title: 9.2.4 Disposition modifier 'Original-lost'
    title: 9.2 MDN extensions
  title: 9. IANA Considerations
- contents:
  - "10.  Internationalization considerations\n   This specification deals with protocol
    exchanges between mail user\n   agents, and as such does not deal primarily with
    human readable text.\n   But not all user agents may automatically handle the
    protocol\n   elements defined here, and may attempt to display text from the\n
    \  protocol elements to the user.\n   The main candidate for this treatment is
    the text accompanying a\n   disposition notification response that requests alternative\n
    \  information.  In normal use, the protocol design ensures that the\n   recipient
    can process this response automatically; exceptionally, a\n   receiving agent
    may display it to a user.\n"
  title: 10.  Internationalization considerations
- contents:
  - "11.  Security Considerations\n   Security considerations of this specification
    can be divided into two\n   main areas:\n   o  Privacy concerns with automated
    MDN response generation:  see\n      section 6.5 of this document, and the security
    considerations\n      section of RFC 2298 [4].\n   o  Risks of negotiation:  see
    the security considerations section\n      transaction.  If alternative data arrives
    subsequently, it may be\n      ignored or possibly also displayed or printed.
    \ A successful\n      completion MDN may be sent to the sender.\n"
  title: 11.  Security Considerations
- contents:
  - "12.  Acknowledgements\n   The basic structure of the negotiation described here
    was first\n   documented in a draft by Mr. Toru Maeda of Canon.\n   Helpful comments
    on earlier drafts were provided by Mr Hiroshi\n   Tamura, Ted Hardie and Larry
    Masinter.\n"
  title: 12.  Acknowledgements
- contents:
  - "13.  References\n   [1]   Masinter, L. and D. Wing, \"Extended Facsimile using
    Internet\n         Mail\", RFC 2532, March 1999.\n   [2]   Wing, D., \"Indicating
    Supported Media Features Using Extensions\n         to DSN and MDN\", RFC 2530,
    March 1999.\n   [3]   Masinter, L., \"Terminology and Goals for Internet Fax\",
    RFC\n         2542, March 1999.\n   [4]   Fajman, R., \"An Extensible Message
    Format for Message\n         Disposition Notifications\", RFC 2298, March 1998.\n
    \  [5]   Holtman, K., Mutz, A. and T. Hardie, \"Media Feature Tag\n         Registration
    Procedure\", RFC 2506, March 1999.\n   [6]   Klyne, G., \"A syntax for describing
    media feature sets\", BCP\n         31, RFC 2533, March 1999.\n   [7]   Klyne,
    G., \"Indicating media features for MIME content\", RFC\n         2938, September
    2000.\n   [8]  'Content-alternative' header (this memo, section 4)\n   [9]   MDN
    extension for alternative data (this memo, section 6)\n   [10]  Crocker, D. and
    P. Overell, \"Augmented BNF for Syntax\n         Specifications: ABNF\", RFC 2234,
    November 1997.\n   [11]  McIntyre, L.,  Buckley, R., Venable, D., Zilles, S.,
    Parsons,\n         G. and J. Rafferty, \"File format for Internet fax\", RFC 2301,\n
    \        March 1998.\n   [12]  Toyoda K., Ohno H., Murai, J. and D. Wing, \"A
    Simple Mode of\n         Facsimile Using Internet Mail\", RFC 2305, March 1998.\n
    \  [13]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L.,\n         Leach,
    P. and T. Berners-Lee, \"Hypertext Transfer Protocol --\n         HTTP/1.1\",
    RFC 2616, June 1999.\n   [14]  Holtman, K. and A. Mutz, \"Transparent Content
    Negotiation in\n         HTTP\", RFC 2295, March 1998.\n   [15]  Freed, N. and
    N. Borenstein, \"Multipurpose Internet Mail\n         Extensions (MIME) Part 2:
    Media types\", RFC 2046, November\n         1996.\n   [16]  Klyne, G. and L. McIntyre,
    \"Content feature schema for Internet\n         fax V2\", RFC 2879, August 2000.\n
    \  [17]  Klyne, G., \"Protocol-independent Content Negotiation\n         Framework\",
    RFC 2703, September 1999.\n   [18]  Moore, K., \"SMTP Service Extension for Delivery
    Status\n         Notifications\", RFC 1891, January 1996.\n   [19]  Klensin, J.,
    \"Simple Mail Transfer Protocol\", RFC 2821, April\n         2001.\n   [20]  Resnick,
    P., \"Internet Message Format\", RFC 2822, April 2001.\n   [21]  Klyne, G. and
    D. Crocker, \"Timely Delivery for Facsimile Using\n         Internet Mail\", Work
    in Progress.\n   [22]  Bradner, S., \"Key words for use in RFCs to Indicate Requirement\n
    \        Levels\", BCP 14, RFC 2119, March 1997.\n   [23] 'Original-Message-ID'
    header for mail messages (this memo,\n         section 5)\n   [24]  Klyne, G.,
    \"MIME Content Types in Media Feature Expressions\",\n         RFC 2913, September
    2000.\n"
  title: 13.  References
- contents:
  - "Appendix A: Implementation issues\n   This section is not a normative part of
    this specification.  Rather,\n   it discusses some of the issues that were considered
    during its\n   design in a way that we hope will be useful to implementers.\n"
  - contents:
    - "A.1 Receiver state\n   Probably the biggest implication for implementers of
      this proposal\n   compared with standard mail user agents is the need to maintain
      some\n   kind of state information at the receiver while content is being\n
      \  negotiated.\n   By \"receiver state\", we mean that a receiver needs to remember
      that\n   it has received an initial message AND that it has requested an\n   alternative
      form of data.  Without this, when a receiver responds\n   with a request for
      an alternative data format there is a possibility\n   (if the response does
      not reach the sender) that the message will be\n   silently lost, despite its
      having been delivered to the receiving\n   MTA.\n   The matter of maintaining
      receiver state is particularly germane\n   because of the requirement to allow
      low-memory systems to participate\n   in the content negotiation.  Unlike traditional
      T.30 facsimile, where\n   the negotiation takes place within the duration of
      a single\n   connection, an extended time may be taken to complete a negotiation\n
      \  in email.  State information must be maintained for all negotiations\n   outstanding
      at any time, and there is no theoretical upper bound on\n   how many there may
      be.\n   Keeping receiver state is probably not a problem for systems with\n
      \  high capacity storage devices to hold message data and state\n   information.
      \ The remainder of this section discusses strategies that\n   small-system designers
      might employ to place an upper bound on memory\n   that must be reserved for
      this information.  When a receiver is\n   really memory constrained then message
      loss remains a possibility,\n   but the mechanisms described here should ensure
      that it never happens\n   silently.\n   So what is this \"receiver state\"?
      \ It must contain, as a minimum:\n   o  the fact that message data was received,
      and alternative data has\n      been requested,\n   o  a unique message identifier,
      and\n   o  the time at which an alternative format request was sent.\n   This
      allows the receiver to re-issue a request, or to report an\n   error, if requested
      alternative data does not arrive in a reasonable\n   time.\n   Receiver state
      may also include:\n   o  a copy of the data originally received.  This allows
      the receiver\n      to display the original data if an alternative is not received.\n
      \  o  details of the data format supplied, and alternatives offered.\n      This
      permits improved diagnostics if alternative data is not\n      received.\n   If
      a receiver of a message with alternative content available does\n   not have
      enough memory to hold new negotiation state information, it\n   may fall back
      to non-negotiation behaviour, accept the data received\n   and send an MDN indicating
      disposition of that data (see sections\n   3.2.1, 3.2.2).\n   If a receiving
      system runs low on memory after entering into a\n   negotiation, a number of
      options may be possible:\n   o  display or print buffered data, if available,
      and complete the\n      transaction.  If alternative data arrives subsequently,
      it may be\n      ignored or possibly also displayed or printed.  A successful\n
      \     completion MDN may be sent to the sender.\n   o  discard any buffered
      data, and continue waiting for alternative\n      data.  If alternative data
      does not subsequently arrive, a message\n      transfer failure should be declared.\n
      \  o  abort the transfer and declare a message transfer failure:  a\n      diagnostic
      message must be displayed to the local user, and a\n      failure notification
      sent to the sender.\n"
    title: A.1 Receiver state
  - contents:
    - "A.2 Receiver buffering of message data\n   If a receiver is capable of buffering
      received message data while\n   waiting for an alternative, this is to be preferred
      because it\n   retains the option to display that data if an alternative is
      not\n   received (see above).\n   Partial message data should not be buffered
      for this purpose:\n   displaying part of the original message is not an allowable\n
      \  substitute for displaying all of the received data.  (There may be\n   some
      value in keeping some of the original message data for\n   diagnostic purposes.)\n
      \  If a receiver starts to buffer message data pending negotiation, then\n   finds
      that the entire message is too large to buffer, it may choose\n   to fall back
      to \"extended mode\" and display the incoming data as it\n   is received.\n
      \  When a sender indicates availability of alternative data, it also\n   indicates
      whether it is permanently or transiently available.  The\n   intent of this
      is that if alternative data is transient, a receiver\n   should not discard
      original data received.  If necessary, it should\n   simply display the original
      data without requesting an alternative.\n"
    title: A.2 Receiver buffering of message data
  - contents:
    - "A.3 Sender state\n   When a sender indicates that it can offer an alternative
      format of\n   message content, it accepts some responsibility for trying to
      ensure\n   that alternative is available if requested.  Thus, the message\n
      \  content (both original and any alternative) should be stored for a\n   reasonable
      period, together with any corresponding Message-ID\n   value(s).\n   A request
      for retransmission must be accompanied by an Original-\n   Message-ID value
      that the sender can use to correlate with the\n   message data originally sent.\n"
    title: A.3 Sender state
  - contents:
    - "A.4 Timeout of offer of alternatives\n   If the sender is operating with a
      high capacity message storage\n   device (e.g., a disk drive), and normally
      holds the data for extended\n   periods (several days or weeks) then it should
      indicate that the\n   alternative data is permanently available (see 6.1):  a
      recipient\n   seeing this may discard the original data, assuming that the sender\n
      \  will most likely be able to re-transmit.\n   If the sender has limited memory
      capacity, and is likely to be able\n   to hold the data for no more than a few
      minutes or hours, it should\n   indicate that the alternative data is transiently
      available (see\n   6.1).  If there is doubt about a sender's ability to keep
      the message\n   content, it should indicate that availability of any alternative
      is\n   transient.\n"
    title: A.4 Timeout of offer of alternatives
  - contents:
    - "A.5 Timeout of receiver capabilities\n   It should not be assumed that receiver
      capabilities declared during\n   negotiation are available indefinitely.\n   In
      particular, any receiver capabilities declared on a final message\n   confirmation
      should be regarded as definitive, even if they differ\n   from the capabilities
      associated with the message just accepted.\n   These may be stored for future
      use.\n   Any receiver capabilities declared when requesting an alternative\n
      \  format should not be stored for future use, as the receiver might be\n   selective
      about the purposes for which those capabilities may be\n   used.\n"
    title: A.5 Timeout of receiver capabilities
  - contents:
    - "A.6 Relationship to timely delivery\n   Some of the issues of sender state
      maintenance may be simplified if\n   content negotiation is used in conjunction
      with a facility for timely\n   delivery (e.g., [21]).  If there is a known time
      window within which\n   a response should be received, the sender may be less
      conservative\n   about keeping information about outstanding offers of alternative\n
      \  data for extended periods.  A sender that exploits timely delivery in\n   this
      way should indicate that the alternative is transiently\n   available.\n"
    title: A.6 Relationship to timely delivery
  - contents:
    - "A.7 Ephemeral capabilities\n   Ephemeral capabilities may present some special
      problems.  Consider\n   the case of selection of a particular content variant
      that may depend\n   on an ephemeral setting.\n   Imagine someone sending a basic
      fax to a color fax machine,\n   indicating that a color alternative is available.
      \ The color fax\n   discards the content and sends an MDN which says\n   \"deleted/alternative-preferred\"
      to the originator.  It then runs out\n   of colored ink.  The originating fax
      then sends a new message which\n   the colored fax cannot print.\n   Or consider
      an the email client in a phone with sound on/off as a\n   related problem.  When
      sound is ON, the phone may be able to accept\n   voice messages by email.\n
      \  This negotiation framework has not been designed with ephemeral\n   capabilities
      in mind, but, with care, may be adaptable to deal with\n   them.\n"
    title: A.7 Ephemeral capabilities
  - contents:
    - "A.8 Situations where MDNs must not be auto-generated\n   Bearing in mind privacy
      concerns, implementers should be careful that\n   systems do not automatically
      enter into a negotiation exchange in a\n   way that may disclose the recipient's
      whereabouts without first\n   having obtained explicit permission.  For example,
      if receiving a\n   message depends in any way on the user's physical presence,
      automatic\n   negotiation should not be performed.\n   While it may be OK for
      an unattended fax machine to perform automated\n   negotiation, it is not OK
      for a PC software package to do so without\n   the users explicit permission
      as the PC may be switched on only when\n   the user is present.  This suggests
      that default settings in this\n   regard should take account of the type of
      system.\n"
    title: A.8 Situations where MDNs must not be auto-generated
  title: 'Appendix A: Implementation issues'
- contents:
  - "Appendix B: Candidates for further enhancements\n   This appendix lists some
    possible features of content negotiation\n   that were considered, but not included
    in the current specification.\n   In most cases the reasons for exclusion were
    (a) that they could\n   introduce unanticipated additional complexities, and (b)
    no\n   compelling requirement was recognized.\n   o  Cache control indicator for
    recipient capabilities.  This would\n      instruct the sender, or other message
    system component, that\n      capability information in the current message is
    for the current\n      transaction only, and should NOT be remembered for future\n
    \     transactions.  E.g., a recipient may not wish colour capability to\n      be
    used for routine communications.  (See also section A.5 above.)\n   o  Use of
    q-values [6] in media feature expressions for indicating\n      preference among
    alternatives available and/or receiver\n      preferences.\n   o  Partial re-sends.
    \ There are proposals being developed for\n      \"partial MDN\" responses that
    can indicate disposition status on a\n      per-message-part basis.  This opens
    the possibility of partial\n      re-sends when alternative formats are requested
    for only some of\n      the message body parts.  The current specification assumes
    that\n      either none or all of message is re-sent when content negotiation\n
    \     is used.\n   o  Allow negotiation with parties other than originally addressed\n
    \     recipients of a message.\n   o  Negotiation response might indicate different
    receiver endpoint\n      with different capabilities.\n"
  title: 'Appendix B: Candidates for further enhancements'
- contents:
  - "Authors' Addresses\n   Graham Klyne (editor)\n   Clearswift Corporation,\n   1310
    Waterside,\n   Arlington Business Park\n   Theale\n   Reading, RG7 4SA\n   United
    Kingdom\n   Phone: +44 11 8903 8903\n   Fax:   +44 11 8903 9000\n   EMail: GK@ACM.ORG\n
    \  Ryuji Iwazaki\n   TOSHIBA TEC CORPORATION\n   2-4-1, Shibakoen, Minato-ku,\n
    \  Tokyo, 105-8524 Japan\n   Phone: +81 3 3438 6866\n   Fax:   +81 3 5402 6355\n
    \  EMail:  iwa@rdl.toshibatec.co.jp\n   Dave Crocker\n   Brandenburg InternetWorking\n
    \  675 Spruce Dr.\n   Sunnyvale, CA 94086 USA\n   Phone: +1 408 246 8253\n   Fax:
    \  +1 408 249 6205\n   EMail: dcrocker@brandenburg.com\n"
  title: Authors' Addresses
- contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2002).  All
    Rights Reserved.\n   This document and translations of it may be copied and furnished
    to\n   others, and derivative works that comment on or otherwise explain it\n
    \  or assist in its implementation may be prepared, copied, published\n   and
    distributed, in whole or in part, without restriction of any\n   kind, provided
    that the above copyright notice and this paragraph are\n   included on all such
    copies and derivative works.  However, this\n   document itself may not be modified
    in any way, such as by removing\n   the copyright notice or references to the
    Internet Society or other\n   Internet organizations, except as needed for the
    purpose of\n   developing Internet standards in which case the procedures for\n
    \  copyrights defined in the Internet Standards process must be\n   followed,
    or as required to translate it into languages other than\n   English.\n   The
    limited permissions granted above are perpetual and will not be\n   revoked by
    the Internet Society or its successors or assigns.\n   This document and the information
    contained herein is provided on an\n   \"AS IS\" basis and THE INTERNET SOCIETY
    AND THE INTERNET ENGINEERING\n   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS
    OR IMPLIED, INCLUDING\n   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
    INFORMATION\n   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES
    OF\n   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n"
  title: Full Copyright Statement
- contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided
    by the\n   Internet Society.\n"
  title: Acknowledgement
