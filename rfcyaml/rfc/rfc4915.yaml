- contents:
  - '                  Multi-Topology (MT) Routing in OSPF

    '
  title: __initial_text__
- contents:
  - "Status of This Memo\n   This document specifies an Internet standards track protocol
    for the\n   Internet community, and requests discussion and suggestions for\n
    \  improvements.  Please refer to the current edition of the \"Internet\n   Official
    Protocol Standards\" (STD 1) for the standardization state\n   and status of this
    protocol.  Distribution of this memo is unlimited.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (C) The IETF Trust (2007).\n"
  title: Copyright Notice
- contents:
  - "Abstract\n   This document describes an extension to Open Shortest Path First\n
    \  (OSPF) in order to define independent IP topologies called Multi-\n   Topologies
    (MTs).  The Multi-Topologies extension can be used for\n   computing different
    paths for unicast traffic, multicast traffic,\n   different classes of service
    based on flexible criteria, or an in-\n   band network management topology.\n
    \  An optional extension to exclude selected links from the default\n   topology
    is also described.\n"
  title: Abstract
- contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .
    . . . . . .  3\n     1.1.  Differences between Multi-Topology and TOS-Based\n
    \          Routing  . . . . . . . . . . . . . . . . . . . . . . . . .  3\n   2.
    \ Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  3\n     2.1.
    \ Requirements Notation  . . . . . . . . . . . . . . . . . .  3\n     2.2.  Terms
    \ . . . . . . . . . . . . . . . . . . . . . . . . . .  4\n   3.  Base MT Functional
    Specifications  . . . . . . . . . . . . . .  4\n     3.1.  MT Area Boundary .
    . . . . . . . . . . . . . . . . . . . .  4\n     3.2.  Adjacency for MTs  . .
    . . . . . . . . . . . . . . . . . .  4\n     3.3.  Sending OSPF Control Packets
    . . . . . . . . . . . . . . .  5\n     3.4.  Advertising MT Adjacencies and the
    Corresponding IP\n           Prefixes . . . . . . . . . . . . . . . . . . . .
    . . . . .  5\n       3.4.1.  Inter-Area and External Routing  . . . . . . . .
    . . .  5\n     3.5.  Flushing MT Information  . . . . . . . . . . . . . . . .
    .  6\n     3.6.  MT SPF Computation . . . . . . . . . . . . . . . . . . . .  6\n
    \    3.7.  MT-ID Values . . . . . . . . . . . . . . . . . . . . . . .  6\n     3.8.
    \ Forwarding in MT . . . . . . . . . . . . . . . . . . . . .  6\n   4.  Default
    Topology Link Exclusion Functional Specifications  . .  7\n     4.1.  Exclusion
    of Links in the Default Topology . . . . . . . .  7\n     4.2.  New Area Data
    Structure Parameter  . . . . . . . . . . . .  7\n     4.3.  Adjacency Formation
    with Link Exclusion Capability . . . .  8\n     4.4.  OSPF Control Packets Transmission
    over Excluded Links  . .  9\n     4.5.  OSPF LSA Advertisement and SPF Computation
    for\n           Excluded Links . . . . . . . . . . . . . . . . . . . . . .  9\n
    \  5.  Interoperability between MT-Capable and Non-MT-Capable\n       Routers
    \ . . . . . . . . . . . . . . . . . . . . . . . . . . .  9\n     5.1.  Demand
    Circuit Compatibility Considerations  . . . . . . . 10\n   6.  Migration from
    Non-MT-Area to MT-Area  . . . . . . . . . . . . 10\n   7.  MT Network Management
    Considerations . . . . . . . . . . . . . 11\n     7.1.  Create Dedicated Management
    Topology to Include All\n           the Nodes  . . . . . . . . . . . . . . . .
    . . . . . . . . 11\n     7.2.  Extend the Default Topology to All the Nodes .
    . . . . . . 11\n   8.  Security Considerations  . . . . . . . . . . . . . . .
    . . . . 11\n   9.  IANA Considerations  . . . . . . . . . . . . . . . . . . .
    . . 12\n   10. References . . . . . . . . . . . . . . . . . . . . . . . . . .
    12\n     10.1. Normative References . . . . . . . . . . . . . . . . . . . 12\n
    \    10.2. Informative References . . . . . . . . . . . . . . . . . . 12\n   Appendix
    A.  Acknowledgments . . . . . . . . . . . . . . . . . . . 13\n   Appendix B.  OSPF
    Data Formats . . . . . . . . . . . . . . . . . . 13\n     B.1.  Router-LSAs  .
    . . . . . . . . . . . . . . . . . . . . . . 13\n     B.2.  Network-LSAs . . .
    . . . . . . . . . . . . . . . . . . . . 15\n     B.3.  Summary-LSAs . . . . .
    . . . . . . . . . . . . . . . . . . 16\n     B.4.  AS-external-LSAs . . . . .
    . . . . . . . . . . . . . . . . 17\n     B.5.  Type-7 AS-external-LSAs  . . .
    . . . . . . . . . . . . . . 18\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   OSPF uses a fixed packet format, therefore it is not easy
    to\n   introduce any backward-compatible extensions.  However, the OSPF\n   specification
    [OSPF] introduced Type of Service (TOS) metric in an\n   earlier specification
    [TOS-OSPF] in order to announce a different\n   link cost based on TOS.  TOS-based
    routing as described in [TOS-OSPF]\n   was never deployed and was subsequently
    deprecated.  [M-ISIS]\n   describes a similar mechanism for ISIS.\n   We propose
    to reuse the TOS-based metric fields.  They have been\n   redefined and are used
    to advertise different topologies by\n   advertising separate metrics for each
    of them.\n"
  - contents:
    - "1.1.  Differences between Multi-Topology and TOS-Based Routing\n   Multi-Topology
      routing differs from [TOS-OSPF] TOS-based routing in\n   the following ways:\n
      \  1.  With TOS routing [TOS-OSPF], the TOS or Diffserv Code Point\n       (DSCP)
      in the IP header is mapped directly to the corresponding\n       OSPF SPF calculation
      and routing table.  This limits the number\n       and definition of the topologies
      to the 16 TOS values specified\n       in Section 12.3 of [TOS-OSPF].  With
      Multi-Topology routing, the\n       classification of what type of traffic maps
      to which topology is\n       not within the scope of this document.\n   2.  With
      TOS routing [TOS-OSPF], traffic that is unreachable in the\n       routing table
      associated with the corresponding TOS will revert\n       to the TOS 0 routing
      table.  With Multi-Topology routing, this is\n       optional.\n   3.  With
      TOS routing [TOS-OSPF], individual links or prefixes could\n       not be excluded
      from a topology.  If the Link State Advertisement\n       (LSA) options T-bit
      was set, all links or prefixes were either\n       advertised explicitly or
      defaulted to the TOS 0 metric.  With\n       Multi-Topology routing, links or
      prefixes that are not advertised\n       for a specific topology do not exist
      in that topology.\n"
    title: 1.1.  Differences between Multi-Topology and TOS-Based Routing
  title: 1.  Introduction
- contents:
  - '2.  Terminology

    '
  - contents:
    - "2.1.  Requirements Notation\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\",
      \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\",
      and \"OPTIONAL\" in this\n   document are to be interpreted as described in
      RFC 2119\n   [RFC-KEYWORDS].\n"
    title: 2.1.  Requirements Notation
  - contents:
    - "2.2.  Terms\n   We use the following terminology in this document:\n   Non-MT
      router\n      Routers that do not have the MT capability.\n   MT router\n      Routers
      that have MT capability as described in this document.\n   MT-ID\n      Renamed
      TOS field in LSAs to represent Multi-Topology ID.\n   Default topology\n      Topology
      that is built using the TOS 0 metric (default metric).\n   MT topology\n      Topology
      that is built using the corresponding MT-ID metric.\n   MT\n      Shorthand
      notation for MT topology.\n   MT#0 topology\n      Representation of TOS 0 metric
      in MT-ID format.\n   Non-MT-Area\n      An area that contains only non-MT routers.\n
      \  MT-Area\n      An area that contains both non-MT routers and MT routers,
      or only\n      MT routers.\n"
    title: 2.2.  Terms
  title: 2.  Terminology
- contents:
  - '3.  Base MT Functional Specifications

    '
  - contents:
    - "3.1.  MT Area Boundary\n   Each OSPF interface belongs to a single area, and
      all MTs sharing\n   that link need to belong to the same area.  Therefore, the
      area\n   boundaries for all MTs are the same, but each MT's attachment to the\n
      \  area is independent.\n"
    title: 3.1.  MT Area Boundary
  - contents:
    - "3.2.  Adjacency for MTs\n   Each interface can be configured to belong to a
      set of topologies.  A\n   single adjacency is formed with neighbors on the interface
      even if\n   the interface is configured to participate in multiple topologies.\n
      \  Furthermore, adjacency formation is independent of the topologies\n   configured
      on the local interface and the neighboring router.\n"
    title: 3.2.  Adjacency for MTs
  - contents:
    - "3.3.  Sending OSPF Control Packets\n   Sending OSPF control packets is unchanged
      from [OSPF].  For OSPF\n   control packets sent to the remote end of a virtual
      link, the transit\n   area path MUST be composed of links participating in the
      default\n   topology and the OSPF control packets MUST be forwarded using the\n
      \  default topology.\n"
    title: 3.3.  Sending OSPF Control Packets
  - contents:
    - "3.4.  Advertising MT Adjacencies and the Corresponding IP Prefixes\n   The
      TOS metric field is reused to advertise topology specific metric\n   for links
      and prefixes belonging to that topology.  The TOS field is\n   redefined as
      MT-ID in the payload of Router, Summary, and Type-5 and\n   Type-7 AS-external-LSAs
      (see Appendix B).\n   MT-ID metrics in LSAs SHOULD be in ascending order of
      MT-ID.  If an\n   MT-ID exists in an LSA or router link multiple times, the
      metric in\n   the first MT-ID instance MUST be used.\n   When a router establishes
      a FULL adjacency over a link that belongs\n   to a set of MTs, it advertises
      the corresponding cost for each MT-ID.\n   By default, all links are included
      in the default topology and all\n   advertised prefixes belonging to the default
      topology will use the\n   TOS 0 metric as in [OSPF].\n   Each MT has its own
      MT-ID metric field.  When a link is not part of a\n   given MT, the corresponding
      MT-ID metric is excluded from the LSA.\n   The Network-LSA does not contain
      any MT information since the\n   Designated Router (DR) is shared by all MTs.
      \ Hence, there is no\n   change to the Network-LSA.\n"
    - contents:
      - "3.4.1.  Inter-Area and External Routing\n   In Summary-LSAs and Type-5 and
        Type-7 AS-external-LSAs, the TOS\n   metric fields are redefined as MT-ID
        metric fields and are used to\n   advertise prefix and router reachability
        in the corresponding\n   topology.\n   When a router originates a Summary-LSA,
        or Type-5 or Type-7 AS-\n   external-LSA that belongs to a set of MTs, it
        includes the\n   corresponding cost for each MT-ID.  By default, the prefix\n
        \  participates in the default topology and uses the TOS 0 metric for\n   the
        default topology, similar to standard OSPF [OSPF].\n   Setting the P-bit in
        Type-7 AS-external-LSA is topology independent\n   and pertains to all MT-ID
        advertised in the body of the LSA.\n"
      title: 3.4.1.  Inter-Area and External Routing
    title: 3.4.  Advertising MT Adjacencies and the Corresponding IP Prefixes
  - contents:
    - "3.5.  Flushing MT Information\n   When a certain link or prefix that existed
      or was reachable in a\n   certain topology is no longer part of that topology
      or is unreachable\n   in that topology, a new version of the LSA MUST be originated\n
      \  excluding metric information representing the link or prefix in that\n   topology.\n
      \  The MT metric in the Router-LSA can also be set to the maximum\n   possible
      metric to enable the router to become a stub in a certain\n   topology [STUB].\n"
    title: 3.5.  Flushing MT Information
  - contents:
    - "3.6.  MT SPF Computation\n   By considering MT-ID metrics in the LSAs, OSPF
      computes multiple\n   topologies and finds paths to IP prefixes for each MT
      independently.\n   A separate SPF will be computed for each MT-ID to find independent\n
      \  paths to IP prefixes.\n   Network-LSAs are used by all topologies during
      the SPF computation.\n   During the SPF for a given MT-ID, only the links and
      metrics for that\n   MT-ID are considered.  Entries in the Router Routing table
      are also\n   MT-ID specific.\n"
    title: 3.6.  MT SPF Computation
  - contents:
    - "3.7.  MT-ID Values\n   Since AS-External-LSAs use the high-order bit in the
      MT-ID field\n   (E-bit) for the external metric-type, only MT-IDs in the 0 to
      127\n   range are valid.  The following MT-ID values are reserved:\n            0
      \     - Reserved for advertising the metric associated\n                     with
      the default topology (see Section 4.2)\n            1      - Reserved for advertising
      the metric associated\n                     with the default multicast topology\n
      \           2      - Reserved for IPv4 in-band management purposes\n           3-31
      \   - Reserved for assignments by IANA\n           32-127  - Reserved for development,
      experimental and\n                     proprietary features [RFC3692]\n           128-255
      - Invalid and SHOULD be ignored\n"
    title: 3.7.  MT-ID Values
  - contents:
    - "3.8.  Forwarding in MT\n   It is outside of the scope of this document to specify
      how the\n   information in various topology specific forwarding structures are\n
      \  used during packet forwarding or how incoming packets are associated\n   with
      the corresponding topology.  For correct operation, both\n   forwarding behavior
      and methods of associating incoming packets to a\n   corresponding topology
      must be consistently applied in the network.\n"
    title: 3.8.  Forwarding in MT
  title: 3.  Base MT Functional Specifications
- contents:
  - "4.  Default Topology Link Exclusion Functional Specifications\n   The Multi-Topologies
    imply that all the routers participate in the\n   default topology.  However,
    it can be useful to exclude some links\n   from the default topology and reserve
    them for some specific classes\n   of traffic.\n   The Multi-Topologies extension
    for the default topology link or\n   prefix exclusion is described in the following
    subsections.\n"
  - contents:
    - "4.1.  Exclusion of Links in the Default Topology\n   OSPF does not have the
      notion of an unreachable link.  All links can\n   have a maximum metric of 0xFFFF
      advertised in the Router-LSA.  The\n   link exclusion capability requires routers
      to ignore TOS 0 metrics in\n   Router-LSAs in the default topology and to alternately
      use the MT-\n   ID#0 metric to advertise the metric associated with the default\n
      \  topology.  Hence, all routers within an area MUST agree on how the\n   metric
      for the default topology will be advertised.\n   The unused T-bit is defined
      as the MT-bit in the option field in\n   order to ensure that a Multi-Topology
      link-excluding capable router\n   will only form an adjacency with another similarly
      configured router.\n              +---+---+---+---+---+---+---+---+\n              |DN
      |O  |DC |EA |NP |MC |E  |MT |\n              +---+---+---+---+---+---+---+---+\n
      \                Figure 1: OSPF Option Bits\n          MT-bit: If DefaultExclusionCapability
      is enabled, the bit MUST\n                  be set in Hello packets and SHOULD
      be set in Database\n                  Description packet (see Section 4.2).\n"
    title: 4.1.  Exclusion of Links in the Default Topology
  - contents:
    - "4.2.  New Area Data Structure Parameter\n   We define a new parameter in the
      Area Data Structure:\n   DefaultExclusionCapability\n      This configurable
      parameter ensures that all routers in an area\n      have this capability enabled
      before the default topology can be\n      disabled on a router link in the area
      without causing backward-\n      compatibility problems.\n   When an area data
      structure is created, the\n   DefaultExclusionCapability is disabled by default.\n
      \  If DefaultExclusionCapability is disabled:\n   o  The MT-bit MUST be cleared
      in Hello packets and SHOULD be cleared\n      in Database Description packets.\n
      \  o  If a link participates in a non-default topology, it is\n      automatically
      included in the default topology to support backward\n      compatibility between
      MT and non-MT routers.  This is accomplished\n      using the TOS 0 metric field
      as in [OSPF].\n   If DefaultExclusionCapability is enabled:\n   o  The MT-bit
      MUST be set in Hello packets and SHOULD be set in\n      Database Description
      packets.\n   o  The router will only accept a Hello packet if the MT-bit is
      set\n      (see Section 4.3).\n   When DefaultExclusionCapability is set to
      enabled, a router is said\n   to be operating in DefaultExclusionCapability
      mode.\n"
    title: 4.2.  New Area Data Structure Parameter
  - contents:
    - "4.3.  Adjacency Formation with Link Exclusion Capability\n   In order to have
      a smooth transition from a non-MT area to an MT-\n   area, an MT router with
      DefaultExclusionCapability disabled will form\n   adjacencies with non-MT routers
      and will include all links as part of\n   the default topology.\n   A link may
      cease participating in the default topology if\n   DefaultExclusionCapability
      is set to enabled.  In this state, a\n   router will only form adjacency with
      routers that set the MT-bit in\n   their Hello packets.  This will ensure that
      all routers have\n   DefaultExclusionCapability enabled before the default topology
      can be\n   disabled on a link.\n   Receiving OSPF Hello packets as defined in
      Section 10.5 of [OSPF] is\n   modified as follows:\n   o  If the DefaultExclusionCapability
      in the Area Data structure is\n      set to enabled, Hello packets are discarded
      if the received packet\n      does not have the MT-bit set in the Header Options.\n
      \  Receiving OSPF Database Description packets as defined in Section\n   10.6
      of [OSPF] is unchanged.  While packet options are validated in\n   Hello packets,
      the only option checking performed for Database\n   Description packets is ensuring
      that the options do not change during\n   the database exchange process.\n"
    title: 4.3.  Adjacency Formation with Link Exclusion Capability
  - contents:
    - "4.4.  OSPF Control Packets Transmission over Excluded Links\n   If DefaultExclusionCapability
      is enabled, the default topology can be\n   disabled on an interface.  Disabling
      the default topology on an\n   interface does not impact the installation of
      connected routes for\n   the interface in the default topology.  It only affects
      what a router\n   advertises in its Router-LSA.\n   This allows OSPF control
      packets to be sent and received over an\n   interface even if the default topology
      is disabled on the interface.\n"
    title: 4.4.  OSPF Control Packets Transmission over Excluded Links
  - contents:
    - "4.5.  OSPF LSA Advertisement and SPF Computation for Excluded Links\n   When
      DefaultExclusionCapability is enabled and the link does not\n   participate
      in the default topology, the MT-ID#0 metric is not\n   advertised.  The link's
      TOS 0 metric is ignored during the default\n   topology SPF computation.\n   When
      DefaultExclusionCapability is enabled and a link participates in\n   the default
      topology, MT-ID#0 metric is used to advertise the metric\n   associated with
      the default topology.  The link's TOS 0 metric is\n   ignored during the default
      topology SPF computation.\n   Independent of the DefaultExclusionCapability,
      the TOS 0 metric is\n   used for Summary-LSAs and Type-5 and Type-7 AS-external-LSAs.\n
      \  o  If the prefix or router does not exist in the default topology,\n      the
      TOS 0 metric is set to infinity (0xFFFFFF).\n   o  If the prefix or router exists
      in the default topology, the TOS 0\n      metric is used to advertise the metric
      in the default topology.\n   During the summary and external prefix calculation
      for the default\n   topology, the TOS 0 metric is used for Summary-LSAs and
      Type-5 and\n   Type-7 AS-external-LSAs.\n"
    title: 4.5.  OSPF LSA Advertisement and SPF Computation for Excluded Links
  title: 4.  Default Topology Link Exclusion Functional Specifications
- contents:
  - "5.  Interoperability between MT-Capable and Non-MT-Capable Routers\n   The default
    metric field is mandatory in all LSAs (even when the\n   metric value is 0).  Even
    when a link or prefix does not exist in the\n   default topology, a non-MT router
    will consider the zero value in the\n   metric field as a valid metric and consider
    the link or prefix as\n   part of the default topology.\n   In order to prevent
    the above problem, an MT-capable router will\n   include all links as part of
    the default topology.  If links need to\n   be removed from the default topology,
    an MT-capable router must be\n   configured in DefaultExclusionCapability mode.
    \ In this mode, routers\n   will ensure that all other routers in the area are
    in the\n   DefaultExclusionCapability mode before considering the MT-ID#0 metric\n
    \  in the SPF calculation.  Only then can the TOS 0 metric field in\n   Router-LSAs
    be safely ignored during the default topology SPF\n   computation.\n   Note that
    for any prefix or router to become reachable in a certain\n   topology, a contiguous
    path inside that topology must exist between\n   the calculating router and the
    destination prefix or router.\n"
  - contents:
    - "5.1.  Demand Circuit Compatibility Considerations\n   A change to an area's
      DefaultExclusionCapability requires additional\n   processing for area neighbors
      that are suppressing Hello packets as\n   specified in \"Extending OSPF to Support
      Demand Circuits\" [DEMAND].\n   When the DefaultExclusionCapability for an area
      is changed, Hello\n   suppression must be disabled for these neighbors for a
      period of\n   RouterDeadInterval seconds.  This implies that Hello packets are
      sent\n   with the DC-bit clear as specified in Section 3.2.1 of [DEMAND]\n   during
      this period.  After RouterDeadInterval seconds, either the\n   adjacency will
      be taken down due to rejection of Hello packets with a\n   conflicting MT-bit
      or Hello suppression will be renegotiated.\n"
    title: 5.1.  Demand Circuit Compatibility Considerations
  title: 5.  Interoperability between MT-Capable and Non-MT-Capable Routers
- contents:
  - "6.  Migration from Non-MT-Area to MT-Area\n   Introducing MT-OSPF into a network
    can be done gradually to allow MT\n   routers and non-MT routers to participate
    in the default topology\n   while MT routers participate in other topologies.\n
    \  If there is a requirement to exclude some links from the default\n   topology
    in an area, all routers in the area MUST be in\n   DefaultExclusionCapability
    mode.  In this section, we describe the\n   migration steps to consider while
    transitioning from a non-MT network\n   to an MT network.\n   Consider a network
    with a backbone area and a set of non-backbone\n   areas functioning in standard
    OSPF mode.  We would like to migrate to\n   an MT network either partially or
    completely.\n   1.  As required, part of an area is upgraded to be MT capable.
    \ The\n       MT routers will interact with non-MT routers in the default\n       topology
    and participate in other topologies as required.\n   2.  If a new non-backbone
    area is created for MT routers, it may be\n       configured in DefaultExclusionCapability
    mode since there is no\n       interaction required with non-MT routers.  In this
    mode, the\n       default topology can be excluded on links as required.\n   3.
    \ If there are several non-backbone areas where MT is being used,\n       it is
    desirable that the backbone area first be upgraded to be MT\n       capable so
    that inter-area routing is ensured for MT destinations\n       in different areas.\n
    \  4.  Gradually, the whole network can be made MT capable.\n   Note that inter-area
    routing for the MT-area still depends on the\n   backbone area.  Therefore, if
    different areas configured for a given\n   topology need to communicate, the backbone
    area also needs to be\n   configured for this topology.\n"
  title: 6.  Migration from Non-MT-Area to MT-Area
- contents:
  - "7.  MT Network Management Considerations\n   When multiple OSPF topologies exist
    within a domain, some of the\n   routers can be configured to participate in a
    subset of the MTs in\n   the network.  This section discusses some of the options
    we have to\n   enable operations or the network management stations to access
    those\n   routers.\n"
  - contents:
    - "7.1.  Create Dedicated Management Topology to Include All the Nodes\n   This
      approach is to set up a dedicated management topology or 'in-\n   band' management
      topology.  This 'mgmt' topology will include all the\n   routers need to be
      managed.  The computed routes in the topology will\n   be installed into the
      'mgmt' Routing Information Base (RIB).  In the\n   condition of the 'mgmt' topology
      uses a set of non-overlapping\n   address space with the default topology, those
      'mgmt' routes can also\n   be optionally installed into the default RIB.  The
      advantages of\n   duplicate 'mgmt' routes in both RIBs include: the network
      management\n   utilities on the system do not have to be modified to use specific\n
      \  RIB other than the default RIB; the 'mgmt' topology can share the\n   same
      link with the default topology if so designed.\n"
    title: 7.1.  Create Dedicated Management Topology to Include All the Nodes
  - contents:
    - "7.2.  Extend the Default Topology to All the Nodes\n   Even in the case in
      which default topology is not used on some of the\n   nodes in the IP forwarding,
      we may want to extend the default\n   topology to those nodes for the purpose
      of network management.\n   Operators SHOULD set a high cost on the links that
      belong to the\n   extended portion of the default topology.  This way, the IP
      data\n   traffic will not be forwarded through those nodes during network\n
      \  topology changes.\n"
    title: 7.2.  Extend the Default Topology to All the Nodes
  title: 7.  MT Network Management Considerations
- contents:
  - "8.  Security Considerations\n   This document does not raise any security issues
    that are not already\n   covered in [OSPF].\n"
  title: 8.  Security Considerations
- contents:
  - "9.  IANA Considerations\n   The T-bit as defined in [TOS-OSPF] for a router's
    TOS capability is\n   redefined as the MT-bit in this document.  IANA has assigned
    the MT-\n   bit as defined in Section 4.1.\n   Similarly, the TOS field for Router-LSAs,
    Summary-LSAs, and Type-5\n   and Type-7 AS-external-LSAs, as defined in [OSPF],
    is redefined as\n   MT-ID in Section 3.7.\n   IANA created a new registry, \"OSPF
    Multi-Topology ID Values\", with\n   the assignments and registration policies
    listed in Section 3.7 of\n   this document.\n"
  title: 9.  IANA Considerations
- contents:
  - '10.  References

    '
  - contents:
    - "10.1.  Normative References\n   [DEMAND]        Moy, J., \"Extending OSPF to
      Support Demand Circuits\",\n                   RFC 1793, April 1995.\n   [NSSA]
      \         Murphy, P., \"The OSPF Not-So-Stubby Area (NSSA)\n                   Option\",
      RFC 3101, January 2003.\n   [OSPF]          Moy, J., \"OSPF Version 2\", RFC
      2328, April 1998.\n   [RFC-KEYWORDS]  Bradner, S., \"Key words for use in RFCs
      to Indicate\n                   Requirement Levels\", BCP 14, RFC 2119, March
      1997.\n   [RFC3692]       Narten, T., \"Assigning Experimental and Testing\n
      \                  Numbers Considered Useful\", RFC 3692, January 2004.\n   [TOS-OSPF]
      \     Moy, J., \"OSPF Version 2\", RFC 1583, March 1994.\n"
    title: 10.1.  Normative References
  - contents:
    - "10.2.  Informative References\n   [M-ISIS]        Przygienda, T., Shen, N.,
      and N. Sheth, \"M-ISIS:\n                   Multi Topology (MT) Routing in IS-IS\",
      Work\n                   in Progress, October 2005.\n   [STUB]          Retana,
      A., Nguyen, L., White, R., Zinin, A., and D.\n                   McPherson,
      \"OSPF Stub Router Advertisement\",\n                   RFC 3137, June 2001.\n"
    title: 10.2.  Informative References
  title: 10.  References
- contents:
  - "Appendix A.  Acknowledgments\n   The authors would like to thank Scott Sturgess,
    Alvaro Retana, David\n   Kushi, Yakov Rekhter, Tony Przygienda, and Naiming Shen
    for their\n   comments on the document.  Special thanks to Acee Lindem for editing\n
    \  and to Tom Henderson for an extensive review during the OSPF Working\n   Group
    last call.\n"
  title: Appendix A.  Acknowledgments
- contents:
  - "Appendix B.  OSPF Data Formats\n   LSA content defined in [OSPF] is modified
    to introduce the MT-ID.\n"
  - contents:
    - "B.1.  Router-LSAs\n   Router-LSAs are the Type 1 LSAs.  Each router in an area
      originates a\n   router-LSA.  The LSA describes the state and cost of the router's\n
      \  links (i.e., interfaces) to the area.  All of the router's links to\n   the
      area must be described in a single router-LSA.  For details\n   concerning the
      construction of router-LSAs, see Section 12.4.1 of\n   [OSPF].\n     0                   1
      \                  2                   3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4
      5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |            LS age             |     Options   |       1       |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                        Link State ID                          |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                     Advertising Router                        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                     LS sequence number                        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |         LS checksum           |             length            |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |*|*|*|N|W|V|E|B|        0      |            # links            |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                          Link ID                              |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                         Link Data                             |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |     Type      |     # MT-ID   |            metric             |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |     MT-ID     |       0       |          MT-ID  metric        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                              ...                              |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |     MT-ID     |       0       |          MT-ID  metric        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                          Link ID                              |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                         Link Data                             |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                              ...                              |\n                        Figure
      2: Router-LSA Format\n"
    title: B.1.  Router-LSAs
  - contents:
    - "B.2.  Network-LSAs\n   Network-LSAs are the Type 2 LSAs.  A network-LSA is
      originated for\n   each broadcast and Non-Broadcast Multi-Access (NBMA) network
      in the\n   area that supports two or more routers.  The network-LSA is\n   originated
      by the network's Designated Router.  The LSA describes all\n   routers attached
      to the network, including the Designated Router\n   itself.  The LSA's Link
      State ID field lists the IP interface address\n   of the Designated Router.\n
      \  The distance from the network to all attached routers is zero.  This\n   is
      why metric fields need not be specified in the network-LSA.  For\n   details
      concerning the construction of network-LSAs, see Section\n   12.4.2 of [OSPF].\n
      \    0                   1                   2                   3\n     0 1
      2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |            LS age             |      Options  |      2        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                        Link State ID                          |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                     Advertising Router                        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                     LS sequence number                        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |         LS checksum           |             length            |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                         Network Mask                          |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                        Attached Router                        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                              ...                              |\n                       Figure
      3: Network-LSA Format\n   Note that network-LSA does not contain any MT-ID fields
      as the cost\n   of the network to the attached routers is 0 and DR is shared
      by all\n   topologies.\n"
    title: B.2.  Network-LSAs
  - contents:
    - "B.3.  Summary-LSAs\n   Summary-LSAs are the Type 3 and 4 LSAs.  These LSAs
      are originated by\n   area border routers.  Summary-LSAs describe inter-area
      destinations.\n   For details concerning the construction of summary-LSAs, see
      Section\n   12.4.3 of [OSPF].\n   Type 3 summary-LSAs are used when the destination
      is an IP network.\n   In this case the LSA's Link State ID field is an IP network
      number\n   (if necessary, the Link State ID can also have one or more of the\n
      \  network's \"host\" bits set; see Appendix E of [OSPF] for details).\n   When
      the destination is an AS boundary router, a Type 4 summary-LSA\n   is used,
      and the Link State ID field is the AS boundary router's OSPF\n   Router ID.
      \ (To see why it is necessary to advertise the location of\n   each ASBR, consult
      Section 16.4 of [OSPF].)  Other than the\n   difference in the Link State ID
      field, the format of Type 3 and 4\n   summary-LSAs is identical.\n     0                   1
      \                  2                   3\n     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4
      5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |            LS age             |     Options   |    3 or 4     |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                        Link State ID                          |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                     Advertising Router                        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                     LS sequence number                        |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |         LS checksum           |             length            |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                         Network Mask                          |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |       0       |                  metric                       |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |     MT-ID     |                MT-ID  metric                  |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                              ...                              |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |     MT-ID     |                MT-ID  metric                  |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \                      Figure 4: Summary-LSA Format\n"
    title: B.3.  Summary-LSAs
  - contents:
    - "B.4.  AS-external-LSAs\n   AS-external-LSAs are the Type 5 LSAs.  These LSAs
      are originated by\n   AS boundary routers, and describe destinations external
      to the AS.\n   For details concerning the construction of AS-external-LSAs,
      see\n   Section 12.4.3 of [OSPF].\n   AS-external-LSAs usually describe a particular
      external destination.\n   For these LSAs, the Link State ID field specifies
      an IP network\n   number (if necessary, the Link State ID can also have one
      or more of\n   the network's \"host\" bits set; see Appendix E of [OSPF] for
      details).\n   AS-external-LSAs are also used to describe a default route.  Default\n
      \  routes are used when no specific route exists to the destination.\n   When
      describing a default route, the Link State ID is always set to\n   DefaultDestination
      (0.0.0.0) and the Network Mask is set to 0.0.0.0.\n      0                   1
      \                  2                   3\n      0 1 2 3 4 5 6 7 8 9 0 1 2 3
      4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |            LS age             |     Options   |      5        |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                        Link State ID                          |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                     Advertising Router                        |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                     LS sequence number                        |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |         LS checksum           |             length            |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                         Network Mask                          |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |E|     0       |                  metric                       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                      Forwarding address                       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                      External Route Tag                       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |E|    MT-ID    |              MT-ID  metric                    |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                      Forwarding address                       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                      External Route Tag                       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                              ...                              |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |E|    MT-ID    |              MT-ID  metric                    |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                      Forwarding address                       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \     |                      External Route Tag                       |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \                    Figure 5: AS-External-LSA Format\n"
    title: B.4.  AS-external-LSAs
  - contents:
    - "B.5.  Type-7 AS-external-LSAs\n   Type-7 AS-external-LSAs are originated by
      AS boundary routers local\n   to an NSSA (Not-So-Stubby Area), and describe
      destinations external\n   to the AS.  The changes to Type-7 AS-external-LSAs
      are identical to\n   those for AS-external-LSAs (Appendix A.4.5 of [OSPF]).
      \ For details\n   concerning the construction of Type-7 AS-external-LSAs, see
      Section\n   2.4 of [NSSA].\n"
    title: B.5.  Type-7 AS-external-LSAs
  title: Appendix B.  OSPF Data Formats
- contents:
  - "Authors' Addresses\n   Peter Psenak\n   Cisco Systems\n   Mlynske Nivy 43\n   821
    09\n   Bratislava\n   Slovakia\n   EMail: ppsenak@cisco.com\n   Sina Mirtorabi\n
    \  Force10 Networks\n   1440 McCarthy Blvd\n   Milpitas, CA  95035\n   USA\n   EMail:
    sina@force10networks.com\n   Abhay Roy\n   Cisco Systems\n   170 West Tasman Drive\n
    \  San Jose, CA  95134\n   USA\n   EMail: akr@cisco.com\n   Liem Nguyen\n   Cisco
    Systems\n   170 West Tasman Drive\n   San Jose, CA  95134\n   USA\n   EMail: lhnguyen@cisco.com\n
    \  Padma Pillay-Esnault\n   Cisco Systems\n   170 West Tasman Drive\n   San Jose,
    CA  95134\n   USA\n   EMail: ppe@cisco.com\n"
  title: Authors' Addresses
- contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2007).\n   This document
    is subject to the rights, licenses and restrictions\n   contained in BCP 78, and
    except as set forth therein, the authors\n   retain all their rights.\n   This
    document and the information contained herein are provided on an\n   \"AS IS\"
    basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n   OR IS SPONSORED
    BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE INTERNET ENGINEERING
    TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED, INCLUDING BUT NOT
    LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION HEREIN WILL NOT INFRINGE
    ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
    PURPOSE.\n"
  title: Full Copyright Statement
- contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or
    scope of any\n   Intellectual Property Rights or other rights that might be claimed
    to\n   pertain to the implementation or use of the technology described in\n   this
    document or the extent to which any license under such rights\n   might or might
    not be available; nor does it represent that it has\n   made any independent effort
    to identify any such rights.  Information\n   on the procedures with respect to
    rights in RFC documents can be\n   found in BCP 78 and BCP 79.\n   Copies of IPR
    disclosures made to the IETF Secretariat and any\n   assurances of licenses to
    be made available, or the result of an\n   attempt made to obtain a general license
    or permission for the use of\n   such proprietary rights by implementers or users
    of this\n   specification can be obtained from the IETF on-line IPR repository
    at\n   http://www.ietf.org/ipr.\n   The IETF invites any interested party to bring
    to its attention any\n   copyrights, patents or patent applications, or other
    proprietary\n   rights that may cover technology that may be required to implement\n
    \  this standard.  Please address the information to the IETF at\n   ietf-ipr@ietf.org.\n"
  title: Intellectual Property
- contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided
    by the\n   Internet Society.\n"
  title: Acknowledgement
