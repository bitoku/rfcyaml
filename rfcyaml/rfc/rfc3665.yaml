- title: __initial_text__
  contents:
  - '      Session Initiation Protocol (SIP) Basic Call Flow Examples

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This document specifies an Internet Best Current Practices\
    \ for the\n   Internet Community, and requests discussion and suggestions for\n\
    \   improvements.  Distribution of this memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2003).  All Rights Reserved.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document gives examples of Session Initiation Protocol (SIP)\n\
    \   call flows.  Elements in these call flows include SIP User Agents and\n  \
    \ Clients, SIP Proxy and Redirect Servers.  Scenarios include SIP\n   Registration\
    \ and SIP session establishment.  Call flow diagrams and\n   message details are\
    \ shown.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Overview . . . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  2\n       1.1.  General Assumptions. . . . . . . . . . . . . .\
    \ . . . . .  3\n       1.2.  Legend for Message Flows . . . . . . . . . . . .\
    \ . . . .  3\n       1.3.  SIP Protocol Assumptions . . . . . . . . . . . . .\
    \ . . .  4\n   2.  SIP Registration . . . . . . . . . . . . . . . . . . . . .\
    \ . .  4\n       2.1.  Successful New Registration. . . . . . . . . . . . . .\
    \ .  5\n       2.2.  Update of Contact List . . . . . . . . . . . . . . . . .\
    \  7\n       2.3.  Request for Current Contact List . . . . . . . . . . . .  8\n\
    \       2.4.  Cancellation of Registration . . . . . . . . . . . . . .  9\n  \
    \     2.5.  Unsuccessful Registration. . . . . . . . . . . . . . . . 10\n   3.\
    \  SIP Session Establishment. . . . . . . . . . . . . . . . . . . 12\n       3.1.\
    \  Successful Session Establishment . . . . . . . . . . . . 12\n       3.2.  Session\
    \ Establishment Through Two Proxies. . . . . . . . 15\n       3.3.  Session with\
    \ Multiple Proxy Authentication . . . . . . . 26\n       3.4.  Successful Session\
    \ with Proxy Failure. . . . . . . . . . 37\n       3.5.  Session Through a SIP\
    \ ALG. . . . . . . . . . . . . . . . 46\n       3.6.  Session via Redirect and\
    \ Proxy Servers with SDP in ACK . 54\n       3.7.  Session with re-INVITE (IP\
    \ Address Change) . . . . . . . 61\n       3.8.  Unsuccessful No Answer . . .\
    \ . . . . . . . . . . . . . . 67\n       3.9.  Unsuccessful Busy. . . . . . .\
    \ . . . . . . . . . . . . . 75\n       3.10. Unsuccessful No Response from User\
    \ Agent . . . . . . . . 80\n       3.11. Unsuccessful Temporarily Unavailable\
    \ . . . . . . . . . . 85\n   4.  Security Considerations. . . . . . . . . . .\
    \ . . . . . . . . . 91\n   5.  References . . . . . . . . . . . . . . . . . .\
    \ . . . . . . . . 91\n       5.1.  Normative References . . . . . . . . . . .\
    \ . . . . . . . 91\n       5.2.  Informative References . . . . . . . . . . .\
    \ . . . . . . 91\n   6.  Intellectual Property Statement. . . . . . . . . . .\
    \ . . . . . 91\n   7.  Acknowledgments. . . . . . . . . . . . . . . . . . . .\
    \ . . . . 92\n   8.  Authors' Addresses . . . . . . . . . . . . . . . . . . .\
    \ . . . 93\n   9.  Full Copyright Statement . . . . . . . . . . . . . . . . .\
    \ . . 94\n"
- title: 1.  Overview
  contents:
  - "1.  Overview\n   The call flows shown in this document were developed in the\
    \ design of\n   a SIP IP communications network.  They represent an example minimum\n\
    \   set of functionality.\n   It is the hope of the authors that this document\
    \ will be useful for\n   SIP implementers, designers, and protocol researchers\
    \ alike and will\n   help further the goal of a standard implementation of RFC\
    \ 3261 [1].\n   These flows represent carefully checked and working group reviewed\n\
    \   scenarios of the most basic examples as a companion to the\n   specifications.\n\
    \   These call flows are based on the current version 2.0 of SIP in RFC\n   3261\
    \ [1] with SDP usage described in RFC 3264 [2].  Other RFCs also\n   comprise\
    \ the SIP standard but are not used in this set of basic call\n   flows.\n   Call\
    \ flow examples of SIP interworking with the PSTN through gateways\n   are contained\
    \ in a companion document, RFC 3666 [5].\n   The key words \"MUST\", \"MUST NOT\"\
    , \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    ,  \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in BCP 14, RFC 2119 [4].\n"
- title: 1.1.  General Assumptions
  contents:
  - "1.1.  General Assumptions\n   A number of architecture, network, and protocol\
    \ assumptions underlie\n   the call flows in this document.  Note that these assumptions\
    \ are not\n   requirements.  They are outlined in this section so that they may\
    \ be\n   taken into consideration and to aid in the understanding of the call\n\
    \   flow examples.\n   The authentication of SIP User Agents in these example\
    \ call flows is\n   performed using HTTP Digest as defined in [1] and [3].\n \
    \  Some Proxy Servers in these call flows insert Record-Route headers\n   into\
    \ requests to ensure that they are in the signaling path for\n   future message\
    \ exchanges.\n   These flows show TCP, TLS, and UDP for transport.  See the discussion\n\
    \   in RFC 3261 for details on the transport issues for SIP.\n"
- title: 1.2.  Legend for Message Flows
  contents:
  - "1.2.  Legend for Message Flows\n   Dashed lines (---) represent signaling messages\
    \ that are mandatory to\n   the call scenario.  These messages can be SIP or PSTN\
    \ signaling.  The\n   arrow indicates the direction of message flow.\n   Double\
    \ dashed lines (===) represent media paths between network\n   elements.\n   Messages\
    \ with parentheses around their name represent optional\n   messages.\n   Messages\
    \ are identified in the Figures as F1, F2, etc.  This\n   references the message\
    \ details in the list that follows the Figure.\n   Comments in the message details\
    \ are shown in the following form:\n    /* Comments. */\n"
- title: 1.3.  SIP Protocol Assumptions
  contents:
  - "1.3.  SIP Protocol Assumptions\n   This document does not prescribe the flows\
    \ precisely as they are\n   shown, but rather the flows illustrate the principles\
    \ for best\n   practice.  They are best practices usages (orderings, syntax,\n\
    \   selection of features for the purpose, handling of error) of SIP\n   methods,\
    \ headers and parameters.  IMPORTANT: The exact flows here\n   must not be copied\
    \ as is by an implementer due to specific incorrect\n   characteristics that were\
    \ introduced into the document for\n   convenience and are listed below.  To sum\
    \ up, the basic flows\n   represent well-reviewed examples of SIP usage, which\
    \ are best common\n   practice according to IETF consensus.\n   For simplicity\
    \ in reading and editing the document, there are a\n   number of differences between\
    \ some of the examples and actual SIP\n   messages.  For example, the HTTP Digest\
    \ responses are not actual MD5\n   encodings.  Call-IDs are often repeated, and\
    \ CSeq counts often begin\n   at 1.  Header fields are usually shown in the same\
    \ order.  Usually\n   only the minimum required header field set is shown, others\
    \ that\n   would normally be present such as Accept, Supported, Allow, etc are\n\
    \   not shown.\n   Actors:\n   Element       Display Name   URI              \
    \           IP Address\n   -------       ------------   ---                  \
    \       ----------\n   User Agent    Alice          alice@atlanta.example.com\
    \   192.0.2.101\n   User Agent    Bob            bob@biloxi.example.com      192.0.2.201\n\
    \   User Agent                   bob@chicago.example.com     192.0.2.100\n   Proxy\
    \ Server                 ss1.atlanta.example.com     192.0.2.111\n   Proxy/Registrar\
    \              ss2.biloxi.example.com      192.0.2.222\n   Proxy Server      \
    \           ss3.chicago.example.com     192.0.2.233\n   ALG                  \
    \        alg1.atlanta.example.com    192.0.2.128\n"
- title: 2.  SIP Registration
  contents:
  - "2.  SIP Registration\n   Registration binds a particular device Contact URI with\
    \ a SIP user\n   Address of Record (AOR).\n"
- title: 2.1.  Successful New Registration
  contents:
  - "2.1.  Successful New Registration\n    Bob                        SIP Server\n\
    \     |                               |\n     |          REGISTER F1         \
    \ |\n     |------------------------------>|\n     |      401 Unauthorized F2 \
    \     |\n     |<------------------------------|\n     |          REGISTER F3 \
    \         |\n     |------------------------------>|\n     |            200 OK\
    \ F4          |\n     |<------------------------------|\n     |              \
    \                 |\n   Bob sends a SIP REGISTER request to the SIP server.  The\
    \ request\n   includes the user's contact list.  This flow shows the use of HTTP\n\
    \   Digest for authentication using TLS transport.  TLS transport is used\n  \
    \ due to the lack of integrity protection in HTTP Digest and the danger\n   of\
    \ registration hijacking without it, as described in RFC 3261 [1].\n   The SIP\
    \ server provides a challenge to Bob.  Bob enters her/his valid\n   user ID and\
    \ password.  Bob's SIP client encrypts the user information\n   according to the\
    \ challenge issued by the SIP server and sends the\n   response to the SIP server.\
    \  The SIP server validates the user's\n   credentials.  It registers the user\
    \ in its contact database and\n   returns a response (200 OK) to Bob's SIP client.\
    \  The response\n   includes the user's current contact list in Contact headers.\
    \  The\n   format of the authentication shown is HTTP digest.  It is assumed\n\
    \   that Bob has not previously registered with this Server.\n   Message Details\n\
    \   F1 REGISTER Bob -> SIP Server\n   REGISTER sips:ss2.biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n  \
    \ Max-Forwards: 70\n   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n\
    \   To: Bob <sips:bob@biloxi.example.com>\n   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n\
    \   CSeq: 1 REGISTER\n   Contact: <sips:bob@client.biloxi.example.com>\n   Content-Length:\
    \ 0\n   F2 401 Unauthorized SIP Server -> Bob\n   SIP/2.0 401 Unauthorized\n \
    \  Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n   \
    \ ;received=192.0.2.201\n   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n\
    \   To: Bob <sips:bob@biloxi.example.com>;tag=1410948204\n   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n\
    \   CSeq: 1 REGISTER\n   WWW-Authenticate: Digest realm=\"atlanta.example.com\"\
    , qop=\"auth\",\n    nonce=\"ea9c8e88df84f1cec4341ae6cbe5a359\",\n    opaque=\"\
    \", stale=FALSE, algorithm=MD5\n   Content-Length: 0\n   F3 REGISTER Bob -> SIP\
    \ Server\n   REGISTER sips:ss2.biloxi.example.com SIP/2.0\n   Via: SIP/2.0/TLS\
    \ client.biloxi.example.com:5061;branch=z9hG4bKnashd92\n   Max-Forwards: 70\n\
    \   From: Bob <sips:bob@biloxi.example.com>;tag=ja743ks76zlflH\n   To: Bob <sips:bob@biloxi.example.com>\n\
    \   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n   CSeq: 2 REGISTER\n   Contact:\
    \ <sips:bob@client.biloxi.example.com>\n   Authorization: Digest username=\"bob\"\
    , realm=\"atlanta.example.com\"\n    nonce=\"ea9c8e88df84f1cec4341ae6cbe5a359\"\
    , opaque=\"\",\n    uri=\"sips:ss2.biloxi.example.com\",\n    response=\"dfe56131d1958046689d83306477ecc\"\
    \n   Content-Length: 0\n   F4 200 OK SIP Server -> Bob\n   SIP/2.0 200 OK\n  \
    \ Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashd92\n    ;received=192.0.2.201\n\
    \   From: Bob <sips:bob@biloxi.example.com>;tag=ja743ks76zlflH\n   To: Bob <sips:bob@biloxi.example.com>;tag=37GkEhwl6\n\
    \   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n   CSeq: 2 REGISTER\n   Contact:\
    \ <sips:bob@client.biloxi.example.com>;expires=3600\n   Content-Length: 0\n"
- title: 2.2.  Update of Contact List
  contents:
  - "2.2.  Update of Contact List\n   Bob                        SIP Server\n    \
    \ |                               |\n     |          REGISTER F1          |\n\
    \     |------------------------------>|\n     |            200 OK F2         \
    \ |\n     |<------------------------------|\n     |                          \
    \     |\n   Bob wishes to update the list of addresses where the SIP server will\n\
    \   redirect or forward INVITE requests.\n   Bob sends a SIP REGISTER request\
    \ to the SIP server.  Bob's request\n   includes an updated contact list.  Since\
    \ the user already has\n   authenticated with the server, the user supplies authentication\n\
    \   credentials with the request and is not challenged by the server. The\n  \
    \ SIP server validates the user's credentials.  It registers the user\n   in its\
    \ contact database, updates the user's contact list, and returns\n   a response\
    \ (200 OK) to Bob's SIP client.  The response includes the\n   user's current\
    \ contact list in Contact headers.\n   Message Details\n   F1 REGISTER Bob ->\
    \ SIP Server\n   REGISTER sips:ss2.biloxi.example.com SIP/2.0\n   Via: SIP/2.0/TLS\
    \ client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n   Max-Forwards: 70\n\
    \   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n   To: Bob <sips:bob@biloxi.example.com>\n\
    \   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n   CSeq: 1 REGISTER\n   Contact:\
    \ mailto:bob@biloxi.example.com\n   Authorization: Digest username=\"bob\", realm=\"\
    atlanta.example.com\",\n    qop=\"auth\", nonce=\"1cec4341ae6cbe5a359ea9c8e88df84f\"\
    , opaque=\"\",\n    uri=\"sips:ss2.biloxi.example.com\",\n    response=\"71ba27c64bd01de719686aa4590d5824\"\
    \n   Content-Length: 0\n   F2 200 OK SIP Server -> Bob\n   SIP/2.0 200 OK\n  \
    \ Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n    ;received=192.0.2.201\n\
    \   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n   To: Bob <sips:bob@biloxi.example.com>;tag=34095828jh\n\
    \   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n   CSeq: 1 REGISTER\n   Contact:\
    \ <sips:bob@client.biloxi.example.com>;expires=3600\n   Contact: <mailto:bob@biloxi.example.com>;expires=4294967295\n\
    \   Content-Length: 0\n"
- title: 2.3.  Request for Current Contact List
  contents:
  - "2.3.  Request for Current Contact List\n   Bob                        SIP Server\n\
    \     |                               |\n     |          REGISTER F1         \
    \ |\n     |------------------------------>|\n     |            200 OK F2     \
    \     |\n     |<------------------------------|\n     |                      \
    \         |\n   Bob sends a register request to the Proxy Server containing no\n\
    \   Contact headers, indicating the user wishes to query the server for\n   the\
    \ user's current contact list.  Since the user already has\n   authenticated with\
    \ the server, the user supplies authentication\n   credentials with the request\
    \ and is not challenged by the server.\n   The SIP server validates the user's\
    \ credentials.  The server returns\n   a response (200 OK) which includes the\
    \ user's current registration\n   list in Contact headers.\n   Message Details\n\
    \   F1 REGISTER Bob -> SIP Server\n   REGISTER sips:ss2.biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n  \
    \ Max-Forwards: 70\n   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n\
    \   To: Bob <sips:bob@biloxi.example.com>\n   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n\
    \   CSeq: 1 REGISTER\n   Authorization: Digest username=\"bob\", realm=\"atlanta.example.com\"\
    ,\n    nonce=\"df84f1cec4341ae6cbe5ap359a9c8e88\", opaque=\"\",\n    uri=\"sips:ss2.biloxi.example.com\"\
    ,\n    response=\"aa7ab4678258377c6f7d4be6087e2f60\"\n   Content-Length: 0\n \
    \  F2 200 OK SIP Server -> Bob\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n\
    \    ;received=192.0.2.201\n   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n\
    \   To: Bob <sips:bob@biloxi.example.com>;tag=jqoiweu75\n   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n\
    \   CSeq: 1 REGISTER\n   Contact: <sips:bob@client.biloxi.example.com>;expires=3600\n\
    \   Contact: <mailto:bob@biloxi.example.com>;expires=4294967295\n   Content-Length:\
    \ 0\n"
- title: 2.4.  Cancellation of Registration
  contents:
  - "2.4.  Cancellation of Registration\n   Bob                         SIP Server\n\
    \     |                               |\n     |          REGISTER F1         \
    \ |\n     |------------------------------>|\n     |            200 OK F2     \
    \     |\n     |<------------------------------|\n     |                      \
    \         |\n   Bob wishes to cancel their registration with the SIP server. \
    \ Bob\n   sends a SIP REGISTER request to the SIP server.  The request has an\n\
    \   expiration period of 0 and applies to all existing contact locations.\n  \
    \ Since the user already has authenticated with the server, the user\n   supplies\
    \ authentication credentials with the request and is not\n   challenged by the\
    \ server.  The SIP server validates the user's\n   credentials.  It clears the\
    \ user's contact list, and returns a\n   response (200 OK) to Bob's SIP client.\n\
    \   Message Details\n   F1 REGISTER Bob -> SIP Server\n   REGISTER sips:ss2.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n\
    \   Max-Forwards: 70\n   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n\
    \   To: Bob <sips:bob@biloxi.example.com>\n   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n\
    \   CSeq: 1 REGISTER\n   Expires: 0\n   Contact: *\n   Authorization: Digest username=\"\
    bob\", realm=\"atlanta.example.com\",\n    nonce=\"88df84f1cac4341aea9c8ee6cbe5a359\"\
    , opaque=\"\",\n    uri=\"sips:ss2.biloxi.example.com\",\n    response=\"ff0437c51696f9a76244f0cf1dbabbea\"\
    \n   Content-Length: 0\n   F2 200 OK SIP Server -> Bob\n   SIP/2.0 200 OK\n  \
    \ Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n    ;received=192.0.2.201\n\
    \   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n   To: Bob <sips:bob@biloxi.example.com>;tag=1418nmdsrf\n\
    \   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n   CSeq: 1 REGISTER\n   Content-Length:\
    \ 0\n"
- title: 2.5.  Unsuccessful Registration
  contents:
  - "2.5.  Unsuccessful Registration\n   Bob                        SIP Server\n \
    \    |                               |\n     |          REGISTER F1          |\n\
    \     |------------------------------>|\n     |      401 Unauthorized F2     \
    \ |\n     |<------------------------------|\n     |          REGISTER F3     \
    \     |\n     |------------------------------>|\n     |      401 Unauthorized\
    \ F4      |\n     |<------------------------------|\n     |                  \
    \             |\n   Bob sends a SIP REGISTER request to the SIP Server.  The SIP\
    \ server\n   provides a challenge to Bob.  Bob enters her/his user ID and\n  \
    \ password.  Bob's SIP client encrypts the user information according\n   to the\
    \ challenge issued by the SIP server and sends the response to\n   the SIP server.\
    \  The SIP server attempts to validate the user's\n   credentials, but they are\
    \ not valid (the user's password does not\n   match the password established for\
    \ the user's account).  The server\n   returns a response (401 Unauthorized) to\
    \ Bob's SIP client.\n   Message Details\n   F1 REGISTER Bob -> SIP Server\n  \
    \ REGISTER sips:ss2.biloxi.example.com SIP/2.0\n   Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n\
    \    ;received=192.0.2.201\n   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n\
    \   To: Bob <sips:bob@biloxi.example.com>\n   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n\
    \   CSeq: 1 REGISTER\n   Contact: <sips:bob@client.biloxi.example.com>\n   Content-Length:\
    \ 0\n   F2 Unauthorized SIP Server -> Bob\n   SIP/2.0 401 Unauthorized\n   Via:\
    \ SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashds7\n    ;received=192.0.2.201\n\
    \   From: Bob <sips:bob@biloxi.example.com>;tag=a73kszlfl\n   To: Bob <sips:bob@biloxi.example.com>;tag=1410948204\n\
    \   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n   CSeq: 1 REGISTER\n   WWW-Authenticate:\
    \ Digest realm=\"atlanta.example.com\", qop=\"auth\",\n    nonce=\"f1cec4341ae6ca9c8e88df84be55a359\"\
    ,\n    opaque=\"\", stale=FALSE, algorithm=MD5\n   Content-Length: 0\n   F3 REGISTER\
    \ Bob -> SIP Server\n   REGISTER sips:ss2.biloxi.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashd92\n   Max-Forwards:\
    \ 70\n   From: Bob <sips:bob@biloxi.example.com>;tag=JueHGuidj28dfga\n   To: Bob\
    \ <sips:bob@biloxi.example.com>\n   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n\
    \   CSeq: 2 REGISTER\n   Contact: <sips:bob@client.biloxi.example.com>\n   Authorization:\
    \ Digest username=\"bob\", realm=\"atlanta.example.com\",\n    nonce=\"f1cec4341ae6ca9c8e88df84be55a359\"\
    , opaque=\"\",\n    uri=\"sips:ss2.biloxi.example.com\",\n    response=\"61f8470ceb87d7ebf508220214ed438b\"\
    \n   Content-Length: 0\n   /*  The response above encodes the incorrect password\
    \ */\n   F4 401 Unauthorized SIP Server -> Bob\n   SIP/2.0 401 Unauthorized\n\
    \   Via: SIP/2.0/TLS client.biloxi.example.com:5061;branch=z9hG4bKnashd92\n  \
    \  ;received=192.0.2.201\n   From: Bob <sips:bob@biloxi.example.com>;tag=JueHGuidj28dfga\n\
    \   To: Bob <sips:bob@biloxi.example.com>;tag=1410948204\n   Call-ID: 1j9FpLxk3uxtm8tn@biloxi.example.com\n\
    \   CSeq: 2 REGISTER\n   WWW-Authenticate: Digest realm=\"atlanta.example.com\"\
    , qop=\"auth\",\n    nonce=\"84f1c1ae6cbe5ua9c8e88dfa3ecm3459\",\n    opaque=\"\
    \", stale=FALSE, algorithm=MD5\n   Content-Length: 0\n"
- title: 3.  SIP Session Establishment
  contents:
  - "3.  SIP Session Establishment\n   This section details session establishment\
    \ between two SIP User\n   Agents (UAs): Alice and Bob.  Alice (sip:alice@atlanta.example.com)\n\
    \   and Bob (sip:bob@biloxi.example.com) are assumed to be SIP phones or\n   SIP-enabled\
    \ devices.  The successful calls show the initial\n   signaling, the exchange\
    \ of media information in the form of SDP\n   payloads, the establishment of the\
    \ media session, then finally the\n   termination of the call.\n   HTTP Digest\
    \ authentication is used by Proxy Servers to authenticate\n   the caller Alice.\
    \  It is assumed that Bob has registered with Proxy\n   Server Proxy 2 as per\
    \ Section 2 to be able to receive the calls via\n   the Proxy.\n"
- title: 3.1.  Successful Session Establishment
  contents:
  - "3.1.  Successful Session Establishment\n   Alice                     Bob\n  \
    \   |                        |\n     |       INVITE F1        |\n     |----------------------->|\n\
    \     |    180 Ringing F2      |\n     |<-----------------------|\n     |    \
    \                    |\n     |       200 OK F3        |\n     |<-----------------------|\n\
    \     |         ACK F4         |\n     |----------------------->|\n     |   Both\
    \ Way RTP Media   |\n     |<======================>|\n     |                 \
    \       |\n     |         BYE F5         |\n     |<-----------------------|\n\
    \     |       200 OK F6        |\n     |----------------------->|\n     |    \
    \                    |\n   In this scenario, Alice completes a call to Bob directly.\n\
    \   Message Details\n   F1 INVITE Alice -> Bob\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   F2 180 Ringing Bob -> Alice\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=8321234356\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@client.biloxi.example.com;transport=tcp>\n\
    \   Content-Length: 0\n   F3 200 OK Bob -> Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TCP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=8321234356\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com;transport=tcp>\n   Content-Type: application/sdp\n\
    \   Content-Length: 147\n   v=0\n   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F4 ACK Alice -> Bob\n   ACK sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bd5\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=8321234356\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   /* RTP streams are established between\
    \ Alice and Bob */\n   /* Bob Hangs Up with Alice. Note that the CSeq is NOT 2,\
    \ since\n      Alice and Bob maintain their own independent CSeq counts.\n   \
    \   (The INVITE was request 1 generated by Alice, and the BYE is\n      request\
    \ 1 generated by Bob) */\n   F5 BYE Bob -> Alice\n   BYE sip:alice@client.atlanta.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n\
    \   Max-Forwards: 70\n   From: Bob <sip:bob@biloxi.example.com>;tag=8321234356\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F6 200 OK Alice -> Bob\n   SIP/2.0 200\
    \ OK\n   Via: SIP/2.0/TCP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n\
    \    ;received=192.0.2.201\n   From: Bob <sip:bob@biloxi.example.com>;tag=8321234356\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n"
- title: 3.2.  Session Establishment Through Two Proxies
  contents:
  - "3.2.  Session Establishment Through Two Proxies\n   Alice           Proxy 1 \
    \         Proxy 2            Bob\n     |                |                |   \
    \             |\n     |   INVITE F1    |                |                |\n \
    \    |--------------->|                |                |\n     |     407 F2 \
    \    |                |                |\n     |<---------------|            \
    \    |                |\n     |     ACK F3     |                |            \
    \    |\n     |--------------->|                |                |\n     |   INVITE\
    \ F4    |                |                |\n     |--------------->|   INVITE\
    \ F5    |                |\n     |     100  F6    |--------------->|   INVITE\
    \ F7    |\n     |<---------------|     100  F8    |--------------->|\n     | \
    \               |<---------------|                |\n     |                | \
    \               |     180 F9     |\n     |                |    180 F10     |<---------------|\n\
    \     |     180 F11    |<---------------|                |\n     |<---------------|\
    \                |     200 F12    |\n     |                |    200 F13     |<---------------|\n\
    \     |     200 F14    |<---------------|                |\n     |<---------------|\
    \                |                |\n     |     ACK F15    |                |\
    \                |\n     |--------------->|    ACK F16     |                |\n\
    \     |                |--------------->|     ACK F17    |\n     |           \
    \     |                |--------------->|\n     |                Both Way RTP\
    \ Media                |\n     |<================================================>|\n\
    \     |                |                |     BYE F18    |\n     |           \
    \     |    BYE F19     |<---------------|\n     |     BYE F20    |<---------------|\
    \                |\n     |<---------------|                |                |\n\
    \     |     200 F21    |                |                |\n     |--------------->|\
    \     200 F22    |                |\n     |                |--------------->|\
    \     200 F23    |\n     |                |                |--------------->|\n\
    \     |                |                |                |\n   In this scenario,\
    \ Alice completes a call to Bob using two proxies\n   Proxy 1 and Proxy 2.  The\
    \ initial INVITE (F1) contains a pre-loaded\n   Route header with the address\
    \ of Proxy 1 (Proxy 1 is configured as a\n   default outbound proxy for Alice).\
    \  The request does not contain the\n   Authorization credentials Proxy 1 requires,\
    \ so a 407 Proxy\n   Authorization response is sent containing the challenge information.\n\
    \   A new INVITE (F4) is then sent containing the correct credentials and\n  \
    \ the call proceeds.  The call terminates when Bob disconnects by\n   initiating\
    \ a BYE message.\n   Proxy 1 inserts a Record-Route header into the INVITE message\
    \ to\n   ensure that it is present in all subsequent message exchanges.  Proxy\n\
    \   2 also inserts itself into the Record-Route header.  The ACK (F15)\n   and\
    \ BYE (F18) both have a Route header.\n   Message Details\n   F1 INVITE Alice\
    \ -> Proxy 1\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/TCP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74b43\n   Max-Forwards: 70\n \
    \  Route: <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   /* Proxy 1 challenges Alice for authentication */\n   F2 407 Proxy Authorization\
    \ Required Proxy 1 -> Alice\n   SIP/2.0 407 Proxy Authorization Required\n   Via:\
    \ SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74b43\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=3flal12sf\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 1 INVITE\n   Proxy-Authenticate:\
    \ Digest realm=\"atlanta.example.com\", qop=\"auth\",\n    nonce=\"f84f1cec41e6cbe5aea9c8e88d359\"\
    ,\n    opaque=\"\", stale=FALSE, algorithm=MD5\n   Content-Length: 0\n   F3 ACK\
    \ Alice -> Proxy 1\n   ACK sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/TCP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74b43\n   Max-Forwards: 70\n \
    \  From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=3flal12sf\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 1 ACK\n   Content-Length:\
    \ 0\n   /* Alice responds be re-sending the INVITE with authentication\n     \
    \ credentials in it. */\n   F4 INVITE Alice -> Proxy 1\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.atlanta.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com;transport=tcp>\n   Proxy-Authorization:\
    \ Digest username=\"alice\",\n    realm=\"atlanta.example.com\",\n    nonce=\"\
    wf84f1ceczx41ae6cbe5aea9c8e88d359\", opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\"\
    ,\n    response=\"42ce3cef44b22f50c6a6071bc8\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /* Proxy 1 accepts the credentials and forwards the INVITE to\
    \ Proxy\n   2.  Client for Alice prepares to receive data on port 49172 from the\n\
    \   network. */\n   F5 INVITE Proxy 1 -> Proxy 2\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   Record-Route: <sip:ss1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com;transport=tcp>\n   Content-Type: application/sdp\n\
    \   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F6 100 Trying Proxy 1 -> Alice\n   SIP/2.0 100 Trying\n   Via:\
    \ SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 2 INVITE\n   Content-Length:\
    \ 0\n   F7 INVITE Proxy 2 -> Bob\n   INVITE sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   \
    \ ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Max-Forwards: 68\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:alice@client.atlanta.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   F8 100 Trying Proxy 2 -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TCP\
    \ ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Content-Length: 0\n   F9 180 Ringing Bob -> Proxy 2\n \
    \  SIP/2.0 180 Ringing\n   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   Contact: <sip:bob@client.biloxi.example.com;transport=tcp>\n   CSeq: 2 INVITE\n\
    \   Content-Length: 0\n   F10 180 Ringing Proxy 2 -> Proxy 1\n   SIP/2.0 180 Ringing\n\
    \   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   \
    \ ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   Contact: <sip:bob@client.biloxi.example.com;transport=tcp>\n   CSeq: 2 INVITE\n\
    \   Content-Length: 0\n   F11 180 Ringing Proxy 1 -> Alice\n   SIP/2.0 180 Ringing\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n \
    \   <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   Contact: <sip:bob@client.biloxi.example.com;transport=tcp>\n   CSeq: 2 INVITE\n\
    \   Content-Length: 0\n   F12 200 OK Bob -> Proxy 2\n   SIP/2.0 200 OK\n   Via:\
    \ SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n    ;received=192.0.2.222\n\
    \   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   \
    \ ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:bob@client.biloxi.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527\
    \ 2890844527 IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.201\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F13 200 OK Proxy\
    \ 2 -> Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:bob@client.biloxi.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527\
    \ 2890844527 IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.201\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F14 200 OK Proxy\
    \ 1 -> Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:bob@client.biloxi.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527\
    \ 2890844527 IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.201\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F15 ACK Alice\
    \ -> Proxy 1\n   ACK sip:bob@client.biloxi.example.com SIP/2.0\n   Via: SIP/2.0/TCP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74b76\n   Max-Forwards: 70\n \
    \  Route: <sip:ss1.atlanta.example.com;lr>,\n    <sip:ss2.biloxi.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 2 ACK\n   Content-Length:\
    \ 0\n   F16 ACK Proxy 1 -> Proxy 2\n   ACK sip:bob@client.biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   Via:\
    \ SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74b76\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   Route: <sip:ss2.biloxi.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 2 ACK\n   Content-Length:\
    \ 0\n   F17 ACK Proxy 2 -> Bob\n   ACK sip:bob@client.biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n   Via:\
    \ SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74b76\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 68\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 2 ACK\n   Content-Length: 0\n   /* RTP streams are established between\
    \ Alice and Bob */\n   /* Bob Hangs Up with Alice. */\n   /* Again, note that\
    \ the CSeq is NOT 3.  Alice and Bob maintain\n      their own separate CSeq counts\
    \ */\n   F18 BYE Bob -> Proxy 2\n   BYE sip:alice@client.atlanta.example.com SIP/2.0\n\
    \   Via: SIP/2.0/TCP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n  \
    \ Max-Forwards: 70\n   Route: <sip:ss2.biloxi.example.com;lr>,\n    <sip:ss1.atlanta.example.com;lr>\n\
    \   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 1 BYE\n   Content-Length:\
    \ 0\n   F19 BYE Proxy 2 -> Proxy 1\n   BYE sip:alice@client.atlanta.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Via: SIP/2.0/TCP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n  \
    \  ;received=192.0.2.201\n   Max-Forwards: 69\n   Route: <sip:ss1.atlanta.example.com;lr>\n\
    \   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   Call-ID: 3848276298220188511@atlanta.example.com\n   CSeq: 1 BYE\n   Content-Length:\
    \ 0\n   F20 BYE Proxy 1 -> Alice\n   BYE sip:alice@client.atlanta.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n    ;received=192.0.2.222\n\
    \   Via: SIP/2.0/TCP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n  \
    \  ;received=192.0.2.201\n   Max-Forwards: 68\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F21 200 OK Alice -> Proxy 1\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/TCP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n\
    \    ;received=192.0.2.201\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F22 200 OK Proxy 1 -> Proxy 2\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/TCP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n\
    \    ;received=192.0.2.101\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F23 200 OK Proxy 2 -> Bob\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/TCP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n\
    \    ;received=192.0.2.201\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 3848276298220188511@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n"
- title: 3.3.  Session with Multiple Proxy Authentication
  contents:
  - "3.3.  Session with Multiple Proxy Authentication\n     Alice        Proxy 1 \
    \    Proxy 2         Bob\n       |            |           |             |\n  \
    \     |  INVITE F1 |           |             |\n       |----------->|        \
    \   |             |\n       |  407 Proxy Authorization Required F2 |\n       |<-----------|\
    \           |             |\n       |   ACK F3   |           |             |\n\
    \       |----------->|           |             |\n       |  INVITE F4 |      \
    \     |             |\n       |----------->|           |             |\n     \
    \  |   100 F5   |           |             |\n       |<-----------| INVITE F6 |\
    \             |\n       |            |---------->|             |\n       |   \
    \         |  407 Proxy Authorization Required F7\n       |            |<----------|\
    \             |\n       |            |   ACK F8  |             |\n       |   \
    \         |---------->|             |\n       |  407 Proxy Authorization Required\
    \ F9 |\n       |<-----------|           |             |\n       |   ACK F10  |\
    \           |             |\n       |----------->|           |             |\n\
    \       |  INVITE F11|           |             |\n       |----------->|      \
    \     |             |\n       |   100 F12  |           |             |\n     \
    \  |<-----------| INVITE F13|             |\n       |            |---------->|\
    \             |\n       |            |  100 F14  |             |\n       |   \
    \         |<----------|  INVITE F15 |\n       |            |           |------------>|\n\
    \       |            |           | 200 OK F16  |\n       |            | 200 OK\
    \ F17|<------------|\n       | 200 OK F18 |<----------|             |\n      \
    \ |<-----------|           |             |\n       |   ACK F19  |           |\
    \             |\n       |----------->|  ACK F20  |             |\n       |   \
    \         |---------->|   ACK F21   |\n       |            |           |------------>|\n\
    \       |           RTP Media Path             |\n       |<====================================>|\n\
    \   In this scenario, Alice completes a call to Bob using two proxies\n   Proxy\
    \ 1 and Proxy 2.  Alice has valid credentials in both domains.\n   Since the initial\
    \ INVITE (F1) does not contain the Authorization\n   credentials Proxy 1 requires,\
    \ so a 407 Proxy Authorization response\n   is sent containing the challenge information.\
    \ A new INVITE (F4) is\n   then sent containing the correct credentials and the\
    \ call proceeds\n   after Proxy 2 challenges and receives valid credentials. \
    \ The call\n   terminates when Bob disconnects by initiating a BYE message.\n\
    \   Proxy 1 inserts a Record-Route header into the INVITE message to\n   ensure\
    \ that it is present in all subsequent message exchanges.  Proxy\n   2 also inserts\
    \ itself into the Record-Route header.\n   Message Details\n   F1 INVITE Alice\
    \ -> Proxy 1\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74b03\n   Max-Forwards: 70\n \
    \  Route: <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* Proxy 1 challenges\
    \ Alice for authentication */\n   F2 407 Proxy Authorization Required Proxy 1\
    \ -> Alice\n   SIP/2.0 407 Proxy Authorization Required\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b03\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=876321\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Proxy-Authenticate: Digest realm=\"atlanta.example.com\"\
    , qop=\"auth\",\n    nonce=\"wf84f1cczx41ae6cbeaea9ce88d359\",\n    opaque=\"\"\
    , stale=FALSE, algorithm=MD5\n   Content-Length: 0\n   F3 ACK Alice -> Proxy 1\n\
    \   ACK sip:bob@biloxi.example.com SIP/2.0\n   Max-Forwards: 70\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74b03\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=876321\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   /* Alice responds be re-sending the\
    \ INVITE with authentication\n      credentials in it.  The same Call-ID is used,\
    \ so the CSeq is\n      increased. */\n   F4 INVITE Alice -> Proxy 1\n   INVITE\
    \ sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b21\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.atlanta.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Proxy-Authorization: Digest username=\"\
    alice\",\n    realm=\"atlanta.example.com\",\n    nonce=\"wf84f1ceczx41ae6cbe5aea9c8e88d359\"\
    , opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\",\n    response=\"42ce3cef44b22f50c6a6071bc8\"\
    \n   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   /* Proxy 1 accepts the credentials and forwards the INVITE to Proxy\n   2.\
    \  Client for Alice prepares to receive data on port 49172 from the\n   network.\
    \ */\n   F5 100 Trying Proxy 1 -> Alice\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74b21\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 INVITE\n   Content-Length:\
    \ 0\n   F6 INVITE Proxy 1 -> Proxy 2\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK230f2.1\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b21\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.atlanta.example.com;lr>\n   From:\
    \ Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Content-Type: application/sdp\n \
    \  Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /* Proxy 2 challenges Alice for authentication */\n   F7 407 Proxy\
    \ Authorization Required Proxy 2 -> Proxy 1\n   SIP/2.0 407 Proxy Authorization\
    \ Required\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK230f2.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b21\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=838209\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Proxy-Authenticate: Digest realm=\"biloxi.example.com\"\
    , qop=\"auth\",\n    nonce=\"c1e22c41ae6cbe5ae983a9c8e88d359\",\n    opaque=\"\
    \", stale=FALSE, algorithm=MD5\n   Content-Length: 0\n   F8 ACK Proxy 1 -> Proxy\
    \ 2\n   ACK sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b21\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=838209\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 ACK\n   Content-Length: 0\n   /* Proxy 1 forwards the challenge to\
    \ Alice for authentication from\n   Proxy 2 */\n   F9 407 Proxy Authorization\
    \ Required Proxy 1 -> Alice\n   SIP/2.0 407 Proxy Authorization Required\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b21\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=838209\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 INVITE\n   Proxy-Authenticate:\
    \ Digest realm=\"biloxi.example.com\", qop=\"auth\",\n    nonce=\"c1e22c41ae6cbe5ae983a9c8e88d359\"\
    ,\n    opaque=\"\", stale=FALSE, algorithm=MD5\n   Content-Length: 0\n   F10 ACK\
    \ Alice -> Proxy 1\n   ACK sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74b21\n   Max-Forwards: 70\n \
    \  From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=838209\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 ACK\n   Proxy-Authorization:\
    \ Digest username=\"alice\",\n    realm=\"atlanta.example.com\",\n    nonce=\"\
    wf84f1ceczx41ae6cbe5aea9c8e88d359\", opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\"\
    ,\n    response=\"42ce3cef44b22f50c6a6071bc8\"\n   Content-Length: 0\n   /* Alice\
    \ responds be re-sending the INVITE with authentication\n   credentials for Proxy\
    \ 1 AND Proxy 2.  */\n   F11 INVITE Alice -> Proxy 1\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 3 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Proxy-Authorization:\
    \ Digest username=\"alice\",\n    realm=\"atlanta.example.com\",\n    nonce=\"\
    wf84f1ceczx41ae6cbe5aea9c8e88d359\", opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\"\
    ,\n    response=\"42ce3cef44b22f50c6a6071bc8\"\n   Proxy-Authorization: Digest\
    \ username=\"alice\",\n    realm=\"biloxi.example.com\",\n    nonce=\"c1e22c41ae6cbe5ae983a9c8e88d359\"\
    , opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\", response=\"f44ab22f150c6a56071bce8\"\
    \n   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   /* Proxy 1 finds its credentials and authorizes Alice, forwarding the\n  \
    \ INVITE to Proxy.  */\n   F12 100 Trying Proxy 1 -> Alice\n   SIP/2.0 100 Trying\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 3 INVITE\n   Content-Length: 0\n   F13 INVITE Proxy 1 -> Proxy 2\n \
    \  INVITE sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK230f2.1\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   Record-Route: <sip:ss1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 3 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Proxy-Authorization: Digest username=\"\
    alice\",\n    realm=\"biloxi.example.com\",\n    nonce=\"c1e22c41ae6cbe5ae983a9c8e88d359\"\
    , opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\", response=\"f44ab22f150c6a56071bce8\"\
    \n   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   /* Proxy 2 finds its credentials and authorizes Alice, forwarding the\n  \
    \ INVITE to Bob.  */\n   F14 100 Trying Proxy 2 -> Proxy 1\n   SIP/2.0 100 Trying\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK230f2.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 3 INVITE\n   Content-Length: 0\n   F15 INVITE Proxy 2 -> Bob\n   INVITE\
    \ sip:bob@client.biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK31972.1\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK230f2.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 68\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 3 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* Bob answers the call\
    \ immediately */\n   F16 200 OK Bob -> Proxy 2\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP\
    \ ss2.biloxi.example.com:5060;branch=z9hG4bK31972.1\n    ;received=192.0.2.222\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK230f2.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n \
    \   <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=9103874\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 3 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527 2890844527\
    \ IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F17 200 OK Proxy 2 ->\
    \ Proxy 1\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK230f2.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=9103874\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 3 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527 2890844527\
    \ IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F18 200 OK Proxy 1 ->\
    \ Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=9103874\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 3 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527 2890844527\
    \ IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F19 ACK Alice -> Proxy\
    \ 1\n   ACK sip:bob@client.biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b44\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.atlanta.example.com;lr>,\n    <sip:ss2.biloxi.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=9103874\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 3 ACK\n   Proxy-Authorization:\
    \ Digest username=\"alice\",\n    realm=\"atlanta.example.com\",\n    nonce=\"\
    wf84f1ceczx41ae6cbe5aea9c8e88d359\", opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\"\
    ,\n    response=\"42ce3cef44b22f50c6a6071bc8\"\n   Proxy-Authorization: Digest\
    \ username=\"alice\",\n    realm=\"biloxi.example.com\",\n    nonce=\"c1e22c41ae6cbe5ae983a9c8e88d359\"\
    , opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\", response=\"f44ab22f150c6a56071bce8\"\
    \n   Content-Length: 0\n   F20 ACK Proxy 1 -> Proxy 2\n   ACK sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK230f2.1\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b44\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   Route: <sip:ss2.biloxi.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=9103874\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 3 ACK\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Proxy-Authorization: Digest username=\"\
    alice\",\n    realm=\"biloxi.example.com\",\n    nonce=\"c1e22c41ae6cbe5ae983a9c8e88d359\"\
    , opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\", response=\"f44ab22f150c6a56071bce8\"\
    \n   Content-Length: 0\n   F21 ACK Proxy 2 -> Bob\n   ACK sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK31972.1\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK230f2.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b44\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 68\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=9103874\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 3 ACK\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Length:\
    \ 0\n"
- title: 3.4.  Successful Session with Proxy Failure
  contents:
  - "3.4.  Successful Session with Proxy Failure\n    Alice           Proxy 1    \
    \      Proxy 2            Bob\n      |                |                |     \
    \           |\n      |   INVITE F1    |                |                |\n  \
    \    |--------------->|                |                |\n      |   INVITE F2\
    \    |                |                |\n      |--------------->|           \
    \     |                |\n      |   INVITE F3    |                |          \
    \      |\n      |--------------->|                |                |\n      |\
    \   INVITE F4    |                |                |\n      |--------------->|\
    \                |                |\n      |   INVITE F5    |                |\
    \                |\n      |--------------->|                |                |\n\
    \      |   INVITE F6    |                |                |\n      |--------------->|\
    \                |                |\n      |   INVITE F7    |                |\
    \                |\n      |--------------->|                |                |\n\
    \      |     INVITE F8                   |                |\n      |-------------------------------->|\
    \                |\n      |            407 F9               |                |\n\
    \      |<--------------------------------|                |\n      |         \
    \    ACK F10             |                |\n      |-------------------------------->|\
    \                |\n      |           INVITE F11            |                |\n\
    \      |-------------------------------->|   INVITE F12   |\n      |         \
    \    100  F13            |--------------->|\n      |<--------------------------------|\
    \                |\n      |                                 |     180 F14    |\n\
    \      |             180 F15             |<---------------|\n      |<--------------------------------|\
    \                |\n      |                                 |     200 F16    |\n\
    \      |             200 F17             |<---------------|\n      |<--------------------------------|\
    \                |\n      |             ACK F18             |                |\n\
    \      |-------------------------------->|     ACK F19    |\n      |         \
    \                        |--------------->|\n      |                Both Way RTP\
    \ Media                |\n      |<================================================>|\n\
    \      |                                 |     BYE F20    |\n      |         \
    \    BYE F21             |<---------------|\n      |<--------------------------------|\
    \                |\n      |             200 F22             |                |\n\
    \      |-------------------------------->|     200 F23    |\n      |         \
    \                        |--------------->|\n      |                         \
    \        |                |\n   In this scenario, Alice completes a call to Bob\
    \ via a Proxy Server.\n   Alice is configured for a primary SIP Proxy Server Proxy\
    \ 1 and a\n   secondary SIP Proxy Server Proxy 2 (Or is able to use DNS SRV records\n\
    \   to locate Proxy 1 and Proxy 2).  Alice has valid credentials for both\n  \
    \ domains.  Proxy 1 is out of service and does not respond to INVITEs\n   (it\
    \ is reachable, but unresponsive).  Alice then completes the call\n   to Bob using\
    \ Proxy 2.\n   Message Details\n   F1 INVITE Alice -> Proxy 1\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK465b6d\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.atlanta.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Content-Type: application/sdp\n \
    \  Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F2 INVITE Alice -> Proxy 1\n   Same as Message F1\n   F3 INVITE\
    \ Alice -> Proxy 1\n   Same as Message F1\n   F4 INVITE Alice -> Proxy 1\n   Same\
    \ as Message F1\n   F5 INVITE Alice -> Proxy 1\n   Same as Message F1\n   F6 INVITE\
    \ Alice -> Proxy 1\n   Same as Message F1\n   F7 INVITE Alice -> Proxy 1\n   Same\
    \ as Message F1\n   /* Alice gives up on the unresponsive proxy */\n   F8 INVITE\
    \ Alice -> Proxy 2\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74b8a\n   Max-Forwards: 70\n \
    \  From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Content-Type: application/sdp\n \
    \  Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /* Proxy 2 challenges Alice for authentication */\n   F9 407 Proxy\
    \ Authorization Required Proxy 2 -> Alice\n   SIP/2.0 407 Proxy Authorization\
    \ Required\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b8a\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=2421452\n   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Proxy-Authenticate: Digest realm=\"biloxi.example.com\"\
    , qop=\"auth\",\n    nonce=\"1ae6cbe5ea9c8e8df84fqnlec434a359\",\n    opaque=\"\
    \", stale=FALSE, algorithm=MD5\n   Content-Length: 0\n   F10 ACK Alice -> Proxy\
    \ 2\n   ACK sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b8a\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=2421452\n   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   /* Alice responds by re-sending the\
    \ INVITE with authentication\n   credentials in it.  */\n   F11 INVITE Alice ->\
    \ Proxy 2\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Proxy-Authorization:\
    \ Digest username=\"alice\",\n    realm=\"biloxi.example.com\",\n    nonce=\"\
    1ae6cbe5ea9c8e8df84fqnlec434a359\", opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\"\
    ,\n    response=\"8a880c919d1a52f20a1593e228adf599\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /* Proxy 2 accepts the credentials and forwards the INVITE to\
    \ Bob.\n   Client for Alice prepares to receive data on port 49172 from the\n\
    \   network.\n   */\n   F12 INVITE Proxy 2 -> Bob\n   INVITE sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   Record-Route: <sip:ss2.biloxi.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Content-Type: application/sdp\n \
    \  Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F13 100 Trying Proxy 2 -> Alice\n   SIP/2.0 100 Trying\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n   CSeq: 2 INVITE\n   Content-Length:\
    \ 0\n   F14 180 Ringing Bob -> Proxy 2\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP\
    \ ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n    ;received=192.0.2.222\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>\n  \
    \ From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Length: 0\n   F15 180 Ringing\
    \ Proxy 2 -> Alice\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Length: 0\n   F16 200 OK Bob\
    \ -> Proxy 2\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Type: application/sdp\n   Content-Length:\
    \ 147\n   v=0\n   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F17 200 OK Proxy 2 -> Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss2.biloxi.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527 2890844527\
    \ IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F18 ACK Alice -> Proxy\
    \ 2\n   ACK sip:bob@client.biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b8g\n\
    \   Max-Forwards: 70\n   Route: <sip:ss2.biloxi.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n   CSeq: 2 ACK\n   Content-Length:\
    \ 0\n   F19 ACK Proxy 2 -> Bob\n   ACK sip:bob@client.biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b8g\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n\
    \   CSeq: 2 ACK\n   Content-Length: 0\n   /* RTP streams are established between\
    \ Alice and Bob */\n   /* Bob Hangs Up with Alice. */\n   F20 BYE Bob -> Proxy\
    \ 2\n   BYE sip:alice@client.atlanta.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n   Max-Forwards: 70\n\
    \   Route: <sip:ss2.biloxi.example.com;lr>\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F21 BYE Proxy 2 -> Alice\n   BYE sip:alice@client.atlanta.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Via: SIP/2.0/UDP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n  \
    \  ;received=192.0.2.201\n   Max-Forwards: 69\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F22 200 OK Alice -> Proxy 2\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/UDP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n\
    \    ;received=192.0.2.201\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F23 200 OK Proxy 2 -> Bob\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP client.biloxi.example.com:5060;branch=z9hG4bKnashds7\n\
    \    ;received=192.0.2.201\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 4Fde34wkd11wsGFDs3@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n"
- title: 3.5.  Session Through a SIP ALG
  contents:
  - "3.5.  Session Through a SIP ALG\n   Alice             ALG           Proxy 2 \
    \           Bob\n     |                |                |                |\n \
    \    |   INVITE F1    |                |                |\n     |--------------->|\
    \   INVITE F2    |                |\n     |     100 F3     |--------------->|\
    \   INVITE F4    |\n     |<---------------|     100 F5     |--------------->|\n\
    \     |                |<---------------|      180 F6    |\n     |           \
    \     |     180 F7     |<---------------|\n     |     180 F8     |<---------------|\
    \                |\n     |<---------------|                |      200 F9    |\n\
    \     |                |    200 F10     |<---------------|\n     |     200 F11\
    \    |<---------------|                |\n     |<---------------|            \
    \                     |\n     |     ACK F12    |                             \
    \    |\n     |--------------->|             ACK F13             |\n     |    \
    \            |-------------------------------->|\n     |    RTP Media   |    \
    \    Both Way RTP Media       |\n     |<==============>|<===============================>|\n\
    \     |     BYE F14    |                                 |\n     |--------------->|\
    \             BYE F15             |\n     |                |-------------------------------->|\n\
    \     |                |             200 F16             |\n     |     200 F17\
    \    |<--------------------------------|\n     |<---------------|            \
    \                     |\n     |                |                             \
    \    |\n   Alice completes a call to Bob through a ALG (Application Layer\n  \
    \ Gateway) and a SIP Proxy.  The routing through the ALG is\n   accomplished using\
    \ a pre-loaded Route header in the INVITE F1.  Note\n   that the media stream\
    \ setup is not end-to-end - the ALG terminates\n   both media streams and bridges\
    \ them.  This is done by the ALG\n   modifying the SDP in the INVITE (F1) and\
    \ 200 OK (F10) messages, and\n   possibly any 18x or ACK messages containing SDP.\n\
    \   In addition to firewall traversal, this Back-to-Back User Agent\n   (B2BUA)\
    \ could be used as part of an anonymizer service (in which all\n   identifying\
    \ information on Alice would be removed), or to perform\n   codec media conversion,\
    \ such as mu-law to A-law conversion of PCM on\n   an international call.\n  \
    \ Also note that Proxy 2 does not Record-Route in this call flow.\n   Message\
    \ Details\n   F1 INVITE Alice -> SIP ALG\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Route:\
    \ <sip:alg1.atlanta.example.com;lr>\n   Proxy-Authorization: Digest username=\"\
    alice\",\n    realm=\"biloxi.example.com\",\n    nonce=\"85b4f1cen4341ae6cbe5a3a9c8e88df9\"\
    , opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\",\n    response=\"b3f392f9218a328b9294076d708e6815\"\
    \n   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   /* Client for Alice prepares to receive data on port 49172 from the\n   network.\
    \ */\n   F2 INVITE SIP ALG -> Proxy 2\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n  \
    \ Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:alg1.atlanta.example.com;lr>\n   From:\
    \ Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Proxy-Authorization: Digest username=\"\
    alice\",\n    realm=\"biloxi.example.com\",\n    nonce=\"85b4f1cen4341ae6cbe5a3a9c8e88df9\"\
    , opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\",\n    response=\"b3f392f9218a328b9294076d708e6815\"\
    \n   Content-Type: application/sdp\n   Content-Length: 150\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.128\n   t=0 0\n   m=audio 2000 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   F3 100 Trying SIP ALG -> Alice\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   /* SIP ALG prepares to proxy data from port 192.0.2.128/2000 to\n   192.0.2.101/49172.\
    \   Proxy 2 uses a Location Service function to\n   determine where Bob is located.\
    \ Based upon location analysis the call\n   is forwarded to Bob */\n   F4 INVITE\
    \ Proxy 2 -> Bob\n   INVITE sip:bob@client.biloxi.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK2d4790.1\n   Via: SIP/2.0/UDP\
    \ alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n    ;received=192.0.2.128\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 68\n   Record-Route: <sip:alg1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Content-Type: application/sdp\n \
    \  Content-Length: 150\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.128\n   t=0 0\n   m=audio 2000 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F5 100 Trying Proxy 2 -> SIP ALG\n   SIP/2.0 100 Trying\n   Via:\
    \ SIP/2.0/UDP alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n    ;received=192.0.2.128\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F6 180 Ringing Bob -> Proxy 2\n \
    \  SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/UDP alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n\
    \    ;received=192.0.2.128\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:alg1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Length: 0\n   F7 180 Ringing\
    \ Proxy 2 -> SIP ALG\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n\
    \    ;received=192.0.2.128\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:alg1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Length: 0\n   F8 180 Ringing\
    \ SIP ALG -> Alice\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:alg1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Length: 0\n   F9 200 OK Bob\
    \ -> Proxy 2\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/UDP alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n\
    \    ;received=192.0.2.128\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:alg1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Type: application/sdp\n   Content-Length:\
    \ 147\n   v=0\n   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F10 200 OK Proxy 2 -> SIP ALG\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP\
    \ alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n    ;received=192.0.2.128\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Record-Route: <sip:alg1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Type: application/sdp\n   Content-Length:\
    \ 147\n   v=0\n   o=bob 2890844527 2890844527 IN IP4 client.biloxi.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F11 200 OK SIP ALG -> Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:alg1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527 2890844527\
    \ IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.128\n   t=0 0\n\
    \   m=audio 1734 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* The ALG prepares to\
    \ proxy packets from 192.0.2.128/\n      1734 to 192.0.2.201/3456 */\n   F12 ACK\
    \ Alice -> SIP ALG\n   ACK sip:bob@client.biloxi.example.com SIP/2.0\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bhh\n   Max-Forwards:\
    \ 70\n   Route: <sip:alg1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F13 ACK SIP ALG -> Bob\n   ACK sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bhh\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   /* RTP streams are established between\
    \ Alice and the ALG and\n   between the ALG and B*/\n   /* Alice Hangs Up with\
    \ Bob. */\n   F14 BYE Alice -> SIP ALG\n   BYE sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74be5\n\
    \   Max-Forwards: 70\n   Route: <sip:alg1.atlanta.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 BYE\n   Content-Length:\
    \ 0\n   F15 BYE SIP ALG -> Bob\n   BYE sip:bob@client.biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n  \
    \ Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74be5\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 BYE\n   Content-Length: 0\n   F16 200 OK Bob -> SIP ALG\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP alg1.atlanta.example.com:5060;branch=z9hG4bK739578.1\n\
    \    ;received=192.0.2.128\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74be5\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 BYE\n   Content-Length: 0\n   F17 200 OK SIP ALG -> Alice\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74be5\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 BYE\n   Content-Length: 0\n"
- title: 3.6.  Session via Redirect and Proxy Servers with SDP in ACK
  contents:
  - "3.6.  Session via Redirect and Proxy Servers with SDP in ACK\n   Alice      \
    \  Redirect Server     Proxy 3             Bob\n     |                |      \
    \          |                |\n     |   INVITE F1    |                |      \
    \          |\n     |--------------->|                |                |\n    \
    \ |     302 F2     |                |                |\n     |<---------------|\
    \                |                |\n     |     ACK F3     |                |\
    \                |\n     |--------------->|                |                |\n\
    \     |     INVITE F4                   |                |\n     |-------------------------------->|\
    \    INVITE F5   |\n     |             100  F6             |--------------->|\n\
    \     |<--------------------------------|      180 F7    |\n     |           \
    \  180 F8              |<---------------|\n     |<--------------------------------|\
    \                |\n     |                                 |     200 F9     |\n\
    \     |             200 F10             |<---------------|\n     |<--------------------------------|\
    \                |\n     |             ACK F11             |                |\n\
    \     |-------------------------------->|     ACK F12    |\n     |           \
    \                      |--------------->|\n     |                Both Way RTP\
    \ Media                |\n     |<================================================>|\n\
    \     |                                 |     BYE F13    |\n     |           \
    \  BYE F14             |<---------------|\n     |<--------------------------------|\
    \                |\n     |             200 F15             |                |\n\
    \     |-------------------------------->|     200 F16    |\n     |           \
    \                      |--------------->|\n     |                            \
    \     |                |\n   In this scenario, Alice places a call to Bob using\
    \ first a Redirect\n   server then a Proxy Server.  The INVITE message is first\
    \ sent to the\n   Redirect Server.  The Server returns a 302 Moved Temporarily\
    \ response\n   (F2) containing a Contact header with Bob's current SIP address.\n\
    \   Alice then generates a new INVITE and sends to Bob via the Proxy\n   Server\
    \ and the call proceeds normally.  In this example, no SDP is\n   present in the\
    \ INVITE, so the SDP is carried in the ACK message.\n   The call is terminated\
    \ when Bob sends a BYE message.\n   Message Details\n   F1 INVITE Alice -> Redirect\
    \ Server\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bKbf9f44\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Content-Length:\
    \ 0\n   F2 302 Moved Temporarily Redirect Proxy -> Alice\n   SIP/2.0 302 Moved\
    \ Temporarily\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bKbf9f44\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=53fHlqlQ2\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@chicago.example.com;transport=tcp>\n\
    \   Content-Length: 0\n   F3 ACK Alice -> Redirect Server\n   ACK sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bKbf9f44\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=53fHlqlQ2\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F4 INVITE Alice -> Proxy 3\n   INVITE\
    \ sip:bob@chicago.example.com SIP/2.0\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:alice@client.atlanta.example.com;transport=tcp>\n\
    \   Content-Length: 0\n   F5 INVITE Proxy 3 -> Bob\n   INVITE sip:bob@client.chicago.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss3.chicago.example.com:5060;branch=z9hG4bK721e.1\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   Record-Route: <sip:ss3.chicago.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com;transport=tcp>\n   Content-Length: 0\n\
    \   F6 100 Trying Proxy 3 -> Alice\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TCP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 INVITE\n   Content-Length:\
    \ 0\n   F7 180 Ringing Bob -> Proxy 3\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/TCP\
    \ ss3.chicago.example.com:5060;branch=z9hG4bK721e.1\n    ;received=192.0.2.233\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Record-Route: <sip:ss3.chicago.example.com;lr>\n \
    \  From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:bob@client.chicago.example.com;transport=tcp>\n   Content-Length: 0\n \
    \  F8 180 Ringing Proxy 3 -> Alice\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/TCP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss3.chicago.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:bob@client.chicago.example.com;transport=tcp>\n\
    \   Content-Length: 0\n   F9 200 OK Bob -> Proxy 3\n   SIP/2.0 200 OK\n   Via:\
    \ SIP/2.0/TCP ss3.chicago.example.com:5060;branch=z9hG4bK721e.1\n    ;received=192.0.2.233\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Record-Route: <sip:ss3.chicago.example.com;lr>\n \
    \  From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 INVITE\n   Contact:\
    \ <sip:bob@client.chicago.example.com;transport=tcp>\n   Content-Type: application/sdp\n\
    \   Content-Length: 148\n   v=0\n   o=bob 2890844527 2890844527 IN IP4 client.chicago.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.100\n   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F10 200 OK Proxy -> Alice\n   SIP/2.0 200 OK\n   Via: SIP/2.0/TCP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss3.chicago.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 INVITE\n   Contact: <sip:bob@client.chicago.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 148\n   v=0\n   o=bob 2890844527\
    \ 2890844527 IN IP4 client.chicago.example.com\n   s=-\n   c=IN IP4 192.0.2.100\n\
    \   t=0 0\n   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   /* ACK contains\
    \ SDP of Alice since none present in INVITE */\n   F11 ACK Alice -> Proxy 3\n\
    \   ACK sip:bob@client.chicago.example.com SIP/2.0\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bq9\n\
    \   Max-Forwards: 70\n   Route: <sip:ss3.chicago.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 2 ACK\n   Content-Type:\
    \ application/sdp\n   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F12 ACK Proxy 3 -> Bob\n\
    \   ACK sip:bob@client.chicago.example.com SIP/2.0\n   Via: SIP/2.0/TCP ss3.chicago.example.com:5060;branch=z9hG4bK721e.1\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bq9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 ACK\n   Content-Type: application/sdp\n   Content-Length: 151\n  \
    \ v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n  \
    \ s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /* RTP streams are established between Alice and Bob */\n   /*\
    \ Bob Hangs Up with Alice. */\n   F13 BYE Bob -> Proxy 3\n   BYE sip:alice@client.atlanta.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP client.chicago.example.com:5060;branch=z9hG4bKfgaw2\n\
    \   Max-Forwards: 70\n   Route: <sip:ss3.chicago.example.com;lr>\n   From: Bob\
    \ <sip:bob@biloxi.example.com>;tag=314159\n   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 BYE\n   Content-Length:\
    \ 0\n   F14 BYE Proxy 3 -> Alice\n   BYE sip:alice@client.atlanta.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss3.chicago.example.com:5060;branch=z9hG4bK721e.1\n\
    \    ;received=192.0.2.100\n   Via: SIP/2.0/TCP client.chicago.example.com:5060;branch=z9hG4bKfgaw2\n\
    \   Max-Forwards: 69\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n \
    \  To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F15 200 OK Alice -> Proxy 3\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/TCP ss3.chicago.example.com:5060;branch=z9hG4bK721e.1\n\
    \    ;received=192.0.2.233\n   Via: SIP/2.0/TCP client.chicago.example.com:5060;branch=z9hG4bKfgaw2\n\
    \    ;received=192.0.2.100\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n   F16 200 OK Proxy 3 -> Bob\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/TCP client.chicago.example.com:5060;branch=z9hG4bKfgaw2\n\
    \    ;received=192.0.2.100\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 BYE\n   Content-Length: 0\n"
- title: 3.7.  Session with re-INVITE (IP Address Change)
  contents:
  - "3.7.  Session with re-INVITE (IP Address Change)\n     Alice                Proxy\
    \ 2                Bob\n        |   F1 INVITE        |                    |\n\
    \        |------------------->|      F2 INVITE     |\n        |   F3 100 Trying\
    \    |------------------->|\n        |<-------------------|   F4 180 Ringing \
    \  |\n        |   F5 180 Ringing   |<-------------------|\n        |<-------------------|\
    \                    |\n        |                    |    F6 200 OK       |\n\
    \        |    F7 200 OK       |<-------------------|\n        |<-------------------|\
    \                    |\n        |                 F8  ACK                 |\n\
    \        |---------------------------------------->|\n        |      Both Way\
    \ RTP Media Established     |\n        |<=======================================>|\n\
    \        |                                         |\n        |           Bob\
    \ changes IP address        |\n        |                                     \
    \    |\n        |                 F9 INVITE               |\n        |<----------------------------------------|\n\
    \        |                F10 200 OK               |\n        |---------------------------------------->|\n\
    \        |                 F11  ACK                |\n        |<----------------------------------------|\n\
    \        |         New RTP Media Stream            |\n        |<=======================================>|\n\
    \        |                 F12 BYE                 |\n        |---------------------------------------->|\n\
    \        |               F13 200 OK                |\n        |<----------------------------------------|\n\
    \        |                                         |\n   This example shows a\
    \ session in which the media changes midway\n   through the session.  When Bob's\
    \ IP address changes during the\n   session, Bob sends a re-INVITE containing\
    \ a new Contact and SDP\n   (version number incremented) information to A.  In\
    \ this flow, the\n   proxy does not Record-Route so is not in the SIP messaging\
    \ path after\n   the initial exchange.\n   Message Details\n   F1 INVITE Alice\
    \ -> Proxy 2\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   Max-Forwards: 70\n \
    \  From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Content-Type: application/sdp\n \
    \  Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F2 INVITE Proxy 2 -> Bob\n   INVITE sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F3 100 Trying Proxy 2\
    \ -> Alice\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F4 180 Ringing Bob -> Proxy 2\n \
    \  SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Length:\
    \ 0\n   F5 180 Ringing Proxy 2 -> Alice\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Length: 0\n   F6 200 OK Bob\
    \ -> Proxy 2\n   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527 2890844527\
    \ IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F7 200 OK Proxy 2 -> Alice\n\
    \   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 147\n   v=0\n   o=bob 2890844527 2890844527\
    \ IN IP4 client.biloxi.example.com\n   s=-\n   c=IN IP4 192.0.2.201\n   t=0 0\n\
    \   m=audio 3456 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F8 ACK Alice -> Bob\n\
    \   ACK sip:bob@client.biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74b7b\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   /* RTP streams are established between\
    \ Alice and Bob */\n   /* Bob changes IP address and re-INVITEs Alice with new\
    \ Contact and\n   SDP */\n   F9 INVITE Bob -> Alice\n   INVITE sip:alice@client.atlanta.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.chicago.example.com:5060;branch=z9hG4bKlkld5l\n\
    \   Max-Forwards: 70\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n \
    \  To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 14 INVITE\n   Contact: <sip:bob@client.chicago.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 149\n   v=0\n   o=bob 2890844527 2890844528\
    \ IN IP4 client.chicago.example.com\n   s=-\n   c=IN IP4 192.0.2.100\n   t=0 0\n\
    \   m=audio 47172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F10 200 OK Alice -> Bob\n\
    \   SIP/2.0 200 OK\n   Via: SIP/2.0/UDP client.chicago.example.com:5060;branch=z9hG4bKlkld5l\n\
    \    ;received=192.0.2.100\n   Max-Forwards: 70\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 14 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 150\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n\
    \   m=audio 1000 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F11 ACK Bob -> Alice\n\
    \   ACK sip:alice@client.atlanta.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.chicago.example.com:5060;branch=z9hG4bKlkldcc\n\
    \   Max-Forwards: 70\n   From: Bob <sip:bob@biloxi.example.com>;tag=314159\n \
    \  To: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 14 ACK\n   Content-Length: 0\n   /* New RTP stream established between\
    \ Alice and Bob */\n   /* Alice hangs up with Bob */\n   F12 BYE Alice -> Bob\n\
    \   BYE sip:bob@client.chicago.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bo4\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 BYE\n   Content-Length: 0\n   F13 200 OK Bob -> Alice\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bo4\n\
    \    ;received=192.0.2.101\n   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 2 BYE\n   Content-Length: 0\n"
- title: 3.8.  Unsuccessful No Answer
  contents:
  - "3.8.  Unsuccessful No Answer\n   Alice           Proxy 1          Proxy 2   \
    \         Bob\n     |                |                |                |\n   \
    \  |   INVITE F1    |                |                |\n     |--------------->|\
    \   INVITE F2    |                |\n     |     100  F3    |--------------->|\
    \   INVITE F4    |\n     |<---------------|     100  F5    |--------------->|\n\
    \     |                |<---------------|                |\n     |           \
    \     |                |      180 F6    |\n     |                |     180 F7\
    \     |<---------------|\n     |     180 F8     |<---------------|           \
    \     |\n     |<---------------|                |                |\n     |   CANCEL\
    \ F9    |                |                |\n     |--------------->|         \
    \       |                |\n     |     200 F10    |                |         \
    \       |\n     |<---------------|   CANCEL F11   |                |\n     | \
    \               |--------------->|                |\n     |                | \
    \    200 F12    |                |\n     |                |<---------------| \
    \               |\n     |                |                |   CANCEL F13   |\n\
    \     |                |                |--------------->|\n     |           \
    \     |                |     200 F14    |\n     |                |           \
    \     |<---------------|\n     |                |                |     487 F15\
    \    |\n     |                |                |<---------------|\n     |    \
    \            |                |     ACK F16    |\n     |                |    \
    \ 487 F17    |--------------->|\n     |                |<---------------|    \
    \            |\n     |                |     ACK F18    |                |\n  \
    \   |     487 F19    |--------------->|                |\n     |<---------------|\
    \                |                |\n     |     ACK F20    |                |\
    \                |\n     |--------------->|                |                |\n\
    \     |                |                |                |\n   In this scenario,\
    \ Alice gives up on the call before Bob answers\n   (sends a 200 OK response).\
    \  Alice sends a CANCEL (F9) since no final\n   response had been received from\
    \ Bob.  If a 200 OK to the INVITE had\n   crossed with the CANCEL, Alice would\
    \ have sent an ACK then a BYE to\n   Bob in order to properly terminate the call.\n\
    \   Note that the CANCEL message is acknowledged with a 200 OK on a hop\n   by\
    \ hop basis, rather than end to end.\n   Message Details\n   F1 INVITE Alice ->\
    \ Proxy 1\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.atlanta.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Proxy-Authorization: Digest username=\"\
    alice\",\n    realm=\"atlanta.example.com\",\n    nonce=\"ze7k1ee88df84f1cec431ae6cbe5a359\"\
    , opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\",\n    response=\"b00b416324679d7e243f55708d44be7b\"\
    \n   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   /*Client for Alice prepares to receive data on port 49172 from the\n   network.*/\n\
    \   F2 INVITE Proxy 1 -> Proxy 2\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.atlanta.example.com;lr>\n   From:\
    \ Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Content-Type: application/sdp\n \
    \  Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F3 100 Trying Proxy 1 -> Alice\n   SIP/2.0 100 Trying\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F4 INVITE Proxy 2 -> Bob\n   INVITE sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   \
    \ ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   Max-Forwards: 68\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F5 100 Trying Proxy 2\
    \ -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F6 180 Ringing Bob -> Proxy 2\n \
    \  SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Length:\
    \ 0\n   F7 180 Ringing Proxy 2 -> Proxy 1\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP\
    \ ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n \
    \   <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Length:\
    \ 0\n   F8 180 Ringing Proxy 1 -> Alice\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n    <sip:ss1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Length: 0\n   F9 CANCEL Alice\
    \ -> Proxy 1\n   CANCEL sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   Max-Forwards: 70\n \
    \  From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Route: <sip:ss1.atlanta.example.com;lr>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F10 200 OK Proxy 1 -> Alice\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F11 CANCEL Proxy 1 -> Proxy 2\n \
    \  CANCEL sip:alice@atlanta.example.com SIP/2.0\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F12 200 OK Proxy 2 -> Proxy 1\n \
    \  SIP/2.0 200 OK\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F13 CANCEL Proxy 2 -> Bob\n   CANCEL\
    \ sip:bob@client.biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F14 200 OK Bob -> Proxy 2\n   SIP/2.0\
    \ 200 OK\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 CANCEL\n   Content-Length: 0\n   F15 487 Request Terminated Bob ->\
    \ Proxy 2\n   SIP/2.0 487 Request Terminated\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F16 ACK Proxy 2 -> Bob\n   ACK sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F17 487 Request Terminated Proxy 2 ->\
    \ Proxy 1\n   SIP/2.0 487 Request Terminated\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F18 ACK Proxy 1 -> Proxy 2\n   ACK\
    \ sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F19 487 Request Terminated Proxy 1 ->\
    \ Alice\n   SIP/2.0 487 Request Terminated\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   F20 ACK Alice -> Proxy 1\n   ACK sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   Proxy-Authorization: Digest username=\"alice\",\n    realm=\"atlanta.example.com\"\
    ,\n    nonce=\"ze7k1ee88df84f1cec431ae6cbe5a359\", opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\"\
    ,\n    response=\"b00b416324679d7e243f55708d44be7b\"\n   CSeq: 1 ACK\n   Content-Length:\
    \ 0\n"
- title: 3.9.  Unsuccessful Busy
  contents:
  - "3.9.  Unsuccessful Busy\n   Alice           Proxy 1          Proxy 2        \
    \    Bob\n     |                |                |                |\n     |  \
    \ INVITE F1    |                |                |\n     |--------------->|  \
    \ INVITE F2    |                |\n     |     100  F3    |--------------->|  \
    \ INVITE F4    |\n     |<---------------|     100  F5    |--------------->|\n\
    \     |                |<---------------|                |\n     |           \
    \     |                |      486 F6    |\n     |                |           \
    \     |<---------------|\n     |                |                |     ACK F7\
    \     |\n     |                |      486 F8    |--------------->|\n     |   \
    \             |<---------------|                |\n     |                |   \
    \   ACK F9    |                |\n     |     486 F10    |--------------->|   \
    \             |\n     |<---------------|                |                |\n \
    \    |     ACK F11    |                |                |\n     |--------------->|\
    \                |                |\n     |                |                |\
    \                |\n   In this scenario, Bob is busy and sends a 486 Busy Here\
    \ response to\n   Alice's INVITE.  Note that the non-2xx response is acknowledged\
    \ on a\n   hop-by-hop basis instead of end-to-end.  Also note that many SIP UAs\n\
    \   will not return a 486 response, as they have multiple line and other\n   features.\n\
    \   Message Details\n   F1 INVITE Alice -> Proxy 1\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.atlanta.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com;transport=tcp>\n   Proxy-Authorization:\
    \ Digest username=\"alice\",\n    realm=\"atlanta.example.com\",\n    nonce=\"\
    dc3a5ab2530aa93112cf5904ba7d88fa\", opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\"\
    ,\n    response=\"702138b27d869ac8741e10ec643d55be\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /*Client for Alice prepares to receive data on port 49172 from\
    \ the\n   network.*/\n   F2 INVITE Proxy 1 -> Proxy 2\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   Record-Route: <sip:ss1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com;transport=tcp>\n   Content-Type: application/sdp\n\
    \   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F3 100 Trying Proxy 1 -> Alice\n   SIP/2.0 100 Trying\n   Via:\
    \ SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F4 INVITE Proxy 2 -> Bob\n   INVITE sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   \
    \ ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Max-Forwards: 68\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com;transport=tcp>\n\
    \   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   F5 100 Trying Proxy 2 -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/TCP\
    \ ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F6 486 Busy Here Bob -> Proxy 2\n\
    \   SIP/2.0  486 Busy Here\n   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F7 ACK Proxy 2 -> Bob\n   ACK sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/TCP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F8 486 Busy Here Proxy 2 -> Proxy 1\n\
    \   SIP/2.0  486 Busy Here\n   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F9 ACK Proxy 1 -> Proxy 2\n   ACK\
    \ sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/TCP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F10 486 Busy Here Proxy 1 -> Alice\n\
    \   SIP/2.0  486 Busy Here\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F11 ACK Alice -> Proxy 1\n   ACK\
    \ sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/TCP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Proxy-Authorization: Digest username=\"alice\",\n    realm=\"\
    atlanta.example.com\",\n    nonce=\"dc3a5ab2530aa93112cf5904ba7d88fa\", opaque=\"\
    \",\n    uri=\"sip:bob@biloxi.example.com\",\n    response=\"702138b27d869ac8741e10ec643d55be\"\
    \n   Content-Length: 0\n"
- title: 3.10.  Unsuccessful No Response from User Agent
  contents:
  - "3.10.  Unsuccessful No Response from User Agent\n   Alice           Proxy 1 \
    \         Proxy 2            Bob\n     |                |                |   \
    \             |\n     |   INVITE F1    |                |                |\n \
    \    |--------------->|   INVITE F2    |                |\n     |     100  F3\
    \    |--------------->|   INVITE F4    |\n     |<---------------|     100  F5\
    \    |--------------->|\n     |                |<---------------|   INVITE F6\
    \    |\n     |                |                |--------------->|\n     |    \
    \            |                |   INVITE F7    |\n     |                |    \
    \            |--------------->|\n     |                |                |   INVITE\
    \ F8    |\n     |                |                |--------------->|\n     | \
    \               |                |   INVITE F9    |\n     |                | \
    \               |--------------->|\n     |                |                | \
    \  INVITE F10   |\n     |                |                |--------------->|\n\
    \     |                |                |   INVITE F11   |\n     |           \
    \     |     480 F12    |--------------->|\n     |                |<---------------|\
    \                |\n     |                |     ACK F13    |                |\n\
    \     |     480 F14    |--------------->|                |\n     |<---------------|\
    \                |                |\n     |     ACK F15    |                |\
    \                |\n     |--------------->|                |                |\n\
    \     |                |                |                |\n   In this example,\
    \ there is no response from Bob to Alice's INVITE\n   messages being re-transmitted\
    \ by Proxy 2.  After the sixth\n   re-transmission, Proxy 2 gives up and sends\
    \ a 480 No Response to\n   Alice.\n   Message Details\n   F1 INVITE Alice -> Proxy\
    \ 1\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   Route: <sip:ss1.atlanta.example.com;lr>\n   From: Alice\
    \ <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Proxy-Authorization: Digest username=\"\
    alice\",\n    realm=\"atlanta.example.com\",\n    nonce=\"cf5904ba7d8dc3a5ab2530aa931128fa\"\
    , opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\",\n    response=\"7afc04be7961f053c24f80e7dbaf888f\"\
    \n   Content-Type: application/sdp\n   Content-Length: 151\n   v=0\n   o=alice\
    \ 2890844526 2890844526 IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4\
    \ 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n\
    \   /*Client for Alice prepares to receive data on port 49172 from the\n   network.*/\n\
    \   F2 INVITE Proxy 1 -> Proxy 2\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Max-Forwards: 69\n   Record-Route: <sip:ss1.atlanta.example.com;lr>\n   From:\
    \ Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Content-Type: application/sdp\n \
    \  Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F3 100 Trying Proxy 1 -> Alice\n   SIP/2.0 100 Trying\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F4 INVITE Proxy 2 -> Bob\n   INVITE sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   \
    \ ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Max-Forwards: 68\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \   <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F5 100 Trying Proxy 2\
    \ -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F6 INVITE Proxy 2 -> Bob\n   Resend\
    \ of Message F4\n   F7 INVITE Proxy 2 -> Bob\n   Resend of Message F4\n   F8 INVITE\
    \ Proxy 2 -> Bob\n   Resend of Message F4\n   F9 INVITE Proxy 2 -> Bob\n   Resend\
    \ of Message F4\n   F10 INVITE Proxy 2 -> Bob\n   Resend of Message F4\n   F11\
    \ INVITE Proxy 2 -> Bob\n   Resend of Message F4\n   /* Proxy 2 gives up */\n\
    \   F12 480 No Response Proxy 2 -> Proxy 1\n   SIP/2.0 480 No Response\n   Via:\
    \ SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F13 ACK Proxy 1 -> Proxy 2\n   ACK\
    \ sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F14 480 No Response Proxy 1 -> Alice\n\
    \   SIP/2.0 480 No Response\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F15 ACK Alice -> Proxy 1\n   ACK\
    \ sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Proxy-Authorization: Digest username=\"alice\",\n    realm=\"\
    atlanta.example.com\",\n    nonce=\"cf5904ba7d8dc3a5ab2530aa931128fa\", opaque=\"\
    \",\n    uri=\"sip:bob@biloxi.example.com\",\n    response=\"7afc04be7961f053c24f80e7dbaf888f\"\
    \n   Content-Length: 0\n"
- title: 3.11.  Unsuccessful Temporarily Unavailable
  contents:
  - "3.11.  Unsuccessful Temporarily Unavailable\n   Alice          Proxy 1      \
    \    Proxy 2            Bob\n     |                |                |        \
    \        |\n     |   INVITE F1    |                |                |\n     |--------------->|\
    \   INVITE F2    |                |\n     |     100  F3    |--------------->|\
    \   INVITE F4    |\n     |<---------------|     100  F5    |--------------->|\n\
    \     |                |<---------------|      180 F6    |\n     |           \
    \     |     180 F7     |<---------------|\n     |     180 F8     |<---------------|\
    \                |\n     |<---------------|                |     480 F9     |\n\
    \     |                |                |<---------------|\n     |           \
    \     |                |     ACK F10    |\n     |                |     480 F11\
    \    |--------------->|\n     |                |<---------------|            \
    \    |\n     |                |     ACK F12    |                |\n     |    \
    \ 480 F13    |--------------->|                |\n     |<---------------|    \
    \            |                |\n     |     ACK F14    |                |    \
    \            |\n     |--------------->|                |                |\n  \
    \   |                |                |                |\n   In this scenario,\
    \ Bob initially sends a 180 Ringing response to\n   Alice, indicating that alerting\
    \ is taking place.  However, then a\n   480 Unavailable is then sent to Alice.\
    \  This response is\n   acknowledged then proxied back to Alice.\n   Message Details\n\
    \   F1 INVITE Alice -> Proxy 1\n   INVITE sip:bob@biloxi.example.com SIP/2.0\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   Max-Forwards:\
    \ 70\n   Route: <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Proxy-Authorization:\
    \ Digest username=\"alice\",\n    realm=\"atlanta.example.com\",\n    nonce=\"\
    aa9311cf5904ba7d8dc3a5ab253028fa\", opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\"\
    ,\n    response=\"59a46a91bf1646562a4d486c84b399db\"\n   Content-Type: application/sdp\n\
    \   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   /*Client for Alice prepares to receive data on port 49172 from\
    \ the\n   network.*/\n   F2 INVITE Proxy 1 -> Proxy 2\n   INVITE sip:bob@biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Max-Forwards: 69\n   Record-Route: <sip:ss1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:alice@client.atlanta.example.com>\n   Content-Type: application/sdp\n \
    \  Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526 IN IP4 client.atlanta.example.com\n\
    \   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0\
    \ PCMU/8000\n   F3 100 Trying Proxy 1 -> Alice\n   SIP/2.0 100 Trying\n   Via:\
    \ SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Content-Length:\
    \ 0\n   F4 INVITE Proxy 2 -> Bob\n   INVITE sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   \
    \ ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Max-Forwards: 68\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:alice@client.atlanta.example.com>\n   Content-Type:\
    \ application/sdp\n   Content-Length: 151\n   v=0\n   o=alice 2890844526 2890844526\
    \ IN IP4 client.atlanta.example.com\n   s=-\n   c=IN IP4 192.0.2.101\n   t=0 0\n\
    \   m=audio 49172 RTP/AVP 0\n   a=rtpmap:0 PCMU/8000\n   F5 100 Trying Proxy 2\
    \ -> Proxy 1\n   SIP/2.0 100 Trying\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F6 180 Ringing Bob -> Proxy 2\n \
    \  SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \    ;received=192.0.2.222\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n\
    \    <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Length:\
    \ 0\n   F7 180 Ringing Proxy 2 -> Proxy 1\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP\
    \ ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n    ;received=192.0.2.111\n\
    \   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n   \
    \ ;received=192.0.2.101\n   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n \
    \   <sip:ss1.atlanta.example.com;lr>\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Contact: <sip:bob@client.biloxi.example.com>\n   Content-Length:\
    \ 0\n   F8 180 Ringing Proxy 1 -> Alice\n   SIP/2.0 180 Ringing\n   Via: SIP/2.0/UDP\
    \ client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n    ;received=192.0.2.101\n\
    \   Record-Route: <sip:ss2.biloxi.example.com;lr>,\n    <sip:ss1.atlanta.example.com;lr>\n\
    \   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n\
    \   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n   CSeq: 1 INVITE\n   Contact:\
    \ <sip:bob@client.biloxi.example.com>\n   Content-Length: 0\n   F9 480 Temporarily\
    \ Unavailable Bob -> Proxy 2\n   SIP/2.0 480 Temporarily Unavailable\n   Via:\
    \ SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n    ;received=192.0.2.222\n\
    \   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n   \
    \ ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F10 ACK Proxy 2 -> Bob\n   ACK sip:bob@client.biloxi.example.com\
    \ SIP/2.0\n   Via: SIP/2.0/UDP ss2.biloxi.example.com:5060;branch=z9hG4bK721e4.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F11 480 Temporarily Unavailable Proxy\
    \ 2 -> Proxy 1\n   SIP/2.0 480 Temporarily Unavailable\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \    ;received=192.0.2.111\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F12 ACK Proxy 1 -> Proxy 2\n   ACK\
    \ sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP ss1.atlanta.example.com:5060;branch=z9hG4bK2d4790.1\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 ACK\n   Content-Length: 0\n   F13 480 Temporarily Unavailable Proxy\
    \ 1 -> Alice\n   SIP/2.0 480 Temporarily Unavailable\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \    ;received=192.0.2.101\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   CSeq: 1 INVITE\n   Content-Length: 0\n   F14 ACK Alice -> Proxy 1\n   ACK\
    \ sip:bob@biloxi.example.com SIP/2.0\n   Via: SIP/2.0/UDP client.atlanta.example.com:5060;branch=z9hG4bK74bf9\n\
    \   Max-Forwards: 70\n   From: Alice <sip:alice@atlanta.example.com>;tag=9fxced76sl\n\
    \   To: Bob <sip:bob@biloxi.example.com>;tag=314159\n   Call-ID: 2xTb9vxSit55XU7p8@atlanta.example.com\n\
    \   Proxy-Authorization: Digest username=\"alice\",\n    realm=\"atlanta.example.com\"\
    ,\n    nonce=\"aa9311cf5904ba7d8dc3a5ab253028fa\", opaque=\"\",\n    uri=\"sip:bob@biloxi.example.com\"\
    ,\n    response=\"59a46a91bf1646562a4d486c84b399db\"\n   CSeq: 1 ACK\n   Content-Length:\
    \ 0\n"
- title: 4.  Security Considerations
  contents:
  - "4.  Security Considerations\n   Since this document contains examples of SIP\
    \ session establishment,\n   the security considerations in RFC 3261 [1] apply.\
    \  RFC 3261\n   describes the basic threats including registration hijacking,\
    \ server\n   impersonation, message body tampering, session modifying or teardown,\n\
    \   and denial of service and amplification attacks.  The use of HTTP\n   Digest\
    \ as shown in this document provides one-way authentication and\n   protection\
    \ against replay attacks.  TLS transport is used in\n   registration scenarios\
    \ due to the lack of integrity protection in\n   HTTP Digest and the danger of\
    \ registration hijacking without it, as\n   described in RFC 3261 [1].  A full\
    \ discussion of the weaknesses of\n   HTTP Digest is provided in RFC 3261 [1].\
    \  The use of TLS and the\n   Secure SIP (sips) URI scheme provides a better level\
    \ of security\n   including two-way authentication.  S/MIME can provide end-to-end\n\
    \   confidentiality and integrity protection of message bodies, as\n   described\
    \ in RFC 3261.\n"
- title: 5.  References
  contents:
  - '5.  References

    '
- title: 5.1.  Normative References
  contents:
  - "5.1.  Normative References\n   [1] Rosenberg, J., Schulzrinne, H., Camarillo,\
    \ G., Johnston, A.,\n       Peterson, J., Sparks, R., Handley, M. and E. Schooler,\
    \ \"SIP:\n       Session Initiation Protocol\", RFC 3261, June 2002.\n   [2] Rosenberg,\
    \ J. and H. Schulzrinne, \"An Offer/Answer Model with\n       SDP\", RFC 3264,\
    \ April 2002.\n   [3] Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence, S.,\
    \ Leach,\n       P., Luotonen, A. and L. Stewart, \"HTTP authentication: Basic\
    \ and\n       Digest Access Authentication\", RFC 2617, June 1999.\n   [4] Bradner,\
    \ S., \"Key words for use in RFCs to Indicate Requirement\n       Levels\", BCP\
    \ 14, RFC 2119, March 1997.\n"
- title: 5.2.  Informative References
  contents:
  - "5.2.  Informative References\n   [5] Johnston, A., Donovan, S., Sparks, R., Cunningham,\
    \ C. and K.\n       Summers, \"Session Initiation Protocol (SIP) Public Switched\n\
    \       Telephone Network (PSTN) Call Flows\", BCP 76, RFC 3666, December\n  \
    \     2003.\n"
- title: 6.  Intellectual Property Statement
  contents:
  - "6.  Intellectual Property Statement\n   The IETF takes no position regarding\
    \ the validity or scope of any\n   intellectual property or other rights that\
    \ might be claimed to\n   pertain to the implementation or use of the technology\
    \ described in\n   this document or the extent to which any license under such\
    \ rights\n   might or might not be available; neither does it represent that it\n\
    \   has made any effort to identify any such rights.  Information on the\n   IETF's\
    \ procedures with respect to rights in standards-track and\n   standards-related\
    \ documentation can be found in BCP-11.  Copies of\n   claims of rights made available\
    \ for publication and any assurances of\n   licenses to be made available, or\
    \ the result of an attempt made to\n   obtain a general license or permission\
    \ for the use of such\n   proprietary rights by implementors or users of this\
    \ specification can\n   be obtained from the IETF Secretariat.\n   The IETF invites\
    \ any interested party to bring to its attention any\n   copyrights, patents or\
    \ patent applications, or other proprietary\n   rights which may cover technology\
    \ that may be required to practice\n   this standard.  Please address the information\
    \ to the IETF Executive\n   Director.\n"
- title: 7.  Acknowledgments
  contents:
  - "7.  Acknowledgments\n   This document is has been a group effort by the SIP and\
    \ SIPPING WGs.\n   The authors wish to thank everyone who has read, reviewed,\
    \ commented,\n   or made suggestions to improve this document.\n   Thanks to Rohan\
    \ Mahy, Adam Roach, Gonzalo Camarillo, Cullen Jennings,\n   and Tom Taylor for\
    \ their detailed comments during the final review.\n   Thanks to Dean Willis for\
    \ his early contributions to the development\n   of this document.\n   The authors\
    \ wish to thank Kundan Singh for performing parser\n   validation of messages.\n\
    \   The authors wish to thank the following individuals for their\n   participation\
    \ in the review of this call flows document: Aseem\n   Agarwal, Rafi Assadi, Ben\
    \ Campbell, Sunitha Kumar, Jon Peterson, Marc\n   Petit-Huguenin, Vidhi Rastogi,\
    \ and Bodgey Yin Shaohua.\n   The authors also wish to thank the following individuals\
    \ for their\n   assistance: Jean-Francois Mule, Hemant Agrawal, Henry Sinnreich,\n\
    \   David Devanatham, Joe Pizzimenti, Matt Cannon, John Hearty, the whole\n  \
    \ MCI WorldCom IPOP Design team, Scott Orton, Greg Osterhout, Pat\n   Sollee,\
    \ Doug Weisenberg, Danny Mistry, Steve McKinnon, and Denise\n   Ingram, Denise\
    \ Caballero, Tom Redman, Ilya Slain, Pat Sollee, John\n   Truetken, and others\
    \ from MCI WorldCom, 3Com, Cisco, Lucent and\n   Nortel.\n"
- title: 8.  Authors' Addresses
  contents:
  - "8.  Authors' Addresses\n   All listed authors actively contributed large amounts\
    \ of text to this\n   document.\n   Alan Johnston\n   MCI\n   100 South 4th Street\n\
    \   St. Louis, MO 63102\n   USA\n   EMail: alan.johnston@mci.com\n   Steve Donovan\n\
    \   dynamicsoft, Inc.\n   5100 Tennyson Parkway\n   Suite 1200\n   Plano, Texas\
    \ 75024\n   USA\n   EMail: sdonovan@dynamicsoft.com\n   Robert Sparks\n   dynamicsoft,\
    \ Inc.\n   5100 Tennyson Parkway\n   Suite 1200\n   Plano, Texas 75024\n   USA\n\
    \   EMail: rsparks@dynamicsoft.com\n   Chris Cunningham\n   dynamicsoft, Inc.\n\
    \   5100 Tennyson Parkway\n   Suite 1200\n   Plano, Texas 75024\n   USA\n   EMail:\
    \ ccunningham@dynamicsoft.com\n   Kevin Summers\n   Sonus\n   1701 North Collins\
    \ Blvd, Suite 3000\n   Richardson, TX 75080\n   USA\n   EMail: kevin.summers@sonusnet.com\n"
- title: 9.  Full Copyright Statement
  contents:
  - "9.  Full Copyright Statement\n   Copyright (C) The Internet Society (2003). \
    \ All Rights Reserved.\n   This document and translations of it may be copied\
    \ and furnished to\n   others, and derivative works that comment on or otherwise\
    \ explain it\n   or assist in its implementation may be prepared, copied, published\n\
    \   and distributed, in whole or in part, without restriction of any\n   kind,\
    \ provided that the above copyright notice and this paragraph are\n   included\
    \ on all such copies and derivative works.  However, this\n   document itself\
    \ may not be modified in any way, such as by removing\n   the copyright notice\
    \ or references to the Internet Society or other\n   Internet organizations, except\
    \ as needed for the purpose of\n   developing Internet standards in which case\
    \ the procedures for\n   copyrights defined in the Internet Standards process\
    \ must be\n   followed, or as required to translate it into languages other than\n\
    \   English.\n   The limited permissions granted above are perpetual and will\
    \ not be\n   revoked by the Internet Society or its successors or assignees.\n\
    \   This document and the information contained herein is provided on an\n   \"\
    AS IS\" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING\n   TASK FORCE\
    \ DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING\n   BUT NOT LIMITED\
    \ TO ANY WARRANTY THAT THE USE OF THE INFORMATION\n   HEREIN WILL NOT INFRINGE\
    \ ANY RIGHTS OR ANY IMPLIED WARRANTIES OF\n   MERCHANTABILITY OR FITNESS FOR A\
    \ PARTICULAR PURPOSE.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
