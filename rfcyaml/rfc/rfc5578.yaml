- title: __initial_text__
  contents:
  - ''
- title: Independent Submission                                     B. Berry, Ed.
  contents:
  - "Independent Submission                                     B. Berry, Ed.\n PPP\
    \ over Ethernet (PPPoE) Extensions for Credit Flow and Link Metrics\n"
- title: Abstract
  contents:
  - "Abstract\n   This document extends the Point-to-Point Protocol over Ethernet\n\
    \   (PPPoE) with an optional credit-based flow control mechanism and an\n   optional\
    \ Link Quality Metric report.  These optional extensions\n   improve the performance\
    \ of PPPoE over media with variable bandwidth\n   and limited buffering, such\
    \ as mobile point-to-point radio links.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This is a contribution to\
    \ the RFC Series, independently of any other\n   RFC stream.  The RFC Editor has\
    \ chosen to publish this document at\n   its discretion and makes no statement\
    \ about its value for\n   implementation or deployment.  Documents approved for\
    \ publication by\n   the RFC Editor are not a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc5578.\n"
- title: IESG Note
  contents:
  - "IESG Note\n   The PPP Extensions Working Group (PPPEXT) has reservations about\
    \ the\n   desirability of the feature described in this document.  In\n   particular,\
    \ it solves a general problem at an inappropriate layer and\n   it may have unpredictable\
    \ interactions with higher and lower level\n   protocols.  The techniques described\
    \ in this document are intended\n   for use with a particular deployment technique\
    \ that uses a PPP\n   termination separated from a radio termination by an Ethernet,\
    \ and\n   that has radio-side flow control for a slower PPP-only link to remote\n\
    \   nodes.  Implementors are better advised to avoid split termination\n   with\
    \ inter-media protocol translation, and use standard Internet\n   Protocol routing\
    \ instead.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2010 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http:trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Terminology .....................................................4\n  \
    \ 3. Overview of Protocol Extensions .................................5\n    \
    \  3.1. TLVs .......................................................5\n      \
    \     3.1.1. Credits TLV .........................................5\n        \
    \   3.1.2. Metrics TLV .........................................6\n          \
    \ 3.1.3. Sequence Number TLV .................................7\n           3.1.4.\
    \ Credit Scale Factor TLV .............................8\n      3.2. Discovery\
    \ Stage Extensions .................................8\n           3.2.1. PPPoE\
    \ Active Discovery Request (PADR) ...............9\n           3.2.2. PPPoE Active\
    \ Discovery Session-Confirmation\n                  (PADS) .............................................11\n\
    \           3.2.3. PPPoE Active Discovery Session-Grant (PADG) ........13\n  \
    \         3.2.4. PPPoE Active Discovery Session-Credit\n                  Response\
    \ (PADC) ....................................15\n           3.2.5. PPPoE Active\
    \ Discovery Quality (PADQ) ..............16\n      3.3. PPP Session Stage Extensions\
    \ ..............................18\n   4. Credit Flow Considerations .....................................19\n\
    \   5. PADG and PADC Retransmission ...................................20\n  \
    \ 6. Other Considerations ...........................................20\n   7.\
    \ IANA Considerations ............................................21\n   8. Security\
    \ Considerations ........................................21\n   9. References\
    \ .....................................................21\n      9.1. Normative\
    \ References ......................................21\n      9.2. Informative\
    \ References ....................................21\n   Appendix A. Examples of\
    \ Session Credit Flows ......................22\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   PPP over Ethernet (PPPoE) [2] is a protocol for establishing\
    \ and\n   encapsulating sessions between Hosts (Clients) and traffic-access\n\
    \   aggregators (Servers) for PPP [1] transport over real or emulated\n   Ethernet.\
    \  PPPoE works well when both session endpoints have similar\n   bandwidth, forwarding,\
    \ and buffering capabilities that do not vary\n   over time.  However, improvements\
    \ can be made for applications with\n   variable bandwidth and limited buffering.\
    \  This document addresses\n   these improvements with optional extensions to\
    \ PPPoE that support\n   credit-based session flow control and session-based link\
    \ metric\n   quality reports.\n   These extensions are designed to support radio\
    \ systems that exhibit\n   point-to-point waveforms.  The diagram below is used\
    \ to illustrate\n   the improvement that these extensions address.  When the local\
    \ Client\n   (Radio) detects the presence of a remote Radio neighbor, it initiates\n\
    \   a PPPoE session with its local Server (router).  The Radio also\n   establishes\
    \ a radio link connection with the remote Radio over the\n   point-to-point RF\
    \ (radio frequency) link (which is beyond the scope\n   of this document).  The\
    \ remote Radio is also establishing a PPPoE\n   session with its local Server\
    \ (router).  The Radios associate the two\n   PPPoE sessions and the point-to-point\
    \ radio link protocol (RLP),\n   creating a complete data path.  Now a PPP session\
    \ is established via\n   the PPP IP Control Protocol (IPCP) as described in RFC\
    \ 1661.\n   Included in this IPCP exchange is the router IP address.  With the\n\
    \   exchange of the IPCP IP addresses, each router inserts the remote IP\n   address\
    \ into its local routing tables.  Note that the radio IP\n   information is not\
    \ inserted into the routing tables.\n   |-----Local Neighbor-----|          |-----Remote\
    \ Neighbor----|\n   +--------+       +-------+          +-------+       +--------+\n\
    \   | Router |=======| Radio |{~~~~~~~~}| Radio |=======| Router |\n   | Server\
    \ |       | Client|          | Client|       | Server |\n   +--------+       +-------+\
    \          +-------+       +--------+\n            |       |       |         \
    \ |       |       |\n            |-PPPoE-|       |----RLP---|       |-PPPoE-|\n\
    \            |                                          |\n            |-----------PPP\
    \ IPCP  (IP Address)---------|\n            |                                \
    \          |\n            |-------------PPP Data Session-------------|\n     \
    \                     Figure 1: PPPoE Network\n   The capabilities of the RF links\
    \ between RLP neighbors will vary over\n   time due to mobility and environmental\
    \ conditions as well as changes\n   in the RF waveforms and encoding.  To reflect\
    \ these dynamic changes,\n   the Radio may periodically generate Link Quality\
    \ Metrics to the\n   router.  The router uses the link metric to update route\
    \ costs and\n   influence route selection.  The influence upon the routing protocols\n\
    \   is beyond the scope of this document.\n   A PPPoE Client implementation can\
    \ be found at [3].  It is open source\n   (GNU GPLv2 -- General Public License).\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   Access Concentrator\n            The RFC 2516 term used to\
    \ describe the Server.  This\n            document uses the terms Router or Server\
    \ instead.\n   BCN      Backward Credit Notification.  The BCN represents the\
    \ number\n            of remaining credits at the local node that were granted\
    \ by\n            peer node.  The local node uses these credits to transmit\n\
    \            payload back to the peer node.  BCN ranges from 0-65535.\n   CDR\
    \      The Current Datarate.\n   FCN      Forward Credit Notification.  The FCN\
    \ represents the credits\n            that the local node is granting to the peer\
    \ node.  The peer\n            node uses these granted credits to transmit payload\
    \ back to\n            the local node.  FCN ranges from 0-65535.\n   Gbit/s  \
    \ gigabits (1,000,000,000) per second.\n   Host     The RFC 2516 term used to\
    \ describe the Server.  This\n            document uses the terms Radio or Client.\n\
    \   kbit/s   kilobits (1,000) per second.\n   LCP      PPP Link Control Protocol,\
    \ RFC 1661.\n   Mbit/s   megabits (1,000,000) per second.\n   MDR      The Maximum\
    \ Datarate.\n   NCP      PPP Network Control Protocol, RFC 1661.\n   RLP     \
    \ Radio Link Protocol.\n   TAG      The RFC 2516 PPPoE synonym for TLV.  This\
    \ document uses TLV.\n   Tbit/s   terabits (1,000,000,000,000) per second.\n \
    \  TLV      Type-Length-Value.\n"
- title: 3.  Overview of Protocol Extensions
  contents:
  - "3.  Overview of Protocol Extensions\n   The extensions consist of optional TLVs\
    \ as well as enhanced and newly\n   defined Discovery packets.  The enhancements\
    \ are applied to the\n   Discovery Stage and the PPP Session Stage.\n"
- title: 3.1.  TLVs
  contents:
  - "3.1.  TLVs\n   The new TLVs are listed in the table below:\n           TLV  \
    \    TLV\n           Value    Description\n           =========================================\n\
    \           0x0106   Credits TLV\n           0x0107   Metrics TLV\n          \
    \ 0x0108   Sequence Number TLV\n           0x0109   Credit Scale Factor TLV\n"
- title: 3.1.1.  Credits TLV
  contents:
  - "3.1.1.  Credits TLV\n   This TLV contains the Forward Credit Notification (FCN)\
    \ and the\n   Backward Credit Notification (BCN).  The Credits TLV is optional\
    \ with\n   the PADR (PPPoE Active Discovery Request) and PADS (PPPoE Active\n\
    \   Discovery Session-Confirmation) and required in the PADG (PPPoE\n   Active\
    \ Discovery Session Grant) and PADC (PPPoE Active Discovery\n   Session-Credit)\
    \ Discovery packets (ETHER_TYPE=8863).\n   The Credits TLV is optionally carried\
    \ in the PPPoE data payload\n   packet of the PPP Stage (ETHER_TYPE=8864).\n \
    \  The FCN represents the number of credits being granted by the local\n   node\
    \ to the peer node.  The BCN represents the number of credits\n   remaining at\
    \ the local node that were granted by the peer node.\n   The Credits TLV is shown\
    \ below:\n    0                   1                   2                   3\n\
    \    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    Credits TLV = 0x0106       |       TLV Length = 0x04       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |              FCN              |              BCN              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   These fields are transmitted in network byte order.  The same byte\n   order\
    \ is used throughout the document in other structures as well.\n"
- title: 3.1.2.  Metrics TLV
  contents:
  - "3.1.2.  Metrics TLV\n   The Metrics TLV is used to report the link-quality parameters.\
    \  The\n   Metrics TLV is required with the PADQ (PPPoE Discovery Quality)\n \
    \  Discovery packet.\n   The Metrics TLV contains the following fields:\n    \
    \  Resources - a percentage, 0-100, representing the amount of\n      remaining\
    \ or available resources, such as battery power.  If\n      resources cannot be\
    \ calculated, a value of 100 should be reported.\n      Relative Link Quality\
    \ (RLQ) - a non-dimensional number, 0-100,\n      representing the relative link\
    \ quality.  A value of 100 represents\n      a link of the highest quality.  If\
    \ the RLQ cannot be calculated, a\n      value of 100 should be reported.\n  \
    \    Receive only - a bit that indicates whether the link is bi-\n      directional\
    \ or receive-only.  A value of \"1\" indicates that the\n      link is receive-only.\n\
    \      Reserved - reserved fields are zeroed unless otherwise specified.\n   \
    \   CD - two bits that designate the units of the Current Datarate.\n        \
    \       CD Scale:  00 == kbit/s (default)\n                          01 == Mbit/s\n\
    \                          10 == Gbit/s\n                          11 == Tbit/s\n\
    \      MD - two bits that designate the units of the Maximum Datarate.\n     \
    \          MD Scale:  00 == kbit/s (default)\n                          01 ==\
    \ Mbit/s\n                          10 == Gbit/s\n                          11\
    \ == Tbit/s\n      Current Datarate - the Current Datarate, in un-scaled units\
    \ per\n      second, achieved on the RLP link.  If the Radio makes no\n      distinction\
    \ between Maximum Datarate and Current Datarate, Current\n      Datarate should\
    \ equal the Maximum Datarate.  When metrics are\n      reported, the Current Datarate\
    \ must be reported.  The Current\n      Datarate must be less than or equal to\
    \ the Maximum Datarate.\n      Latency - the transmission delay that a packet\
    \ encounters as it is\n      transmitted over the link.  This is reported in absolute\
    \ delay,\n      milliseconds.  If latency cannot be calculated, a value of 0\n\
    \      should be reported.  The calculation of latency is Radio\n      dependent.\
    \  For example, the latency may be a running average\n      calculated from the\
    \ internal queuing.\n      Maximum Datarate - the maximum theoretical data rate,\
    \ in un-scaled\n      units per second, that the RLP link is capable of providing.\
    \  When\n      metrics are reported, the Maximum Datarate must be reported.\n\
    \   The Metrics TLV is shown below:\n    0                   1               \
    \    2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2\
    \ 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Metrics TLV = 0x0107      |       TLV Length = 0x0A       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Reserved        | MD| CD|R|      RLQ      |    Resources  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |         Latency (MS)          |   Current Datarate            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    Maximum Datarate           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 3.1.3.  Sequence Number TLV
  contents:
  - "3.1.3.  Sequence Number TLV\n   This TLV is used to carry a unique 16-bit sequence\
    \ number in order to\n   identify a specific request and the associated response.\
    \  The\n   sequence number should be initialized to zero and incremented by one\n\
    \   for each new request.  For retransmitted packets, the same sequence\n   number\
    \ that was used in the previous packet transmission is repeated.\n   The PADG\
    \ and PADC packets require the Sequence Number Tag.\n   The Sequence Number TLV\
    \ is shown below:\n    0                   1                   2             \
    \      3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n\
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Sequence\
    \ Number TLV = 0x0108  |        TLV Length = 0x02      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       Sequence Number         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 3.1.4.  Credit Scale Factor TLV
  contents:
  - "3.1.4.  Credit Scale Factor TLV\n   This TLV contains the scale factor value\
    \ that is to be applied to the\n   session credit calculations.  The Credit Scale\
    \ Factor TLV is optional\n   with the PADR and PADS packets.  Once the session\
    \ is established with\n   specified scale factors, the scale factors are set for\
    \ the entire\n   session.  The scale factor value represents the units that the\
    \ local\n   node grants to the remote node.  The remote node is responsible for\n\
    \   maintaining the credit accounting relative to the data flow back to\n   the\
    \ local node.\n   The Credit Scale Factor TLV can be used to change from the default\n\
    \   64-byte credit unit during the PADR-PADS exchange.  The credit scale\n   factor\
    \ value can range from 1 byte to 65535 bytes.  A zero value is\n   ignored and\
    \ the default 64-byte unit remains set.  The scale factor\n   is set per each\
    \ payload flow: peer-to-local and local-to-peer.\n   The Credit Scale Factor TLV\
    \ is shown below:\n    0                   1                   2             \
    \      3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n\
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Credit\
    \ Scale Factor = 0x0109 |       TLV Length = 0x02      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       Scale Factor Value      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 3.2.  Discovery Stage Extensions
  contents:
  - "3.2.  Discovery Stage Extensions\n   The specifications of the PPPoE Active Discovery\
    \ Request (PADR) and\n   the PPPoE Active Discovery Session-confirmation (PADS)\
    \ packets are\n   extended to include the optional Credits TLV and the Credit\
    \ Scale\n   Factor TLV.  The PPPoE Active Discovery Session-Grant (PADG) packet,\n\
    \   the PPPoE Active Discovery Session-Credit Response (PADC), and the\n   Quality\
    \ packets are newly defined Discovery Stage packets.\n           Discovery\n \
    \          Packet                 Status\n           =======================================================\n\
    \           PADR        Enhanced   Optionally includes the Credits\n         \
    \                         TLV and the Credit Scale Factor\n                  \
    \                TLV\n           PADS        Enhanced   Optionally includes the\
    \ Credits\n                                  TLV and the Credit Scale Factor\n\
    \                                  TLV\n           PADG        New        Includes\
    \ the Credits TLV and the\n                                  Sequence Number TLV\n\
    \           PADC        New        Includes the Credits TLV and the\n        \
    \                          Sequence Number TLV\n           PADQ        New   \
    \     Includes the Metrics TLV\n"
- title: 3.2.1.  PPPoE Active Discovery Request (PADR)
  contents:
  - "3.2.1.  PPPoE Active Discovery Request (PADR)\n   The PADR packet is extended\
    \ to optionally contain a single Credits\n   TLV, indicating that the Client requests\
    \ credit flow control for this\n   session.  The Credits TLV contains the Forward\
    \ Credit Notification\n   (FCN) and the Backward Credit Notification (BCN) to\
    \ be applied to the\n   PPP Session Stage.  The FCN provides the initial credits\
    \ granted to\n   the Server by the Client.  The BCN value is set to 0, as the\
    \ Client\n   has not yet been granted credits from the Server.\n   The PADR packet\
    \ is enhanced to optionally contain a single Credit\n   Scale Factor TLV.  The\
    \ Credit Scale Factor TLV defines the credit\n   scale factor value.  If the Credit\
    \ Scale Factor TLV is omitted, the\n   default 64-byte value is used for the session.\
    \  When the Client\n   includes the optional Credit Scale Factor TLV in the PADR,\
    \ this\n   credit scale factor value is applied to all credit grants associated\n\
    \   with the Client credits that are granted to the Server.\n   The Server must\
    \ echo the Credit Scale Factor TLV in the PADS response\n   to confirm the credit\
    \ scaling session and to designate the Server\n   credit scaling factor.  This\
    \ PADS Credit Scaling Factor TLV\n   represents the scale factor value that is\
    \ applied to all credits\n   granted from the Server to the Client.\n   Once the\
    \ session is established during the PADR-PADS exchange, the\n   credit scale factor\
    \ value cannot be changed.\n   A Discovery PADR packet with the optional Credits\
    \ TLV is shown below:\n    0                   1                   2         \
    \          3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9\
    \ 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                  Access_Concentrator_mac_addr                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Host_mac_addr (cont)                      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x19  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     SESSION_ID = 0x1234       |      LENGTH = 0x0C            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       TLV Type = 0x0101       |  Metrics TLV Length = 0x00    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |   Credits TLV = 0x0106        |      TLV Length = 0x04        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |              FCN              |              BCN = 0          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   The credit units are expressed in the default 64-byte units.\n   A Discovery\
    \ PADR packet with the optional Credits TLV and the\n   optional Credit Scale\
    \ Factor TLV is shown below:\n    0                   1                   2  \
    \                 3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6\
    \ 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                  Access_Concentrator_mac_addr                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Host_mac_addr (cont)                      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x19  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     SESSION_ID = 0x1234       |      LENGTH = 0x12            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       TLV Type = 0x0101       |        TLV Length = 0x00      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Credits TLV = 0x0106      |       TLV Length = 0x04       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |              FCN              |             BCN = 0           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   | Credit Scale Factor = 0x0109  |       TLV Length = 0x02       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       scale factor value      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   The Credits TLV FCN value is expressed in units of the session's\n   credit\
    \ scale factor value.\n"
- title: 3.2.2.  PPPoE Active Discovery Session-Confirmation (PADS)
  contents:
  - "3.2.2.  PPPoE Active Discovery Session-Confirmation (PADS)\n   The Server PADS\
    \ is extended to optionally contain a single Credits\n   TLV, indicating the Forward\
    \ Credit Notification (FCN) and the\n   Backward Credit Notification (BCN) of\
    \ the PPP Session Stage.\n   If the Client PADR contained a Credits TLV, then\
    \ the Server PADS must\n   indicate support for credit flow control by including\
    \ a Credits TLV.\n   The PADS Credits TLV FCN represents the number of credits\
    \ initially\n   granted to the Client.  The Credits TLV BCN is an echo of the\
    \ number\n   of credits that the Client had granted to the Server in the\n   originating\
    \ PADR packet.\n   Exchange of the Credits TLV in the PADR and PADS indicates\
    \ that\n   credit flow control is supported by both the Server and the Client\n\
    \   for the designated PPP Session Stage.  This is binding and must be\n   followed\
    \ for the entire duration of the PPP Session Stage.  A\n   session's credit binding\
    \ must be established prior to any other\n   credit indications being exchanged.\n\
    \   The Server PADS should only include the Credits TLV in response to a\n   Client\
    \ PADR that included the Credits TLV.  If the Server does not\n   support credit\
    \ flow, it should not include the Credits TLV in its\n   PADS response.  The Client\
    \ must terminate a credit-based session that\n   cannot be supported by the Server.\
    \  A Credits TLV transmitted outside\n   an established credit-based session must\
    \ be ignored.\n   The Server PADS is enhanced to optionally contain a single Credit\n\
    \   Scale Factor TLV.  The Credit Scale Factor TLV defines the credit\n   scale\
    \ unit value.  The Credit Scale Factor TLV must be included if it\n   was included\
    \ in the Client PADR.  If the Credits TLV was not included\n   in the originating\
    \ PADR, it must be omitted, indicating that the\n   64-byte default is used for\
    \ the directional flow.  This credit scale\n   factor is applied to Server grants\
    \ to the Client.\n   A Discovery PADS packet with the optional Credits TLV is\
    \ shown below:\n    0                   1                   2                \
    \   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n \
    \  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   \
    \               Access_Concentrator_mac_addr                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Host_mac_addr (cont)                      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x65  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     SESSION_ID = 0x1234       |      LENGTH = 0x0C            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       TLV Type = 0x0101       |       TLV Length = 0x00       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |   Credits TLV = 0x0106        |       TLV Length = 0x04       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |              FCN              |              BCN              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   The BCN is expressed in the default 64-byte units.\n   A Discovery PADS packet\
    \ with the optional Credits TLV and the\n   optional Credit Scale Factor TLV is\
    \ shown below:\n    0                   1                   2                \
    \   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n \
    \  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   \
    \               Access_Concentrator_mac_addr                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Host_mac_addr (cont)                      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x65  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     SESSION_ID = 0x1234       |      LENGTH = 0x12            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       TLV Type = 0x0101       |       TLV Length = 0x00       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    Credits TLV = 0x0106       |        TLV Length = 0x04      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |              FCN              |              BCN              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |  Credit Scale Factor = 0x0109 |       TLV Length = 0x02       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |      scale factor value       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   The Credits TLV BCN value is expressed in units of the session scale\n   factor\
    \ value received in the PADR.\n"
- title: 3.2.3.  PPPoE Active Discovery Session-Grant (PADG)
  contents:
  - "3.2.3.  PPPoE Active Discovery Session-Grant (PADG)\n   The PPPoE Active Discovery\
    \ Session-Grant (PADG) is a new packet\n   defined in this specification.  The\
    \ local node (Server or Client) may\n   send a PADG at any time after the PADR/PADS\
    \ exchange to grant\n   incremental flow control credits to a peer.  The CODE\
    \ field is set to\n   0x0A and the SESSION_ID must be set to the unique value\
    \ generated for\n   this PPPoE Session.\n   Each flow control credit corresponds\
    \ to the amount of PPP payload\n   bytes that can be sent or received.  For example,\
    \ if the default\n   credit scale factor of 64 bytes is used, and 128 bytes of\
    \ PPP payload\n   data are sent, then 2 credits would be consumed.  When calculating\n\
    \   credits to consume, all credit calculations must be rounded up.  If,\n   in\
    \ the previous example, 130 bytes of PPP payload data were sent, 3\n   credits\
    \ would have been consumed.\n   When the peer receives a PADG packet, it adds\
    \ the incremental credits\n   to its working credit count and responds with a\
    \ PPPoE Active\n   Discovery Session-Credit Response (PADC) packet, indicating\
    \ the\n   accumulation of the credits.  The FCN and BCN values must be scaled\n\
    \   by the value established during session establishment in the Credit\n   Scale\
    \ Factor TLV or by the default 64-byte value prior to processing.\n   The PADG\
    \ packet must contain a single Credits TLV, indicating the\n   Forward Credit\
    \ Notification (FCN) and the Backward Credit\n   Notification (BCN) of the PPPoE\
    \ Session.\n   The Credits TLV FCN indicates the number of incremental credits\
    \ being\n   granted to the peer by the node.  A value between 1 and 0xffff\n \
    \  represents an incremental credit grant.  The peer must multiply the\n   credit\
    \ units by the credit scale factor and add these credits to its\n   accumulated\
    \ transmit credit count.  A value of 0x0000 represents a\n   NULL grant, meaning\
    \ that there are no additional credits being\n   granted.\n   The Credits TLV\
    \ BCN indicates the remaining absolute credits that\n   have been granted by the\
    \ peer to the local node.  When the local node\n   exhausts the BCN, it must stop\
    \ transmitting payload packets.\n   Once a credit has been granted, it must be\
    \ honored.  The largest\n   number of incremental credits at any time is 0xffff.\n\
    \   The PADG packet must contain a single Sequence Number TLV.  This TLV\n   is\
    \ used to carry a unique 16-bit sequence number to uniquely identify\n   each\
    \ request.  The sequence number should be initialized at zero and\n   incremented\
    \ by one for each new PADG.  For retransmitted PADGs, the\n   same sequence number\
    \ that was used in the previous packet\n   transmission is repeated.\n   A Discovery\
    \ PADG packet with the Sequence Number and Credits TLVs is\n   shown below:\n\
    \    0                   1                   2                   3\n    0 1 2\
    \ 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Destination_mac_addr                      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    Destination_mac_addr(c)    |       Source_mac_addr         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Source mac_addr (cont)                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x0A  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     SESSION_ID = 0x1234       |      LENGTH = 0x0E            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   | Sequence Number TLV = 0x0108  |       TLV Length = 0x02       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       Sequence Number         |     Credits TLV = 0x0106      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       TLV Length = 0x04       |               FCN             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |              BCN              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 3.2.4.  PPPoE Active Discovery Session-Credit Response (PADC)
  contents:
  - "3.2.4.  PPPoE Active Discovery Session-Credit Response (PADC)\n   The PPPoE Active\
    \ Discovery Session-Credit Response (PADC) is a new\n   packet defined in this\
    \ specification.  A Server or Client must send a\n   PADC in response to a PADG.\
    \  The CODE field is set to 0x0B, and the\n   SESSION_ID must be set to the unique\
    \ value generated for this PPPoE\n   session.\n   The PADC packet must contain\
    \ a single Credits TLV, indicating the\n   Forward Credit Notification (FCN) and\
    \ the Backward Credit\n   Notification (BCN) of the PPPoE session.\n   The Credits\
    \ TLV FCN represents the absolute credits remaining that\n   have been granted\
    \ to the peer by the node.  The Credits TLV BCN\n   represents the remaining absolute\
    \ credits that have been granted to\n   the local node from the peer.  The FCN\
    \ and BCN values must be scaled\n   by the value established during session establishment\
    \ in the Credit\n   Scale Factor TLV or by the default 64-byte value prior to\
    \ processing.\n   The PADC packet must contain a single Sequence Number TLV. \
    \ The\n   sequence number must be the sequence number associated with the PADG.\n\
    \   A Discovery PADC packet with the Sequence Number and Credits TLV is\n   shown\
    \ below:\n    0                   1                   2                   3\n\
    \    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Destination_mac_addr                      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    Destination_mac_addr(c)    |       Source_mac_addr         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Source mac_addr (cont)                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x0B  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     SESSION_ID = 0x1234       |      LENGTH = 0x0E            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   | Sequence Number TLV = 0x0108  |        TLV Length = 0x02      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       Sequence Number         |     Credits TLV = 0x0106      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       TLV Length = 0x04       |               FCN             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |              BCN              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   The FCN and BCN values are expressed in the respective units defined\n   by\
    \ the Credit Scale Factor TLV or the 64-byte default.\n"
- title: 3.2.5.  PPPoE Active Discovery Quality (PADQ)
  contents:
  - "3.2.5.  PPPoE Active Discovery Quality (PADQ)\n   The PPPoE Active Discovery\
    \ Quality (PADQ) is a new packet defined in\n   this specification.  An Server\
    \ or Client may send an optional PADQ at\n   any time to query or report link-quality\
    \ metrics.\n   When transmitting PPP [1] streams over wireless links through radio\n\
    \   modems, the quality of the RF link directly affects the throughput.\n   The\
    \ PPPoE Active Discovery Quality (PADQ) packet can be used by the\n   radio modem\
    \ to report RF link metrics.  The CODE field is set to\n   0x0C, and the SESSION_ID\
    \ must be set to the unique value generated\n   for this PPPoE session.\n   The\
    \ PPPoE Active Discovery Quality (PADQ) packet can be used to query\n   link metrics\
    \ by setting the PADQ Metrics TLV Length to zero.\n   The PADQ must carry a single\
    \ Metrics TLV.  When processing the data\n   rates, the values must be converted\
    \ using the indicated data rate\n   units.  This document enhances the Metrics\
    \ TLV as described below.\n   A Discovery PADQ packet with the required Metrics\
    \ TLV is shown below:\n    0                   1                   2         \
    \          3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9\
    \ 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                  Access_Concentrator_mac_addr                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Host_mac_addr (cont)                      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x0C  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     SESSION_ID = 0x1234       |      LENGTH = 0x12            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       TLV Type = 0x0101       |        TLV Length = 0x00      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    Metrics TLV = 0x0107       |        TLV Length = 0x0A      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       Reserved      | MD| CD|R|      RLQ      |    Resources  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |         Latency (MS)          |        Current Datarate       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |        Maximum Datarate       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   The Maximum Datarate and the Current Datarate are expressed in units\n   determined\
    \ by the MD and CD bits, respectively.\n   A Discovery PADQ packet with a Metrics\
    \ TLV Length=0 to query is shown\n   below:\n    0                   1       \
    \            2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8\
    \ 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                  Access_Concentrator_mac_addr                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Host_mac_addr (cont)                      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x0C  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     SESSION_ID = 0x1234       |      LENGTH = 0x08            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |       TLV Type = 0x0101       |       TLV Length = 0x00       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Metrics TLV = 0x0107      |       TLV Length = 0x00       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 3.3.  PPP Session Stage Extensions
  contents:
  - "3.3.  PPP Session Stage Extensions\n   The PPP Session Stage Extensions define\
    \ the optional use of Credits\n   TLV.  Use of the Credits TLV in the PPP Session\
    \ Stage is referred to\n   as an in-band credit grant.\n   The first field following\
    \ the PPP Session Stage LENGTH must be\n   checked.  If the value is equal to\
    \ the PPP Protocol identifier\n   (0xc021), then normal packet (payload) processing\
    \ occurs.  When the\n   field following the PPP Session Stage LENGTH is not the\
    \ PPP Protocol\n   identifier (0xc021), a TLV is assumed.  In this case, the TLV\
    \ length\n   is subtracted from the overall payload length.\n   A PPP LCP packet\
    \ with optional Credits TLV is shown below:\n    0                   1       \
    \            2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8\
    \ 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                  Access_Concentrator_mac_addr                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     Host_mac_addr (cont)                      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    ETHER_TYPE = 0x8864        | v = 1 | t = 1 |  CODE = 0x00  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     SESSION_ID = 0x1234       |      LENGTH = (payload)       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |     Credits TLV = 0x0106      |       TLV Length = 0x04       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |              FCN              |              BCN              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |    PPP PROTOCOL = 0xc021      |        PPP payload           ~\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"
- title: 4.  Credit Flow Considerations
  contents:
  - "4.  Credit Flow Considerations\n   For a given session, credit grants exchanged\
    \ in the Discovery Stage,\n   PADG-PADC, are referred to as out-of-band.  Credit\
    \ grants exchanged\n   in the PPP Session Stage are referred to as in-band.  Credit\n\
    \   accounting is only applied to the packets transmitted in the PPP\n   Session\
    \ Stage.\n   Out-of-band credit management is handled by periodic exchange of\
    \ the\n   PPPoE Active Discovery Session-Grant (PADG) and PPPoE Active\n   Discovery\
    \ Credit Response (PADC) packets.\n   In-band credit management allows credits\
    \ to be incrementally granted\n   with each PPP Session Stage packet.  These in-band\
    \ incremental credit\n   grants are not explicitly acknowledged.  However, they\
    \ are reflected\n   in the in-band credit flow from the peer node.  This offers\
    \ the\n   greatest credit-granting efficiency when traffic rates are high.\n \
    \  Once agreed upon during the Discovery Stage, credit grants are\n   required\
    \ to transmit packets in the PPP Session Stage.  A node must\n   grant credits\
    \ to its peer before the peer can transmit packets to the\n   granting node.\n\
    \   Credits are granted incrementally in the forward direction.  Locally,\n  \
    \ a node manages the credits that it has granted to a peer, as well as\n   the\
    \ credits that a peer has granted to it.\n   Grants received from a peer are added\
    \ to a local running credit\n   counter.  The accumulated credits are decremented\
    \ with each packet\n   the node transmits to the peer.  When the running counter\
    \ reaches\n   zero, the node must stop transmitting packets to the peer.\n   To\
    \ manage the credits that a node has granted, the node maintains a\n   running\
    \ counter.  With each PPP Session Stage packet received from\n   the peer, the\
    \ running counter is decremented.  When the running\n   counter reaches zero,\
    \ no additional packets are expected.  The node\n   incrementally grants more\
    \ credits to the peer to maintain packet\n   flow.  Packets received when granted\
    \ credits have been exhausted are\n   discarded.\n"
- title: 5.  PADG and PADC Retransmission
  contents:
  - "5.  PADG and PADC Retransmission\n   When a node does not receive a PADC packet\
    \ in response to a PADG\n   within a specified amount of time, it should transmit\
    \ a new PADG\n   packet with zero credits, using the same sequence number and\
    \ doubling\n   the waiting period.  A PADC response with the associated sequence\n\
    \   number will indicate whether or not the previously granted credits\n   were\
    \ accumulated.  If they were not, a PADG with credits and an\n   incremented sequence\
    \ number should be transmitted.  This process\n   should be repeated until granted\
    \ credits are properly acknowledged or\n   as many times as desired.\n   When\
    \ a node does not receive a PADQ metric packet in response to a\n   query within\
    \ a specified amount of time, it should resend the PADQ\n   query packet and double\
    \ the waiting period.  This can be repeated as\n   many times as desired.\n"
- title: 6.  Other Considerations
  contents:
  - "6.  Other Considerations\n   A node may autonomously generate PADQ metric packets.\
    \  The rate of\n   autonomously generated PADQ metric packets may need to be throttled\n\
    \   so as not to overrun the peer.\n   The sending and receiving of PPPoE Discovery\
    \ packets are independent\n   of credit counts.  For example, a node must always\
    \ be able to receive\n   a PADG and send a PADC.\n   During normal operation,\
    \ nodes may disagree about the number of\n   credits.  Operational credit mismatches\
    \ would occur due to packets in\n   transit on the wire.  Much larger credit mismatches\
    \ can occur if\n   there are transmission errors.  To correct these larger errors,\
    \ the\n   BCN fields of the PADG and PADC packets and in-band credit grants\n\
    \   from a peer can be used by the receiving node to reset the credit\n   values\
    \ of its peer.\n"
- title: 7.  IANA Considerations
  contents:
  - "7.  IANA Considerations\n   IANA has assigned the following PPPoE TLV Values\
    \ for which this RFC\n   serves as the reference:\n   TLV Value     TLV Name \
    \            Description         Reference\n   -----------   -------------------\
    \  -----------------   ---------\n   262  0x0106   Credits              See the\
    \ reference   [RFC5578]\n   263  0x0107   Metrics              See the reference\
    \   [RFC5578]\n   264  0x0108   Sequence Number      See the reference   [RFC5578]\n\
    \   265  0x0109   Credit Scale Factor  See the reference   [RFC5578]\n   IANA\
    \ has assigned the following PPPoE Code fields for which this RFC\n   serves as\
    \ the reference:\n   Code      PPPoE Packet Name        Description         Reference\n\
    \   --------  ----------------------   -----------------   ---------\n   10  0x0a\
    \  PADG, Session-Grant      See the reference   [RFC5578]\n   11  0x0b  PADC,\
    \ Session-Credit     See the reference   [RFC5578]\n                    Response\n\
    \   12  0x0c  PADQ, Quality            See the reference   [RFC5578]\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   This memo defines a mechanism for adding flow\
    \ control to the existing\n   PPP over Ethernet (PPPoE) sessions.  These extensions\
    \ are subsequent\n   to the existing PPPoE security mechanisms as described in\
    \ RFC 2516\n   [2].  It is required that the Service TLV and Session ID always\
    \ be\n   validated prior to processing credits.\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [1] Simpson, W., Ed., \"The Point-to-Point Protocol\
    \ (PPP)\", STD 51,\n       RFC 1661, July 1994.\n   [2] Mamakos, L., Lidl, K.,\
    \ Evarts, J., Carrel, D., Simone, D., and R.\n       Wheeler, \"A Method for Transmitting\
    \ PPP Over Ethernet (PPPoE)\",\n       RFC 2516, February 1999.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [3] An open source (GPLv2) PPPoE Client implementation\
    \ of RFC 5578,\n       PPP Over Ethernet (PPPoE) Extensions for Credit Flow and\
    \ Link\n       Metrics, http://rfc4938.sourceforge.net/.\n"
- title: Appendix A.  Examples of Session Credit Flows
  contents:
  - "Appendix A.  Examples of Session Credit Flows\n   Session Credit Flow with the\
    \ default 64-byte credit unit.\n   Server                    Client\n   ====================================================================\n\
    \   <------------PADI--------------    Initiate\n    ------------PADO-------------->\
    \   Offer\n   <------------PADR--------------    Credits TLV:\n              \
    \                        FCN represents the initial\n                        \
    \              Client credit grant to the\n                                  \
    \    Server in 64-byte units.\n                                      BCN is set\
    \ to 0.\n    ------------PADS-------------->   Credits TLV:\n                \
    \                      FCN represents the initial\n                          \
    \            Server credit grant to the\n                                    \
    \  Client in 64-byte units.\n                                      BCN represents\
    \ an echo of\n                                      initial Client credits.\n\
    \   <==============================>   Data w/ optional in-band\n            \
    \                          Credits TLV\n   <------------PADG--------------   \
    \ Credits TLV: (out-of-band)\n                                      FCN represents\
    \ an incremental\n                                      Client credit grant to\
    \ the\n                                      Server, in 64-byte units.\n     \
    \                                 BCN represents the remaining\n             \
    \                         Server credits that were granted\n                 \
    \                     to the Client, in 64-byte units.\n    ------------PADC-------------->\
    \   Credits TLV: (out-of-band)\n                                      FCN represents\
    \ an incremental\n                                      Server credit grant to\
    \ the\n                                      Client, in 64-byte units.\n     \
    \                                 BCN represents the remaining\n             \
    \                         Client credits that were granted\n                 \
    \                     to the Server, in 64-byte units.\n   <==============================>\
    \   Data w/ optional in-band Credits\n                                      TLV\n\
    \   <------------PADT-------------->   Terminate\n   Session Credit Flow with\
    \ specific credit scale factor units for the\n   Server and the Client.\n   Server\
    \                    Client\n   ====================================================================\n\
    \   <------------PADI--------------    Initiate\n    ------------PADO-------------->\
    \   Offer\n   <------------PADR--------------    Credits TLV:\n              \
    \                        FCN represents the initial\n                        \
    \              Client credit grant to the\n                                  \
    \    Server, in Credit Scale Factor\n                                      TLV\
    \ units.\n                                      BCN is set to 0.\n    ------------PADS-------------->\
    \   Credits TLV:\n                                      FCN represents the initial\n\
    \                                      Server credit grant to the\n          \
    \                            Client, in Credit Scale Factor\n                \
    \                      TLV units.\n                                      BCN represents\
    \ an echo of the\n                                      initial Client credits,\
    \ in\n                                      Credit Scale Factor TLV units.\n \
    \  <==============================>   Data w/ optional in-band Credits\n     \
    \                                 TLV\n   <------------PADG--------------    Credits\
    \ TLV: (out-of-band)\n                                      FCN represents an\
    \ incremental\n                                      Client credit grant to the\
    \ Server,\n                                      in Credit Scale Factor TLV units.\n\
    \                                      BCN represents the remaining\n        \
    \                              Server credits that were granted\n            \
    \                          to the Client, in Credit Scale\n                  \
    \                    Factor TLV units.\n    ------------PADC-------------->  \
    \ Credits TLV: (out-of-band)\n                                      FCN represents\
    \ an incremental\n                                      Server credit grant to\
    \ the Client,\n                                      in Credit Scale Factor TLV\
    \ units.\n                                      BCN represents the remaining\n\
    \                                      Client credits that were granted\n    \
    \                                  to the Server, in Credit Scale\n          \
    \                            Factor TLV units.\n   <==============================>\
    \   Data w/ optional inband Credits\n                                      TLV\n\
    \   <------------PADT-------------->   Terminate\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Bo Berry, Editor\n   Cisco\n   170 West Tasman Drive\n\
    \   San Jose, CA  95134\n   EMail: bberry@cisco.com\n   Stan Ratliff\n   Cisco\n\
    \   170 West Tasman Drive\n   San Jose, CA  95134\n   EMail: sratliff@cisco.com\n\
    \   Ed Paradise\n   Cisco\n   170 West Tasman Drive\n   San Jose, CA  95134\n\
    \   EMail: pdice@cisco.com\n   Tim Kaiser\n   Harris Corporation\n   Government\
    \ Communications System Division\n   Mail Stop 25-11F\n   P.O. Box 37\n   Melbourne,\
    \ FL 32902-0037\n   EMail: timothy.kaiser@harris.com\n   Michael D Adams\n   640\
    \ N 2200 W MS F1J12\n   Salt Lake City, Utah 84116\n   EMail: Michael.D.Adams@L-3com.com\n"
