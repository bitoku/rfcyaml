- title: __initial_text__
  contents:
  - '        Comcast''s Protocol-Agnostic Congestion Management System

    '
- title: Abstract
  contents:
  - "Abstract\n   This document describes the congestion management system of Comcast\n\
    \   Cable, a large cable broadband Internet Service Provider (ISP) in the\n  \
    \ U.S.  Comcast completed deployment of this congestion management\n   system\
    \ on December 31, 2008.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc6057.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2010 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................2\n\
    \   2. Applicability to Other Types of Networks ........................3\n  \
    \ 3. Key Terminology .................................................3\n   4.\
    \ Historical Overview .............................................7\n   5. Summary\
    \ .........................................................8\n   6. Relationship\
    \ between Managing Congestion and Adding Capacity ....9\n   7. Implementation\
    \ and Configuration ...............................10\n      7.1. Thresholds for\
    \ Determining When a CMTS Port Is in a Near\n           Congestion State ..........................................14\n\
    \      7.2. Thresholds for Determining When a User Is in an\n           Extended\
    \ High Consumption State and for Release from\n           That Classification\
    \ .......................................15\n      7.3. Effect of BE Quality of\
    \ Service on Users'\n           Broadband Experience ......................................19\n\
    \      7.4. Equipment/Software Used and Location ......................21\n  \
    \ 8. Conclusion .....................................................23\n   9.\
    \ Exceptional Network Utilization Considerations .................23\n   10. Limitations\
    \ of This Congestion Management System ..............24\n   11. Low Extra Delay\
    \ Background Transport and Other Possibilities ..24\n   12. Security Considerations\
    \ .......................................24\n   13. Acknowledgements ..............................................25\n\
    \   14. Informative References ........................................26\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Comcast Cable is a large broadband Internet Service Provider\
    \ (ISP),\n   based in the U.S., serving the majority of its customers via cable\n\
    \   modem technology.  During the late part of 2008, and completing on\n   December\
    \ 31, 2008, Comcast deployed a new congestion management\n   system across its\
    \ entire network.  This new system was developed in\n   response to dissatisfaction\
    \ in the Internet community as well as\n   complaints to the U.S. Federal Communications\
    \ Commission (FCC)\n   regarding Comcast's old system, which targeted specific\
    \ peer-to-peer\n   (P2P) applications.  This new congestion management system\
    \ is\n   protocol-agnostic, meaning that it does not examine or impact\n   specific\
    \ user applications or network protocols, which is perceived\n   as a more fair\
    \ system for managing network resources at limited times\n   when congestion may\
    \ occur.\n   It is important for readers to note that congestion can occur in\
    \ any\n   IP network, and, when it does, packets can be delayed or dropped.  As\n\
    \   Bob Briscoe has pointed out on an IETF mailing list, some amount of\n   packet\
    \ loss can be normal and/or tolerable, noting \"But a single TCP\n   flow with\
    \ a round trip time (RTT) of 80 ms can attain 50 Mbps with a\n   loss fraction\
    \ of 0.0013% (1 in ~74,000 packets) so there's no need to\n   try to achieve loss\
    \ figures much lower than this.  And indeed, if\n   flows aren't bottlenecked\
    \ elsewhere, TCP will drive the system until\n   it gets such loss levels.  If,\
    \ instead, a customer is downloading\n   five separate 10 Mbps TCP flows still\
    \ with an 80-ms RTT, TCP will\n   drive losses up to 1 in ~3,000, or 0.03%, and\
    \ any lower loss rates\n   won't be able to improve performance\".  As a result,\
    \ applications and\n   protocols have been designed to deal with the reality that\
    \ congestion\n   can occur in any IP network, the mechanics of which we explain\
    \ in\n   detail later in this document.\n   The purpose of this document is to\
    \ describe how this example of a\n   large-scale congestion management system\
    \ functions.  This is\n   partially in response to questions from other ISPs as\
    \ well as\n   solution developers, who are interested in learning from and/or\n\
    \   deploying similar systems in other networks.  In addition, it is\n   hoped\
    \ that such a document may help inform new work in the IETF, in\n   the hope that\
    \ better systems and protocols may be possible in the\n   future.  Lastly, the\
    \ authors wish to transparently and openly\n   document this system, so that there\
    \ could be no doubt about how the\n   system functioned.\n"
- title: 2.  Applicability to Other Types of Networks
  contents:
  - "2.  Applicability to Other Types of Networks\n   Several document reviewers and\
    \ other IETF participants have pointed\n   out that, though we refer to functional\
    \ elements that are specific to\n   a Data Over Cable Service Interface Specification\
    \ (DOCSIS)-based\n   network implementation, this type of congestion management\
    \ system\n   could be generally applied to nearly any type of network.  Thus,\
    \ it\n   is important for readers to take note of this and take into\n   consideration\
    \ that this sort of protocol-agnostic congestion\n   management system could certainly\
    \ fit in a wide variety of network\n   types and implementations.\n"
- title: 3.  Key Terminology
  contents:
  - "3.  Key Terminology\n   This section defines the key terms used in this document.\
    \  Some terms\n   below refer to elements of the Comcast network.  As a result,\
    \ it may\n   be helpful to refer to Figure 1 (see Section 7) when reviewing some\n\
    \   of these terms.\n"
- title: 3.1.  Cable Modem
  contents:
  - "3.1.  Cable Modem\n   A device located at the customer premise used to access\
    \ the Comcast\n   High Speed Internet (HSI) network.  In some cases, the cable\
    \ modem is\n   owned by the customer, and in other cases it is owned by the cable\n\
    \   operator.  This device has an interface (i.e., someplace to plug in a\n  \
    \ cable) for connecting the coaxial cable provided by the cable company\n   to\
    \ the modem, as well as one or more interfaces for connecting the\n   modem to\
    \ a customer's PC or home gateway device (e.g., home gateway,\n   router, firewall,\
    \ access point, etc.).  In some cases, the cable\n   modem function, i.e., the\
    \ ability to access the Internet, is\n   integrated into a home gateway device\
    \ or Embedded Multimedia Terminal\n   Adapter (eMTA).  Once connected, the cable\
    \ modem links the customer\n   to the HSI network and ultimately the broader Internet.\n"
- title: 3.2.  Cable Modem Termination System (CMTS)
  contents:
  - "3.2.  Cable Modem Termination System (CMTS)\n   A piece of hardware located in\
    \ a cable operator's local network\n   (generally in a \"headend\", Section 3.10)\
    \ that acts as the gateway to\n   the Internet for cable modems in a particular\
    \ geographic area.  A\n   simple way to think of the CMTS is as a router with\
    \ interfaces on one\n   side leading to the Internet and interfaces on the other\
    \ connecting\n   to Optical Nodes and then customers, in a so-called \"last mile\"\
    \n   network.\n"
- title: 3.3.  Cable Modem Termination System (CMTS) Port
  contents:
  - "3.3.  Cable Modem Termination System (CMTS) Port\n   Also referred to simply\
    \ as a \"port\".  A port is a physical interface\n   on a device used to connect\
    \ cables in order to connect with other\n   devices for transferring information/data.\
    \  An example of a physical\n   port is a CMTS port.  A CMTS has both upstream\
    \ and downstream network\n   interfaces to serve the local access network, which\
    \ are referred to\n   as upstream or downstream ports.  A port generally serves\
    \ a\n   neighborhood of hundreds of homes.  Over time, CMTS ports tend to\n  \
    \ serve fewer and fewer homes, as the network is segmented for capacity\n   growth\
    \ purposes.  Prior to DOCSIS version 3, a single CMTS physical\n   port was used\
    \ for either transmitting or receiving data downstream or\n   upstream to a given\
    \ neighborhood.  With DOCSIS version 3, and the\n   channel bonding feature, multiple\
    \ CMTS physical ports can be combined\n   to create a virtual port.  A CMTS is\
    \ also briefly defined in\n   Section 2.6 of [RFC3083].\n"
- title: 3.4.  Channel Bonding
  contents:
  - "3.4.  Channel Bonding\n   A technique for combining multiple downstream and/or\
    \ upstream\n   channels to increase customers' download and/or upload speeds,\n\
    \   respectively.  Multiple channels from the Hybrid Fiber Coax (HFC)\n   network\
    \ (Section 3.11) can be bonded into a single virtual port\n   (called a bonded\
    \ group), which acts as a large single channel or port\n   to provide increased\
    \ speeds for customers.  Channel bonding is a\n   feature of Data Over Cable Service\
    \ Interface Specification (DOCSIS)\n   version 3, as described in [DOCSIS_MULPI].\n"
- title: 3.5.  Coaxial Cable (Coax)
  contents:
  - "3.5.  Coaxial Cable (Coax)\n   A type of cable used by a cable operator to connect\
    \ customer premise\n   equipment (CPE) -- such as TVs, cable modems (including\
    \ eMTAs), and\n   Set Top Boxes -- to the HFC network.  This cable may be used\
    \ within\n   the home as well as in segments of the \"last mile\" network running\
    \ to\n   a home or customer premise location.  There are many grades of\n   coaxial\
    \ cable that are used for different purposes.  Different types\n   of coaxial\
    \ cable are used for different purposes on the network.\n"
- title: 3.6.  Comcast High Speed Internet (HSI)
  contents:
  - "3.6.  Comcast High Speed Internet (HSI)\n   A service/product offered by Comcast\
    \ for delivering Internet service\n   over a broadband connection.\n"
- title: 3.7.  Customer Premise Equipment (CPE)
  contents:
  - "3.7.  Customer Premise Equipment (CPE)\n   Any device that resides at the customer's\
    \ residence, connected to the\n   Comcast network, whether controlled by Comcast\
    \ or not.\n"
- title: 3.8.  Data Over Cable Service Interface Specification (DOCSIS)
  contents:
  - "3.8.  Data Over Cable Service Interface Specification (DOCSIS)\n   A reference\
    \ standard developed by CableLabs that specifies how\n   components on cable networks\
    \ need to be built to enable HSI service\n   over an HFC network, as noted in\
    \ [DOCSIS_CM2CPE], [DOCSIS_PHY],\n   [DOCSIS_MULPI], [DOCSIS_SEC], and [DOCSIS_OSSI].\
    \  These standards\n   define the specifications for the cable modem and the CMTS\
    \ such that\n   any DOCSIS-certified cable modem will work on any DOCSIS-certified\n\
    \   CMTS, independent of the selected vendor.  The interoperability of\n   cable\
    \ modems and CMTSs allows customers to purchase a DOCSIS-\n   certified modem\
    \ from a retail outlet and use it on their cable-\n   networked home.  All DOCSIS-related\
    \ standards are available to the\n   public at the CableLabs website, at http://www.cablelabs.com.\n"
- title: 3.9.  Downstream
  contents:
  - "3.9.  Downstream\n   Description of the direction in which a signal travels,\
    \ in this case\n   from the network to a user.  Downstream traffic occurs when\
    \ users are\n   downloading something from the Internet, such as watching a web-based\n\
    \   video, reading web pages, or downloading software updates.\n"
- title: 3.10.  Headend
  contents:
  - "3.10.  Headend\n   A cable facility responsible for receiving TV signals for\n\
    \   distribution over the HFC network to the end customers.  This\n   facility\
    \ typically also houses one or more CMTSs.  This is sometimes\n   also called\
    \ a \"hub\".\n"
- title: 3.11.  Hybrid Fiber Coax (HFC)
  contents:
  - "3.11.  Hybrid Fiber Coax (HFC)\n   A network architecture used primarily by cable\
    \ companies, comprised\n   of fiber-optic and coaxial cables that currently deliver\
    \ Voice,\n   Video, and Internet services to customers, as defined in Section\
    \ 1.2\n   of [DOCSIS_MULPI].\n"
- title: 3.12.  Internet Protocol Detail Record (IPDR)
  contents:
  - "3.12.  Internet Protocol Detail Record (IPDR)\n   Standardized technology for\
    \ monitoring and/or recording subscribers'\n   upstream and downstream Internet\
    \ usage data based on their cable\n   modem.  The data is collected from the CMTS\
    \ and sent to a server for\n   further processing.  Additional information is\
    \ available at\n   http://www.ipdr.org, as well as [IPDR_Standard] and [DOCSIS_IPDR].\n"
- title: 3.13.  Optical Node
  contents:
  - "3.13.  Optical Node\n   A component of the HFC network generally located in customers'\
    \ local\n   neighborhoods that is used to convert the optical signals sent over\n\
    \   fiber-optic cables to electrical signals that can be sent over\n   coaxial\
    \ cable to customers' cable modems, or vice versa.  A fiber-\n   optic cable connects\
    \ the Optical Node, through distribution hubs, to\n   the CMTS, and coaxial cable\
    \ connects the Optical Node to customers'\n   cable modems.\n"
- title: 3.14.  Provisioned Bandwidth
  contents:
  - "3.14.  Provisioned Bandwidth\n   The peak speed associated with a tier of service\
    \ purchased by a\n   customer.  For example, a customer with a 105 Mbps downstream\
    \ and\n   10 Mbps upstream speed tier would be said to be provisioned with\n \
    \  105 Mbps of downstream bandwidth and 10 Mbps of upstream bandwidth.\n   This\
    \ is often referred to as 105/10 service in industry parlance.\n   The Provisioned\
    \ Bandwidth is the speed that a customer's modem is\n   configured (and the network\
    \ is engineered) to deliver on a regular\n   basis (which is not the same as a\
    \ \"Committed Information Rate\" or a\n   guaranteed rate).  Internet speeds are\
    \ generally a best effort\n   service that are dependent on a number of variables,\
    \ many of which\n   are outside the control of an Internet Service Provider (ISP).\
    \  In\n   general, speeds do not typically exceed a customer's provisioned\n \
    \  speed.  Comcast, however, invented a technology called \"PowerBoost\"\n   [PowerBoost_Specification]\
    \ that, for example, enables users to\n   experience brief boosts above their\
    \ provisioned speeds while they\n   transfer large files over the Internet, by\
    \ utilizing excess capacity\n   that may be available in the network at that time.\n"
- title: 3.15.  Quality of Service (QoS)
  contents:
  - "3.15.  Quality of Service (QoS)\n   A set of techniques to manage network resources\
    \ to ensure a level of\n   performance to specific data flows, as described in\
    \ [RFC1633] and\n   [RFC2475].  One method for providing QoS to a network is by\n\
    \   differentiating the type of traffic by class or flow and assigning\n   priorities\
    \ to each type.  When the network becomes congested, the\n   data packets that\
    \ are marked as having higher priority will have\n   higher likelihood of being\
    \ serviced.\n"
- title: 3.16.  Upstream
  contents:
  - "3.16.  Upstream\n   Description of the direction in which a signal travels, in\
    \ this case\n   from the user to the network.  Upstream traffic occurs when users\
    \ are\n   uploading something to the network, such as sending email, sending\n\
    \   files to another computer, or uploading photos to a digital photo\n   website.\n"
- title: 4.  Historical Overview
  contents:
  - "4.  Historical Overview\n   Comcast began the engineering project to develop\
    \ a new congestion\n   management system in March 2008, the same month that Comcast\
    \ hosted\n   the 71st meeting of the IETF in Philadelphia, PA, USA.  On May 28,\n\
    \   2008, Comcast participated in an IETF Peer-to-Peer Infrastructure\n   Workshop\
    \ [RFC5594], hosted by the Massachusetts Institute of\n   Technology (MIT) in\
    \ Cambridge, MA, USA.\n   In order to participate in this workshop, interested\
    \ attendees were\n   asked to submit a paper to a technical review team, which\
    \ Comcast did\n   on May 9, 2008, in [COMCAST_P2PI_PAPER].  Comcast subsequently\n\
    \   attended and participated in this valuable workshop.  During the\n   workshop,\
    \ Comcast outlined the high-level design for a new congestion\n   management system\
    \ [COMCAST_P2PI_PRES] and solicited comments and\n   other feedback from attendees\
    \ and other members of the Internet\n   community (presentations were also posted\
    \ to the IETF's P2Pi mailing\n   list).  The congestion management system outlined\
    \ in that May 2008\n   workshop was later tested in trial markets and is in essence\
    \ what was\n   then deployed by Comcast later in 2008.\n   Following an August\
    \ 2008 FCC document [FCC_Memo_Opinion] regarding\n   how Comcast managed congestion\
    \ on its High-Speed Internet (\"HSI\")\n   network, Comcast disclosed to the FCC\
    \ [FCC_Net_Mgmt_Response] and the\n   public additional technical details of the\
    \ congestion management\n   system that it intended to and did implement by the\
    \ end of 2008\n   [FCC_Congest_Mgmt_Ltr], including the thresholds involved in\
    \ this new\n   system.  While the description of how this system is deployed in\
    \ the\n   Comcast network is necessarily specific to the various technologies\n\
    \   and designs specific to that network, a similar system could be\n   deployed\
    \ on virtually any large-scale ISP network or other IP\n   network.\n"
- title: 5.  Summary
  contents:
  - "5.  Summary\n   Comcast's HSI network has elements that are shared across many\n\
    \   subscribers.  This means that Comcast's HSI customers share upstream\n   and\
    \ downstream bandwidth with their neighbors.  Although the\n   available bandwidth\
    \ is substantial, so, too, is the demand.  Thus,\n   when a relatively small number\
    \ of customers in a neighborhood place\n   disproportionate demands on network\
    \ resources, this can cause\n   congestion that degrades their neighbors' Internet\
    \ experience.  The\n   goal of Comcast's new congestion management system is to\
    \ enable all\n   users of our network resources to access a \"fair share\" of\
    \ that\n   bandwidth, in the interest of ensuring a high-quality online\n   experience\
    \ for all of Comcast's HSI customers.\n   Importantly, the new approach is protocol-agnostic;\
    \ that is, it does\n   not manage congestion by focusing on the use of the specific\n\
    \   protocols that place a disproportionate burden on network resources,\n   or\
    \ any other protocols.  Rather, the new approach focuses on managing\n   the traffic\
    \ of those individuals who are using the most bandwidth at\n   times when network\
    \ congestion threatens to degrade subscribers'\n   broadband experience and who\
    \ are contributing disproportionately to\n   such congestion at those points in\
    \ time.\n   Specific details about these practices, including relevant threshold\n\
    \   information, the type of equipment used, and other particulars, are\n   discussed\
    \ at some length later in this document.  At the outset,\n   however, we present\
    \ a very high-level, simplified overview of how\n   these practices work.  Despite\
    \ all the detail provided further below,\n   the fundamentals of this approach\
    \ can be summarized succinctly:\n   1. Software installed in the Comcast network\
    \ continuously examines\n      aggregate traffic usage data for individual segments\
    \ of Comcast's\n      HSI network.  If overall upstream or downstream usage on\
    \ a\n      particular segment of Comcast's HSI network reaches a\n      pre-determined\
    \ level, the software moves on to step two.\n   2. At step two, the software examines\
    \ bandwidth usage data for\n      subscribers in the affected network segment\
    \ to determine which\n      subscribers are using a disproportionate share of\
    \ the bandwidth.\n      If the software determines that a particular subscriber\
    \ or\n      subscribers have been the source of high volumes of network\n    \
    \  traffic during a recent period of minutes, traffic originating\n      from\
    \ that subscriber or those subscribers temporarily will be\n      assigned a lower\
    \ priority status.\n   3. During the time that a subscriber's traffic is assigned\
    \ the lower\n      priority status, their packets will not be delayed or dropped\
    \ so\n      long as the network segment is not actually congested.  If,\n    \
    \  however, the network segment becomes congested, their packets\n      could\
    \ be intermittently delayed or dropped.\n   4. The subscriber's traffic returns\
    \ to normal priority status once\n      his or her bandwidth usage drops below\
    \ a set threshold over a\n      particular time interval.\n   Comcast undertook\
    \ considerable effort, over the course of many\n   months, to formulate our plans\
    \ for this congestion management\n   approach, adjusting them, and subjecting\
    \ them to real-world trials.\n   Market trials were conducted in Chambersburg,\
    \ PA; Warrenton, VA; Lake\n   City, FL; East Orange, FL; and Colorado Springs,\
    \ CO, between June and\n   September 2008.  This enabled us to validate the utility\
    \ of the\n   general approach and collect substantial trial data to test multiple\n\
    \   variations and alternative formulations.\n"
- title: 6.  Relationship between Managing Congestion and Adding Capacity
  contents:
  - "6.  Relationship between Managing Congestion and Adding Capacity\n   Many people\
    \ have questioned whether congestion should ever exist at\n   all, if an ISP was\
    \ adding sufficient capacity.  There is certainly a\n   relationship between capacity\
    \ and congestion.  But there are two\n   types of congestion that generally present\
    \ themselves in a network.\n   The first general type of congestion is regularly\
    \ occurring and is\n   the result of gradually increasing traffic levels up to\
    \ a point where\n   typical usage peaks cause congestion on a regular basis. \
    \ Comcast,\n   like many ISPs, has a set capacity management process by which\n\
    \   capacity additions are automatically triggered based on certain usage\n  \
    \ trends; this process is geared towards bringing additional capacity\n   to the\
    \ network prior to the onset of regularly occurring congestion.\n   As such, capacity\
    \ is added when needed and before it presents\n   noticeable effects.  This process\
    \ is in place since capacity\n   additions are not instantaneous and in many cases\
    \ require significant\n   physical work.\n   The second general type of congestion\
    \ is unpredictable congestion,\n   which can occur for a wide range of reasons.\
    \  One example may be due\n   to current events, where users may be all rushing\
    \ to access specific\n   content at the exact same time, and where the systems\
    \ serving that\n   content may not be able to keep up with demand.  Another example\
    \ may\n   be due to a localized disaster, where some network paths have been\n\
    \   destroyed or otherwise impaired, and where many users are attempting\n   to\
    \ communicate with one another at traffic levels significantly above\n   normal.\n\
    \   Thus, in both cases, even with continuous upgrades and constant\n   investment\
    \ in additional capacity, the fact remains that network\n   capacity is not unlimited.\
    \  A congestion management system, absent\n   superior protocol-based solutions\
    \ that do not currently exist, can\n   therefore help manage the effects of congestion\
    \ on users, improving\n   their Internet experience.\n"
- title: 7.  Implementation and Configuration
  contents:
  - "7.  Implementation and Configuration\n   It is important to note that the implementation\
    \ details below and the\n   overall design of the system are matched to traffic\
    \ patterns that\n   exist on the Internet today and that the authors believe will\
    \ exist\n   in the near future.  While the authors desired to make the system\n\
    \   highly adaptable and a good long-term network investment, significant\n  \
    \ changes in such traffic patterns may necessitate a change in the\n   configuration\
    \ of the system or, in extreme cases, a different type of\n   system altogether.\n\
    \   To understand exactly how these new congestion management practices\n   work,\
    \ it is helpful to have a general understanding of how Comcast's\n   HSI network\
    \ is designed.  Comcast's HSI network is what is commonly\n   referred to as a\
    \ hybrid fiber-coax network, with coaxial cable\n   connecting each subscriber's\
    \ cable modem to an Optical Node, and\n   fiber-optic cables connecting the Optical\
    \ Node, through distribution\n   hubs, to the Cable Modem Termination System (CMTS),\
    \ which is also\n   known as a \"data node\".  The CMTSs are then connected to\
    \ higher-level\n   routers, which in turn are connected to Comcast's Internet\
    \ backbone\n   facilities.  Today, Comcast has over 3,200 CMTSs deployed throughout\n\
    \   our network, serving over 15 million HSI subscribers.\n   Each CMTS has multiple\
    \ \"ports\" that handle traffic coming into and\n   leaving the CMTS.  In particular,\
    \ each cable modem deployed on the\n   Comcast HSI network is connected to the\
    \ CMTS through the ports on the\n   CMTS.  These ports can be either \"downstream\"\
    \ ports or \"upstream\"\n   ports, depending on whether they send information\
    \ to cable modems\n   (downstream) or receive information from cable modems (upstream)\n\
    \   attached to the port.  (Note that the term \"port\" as used here\n   generally\
    \ contemplates single channels on a CMTS, but these\n   statements will apply\
    \ to virtual channels, also known as \"bonded\n   groups\", in a DOCSIS 3.0 environment.)\
    \  Even without channel bonding,\n   multiple channels are usually configured\
    \ to come out of each physical\n   port.  Said another way, there is generally\
    \ a mapping of multiple\n   channels to each physical port.\n   Currently, on\
    \ average, approximately 275 cable modems share the same\n   downstream port,\
    \ and about 100 cable modems share the same upstream\n   port; however, this is\
    \ constantly changing (both numbers generally\n   become smaller over time, based\
    \ on current DOCSIS technology).  Both\n   types of ports can experience congestion\
    \ that could degrade the\n   broadband experience of our subscribers and, unlike\
    \ with the previous\n   congestion management practices, both upstream and downstream\
    \ traffic\n   are subject to management in this new congestion management system.\n\
    \   Based upon the design of the network and traffic patterns observed,\n   the\
    \ most likely place for congestion to occur is on these CMTS ports.\n   As a result,\
    \ the congestion management system measures the traffic\n   conditions of CMTS\
    \ ports, and applies any policy actions to traffic\n   on those ports (rather\
    \ than some other, more distant segment of the\n   network).\n   To implement\
    \ Comcast's new protocol-agnostic congestion management\n   practices, Comcast\
    \ purchased new hardware and software that were\n   deployed near the Regional\
    \ Network Routers (\"RNRs\") that are further\n   upstream in Comcast's network.\
    \  This new hardware consists of\n   Internet Protocol Detail Record (\"IPDR\"\
    ) servers, Congestion\n   Management servers, and PacketCable Multimedia (\"PCMM\"\
    ) servers.\n   Further details about each of these pieces of equipment can be\
    \ found\n   below, in Section 7.4.  It is important to note here, however, that\n\
    \   even though the physical location of these servers is at the RNR, the\n  \
    \ servers communicate with -- and manage individually -- multiple ports\n   on\
    \ multiple CMTSs to effectuate the practices described in this\n   document. \
    \ That is to say, bandwidth usage on one CMTS port will have\n   no effect on\
    \ whether the congestion management practices described\n   herein are applied\
    \ to a subscriber on a different CMTS port.\n   Figure 1 provides a simplified\
    \ graphical depiction of the network\n   architecture just described:\n   Figure\
    \ 1: Simplified Network Diagram Showing High-Level Comcast\n   Network and Servers\
    \ Relevant to Congestion Management\n                              -------------------------\n\
    \                             /                         \\\n                 \
    \           | Comcast Internet Backbone |\n                             \\   \
    \                   -----\n   +------------+             --------------------/\
    \       \\\n   | Congestion |                                /         \\\n  \
    \ | Management |<+++GigE++++             +---->|  Internet |\n   |   Server  \
    \ |           +             |     |  Backbone |\n   +------------+           +\
    \             |      \\ Router  /\n                            +           Fiber\
    \     \\       /\n   +------------+           +             |         -----\n\
    \   |    QoS     |           +             |\n   |   Server   |<+++GigE++++  \
    \           \\/\n   |            |           +           -----\n   +------------+\
    \           +         /       \\\n                            +        /     \
    \    \\\n   +------------+           +       |  Regional |\n   | Statistics |\
    \           +++++++>|  Network  |\n   | Collection |<+++GigE++++       |   Router\
    \  |\n   |   Server   |                    \\         /\n   +------------+   \
    \  +---Fiber------>\\       /<------Fiber----+\n                      |      \
    \           -----                  |\n                      \\/              \
    \                         \\/\n                    -----                     \
    \                -----\n                  /       \\                         \
    \        /       \\\n                 /  Local  \\                           \
    \    /  Local  \\\n                |   Market  |                             |\
    \   Market  |\n                 \\  Router /                               \\\
    \  Router /\n       +--------->\\       /<------------+                   \\ \
    \      /\n       |            -----               |                    ------\n\
    \       |             /\\                 |                       /\\\n     Fiber\
    \           |                 Fiber                    |\n       |           Fiber\
    \                |                      Fiber\n       |             |        \
    \          |                       |\n       \\/            \\/              \
    \   \\/                      \\/\n    /------\\      /------\\           /------\\\
    \                /------\\\n   |  CMTS  |    |  CMTS  |         |  CMTS  |   \
    \           |  CMTS  |\n    \\------/      \\------/           \\------/     \
    \           \\------/\n       /\\            /\\                 /\\         \
    \             /\\\n       |             |                  |                 \
    \      |\n      Fiber         Fiber              Fiber                   Fiber\n\
    \       |             |                  |                       |\n       \\\
    /            \\/                 \\/                      \\/\n   +---------+\
    \   +---------+       +---------+             +---------+\n   | Optical |   |\
    \ Optical |       | Optical |             | Optical |\n   |  Node   |   |  Node\
    \   |       |  Node   |             |  Node   |\n   +---------+   +---------+\
    \       +---------+             +---------+\n       /\\          /\\   /\\   \
    \             /\\                /\\     /\\\n       ||          ||   ||______\
    \          ||           _____||     ||\n      Coax        Coax  |__Coax|     \
    \    Coax         |Coax__|    Coax\n       ||          ||         ||         \
    \ ||          ||           ||\n       \\/          \\/         \\/          \\\
    /          \\/           \\/\n   +=======+   +=======+   +=======+   +=======+\
    \   +=======+   +=======+\n   = Cable =   = Cable =   = Cable =   = Cable =  \
    \ = Cable =   = Cable =\n   = Modem =   = Modem =   = Modem =   = Modem =   =\
    \ Modem =   = Modem =\n   +=======+   +=======+   +=======+   +=======+   +=======+\
    \   +=======+\n   ================================================================\n\
    \   + Note: This diagram is a simplification of the actual network +\n   +   \
    \  and servers, which in actuality includes significant     +\n   +  redundancy\
    \ and other details too complex to represent here. +\n   ================================================================\n\
    \                                 Figure 1\n   Each Comcast HSI subscriber's cable\
    \ modem has a \"bootfile\", which is\n   essentially a configuration file that\
    \ contains certain pieces of\n   information about the subscriber's service to\
    \ ensure that the service\n   functions properly.  (Note: No personal information\
    \ is included in\n   the bootfile; it only includes information about the service\
    \ that the\n   subscriber has purchased.)  For example, the bootfile contains\n\
    \   information about the maximum speed (what we refer to in this\n   document\
    \ as the \"provisioned bandwidth\") that a particular modem can\n   achieve based\
    \ on the tier (personal/residential, commercial, etc.)\n   the customer has purchased.\
    \  Bootfiles are generally reset from time\n   to time to account for changes\
    \ in the network and other updates, and\n   this is usually done through a command\
    \ sent from the network and\n   without the subscriber noticing.  In preparation\
    \ for the transition\n   to this new congestion management system, Comcast sent\
    \ new bootfiles\n   to our HSI customers' cable modems that created two Quality\
    \ of\n   Service (QoS) levels for Internet traffic going to and from the cable\n\
    \   modem: (1) \"Priority Best Effort\" (\"PBE\") traffic; and (2) \"Best\n  \
    \ Effort\" (\"BE\") traffic.  As with previous changes to cable modem\n   bootfiles,\
    \ the replacement of the old bootfile with the new bootfile\n   requires no active\
    \ participation by Comcast customers.\n   Thereafter, all traffic going to or\
    \ coming from cable modems on the\n   Comcast HSI network is designated as either\
    \ PBE or BE.  PBE is the\n   default status for all Internet traffic coming from\
    \ or going to a\n   particular cable modem.  Traffic is designated BE for a particular\n\
    \   cable modem only when both of two conditions are met:\n   o  First, the usage\
    \ level of a particular upstream or downstream port\n      of a CMTS, as measured\
    \ over a particular period of time, must be\n      nearing the point where congestion\
    \ could degrade users'\n      experience.  We refer to this as the \"Near Congestion\
    \ State\" and,\n      based on the technical trials we have conducted (further\
    \ validated\n      in our full deployment), we have established a threshold,\n\
    \      described in more detail below, for when a particular CMTS port\n     \
    \ enters that state.\n   o  Second, a particular subscriber must be making an\
    \ extended, high\n      contribution to the bandwidth usage on the particular\
    \ port,\n      relative to the service tier they purchased, as measured over a\n\
    \      particular period of time.  We refer to this as the \"Extended High\n \
    \     Consumption State\" and, based on the technical trials we have\n      conducted\
    \ (further validated in our full deployment), we have\n      established a threshold,\
    \ described in more detail below, for when\n      a particular user enters that\
    \ state.\n   When, and only when, both conditions are met, a user's upstream or\n\
    \   downstream traffic (depending on which type of port is in the Near\n   Congestion\
    \ State) is designated as BE.  Then, to the extent that\n   actual congestion\
    \ occurs, any delay resulting from the congestion\n   will affect BE traffic before\
    \ it affects PBE traffic.\n   We now explain the foregoing in greater detail in\
    \ the following\n   sections.\n"
- title: 7.1.  Thresholds for Determining When a CMTS Port Is in a Near
  contents:
  - "7.1.  Thresholds for Determining When a CMTS Port Is in a Near\n      Congestion\
    \ State\n   For a CMTS port to enter the Near Congestion State, traffic flowing\n\
    \   to or from that CMTS port must exceed a specified level (the \"Port\n   Utilization\
    \ Threshold\") for a specific period of time (the \"Port\n   Utilization Duration\"\
    ).  The Port Utilization Threshold on a CMTS\n   port is measured as a percentage\
    \ of the total aggregate upstream or\n   downstream bandwidth for the particular\
    \ port during the relevant\n   timeframe.  The Port Utilization Duration on the\
    \ CMTS is measured in\n   minutes.\n   Values for each of the thresholds that\
    \ are used as part of this\n   congestion management technique have been tentatively\
    \ established\n   after an extensive process of lab tests, simulations, technical\n\
    \   trials, vendor evaluations, customer feedback, and a third-party\n   consulting\
    \ analysis.  In the same way that specific anti-spam or\n   other network management\
    \ practices are adjusted to address new issues\n   that arise, it is a near certainty\
    \ that these values will change over\n   time, as Comcast gathers more data and\
    \ performs additional analysis\n   resulting from wide-scale use of the new technique.\
    \  Moreover, as\n   with any large network or software system, software bugs and/or\n\
    \   unexpected errors may arise, requiring software patches or other\n   corrective\
    \ actions.  As always, Comcast's decisions on these matters\n   are driven by\
    \ the marketplace imperative that we deliver the best\n   possible experience\
    \ to our HSI subscribers.\n   Given our experience as described above, we determined\
    \ that a\n   starting point for the upstream Port Utilization Threshold should\
    \ be\n   70 percent and the downstream Port Utilization Threshold should be\n\
    \   80 percent.  For the Port Utilization Duration, we determined that\n   the\
    \ starting point should be approximately 15 minutes (although some\n   technical\
    \ limitations in some newer CMTSs deployed on Comcast's\n   network may make this\
    \ time period vary slightly).  Thus, over any\n   15-minute period, if an average\
    \ of more than 70 percent of a port's\n   upstream bandwidth capacity or more\
    \ than 80 percent of a port's\n   downstream bandwidth capacity is utilized, that\
    \ port is determined to\n   be in a Near Congestion State.\n   Based on the trials\
    \ conducted and operational experience to date, a\n   typical CMTS port on our\
    \ HSI network is in a Near Congestion State\n   only for relatively small portions\
    \ of the day, if at all, though\n   there is no way to forecast what will be the\
    \ busiest time on a\n   particular port on a particular day.  Moreover, the trial\
    \ data and\n   operational experience indicate that, even when a particular port\
    \ is\n   in a Near Congestion State, the instances where the network actually\n\
    \   becomes congested during the Port Utilization Duration are few, and\n   managed\
    \ users whose packets may be intermittently delayed or dropped\n   during those\
    \ congested periods perceive little, if any, effect, as\n   discussed below.\n"
- title: 7.2.  Thresholds for Determining When a User Is in an Extended High
  contents:
  - "7.2.  Thresholds for Determining When a User Is in an Extended High\n      Consumption\
    \ State and for Release from That Classification\n   Once a particular CMTS port\
    \ is in a Near Congestion State, the\n   software examines whether any cable modems\
    \ are consuming bandwidth\n   disproportionately.  (Note: Although each cable\
    \ modem is typically\n   assigned to a particular household, the software does\
    \ not and cannot\n   actually identify individual users or the number of users\
    \ sharing a\n   cable modem, or analyze particular users' traffic.)  For purposes\
    \ of\n   this document, we use \"cable modem\", \"user\", and \"subscriber\"\n\
    \   interchangeably to mean a subscriber account or user account and not\n   an\
    \ individual person.  For a user to enter an Extended High\n   Consumption State,\
    \ he or she must consume greater than a certain\n   percentage of his or her provisioned\
    \ upstream or downstream bandwidth\n   (the \"User Consumption Threshold\") for\
    \ a specific length of time (the\n   \"User Consumption Duration\").  The User\
    \ Consumption Threshold is\n   measured as a user's consumption of a particular\
    \ percentage of his or\n   her total provisioned upstream or downstream bandwidth.\
    \  That\n   bandwidth is the maximum speed that a particular modem can achieve\n\
    \   based on the tier (personal/residential, commercial, etc.) the\n   customer\
    \ has purchased.  For example, if a user buys a service with\n   speeds of 50\
    \ Mbps downstream and 10 Mbps upstream, then his or her\n   provisioned downstream\
    \ speed is 50 Mbps and provisioned upstream\n   speed is 10 Mbps.  It is also\
    \ important to note that because the User\n   Consumption Threshold is a percentage\
    \ of provisioned bandwidth for a\n   particular user account, and not a static\
    \ value, users of higher-\n   speed tiers have correspondingly higher User Consumption\
    \ Thresholds.\n   Lastly, the User Consumption Duration is measured in minutes.\n\
    \   Following lab tests, simulations, technical trials, customer\n   feedback,\
    \ vendor evaluations, and an independent third-party\n   consulting analysis,\
    \ we have determined that the appropriate starting\n   point for the User Consumption\
    \ Threshold is 70 percent of a\n   subscriber's provisioned upstream or downstream\
    \ bandwidth, and that\n   the appropriate starting point for the User Consumption\
    \ Duration is\n   15 minutes (this has been further validated in our full deployment).\n\
    \   That is, when a subscriber uses an average of 70 percent or more of\n   his\
    \ or her provisioned upstream or downstream bandwidth over a\n   particular 15-minute\
    \ period, that user is then in an Extended High\n   Consumption State.  Therefore,\
    \ this is a consumption-based threshold\n   and not a peak-speed-based threshold.\
    \  Thus, the Extended High\n   Consumption State is not tied to whether a user\
    \ has bursted once or\n   more above this 70% threshold for a brief moment.  Instead,\
    \ it is\n   consumption-based, meaning that a certain bitrate must be exceeded\n\
    \   over at least the entire User Consumption Duration.\n   The User Consumption\
    \ Thresholds have been set sufficiently high that\n   using the HSI connection\
    \ for Voice over IP (VoIP), gaming, web\n   surfing, or most streaming video cannot\
    \ alone cause subscribers to\n   our standard-level HSI service to exceed the\
    \ User Consumption\n   Threshold.  For example, while one of Comcast's common\
    \ HSI service\n   tiers has a provisioned downstream bandwidth of 22 Mbps today,\n\
    \   streaming video (even some HD video) from Hulu uses less than\n   2.5 Mbps,\
    \ a Vonage or Skype VoIP call uses less than 131 kbps, and\n   streaming music\
    \ uses less than 128 kbps (in this example, 70 percent\n   of 22 Mbps is 15.4\
    \ Mbps).  As noted above, these values are subject\n   to change as necessary\
    \ in the same way that specific anti-spam or\n   other network management practices\
    \ are adjusted to address new issues\n   that arise, or should unexpected software\
    \ bugs or other problems\n   arise.\n   Based on data collected from the trial\
    \ markets where the new\n   congestion management practices were tested (further\
    \ validated in our\n   full deployment), on average less than one-third of one\
    \ percent of\n   subscribers have had their traffic priority status changed to\
    \ the BE\n   state on any given day.  For example, in Colorado Springs, CO, the\n\
    \   largest test market, on any given day in August 2008, an average of\n   22\
    \ users out of 6,016 total subscribers in the trial had their\n   traffic priority\
    \ status changed to BE at some point during the day.\n   A user's traffic is released\
    \ from a BE state when the user's\n   bandwidth consumption drops below 50 percent\
    \ of his or her\n   provisioned upstream or downstream bandwidth for a period\
    \ of\n   approximately 15 minutes.  These release criteria are intended to\n \
    \  minimize (and hopefully prevent) user QoS oscillation, i.e., a\n   situation\
    \ in which a particular user could cycle repeatedly between\n   BE and PBE.  Thus,\
    \ without this lower release criteria, we were\n   concerned that certain users\
    \ would oscillate between BE and PBE\n   states for an extended period, without\
    \ clear benefit to the system\n   and other users, and would place an unnecessary\
    \ signaling burden on\n   the system.  NetForecast, Inc., an independent consultant\
    \ retained to\n   provide analysis and recommendations regarding Comcast's trials\
    \ and\n   related congestion management work, suggested this approach, which\n\
    \   has worked well in our trials, lab testing, and subsequent national\n   deployment.\n\
    \   Simply put, there are four steps for determining whether the traffic\n   associated\
    \ with a particular cable modem is designated as PBE or BE:\n   1. Determine if\
    \ the CMTS port is in a Near Congestion State.\n   2. If yes, determine whether\
    \ any users are in an Extended High\n      Consumption State.\n   3. If yes, change\
    \ those users' traffic to BE from PBE.  If the answer\n      at either step one\
    \ or step two is no, no action is taken.\n   4. If a user's traffic has been designated\
    \ BE, check user consumption\n      at the next interval.  If user consumption\
    \ has declined below the\n      predetermined threshold, reassign the user's traffic\
    \ as PBE.  If\n      not, recheck at the next interval.\n   In cases where a CMTS\
    \ regularly enters a Near Congestion State, and\n   where congestion subsequently\
    \ does occur, but where no users match\n   the criteria to be classified in an\
    \ Extended High Consumption State,\n   this may indicate the congestion observed\
    \ is regularly occurring,\n   rather than unpredictable congestion.  As such,\
    \ this may be an\n   additional data point in favor of considering whether and\
    \ when to add\n   capacity.\n   Figure 2 graphically depicts how this congestion\
    \ management process\n   works, using an example of a situation where upstream\
    \ port\n   utilization may be reaching a Near Congestion State (the same\n   diagram,\
    \ with different values in the appropriate places, could be\n   used to depict\
    \ the management process for downstream ports, as well):\n   Figure 2: Upstream\
    \ Congestion Management Decision Flowchart\n                       /\\\n +------------+\
    \       /  \\            +---------+            +---------+\n |   Start    | \
    \    /      \\          |         |           /         /\n | Congestion |   \
    \ /        \\         |         |          /         /\n | Management +-->+ Question\
    \ +--YES-->| Result  |--THEN-->/ Action  /\n | Process    |    \\   #1   /   \
    \      |   #1    |        /   #1    /\n |            |     \\      /         \
    \ |         |       /         /\n +------------+       \\  /            +---------+\
    \      +---------+\n                       \\/                               \
    \      |\n                       |                                     THEN\n\
    \                       NO                                     |\n           \
    \            |                                      \\/\n                    \
    \   \\/                                     /\\\n                  +---------+\
    \                                /  \\\n                  |         |        \
    \                      /      \\\n                  |         |              \
    \               /        \\\n                  | Result  |<-------------NO------------+\
    \ Question +\n                  |   #2    |                             \\   #2\
    \   /\n                  |         |                              \\      /\n\
    \                  +---------+                                \\  /\n        \
    \                                                      \\/\n                 \
    \                                             |\n                            \
    \                                 YES\n                                      \
    \                        |\n                          /\\                    \
    \             \\/\n  +---------+            /  \\                            +---------+\n\
    \  |         |          /      \\                          |         |\n  |  \
    \       |         /        \\        THEN, AT         |         |\n  | Result\
    \  |<--YES--+ Question + <---NEXT ANALYSIS------+ Result  |\n  |   #4    |   \
    \      \\   #3   /         POINT        /\\ |   #3    |\n  |         |       \
    \   \\      /                       |  |         |\n  +---------+            \\\
    \  /                         |  +---------+\n                          \\/   \
    \                       |\n                          |                       \
    \    |\n                          +------------NO-------------+\n KEY TO FIGURE\
    \ 2 ABOVE:\n  Question #1: Is the CMTS Upstream Port Utilization at an average\n\
    \               of OVER 70% for OVER 15 minutes?\n    Result #1: CMTS marked in\
    \ a Near Congestion State, indicating\n               congestion *may* occur soon.\n\
    \    Action #1: Search most recent analysis timeframe (approx. 15 mins.)\n   \
    \            of IPDR usage data.\n  Question #2: Are any users consuming an average\
    \ of OVER 70% of\n               provisioned upstream bandwidth for OVER 15 minutes?\n\
    \    Result #2: No action taken.\n    Result #3: Change user's upstream traffic\
    \ from Priority Best Effort\n               (PBE) to Best Effort (BE).\n  Question\
    \ #3: Is the user in Best Effort (BE) consuming an average\n               of\
    \ LESS THAN 50% of provisioned upstream bandwidth\n               over a period\
    \ of 15 minutes?\n    Result #4: Change user's upstream traffic back to Priority\
    \ Best\n               Effort (PBE) from Best Effort (BE).\n                 \
    \                Figure 2\n"
- title: 7.3.  Effect of BE Quality of Service on Users' Broadband Experience
  contents:
  - "7.3.  Effect of BE Quality of Service on Users' Broadband Experience\n   When\
    \ a CMTS port is in a Near Congestion State and a cable modem\n   connected to\
    \ that port is in an Extended High Consumption State, that\n   cable modem's traffic\
    \ is designated as BE.  Depending upon the level\n   of utilization on the CMTS\
    \ port, this designation may or may not\n   result in the user's traffic being\
    \ delayed or, in extreme cases,\n   dropped before PBE traffic is dropped.  This\
    \ is because of the way\n   that the CMTS handles traffic.  Specifically, CMTS\
    \ ports have what is\n   commonly called a \"scheduler\" that puts all the packets\
    \ coming from\n   or going to cable modems on that particular port in a queue\
    \ and then\n   handles them in turn.  A certain number of packets can be processed\n\
    \   by the scheduler in any given moment; for each time slot, PBE traffic\n  \
    \ is given priority access to the available capacity, and BE traffic is\n   processed\
    \ on a space-available basis.\n   A rough analogy would be to busses that empty\
    \ and fill up at\n   incredibly fast speeds.  As empty busses arrive at the figurative\n\
    \   \"bus stop\" -- every two milliseconds in this case -- they fill up\n   with\
    \ as many packets as are waiting for \"seats\" on the bus, to the\n   limits of\
    \ the bus' capacity.  During non-congested periods, the bus\n   will usually have\
    \ several empty seats, but during congested periods,\n   the bus will fill up\
    \ and packets will have to wait for the next bus.\n   It is during the congested\
    \ periods that BE packets will be affected.\n   If there is no congestion, packets\
    \ from a user in a BE state should\n   have little trouble getting on the bus\
    \ when they arrive at the bus\n   stop.  If, on the other hand, there is congestion\
    \ in a particular\n   instance, the bus may become filled by packets in a PBE\
    \ state before\n   any BE packets can get on.  In that situation, the BE packets\
    \ would\n   have to wait for the next bus that is not filled by PBE packets. \
    \ In\n   reality, this all takes place in two-millisecond increments, so even\n\
    \   if the packets miss 50 \"busses\", the delay will only be about one-\n   tenth\
    \ of a second.\n   During times of actual network congestion, when packets from\
    \ BE\n   traffic might be intermittently delayed, there is a variety of\n   effects\
    \ that could be experienced by a user whose traffic is delayed,\n   depending\
    \ upon what applications he or she is using.  Typically, a\n   user whose traffic\
    \ is in a BE state during actual congestion may find\n   that a webpage loads\
    \ sluggishly, a peer-to-peer upload takes somewhat\n   longer to complete, or\
    \ a VoIP call sounds choppy.  Of course, the\n   same thing could happen to the\
    \ customers on a port that is congested\n   in the absence of any congestion management;\
    \ the difference here is\n   that the effects of any such delays are shifted toward\
    \ those who have\n   been placing the greatest burden on the network, instead\
    \ of being\n   distributed randomly among the users of that port without regard\
    \ to\n   their consumption levels.  As a matter of fact, our studies concluded\n\
    \   that the experience of the PBE subscribers improves when this\n   congestion\
    \ management system is enabled.  This conclusion is based on\n   network measurements,\
    \ such as latency.\n   NetForecast explored the potential risk of a worst-case\
    \ scenario for\n   users whose traffic is in a BE state: the possibility of \"\
    bandwidth\n   starvation\" in the theoretical case where 100 percent of the CMTS\n\
    \   bandwidth is taken up by PBE traffic for an extended period of time.\n   In\
    \ theory, such a condition could mean that a given user whose\n   traffic is designated\
    \ BE would be unable to effectuate an upload or\n   download (as noted above,\
    \ both are managed separately) for some\n   period of time.  However, when these\
    \ management techniques were\n   tested, first in company testbeds and then in\
    \ our real-world trials\n   conducted in the five markets (further validated in\
    \ our full\n   deployment), such a theoretical condition did not occur.  In\n\
    \   addition, our experience with the system as fully deployed in our\n   production\
    \ network demonstrates that these management practices have\n   very modest real-world\
    \ impacts.  In addition, Comcast did not receive\n   a single customer complaint,\
    \ in any of the trial markets, that could\n   be traced to this congestion management\
    \ system, despite having\n   broadly publicized these trials.  In our subsequent\
    \ national\n   deployment into our production network, we still have yet to find\
    \ a\n   specific complaint that can be traced back to the effect of this\n   congestion\
    \ management system.\n   Comcast continues to monitor how user traffic is affected\
    \ by these\n   new congestion management techniques and will make the adjustments\n\
    \   necessary to ensure that all Comcast HSI customers have a high-\n   quality\
    \ Internet experience.\n"
- title: 7.4.  Equipment/Software Used and Location
  contents:
  - "7.4.  Equipment/Software Used and Location\n   The above-mentioned functions\
    \ are carried out using three different\n   types of application servers, supplied\
    \ by three different vendors.\n   As mentioned above, these servers are installed\
    \ near Comcast's\n   regional network routers.  The exact locations of these servers\
    \ are\n   not particularly relevant to this document, as this information does\n\
    \   not change the fact that the servers manage individual CMTS ports.\n   The\
    \ first application server is an IPDR server, which collects\n   relevant cable\
    \ modem volume usage information from the CMTS, such as\n   how many aggregate\
    \ upstream or downstream bytes a subscriber uses\n   over a particular period\
    \ of time.  IPDR has been adopted as a\n   standard by many industry organizations\
    \ and initiatives, such as\n   CableLabs, the Alliance for Telecommunications\
    \ Industry Solutions\n   (ATIS), the International Telecommunication Union (ITU),\
    \ and the\n   Third Generation Partnership Project (3GPP), among others.  The\
    \ IPDR\n   software deployed was developed by Active Broadband Networks, and is\n\
    \   noted as the Statistics Collection Server in Figure 3.\n   The second application\
    \ server is the Congestion Management server,\n   which uses the Simple Network\
    \ Management Protocol (SNMP) [RFC3410] to\n   measure CMTS port utilization and\
    \ detect when a port is in a Near\n   Congestion State.  When this happens, the\
    \ Congestion Management\n   server then queries the relevant IPDR data for a list\
    \ of cable modems\n   meeting the criteria set forth above for being in an Extended\
    \ High\n   Consumption State.  The Congestion Management server software\n   deployed\
    \ was developed by Sandvine.\n   If one or more users meet the criteria to be\
    \ managed, then the\n   Congestion Management server notifies a third application\
    \ server, the\n   PCMM application server, as to which users have been in an Extended\n\
    \   High Consumption State and whose traffic should be treated as BE.\n   The\
    \ PCMM servers are responsible for signaling a given CMTS to set\n   the traffic\
    \ for specific cable modems with a BE QoS, and for tracking\n   and managing the\
    \ state of such CMTS actions.  If no users meet the\n   criteria to be managed,\
    \ no users will have their traffic managed.\n   The PCMM software deployed was\
    \ developed by Camiant, and is noted as\n   the QoS Server in Figure 3.\n   Figure\
    \ 3 graphically depicts the high-level management flows among\n   the congestion\
    \ management components on Comcast's network, as\n   described above:\n   Figure\
    \ 3: Simplified Diagram Showing High-Level Management Flows\n   Relevant to the\
    \ System\n   +---------------+                            +---------------+\n\
    \   |  Congestion   |     Instruct QoS Server    |      QoS      |\n   |  Management\
    \   |******to Change QoS for****>|     Server    |\n   |    Server     |     \
    \    a Device           |               |\n   +----+---+------+              \
    \              +-------+-------+\n        /\\  /\\                           \
    \               *\n        |   |    Relay Selected                         *\n\
    \        X   +---Statistics: Bytes---+               QoS Action:\n        |  \
    \     Up/Down by Device   |             Change from PBE\n        X           \
    \       +-------+-------+     to BE, or from\n        |                  |  Statistics\
    \   |       BE to PBE\n        X                  |  Collection   |          \
    \  *\n    Periodic SNMP          |    Server     |            *\n     Requests\
    \ to           +---------------+            *\n   Check CMTS Port            \
    \     /\\                   *\n    Utilization                    |          \
    \          *\n      Levels                 Statistics Sent            *\n    \
    \    |                 Periodically From CMTS        *\n        X            \
    \              |                    *\n        |              +-----------+-----------+\
    \        *\n        +-X-X-X-X-X-X->|   CMTS in Headend     |<********\n      \
    \                 +-----------------------+\n                          H   /\\\
    \        /\\   H\n                          H Internet Traffic H\n           \
    \               H  to/from User    H\n                          H   \\/      \
    \  \\/   H\n                       /+---------------------+\\\n              \
    \        / | User's  +---------+  |\\\n                     /  | Home    |  Cable\
    \  |  | \\\n                        |         |  Modem  |  |\n   ============\
    \         |         +---------+  |\n   = Notes:   =         +----------------------+\n\
    \   =          ========================================================\n   =\
    \ 1 - Statistics Collection Servers use IP Detail Records (IPDR). =\n   = 2 -\
    \ QoS Servers use PacketCable Multimedia (PCMM)               =\n   =     to set\
    \ QoS gates on the CMTS.                               =\n   = 3 - This figure\
    \ is a simplification of the actual network and   =\n   =     servers, which included\
    \ redundancies and other complexities =\n   =     not necessary to depict the\
    \ functional design.              =\n   ===================================================================\n\
    \                                 Figure 3\n"
- title: 8.  Conclusion
  contents:
  - "8.  Conclusion\n   Comcast started design and development of this new protocol-agnostic\n\
    \   congestion management system in March 2008.  Comcast shared the\n   design\
    \ with the IETF and others in the Internet community, as well as\n   with an independent\
    \ consultant, incorporating feedback we received\n   into the final design.  Following\
    \ lab testing, the system was tested\n   in Comcast's production network in trial\
    \ markets between June and\n   September 2008.  Comcast's production network transition\
    \ to this new\n   protocol-agnostic congestion management system began in October\
    \ 2008\n   and was completed on December 31, 2008.\n   As described herein, the\
    \ new approach does not manage congestion by\n   focusing on managing the use\
    \ of specific protocols.  Nor does this\n   approach use TCP \"reset packets\"\
    \ [RFC3360].  Rather, the system acts\n   such that during periods when a CMTS\
    \ port is in a Near Congestion\n   State, the system (1) identifies the subscribers\
    \ on that port who\n   have consumed a disproportionate amount of bandwidth over\
    \ the\n   preceding 15 minutes and (2) lowers the priority status of those\n \
    \  subscribers' traffic to BE status until those subscribers meet the\n   release\
    \ criteria.  During periods of actual congestion, the system\n   handles PBE traffic\
    \ before BE traffic.  Comcast's trials and\n   subsequent national deployment\
    \ indicate that this new congestion\n   management system ensures a quality online\
    \ experience for all of\n   Comcast's HSI customers.\n"
- title: 9.  Exceptional Network Utilization Considerations
  contents:
  - "9.  Exceptional Network Utilization Considerations\n   This system was developed\
    \ to cope with somewhat \"normal\" occurrences\n   of congestion that could occur\
    \ on virtually any IP network.  It\n   should also be noted, however, that such\
    \ a system could also prove\n   particularly useful in the case of \"exceptional\
    \ network utilization\"\n   events that existing network usage models do not or\
    \ cannot accurately\n   predict.  Some network operators refer to these exceptional\
    \ events as\n   \"surges\" in utilization, similar to sudden surges in demand\
    \ in\n   electrical power grids, with which many people may be familiar.\n   For\
    \ example, in the case of a severe global pandemic, it may be\n   expected that\
    \ large swaths of the population may need to work\n   remotely, via their Internet\
    \ connection.  In such a case, a largely\n   unprecedented level of utilization\
    \ may occur.  In such cases, it may\n   be helpful to have a flexible congestion\
    \ management system that could\n   adapt to this situation and help allocate network\
    \ resources while\n   additional capacity is being brought online or while a temporary\n\
    \   condition persists.\n"
- title: 10.  Limitations of This Congestion Management System
  contents:
  - "10.  Limitations of This Congestion Management System\n   The main limitations\
    \ of the system include:\n   o  The system is not an end-to-end congestion management\
    \ system, nor\n      does it enable one.\n   o  The system does not signal the\
    \ presence of congestion to user\n      applications or to all devices on the\
    \ network path.\n   o  The system does not explicitly enable additional user and/or\n\
    \      application responses to congestion.\n   o  The system does not enable\
    \ distributed denial-of-service (DDoS)\n      mitigation or other capabilities.\n"
- title: 11.  Low Extra Delay Background Transport and Other Possibilities
  contents:
  - "11.  Low Extra Delay Background Transport and Other Possibilities\n   There are\
    \ several new IETF working group efforts that are focused on\n   the question\
    \ of congestion and its effects, avoiding congestion,\n   managing congestion,\
    \ and communicating congestion information.  This\n   includes the Congestion\
    \ Exposure (CONEX) working group, the\n   Application Layer Transport Optimization\
    \ (ALTO) working group, and\n   the Low Extra Delay Background Transport (LEDBAT)\
    \ working group.\n   Should one or more of these working groups be successful\
    \ in producing\n   useful work, it is possible that the design or configuration\
    \ of the\n   system documented here may need to change.  For example, this\n \
    \  congestion management system does not currently have a way to take\n   into\
    \ account differing classes of data transfer, such as a class of\n   data transfer\
    \ that LEDBAT may specify, which may better yield to\n   other traffic than existing\
    \ transport protocols.  In addition, CONEX\n   may specify methods for this or\
    \ other systems to signal congestion\n   state or expected congestion to other\
    \ parts of the network, and/or to\n   hosts on either end of a particular network\
    \ flow.  Furthermore, it is\n   conceivable that the result of current or future\
    \ IETF work could\n   obviate the need for such a congestion management system\
    \ entirely.\n"
- title: 12.  Security Considerations
  contents:
  - "12.  Security Considerations\n   It is important that an ISP secure access to\
    \ the Congestion\n   Management servers and the QoS Servers, as well as QoS signaling\
    \ to\n   the CMTSs, so that unauthorized users and/or hosts cannot make\n   unauthorized\
    \ changes to QoS settings in the network.\n   It is also important to secure access\
    \ to the Statistics Collection\n   Server since this contains IPDR-based byte\
    \ transfer data that is\n   considered private by end users on an individual basis.\
    \  In addition,\n   this data is considered ISP-proprietary traffic data on an\
    \ aggregate\n   basis.  Access to the Statistics Collection Server should also\
    \ be\n   secured so that false usage statistics cannot be fed into the system.\n\
    \   It is important to note that IPDR data contains a count of bytes sent\n  \
    \ and bytes received, by cable modem MAC address, over a given interval\n   of\
    \ time.  This data does not contain things such as the source and/or\n   destination\
    \ Internet address of that data, nor does it contain the\n   protocols used, ports\
    \ used, etc.\n"
- title: 13.  Acknowledgements
  contents:
  - "13.  Acknowledgements\n   The authors wish to acknowledge the hard work of the\
    \ many people who\n   helped to develop and/or review this document, as well as\
    \ the people\n   who helped deploy the system in such a short period of time.\n\
    \   The authors also wish to acknowledge the following individuals for\n   performing\
    \ a detailed review of this document and/or providing\n   comments and feedback\
    \ that helped to improve and evolve this\n   document:\n   - Kris Bransom\n  \
    \ - Bob Briscoe\n   - Lars Eggert\n   - Ari Keranen\n   - Tero Kivinen\n   - Matt\
    \ Mathis\n   - Stanislav Shalunov\n"
- title: 14.  Informative References
  contents:
  - "14.  Informative References\n   [COMCAST_P2PI_PAPER]\n               Livingood,\
    \ J. and R. Woundy, \"Comcast's IETF P2P\n               Infrastructure Workshop\
    \ Position Paper\", FCC\n               Filings Comcast Network Management Proceedings,\
    \ May 2008,\n               <http://trac.tools.ietf.org/area/rai/trac/raw-attachment/\n\
    \               wiki/PeerToPeerInfrastructure/\n               16%20ietf-p2pi-comcast-20080509.pdf>.\n\
    \   [COMCAST_P2PI_PRES]\n               Livingood, J. and R. Woundy, \"Comcast's\
    \ IETF P2P\n               Infrastructure Workshop Presentation on May 28, 2008\"\
    ,\n               FCC Filings Comcast Network Management Proceedings,\n      \
    \         May 2008,\n               <http://trac.tools.ietf.org/area/rai/trac/raw-attachment/\n\
    \               wiki/PeerToPeerInfrastructure/02-Comcast-IETF-P2Pi.pdf>.\n   [DOCSIS_CM2CPE]\n\
    \               CableLabs, \"Data-Over-Cable Service Interface\n             \
    \  Specifications - DOCSIS 3.0 - Cable Modem to Customer\n               Premise\
    \ Equipment Interface Specification\", DOCSIS\n               3.0 CM-SP-CMCIv3-I01-080320,\
    \ March 2008,\n               <http://www.cablelabs.com/cablemodem/specifications/\n\
    \               specifications30.html>.\n   [DOCSIS_IPDR]\n               Yassini,\
    \ R., \"Data-Over-Cable Service Interface\n               Specifications - DOCSIS\
    \ 2.0 - Operations Support System\n               Interface Specification\", DOCSIS\
    \ 2.0 CM-SP-OSSIv2.0-C01-\n               081104, November 2008, <http://www.cablelabs.com/\n\
    \               cablemodem/specifications/specifications30.html>.\n   [DOCSIS_MULPI]\n\
    \               CableLabs, \"Data-Over-Cable Service Interface\n             \
    \  Specifications - DOCSIS 3.0 - MAC and Upper Layer\n               Protocols\
    \ Interface Specification\", DOCSIS 3.0 CM-SP-\n               MULPIv3.0-I11-091002,\
    \ October 2009, <http://\n               www.cablelabs.com/cablemodem/specifications/\n\
    \               specifications30.html>.\n   [DOCSIS_OSSI]\n               CableLabs,\
    \ \"Data-Over-Cable Service Interface\n               Specifications - DOCSIS\
    \ 3.0 - Operations Support System\n               Interface Specification\", DOCSIS\
    \ 3.0 CM-SP-OSSIv3.0-I10-\n               091002, October 2009, <http://www.cablelabs.com/\n\
    \               cablemodem/specifications/specifications30.html>.\n   [DOCSIS_PHY]\n\
    \               CableLabs, \"Data-Over-Cable Service Interface\n             \
    \  Specifications - DOCSIS 3.0 - Physical Layer\n               Specification\"\
    , DOCSIS 3.0 CM-SP-PHYv3.0-I08-090121,\n               January 2009, <http://www.cablelabs.com/cablemodem/\n\
    \               specifications/specifications30.html>.\n   [DOCSIS_SEC]\n    \
    \           CableLabs, \"Data-Over-Cable Service Interface\n               Specifications\
    \ - DOCSIS 3.0 - Security Specification\",\n               DOCSIS 3.0 CM-SP-SECv3.0-I11-091002,\
    \ March 2008, <http://\n               www.cablelabs.com/cablemodem/specifications/\n\
    \               specifications30.html>.\n   [FCC_Congest_Mgmt_Ltr]\n         \
    \      Zachem, K., \"Letter to the FCC Advising of Successful\n              \
    \ Deployment of Comcast's New Congestion Management\n               System\",\
    \ FCC Filings Comcast Network Management\n               Proceedings, January\
    \ 2009,\n               <http://fjallfoss.fcc.gov/ecfs/document/\n           \
    \    view?id=6520192582>.\n   [FCC_Memo_Opinion]\n               Martin, K., Copps,\
    \ M., Adelstein, J., Tate, D., and R.\n               McDowell, \"FCC Memorandum\
    \ and Opinion Regarding\n               Reasonable Network Management\", File\
    \ No. EB-08-IH-1518 WC\n               Docket No.  07-52, August 2008,\n     \
    \          <http://hraunfoss.fcc.gov/\n               edocs_public/attachmatch/FCC-08-183A1.pdf>.\n\
    \   [FCC_Net_Mgmt_Response]\n               Zachem, K., \"Letter to the FCC Regarding\
    \ Comcast's\n               Network Management Practices\", FCC Filings Comcast\n\
    \               Network Management Proceedings, September 2008, <http://\n   \
    \            fjallfoss.fcc.gov/ecfs/document/view?id=6520169715>.\n   [IPDR_Standard]\n\
    \               Cotton, S., Cockrell, B., Walls, P., and T. Givoly,\n        \
    \       \"Network Data Management - Usage (NDM-U) For IP-Based\n             \
    \  Services.  Service Specification - Cable Labs DOCSIS 2.0\n               SAMIS\"\
    , IPDR Service Specifications NDM-U, November 2004,\n               <http://www.ipdr.org/public/Service_Specifications/3.X/\n\
    \               DOCSIS(R)3.5-A.0.pdf>.\n   [PowerBoost_Specification]\n      \
    \         Comcast Cable Communications Management LLC, \"Comcast\n           \
    \    PowerBoost Specification\", Website Comcast.com,\n               June 2010,\
    \ <http://customer.comcast.com/Pages/\n               FAQListViewer.aspx?topic=Internet&\n\
    \               folder=8b2fc392-4cde-4750-ba34-051cd5feacf0>.\n   [RFC1633]  \
    \ Braden, B., Clark, D., and S. Shenker, \"Integrated\n               Services\
    \ in the Internet Architecture: an Overview\",\n               RFC 1633, June\
    \ 1994.\n   [RFC2475]   Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z.,\n\
    \               and W. Weiss, \"An Architecture for Differentiated\n         \
    \      Services\", RFC 2475, December 1998.\n   [RFC3083]   Woundy, R., \"Baseline\
    \ Privacy Interface Management\n               Information Base for DOCSIS Compliant\
    \ Cable Modems and\n               Cable Modem Termination Systems\", RFC 3083,\
    \ March 2001.\n   [RFC3360]   Floyd, S., \"Inappropriate TCP Resets Considered\
    \ Harmful\",\n               BCP 60, RFC 3360, August 2002.\n   [RFC3410]   Case,\
    \ J., Mundy, R., Partain, D., and B. Stewart,\n               \"Introduction and\
    \ Applicability Statements for Internet-\n               Standard Management Framework\"\
    , RFC 3410, December 2002.\n   [RFC5594]   Peterson, J. and A. Cooper, \"Report\
    \ from the IETF\n               Workshop on Peer-to-Peer (P2P) Infrastructure,\
    \ May 28,\n               2008\", RFC 5594, July 2009.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Chris Bastian\n   Comcast Cable Communications\n   One\
    \ Comcast Center\n   1701 John F. Kennedy Boulevard\n   Philadelphia, PA  19103\n\
    \   US\n   EMail: chris_bastian@cable.comcast.com\n   URI:   http://www.comcast.com\n\
    \   Tom Klieber\n   Comcast Cable Communications\n   1306 Goshen Parkway\n   West\
    \ Chester, PA  19380\n   US\n   EMail: tom_klieber@cable.comcast.com\n   URI:\
    \   http://www.comcast.com\n   Jason Livingood\n   Comcast Cable Communications\n\
    \   One Comcast Center\n   1701 John F. Kennedy Boulevard\n   Philadelphia, PA\
    \  19103\n   US\n   EMail: jason_livingood@cable.comcast.com\n   URI:   http://www.comcast.com\n\
    \   Jim Mills\n   Comcast Cable Communications\n   One Comcast Center\n   1800\
    \ Bishops Gate Drive\n   Mount Laurel, NJ  08054\n   US\n   EMail: jim_mills@cable.comcast.com\n\
    \   URI:   http://www.comcast.com\n   Richard Woundy\n   Comcast Cable Communications\n\
    \   27 Industrial Avenue\n   Chelmsford, MA  01824\n   US\n   EMail: richard_woundy@cable.comcast.com\n\
    \   URI:   http://www.comcast.com\n"
