- title: __initial_text__
  contents:
  - '     An Extensible Message Format for Delivery Status Notifications

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This document specifies an Internet standards track protocol\
    \ for the\n   Internet community, and requests discussion and suggestions for\n\
    \   improvements.  Please refer to the current edition of the \"Internet\n   Official\
    \ Protocol Standards\" (STD 1) for the standardization state\n   and status of\
    \ this protocol.  Distribution of this memo is unlimited.\n"
- title: Abstract
  contents:
  - "Abstract\n   This memo defines a MIME content-type that may be used by a message\n\
    \   transfer agent (MTA) or electronic mail gateway to report the result\n   of\
    \ an attempt to deliver a message to one or more recipients.  This\n   content-type\
    \ is intended as a machine-processable replacement for the\n   various types of\
    \ delivery status notifications currently used in\n   Internet electronic mail.\n\
    \   Because many messages are sent between the Internet and other\n   messaging\
    \ systems (such as X.400 or the so-called \"LAN-based\"\n   systems), the DSN\
    \ protocol is designed to be useful in a multi-\n   protocol messaging environment.\
    \  To this end, the protocol described\n   in this memo provides for the carriage\
    \ of \"foreign\" addresses and\n   error codes, in addition to those normally\
    \ used in Internet mail.\n   Additional attributes may also be defined to support\
    \ \"tunneling\" of\n   foreign notifications through Internet mail.\n   Any questions,\
    \ comments, and reports of defects or ambiguities in\n   this specification may\
    \ be sent to the mailing list for the NOTARY\n   working group of the IETF, using\
    \ the address\n   <notifications@cs.utk.edu>.  Requests to subscribe to the mailing\n\
    \   list should be addressed to <notifications-request@cs.utk.edu>.\n   Implementors\
    \ of this specification are encouraged to subscribe to the\n   mailing list, so\
    \ that they will quickly be informed of any problems\n   which might hinder interoperability.\n\
    \   NOTE: This document is a Proposed Standard.  If and when this\n   protocol\
    \ is submitted for Draft Standard status, any normative text\n   (phrases containing\
    \ SHOULD, SHOULD NOT, MUST, MUST NOT, or MAY) in\n   this document will be re-evaluated\
    \ in light of implementation\n   experience, and are thus subject to change.\n"
- title: 1. Introduction
  contents:
  - "1. Introduction\n   This memo defines a MIME [1] content-type for delivery status\n\
    \   notifications (DSNs).  A DSN can be used to notify the sender of a\n   message\
    \ of any of several conditions:  failed delivery, delayed\n   delivery, successful\
    \ delivery, or the gatewaying of a message into an\n   environment that may not\
    \ support DSNs.  The \"message/delivery-status\"\n   content-type defined herein\
    \ is intended for use within the framework\n   of the \"multipart/report\" content\
    \ type defined in [2].\n   This memo defines only the format of the notifications.\
    \  An extension\n   to the Simple Message Transfer Protocol (SMTP) [3] to fully\
    \ support\n   such notifications is the subject of a separate memo [4].\n"
- title: 1.1 Purposes
  contents:
  - "1.1 Purposes\n   The DSNs defined in this memo are expected to serve several\
    \ purposes:\n"
- title: (a) Inform human beings of the status of message delivery processing, as
  contents:
  - "(a) Inform human beings of the status of message delivery processing, as\n  \
    \  well as the reasons for any delivery problems or outright failures,\n    in\
    \ a manner which is largely independent of human language;\n"
- title: (b) Allow mail user agents to keep track of the delivery status of
  contents:
  - "(b) Allow mail user agents to keep track of the delivery status of\n    messages\
    \ sent, by associating returned DSNs with earlier message\n    transmissions;\n"
- title: (c) Allow mailing list exploders to automatically maintain their
  contents:
  - "(c) Allow mailing list exploders to automatically maintain their\n    subscriber\
    \ lists when delivery attempts repeatedly fail;\n"
- title: (d) Convey delivery and non-delivery notifications resulting from
  contents:
  - "(d) Convey delivery and non-delivery notifications resulting from\n    attempts\
    \ to deliver messages to \"foreign\" mail systems via a\n    gateway;\n"
- title: (e) Allow "foreign" notifications to be tunneled through a MIME-capable
  contents:
  - "(e) Allow \"foreign\" notifications to be tunneled through a MIME-capable\n \
    \   message system and back into the original messaging system that\n    issued\
    \ the original notification, or even to a third messaging\n    system;\n"
- title: (f) Allow language-independent, yet reasonably precise, indications of
  contents:
  - "(f) Allow language-independent, yet reasonably precise, indications of\n    the\
    \ reason for the failure of a message to be delivered (once status\n    codes\
    \ of sufficient precision are defined); and\n"
- title: (g) Provide sufficient information to remote MTA maintainers (via
  contents:
  - "(g) Provide sufficient information to remote MTA maintainers (via\n    \"trouble\
    \ tickets\") so that they can understand the nature of\n    reported errors. \
    \ This feature is used in the case that failure to\n    deliver a message is due\
    \ to the malfunction of a remote MTA and the\n    sender wants to report the problem\
    \ to the remote MTA administrator.\n"
- title: 1.2 Requirements
  contents:
  - "1.2 Requirements\n    These purposes place the following constraints on the notification\n\
    \    protocol:\n"
- title: (a) It must be readable by humans as well as being machine-parsable.
  contents:
  - '(a) It must be readable by humans as well as being machine-parsable.

    '
- title: (b) It must provide enough information to allow message senders (or the
  contents:
  - "(b) It must provide enough information to allow message senders (or the\n   \
    \ user agents) to unambiguously associate a DSN with the message that\n    was\
    \ sent and the original recipient address for which the DSN is\n    issued (if\
    \ such information is available), even if the message was\n    forwarded to another\
    \ recipient address.\n"
- title: (c) It must be able to preserve the reason for the success or failure of
  contents:
  - "(c) It must be able to preserve the reason for the success or failure of\n  \
    \  a delivery attempt in a remote messaging system, using the\n    \"language\"\
    \ (mailbox addresses and status codes) of that remote\n    system.\n"
- title: (d) It must also be able to describe the reason for the success or
  contents:
  - "(d) It must also be able to describe the reason for the success or\n    failure\
    \ of a delivery attempt, independent of any particular human\n    language or\
    \ of the \"language\" of any particular mail system.\n"
- title: (e) It must preserve enough information to allow the maintainer of a
  contents:
  - "(e) It must preserve enough information to allow the maintainer of a\n    remote\
    \ MTA to understand (and if possible, reproduce) the conditions\n    that caused\
    \ a delivery failure at that MTA.\n"
- title: (f) For any notifications issued by foreign mail systems, which are
  contents:
  - "(f) For any notifications issued by foreign mail systems, which are\n    translated\
    \ by a mail gateway to the DSN format, the DSN must\n    preserve the \"type\"\
    \ of the foreign addresses and error codes, so\n    that these may be correctly\
    \ interpreted by gateways.\n   A DSN contains a set of per-message fields which\
    \ identify the message\n   and the transaction during which the message was submitted,\
    \ along\n   with other fields that apply to all delivery attempts described by\n\
    \   the DSN.  The DSN also includes a set of per-recipient fields to\n   convey\
    \ the result of the attempt to deliver the message to each of\n   one or more\
    \ recipients.\n"
- title: 1.3 Terminology
  contents:
  - "1.3 Terminology\n   A message may be transmitted through several message transfer\
    \ agents\n   (MTAs) on its way to a recipient.  For a variety of reasons,\n  \
    \ recipient addresses may be rewritten during this process, so each MTA\n   may\
    \ potentially see a different recipient address.  Depending on the\n   purpose\
    \ for which a DSN is used, different formats of a particular\n   recipient address\
    \ will be needed.\n   Several DSN fields are defined in terms of the view from\
    \ a particular\n   MTA in the transmission.  The MTAs are assigned the following\
    \ names:\n   (a) Original MTA\n   The Original MTA is the one to which the message\
    \ is submitted for\n   delivery by the sender of the message.\n   (b) Reporting\
    \ MTA\n   For any DSN, the Reporting MTA is the one which is reporting the\n \
    \  results of delivery attempts described in the DSN.\n   If the delivery attempts\
    \ described occurred in a \"foreign\" (non-\n   Internet) mail system, and the\
    \ DSN was produced by translating the\n   foreign notice into DSN format, the\
    \ Reporting MTA will still identify\n   the \"foreign\" MTA where the delivery\
    \ attempts occurred.\n   (c) Received-From MTA\n   The Received-From MTA is the\
    \ MTA from which the Reporting MTA\n   received the message, and accepted responsibility\
    \ for delivery of the\n   message.\n   (d) Remote MTA\n   If an MTA determines\
    \ that it must relay a message to one or more\n   recipients, but the message\
    \ cannot be transferred to its \"next hop\"\n   MTA, or if the \"next hop\" MTA\
    \ refuses to accept responsibility for\n   delivery of the message to one or more\
    \ of its intended recipients,\n   the relaying MTA may need to issue a DSN on\
    \ behalf of the recipients\n   for whom the message cannot be delivered.  In this\
    \ case the relaying\n   MTA is the Reporting MTA, and the \"next hop\" MTA is\
    \ known as the\n   Remote MTA.\n"
- title: Figure 1 illustrates the relationship between the various MTAs.
  contents:
  - 'Figure 1 illustrates the relationship between the various MTAs.

    '
- title: +-----+    +--------+           +---------+    +---------+      +------+
  contents:
  - '+-----+    +--------+           +---------+    +---------+      +------+

    '
- title: '|     |    |        |           |Received-|    |         |      |      |'
  contents:
  - '|     |    |        |           |Received-|    |         |      |      |

    '
- title: '|     | => |Original| => ... => |  From   | => |Reporting| ===> |Remote|'
  contents:
  - '|     | => |Original| => ... => |  From   | => |Reporting| ===> |Remote|

    '
- title: '| user|    |   MTA  |           |   MTA   |    |   MTA   | <No! |  MTA |'
  contents:
  - '| user|    |   MTA  |           |   MTA   |    |   MTA   | <No! |  MTA |

    '
- title: '|agent|    +--------+           +---------+    +----v----+      +------+'
  contents:
  - '|agent|    +--------+           +---------+    +----v----+      +------+

    '
- title: '|     |                                             |'
  contents:
  - '|     |                                             |

    '
- title: '|     | <-------------------------------------------+'
  contents:
  - '|     | <-------------------------------------------+

    '
- title: +-----+      (DSN returned to sender by Reporting MTA)
  contents:
  - "+-----+      (DSN returned to sender by Reporting MTA)\n     Figure 1.  Original,\
    \ Received-From, Reporting and Remote MTAs\n   Each of these MTAs may provide\
    \ information which is useful in a DSN:\n"
- title: + Ideally, the DSN will contain the address of each recipient as
  contents:
  - "+ Ideally, the DSN will contain the address of each recipient as\n  originally\
    \ specified to the Original MTA by the sender of the message.\n  This version\
    \ of the address is needed (rather than a forwarding\n  address or some modified\
    \ version of the original address) so that the\n  sender may compare the recipient\
    \ address in the DSN with the address\n  in the sender's records (e.g. an address\
    \ book for an individual, the\n  list of subscribers for a mailing list) and take\
    \ appropriate action.\n  Similarly, the DSN might contain an \"envelope identifier\"\
    \ that was\n  known to both the sender's user agent and the Original MTA at the\
    \ time\n  of message submission, and which, if included in the DSN, can be used\n\
    \  by the sender to keep track of which messages were or were not\n  delivered.\n"
- title: + If a message was (a) forwarded to a different address than that
  contents:
  - "+ If a message was (a) forwarded to a different address than that\n  specified\
    \ by the sender, (b) gatewayed to a different mail system than\n  that used by\
    \ the sender, or (c) subjected to address rewriting during\n  transmission, the\
    \ \"final\" form of the recipient address (i.e. the one\n  seen by the Reporting\
    \ MTA) will be different than the original\n  (sender-specified) recipient address.\
    \  Just as the sender's user agent\n  (or the sender) prefers the original recipient\
    \ address, so the \"final\"\n  address is needed when reporting a problem to the\
    \ postmaster of the\n  site where message delivery failed, because only the final\
    \ recipient\n  address will allow her to reproduce the conditions that caused\
    \ the\n  failure.\n"
- title: + A "failed" DSN should contain the most accurate explanation for the
  contents:
  - "+ A \"failed\" DSN should contain the most accurate explanation for the\n  delivery\
    \ failure that is available.  For ease of interpretation, this\n  information\
    \ should be a format which is independent of the mail\n  transport system that\
    \ issued the DSN.  However, if a foreign error\n  code is translated into some\
    \ transport-independent format, some\n  information may be lost.  It is therefore\
    \ desirable to provide both a\n  transport-independent status code and a mechanism\
    \ for reporting\n  transport-specific codes.  Depending on the circumstances that\n\
    \  produced delivery failure, the transport-specific code might be\n  obtained\
    \ from either the Reporting MTA or the Remote MTA.\n   Since different values\
    \ for \"recipient address\" and \"delivery status\n   code\" are needed according\
    \ to the circumstance in which a DSN will be\n   used, and since the MTA that\
    \ issues the DSN cannot anticipate those\n   circumstances, the DSN format described\
    \ here may contain both the\n   original and final forms of a recipient address,\
    \ and both a\n   transport-independent and a transport-specific indication of\
    \ delivery\n   status.\n   Extension fields may also be added by the Reporting\
    \ MTA as needed to\n   provide additional information for use in a trouble ticket\
    \ or to\n   preserve information for tunneling of foreign delivery reports\n \
    \  through Internet DSNs.\n   The Original, Reporting, and Remote MTAs may exist\
    \ in very different\n   environments and use dissimilar transport protocols, MTA\
    \ names,\n   address formats, and delivery status codes.  DSNs therefore do not\n\
    \   assume any particular format for mailbox addresses, MTA names, or\n   transport-specific\
    \ status codes.  Instead, the various DSN fields\n   that carry such quantities\
    \ consist of a \"type\" subfield followed by a\n   subfield whose contents are\
    \ ordinary text characters, and the format\n   of which is indicated by the \"\
    type\" subfield.  This allows a DSN to\n   convey these quantities regardless\
    \ of format.\n"
- title: 2. Format of a Delivery Status Notification
  contents:
  - "2. Format of a Delivery Status Notification\n   A DSN is a MIME message with\
    \ a top-level content-type of\n   multipart/report (defined in [2]).  When a multipart/report\
    \ content\n   is used to transmit a DSN:\n"
- title: (a) The report-type parameter of the multipart/report content is
  contents:
  - "(a) The report-type parameter of the multipart/report content is\n    \"delivery-status\"\
    .\n"
- title: (b) The first component of the multipart/report contains a human-
  contents:
  - "(b) The first component of the multipart/report contains a human-\n    readable\
    \ explanation of the DSN, as described in [2].\n"
- title: (c) The second component of the multipart/report is of content-type
  contents:
  - "(c) The second component of the multipart/report is of content-type\n    message/delivery-status,\
    \ described in section 2.1 of this document.\n"
- title: (d) If the original message or a portion of the message is to be
  contents:
  - "(d) If the original message or a portion of the message is to be\n    returned\
    \ to the sender, it appears as the third component of the\n    multipart/report.\n\
    \    NOTE: For delivery status notifications gatewayed from foreign\n    systems,\
    \ the headers of the original message may not be available.\n    In this case\
    \ the third component of the DSN may be omitted, or it\n    may contain \"simulated\"\
    \ RFC 822 headers which contain equivalent\n    information.  In particular, it\
    \ is very desirable to preserve the\n    subject, date, and message-id (or equivalent)\
    \ fields from the\n    original message.\n   The DSN MUST be addressed (in both\
    \ the message header and the\n   transport envelope) to the return address from\
    \ the transport envelope\n   which accompanied the original message for which\
    \ the DSN was\n   generated.  (For a message that arrived via SMTP, the envelope\
    \ return\n   address appears in the MAIL FROM command.)\n   The From field of\
    \ the message header of the DSN SHOULD contain the\n   address of a human who\
    \ is responsible for maintaining the mail system\n   at the Reporting MTA site\
    \ (e.g.  Postmaster), so that a reply to the\n   DSN will reach that person. \
    \ Exception: if a DSN is translated from a\n   foreign delivery report, and the\
    \ gateway performing the translation\n   cannot determine the appropriate address,\
    \ the From field of the DSN\n   MAY be the address of a human who is responsible\
    \ for maintaining the\n   gateway.\n   The envelope sender address of the DSN\
    \ SHOULD be chosen to ensure\n   that no delivery status reports will be issued\
    \ in response to the DSN\n   itself, and MUST be chosen so that DSNs will not\
    \ generate mail loops.\n   Whenever an SMTP transaction is used to send a DSN,\
    \ the MAIL FROM\n   command MUST use a NULL return address, i.e. \"MAIL FROM:<>\"\
    .\n   A particular DSN describes the delivery status for exactly one\n   message.\
    \  However, an MTA MAY report on the delivery status for\n   several recipients\
    \ of the same message in a single DSN.  Due to the\n   nature of the mail transport\
    \ system (where responsibility for\n   delivery of a message to its recipients\
    \ may be split among several\n   MTAs, and delivery to any particular recipient\
    \ may be delayed),\n   multiple DSNs may be still be issued in response to a single\
    \ message\n   submission.\n"
- title: 2.1 The message/delivery-status content-type
  contents:
  - "2.1 The message/delivery-status content-type\n   The message/delivery-status\
    \ content-type is defined as follows:\n     MIME type name:                message\n\
    \     MIME subtype name:             delivery-status\n     Optional parameters:\
    \           none\n     Encoding considerations:       \"7bit\" encoding is sufficient\
    \ and\n                                    MUST be used to maintain readability\n\
    \                                    when viewed by non-MIME mail\n          \
    \                          readers.\n     Security considerations:       discussed\
    \ in section 4 of this memo.\n   The message/delivery-status report type for use\
    \ in the\n   multipart/report is \"delivery-status\".\n   The body of a message/delivery-status\
    \ consists of one or more\n   \"fields\" formatted according to the ABNF of RFC\
    \ 822 header \"fields\"\n   (see [6]).  The per-message fields appear first, followed\
    \ by a blank\n   line.  Following the per-message fields are one or more groups\
    \ of\n   per-recipient fields.  Each group of per-recipient fields is preceded\n\
    \   by a blank line.  Using the ABNF of RFC 822, the syntax of the\n   message/delivery-status\
    \ content is as follows:\n     delivery-status-content =\n          per-message-fields\
    \ 1*( CRLF per-recipient-fields )\n   The per-message fields are described in\
    \ section 2.2.  The per-\n   recipient fields are described in section 2.3.\n"
- title: 2.1.1 General conventions for DSN fields
  contents:
  - "2.1.1 General conventions for DSN fields\n   Since these fields are defined according\
    \ to the rules of RFC 822, the\n   same conventions for continuation lines and\
    \ comments apply.\n   Notification fields may be continued onto multiple lines\
    \ by beginning\n   each additional line with a SPACE or HTAB.  Text which appears\
    \ in\n   parentheses is considered a comment and not part of the contents of\n\
    \   that notification field.  Field names are case-insensitive, so the\n   names\
    \ of notification fields may be spelled in any combination of\n   upper and lower\
    \ case letters.  Comments in DSN fields may use the\n   \"encoded-word\" construct\
    \ defined in [7].\n   A number of DSN fields are defined to have a portion of\
    \ a field body\n   of \"xtext\".  \"xtext\" is used to allow encoding sequences\
    \ of octets\n   which contain values outside the range [1-127 decimal] of traditional\n\
    \   ASCII characters, and also to allow comments to be inserted in the\n   data.\
    \  Any octet may be encoded as \"+\" followed by two upper case\n   hexadecimal\
    \ digits.  (The \"+\" character MUST be encoded as \"+2B\".)\n   With certain\
    \ exceptions, octets that correspond to ASCII characters\n   may be represented\
    \ as themselves.  SPACE and HTAB characters are\n   ignored.  Comments may be\
    \ included by enclosing them in parenthesis.\n   Except within comments, encoded-words\
    \ such as defined in [7] may NOT\n   be used in xtext.\n   \"xtext\" is formally\
    \ defined as follows:\n     xtext = *( xchar / hexchar / linear-white-space /\
    \ comment )\n     xchar = any ASCII CHAR between \"!\" (33) and \"~\" (126) inclusive,\n\
    \          except for \"+\", \"\\\" and \"(\".\n   \"hexchar\"s are intended to\
    \ encode octets that cannot be represented\n   as plain text, either because they\
    \ are reserved, or because they are\n   non-printable.  However, any octet value\
    \ may be represented by a\n   \"hexchar\".\n     hexchar = ASCII \"+\" immediately\
    \ followed by two upper case\n          hexadecimal digits\n   When encoding an\
    \ octet sequence as xtext:\n   + Any ASCII CHAR between \"!\" and \"~\" inclusive,\
    \ except for \"+\", \"\\\",\n     and \"(\", MAY be encoded as itself.  (Some\
    \ CHARs in this range may\n     also be encoded as \"hexchar\"s, at the implementor's\
    \ discretion.)\n   + ASCII CHARs that fall outside the range above must be encoded\
    \ as\n     \"hexchar\".\n   + Line breaks (CR LF SPACE) MAY be inserted as necessary\
    \ to keep line\n     lengths from becoming excessive.\n   + Comments MAY be added\
    \ to clarify the meaning for human readers.\n"
- title: 2.1.2 "*-type" subfields
  contents:
  - "2.1.2 \"*-type\" subfields\n   Several DSN fields consist of a \"-type\" subfield,\
    \ followed by a\n   semicolon, followed by \"*text\".  For these fields, the keyword\
    \ used\n   in the address-type, diagnostic-type, or MTA-name-type subfield\n \
    \  indicates the expected format of the address, status-code, or MTA-\n   name\
    \ which follows.\n   The \"-type\" subfields are defined as follows:\n"
- title: (a) An "address-type" specifies the format of a mailbox address.  For
  contents:
  - "(a) An \"address-type\" specifies the format of a mailbox address.  For\n   \
    \ example, Internet mail addresses use the \"rfc822\" address-type.\n        \
    \ address-type = atom\n"
- title: (b) A "diagnostic-type" specifies the format of a status code.  For
  contents:
  - "(b) A \"diagnostic-type\" specifies the format of a status code.  For\n    example,\
    \ when a DSN field contains a reply code reported via the\n    Simple Mail Transfer\
    \ Protocol [3], the \"smtp\" diagnostic-type is\n    used.\n         diagnostic-type\
    \ = atom\n"
- title: (c) An "MTA-name-type" specifies the format of an MTA name.  For
  contents:
  - "(c) An \"MTA-name-type\" specifies the format of an MTA name.  For\n    example,\
    \ for an SMTP server on an Internet host, the MTA name is the\n    domain name\
    \ of that host, and the \"dns\" MTA-name-type is used.\n         mta-name-type\
    \ = atom\n   Values for address-type, diagnostic-type, and MTA-name-type are\n\
    \   case-insensitive.  Thus address-type values of \"RFC822\" and \"rfc822\"\n\
    \   are equivalent.\n   The Internet Assigned Numbers Authority (IANA) will maintain\
    \ a\n   registry of address-types, diagnostic-types, and MTA-name-types,\n   along\
    \ with descriptions of the meanings and acceptable values of\n   each, or a reference\
    \ to a one or more specifications that provide\n   such descriptions.  (The \"\
    rfc822\" address-type, \"smtp\" diagnostic-\n   type, and \"dns\" MTA-name-type\
    \ are defined in [4].)  Registration\n   forms for address-type, diagnostic-type,\
    \ and MTA-name-type appear in\n   section 8 of this document.\n   IANA will not\
    \ accept registrations for any address-type, diagnostic-\n   type, or MTA-name-type\
    \ name that begins with \"X-\".  These type names\n   are reserved for experimental\
    \ use.\n"
- title: 2.1.3 Lexical tokens imported from RFC 822
  contents:
  - "2.1.3 Lexical tokens imported from RFC 822\n   The following lexical tokens,\
    \ defined in [6], are used in the ABNF\n   grammar for DSNs: atom, CHAR, comment,\
    \ CR, CRLF, DIGIT, LF, linear-\n   white-space, SPACE, text.  The date-time lexical\
    \ token is defined in\n   [8].\n"
- title: 2.2 Per-Message DSN Fields
  contents:
  - "2.2 Per-Message DSN Fields\n   Some fields of a DSN apply to all of the delivery\
    \ attempts described\n   by that DSN.  These fields may appear at most once in\
    \ any DSN.  These\n   fields are used to correlate the DSN with the original message\n\
    \   transaction and to provide additional information which may be useful\n  \
    \ to gateways.\n     per-message-fields =\n          [ original-envelope-id-field\
    \ CRLF ]\n          reporting-mta-field CRLF\n          [ dsn-gateway-field CRLF\
    \ ]\n          [ received-from-mta-field CRLF ]\n          [ arrival-date-field\
    \ CRLF ]\n          *( extension-field CRLF )\n"
- title: 2.2.1 The Original-Envelope-Id field
  contents:
  - "2.2.1 The Original-Envelope-Id field\n   The optional Original-Envelope-Id field\
    \ contains an \"envelope\n   identifier\" which uniquely identifies the transaction\
    \ during which\n   the message was submitted, and was either (a) specified by\
    \ the sender\n   and supplied to the sender's MTA, or (b) generated by the sender's\n\
    \   MTA and made available to the sender when the message was submitted.\n   Its\
    \ purpose is to allow the sender (or her user agent) to associate\n   the returned\
    \ DSN with the specific transaction in which the message\n   was sent.\n   If\
    \ such an envelope identifier was present in the envelope which\n   accompanied\
    \ the message when it arrived at the Reporting MTA, it\n   SHOULD be supplied\
    \ in the Original-Envelope-Id field of any DSNs\n   issued as a result of an attempt\
    \ to deliver the message.  Except when\n   a DSN is issued by the sender's MTA,\
    \ an MTA MUST NOT supply this\n   field unless there is an envelope-identifier\
    \ field in the envelope\n   which accompanied this message on its arrival at the\
    \ Reporting MTA.\n   The Original-Envelope-Id field is defined as follows:\n \
    \    original-envelope-id-field =\n          \"Original-Envelope-Id\" \":\" envelope-id\n\
    \     envelope-id = *text\n   There may be at most one Original-Envelope-Id field\
    \ per DSN.\n   The envelope-id is CASE-SENSITIVE.  The DSN MUST preserve the\n\
    \   original case and spelling of the envelope-id.\n   NOTE: The Original-Envelope-Id\
    \ is NOT the same as the Message-Id from\n   the message header.  The Message-Id\
    \ identifies the content of the\n   message, while the Original-Envelope-Id identifies\
    \ the transaction in\n   which the message is sent.\n"
- title: 2.2.2 The Reporting-MTA DSN field
  contents:
  - "2.2.2 The Reporting-MTA DSN field\n     reporting-mta-field =\n          \"Reporting-MTA\"\
    \ \":\" mta-name-type \";\" mta-name\n     mta-name = *text\n   The Reporting-MTA\
    \ field is defined as follows:\n   A DSN describes the results of attempts to\
    \ deliver, relay, or gateway\n   a message to one or more recipients.  In all\
    \ cases, the Reporting-MTA\n   is the MTA which attempted to perform the delivery,\
    \ relay, or gateway\n   operation described in the DSN.  This field is required.\n\
    \   Note that if an SMTP client attempts to relay a message to an SMTP\n   server\
    \ and receives an error reply to a RCPT command, the client is\n   responsible\
    \ for generating the DSN, and the client's domain name will\n   appear in the\
    \ Reporting-MTA field.  (The server's domain name will\n   appear in the Remote-MTA\
    \ field.)\n   Note that the Reporting-MTA is not necessarily the MTA which actually\n\
    \   issued the DSN.  For example, if an attempt to deliver a message\n   outside\
    \ of the Internet resulted in a nondelivery notification which\n   was gatewayed\
    \ back into Internet mail, the Reporting-MTA field of the\n   resulting DSN would\
    \ be that of the MTA that originally reported the\n   delivery failure, not that\
    \ of the gateway which converted the foreign\n   notification into a DSN.  See\
    \ Figure 2.\n"
- title: sender's environment                            recipient's environment
  contents:
  - 'sender''s environment                            recipient''s environment

    '
- title: '............................ ..........................................'
  contents:
  - "............................ ..........................................\n   \
    \                        : :\n                       (1) : :                 \
    \            (2)\n  +-----+  +--------+  +--------+  +---------+  +---------+\
    \   +------+\n  |     |  |        |  |        |  |Received-|  |         |   |\
    \      |\n  |     |=>|Original|=>|        |->|  From   |->|Reporting|-->|Remote|\n\
    \  | user|  |   MTA  |  |        |  |   MTA   |  |   MTA   |<No|  MTA |\n  |agent|\
    \  +--------+  |Gateway |  +---------+  +----v----+   +------+\n  |     |    \
    \          |        |                    |\n  |     | <============|        |<-------------------+\n\
    \  +-----+              |        |(4)                (3)\n                   \
    \    +--------+\n                           : :\n"
- title: '...........................: :.........................................'
  contents:
  - "...........................: :.........................................\n   \
    \           Figure 2.  DSNs in the presence of gateways\n     (1) message is gatewayed\
    \ into recipient's environment\n     (2) attempt to relay message fails\n    \
    \ (3) reporting-mta (in recipient's environment) returns nondelivery\n       \
    \  notification\n     (4) gateway translates foreign notification into a DSN\n\
    \   The mta-name portion of the Reporting-MTA field is formatted\n   according\
    \ to the conventions indicated by the mta-name-type subfield.\n   If an MTA functions\
    \ as a gateway between dissimilar mail environments\n   and thus is known by multiple\
    \ names depending on the environment, the\n   mta-name subfield SHOULD contain\
    \ the name used by the environment\n   from which the message was accepted by\
    \ the Reporting-MTA.\n   Because the exact spelling of an MTA name may be significant\
    \ in a\n   particular environment, MTA names are CASE-SENSITIVE.\n"
- title: 2.2.3 The DSN-Gateway field
  contents:
  - "2.2.3 The DSN-Gateway field\n   The DSN-Gateway field indicates the name of the\
    \ gateway or MTA which\n   translated a foreign (non-Internet) delivery status\
    \ notification into\n   this DSN.  This field MUST appear in any DSN which was\
    \ translated by\n   a gateway from a foreign system into DSN format, and MUST\
    \ NOT appear\n   otherwise.\n   dsn-gateway-field = \"DSN-Gateway\" \":\" mta-name-type\
    \ \";\" mta-name\n   For gateways into Internet mail, the MTA-name-type will normally\
    \ be\n   \"smtp\", and the mta-name will be the Internet domain name of the\n\
    \   gateway.\n"
- title: 2.2.4 The Received-From-MTA DSN field
  contents:
  - "2.2.4 The Received-From-MTA DSN field\n   The optional Received-From-MTA field\
    \ indicates the name of the MTA\n   from which the message was received.\n   \
    \  received-from-mta-field =\n          \"Received-From-MTA\" \":\" mta-name-type\
    \ \";\" mta-name\n   If the message was received from an Internet host via SMTP,\
    \ the\n   contents of the mta-name subfield SHOULD be the Internet domain name\n\
    \   supplied in the HELO or EHLO command, and the network address used by\n  \
    \ the SMTP client SHOULD be included as a comment enclosed in\n   parentheses.\
    \  (In this case, the MTA-name-type will be \"smtp\".)\n   The mta-name portion\
    \ of the Received-From-MTA field is formatted\n   according to the conventions\
    \ indicated by the MTA-name-type subfield.\n   Since case is significant in some\
    \ mail systems, the exact spelling,\n   including case, of the MTA name SHOULD\
    \ be preserved.\n"
- title: 2.2.5 The Arrival-Date DSN field
  contents:
  - "2.2.5 The Arrival-Date DSN field\n   The optional Arrival-Date field indicates\
    \ the date and time at which\n   the message arrived at the Reporting MTA.  If\
    \ the Last-Attempt-Date\n   field is also provided in a per-recipient field, this\
    \ can be used to\n   determine the interval between when the message arrived at\
    \ the\n   Reporting MTA and when the report was issued for that recipient.\n \
    \    arrival-date-field = \"Arrival-Date\" \":\" date-time\n   The date and time\
    \ are expressed in RFC 822 'date-time' format, as\n   modified by [8].  Numeric\
    \ timezones ([+/-]HHMM format) MUST be used.\n"
- title: 2.3 Per-Recipient DSN fields
  contents:
  - "2.3 Per-Recipient DSN fields\n   A DSN contains information about attempts to\
    \ deliver a message to one\n   or more recipients.  The delivery information for\
    \ any particular\n   recipient is contained in a group of contiguous per-recipient\
    \ fields.\n   Each group of per-recipient fields is preceded by a blank line.\n\
    \   The syntax for the group of per-recipient fields is as follows:\n     per-recipient-fields\
    \ =\n          [ original-recipient-field CRLF ]\n          final-recipient-field\
    \ CRLF\n          action-field CRLF\n          status-field CRLF\n          [\
    \ remote-mta-field CRLF ]\n          [ diagnostic-code-field CRLF ]\n        \
    \  [ last-attempt-date-field CRLF ]\n          [ will-retry-until-field CRLF ]\n\
    \          *( extension-field CRLF )\n"
- title: 2.3.1 Original-Recipient field
  contents:
  - "2.3.1 Original-Recipient field\n   The Original-Recipient field indicates the\
    \ original recipient address\n   as specified by the sender of the message for\
    \ which the DSN is being\n   issued.\n     original-recipient-field =\n      \
    \    \"Original-Recipient\" \":\" address-type \";\" generic-address\n     generic-address\
    \ = *text\n   The address-type field indicates the type of the original recipient\n\
    \   address.  If the message originated within the Internet, the\n   address-type\
    \ field field will normally be \"rfc822\", and the address\n   will be according\
    \ to the syntax specified in [6].  The value\n   \"unknown\" should be used if\
    \ the Reporting MTA cannot determine the\n   type of the original recipient address\
    \ from the message envelope.\n   This field is optional.  It should be included\
    \ only if the sender-\n   specified recipient address was present in the message\
    \ envelope, such\n   as by the SMTP extensions defined in [4].  This address is\
    \ the same\n   as that provided by the sender and can be used to automatically\n\
    \   correlate DSN reports and message transactions.\n"
- title: 2.3.2 Final-Recipient field
  contents:
  - "2.3.2 Final-Recipient field\n   The Final-Recipient field indicates the recipient\
    \ for which this set\n   of per-recipient fields applies.  This field MUST be\
    \ present in each\n   set of per-recipient data.\n   The syntax of the field is\
    \ as follows:\n     final-recipient-field =\n          \"Final-Recipient\" \"\
    :\" address-type \";\" generic-address\n   The generic-address subfield of the\
    \ Final-Recipient field MUST\n   contain the mailbox address of the recipient\
    \ (from the transport\n   envelope) as it was when the message was accepted for\
    \ delivery by the\n   Reporting MTA.\n   The Final-Recipient address may differ\
    \ from the address originally\n   provided by the sender, because it may have\
    \ been transformed during\n   forwarding and gatewaying into an totally unrecognizable\
    \ mess.\n   However, in the absence of the optional Original-Recipient field,\
    \ the\n   Final-Recipient field and any returned content may be the only\n   information\
    \ available with which to correlate the DSN with a\n   particular message submission.\n\
    \   The address-type subfield indicates the type of address expected by\n   the\
    \ reporting MTA in that context.  Recipient addresses obtained via\n   SMTP will\
    \ normally be of address-type \"rfc822\".\n   NOTE: The Reporting MTA is not expected\
    \ to ensure that the address\n   actually conforms to the syntax conventions of\
    \ the address-type.\n   Instead, it MUST report exactly the address received in\
    \ the envelope,\n   unless that address contains characters such as CR or LF which\
    \ may\n   not appear in a DSN field.\n   Since mailbox addresses (including those\
    \ used in the Internet) may be\n   case sensitive, the case of alphabetic characters\
    \ in the address MUST\n   be preserved.\n"
- title: 2.3.3 Action field
  contents:
  - "2.3.3 Action field\n   The Action field indicates the action performed by the\
    \ Reporting-MTA\n   as a result of its attempt to deliver the message to this\
    \ recipient\n   address.  This field MUST be present for each recipient named\
    \ in the\n   DSN.\n   The syntax for the action-field is:\n     action-field =\
    \ \"Action\" \":\" action-value\n     action-value =\n          \"failed\" / \"\
    delayed\" / \"delivered\" / \"relayed\" / \"expanded\"\n   The action-value may\
    \ be spelled in any combination of upper and lower\n   case characters.\n"
- title: '"failed"     indicates that the message could not be delivered to the'
  contents:
  - "\"failed\"     indicates that the message could not be delivered to the\n   \
    \          recipient.  The Reporting MTA has abandoned any attempts to\n     \
    \        deliver the message to this recipient.  No further\n             notifications\
    \ should be expected.\n"
- title: '"delayed"    indicates that the Reporting MTA has so far been unable to'
  contents:
  - "\"delayed\"    indicates that the Reporting MTA has so far been unable to\n \
    \            deliver or relay the message, but it will continue to\n         \
    \    attempt to do so.  Additional notification messages may be\n            \
    \ issued as the message is further delayed or successfully\n             delivered,\
    \ or if delivery attempts are later abandoned.\n"
- title: '"delivered"  indicates that the message was successfully delivered to'
  contents:
  - "\"delivered\"  indicates that the message was successfully delivered to\n   \
    \          the recipient address specified by the sender, which\n            \
    \ includes \"delivery\" to a mailing list exploder.  It does\n             not\
    \ indicate that the message has been read.  This is a\n             terminal state\
    \ and no further DSN for this recipient should\n             be expected.\n"
- title: '"relayed"    indicates that the message has been relayed or gatewayed'
  contents:
  - "\"relayed\"    indicates that the message has been relayed or gatewayed\n   \
    \          into an environment that does not accept responsibility for\n     \
    \        generating DSNs upon successful delivery.  This action-\n           \
    \  value SHOULD NOT be used unless the sender has requested\n             notification\
    \ of successful delivery for this recipient.\n"
- title: '"expanded"   indicates that the message has been successfully delivered'
  contents:
  - "\"expanded\"   indicates that the message has been successfully delivered\n \
    \            to the recipient address as specified by the sender, and\n      \
    \       forwarded by the Reporting-MTA beyond that destination to\n          \
    \   multiple additional recipient addresses.  An action-value\n             of\
    \ \"expanded\" differs from \"delivered\" in that \"expanded\"\n             is\
    \ not a terminal state. Further \"failed\" and/or \"delayed\"\n             notifications\
    \ may be provided.\n             Using the terms \"mailing list\" and \"alias\"\
    \ as defined in\n             [4], section 7.2.7:  An action-value of \"expanded\"\
    \ is only\n             to be used when the message is delivered to a multiple-\n\
    \             recipient \"alias\".  An action-value of \"expanded\" SHOULD\n \
    \            NOT be used with a DSN issued on delivery of a message to a\n   \
    \          \"mailing list\".\n   NOTE ON ACTION VS. STATUS CODES:  Although the\
    \ 'action' field might\n   seem to be redundant with the 'status' field, this\
    \ is not the case.\n   In particular, a \"temporary failure\" (\"4\") status code\
    \ could be used\n   with an action-value of either \"delayed\" or \"failed\".\
    \  For example,\n   assume that an SMTP client repeatedly tries to relay a message\
    \ to the\n   mail exchanger for a recipient, but fails because a query to a domain\n\
    \   name server timed out.  After a few hours, it might issue a \"delayed\"\n\
    \   DSN to inform the sender that the message had not yet been delivered.\n  \
    \ After a few days, the MTA might abandon its attempt to deliver the\n   message\
    \ and return a \"failed\" DSN.  The status code (which would\n   begin with a\
    \ \"4\" to indicate \"temporary failure\") would be the same\n   for both DSNs.\n\
    \   Another example for which the action and status codes may appear\n   contradictory:\
    \  If an MTA or mail gateway cannot deliver a message\n   because doing so would\
    \ entail conversions resulting in an\n   unacceptable loss of information, it\
    \ would issue a DSN with the\n   'action' field of \"failure\" and a status code\
    \ of 'XXX'.  If the\n   message had instead been relayed, but with some loss of\
    \ information,\n   it might generate a DSN with the same XXX status-code, but\
    \ with an\n   action field of \"relayed\".\n"
- title: 2.3.4 Status field
  contents:
  - "2.3.4 Status field\n   The per-recipient Status field contains a transport-independent\n\
    \   status code which indicates the delivery status of the message to\n   that\
    \ recipient.  This field MUST be present for each delivery attempt\n   which is\
    \ described by a DSN.\n   The syntax of the status field is:\n     status-field\
    \ = \"Status\" \":\" status-code\n     status-code = DIGIT \".\" 1*3DIGIT \".\"\
    \ 1*3DIGIT\n          ; White-space characters and comments are NOT allowed within\
    \ a\n          ; status-code, though a comment enclosed in parentheses MAY follow\n\
    \          ; the last numeric subfield of the status-code.  Each numeric\n   \
    \       ; subfield within the status-code MUST be expressed without\n        \
    \  ; leading zero digits.\n   Status codes thus consist of three numerical fields\
    \ separated by \".\".\n   The first sub-field indicates whether the delivery attempt\
    \ was\n   successful (2 = success, 4 = persistent temporary failure, 5 =\n   permanent\
    \ failure).  The second sub-field indicates the probable\n   source of any delivery\
    \ anomalies, and the third sub-field denotes a\n   precise error condition, if\
    \ known.\n   The initial set of status-codes is defined in [5].\n"
- title: 2.3.5 Remote-MTA field
  contents:
  - "2.3.5 Remote-MTA field\n   The value associated with the Remote-MTA DSN field\
    \ is a printable\n   ASCII representation of the name of the \"remote\" MTA that\
    \ reported\n   delivery status to the \"reporting\" MTA.\n     remote-mta-field\
    \ = \"Remote-MTA\" \":\" mta-name-type \";\" mta-name\n   NOTE: The Remote-MTA\
    \ field preserves the \"while talking to\"\n   information that was provided in\
    \ some pre-existing nondelivery\n   reports.\n   This field is optional.  It MUST\
    \ NOT be included if no remote MTA was\n   involved in the attempted delivery\
    \ of the message to that recipient.\n"
- title: 2.3.6 Diagnostic-Code field
  contents:
  - "2.3.6 Diagnostic-Code field\n   For a \"failed\" or \"delayed\" recipient, the\
    \ Diagnostic-Code DSN field\n   contains the actual diagnostic code issued by\
    \ the mail transport.\n   Since such codes vary from one mail transport to another,\
    \ the\n   diagnostic-type subfield is needed to specify which type of\n   diagnostic\
    \ code is represented.\n     diagnostic-code-field =\n          \"Diagnostic-Code\"\
    \ \":\" diagnostic-type \";\" *text\n   NOTE:  The information in the Diagnostic-Code\
    \ field may be somewhat\n   redundant with that from the Status field.  The Status\
    \ field is\n   needed so that any DSN, regardless of origin, may be understood\
    \ by\n   any user agent or gateway that parses DSNs.  Since the Status code\n\
    \   will sometimes be less precise than the actual transport diagnostic\n   code,\
    \ the Diagnostic-Code field is provided to retain the latter\n   information.\
    \  Such information may be useful in a trouble ticket sent\n   to the administrator\
    \ of the Reporting MTA, or when tunneling foreign\n   nondelivery reports through\
    \ DSNs.\n   If the Diagnostic Code was obtained from a Remote MTA during an\n\
    \   attempt to relay the message to that MTA, the Remote-MTA field should\n  \
    \ be present.  When interpreting a DSN, the presence of a Remote-MTA\n   field\
    \ indicates that the Diagnostic Code was issued by the Remote\n   MTA.  The absence\
    \ of a Remote-MTA indicates that the Diagnostic Code\n   was issued by the Reporting\
    \ MTA.\n   In addition to the Diagnostic-Code itself, additional textual\n   description\
    \ of the diagnostic, MAY appear in a comment enclosed in\n   parentheses.\n  \
    \ This field is optional, because some mail systems supply no\n   additional information\
    \ beyond that which is returned in the 'action'\n   and 'status' fields.  However,\
    \ this field SHOULD be included if\n   transport-specific diagnostic information\
    \ is available.\n"
- title: 2.3.7 Last-Attempt-Date field
  contents:
  - "2.3.7 Last-Attempt-Date field\n   The Last-Attempt-Date field gives the date\
    \ and time of the last\n   attempt to relay, gateway, or deliver the message (whether\
    \ successful\n   or unsuccessful) by the Reporting MTA.  This is not necessarily\
    \ the\n   same as the value of the Date field from the header of the message\n\
    \   used to transmit this delivery status notification: In cases where\n   the\
    \ DSN was generated by a gateway, the Date field in the message\n   header contains\
    \ the time the DSN was sent by the gateway and the DSN\n   Last-Attempt-Date field\
    \ contains the time the last delivery attempt\n   occurred.\n     last-attempt-date-field\
    \ = \"Last-Attempt-Date\" \":\" date-time\n   This field is optional.  It MUST\
    \ NOT be included if the actual date\n   and time of the last delivery attempt\
    \ are not available (which might\n   be the case if the DSN were being issued\
    \ by a gateway).\n   The date and time are expressed in RFC 822 'date-time' format,\
    \ as\n   modified by [8].  Numeric timezones ([+/-]HHMM format) MUST be used.\n\
    \   3.2.1.5 final-log-id field\n   The \"final-log-id\" field gives the final-log-id\
    \ of the message that\n   was used by the final-mta.  This can be useful as an\
    \ index to the\n   final-mta's log entry for that delivery attempt.\n     final-log-id-field\
    \ = \"Final-Log-ID\" \":\" *text\n   This field is optional.\n"
- title: 2.3.8 Will-Retry-Until field
  contents:
  - "2.3.8 Will-Retry-Until field\n   For DSNs of type \"delayed\", the Will-Retry-Until\
    \ field gives the date\n   after which the Reporting MTA expects to abandon all\
    \ attempts to\n   deliver the message to that recipient.  The Will-Retry-Until\
    \ field is\n   optional for \"delay\" DSNs, and MUST NOT appear in other DSNs.\n\
    \     will-retry-until-field = \"Will-Retry-Until\" \":\" date-time\n   The date\
    \ and time are expressed in RFC 822 'date-time' format, as\n   modified by [8].\
    \  Numeric timezones ([+/-]HHMM format) MUST be used.\n"
- title: 2.4 Extension fields
  contents:
  - "2.4 Extension fields\n   Additional per-message or per-recipient DSN fields may\
    \ be defined in\n   the future by later revisions or extensions to this specification.\n\
    \   Extension-field names beginning with \"X-\" will never be defined as\n   standard\
    \ fields; such names are reserved for experimental use.  DSN\n   field names NOT\
    \ beginning with \"X-\" MUST be registered with the\n   Internet Assigned Numbers\
    \ Authority (IANA) and published in an RFC.\n   Extension DSN fields may be defined\
    \ for the following reasons:\n   (a) To allow additional information from foreign\
    \ delivery status\n       reports to be tunneled through Internet DSNs.  The names\
    \ of such\n       DSN fields should begin with an indication of the foreign\n\
    \       environment name (e.g.  X400-Physical-Forwarding-Address).\n   (b) To\
    \ allow the transmission of diagnostic information which is\n       specific to\
    \ a particular mail transport protocol.  The names of\n       such DSN fields\
    \ should begin with an indication of the mail\n       transport being used (e.g.\
    \ SMTP-Remote-Recipient-Address).  Such\n       fields should be used for diagnostic\
    \ purposes only and not by\n       user agents or mail gateways.\n   (c) To allow\
    \ transmission of diagnostic information which is specific\n       to a particular\
    \ message transfer agent (MTA).  The names of such\n       DSN fields should begin\
    \ with an indication of the MTA\n       implementation which produced the DSN.\
    \  (e.g. Foomail-Queue-ID).\n   MTA implementors are encouraged to provide adequate\
    \ information, via\n   extension fields if necessary, to allow an MTA maintainer\
    \ to\n   understand the nature of correctable delivery failures and how to fix\n\
    \   them.  For example, if message delivery attempts are logged, the DSN\n   might\
    \ include information which allows the MTA maintainer to easily\n   find the log\
    \ entry for a failed delivery attempt.\n   If an MTA developer does not wish to\
    \ register the meanings of such\n   extension fields, \"X-\" fields may be used\
    \ for this purpose.  To avoid\n   name collisions, the name of the MTA implementation\
    \ should follow the\n   \"X-\", (e.g.  \"X-Foomail-Log-ID\").\n"
- title: 3. Conformance and Usage Requirements
  contents:
  - "3. Conformance and Usage Requirements\n   An MTA or gateway conforms to this\
    \ specification if it generates DSNs\n   according to the protocol defined in\
    \ this memo.  For MTAs and\n   gateways that do not support requests for positive\
    \ delivery\n   notification (such as in [4]), it is sufficient that delivery failure\n\
    \   reports use this protocol.\n   A minimal implementation of this specification\
    \ need generate only the\n   Reporting-MTA per-message field, and the Final-Recipient,\
    \ Action, and\n   Status fields for each attempt to deliver a message to a recipient\n\
    \   described by the DSN.  Generation of the other fields, when\n   appropriate,\
    \ is strongly recommended.\n   MTAs and gateways MUST NOT generate the Original-Recipient\
    \ field of a\n   DSN unless the mail transfer protocol provides the address originally\n\
    \   specified by the sender at the time of submission. (Ordinary SMTP\n   does\
    \ not make that guarantee, but the SMTP extension defined in [4]\n   permits such\
    \ information to be carried in the envelope if it is\n   available.)\n   Each\
    \ sender-specified recipient address SHOULD result in at most one\n   \"delivered\"\
    \ or \"failed\" DSN for that recipient.  If a positive DSN is\n   requested (e.g.\
    \ one using NOTIFY=SUCCESS in SMTP) for a recipient\n   that is forwarded to multiple\
    \ recipients of an \"alias\" (as defined in\n   [4], section 7.2.7), the forwarding\
    \ MTA SHOULD normally issue a\n   \"expanded\" DSN for the originally-specified\
    \ recipient and not\n   propagate the request for a DSN to the forwarding addresses.\n\
    \   Alternatively, the forwarding MTA MAY relay the request for a DSN to\n   exactly\
    \ one of the forwarding addresses and not propagate the request\n   to the others.\n\
    \   By contrast, successful submission of a message to a mailing list\n   exploder\
    \ is considered final delivery of the message.  Upon delivery\n   of a message\
    \ to a recipient address corresponding to a mailing list\n   exploder, the Reporting\
    \ MTA SHOULD issue an appropriate DSN exactly\n   as if the recipient address\
    \ were that of an ordinary mailbox.\n   NOTE:  This is actually intended to make\
    \ DSNs usable by mailing lists\n   themselves.  Any message sent to a mailing\
    \ list subscriber should\n   have its envelope return address pointing to the\
    \ list maintainer [see\n   RFC 1123, section 5.3.7(E)].  Since DSNs are sent to\
    \ the envelope\n   return address, all DSNs resulting from delivery to the recipients\
    \ of\n   a mailing list will be sent to the list maintainer.  The list\n   maintainer\
    \ may elect to mechanically process DSNs upon receipt, and\n   thus automatically\
    \ delete invalid addresses from the list.  (See\n   section 7 of this memo.)\n\
    \   This specification places no restrictions on the processing of DSNs\n   received\
    \ by user agents or distribution lists.\n"
- title: 4. Security Considerations
  contents:
  - "4. Security Considerations\n   The following security considerations apply when\
    \ using DSNs:\n"
- title: 4.1 Forgery
  contents:
  - "4.1 Forgery\n   DSNs may be forged as easily as ordinary Internet electronic\
    \ mail.\n   User agents and automatic mail handling facilities (such as mail\n\
    \   distribution list exploders) that wish to make automatic use of DSNs\n   should\
    \ take appropriate precautions to minimize the potential damage\n   from denial-of-service\
    \ attacks.\n   Security threats related to forged DSNs include the sending of:\n"
- title: (a) A falsified delivery notification when the message is not delivered
  contents:
  - "(a) A falsified delivery notification when the message is not delivered\n   \
    \ to the indicated recipient,\n"
- title: (b) A falsified non-delivery notification when the message was in fact
  contents:
  - "(b) A falsified non-delivery notification when the message was in fact\n    delivered\
    \ to the indicated recipient,\n"
- title: (c) A falsified Final-Recipient address,
  contents:
  - '(c) A falsified Final-Recipient address,

    '
- title: (d) A falsified Remote-MTA identification,
  contents:
  - '(d) A falsified Remote-MTA identification,

    '
- title: (e) A falsified relay notification when the message is "dead ended".
  contents:
  - '(e) A falsified relay notification when the message is "dead ended".

    '
- title: (f) Unsolicited DSNs
  contents:
  - '(f) Unsolicited DSNs

    '
- title: 4.2 Confidentiality
  contents:
  - "4.2 Confidentiality\n   Another dimension of security is confidentiality.  There\
    \ may be cases\n   in which a message recipient is autoforwarding messages but\
    \ does not\n   wish to divulge the address to which the messages are autoforwarded.\n\
    \   The desire for such confidentiality will probably be heightened as\n   \"\
    wireless mailboxes\", such as pagers, become more widely used as\n   autoforward\
    \ addresses.\n   MTA authors are encouraged to provide a mechanism which enables\
    \ the\n   end user to preserve the confidentiality of a forwarding address.\n\
    \   Depending on the degree of confidentiality required, and the nature\n   of\
    \ the environment to which a message were being forwarded, this\n   might be accomplished\
    \ by one or more of:\n"
- title: (a) issuing a "relayed" DSN (if a positive DSN was requested) when a
  contents:
  - "(a) issuing a \"relayed\" DSN (if a positive DSN was requested) when a\n    message\
    \ is forwarded to a confidential forwarding address, and\n    disabling requests\
    \ for positive DSNs for the forwarded message,\n"
- title: (b) declaring the message to be delivered, issuing a "delivered" DSN,
  contents:
  - "(b) declaring the message to be delivered, issuing a \"delivered\" DSN,\n   \
    \ re-sending the message to the confidential forwarding address, and\n    arranging\
    \ for no DSNs to be issued for the re-sent message,\n"
- title: (c) omitting "Remote-*" or extension fields of a DSN whenever they would
  contents:
  - "(c) omitting \"Remote-*\" or extension fields of a DSN whenever they would\n\
    \    otherwise contain confidential information (such as a confidential\n    forwarding\
    \ address),\n"
- title: (d) for messages forwarded to a confidential address, setting the
  contents:
  - "(d) for messages forwarded to a confidential address, setting the\n    envelope\
    \ return address (e.g. SMTP MAIL FROM address) to the NULL\n    reverse-path (\"\
    <>\") (so that no DSNs would be sent from a downstream\n    MTA to the original\
    \ sender),\n"
- title: (e) for messages forwarded to a confidential address, disabling delivery
  contents:
  - "(e) for messages forwarded to a confidential address, disabling delivery\n  \
    \  notifications for the forwarded message (e.g. if the \"next-hop\" MTA\n   \
    \ uses ESMTP and supports the DSN extension, by using the NOTIFY=NEVER\n    parameter\
    \ to the RCPT command), or\n"
- title: (f) when forwarding mail to a confidential address, having the
  contents:
  - "(f) when forwarding mail to a confidential address, having the\n    forwarding\
    \ MTA rewrite the envelope return address for the forwarded\n    message and attempt\
    \ delivery of that message as if the forwarding\n    MTA were the originator.\
    \  On its receipt of final delivery status,\n    the forwarding MTA would issue\
    \ a DSN to the original sender.\n   In general, any optional DSN field may be\
    \ omitted if the Reporting\n   MTA site determines that inclusion of the field\
    \ would impose too\n   great a compromise of site confidentiality.  The need for\
    \ such\n   confidentiality must be balanced against the utility of the omitted\n\
    \   information in trouble reports and DSNs gatewayed to foreign\n   environments.\n\
    \   Implementors are cautioned that many existing MTAs will send\n   nondelivery\
    \ notifications to a return address in the message header\n   (rather than to\
    \ the one in the envelope), in violation of SMTP and\n   other protocols.  If\
    \ a message is forwarded through such an MTA, no\n   reasonable action on the\
    \ part of the forwarding MTA will prevent the\n   downstream MTA from compromising\
    \ the forwarding address.  Likewise,\n   if the recipient's MTA automatically\
    \ responds to messages based on a\n   request in the message header (such as the\
    \ nonstandard, but widely\n   used, Return-Receipt-To extension header), it will\
    \ also compromise\n   the forwarding address.\n"
- title: 4.3 Non-Repudiation
  contents:
  - "4.3 Non-Repudiation\n   Within the framework of today's internet mail, the DSNs\
    \ defined in\n   this memo provide valuable information to the mail user; however,\n\
    \   even a \"failed\" DSN can not be relied upon as a guarantee that a\n   message\
    \ was not received by the recipient.  Even if DSNs are not\n   actively forged,\
    \ conditions exist under which a message can be\n   delivered despite the fact\
    \ that a failure DSN was issued.\n   For example, a race condition in the SMTP\
    \ protocol allows for the\n   duplication of messages if the connection is dropped\
    \ following a\n   completed DATA command, but before a response is seen by the\
    \ SMTP\n   client.  This will cause the SMTP client to retransmit the message,\n\
    \   even though the SMTP server has already accepted it.[9] If one of\n   those\
    \ delivery attempts succeeds and the other one fails, a \"failed\"\n   DSN could\
    \ be issued even though the message actually reached the\n   recipient.\n"
- title: 5. Appendix - collected grammar
  contents:
  - "5. Appendix - collected grammar\n   NOTE:  The following lexical tokens are defined\
    \ in RFC 822:  atom,\n   CHAR, comment, CR, CRLF, DIGIT, LF, linear-white-space,\
    \ SPACE, text.\n   The date-time lexical token is defined in [8].\n"
- title: action-field = "Action" ":" action-value
  contents:
  - 'action-field = "Action" ":" action-value

    '
- title: action-value =
  contents:
  - "action-value =\n     \"failed\" / \"delayed\" / \"delivered\" / \"relayed\" /\
    \ \"expanded\"\n"
- title: address-type = atom
  contents:
  - 'address-type = atom

    '
- title: arrival-date-field = "Arrival-Date" ":" date-time
  contents:
  - 'arrival-date-field = "Arrival-Date" ":" date-time

    '
- title: delivery-status-content =
  contents:
  - "delivery-status-content =\n     per-message-fields 1*( CRLF per-recipient-fields\
    \ )\n"
- title: diagnostic-code-field =
  contents:
  - "diagnostic-code-field =\n     \"Diagnostic-Code\" \":\" diagnostic-type \";\"\
    \ *text\n"
- title: diagnostic-type = atom
  contents:
  - 'diagnostic-type = atom

    '
- title: dsn-gateway-field = "DSN-Gateway" ":" mta-name-type ";" mta-name
  contents:
  - 'dsn-gateway-field = "DSN-Gateway" ":" mta-name-type ";" mta-name

    '
- title: envelope-id = *text
  contents:
  - 'envelope-id = *text

    '
- title: extension-field = extension-field-name ":" *text
  contents:
  - 'extension-field = extension-field-name ":" *text

    '
- title: extension-field-name = atom
  contents:
  - 'extension-field-name = atom

    '
- title: final-recipient-field =
  contents:
  - "final-recipient-field =\n     \"Final-Recipient\" \":\" address-type \";\" generic-address\n"
- title: generic-address = *text
  contents:
  - 'generic-address = *text

    '
- title: last-attempt-date-field = "Last-Attempt-Date" ":" date-time
  contents:
  - 'last-attempt-date-field = "Last-Attempt-Date" ":" date-time

    '
- title: mta-name = *text
  contents:
  - 'mta-name = *text

    '
- title: mta-name-type = atom
  contents:
  - 'mta-name-type = atom

    '
- title: original-envelope-id-field =
  contents:
  - "original-envelope-id-field =\n     \"Original-Envelope-Id\" \":\" envelope-id\n"
- title: original-recipient-field =
  contents:
  - "original-recipient-field =\n     \"Original-Recipient\" \":\" address-type \"\
    ;\" generic-address\n"
- title: per-message-fields =
  contents:
  - "per-message-fields =\n     [ original-envelope-id-field CRLF ]\n     reporting-mta-field\
    \ CRLF\n     [ dsn-gateway-field CRLF ]\n     [ received-from-mta-field CRLF ]\n\
    \     [ arrival-date-field CRLF ]\n     *( extension-field CRLF )\n"
- title: per-recipient-fields =
  contents:
  - "per-recipient-fields =\n     [ original-recipient-field CRLF ]\n     final-recipient-field\
    \ CRLF\n     action-field CRLF\n     status-field CRLF\n     [ remote-mta-field\
    \ CRLF ]\n     [ diagnostic-code-field CRLF ]\n     [ last-attempt-date-field\
    \ CRLF ]\n     [ will-retry-until-field CRLF ]\n     *( extension-field CRLF )\n"
- title: received-from-mta-field =
  contents:
  - "received-from-mta-field =\n     \"Received-From-MTA\" \":\" mta-name-type \"\
    ;\" mta-name\n"
- title: remote-mta-field = "Remote-MTA" ":" mta-name-type ";" mta-name
  contents:
  - 'remote-mta-field = "Remote-MTA" ":" mta-name-type ";" mta-name

    '
- title: reporting-mta-field =
  contents:
  - "reporting-mta-field =\n     \"Reporting-MTA\" \":\" mta-name-type \";\" mta-name\n"
- title: status-code = DIGIT "." 1*3DIGIT "." 1*3DIGIT
  contents:
  - "status-code = DIGIT \".\" 1*3DIGIT \".\" 1*3DIGIT\n     ; White-space characters\
    \ and comments are NOT allowed within a\n     ; status-code, though a comment\
    \ enclosed in parentheses MAY follow\n     ; the last numeric subfield of the\
    \ status-code.  Each numeric\n     ; subfield within the status-code MUST be expressed\
    \ without\n     ; leading zero digits.\n"
- title: status-field = "Status" ":" status-code
  contents:
  - 'status-field = "Status" ":" status-code

    '
- title: will-retry-until-field = "Will-Retry-Until" ":" date-time
  contents:
  - 'will-retry-until-field = "Will-Retry-Until" ":" date-time

    '
- title: 6. Appendix - Guidelines for gatewaying DSNs
  contents:
  - "6. Appendix - Guidelines for gatewaying DSNs\n   NOTE:  This section provides\
    \ non-binding recommendations for the\n   construction of mail gateways that wish\
    \ to provide semi-transparent\n   delivery reports between the Internet and another\
    \ electronic mail\n   system.  Specific DSN gateway requirements for a particular\
    \ pair of\n   mail systems may be defined by other documents.\n"
- title: 6.1 Gatewaying from other mail systems to DSNs
  contents:
  - "6.1 Gatewaying from other mail systems to DSNs\n   A mail gateway may issue a\
    \ DSN to convey the contents of a \"foreign\"\n   delivery or non-delivery notification\
    \ over Internet mail.  When there\n   are appropriate mappings from the foreign\
    \ notification elements to\n   DSN fields, the information may be transmitted\
    \ in those DSN fields.\n   Additional information (such as might be useful in\
    \ a trouble ticket\n   or needed to tunnel the foreign notification through the\
    \ Internet)\n   may be defined in extension DSN fields.  (Such fields should be\
    \ given\n   names that identify the foreign mail protocol, e.g. X400-* for X.400\n\
    \   NDN or DN protocol elements)\n   The gateway must attempt to supply reasonable\
    \ values for the\n   Reporting-MTA, Final-Recipient, Action, and Status fields.\
    \  These\n   will normally be obtained by translating the values from the remote\n\
    \   delivery or non-delivery notification into their Internet-style\n   equivalents.\
    \  However, some loss of information is to be expected.\n   For example, the set\
    \ of status-codes defined for DSNs may not be\n   adequate to fully convey the\
    \ delivery diagnostic code from the\n   foreign system.  The gateway should assign\
    \ the most precise code\n   which describes the failure condition, falling back\
    \ on \"generic\"\n   codes such as 2.0.0 (success), 4.0.0 (temporary failure),\
    \ and 5.0.0\n   (permanent failure) when necessary.  The actual foreign diagnostic\n\
    \   code should be retained in the Diagnostic-Code field (with an\n   appropriate\
    \ diagnostic-type value) for use in trouble tickets or\n   tunneling.\n   The\
    \ sender-specified recipient address, and the original envelope-id,\n   if present\
    \ in the foreign transport envelope, should be preserved in\n   the Original-Recipient\
    \ and Original-Envelope-ID fields.\n   The gateway should also attempt to preserve\
    \ the \"final\" recipient\n   addresses and MTA names from the foreign system.\
    \  Whenever possible,\n   foreign protocol elements should be encoded as meaningful\
    \ printable\n   ASCII strings.\n   For DSNs produced from foreign delivery or\
    \ nondelivery notifications,\n   the name of the gateway MUST appear in the DSN-Gateway\
    \ field of the\n   DSN.\n"
- title: 6.2 Gatewaying from DSNs to other mail systems
  contents:
  - "6.2 Gatewaying from DSNs to other mail systems\n   It may be possible to gateway\
    \ DSNs from the Internet into a foreign\n   mail system.  The primary purpose\
    \ of such gatewaying is to convey\n   delivery status information in a form that\
    \ is usable by the\n   destination system.  A secondary purpose is to allow \"\
    tunneling\" of\n   DSNs through foreign mail systems, in case the DSN may be gatewayed\n\
    \   back into the Internet.\n   In general, the recipient of the DSN (i.e., the\
    \ sender of the\n   original message) will want to know, for each recipient: the\
    \ closest\n   available approximation to the original recipient address, the\n\
    \   delivery status (success, failure, or temporary failure), and for\n   failed\
    \ deliveries, a diagnostic code that describes the reason for\n   the failure.\n\
    \   If possible, the gateway should attempt to preserve the Original-\n   Recipient\
    \ address and Original-Envelope-ID (if present), in the\n   resulting foreign\
    \ delivery status report.\n   When reporting delivery failures, if the diagnostic-type\
    \ subfield of\n   the Diagnostic-Code field indicates that the original diagnostic\
    \ code\n   is understood by the destination environment, the information from\n\
    \   the Diagnostic-Code field should be used.  Failing that, the\n   information\
    \ in the Status field should be mapped into the closest\n   available diagnostic\
    \ code used in the destination environment.\n   If it is possible to tunnel a\
    \ DSN through the destination\n   environment, the gateway specification may define\
    \ a means of\n   preserving the DSN information in the delivery status reports\
    \ used by\n   that environment.\n"
- title: 7. Appendix - Guidelines for use of DSNs by mailing list exploders
  contents:
  - "7. Appendix - Guidelines for use of DSNs by mailing list exploders\n   NOTE:\
    \ This section pertains only to the use of DSNs by \"mailing\n   lists\" as defined\
    \ in [4], section 7.2.7.\n   DSNs are designed to be used by mailing list exploders\
    \ to allow them\n   to detect and automatically delete recipients for whom mail\
    \ delivery\n   fails repeatedly.\n   When forwarding a message to list subscribers,\
    \ the mailing list\n   exploder should always set the envelope return address\
    \ (e.g. SMTP\n   MAIL FROM address) to point to a special address which is set\
    \ up to\n   received nondelivery reports.  A \"smart\" mailing list exploder can\n\
    \   therefore intercept such nondelivery reports, and if they are in the\n   DSN\
    \ format, automatically examine them to determine for which\n   recipients a message\
    \ delivery failed or was delayed.\n   The Original-Recipient field should be used\
    \ if available, since it\n   should exactly match the subscriber address known\
    \ to the list.  If\n   the Original-Recipient field is not available, the recipient\
    \ field\n   may resemble the list subscriber address.  Often, however, the list\n\
    \   subscriber will have forwarded his mail to a different address, or\n   the\
    \ address may be subject to some re-writing, so heuristics may be\n   required\
    \ to successfully match an address from the recipient field.\n   Care is needed\
    \ in this case to minimize the possibility of false\n   matches.\n   The reason\
    \ for delivery failure can be obtained from the Status and\n   Action fields,\
    \ and from the Diagnostic-Code field (if the status-type\n   is recognized). \
    \ Reports for recipients with action values other than\n   \"failed\" can generally\
    \ be ignored; in particular, subscribers should\n   not be removed from a list\
    \ due to \"delayed\" reports.\n   In general, almost any failure status code (even\
    \ a \"permanent\" one)\n   can result from a temporary condition.  It is therefore\
    \ recommended\n   that a list exploder not delete a subscriber based on any single\n\
    \   failure DSN (regardless of the status code), but only on the\n   persistence\
    \ of delivery failure over a period of time.\n   However, some kinds of failures\
    \ are less likely than others to have\n   been caused by temporary conditions,\
    \ and some kinds of failures are\n   more likely to be noticed and corrected quickly\
    \ than others.  Once\n   more precise status codes are defined, it may be useful\
    \ to\n   differentiate between the status codes when deciding whether to\n   delete\
    \ a subscriber.  For example, on a list with a high message\n   volume, it might\
    \ be desirable to temporarily suspend delivery to a\n   recipient address which\
    \ causes repeated \"temporary\" failures, rather\n   than simply deleting the\
    \ recipient.  The duration of the suspension\n   might depend on the type of error.\
    \  On the other hand, a \"user\n   unknown\" error which persisted for several\
    \ days could be considered a\n   reliable indication that address were no longer\
    \ valid.\n"
- title: 8. Appendix - IANA registration forms for DSN types
  contents:
  - "8. Appendix - IANA registration forms for DSN types\n   The forms below are for\
    \ use when registering a new address-type,\n   diagnostic-type, or MTA-name-type\
    \ with the Internet Assigned Numbers\n   Authority (IANA).  Each piece of information\
    \ requested by a\n   registration form may be satisfied either by providing the\n\
    \   information on the form itself, or by including a reference to a\n   published,\
    \ publicly available specification which includes the\n   necessary information.\
    \  IANA MAY reject DSN type registrations\n   because of incomplete registration\
    \ forms, imprecise specifications,\n   or inappropriate type names.\n   To register\
    \ a DSN type, complete the applicable form below and send\n   it via Internet\
    \ electronic mail to <IANA@IANA.ORG>.\n"
- title: 8.1 IANA registration form for address-type
  contents:
  - "8.1 IANA registration form for address-type\n   A registration for a DSN address-type\
    \ MUST include the following\n   information:\n"
- title: (a) The proposed address-type name.
  contents:
  - '(a) The proposed address-type name.

    '
- title: (b) The syntax for mailbox addresses of this type, specified using BNF,
  contents:
  - "(b) The syntax for mailbox addresses of this type, specified using BNF,\n   \
    \ regular expressions, ASN.1, or other non-ambiguous language.\n"
- title: (c) If addresses of this type are not composed entirely of graphic
  contents:
  - "(c) If addresses of this type are not composed entirely of graphic\n    characters\
    \ from the US-ASCII repertoire, a specification for how\n    they are to be encoded\
    \ as graphic US-ASCII characters in a DSN\n    Original-Recipient or Final-Recipient\
    \ DSN field.\n"
- title: (d) [optional] A specification for how addresses of this type are to be
  contents:
  - "(d) [optional] A specification for how addresses of this type are to be\n   \
    \ translated to and from Internet electronic mail addresses.\n"
- title: 8.2 IANA registration form for diagnostic-type
  contents:
  - "8.2 IANA registration form for diagnostic-type\n   A registration for a DSN address-type\
    \ MUST include the following\n   information:\n"
- title: (a) The proposed diagnostic-type name.
  contents:
  - '(a) The proposed diagnostic-type name.

    '
- title: (b) A description of the syntax to be used for expressing diagnostic
  contents:
  - "(b) A description of the syntax to be used for expressing diagnostic\n    codes\
    \ of this type as graphic characters from the US-ASCII\n    repertoire.\n"
- title: (c) A list of valid diagnostic codes of this type and the meaning of
  contents:
  - "(c) A list of valid diagnostic codes of this type and the meaning of\n    each\
    \ code.\n"
- title: (d) [optional] A specification for mapping from diagnostic codes of this
  contents:
  - "(d) [optional] A specification for mapping from diagnostic codes of this\n  \
    \  type to DSN status codes (as defined in [5]).\n"
- title: 8.3 IANA registration form for MTA-name-type
  contents:
  - "8.3 IANA registration form for MTA-name-type\n   A registration for a DSN MTA-name-type\
    \ must include the following\n   information:\n"
- title: (a) The proposed MTA-name-type name.
  contents:
  - '(a) The proposed MTA-name-type name.

    '
- title: (b) A description of the syntax of MTA names of this type, using BNF,
  contents:
  - "(b) A description of the syntax of MTA names of this type, using BNF,\n    regular\
    \ expressions, ASN.1, or other non-ambiguous language.\n"
- title: (c) If MTA names of this type do not consist entirely of graphic
  contents:
  - "(c) If MTA names of this type do not consist entirely of graphic\n    characters\
    \ from the US-ASCII repertoire, a specification for how an\n    MTA name of this\
    \ type should be expressed as a sequence of graphic\n    US-ASCII characters.\n"
- title: 9. Appendix - Examples
  contents:
  - "9. Appendix - Examples\n   NOTE:  These examples are provided as illustration\
    \ only, and are not\n   considered part of the DSN protocol specification.  If\
    \ an example\n   conflicts with the protocol definition above, the example is\
    \ wrong.\n   Likewise, the use of *-type subfield names or extension fields in\n\
    \   these examples is not to be construed as a definition for those type\n   names\
    \ or extension fields.\n   These examples were manually translated from bounced\
    \ messages using\n   whatever information was available.\n"
- title: 9.1  This is a simple DSN issued after repeated attempts
  contents:
  - "9.1  This is a simple DSN issued after repeated attempts\n     to deliver a message\
    \ failed.  In this case, the DSN is\n     issued by the same MTA from which the\
    \ message was originated.\n   Date: Thu, 7 Jul 1994 17:16:05 -0400\n   From: Mail\
    \ Delivery Subsystem <MAILER-DAEMON@CS.UTK.EDU>\n   Message-Id: <199407072116.RAA14128@CS.UTK.EDU>\n\
    \   Subject: Returned mail: Cannot send message for 5 days\n   To: <owner-info-mime@cs.utk.edu>\n\
    \   MIME-Version: 1.0\n   Content-Type: multipart/report; report-type=delivery-status;\n\
    \         boundary=\"RAA14128.773615765/CS.UTK.EDU\"\n   --RAA14128.773615765/CS.UTK.EDU\n\
    \   The original message was received at Sat, 2 Jul 1994 17:10:28 -0400\n   from\
    \ root@localhost\n      ----- The following addresses had delivery problems -----\n\
    \   <louisl@larry.slip.umd.edu>  (unrecoverable error)\n      ----- Transcript\
    \ of session follows -----\n   <louisl@larry.slip.umd.edu>... Deferred: Connection\
    \ timed out\n         with larry.slip.umd.edu.\n   Message could not be delivered\
    \ for 5 days\n   Message will be deleted from queue\n   --RAA14128.773615765/CS.UTK.EDU\n\
    \   content-type: message/delivery-status\n   Reporting-MTA: dns; cs.utk.edu\n\
    \   Original-Recipient: rfc822;louisl@larry.slip.umd.edu\n   Final-Recipient:\
    \ rfc822;louisl@larry.slip.umd.edu\n   Action: failed\n   Status: 4.0.0\n   Diagnostic-Code:\
    \ smtp; 426 connection timed out\n   Last-Attempt-Date: Thu, 7 Jul 1994 17:15:49\
    \ -0400\n   --RAA14128.773615765/CS.UTK.EDU\n   content-type: message/rfc822\n\
    \   [original message goes here]\n   --RAA14128.773615765/CS.UTK.EDU--\n"
- title: 9.2  This is another DSN issued by the sender's MTA, which
  contents:
  - "9.2  This is another DSN issued by the sender's MTA, which\n     contains details\
    \ of multiple delivery attempts.  Some of\n     these were detected locally, and\
    \ others by a remote MTA.\n   Date: Fri, 8 Jul 1994 09:21:47 -0400\n   From: Mail\
    \ Delivery Subsystem <MAILER-DAEMON@CS.UTK.EDU>\n   Subject: Returned mail: User\
    \ unknown\n   To: <owner-ups-mib@CS.UTK.EDU>\n   MIME-Version: 1.0\n   Content-Type:\
    \ multipart/report; report-type=delivery-status;\n         boundary=\"JAA13167.773673707/CS.UTK.EDU\"\
    \n   --JAA13167.773673707/CS.UTK.EDU\n   content-type: text/plain; charset=us-ascii\n\
    \      ----- The following addresses had delivery problems -----\n   <arathib@vnet.ibm.com>\
    \  (unrecoverable error)\n   <wsnell@sdcc13.ucsd.edu>  (unrecoverable error)\n\
    \   --JAA13167.773673707/CS.UTK.EDU\n   content-type: message/delivery-status\n\
    \   Reporting-MTA: dns; cs.utk.edu\n   Original-Recipient: rfc822;arathib@vnet.ibm.com\n\
    \   Final-Recipient: rfc822;arathib@vnet.ibm.com\n   Action: failed\n   Status:\
    \ 5.0.0 (permanent failure)\n   Diagnostic-Code: smtp;\n    550 'arathib@vnet.IBM.COM'\
    \ is not a registered gateway user\n   Remote-MTA: dns; vnet.ibm.com\n   Original-Recipient:\
    \ rfc822;johnh@hpnjld.njd.hp.com\n   Final-Recipient: rfc822;johnh@hpnjld.njd.hp.com\n\
    \   Action: delayed\n   Status: 4.0.0 (hpnjld.njd.jp.com: host name lookup failure)\n\
    \   Original-Recipient: rfc822;wsnell@sdcc13.ucsd.edu\n   Final-Recipient: rfc822;wsnell@sdcc13.ucsd.edu\n\
    \   Action: failed\n   Status: 5.0.0\n   Diagnostic-Code: smtp; 550 user unknown\n\
    \   Remote-MTA: dns; sdcc13.ucsd.edu\n   --JAA13167.773673707/CS.UTK.EDU\n   content-type:\
    \ message/rfc822\n   [original message goes here]\n   --JAA13167.773673707/CS.UTK.EDU--\n"
- title: 9.3 A delivery report generated by Message Router (MAILBUS) and
  contents:
  - "9.3 A delivery report generated by Message Router (MAILBUS) and\n    gatewayed\
    \ by PMDF_MR to a DSN.  In this case the gateway did not\n    have sufficient\
    \ information to supply an original-recipient address.\n   Disclose-recipients:\
    \ prohibited\n   Date: Fri, 08 Jul 1994 09:21:25 -0400 (EDT)\n   From: Message\
    \ Router Submission Agent <AMMGR@corp.timeplex.com>\n   Subject: Status of : Re:\
    \ Battery current sense\n   To: owner-ups-mib@CS.UTK.EDU\n   Message-id: <01HEGJ0WNBY28Y95LN@mr.timeplex.com>\n\
    \   MIME-version: 1.0\n   content-type: multipart/report; report-type=delivery-status;\n\
    \         boundary=\"84229080704991.122306.SYS30\"\n   --84229080704991.122306.SYS30\n\
    \   content-type: text/plain\n   Invalid address - nair_s\n   %DIR-E-NODIRMTCH,\
    \ No matching Directory Entry found\n   --84229080704991.122306.SYS30\n   content-type:\
    \ message/delivery-status\n   Reporting-MTA: mailbus; SYS30\n   Final-Recipient:\
    \ unknown; nair_s\n   Status: 5.0.0 (unknown permanent failure)\n   Action: failed\n\
    \   --84229080704991.122306.SYS30--\n"
- title: 9.4 A delay report from a multiprotocol MTA.  Note that there is no
  contents:
  - "9.4 A delay report from a multiprotocol MTA.  Note that there is no\n    returned\
    \ content, so no third body part appears in the DSN.\n   From: <postmaster@nsfnet-relay.ac.uk>\n\
    \   Message-Id: <199407092338.TAA23293@CS.UTK.EDU>\n   Received: from nsfnet-relay.ac.uk\
    \ by sun2.nsfnet-relay.ac.uk\n             id <g.12954-0@sun2.nsfnet-relay.ac.uk>;\n\
    \   Sun, 10 Jul 1994 00:36:51 +0100\n   To: owner-info-mime@cs.utk.edu\n   Date:\
    \ Sun, 10 Jul 1994 00:36:51 +0100\n   Subject: WARNING: message delayed at \"\
    nsfnet-relay.ac.uk\"\n   content-type: multipart/report; report-type=delivery-status;\n\
    \         boundary=foobar\n   --foobar\n   content-type: text/plain\n   The following\
    \ message:\n   UA-ID:  Reliable PC (...\n   Q-ID:   sun2.nsf:77/msg.11820-0\n\
    \   has not been delivered to the intended recipient:\n   thomas@de-montfort.ac.uk\n\
    \   despite repeated delivery attempts over the past 24 hours.\n   The  usual\
    \ cause of this problem is that the remote system is\n   temporarily unavailable.\n\
    \   Delivery will continue to be attempted up to a total elapsed\n   time of \
    \ 168 hours, ie 7 days.\n   You  will  be  informed  if  delivery proves to be\
    \ impossible\n   within this time.\n   Please quote the Q-ID in any queries regarding\
    \ this mail.\n   --foobar\n   content-type: message/delivery-status\n   Reporting-MTA:\
    \ dns; sun2.nsfnet-relay.ac.uk\n   Final-Recipient: rfc822;thomas@de-montfort.ac.uk\n\
    \   Status: 4.0.0 (unknown temporary failure)\n   Action: delayed\n   --foobar--\n"
- title: 10. Acknowledgments
  contents:
  - "10. Acknowledgments\n   The authors wish to thank the following people for their\
    \ reviews of\n   earlier drafts of this document and their suggestions for\n \
    \  improvement:  Eric Allman, Harald Alvestrand, Allan Cargille, Jim\n   Conklin,\
    \ Peter Cowen, Dave Crocker, Roger Fajman, Ned Freed, Marko\n   Kaittola, Steve\
    \ Kille, John Klensin, John Gardiner Myers, Mark\n   Nahabedian, Julian Onions,\
    \ Jacob Palme, Jean Charles Roy, and Gregory\n   Sheehan.\n"
- title: 11. References
  contents:
  - '11. References

    '
- title: '[1] Borenstein, N., Freed, N. "Multipurpose Internet Mail Extensions",'
  contents:
  - "[1] Borenstein, N., Freed, N. \"Multipurpose Internet Mail Extensions\",\n  \
    \  RFC 1521, Bellcore, Innosoft, September 1993.\n"
- title: '[2] Vaudreuil, G., "The Multipart/Report Content Type for the Reporting'
  contents:
  - "[2] Vaudreuil, G., \"The Multipart/Report Content Type for the Reporting\n  \
    \  of Mail System Administrative Messages\", RFC 1892, Octal Network\n    Services,\
    \ January 1996.\n"
- title: '[3] Postel, J., "Simple Mail Transfer Protocol", STD 10, RFC 821,'
  contents:
  - "[3] Postel, J., \"Simple Mail Transfer Protocol\", STD 10, RFC 821,\n    USC/Information\
    \ Sciences Institute, August 1982.\n"
- title: '[4] Moore, K., "SMTP Service Extension for Delivery Status'
  contents:
  - "[4] Moore, K., \"SMTP Service Extension for Delivery Status\n    Notifications\"\
    , RFC 1891, University of Tennessee, January 1996.\n"
- title: '[5] Vaudreuil, G., "Enhanced Mail System Status Codes", RFC 1893, Octal'
  contents:
  - "[5] Vaudreuil, G., \"Enhanced Mail System Status Codes\", RFC 1893, Octal\n \
    \   Network Services, January 1996.\n"
- title: '[6] Crocker, D., "Standard for the Format of ARPA Internet Text'
  contents:
  - "[6] Crocker, D., \"Standard for the Format of ARPA Internet Text\n    Messages\"\
    , STD 11, RFC 822, UDEL, August 1982.\n"
- title: '[7] Moore, K. "MIME (Multipurpose Internet Mail Extensions) Part Two:'
  contents:
  - "[7] Moore, K. \"MIME (Multipurpose Internet Mail Extensions) Part Two:\n    Message\
    \ Header Extensions for Non-Ascii Text\", RFC 1522, University\n    of Tennessee,\
    \ September 1993.\n"
- title: '[8] Braden, R. (ed.)  "Requirements for Internet Hosts - Application and'
  contents:
  - "[8] Braden, R. (ed.)  \"Requirements for Internet Hosts - Application and\n \
    \   Support\", STD 3, RFC 1123, USC/Information Sciences Institute,\n    October\
    \ 1989.\n"
- title: '[9] Partridge, C., "Duplicate Messages and SMTP", RFC 1047, BBN,'
  contents:
  - "[9] Partridge, C., \"Duplicate Messages and SMTP\", RFC 1047, BBN,\n    February\
    \ 1988.\n"
- title: 11. Authors' Addresses
  contents:
  - "11. Authors' Addresses\n   Keith Moore\n   University of Tennessee\n   107 Ayres\
    \ Hall\n   Knoxville, TN 37996-1301\n   USA\n   EMail: moore@cs.utk.edu\n   Phone:\
    \ +1 615 974 3126\n   Fax: +1 615 974 8296\n   Gregory M. Vaudreuil\n   Octel\
    \ Network Services\n   17080 Dallas Parkway\n   Dallas, TX 75248-1905\n   USA\n\
    \   EMail: Greg.Vaudreuil@Octel.Com\n"
