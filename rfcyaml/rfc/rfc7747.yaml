- title: __initial_text__
  contents:
  - "             Basic BGP Convergence Benchmarking Methodology\n               \
    \        for Data-Plane Convergence\n"
- title: Abstract
  contents:
  - "Abstract\n   BGP is widely deployed and used by several service providers as\
    \ the\n   default inter-AS (Autonomous System) routing protocol.  It is of\n \
    \  utmost importance to ensure that when a BGP peer or a downstream link\n   of\
    \ a BGP peer fails, the alternate paths are rapidly used and routes\n   via these\
    \ alternate paths are installed.  This document provides the\n   basic BGP benchmarking\
    \ methodology using existing BGP convergence\n   terminology as defined in RFC\
    \ 4098.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc7747.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2016 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n   This document\
    \ may contain material from IETF Documents or IETF\n   Contributions published\
    \ or made publicly available before November\n   10, 2008.  The person(s) controlling\
    \ the copyright in some of this\n   material may not have granted the IETF Trust\
    \ the right to allow\n   modifications of such material outside the IETF Standards\
    \ Process.\n   Without obtaining an adequate license from the person(s) controlling\n\
    \   the copyright in such materials, this document may not be modified\n   outside\
    \ the IETF Standards Process, and derivative works of it may\n   not be created\
    \ outside the IETF Standards Process, except to format\n   it for publication\
    \ as an RFC or to translate it into languages other\n   than English.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .\
    \ . . . . .   4\n     1.1.  Benchmarking Definitions  . . . . . . . . . . . .\
    \ . . . .   4\n     1.2.  Purpose of BGP FIB (Data-Plane) Convergence . . . .\
    \ . . .   4\n     1.3.  Control-Plane Convergence . . . . . . . . . . . . . .\
    \ . .   5\n     1.4.  Benchmarking Testing  . . . . . . . . . . . . . . . . .\
    \ .   5\n   2.  Existing Definitions and Requirements . . . . . . . . . . . .\
    \   5\n   3.  Test Topologies . . . . . . . . . . . . . . . . . . . . . . .  \
    \ 6\n     3.1.  General Reference Topologies  . . . . . . . . . . . . . .   7\n\
    \   4.  Test Considerations . . . . . . . . . . . . . . . . . . . . .   8\n  \
    \   4.1.  Number of Peers . . . . . . . . . . . . . . . . . . . . .   9\n    \
    \ 4.2.  Number of Routes per Peer . . . . . . . . . . . . . . . .   9\n     4.3.\
    \  Policy Processing/Reconfiguration . . . . . . . . . . . .   9\n     4.4.  Configured\
    \ Parameters (Timers, etc.)  . . . . . . . . . .   9\n     4.5.  Interface Types\
    \ . . . . . . . . . . . . . . . . . . . . .  11\n     4.6.  Measurement Accuracy\
    \  . . . . . . . . . . . . . . . . . .  11\n     4.7.  Measurement Statistics\
    \  . . . . . . . . . . . . . . . . .  11\n     4.8.  Authentication  . . . . .\
    \ . . . . . . . . . . . . . . . .  11\n     4.9.  Convergence Events  . . . .\
    \ . . . . . . . . . . . . . . .  12\n     4.10. High Availability . . . . . .\
    \ . . . . . . . . . . . . . .  12\n   5.  Test Cases  . . . . . . . . . . . .\
    \ . . . . . . . . . . . . .  12\n     5.1.  Basic Convergence Tests . . . . .\
    \ . . . . . . . . . . . .  13\n       5.1.1.  RIB-IN Convergence  . . . . . .\
    \ . . . . . . . . . . .  13\n       5.1.2.  RIB-OUT Convergence . . . . . . .\
    \ . . . . . . . . . .  15\n       5.1.3.  eBGP Convergence  . . . . . . . . .\
    \ . . . . . . . . .  16\n       5.1.4.  iBGP Convergence  . . . . . . . . . .\
    \ . . . . . . . .  16\n       5.1.5.  eBGP Multihop Convergence . . . . . . .\
    \ . . . . . . .  17\n     5.2.  BGP Failure/Convergence Events  . . . . . . .\
    \ . . . . . .  18\n       5.2.1.  Physical Link Failure on DUT End  . . . . .\
    \ . . . . .  18\n       5.2.2.  Physical Link Failure on Remote/Emulator End \
    \ . . . .  19\n       5.2.3.  ECMP Link Failure on DUT End  . . . . . . . . .\
    \ . . .  20\n     5.3.  BGP Adjacency Failure (Non-Physical Link Failure) on\n\
    \           Emulator  . . . . . . . . . . . . . . . . . . . . . . . .  20\n  \
    \   5.4.  BGP Hard Reset Test Cases . . . . . . . . . . . . . . . .  21\n    \
    \   5.4.1.  BGP Non-Recovering Hard Reset Event on DUT  . . . . .  21\n     5.5.\
    \  BGP Soft Reset  . . . . . . . . . . . . . . . . . . . . .  22\n     5.6.  BGP\
    \ Route Withdrawal Convergence Time . . . . . . . . . .  24\n     5.7.  BGP Path\
    \ Attribute Change Convergence Time  . . . . . . .  26\n     5.8.  BGP Graceful\
    \ Restart Convergence Time . . . . . . . . . .  27\n   6.  Reporting Format  .\
    \ . . . . . . . . . . . . . . . . . . . . .  29\n   7.  Security Considerations\
    \ . . . . . . . . . . . . . . . . . . .  32\n   8.  References  . . . . . . .\
    \ . . . . . . . . . . . . . . . . . .  32\n     8.1.  Normative References  .\
    \ . . . . . . . . . . . . . . . . .  32\n     8.2.  Informative References  .\
    \ . . . . . . . . . . . . . . . .  33\n   Acknowledgements  . . . . . . . . .\
    \ . . . . . . . . . . . . . . .  34\n   Authors' Addresses  . . . . . . . . .\
    \ . . . . . . . . . . . . . .  35\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This document defines the methodology for benchmarking data-plane\n\
    \   Forwarding Information Base (FIB) convergence performance of BGP in\n   routers\
    \ and switches using topologies of three or four nodes.  The\n   methodology proposed\
    \ in this document applies to both IPv4 and IPv6,\n   and if a particular test\
    \ is unique to one version, it is marked\n   accordingly.  For IPv6 benchmarking,\
    \ the Device Under Test (DUT) will\n   require the support of Multiprotocol BGP\
    \ (MP-BGP) [RFC4760]\n   [RFC2545].  Similarly, both Internal BGP (iBGP) and External\
    \ BGP\n   (eBGP) are covered in the tests as applicable.\n   The scope of this\
    \ document is to provide methodology for BGP FIB\n   convergence measurements\
    \ with BGP functionality limited to IPv4 and\n   IPv6 as defined in [RFC4271]\
    \ and MP-BGP [RFC4760] [RFC2545].  Other\n   BGP extensions to support Layer 2\
    \ and Layer 3 Virtual Private\n   Networks (VPNs) are outside the scope of this\
    \ document.  Interaction\n   with IGPs (IGP interworking) is outside the scope\
    \ of this document.\n"
- title: 1.1.  Benchmarking Definitions
  contents:
  - "1.1.  Benchmarking Definitions\n   The terminology used in this document is defined\
    \ in [RFC4098].  One\n   additional term is defined in this document as follows.\n\
    \   FIB (data-plane) convergence is defined as the completion of all FIB\n   changes\
    \ so that all forwarded traffic then takes the newly proposed\n   route.  RFC\
    \ 4098 defines the terms 'BGP device', 'FIB', and\n   'forwarded traffic'.  Data-plane\
    \ convergence is different than\n   control-plane convergence within a node.\n\
    \   This document defines methodology to test\n   o  data-plane convergence on\
    \ a single BGP device that supports the\n      BGP functionality with a scope\
    \ as outlined above; and\n   o  using test topology of three or four nodes that\
    \ are sufficient to\n      recreate the convergence events used in the various\
    \ tests of this\n      document.\n"
- title: 1.2.  Purpose of BGP FIB (Data-Plane) Convergence
  contents:
  - "1.2.  Purpose of BGP FIB (Data-Plane) Convergence\n   In the current Internet\
    \ architecture, the inter-AS transit is\n   primarily available through BGP. \
    \ To maintain reliable connectivity\n   within intra-domains or across inter-domains,\
    \ fast recovery from\n   failures remains most critical.  To ensure minimal traffic\
    \ losses,\n   many service providers are requiring BGP implementations to converge\n\
    \   the entire Internet routing table within sub-seconds at FIB level.\n   Furthermore,\
    \ to compare these numbers amongst various devices,\n   service providers are\
    \ also looking at ways to standardize the\n   convergence measurement methods.\
    \  This document offers test methods\n   for simple topologies.  These simple\
    \ tests will provide a quick high-\n   level check of BGP data-plane convergence\
    \ across multiple\n   implementations from different vendors.\n"
- title: 1.3.  Control-Plane Convergence
  contents:
  - "1.3.  Control-Plane Convergence\n   The convergence of BGP occurs at two levels:\
    \ Routing Information Base\n   (RIB) and FIB convergence.  RFC 4098 defines terms\
    \ for BGP control-\n   plane convergence.  Methodologies that test control-plane\
    \ convergence\n   are out of scope for this document.\n"
- title: 1.4.  Benchmarking Testing
  contents:
  - "1.4.  Benchmarking Testing\n   In order to ensure that the results obtained in\
    \ tests are repeatable,\n   careful setup of initial conditions and exact steps\
    \ are required.\n   This document proposes these initial conditions, test steps,\
    \ and\n   result checking.  To ensure uniformity of the results, all optional\n\
    \   parameters SHOULD be disabled and all settings SHOULD be changed to\n   default;\
    \ these may include BGP timers as well.\n"
- title: 2.  Existing Definitions and Requirements
  contents:
  - "2.  Existing Definitions and Requirements\n   \"Benchmarking Terminology for\
    \ Network Interconnect Devices\" [RFC1242]\n   and \"Benchmarking Terminology\
    \ for LAN Switching Devices\" [RFC2285]\n   SHOULD be reviewed in conjunction\
    \ with this document.  WLAN-specific\n   terms and definitions are also provided\
    \ in Clauses 3 and 4 of the\n   IEEE 802.11 standard [IEEE.802.11].  Commonly\
    \ used terms may also be\n   found in RFC 1983 [RFC1983].\n   For the sake of\
    \ clarity and continuity, this document adopts the\n   general template for benchmarking\
    \ terminology set out in Section 2 of\n   [RFC1242].  Definitions are organized\
    \ in alphabetical order and\n   grouped into sections for ease of reference. \
    \ The following terms are\n   assumed to be taken as defined in RFC 1242 [RFC1242]:\
    \ Throughput,\n   Latency, Constant Load, Frame Loss Rate, and Overhead Behavior.\
    \  In\n   addition, the following terms are taken as defined in [RFC2285]:\n \
    \  Forwarding Rates, Maximum Forwarding Rate, Loads, Device Under Test\n   (DUT),\
    \ and System Under Test (SUT).\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\"\
    , \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"\
    MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in RFC 2119 [RFC2119].\n"
- title: 3.  Test Topologies
  contents:
  - "3.  Test Topologies\n   This section describes the test setups for use in BGP\
    \ benchmarking\n   tests measuring convergence of the FIB (data-plane) after BGP\
    \ updates\n   have been received.\n   These test setups have three or four nodes\
    \ with the following\n   configuration:\n   1.  Basic test setup\n   2.  Three-node\
    \ setup for iBGP or eBGP convergence\n   3.  Setup for eBGP multihop test Scenario\n\
    \   4.  Four-node setup for iBGP or eBGP convergence\n   Individual tests refer\
    \ to these topologies.\n   Figures 1 through 4 use the following conventions:\n\
    \   o  AS-X: Autonomous System X\n   o  Loopback Int: Loopback interface on a\
    \ BGP-enabled device\n   o  HLP, HLP1, HLP2: Helper routers running the same version\
    \ of BGP as\n      the DUT\n   o  All devices MUST be synchronized using NTP or\
    \ some other clock\n      synchronization mechanism\n"
- title: 3.1.  General Reference Topologies
  contents:
  - "3.1.  General Reference Topologies\n   Emulator acts as one or more BGP peers\
    \ for different test cases.\n           +----------+                         \
    \    +------------+\n           |          |   Traffic Interfaces        |   \
    \         |\n           |          |-----------------------1---- | tx        \
    \ |\n           |          |-----------------------2---- | tr1        |\n    \
    \       |          |-----------------------3-----| tr2        |\n           |\
    \    DUT   |                             | Emulator   |\n           |        \
    \  |    Routing Interfaces       |            |\n           |      Dp1 |---------------------------\
    \  |Emp1        |\n           |          |      BGP Peering            |     \
    \       |\n           |      Dp2 |---------------------------- |Emp2        |\n\
    \           |          |      BGP Peering            |            |\n        \
    \   +----------+                             +------------+\n                \
    \        Figure 1: Basic Test Setup\n         +------------+        +-----------+\
    \           +-----------+\n         |            |        |           |      \
    \     |           |\n         |            |        |           |           |\
    \           |\n         |   HLP      |        |  DUT      |           | Emulator\
    \  |\n         |  (AS-X)    |--------| (AS-Y)    |-----------|  (AS-Z)   |\n \
    \        |            |        |           |           |           |\n       \
    \  |            |        |           |           |           |\n         |   \
    \         |        |           |           |           |\n         +------------+\
    \        +-----------+           +-----------+\n                 |           \
    \                                 |\n                 |                      \
    \                      |\n                 +--------------------------------------------+\n\
    \         Figure 2: Three-Node Setup for eBGP and iBGP Convergence\n         \
    \     +----------------------------------------------+\n              |      \
    \                                        |\n              |                  \
    \                            |\n         +------------+        +-----------+ \
    \          +-----------+\n         |            |        |           |       \
    \    |           |\n         |            |        |           |           | \
    \          |\n         |   HLP      |        |  DUT      |           | Emulator\
    \  |\n         |  (AS-X)    |--------| (AS-Y)    |-----------|  (AS-Z)   |\n \
    \        |            |        |           |           |           |\n       \
    \  |            |        |           |           |           |\n         |   \
    \         |        |           |           |           |\n         +------------+\
    \        +-----------+           +-----------+\n              |Loopback-Int  \
    \       |Loopback-Int\n              |                     |\n              +\
    \                     +\n           Figure 3: BGP Convergence for eBGP Multihop\
    \ Scenario\n          +---------+     +--------+     +--------+     +---------+\n\
    \          |         |     |        |     |        |     |         |\n       \
    \   |         |     |        |     |        |     |         |\n          |  HLP1\
    \   |     |  DUT   |     |  HLP2  |     |Emulator |\n          | (AS-X)  |-----|\
    \ (AS-X) |-----| (AS-Y) |-----| (AS-Z)  |\n          |         |     |       \
    \ |     |        |     |         |\n          |         |     |        |     |\
    \        |     |         |\n          |         |     |        |     |       \
    \ |     |         |\n          +---------+     +--------+     +--------+     +---------+\n\
    \               |                                             |\n            \
    \   |                                             |\n               +---------------------------------------------+\n\
    \          Figure 4: Four-Node Setup for eBGP and iBGP Convergence\n"
- title: 4.  Test Considerations
  contents:
  - "4.  Test Considerations\n   The test cases for measuring convergence for iBGP\
    \ and eBGP are\n   different.  Both iBGP and eBGP use different mechanisms to\
    \ advertise,\n   install, and learn the routes.  Typically, an iBGP route on the\
    \ DUT\n   is installed and exported when the next hop is valid.  For eBGP, the\n\
    \   route is installed on the DUT with the remote interface address as\n   the\
    \ next hop, with the exception of the multihop test case (as\n   specified in\
    \ the test).\n"
- title: 4.1.  Number of Peers
  contents:
  - "4.1.  Number of Peers\n   \"Number of Peers\" is defined as the number of BGP\
    \ neighbors or\n   sessions the DUT has at the beginning of the test.  The peers\
    \ are\n   established before the tests begin.  The relationship could be either\n\
    \   iBGP or eBGP peering depending upon the test case requirement.\n   The DUT\
    \ establishes one or more BGP peer sessions with one or more\n   emulated routers\
    \ or Helper Nodes.  Additional peers can be added\n   based on the testing requirements.\
    \  The number of peers enabled\n   during the testing should be well documented\
    \ in the report matrix.\n"
- title: 4.2.  Number of Routes per Peer
  contents:
  - "4.2.  Number of Routes per Peer\n   \"Number of Routes per Peer\" is defined\
    \ as the number of routes\n   advertised or learned by the DUT per session or\
    \ through a neighbor\n   relationship with an emulator or Helper Node.  The Tester,\
    \ emulating\n   as a BGP neighbor, MUST advertise at least one route per BGP peer.\n\
    \   Each test run must identify the route stream in terms of route\n   packing,\
    \ route mixture, and number of routes.  This route stream must\n   be well documented\
    \ in the reporting stream.  RFC 4098 defines these\n   terms.\n   It is RECOMMENDED\
    \ that the user consider advertising the entire\n   current Internet routing table\
    \ per peering session using an Internet\n   route mixture with unique or non-unique\
    \ routes.  If multiple peers\n   are used, it is important to precisely document\
    \ the timing sequence\n   between the peer sending routes (as defined in RFC 4098).\n"
- title: 4.3.  Policy Processing/Reconfiguration
  contents:
  - "4.3.  Policy Processing/Reconfiguration\n   The DUT MUST run one baseline test\
    \ where policy is the Minimal policy\n   as defined in RFC 4098.  Additional runs\
    \ may be done with the policy\n   that was set up before the tests began.  Exact\
    \ policy settings MUST\n   be documented as part of the test.\n"
- title: 4.4.  Configured Parameters (Timers, etc.)
  contents:
  - "4.4.  Configured Parameters (Timers, etc.)\n   There are configured parameters\
    \ and timers that may impact the\n   measured BGP convergence times.\n   The benchmark\
    \ metrics MAY be measured at any fixed values for these\n   configured parameters.\n\
    \   It is RECOMMENDED these configure parameters have the following\n   settings:\
    \ a) default values specified by the respective RFC, b)\n   platform-specific\
    \ default parameters, and c) values as expected in\n   the operational network.\
    \  All optional BGP settings MUST be kept\n   consistent across iterations of\
    \ any specific tests\n   Examples of the configured parameters that may impact\
    \ measured BGP\n   convergence time include, but are not limited to:\n      1.\
    \  Interface failure detection timer\n      2.  BGP keepalive timer\n      3.\
    \  BGP holdtime\n      4.  BGP update delay timer\n      5.  ConnectRetry timer\n\
    \      6.  TCP segment size\n      7.  Minimum Route Advertisement Interval (MRAI)\n\
    \      8.  MinASOriginationInterval (MAOI)\n      9.  Route flap damping parameters\n\
    \      10.  TCP Authentication Option (TCP AO or TCP MD5)\n      11.  Maximum\
    \ TCP window size\n      12.  MTU\n   The basic-test settings for the parameters\
    \ should be:\n      1.  Interface failure detection timer (0 ms)\n      2.  BGP\
    \ keepalive timer (1 min)\n      3.  BGP holdtime (3 min)\n      4.  BGP update\
    \ delay timer (0 s)\n      5.  ConnectRetry timer (1 s)\n      6.  TCP segment\
    \ size (4096 bytes)\n      7.  Minimum Route Advertisement Interval (MRAI) (0\
    \ s)\n      8.  MinASOriginationInterval (MAOI) (0 s)\n      9.  Route flap damping\
    \ parameters (off)\n      10.  TCP Authentication Option (off)\n"
- title: 4.5.  Interface Types
  contents:
  - "4.5.  Interface Types\n   The type of media dictates which test cases may be\
    \ executed; each\n   interface type has a unique mechanism for detecting link\
    \ failures,\n   and the speed at which that mechanism operates will influence\
    \ the\n   measurement results.  All interfaces MUST be of the same media and\n\
    \   throughput for all iterations of each test case.\n"
- title: 4.6.  Measurement Accuracy
  contents:
  - "4.6.  Measurement Accuracy\n   Since observed packet loss is used to measure\
    \ the route convergence\n   time, the time between two successive packets offered\
    \ to each\n   individual route is the highest possible accuracy of any packet-loss-\n\
    \   based measurement.  When packet jitter is much less than the\n   convergence\
    \ time, it is a negligible source of error, and hence, it\n   will be treated\
    \ as within tolerance.\n   Other options to measure convergence are the Time-Based\
    \ Loss Method\n   (TBLM) and Timestamp-Based Method (TBM) [RFC6414].\n   An exterior\
    \ measurement on the input media (such as Ethernet) is\n   defined by this specification.\n"
- title: 4.7.  Measurement Statistics
  contents:
  - "4.7.  Measurement Statistics\n   The benchmark measurements may vary for each\
    \ trial due to the\n   statistical nature of timer expirations, CPU scheduling,\
    \ etc.  It is\n   recommended to repeat the test multiple times.  Evaluation of\
    \ the\n   test data must be done with an understanding of generally accepted\n\
    \   testing practices regarding repeatability, variance, and statistical\n   significance\
    \ of a small number of trials.\n   For any repeated tests that are averaged to\
    \ remove variance, all\n   parameters MUST remain the same.\n"
- title: 4.8.  Authentication
  contents:
  - "4.8.  Authentication\n   Authentication in BGP is done using the TCP Authentication\
    \ Option\n   [RFC5925].  (In some legacy situations, the authentication may still\n\
    \   be with TCP MD5).  The processing of the authentication hash,\n   particularly\
    \ in devices with a large number of BGP peers and a large\n   amount of update\
    \ traffic, can have an impact on the control plane of\n   the device.  If authentication\
    \ is enabled, it MUST be documented\n   correctly in the reporting format.\n \
    \  Also, it is recommended that trials MUST be with the same Secure\n   Inter-Domain\
    \ Routing (SIDR) features [RFC7115] [BGPsec].  The best\n   convergence tests\
    \ would be with no SIDR features and then to repeat\n   the convergence tests\
    \ with the same SIDR features.\n"
- title: 4.9.  Convergence Events
  contents:
  - "4.9.  Convergence Events\n   Convergence events or triggers are defined as abnormal\
    \ occurrences in\n   the network, which initiate route flapping in the network\
    \ and hence\n   forces the reconvergence of a steady state network.  In a real\n\
    \   network, a series of convergence events may cause convergence latency\n  \
    \ operators desire to test.\n   These convergence events must be defined in terms\
    \ of the sequences\n   defined in RFC 4098.  This basic document begins all tests\
    \ with a\n   router initial setup.  Additional documents will define BGP data-\n\
    \   plane convergence based on peer initialization.\n   The convergence events\
    \ may or may not be tied to the actual failure.\n   A soft reset [RFC4098] does\
    \ not clear the RIB or FIB tables.  A hard\n   reset clears BGP peer sessions,\
    \ RIB tables, and FIB tables.\n"
- title: 4.10.  High Availability
  contents:
  - "4.10.  High Availability\n   Due to the different Non-Stop-Routing (sometimes\
    \ referred to High-\n   Availability) solutions available from different vendors,\
    \ it is\n   RECOMMENDED that any redundancy available in the routing processors\n\
    \   should be disabled during the convergence measurements.  For cases\n   where\
    \ the redundancy cannot be disabled, the results are no longer\n   comparable\
    \ and the level of impact on the measurements is out of\n   scope of this document.\n"
- title: 5.  Test Cases
  contents:
  - "5.  Test Cases\n   All tests defined under this section assume the following:\n\
    \   a.  BGP peers are in Established state.\n   b.  BGP state should be cleared\
    \ from Established state to Idle prior\n       to each test.  This is recommended\
    \ to ensure that all tests start\n       with BGP peers being forced back to Idle\
    \ state and databases\n       flushed.\n   c.  Furthermore, the traffic generation\
    \ and routing should be\n       verified in the topology to ensure there is no\
    \ packet loss\n       observed on any advertised routes.\n   d.  The arrival timestamp\
    \ of advertised routes can be measured by\n       installing an inline monitoring\
    \ device between the emulator and\n       the DUT or by using the span port of\
    \ the DUT connected with an\n       external analyzer.  The time base of such\
    \ an inline monitor or\n       external analyzer needs to be synchronized with\
    \ the protocol and\n       traffic emulator.  Some modern emulators may have the\
    \ capability\n       to capture and timestamp every NLRI packet leaving and arriving\n\
    \       at the emulator ports.  The timestamps of these NLRI packets will\n  \
    \     be almost identical to the arrival time at the DUT if the cable\n      \
    \ distance between the emulator and DUT is relatively short.\n"
- title: 5.1.  Basic Convergence Tests
  contents:
  - "5.1.  Basic Convergence Tests\n   These test cases measure characteristics of\
    \ a BGP implementation in\n   non-failure scenarios like:\n   1.  RIB-IN Convergence\n\
    \   2.  RIB-OUT Convergence\n   3.  eBGP Convergence\n   4.  iBGP Convergence\n"
- title: 5.1.1.  RIB-IN Convergence
  contents:
  - "5.1.1.  RIB-IN Convergence\n   Objective:\n      This test measures the convergence\
    \ time taken to receive and\n      install a route in RIB using BGP.\n   Reference\
    \ Test Setup:\n      This test uses the setup as shown in Figure 1\n   Procedure:\n\
    \   A.  All variables affecting convergence should be set to a basic test\n  \
    \     state (as defined in Section 4.4).\n   B.  Establish BGP adjacency between\
    \ the DUT and one peer of the\n       emulator, Emp1.\n   C.  To ensure adjacency\
    \ establishment, wait for three keepalives to\n       be received from the DUT\
    \ or a configurable delay before\n       proceeding with the rest of the test.\n\
    \   D.  Start the traffic from the emulator tx towards the DUT targeted\n    \
    \   at a route specified in the route mixture (e.g., routeA).\n       Initially,\
    \ no traffic SHOULD be observed on the egress interface\n       as routeA is not\
    \ installed in the forwarding database of the DUT.\n   E.  Advertise routeA from\
    \ the peer (Emp1) to the DUT and record the\n       time.\n          This is Tup(Emp1,Rt-A),\
    \ also named XMT-Rt-time(Rt-A).\n   F.  Record the time when routeA from Emp1\
    \ is received at the DUT.\n          This is Tup(DUT,Rt-A), also named RCV-Rt-time(Rt-A).\n\
    \   G.  Record the time when the traffic targeted towards routeA is\n       received\
    \ by the emulator on the appropriate traffic egress\n       interface.\n     \
    \     This is TR(TDr,Rt-A), also named DUT-XMT-Data-Time(Rt-A).\n   H.  The difference\
    \ between the Tup(DUT,RT-A) and traffic received\n       time (TR (TDr, Rt-A)\
    \ is the FIB convergence time for routeA in\n       the route mixture.  A full\
    \ convergence for the route update is\n       the measurement between the first\
    \ route (Rt-A) and the last route\n       (Rt-last).\n          Route update convergence\
    \ is\n          TR(TDr, Rt-last)- Tup(DUT, Rt-A), or\n          (DUT-XMT-Data-Time\
    \ - RCV-Rt-Time)(Rt-A).\n   Note: It is recommended that a single test with the\
    \ same route\n   mixture be repeated several times.  A report should provide the\n\
    \   standard deviation and the average of all tests.\n   Running tests with a\
    \ varying number of routes and route mixtures is\n   important to get a full characterization\
    \ of a single peer.\n"
- title: 5.1.2.  RIB-OUT Convergence
  contents:
  - "5.1.2.  RIB-OUT Convergence\n   Objective:\n      This test measures the convergence\
    \ time taken by an implementation\n      to receive, install, and advertise a\
    \ route using BGP.\n   Reference Test Setup:\n      This test uses the setup as\
    \ shown in Figure 2.\n   Procedure:\n   A.  The Helper Node (HLP) MUST run same\
    \ version of BGP as the DUT.\n   B.  All devices MUST be synchronized using NTP\
    \ or some local\n       reference clock.\n   C.  All configuration variables for\
    \ the Helper Node, DUT, and\n       emulator SHOULD be set to the same values.\
    \  These values MAY be\n       basic test or a unique set completely described\
    \ in the test\n       setup.\n   D.  Establish BGP adjacency between the DUT and\
    \ the emulator.\n   E.  Establish BGP adjacency between the DUT and the Helper\
    \ Node.\n   F.  To ensure adjacency establishment, wait for three keepalives to\n\
    \       be received from the DUT or a configurable delay before\n       proceeding\
    \ with the rest of the test.\n   G.  Start the traffic from the emulator towards\
    \ the Helper Node\n       targeted at a specific route (e.g., routeA).  Initially,\
    \ no\n       traffic SHOULD be observed on the egress interface as routeA is\n\
    \       not installed in the forwarding database of the DUT.\n   H.  Advertise\
    \ routeA from the emulator to the DUT and note the time.\n          This is Tup(EMx,\
    \ Rt-A), also named EM-XMT-Data-Time(Rt-A).\n   I.  Record when routeA is received\
    \ by the DUT.\n          This is Tup(DUTr, Rt-A), also named DUT-RCV-Rt-Time(Rt-A).\n\
    \   J.  Record the time when routeA is forwarded by the DUT towards the\n    \
    \   Helper Node.\n          This is Tup(DUTx, Rt-A), also named DUT-XMT-Rt-Time(Rt-A).\n\
    \   K.  Record the time when the traffic targeted towards routeA is\n       received\
    \ on the Route Egress Interface.  This is TR(EMr, Rt-A),\n       also named DUT-XMT-Data\
    \ Time(Rt-A).\n          FIB convergence = (DUT-XMT-Data-Time -DUT-RCV-Rt-Time)(Rt-A)\n\
    \          RIB convergence = (DUT-XMT-Rt-Time - DUT-RCV-Rt-Time)(Rt-A)\n     \
    \     Convergence for a route stream is characterized by\n          a) individual\
    \ route convergence for FIB and RIB, and\n          b) all route convergence of\n\
    \          FIB-convergence = DUT-XMT-Data-Time(last) - DUT-RCV-Rt-\n         \
    \ Time(first), and\n          RIB-convergence = DUT-XMT-Rt-Time(last) - DUT-RCV-Rt-\n\
    \          Time(first).\n"
- title: 5.1.3.  eBGP Convergence
  contents:
  - "5.1.3.  eBGP Convergence\n   Objective:\n      This test measures the convergence\
    \ time taken by an implementation\n      to receive, install, and advertise a\
    \ route in an eBGP Scenario.\n   Reference Test Setup:\n      This test uses the\
    \ setup as shown in Figure 2, and the scenarios\n      described in RIB-IN and\
    \ RIB-OUT are applicable to this test case.\n"
- title: 5.1.4.  iBGP Convergence
  contents:
  - "5.1.4.  iBGP Convergence\n   Objective:\n      This test measures the convergence\
    \ time taken by an implementation\n      to receive, install, and advertise a\
    \ route in an iBGP Scenario.\n   Reference Test Setup:\n      This test uses the\
    \ setup as shown in Figure 2, and the scenarios\n      described in RIB-IN and\
    \ RIB-OUT are applicable to this test case.\n"
- title: 5.1.5.  eBGP Multihop Convergence
  contents:
  - "5.1.5.  eBGP Multihop Convergence\n   Objective:\n      This test measures the\
    \ convergence time taken by an implementation\n      to receive, install, and\
    \ advertise a route in an eBGP Multihop\n      Scenario.\n   Reference Test Setup:\n\
    \      This test uses the setup as shown in Figure 3.  The DUT is used\n     \
    \ along with a Helper Node.\n   Procedure:\n   A.  The Helper Node MUST run the\
    \ same version of BGP as the DUT.\n   B.  All devices MUST be synchronized using\
    \ NTP or some local\n       reference clock.\n   C.  All variables affecting convergence,\
    \ like authentication,\n       policies, and timers, SHOULD be set to basic settings.\n\
    \   D.  All three devices, the DUT, emulator, and Helper Node, are\n       configured\
    \ with different ASs.\n   E.  Loopback interfaces are configured on the DUT and\
    \ Helper Node,\n       and connectivity is established between them using any\
    \ config\n       options available on the DUT.\n   F.  Establish BGP adjacency\
    \ between the DUT and the emulator.\n   G.  Establish BGP adjacency between the\
    \ DUT and the Helper Node.\n   H.  To ensure adjacency establishment, wait for\
    \ three keepalives to\n       be received from the DUT or a configurable delay\
    \ before\n       proceeding with the rest of the test\n   I.  Start the traffic\
    \ from the emulator towards the DUT targeted at a\n       specific route (e.g.,\
    \ routeA).\n   J.  Initially, no traffic SHOULD be observed on the egress interface\n\
    \       as routeA is not installed in the forwarding database of the DUT.\n  \
    \ K.  Advertise routeA from the emulator to the DUT and note the time\n      \
    \ (Tup(EMx,RouteA), also named Route-Tx-time(Rt-A).\n   L.  Record the time when\
    \ the route is received by the DUT.  This is\n       Tup(EMr,DUT), also named\
    \ Route-Rcv-time(Rt-A).\n   M.  Record the time when the traffic targeted towards\
    \ routeA is\n       received from the egress interface of the DUT on the emulator.\n\
    \       This is Tup(EMd,DUT) named Data-Rcv-time(Rt-A)\n   N.  Record the time\
    \ when routeA is forwarded by the DUT towards the\n       Helper Node.  This is\
    \ Tup(EMf,DUT), also named Route-Fwd-time(Rt-\n       A).\n          FIB Convergence\
    \ = (Data-Rcv-time - Route-Rcv-time)(Rt-A)\n          RIB Convergence = (Route-Fwd-time\
    \ - Route-Rcv-time)(Rt-A)\n   Note: It is recommended that the test be repeated\
    \ with a varying\n   number of routes and route mixtures.  With each set route\
    \ mixture,\n   the test should be repeated multiple times.  The results should\n\
    \   record the average, mean, standard deviation.\n"
- title: 5.2.  BGP Failure/Convergence Events
  contents:
  - '5.2.  BGP Failure/Convergence Events

    '
- title: 5.2.1.  Physical Link Failure on DUT End
  contents:
  - "5.2.1.  Physical Link Failure on DUT End\n   Objective:\n      This test measures\
    \ the route convergence time due to a local link\n      failure event at the DUT's\
    \ Local Interface.\n   Reference Test Setup:\n      This test uses the setup as\
    \ shown in Figure 1.  The shutdown event\n      is defined as an administrative\
    \ shutdown event on the DUT.\n   Procedure:\n   A.  All variables affecting convergence,\
    \ like authentication,\n       policies, and timers, should be set to basic-test\
    \ policy.\n   B.  Establish two BGP adjacencies from the DUT to the emulator,\
    \ one\n       over the peer interface and the other using a second peer\n    \
    \   interface.\n   C.  Advertise the same route, routeA, over both adjacencies\
    \ with\n       preferences so that the Best Egress Interface for the preferred\n\
    \       next hop is (Emp1) interface.\n   D.  To ensure adjacency establishment,\
    \ wait for three keepalives to\n       be received from the DUT or a configurable\
    \ delay before\n       proceeding with the rest of the test.\n   E.  Start the\
    \ traffic from the emulator towards the DUT targeted at a\n       specific route\
    \ (e.g., routeA).  Initially, traffic would be\n       observed on the best egress\
    \ route, Emp1, instead of Emp2.\n   F.  Trigger the shutdown event of Best Egress\
    \ Interface on the DUT\n       (Dp1).  This time is called Shutdown time.\n  \
    \ G.  Measure the convergence time for the event to be detected and\n       traffic\
    \ to be forwarded to Next-Best Egress Interface (Dp2).\n          Time = Data-detect(Emp2)\
    \ - Shutdown time\n   H.  Stop the offered load and wait for the queues to drain.\
    \  Restart\n       the data flow.\n   I.  Bring up the link on the DUT's Best\
    \ Egress Interface.\n   J.  Measure the convergence time taken for the traffic\
    \ to be rerouted\n       from Dp2 to Best Egress Interface, Dp1.\n          Time\
    \ = Data-detect(Emp1) - Bring Up time\n   K.  It is recommended that the test\
    \ be repeated with a varying number\n       of routes and route mixtures or with\
    \ a number of routes and route\n       mixtures closer to what is deployed in\
    \ operational networks.\n"
- title: 5.2.2.  Physical Link Failure on Remote/Emulator End
  contents:
  - "5.2.2.  Physical Link Failure on Remote/Emulator End\n   Objective:\n      This\
    \ test measures the route convergence time due to a local link\n      failure\
    \ event at the Tester's Local Interface.\n   Reference Test Setup:\n      This\
    \ test uses the setup as shown in Figure 1.  The shutdown event\n      is defined\
    \ as a shutdown of the local interface of the Tester via\n      a logical shutdown\
    \ event.  The procedure used in Section 5.2.1 is\n      used for the termination.\n"
- title: 5.2.3.  ECMP Link Failure on DUT End
  contents:
  - "5.2.3.  ECMP Link Failure on DUT End\n   Objective:\n      This test measures\
    \ the route convergence time due to a local link\n      failure event at the ECMP\
    \ member.  The FIB configuration and BGP\n      are set to allow two ECMP routes\
    \ to be installed.  However, policy\n      directs the routes to be sent only\
    \ over one of the paths.\n   Reference Test Setup:\n      This test uses the setup\
    \ as shown in Figure 1, and the procedure\n      used in Section 5.2.1.\n"
- title: 5.3.  BGP Adjacency Failure (Non-Physical Link Failure) on Emulator
  contents:
  - "5.3.  BGP Adjacency Failure (Non-Physical Link Failure) on Emulator\n   Objective:\n\
    \      This test measures the route convergence time due to BGP Adjacency\n  \
    \    Failure on the emulator.\n   Reference Test Setup:\n      This test uses\
    \ the setup as shown in Figure 1.\n   Procedure:\n   A.  All variables affecting\
    \ convergence, like authentication,\n       policies, and timers, should be set\
    \ to basic-policy.\n   B.  Establish two BGP adjacencies from the DUT to the emulator:\
    \ one\n       over the Best Egress Interface and the other using the Next-Best\n\
    \       Egress Interface.\n   C.  Advertise the same route, routeA, over both\
    \ adjacencies with\n       preferences so that the Best Egress Interface for the\
    \ preferred\n       next hop is (Emp1) interface.\n   D.  To ensure adjacency\
    \ establishment, wait for three keepalives to\n       be received from the DUT\
    \ or a configurable delay before\n       proceeding with the rest of the test.\n\
    \   E.  Start the traffic from the emulator towards the DUT targeted at a\n  \
    \     specific route (e.g., routeA).  Initially, traffic would be\n       observed\
    \ on the Best Egress Interface.\n   F.  Remove BGP adjacency via a software adjacency\
    \ down on the\n       emulator on the Best Egress Interface.  This time is called\n\
    \       BGPadj-down-time, also termed BGPpeer-down.\n   G.  Measure the convergence\
    \ time for the event to be detected and\n       traffic to be forwarded to Next-Best\
    \ Egress Interface.  This time\n       is Tr-rr2, also called TR2-traffic-on.\n\
    \          Convergence = TR2-traffic-on - BGPpeer-down\n   H.  Stop the offered\
    \ load and wait for the queues to drain and\n       restart the data flow.\n \
    \  I.  Bring up BGP adjacency on the emulator over the Best Egress\n       Interface.\
    \  This time is BGP-adj-up, also called BGPpeer-up.\n   J.  Measure the convergence\
    \ time taken for the traffic to be rerouted\n       to the Best Egress Interface.\
    \  This time is Tr-rr1, also called\n       TR1-traffic-on.\n          Convergence\
    \ = TR1-traffic-on - BGPpeer-up\n"
- title: 5.4.  BGP Hard Reset Test Cases
  contents:
  - '5.4.  BGP Hard Reset Test Cases

    '
- title: 5.4.1.  BGP Non-Recovering Hard Reset Event on DUT
  contents:
  - "5.4.1.  BGP Non-Recovering Hard Reset Event on DUT\n   Objective:\n      This\
    \ test measures the route convergence time due to a hard reset\n      on the DUT.\n\
    \   Reference Test Setup:\n      This test uses the setup as shown in Figure 1.\n\
    \   Procedure:\n   A.  The requirement for this test case is that the hard reset\
    \ event\n       should be non-recovering and should affect only the adjacency\n\
    \       between the DUT and the emulator on the Best Egress Interface.\n   B.\
    \  All variables affecting the test SHOULD be set to basic-test\n       values.\n\
    \   C.  Establish two BGP adjacencies from the DUT to the emulator: one\n    \
    \   over the Best Egress Interface and the other using the Next-Best\n       Egress\
    \ Interface.\n   D.  Advertise the same route, routeA, over both adjacencies with\n\
    \       preferences so that the Best Egress Interface for the preferred\n    \
    \   next hop is (Emp1) interface.\n   E.  To ensure adjacency establishment, wait\
    \ for three keepalives to\n       be received from the DUT or a configurable delay\
    \ before\n       proceeding with the rest of the test.\n   F.  Start the traffic\
    \ from the emulator towards the DUT targeted at a\n       specific route (e.g.,\
    \ routeA).  Initially, traffic would be\n       observed on the Best Egress Interface.\n\
    \   G.  Trigger the hard reset event of the Best Egress Interface on the\n   \
    \    DUT.  This time is called time reset.\n   H.  This event is detected and\
    \ traffic is forwarded to the Next-Best\n       Egress Interface.  This time is\
    \ called time-traffic flow.\n   I.  Measure the convergence time for the event\
    \ to be detected and\n       traffic to be forwarded to Next-Best Egress Interface.\n\
    \          Time of convergence = time-traffic flow - time-reset\n   J.  Stop the\
    \ offered load and wait for the queues to drain and\n       restart.\n   K.  It\
    \ is recommended that the test be repeated with a varying number\n       of routes\
    \ and route mixtures or with a number of routes and route\n       mixtures closer\
    \ to what is deployed in operational networks.\n   L.  When varying number of\
    \ routes are used, convergence time is\n       measured using the Loss-Derived\
    \ method [RFC6412].\n   M.  Convergence time in this scenario is influenced by\
    \ failure\n       detection time on the Tester, BGP keepalive time and routing,\
    \ and\n       forwarding table update time.\n"
- title: 5.5.  BGP Soft Reset
  contents:
  - "5.5.  BGP Soft Reset\n   Objective:\n      This test measures the route convergence\
    \ time taken by an\n      implementation to service a BGP Route Refresh message\
    \ and\n      advertise a route.\n   Reference Test Setup:\n      This test uses\
    \ the setup as shown in Figure 2.\n   Procedure:\n   A.  The BGP implementation\
    \ on the DUT and Helper Node needs to\n       support BGP Route Refresh Capability\
    \ [RFC2918].\n   B.  All devices MUST be synchronized using NTP or some local\n\
    \       reference clock.\n   C.  All variables affecting convergence, like authentication,\n\
    \       policies, and timers, should be set to basic-test defaults.\n   D.  The\
    \ DUT and the Helper Node are configured in the same AS,\n       whereas the emulator\
    \ is configured under a different AS.\n   E.  Establish BGP adjacency between\
    \ the DUT and the emulator.\n   F.  Establish BGP adjacency between the DUT and\
    \ the Helper Node.\n   G.  To ensure adjacency establishment, wait for three keepalives\
    \ to\n       be received from the DUT or a configurable delay before\n       proceeding\
    \ with the rest of the test.\n   H.  Configure a policy under the BGP on the Helper\
    \ Node to deny\n       routes received from the DUT.\n   I.  Advertise routeA\
    \ from the emulator to the DUT.\n   J.  The DUT will try to advertise the route\
    \ to the Helper Node; it\n       will be denied.\n   K.  Wait for three keepalives.\n\
    \   L.  Start the traffic from the emulator towards the Helper Node\n       targeted\
    \ at a specific route, say routeA.  Initially, no traffic\n       would be observed\
    \ on the egress interface, as routeA is not\n       present.\n   M.  Remove the\
    \ policy on the Helper Node and issue a route refresh\n       request towards\
    \ the DUT.  Note the timestamp of this event.  This\n       is the RefreshTime.\n\
    \   N.  Record the time when the traffic targeted towards routeA is\n       received\
    \ on the egress interface.  This is RecTime.\n   O.  The following equation represents\
    \ the Route Refresh Convergence\n       Time per route.\n          Route Refresh\
    \ Convergence Time = (RecTime - RefreshTime)\n"
- title: 5.6.  BGP Route Withdrawal Convergence Time
  contents:
  - "5.6.  BGP Route Withdrawal Convergence Time\n   Objective:\n      This test measures\
    \ the route convergence time taken by an\n      implementation to service a BGP\
    \ withdraw message and advertise the\n      withdraw.\n   Reference Test Setup:\n\
    \      This test uses the setup as shown in Figure 2.\n   Procedure:\n   A.  This\
    \ test consists of two steps to determine the Total Withdraw\n       Processing\
    \ Time.\n   B.  Step 1:\n       (1)   All devices MUST be synchronized using NTP\
    \ or some local\n             reference clock.\n       (2)   All variables should\
    \ be set to basic-test parameters.\n       (3)   The DUT and Helper Node are configured\
    \ in the same AS,\n             whereas the emulator is configured under a different\
    \ AS.\n       (4)   Establish BGP adjacency between the DUT and the emulator.\n\
    \       (5)   To ensure adjacency establishment, wait for three\n            \
    \ keepalives to be received from the DUT or a configurable\n             delay\
    \ before proceeding with the rest of the test.\n       (6)   Start the traffic\
    \ from the emulator towards the DUT\n             targeted at a specific route\
    \ (e.g., routeA).  Initially, no\n             traffic would be observed on the\
    \ egress interface as routeA\n             is not present on the DUT.\n      \
    \ (7)   Advertise routeA from the emulator to the DUT.\n       (8)   The traffic\
    \ targeted towards routeA is received on the\n             egress interface.\n\
    \       (9)   Now the Tester sends a request to withdraw routeA to the\n     \
    \        DUT.  TRx(Awith) is also called WdrawTime1(Rt-A).\n       (10)  Record\
    \ the time when no traffic is observed as determined\n             by the emulator.\
    \  This is the RouteRemoveTime1(Rt-A).\n       (11)  The difference between the\
    \ RouteRemoveTime1 and WdrawTime1\n             is the WdrawConvTime1.\n     \
    \           WdrawConvTime1(Rt-A) = RouteRemoveTime1(Rt-A) -\n                WdrawTime1(Rt-A)\n\
    \   C.  Step 2:\n       (1)  Continuing from Step 1, re-advertise routeA back\
    \ to the DUT\n            from the Tester.\n       (2)  The DUT will try to advertise\
    \ routeA to the Helper Node\n            (this assumes there exists a session\
    \ between the DUT and\n            Helper Node).\n       (3)  Start the traffic\
    \ from the emulator towards the Helper Node\n            targeted at a specific\
    \ route (e.g., routeA).  Traffic would\n            be observed on the egress\
    \ interface after routeA is received\n            by the Helper Node.\n      \
    \         WATime=time traffic first flows\n       (4)  Now the Tester sends a\
    \ request to withdraw routeA to DUT.\n            This is the WdrawTime2(Rt-A).\n\
    \               WAWtime-TRx(Rt-A) = WdrawTime2(Rt-A)\n       (5)  DUT processes\
    \ the withdraw and sends it to the Helper Node.\n       (6)  Record the time when\
    \ no traffic is observed as determined by\n            the emulator.  This is:\n\
    \               TR-WAW(DUT,RouteA) = RouteRemoveTime2(Rt-A)\n       (7)  Total\
    \ Withdraw Processing Time is:\n               TotalWdrawTime(Rt-A) = ((RouteRemoveTime2(Rt-A)\
    \ -\n               WdrawTime2(Rt-A)) - WdrawConvTime1(Rt-A))\n"
- title: 5.7.  BGP Path Attribute Change Convergence Time
  contents:
  - "5.7.  BGP Path Attribute Change Convergence Time\n   Objective:\n      This test\
    \ measures the convergence time taken by an implementation\n      to service a\
    \ BGP Path Attribute Change.\n   Reference Test Setup:\n      This test uses the\
    \ setup as shown in Figure 1.\n   Procedure:\n   A.  This test only applies to\
    \ Well-Known Mandatory Attributes like\n       origin, AS path, and next hop.\n\
    \   B.  In each iteration of the test, only one of these mandatory\n       attributes\
    \ need to be varied whereas the others remain the same.\n   C.  All devices MUST\
    \ be synchronized using NTP or some local\n       reference clock.\n   D.  All\
    \ variables should be set to basic-test parameters.\n   E.  Advertise the same\
    \ route, routeA, over both adjacencies with\n       preferences so that the Best\
    \ Egress Interface for the preferred\n       next hop is (Emp1) interface.\n \
    \  F.  To ensure adjacency establishment, wait for three keepalives to\n     \
    \  be received from the DUT or a configurable delay before\n       proceeding\
    \ with the rest of the test.\n   G.  Start the traffic from the emulator towards\
    \ the DUT targeted at\n       the specific route (e.g., routeA).  Initially, traffic\
    \ would be\n       observed on the Best Egress Interface.\n   H.  Now advertise\
    \ the same route, routeA, on the Next-Best Egress\n       Interface but by varying\
    \ one of the well-known mandatory\n       attributes to have a preferred value\
    \ over that interface.  We\n       call this Tbetter.  The other values need to\
    \ be the same as what\n       was advertised on the Best-Egress adjacency.\n \
    \         TRx(Path-Change(Rt-A)) = Path Change Event Time(Rt-A)\n   I.  Measure\
    \ the convergence time for the event to be detected and\n       traffic to be\
    \ forwarded to Next-Best Egress Interface.\n          DUT(Path-Change, Rt-A) =\
    \ Path-switch time(Rt-A)\n          Convergence = Path-switch time(Rt-A) - Path\
    \ Change Event\n          Time(Rt-A)\n   J.  Stop the offered load and wait for\
    \ the queues to drain and\n       restart.\n   K.  Repeat the test for various\
    \ attributes.\n"
- title: 5.8.  BGP Graceful Restart Convergence Time
  contents:
  - "5.8.  BGP Graceful Restart Convergence Time\n   Objective:\n      This test measures\
    \ the route convergence time taken by an\n      implementation during a Graceful\
    \ Restart Event as detailed in the\n      terminology document [RFC4098].\n  \
    \ Reference Test Setup:\n      This test uses the setup as shown in Figure 4.\n\
    \   Procedure:\n   A.  It measures the time taken by an implementation to service\
    \ a BGP\n       Graceful Restart Event and advertise a route.\n   B.  The Helper\
    \ Nodes are the same model as the DUT and run the same\n       BGP implementation\
    \ as the DUT.\n   C.  The BGP implementation on the DUT and Helper Node needs\
    \ to\n       support the BGP Graceful Restart Mechanism [RFC4724].\n   D.  All\
    \ devices MUST be synchronized using NTP or some local\n       reference clock.\n\
    \   E.  All variables are set to basic-test values.\n   F.  The DUT and Helper\
    \ Node 1 (HLP1) are configured in the same AS,\n       whereas the emulator and\
    \ Helper Node 2 (HLP2) are configured\n       under different ASs.\n   G.  Establish\
    \ BGP adjacency between the DUT and Helper Nodes.\n   H.  Establish BGP adjacency\
    \ between the Helper Node 2 and the\n       emulator.\n   I.  To ensure adjacency\
    \ establishment, wait for three keepalives to\n       be received from the DUT\
    \ or a configurable delay before\n       proceeding with the rest of the test.\n\
    \   J.  Configure a policy under the BGP on Helper Node 1 to deny routes\n   \
    \    received from the DUT.\n   K.  Advertise routeA from the emulator to Helper\
    \ Node 2.\n   L.  Helper Node 2 advertises the route to the DUT and the DUT will\n\
    \       try to advertise the route to Helper Node 1, which will be\n       denied.\n\
    \   M.  Wait for three keepalives.\n   N.  Start the traffic from the emulator\
    \ towards the Helper Node 1\n       targeted at the specific route (e.g., routeA).\
    \  Initially, no\n       traffic would be observed on the egress interface as\
    \ routeA is\n       not present.\n   O.  Perform a Graceful Restart Trigger Event\
    \ on the DUT and note the\n       time.  This is the GREventTime.\n   P.  Remove\
    \ the policy on Helper Node 1.\n   Q.  Record the time when the traffic targeted\
    \ towards routeA is\n       received on the egress interface.\n          This\
    \ is TRr(DUT, routeA), also called RecTime(Rt-A).\n   R.  The following equation\
    \ represents the Graceful Restart\n       Convergence Time.\n          Graceful\
    \ Restart Convergence Time(Rt-A) = ((RecTime(Rt-A) -\n          GREventTime) -\
    \ RIB-IN)\n   S.  It is assumed in this test case that after a switchover is\n\
    \       triggered on the DUT, it will not have any cycles to process the\n   \
    \    BGP Refresh messages.  The reason for this assumption is that\n       there\
    \ is a narrow window of time where after switchover, when we\n       remove the\
    \ policy from Helper Node 1, implementations might\n       generate Route Refresh\
    \ automatically and this request might be\n       serviced before the DUT actually\
    \ switches over and re-establishes\n       BGP adjacencies with the peers.\n"
- title: 6.  Reporting Format
  contents:
  - "6.  Reporting Format\n   For each test case, it is recommended that the reporting\
    \ tables below\n   are completed, and all time values SHOULD be reported with\
    \ resolution\n   as specified in [RFC4098].\n Parameter                      \
    \  Units or Description\n ===========================      ==========================\n\
    \ Test case                        Test case number\n Test topology          \
    \          1, 2, 3, or 4\n Parallel links                   Number of parallel\
    \ links\n Interface type                   Gigabit Ethernet (GigE),\n        \
    \                          Packet over SONET (POS), ATM, other\n Convergence Event\
    \                Hard reset, soft reset, link\n                              \
    \    failure, or other defined\n eBGP sessions                    Number of eBGP\
    \ sessions\n iBGP sessions                    Number of iBGP sessions\n eBGP neighbor\
    \                    Number of eBGP neighbors\n iBGP neighbor                \
    \    Number of iBGP neighbors\n Routes per peer                  Number of routes\n\
    \ Total unique routes              Number of routes\n Total non-unique routes\
    \          Number of routes\n IGP configured                   IS-IS, OSPF, static,\
    \ or other\n Route mixture                    Description of route mixture\n Route\
    \ packing                    Number of routes included in an update\n Policy configured\
    \                Yes, No\n SIDR origin authentication       Yes, No\n [RFC7115]\n\
    \ bgp-sec [BGPsec]                 Yes, No\n Packet size offered             \
    \ Bytes\n to the DUT\n Offered load                     Packets per second\n Packet\
    \ sampling interval         Seconds\n on Tester\n Forwarding delay threshold \
    \      Seconds\n Timer values configured on DUT\n   Interface failure        \
    \      Seconds\n    indication delay\n   Hold time                      Seconds\n\
    \   MinRouteAdvertisementInterval  Seconds\n      (MRAI)\n   MinASOriginationInterval\
    \       Seconds\n      (MAOI)\n   Keepalive time                 Seconds\n   ConnectRetry\
    \                   Seconds\n TCP parameters for DUT and Tester\n   Maximum Segment\
    \ Size (MSS)     Bytes\n   Slow start threshold           Bytes\n   Maximum window\
    \ size            Bytes\n   Test Details:\n   a.  If the Offered Load matches\
    \ a subset of routes, describe how this\n       subset is selected.\n   b.  Describe\
    \ how the convergence event is applied; does it cause\n       instantaneous traffic\
    \ loss or not?\n   c.  If there is any policy configured, describe the configured\n\
    \       policy.\n   Complete the table below for the initial convergence event\
    \ and the\n   reversion convergence event.\n        Parameter                \
    \        Unit\n        ===========================      ==========================\n\
    \        Convergence Event                Initial or reversion\n        Traffic\
    \ Forwarding Metrics\n          Total number of packets        Number of packets\n\
    \           offered to the DUT\n          Total number of packets        Number\
    \ of packets\n           forwarded by the DUT\n          Connectivity packet loss\
    \       Number of packets\n          Convergence packet loss        Number of\
    \ packets\n          Out-of-order packets           Number of packets\n      \
    \    Duplicate packets              Number of packets\n        Convergence Benchmarks\n\
    \          Rate-Derived Method [RFC6412]:\n           First route convergence\
    \       Seconds\n            time\n           Full convergence time         Seconds\n\
    \          Loss-Derived Method [RFC6412]:\n           Loss-Derived convergence\
    \      Seconds\n            time\n          Route-Specific (R-S) Loss-Derived\n\
    \          Method:\n           Minimum R-S convergence       Seconds\n       \
    \     time\n           Maximum R-S convergence       Seconds\n            time\n\
    \           Median R-S convergence        Seconds\n            time\n        \
    \   Average R-S convergence       Seconds\n            time\n        Loss of Connectivity\
    \ (LoC) Benchmarks\n          Loss-Derived Method:\n           Loss-Derived loss\
    \ of          Seconds\n            connectivity period\n          Route-Specific\
    \ Loss-Derived\n           Method:\n           Minimum LoC period [n]        Array\
    \ of seconds\n           Minimum Route LoC period      Seconds\n           Maximum\
    \ Route LoC period      Seconds\n           Median Route LoC period       Seconds\n\
    \           Average Route LoC period      Seconds\n"
- title: 7.  Security Considerations
  contents:
  - "7.  Security Considerations\n   Benchmarking activities as described in this\
    \ memo are limited to\n   technology characterization using controlled stimuli\
    \ in a laboratory\n   environment, with dedicated address space and the constraints\n\
    \   specified in the sections above.\n   The benchmarking network topology is\
    \ an independent test setup and\n   MUST NOT be connected to devices that may\
    \ forward the test traffic\n   into a production network or misroute traffic to\
    \ the test management\n   network.\n   Further, benchmarking is performed on a\
    \ \"black-box\" basis, relying\n   solely on measurements observable and external\
    \ to the DUT/SUT.\n   Special capabilities SHOULD NOT exist in the DUT/SUT specifically\
    \ for\n   benchmarking purposes.  Any implications for network security arising\n\
    \   from the DUT/SUT SHOULD be identical in the lab and in production\n   networks.\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [IEEE.802.11]\n              IEEE, \"IEEE Standard\
    \ for Information technology --\n              Telecommunications and information\
    \ exchange between\n              systems Local and metropolitan area networks\
    \ -- Specific\n              requirements Part 11: Wireless LAN Medium Access\
    \ Control\n              (MAC) and Physical Layer (PHY) Specifications\",\n  \
    \            IEEE 802.11-2012, DOI 10.1109/ieeestd.2012.6178212, April\n     \
    \         2012, <http://ieeexplore.ieee.org/servlet/\n              opac?punumber=6178209>.\n\
    \   [RFC2119]  Bradner, S., \"Key words for use in RFCs to Indicate\n        \
    \      Requirement Levels\", BCP 14, RFC 2119,\n              DOI 10.17487/RFC2119,\
    \ March 1997,\n              <http://www.rfc-editor.org/info/rfc2119>.\n   [RFC2918]\
    \  Chen, E., \"Route Refresh Capability for BGP-4\", RFC 2918,\n             \
    \ DOI 10.17487/RFC2918, September 2000,\n              <http://www.rfc-editor.org/info/rfc2918>.\n\
    \   [RFC4098]  Berkowitz, H., Davies, E., Ed., Hares, S., Krishnaswamy,\n    \
    \          P., and M. Lepp, \"Terminology for Benchmarking BGP Device\n      \
    \        Convergence in the Control Plane\", RFC 4098,\n              DOI 10.17487/RFC4098,\
    \ June 2005,\n              <http://www.rfc-editor.org/info/rfc4098>.\n   [RFC4271]\
    \  Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., \"A\n              Border\
    \ Gateway Protocol 4 (BGP-4)\", RFC 4271,\n              DOI 10.17487/RFC4271,\
    \ January 2006,\n              <http://www.rfc-editor.org/info/rfc4271>.\n   [RFC6412]\
    \  Poretsky, S., Imhoff, B., and K. Michielsen, \"Terminology\n              for\
    \ Benchmarking Link-State IGP Data-Plane Route\n              Convergence\", RFC\
    \ 6412, DOI 10.17487/RFC6412, November\n              2011, <http://www.rfc-editor.org/info/rfc6412>.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [BGPsec]   Lepinski, M. and K. Sriram, \"BGPsec\
    \ Protocol\n              Specification\", Work in Progress, draft-ietf-sidr-bgpsec-\n\
    \              protocol-15, March 2016.\n   [RFC1242]  Bradner, S., \"Benchmarking\
    \ Terminology for Network\n              Interconnection Devices\", RFC 1242,\
    \ DOI 10.17487/RFC1242,\n              July 1991, <http://www.rfc-editor.org/info/rfc1242>.\n\
    \   [RFC1983]  Malkin, G., Ed., \"Internet Users' Glossary\", FYI 18,\n      \
    \        RFC 1983, DOI 10.17487/RFC1983, August 1996,\n              <http://www.rfc-editor.org/info/rfc1983>.\n\
    \   [RFC2285]  Mandeville, R., \"Benchmarking Terminology for LAN\n          \
    \    Switching Devices\", RFC 2285, DOI 10.17487/RFC2285,\n              February\
    \ 1998, <http://www.rfc-editor.org/info/rfc2285>.\n   [RFC2545]  Marques, P. and\
    \ F. Dupont, \"Use of BGP-4 Multiprotocol\n              Extensions for IPv6 Inter-Domain\
    \ Routing\", RFC 2545,\n              DOI 10.17487/RFC2545, March 1999,\n    \
    \          <http://www.rfc-editor.org/info/rfc2545>.\n   [RFC4724]  Sangli, S.,\
    \ Chen, E., Fernando, R., Scudder, J., and Y.\n              Rekhter, \"Graceful\
    \ Restart Mechanism for BGP\", RFC 4724,\n              DOI 10.17487/RFC4724,\
    \ January 2007,\n              <http://www.rfc-editor.org/info/rfc4724>.\n   [RFC4760]\
    \  Bates, T., Chandra, R., Katz, D., and Y. Rekhter,\n              \"Multiprotocol\
    \ Extensions for BGP-4\", RFC 4760,\n              DOI 10.17487/RFC4760, January\
    \ 2007,\n              <http://www.rfc-editor.org/info/rfc4760>.\n   [RFC5925]\
    \  Touch, J., Mankin, A., and R. Bonica, \"The TCP\n              Authentication\
    \ Option\", RFC 5925, DOI 10.17487/RFC5925,\n              June 2010, <http://www.rfc-editor.org/info/rfc5925>.\n\
    \   [RFC6414]  Poretsky, S., Papneja, R., Karthik, J., and S. Vapiwala,\n    \
    \          \"Benchmarking Terminology for Protection Performance\",\n        \
    \      RFC 6414, DOI 10.17487/RFC6414, November 2011,\n              <http://www.rfc-editor.org/info/rfc6414>.\n\
    \   [RFC7115]  Bush, R., \"Origin Validation Operation Based on the\n        \
    \      Resource Public Key Infrastructure (RPKI)\", BCP 185,\n              RFC\
    \ 7115, DOI 10.17487/RFC7115, January 2014,\n              <http://www.rfc-editor.org/info/rfc7115>.\n"
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   We would like to thank Anil Tandon, Arvind Pandey, Mohan\
    \ Nanduri, Jay\n   Karthik, and Eric Brendel for their input and discussions on\
    \ various\n   sections in the document.  We also like to acknowledge Will Liu,\n\
    \   Hubert Gee, Semion Lisyansky, and Faisal Shah for their review and\n   feedback\
    \ on the document.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Rajiv Papneja\n   Huawei Technologies\n   Email: rajiv.papneja@huawei.com\n\
    \   Bhavani Parise\n   Skyport Systems\n   Email: bparise@skyportsystems.com\n\
    \   Susan Hares\n   Huawei Technologies\n   Email: shares@ndzh.com\n   Dean Lee\n\
    \   IXIA\n   Email: dlee@ixiacom.com\n   Ilya Varlashkin\n   Google\n   Email:\
    \ ilya@nobulus.com\n"
