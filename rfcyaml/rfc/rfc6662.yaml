- title: __initial_text__
  contents:
  - "        Pre-Congestion Notification (PCN) Boundary-Node Behavior\n          \
    \   for the Single Marking (SM) Mode of Operation\n"
- title: Abstract
  contents:
  - "Abstract\n   Pre-Congestion Notification (PCN) is a means for protecting the\n\
    \   quality of service for inelastic traffic admitted to a Diffserv\n   domain.\
    \  The overall PCN architecture is described in RFC 5559.  This\n   memo is one\
    \ of a series describing possible boundary-node behaviors\n   for a PCN-domain.\
    \  The behavior described here is that for a form of\n   measurement-based load\
    \ control using two PCN marking states: not-\n   marked and excess-traffic-marked.\
    \  This behavior is known informally\n   as the Single Marking (SM) PCN-boundary-node\
    \ behavior.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for examination, experimental implementation, and\n   evaluation.\n\
    \   This document defines an Experimental Protocol for the Internet\n   community.\
    \  This document is a product of the Internet Engineering\n   Task Force (IETF).\
    \  It represents the consensus of the IETF\n   community.  It has received public\
    \ review and has been approved for\n   publication by the Internet Engineering\
    \ Steering Group (IESG).  Not\n   all documents approved by the IESG are a candidate\
    \ for any level of\n   Internet Standard; see Section 2 of RFC 5741.\n   Information\
    \ about the current status of this document, any errata,\n   and how to provide\
    \ feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc6662.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2012 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  4\n     1.1.  Terminology  . . . . . . . . . . . . . . . . . .\
    \ . . . . .  5\n   2.  [SM-Specific] Assumed Core Network Behavior for SM . .\
    \ . . . .  8\n   3.  Node Behaviors . . . . . . . . . . . . . . . . . . . . .\
    \ . . .  9\n     3.1.  Overview . . . . . . . . . . . . . . . . . . . . . . .\
    \ . .  9\n     3.2.  Behavior of the PCN-Egress-Node  . . . . . . . . . . . .\
    \ .  9\n       3.2.1.  Data Collection  . . . . . . . . . . . . . . . . . . .\
    \  9\n       3.2.2.  Reporting the PCN Data . . . . . . . . . . . . . . . . 10\n\
    \       3.2.3.  Optional Report Suppression  . . . . . . . . . . . . . 10\n  \
    \   3.3.  Behavior at the Decision Point . . . . . . . . . . . . . . 11\n    \
    \   3.3.1.  Flow Admission . . . . . . . . . . . . . . . . . . . . 11\n      \
    \ 3.3.2.  Flow Termination . . . . . . . . . . . . . . . . . . . 12\n       3.3.3.\
    \  Decision Point Action for Missing\n               PCN-Boundary-Node Reports\
    \  . . . . . . . . . . . . . . 14\n     3.4.  Behavior of the Ingress Node . .\
    \ . . . . . . . . . . . . . 15\n     3.5.  Summary of Timers and Associated Configurable\
    \ Durations  . 15\n       3.5.1.  Recommended Values for the Configurable Durations\
    \  . . 17\n   4.  Specification of Diffserv Per-Domain Behavior  . . . . . . .\
    \ . 17\n     4.1.  Applicability  . . . . . . . . . . . . . . . . . . . . . .\
    \ 17\n     4.2.  Technical Specification  . . . . . . . . . . . . . . . . . 18\n\
    \       4.2.1.  Classification and Traffic Conditioning  . . . . . . . 18\n  \
    \     4.2.2.  PHB Configuration  . . . . . . . . . . . . . . . . . . 18\n    \
    \ 4.3.  Attributes . . . . . . . . . . . . . . . . . . . . . . . . 18\n     4.4.\
    \  Parameters . . . . . . . . . . . . . . . . . . . . . . . . 18\n     4.5.  Assumptions\
    \  . . . . . . . . . . . . . . . . . . . . . . . 19\n     4.6.  Example Uses .\
    \ . . . . . . . . . . . . . . . . . . . . . . 19\n     4.7.  Environmental Concerns\
    \ . . . . . . . . . . . . . . . . . . 19\n     4.8.  Security Considerations \
    \ . . . . . . . . . . . . . . . . . 19\n   5.  Operational and Management Considerations\
    \  . . . . . . . . . . 19\n     5.1.  Deployment of the SM Edge Behavior . . .\
    \ . . . . . . . . . 19\n       5.1.1.  Selection of Deployment Options and Global\n\
    \               Parameters . . . . . . . . . . . . . . . . . . . . . . 19\n  \
    \     5.1.2.  Specification of Node- and Link-Specific Parameters  . 21\n    \
    \   5.1.3.  Installation of Parameters and Policies  . . . . . . . 22\n      \
    \ 5.1.4.  Activation and Verification of All Behaviors . . . . . 23\n     5.2.\
    \  Management Considerations  . . . . . . . . . . . . . . . . 24\n       5.2.1.\
    \  Event Logging in the PCN-Domain  . . . . . . . . . . . 24\n         5.2.1.1.\
    \  Logging Loss and Restoration of Contact  . . . . . 24\n         5.2.1.2.  Logging\
    \ Flow Termination Events  . . . . . . . . . 26\n       5.2.2.  Provision and\
    \ Use of Counters  . . . . . . . . . . . . 27\n   6.  Security Considerations\
    \  . . . . . . . . . . . . . . . . . . . 28\n   7.  Acknowledgements . . . . .\
    \ . . . . . . . . . . . . . . . . . . 28\n   8.  References . . . . . . . . .\
    \ . . . . . . . . . . . . . . . . . 29\n     8.1.  Normative References . . .\
    \ . . . . . . . . . . . . . . . . 29\n     8.2.  Informative References . . .\
    \ . . . . . . . . . . . . . . . 30\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The objective of Pre-Congestion Notification (PCN) is to\
    \ protect the\n   quality of service (QoS) of inelastic flows within a Diffserv\
    \ domain,\n   in a simple, scalable, and robust fashion.  Two mechanisms are used:\n\
    \   admission control to decide whether to admit or block a new flow\n   request\
    \ and, in abnormal circumstances, flow termination to decide\n   whether to terminate\
    \ some of the existing flows.  To achieve this,\n   the overall rate of PCN-traffic\
    \ is metered on every link in the PCN-\n   domain, and PCN-packets are appropriately\
    \ marked when certain\n   configured rates are exceeded.  These configured rates\
    \ are below the\n   rate of the link, thus providing notification to PCN-boundary-nodes\n\
    \   about incipient overloads before any congestion occurs (hence the\n   \"pre\"\
    \ part of \"pre-congestion notification\").  The level of marking\n   allows decisions\
    \ to be made about whether to admit or terminate PCN-\n   flows.  For more details,\
    \ see [RFC5559].\n   This document describes an experimental edge-node behavior\
    \ to\n   implement PCN in a network.  The experiment may be run in a network\n\
    \   in which a substantial proportion of the traffic carried is in the\n   form\
    \ of inelastic flows and where admission control of micro-flows is\n   applied\
    \ at the edge.  For the effects of PCN to be observable, the\n   committed bandwidth\
    \ (i.e., level of non-best-effort traffic) on at\n   least some links of the network\
    \ should be near or at link capacity.\n   The amount of effort required to prepare\
    \ the network for the\n   experiment (see Section 5.1) may constrain the size\
    \ of network to\n   which it is applied.  The purposes of the experiment are:\n\
    \   o  to validate the specification of the SM edge behavior;\n   o  to evaluate\
    \ the effectiveness of the SM edge behavior in\n      preserving quality of service\
    \ for admitted flows; and\n   o  to evaluate PCN's potential for reducing the\
    \ amount of capital and\n      operational costs in comparison to alternative\
    \ methods of assuring\n      quality of service.\n   For the first two objectives,\
    \ the experiment should run long enough\n   for the network to experience sharp\
    \ peaks of traffic in at least some\n   directions.  It would also be desirable\
    \ to observe PCN performance in\n   the face of failures in the network.  A period\
    \ on the order of a\n   month or two in busy season may be enough.  The third\
    \ objective is\n   more difficult and could require observation over a period\
    \ long\n   enough for traffic demand to grow to the point where additional\n \
    \  capacity must be provisioned at some points in the network.\n   Section 3 of\
    \ this document specifies a detailed set of algorithms and\n   procedures used\
    \ to implement the PCN mechanisms for the SM mode of\n   operation.  Since the\
    \ algorithms depend on specific metering and\n   marking behavior at the interior\
    \ nodes, it is also necessary to\n   specify the assumptions made about PCN-interior-node\
    \ behavior\n   (Section 2).  Finally, because PCN uses Diffserv codepoint (DSCP)\n\
    \   values to carry its markings, a specification of PCN-boundary-node\n   behavior\
    \ must include the per-domain behavior (PDB) template\n   specified in [RFC3086],\
    \ filled out with the appropriate content\n   (Section 4).\n   Note that the terms\
    \ \"block\" or \"terminate\" actually translate to one\n   or more of several\
    \ possible courses of action, as discussed in\n   Section 3.6 of [RFC5559].  The\
    \ choice of which action to take for\n   blocked or terminated flows is a matter\
    \ of local policy.\n   A companion document [RFC6661] specifies the Controlled\
    \ Load (CL)\n   PCN-boundary-node behavior.  This document and [RFC6661] have\
    \ a great\n   deal of text in common.  To simplify the task of the reader, the\
    \ text\n   in the present document that is specific to the SM PCN-boundary-node\n\
    \   behavior is preceded by the phrase \"[SM-specific]\".  A similar\n   distinction\
    \ for CL-specific text is made in [RFC6661].\n"
- title: 1.1.  Terminology
  contents:
  - "1.1.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"\
    SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\"\
    , and \"OPTIONAL\" in this\n   document are to be interpreted as described in\
    \ [RFC2119].\n   This document uses the following terms defined in Section 2 of\n\
    \   [RFC5559]:\n   o  PCN-domain\n   o  PCN-ingress-node\n   o  PCN-egress-node\n\
    \   o  PCN-interior-node\n   o  PCN-boundary-node\n   o  PCN-flow\n   o  ingress-egress-aggregate\n\
    \   o  PCN-excess-rate\n   o  PCN-admissible-rate\n   o  PCN-supportable-rate\n\
    \   o  PCN-marked\n   o  excess-traffic-marked\n   It also uses the terms PCN-traffic\
    \ and PCN-packet, for which the\n   definition is repeated from [RFC5559] because\
    \ of their importance to\n   the understanding of the text that follows:\n   PCN-traffic,\
    \ PCN-packets, PCN-BA\n      A PCN-domain carries traffic of different Diffserv\
    \ behavior\n      aggregates (BAs) [RFC2474].  The PCN-BA uses the PCN mechanisms\
    \ to\n      carry PCN-traffic, and the corresponding packets are PCN-packets.\n\
    \      The same network will carry traffic of other Diffserv BAs.  The\n     \
    \ PCN-BA is distinguished by a combination of the Diffserv codepoint\n      and\
    \ the ECN field.\n   This document uses the following term from [RFC5670]:\n \
    \  o  excess-traffic-meter.\n   To complete the list of borrowed terms, this document\
    \ reuses the\n   following terms and abbreviations defined in Section 2 of [RFC6660]:\n\
    \   o  not-PCN codepoint;\n   o  not-marked (NM) codepoint;\n   o  excess-traffic-marked\
    \ (ETM) codepoint.\n   This document defines the following additional terms:\n\
    \   Decision Point\n      The node that makes the decision about which flows to\
    \ admit and to\n      terminate.  In a given network deployment, this can be the\
    \ PCN-\n      ingress-node or a centralized control node.  In either case, the\n\
    \      PCN-ingress-node is the point where the decisions are enforced.\n   NM-rate\n\
    \      The rate of not-marked PCN-traffic received at a PCN-egress-node\n    \
    \  for a given ingress-egress-aggregate in octets per second.  For\n      further\
    \ details, see Section 3.2.1.\n   ETM-rate\n      The rate of excess-traffic-marked\
    \ PCN-traffic received at a PCN-\n      egress-node for a given ingress-egress-aggregate\
    \ in octets per\n      second.  For further details, see Section 3.2.1.\n   PCN-sent-rate\n\
    \      The rate of PCN-traffic received at a PCN-ingress-node and\n      destined\
    \ for a given ingress-egress-aggregate in octets per\n      second.  For further\
    \ details, see Section 3.4.\n   Congestion level estimate (CLE)\n      The ratio\
    \ of PCN-marked to total PCN-traffic (measured in octets)\n      received for\
    \ a given ingress-egress-aggregate during a given\n      measurement period. \
    \ The CLE is used to derive the PCN-admission-\n      state (Section 3.3.1) and\
    \ is also used by the report suppression\n      procedure (Section 3.2.3) if report\
    \ suppression is activated.\n   PCN-admission-state\n      The state (\"admit\"\
    \ or \"block\") derived by the Decision Point for a\n      given ingress-egress-aggregate\
    \ based on statistics about PCN-\n      packet marking.  The Decision Point decides\
    \ to admit or block new\n      flows offered to the aggregate based on the current\
    \ value of the\n      PCN-admission-state.  For further details, see Section 3.3.1.\n\
    \   Sustainable aggregate rate (SAR)\n      The estimated maximum rate of PCN-traffic\
    \ that can be carried in a\n      given ingress-egress-aggregate at a given moment\
    \ without risking\n      degradation of quality of service for the admitted flows.\
    \  The\n      intention is that if the PCN-sent-rate of every ingress-egress-\n\
    \      aggregate passing through a given link is limited to its\n      sustainable\
    \ aggregate rate, the total rate of PCN-traffic flowing\n      through the link\
    \ will be limited to the PCN-supportable-rate for\n      that link.  An estimate\
    \ of the sustainable aggregate rate for a\n      given ingress-egress-aggregate\
    \ is derived as part of the flow\n      termination procedure and is used to determine\
    \ how much PCN-\n      traffic needs to be terminated.  For further details, see\n\
    \      Section 3.3.2.\n   CLE-reporting-threshold\n      A configurable value\
    \ against which the CLE is compared as part of\n      the report suppression procedure.\
    \  For further details, see\n      Section 3.2.3.\n   CLE-limit\n      A configurable\
    \ value against which the CLE is compared to\n      determine the PCN-admission-state\
    \ for a given ingress-egress-\n      aggregate.  For further details, see Section\
    \ 3.3.1.\n   T_meas\n      A configurable time interval that defines the measurement\
    \ period\n      over which the PCN-egress-node collects statistics relating to\n\
    \      PCN-traffic marking.  At the end of the interval, the PCN-egress-\n   \
    \   node calculates the values NM-rate and ETM-rate as defined above\n      and\
    \ sends a report to the Decision Point, subject to the operation\n      of the\
    \ report suppression feature.  For further details, see\n      Section 3.2.\n\
    \   T_maxsuppress\n      A configurable time interval after which the PCN-egress-node\
    \ MUST\n      send a report to the Decision Point for a given ingress-egress-\n\
    \      aggregate regardless of the most recent values of the CLE.  This\n    \
    \  mechanism provides the Decision Point with a periodic confirmation\n      of\
    \ liveness when report suppression is activated.  For further\n      details,\
    \ see Section 3.2.3.\n   T_fail\n      An interval after which the Decision Point\
    \ concludes that\n      communication from a given PCN-egress-node has failed\
    \ if it has\n      received no reports from the PCN-egress-node during that interval.\n\
    \      For further details, see Section 3.3.3.\n   T_crit\n      A configurable\
    \ interval used in the calculation of T_fail.  For\n      further details, see\
    \ Section 3.3.3.\n"
- title: 2.  [SM-Specific] Assumed Core Network Behavior for SM
  contents:
  - "2.  [SM-Specific] Assumed Core Network Behavior for SM\n   This section describes\
    \ the assumed behavior for PCN-interior-nodes in\n   the PCN-domain.  The SM mode\
    \ of operation assumes that:\n   o  PCN-interior-nodes perform excess-traffic-marking\
    \ of PCN-packets\n      according to the rules specified in [RFC5670].\n   o \
    \ For IP transport, excess-traffic-marking of PCN-packets uses the\n      excess-traffic-marked\
    \ (ETM) codepoint defined in [RFC6660]; for\n      MPLS transport, an equivalent\
    \ marking is used as discussed in\n      Appendix C of [RFC6660].\n   o  On each\
    \ link, the reference rate for the excess-traffic-meter is\n      configured to\
    \ be equal to the PCN-admissible-rate for the link.\n   o  The set of valid codepoint\
    \ transitions is as shown in Sections\n      5.2.1 and 5.2.3.1 of [RFC6660].\n"
- title: 3.  Node Behaviors
  contents:
  - '3.  Node Behaviors

    '
- title: 3.1.  Overview
  contents:
  - "3.1.  Overview\n   This section describes the behavior of the PCN-ingress-node,\
    \ PCN-\n   egress-node, and the Decision Point (which MAY be collocated with the\n\
    \   PCN-ingress-node).\n   The PCN-egress-node collects the rates of not-marked\
    \ and excess-\n   traffic-marked PCN-traffic for each ingress-egress-aggregate\
    \ and\n   reports them to the Decision Point.  For a detailed description, see\n\
    \   Section 3.2.\n   The PCN-ingress-node enforces flow admission and termination\n\
    \   decisions.  It also reports the rate of PCN-traffic sent to a given\n   ingress-egress-aggregate\
    \ when requested by the Decision Point.  For\n   details, see Section 3.4.\n \
    \  Finally, the Decision Point makes flow admission decisions and\n   selects\
    \ flows to terminate based on the information provided by the\n   PCN-ingress-node\
    \ and PCN-egress-node for a given ingress-egress-\n   aggregate.  For details,\
    \ see Section 3.3.\n   Specification of a signaling protocol to report rates to\
    \ the Decision\n   Point is out of scope of this document.  If the PCN-ingress-node\
    \ is\n   chosen as the Decision Point, [RSVP-PCN] specifies an appropriate\n \
    \  signaling protocol.\n   Section 5.1.2 describes how to derive the filters by\
    \ means of which\n   PCN-ingress-nodes and PCN-egress-nodes are able to classify\
    \ incoming\n   packets into ingress-egress-aggregates.\n"
- title: 3.2.  Behavior of the PCN-Egress-Node
  contents:
  - '3.2.  Behavior of the PCN-Egress-Node

    '
- title: 3.2.1.  Data Collection
  contents:
  - "3.2.1.  Data Collection\n   The PCN-egress-node needs to meter the PCN-traffic\
    \ it receives in\n   order to calculate the following rates for each ingress-egress-\n\
    \   aggregate passing through it.  These rates SHOULD be calculated at\n   the\
    \ end of each measurement period based on the PCN-traffic observed\n   during\
    \ that measurement period.  The duration of a measurement period\n   is equal\
    \ to the configurable value T_meas.  For further information,\n   see Section\
    \ 3.5.\n   o  NM-rate: octets per second of PCN-traffic in PCN-packets that are\n\
    \      not-marked (i.e., marked with the NM codepoint);\n   o  ETM-rate: octets\
    \ per second of PCN-traffic in PCN-packets that are\n      excess-traffic-marked\
    \ (i.e., marked with the ETM codepoint).\n      Note: metering the PCN-traffic\
    \ continuously and using equal-length\n      measurement intervals minimizes the\
    \ statistical variance\n      introduced by the measurement process itself.  On\
    \ the other hand,\n      the operation of PCN is not affected if the starting\
    \ and ending\n      times of the measurement intervals for different ingress-egress-\n\
    \      aggregates are different.\n"
- title: 3.2.2.  Reporting the PCN Data
  contents:
  - "3.2.2.  Reporting the PCN Data\n   Unless the report suppression option described\
    \ in Section 3.2.3 is\n   activated, the PCN-egress-node MUST report the latest\
    \ values of NM-\n   rate and ETM-rate to the Decision Point each time that it\
    \ calculates\n   them.\n"
- title: 3.2.3.  Optional Report Suppression
  contents:
  - "3.2.3.  Optional Report Suppression\n   Report suppression MUST be provided as\
    \ a configurable option, along\n   with two configurable parameters, the CLE-reporting-threshold\
    \ and the\n   maximum report suppression interval T_maxsuppress.  The default\
    \ value\n   of the CLE-reporting-threshold is zero.  The CLE-reporting-threshold\n\
    \   MUST NOT exceed the CLE-limit configured at the Decision Point.  For\n   further\
    \ information on T_maxsuppress, see Section 3.5.\n   If the report suppression\
    \ option is enabled, the PCN-egress-node MUST\n   apply the following procedure\
    \ to decide whether to send a report to\n   the Decision Point, rather than sending\
    \ a report automatically at the\n   end of each measurement interval.\n   1. \
    \ As well as the quantities NM-rate and ETM-rate, the PCN-egress-\n       node\
    \ MUST calculate the congestion level estimate (CLE) for each\n       measurement\
    \ interval.  The CLE is computed as:\n          [SM-specific]\n          CLE =\
    \ ETM-rate / (NM-rate + ETM-rate)\n       if any PCN-traffic was observed, or\
    \ CLE = 0 if all the rates are\n       zero.\n   2.  If the CLE calculated for\
    \ the latest measurement interval is\n       greater than the CLE-reporting-threshold\
    \ and/or the CLE\n       calculated for the immediately previous interval was\
    \ greater than\n       the CLE-reporting-threshold, then the PCN-egress-node MUST\
    \ send a\n       report to the Decision Point.  The contents of the report are\n\
    \       described below.\n          The reason for taking into account the CLE\
    \ of the previous\n          interval is to ensure that the Decision Point gets\
    \ immediate\n          feedback if the CLE has dropped below the CLE-reporting-\n\
    \          threshold.  This is essential if the Decision Point is running\n  \
    \        the flow termination procedure and observing whether (further)\n    \
    \      flow termination is needed.  See Section 3.3.2.\n   3.  If an interval\
    \ T_maxsuppress has elapsed since the last report\n       was sent to the Decision\
    \ Point, then the PCN-egress-node MUST\n       send a report to the Decision Point\
    \ regardless of the CLE value.\n   4.  If neither of the preceding conditions\
    \ holds, the PCN-egress-node\n       MUST NOT send a report for the latest measurement\
    \ interval.\n   Each report sent to the Decision Point when report suppression\
    \ has\n   been activated MUST contain the values of NM-rate, ETM-rate, and CLE\n\
    \   that were calculated for the most recent measurement interval.\n   The above\
    \ procedure ensures that at least one report is sent per\n   interval (T_maxsuppress\
    \ + T_meas).  This demonstrates to the Decision\n   Point that both the PCN-egress-node\
    \ and the communication path\n   between that node and the Decision Point are\
    \ in operation.\n"
- title: 3.3.  Behavior at the Decision Point
  contents:
  - "3.3.  Behavior at the Decision Point\n   Operators can choose to use PCN procedures\
    \ just for flow admission,\n   or just for flow termination, or for both.  Decision\
    \ Points MUST\n   implement both mechanisms, but configurable options MUST be\
    \ provided\n   to activate or deactivate PCN-based flow admission and flow\n \
    \  termination independently of each other at a given Decision Point.\n   If PCN-based\
    \ flow termination is enabled but PCN-based flow admission\n   is not, flow termination\
    \ operates as specified in this document.\n      Logically, some other system\
    \ of flow admission control is in\n      operation, but the description of such\
    \ a system is out of scope of\n      this document and depends on local arrangements.\n"
- title: 3.3.1.  Flow Admission
  contents:
  - "3.3.1.  Flow Admission\n   The Decision Point determines the PCN-admission-state\
    \ for a given\n   ingress-egress-aggregate each time it receives a report from\
    \ the\n   egress node.  It makes this determination on the basis of the\n   congestion\
    \ level estimate (CLE).  If the CLE is provided in the\n   egress-node report,\
    \ the Decision Point SHOULD use the reported value.\n   If the CLE was not provided\
    \ in the report, the Decision Point MUST\n   calculate it based on the other values\
    \ provided in the report, using\n   the formula:\n      [SM-specific]\n      CLE\
    \ = ETM-rate / (NM-rate + ETM-rate)\n   if any PCN-traffic was observed, or CLE\
    \ = 0 if all the rates are\n   zero.\n   The Decision Point MUST compare the reported\
    \ or calculated CLE to a\n   configurable value, the CLE-limit.  If the CLE is\
    \ less than the CLE-\n   limit, the PCN-admission-state for that aggregate MUST\
    \ be set to\n   \"admit\"; otherwise, it MUST be set to \"block\".\n   If the\
    \ PCN-admission-state for a given ingress-egress-aggregate is\n   \"admit\", the\
    \ Decision Point SHOULD allow new flows to be admitted to\n   that aggregate.\
    \  If the PCN-admission-state for a given ingress-\n   egress-aggregate is \"\
    block\", the Decision Point SHOULD NOT allow new\n   flows to be admitted to that\
    \ aggregate.  These actions MAY be\n   modified by policy in specific cases, but\
    \ such policy intervention\n   risks defeating the purpose of using PCN.\n   A\
    \ performance study of this admission control method is presented in\n   [MeLe12].\n"
- title: 3.3.2.  Flow Termination
  contents:
  - "3.3.2.  Flow Termination\n   [SM-specific] When the PCN-admission-state computed\
    \ on the basis of\n   the CLE is \"block\" for the given ingress-egress-aggregate,\
    \ the\n   Decision Point MUST request the PCN-ingress-node to provide an\n   estimate\
    \ of the rate (PCN-sent-rate) at which the PCN-ingress-node is\n   receiving PCN-traffic\
    \ that is destined for the given ingress-egress-\n   aggregate.\n      If the\
    \ Decision Point is collocated with the PCN-ingress-node, the\n      request and\
    \ response are internal operations.\n   The Decision Point MUST then wait, for\
    \ both the requested rate from\n   the PCN-ingress-node and the next report from\
    \ the PCN-egress-node for\n   the ingress-egress-aggregate concerned.  If this\
    \ next egress-node\n   report also includes a non-zero value for the ETM-rate,\
    \ the Decision\n   Point MUST determine the amount of PCN-traffic to terminate\
    \ using the\n   following steps:\n   1.  [SM-specific] The sustainable aggregate\
    \ rate (SAR) for the given\n       ingress-egress-aggregate is estimated using\
    \ the formula:\n          SAR = U * NM-Rate\n       for the latest reported interval,\
    \ where U is a configurable\n       factor greater than one and is the same for\
    \ all ingress-egress-\n       aggregates.  In effect, the value of the PCN-supportable-rate\
    \ for\n       each link is approximated by the expression\n          U * PCN-admissible-rate\n\
    \       rather than being calculated explicitly.\n   2.  The amount of traffic\
    \ to be terminated is the difference:\n          PCN-sent-rate - SAR,\n      \
    \ where PCN-sent-rate is the value provided by the PCN-ingress-\n       node.\n\
    \   See Section 3.3.3 for a discussion of appropriate actions if the\n   Decision\
    \ Point fails to receive a timely response to its request for\n   the PCN-sent-rate.\n\
    \   If the difference calculated in the second step is positive (traffic\n   rate\
    \ to be terminated), the Decision Point SHOULD select PCN-flows\n   for termination.\
    \  To that end, the Decision Point MAY use upper rate\n   limits for individual\
    \ PCN-flows (known, e.g., from resource signaling\n   used to establish the PCN-flows)\
    \ and select a set of PCN-flows whose\n   sum of upper rate limits is up to the\
    \ traffic rate to be terminated.\n   Then, these PCN-flows are terminated.  The\
    \ use of upper limits on\n   PCN-flow rates avoids over-termination.\n   Termination\
    \ may be continuously needed after consecutive measurement\n   intervals for various\
    \ reasons, e.g., if the used upper rate limits\n   overestimate the actual flow\
    \ rates.  For such cases it is RECOMMENDED\n   that enough time elapses between\
    \ successive termination events to\n   allow the effects of previous termination\
    \ events to be reflected in\n   the measurements upon which the termination decisions\
    \ are based;\n   otherwise, over-termination may occur.  See [Satoh10] and Sections\n\
    \   4.2 and 4.3 of [MeLe10].\n   In general, the selection of flows for termination\
    \ MAY be guided by\n   policy.\n   The Decision Point SHOULD log each round of\
    \ termination as described\n   in Section 5.2.1.2.\n"
- title: 3.3.3.  Decision Point Action for Missing PCN-Boundary-Node Reports
  contents:
  - "3.3.3.  Decision Point Action for Missing PCN-Boundary-Node Reports\n   The Decision\
    \ Point SHOULD start a timer t_recvFail when it receives a\n   report from the\
    \ PCN-egress-node. t_recvFail is reset each time a new\n   report is received\
    \ from the PCN-egress-node. t_recvFail expires if it\n   reaches the value T_fail.\
    \  T_fail is calculated according to the\n   following logic:\n   a.  T_fail =\
    \ the configurable duration T_crit, if report suppression\n       is not deployed;\n\
    \   b.  T_fail = T_crit also if report suppression is deployed and the\n     \
    \  last report received from the PCN-egress-node contained a CLE\n       value\
    \ greater than CLE-reporting-threshold (Section 3.2.3);\n   c.  T_fail = 3 * T_maxsuppress\
    \ (Section 3.2.3) if report suppression\n       is deployed and the last report\
    \ received from the PCN-egress-node\n       contained a CLE value less than or\
    \ equal to CLE-reporting-\n       threshold.\n   If timer t_recvFail expires for\
    \ a given PCN-egress-node, the Decision\n   Point SHOULD notify management.  A\
    \ log format is defined for that\n   purpose in Section 5.2.1.1.  Other actions\
    \ depend on local policy,\n   but MAY include blocking of new flows destined for\
    \ the PCN-egress-\n   node concerned until another report is received from it.\
    \  Termination\n   of already admitted flows is also possible, but could be triggered\
    \ by\n   \"Destination unreachable\" messages received at the PCN-ingress-node.\n\
    \   If a centralized Decision Point sends a request for the estimated\n   value\
    \ of PCN-sent-rate to a given PCN-ingress-node and fails to\n   receive a response\
    \ in a reasonable amount of time, the Decision Point\n   SHOULD repeat the request\
    \ once.  [SM-specific] If the second request\n   to the PCN-ingress-node also\
    \ fails, the Decision Point SHOULD notify\n   management.  The log format defined\
    \ in Section 5.2.1.1 is also\n   suitable for this case.\n      The response timer\
    \ t_sndFail with upper bound T_crit is specified\n      in Section 3.5.  The use\
    \ of T_crit is an approximation.  A more\n      precise limit would be on the\
    \ order of two round-trip times, plus\n      an allowance for processing at each\
    \ end, plus an allowance for\n      variance in these values.\n   See Section\
    \ 3.5 for suggested values of the configurable durations\n   T_crit and T_maxsuppress.\n"
- title: 3.4.  Behavior of the Ingress Node
  contents:
  - "3.4.  Behavior of the Ingress Node\n   The PCN-ingress-node MUST provide the\
    \ estimated current rate of PCN-\n   traffic received at that node and destined\
    \ for a given ingress-\n   egress-aggregate in octets per second (the PCN-sent-rate)\
    \ when the\n   Decision Point requests it.  The way this rate estimate is derived\
    \ is\n   a matter of implementation.\n      For example, the rate that the PCN-ingress-node\
    \ supplies can be\n      based on a quick sample taken at the time the information\
    \ is\n      required.\n"
- title: 3.5.  Summary of Timers and Associated Configurable Durations
  contents:
  - "3.5.  Summary of Timers and Associated Configurable Durations\n   Here is a summary\
    \ of the timers used in the procedures just\n   described:\n   t_meas\n      \
    \   Where used: PCN-egress-node.\n         Used in procedure: data collection\
    \ (Section 3.2.1).\n         Incidence: one per ingress-egress-aggregate.\n  \
    \       Reset: immediately on expiry.\n         Expiry: when it reaches the configurable\
    \ duration T_meas.\n         Action on expiry: calculate NM-rate and ETM-rate\
    \ and proceed to\n         the applicable reporting procedure (Section 3.2.2 or\n\
    \         Section 3.2.3).\n   t_maxsuppress\n         Where used: PCN-egress-node.\n\
    \         Used in procedure: report suppression (Section 3.2.3).\n         Incidence:\
    \ one per ingress-egress-aggregate.\n         Reset: when the next report is sent,\
    \ either after expiry or\n         because the CLE has exceeded the reporting\
    \ threshold.\n         Expiry: when it reaches the configurable duration\n   \
    \      T_maxsuppress.\n         Action on expiry: send a report to the Decision\
    \ Point the next\n         time the reporting procedure (Section 3.2.3) is invoked,\n\
    \         regardless of the value of CLE.\n   t_recvFail\n         Where used:\
    \ Decision Point.\n         Used in procedure: failure detection (Section 3.3.3).\n\
    \         Incidence: one per ingress-egress-aggregate.\n         Reset: when a\
    \ report is received for the ingress-egress-\n         aggregate.\n         Expiry:\
    \ when it reaches the calculated duration T_fail.  As\n         described in Section\
    \ 3.3.3, T_fail is equal either to the\n         configured duration T_crit or\
    \ to the calculated value 3 *\n         T_maxsuppress, where T_maxsuppress is\
    \ a configured duration.\n         Action on expiry: notify management, and possibly\
    \ other\n         actions.\n   t_sndFail\n         Where used: centralized Decision\
    \ Point.\n         Used in procedure: failure detection (Section 3.3.3).\n   \
    \      Incidence: only as required, one per outstanding request to a\n       \
    \  PCN-ingress-node.\n         Started: when a request for the value of PCN-sent-traffic\
    \ for a\n         given ingress-egress-aggregate is sent to the PCN-ingress-node.\n\
    \         Terminated without action: when a response is received before\n    \
    \     expiry.\n         Expiry: when it reaches the configured duration T_crit.\n\
    \         Action on expiry: as described in Section 3.3.3.\n"
- title: 3.5.1.  Recommended Values for the Configurable Durations
  contents:
  - "3.5.1.  Recommended Values for the Configurable Durations\n   The timers just\
    \ described depend on three configurable durations,\n   T_meas, T_maxsuppress,\
    \ and T_crit.  The recommendations given below\n   for the values of these durations\
    \ are all related to the intended PCN\n   reaction time of 1 to 3 seconds.  However,\
    \ they are based on\n   judgement rather than operational experience or mathematical\n\
    \   derivation.\n   The value of T_meas is RECOMMENDED to be on the order of 100\
    \ to 500\n   ms to provide a reasonable trade-off between demands on network\n\
    \   resources (PCN-egress-node and Decision Point processing, network\n   bandwidth)\
    \ and the time taken to react to impending congestion.\n   The value of T_maxsuppress\
    \ is RECOMMENDED to be on the order of 3 to\n   6 seconds, for similar reasons\
    \ to those for the choice of T_meas.\n   The value of T_crit SHOULD NOT be less\
    \ than 3 * T_meas.  Otherwise,\n   it could cause too many management notifications\
    \ due to transient\n   conditions in the PCN-egress-node or along the signaling\
    \ path.  A\n   reasonable upper bound on T_crit is on the order of 3 seconds.\n"
- title: 4.  Specification of Diffserv Per-Domain Behavior
  contents:
  - "4.  Specification of Diffserv Per-Domain Behavior\n   This section provides the\
    \ specification required by [RFC3086] for a\n   per-domain behavior.\n"
- title: 4.1.  Applicability
  contents:
  - "4.1.  Applicability\n   This section quotes [RFC5559].\n   The PCN SM boundary-node\
    \ behavior specified in this document is\n   applicable to inelastic traffic (particularly\
    \ video and voice) where\n   quality of service for admitted flows is protected\
    \ primarily by\n   admission control at the ingress to the domain.\n   In exceptional\
    \ circumstances (e.g., due to rerouting as a result of\n   network failures) already\
    \ admitted flows may be terminated to protect\n   the quality of service of the\
    \ remaining flows.  [SM-specific] The\n   performance results in, e.g., [MeLe10],\
    \ indicate that the SM boundary\n   node behavior is more likely to terminate\
    \ too many flows under such\n   circumstances than the CL boundary-node behavior\
    \ described in\n   [RFC6661].\n"
- title: 4.2.  Technical Specification
  contents:
  - '4.2.  Technical Specification

    '
- title: 4.2.1.  Classification and Traffic Conditioning
  contents:
  - "4.2.1.  Classification and Traffic Conditioning\n   Packet classification and\
    \ treatment at the PCN-ingress-node is\n   described in Section 5.1 of [RFC6660].\n\
    \   PCN packets are further classified as belonging or not belonging to\n   an\
    \ admitted flow.  PCN packets not belonging to an admitted flow are\n   \"blocked\"\
    .  (See Section 1 for an understanding of how this term is\n   interpreted.) \
    \ Packets belonging to an admitted flow are policed to\n   ensure that they adhere\
    \ to the rate or flowspec that was negotiated\n   during flow admission.\n"
- title: 4.2.2.  PHB Configuration
  contents:
  - "4.2.2.  PHB Configuration\n   The PCN SM boundary-node behavior is a metering\
    \ and marking behavior\n   rather than a scheduling behavior.  As a result, while\
    \ the encoding\n   uses a single DSCP value, that value can vary from one deployment\
    \ to\n   another.  The PCN working group suggests using admission control for\n\
    \   the following service classes (defined in [RFC4594]):\n   o  Telephony (EF)\n\
    \   o  Real-time interactive (CS4)\n   o  Broadcast Video (CS3)\n   o  Multimedia\
    \ Conferencing (AF4)\n   For a fuller discussion, see Appendix A of [RFC6660].\n"
- title: 4.3.  Attributes
  contents:
  - "4.3.  Attributes\n   The purpose of this per-domain behavior is to achieve low\
    \ loss and\n   jitter for the target class of traffic.  The design requirement\
    \ for\n   PCN was that recovery from overloads through the use of flow\n   termination\
    \ should happen within 1-3 seconds.  PCN probably performs\n   better than that.\n"
- title: 4.4.  Parameters
  contents:
  - "4.4.  Parameters\n   The set of parameters that needs to be configured at each\
    \ PCN-node\n   and at the Decision Point is described in Section 5.1.\n"
- title: 4.5.  Assumptions
  contents:
  - "4.5.  Assumptions\n   It is assumed that a specific portion of link capacity\
    \ has been\n   reserved for PCN-traffic.\n"
- title: 4.6.  Example Uses
  contents:
  - "4.6.  Example Uses\n   The PCN SM behavior may be used to carry real-time traffic,\n\
    \   particularly voice and video.\n"
- title: 4.7.  Environmental Concerns
  contents:
  - "4.7.  Environmental Concerns\n   The PCN SM per-domain behavior could theoretically\
    \ interfere with the\n   use of end-to-end ECN due to reuse of ECN bits for PCN\
    \ marking.\n   Section 5.1 of [RFC6660] describes the actions that can be taken\
    \ to\n   protect ECN signaling.  Appendix B of that document provides further\n\
    \   discussion of how ECN and PCN can coexist.\n"
- title: 4.8.  Security Considerations
  contents:
  - "4.8.  Security Considerations\n   Please see the security considerations in [RFC5559]\
    \ as well as those\n   in [RFC2474] and [RFC2475].\n"
- title: 5.  Operational and Management Considerations
  contents:
  - '5.  Operational and Management Considerations

    '
- title: 5.1.  Deployment of the SM Edge Behavior
  contents:
  - "5.1.  Deployment of the SM Edge Behavior\n   Deployment of the PCN Single Marking\
    \ edge behavior requires the\n   following steps:\n   o  selection of deployment\
    \ options and global parameter values;\n   o  derivation of per-node and per-link\
    \ information;\n   o  installation, but not activation, of parameters and policies\
    \ at\n      all of the nodes in the PCN-domain;\n   o  activation and verification\
    \ of all behaviors.\n"
- title: 5.1.1.  Selection of Deployment Options and Global Parameters
  contents:
  - "5.1.1.  Selection of Deployment Options and Global Parameters\n   The first set\
    \ of decisions affects the operation of the network as a\n   whole.  To begin\
    \ with, the operator needs to make basic design\n   decisions such as whether\
    \ the Decision Point is centralized or\n   collocated with the PCN-ingress-nodes,\
    \ and whether per-flow and\n   aggregate resource signaling as described in [RSVP-PCN]\
    \ is deployed\n   in the network.  After that, the operator needs to decide:\n\
    \   o  whether PCN packets will be forwarded unencapsulated or in tunnels\n  \
    \    between the PCN-ingress-node and the PCN-egress-node.\n      Encapsulation\
    \ preserves incoming ECN settings and simplifies the\n      PCN-egress-node's\
    \ job when it comes to relating incoming packets\n      to specific ingress-egress-aggregates,\
    \ but lowers the path MTU and\n      imposes the extra labor of encapsulation/decapsulation\
    \ on the PCN-\n      edge-nodes.\n   o  which service classes will be subject\
    \ to PCN control and what DSCP\n      will be used for each.  (See [RFC6660] Appendix\
    \ A for advice on\n      this topic.)\n   o  the markings to be used at all nodes\
    \ in the PCN-domain to indicate\n      not-marked (NM) and excess-traffic-marked\
    \ (ETM) PCN packets;\n   o  the marking rules for re-marking PCN-traffic leaving\
    \ the PCN-\n      domain;\n   o  whether PCN-based flow admission is enabled;\n\
    \   o  whether PCN-based flow termination is enabled.\n   The following parameters\
    \ affect the operation of PCN itself.  The\n   operator needs to choose:\n   o\
    \  the value of CLE-limit if PCN-based flow admission is enabled.\n      [SM-specific]\
    \ It is RECOMMENDED that the CLE-limit for SM be set\n      fairly low, on the\
    \ order of 5%.\n   o  the value of the collection interval T_meas.  For a recommended\n\
    \      range of values, see Section 3.5.1 above.\n   o  whether report suppression\
    \ is to be enabled at the PCN-egress-\n      nodes and if so, the values of CLE-reporting-threshold\
    \ and\n      T_maxsuppress.  It is reasonable to leave CLE-reporting-threshold\n\
    \      at its default value (zero, as specified in Section 3.2.3).  For a\n  \
    \    recommended range of values of T_maxsuppress, see Section 3.5.1\n      above.\n\
    \   o  the value of the duration T_crit, which the Decision Point uses in\n  \
    \    deciding whether communications with a given PCN-edge-node have\n      failed.\
    \  For a recommended range of values of T_crit, see\n      Section 3.5.1 above.\n\
    \   o  [SM-specific] The factor U that is used in the flow termination\n     \
    \ procedure (Section 3.3.2).  An operational definition for U is\n      given\
    \ in that section, but it may be thought of as a contingency\n      factor providing\
    \ a buffer to handle flow peaks above the aggregate\n      levels expected when\
    \ flows are admitted.  A reasonable value for U\n      is between 1.2 and 2. \
    \ Larger values of U tend to cause more over-\n      termination of traffic during\
    \ peaks, but raise the average link\n      utilization level.\n"
- title: 5.1.2.  Specification of Node- and Link-Specific Parameters
  contents:
  - "5.1.2.  Specification of Node- and Link-Specific Parameters\n   Filters are required\
    \ at both the PCN-ingress-node and the PCN-egress-\n   node to classify incoming\
    \ PCN packets by ingress-egress-aggregate.\n   Because of the potential use of\
    \ multipath routing in domains upstream\n   of the PCN-domain, it is impossible\
    \ to do such classification\n   reliably at the PCN-egress-node based on the packet\
    \ header contents\n   as originally received at the PCN-ingress-node.  (Packets\
    \ with the\n   same header contents could enter the PCN-domain at multiple PCN-\n\
    \   ingress-nodes.)  As a result, the only way to construct such filters\n   reliably\
    \ is to tunnel the packets from the PCN-ingress-node to the\n   PCN-egress-node.\n\
    \   The PCN-ingress-node needs filters in order to place PCN packets into\n  \
    \ the right tunnel in the first instance, and also to satisfy requests\n   from\
    \ the Decision Point for admission rates into specific ingress-\n   egress-aggregates.\
    \  These filters select the PCN-egress-node, but not\n   necessarily a specific\
    \ path through the network to that node.  As a\n   result, they are likely to\
    \ be stable even in the face of failures in\n   the network, except when the PCN-egress-node\
    \ itself becomes\n   unreachable.  If all PCN packets will be tunneled, the PCN-ingress-\n\
    \   node also needs to know the address of the peer PCN-egress-node\n   associated\
    \ with each filter.\n   Operators may wish to give some thought to the provisioning\
    \ of\n   alternate egress points for some or all ingress-egress-aggregates in\n\
    \   case of failure of the PCN-egress-node.  This could require the\n   setting\
    \ up of standby tunnels to these alternate egress points.\n   Each PCN-egress-node\
    \ needs filters to classify incoming PCN packets\n   by ingress-egress-aggregate,\
    \ in order to gather measurements on a\n   per-aggregate basis.  If tunneling\
    \ is used, these filters are\n   constructed on the basis of the identifier of\
    \ the tunnel from which\n   the incoming packet has emerged (e.g., the source\
    \ address in the\n   outer header if IP encapsulation is used).  The PCN-egress-node\
    \ also\n   needs to know the address of the Decision Point to which it sends\n\
    \   reports for each ingress-egress-aggregate.\n   A centralized Decision Point\
    \ needs to have the address of the PCN-\n   ingress-node corresponding to each\
    \ ingress-egress-aggregate.\n   Security considerations require that information\
    \ also be prepared for\n   a centralized Decision Point and each PCN-edge-node\
    \ to allow them to\n   authenticate each other.\n   Turning to link-specific parameters,\
    \ the operator needs to derive a\n   value for the PCN-admissible-rate on each\
    \ link in the network.  The\n   first two paragraphs of Section 5.2.2 of [RFC5559]\
    \ discuss how these\n   values may be derived.  ([SM-specific] Confusingly, \"\
    PCN-admissible-\n   rate\" in the present context corresponds to \"PCN-threshold-rate\"\
    \ in\n   the cited paragraphs.)\n"
- title: 5.1.3.  Installation of Parameters and Policies
  contents:
  - "5.1.3.  Installation of Parameters and Policies\n   As discussed in the previous\
    \ two sections, every PCN node needs to be\n   provisioned with a number of parameters\
    \ and policies relating to its\n   behavior in processing incoming packets.  The\
    \ Diffserv MIB [RFC3289]\n   can be useful for this purpose, although it needs\
    \ to be extended in\n   some cases.  This MIB covers packet classification, metering,\n\
    \   counting, policing, dropping, and marking.  The required extensions\n   specifically\
    \ include an encapsulation action following\n   reclassification by ingress-egress-aggregate.\
    \  In addition, the MIB\n   has to be extended to include objects for marking\
    \ the ECN field in\n   the outer header at the PCN-ingress-node and an extension\
    \ to the\n   classifiers to include the ECN field at PCN-interior and PCN-egress-\n\
    \   nodes.  Finally, a new object may need to be defined at the PCN-\n   interior-nodes\
    \ to represent the packet-size-independent excess-\n   traffic-marking metering\
    \ algorithm.\n   The value for the PCN-admissible-rate on each link on a node\
    \ appears\n   as a metering parameter.  Operators should take note of the need\
    \ to\n   deploy excess-traffic meters either on the ingress or the egress side\n\
    \   of each interior link, but not both (Appendix B.2 of [RFC5670].\n   The following\
    \ additional information has to be configured by other\n   means (e.g., additional\
    \ MIBs, NETCONF models).\n   At the PCN-egress-node:\n   o  the measurement interval\
    \ T_meas (units of ms, range 50 to 1000);\n   o  whether report suppression is\
    \ to be applied;\n   o  if so, the interval T_maxsuppress (units of 100 ms, range\
    \ 1 to\n      100) and the CLE-reporting-threshold (units of tenths of one\n \
    \     percent, range 0 to 1000, default value 0);\n   o  the address of the PCN-ingress-node\
    \ for each ingress-egress-\n      aggregate, if the Decision Point is collocated\
    \ with the PCN-\n      ingress-node and [RSVP-PCN] is not deployed;\n   o  the\
    \ address of the centralized Decision Point to which it sends\n      its reports,\
    \ if there is one.\n   At the Decision Point:\n   o  whether PCN-based flow admission\
    \ is enabled;\n   o  whether PCN-based flow termination is enabled;\n   o  the\
    \ value of CLE-limit (units of tenths of one percent, range 0 to\n      1000);\n\
    \   o  [SM-specific] the value of the factor U used in the flow\n      termination\
    \ procedure;\n   o  the value of the interval T_crit (units of 100 ms, range 1\
    \ to\n      100);\n   o  whether report suppression is to be applied;\n   o  if\
    \ so, the interval T_maxsuppress (units of 100 ms, range 1 to\n      100) and\
    \ the CLE-reporting-threshold (units of tenths of one\n      percent, range 0\
    \ to 1000, default value 0).  These MUST be the\n      same values that are provisioned\
    \ in the PCN-egress-nodes;\n   o  if the Decision Point is centralized, the address\
    \ of the PCN-\n      ingress-node (and any other information needed to establish\
    \ a\n      security association) for each ingress-egress-aggregate.\n   Depending\
    \ on the testing strategy, it may be necessary to install the\n   new configuration\
    \ data in stages.  This is discussed further below.\n"
- title: 5.1.4.  Activation and Verification of All Behaviors
  contents:
  - "5.1.4.  Activation and Verification of All Behaviors\n   It is certainly not\
    \ within the scope of this document to advise on\n   testing strategy, which operators\
    \ undoubtedly have well in hand.\n   Quite possibly an operator will prefer an\
    \ incremental approach to\n   activation and testing.  Implementing the PCN marking\
    \ scheme at PCN-\n   ingress-nodes, corresponding scheduling behavior in downstream\
    \ nodes,\n   and re-marking at the PCN-egress-nodes is a large enough step in\n\
    \   itself to require thorough testing before going further.\n   Testing will\
    \ probably involve the injection of packets at individual\n   nodes and tracking\
    \ of how the node processes them.  This work can\n   make use of the counter capabilities\
    \ included in the Diffserv MIB.\n   The application of these capabilities to the\
    \ management of PCN is\n   discussed in the next section.\n"
- title: 5.2.  Management Considerations
  contents:
  - "5.2.  Management Considerations\n   This section focuses on the use of event\
    \ logging and the use of\n   counters supported by the Diffserv MIB [RFC3289]\
    \ for the various\n   monitoring tasks involved in management of a PCN network.\n"
- title: 5.2.1.  Event Logging in the PCN-Domain
  contents:
  - "5.2.1.  Event Logging in the PCN-Domain\n   It is anticipated that event logging\
    \ using SYSLOG [RFC5424] will be\n   needed for fault management and potentially\
    \ for capacity management.\n   Implementations MUST be capable of generating logs\
    \ for the following\n   events:\n   o  detection of loss of contact between a\
    \ Decision Point and a PCN-\n      edge-node, as described in Section 3.3.3;\n\
    \   o  successful receipt of a report from a PCN-egress-node, following\n    \
    \  detection of loss of contact with that node;\n   o  flow termination events.\n\
    \   All of these logs are generated by the Decision Point.  There is a\n   strong\
    \ likelihood in the first and third cases that the events are\n   correlated with\
    \ network failures at a lower level.  This has\n   implications for how often\
    \ specific event types should be reported,\n   so as not to contribute unnecessarily\
    \ to log buffer overflow.\n   Recommendations on this topic follow for each event\
    \ report type.\n   The field names (e.g., HOSTNAME, STRUCTURED-DATA) used in the\n\
    \   following subsections are defined in [RFC5424].\n"
- title: 5.2.1.1.  Logging Loss and Restoration of Contact
  contents:
  - "5.2.1.1.  Logging Loss and Restoration of Contact\n   Section 3.3.3 describes\
    \ the circumstances under which the Decision\n   Point may determine that it has\
    \ lost contact, either with a PCN-\n   ingress-node or a PCN-egress-node, due\
    \ to failure to receive an\n   expected report.  Loss of contact with a PCN-ingress-node\
    \ is a case\n   primarily applicable when the Decision Point is in a separate\
    \ node.\n   However, implementations MAY implement logging in the collocated case\n\
    \   if the implementation is such that non-response to a request from the\n  \
    \ Decision Point function can occasionally occur due to processor load\n   or\
    \ other reasons.\n   The log reporting the loss of contact with a PCN-ingress-node\
    \ or PCN-\n   egress-node MUST include the following content:\n   o  The HOSTNAME\
    \ field MUST identify the Decision Point issuing the\n      log.\n   o  A STRUCTURED-DATA\
    \ element MUST be present, containing parameters\n      identifying the node for\
    \ which an expected report has not been\n      received and the type of report\
    \ lost (ingress or egress).  It is\n      RECOMMENDED that the SD-ID for the STRUCTURED-DATA\
    \ element have\n      the form \"PCNNode\" (without the quotes), which has been\
    \ registered\n      with IANA (see [RFC6661] for more information).  The node\n\
    \      identifier PARAM-NAME is RECOMMENDED to be \"ID\" (without the\n      quotes).\
    \  The identifier itself is subject to the preferences\n      expressed in Section\
    \ 6.2.4 of [RFC5424] for the HOSTNAME field.\n      The report type PARAM-NAME\
    \ is RECOMMENDED to be \"RTyp\" (without\n      the quotes).  The PARAM-VALUE\
    \ for the RTyp field MUST be either\n      \"ingr\" or \"egr\".\n   The following\
    \ values are also RECOMMENDED for the indicated fields in\n   this log, subject\
    \ to local practice:\n   o  PRI initially set to 115, representing a Facility\
    \ value of (14)\n      \"log alert\" and a Severity level of (3) \"Error Condition\"\
    .  Note\n      that loss of contact with a PCN-egress-node implies that no new\n\
    \      flows will be admitted to one or more ingress-egress-aggregates\n     \
    \ until contact is restored.  The reason a higher severity level\n      (lower\
    \ value) is not proposed for the initial log is because any\n      corrective\
    \ action would probably be based on alerts at a lower\n      subsystem level.\n\
    \   o  APPNAME set to \"PCN\" (without the quotes).\n   o  MSGID set to \"LOST\"\
    \ (without the quotes).\n   If contact is not regained with a PCN-egress-node\
    \ in a reasonable\n   period of time (say, one minute), the log SHOULD be repeated,\
    \ this\n   time with a PRI value of 113, implying a Facility value of (14) \"\
    log\n   alert\" and a Severity value of (1) \"Alert: action must be taken\n  \
    \ immediately\".  The reasoning is that by this time, any more general\n   conditions\
    \ should have been cleared, and the problem lies\n   specifically with the PCN-egress-node\
    \ concerned and the PCN\n   application in particular.\n   Whenever a loss-of-contact\
    \ log is generated for a PCN-egress-node, a\n   log indicating recovery SHOULD\
    \ be generated when the Decision Point\n   next receives a report from the node\
    \ concerned.  The log SHOULD have\n   the same content as just described for the\
    \ loss-of-contact log, with\n   the following differences:\n   o  PRI changes\
    \ to 117, indicating a Facility value of (14) \"log\n      alert\" and a Severity\
    \ of (5) \"Notice: normal but significant\n      condition\".\n   o  MSGID changes\
    \ to \"RECVD\" (without the quotes).\n"
- title: 5.2.1.2.  Logging Flow Termination Events
  contents:
  - "5.2.1.2.  Logging Flow Termination Events\n   Section 3.3.2 describes the process\
    \ whereby the Decision Point\n   decides that flow termination is required for\
    \ a given ingress-egress-\n   aggregate, calculates how much flow to terminate,\
    \ and selects flows\n   for termination.  This section describes a log that SHOULD\
    \ be\n   generated each time such an event occurs.  (In the case where\n   termination\
    \ occurs in multiple rounds, one log SHOULD be generated\n   per round.)  The\
    \ log may be useful in fault management, to indicate\n   the service impact of\
    \ a fault occurring in a lower-level subsystem.\n   In the absence of network\
    \ failures, it may also be used as an\n   indication of an urgent need to review\
    \ capacity utilization along the\n   path of the ingress-egress-aggregate concerned.\n\
    \   The log reporting a flow termination event MUST include the following\n  \
    \ content:\n   o  The HOSTNAME field MUST identify the Decision Point issuing\
    \ the\n      log.\n   o  A STRUCTURED-DATA element MUST be present, containing\
    \ parameters\n      identifying the ingress and egress nodes for the ingress-egress-\n\
    \      aggregate concerned, indicating the total amount of flow being\n      terminated,\
    \ and giving the number of flows terminated to achieve\n      that objective.\n\
    \      It is RECOMMENDED that the SD-ID for the STRUCTURED-DATA element\n    \
    \  have the form: \"PCNTerm\" (without the quotes), which has been\n      registered\
    \ with IANA (see [RFC6661] for more information).  The\n      parameter identifying\
    \ the ingress node for the ingress-egress-\n      aggregate is RECOMMENDED to\
    \ have PARAM-NAME \"IngrID\" (without the\n      quotes).  The parameter identifying\
    \ the egress node for the\n      ingress-egress-aggregate is RECOMMENDED to have\
    \ PARAM-NAME \"EgrID\"\n      (without the quotes).  Both identifiers are subject\
    \ to the\n      preferences expressed in Section 6.2.4 of [RFC5424] for the\n\
    \      HOSTNAME field.\n      The parameter giving the total amount of flow being\
    \ terminated is\n      RECOMMENDED to have PARAM-NAME \"TermRate\" (without the\
    \ quotes).\n      The PARAM-VALUE MUST be the target rate as calculated according\
    \ to\n      the procedures of Section 3.3.2, as an integer value in thousands\n\
    \      of octets per second.  The parameter giving the number of flows\n     \
    \ selected for termination is RECOMMENDED to have PARAM-NAME \"FCnt\"\n      (without\
    \ the quotes).  The PARAM-VALUE for this parameter MUST be\n      an integer,\
    \ the number of flows selected.\n   The following values are also RECOMMENDED\
    \ for the indicated fields in\n   this log, subject to local practice:\n   o \
    \ PRI initially set to 116, representing a Facility value of (14)\n      \"log\
    \ alert\" and a Severity level of (4) \"Warning: warning\n      conditions\".\n\
    \   o  APPNAME set to \"PCN\" (without the quotes).\n   o  MSGID set to \"TERM\"\
    \ (without the quotes).\n"
- title: 5.2.2.  Provision and Use of Counters
  contents:
  - "5.2.2.  Provision and Use of Counters\n   The Diffserv MIB [RFC3289] allows for\
    \ the provision of counters along\n   the various possible processing paths associated\
    \ with an interface\n   and flow direction.  It is RECOMMENDED that the PCN-nodes\
    \ be\n   instrumented as described below.  It is assumed that the cumulative\n\
    \   counts so obtained will be collected periodically for use in\n   debugging,\
    \ fault management, and capacity management.\n   PCN-ingress-nodes SHOULD provide\
    \ the following counts for each\n   ingress-egress-aggregate.  Since the Diffserv\
    \ MIB installs counters\n   by interface and direction, aggregation of counts\
    \ over multiple\n   interfaces may be necessary to obtain total counts by ingress-egress-\n\
    \   aggregate.  It is expected that such aggregation will be performed by\n  \
    \ a central system rather than at the PCN-ingress-node.\n   o  total PCN packets\
    \ and octets that were received for that ingress-\n      egress-aggregate but\
    \ were dropped;\n   o  total PCN packets and octets admitted to that aggregate.\n\
    \   PCN-interior-nodes SHOULD provide the following counts for each\n   interface,\
    \ noting that a given packet MUST NOT be counted more than\n   once as it passes\
    \ through the node:\n   o  total PCN packets and octets dropped;\n   o  total\
    \ PCN packets and octets forwarded without re-marking;\n   o  total PCN packets\
    \ and octets re-marked to excess-traffic-marked.\n   PCN-egress-nodes SHOULD provide\
    \ the following counts for each\n   ingress-egress-aggregate.  As with the PCN-ingress-node,\
    \ so with the\n   PCN-egress-node it is expected that any necessary aggregation\
    \ over\n   multiple interfaces will be done by a central system.\n   o  total\
    \ not-marked PCN packets and octets received;\n   o  total excess-traffic-marked\
    \ PCN packets and octets received.\n   The following continuously cumulative counters\
    \ SHOULD be provided as\n   indicated, but require new MIBs to be defined.  If\
    \ the Decision Point\n   is not collocated with the PCN-ingress-node, the latter\
    \ SHOULD\n   provide a count of the number of requests for PCN-sent-rate received\n\
    \   from the Decision Point and the number of responses returned to the\n   Decision\
    \ Point.  The PCN-egress-node SHOULD provide a count of the\n   number of reports\
    \ sent to each Decision Point.  Each Decision Point\n   SHOULD provide the following:\n\
    \   o  total number of requests for PCN-sent-rate sent to each PCN-\n      ingress-node\
    \ with which it is not collocated;\n   o  total number of reports received from\
    \ each PCN-egress-node;\n   o  total number of loss-of-contact events detected\
    \ for each PCN-\n      boundary-node;\n   o  total cumulative duration of \"block\"\
    \ state in hundreds of\n      milliseconds for each ingress-egress-aggregate;\n\
    \   o  total number of rounds of flow termination exercised for each\n      ingress-egress-aggregate.\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   [RFC5559] provides a general description of the\
    \ security\n   considerations for PCN.  This memo introduces one new consideration,\n\
    \   related to the use of a centralized Decision Point.  The Decision\n   Point\
    \ itself is a trusted entity.  However, its use implies the\n   existence of an\
    \ interface on the PCN-ingress-node through which\n   communication of policy\
    \ decisions takes place.  That interface is a\n   point of vulnerability that\
    \ must be protected from denial-of-service\n   attacks.\n"
- title: 7.  Acknowledgements
  contents:
  - "7.  Acknowledgements\n   Ruediger Geib, Philip Eardley, and Bob Briscoe have\
    \ helped to shape\n   the present document with their comments.  Toby Moncaster\
    \ gave a\n   careful review to get it into shape for Working Group Last Call.\n\
    \   Amongst the authors, Michael Menth deserves special mention for his\n   constant\
    \ and careful attention to both the technical content of this\n   document and\
    \ the manner in which it was expressed.\n   David Harrington's careful AD review\
    \ resulted not only in necessary\n   changes throughout the document, but also\
    \ the addition of the\n   operations and management considerations (Section 5).\n\
    \   Finally, reviews by Joel Halpern and Brian Carpenter helped to\n   clarify\
    \ how ingress-egress-aggregates are distinguished (Joel) and\n   handling of packets\
    \ that cannot be carried successfully as PCN-\n   packets (Brian).  They also\
    \ made other suggestions to improve the\n   document, as did Stephen Farrell,\
    \ Sean Turner, and Pete Resnick.\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [RFC2119]   Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n               Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC2474]   Nichols, K., Blake, S., Baker, F., and D. Black,\n   \
    \            \"Definition of the Differentiated Services Field (DS\n         \
    \      Field) in the IPv4 and IPv6 Headers\", RFC 2474,\n               December\
    \ 1998.\n   [RFC2475]   Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z.,\n\
    \               and W. Weiss, \"An Architecture for Differentiated\n         \
    \      Services\", RFC 2475, December 1998.\n   [RFC3086]   Nichols, K. and B.\
    \ Carpenter, \"Definition of\n               Differentiated Services Per Domain\
    \ Behaviors and Rules\n               for their Specification\", RFC 3086, April\
    \ 2001.\n   [RFC3289]   Baker, F., Chan, K., and A. Smith, \"Management\n    \
    \           Information Base for the Differentiated Services\n               Architecture\"\
    , RFC 3289, May 2002.\n   [RFC5424]   Gerhards, R., \"The Syslog Protocol\", RFC\
    \ 5424,\n               March 2009.\n   [RFC5559]   Eardley, P., \"Pre-Congestion\
    \ Notification (PCN)\n               Architecture\", RFC 5559, June 2009.\n  \
    \ [RFC5670]   Eardley, P., \"Metering and Marking Behaviour of PCN-\n        \
    \       Nodes\", RFC 5670, November 2009.\n   [RFC6660]   Briscoe, B., Moncaster,\
    \ T., and M. Menth, \"Encoding Three\n               Pre-Congestion Notification\
    \ (PCN) States in the IP Header\n               Using a Single Diffserv Codepoint\
    \ (DSCP)\", RFC 6660,\n               July 2012.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [MeLe10]    Menth, M. and F. Lehrieder, \"PCN-Based\
    \ Measured Rate\n               Termination\", Computer Networks Journal (Elsevier),\
    \ vol.\n               54, no. 13, pp. 2099-2116, September 2010.\n   [MeLe12]\
    \    Menth, M. and F. Lehrieder, \"Performance of PCN-Based\n               Admission\
    \ Control under Challenging Conditions\", IEEE/\n               ACM Transactions\
    \ on Networking, vol. 20, no. 2,\n               April 2012.\n   [RFC4594]   Babiarz,\
    \ J., Chan, K., and F. Baker, \"Configuration\n               Guidelines for DiffServ\
    \ Service Classes\", RFC 4594,\n               August 2006.\n   [RFC6661]   Charny,\
    \ A., Huang, F., Karagiannis, G., Menth, M., and T.\n               Taylor, Ed.,\
    \ \"Pre-Congestion Notification (PCN) Boundary-\n               Node Behavior\
    \ for the Controlled Load (CL) Mode of\n               Operation\", RFC 6661,\
    \ July 2012.\n   [RSVP-PCN]  Karagiannis, G. and A. Bhargava, \"Generic Aggregation\
    \ of\n               Resource ReSerVation Protocol (RSVP) for IPv4 And IPv6\n\
    \               Reservations over PCN domains\", Work in Progress,\n         \
    \      July 2012.\n   [Satoh10]   Satoh, D. and H. Ueno, \"Cause and Countermeasure\
    \ of\n               Overtermination for PCN-Based Flow Termination\",\n     \
    \          Proceedings of IEEE Symposium on Computers and\n               Communications\
    \ (ISCC '10), pp. 155-161, Riccione, Italy,\n               June 2010.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Anna Charny\n   USA\n   EMail: anna@mwsm.com\n   Xinyan\
    \ (Joy) Zhang\n   Cisco Systems\n   300 Apollo Drive\n   Chelmsford, MA  01824\n\
    \   USA\n   EMail: joyzhang@cisco.com\n   Georgios Karagiannis\n   University\
    \ of Twente\n   P.O. Box 217\n   7500 AE Enschede,\n   The Netherlands\n   Phone:\
    \ +31 53 4894099\n   EMail: g.karagiannis@utwente.nl\n   Michael Menth\n   University\
    \ of Tuebingen\n   Sand 13\n   72076 Tuebingen\n   Germany\n   Phone: +49-7071-2970505\n\
    \   EMail: menth@uni-tuebingen.de\n   Tom Taylor (editor)\n   Huawei Technologies\n\
    \   Ottawa\n   Canada\n   EMail: tom.taylor.stds@gmail.com\n"
