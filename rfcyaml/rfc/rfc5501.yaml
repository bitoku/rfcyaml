- title: __initial_text__
  contents:
  - '   Requirements for Multicast Support in Virtual Private LAN Services

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2009 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\
    \ in effect on the date of\n   publication of this document (http://trustee.ietf.org/license-info).\n\
    \   Please review these documents carefully, as they describe your rights\n  \
    \ and restrictions with respect to this document.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document provides functional requirements for network solutions\n\
    \   that support multicast over Virtual Private LAN Service (VPLS).  It\n   specifies\
    \ requirements both from the end user and service provider\n   standpoints.  It\
    \ is intended that potential solutions will use these\n   requirements as guidelines.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \      1.1. Background .................................................3\n  \
    \    1.2. Scope of This Document .....................................4\n   2.\
    \ Conventions Used in This Document ...............................5\n      2.1.\
    \ Terminology ................................................5\n      2.2. Conventions\
    \ ................................................6\n   3. Problem Statements\
    \ ..............................................6\n      3.1. Motivation .................................................6\n\
    \      3.2. Multicast Scalability ......................................7\n  \
    \    3.3. Application Considerations .................................8\n    \
    \       3.3.1. Two Perspectives of the Service .....................8\n   4. General\
    \ Requirements ............................................9\n      4.1. Scope\
    \ of Transport .........................................9\n           4.1.1. Traffic\
    \ Types .......................................9\n                  4.1.1.1. Multicast\
    \ and Broadcast ....................9\n                  4.1.1.2. Unknown Destination\
    \ Unicast ................9\n           4.1.2. Multicast Packet Types ..............................9\n\
    \           4.1.3. MAC Learning Consideration .........................11\n  \
    \    4.2. Static Solutions ..........................................11\n    \
    \  4.3. Backward Compatibility ....................................11\n   5. Customer\
    \ Requirements ..........................................12\n      5.1. CE-PE\
    \ Protocol ............................................12\n           5.1.1. Layer-2\
    \ Aspect .....................................12\n           5.1.2. Layer-3 Aspect\
    \ .....................................12\n      5.2. Multicast Domain ..........................................13\n\
    \      5.3. Quality of Service (QoS) ..................................14\n  \
    \    5.4. SLA Parameters Measurement ................................14\n    \
    \  5.5. Security ..................................................15\n      \
    \     5.5.1. Isolation from Unicast .............................15\n        \
    \   5.5.2. Access Control .....................................15\n          \
    \ 5.5.3. Policing and Shaping on Multicast ..................15\n      5.6. Access\
    \ Connectivity .......................................15\n      5.7. Multi-Homing\
    \ ..............................................15\n      5.8. Protection and\
    \ Restoration ................................15\n      5.9. Minimum MTU ...............................................16\n\
    \      5.10. Frame Reordering Prevention ..............................16\n  \
    \    5.11. Fate-Sharing between Unicast and Multicast ...............16\n   6.\
    \ Service Provider Network Requirements ..........................18\n      6.1.\
    \ Scalability ...............................................18\n           6.1.1.\
    \ Trade-Off of Optimality and State Resource .........18\n           6.1.2. Key\
    \ Metrics for Scalability ........................19\n      6.2. Tunneling Requirements\
    \ ....................................20\n           6.2.1. Tunneling Technologies\
    \ .............................20\n           6.2.2. MTU of MDTunnel ....................................20\n\
    \      6.3. Robustness ................................................20\n  \
    \    6.4. Discovering Related Information ...........................21\n    \
    \  6.5. Operation, Administration, and Maintenance ................21\n      \
    \     6.5.1. Activation .........................................21\n        \
    \   6.5.2. Testing ............................................22\n          \
    \ 6.5.3. Performance Management .............................22\n           6.5.4.\
    \ Fault Management ...................................23\n      6.6. Security\
    \ ..................................................24\n           6.6.1. Security\
    \ Threat Analysis ...........................24\n           6.6.2. Security Requirements\
    \ ..............................25\n      6.7. Hierarchical VPLS support .................................28\n\
    \      6.8. L2VPN Wholesale ...........................................28\n  \
    \ 7. Security Considerations ........................................28\n   8.\
    \ Acknowledgments ................................................28\n   9. References\
    \ .....................................................29\n      9.1. Normative\
    \ References ......................................29\n      9.2. Informative\
    \ References ....................................29\n"
- title: 1.  Introduction
  contents:
  - '1.  Introduction

    '
- title: 1.1.  Background
  contents:
  - "1.1.  Background\n   VPLS (Virtual Private LAN Service) is a provider service\
    \ that\n   emulates the full functionality of a traditional Local Area Network\n\
    \   (LAN).  VPLS interconnects several customer LAN segments over a\n   packet\
    \ switched network (PSN) backbone, creating a multipoint-to-\n   multipoint Ethernet\
    \ VPN.  For customers, their remote LAN segments\n   behave as one single LAN.\n\
    \   In a VPLS, the provider network emulates a learning bridge, and\n   forwarding\
    \ takes place based on Ethernet MAC (media access control)\n   learning.  Hence,\
    \ a VPLS requires MAC address learning/aging on a\n   per-PW (pseudowire) basis,\
    \ where forwarding decisions treat the PW as\n   a \"bridge port\".\n   VPLS is\
    \ a Layer-2 (L2) service.  However, it provides two\n   applications from the\
    \ customer's point of view:\n   -  LAN Routing application: providing connectivity\
    \ between customer\n      routers\n   -  LAN Switching application: providing\
    \ connectivity between customer\n      Ethernet switches\n   Thus, in some cases,\
    \ customers across MAN/WAN have transparent\n   Layer-2 connectivity while their\
    \ main goal is to run Layer-3\n   applications within their routing domain.  As\
    \ a result, different\n   requirements arise from their variety of applications.\n\
    \   Originally, PEs (Provider Edges) in VPLS transport broadcast/\n   multicast\
    \ Ethernet frames by replicating all multicast/broadcast\n   frames received from\
    \ an Attachment Circuit (AC) to all PW's\n   corresponding to a particular Virtual\
    \ Switching Instance (VSI).  Such\n   a technique has the advantage of keeping\
    \ the P (Provider Router) and\n   PE devices completely unaware of IP multicast-specific\
    \ issues.\n   Obviously, however, it has quite a few scalability drawbacks in\
    \ terms\n   of bandwidth consumption, which will lead to increased cost in large-\n\
    \   scale deployment.\n   Meanwhile, there is a growing need for support of multicast-based\n\
    \   services such as IP TV.  This commercial trend makes it necessary for\n  \
    \ most VPLS deployments to support multicast more efficiently than\n   before.\
    \  It is also necessary as customer routers are now likely to\n   be running IP\
    \ multicast protocols, and those routers are connected to\n   switches that will\
    \ be handling large amounts of multicast traffic.\n   Therefore, it is desirable\
    \ to have more efficient techniques to\n   support IP multicast over VPLS.\n"
- title: 1.2.  Scope of This Document
  contents:
  - "1.2.  Scope of This Document\n   This document provides functional requirements\
    \ for network solutions\n   that support IP multicast in VPLS [RFC4761] [RFC4762].\
    \  It identifies\n   requirements that MAY apply to the existing base VPLS architecture\
    \ in\n   order to optimize IP multicast.  It also complements the generic\n  \
    \ L2VPN requirements document [RFC4665], by specifying additional\n   requirements\
    \ specific to the deployment of IP multicast in VPLS.\n   The technical specifications\
    \ are outside the scope of this document.\n   In this document, there is no intent\
    \ to specify either solution-\n   specific details or application-specific requirements.\
    \  Also, this\n   document does NOT aim to express multicast-inferred requirements\
    \ that\n   are not specific to VPLS.  It does NOT aim to express any\n   requirements\
    \ for native Ethernet specifications, either.\n   This document is proposed as\
    \ a solution guideline and a checklist of\n   requirements for solutions, by which\
    \ we will evaluate how each\n   solution satisfies the requirements.\n   This\
    \ document clarifies the needs from both VPLS customer as well as\n   provider\
    \ standpoints and formulates the problems that should be\n   addressed by technical\
    \ solutions while staying solution agnostic.\n   A technical solution and corresponding\
    \ service that supports this\n   document's requirements are hereinafter called\
    \ a \"multicast VPLS\".\n"
- title: 2.  Conventions Used in This Document
  contents:
  - '2.  Conventions Used in This Document

    '
- title: 2.1.  Terminology
  contents:
  - "2.1.  Terminology\n   The reader is assumed to be familiar with the terminology,\
    \ reference\n   models, and taxonomy defined in [RFC4664] and [RFC4665].  For\n\
    \   readability purposes, we repeat some of the terms here.\n   Moreover, we also\
    \ propose some other terms needed when IP multicast\n   support in VPLS is discussed.\n\
    \   -  ASM: Any Source Multicast.  One of the two multicast service\n      models\
    \ where each corresponding service can have an arbitrary\n      number of senders.\n\
    \   -  G: denotes a multicast group.\n   -  MDTunnel: Multicast Distribution Tunnel,\
    \ the means by which the\n      customer's multicast traffic will be conveyed\
    \ across the Service\n      Provider (SP) network.  This is meant in a generic\
    \ way: such\n      tunnels can be point-to-point, point-to-multipoint, or multipoint-\n\
    \      to-multipoint.  Although this definition may seem to assume that\n    \
    \  distribution tunnels are unidirectional, the wording encompasses\n      bidirectional\
    \ tunnels as well.\n   -  Multicast Channel: In the multicast SSM (Source Specific\n\
    \      Multicast) model [RFC4607], a \"multicast channel\" designates\n      traffic\
    \ from a specific source S to a multicast group G.  Also\n      denominated as\
    \ \"(S,G)\".\n   -  Multicast domain: An area in which multicast data is transmitted.\n\
    \      In this document, this term has a generic meaning that can refer\n    \
    \  to Layer-2 and Layer-3.  Generally, the Layer-3 multicast domain\n      is\
    \ determined by the Layer-3 multicast protocol used to establish\n      reachability\
    \ between all potential receivers in the corresponding\n      domain.  The Layer-2\
    \ multicast domain can be the same as the\n      Layer-2 broadcast domain (i.e.,\
    \ VLAN), but it may be restricted to\n      being smaller than the Layer-2 broadcast\
    \ domain if an additional\n      control protocol is used.\n   -  CE: Customer\
    \ Edge Device.\n   -  PE: Provider Edge.\n   -  P: Provider Router.\n   -  S:\
    \ denotes a multicast source.\n   -  SP: Service Provider.\n   -  SSM: Source\
    \ Specific Multicast.  One of the two multicast service\n      models where each\
    \ corresponding service relies upon the use of a\n      single source.\n   - \
    \ U-PE/N-PE: The device closest to the customer/user is called the\n      User-facing\
    \ PE (U-PE) and the device closest to the core network\n      is called the Network-facing\
    \ PE (N-PE).\n   -  VPLS instance: A service entity manageable in VPLS architecture.\n\
    \      All CE devices participating in a single VPLS instance appear to\n    \
    \  be on the same LAN, composing a VPN across the SP's network.  A\n      VPLS\
    \ instance corresponds to a group of VSIs that are\n      interconnected using\
    \ PWs (pseudowires).\n   -  VSI: Virtual Switching Instance.  A VSI is a logical\
    \ entity in a\n      PE that maps multiple ACs (Attachment Circuits) to multiple\
    \ PWs.\n      The VSI is populated in much the same way as a standard bridge\n\
    \      populates its forwarding table.  Each PE device may have multiple\n   \
    \   VSIs, where each VSI belongs to a different VPLS instance.\n"
- title: 2.2.  Conventions
  contents:
  - "2.2.  Conventions\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"\
    SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\"\
    , and \"OPTIONAL\" in this\n   document are to be interpreted as described in\
    \ [RFC2119] .\n"
- title: 3.  Problem Statements
  contents:
  - '3.  Problem Statements

    '
- title: 3.1.  Motivation
  contents:
  - "3.1.  Motivation\n   Today, many kinds of IP multicast services are becoming\
    \ available.\n   Over their Layer-2 VPN service, particularly over VPLS, customers\n\
    \   would often like to operate their multicast applications to remote\n   sites.\
    \  Also, VPN service providers using an IP-based network expect\n   that such\
    \ Layer-2 network infrastructure will efficiently support\n   multicast data traffic.\n\
    \   However, VPLS has a shortcoming as it relates to multicast\n   scalability\
    \ as mentioned below because of the replication mechanisms\n   intrinsic to the\
    \ original architecture.  Accordingly, the primary\n   goal for technical solutions\
    \ is to solve this issue partially or\n   completely, and provide efficient ways\
    \ to support IP multicast\n   services over VPLS.\n"
- title: 3.2.  Multicast Scalability
  contents:
  - "3.2.  Multicast Scalability\n   In VPLS, replication occurs at an ingress PE\
    \ (in the hierarchical\n   VPLS (H-VPLS) case, at N-PE) when a CE sends (1) Broadcast,\
    \ (2)\n   Multicast, or (3) Unknown destination unicast.  There are two well-\n\
    \   known issues with this approach:\n   Issue A: Replication to non-member site:\n\
    \      In cases (1) and (3), the upstream PE has to transmit packets to\n    \
    \  all of the downstream PEs that belong to the common VPLS instance.\n      You\
    \ cannot decrease the number of members, so this is basically an\n      inevitable\
    \ situation for most VPLS deployments.\n      In case (2), however, there is an\
    \ issue that multicast traffic is\n      sent to sites with no members.  Usually,\
    \ this is caused when the\n      upstream PE does not maintain downstream membership\
    \ information.\n      The upstream PE simply floods frames to all downstream PEs,\
    \ and\n      the downstream PEs forward them to directly connected CEs;\n    \
    \  however, those CEs might not be the members of any multicast\n      group.\
    \  From the perspective of customers, they might suffer from\n      pressure on\
    \ their own resources due to unnecessary traffic.  From\n      the perspective\
    \ of SPs, they would not like wasteful over-\n      provisioning to cover such\
    \ traffic.\n   Issue B: Replication of PWs on shared physical path:\n      In\
    \ VPLS, a VSI associated with each VPLS instance behaves as a\n      logical emulated\
    \ bridge that can transport Ethernet across the PSN\n      backbone using PWs.\
    \  In principle, PWs are designed for unicast\n      traffic.\n      In all cases,\
    \ (1), (2), and (3), Ethernet frames are replicated on\n      one or more PWs\
    \ that belong to that VSI.  This replication is\n      often inefficient in terms\
    \ of bandwidth usage if those PWs are\n      traversing shared physical links\
    \ in the backbone.\n      For instance, suppose there are 20 remote PEs belonging\
    \ to a\n      particular VPLS instance, and all PWs happen to be traversing over\n\
    \      the same link from one local PE to its next-hop P.  In this case,\n   \
    \   even if a CE sends 50 Mbps to the local PE, the total bandwidth of\n     \
    \ that link will be to 1000 Mbps.\n      Note that while traditional 802.1D Ethernet\
    \ switches replicate\n      broadcast/multicast flows once at most per output\
    \ interface, VPLS\n      often needs to transmit one or more flows duplicated\
    \ over the same\n      output interface.\n      From the perspective of customers,\
    \ there is no serious issue\n      because they do not know what happens in the\
    \ core.  However, from\n      the perspective of SPs, unnecessary replication\
    \ brings the risk of\n      resource exhaustion when the number of PWs increases.\n\
    \   In both Issues A and B, these undesirable situations will become\n   obvious\
    \ with the wide-spread use of IP multicast applications by\n   customers.  Naturally,\
    \ the problem will become more serious as the\n   number of sites grows.  In other\
    \ words, there are concerns over the\n   scalability of multicast in VPLS today.\n"
- title: 3.3.  Application Considerations
  contents:
  - '3.3.  Application Considerations

    '
- title: 3.3.1.  Two Perspectives of the Service
  contents:
  - "3.3.1.  Two Perspectives of the Service\n   When it comes to IP multicast over\
    \ VPLS, there are two different\n   aspects in terms of service provisioning.\
    \  They are closely related\n   to the functional requirements from two technical\
    \ standpoints:\n   Layer-2 and Layer-3.\n   - Native Ethernet service aspect\n\
    \      This aspect mainly affects Ethernet network service operators.\n      Their\
    \ main interest is to solve the issue that existing VPLS\n      deployments cannot\
    \ always handle multicast/broadcast frames\n      efficiently.\n      Today, wide-area\
    \ Ethernet services are becoming popular, and VPLS\n      can be utilized to provide\
    \ wide-area LAN services.  As customers\n      come to use various kinds of content\
    \ distribution applications\n      that use IP multicast (or other protocols that\
    \ lead to multicast/\n      broadcast in the Ethernet layer), the total amount\
    \ of traffic will\n      also grow.  In addition, considerations of Operations,\n\
    \      Administration, and Management (OAM), security and other related\n    \
    \  points in multicast in view of Layer-2 are important.\n      In such circumstances,\
    \ the native VPLS specification would not\n      always be satisfactory if multicast\
    \ traffic is more dominant in\n      total resource utilization than before. \
    \ The scalability issues\n      mentioned in the previous section are expected\
    \ to be solved.\n   - IP multicast service aspect\n      This aspect mainly affects\
    \ both IP service providers and end\n      users.  Their main interest is to provide\
    \ IP multicast services\n      transparently but effectively by means of VPLS\
    \ as a network\n      infrastructure.\n      SPs might expect VPLS as an access/metro\
    \ network to deliver\n      multicast traffic (such as Triple-play (Video, Voice,\
    \ Data) and\n      Multicast IP VPNs) in an efficient way.\n"
- title: 4.  General Requirements
  contents:
  - "4.  General Requirements\n   We assume the basic requirements for VPLS written\
    \ in [RFC4665] are\n   fulfilled unless otherwise specified in this document.\n"
- title: 4.1.  Scope of Transport
  contents:
  - '4.1.  Scope of Transport

    '
- title: 4.1.1.  Traffic Types
  contents:
  - '4.1.1.  Traffic Types

    '
- title: 4.1.1.1.  Multicast and Broadcast
  contents:
  - "4.1.1.1.  Multicast and Broadcast\n   As described before, any solution is expected\
    \ to have mechanisms for\n   efficient transport of IP multicast.  Multicast is\
    \ related to both\n   Issues A and B (see Section 3.2); however, broadcast is\
    \ related to\n   Issue B only because it does not need membership control.\n \
    \  -  A multicast VPLS solution SHOULD attempt to solve both Issues A\n      and\
    \ B, if possible.  However, since some applications prioritize\n      solving\
    \ one issue over the other, the solution MUST identify which\n      Issue (A or\
    \ B) it is attempting to solve.  The solution SHOULD\n      provide a basis for\
    \ evaluating how well it solves the issue(s) it\n      is targeting, if it is\
    \ providing an approximate solution.\n"
- title: 4.1.1.2.  Unknown Destination Unicast
  contents:
  - "4.1.1.2.  Unknown Destination Unicast\n   Unknown destination MAC unicast requires\
    \ flooding, but its\n   characteristics are quite different from multicast/broadcast.\
    \  When\n   the unicast MAC address is learned, the PE changes its forwarding\n\
    \   behavior from flooding over all PWs into sending over one PW.\n   Thereby,\
    \ it will require different technical studies from multicast/\n   broadcast, which\
    \ is out of scope of this document.\n"
- title: 4.1.2.  Multicast Packet Types
  contents:
  - "4.1.2.  Multicast Packet Types\n   Ethernet multicast is used for conveying Layer-3\
    \ multicast data.\n   When IP multicast is encapsulated by an Ethernet frame,\
    \ the IP\n   multicast group address is mapped to the Ethernet destination MAC\n\
    \   address.  In IPv4, the mapping uses the lower 23 bits of the (32-bit)\n  \
    \ IPv4 multicast address and places them as the lower 23 bits of a\n   destination\
    \ MAC address with the fixed header of 01-00-5E in hex.\n   Since this mapping\
    \ is ambiguous (i.e., there is a multiplicity of 1\n   Ethernet address to 32\
    \ IPv4 addresses), MAC-based forwarding is not\n   ideal for IP multicast because\
    \ some hosts might possibly receive\n   packets they are not interested in, which\
    \ is inefficient in traffic\n   delivery and has an impact on security.  On the\
    \ other hand, if the\n   solution tracks IP addresses rather than MAC addresses,\
    \ this concern\n   can be prevented.  The drawback of this approach is, however,\
    \ that\n   the network administration becomes slightly more complicated.\n   Ethernet\
    \ multicast is also used for Layer-2 control frames.  For\n   example, BPDU (Bridge\
    \ Protocol Data Unit) for IEEE 802.1D Spanning\n   Trees uses a multicast destination\
    \ MAC address (01-80-C2-00-00-00).\n   Also, some of IEEE 802.1ag [802.1ag] Connectivity\
    \ Fault Management\n   (CFM) messages use a multicast destination MAC address\
    \ dependent on\n   their message type and application.  From the perspective of\
    \ IP\n   multicast, however, it is necessary in VPLS to flood such control\n \
    \  frames to all participating CEs, without requiring any membership\n   controls.\n\
    \   As for a multicast VPLS solution, it can only use Ethernet-related\n   information,\
    \ if you stand by the strict application of the basic\n   requirement: \"a L2VPN\
    \ service SHOULD be agnostic to customer's Layer\n   3 traffic\" [RFC4665].  This\
    \ means no Layer-3 information should be\n   checked for transport.  However,\
    \ it is obvious this is an impediment\n   to solve Issue A.\n   Consequently,\
    \ a multicast VPLS can be allowed to make use of some\n   Layer-3-related supplementary\
    \ information in order to improve\n   transport efficiency.  In fact, today's\
    \ LAN-switch implementations\n   often support such approaches and snoop upper-layer\
    \ protocols and\n   examine IP multicast memberships (e.g., Protocol Independent\n\
    \   Multicast (PIM) snooping and IGMP/MLD (Multicast Listener Discovery)\n   snooping\
    \ [RFC4541]).  This will implicitly suggest that VPLS may\n   adopt similar techniques\
    \ although this document does NOT state\n   Layer-3 snooping is mandatory.  If\
    \ such an approach is taken, careful\n   consideration of Layer-3 state maintenance\
    \ is necessary.  In\n   addition, note that snooping approaches sometimes have\
    \ disadvantages\n   in the system's transparency; that is, one particular protocol's\n\
    \   snooping solution might hinder other (especially future) protocol's\n   working\
    \ (e.g., an IGMPv2-snooping switch vs. a new IGMPv3-snooping\n   one).  Also,\
    \ note that there are potential alternatives to snooping:\n   -  Static configuration\
    \ of multicast Ethernet addresses and ports/\n      interfaces.\n   -  Multicast\
    \ control protocol based on Layer-2 technology that\n      signals mappings of\
    \ multicast addresses to ports/interfaces, such\n      as Generic Attribute Registration\
    \ Protocol / GARP Multicast\n      Registration Protocol (GARP/GMRP) [802.1D],\
    \ Cisco Group Management\n      Protocol [CGMP], and Router-port Group Management\
    \ Protocol (RGMP)\n      [RFC3488].\n   On the basis described above, general\
    \ requirements about packet types\n   are given as follows:\n   -  A solution\
    \ SHOULD support a way to facilitate IP multicast\n      forwarding of the customers.\
    \  It MAY observe Layer-3 information\n      (i.e., multicast routing protocols\
    \ and state) to the degree\n      necessary, but any information irrelevant to\
    \ multicast transport\n      SHOULD NOT be consulted.\n   -  In a solution, Layer-2\
    \ control frames (e.g., BPDU, 802.1ag CFM)\n      SHOULD be flooded to all PE/CEs\
    \ in a common VPLS instance.  A\n      solution SHOULD NOT change or limit the\
    \ flooding scope to remote\n      PE/CEs in terms of end-point reachability.\n\
    \   -  In a solution, Layer-2 frames that encapsulate Layer-3 multicast\n    \
    \  control packets (e.g., PIM, IGMP (for IPv4), and MLD (for IPv6))\n      MAY\
    \ be flooded only to relevant members, with the goal of limiting\n      flooding\
    \ scope.  However, Layer-2 frames that encapsulate other\n      Layer-3 control\
    \ packets (e.g., OSPF, IS-IS) SHOULD be flooded to\n      all PE/CEs in a VPLS\
    \ instance.\n"
- title: 4.1.3.  MAC Learning Consideration
  contents:
  - "4.1.3.  MAC Learning Consideration\n   In a common VPLS architecture, MAC learning\
    \ is carried out by PEs\n   based on the incoming frame's source MAC address,\
    \ independently of\n   the destination MAC address (i.e., regardless of whether\
    \ it is\n   unicast, multicast, or broadcast).  This is the case with the\n  \
    \ multicast VPLS solution's environment too.  In this document, the\n   improvement\
    \ of MAC learning scalability is beyond the scope.  It will\n   be covered in\
    \ future work.\n"
- title: 4.2.  Static Solutions
  contents:
  - "4.2.  Static Solutions\n   A solution SHOULD allow static configuration to account\
    \ for various\n   operator policies, where the logical multicast topology does\
    \ not\n   change dynamically in conjunction with a customer's multicast\n   routing.\n"
- title: 4.3.  Backward Compatibility
  contents:
  - "4.3.  Backward Compatibility\n   A solution SHOULD be backward compatible with\
    \ the existing VPLS\n   solution.  It SHOULD allow a case where a common VPLS\
    \ instance is\n   composed of both PEs supporting the solution and PEs not supporting\n\
    \   it, and the multicast optimization (both forwarding and receiving) is\n  \
    \ achieved between the compliant PEs.\n   Note again that the existing VPLS solutions\
    \ already have a simple\n   flooding capability.  Thus, this backward compatibility\
    \ will give\n   customers and SPs the improved efficiency of multicast forwarding\n\
    \   incrementally as the solution is deployed.\n"
- title: 5.  Customer Requirements
  contents:
  - '5.  Customer Requirements

    '
- title: 5.1.  CE-PE Protocol
  contents:
  - '5.1.  CE-PE Protocol

    '
- title: 5.1.1.  Layer-2 Aspect
  contents:
  - "5.1.1.  Layer-2 Aspect\n   A solution SHOULD allow transparent operation of Ethernet\
    \ control\n   protocols employed by customers (e.g., Spanning Tree Protocol\n\
    \   [802.1D]) and their seamless operation with multicast data transport.\n  \
    \ Solutions MAY examine Ethernet multicast control frames for the\n   purpose\
    \ of efficient dynamic transport (e.g., GARP/GMRP [802.1D]).\n   However, solutions\
    \ MUST NOT assume all CEs are always running such\n   protocols (typically in\
    \ the case where a CE is a router and is not\n   aware of Layer-2 details).\n\
    \   A whole Layer-2 multicast frame (whether for data or control) SHOULD\n   NOT\
    \ be altered from a CE to CE(s) EXCEPT for the VLAN ID field,\n   ensuring that\
    \ it is transparently transported.  If VLAN IDs are\n   assigned by the SP, they\
    \ can be altered.  Note, however, when VLAN\n   IDs are changed, Layer-2 protocols\
    \ may be broken in some cases, such\n   as Multiple Spanning Trees [802.1s]. \
    \ Also, if the Layer-2 frame is\n   encapsulating a Layer-3 multicast control\
    \ packet (e.g., PIM/IGMP) and\n   customers allow it to be regenerated at the\
    \ PE (aka proxy: see\n   Section 5.1.2), then the MAC address for that frame MAY\
    \ be altered to\n   the minimum necessary (e.g., use PE's own MAC address as a\
    \ source).\n"
- title: 5.1.2.  Layer-3 Aspect
  contents:
  - "5.1.2.  Layer-3 Aspect\n   Again, a solution MAY examine the customer's Layer-3\
    \ multicast\n   protocol packets for the purpose of efficient and dynamic transport.\n\
    \   If it does, supported protocols SHOULD include:\n   o  PIM-SM (Sparse Mode)\
    \ [RFC4601], PIM-SSM (Source-Specific\n      Multicast) [RFC4607], bidirectional\
    \ PIM [RFC5015], and PIM-DM\n      (Dense Mode) [RFC3973].\n   o  IGMP (v1 [RFC1112],\
    \ v2 [RFC2236], and v3 [RFC3376]) (for IPv4\n      solutions).\n   o  Multicast\
    \ Listener Discovery Protocol (MLD) (v1 [RFC2710] and v2\n      [RFC3810]) (for\
    \ IPv6 solutions).\n   A solution MUST NOT require any special Layer-3 multicast\
    \ protocol\n   packet processing by the end users.  However, it MAY require some\n\
    \   configuration changes (e.g., turning explicit tracking on/off in the\n   PIM).\n\
    \   A whole Layer-3 multicast packet (whether for data or control), which\n  \
    \ is encapsulated inside a Layer-2 frame, SHOULD NOT be altered from a\n   CE\
    \ to CE(s), ensuring that it is transparently transported.  However,\n   as for\
    \ Layer-3 multicast control (like PIM Join/Prune/Hello and IGMP\n   Query/Report\
    \ packet), it MAY be altered to the minimum necessary if\n   such partial non-transparency\
    \ is acceptable from point of view of the\n   multicast service.  Similarly, a\
    \ PE MAY consume such Layer-3\n   multicast control packets and regenerate an\
    \ entirely new packet if\n   partial non-transparency is acceptable with legitimate\
    \ reason for\n   customers (aka proxy).\n"
- title: 5.2.  Multicast Domain
  contents:
  - "5.2.  Multicast Domain\n   As noted in Section 2.1, the term \"multicast domain\"\
    \ is used in a\n   generic context for Layer-2 and Layer-3.\n   A solution SHOULD\
    \ NOT alter the boundaries of customer multicast\n   domains.  It MUST ensure\
    \ that the provided Ethernet multicast domain\n   always encompasses the corresponding\
    \ customer Layer-3 multicast\n   domain.\n   A solution SHOULD optimize those\
    \ domains' coverage sizes, i.e., a\n   solution SHOULD ensure that unnecessary\
    \ traffic is not sent to CEs\n   with no members.  Ideally, the provided domain\
    \ size will be close to\n   that of the customer's Layer-3 multicast membership\
    \ distribution;\n   however, it is OPTIONAL to achieve such absolute optimality\
    \ from the\n   perspective of Layer-3.\n   If a customer uses VLANs and a VLAN\
    \ ID as a service delimiter (i.e.,\n   each VPLS instance is represented by a\
    \ unique customer VLAN tag\n   carried by a frame through the User Network Interface\
    \ (UNI) port), a\n   solution MUST provide a separate multicast domain for each\
    \ VLAN ID.\n   Note that if VLAN ID translation is provided (i.e., if a customer\n\
    \   VLAN at one site is mapped into a different customer VLAN at a\n   different\
    \ site), multicast domains will be created per set of VLAN\n   IDs that are associated\
    \ with translation.\n   If a customer uses VLANs but a VLAN ID is not a service\
    \ delimiter\n   (i.e., the VPN disregards customer VLAN IDs), a solution MAY provide\n\
    \   a separate multicast domain for each VLAN ID.  An SP is not\n   mandatorily\
    \ required to provide a separate multicast domain for each\n   VLAN ID, but it\
    \ may be considered beneficial to do so.\n   A solution MAY build multicast domains\
    \ based on Ethernet MAC\n   addresses.  It MAY also build multicast domains based\
    \ on the IP\n   addresses inside Ethernet frames.  That is, PEs in each VPLS instance\n\
    \   might control forwarding behavior and provide different multicast\n   frame\
    \ reachability depending on each MAC/IP destination address\n   separately.  If\
    \ IP multicast channels are fully considered in a\n   solution, the provided domain\
    \ size will be closer to actual channel\n   reachability.\n"
- title: 5.3.  Quality of Service (QoS)
  contents:
  - "5.3.  Quality of Service (QoS)\n   Customers require that multicast quality of\
    \ service MUST be at least\n   on par with what exists for unicast traffic.  Moreover,\
    \ as multicast\n   is often used to deliver high-quality services such as TV broadcast,\n\
    \   delay-, jitter-, and loss-sensitive traffic MUST be supported over\n   multicast\
    \ VPLS.\n   To accomplish this, the solution MAY have additional features to\n\
    \   support high QoS such as bandwidth reservation and flow admission\n   control.\
    \  Also, multicast VPLS deployment SHALL benefit from IEEE\n   802.1p Class-of-Service\
    \ (CoS) techniques [802.1D] and Diffserv\n   [RFC2475] mechanisms.\n   Moreover,\
    \ multicast traffic SHOULD NOT affect the QoS that unicast\n   traffic receives\
    \ and vice versa.  That is, separation of multicast\n   and unicast traffic in\
    \ terms of QoS is necessary.\n"
- title: 5.4.  SLA Parameters Measurement
  contents:
  - "5.4.  SLA Parameters Measurement\n   Since SLA parameters are part of the service\
    \ sold to customers, they\n   simply want to verify their application performance\
    \ by measuring the\n   parameters SP(s) provide.\n   Multicast specific characteristics\
    \ that may be monitored are, for\n   instance, multicast statistics per stream\
    \ (e.g., total/incoming/\n   outgoing/dropped traffic by period of time), one-way\
    \ delay, jitter\n   and group join/leave delay (time to start receiving traffic\
    \ from a\n   multicast group across the VPN since the join/leave was issued).\
    \  An\n   operator may also wish to compare the difference in one-way delay for\n\
    \   a solitary multicast group/stream from a single, source PE to\n   multiple\
    \ receiver PEs.\n   A solution SHOULD provide these parameters with Ethernet multicast\n\
    \   group level granularity.  (For example, a multicast MAC address will\n   be\
    \ one of those entries for classifying flows with statistics, delay,\n   and so\
    \ on.)  However, if a solution is aimed at IP multicast\n   transport efficiency,\
    \ it MAY support IP multicast-level granularity.\n   (For example, multicast IP\
    \ address/channel will be entries for\n   latency time.)\n   In order to monitor\
    \ them, standard interfaces for statistics\n   gathering SHOULD also be provided\
    \ (e.g., standard Simple Network\n   Management Protocol (SNMP) MIB Modules).\n"
- title: 5.5.  Security
  contents:
  - "5.5.  Security\n   A solution MUST provide customers with architectures that\
    \ give the\n   same level of security both for unicast and multicast.\n"
- title: 5.5.1.  Isolation from Unicast
  contents:
  - "5.5.1.  Isolation from Unicast\n   Solutions SHOULD NOT affect any forwarding\
    \ information base,\n   throughput, or resiliency, etc., of unicast frames; that\
    \ is, they\n   SHOULD provide isolation from unicast.\n"
- title: 5.5.2.  Access Control
  contents:
  - "5.5.2.  Access Control\n   A solution MAY filter multicast traffic inside a VPLS,\
    \ upon the\n   request of an individual customer, (for example, MAC/VLAN filtering,\n\
    \   IP multicast channel filtering, etc.).\n"
- title: 5.5.3.  Policing and Shaping on Multicast
  contents:
  - "5.5.3.  Policing and Shaping on Multicast\n   A solution SHOULD support policing\
    \ and shaping multicast traffic on a\n   per-customer basis and on a per-AC (Attachment\
    \ Circuit) basis.  This\n   is intended to prevent multicast traffic from exhausting\
    \ resources\n   for unicast inside a common customer's VPN.  This might also be\n\
    \   beneficial for QoS separation (see Section 5.3).\n"
- title: 5.6.  Access Connectivity
  contents:
  - "5.6.  Access Connectivity\n   First and foremost, various physical connectivity\
    \ types described in\n   [RFC4665] MUST be supported.\n"
- title: 5.7.  Multi-Homing
  contents:
  - "5.7.  Multi-Homing\n   A multicast VPLS MUST allow a situation in which a CE\
    \ is dual-homed\n   to two different SPs via diverse access networks -- one is\
    \ supporting\n   multicast VPLS but the other is not supporting it, (because it\
    \ is an\n   existing VPLS or 802.1Q/QinQ network).\n"
- title: 5.8.  Protection and Restoration
  contents:
  - "5.8.  Protection and Restoration\n   A multicast VPLS infrastructure SHOULD allow\
    \ redundant paths to\n   assure high availability.\n   Multicast forwarding restoration\
    \ time MUST NOT be greater than the\n   time it takes a customer's Layer-3 multicast\
    \ protocols to detect a\n   failure in the VPLS infrastructure.  For example,\
    \ if a customer uses\n   PIM with default configuration, the hello hold timer\
    \ is 105 seconds,\n   and solutions are required to restore a failure no later\
    \ than this\n   period.  To achieve this, a solution might need to support providing\n\
    \   alternative multicast paths.\n   Moreover, if multicast forwarding was not\
    \ successfully restored\n   (e.g., in case of no redundant paths), a solution\
    \ MAY raise alarms to\n   provide outage notification to customers before such\
    \ a hold timer\n   expires.\n"
- title: 5.9.  Minimum MTU
  contents:
  - "5.9.  Minimum MTU\n   Multicast applications are often sensitive to packet fragmentation\n\
    \   and reassembly, so the requirement to avoid fragmentation might be\n   stronger\
    \ than the existing VPLS solution.\n   A solution SHOULD provide customers with\
    \ enough committed minimum MTU\n   (i.e., service MTU) for multicast Ethernet\
    \ frames to ensure that IP\n   fragmentation between customer sites never occurs.\
    \  It MAY give\n   different MTU sizes to multicast and unicast.\n"
- title: 5.10.  Frame Reordering Prevention
  contents:
  - "5.10.  Frame Reordering Prevention\n   A solution SHOULD attempt to prevent frame\
    \ reordering when delivering\n   customer multicast traffic.  Likewise, for unicast\
    \ and unknown\n   unicast traffic, it SHOULD attempt not to increase the likelihood\
    \ of\n   reordering compared with existing VPLS solutions.\n   It is to be noted\
    \ that delivery of out-of-order frames is not\n   avoidable in certain cases.\
    \  Specifically, if a solution adopts some\n   MDTunnels (see Section 6.2) and\
    \ dynamically selects them for\n   optimized delivery (e.g., switching from one\
    \ aggregate tree to\n   another), end-to-end data delivery is prone to be out\
    \ of order.  This\n   fact can be considered a trade-off between bandwidth optimization\
    \ and\n   network stability.  Therefore, such a solution is expected to promote\n\
    \   awareness about this kind of drawback.\n"
- title: 5.11.  Fate-Sharing between Unicast and Multicast
  contents:
  - "5.11.  Fate-Sharing between Unicast and Multicast\n   In native Ethernet, multicast\
    \ and unicast connectivity are often\n   managed together.  For instance, an 802.1ag\
    \ CFM Continuity Check\n   message is forwarded by multicast as a periodic heartbeat,\
    \ but it is\n   supposed to check the \"whole\" traffic continuity regardless\
    \ of\n   unicast or multicast, at the same time.  Hence, the aliveness of\n  \
    \ unicast and multicast is naturally coupled (i.e., fate-shared) in\n   this customer's\
    \ environment.\n   A multicast VPLS solution may decouple the path that a customer's\n\
    \   unicast and multicast traffic follow through a SP's backbone, in\n   order\
    \ to provide the most optimal path for multicast data traffic.\n   This may cause\
    \ concern among some multicast VPLS customers who desire\n   that, during a failure\
    \ in the SP's network, both unicast and\n   multicast traffic fail concurrently.\n\
    \   Therefore, there will be an additional requirement that makes both\n   unicast\
    \ and multicast connectivity coupled.  This means that if\n   either one of them\
    \ have a failure, the other is also disabled.  If\n   one of the services (either\
    \ unicast or multicast) becomes\n   operational, the other is also activated simultaneously.\n\
    \   -  It SHOULD be identified if the solution can provide customers with\n  \
    \    fate-sharing between unicast and multicast connectivity for their\n     \
    \ LAN switching application.  It MAY have a configurable mechanism\n      for\
    \ SPs to provide that on behalf of customers, e.g., aliveness\n      synchronization,\
    \ but its use is OPTIONAL.\n   This policy will benefit customers.  Some customers\
    \ would like to\n   detect failure soon at CE side and restore full connectivity\
    \ by\n   switching over to their backup line, rather than to keep poor half\n\
    \   connectivity (i.e., either unicast or multicast being in fail).  Even\n  \
    \ if either unicast or multicast is kept alive, it is just\n   disadvantageous\
    \ to the customer's application protocols that need\n   both types of traffic.\
    \  Fate-sharing policy contributes to preventing\n   such a complicated situation.\n\
    \   Note that how serious this issue is depends on each customer's stance\n  \
    \ in Ethernet operation.  If all CEs are IP routers, i.e., if VPLS is\n   provided\
    \ for a LAN routing application, the customer might not care\n   about it because\
    \ both unicast and multicast connectivity is assured\n   in the IP layer.  If\
    \ the CE routers are running an IGP (e.g., OSPF/\n   IS-IS) and a multicast routing\
    \ protocol (e.g., PIM), then aliveness\n   of both the unicast and multicast paths\
    \ will be detected by the CEs.\n   This does not guarantee that unicast and multicast\
    \ traffic are to\n   follow the same path in the SP's backbone network, but does\
    \ mitigate\n   this issue to some degree.\n"
- title: 6.  Service Provider Network Requirements
  contents:
  - '6.  Service Provider Network Requirements

    '
- title: 6.1.  Scalability
  contents:
  - "6.1.  Scalability\n   The existing VPLS architecture has major advantages in\
    \ scalability.\n   For example, P-routers are free from maintaining customers'\n\
    \   information because customer traffic is encapsulated in PSN tunnels.\n   Also,\
    \ a PW's split-horizon technique can prevent loops, making PE\n   routers free\
    \ from maintaining complicated spanning trees.\n   However, a multicast VPLS needs\
    \ additional scalability considerations\n   related to its expected enhanced mechanisms.\
    \  [RFC3809] lists common\n   L2VPN sizing and scalability requirements and metrics,\
    \ which are\n   applicable in multicast VPLS too.  Accordingly, this section deals\n\
    \   with specific requirements related to scalability.\n"
- title: 6.1.1.  Trade-Off of Optimality and State Resource
  contents:
  - "6.1.1.  Trade-Off of Optimality and State Resource\n   A solution needs to improve\
    \ the scalability of multicast as is shown\n   in Section 3:\n      Issue A: Replication\
    \ to non-member site.\n      Issue B: Replication of PWs on shared physical path.\n\
    \   For both issues, the optimization of physical resources (i.e., link\n   bandwidth\
    \ usage and router duplication performance) will become a\n   major goal.  However,\
    \ there is a trade-off between optimality and\n   state resource consumption.\n\
    \   In order to solve Issue A, a PE might have to maintain multicast\n   group\
    \ information for CEs that was not kept in the existing VPLS\n   solutions.  This\
    \ will present scalability concerns about state\n   resources (memory, CPU, etc.)\
    \ and their maintenance complexity.\n   In order to solve Issue B, PE and P routers\
    \ might have to have\n   knowledge of additional membership information for remote\
    \ PEs, and\n   possibly additional tree topology information, when they are using\n\
    \   point-to-multipoint (P2MP) techniques (PIM tree, P2MP-LSP (Label\n   Switched\
    \ Path), etc.).\n   Consequently, the scalability evaluation of multicast VPLS\
    \ solutions\n   needs a careful trade-off analysis between bandwidth optimality\
    \ and\n   state resource consumption.\n"
- title: 6.1.2.  Key Metrics for Scalability
  contents:
  - "6.1.2.  Key Metrics for Scalability\n      (Note: This part has a number of similar\
    \ characteristics to\n      requirements for Layer-3 Multicast VPN [RFC4834].)\n\
    \   A multicast VPLS solution MUST be designed to scale well with an\n   increase\
    \ in the number of any of the following metrics:\n   -  the number of PEs\n  \
    \ -  the number of VPLS instances (total and per PE)\n   -  the number of PEs\
    \ and sites in any VPLS instance\n   -  the number of client VLAN IDs\n   -  the\
    \ number of client Layer-2 MAC multicast groups\n   -  the number of client Layer-3\
    \ multicast channels (groups or source-\n      groups)\n   -  the number of PWs\
    \ and PSN Tunnels (MDTunnels) (total and per PE)\n   Each multicast VPLS solution\
    \ SHALL document its scalability\n   characteristics in quantitative terms.  A\
    \ solution SHOULD quantify\n   the amount of state that a PE and a P device has\
    \ to support.\n   The scalability characteristics SHOULD include:\n   -  the processing\
    \ resources required by the control plane in managing\n      PWs (neighborhood\
    \ or session maintenance messages, keepalives,\n      timers, etc.)\n   -  the\
    \ processing resources required by the control plane in managing\n      PSN tunnels\n\
    \   -  the memory resources needed for the control plane\n   -  the amount of\
    \ protocol information transmitted to manage a\n      multicast VPLS (e.g., signaling\
    \ throughput)\n   -  the amount of Layer-2/Layer-3 multicast information a P/PE\
    \ router\n      consumes (e.g., traffic rate of join/leave, keepalives, etc.)\n\
    \   -  the number of multicast IP addresses used (if IP multicast in ASM\n   \
    \   mode is proposed as a multicast distribution tunnel)\n   -  other particular\
    \ elements inherent to each solution that impact\n      scalability\n   Another\
    \ metric for scalability is operational complexity.  Operations\n   will naturally\
    \ become more complicated if the number of managed\n   objects (e.g., multicast\
    \ groups) increases, or the topology changes\n   occur more frequently.  A solution\
    \ SHOULD note the factors that lead\n   to additional operational complexity.\n"
- title: 6.2.  Tunneling Requirements
  contents:
  - '6.2.  Tunneling Requirements

    '
- title: 6.2.1.  Tunneling Technologies
  contents:
  - "6.2.1.  Tunneling Technologies\n   An MDTunnel denotes a multicast distribution\
    \ tunnel.  This is a\n   generic term for tunneling where customer multicast traffic\
    \ is\n   carried over a provider's network.  In the L2VPN service context, it\n\
    \   will correspond to a PSN tunnel.\n   A solution SHOULD be able to use a range\
    \ of tunneling technologies,\n   including point-to-point (unicast oriented) and\
    \ point-to-multipoint/\n   multipoint-to-multipoint (multicast oriented).  For\
    \ example, today\n   there are many kinds of protocols for tunneling such as L2TP,\
    \ IP,\n   (including multicast IP trees), MPLS (including P2MP-LSP [RFC4875],\n\
    \   and P2MP/MP2MP-LSP [LDP-P2MP]), etc.\n   Note that which variant, point-to-point,\
    \ point-to-multipoint, or\n   multipoint-to-multipoint, is used depends largely\
    \ on the trade-offs\n   mentioned above and the targeted network and applications.\n\
    \   Therefore, this document does not mandate any specific protocols.  A\n   solution,\
    \ however, SHOULD state reasonable criteria if it adopts a\n   specific kind of\
    \ tunneling protocol.\n"
- title: 6.2.2.  MTU of MDTunnel
  contents:
  - "6.2.2.  MTU of MDTunnel\n   From the view of an SP, it is not acceptable to have\
    \ fragmentation/\n   reassembly so often while packets are traversing a MDTunnel.\n\
    \   Therefore, a solution SHOULD support a method that provides the\n   minimum\
    \ path MTU of the MDTunnel in order to accommodate the service\n   MTU.\n"
- title: 6.3.  Robustness
  contents:
  - "6.3.  Robustness\n   Multicast VPLS solutions SHOULD avoid single points of failures\
    \ or\n   propose technical solutions that make it possible to implement a\n  \
    \ failover mechanism.\n"
- title: 6.4.  Discovering Related Information
  contents:
  - "6.4.  Discovering Related Information\n   The operation of a multicast VPLS solution\
    \ SHALL be as light as\n   possible, and providing automatic configuration and\
    \ discovery SHOULD\n   be considered a high priority.\n   Therefore, in addition\
    \ to the L2VPN discovery requirements in\n   [RFC4665], a multicast VPLS solution\
    \ SHOULD provide a method that\n   dynamically allows multicast membership information\
    \ to be discovered\n   by PEs if the solution supports (A), as defined in Section\
    \ 3.2.  This\n   means, a PE needs to discover multicast membership (e.g., join\
    \ group\n   addresses) that is controlled dynamically from the sites connected\
    \ to\n   that PE.  In addition, a PE needs to discover such information\n   automatically\
    \ from other remote PEs as well in order to limit\n   flooding scope across the\
    \ backbone.\n"
- title: 6.5.  Operation, Administration, and Maintenance
  contents:
  - '6.5.  Operation, Administration, and Maintenance

    '
- title: 6.5.1.  Activation
  contents:
  - "6.5.1.  Activation\n   The activation of multicast enhancement in a solution\
    \ MUST be\n   possible:\n   o  with a VPLS instance granularity.\n   o  with an\
    \ Attachment Circuit granularity (i.e., with a PE-CE\n      Ethernet port granularity,\
    \ or with a VLAN ID granularity when it\n      is a service delimiter).\n   Also\
    \ it SHOULD be possible:\n   o  with a CE granularity (when multiple CEs of the\
    \ same VPN are\n      associated with a common VPLS instance).\n   o  with a distinction\
    \ between multicast reception and emission.\n   o  with a multicast MAC address\
    \ granularity.\n   o  with a customer IP multicast group and/or channel granularity\n\
    \      (when Layer-3 information is consulted).\n   Also it MAY be possible:\n\
    \   o  with a VLAN ID granularity when it is not a service delimiter.\n"
- title: 6.5.2.  Testing
  contents:
  - "6.5.2.  Testing\n   A solution MUST provide a mechanism for testing multicast\
    \ data\n   connectivity and verifying the associated information.  Examples that\n\
    \   SHOULD be supported that are specific to multicast are:\n   -  Testing connectivity\
    \ per multicast MAC address\n   -  Testing connectivity per multicast Layer-3\
    \ group/channel\n   -  Verifying data plane and control plane integrity (e.g.,\
    \ PW,\n      MDTunnel)\n   -  Verifying multicast membership-relevant information\
    \ (e.g.,\n      multicast MAC-addresses/PW-ports associations, Layer-3 group\n\
    \      associations)\n   Operators usually want to test if an end-to-end multicast\
    \ user's\n   connectivity is OK before and after activation.  Such end-to-end\n\
    \   multicast connectivity checking SHOULD enable the end-to-end testing\n   of\
    \ the data path used by that customer's multicast data packets.\n   Specifically,\
    \ end-to-end checking will have a CE-to-CE path test and\n   PE-to-PE path test.\
    \  A solution MUST support the PE-to-PE path test\n   and MAY support the CE-to-CE\
    \ path test.\n   Also, operators will want to make use of a testing mechanism\
    \ for\n   diagnosis and troubleshooting.  In particular, a solution SHOULD be\n\
    \   able to monitor information describing how client multicast traffic\n   is\
    \ carried over the SP network.  Note that if a solution supports\n   frequent\
    \ dynamic membership changes with optimized transport,\n   troubleshooting within\
    \ the SP's network will tend to be difficult.\n"
- title: 6.5.3.  Performance Management
  contents:
  - "6.5.3.  Performance Management\n   Mechanisms to monitor multicast-specific parameters\
    \ and statistics\n   MUST be offered to the SP.\n      (Note: This part has a\
    \ number of similar characteristics to\n      requirements for Layer 3 Multicast\
    \ VPN [RFC4834].)\n   A solution MUST provide SPs with access to:\n   -  Multicast\
    \ traffic statistics (total traffic forwarded, incoming,\n      outgoing, dropped,\
    \ etc., by period of time).\n   A solution SHOULD provide access to:\n   -  Information\
    \ about a customer's multicast resource usage (the\n      amount of multicast\
    \ state and throughput).\n   -  Performance information related to multicast traffic\
    \ usage, e.g.,\n      one-way delay, jitter, loss, delay variations (the difference\
    \ in\n      one-way delay for a solitary multicast group/stream from a single,\n\
    \      source PE to multiple receiver PEs), etc.\n   -  Alarms when limits are\
    \ reached on such resources.\n   -  Statistics on decisions related to how client\
    \ traffic is carried\n      on MDTunnels (e.g., \"How much traffic was switched\
    \ onto a\n      multicast tree dedicated to such groups or channels\").\n   -\
    \  Statistics on parameters that could help the provider to evaluate\n      its\
    \ optimality/state trade-off.\n   All or part of this information SHOULD be made\
    \ available through\n   standardized SNMP MIB Modules (Management Information\
    \ Base).\n"
- title: 6.5.4.  Fault Management
  contents:
  - "6.5.4.  Fault Management\n   A multicast VPLS solution needs to consider those\
    \ management steps\n   taken by SPs below:\n   o  Fault detection\n         A\
    \ solution MUST provide tools that detect group membership/\n         reachability\
    \ failure and traffic looping for multicast\n         transport.  It is anticipated\
    \ that such tools are coordinated\n         with the testing mechanisms mentioned\
    \ in Section 6.5.2.\n         In particular, such mechanisms SHOULD be able to\
    \ detect a\n         multicast failure quickly, (on par with unicast cases). \
    \ It\n         SHOULD also avoid situations where multicast traffic has been\n\
    \         in a failure state for a relatively long time while unicast\n      \
    \   traffic remains operational.  If such a situation were to\n         occur,\
    \ it would end up causing problems with customer\n         applications that depend\
    \ on a combination of unicast and\n         multicast forwarding.\n         With\
    \ multicast, there may be many receivers associated with a\n         particular\
    \ multicast stream/group.  As the number of receivers\n         increases, the\
    \ number of places (typically nearest the\n         receivers) required to detect\
    \ a fault will increase\n         proportionately.  This raises concerns over\
    \ the scalability of\n         fault detection in large multicast deployments.\
    \  Consequently,\n         a fault detection solution SHOULD scale well; in particular,\
    \ a\n         solution should consider key metrics for scalability as\n      \
    \   described in Section 6.1.2.\n   o  Fault notification\n         A solution\
    \ MUST also provide fault notification and trouble\n         tracking mechanisms\
    \ (e.g., SNMP-trap and syslog).\n         In case of multicast, one point of failure\
    \ often affects a\n         number of downstream routers/receivers that might\
    \ be able to\n         raise a notification.  Hence, notification messages MAY\
    \ be\n         summarized or compressed for operators' ease of management.\n \
    \  o  Fault isolation\n         A solution MUST provide diagnostic/troubleshooting\
    \ tools for\n         multicast as well.  Also, it is anticipated that such tools\
    \ are\n         coordinated with the testing mechanisms mentioned in\n       \
    \  Section 6.5.2.\n         In particular, a solution needs to correctly identify\
    \ the area\n         inside a multicast group impacted by the failure.  A solution\n\
    \         SHOULD be able to diagnose if an entire multicast group is\n       \
    \  faulty or if some specific destinations are still alive.\n"
- title: 6.6.  Security
  contents:
  - '6.6.  Security

    '
- title: 6.6.1.  Security Threat Analysis
  contents:
  - "6.6.1.  Security Threat Analysis\n   In multicast VPLS, there is a concern that\
    \ one or more customer nodes\n   (presumably untrusted) might cause multicast-related\
    \ attacks to the\n   SP network.  There is a danger that it might compromise some\n\
    \   components that belong to the whole system.\n   This subsection states possible\
    \ security threats relevant to the\n   system and whether or not they are protected\
    \ against.\n   General security consideration about a base VPLS (as part of L2VPNs)\n\
    \   is referred to in [RFC4665].  The following is the threat analysis\n   list\
    \ that is inherent to multicast VPLS.\n   (a)  Attack by a huge amount of multicast\
    \ control packets.\n        There is a threat that a CE joins too many multicast\
    \ groups and\n        causes Denial of Service (DoS).  This is caused by sending\
    \ a\n        large number of join/prune messages in a short time and/or\n    \
    \    putting a large variety of group addresses in join/prune\n        messages.\
    \  This attack will waste PE's control resources (e.g.,\n        CPU, memory)\
    \ that examine customer control messages (for solving\n        Issue A in Section\
    \ 3.2), and it will not continue expected\n        services for other trusted\
    \ customers.\n   (b)  Attack by invalid/malformed multicast control packets.\n\
    \        There is a threat that a CE sends invalid or malformed control\n    \
    \    packets that might corrupt PE, which will cause a DoS attack.\n        In\
    \ particular, a CE might be spoofing legitimate source/group IP\n        multicast\
    \ addresses in such control packets (in PIM, IGMP, etc.)\n        and source/destination\
    \ MAC addresses as Layer-2 frames.\n   (c)  Attack by rapid state change of multicast.\n\
    \        If a malicious CE changes multicast state by sending control\n      \
    \  packets in an extremely short period, this might affect PE's\n        control\
    \ resources (e.g., CPU, memory) to follow such state\n        changes.  Besides,\
    \ it might also affect PE/P's control resources\n        if MDTunnel inside the\
    \ core is dynamically created in\n        conjunction with customer's multicast\
    \ group.\n   (d)  Attack by high volume of multicast/broadcast data traffic.\n\
    \        A malicious CE might send a very high volume of multicast and/or\n  \
    \      broadcast data to a PE.  If that PE does not provide any\n        safeguards,\
    \ it will cause excessive replication in the SP\n        network and the bandwidth\
    \ resources for other trusted customers\n        might be exhausted.\n   (e) \
    \ Attack by high volume of unknown destination unicast data\n        traffic.\n\
    \        A malicious CE can send a high volume of unknown unicast to a\n     \
    \   PE.  Generally, according to VPLS architecture, that PE must\n        flood\
    \ such unknown traffic to all corresponding PEs in the same\n        VPN.  A variety\
    \ of unknown destinations and huge amount of such\n        frames might cause\
    \ excess traffic in SP network unless there is\n        an appropriate safeguard\
    \ provided.\n"
- title: 6.6.2.  Security Requirements
  contents:
  - "6.6.2.  Security Requirements\n   Based on the analysis in the previous subsection,\
    \ the security\n   requirements from the SP's perspective are shown as follows.\n\
    \   An SP network MUST be invulnerable to malformed or maliciously\n   constructed\
    \ customer traffic.  This applies to both multicast data\n   packets and multicast\
    \ control packets.\n   Moreover, because multicast, broadcast, and unknown-unicast\
    \ need more\n   resources than unicast, an SP network MUST have safeguards against\n\
    \   unwanted or malicious multicast traffic.  This applies to both\n   multicast\
    \ data packets and multicast control packets.\n   Specifically, a multicast VPLS\
    \ solution SHOULD have mechanisms to\n   protect an SP network from:\n   (1) \
    \ invalid multicast MAC addresses\n   (2)  invalid multicast IP addresses\n  \
    \ (3)  malformed Ethernet multicast control protocol frames\n   (4)  malformed\
    \ IP multicast control protocol packets\n   (5)  high volumes of\n      *  valid/invalid\
    \ customer control packets\n      *  valid/invalid customer data packets (broadcast/multicast/\n\
    \         unknown-unicast)\n   Depending on each solution's actual approach to\
    \ tackle with Issue A,\n   or B, or both (see Section 3.2.), there are relationships\
    \ to be\n   highlighted about each item's importance listed above.  First off,\n\
    \   protection against (3) and (4) becomes significantly important if a\n   solution\
    \ supports solving Issue A, and PEs are processing customer's\n   Ethernet/IP\
    \ multicast control messages from CE.  Moreover, protection\n   against (2) should\
    \ also be much focused because PIM/IGMP snooping\n   will usually require that\
    \ PE's data forwarding be based on IP\n   addresses.  By contrast, however, if\
    \ a solution is solving only Issue\n   B, not A, then PEs might never process\
    \ the customer's multicast\n   control messages at all; they do not perform IP\
    \ address-based\n   forwarding, but they do perform native Ethernet forwarding.\
    \  If so,\n   there is relatively less danger about (2), (3), and (4) compared\
    \ to\n   the first case.\n   The following are a few additional guidelines in\
    \ detail.\n      For protecting against threat (a), a solution SHOULD support\n\
    \      imposing some bounds on the quantity of state used by a VPN to be\n   \
    \   imposed in order to prevent state resource exhaustion (i.e., lack\n      of\
    \ memory, CPU etc.).  In this case, the bounds MUST be\n      configurable per\
    \ VPN basis, not the total of various VPNs so that\n      SP can isolate the resource\
    \ waste that is caused by any malicious\n      customer.\n      For protecting\
    \ against threat (d) and (e), a solution SHOULD\n      support performing traffic\
    \ policing to limit the unwanted data\n      traffic shown above.  In this case,\
    \ while policing MAY be\n      configurable to the sum of unicast, multicast,\
    \ broadcast, and\n      unknown unicast traffic, it SHOULD also be configurable\
    \ to each\n      such type of traffic individually in order to prevent physical\n\
    \      resource exhaustion (i.e., lack of bandwidth and degradation of\n     \
    \ throughput).  If the policing limit is configured on total traffic\n      only,\
    \ there will be a concern that one customer's huge multicast\n      might close\
    \ other irrelevant unicast traffic.  If it can be\n      configured individually,\
    \ this concern will be avoided.  Moreover,\n      such a policing mechanism MUST\
    \ be configurable per VPN basis, not\n      the total of various VPNs to isolate\
    \ malicious customer's traffic\n      from others.\n      For protecting against\
    \ threat (c), a solution SHOULD be able to\n      limit frequent changes of group\
    \ membership by customers.  For\n      example, PEs might support a dampening\
    \ mechanism that throttles\n      their multicast state changes if the customers\
    \ are changing too\n      excessively.  Also, if MDTunnel is provided being tightly\
    \ coupled\n      to dynamic changes of customer's multicast domain, it is also\n\
    \      effective to delay building the tunnel when customer's state is\n     \
    \ changed frequently.\n      Protecting against threat (b) might not be an easy\
    \ task.\n      Generally, checking the legitimacy of a customer's IP multicast\n\
    \      control packets will eventually require the authentication between\n  \
    \    PE and CE in Layer-3; however, L2VPN (including VPLS) by its\n      nature\
    \ does not usually assume Layer-3-based security mechanism\n      supported at\
    \ PE-CE level.\n      The ramification of this fact is that there remains a possibility\n\
    \      that a PE's control plain might be badly affected by corrupted\n      multicast\
    \ control packets that the PE is examining.  Hence, each\n      PE implementation\
    \ will need to make an effort to minimize this\n      impact from malicious customers\
    \ and isolate it from other trusted\n      customers as much as possible.\n  \
    \    Nevertheless, it is possible to mitigate this threat to some\n      degree.\
    \  For example, a PE MAY support a filter mechanism about\n      MAC and IP addresses\
    \ in a Layer-2/Layer-3 header and a filter\n      mechanism about source/group\
    \ addresses in the multicast join/prune\n      messages.  This will help a PE\
    \ to validate customers' control\n      messages, to a certain extent.\n"
- title: 6.7.  Hierarchical VPLS support
  contents:
  - "6.7.  Hierarchical VPLS support\n   A VPLS multicast solution SHOULD allow a\
    \ hierarchical VPLS (H-VPLS)\n   [RFC4762] service model.  In other words, a solution\
    \ is expected to\n   operate seamlessly with existing hub and spoke PW connectivity.\n\
    \   Note that it is also important to take into account the case of\n   redundant\
    \ spoke connections between U-PEs and N-PEs.\n"
- title: 6.8.  L2VPN Wholesale
  contents:
  - "6.8.  L2VPN Wholesale\n   A solution MUST allow a situation where one SP is offering\
    \ L2VPN\n   services to another SP.  One example here is a wholesale model where\n\
    \   one VPLS interconnects other SPs' VPLS or 802.1D network islands.\n   For\
    \ customer SPs, their multicast forwarding can be optimized by\n   making use\
    \ of multicast VPLS in the wholesaler SP.\n"
- title: 7.  Security Considerations
  contents:
  - "7.  Security Considerations\n   Security concerns and requirements for a base\
    \ VPLS solution are\n   described in [RFC4665].\n   In addition, there are security\
    \ considerations specific to multicast\n   VPLS.  Thus, a set of security issues\
    \ have been identified that MUST\n   be addressed when considering the design\
    \ and deployment of multicast\n   VPLS.  Such issues have been described in Sections\
    \ 5.5 and 6.6.\n   In particular, security requirements from the view of customers\
    \ are\n   shown in Section 5.5.  Security requirements from the view of\n   providers\
    \ are shown in Section 6.6.  Section 6.6.1 conducts security\n   threat analysis\
    \ about the provider's whole system.  Section 6.6.2\n   explains how each threat\
    \ can be addressed or mitigated.\n"
- title: 8.  Acknowledgments
  contents:
  - "8.  Acknowledgments\n   The authors thank the contributors of [RFC4834] since\
    \ the structure\n   and content of this document were, for some sections, largely\n\
    \   inspired by [RFC4834].\n   The authors also thank Yuichi Ikejiri, Jerry Ash,\
    \ Bill Fenner, Vach\n   Kompella, Shane Amante, Ben Niven-Jenkins, and Venu Hemige\
    \ for their\n   valuable reviews and feedback.\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [RFC2119]   Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n               Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC4665]   Augustyn, W. and Y. Serbest, \"Service Requirements for\n\
    \               Layer 2 Provider-Provisioned Virtual Private Networks\",\n   \
    \            RFC 4665, September 2006.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [802.1D]    IEEE Std 802.1D-2004, \"IEEE Standard\
    \ for Local and\n               Metropolitan Area Networks: Media Access Control\
    \ (MAC)\n               Bridges\", 2004.\n   [802.1ag]   IEEE Std 802.1ag-2007,\
    \ \"Virtual Bridged Local Area\n               Networks - Amendment 5: Connectivity\
    \ Fault Management\",\n               2007.\n   [802.1s]    IEEE Std 802.1s-2002,\
    \ \"Virtual Bridged Local Area\n               Networks - Amendment 3: Multiple\
    \ Spanning Trees\", 2002.\n   [CGMP]      Farinacci, D., Tweedly, A., and T. Speakman,\
    \ \"Cisco Group\n               Management Protocol (CGMP)\", 1996/1997,\n   \
    \            <ftp://ftpeng.cisco.com/ipmulticast/specs/cgmp.txt>.\n   [LDP-P2MP]\
    \  Minei, I., Ed., Kompella, K., Wijnands, I., and B.\n               Thomas,\
    \ \"Label Distribution Protocol Extensions for\n               Point-to-Multipoint\
    \ and Multipoint-to-Multipoint Label\n               Switched Paths\", Work in\
    \ Progress, May 2008.\n   [RFC1112]   Deering, S., \"Host extensions for IP multicasting\"\
    ,\n               STD 5, RFC 1112, August 1989.\n   [RFC2236]   Fenner, W., \"\
    Internet Group Management Protocol, Version\n               2\", RFC 2236, November\
    \ 1997.\n   [RFC2475]   Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z.,\n\
    \               and W. Weiss, \"An Architecture for Differentiated\n         \
    \      Services\", RFC 2475, December 1998.\n   [RFC2710]   Deering, S., Fenner,\
    \ W., and B. Haberman, \"Multicast\n               Listener Discovery (MLD) for\
    \ IPv6\", RFC 2710,\n               October 1999.\n   [RFC3376]   Cain, B., Deering,\
    \ S., Kouvelas, I., Fenner, B., and A.\n               Thyagarajan, \"Internet\
    \ Group Management Protocol, Version\n               3\", RFC 3376, October 2002.\n\
    \   [RFC3488]   Wu, I. and T. Eckert, \"Cisco Systems Router-port Group\n    \
    \           Management Protocol (RGMP)\", RFC 3488, February 2003.\n   [RFC3809]\
    \   Nagarajan, A., \"Generic Requirements for Provider\n               Provisioned\
    \ Virtual Private Networks (PPVPN)\", RFC 3809,\n               June 2004.\n \
    \  [RFC3810]   Vida, R. and L. Costa, \"Multicast Listener Discovery\n       \
    \        Version 2 (MLDv2) for IPv6\", RFC 3810, June 2004.\n   [RFC3973]   Adams,\
    \ A., Nicholas, J., and W. Siadak, \"Protocol\n               Independent Multicast\
    \ - Dense Mode (PIM-DM): Protocol\n               Specification (Revised)\", RFC\
    \ 3973, January 2005.\n   [RFC4541]   Christensen, M., Kimball, K., and F. Solensky,\n\
    \               \"Considerations for Internet Group Management Protocol\n    \
    \           (IGMP) and Multicast Listener Discovery (MLD) Snooping\n         \
    \      Switches\", RFC 4541, May 2006.\n   [RFC4601]   Fenner, B., Handley, M.,\
    \ Holbrook, H., and I. Kouvelas,\n               \"Protocol Independent Multicast\
    \ - Sparse Mode (PIM-SM):\n               Protocol Specification (Revised)\",\
    \ RFC 4601, August 2006.\n   [RFC4607]   Holbrook, H. and B. Cain, \"Source-Specific\
    \ Multicast for\n               IP\", RFC 4607, August 2006.\n   [RFC4664]   Andersson,\
    \ L. and E. Rosen, \"Framework for Layer 2\n               Virtual Private Networks\
    \ (L2VPNs)\", RFC 4664,\n               September 2006.\n   [RFC4761]   Kompella,\
    \ K. and Y. Rekhter, \"Virtual Private LAN Service\n               (VPLS) Using\
    \ BGP for Auto-Discovery and Signaling\",\n               RFC 4761, January 2007.\n\
    \   [RFC4762]   Lasserre, M. and V. Kompella, \"Virtual Private LAN\n        \
    \       Service (VPLS) Using Label Distribution Protocol (LDP)\n             \
    \  Signaling\", RFC 4762, January 2007.\n   [RFC4834]   Morin, T., Ed., \"Requirements\
    \ for Multicast in Layer 3\n               Provider-Provisioned Virtual Private\
    \ Networks (PPVPNs)\",\n               RFC 4834, April 2007.\n   [RFC4875]   Aggarwal,\
    \ R., Papadimitriou, D., and S. Yasukawa,\n               \"Extensions to Resource\
    \ Reservation Protocol - Traffic\n               Engineering (RSVP-TE) for Point-to-Multipoint\
    \ TE Label\n               Switched Paths (LSPs)\", RFC 4875, May 2007.\n   [RFC5015]\
    \   Handley, M., Kouvelas, I., Speakman, T., and L. Vicisano,\n              \
    \ \"Bidirectional Protocol Independent Multicast (BIDIR-\n               PIM)\"\
    , RFC 5015, October 2007.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Yuji Kamite (editor)\n   NTT Communications Corporation\n\
    \   Granpark Tower\n   3-4-1 Shibaura, Minato-ku\n   Tokyo  108-8118\n   Japan\n\
    \   EMail: y.kamite@ntt.com\n   Yuichiro Wada\n   NTT\n   3-9-11 Midori-cho\n\
    \   Musashino-shi\n   Tokyo  180-8585\n   Japan\n   EMail: wada.yuichiro@lab.ntt.co.jp\n\
    \   Yetik Serbest\n   AT&T Labs\n   9505 Arboretum Blvd.\n   Austin, TX  78759\n\
    \   USA\n   EMail: yetik_serbest@labs.att.com\n   Thomas Morin\n   France Telecom\
    \ R&D\n   2, avenue Pierre-Marzin\n   22307 Lannion Cedex\n   France\n   EMail:\
    \ thomas.morin@francetelecom.com\n   Luyuan Fang\n   Cisco Systems, Inc.\n   300\
    \ Beaver Brook Road\n   Boxborough, MA  01719\n   USA\n   EMail: lufang@cisco.com\n"
