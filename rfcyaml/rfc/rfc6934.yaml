- title: __initial_text__
  contents:
  - "         Applicability of the Access Node Control Mechanism to\n      Broadband\
    \ Networks Based on Passive Optical Networks (PONs)\n"
- title: Abstract
  contents:
  - "Abstract\n   The purpose of this document is to provide applicability of the\n\
    \   Access Node Control Mechanism to broadband access based on Passive\n   Optical\
    \ Networks (PONs).  The need for an Access Node Control\n   Mechanism between\
    \ a Network Access Server (NAS) and an Access Node\n   Complex, composed of a\
    \ combination of Optical Line Termination (OLT)\n   and Optical Network Termination\
    \ (ONT) elements, is described in a\n   multi-service reference architecture in\
    \ order to perform QoS-related,\n   service-related, and subscriber-related operations.\
    \  The Access Node\n   Control Mechanism is also extended for interaction between\
    \ components\n   of the Access Node Complex (OLT and ONT).  The Access Node Control\n\
    \   Mechanism will ensure that the transmission of information between\n   the\
    \ NAS and Access Node Complex (ANX) and between the OLT and ONT\n   within an\
    \ ANX does not need to go through distinct element managers\n   but rather uses\
    \ direct device-to-device communication and stays on\n   net.  This allows for\
    \ performing access-link-related operations\n   within those network elements\
    \ to meet performance objectives.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc6934.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2013 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Terminology .....................................................4\n  \
    \ 3. Motivation for Explicit Extension of ANCP to FTTx PON ...........6\n   4.\
    \ Reference Model for PON-Based Broadband Access Network ..........7\n      4.1.\
    \ Functional Blocks ..........................................9\n           4.1.1.\
    \ Home Gateway ........................................9\n           4.1.2. PON\
    \ Access ..........................................9\n           4.1.3. Access\
    \ Node Complex ................................10\n           4.1.4. Access Node\
    \ Complex Uplink to the NAS ..............10\n           4.1.5. Aggregation Network\
    \ ................................10\n           4.1.6. Network Access Server\
    \ ..............................10\n           4.1.7. Regional Network ...................................10\n\
    \      4.2. Access Node Complex Control Reference Architecture\n           Options\
    \ ...................................................11\n           4.2.1. ANCP+OMCI\
    \ ANX Control ..............................11\n           4.2.2. All-ANCP ANX\
    \ Control ...............................12\n   5. Concept of Access Node Control\
    \ Mechanism for PON-Based Access ..13\n   6. Multicast ......................................................16\n\
    \      6.1. Multicast Conditional Access ..............................16\n  \
    \    6.2. Multicast Admission Control ...............................18\n    \
    \  6.3. Multicast Accounting ......................................30\n   7. Remote\
    \ Connectivity Check ......................................31\n   8. Access Topology\
    \ Discovery ......................................32\n   9. Access Loop Configuration\
    \ ......................................34\n   10. Security Considerations .......................................34\n\
    \   11. Differences in ANCP Applicability between DSL and PON .........35\n  \
    \ 12. ANCP versus OMCI between the OLT and ONT/ONU ..................36\n   13.\
    \ Acknowledgements ..............................................37\n   14. References\
    \ ....................................................37\n      14.1. Normative\
    \ References .....................................37\n      14.2. Informative\
    \ References ...................................38\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Passive Optical Networks (PONs) based on Broadband PON (BPON)\n\
    \   [G.983.1] and Gigabit PON (GPON) [G.984.1] are being deployed across\n   carrier\
    \ networks.  There are two models for PON deployment: Fiber to\n   the Building/Curb\
    \ (FTTB/FTTC) and Fiber to the Premises (FTTP).  In\n   the FTTB/C deployment,\
    \ the last-mile connectivity to the subscriber\n   premises is provided over the\
    \ local copper loop, often using Very\n   High Speed Digital Subscriber Line (VDSL).\
    \  In the FTTP case, PON\n   extends to the premises of the subscriber.  In addition,\
    \ there are\n   four main PON technologies: (1) BPON, (2) GPON, (3) 10-Gigabit\
    \ PON\n   (XG-PON), and (4) Ethernet PON (EPON).  This document describes the\n\
    \   applicability of the Access Node Control Protocol (ANCP) in the\n   context\
    \ of FTTB/C and FTTP deployments, focusing on BPON, GPON, and\n   XG-PON.  Architectural\
    \ considerations lead to different ANCP\n   compositions.  Therefore, the composition\
    \ of ANCP communication\n   between Access Nodes (ANs) and Network Access Servers\
    \ (NASs) is\n   described using different models.\n   BPON, GPON, and XG-PON in\
    \ FTTP deployments provide large bandwidth in\n   the first mile, bandwidth that\
    \ is an order of magnitude larger than\n   that provided by xDSL.  In the downstream\
    \ direction, BPON provides\n   622 Mbit/s per PON, GPON provides 2.4 Gbit/s, and\
    \ XG-PON provides 10\n   Gbit/s.\n   In residential deployments, the number of\
    \ homes sharing the same PON\n   is limited by the technology and the network\
    \ engineering rules.\n   Typical deployments have 32-64 homes per PON.\n   The\
    \ motive behind BPON, GPON, and XG-PON deployment is to provide\n   triple-play\
    \ services over IP: voice, video, and data.  Voice is\n   generally low bandwidth\
    \ but has requirements for low delay, low\n   jitter, and low packet loss.  Data\
    \ services (e.g., Internet services)\n   often require high throughput and can\
    \ tolerate medium latency.  Data\n   services may include multimedia content download\
    \ such as video.\n   However, in that case, the video content is not required\
    \ to be real-\n   time, and/or it is low-quality video.  Video services, on the\
    \ other\n   hand, are targeted to deliver Standard Definition or High Definition\n\
    \   video content in real time or near real time, depending on the\n   service\
    \ model.  Standard Definition content using MPEG2 encoding\n   requires on the\
    \ order of 3.75 Mbit/s per stream while High Definition\n   content using MPEG2\
    \ encoding requires 15-19 Mbit/s depending on the\n   level of compression used.\
    \  Video services require low jitter and low\n   packet loss with low start-time\
    \ latency.  There are two types of\n   video services: on demand and broadcast\
    \ (known also as linear\n   programming content).  While linear programming content\
    \ can be\n   provided over Layer 1 on the PON, the focus in this document is on\n\
    \   delivering linear programming content over IP to the subscriber using\n  \
    \ IP multicast.  Video on Demand (VoD) is also considered for delivery\n   to\
    \ the subscriber over IP using a unicast session model.\n   Providing simultaneous\
    \ triple-play services over IP with unicast\n   video and multicast video, VoIP,\
    \ and data requires an architecture\n   that preserves the quality of service\
    \ of each service.  Fundamental\n   to this architecture is ensuring that the\
    \ video content (unicast and\n   multicast) delivered to the subscriber does not\
    \ exceed the bandwidth\n   allocated to the subscriber for video services.  Architecture\
    \ models\n   often ensure that data is guaranteed a minimum bandwidth and that\n\
    \   VoIP is guaranteed its own bandwidth.  In addition, QoS control\n   across\
    \ services is often performed at a Network Access Server (NAS),\n   often referred\
    \ to as Broadband Network Gateway (BNG) for subscriber\n   management, per subscriber\
    \ and shared link resources.  Efficient\n   multicast video services require enabling\
    \ multicast services in the\n   access network between the subscriber and the\
    \ subscriber management\n   platform.  In the FTTP/B/C PON environment, this implies\
    \ enabling IP\n   multicast on the ANX composed of the Optical Network Terminal\
    \ (ONT)\n   or Unit (ONU) and Optical Line Terminal (OLT), as applicable.  This\n\
    \   is as opposed to Digital Subscriber Line (DSL) deployments where\n   multicast\
    \ is enabled on the DSL Access Multiplexer (DSLAM) only.  The\n   focus in this\
    \ document will be on the ANCP requirements needed for\n   coordinated admission\
    \ control of unicast and multicast video in\n   FTTP/B/C PON environments between\
    \ the ANX and the NAS, specifically\n   focusing on bandwidth dedicated for multicast\
    \ and shared bandwidth\n   between multicast and unicast.\n   [RFC5851] provides\
    \ the framework and requirements for coordinated\n   admission control between\
    \ a NAS and an AN with special focus on DSL\n   deployments.  This document extends\
    \ that framework and the related\n   requirements to explicitly address PON deployments.\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   -  PON (Passive Optical Network) [G.983.1][G.984.1]: a point-to-\n\
    \      multipoint FTTP network architecture in which unpowered splitters\n   \
    \   are used to enable the splitting of an optical signal from a\n      central\
    \ office on a single optical fiber to multiple premises.  Up\n      to 32-128\
    \ may be supported on the same PON.  A PON configuration\n      consists of an\
    \ Optical Line Terminal (OLT) at the service\n      provider's central office\
    \ (CO) and a number of Optical Network\n      Units or Terminals (ONUs/ONTs) near\
    \ end users, with an Optical\n      Distribution Network (ODN) composed of fibers\
    \ and splitters\n      between them.  A PON configuration reduces the amount of\
    \ fiber and\n      CO equipment required compared with point-to-point architectures.\n\
    \   -  Access Node Complex (ANX): composed of two geographically\n      separated\
    \ functional elements -- OLT and ONU/ONT.  The general\n      term Access Node\
    \ Complex (ANX) will be used when describing a\n      functionality that does\
    \ not depend on the physical location but\n      rather on the \"black box\" behavior\
    \ of OLT and ONU/ONT.\n   -  Optical Line Terminal (OLT): is located in the service\
    \ provider's\n      central office (CO).  It terminates and aggregates multiple\
    \ PONs\n      (providing fiber access to multiple premises or neighborhoods) on\n\
    \      the subscriber side and interfaces with the Network Access Server\n   \
    \   (NAS) that provides subscriber management.\n   -  Optical Network Terminal\
    \ (ONT): terminates PON on the network side\n      and provides PON adaptation.\
    \  The subscriber side interface and\n      the location of the ONT are dictated\
    \ by the type of network\n      deployment.  For an FTTP deployment (with fiber\
    \ all the way to the\n      apartment or living unit), ONT has Ethernet (Fast\
    \ Ethernet (FE) /\n      Gigabit Ethernet (GE) / Multimedia over Coax Alliance\
    \ (MoCA))\n      connectivity with the Home Gateway (HGW) / Customer Premises\n\
    \      Equipment (CPE).  In certain cases, one ONT may provide\n      connections\
    \ to more than one Home Gateway at the same time.\n   -  Optical Network Unit\
    \ (ONU): a generic term denoting a device that\n      terminates any one of the\
    \ distributed (leaf) endpoints of an\n      Optical Distribution Network (ODN),\
    \ implements a PON protocol, and\n      adapts PON PDUs to subscriber service\
    \ interfaces.  In the case of\n      a multi-dwelling unit (MDU) or multi-tenant\
    \ unit (MTU), a multi-\n      subscriber ONU typically resides in the basement\
    \ or a wiring\n      closet (FTTB case) and has FE/GE/Ethernet over native Ethernet\n\
    \      link or over xDSL (typically VDSL) connectivity with each CPE at\n    \
    \  the subscriber premises.  In the case where fiber is terminated\n      outside\
    \ the premises (neighborhood or curb side) on an ONT/ONU,\n      the last-leg-premises\
    \ connections could be via existing or new\n      copper, with xDSL physical layer\
    \ (typically VDSL).  In this case,\n      the ONU effectively is a \"PON-fed DSLAM\"\
    .\n   -  Network Access Server (NAS): network element that aggregates\n      subscriber\
    \ traffic from a number of ANs or ANXs.  The NAS is often\n      an injection\
    \ point for policy management and IP QoS in the access\n      network.  It is\
    \ also referred to as Broadband Network Gateway\n      (BNG) or Broadband Remote\
    \ Access Server (BRAS).\n   -  Home Gateway (HGW): network element that connects\
    \ subscriber\n      devices to the AN or ANX and the access network.  In the case\
    \ of\n      xDSL, the Home Gateway is an xDSL network termination that could\n\
    \      either operate as a Layer 2 bridge or as a Layer 3 router.  In the\n  \
    \    latter case, such a device is also referred to as a Routing\n      Gateway\
    \ (RG).  In the case of PON, it is often a Layer 3 routing\n      device with\
    \ the ONT performing PON termination.\n   -  PON-Customer-ID: identifier that\
    \ uniquely identifies the ANX and\n      the access loop logical port on the ANX\
    \ to the subscriber\n      (customer) premises and is used in any interaction\
    \ between NAS and\n      ANX that relates to access loops.  Logically, it is composed\
    \ of\n      information containing identification of the OLT (the OLT may be\n\
    \      physically and directly connected to the NAS), the PON port on the\n  \
    \    OLT, the ONT/ONU, and the port on the ONT/ONU connecting to the\n      subscriber\
    \ HGW.  When acting as a DHCP relay agent, the OLT can\n      encode PON-Customer-ID\
    \ in the \"Agent Circuit ID\" sub-option in\n      Option 82 of the DHCP messages\
    \ [RFC3046].\n"
- title: 3.  Motivation for Explicit Extension of ANCP to FTTx PON
  contents:
  - "3.  Motivation for Explicit Extension of ANCP to FTTx PON\n   The fundamental\
    \ difference between PON and DSL is that a PON is an\n   optical broadcast network\
    \ by definition.  That is, at the PON level,\n   every ONT on the same PON sees\
    \ the same signal.  However, the ONT\n   filters only those PON frames addressed\
    \ to it.  Encryption is used on\n   the PON to prevent eavesdropping.\n   The\
    \ broadcast PON capability is very suitable for delivering\n   multicast content\
    \ to connected premises, maximizing bandwidth usage\n   efficiency on the PON.\
    \  Similar to DSL deployments, enabling\n   multicast on the Access Node Complex\
    \ (ANX) provides for bandwidth use\n   efficiency on the path between the Access\
    \ Node and the NAS as well as\n   improves the scalability of the NAS by reducing\
    \ the amount of\n   multicast traffic being replicated at the NAS.  However, the\n\
    \   broadcast capability on the PON enables the AN (OLT) to send one copy\n  \
    \ on the PON as opposed to one copy to each receiver on the PON.  The\n   PON\
    \ multicast capability can be leveraged in the case of GPON and\n   BPON as discussed\
    \ in this document.\n   Fundamental to leveraging the broadcast capability on\
    \ the PON for\n   multicast delivery is the ability to assign no key, a single\n\
    \   encryption key for all PON frames carrying all multicast channels, or\n  \
    \ a key per set of multicast channels that correspond to a service\n   package.\
    \  When supporting encryption for multicast channels, the\n   encryption key is\
    \ generated by the OLT and sent by the OLT to each\n   targeted ONT via the ONT\
    \ Management and Control Interface (OMCI) as\n   described in Section 15.5.2 of\
    \ ITU-T G.987.3 [G.987.3] for XG-PON.\n   It should be noted that the ONT can\
    \ be a multi-dwelling unit (MDU)\n   ONT with multiple Ethernet ports, each connected\
    \ to a living unit.\n   Thus, the ONT must not only be able to receive a multicast\
    \ frame but\n   must also be able to forward that frame only to the Ethernet port\n\
    \   with receivers for the corresponding channel.\n   In order to implement triple-play\
    \ service delivery with necessary\n   \"quality-of-experience\", including end-to-end\
    \ bandwidth optimized\n   multicast video delivery, there needs to be tight coordination\n\
    \   between the NAS and the ANX.  This interaction needs to be near real-\n  \
    \ time as services are requested via application- or network-level\n   signaling\
    \ by broadband subscribers.  ANCP, as defined in [RFC5851]\n   for DSL based networks,\
    \ is very suitable to realize a control\n   protocol (with transactional exchange\
    \ capabilities) between the PON-\n   enabled ANX and the NAS and also between\
    \ the components comprising\n   the ANX, i.e., between the OLT and the ONT.  Typical\
    \ use cases for\n   ANCP in the PON environment include the following:\n   - \
    \ Access topology discovery\n   -  Access loop configuration\n   -  Multicast\n\
    \      -  Optimized multicast delivery\n      -  Unified video resource control\n\
    \      -  NAS-based provisioning of ANX\n   -  Remote connectivity check\n"
- title: 4.  Reference Model for PON-Based Broadband Access Network
  contents:
  - "4.  Reference Model for PON-Based Broadband Access Network\n   An overall end-to-end\
    \ reference architecture of a PON access network\n   is depicted in Figures 1\
    \ and 2 with ONT serving a single HGW, and\n   ONT/ONU serving multiples HGWs,\
    \ respectively.  An OLT may provide\n   FTTP and FTTB/C access at the same time\
    \ but most likely not on the\n   same PON port.  Specifically, the following PON\
    \ cases are addressed\n   in the context of this reference architecture:\n   -\
    \  BPON with Ethernet uplink to the NAS and ATM on the PON side\n   -  GPON/XG-PON\
    \ with Ethernet uplink to the NAS and Ethernet on the\n      PON side\n   In the\
    \ case of an Ethernet aggregation network that supports new QoS-\n   enabled IP\
    \ services (including Ethernet multicast replication), the\n   architecture builds\
    \ on the reference architecture specified in the\n   Broadband Forum (BBF) [TR-101].\
    \  The Ethernet aggregation network\n   between a NAS and an OLT may be degenerated\
    \ to one or more direct\n   physical Ethernet links.\n   Given the industry move\
    \ towards Ethernet as the new access and\n   aggregation technology for triple-play\
    \ services, the primary focus\n   throughout this document is on GPON/XG-PON and\
    \ BPON with Ethernet\n   between the NAS and the OLT.\n                      \
    \                    Access           Customer\n                             \
    \ <---------Aggregation-------><-Prem->\n                                    \
    \      Network           Network\n                                       +------------------+\n\
    \                                       |  Access Node     |\n               \
    \                        |  Complex (ANX)   |\n         +---------+   +---+  +-----+\
    \  |+---+       +---+ |  +---+\n         |         | +-|NAS|--|Eth  |--||OLT|-<PON>-|ONT|-|--|HGW|\n\
    \   NSP---+Regional | | +---+  |Agg  |  |+---+       +---+ |  +---+\n        \
    \ |Broadband| | +---+  +-----+  +------------------+\n         |Network  |-+-|NAS|\
    \                  |\n   ASP---+         | | +---+                  |\n      \
    \   |         | | +---+                  |\n         +---------+ +-|NAS|     \
    \             |       +---+  +---+\n                       +---|             \
    \     +-<PON>-|ONT|--|HGW|\n                                                 \
    \ |   +---+  +---+\n                                                  |\n    \
    \                                              |   +---+  +---+\n            \
    \                                      +---|ONT|--|HGW|\n                    \
    \                                  +---+  +---+\n         HGW      : Home Gateway\n\
    \         NAS      : Network Access Server\n         PON      : Passive Optical\
    \ Network\n         OLT      : Optical Line Terminal\n         ONT      : Optical\
    \ Network Terminal\n                     Figure 1:  Access Network with PON\n\
    \                                                         FE/GE/VDSL\n       \
    \                                                  +---+ +---+\n             \
    \                   +----------------+       |   |-|HGW|\n         +---------+\
    \   +-----+  | +-----+  +----+|       |   | +---+\n         |         | +-|NAS\
    \  |--| |Eth  |--|OLT||-<PON>- |   |\n   NSP---+Regional | | +-----+  | |Agg \
    \ |  |    ||     | |ONT| +---+\n         |Broadband| |          | |     |  | \
    \   ||     | | or|-|HGW|\n         |Network  | | +-----+  | +-----+  +----+| \
    \    | |ONU| +---+\n         |         |-+-|NAS  |  +----------------+     | |\
    \   |\n   ASP---+         | | +-----+                         | |   | +---+\n\
    \         |         | | +-----+                         | |   |-|HGW|\n      \
    \   +---------+ +-|NAS  |                         | +---+ +---+\n            \
    \           +-----+                         |\n                              \
    \                         | +---+ +---+\n                                    \
    \                   +-|ONT|-|HGW|\n                                          \
    \               +---+ +---+\n   Figure 2: FTTP/FTTB/C with Multi-Subscriber ONT/ONU\
    \ Serving MTUs/MDUs\n   The following sections describe the functional blocks\
    \ and network\n   segments in the PON access reference architecture.\n"
- title: 4.1.  Functional Blocks
  contents:
  - '4.1.  Functional Blocks

    '
- title: 4.1.1.  Home Gateway
  contents:
  - "4.1.1.  Home Gateway\n   The Home Gateway (HGW) connects the different CPEs to\
    \ the ANX and the\n   access network.  In the case of PON, the HGW is a Layer\
    \ 3 router.  In\n   this case, the HGW performs IP configuration of devices within\
    \ the\n   home via DHCP and performs Network Address and Port Translation\n  \
    \ (NAPT) between the LAN and WAN side.  In the case of FTTP/B/C, the\n   HGW connects\
    \ to the ONT/ONU over an Ethernet interface.  That\n   Ethernet interface could\
    \ be over an Ethernet physical port or over\n   another medium.  In the case of\
    \ FTTP, it is possible to have a single\n   box GPON CPE solution where the ONT\
    \ encompasses the HGW functionality\n   as well as the GPON adaptation function.\n"
- title: 4.1.2.  PON Access
  contents:
  - "4.1.2.  PON Access\n   PON access is composed of the ONT/ONU and OLT.  PON ensures\
    \ physical\n   connectivity between the ONT/ONU at the customer premises and the\n\
    \   OLT.  PON framing can be BPON or GPON.  The protocol encapsulation on\n  \
    \ BPON is based on multi-protocol encapsulation over ATM Adaptation\n   Layer\
    \ 5 (AAL5), defined in [RFC2684].  This covers PPP over Ethernet\n   (PPPoE, defined\
    \ in [RFC2516]) or IP over Ethernet (IPoE).  The\n   protocol encapsulation on\
    \ GPON is always IPoE.  In all cases, the\n   connection between the AN (OLT)\
    \ and the NAS (or BNG) is assumed to be\n   Ethernet in this document.\n"
- title: 4.1.3.  Access Node Complex
  contents:
  - "4.1.3.  Access Node Complex\n   The Access Node Complex (ANX) is composed of\
    \ OLT and ONT/ONU and is\n   defined in Section 2.\n"
- title: 4.1.4.  Access Node Complex Uplink to the NAS
  contents:
  - "4.1.4.  Access Node Complex Uplink to the NAS\n   The ANX uplink connects the\
    \ OLT to the NAS.  The fundamental\n   requirements for the ANX uplink are to\
    \ provide traffic aggregation,\n   Class of Service distinction, customer separation,\
    \ and traceability.\n   This can be achieved using an ATM or an Ethernet-based\
    \ technology.\n   As stated earlier, the focus in this document is on Ethernet.\n"
- title: 4.1.5.  Aggregation Network
  contents:
  - "4.1.5.  Aggregation Network\n   The aggregation network provides traffic aggregation\
    \ towards the NAS.\n   The aggregation network is assumed to be Ethernet in this\
    \ document.\n"
- title: 4.1.6.  Network Access Server
  contents:
  - "4.1.6.  Network Access Server\n   The NAS is a network device that aggregates\
    \ multiplexed subscriber\n   traffic from a number of ANXs.  The NAS plays a central\
    \ role in per-\n   subscriber policy enforcement and QoS.  It is often referred\
    \ to as a\n   Broadband Network Gateway (BNG) or Broadband Remote Access Server\n\
    \   (BRAS).  A detailed definition of the NAS is given in [RFC2881].  The\n  \
    \ NAS interfaces to the aggregation network by means of 802.1Q or 802.1\n   Q-in-Q\
    \ Ethernet interfaces and towards the Regional Network by means\n   of transport\
    \ interfaces (e.g., GigE, PPP over Synchronous Optical\n   Network (SONET)). \
    \ The NAS functionality corresponds to the BNG\n   functionality described in\
    \ BBF TR-101 [TR-101].  In addition, the NAS\n   supports the Access Node Control\
    \ functionality defined for the\n   respective use cases in this document.\n"
- title: 4.1.7.  Regional Network
  contents:
  - "4.1.7.  Regional Network\n   The Regional Network connects one or more NASs and\
    \ associated access\n   networks to Network Service Providers (NSPs) and Application\
    \ Service\n   Providers (ASPs).  The NSP authenticates access and provides and\n\
    \   manages the IP address to subscribers.  It is responsible for overall\n  \
    \ service assurance and includes Internet Service Providers (ISPs).\n   The ASP\
    \ provides application services to the application subscriber\n   (gaming, video,\
    \ content on demand, IP telephony, etc.).  The NAS can\n   be part of the NSP\
    \ network.  Similarly, the NSP can be the ASP.\n"
- title: 4.2.  Access Node Complex Control Reference Architecture Options
  contents:
  - "4.2.  Access Node Complex Control Reference Architecture Options\n   Section\
    \ 3 details the differences between xDSL access and PON access\n   and the implication\
    \ of these differences on DSLAM control versus OLT\n   and ONT/ONU (ANX) control.\
    \  The following sections describe two\n   reference models: (1) ANCP+OMCI ANX\
    \ control and (2) All-ANCP ANX\n   control.  That is, the two models differ in\
    \ the ONT/ONU control\n   within the ANX.  Choosing which model to implement may\
    \ be based on\n   the ONT/ONU type and the capabilities of the ONT/ONU and OLT;\
    \ this is\n   an implementation-specific decision that is outside the scope of\
    \ this\n   document.  It is possible for an OLT or an OLT PON port to connect\
    \ to\n   ONTs/ONUs with different capabilities and for these two models to co-\n\
    \   exist on the same OLT and same PON.  Section 12 describes the\n   differences\
    \ between OMCI and ANCP in controlling the ONU/ONT.\n   OMCI is designed as a\
    \ protocol between the OLT and ONT/ONU.  It\n   enables the OLT to configure and\
    \ administer capabilities on the\n   ONT/ONU in BPON, GPON, and XG-PON.  ANCP\
    \ is designed as a protocol\n   between the NAS and Access Node.  Among other\
    \ functions, it enables\n   the NAS to enforce dynamic policies on the Access\
    \ Node and the Access\n   Node to report events to the NAS.\n"
- title: 4.2.1.  ANCP+OMCI ANX Control
  contents:
  - "4.2.1.  ANCP+OMCI ANX Control\n   Figure 3 depicts the reference model for ANCP+OMCI\
    \ ANX control.  In\n   this model, ANCP is enabled between the NAS and a connected\
    \ OLT, and\n   OMCI is enabled between the OLT and an attached ONT/ONU.  NAS\n\
    \   communicates with the ANX via ANCP.  The OLT acts as an ANCP/OMCI\n   gateway\
    \ for communicating necessary events and policies between the\n   OLT and ONT/ONU\
    \ within the ANX and for communicating relevant\n   policies and events between\
    \ the ONT/ONU and the NAS.  The\n   functionality performed by the OLT as an ANCP/OMCI\
    \ gateway will be\n   application dependent (e.g., multicast control, topology\
    \ discovery)\n   and should be specified in a related specification.  It should\
    \ be\n   noted that some applications are expected to require ANCP and/or OMCI\n\
    \   extensions to map messages between OMCI and ANCP.  OMCI extensions\n   are\
    \ likely to be defined by the ITU-T.  It should also be noted that\n   in addition\
    \ to configuration and administration, OMCI provides the\n   capability to report\
    \ status changes on an ONT/ONU with AVC (Attribute\n   Value Change) notifications.\
    \  When the ONT/ONU's DSL or Ethernet\n   User-Network Interface (UNI) attributes\
    \ change, a related Management\n   Entity will send a corresponding notification\
    \ (AVC) to the OLT.  The\n   OLT interworks such a notification into an ANCP report\
    \ and sends it\n   to the connected NAS via the ANCP session between the OLT and\
    \ the\n   NAS.  As the ANCP report contains information of ONT/ONU's UNI and\n\
    \   OLT's PON port, NAS can obtain accurate information of access\n   topology.\n\
    \                                     +----------------------+\n             \
    \                        |         ANX          |\n         +---------+   +---+\
    \  +---+  |+---+       +-------+ | +---+\n         |         | +-|NAS|--|Eth|--||OLT|-<PON>-|ONU/ONT|-|-|HGW|\n\
    \   NSP---+Regional | | +---+  |Agg|  |+---+       +-------+ | +---+\n       \
    \  |Broadband| | +---+  +---+  +----------------------+\n         |Network  |-+-|NAS|\
    \               |\n   ASP---+         | | +---+               |\n         |  \
    \       | | +---+               |\n         +---------+ +-|NAS|              \
    \ |       +-------+ +---+\n                       +---|               +-<PON>-|ONU/ONT|-|HGW|\n\
    \                                                |  +-------+ +---+\n        \
    \                                        |  +---+     +---+\n                \
    \                                +--|ONT|-----|HGW|\n                        \
    \                           +---+     +---+\n                              ANCP\
    \                 OMCI\n                     +<--------------->+<----------->+\n\
    \      HGW: Home Gateway\n      NAS: Network Access Server\n      PON: Passive\
    \ Optical Network\n      OLT: Optical Line Terminal\n      ONT: Optical Network\
    \ Terminal\n      ONU: Optical Network Unit\n     Figure 3: Access Network with\
    \ Single ANCP+OMCI Control\n"
- title: 4.2.2.  All-ANCP ANX Control
  contents:
  - "4.2.2.  All-ANCP ANX Control\n   Figure 4 depicts the All-ANCP ANX control reference\
    \ model.  In this\n   model, an ANCP session is enabled between a NAS and a connected\
    \ OLT,\n   and another ANCP session is enabled between the OLT and a connected\n\
    \   ONT/ONU.  ANCP enables communication of policies and events between\n   the\
    \ OLT and the ANX.  The OLT acts as a gateway to relay policies and\n   events\
    \ between the NAS and ONT/ONU within the ANX in addition to\n   communicating\
    \ policies and events between the OLT and ONT/ONU.  It\n   should be noted that\
    \ in this model, OMCI (not shown) is expected to\n   be simultaneously enabled\
    \ between the ONT and OLT, supporting\n   existing OMCI capabilities and applications\
    \ on the PON, independent\n   of ANCP or applications intended to be supported\
    \ by ANCP.\n                                     +----------------------+\n  \
    \                                   | Access Node Complex  |\n               \
    \                      |      (ANX)           |\n         +---------+   +---+\
    \  +---+  |+---+       +-------+ |  +---+\n         |         | +-|NAS|--|Eth|--||OLT|-<PON>-|ONU/ONT|\
    \ |--|HGW|\n   NSP---+Regional | | +---+  |Agg|  |+---+       +-------+ |  +---+\n\
    \         |Broadband| | +---+  +---+  +----------------------+\n         |Network\
    \  |-+-|NAS|                |\n   ASP---+         | | +---+                |\n\
    \         |         | | +---+                |\n         +---------+ +-|NAS| \
    \               |       +-------+  +---+\n                       +---|       \
    \         +-<PON>-|ONU/ONT|--|HGW|\n                                         \
    \       |   +-------+  +---+\n                                               \
    \ |\n                                                |   +-------+  +---+\n  \
    \                                              +---|ONU/ONT|--|HGW|\n        \
    \                                            +-------+  +---+\n              \
    \                ANCP               ANCP\n                     +<----------------->+<---------->+\n\
    \       HGW: Home Gateway\n       NAS: Network Access Server\n       PON: Passive\
    \ Optical Network\n       OLT: Optical Line Terminal\n       ONT: Optical Network\
    \ Terminal\n       ONU: Optical Network Unit\n              Figure 4:  All-ANCP\
    \ ANX Control Reference Model\n"
- title: 5.  Concept of Access Node Control Mechanism for PON-Based Access
  contents:
  - "5.  Concept of Access Node Control Mechanism for PON-Based Access\n   The high-level\
    \ communication framework for an Access Node Control\n   Mechanism is shown in\
    \ Figure 5 for the All-ANCP ANX control model.\n   The Access Node Control Mechanism\
    \ defines a quasi-real-time, general-\n   purpose method for multiple network\
    \ scenarios with an extensible\n   communication scheme, addressing the different\
    \ use cases that are\n   described in the sections that follow.  The Access Node\
    \ Control\n   Mechanism is also extended to run between OLT and ONT/ONU.  The\n\
    \   mechanism consists of a controller function and a reporting and/or\n   enforcement\
    \ function.  The controller function is used to receive\n   status information\
    \ or admission requests from the reporting function.\n   It is also used to trigger\
    \ a certain behavior in the network element\n   where the reporting and/or enforcement\
    \ function resides.\n   The reporting function is used to convey status information\
    \ to the\n   controller function that requires the information for executing local\n\
    \   functions.  The enforcement function can be contacted by the\n   controller\
    \ function to enforce a specific policy or trigger a local\n   action.  The messages\
    \ shown in Figure 5 show the conceptual message\n   flow.  The actual use of these\
    \ flows, and the times or frequencies\n   when these messages are generated, depend\
    \ on the actual use cases,\n   which are described in later sections.\n     +--------+\n\
    \     | Policy |                               +----+\n     | Server |       \
    \             +--<PON>---|ONT |------- HGW\n     +--------+                  \
    \ +           +----+  +---+\n          |                      +         +----------|ONT|----HGW\n\
    \          |                     +          |          +---+\n          |    \
    \           +----------------|-------------+\n       +----+             | +----+\
    \         |     +-----+ |    +---+\n       |NAS |---------------|    |       \
    \  |     |     |-|----|HGW|\n       |    |<------------->|    |         |    \
    \ | ONU | |    +---+\n       +----+     ANCP    | |OLT |------<PON>----|     |\
    \ |\n          |               | |    |               |     | |    +---+\n   \
    \       |               | |    |<------------->|     |------|HGW|\n          |\
    \               | +----+    ANCP       +-----+ |    +---+\n          |       \
    \        +------------------------------+\n          |                    |  \
    \  Access Node      |\n          | Control Request    |                     |\n\
    \          | ------------------>| Control Request     |\n          |         \
    \           |-------------------->|\n          |                    | Control\
    \ Response    |\n          | Control Response   |<------------------- |\n    \
    \      |<-------------------|                     |\n          |             \
    \       |Admission Request    |\n          | Admission Request  |<--------------------|\n\
    \          |<-------------------|                     |\n          |Admission\
    \ Response  |                     |\n          |------------------->|Admission\
    \ Response   |\n          |                    |-------------------->|\n     \
    \     |Information Report  |                     |\n          |<-------------------|\
    \                     |\n          Access Node Control     Access Node Control\n\
    \              Mechanism                Mechanism\n          <--------------------><-------------------->\n\
    \                                 PPP, DHCP, IP\n          <------------------------------------------------------>\n\
    \    Figure 5: Conceptual Message Flow for Access Node Control Mechanism\n   \
    \                    in All-ANCP ANX Control Model\n   As discussed previously,\
    \ in different PON deployment scenarios, ANCP\n   may be used in variant ways\
    \ and may interwork with other protocols,\n   e.g., OMCI.  In the ANCP+OMCI control\
    \ model described earlier, the\n   NAS maintains ANCP adjacency with the OLT while\
    \ the OLT controls the\n   ONT/ONU via OMCI.  The messages shown in Figure 6 show\
    \ the conceptual\n   message flow for this model.  The actual use of these flows,\
    \ and the\n   times or frequencies when these messages are generated, depend on\
    \ the\n   actual use cases.\n     +--------+\n     | Policy |\n     | Server |\n\
    \     +--------+                                  +---+        +---+\n       \
    \   |                                +---- |ONT|--------|HGW|\n          |   \
    \                             |     +---+        +---+\n          |          \
    \     +--------------- |-------------+\n       +----+             | +----+   \
    \      |     +-----+ |    +---+\n       |NAS |---------------|    |         |\
    \     |     |-|----|HGW|\n       |    |<------------->|    |         |     | ONU\
    \ | |    +---+\n       +----+     ANCP    | |OLT |------<PON>----|     | |\n \
    \         |               | |    |               |     | |    +---+\n        \
    \  |               | |    |<------------->|     |------|HGW|\n          |    \
    \           | +----+    OMCI       +-----+ |    +---+\n          |           \
    \    +-----------------------------+\n          |                    |    Access\
    \ Node      |\n          | Control Request    |                     |\n      \
    \    | ------------------>| Control Request     |\n          |               \
    \     |-------------------->|\n          |                    | Control Response\
    \    |\n          | Control Response   |<------------------- |\n          |<-------------------|\
    \                     |\n          |                    |Admission Request   \
    \ |\n          | Admission Request  |<--------------------|\n          |<-------------------|\
    \                     |\n          |Admission Response  |                    \
    \ |\n          |------------------->|Admission Response   |\n          |     \
    \               |-------------------->|\n          |Information Report  |    \
    \                 |\n          |<-------------------|                     |\n\
    \          Access Node Control     Operating Maintenance\n              Mechanism\
    \          Control Interface (OMCI)\n          <--------------------><-------------------->\n\
    \                                 PPP, DHCP, IP\n          <------------------------------------------------------->\n\
    \    Figure 6: Conceptual Message Flow for ANCP+OMCI ANX Control Model\n"
- title: 6.  Multicast
  contents:
  - "6.  Multicast\n   With the rise of supporting IPTV services in a resource-efficient\n\
    \   way, multicast services are becoming increasingly important.\n   In order\
    \ to gain bandwidth optimization with multicast, the\n   replication of multicast\
    \ content per access loop needs to be\n   distributed to the ANX.  This can be\
    \ done by ANX (OLT and ONT/ONU)\n   becoming multicast aware by implementing an\
    \ IGMP [RFC3376] snooping\n   and/or proxy function [RFC4605].  The replication\
    \ thus needs to be\n   distributed between NAS, aggregation nodes, and ANX.  In\
    \ the case of\n   GPON and in the case of BPON with Ethernet uplink, this is very\n\
    \   viable.  By introducing IGMP processing on the ANX and aggregation\n   nodes,\
    \ the multicast replication process is now divided between the\n   NAS, the aggregation\
    \ node(s), and ANX.  This is in contrast to the\n   ATM-based model where NAS\
    \ is the single element responsible for all\n   multicast control and replication.\
    \  In order to ensure backward\n   compatibility with the ATM-based model, the\
    \ NAS, aggregation node,\n   and ANX need to behave as a single logical device.\
    \  This logical\n   device must have exactly the same functionality as the NAS\
    \ in the ATM\n   access/aggregation network.  The Access Node Control Mechanism\
    \ can be\n   used to make sure that this logical/functional equivalence is\n \
    \  achieved by exchanging the necessary information between the ANX and\n   the\
    \ NAS.\n   An alternative to multicast awareness in the ANX is for the\n   subscriber\
    \ to communicate the IGMP \"join/leave\" messages with the\n   NAS, while the\
    \ ANX is being transparent to these messages.  In this\n   scenario, the NAS can\
    \ use ANCP to create replication state in the ANX\n   for efficient multicast\
    \ replication.  The NAS sends a single copy of\n   the multicast stream towards\
    \ the ANX.  The NAS can perform network-\n   based conditional access and multicast\
    \ admission control on multicast\n   joins and create replication state in the\
    \ ANX if the request is\n   admitted by the NAS.\n   The following sections describe\
    \ various use cases related to\n   multicast.\n"
- title: 6.1.  Multicast Conditional Access
  contents:
  - "6.1.  Multicast Conditional Access\n   In a broadband FTTP/B/C access scenario,\
    \ service providers may want\n   to dynamically control, at the network level,\
    \ access to some\n   multicast flows on a per user basis.  This may be used in\
    \ order to\n   differentiate among multiple Service Offers or to realize/reinforce\n\
    \   conditional access based on customer subscription.  Note that, in\n   some\
    \ environments, application-layer conditional access by means of\n   Digital Rights\
    \ Management (DRM), for instance, may provide sufficient\n   control so that network-based\
    \ multicast conditional access may not be\n   needed.  However, network-level\
    \ access control may add to the service\n   security by preventing the subscriber\
    \ from receiving a non-subscribed\n   channel.  In addition, it enhances network\
    \ security by preventing a\n   multicast stream from being sent on a link or a\
    \ PON based on a non-\n   subscriber request.\n   Where network-based channel\
    \ conditional access is desired, there are\n   two approaches.  First, it can\
    \ be done on the NAS along with\n   bandwidth-based admission control.  The NAS\
    \ can control the\n   replication state on the ANX based on the outcome of access\
    \ and\n   bandwidth-based admission control.  This is covered in a later\n   section.\
    \  A second approach is to provision the necessary conditional\n   access information\
    \ on the ANX (ONT/ONU and/or OLT) so the ANX can\n   perform the conditional access\
    \ decisions autonomously.  For these\n   cases, the NAS can use ANCP to provision\
    \ black and white lists as\n   defined in [RFC5851] on the ANX so that the ANX\
    \ can decide locally to\n   honor a join or not.  It should be noted that in the\
    \ PON case, the\n   ANX is composed of the ONT/ONU and OLT.  Thus, this information\
    \ can\n   be programmed on the ONT/ONU and/or OLT.  Programming this\n   information\
    \ on the ONT/ONU prevents illegitimate joins from\n   propagating further into\
    \ the network.  A third approach, outside of\n   the scope of this document, may\
    \ be to program the HGW with the access\n   list.  A white list associated with\
    \ an Access Port identifies the\n   multicast channels that are allowed to be\
    \ replicated to that port.  A\n   black list associated with an Access Port identifies\
    \ the multicast\n   channels that are not allowed to be replicated to that port.\
    \  It\n   should be noted that the black list, if not explicitly programmed, is\n\
    \   the complement of the white list and vice versa.\n   If the ONT/ONU performs\
    \ IGMP snooping and is programmed with a\n   channel access list, the ONT/ONU\
    \ will first check if the requested\n   multicast channel is part of a white list\
    \ or a black list associated\n   with the Access Port on which the IGMP join is\
    \ received.  If the\n   channel is part of a white list, the ONT/ONU will pass\
    \ the join\n   request upstream towards the NAS.  The ONT/ONU must not start\n\
    \   replicating the associated multicast stream to the Access Port if\n   such\
    \ a stream is received until it gets confirmation that it can do\n   so from the\
    \ upstream node (NAS or OLT).  Passing the channel access\n   list is one of the\
    \ admission control criteria whereas bandwidth-based\n   admission control is\
    \ another.  If the channel is part of a black\n   list, the ONT/ONU can autonomously\
    \ discard the message because the\n   channel is not authorized for that subscriber.\n\
    \   The ONT/ONU, in addition to forwarding the IGMP join, sends an ANCP\n   admission\
    \ request to the OLT identifying the channel to be joined and\n   the premises.\
    \  Premises identification to the OLT can be based on a\n   Customer-Port-ID that\
    \ maps to the Access Port on the ONT/ONU and is\n   known at the ONT/ONU and OLT.\
    \  If the ONT/ONU has a white list and/or\n   a black list per premises, the OLT\
    \ need not have such a list.  If the\n   ONT/ONU does not have such a list, the\
    \ OLT may be programmed with\n   such a list for each premises.  In the latter\
    \ case, the OLT would\n   perform the actions described earlier on the ONT/ONU.\
    \  Once the\n   outcome of admission control (conditional access and bandwidth-based\n\
    \   admission control) is determined by the OLT (either by interacting\n   with\
    \ the NAS or locally), it is informed to the ONT/ONU.  OLT\n   bandwidth-based\
    \ admission control scenarios are defined in a later\n   section.\n   The white\
    \ list and black list can contain entries allowing:\n   -  An exact match for\
    \ a (*,G) Any-Source Multicast (ASM) group (e.g.,\n      <G=g.h.i.l>)\n   -  An\
    \ exact match for a (S,G) Source-Specific Multicast (SSM) channel\n      (e.g.,\
    \ <S=s.t.u.v,G=g.h.i.l>)\n   -  A mask-based range match for a (*,G) ASM group\
    \ (e.g.,\n      <G=g.h.i.l/Mask>)\n   -  A mask-based range match for a (S,G)\
    \ SSM channel (e.g.,\n      <S=s.t.u.v,G=g.h.i.l/Mask>)\n   The use of a white\
    \ list and black list may be applicable, for\n   instance, to regular IPTV services\
    \ (i.e., Broadcast TV) offered by an\n   Access Provider to broadband (e.g., FTTP)\
    \ subscribers.  For this\n   application, the IPTV subscription is typically bound\
    \ to a specific\n   FTTP home, and the multicast channels that are part of the\n\
    \   subscription are well-known beforehand.  Furthermore, changes to the\n   conditional\
    \ access information are infrequent, since they are bound\n   to the subscription.\
    \  Hence, the ANX can be provisioned with the\n   conditional access information\
    \ related to the IPTV service.\n   Instead of including the channel list(s) at\
    \ the ONT/ONU, the OLT or\n   NAS can be programmed with these access lists. \
    \ Having these access\n   lists on the ONT/ONU prevents forwarding of unauthorized\
    \ joins to the\n   OLT or NAS, reducing unnecessary control load on these network\n\
    \   elements.  Similarly, performing the access control at the OLT\n   instead\
    \ of the NAS, if not performed on the ONT/ONU, will reduce\n   unnecessary control\
    \ load on the NAS.\n"
- title: 6.2.  Multicast Admission Control
  contents:
  - "6.2.  Multicast Admission Control\n   The successful delivery of triple-play\
    \ broadband services is quickly\n   becoming a big capacity-planning challenge\
    \ for most of the service\n   providers nowadays.  Solely increasing available\
    \ bandwidth is not\n   always practical, cost-economical, and/or sufficient to\
    \ satisfy end-\n   user experience given not only the strict QoS requirements\
    \ of unicast\n   applications like VoIP and Video on Demand but also the fast\
    \ growth\n   of multicast interactive applications such as \"video conferencing\"\
    ,\n   digital TV, and digital audio.  These applications typically require\n \
    \  low delay, low jitter, low packet loss, and high bandwidth.  These\n   applications\
    \ are also typically \"non-elastic\", which means that they\n   operate at a fixed\
    \ bandwidth that cannot be dynamically adjusted to\n   the currently available\
    \ bandwidth.\n   An Admission Control (AC) Mechanism covering admission of multicast\n\
    \   traffic for the FTTP/B/C access is required in order to avoid over-\n   subscribing\
    \ the available bandwidth and negatively impacting the end-\n   user experience.\
    \  Before honoring a user request to join a new\n   multicast flow, the combination\
    \ of ANX and NAS must ensure admission\n   control is performed to validate that\
    \ there is enough video bandwidth\n   remaining on the PON and on the uplink between\
    \ the OLT and NAS to\n   carry the new flow (in addition to all other existing\
    \ multicast and\n   unicast video traffic) and that there is enough video bandwidth\
    \ for\n   the subscriber to carry that flow.  The solution needs to cope with\n\
    \   multiple flows per premises and needs to allow bandwidth to be\n   dynamically\
    \ shared across multicast and unicast video traffic per\n   subscriber, PON, and\
    \ uplink (irrespective of whether unicast AC is\n   performed by the NAS or by\
    \ some off-path policy server).  It should\n   be noted that the shared bandwidth\
    \ between multicast and unicast\n   video is under operator control.  That is,\
    \ in addition to the shared\n   bandwidth, some video bandwidth could be dedicated\
    \ to Video on\n   Demand, while other video bandwidth could be dedicated for multicast.\n\
    \   The focus in this document is on multicast-allocated bandwidth\n   including\
    \ the shared unicast and multicast bandwidth.  Thus,\n   supporting admission\
    \ control requires some form of synchronization\n   between the entities performing\
    \ multicast AC (e.g., the ANX and/or\n   NAS), the entity performing unicast AC\
    \ (e.g., the NAS or a policy\n   server), and the entity actually enforcing the\
    \ multicast replication\n   (i.e., the NAS and the ANX).  This synchronization\
    \ can be achieved in\n   a number of ways.\n   One approach is for the NAS to\
    \ perform bandwidth-based admission\n   control on all multicast video traffic\
    \ and unicast video traffic that\n   requires using the shared bandwidth with\
    \ multicast.  Based on the\n   outcome of admission control, NAS then controls\
    \ the replication state\n   on the ANX.  The subscriber generates an IGMP join\
    \ for the desired\n   stream on its logical connection to the NAS.  The NAS terminates\
    \ the\n   IGMP message and performs conditional access and bandwidth-based\n \
    \  admission control on the IGMP request.  The bandwidth admission\n   control\
    \ is performed against the following:\n   1.  Available video bandwidth on the\
    \ link to OLT\n   2.  Available video bandwidth on the PON interface\n   3.  Available\
    \ video bandwidth on the last mile (Access Port on the\n       ONT/ONU)\n   The\
    \ NAS can locally maintain and track video bandwidth it manages for\n   all the\
    \ three levels mentioned above.  The NAS can maintain\n   identifiers corresponding\
    \ to the PON interface and the last mile\n   (customer interface).  It also maintains\
    \ a channel map, associating\n   every channel (or a group of channels sharing\
    \ the same bandwidth\n   requirement) with a data rate.  For instance, in the\
    \ case of 1:1 VLAN\n   representation of the premises, the outer tag (S-VLAN)\
    \ could be\n   inserted by the ANX to correspond to the PON interface on the OLT,\n\
    \   and the inner-tag could be inserted by the ANX to correspond to the\n   access-line\
    \ towards the customer.  Bandwidth tracking and maintenance\n   for the PON interface\
    \ and the last mile could be done on these VLAN\n   identifiers.  In the case\
    \ of N:1 representation, the single VLAN\n   inserted by ANX could correspond\
    \ to the PON interface on the OLT.\n   The access loop is represented via Customer-Port-ID\
    \ received in the\n   \"Agent Circuit ID\" sub-option in DHCP messages.\n   The\
    \ NAS can perform bandwidth accounting on received IGMP messages.\n   The video\
    \ bandwidth is also consumed by any unicast video being\n   delivered to the CPE.\
    \  NAS can perform video bandwidth accounting and\n   control on both IGMP messages\
    \ and on requests for unicast video\n   streams when either all unicast admission\
    \ control is done by the NAS\n   or an external policy server makes a request\
    \ to the NAS for using\n   shared bandwidth with multicast as described later\
    \ in the document.\n   This particular scenario assumes the NAS is aware of the\
    \ bandwidth on\n   the PON and can track the changes in available bandwidth on\
    \ the PON\n   under all conditions.  On receiving an IGMP join message, NAS will\n\
    \   perform bandwidth check on the subscriber bandwidth.  If this passes\n   and\
    \ the stream is already being forwarded on the PON by the OLT\n   (which also\
    \ means that it is already forwarded by the NAS to the\n   OLT), NAS will admit\
    \ the join, update the available subscriber\n   bandwidth, and transmit an ANCP\
    \ message to the OLT and in turn to the\n   ONT/ONU to start replication on the\
    \ customer port.  If the stream is\n   not already being replicated to the PON\
    \ by the OLT, the NAS will also\n   check the available bandwidth on the PON,\
    \ and if it is not already\n   being replicated to the OLT, it will check the\
    \ bandwidth on the link\n   towards the OLT.  If this passes, the available PON\
    \ bandwidth and the\n   bandwidth on the link towards the OLT are updated.  The\
    \ NAS adds the\n   OLT as a leaf to the multicast tree for that stream.  On receiving\n\
    \   the message to start replication, the OLT will add the PON interface\n   to\
    \ its replication state if the stream is not already being forwarded\n   on that\
    \ PON.  Also, the OLT will send an ANCP message to direct the\n   ONT/ONU to add\
    \ or update its replication state with the customer port\n   for that channel.\
    \  The interaction between ANX and NAS is shown in\n   Figures 7 and 8.  For unicast\
    \ video streams, application-level\n   signaling from the CPE typically triggers\
    \ an application server to\n   request bandwidth-based admission control from\
    \ a policy server.  The\n   policy server can, in turn, interact with the NAS\
    \ to request the\n   bandwidth for the unicast video flow if it needs to use shared\n\
    \   bandwidth with multicast.  If the bandwidth is available, NAS will\n   reserve\
    \ the bandwidth; update the bandwidth pools for subscriber\n   bandwidth, the\
    \ PON bandwidth, and the bandwidth on the link towards\n   the OLT; and send a\
    \ response to the policy server, which is\n   propagated back to the application\
    \ server to start streaming.\n   Otherwise, the request is rejected.\n       \
    \                                             +----+\n                       \
    \         +---<PON>---------- |ONT |------ HGW\n                             \
    \  +                    +----+\n                              +              \
    \       +----+\n                             +           +--------- |ONT |------\
    \ HGW\n     +----+               +----+        +           +----+\n     |NAS |---------------|\
    \    |------<PON>\n     |    |<------------->|    |        +           +-----+\n\
    \     +----+     ANCP      |OLT |         +--------- |     |----- HGW\n      \
    \ |                  |    |                    |     |\n       |             \
    \     |    |<------------------>| ONU |------HGW\n       |                  +----+\
    \    ANCP            |     |     +---+\n       |                     |       \
    \               |     |-----|HGW|\n       |                     |            \
    \          +-----+     +---+\n       |           1.IGMP join (S/*,G)         \
    \      |              |\n       |<----------------------------------------------------------\
    \ |\n     2.|                     |                       |              |\n \
    \    +=======================+                       |              |\n     [Access\
    \ Control &       ]                       |              |\n     [Subscriber B/W\
    \         ]                       |              |\n     [PON B/W & OLT link B/W\
    \ ]                       |              |\n     [based Admission Control]   \
    \                    |              |\n     +=======================+        \
    \               |              |\n       |                     |             \
    \          |              |\n       |-------------------> |                  \
    \     |              |\n     3.ANCP Replication-Start|                       |\
    \              |\n       (<S/*,G> or Multicast |                       |     \
    \         |\n       |MAC,Customer-Port-ID)| --------------------> |          \
    \    |\n       |                     |4.ANCP Replication-Start              |\n\
    \       |                  (<S/*,G> or Multicast MAC,Customer-Port-ID)\n     \
    \  |-------------------> |                       |              |\n       |5.Multicast\
    \ Flow(S,G)|                       |              |\n       |on Multicast VLAN\
    \    |---------------------> |              |\n       |                     |6.Multicast\
    \ Flow (S,G) |              |\n       |                     |forwarded on    \
    \       |              |\n       |                     |Unidirectional       \
    \  |              |\n       |                     |<Multicast GEM-PORT>   |  \
    \            |\n       |                     |on the PON by OLT      |------------->|\n\
    \                                                     7.Multicast Flow\n     \
    \                                               forwarded on    |\n          \
    \                                          Customer-Port by|\n               \
    \                                      |ONT/OLT.      |\n                    \
    \                                 |              |\n     Figure 7: Interactions\
    \ for NAS-Based Multicast Admission Control\n       (No IGMP Processing on ANX\
    \ and NAS Maintains Available Video\n                   Bandwidth for PON) upon\
    \ Channel Join\n                                                    +----+\n \
    \                               +---<PON>---------- |ONT |----- HGW\n        \
    \                       +                    +----+\n                        \
    \      +                     +----+\n                             +          \
    \ +--------- |ONT |----- HGW\n     +----+               +----+        +      \
    \     +----+\n     |NAS |---------------|    |------<PON>\n     |    |<------------->|\
    \    |        +           +-----+\n     +----+     ANCP      |OLT |         +---------\
    \ |     |---- HGW\n       |                  |    |                    |     |\n\
    \       |                  |    |<------------------>| ONU |-----HGW\n       |\
    \                  +----+    ANCP            |     |     +---+\n       |     \
    \                |                      |     |-----|HGW|\n       |          \
    \           |                      +-----+     +---+\n       |               \
    \      |                       |              |\n       |            IGMP leave\
    \ (S/*,G)               |              |\n       |<-----------------------------------------------------------|\n\
    \       |                     |                       |              |\n     +====================+\
    \  |                       |              |\n     [Admission Control   ]  |  \
    \                     |              |\n     [<Resource Released> ]  |       \
    \                |              |\n     +====================+  |            \
    \           |              |\n       |                     |                 \
    \      |              |\n       |                     |                      \
    \ |              |\n       |                     |                       |   \
    \           |\n       |-------------------> |                       |        \
    \      |\n      ANCP Replication-Stop  |                       |             \
    \ |\n       (<S/*,G> or Multicast MAC,Customer-Port-ID)   |              |\n \
    \      |                     |                       |              |\n      \
    \ |                     |---------------------> |              |\n       |   \
    \                  | ANCP Replication-Stop |              |\n                \
    \         (<S/*,G> or Multicast MAC,Customer-Port-ID)\n     Figure 8: Interactions\
    \ for NAS-Based Multicast Admission Control\n       (No IGMP Processing on ANX\
    \ and NAS Maintains Available Video\n                   Bandwidth for PON) upon\
    \ Channel Leave\n   An alternate approach is required if the NAS is not aware\
    \ of the\n   bandwidth on the PON.  In this case, the OLT does the PON bandwidth\n\
    \   management and requests NAS to perform bandwidth admission control on\n  \
    \ subscriber bandwidth and the bandwidth on the link to the OLT.\n   Following\
    \ are operations of various elements:\n   ANX operation:\n   -  ONT/ONU can snoop\
    \ IGMP messages.  If conditional access is\n      configured and the channel is\
    \ in the black list (or it is not on\n      the white list), ONT will drop the\
    \ IGMP join.  If the channel\n      passes the conditional access check, the ONT\
    \ will forward the IGMP\n      join and will send a bandwidth admission control\
    \ request to the\n      OLT.  If the multicast stream is already being received\
    \ on the\n      PON, the ONT/ONU does not forward the stream to the Access Port\n\
    \      where IGMP is received until it has received a positive admission\n   \
    \   control response from the OLT.\n   -  OLT can snoop IGMP messages.  It also\
    \ receives a bandwidth\n      admission control request from the ONT/ONU for the\
    \ requested\n      channel.  It can be programmed with a channel bandwidth map.\
    \  If\n      the multicast channel is already being streamed on the PON or the\n\
    \      channel bandwidth is less than the available multicast bandwidth\n    \
    \  on the PON, the OLT forwards the IGMP request to the NAS and keeps\n      track\
    \ of the subscriber (identified by Customer-Port-ID) as a\n      receiver.  If\
    \ the channel is not already being streamed on the PON\n      but the PON has\
    \ sufficient bandwidth for that channel, the OLT\n      reduces the PON multicast\
    \ video bandwidth by the channel bandwidth\n      and may optionally add the PON\
    \ to the multicast tree without\n      activation for that channel.  This is biased\
    \ towards a forward\n      expectation that the request will be accepted at the\
    \ NAS.  The OLT\n      forwards the IGMP join to the NAS.  It also sends a bandwidth\n\
    \      admission request to the NAS identifying the channel and the\n      premises\
    \ for which the request is made.  It sets a timer for the\n      subscriber multicast\
    \ entry within which it expects to receive a\n      request from the NAS that\
    \ relates to this request.  If the\n      available PON bandwidth is less than\
    \ the bandwidth of the\n      requested channel, the OLT sends an admission response\
    \ (with a\n      reject) to the ONT/ONU and does not forward the IGMP join to\
    \ the\n      NAS.\n   NAS operation:\n   The NAS receives the IGMP join from the\
    \ subscriber on the subscriber\n   connection.  When NAS receives the admission\
    \ control request from ANX\n   (also signifying the bandwidth on the PON is available),\
    \ it performs\n   admission control against the subscriber's available multicast\n\
    \   bandwidth.  If this check passes, and the NAS is already transmitting\n  \
    \ that channel to the OLT, the request is accepted.  If the check\n   passes and\
    \ the NAS is not transmitting the channel to the OLT yet, it\n   performs admission\
    \ control against the available multicast video\n   bandwidth (this includes the\
    \ dedicated multicast bandwidth and the\n   shared bandwidth between multicast\
    \ and Video on Demand) on the\n   link(s) to the OLT.  If the check passes, the\
    \ request is accepted,\n   the available video bandwidth for the subscriber and\
    \ downlink to the\n   OLT are reduced by the channel bandwidth, and the NAS sends\
    \ an ANCP\n   admission control response (indicating accept) to the OLT, requesting\n\
    \   the addition of the subscriber to the multicast tree for that\n   channel.\
    \  The OLT activates the corresponding multicast entry if not\n   active and maintains\
    \ state of the subscriber in the list of receivers\n   for that channel.  The\
    \ OLT also sends an ANCP request to the ONT/ONU\n   to enable reception of the\
    \ multicast channel and forwarding to the\n   subscriber Access Port.  Otherwise,\
    \ if the request is rejected, the\n   NAS will send an admission reject to the\
    \ OLT, which, in turn, removes\n   the subscriber as a receiver for that channel\
    \ (if it was added) and\n   credits back the channel bandwidth to the PON video\
    \ bandwidth if\n   there is no other receiver on the PON for that channel.  The\n\
    \   interactions between ANX and NAS are shown in Figures 9 and 10.\n   If the\
    \ OLT does not receive a response from the NAS within a set\n   timer, the OLT\
    \ removes the subscriber from the potential list of\n   receivers for the indicated\
    \ channel.  It also returns the allocated\n   bandwidth to the available PON bandwidth\
    \ if there are no other\n   receivers.  In this case, the NAS may send a response\
    \ to the OLT with\n   no matching entry as the entry has been deleted.  The OLT\
    \ must\n   perform admission control against the available PON bandwidth and may\n\
    \   accept the request and send an ANCP request to the ONT/ONU to\n   activate\
    \ the corresponding multicast entry as described earlier.  If\n   it does not\
    \ accept the request, it will respond back to the NAS with\n   a reject.  The\
    \ NAS shall credit back the channel bandwidth to the\n   subscriber.  It shall\
    \ also stop sending the channel to the OLT if\n   that subscriber was the last\
    \ leaf on the multicast tree towards the\n   OLT.\n   On processing an IGMP leave,\
    \ the OLT will send an ANCP request to NAS\n   to release resources.  NAS will\
    \ release the subscriber bandwidth.  If\n   this leave causes the stream to be\
    \ no longer required by the OLT, the\n   NAS will update its replication state\
    \ and release the bandwidth on\n   the NAS to OLT link.\n   If the subscriber\
    \ makes a request for a unicast video stream (i.e.,\n   Video on Demand), the\
    \ request results in appropriate application-\n   level signaling, which typically\
    \ results in an application server\n   requesting a policy server for bandwidth-based\
    \ admission control for\n   the VoD stream.  After authorizing the request, the\
    \ policy server can\n   send a request to the NAS for the required bandwidth if\
    \ it needs to\n   use bandwidth that is shared with multicast.  This request may\
    \ be\n   based on a protocol outside of the scope of this document.  The NAS\n\
    \   checks if the available video bandwidth (accounting for both\n   multicast\
    \ and unicast) per subscriber and for the link to the OLT is\n   sufficient for\
    \ the request.  If it is, it temporarily reserves the\n   bandwidth and sends\
    \ an ANCP admission request to the OLT for the\n   subscriber, indicating the\
    \ desired VoD bandwidth.  If the OLT has\n   sufficient bandwidth on the corresponding\
    \ PON, it reserves that\n   bandwidth and returns an accept response to the NAS.\
    \  If not, it\n   returns a reject to the NAS.  If the NAS receives an accept,\
    \ it\n   returns an accept to the policy server, which, in turn, returns an\n\
    \   accept to the application server, and the video stream is streamed to\n  \
    \ the subscriber.  This interaction is shown in Figure 11.  If the NAS\n   does\
    \ not accept the request from the policy server, it returns a\n   reject.  If\
    \ the NAS receives a reject from the OLT, it returns the\n   allocated bandwidth\
    \ to the subscriber and the downlink to the OLT.\n   It should be noted that similar\
    \ functionality to that described in\n   this section and depicted in Figures\
    \ 9, 10, and 11 will be required\n   when OMCI is enabled between the OLT and\
    \ ONT/ONU in the ANCP+OMCI ANX\n   control model.  In the latter case, the OLT\
    \ will act as an ANCP-OMCI\n   gateway.\n                                    \
    \               +----+\n                                         +-------- |ONT\
    \ |-------- HGW\n     +----+               +----+         +         +----+\n \
    \    |NAS |---------------|    |------<PON>\n     |    |<------------->|OLT |\
    \         +          +-----+\n     +----+     ANCP      |    | ANCP    +---------\
    \ | ONU |------ HGW\n       |                  +----+<------------------>+-----+-------HGW\n\
    \       |                     |                        |             |\n     \
    \  |1.IGMP join(S/*,G) +=============+         +=============+  |\n       |<------------------[IGMP\
    \ Snooping]---------[IGMP snooping]--|\n       |                   +=============+\
    \         +=============+  |\n       |                     |2.Admission-Request\
    \     |             |\n       |                     |(Flow,Customer-Port-ID) |\
    \             |\n       |                     |<---------------------- |     \
    \        |\n       |                3.+===============+           |          \
    \   |\n       |                  [ Access Ctrl   ]           |             |\n\
    \       |                  [ & PON B/W     ]           |             |\n     \
    \  |                  [ Admission Ctrl]           |             |\n       |  \
    \                +===============+ PASS      |             |\n       |4.Admission-Request\
    \  |                        |             |\n       | <Flow,              |  \
    \                      |             |\n       |  Customer-Port-ID>  |       \
    \                 |             |\n       |<--------------------|            \
    \            |             |\n     5.|                     |                 \
    \       |             |\n     +=================+     |                      \
    \  |             |\n     [Subscriber B/W   ]     |                        |  \
    \           |\n     [& OLT link B/W   ]     |                        |       \
    \      |\n     [Admission Ctrl   ]     |                        |            \
    \ |\n     +=================+PASS |                        |             |\n \
    \      |6.Admission-Reply-Pass                        |             |\n      \
    \ |<Flow,Customer-Port-ID>                       |             |\n       |-------------------->|\
    \                        |             |\n       |            7.+========================+\
    \      |             |\n       |              [Update Replication State]     \
    \ |             |\n       |              +========================+      |   \
    \          |\n       |                     | 8.Admission-Reply-Pass |        \
    \     |\n       |                     |(<Flow,Cust-Port-ID>    |             |\n\
    \       |                     |----------------------> |             |\n     \
    \  |                     |                 9.+============+     |\n       |  \
    \                   |                   [Update Repl.]     |\n       |       \
    \              |                   [   State    ]     |\n       |            \
    \         |                   +============+     |\n      Figure 9: Interaction\
    \ between NAS & ANX for Multicast Bandwidth\n     Admission Control in the All-ANCP\
    \ ANX Control Model upon Success\n                                           \
    \         +----+\n                                         +--------- |ONT |------\
    \ HGW\n     +----+               +----+        +           +----+\n     |NAS |---------------|\
    \    |------<PON>\n     |    |<------------->|OLT |        +          +-----+\n\
    \     +----+     ANCP      |    | ANCP   +----------| ONU |----- HGW\n       |\
    \                  +----+<----------------->+-----+------HGW\n       |       \
    \              |                        |             |\n       |1.IGMP join(S/*,G)\
    \ +=============+        +=============+   |\n       |<------------------[IGMP\
    \ Snooping]--------[IGMP snooping]-- |\n       |                   +=============+\
    \        +=============+   |\n       |                     |2.Admission-Request\
    \     |             |\n       |                     |(Flow,Customer-Port-ID) |\
    \             |\n       |                     |<---------------------- |     \
    \        |\n       |                2.+===============+           |          \
    \   |\n       |                  [ Access Ctrl   ]           |             |\n\
    \       |                  [ & PON B/W     ]           |             |\n     \
    \  |                  [ Admission Ctrl]           |             |\n       |  \
    \                +===============+ PASS      |             |\n       |3.Admission-Request\
    \  |                        |             |\n       | <Flow,Customer-Port-ID>\
    \                      |             |\n       |<--------------------|       \
    \                 |             |\n     4.|                     |            \
    \            |             |\n     +==================+    |                 \
    \       |             |\n     [Subscriber B/W    ]    |                      \
    \  |             |\n     [& OLT link B/W    ]    |                        |  \
    \           |\n     [Admission Ctrl    ]    |                        |       \
    \      |\n     +==================+FAIL                         |            \
    \ |\n       |                     |                        |             |\n \
    \      |5.Admission-Reply-Fail                        |             |\n      \
    \ |<Flow,Cust-Port-ID>  |                        |             |\n       |-------------------->|\
    \                        |             |\n       |            6.+==================+\
    \            |             |\n       |              [Release PON B/W   ]     \
    \       |             |\n       |              [Remove Repl.State ]          \
    \  |             |\n       |              +==================+            |  \
    \           |\n       |                     | 7.Admission-Reply-Fail |       \
    \      |\n       |                     |<Flow,Cust-Port-ID>     |            \
    \ |\n       |                     |----------------------> |             |\n \
    \      |                     |                 8.+============+     |\n      \
    \ |                     |                   [Remove Repl.]     |\n       |   \
    \                  |                   [   State    ]     |\n       |        \
    \             |                   +============+     |\n    Figure 10: Interaction\
    \ between NAS and ANX for Multicast Bandwidth\n     Admission Control in the All-ANCP\
    \ ANX Control Model upon Failure\n     +------------+              1. VoD Request\n\
    \     | App. Server|<-----------------------------------------------\n     | Server\
    \     |\n     +------------+\n       | 2. Admission-Request (VoD-Flow)\n     +-------+\n\
    \     |Policy |\n     |Server |\n     +-------+\n      |  +\n      |<-|---3. Admission-Request\n\
    \      |  |\n      +  | 8. Admission-Reply\n     +----+        +      +----+ \
    \                 +-----+\n     |NAS |---------------|OLT |------<PON>-------|ONT\
    \  |---HGW--CPE\n     |    |<------------->|    |                  +-----+   \
    \ |\n     +----+     ANCP      +----+                      |      |\n       |\
    \                     |                        |      |\n     4.|            \
    \         |                        |      |\n     +=================+     |  \
    \                      |      |\n     [Subscriber B/W   ]     |              \
    \          |      |\n     [& OLT link B/W   ]     |                        | \
    \     |\n     [Admission Ctrl   ]     |                        |      |\n    \
    \ +=================+PASS |                        |      |\n       |        \
    \             |                        |      |\n       | 5.Admission-Request\
    \ |                        |      |\n       |(Bandwidth,PON-Port-ID)         \
    \              |      |\n       |-------------------> |                      \
    \  |      |\n       |                     |                        |      |\n\
    \       |                6.+===============+           |      |\n       |    \
    \              [   PON B/W     ]           |      |\n       |                \
    \  [ Admission Ctrl]           |      |\n       |                  +===============+\
    \ PASS      |      |\n       |7.Admission-Reply    |                        |\
    \      |\n       | <PON-Port-ID>       |                        |      |\n   \
    \    |<------------------- |                        |      |\n       |       \
    \              |                        |      |\n        Figure 11: Interactions\
    \ for VoD Bandwidth Admission Control\n                     in the All-ANCP ANX\
    \ Control Model\n   A third possible approach is where the ANX is assumed to have\
    \ full\n   knowledge to make an autonomous decision on admitting or rejecting\
    \ a\n   multicast and a unicast join.  With respect to the interaction\n   between\
    \ ONT/ONU and OLT, the procedure is similar to the first\n   approach (i.e., NAS-controlled\
    \ replication).  However, when the OLT\n   receives an IGMP request from a subscriber,\
    \ it performs admission\n   control against that subscriber multicast video bandwidth\
    \ (dedicated\n   and shared with Video on Demand), the PON, and uplink to the\
    \ NAS.  It\n   should be noted in this case that if there are multiple NAS-OLT\n\
    \   links, either the link on which the multicast stream must be sent is\n   pre-determined,\
    \ needs to be selected by the OLT based on downstream\n   bandwidth from NAS to\
    \ OLT and the selection is communicated to the\n   NAS, or the OLT has to be ready\
    \ to receive the stream on any link.\n   If the check passes, the OLT updates\
    \ the available video bandwidth\n   per PON and subscriber.  The OLT adds the\
    \ subscriber to the list of\n   receivers and the PON to the multicast tree if\
    \ it is not already on\n   it.  It also sends an ANCP request to the ONT/ONU to\
    \ add the\n   subscriber Access Port to that channel multicast tree and sends\
    \ an\n   ANCP message to the NAS informing it of the subscriber and link\n   available\
    \ video bandwidth and the channel the subscriber joined.  The\n   NAS, upon receiving\
    \ the ANCP information message, updates the\n   necessary information, including\
    \ the OLT to the multicast tree if it\n   is not already on it.  It should be\
    \ noted in this case that the ANCP\n   message from the OLT to the NAS is being\
    \ used to add the OLT to a\n   multicast tree as opposed to an IGMP message. \
    \ The IGMP message can\n   also be sent by the OLT with the OLT acting as an IGMP\
    \ proxy at the\n   expense of added messages.  In this option, the OLT acts as\
    \ the\n   network IGMP router for the subscriber.\n   For unicast video streams,\
    \ the policy server receiving an admission\n   request from an application server,\
    \ as described before, may query\n   the OLT for admission control as it has all\
    \ information.  If the OLT\n   has sufficient bandwidth for the stream, it reserves\
    \ that bandwidth\n   for the subscriber, the PON, and OLT uplink to the NAS and\
    \ returns an\n   accept to the policy server.  It also updates the NAS (via an\
    \ ANCP\n   message) of the subscriber's available video bandwidth.  If the OLT\n\
    \   rejects the policy server request, it will return a reject to the\n   policy\
    \ server.\n   It should be noted that if the policy server adjacency is with the\n\
    \   NAS, the policy server may make the admission request to the NAS.\n   The\
    \ NAS then sends an ANCP admission request to the OLT on behalf of\n   the policy\
    \ server.  The NAS returns an accept or reject to the policy\n   server if it\
    \ gets a reject or accept, respectively, from the OLT.\n"
- title: 6.3.  Multicast Accounting
  contents:
  - "6.3.  Multicast Accounting\n   It may be desirable to perform accurate time-\
    \ or volume-based\n   accounting per user or per access loop.  If the ANX is performing\
    \ the\n   traffic replication process, it knows when replication of a multicast\n\
    \   flow to a particular Access Port or user starts and stops.  Multicast\n  \
    \ accounting can be addressed in two ways:\n   -  ANX keeps track of when replication\
    \ starts or stops and reports\n      this information to the NAS for further processing.\
    \  In this case,\n      ANCP can be used to send the information from the ANX\
    \ to the NAS.\n      This can be done with the Information Report message.  The\
    \ NAS can\n      then generate the appropriate time and/or volume accounting\n\
    \      information per access loop and per multicast flow to be sent to\n    \
    \  the accounting system.  The ANCP requirements to support this\n      approach\
    \ are specified in [RFC5851].  If the replication function\n      is distributed\
    \ between the OLT and ONT/ONU, a query from the NAS\n      will result in OLT\
    \ generating a query to the ONT/ONU.\n   -  ANX keeps track of when replication\
    \ starts or stops and generates\n      the time- and/or volume-based accounting\
    \ information per access\n      loop and per multicast flow, before sending it\
    \ to a central\n      accounting system for logging.  Since ANX communicates with\
    \ this\n      accounting system directly, the approach does not require the use\n\
    \      of ANCP.  It is therefore beyond the scope of this document.  It\n    \
    \  may also be desirable for the NAS to have the capability to\n      asynchronously\
    \ query the ANX to obtain an instantaneous status\n      report related to multicast\
    \ flows currently replicated by the ANX.\n      Such a reporting functionality\
    \ could be useful for troubleshooting\n      and monitoring purposes.  If the\
    \ replication function in the ANX\n      is distributed between the OLT and the\
    \ ONT/ONU, then for some of\n      the information required by the NAS (such as\
    \ the list of Access\n      Ports on which a flow is being forwarded or list of\
    \ flows being\n      forwarded on an Access Port), a query to the OLT from the\
    \ NAS will\n      result in a query from the OLT to the ONT/ONU.  The OLT responds\n\
    \      back to the NAS when it receives the response from the ONT/ONU.\n     \
    \ Also, if the list of PONs on which replication is happening for a\n      multicast\
    \ channel or the list of channels being replicated on a\n      PON is what is\
    \ desired, the OLT can return this information.\n"
- title: 7.  Remote Connectivity Check
  contents:
  - "7.  Remote Connectivity Check\n   In an end-to-end Ethernet aggregation network,\
    \ end-to-end Ethernet\n   Operations, Administration, and Maintenance (OAM), as\
    \ specified in\n   IEEE 802.1ag [802.1ag] and ITU-T Recommendation Y.1730/1731\
    \ [Y.1731],\n   can provide access loop connectivity testing and fault isolation.\n\
    \   However, most HGWs do not yet support these standard Ethernet OAM\n   procedures.\
    \  Also, in a mixed Ethernet and ATM access network (e.g.,\n   Ethernet-based\
    \ aggregation upstream from the OLT and BPON\n   downstream), interworking functions\
    \ for end-to-end OAM are not yet\n   standardized or widely available.  Until\
    \ such mechanisms become\n   standardized and widely available, the Access Node\
    \ Control Mechanism\n   between NAS and ANX can be used to provide a simple mechanism\
    \ to test\n   connectivity of an access loop from the NAS.\n   Triggered by a\
    \ local management interface, the NAS can use the Access\n   Node Control Mechanism\
    \ (Control Request message) to initiate an\n   access loop test between an Access\
    \ Node and a HGW or ONT/ONU.  On\n   reception of the ANCP message, the OLT can\
    \ trigger native OAM\n   procedures defined for BPON in [G.983.1] and for GPON\
    \ in [G.984.1].\n   The Access Node can send the result of the test to the NAS\
    \ via a\n   Control Response message.\n"
- title: 8.  Access Topology Discovery
  contents:
  - "8.  Access Topology Discovery\n   In order to avoid congestion in the network,\
    \ manage and utilize the\n   network resources better, and ensure subscriber fairness,\
    \ NAS\n   performs hierarchical shaping and scheduling of the traffic by\n   modeling\
    \ different congestion points in the network (such as the last\n   mile, Access\
    \ Node uplink, and the access-facing port).\n   Such mechanisms require that the\
    \ NAS gains knowledge about the\n   topology of the access network, the various\
    \ links being used, and\n   their respective rates.  Some of the information required\
    \ is somewhat\n   dynamic in nature (e.g., DSL line rate if the last mile is xDSL\n\
    \   based, such as in the case of \"PON-fed DSLAMs\" for FTTC/FTTB\n   scenarios)\
    \ and hence cannot come from a provisioning and/or inventory\n   management Operations\
    \ Support System (OSS).  Some of the information\n   varies less frequently (e.g.,\
    \ capacity of the OLT uplink) but\n   nevertheless needs to be kept strictly in\
    \ sync between the actual\n   capacity of the uplink and the image the NAS has\
    \ of it.\n   OSSs are rarely able to enforce the consistency of such data in a\n\
    \   reliable and scalable manner, notably across organizational\n   boundaries\
    \ under certain deployment scenarios.  The Access Topology\n   Discovery function\
    \ allows the NAS to perform these advanced functions\n   without having to depend\
    \ on an error-prone and possibly complex\n   integration with an OSS.\n   The\
    \ rate of the access loop can be communicated via ANCP (Information\n   Report\
    \ message) from the ONT/ONU to the OLT in the All-ANCP ANX\n   control model or\
    \ via OMCI in the ANCP+OMCI ANX control model, and\n   then from OLT to the NAS\
    \ via ANCP.  Additionally, during the time the\n   DSL NT is active, data rate\
    \ changes can occur due to environmental\n   conditions (the DSL access loop can\
    \ get \"out of sync\" and can retrain\n   to a lower value, or the DSL access\
    \ loop could use Seamless Rate\n   Adaptation to make the actual data rate fluctuate\
    \ while the line is\n   active).  In this case, ANX sends an additional Information\
    \ Report to\n   the NAS each time the access loop attributes change above a threshold\n\
    \   value.  Existing DSL procedures are not applicable in this case\n   because\
    \ an adapted message flow and additional TLVs are needed.\n     +--------+\n \
    \    | Policy |\n     | Server |\n     +--------+                            \
    \            +---+   +---+\n          |                                +-----------|ONT|---|HGW|\n\
    \          |                                |           +---+   +---+\n      \
    \    |               +--------------- |-----------------+\n       +----+     \
    \        | +----+         |         +-----+ | +---+\n       |NAS |------------\
    \ | |    |         |         |     |-|-|HGW|\n       |    |<----------> | |  \
    \  |         |         |ONT/ | | +---+\n       +----+     ANCP    | |OLT |------<PON>--------|ONU\
    \  | |\n          |               | |    |                   |     | | +---+\n\
    \          |               | |    |<----------------->|     |---|HGW|\n      \
    \    |               | +----+       OMCI        +-----+ | +---+\n          | \
    \              +----------------------------------+\n          |             \
    \       |      Access Node       |\n          |                    |         \
    \               |\n          |                    |------GPON Ranging------|\n\
    \          | Port Status Message|      ONT Port UP       |\n          |<------------------\
    \ |<-----------------------|\n          |Port Configuration  GPON Line/Service\
    \ Profile|\n          |------------------> |<---------------------->|\n      \
    \    |     ONT/ONI Port UP|                        |\n          |<------------------\
    \ |                        |\n          |                    |               \
    \         |\n          |      ANCP          |         OMCI           |\n     \
    \     <-------------------><----------------------->|\n                      \
    \           PPP, DHCP, IP\n          <------------------------------------------------------>\n\
    \    Figure 12: Message Flow for the Use Case of Topology Discovery for\n    \
    \                    the ANCP+OMCI Control Model\n   Figure 12 depicts a message\
    \ flow for topology discovery when using\n   the ANCP+OMCI control model.  Basically,\
    \ when an ONT/ONU gets\n   connected to a PON, the OLT detects a new device and\
    \ a GPON Ranging\n   process starts.  During this process, the ONT/ONU becomes\
    \ authorized\n   by the OLT and identified by ONT/ONU ID, PON Port ID, and max\n\
    \   Bandwidth.  This port status is reported via ANCP to the NAS and then\n  \
    \ potentially the policy server via another mechanism that is out of\n   scope\
    \ of this document.  In a second step, after the GPON service\n   profile is assigned\
    \ from OLT to ONT/ONU, the OLT reports the final\n   status to NAS with information\
    \ about the service profile and other\n   information such as the ONT/ONU port\
    \ rate to the subscriber, for\n   instance.\n"
- title: 9.  Access Loop Configuration
  contents:
  - "9.  Access Loop Configuration\n   Topology Discovery provides Access Port Identification\
    \ to the NAS\n   when sending an Access Port Discovery message.  This informs\
    \ NAS\n   identification of a PON port on an Access Node.  Based on Access Port\n\
    \   Identification and on customer identification, service-related\n   parameters\
    \ could be configured on an OLT and an ONU/ONT.\n   Service-related parameters\
    \ could be sent to OLT via ANCP before or\n   after an ONU/ONT is up.  Sending\
    \ of ANCP loop configuration messages\n   from NAS can be triggered by a management\
    \ system or by customer\n   identification and authentication after Topology Discovery.\
    \  It may\n   be used for first-time configuration (zero touch) or for\n   updating/upgrading\
    \ customer's profile like C-VLAN ID, S-VLAN ID, and\n   service bandwidth.\n \
    \  Parameters of the User-Network Interface (UNI), which is the\n   subscriber\
    \ interface to HGW/CPE of ONU/ONT, can also be configured\n   via ANCP.  When\
    \ the ONU/ONT supports ANCP, parameters of the UNI on\n   ONU/ONT are sent to\
    \ the ONU/ONT via ANCP.  If the ONU/ONT does not\n   support ANCP but only OMCI,\
    \ parameters have to be sent from the NAS\n   to the OLT via ANCP first.  Then,\
    \ the OLT translates such\n   configuration into OMCI and sends it to the ONU/ONT.\n"
- title: 10.  Security Considerations
  contents:
  - "10.  Security Considerations\n   [RFC5713] lists the ANCP-related security threats\
    \ that could be\n   encountered on the Access Node and the NAS.  It develops a\
    \ threat\n   model for ANCP security and lists the security functions that are\n\
    \   required at the ANCP level.\n   With multicast handling as described in this\
    \ document, ANCP protocol\n   activity between the ANX and the NAS is triggered\
    \ by join/leave\n   requests coming from the end-user equipment.  This could potentially\n\
    \   be used for a denial-of-service attack against the ANX and/or the\n   NAS.\n\
    \   To mitigate this risk, the NAS and ANX may implement control plane\n   protection\
    \ mechanisms such as limiting the number of multicast flows\n   a given user can\
    \ simultaneously join or limiting the maximum rate of\n   join/leave from a given\
    \ user.\n   Protection against invalid or unsubscribed flows can be deployed via\n\
    \   provisioning black lists as close to the subscriber as possible\n   (e.g.,\
    \ in the ONT).\n   User activity logging for accounting or tracking purposes could\
    \ raise\n   privacy concerns if not appropriately protected.  To protect such\n\
    \   information, logging/accounting information can be exchanged with the\n  \
    \ corresponding server over a secure channel, and the information can\n   be stored\
    \ securely with policy-driven controlled access.\n"
- title: 11.  Differences in ANCP Applicability between DSL and PON
  contents:
  - "11.  Differences in ANCP Applicability between DSL and PON\n   As it currently\
    \ stands, both ANCP framework [RFC5851] and protocol\n   [RFC6320] are defined\
    \ in the context of DSL access.  Due to inherent\n   differences between PON and\
    \ DSL access technologies, ANCP needs a few\n   extensions for supporting the\
    \ use cases outlined in this document for\n   PON-based access.  These specific\
    \ differences and extensions are\n   outlined below.\n   -  In PON, the access-node\
    \ functionality is split between OLT and\n      ONT.  Therefore, ANCP interaction\
    \ between NAS and AN translates to\n      transactions between NAS and OLT and\
    \ between OLT and ONT.  The\n      processing of ANCP messages (e.g., for multicast\
    \ replication\n      control) on the OLT can trigger generation of ANCP messages\
    \ from\n      OLT to ONT.  Similarly, ANCP messages from ONT to the OLT can\n\
    \      trigger ANCP exchange between the OLT and the NAS (e.g., admission\n  \
    \    request messages).  This is illustrated in the generic message\n      flows\
    \ in Figures 5 and 6 of Section 5.  In the case of DSL, the\n      ANCP exchange\
    \ is contained between two network elements (NAS and\n      the DSLAM).\n   -\
    \  The PON connection to the ONT is a shared medium between multiple\n      ONTs\
    \ on the same PON.  In the case of DSL, the local loop is\n      point-to-point.\
    \  In the case of a DSL access network, the access-\n      facing port on the\
    \ NAS (i.e., port to the network between NAS and\n      the DSLAM) and the access-facing\
    \ ports on the DSLAM (i.e.,\n      customer's local loop) are the two bandwidth\
    \ constraint points\n      that need to be considered for performing bandwidth-based\n\
    \      admission control for multicast video and VoD delivered to the\n      customer.\
    \  In the case of PON access, in addition to the bandwidth\n      constraint on\
    \ the NAS to OLT facing ports and the subscriber-\n      allocated bandwidth for\
    \ video services, the bandwidth available on\n      the PON for video is an additional\
    \ constraint that needs to be\n      considered for bandwidth-based admission\
    \ control.  If the\n      bandwidth control is centralized in the NAS (as described\
    \ in the\n      first approach in Section 6.2), then the NAS needs to support\n\
    \      additional logic to consider available PON bandwidth before\n      admitting\
    \ a multicast request or a VoD request by the user.\n      Accordingly, ANCP needs\
    \ to identify the customer Access Port and\n      the PON on which the customer\
    \ ONT is.  If the PON bandwidth\n      control is performed on the OLT (as defined\
    \ in the second approach\n      in Section 6.2), then additional ANCP request\
    \ and response\n      messages are required for NAS to query the OLT to determine\n\
    \      available PON bandwidth when a request to admit a VoD flow is\n      received\
    \ on the NAS (as shown in Figure 9 in Section 6.2) or for\n      the OLT to inform\
    \ the NAS what stream bandwidth is sent to the\n      subscriber for the NAS to\
    \ take appropriate action (e.g., bandwidth\n      adjustment for various types\
    \ of traffic).\n   -  In PON, the multicast replication can potentially be performed\
    \ on\n      three different network elements: (1) on the NAS, (2) on the OLT\n\
    \      for replication to multiple PON ports, and (3) on the ONT/ONU for\n   \
    \   replication to multiple customer ports.  In the case of DSL, the\n      replication\
    \ can potentially be performed on NAS and/or the DSLAM.\n      Section 6.2 defines\
    \ options for multicast replication in the case\n      of PON.  In the first option,\
    \ the multicast replication is done on\n      the AN but is controlled from NAS\
    \ via ANCP (based on the reception\n      of per-customer IGMP messages on the\
    \ NAS).  In this option, the\n      NAS needs to supply the OLT the set of PON-customer-IDs\
    \ (as\n      defined in Section 2) to which the multicast stream needs to be\n\
    \      replicated.  The PON-customer-ID identifies the OLT and the PON\n     \
    \ ports on the OLT as well as the ONT and the Access Ports on the\n      ONT where\
    \ the multicast stream needs to be replicated.  Upon\n      receiving the request\
    \ to update its multicast replication state,\n      the OLT must update its replication\
    \ state with the indicated PON\n      ports but may also need to interact with\
    \ the ONT via ANCP to\n      update the multicast replication state on the ONT\
    \ with the set of\n      Access Ports (as indicated by the NAS).  In the case\
    \ of DSL, the\n      DSLAM only needs to update its own replication state based\
    \ on the\n      set of Access Ports indicated by the NAS.\n   -  For reporting\
    \ purposes, ANCP must enable the NAS to query the OLT\n      for channels replicated\
    \ on a PON or a list of PONs and to specific\n      Access Ports.  The latter\
    \ should trigger the OLT to query the ONT\n      for a list of channels being\
    \ replicated on all Access Ports or on\n      specific Access Ports to the premises.\
    \  In a DSL case, it is\n      sufficient to query the DSLAM for a list of channels\
    \ being\n      replicated on an Access Port or a list of Access Ports.\n"
- title: 12.  ANCP versus OMCI between the OLT and ONT/ONU
  contents:
  - "12.  ANCP versus OMCI between the OLT and ONT/ONU\n   ONT Management and Control\
    \ Interface (OMCI) [OMCI] is specified for\n   in-band ONT management via the\
    \ OLT.  This includes configuring\n   parameters on the ONT/ONU.  Such configuration\
    \ can include adding an\n   Access Port on the ONT to a multicast tree and the\
    \ ONT to a multicast\n   tree.  Thus, OMCI can be a potential replacement for\
    \ ANCP between the\n   OLT and ONT/ONU, albeit it may not be a suitable protocol\
    \ for dynamic\n   transactions as required for the multicast application.\n  \
    \ If OMCI is selected to be enabled between the OLT and ONT/ONU to\n   carry the\
    \ same information elements that would be carried over ANCP,\n   the OLT must\
    \ perform the necessary translation between ANCP and OMCI\n   for replication\
    \ control messages received via ANCP.  OMCI is an\n   already available control\
    \ channel, while ANCP requires a TCP/IP stack\n   on the ONT/ONU that can be used\
    \ by an ANCP client, and accordingly,\n   it requires that the ONT/ONU be IP addressable\
    \ for ANCP.  Most\n   ONTs/ONUs today have a TCP/IP stack used by certain applications\n\
    \   (e.g., VoIP and IGMP snooping).  ANCP may use the same IP address\n   that\
    \ is often assigned for VoIP or, depending on the implementation,\n   may require\
    \ a different address.  Sharing the same IP address between\n   VoIP and ANCP\
    \ may have other network implications on how the VoIP\n   agent is addressed and\
    \ on traffic routing.  For instance, the VoIP\n   traffic to/from the ONT is often\
    \ encapsulated in a VLAN-tagged\n   Ethernet frame and switched at Layer 2 through\
    \ the OLT to the NAS\n   where it is routed.  The VoIP agent in this case looks\
    \ like another\n   subscriber to the NAS.  On the other hand, the ANCP session\
    \ between\n   the ONT and OLT is terminated at the OLT.  Thus, the OLT must be\
    \ able\n   to receive/send IP traffic to/from the OLT, which will not work using\n\
    \   this setting.  Using a separate IP address for the purpose of ONT/ONU\n  \
    \ management or ANCP specifically may often be required when supporting\n   ANCP.\
    \  These considerations may favor OMCI in certain environments.\n   However, OMCI\
    \ will not allow some of the transactions required in\n   approach 2, where the\
    \ ONT/ONU sends unsolicited requests to the OLT\n   rather than being queried\
    \ or configured by OLT requests.\n"
- title: 13.  Acknowledgements
  contents:
  - "13.  Acknowledgements\n   The authors thank Rajesh Yadav and Francois Le Faucheur\
    \ for their\n   valuable comments and discussions.\n"
- title: 14.  References
  contents:
  - '14.  References

    '
- title: 14.1.  Normative References
  contents:
  - "14.1.  Normative References\n   [RFC2516]  Mamakos, L., Lidl, K., Evarts, J.,\
    \ Carrel, D., Simone, D.,\n              and R. Wheeler, \"A Method for Transmitting\
    \ PPP Over\n              Ethernet (PPPoE)\", RFC 2516, February 1999.\n   [RFC2684]\
    \  Grossman, D. and J. Heinanen, \"Multiprotocol Encapsulation\n             \
    \ over ATM Adaptation Layer 5\", RFC 2684, September 1999.\n   [RFC3376]  Cain,\
    \ B., Deering, S., Kouvelas, I., Fenner, B., and A.\n              Thyagarajan,\
    \ \"Internet Group Management Protocol, Version\n              3\", RFC 3376,\
    \ October 2002.\n   [RFC4605]  Fenner, B., He, H., Haberman, B., and H. Sandick,\n\
    \              \"Internet Group Management Protocol (IGMP) / Multicast\n     \
    \         Listener Discovery (MLD)-Based Multicast Forwarding\n              (\"\
    IGMP/MLD Proxying\")\", RFC 4605, August 2006.\n"
- title: 14.2.  Informative References
  contents:
  - "14.2.  Informative References\n   [802.1ag]  IEEE 802.1ag, \"Connectivity Fault\
    \ Management\", December\n              2007.\n   [RFC2881]  Mitton, D. and M.\
    \ Beadles, \"Network Access Server\n              Requirements Next Generation\
    \ (NASREQNG) NAS Model\", RFC\n              2881, July 2000.\n   [RFC5851]  Ooghe,\
    \ S., Voigt, N., Platnic, M., Haag, T., and S.\n              Wadhwa, \"Framework\
    \ and Requirements for an Access Node\n              Control Mechanism in Broadband\
    \ Multi-Service Networks\",\n              RFC 5851, May 2010.\n   [G.983.1] \
    \ ITU-T G.983.1, \"Broadband optical access systems based on\n              Passive\
    \ Optical Networks (PON)\", January 2005.\n   [G.984.1]  ITU-T G.984.1, \"Gigabit-capable\
    \ Passive Optical Networks\n              (GPON): General characteristics\", March\
    \ 2008.\n   [RFC3046]  Patrick, M., \"DHCP Relay Agent Information Option\", RFC\n\
    \              3046, January 2001.\n   [TR-101]   Cohen, A. and E. Shrum, \"Migration\
    \ to Ethernet-Based DSL\n              Aggregation\", DSL Forum TR-101, May 2006.\n\
    \   [RFC5713]  Moustafa, H., Tschofenig, H., and S. De Cnodder, \"Security\n \
    \             Threats and Security Requirements for the Access Node\n        \
    \      Control Protocol (ANCP)\", RFC 5713, January 2010.\n   [OMCI]     ITU-T\
    \ G.984.4, \"Gigabit-capable passive optical networks\n              (G-PON):\
    \ ONT management and control interface\n              specification\", February\
    \ 2008.\n   [RFC6320]  Wadhwa, S., Moisand, J., Haag, T., Voigt, N., and T.\n\
    \              Taylor, Ed., \"Protocol for Access Node Control Mechanism\n   \
    \           in Broadband Networks\", RFC 6320, October 2011.\n   [G.987.3]  ITU-T\
    \ G.987.3, \"10-Gigabit-capable passive optical\n              networks(XG-PON):\
    \ Transmission convergence (TC) layer\n              specification\", October\
    \ 2010.\n   [Y.1731]   ITU-T Y.1731, \"OAM functions and mechanisms for Ethernet\n\
    \              based networks\", May 2006.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Nabil Bitar (editor)\n   Verizon\n   60 Sylvan Road\n\
    \   Waltham, MA 02451\n   EMail: nabil.n.bitar@verizon.com\n   Sanjay Wadhwa (editor)\n\
    \   Alcatel-Lucent\n   701 East Middlefield Road\n   Mountain View, CA, 94043\n\
    \   EMail: sanjay.wadhwa@alcatel-lucent.com\n   Thomas Haag\n   Deutsche Telekom\n\
    \   EMail: HaagT@telekom.de\n   Hongyu Li\n   Huawei Technologies\n   EMail: hongyu.lihongyu@huawei.com\n"
