- title: __initial_text__
  contents:
  - "              Requirements for Edge-to-Edge Emulation of\n             Time Division\
    \ Multiplexed (TDM) Circuits over\n                       Packet Switching Networks\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2005).\n"
- title: Abstract
  contents:
  - "Abstract\n   This document defines the specific requirements for edge-to-edge\n\
    \   emulation of circuits carrying Time Division Multiplexed (TDM)\n   digital\
    \ signals of the Plesiochronous Digital Hierarchy as well as\n   the Synchronous\
    \ Optical NETwork/Synchronous Digital Hierarchy over\n   packet-switched networks.\
    \  It is aligned to the common architecture\n   for Pseudo Wire Emulation Edge-to-Edge\
    \ (PWE3).  It makes references\n   to the generic requirements for PWE3 where\
    \ applicable and complements\n   them by defining requirements originating from\
    \ specifics of TDM\n   circuits.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \      1.1. TDM Circuits Belonging to the PDH Hierarchy ................3\n  \
    \         1.1.1. TDM Structure and Transport Modes ...................4\n    \
    \  1.2. SONET/SDH Circuits .........................................4\n   2. Motivation\
    \ ......................................................5\n   3. Terminology .....................................................6\n\
    \   4. Reference Models ................................................7\n  \
    \    4.1. Generic PWE3 Models ........................................7\n    \
    \  4.2. Clock Recovery .............................................7\n      4.3.\
    \ Network Synchronization Reference Model ....................8\n           4.3.1.\
    \ Synchronous Network Scenarios ......................10\n           4.3.2. Relative\
    \ Network Scenario ..........................12\n           4.3.3. Adaptive Network\
    \ Scenario ..........................12\n   5. Emulated Services ..............................................13\n\
    \      5.1. Structure-Agnostic Transport of Signals out of the\n           PDH\
    \ Hierarchy .............................................13\n      5.2. Structure-Aware\
    \ Transport of Signals out of the\n           PDH Hierarchy .............................................14\n\
    \      5.3. Structure-Aware Transport of SONET/SDH Circuits ...........14\n  \
    \ 6. Generic Requirements ...........................................14\n    \
    \  6.1. Relevant Common PW Requirements ...........................14\n      6.2.\
    \ Common Circuit Payload Requirements .......................15\n      6.3. General\
    \ Design Issues .....................................16\n   7. Service-Specific\
    \ Requirements ..................................16\n      7.1. Connectivity ..............................................16\n\
    \      7.2. Network Synchronization ...................................16\n  \
    \    7.3. Robustness ................................................16\n    \
    \       7.3.1. Packet loss ........................................17\n      \
    \     7.3.2. Out-of-order delivery ..............................17\n      7.4.\
    \ CE Signaling ..............................................17\n      7.5. PSN\
    \ Bandwidth Utilization .................................18\n      7.6. Packet\
    \ Delay Variation ....................................19\n      7.7. Compatibility\
    \ with the Existing PSN Infrastructure ........19\n      7.8. Congestion Control\
    \ ........................................19\n      7.9. Fault Detection and Handling\
    \ ..............................20\n      7.10. Performance Monitoring ...................................20\n\
    \   8. Security Considerations ........................................20\n  \
    \ 9. References .....................................................20\n    \
    \  9.1. Normative References ......................................20\n      9.2.\
    \ Informative References ....................................21\n   10. Contributors\
    \ Section ..........................................22\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This document defines the specific requirements for edge-to-edge\n\
    \   emulation of circuits carrying Time Division Multiplexed (TDM)\n   digital\
    \ signals of the Plesiochronous Digital Hierarchy (PDH) as well\n   as the Synchronous\
    \ Optical NETwork (SONET)/Synchronous Digital\n   Hierarchy (SDH) over Packet-Switched\
    \ Networks (PSN).  It is aligned\n   to the common architecture for Pseudo Wire\
    \ Emulation Edge-to-Edge\n   (PWE3) as defined in [RFC3985].  It makes references\
    \ to requirements\n   in [RFC3916] where applicable and complements [RFC3916]\
    \ by defining\n   requirements originating from specifics of TDM circuits.\n \
    \  The term \"TDM\" will be used in this documents as a general descriptor\n \
    \  for the synchronous bit streams belonging to either the PDH or the\n   SONET/SDH\
    \ hierarchies.\n"
- title: 1.1.  TDM Circuits Belonging to the PDH Hierarchy
  contents:
  - "1.1.  TDM Circuits Belonging to the PDH Hierarchy\n   The bit rates traditionally\
    \ used in various regions of the world are\n   detailed in the normative reference\
    \ [G.702].  For example, in North\n   America, the T1 bit stream of 1.544 Mbps\
    \ and the T3 bit stream of\n   44.736 Mbps are mandated, while in Europe, the\
    \ E1 bit stream of 2.048\n   Mbps and the E3 bit stream of 34.368 Mbps are utilized.\n\
    \   Although TDM can be used to carry unstructured bit streams at the\n   rates\
    \ defined in [G.702], there is a standardized method of carrying\n   bit streams\
    \ in larger units called frames, each frame contains the\n   same number of bits.\n\
    \   Related to the sampling frequency of voice traffic the bitrate is\n   always\
    \ a multiple of 8000, hence the T1 frame consists of 193 bits\n   and the E1 frame\
    \ of 256 bits.  The number of bits in a frame is\n   called the frame size.\n\
    \   The framing is imposed by introducing a periodic pattern into the bit\n  \
    \ stream to identify the boundaries of the frames (e.g., 1 framing bit\n   per\
    \ T1 frame, a sequence of 8 framing bits per E1 frame).  The\n   details of how\
    \ these framing bits are generated and used are\n   elucidated in [G.704], [G.706],\
    \ and [G.751].  Unframed TDM has all\n   bits available for payload.\n   Framed\
    \ TDM is often used to multiplex multiple channels (e.g., voice\n   channels each\
    \ consisting of 8000 8-bit-samples per second) in a\n   sequence of \"timeslots\"\
    \ recurring in the same position in each frame.\n   This multiplexing is called\
    \ \"channelized TDM\" and introduces\n   additional structure.\n   In some cases,\
    \ framing also defines groups of consecutive frames\n   called multiframes.  Such\
    \ grouping imposes an additional level of\n   structure on the TDM bit-stream.\n"
- title: 1.1.1.  TDM Structure and Transport Modes
  contents:
  - "1.1.1.  TDM Structure and Transport Modes\n   Unstructured TDM:\n   TDM that\
    \ consists of a raw bit-stream of rate defined in [G.702],\n   with all bits available\
    \ for payload.\n   Structured TDM:\n   TDM with one or more levels of structure\
    \ delineation, including\n   frames, channelization, and multiframes (e.g., as\
    \ defined in [G.704],\n   [G.751], and [T1.107]).\n   Structure-Agnostic Transport:\n\
    \   Transport of unstructured TDM, or of structured TDM when the\n   structure\
    \ is deemed inconsequential from the transport point of view.\n   In structure-agnostic\
    \ transport, any structural overhead that may be\n   present is transparently\
    \ transported along with the payload data, and\n   the encapsulation provides\
    \ no mechanisms for its location or\n   utilization.\n   Structure-Aware Transport:\n\
    \   Transport of structured TDM taking at least some level of the\n   structure\
    \ into account.  In structure-aware transport, there is no\n   guarantee that\
    \ all bits of the TDM bit-stream will be transported\n   over the PSN network\
    \ (specifically, the synchronization bits and\n   related overhead may be stripped\
    \ at ingress and usually will be\n   regenerated at egress) or that transported\
    \ bits will be situated in\n   the packet in their original order (but in this\
    \ case, bit order is\n   usually recovered at egress; one known exception is loss\
    \ of\n   multiframe synchronization between the TDM data and CAS bits\n   introduced\
    \ by a digital cross-connect acting as a Native Service\n   Processing (NSP) block,\
    \ see [TR-NWT-170]).\n"
- title: 1.2.  SONET/SDH Circuits
  contents:
  - "1.2.  SONET/SDH Circuits\n   The term SONET refers to the North American Synchronous\
    \ Optical\n   NETwork as specified by [T1.105].  It is based on the concept of\
    \ a\n   Nx783 byte payload container repeated every 125us.  This payload is\n\
    \   referred to as an STS-1 SPE and may be concatenated into higher\n   bandwidth\
    \ circuits (e.g., STS-Nc) or sub-divided into lower bandwidth\n   circuits (Virtual\
    \ Tributaries).  The higher bandwidth concatenated\n   circuits can be used to\
    \ carry anything from IP Packets to ATM cells\n   to Digital Video Signals.  Individual\
    \ STS-1 SPEs are frequently used\n   to carry individual DS3 or E3 TDM circuits.\
    \  When the 783 byte\n   containers are sub-divided for lower rate payloads, they\
    \ are\n   frequently used to carry individual T1 or E1 TDM circuits.\n   The Synchronous\
    \ Digital Hierarchy (SDH) is the international\n   equivalent and enhancement\
    \ of SONET and is specified by [G.707].\n   Both SONET and SDH include a substantial\
    \ amount of transport overhead\n   that is used for performance monitoring, fault\
    \ isolation, and other\n   maintenance functions along different types of optical\
    \ or electrical\n   spans.  This also includes a pointer-based mechanism for carrying\n\
    \   payloads asynchronously.  In addition, the payload area includes\n   dedicated\
    \ overhead for end-to-end performance monitoring, fault\n   isolation, and maintenance\
    \ for the service being carried.  If the\n   main payload area is sub-divided\
    \ into lower rate circuits (such as\n   T1/E1), additional overhead is included\
    \ for end-to-end monitoring of\n   the individual T1/E1 circuits.\n   This document\
    \ discusses the requirements for emulation of SONET/SDH\n   services.  These services\
    \ include end-to-end emulation of the SONET\n   payload (STS-1 SPE), emulation\
    \ of concatenated payloads (STS-Nc SPE),\n   as well as emulation of a variety\
    \ of sub-STS-1 rate circuits jointly\n   referred to as Virtual Tributaries (VT)\
    \ and their SDH analogs.\n"
- title: 2.  Motivation
  contents:
  - "2.  Motivation\n   [RFC3916] specifies common requirements for edge-to-edge emulation\
    \ of\n   circuits of various types.  However, these requirements, as well as\n\
    \   references in [RFC3985], do not cover specifics of PWs carrying TDM\n   circuits.\n\
    \   The need for a specific document to complement [RFC3916] addressing\n   of\
    \ edge-to-edge emulation of TDM circuits arises from the following:\n   o  Specifics\
    \ of the TDM circuits.  For example,\n      *  the need for balance between the\
    \ clock of ingress and egress\n         attachment circuits in each direction\
    \ of the Pseudo Wire (PW),\n      *  the need to maintain jitter and wander of\
    \ the clock of the\n         egress end service, within the limits imposed by\
    \ the\n         appropriate normative documents, in the presence of the packet\n\
    \         delay variation produced by the PSN.\n   o  Specifics of applications\
    \ using TDM circuits.  For example, voice\n      applications,\n      *  put special\
    \ emphasis on minimization of one-way delay, and\n      *  are relatively tolerant\
    \ to errors in data.\n   o  Other applications might have different specifics.\
    \  For example,\n      transport of signaling information\n      *  is relatively\
    \ tolerant to one-way delay, and\n      *  is sensitive to errors in transmitted\
    \ data.\n   o  Specifics of the customers' expectations regarding end-to-end\n\
    \      behavior of services that contain emulated TDM circuits.  For\n      example,\
    \ experience with carrying such services over SONET/SDH\n      networks increases\
    \ the need for\n      *  isolation of problems introduced by the PSN from those\n\
    \         occurring beyond the PSN bounds,\n      *  sensitivity to misconnection,\n\
    \      *  sensitivity to unexpected connection termination, etc.\n"
- title: 3.  Terminology
  contents:
  - "3.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\"\
    , \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and\
    \ \"OPTIONAL\" in this\n   document are to be interpreted as described in [RFC2119].\n\
    \   The terms defined in [RFC3985], Section 1.4 are used consistently.\n   However\
    \ some terms and acronyms are used in conjunction with the TDM\n   services. \
    \ In particular:\n   TDM networks employ Channel-Associated Signaling (CAS) or\
    \ Common\n   Channel Signaling (CCS) to supervise and advertise status of\n  \
    \ telephony applications, provide alerts to these applications (as to\n   requests\
    \ to connect or disconnect), and to transfer routing and\n   addressing information.\
    \  These signals must be reliably transported\n   over the PSNs for the telephony\
    \ end-systems to function properly.\n   CAS (Channel-Associated Signaling)\n \
    \     CAS is carried in the same T1 or E1 frame as the voice signals,\n      but\
    \ not in the speech band.  Since CAS signaling may be\n      transferred at a\
    \ rate slower than the TDM traffic in a timeslot,\n      one need not update all\
    \ the CAS bits in every TDM frame.  Hence,\n      CAS systems cycle through all\
    \ the signaling bits only after some\n      number of TDM frames, which defines\
    \ a new structure known as a\n      multiframe or superframe.  Common multiframes\
    \ are 12, 16, or 24\n      frames in length, corresponding to 1.5, 2, and 3 milliseconds\
    \ in\n      duration.\n   CCS (Common Channel Signaling)\n      CCS signaling\
    \ uses a separate digital channel to carry\n      asynchronous messages pertaining\
    \ to the state of telephony\n      applications over related TDM timeslots of\
    \ a TDM trunk.  This\n      channel may be physically situated in one or more\
    \ adjacent\n      timeslots of the same TDM trunk (trunk associated CCS) or may\
    \ be\n      transported over an entirely separate network.\n      CCS is typically\
    \ HDLC-based, with idle codes or keep-alive\n      messages being sent until a\
    \ signaling event (e.g., on-hook or\n      off-hook) occurs.  Examples of HDLC-based\
    \ CCS systems are SS7\n      [Q.700] and ISDN PRI signaling [Q.931].\n   Note:\
    \ For the TDM network, we use the terms \"jitter\" and \"wander\" as\n   defined\
    \ in [G.810] to describe short- and long-term variance of the\n   significant\
    \ instants of the digital signal, while for the PSN we use\n   the term packet\
    \ delay variation (PDV) (see [RFC3393]).\n"
- title: 4.  Reference Models
  contents:
  - '4.  Reference Models

    '
- title: 4.1.  Generic PWE3 Models
  contents:
  - "4.1.  Generic PWE3 Models\n   Generic models that have been defined in [RFC3985]\
    \ in sections\n   - 4.1 (Network Reference Model),\n   - 4.2 (PWE3 Pre-processing),\n\
    \   - 4.3 (Maintenance Reference Model),\n   - 4.4 (Protocol Stack Reference Model)\
    \ and\n   - 4.5 (Pre-processing Extension to Protocol Stack Reference Model).\n\
    \   They are fully applicable for the purposes of this document without\n   modification.\n\
    \   All the services considered in this document represent special cases\n   of\
    \ the Bit-stream and Structured bit-stream payload type defined in\n   Section\
    \ 3.3 of [RFC3985].\n"
- title: 4.2.  Clock Recovery
  contents:
  - "4.2.  Clock Recovery\n   Clock recovery is extraction of the transmission bit\
    \ timing\n   information from the delivered packet stream.  Extraction of this\n\
    \   information from a highly jittered source, such as a packet stream,\n   may\
    \ be a complex task.\n"
- title: 4.3.  Network Synchronization Reference Model
  contents:
  - "4.3.  Network Synchronization Reference Model\n   Figure 1 shows a generic network\
    \ synchronization reference model.\n          +---------------+              \
    \ +---------------+\n          |      PE1      |               |      PE2    \
    \  |\n       K  |   +--+        |               |        +--+   |  G\n       |\
    \  |   | J|        |               |        | H|   |  |\n       v  |   v  |  \
    \      |               |        v  |   |  v\n   +---+  | +-+  +-+  +-+ |  +--+\
    \   +--+  | +-+  +-+  +-+ |  +---+\n   |   |  | |P|  |D|  |P| |  |  |   |  | \
    \ | |P|  |E|  |P| |  |   |\n   |   |<===|h|<:|e|<:|h|<:::|  |<::|  |<:::|h|<:|n|<=|h|<===|\
    \   |\n   |   |  | |y|  |c|  |y| |  |  |   |  |  | |y|  |c|  |y| |  |   |\n  \
    \ | C |  | +-+  +-+  +-+ |  |  |   |  |  | +-+  +-+  +-+ |  | C |\n   | E |  |\
    \               |  |S1|   |S2|  |               |  | E |\n   | 1 |  | +-+  +-+\
    \  +-+ |  |  |   |  |  | +-+  +-+  +-+ |  | 2 |\n   |   |  | |P|  |E|  |P| | \
    \ |  |   |  |  | |P|  |D|  |P| |  |   |\n   |   |===>|h|=>|n|:>|h|:::>|  |::>|\
    \  |:::>|h|:>|e|=>|h|===>|   |\n   |   |  | |y|  |c|  |y| |  |  |   |  |  | |y|\
    \  |c|  |y| |  |   |\n   +---+  | +-+  +-+  +-+ |  +--+   +--+  | +-+  +-+  +-+\
    \ |  +---+\n    ^  ^  |   |  ^        |               |        |  ^   |  ^  ^\n\
    \    |  |  |   |B |        |<------+------>|        |  |   |  |  |\n    |  A \
    \ |   +--+        |       |       |        +--+-E |  F  |\n    |     +---------------+\
    \      +-+      +---------------+     |\n    |             ^              |I|\
    \               ^            |\n    |             |              +-+         \
    \      |            |\n    |             C                                D  \
    \          |\n    +-----------------------------L-----------------------------+\n\
    \       Figure 1: The Network Synchronization Reference Model\n   The following\
    \ notation is used in Figure 1:\n   CE1, CE2\n      Customer edge devices terminating\
    \ TDM circuits to be emulated.\n   PE1, PE2\n      Provider edge devices adapting\
    \ these end services to PW.\n   S1, S2\n      Provider core routers.\n   Phy\n\
    \      Physical interface terminating the TDM circuit.\n   Enc\n      PSN-bound\
    \ interface of the PW, where the encapsulation takes\n      place.\n   Dec\n \
    \     CE-bound interface of the PW, where the decapsulation takes place.\n   \
    \   It contains a compensation buffer (also known as the \"jitter\n      buffer\"\
    ) of limited size.\n   \"==>\"\n      TDM attachment circuits.\n   \"::>\"\n \
    \     PW providing edge-to-edge emulation for the TDM circuit.\n   The characters\
    \ \"A\" - \"L\" denote various clocks:\n   \"A\"\n      The clock used by CE1\
    \ for transmission of the TDM attachment\n      circuit towards CE1.\n   \"B\"\
    \n      The clock recovered by PE1 from the incoming TDM attachment\n      circuit.\
    \  \"A\" and \"B\" always have the same frequency.\n   \"G\"\n      The clock\
    \ used by CE2 for transmission of the TDM attachment\n      circuit towards CE2.\n\
    \   \"H\"\n      The clock recovered by PE2 from the incoming TDM attachment\n\
    \      circuit.  \"G\" and \"H\" always have the same frequency.\n   \"C\", \"\
    D\"\n      Local oscillators available to PE1 and PE2, respectively.\n   \"E\"\
    \n      Clock used by PE2 to transmit the TDM attachment service circuit\n   \
    \   to CE2 (the recovered clock).\n   \"F\"\n      Clock recovered by CE2 from\
    \ the incoming TDM attachment service\n      (\"E and \"F\" have the same frequency).\n\
    \   \"I\"\n      If the clock exists, it is the common network reference clock\n\
    \      available to PE1 and PE2.\n   \"J\"\n      Clock used by PE1 to transmit\
    \ the TDM attachment service circuit\n      to CE1 (the recovered clock).\n  \
    \ \"K\"\n      Clock recovered by CE1 from the incoming TDM attachment service\n\
    \      (\"J\" and \"K\" have the same frequency).\n   \"L\"\n      If it exists,\
    \ it is the common reference clock of CE1 and CE2.\n      Note that different\
    \ pairs of CE devices may use different common\n      reference clocks.\n   A\
    \ requirement of edge-to-edge emulation of a TDM circuit is that\n   clock \"\
    B\" and \"E\", as well as clock \"H\" and \"J\", are of the same\n   frequency.\
    \  The most appropriate method will depend on the network\n   synchronization\
    \ scheme.\n   The following groups of synchronization scenarios can be considered:\n"
- title: 4.3.1.  Synchronous Network Scenarios
  contents:
  - "4.3.1.  Synchronous Network Scenarios\n   Depending on which part of the network\
    \ is synchronized by a common\n   clock, there are two scenarios:\n   o  PE Synchronized\
    \ Network:\n      Figure 2 is an adapted version of the generic network reference\n\
    \      model, and presents the PE synchronized network scenario.\n      The common\
    \ network reference clock \"I\" is available to all the PE\n      devices, and\
    \ local oscillators \"C\" and \"D\" are locked to \"I\":\n      *  Clocks \"E\"\
    \ and \"J\" are the same as \"D\" and \"C\", respectively.\n      *  Clocks \"\
    A\" and \"G\" are the same as \"K\" and \"F\", respectively\n         (i.e., CE1\
    \ and CE2 use loop timing).\n                       +-----+                 +-----+\n\
    \      +-----+    |     |- - -|=================|- - -|     |    +-----+\n   \
    \   | /-- |<---------|............PW1..............|<---------| <-\\ |\n     \
    \ || CE |    |     | PE1 |                 | PE2 |     |    |CE2 ||\n      | \\\
    -> |--------->|............PW2..............|--------->| --/ |\n      +-----+\
    \    |     |- - -|=================|- - -|     |    +-----+\n                \
    \       +-----+                 +-----+\n                          ^         \
    \              ^\n                          |C                      |D\n     \
    \                     +-----------+-----------+\n                            \
    \          |\n                                     +-+\n                     \
    \                |I|\n                                     +-+\n             \
    \        Figure 2: PE Synchronized Scenario\n   o  CE Synchronized Network:\n\
    \      Figure 3 is an adapted version of the generic network reference\n     \
    \ model, and presents the CE synchronized network scenario.\n      The common\
    \ network reference clock \"L\" is available to all the CE\n      devices, and\
    \ local oscillators \"A\" and \"G\" are locked to \"L\":\n      *  Clocks \"E\"\
    \ and \"J\" are the same as \"G\" and \"A\", respectively\n         (i.e., PE1\
    \ and PE2 use loop timing).\n                       +-----+                 +-----+\n\
    \      +-----+    |     |- - -|=================|- - -|     |    +-----+\n   \
    \   |     |<---------|............PW1..............|<---------|     |\n      |\
    \ CE1 |    |     | PE1 |                 | PE2 |     |    | CE2 |\n      |   \
    \  |--------->|............PW2..............|--------->|     |\n      +-----+\
    \    |     |- - -|=================|- - -|     |    +-----+\n        ^       \
    \       +-----+                 +-----+              ^\n        |A           \
    \                                              G|\n        +----------------------------+------------------------------+\n\
    \                                     |\n                                    +-+\n\
    \                                    |L|\n                                   \
    \ +-+\n                     Figure 3: CE Synchronized Scenario\n   No timing information\
    \ has to be transferred in these cases.\n"
- title: 4.3.2.  Relative Network Scenario
  contents:
  - "4.3.2.  Relative Network Scenario\n   In this case, each CE uses its own transmission\
    \ clock source that\n   must be carried across the PSN and recovered by the remote\
    \ PE,\n   respectively.  The common PE clock \"I\" can be used as reference for\n\
    \   this purpose.\n   Figure 4 shows the relative network scenario.\n   The common\
    \ network reference clock \"I\" is available to all the PE\n   devices, and local\
    \ oscillators \"C\" and \"D\" are locked to \"I\":\n   o  Clocks \"A\" and \"\
    G\" are generated locally without reference to a\n      common clock.\n   o  Clocks\
    \ \"E\" and \"J\" are generated in reference to a common clock\n      available\
    \ at all PE devices.\n   In a slight modification of this scenario, one (but not\
    \ both!) of the\n   CE devices may use its receive clock as its transmission clock\
    \ (i.e.,\n   use loop timing).\n                                             \
    \                 |G\n                    +-----+                 +-----+    \
    \       v\n   +-----+    |     |- - -|=================|- - -|     |    +-----+\n\
    \   |     |<---------|............PW1..............|<---------|     |\n   | CE1\
    \ |    |     | PE1 |                 | PE2 |     |    | CE2 |\n   |     |--------->|............PW2..............|--------->|\
    \     |\n   +-----+    |     |- - -|=================|- - -|     |    +-----+\n\
    \        ^           +-----+<-------+------->+-----+\n        |A             \
    \            |\n                                  +-+\n                      \
    \            |I|\n                                  +-+\n             Figure 4:\
    \ Relative Network Scenario Timing\n   In this case, timing information (the difference\
    \ between the common\n   reference clock \"I\" and the incoming clock \"A\") MUST\
    \ be explicitly\n   transferred from the ingress PE to the egress PE.\n"
- title: 4.3.3.  Adaptive Network Scenario
  contents:
  - "4.3.3.  Adaptive Network Scenario\n   The adaptive scenario is characterized\
    \ by:\n   o  No common network reference clock \"I\" is available to PE1 and PE2.\n\
    \   o  No common reference clock \"L\" is available to CE1 and CE2.\n   Figure\
    \ 5 presents the adaptive network scenario.\n                     |J         \
    \                              |G\n                     v                    \
    \                    |\n                    +-----+                 +-----+  \
    \         v\n   +-----+    |     |- - -|=================|- - -|     |    +-----+\n\
    \   |     |<---------|............PW1..............|<---------|     |\n   | CE1\
    \ |    |     | PE1 |                 | PE2 |     |    | CE2 |\n   |     |--------->|............PW2..............|--------->|\
    \     |\n   +-----+    |     |- - -|=================|- - -|     |    +-----+\n\
    \        ^           +-----+                 +-----+\n        |              \
    \                          ^\n       A|                                      \
    \ E|\n                     Figure 5: Adaptive Scenario\n   Synchronizing clocks\
    \ \"A\" and \"E\" in this scenario is more difficult\n   than it is in the other\
    \ scenarios.\n   Note that the tolerance between clocks \"A\" and \"E\" must be\
    \ small\n   enough to ensure that the jitter buffer does not overflow or\n   underflow.\n\
    \   In this case, timing information MAY be explicitly transferred from\n   the\
    \ ingress PE to the egress PE, e.g., by RTP.\n"
- title: 5.  Emulated Services
  contents:
  - "5.  Emulated Services\n   This section defines requirements for the payload and\
    \ encapsulation\n   layers for edge-to-edge emulation of TDM services with bit-stream\n\
    \   payload as well as structured bit-stream payload.\n   Wherever possible, the\
    \ requirements specified in this document SHOULD\n   be satisfied by appropriate\
    \ arrangements of the encapsulation layer\n   only.  The (rare) cases when the\
    \ requirements apply to both the\n   encapsulation and payload layers (or even\
    \ to the payload layer only)\n   will be explicitly noted.\n   The service-specific\
    \ encapsulation layer for edge-to-edge emulation\n   comprises the following services\
    \ over a PSN.\n"
- title: 5.1.  Structure-Agnostic Transport of Signals out of the PDH Hierarchy
  contents:
  - "5.1.  Structure-Agnostic Transport of Signals out of the PDH Hierarchy\n   Structure-agnostic\
    \ transport is considered for the following signals:\n   o  E1 as described in\
    \ [G.704].\n   o  T1 (DS1) as described in [G.704].\n   o  E3 as defined in [G.751].\n\
    \   o  T3 (DS3) as described in [T1.107].\n"
- title: 5.2.  Structure-Aware Transport of Signals out of the PDH Hierarchy
  contents:
  - "5.2.  Structure-Aware Transport of Signals out of the PDH Hierarchy\n   Structure-aware\
    \ transport is considered for the following signals:\n   o  E1/T1 with one of\
    \ the structures imposed by framing as described\n      in [G.704].\n   o  NxDS0\
    \ with or without CAS.\n"
- title: 5.3.  Structure-Aware Transport of SONET/SDH Circuits
  contents:
  - "5.3.  Structure-Aware Transport of SONET/SDH Circuits\n   Structure-aware transport\
    \ is considered for the following SONET/SDH\n   circuits:\n   o  SONET STS-1 synchronous\
    \ payload envelope (SPE)/SDH VC-3.\n   o  SONET STS-Nc SPE (N = 3, 12, 48, 192)\
    \ / SDH VC-4, VC-4-4c,\n      VC-4-16c, VC-4-64c.\n   o  SONET VT-N (N = 1.5,\
    \ 2, 3, 6) / SDH VC-11, VC-12, VC-2.\n   o  SONET Nx VT-N / SDH Nx VC-11/VC-12/VC-2/VC-3.\n\
    \   Note: There is no requirement for the structure-agnostic transport of\n  \
    \ SONET/SDH.  For this case, it would seem that structure must be taken\n   into\
    \ account.\n"
- title: 6.  Generic Requirements
  contents:
  - '6.  Generic Requirements

    '
- title: 6.1.  Relevant Common PW Requirements
  contents:
  - "6.1.  Relevant Common PW Requirements\n   The encapsulation and payload layers\
    \ MUST conform to the common PW\n   requirements defined in [RFC3916]:\n   1.\
    \  Conveyance of Necessary Header Information:\n       A.  For structure-agnostic\
    \ transport, this functionality MAY be\n           provided by the payload layer.\n\
    \       B.  For structure-aware transport, the necessary information MUST\n  \
    \         be provided by the encapsulation layer.\n       C.  Structure-aware\
    \ transport of SONET/SDH circuits MUST preserve\n           path overhead information\
    \ as part of the payload.  Relevant\n           components of the transport overhead\
    \ MAY be carried in the\n           encapsulation layer.\n   2.  Support of Multiplexing\
    \ and Demultiplexing if supported by the\n       native services.  This is relevant\
    \ for Nx DS0 circuits (with or\n       without signaling) and Nx VT-x in a single\
    \ STS-1 SPE or VC-4.:\n       A.  For these circuits, the combination of encapsulation\
    \ and\n           payload layers MUST provide for separate treatment of every\n\
    \           sub-circuit.\n       B.  Enough information SHOULD be provided by\
    \ the pseudo wire to\n           allow multiplexing and demultiplexing by the\
    \ NSP.  Reduction\n           of the complexity of the PW emulation by using NSP\
    \ circuitry\n           for multiplexing and demultiplexing MAY be the preferred\n\
    \           solution.\n   3.  Intervention or transparent transfer of Maintenance\
    \ Messages of\n       the Native Services, depending on the particular scenario.\n\
    \   4.  Consideration of Per-PSN Packet Overhead (see also Section 7.5\n     \
    \  below).\n   5.  Detection and handling of PW faults.  The list of faults is\
    \ given\n       in Section 7.9 below.\n   Fragmentation indications MAY be used\
    \ for structure-aware transport\n   when the structures in question either exceed\
    \ desired packetization\n   delay or exceed Path MTU between the pair of PEs.\n\
    \   The following requirement listed in [RFC3916] is not applicable to\n   emulation\
    \ of TDM services:\n   o  Support of variable length PDUs.\n"
- title: 6.2.  Common Circuit Payload Requirements
  contents:
  - "6.2.  Common Circuit Payload Requirements\n   Structure-agnostic transport treats\
    \ TDM circuits as belonging to the\n   'Bit-stream' payload type defined in [RFC3985].\n\
    \   Structure-aware transport treats these circuits as belonging to the\n   \"\
    Structured bit-stream\" payload type defined in [RFC3985].\n   Accordingly, the\
    \ encapsulation layer MUST provide the common\n   Sequencing service and SHOULD\
    \ provide Timing information\n   (Synchronization services) when required (see\
    \ Section 4.3 above).\n   Note: Length service MAY be provided by the encapsulation\
    \ layer, but\n   is not required.\n"
- title: 6.3.  General Design Issues
  contents:
  - "6.3.  General Design Issues\n   The combination of payload and encapsulation\
    \ layers SHOULD comply\n   with the general design principles of the Internet\
    \ protocols as\n   presented in Section 3 of [RFC1958] and [RFC3985].\n   If necessary,\
    \ the payload layer MAY use some forms of adaptation of\n   the native TDM payload\
    \ in order to achieve specific, well-documented\n   design objectives.  In these\
    \ cases, standard adaptation techniques\n   SHOULD be used.\n"
- title: 7.  Service-Specific Requirements
  contents:
  - '7.  Service-Specific Requirements

    '
- title: 7.1.  Connectivity
  contents:
  - "7.1.  Connectivity\n   1.  The emulation MUST support the transport of signals\
    \ between\n       Attachment Circuits (ACs) of the same type (see Section 5) and,\n\
    \       wherever appropriate, bit-rate.\n   2.  The encapsulation layer SHOULD\
    \ remain unaffected by specific\n       characteristics of connection between\
    \ the ACs and PE devices at\n       the two ends of the PW.\n"
- title: 7.2.  Network Synchronization
  contents:
  - "7.2.  Network Synchronization\n   1.  The encapsulation layer MUST provide synchronization\
    \ services\n       that are sufficient to:\n       A.  match the ingress and egress\
    \ end service clocks regardless of\n           the specific network synchronization\
    \ scenario, and\n       B.  keep the jitter and wander of the egress service clock\
    \ within\n           the service-specific limits defined by the appropriate\n\
    \           normative references.\n   2.  If the same high-quality synchronization\
    \ source is available to\n       all the PE devices in the given domain, the encapsulation\
    \ layer\n       SHOULD be able to make use of it (e.g., for better reconstruction\n\
    \       of the native service clock).\n"
- title: 7.3.  Robustness
  contents:
  - "7.3.  Robustness\n   The robustness of the emulated service depends not only\
    \ upon the\n   edge-to-edge emulation protocol, but also upon proper implementation\n\
    \   of the following procedures.\n"
- title: 7.3.1.  Packet loss
  contents:
  - "7.3.1.  Packet loss\n   Edge-to-edge emulation of TDM circuits MAY assume very\
    \ low\n   probability of packet loss between ingress and egress PE.  In\n   particular,\
    \ no retransmission mechanisms are required.\n   In order to minimize the effect\
    \ of lost packets on the egress\n   service, the encapsulation layer SHOULD:\n\
    \   1.  Enable independent interpretation of TDM data in each packet by\n    \
    \   the egress PE (see [RFC2736]).  This requirement MAY be\n       disregarded\
    \ if the egress PE needs to interpret structures that\n       exceed the path\
    \ MTU between the ingress and egress PEs.\n   2.  Allow reliable detection of\
    \ lost packets (see next section).  In\n       particular, it SHOULD allow estimation\
    \ of the arrival time of the\n       next packet and detection of lost packets\
    \ based on this estimate.\n   3.  Minimize possible effect of lost packets on\
    \ recovery of the\n       circuit clock by the egress PE.\n   4.  Increase the\
    \ resilience of the CE TDM interface to packet loss by\n       allowing the egress\
    \ PE to substitute appropriate data.\n"
- title: 7.3.2.  Out-of-order delivery
  contents:
  - "7.3.2.  Out-of-order delivery\n   The encapsulation layer MUST provide the necessary\
    \ mechanisms to\n   guarantee ordered delivery of packets carrying the TDM data\
    \ over the\n   PSN.  Packets that have arrived out-of-order:\n   1.  MUST be detected,\
    \ and\n   2.  SHOULD be reordered if not judged to be too late or too early for\n\
    \       playout.\n   Out-of-order packets that cannot be reordered MUST be treated\
    \ as\n   lost.\n"
- title: 7.4.  CE Signaling
  contents:
  - "7.4.  CE Signaling\n   Unstructured TDM circuits would not usually require any\
    \ special\n   mechanism for carrying CE signaling as this would be carried as\
    \ part\n   of the emulated service.\n   Some CE applications using structured\
    \ TDM circuits (e.g., telephony)\n   require specific signaling that conveys the\
    \ changes of state of these\n   applications relative to the TDM data.\n   The\
    \ encapsulation layer SHOULD support signaling of state of CE\n   applications\
    \ for the relevant circuits providing for:\n   1.  Ability to support different\
    \ signaling schemes with minimal\n       impact on encapsulation of TDM data,\n\
    \   2.  Multiplexing of application-specific CE signals and data of the\n    \
    \   emulated service in the same PW,\n   3.  Synchronization (within the application-specific\
    \ tolerance\n       limits) between CE signals and data at the PW egress,\n  \
    \ 4.  Probabilistic recovery against possible, occasional loss of\n       packets\
    \ in the PSN, and\n   5.  Deterministic recovery of the CE application state after\
    \ PW setup\n       and network outages.\n   CE signaling that is used for maintenance\
    \ purposes (loopback\n   commands, performance monitoring data retrieval, etc.)\
    \ SHOULD use the\n   generic PWE3 maintenance protocol.\n"
- title: 7.5.  PSN Bandwidth Utilization
  contents:
  - "7.5.  PSN Bandwidth Utilization\n   1.  The encapsulation layer SHOULD allow\
    \ for an effective trade-off\n       between the following requirements:\n   \
    \    A.  Effective PSN bandwidth utilization.  Assuming that the size\n      \
    \     of the encapsulation layer header does not depend on the size\n        \
    \   of its payload, an increase in the packet payload size\n           results\
    \ in increased efficiency.\n       B.  Low edge-to-edge latency.  Low end-to-end\
    \ latency is the\n           common requirement for Voice applications over TDM\
    \ services.\n           Packetization latency is one of the components comprising\n\
    \           edge-to-edge latency, and it decreases with the packet\n         \
    \  payload size.\n       The compensation buffer used by the CE-bound IWF increases\n\
    \       latency to the emulated circuit.  Additional delays introduced by\n  \
    \     this buffer SHOULD NOT exceed the packet delay variation observed\n    \
    \   in the PSN.\n   2.  The encapsulation layer MAY provide for saving PSN bandwidth\
    \ by\n       not sending corrupted TDM data across the PSN.\n   3.  The encapsulation\
    \ layer MAY provide the ability to save the PSN\n       bandwidth for the structure-aware\
    \ case by not sending channels\n       that are permanently inactive.\n   4. \
    \ The encapsulation layer MAY enable the dynamic suppression of\n       temporarily\
    \ unused channels from transmission for the structure-\n       aware case.\n \
    \      If used, dynamic suppression of temporarily unused channels\n       MUST\
    \ NOT violate the integrity of the structures delivered over\n       the PW.\n\
    \   5.  For NxDS0, the encapsulation layer MUST provide the ability to\n     \
    \  keep the edge-to-edge delay independent of the service rate.\n"
- title: 7.6.  Packet Delay Variation
  contents:
  - "7.6.  Packet Delay Variation\n   The encapsulation layer SHOULD provide for the\
    \ ability to compensate\n   for packet delay variation, while maintaining jitter\
    \ and wander of\n   the egress end service clock with tolerances specified in\
    \ the\n   normative references.\n   The encapsulation layer MAY provide for run-time\
    \ adaptation of delay\n   introduced by the jitter buffer if the packet delay\
    \ variation varies\n   with time.  Such an adaptation MAY introduce a low level\
    \ of errors\n   (within the limits tolerated by the application) but SHOULD NOT\n\
    \   introduce additional wander of the egress end service clock.\n"
- title: 7.7.  Compatibility with the Existing PSN Infrastructure
  contents:
  - "7.7.  Compatibility with the Existing PSN Infrastructure\n   The combination\
    \ of encapsulation and PSN tunnel layers used for edge-\n   to-edge emulation\
    \ of TDM circuits SHOULD be compatible with existing\n   PSN infrastructures.\
    \  In particular, compatibility with the\n   mechanisms of header compression\
    \ over links where capacity is at a\n   premium SHOULD be provided.\n"
- title: 7.8.  Congestion Control
  contents:
  - "7.8.  Congestion Control\n   TDM circuits run at a constant rate, and hence offer\
    \ constant traffic\n   loads to the PSN.  The rate varying mechanism that TCP\
    \ uses to match\n   the demand to the network congestion state is, therefore,\
    \ not\n   applicable.\n   The ability to shut down a TDM PW when congestion has\
    \ been detected\n   MUST be provided.\n   Precautions should be taken to avoid\
    \ situations wherein multiple TDM\n   PWs are simultaneously shut down or re-established,\
    \ because this\n   leads to PSN instability.\n   Further congestion considerations\
    \ are discussed in chapter 6.5 of\n   [RFC3985].\n"
- title: 7.9.  Fault Detection and Handling
  contents:
  - "7.9.  Fault Detection and Handling\n   The encapsulation layer for edge-to-edge\
    \ emulation of TDM services\n   SHOULD, separately or in conjunction with the\
    \ lower layers of the\n   PWE3 stack, provide for detection, handling, and reporting\
    \ of the\n   following defects:\n   1.  Misconnection, or Stray Packets.  The\
    \ importance of this\n       requirement stems from customer expectation due to\
    \ reliable\n       misconnection detection in SONET/SDH networks.\n   2.  Packet\
    \ Loss.  Packet loss detection is required to maintain clock\n       integrity,\
    \ as discussed in Section 7.3.1 above.  In addition,\n       packet loss detection\
    \ mechanisms SHOULD provide for localization\n       of the outage in the end-to-end\
    \ emulated service.\n   3.  Malformed packets.\n"
- title: 7.10.  Performance Monitoring
  contents:
  - "7.10.  Performance Monitoring\n   The encapsulation layer for edge-to-edge emulation\
    \ of TDM services\n   SHOULD provide for collection of performance monitoring\
    \ (PM) data\n   that is compatible with the parameters defined for 'classic',\n\
    \   TDM-based carriers of these services.  The applicability of [G.826]\n   is\
    \ left for further study.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   The security considerations in [RFC3916] are\
    \ fully applicable to the\n   emulation of TDM services.  In addition, TDM services\
    \ are sensitive\n   to packet delay variation [Section 7.6], and need to be protected\n\
    \   from this method of attack.\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [RFC2119]    Bradner, S., \"Key words for use\
    \ in RFCs to Indicate\n                Requirement Levels\", BCP 14, RFC 2119,\
    \ March 1997.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [RFC3916]    Xiao, X., McPherson, D., and P.\
    \ Pate, \"Requirements for\n                Pseudo-Wire Emulation Edge-to-Edge\
    \ (PWE3)\", RFC 3916,\n                September 2004.\n   [RFC3985]    Bryant,\
    \ S. and P. Pate, \"Pseudo Wire Emulation Edge-to-\n                Edge (PWE3)\
    \ Architecture\", RFC 3985, March 2005.\n   [G.702]      ITU-T Recommendation\
    \ G.702 (11/88) - Digital hierarchy\n                bit rates\n   [G.704]   \
    \   ITU-T Recommendation G.704 (10/98) - Synchronous frame\n                structures\
    \ used at 1544, 6312, 2048, 8448 and 44 736\n                Kbit/s hierarchical\
    \ levels\n   [G.706]      ITU-T Recommendation G.706 (04/91) - Frame alignment\
    \ and\n                cyclic redundancy check (CRC) procedures relating to\n\
    \                basic frame structures defined in Recommendation G.704\n   [G.707]\
    \      ITU-T Recommendation G.707 (10/00) - Network node\n                interface\
    \ for the synchronous digital hierarchy (SDH)\n   [G.751]      ITU-T Recommendation\
    \ G.751 (11/88) - Digital multiplex\n                equipments operating at the\
    \ third order bit rate of 34\n                368 Kbit/s and the fourth order\
    \ bit rate of 139 264\n                Kbit/s and using positive justification\n\
    \   [G.810]      ITU-T Recommendation G.810 (08/96) - Definitions and\n      \
    \          terminology for synchronization networks\n   [G.826]      ITU-T Recommendation\
    \ G.826 (02/99) - Error performance\n                parameters and objectives\
    \ for international, constant\n                bit rate digital paths at or above\
    \ the primary rate\n   [Q.700]      ITU-T Recommendation Q.700 (03/93) - Introduction\
    \ to\n                CCITT Signalling System No. 7\n   [Q.931]      ITU-T Recommendation\
    \ Q.931 (05/98) - ISDN user-network\n                interface layer 3 specification\
    \ for basic call control\n   [RFC1958]    Carpenter, B., \"Architectural Principles\
    \ of the\n                Internet\", RFC 1958, June 1996.\n   [RFC2736]    Handley,\
    \ M. and C. Perkins, \"Guidelines for Writers of\n                RTP Payload\
    \ Format Specifications\", BCP 36, RFC 2736,\n                December 1999.\n\
    \   [RFC3393]    Demichelis, C. and P. Chimento, \"IP Packet Delay\n         \
    \       Variation Metric for IP Performance Metrics (IPPM)\", RFC\n          \
    \      3393, November 2002.\n   [T1.105]     ANSI T1.105 - 2001 Synchronous Optical\
    \ Network (SONET) -\n                Basic Description including Multiplex Structure,\
    \ Rates,\n                and Formats, May 2001\n   [T1.107]     ANSI T1.107 -\
    \ 1995.  Digital Hierarchy - Format\n                Specification\n   [TR-NWT-170]\
    \ Digital Cross Connect Systems - Generic Requirements and\n                Objectives,\
    \ Bellcore, TR-NWT-170, January 1993\n"
- title: 10.  Contributors Section
  contents:
  - "10.  Contributors Section\n   The following have contributed to this document:\n\
    \   Sasha Vainshtein\n   Axerra Networks\n   EMail: sasha@axerra.com\n   Yaakov\
    \ Stein\n   RAD Data Communication\n   EMail: yaakov_s@rad.com\n   Prayson Pate\n\
    \   Overture Networks, Inc.\n   EMail: prayson.pate@overturenetworks.com\n   Ron\
    \ Cohen\n   Lycium Networks\n   EMail: ronc@lyciumnetworks.com\n   Tim Frost\n\
    \   Zarlink Semiconductor\n   EMail: tim.frost@zarlink.com\n"
- title: Author's Address
  contents:
  - "Author's Address\n   Maximilian Riegel\n   Siemens AG\n   St-Martin-Str 76\n\
    \   Munich  81541\n   Germany\n   Phone: +49-89-636-75194\n   EMail: maximilian.riegel@siemens.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2005).\n   This\
    \ document is subject to the rights, licenses and restrictions\n   contained in\
    \ BCP 78, and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET\n   ENGINEERING\
    \ TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,\n   INCLUDING BUT NOT\
    \ LIMITED TO ANY WARRANTY THAT THE USE OF THE\n   INFORMATION HEREIN WILL NOT\
    \ INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY OR FITNESS\
    \ FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at ietf-\n   ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
