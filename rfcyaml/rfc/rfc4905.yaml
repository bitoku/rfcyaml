- title: __initial_text__
  contents:
  - "                Encapsulation Methods for Transport of\n                   Layer\
    \ 2 Frames over MPLS Networks\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo defines a Historic Document for the Internet\
    \ community.  It\n   does not specify an Internet standard of any kind.  Distribution\
    \ of\n   this memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The IETF Trust (2007).\n"
- title: Abstract
  contents:
  - "Abstract\n   This document describes methods for encapsulating the Protocol Data\n\
    \   Units (PDUs) of layer 2 protocols such as Frame Relay, Asynchronous\n   Transfer\
    \ Mode (ATM), or Ethernet for transport across an MPLS\n   network.  This document\
    \ describes the so-called \"draft-martini\"\n   protocol, which has since been\
    \ superseded by the Pseudowire Emulation\n   Edge to Edge Working Group specifications\
    \ described in RFC 4447 and\n   related documents.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Specification of Requirements ...................................3\n  \
    \ 3. Special Note ....................................................4\n   4.\
    \ General Encapsulation Method ....................................4\n      4.1.\
    \ The Control Word ...........................................4\n           4.1.1.\
    \ Setting the Sequence Number .........................5\n           4.1.2. Processing\
    \ the Sequence Number ......................6\n      4.2. MTU Requirements ...........................................6\n\
    \   5. Protocol-Specific Details .......................................7\n  \
    \    5.1. Frame Relay ................................................7\n    \
    \  5.2. ATM ........................................................8\n      \
    \     5.2.1. ATM AAL5 CPCS-SDU Mode ..............................9\n        \
    \   5.2.2. ATM Cell Mode ......................................10\n          \
    \ 5.2.3. OAM Cell Support ...................................12\n           5.2.4.\
    \ CLP bit to Quality of Service Mapping ..............12\n      5.3. Ethernet\
    \ VLAN .............................................12\n      5.4. Ethernet ..................................................12\n\
    \      5.5. High-Level Data Link Control (HDLC) .......................13\n  \
    \    5.6. PPP .......................................................13\n   6.\
    \ Using an MPLS Label as the Demultiplexer Field .................13\n      6.1.\
    \ MPLS Shim EXP Bit Values ..................................14\n      6.2. MPLS\
    \ Shim S Bit Value .....................................14\n      6.3. MPLS Shim\
    \ TTL Values ......................................14\n   7. Security Considerations\
    \ ........................................14\n   8. Normative References ...........................................14\n\
    \   9. Informative References .........................................16\n  \
    \ 10. Co-Authors ....................................................16\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   In an MPLS network, it is possible to use control protocols\
    \ such as\n   those specified in [RFC4906] to set up \"emulated virtual circuits\"\
    \n   that carry the Protocol Data Units of layer 2 protocols across the\n   network.\
    \  A number of these emulated virtual circuits (VCs) may be\n   carried in a single\
    \ tunnel.  This requires, of course, that the layer\n   2 PDUs be encapsulated.\
    \  We can distinguish three layers of this\n   encapsulation:\n      - the \"\
    tunnel header\", which contains the information needed to\n        transport the\
    \ PDU across the MPLS network; this header belongs\n        to the tunneling protocol,\
    \ e.g., MPLS, Generic Routing\n        Encapsulation (GRE), and Layer 2 Tunneling\
    \ Protocol (L2TP).\n      - the \"demultiplexer field\", which is used to distinguish\n\
    \        individual emulated virtual circuits within a single tunnel;\n      \
    \  this field must be understood by the tunneling protocol as well;\n        it\
    \ may be, e.g., an MPLS label or a GRE key field.\n      - the \"emulated VC encapsulation\"\
    , which contains the information\n        about the enclosed layer 2 PDU that\
    \ is necessary in order to\n        properly emulate the corresponding layer 2\
    \ protocol.\n   This document specifies the emulated VC encapsulation for a number\
    \ of\n   layer 2 protocols.  Although different layer 2 protocols require\n  \
    \ different information to be carried in this encapsulation, an attempt\n   has\
    \ been made to make the encapsulation as common as possible for all\n   layer\
    \ 2 protocols.\n   This document also specifies the way in which the demultiplexer\
    \ field\n   is added to the emulated VC encapsulation when an MPLS label is used\n\
    \   as the demultiplexer field.\n   Quality of service (QoS)-related issues are\
    \ not discussed in this\n   document.\n   For the purpose of this document, R1\
    \ will be defined as the ingress\n   router, and R2 as the egress router.  A layer\
    \ 2 PDU will be received\n   at R1, encapsulated at R1, transported, decapsulated\
    \ at R2, and\n   transmitted out of R2.\n"
- title: 2.  Specification of Requirements
  contents:
  - "2.  Specification of Requirements\n   The key words \"MUST\", \"MUST NOT\", \"\
    REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [RFC2119].\n"
- title: 3.  Special Note
  contents:
  - "3.  Special Note\n   This document describes the so called \"draft-martini\"\
    \ protocol, which\n   is used in many deployed implementations.  This document\
    \ and its\n   contents have since been superseded by the Pseudowire Emulation\
    \ Edge\n   to Edge Working Group specifications: [RFC4447], [RFC4385],\n   [RFC4448],\
    \ [RFC4717], [RFC4618], [RFC4619], [RFC4553], [RFC4842], and\n   related documents.\
    \  This document serves as documentation of current\n   implementations, and MUST\
    \ NOT be used for new implementations.  The\n   PWE3 Label Distribution Protocol\
    \ control protocol document [RFC4447],\n   which is backward compatible with this\
    \ document, MUST be used for all\n   new implementations of this protocol.\n"
- title: 4.  General Encapsulation Method
  contents:
  - "4.  General Encapsulation Method\n   In most cases, it is not necessary to transport\
    \ the layer 2\n   encapsulation across the network; rather, the layer 2 header\
    \ can be\n   stripped at R1 and reproduced at R2.  This is done using information\n\
    \   carried in the control word (see below), as well as information that\n   may\
    \ already have been signaled from R1 to R2.\n"
- title: 4.1.  The Control Word
  contents:
  - "4.1.  The Control Word\n   There are three requirements that may need to be satisfied\
    \ when\n   transporting layer 2 protocols over an MPLS backbone:\n     -i. Sequentiality\
    \ may need to be preserved.\n    -ii. Small packets may need to be padded in order\
    \ to be transmitted\n         on a medium where the minimum transport unit is\
    \ larger than the\n         actual packet size.\n   -iii. Control bits carried\
    \ in the header of the layer 2 frame may\n         need to be transported.\n \
    \  The control word defined here addresses all three of these\n   requirements.\
    \  For some protocols, this word is REQUIRED, and for\n   others OPTIONAL.  For\
    \ protocols where the control word is OPTIONAL,\n   implementations MUST support\
    \ sending no control word, and MAY support\n   sending a control word.\n   In\
    \ all cases, the egress router must be aware of whether the ingress\n   router\
    \ will send a control word over a specific virtual circuit.\n   This may be achieved\
    \ by configuration of the routers or by signaling,\n   for example, as defined\
    \ in [RFC4906].\n   The control word is defined as follows:\n    0           \
    \        1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0\
    \ 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   | Rsvd  | Flags |0 0|   Length  |     Sequence Number           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   In the above diagram, the first 4 bits are reserved for future use.\n   They\
    \ MUST be set to 0 when transmitting, and MUST be ignored upon\n   receipt.\n\
    \   The next 4 bits provide space for carrying protocol-specific flags.\n   These\
    \ are defined in the protocol-specific details below.\n   The next 2 bits MUST\
    \ be set to 0 when transmitting.\n   The next 6 bits provide a length field, which\
    \ is used as follows: If\n   the packet's length (defined as the length of the\
    \ layer 2 payload\n   plus the length of the control word) is less than 64 bytes,\
    \ the\n   length field MUST be set to the packet's length.  Otherwise, the\n \
    \  length field MUST be set to 0.  The value of the length field, if\n   non-zero,\
    \ can be used to remove any padding.  When the packet reaches\n   the service\
    \ provider's egress router, it may be desirable to remove\n   the padding before\
    \ forwarding the packet.\n   The next 16 bits provide a sequence number that can\
    \ be used to\n   guarantee ordered packet delivery.  The processing of the sequence\n\
    \   number field is OPTIONAL.\n   The sequence number space is a 16-bit, unsigned\
    \ circular space.  The\n   sequence number value 0 is used to indicate an unsequenced\
    \ packet.\n"
- title: 4.1.1.  Setting the Sequence Number
  contents:
  - "4.1.1.  Setting the Sequence Number\n   For a given emulated VC, and a pair of\
    \ routers R1 and R2, if R1\n   supports packet sequencing, then the following\
    \ procedures should be\n   used:\n      - The initial packet transmitted on the\
    \ emulated VC MUST use\n        sequence number 1.\n      - Subsequent packets\
    \ MUST increment the sequence number by 1 for\n        each packet.\n      - When\
    \ the transmit sequence number reaches the maximum 16 bit\n        value (65535),\
    \ the sequence number MUST wrap to 1.\n   If the transmitting router R1 does not\
    \ support sequence number\n   processing, then the sequence number field in the\
    \ control word MUST\n   be set to 0.\n"
- title: 4.1.2.  Processing the Sequence Number
  contents:
  - "4.1.2.  Processing the Sequence Number\n   If a router R2 supports receive sequence\
    \ number processing, then the\n   following procedures should be used:\n   When\
    \ an emulated VC is initially set up, the \"expected sequence\n   number\" associated\
    \ with it MUST be initialized to 1.\n   When a packet is received on that emulated\
    \ VC, the sequence number\n   should be processed as follows:\n      - If the\
    \ sequence number on the packet is 0, then the packet\n        passes the sequence\
    \ number check.\n      - Else if the packet sequence number >= the expected sequence\n\
    \        number and the packet sequence number - the expected sequence\n     \
    \   number < 32768, then the packet is in order.\n      - Else if the packet sequence\
    \ number < the expected sequence\n        number and the expected sequence number\
    \ - the packet sequence\n        number >= 32768, then the packet is in order.\n\
    \      - Otherwise, the packet is out of order.\n   If a packet passes the sequence\
    \ number check or is in order, then it\n   can be delivered immediately.  If the\
    \ packet is in order, then the\n   expected sequence number should be set using\
    \ the algorithm:\n   expected_sequence_number := packet_sequence_number + 1 mod\
    \ 2**16\n   if (expected_sequence_number = 0) then expected_sequence_number :=\
    \ 1;\n   Packets that are received out of order MAY be dropped or reordered at\n\
    \   the discretion of the receiver.\n   If a router R2 does not support receive\
    \ sequence number processing,\n   then the sequence number field MAY be ignored.\n"
- title: 4.2.  MTU Requirements
  contents:
  - "4.2.  MTU Requirements\n   The network MUST be configured with an MTU that is\
    \ sufficient to\n   transport the largest encapsulation frames.  If MPLS is used\
    \ as the\n   tunneling protocol, for example, this is likely to be 12 or more\n\
    \   bytes greater than the largest frame size.  Other tunneling protocols\n  \
    \ may have longer headers and require larger MTUs.  If the ingress\n   router\
    \ determines that an encapsulated layer 2 PDU exceeds the MTU of\n   the tunnel\
    \ through which it must be sent, the PDU MUST be dropped.\n   If an egress router\
    \ receives an encapsulated layer 2 PDU whose\n   payload length (i.e., the length\
    \ of the PDU itself without any of the\n   encapsulation headers) exceeds the\
    \ MTU of the destination layer 2\n   interface, the PDU MUST be dropped.\n"
- title: 5.  Protocol-Specific Details
  contents:
  - '5.  Protocol-Specific Details

    '
- title: 5.1.  Frame Relay
  contents:
  - "5.1.  Frame Relay\n   A Frame Relay PDU is transported without the Frame Relay\
    \ header or\n   the Frame Check Sequence (FCS).  The control word is REQUIRED;\n\
    \   however, its use is optional, although desirable.  Use of the control\n  \
    \ word means that the ingress and egress Label Switching Routers (LSRs)\n   follow\
    \ the procedures below.  If an ingress LSR chooses not to use\n   the control\
    \ word, it MUST set the flags in the control word to 0; if\n   an egress LSR chooses\
    \ to ignore the control word, it MUST set the\n   Frame Relay control bits to\
    \ 0.\n   The BECN (Backward Explicit Congestion Notification), FECN (Forward\n\
    \   Explicit Congestion Notification), DE (Discard Eligibility), and C/R\n   (Command/Response)\
    \ bits are carried across the network in the control\n   word.  The edge routers\
    \ that implement this document MAY, when either\n   adding or removing the encapsulation\
    \ described herein, change the\n   BECN and/or FECN bits from 0 to 1 in order\
    \ to reflect congestion in\n   the network that is known to the edge routers,\
    \ and the D/E bit from 0\n   to 1 to reflect marking from edge policing of the\
    \ Frame Relay\n   Committed Information Rate.  The BECN, FECN, and D/E bits SHOULD\
    \ NOT\n   be changed from 1 to 0.\n   The following is an example of a Frame Relay\
    \ packet:\n    0                   1                   2                   3\n\
    \    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   | Rsvd  |B|F|D|C|    Length     |        Sequence Number        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                      Frame Relay PDU                          |\n   |  \
    \                           \"                                 |\n   |       \
    \                      \"                                 |\n   |            \
    \                 \"                                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      * B ( BECN ) Bit\n        The ingress router, R1, SHOULD copy the BECN\
    \ field from the\n        incoming Frame Relay header into this field.  The egress\
    \ router,\n        R2, MUST generate a new BECN field based on the value of the\
    \ B\n        bit.\n      * F ( FECN ) Bit\n        The ingress router, R1, SHOULD\
    \ copy the FECN field from the\n        incoming Frame Relay header into this\
    \ field.  The egress router,\n        R2, MUST generate a new FECN field based\
    \ on the value of the F\n        bit.\n      * D ( DE ) Bit\n        The ingress\
    \ router, R1, SHOULD copy the DE field from the\n        incoming Frame Relay\
    \ header into this field.  The egress router,\n        R2, MUST generate a new\
    \ DE field based on the value of the D\n        bit.\n        If the tunneling\
    \ protocol provides a field that can be set to\n        specify a Quality of Service,\
    \ the ingress router, R1, MAY\n        consider the DE bit of the Frame Relay\
    \ header when determining\n        the value of that field.  The egress router\
    \ MAY then consider\n        the value of this field when queuing the layer 2\
    \ PDU for egress.\n        Note however that frames from the same VC MUST NOT\
    \ be reordered.\n      * C ( C/R ) Bit\n        The ingress router, R1, SHOULD\
    \ copy the C/R bit from the\n        received Frame Relay PDU to the C bit of\
    \ the control word.  The\n        egress router, R2, MUST copy the C bit into\
    \ the output frame.\n"
- title: 5.2.  ATM
  contents:
  - "5.2.  ATM\n   Two encapsulations are supported for ATM transport: one for ATM\n\
    \   Adaption Layer 5 (AAL5) and another for ATM cells.\n   The AAL5 Common Part\
    \ Convergence Sublayer - Service Data Unit\n   (CPCS-SDU) encapsulation consists\
    \ of the REQUIRED control word and\n   the AAL5 CPCS-SDU.  The ATM cell encapsulation\
    \ consists of an\n   OPTIONAL control word, a 4-byte ATM cell header, and the\
    \ ATM cell\n   payload.\n"
- title: 5.2.1.  ATM AAL5 CPCS-SDU Mode
  contents:
  - "5.2.1.  ATM AAL5 CPCS-SDU Mode\n   In ATM AAL5 mode, the ingress router is required\
    \ to reassemble AAL5\n   CPCS-SDUs from the incoming VC and transport each CPCS-SDU\
    \ as a\n   single packet.  No AAL5 trailer is transported.  The control word is\n\
    \   REQUIRED; its use, however, is optional, although desirable.  Use of\n   the\
    \ control word means that the ingress and egress LSRs follow the\n   procedures\
    \ below.  If an ingress LSR chooses not to use the control\n   word, it MUST set\
    \ the flags in the control word to 0; if an egress\n   LSR chooses to ignore the\
    \ control word, it MUST set the ATM control\n   bits to 0.\n   The EFCI (Explicit\
    \ Forward Congestion Indication) and CLP (Cell Loss\n   Priority) bits are carried\
    \ across the network in the control word.\n   The edge routers that implement\
    \ this document MAY, when either adding\n   or removing the encapsulation described\
    \ herein, change the EFCI bit\n   from 0 to 1 in order to reflect congestion in\
    \ the network that is\n   known to the edge routers, and the CLP bit from 0 to\
    \ 1 to reflect\n   marking from edge policing of the ATM Sustained Cell Rate.\
    \  The EFCI\n   and CLP bits MUST NOT be changed from 1 to 0.\n   The AAL5 CPCS-SDU\
    \ is prepended by the following header:\n    0                   1           \
    \        2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0\
    \ 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   | Rsvd  |T|E|L|C|    Length     |        Sequence Number        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                     ATM  AAL5 CPCS-SDU                        |\n   |  \
    \                           \"                                 |\n   |       \
    \                      \"                                 |\n   |            \
    \                 \"                                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      * T (transport type) bit\n        Bit (T) of the control word indicates\
    \ whether the packet\n        contains an ATM cell or an AAL5 CPCS-SDU.  If set,\
    \ the packet\n        contains an ATM cell, encapsulated according to the ATM\
    \ cell\n        mode section below; otherwise, it contains an AAL5 CPCS-SDU.\n\
    \        The ability to transport an ATM cell in the AAL5 mode is\n        intended\
    \ to provide a means of enabling Operations and\n        Management (OAM) functionality\
    \ over the AAL5 VC.\n      * E ( EFCI ) Bit\n        The ingress router, R1, SHOULD\
    \ set this bit to 1 if the EFCI bit\n        of the final cell of those that transported\
    \ the AAL5 CPCS-SDU is\n        set to 1, or if the EFCI bit of the single ATM\
    \ cell to be\n        transported in the packet is set to 1.  Otherwise, this\
    \ bit\n        SHOULD be set to 0.  The egress router, R2, SHOULD set the EFCI\n\
    \        bit of all cells that transport the AAL5 CPCS-SDU to the value\n    \
    \    contained in this field.\n      * L ( CLP ) Bit\n        The ingress router,\
    \ R1, SHOULD set this bit to 1 if the CLP bit\n        of any of the ATM cells\
    \ that transported the AAL5 CPCS-SDU is\n        set to 1, or if the CLP bit of\
    \ the single ATM cell to be\n        transported in the packet is set to 1.  Otherwise,\
    \ this bit\n        SHOULD be set to 0.  The egress router, R2, SHOULD set the\
    \ CLP\n        bit of all cells that transport the AAL5 CPCS-SDU to the value\n\
    \        contained in this field.\n      * C ( Command / Response Field ) Bit\n\
    \        When FRF.8.1 Frame Relay / ATM PVC Service Interworking\n        [FRF.8.1]\
    \ traffic is being transported, the CPCS-UU Least\n        Significant Bit (LSB)\
    \ of the AAL5 CPCS-SDU may contain the Frame\n        Relay C/R bit.  The ingress\
    \ router, R1, SHOULD copy this bit to\n        the C bit of the control word.\
    \  The egress router, R2, SHOULD\n        copy the C bit to the CPCS-UU Least\
    \ Significant Bit (LSB) of the\n        AAL5 CPCS PDU.\n"
- title: 5.2.2.  ATM Cell Mode
  contents:
  - "5.2.2.  ATM Cell Mode\n   In this encapsulation mode, ATM cells are transported\
    \ individually\n   without a Segmentation and Reassembly (SAR) process.  The ATM\
    \ cell\n   encapsulation consists of an OPTIONAL control word, and one or more\n\
    \   ATM cells - each consisting of a 4-byte ATM cell header and the 48-\n   byte\
    \ ATM cell payload.  This ATM cell header is defined in the FAST\n   encapsulation\
    \ [FAST] section 3.1.1, but without the trailer byte.\n   The length of each frame,\
    \ without the encapsulation headers, is a\n   multiple of 52 bytes long.  The\
    \ maximum number of ATM cells that can\n   be fitted in a frame, in this fashion,\
    \ is limited only by the network\n   MTU and by the ability of the egress router\
    \ to process them.  The\n   ingress router MUST NOT send more cells than the egress\
    \ router is\n   willing to receive.  The number of cells that the egress router\
    \ is\n   willing to receive may either be configured in the ingress router or\n\
    \   may be signaled, for example, using the methods described in\n   [RFC4906].\
    \  The number of cells encapsulated in a particular frame\n   can be inferred\
    \ by the frame length.  The control word is OPTIONAL.\n   If the control word\
    \ is used, then the flag bits in the control word\n   are not used, and MUST be\
    \ set to 0 when transmitting, and MUST be\n   ignored upon receipt.\n   The EFCI\
    \ and CLP bits are carried across the network in the ATM cell\n   header.  The\
    \ edge routers that implement this document MAY, when\n   either adding or removing\
    \ the encapsulation described herein, change\n   the EFCI bit from 0 to 1 in order\
    \ to reflect congestion in the\n   network that is known to the edge router, and\
    \ the CLP bit from 0 to 1\n   to reflect marking from edge policing of the ATM\
    \ Sustained Cell Rate.\n   The EFCI and CLP bits SHOULD NOT be changed from 1\
    \ to 0.\n   This diagram illustrates an encapsulation of two ATM cells:\n    0\
    \                   1                   2                   3\n    0 1 2 3 4 5\
    \ 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                  Control word ( Optional )                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |          VPI          |              VCI              | PTI |C|\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                  ATM Payload ( 48 bytes )                     |\n   |  \
    \                        \"                                    |\n   |       \
    \                   \"                                    |\n   |            \
    \              \"                                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |          VPI          |              VCI              | PTI |C|\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                  ATM Payload ( 48 bytes )                     |\n   |  \
    \                        \"                                    |\n   |       \
    \                   \"                                    |\n   |            \
    \              \"                                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      * VPI (Virtual Path Identifier)\n        The ingress router MUST copy the\
    \ VPI field from the incoming\n        cell into this field.  For particular emulated\
    \ VCs, the egress\n        router MAY generate a new VPI and ignore the VPI contained\
    \ in\n        this field.\n      * VCI (Virtual Circuit Identifier)\n        The\
    \ ingress router MUST copy the VCI field from the incoming ATM\n        cell header\
    \ into this field.  For particular emulated VCs, the\n        egress router MAY\
    \ generate a new VCI.\n      * PTI (Payload Type Identifier) & CLP ( C bit )\n\
    \        The PTI and CLP fields are the PTI and CLP fields of the\n        incoming\
    \ ATM cells.  The cell headers of the cells within the\n        packet are the\
    \ ATM headers (without HEC) of the incoming cell.\n"
- title: 5.2.3.  OAM Cell Support
  contents:
  - "5.2.3.  OAM Cell Support\n   OAM cells MAY be transported on the VC LSP.  An\
    \ egress router that\n   does not support transport of OAM cells MUST discard\
    \ frames that\n   contain an ATM cell with the high-order bit of the PTI field\
    \ set to\n   1.  A router that supports transport of OAM cells MUST follow the\n\
    \   procedures outlined in [FAST] section 8 for mode 0 only, in addition\n   to\
    \ the applicable procedures specified in [RFC4906].\n"
- title: 5.2.4.  CLP bit to Quality of Service Mapping
  contents:
  - "5.2.4.  CLP bit to Quality of Service Mapping\n   The ingress router MAY consider\
    \ the CLP bit when determining the\n   value to be placed in the Quality of Service\
    \ fields (e.g., the EXP\n   fields of the MPLS label stack) of the encapsulating\
    \ protocol.  This\n   gives the network visibility of the CLP bit.  Note however\
    \ that cells\n   from the same VC MUST NOT be reordered.\n"
- title: 5.3.  Ethernet VLAN
  contents:
  - "5.3.  Ethernet VLAN\n   For an Ethernet 802.1q VLAN, the entire Ethernet frame\
    \ without the\n   preamble or FCS is transported as a single packet.  The control\
    \ word\n   is OPTIONAL.  If the control word is used, then the flag bits in the\n\
    \   control word are not used, and MUST be set to 0 when transmitting,\n   and\
    \ MUST be ignored upon receipt.  The 4-byte VLAN tag is transported\n   as is,\
    \ and MAY be overwritten by the egress router.\n   The ingress router MAY consider\
    \ the user priority field [IEEE802.3ac]\n   of the VLAN tag header when determining\
    \ the value to be placed in the\n   Quality of Service field of the encapsulating\
    \ protocol (e.g., the EXP\n   fields of the MPLS label stack).  In a similar way,\
    \ the egress router\n   MAY consider the Quality of Service field of the encapsulating\n\
    \   protocol when queuing the packet for egress.  Ethernet packets\n   containing\
    \ hardware-level Cyclic Redundancy Check (CRC) errors,\n   framing errors, or\
    \ runt packets MUST be discarded on input.\n"
- title: 5.4.  Ethernet
  contents:
  - "5.4.  Ethernet\n   For simple Ethernet port to port transport, the entire Ethernet\
    \ frame\n   without the preamble or FCS is transported as a single packet.  The\n\
    \   control word is OPTIONAL.  If the control word is used, then the flag\n  \
    \ bits in the control word are not used, and MUST be set to 0 when\n   transmitting,\
    \ and MUST be ignored upon receipt.  As in the Ethernet\n   VLAN case, Ethernet\
    \ packets with hardware-level CRC errors, framing\n   errors, and runt packets\
    \ MUST be discarded on input.\n"
- title: 5.5.  High-Level Data Link Control (HDLC)
  contents:
  - "5.5.  High-Level Data Link Control (HDLC)\n   HDLC mode provides port to port\
    \ transport of HDLC-encapsulated\n   traffic.  The HDLC PDU is transported in\
    \ its entirety, including the\n   HDLC address, control, and protocol fields,\
    \ but excluding HDLC flags\n   and the FCS.  Bit/byte stuffing is undone.  The\
    \ control word is\n   OPTIONAL.  If the control word is used, then the flag bits\
    \ in the\n   control word are not used, and MUST be set to 0 when transmitting,\n\
    \   and MUST be ignored upon receipt.\n   The HDLC mode is suitable for port to\
    \ port transport of Frame Relay\n   User-Network Interface (UNI) or Network-Network\
    \ Interface (NNI)\n   traffic.  It must be noted, however, that this mode is transparent\
    \ to\n   the FECN, BECN, and DE bits.\n"
- title: 5.6.  PPP
  contents:
  - "5.6.  PPP\n   PPP mode provides point to point transport of PPP-encapsulated\n\
    \   traffic, as specified in [RFC1661].  The PPP PDU is transported in\n   its\
    \ entirety, including the protocol field (whether compressed using\n   PFC or\
    \ not), but excluding any media-specific framing information,\n   such as HDLC\
    \ address and control fields or FCS.  Since media-specific\n   framing is not\
    \ carried, the following options will not operate\n   correctly if the PPP peers\
    \ attempt to negotiate them:\n      - Frame Check Sequence (FCS) Alternatives\n\
    \      - Address-and-Control-Field-Compression (ACFC)\n      - Asynchronous-Control-Character-Map\
    \ (ACCM)\n   Note also that VC LSP Interface MTU negotiation as specified in\n\
    \   [RFC4906] is not affected by PPP Maximum Receive Unit (MRU)\n   advertisement.\
    \  Thus, if a PPP peer sends a PDU with a length in\n   excess of that negotiated\
    \ for the VC LSP, that PDU will be discarded\n   by the ingress router.\n   The\
    \ control word is OPTIONAL.  If the control word is used, then the\n   flag bits\
    \ in the control word are not used, and MUST be set to 0 when\n   transmitting,\
    \ and MUST be ignored upon receipt.\n"
- title: 6.  Using an MPLS Label as the Demultiplexer Field
  contents:
  - "6.  Using an MPLS Label as the Demultiplexer Field\n   To use an MPLS label as\
    \ the demultiplexer field, a 32-bit label stack\n   entry [RFC3032] is simply\
    \ prepended to the emulated VC encapsulation,\n   and hence will appear as the\
    \ bottom label of an MPLS label stack.\n   This label may be called the \"VC label\"\
    .  The particular emulated VC\n   identified by a particular label value must\
    \ be agreed by the ingress\n   and egress LSRs, either by signaling (e.g., via\
    \ the methods of\n   [RFC4906]) or by configuration.  Other fields of the label\
    \ stack\n   entry are set as follows.\n"
- title: 6.1.  MPLS Shim EXP Bit Values
  contents:
  - "6.1.  MPLS Shim EXP Bit Values\n   If it is desired to carry Quality of Service\
    \ information, the Quality\n   of Service information SHOULD be represented in\
    \ the EXP field of the\n   VC label.  If more than one MPLS label is imposed by\
    \ the ingress LSR,\n   the EXP field of any labels higher in the stack SHOULD\
    \ also carry the\n   same value.\n"
- title: 6.2.  MPLS Shim S Bit Value
  contents:
  - "6.2.  MPLS Shim S Bit Value\n   The ingress LSR, R1, MUST set the S bit of the\
    \ VC label to a value of\n   1 to denote that the VC label is at the bottom of\
    \ the stack.\n"
- title: 6.3.  MPLS Shim TTL Values
  contents:
  - "6.3.  MPLS Shim TTL Values\n   The ingress LSR, R1, SHOULD set the TTL field\
    \ of the VC label to a\n   value of 2.\n"
- title: 7.  Security Considerations
  contents:
  - "7.  Security Considerations\n   This document specifies only encapsulations,\
    \ and not the protocols,\n   used to carry the encapsulated packets across the\
    \ network.  Each such\n   protocol may have its own set of security issues, but\
    \ those issues\n   are not affected by the encapsulations specified herein.  More\n\
    \   detailed security considerations are also described in Section 8 of\n   [RFC4447].\n"
- title: 8.  Normative References
  contents:
  - "8.  Normative References\n   [RFC2119]     Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n                 Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC4447]     Martini, L., Ed., Rosen, E., El-Aawar, N., Smith, T.,\n\
    \                 and G. Heron, \"Pseudowire Setup and Maintenance Using\n   \
    \              the Label Distribution Protocol (LDP)\", RFC 4447, April\n    \
    \             2006.\n   [RFC4385]     Bryant, S., Swallow, G., Martini, L., and\
    \ D. McPherson,\n                 \"Pseudowire Emulation Edge-to-Edge (PWE3) Control\
    \ Word\n                 for Use over an MPLS PSN\", RFC 4385, February 2006.\n\
    \   [RFC4842]     Malis, A., Pate, P., Cohen, R., Ed., and D. Zelig,\n       \
    \          \"Synchronous Optical Network/Synchronous Digital\n               \
    \  Hierarchy (SONET/SDH) Circuit Emulation over Packet\n                 (CEP)\"\
    , RFC 4842, April 2007.\n   [RFC4553]     Vainshtein, A., Ed., and YJ. Stein,\
    \ Ed., \"Structure-\n                 Agnostic Time Division Multiplexing (TDM)\
    \ over Packet\n                 (SAToP)\", RFC 4553, June 2006.\n   [RFC4619]\
    \     Martini, L., Ed., Kawa, C., Ed., and A. Malis, Ed.,\n                 \"\
    Encapsulation Methods for Transport of Frame Relay\n                 over Multiprotocol\
    \ Label Switching (MPLS) Networks\",\n                 RFC 4619, September 2006.\n\
    \   [RFC4717]     Martini, L., Jayakumar, J., Bocci, M., El-Aawar, N.,\n     \
    \            Brayley, J., and G. Koleyni, \"Encapsulation Methods for\n      \
    \           Transport of Asynchronous Transfer Mode (ATM) over MPLS\n        \
    \         Networks\", RFC 4717, December 2006.\n   [RFC4618]     Martini, L.,\
    \ Rosen, E., Heron, G., and A. Malis,\n                 \"Encapsulation Methods\
    \ for Transport of PPP/High-Level\n                 Data Link Control (HDLC) over\
    \ MPLS Networks\", RFC 4618,\n                 September 2006.\n   [RFC4448] \
    \    Martini, L., Ed., Rosen, E., El-Aawar, N., and G.\n                 Heron,\
    \ \"Encapsulation Methods for Transport of Ethernet\n                 over MPLS\
    \ Networks\", RFC 4448, April 2006.\n   [RFC4906]     Martini, L., Ed., Rosen,\
    \ E., Ed., and N. El-Aawar, Ed.,\n                 \"Transport of Layer 2 Frames\
    \ Over MPLS\", RFC 4906, June\n                 2007.\n   [RFC3032]     Rosen,\
    \ E., Tappan, D., Fedorkow, G., Rekhter, Y.,\n                 Farinacci, D.,\
    \ Li, T., and A. Conta, \"MPLS Label Stack\n                 Encoding\", RFC 3032,\
    \ January 2001.\n   [FRF.8.1]     Frame Relay Forum, \"Frame Relay / ATM PVC Service\n\
    \                 Interworking Implementation Agreement\", February 2000.\n  \
    \ [FAST]        ATM Forum, \"Frame Based ATM over SONET/SDH Transport\n      \
    \           (FAST)\", af-fbatm-0151.000, July 2000.\n   [IEEE802.3ac] IEEE 802.3ac-1998,\
    \ \"Information technology -\n                 Telecommunications and information\
    \ exchange between\n                 systems - Local and metropolitan area networks\
    \ -\n                 Specific requirements Part 3: Carrier sense multiple\n \
    \                access with collision detection (CSMA/CD) frame\n           \
    \      extensions for Virtual Bridged Local Area Networks\n                 (VLAN)\
    \ tagging on 802.3 networks\".\n"
- title: 9.  Informative References
  contents:
  - "9.  Informative References\n   [RFC1661]     Simpson, W., Ed., \"The Point-to-Point\
    \ Protocol (PPP)\",\n                 STD 51, RFC 1661, July 1994.\n"
- title: 10.  Co-Authors
  contents:
  - "10.  Co-Authors\n   Giles Heron\n   Tellabs\n   Abbey Place\n   24-28 Easton\
    \ Street\n   High Wycombe\n   Bucks\n   HP11 1NT\n   UK\n   EMail: giles.heron@tellabs.com\n\
    \   Dimitri Stratton Vlachos\n   Mazu Networks, Inc.\n   125 Cambridgepark Drive\n\
    \   Cambridge, MA 02140\n   EMail: d@mazunetworks.com\n   Dan Tappan\n   Cisco\
    \ Systems, Inc.\n   1414 Massachusetts Avenue\n   Boxborough, MA 01719\n   EMail:\
    \ tappan@cisco.com\n   Jayakumar Jayakumar\n   Cisco Systems Inc.\n   225, E.Tasman,\
    \ MS-SJ3/3,\n   San Jose, CA 95134\n   EMail: jjayakum@cisco.com\n   Alex Hamilton\n\
    \   Cisco Systems Inc.\n   285 W. Tasman, MS-SJCI/3/4,\n   San Jose, CA 95134\n\
    \   EMail: tahamilt@cisco.com\n   Steve Vogelsang\n   Laurel Networks, Inc.\n\
    \   Omega Corporate Center\n   1300 Omega Drive\n   Pittsburgh, PA 15205\n   EMail:\
    \ sjv@laurelnetworks.com\n   John Shirron\n   Laurel Networks, Inc.\n   Omega\
    \ Corporate Center\n   1300 Omega Drive\n   Pittsburgh, PA 15205\n   EMail: jshirron@laurelnetworks.com\n\
    \   Toby Smith\n   Network Appliance, Inc.\n   800 Cranberry Woods Drive\n   Suite\
    \ 300\n   Cranberry Township, PA 16066\n   EMail: tob@netapp.com\n   Andrew G.\
    \ Malis\n   Tellabs\n   90 Rio Robles Dr.\n   San Jose, CA 95134\n   EMail: Andy.Malis@tellabs.com\n\
    \   Vinai Sirkay\n   Redback Networks\n   300 Holger Way\n   San Jose, CA 95134\n\
    \   EMail: vsirkay@redback.com\n   Vasile Radoaca\n   Nortel Networks\n   600\
    \  Technology Park\n   Billerica MA 01821\n   EMail: vasile@nortelnetworks.com\n\
    \   Chris Liljenstolpe\n   Alcatel\n   11600 Sallie Mae Dr.\n   9th Floor\n  \
    \ Reston, VA 20193\n   EMail: chris.liljenstolpe@alcatel.com\n   Dave Cooper\n\
    \   Global Crossing\n   960 Hamlin Court\n   Sunnyvale, CA 94089\n   EMail: dcooper@gblx.net\n\
    \   Kireeti Kompella\n   Juniper Networks\n   1194 N. Mathilda Ave\n   Sunnyvale,\
    \ CA 94089\n   EMail: kireeti@juniper.net\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Luca Martini\n   Cisco Systems, Inc.\n   9155 East Nichols\
    \ Avenue, Suite 400\n   Englewood, CO 80112\n   EMail: lmartini@cisco.com\n  \
    \ Nasser El-Aawar\n   Level 3 Communications, LLC.\n   1025 Eldorado Blvd.\n \
    \  Broomfield, CO 80021\n   EMail: nna@level3.net\n   Eric Rosen\n   Cisco Systems,\
    \ Inc.\n   1414 Massachusetts Avenue\n   Boxborough, MA 01719\n   EMail: erosen@cisco.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2007).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
