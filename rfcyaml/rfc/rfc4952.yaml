- title: __initial_text__
  contents:
  - '           Overview and Framework for Internationalized Email

    '
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The IETF Trust (2007).\n"
- title: Abstract
  contents:
  - "Abstract\n   Full use of electronic mail throughout the world requires that people\n\
    \   be able to use their own names, written correctly in their own\n   languages\
    \ and scripts, as mailbox names in email addresses.  This\n   document introduces\
    \ a series of specifications that define mechanisms\n   and protocol extensions\
    \ needed to fully support internationalized\n   email addresses.  These changes\
    \ include an SMTP extension and\n   extension of email header syntax to accommodate\
    \ UTF-8 data.  The\n   document set also includes discussion of key assumptions\
    \ and issues\n   in deploying fully internationalized email.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  3\n     1.1.  Role of This Specification . . . . . . . . . . .\
    \ . . . . .  3\n     1.2.  Problem Statement  . . . . . . . . . . . . . . . .\
    \ . . . .  3\n     1.3.  Terminology  . . . . . . . . . . . . . . . . . . . .\
    \ . . .  4\n   2.  Overview of the Approach . . . . . . . . . . . . . . . . .\
    \ . .  6\n   3.  Document Plan  . . . . . . . . . . . . . . . . . . . . . . .\
    \ .  6\n   4.  Overview of Protocol Extensions and Changes  . . . . . . . . .\
    \  7\n     4.1.  SMTP Extension for Internationalized Email Address . . . .  7\n\
    \     4.2.  Transmission of Email Header Fields in UTF-8 Encoding  . .  8\n  \
    \   4.3.  Downgrading Mechanism for Backward Compatibility . . . . .  9\n   5.\
    \  Downgrading before and after SMTP Transactions . . . . . . . . 10\n     5.1.\
    \  Downgrading before or during Message Submission  . . . . . 10\n     5.2.  Downgrading\
    \ or Other Processing After Final SMTP\n           Delivery . . . . . . . . .\
    \ . . . . . . . . . . . . . . . . 11\n   6.  Additional Issues  . . . . . . .\
    \ . . . . . . . . . . . . . . . 11\n     6.1.  Impact on URIs and IRIs  . . .\
    \ . . . . . . . . . . . . . . 11\n     6.2.  Interaction with Delivery Notifications\
    \  . . . . . . . . . 12\n     6.3.  Use of Email Addresses as Identifiers  . .\
    \ . . . . . . . . 12\n     6.4.  Encoded Words, Signed Messages, and Downgrading\
    \  . . . . . 12\n     6.5.  Other Uses of Local Parts  . . . . . . . . . . . .\
    \ . . . . 13\n     6.6.  Non-Standard Encapsulation Formats . . . . . . . . .\
    \ . . . 13\n   7.  Experimental Targets . . . . . . . . . . . . . . . . . . .\
    \ . . 13\n   8.  IANA Considerations  . . . . . . . . . . . . . . . . . . . .\
    \ . 13\n   9.  Security Considerations  . . . . . . . . . . . . . . . . . . .\
    \ 14\n   10. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 15\n\
    \   11. References . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n  \
    \   11.1. Normative References . . . . . . . . . . . . . . . . . . . 16\n    \
    \ 11.2. Informative References . . . . . . . . . . . . . . . . . . 16\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   In order to use internationalized email addresses, we need\
    \ to\n   internationalize both the domain part and the local part of email\n \
    \  addresses.  The domain part of email addresses is already\n   internationalized\
    \ [RFC3490], while the local part is not.  Without\n   the extensions specified\
    \ in this document, the mailbox name is\n   restricted to a subset of 7-bit ASCII\
    \ [RFC2821].  Though MIME\n   [RFC2045] enables the transport of non-ASCII data,\
    \ it does not\n   provide a mechanism for internationalized email addresses. \
    \ In RFC\n   2047 [RFC2047], MIME defines an encoding mechanism for some specific\n\
    \   message header fields to accommodate non-ASCII data.  However, it\n   does\
    \ not permit the use of email addresses that include non-ASCII\n   characters.\
    \  Without the extensions defined here, or some equivalent\n   set, the only way\
    \ to incorporate non-ASCII characters in any part of\n   email addresses is to\
    \ use RFC 2047 coding to embed them in what RFC\n   2822 [RFC2822] calls the \"\
    display name\" (known as a \"name phrase\" or\n   by other terms elsewhere) of\
    \ the relevant headers.  Information coded\n   into the display name is invisible\
    \ in the message envelope and, for\n   many purposes, is not part of the address\
    \ at all.\n"
- title: 1.1.  Role of This Specification
  contents:
  - "1.1.  Role of This Specification\n   This document presents the overview and\
    \ framework for an approach to\n   the next stage of email internationalization.\
    \  This new stage\n   requires not only internationalization of addresses and\
    \ headers, but\n   also associated transport and delivery models.\n   This document\
    \ provides the framework for a series of experimental\n   specifications that,\
    \ together, provide the details for a way to\n   implement and support internationalized\
    \ email.  The document itself\n   describes how the various elements of email\
    \ internationalization fit\n   together and how the relationships among the various\
    \ documents are\n   involved.\n"
- title: 1.2.  Problem Statement
  contents:
  - "1.2.  Problem Statement\n   Internationalizing Domain Names in Applications (IDNA)\
    \ [RFC3490]\n   permits internationalized domain names, but deployment has not\
    \ yet\n   reached most users.  One of the reasons for this is that we do not\n\
    \   yet have fully internationalized naming schemes.  Domain names are\n   just\
    \ one of the various names and identifiers that are required to be\n   internationalized.\
    \  In many contexts, until more of those identifiers\n   are internationalized,\
    \ internationalized domain names alone have\n   little value.\n   Email addresses\
    \ are prime examples of why it is not good enough to\n   just internationalize\
    \ the domain name.  As most of us have learned\n   from experience, users strongly\
    \ prefer email addresses that resemble\n   names or initials to those involving\
    \ seemingly meaningless strings of\n   letters or numbers.  Unless the entire\
    \ email address can use familiar\n   characters and formats, users will perceive\
    \ email as being culturally\n   unfriendly.  If the names and initials used in\
    \ email addresses can be\n   expressed in the native languages and writing systems\
    \ of the users,\n   the Internet will be perceived as more natural, especially\
    \ by those\n   whose native language is not written in a subset of a Roman-derived\n\
    \   script.\n   Internationalization of email addresses is not merely a matter\
    \ of\n   changing the SMTP envelope; or of modifying the From, To, and Cc\n  \
    \ headers; or of permitting upgraded Mail User Agents (MUAs) to decode\n   a special\
    \ coding and respond by displaying local characters.  To be\n   perceived as usable,\
    \ the addresses must be internationalized and\n   handled consistently in all\
    \ of the contexts in which they occur.\n   This requirement has far-reaching implications:\
    \ collections of\n   patches and workarounds are not adequate.  Even if they were\n\
    \   adequate, a workaround-based approach may result in an assortment of\n   implementations\
    \ with different sets of patches and workarounds having\n   been applied with\
    \ consequent user confusion about what is actually\n   usable and supported. \
    \ Instead, we need to build a fully\n   internationalized email environment, focusing\
    \ on permitting efficient\n   communication among those who share a language or\
    \ other community.\n   That, in turn, implies changes to the mail header environment\
    \ to\n   permit the full range of Unicode characters where that makes sense,\n\
    \   an SMTP Extension to permit UTF-8 [RFC3629] mail addressing and\n   delivery\
    \ of those extended headers, and (finally) a requirement for\n   support of the\
    \ 8BITMIME SMTP extension [RFC1652] so that all of these\n   can be transported\
    \ through the mail system without having to overcome\n   the limitation that headers\
    \ do not have content-transfer-encodings.\n"
- title: 1.3.  Terminology
  contents:
  - "1.3.  Terminology\n   This document assumes a reasonable understanding of the\
    \ protocols and\n   terminology of the core email standards as documented in [RFC2821]\n\
    \   and [RFC2822].\n   Much of the description in this document depends on the\
    \ abstractions\n   of \"Mail Transfer Agent\" (\"MTA\") and \"Mail User Agent\"\
    \ (\"MUA\").\n   However, it is important to understand that those terms and the\n\
    \   underlying concepts postdate the design of the Internet's email\n   architecture\
    \ and the application of the \"protocols on the wire\"\n   principle to it.  That\
    \ email architecture, as it has evolved, and the\n   \"wire\" principle have prevented\
    \ any strong and standardized\n   distinctions about how MTAs and MUAs interact\
    \ on a given origin or\n   destination host (or even whether they are separate).\n\
    \   However, the term \"final delivery MTA\" is used in this document in a\n \
    \  fashion equivalent to the term \"delivery system\" or \"final delivery\n  \
    \ system\" of RFC 2821.  This is the SMTP server that controls the\n   format\
    \ of the local parts of addresses and is permitted to inspect\n   and interpret\
    \ them.  It receives messages from the network for\n   delivery to mailboxes or\
    \ for other local processing, including any\n   forwarding or aliasing that changes\
    \ envelope addresses, rather than\n   relaying.  From the perspective of the network,\
    \ any local delivery\n   arrangements such as saving to a message store, handoff\
    \ to specific\n   message delivery programs or agents, and mechanisms for retrieving\n\
    \   messages are all \"behind\" the final delivery MTA and hence are not\n   part\
    \ of the SMTP transport or delivery process.\n   In this document, an address\
    \ is \"all-ASCII\", or just an \"ASCII\n   address\", if every character in the\
    \ address is in the ASCII character\n   repertoire [ASCII]; an address is \"non-ASCII\"\
    , or an \"i18n-address\",\n   if any character is not in the ASCII character repertoire.\
    \  Such\n   addresses may be restricted in other ways, but those restrictions\
    \ are\n   not relevant to this definition.  The term \"all-ASCII\" is also\n \
    \  applied to other protocol elements when the distinction is important,\n   with\
    \ \"non-ASCII\" or \"internationalized\" as its opposite.\n   The umbrella term\
    \ to describe the email address internationalization\n   specified by this document\
    \ and its companion documents is \"UTF8SMTP\".\n   For example, an address permitted\
    \ by this specification is referred\n   to as a \"UTF8SMTP (compliant) address\"\
    .\n   Please note that, according to the definitions given here, the set of\n\
    \   all \"all-ASCII\" addresses and the set of all \"non-ASCII\" addresses\n \
    \  are mutually exclusive.  The set of all UTF8SMTP addresses is the\n   union\
    \ of these two sets.\n   An \"ASCII user\" (i) exclusively uses email addresses\
    \ that contain\n   ASCII characters only, and (ii) cannot generate recipient addresses\n\
    \   that contain non-ASCII characters.\n   An \"i18mail user\" has one or more\
    \ non-ASCII email addresses.  Such a\n   user may have ASCII addresses too; if\
    \ the user has more than one\n   email account and a corresponding address, or\
    \ more than one alias for\n   the same address, he or she has some method to choose\
    \ which address\n   to use on outgoing email.  Note that under this definition,\
    \ it is not\n   possible to tell from an ASCII address if the owner of that address\n\
    \   is an i18mail user or not.  (A non-ASCII address implies a belief\n   that\
    \ the owner of that address is an i18mail user.)  There is no such\n   thing as\
    \ an \"i18mail message\"; the term applies only to users and\n   their agents\
    \ and capabilities.\n   A \"message\" is sent from one user (sender) using a particular\
    \ email\n   address to one or more other recipient email addresses (often\n  \
    \ referred to just as \"users\" or \"recipient users\").\n   A \"mailing list\"\
    \ is a mechanism whereby a message may be distributed\n   to multiple recipients\
    \ by sending it to one recipient address.  An\n   agent (typically not a human\
    \ being) at that single address then\n   causes the message to be redistributed\
    \ to the target recipients.\n   This agent sets the envelope return address of\
    \ the redistributed\n   message to a different address from that of the original\
    \ single\n   recipient message.  Using a different envelope return address\n \
    \  (reverse-path) causes error (and other automatically generated)\n   messages\
    \ to go to an error handling address.\n   As specified in RFC 2821, a message\
    \ that is undeliverable for some\n   reason is expected to result in notification\
    \ to the sender.  This can\n   occur in either of two ways.  One, typically called\
    \ \"Rejection\",\n   occurs when an SMTP server returns a reply code indicating\
    \ a fatal\n   error (a \"5yz\" code) or persistently returns a temporary failure\n\
    \   error (a \"4yz\" code).  The other involves accepting the message\n   during\
    \ SMTP processing and then generating a message to the sender,\n   typically known\
    \ as a \"Non-delivery Notification\" or \"NDN\".  Current\n   practice often favors\
    \ rejection over NDNs because of the reduced\n   likelihood that the generation\
    \ of NDNs will be used as a spamming\n   technique.  The latter, NDN, case is\
    \ unavoidable if an intermediate\n   MTA accepts a message that is then rejected\
    \ by the next-hop server.\n   The pronouns \"he\" and \"she\" are used interchangeably\
    \ to indicate a\n   human of indeterminate gender.\n   The key words \"MUST\"\
    , \"SHALL\", \"REQUIRED\", \"SHOULD\", \"RECOMMENDED\",\n   and \"MAY\" in this\
    \ document are to be interpreted as described in RFC\n   2119 [RFC2119].\n"
- title: 2.  Overview of the Approach
  contents:
  - "2.  Overview of the Approach\n   This set of specifications changes both SMTP\
    \ and the format of email\n   headers to permit non-ASCII characters to be represented\
    \ directly.\n   Each important component of the work is described in a separate\n\
    \   document.  The document set, whose members are described in the next\n   section,\
    \ also contains informational documents whose purpose is to\n   provide implementation\
    \ suggestions and guidance for the protocols.\n"
- title: 3.  Document Plan
  contents:
  - "3.  Document Plan\n   In addition to this document, the following documents make\
    \ up this\n   specification and provide advice and context for it.\n   o  SMTP\
    \ extensions.  This document [EAI-SMTPext] provides an SMTP\n      extension for\
    \ internationalized addresses, as provided for in RFC\n      2821.\n   o  Email\
    \ headers in UTF-8.  This document [EAI-UTF8] essentially\n      updates RFC 2822\
    \ to permit some information in email headers to be\n      expressed directly\
    \ by Unicode characters encoded in UTF-8 when the\n      SMTP extension described\
    \ above is used.  This document, possibly\n      with one or more supplemental\
    \ ones, will also need to address the\n      interactions with MIME, including\
    \ relationships between UTF8SMTP\n      and internal MIME headers and content\
    \ types.\n   o  In-transit downgrading from internationalized addressing with\
    \ the\n      SMTP extension and UTF-8 headers to traditional email formats and\n\
    \      characters [EAI-downgrade].  Downgrading either at the point of\n     \
    \ message origination or after the mail has successfully been\n      received\
    \ by a final delivery SMTP server involve different\n      constraints and possibilities;\
    \ see Section 4.3 and Section 5,\n      below.  Processing that occurs after such\
    \ final delivery,\n      particularly processing that is involved with the delivery\
    \ to a\n      mailbox or message store, is sometimes called \"Message Delivery\"\
    \n      processing.\n   o  Extensions to the IMAP protocol to support internationalized\n\
    \      headers [EAI-imap].\n   o  Parallel extensions to the POP protocol [EAI-pop].\n\
    \   o  Description of internationalization changes for delivery\n      notifications\
    \ (DSNs) [EAI-DSN].\n   o  Scenarios for the use of these protocols [EAI-scenarios].\n"
- title: 4.  Overview of Protocol Extensions and Changes
  contents:
  - '4.  Overview of Protocol Extensions and Changes

    '
- title: 4.1.  SMTP Extension for Internationalized Email Address
  contents:
  - "4.1.  SMTP Extension for Internationalized Email Address\n   An SMTP extension,\
    \ \"UTF8SMTP\" is specified as follows:\n   o  Permits the use of UTF-8 strings\
    \ in email addresses, both local\n      parts and domain names.\n   o  Permits\
    \ the selective use of UTF-8 strings in email headers (see\n      Section 4.2).\n\
    \   o  Requires that the server advertise the 8BITMIME extension\n      [RFC1652]\
    \ and that the client support 8-bit transmission so that\n      header information\
    \ can be transmitted without using special\n      content-transfer-encoding.\n\
    \   o  Provides information to support downgrading mechanisms.\n   Some general\
    \ principles affect the development decisions underlying\n   this work.\n   1.\
    \  Email addresses enter subsystems (such as a user interface) that\n       may\
    \ perform charset conversions or other encoding changes.  When\n       the left\
    \ hand side of the address includes characters outside the\n       US-ASCII character\
    \ repertoire, use of punycode on the right hand\n       side is discouraged to\
    \ promote consistent processing of\n       characters throughout the address.\n\
    \   2.  An SMTP relay must\n       *  Either recognize the format explicitly,\
    \ agreeing to do so via\n          an ESMTP option,\n       *  Select and use\
    \ an ASCII-only address, downgrading other\n          information as needed (see\
    \ Section 4.3), or\n       *  Reject the message or, if necessary, return a non-delivery\n\
    \          notification message, so that the sender can make another\n       \
    \   plan.\n       If the message cannot be forwarded because the next-hop system\n\
    \       cannot accept the extension and insufficient information is\n       available\
    \ to reliably downgrade it, it MUST be rejected or a non-\n       delivery message\
    \ generated and sent.\n   3.  In the interest of interoperability, charsets other\
    \ than UTF-8\n       are prohibited in mail addresses and headers.  There is no\n\
    \       practical way to identify them properly with an extension similar\n  \
    \     to this without introducing great complexity.\n   Conformance to the group\
    \ of standards specified here for email\n   transport and delivery requires implementation\
    \ of the SMTP Extension\n   specification, including recognition of the keywords\
    \ associated with\n   alternate addresses, and the UTF-8 Header specification.\
    \  Support for\n   downgrading is not required, but, if implemented, MUST be implemented\n\
    \   as specified.  Similarly, if the system implements IMAP or POP, it\n   MUST\
    \ conform to the i18n IMAP or POP specifications respectively.\n"
- title: 4.2.  Transmission of Email Header Fields in UTF-8 Encoding
  contents:
  - "4.2.  Transmission of Email Header Fields in UTF-8 Encoding\n   There are many\
    \ places in MUAs or in a user presentation in which\n   email addresses or domain\
    \ names appear.  Examples include the\n   conventional From, To, or Cc header\
    \ fields; Message-ID and\n   In-Reply-To header fields that normally contain domain\
    \ names (but\n   that may be a special case); and in message bodies.  Each of\
    \ these\n   must be examined from an internationalization perspective.  The user\n\
    \   will expect to see mailbox and domain names in local characters, and\n   to\
    \ see them consistently.  If non-obvious encodings, such as\n   protocol-specific\
    \ ASCII-Compatible Encoding (ACE) variants, are used,\n   the user will inevitably,\
    \ if only occasionally, see them rather than\n   \"native\" characters and will\
    \ find that discomfiting or astonishing.\n   Similarly, if different codings are\
    \ used for mail transport and\n   message bodies, the user is particularly likely\
    \ to be surprised, if\n   only as a consequence of the long-established \"things\
    \ leak\"\n   principle.  The only practical way to avoid these sources of\n  \
    \ discomfort, in both the medium and the longer term, is to have the\n   encodings\
    \ used in transport be as similar to the encodings used in\n   message headers\
    \ and message bodies as possible.\n   When email local parts are internationalized,\
    \ it seems clear that\n   they should be accompanied by arrangements for the email\
    \ headers to\n   be in the fully internationalized form.  That form should presumably\n\
    \   use UTF-8 rather than ASCII as the base character set for the\n   contents\
    \ of header fields (protocol elements such as the header field\n   names themselves\
    \ will remain entirely in ASCII).  For transition\n   purposes and compatibility\
    \ with legacy systems, this can done by\n   extending the encoding models of [RFC2045]\
    \ and [RFC2231].  However,\n   our target should be fully internationalized headers,\
    \ as discussed in\n   [EAI-UTF8].\n"
- title: 4.3.  Downgrading Mechanism for Backward Compatibility
  contents:
  - "4.3.  Downgrading Mechanism for Backward Compatibility\n   As with any use of\
    \ the SMTP extension mechanism, there is always the\n   possibility of a client\
    \ that requires the feature encountering a\n   server that does not support the\
    \ required feature.  In the case of\n   email address and header internationalization,\
    \ the risk should be\n   minimized by the fact that the selection of submission\
    \ servers are\n   presumably under the control of the sender's client and the\
    \ selection\n   of potential intermediate relays is under the control of the\n\
    \   administration of the final delivery server.\n   For situations in which a\
    \ client that needs to use UTF8SMTP\n   encounters a server that does not support\
    \ the extension UTF8SMTP,\n   there are two possibilities:\n   o  Reject the message\
    \ or generate and send a non-delivery message,\n      requiring the sender to\
    \ resubmit it with traditional-format\n      addresses and headers.\n   o  Figure\
    \ out a way to downgrade the envelope or message body in\n      transit.  Especially\
    \ when internationalized addresses are\n      involved, downgrading will require\
    \ that all-ASCII addresses be\n      obtained from some source.  An optional extension\
    \ parameter is\n      provided as a way of transmitting an alternate address.\
    \  Downgrade\n      issues and a specification are discussed in [EAI-downgrade].\n\
    \   (The client can also try an alternate next-hop host or requeue the\n   message\
    \ and try later, on the assumption that the lack of UTF8SMTP is\n   a transient\
    \ failure; since this ultimately resolves to success or\n   failure, it doesn't\
    \ change the discussion here.)\n   The first of these two options, that of rejecting\
    \ or returning the\n   message to the sender MAY always be chosen.\n   If a UTF8SMTP\
    \ capable client is sending a message that does not\n   require the extended capabilities,\
    \ it SHOULD send the message whether\n   or not the server announces support for\
    \ the extension.  In other\n   words, both the addresses in the envelope and the\
    \ entire set of\n   headers of the message are entirely in ASCII (perhaps including\n\
    \   encoded words in the headers).  In that case, the client SHOULD send\n   the\
    \ message whether or not the server announces the capability\n   specified here.\n"
- title: 5.  Downgrading before and after SMTP Transactions
  contents:
  - "5.  Downgrading before and after SMTP Transactions\n   In addition to the in-transit\
    \ downgrades discussed above, downgrading\n   may also occur before or during\
    \ the initial message submission or\n   after the delivery to the final delivery\
    \ MTA.  Because these cases\n   have a different set of available information\
    \ from in-transit cases,\n   the constraints and opportunities may be somewhat\
    \ different too.\n   These two cases are discussed in the subsections below.\n"
- title: 5.1.  Downgrading before or during Message Submission
  contents:
  - "5.1.  Downgrading before or during Message Submission\n   Perhaps obviously,\
    \ the most convenient time to find an ASCII address\n   corresponding to an internationalized\
    \ address is at the originating\n   MUA.  This can occur either before the message\
    \ is sent or after the\n   internationalized form of the message is rejected.\
    \  It is also the\n   most convenient time to convert a message from the internationalized\n\
    \   form into conventional ASCII form or to generate a non-delivery\n   message\
    \ to the sender if either is necessary.  At that point, the\n   user has a full\
    \ range of choices available, including contacting the\n   intended recipient\
    \ out of band for an alternate address, consulting\n   appropriate directories,\
    \ arranging for translation of both addresses\n   and message content into a different\
    \ language, and so on.  While it\n   is natural to think of message downgrading\
    \ as optimally being a\n   fully-automated process, we should not underestimate\
    \ the capabilities\n   of a user of at least moderate intelligence who wishes\
    \ to communicate\n   with another such user.\n   In this context, one can easily\
    \ imagine modifications to message\n   submission servers (as described in [RFC4409])\
    \ so that they would\n   perform downgrading, or perhaps even upgrading, operations,\
    \ receiving\n   messages with one or more of the internationalization extensions\n\
    \   discussed here and adapting the outgoing message, as needed, to\n   respond\
    \ to the delivery or next-hop environment it encounters.\n"
- title: 5.2.  Downgrading or Other Processing After Final SMTP Delivery
  contents:
  - "5.2.  Downgrading or Other Processing After Final SMTP Delivery\n   When an email\
    \ message is received by a final delivery SMTP server, it\n   is usually stored\
    \ in some form.  Then it is retrieved either by\n   software that reads the stored\
    \ form directly or by client software\n   via some email retrieval mechanisms\
    \ such as POP or IMAP.\n   The SMTP extension described in Section 4.1 provides\
    \ protection only\n   in transport.  It does not prevent MUAs and email retrieval\n\
    \   mechanisms that have not been upgraded to understand\n   internationalized\
    \ addresses and UTF-8 headers from accessing stored\n   internationalized emails.\n\
    \   Since the final delivery SMTP server (or, to be more specific, its\n   corresponding\
    \ mail storage agent) cannot safely assume that agents\n   accessing email storage\
    \ will always be capable of handling the\n   extensions proposed here, it MAY\
    \ either downgrade internationalized\n   emails or specially identify messages\
    \ that utilize these extensions,\n   or both.  If this is done, the final delivery\
    \ SMTP server SHOULD\n   include a mechanism to preserve or recover the original\n\
    \   internationalized forms without information loss to support access by\n  \
    \ UTF8SMTP-aware agents.\n"
- title: 6.  Additional Issues
  contents:
  - "6.  Additional Issues\n   This section identifies issues that are not covered\
    \ as part of this\n   set of specifications, but that will need to be considered\
    \ as part of\n   deployment of email address and header internationalization.\n"
- title: 6.1.  Impact on URIs and IRIs
  contents:
  - "6.1.  Impact on URIs and IRIs\n   The mailto: schema defined in [RFC2368] and\
    \ discussed in the\n   Internationalized Resource Identifier (IRI) specification\
    \ [RFC3987]\n   may need to be modified when this work is completed and standardized.\n"
- title: 6.2.  Interaction with Delivery Notifications
  contents:
  - "6.2.  Interaction with Delivery Notifications\n   The advent of UTF8SMTP will\
    \ make necessary consideration of the\n   interaction with delivery notification\
    \ mechanisms, including the SMTP\n   extension for requesting delivery notifications\
    \ [RFC3461], and the\n   format of delivery notifications [RFC3464].  These issues\
    \ are\n   discussed in a forthcoming document that will update those RFCs as\n\
    \   needed [EAI-DSN].\n"
- title: 6.3.  Use of Email Addresses as Identifiers
  contents:
  - "6.3.  Use of Email Addresses as Identifiers\n   There are a number of places\
    \ in contemporary Internet usage in which\n   email addresses are used as identifiers\
    \ for individuals, including as\n   identifiers to Web servers supporting some\
    \ electronic commerce sites.\n   These documents do not address those uses, but\
    \ it is reasonable to\n   expect that some difficulties will be encountered when\n\
    \   internationalized addresses are first used in those contexts, many of\n  \
    \ which cannot even handle the full range of addresses permitted today.\n"
- title: 6.4.  Encoded Words, Signed Messages, and Downgrading
  contents:
  - "6.4.  Encoded Words, Signed Messages, and Downgrading\n   One particular characteristic\
    \ of the email format is its persistency:\n   MUAs are expected to handle messages\
    \ that were originally sent\n   decades ago and not just those delivered seconds\
    \ ago.  As such, MUAs\n   and mail filtering software, such as that specified\
    \ in Sieve\n   [RFC3028], will need to continue to accept and decode header fields\n\
    \   that use the \"encoded word\" mechanism [RFC2047] to accommodate\n   non-ASCII\
    \ characters in some header fields.  While extensions to both\n   POP3 and IMAP\
    \ have been proposed to enable automatic EAI-upgrade --\n   including RFC 2047\
    \ decoding -- of messages by the POP3 or IMAP\n   server, there are message structures\
    \ and MIME content-types for which\n   that cannot be done or where the change\
    \ would have unacceptable side\n   effects.\n   For example, message parts that\
    \ are cryptographically signed, using\n   e.g., S/MIME [RFC3851] or Pretty Good\
    \ Privacy (PGP) [RFC3156], cannot\n   be upgraded from the RFC 2047 form to normal\
    \ UTF-8 characters without\n   breaking the signature.  Similarly, message parts\
    \ that are encrypted\n   may contain, when decrypted, header fields that use the\
    \ RFC 2047\n   encoding; such messages cannot be 'fully' upgraded without access\
    \ to\n   cryptographic keys.\n   Similar issues may arise if signed messages are\
    \ downgraded in transit\n   [EAI-downgrade] and then an attempt is made to upgrade\
    \ them to the\n   original form and then verify the signatures.  Even the very\
    \ subtle\n   changes that may result from algorithms to downgrade and then upgrade\n\
    \   again may be sufficient to invalidate the signatures if they impact\n   either\
    \ the primary or MIME bodypart headers.  When signatures are\n   present, downgrading\
    \ must be performed with extreme care if at all.\n"
- title: 6.5.  Other Uses of Local Parts
  contents:
  - "6.5.  Other Uses of Local Parts\n   Local parts are sometimes used to construct\
    \ domain labels, e.g., the\n   local part \"user\" in the address user@domain.example\
    \ could be\n   converted into a vanity host user.domain.example with its Web space\n\
    \   at <http://user.domain.example> and the catchall addresses\n   any.thing.goes@user.domain.example.\n\
    \   Such schemes are obviously limited by, among other things, the SMTP\n   rules\
    \ for domain names, and will not work without further\n   restrictions for other\
    \ local parts such as the <utf8-local-part>\n   specified in [EAI-UTF8].  Whether\
    \ this issue is relevant to these\n   specifications is an open question.  It\
    \ may be simply another case of\n   the considerable flexibility accorded to delivery\
    \ MTAs in determining\n   the mailbox names they will accept and how they are\
    \ interpreted.\n"
- title: 6.6.  Non-Standard Encapsulation Formats
  contents:
  - "6.6.  Non-Standard Encapsulation Formats\n   Some applications use formats similar\
    \ to the application/mbox format\n   defined in [RFC4155] instead of the message/digest\
    \ RFC 2046, Section\n   5.1.5 [RFC2046] form to transfer multiple messages as\
    \ single units.\n   Insofar as such applications assume that all stored messages\
    \ use the\n   message/rfc822 RFC 2046, Section 5.2.1 [RFC2046] format with US-ASCII\n\
    \   headers, they are not ready for the extensions specified in this\n   series\
    \ of documents and special measures may be needed to properly\n   detect and process\
    \ them.\n"
- title: 7.  Experimental Targets
  contents:
  - "7.  Experimental Targets\n   In addition to the simple question of whether the\
    \ model outlined here\n   can be made to work in a satisfactory way for upgraded\
    \ systems and\n   provide adequate protection for un-upgraded ones, we expect\
    \ that\n   actually working with the systems will provide answers to two\n   additional\
    \ questions: what restrictions such as character lists or\n   normalization should\
    \ be placed, if any, on the characters that are\n   permitted to be used in address\
    \ local-parts and how useful, in\n   practice, will downgrading turn out to be\
    \ given whatever restrictions\n   and constraints that must be placed upon it.\n"
- title: 8.  IANA Considerations
  contents:
  - "8.  IANA Considerations\n   This overview description and framework document\
    \ does not contemplate\n   any IANA registrations or other actions.  Some of the\
    \ documents in\n   the group have their own IANA considerations sections and\n\
    \   requirements.\n"
- title: 9.  Security Considerations
  contents:
  - "9.  Security Considerations\n   Any expansion of permitted characters and encoding\
    \ forms in email\n   addresses raises some risks.  There have been discussions\
    \ on so\n   called \"IDN-spoofing\" or \"IDN homograph attacks\".  These attacks\n\
    \   allow an attacker (or \"phisher\") to spoof the domain or URLs of\n   businesses.\
    \  The same kind of attack is also possible on the local\n   part of internationalized\
    \ email addresses.  It should be noted that\n   the proposed fix involving forcing\
    \ all displayed elements into\n   normalized lower-case works for domain names\
    \ in URLs, but not email\n   local parts since those are case sensitive.\n   Since\
    \ email addresses are often transcribed from business cards and\n   notes on paper,\
    \ they are subject to problems arising from confusable\n   characters (see [RFC4690]).\
    \  These problems are somewhat reduced if\n   the domain associated with the mailbox\
    \ is unambiguous and supports a\n   relatively small number of mailboxes whose\
    \ names follow local system\n   conventions.  They are increased with very large\
    \ mail systems in\n   which users can freely select their own addresses.\n   The\
    \ internationalization of email addresses and headers must not\n   leave the Internet\
    \ less secure than it is without the required\n   extensions.  The requirements\
    \ and mechanisms documented in this set\n   of specifications do not, in general,\
    \ raise any new security issues.\n   They do require a review of issues associated\
    \ with confusable\n   characters -- a topic that is being explored thoroughly\
    \ elsewhere\n   (see, e.g., [RFC4690]) -- and, potentially, some issues with UTF-8\n\
    \   normalization, discussed in [RFC3629], and other transformations.\n   Normalization\
    \ and other issues associated with transformations and\n   standard forms are\
    \ also part of the subject of ongoing work discussed\n   in [Net-Unicode], in\
    \ [IDNAbis-BIDI] and elsewhere.  Some issues\n   specifically related to internationalized\
    \ addresses and headers are\n   discussed in more detail in the other documents\
    \ in this set.\n   However, in particular, caution should be taken that any\n\
    \   \"downgrading\" mechanism, or use of downgraded addresses, does not\n   inappropriately\
    \ assume authenticated bindings between the\n   internationalized and ASCII addresses.\n\
    \   The new UTF-8 header and message formats might also raise, or\n   aggravate,\
    \ another known issue.  If the model creates new forms of an\n   'invalid' or\
    \ 'malformed' message, then a new email attack is created:\n   in an effort to\
    \ be robust, some or most agents will accept such\n   message and interpret them\
    \ as if they were well-formed.  If a filter\n   interprets such a message differently\
    \ than the final MUA, then it may\n   be possible to create a message that appears\
    \ acceptable under the\n   filter's interpretation but should be rejected under\
    \ the\n   interpretation given to it by the final MUA.  Such attacks already\n\
    \   exist for existing messages and encoding layers, e.g., invalid MIME\n   syntax,\
    \ invalid HTML markup, and invalid coding of particular image\n   types.\n   Models\
    \ for the \"downgrading\" of messages or addresses from UTF-8 form\n   to some\
    \ ASCII form, including those described in [EAI-downgrade],\n   pose another special\
    \ problem and risk.  Any system that transforms\n   one address or set of mail\
    \ header fields into another becomes a point\n   at which spoofing attacks can\
    \ occur and those who wish to spoof\n   messages might be able to do so by imitating\
    \ a message downgraded\n   from one with a legitimate original address.\n   In\
    \ addition, email addresses are used in many contexts other than\n   sending mail,\
    \ such as for identifiers under various circumstances\n   (see Section 6.3). \
    \ Each of those contexts will need to be evaluated,\n   in turn, to determine\
    \ whether the use of non-ASCII forms is\n   appropriate and what particular issues\
    \ they raise.\n   This work will clearly impact any systems or mechanisms that\
    \ are\n   dependent on digital signatures or similar integrity protection for\n\
    \   mail headers (see also the discussion in Section 6.4).  Many\n   conventional\
    \ uses of PGP and S/MIME are not affected since they are\n   used to sign body\
    \ parts but not headers.  On the other hand, the\n   developing work on domain\
    \ keys identified mail (DKIM [DKIM-Charter])\n   will eventually need to consider\
    \ this work and vice versa: while this\n   experiment does not propose to address\
    \ or solve the issues raised by\n   DKIM and other signed header mechanisms, the\
    \ issues will have to be\n   coordinated and resolved eventually if the two sets\
    \ of protocols are\n   to co-exist.  In addition, to the degree to which email\
    \ addresses\n   appear in PKI (Public Key Infrastructure) certificates, standards\n\
    \   addressing such certificates will need to be upgraded to address\n   these\
    \ internationalized addresses.  Those upgrades will need to\n   address questions\
    \ of spoofing by look-alikes of the addresses\n   themselves.\n"
- title: 10.  Acknowledgements
  contents:
  - "10.  Acknowledgements\n   This document, and the related ones, were originally\
    \ derived from\n   documents by John Klensin and the JET group [Klensin-emailaddr],\n\
    \   [JET-IMA].  The work drew inspiration from discussions on the \"IMAA\"\n \
    \  mailing list, sponsored by the Internet Mail Consortium and\n   especially\
    \ from an early document by Paul Hoffman and Adam Costello\n   [Hoffman-IMAA]\
    \ that attempted to define an MUA-only solution to the\n   address internationalization\
    \ problem.\n   More recent documents have benefited from considerable discussion\n\
    \   within the IETF EAI Working Group and especially from suggestions and\n  \
    \ text provided by Martin Duerst, Frank Ellermann, Philip Guenther,\n   Kari Hurtta,\
    \ and Alexey Melnikov, and from extended discussions among\n   the editors and\
    \ authors of the core documents cited in Section 3:\n   Harald Alvestrand, Kazunori\
    \ Fujiwara, Chris Newman, Pete Resnick,\n   Jiankang Yao, Jeff Yeh, and Yoshiro\
    \ Yoneya.\n   Additional comments received during IETF Last Call, including those\n\
    \   from Paul Hoffman and Robert Sparks, were helpful in making the\n   document\
    \ more clear and comprehensive.\n"
- title: 11.  References
  contents:
  - '11.  References

    '
- title: 11.1.  Normative References
  contents:
  - "11.1.  Normative References\n   [ASCII]              American National Standards\
    \ Institute (formerly\n                        United States of America Standards\
    \ Institute),\n                        \"USA Code for Information Interchange\"\
    ,\n                        ANSI X3.4-1968, 1968.\n                        ANSI\
    \ X3.4-1968 has been replaced by newer\n                        versions with\
    \ slight modifications, but the 1968\n                        version remains\
    \ definitive for the Internet.\n   [RFC1652]            Klensin, J., Freed, N.,\
    \ Rose, M., Stefferud, E.,\n                        and D. Crocker, \"SMTP Service\
    \ Extension for\n                        8bit-MIMEtransport\", RFC 1652, July\
    \ 1994.\n   [RFC2119]            Bradner, S., \"Key words for use in RFCs to\n\
    \                        Indicate Requirement Levels'\", RFC 2119, BCP 14,\n \
    \                       March 1997.\n   [RFC2821]            Klensin, J., \"Simple\
    \ Mail Transfer Protocol\",\n                        RFC 2821, April 2001.\n \
    \  [RFC3490]            Faltstrom, P., Hoffman, P., and A. Costello,\n       \
    \                 \"Internationalizing Domain Names in Applications\n        \
    \                (IDNA)\", RFC 3490, March 2003.\n   [RFC3629]            Yergeau,\
    \ F., \"UTF-8, a transformation format of\n                        ISO 10646\"\
    , STD 63, RFC 3629, November 2003.\n"
- title: 11.2.  Informative References
  contents:
  - "11.2.  Informative References\n   [DKIM-Charter]       IETF, \"Domain Keys Identified\
    \ Mail (dkim)\",\n                        October 2006, <http://www.ietf.org/\n\
    \                        html.charters/dkim-charter.html>.\n   [EAI-DSN]     \
    \       Newman, C., \"UTF-8 Delivery and Disposition\n                       \
    \ Notification\", Work in Progress, January 2007.\n   [EAI-SMTPext]        Yao,\
    \ J., Ed. and W. Mao, Ed., \"SMTP extension\n                        for internationalized\
    \ email address\", Work\n                        in Progress, June 2007.\n   [EAI-UTF8]\
    \           Yeh, J., \"Internationalized Email Headers\", Work\n             \
    \           in Progress, April 2007.\n   [EAI-downgrade]      Yoneya, Y., Ed.\
    \ and K. Fujiwara, Ed.,\n                        \"Downgrading mechanism for Internationalized\n\
    \                        eMail Address (IMA)\", Work in Progress,\n          \
    \              March 2007.\n   [EAI-imap]           Resnick, P. and C. Newman,\
    \ \"IMAP Support for\n                        UTF-8\", Work in Progress, March\
    \ 2007.\n   [EAI-pop]            Newman, C., \"POP3 Support for UTF-8\", Work\n\
    \                        in Progress, January 2007.\n   [EAI-scenarios]      Alvestrand,\
    \ H., \"UTF-8 Mail: Scenarios\", Work\n                        in Progress, February\
    \ 2007.\n   [Hoffman-IMAA]       Hoffman, P. and A. Costello, \"Internationalizing\n\
    \                        Mail Addresses in Applications (IMAA)\", Work\n     \
    \                   in Progress, October 2003.\n   [IDNAbis-BIDI]       Alvestrand,\
    \ H. and C. Karp, \"An IDNA problem in\n                        right-to-left\
    \ scripts\", Work in Progress,\n                        October 2006.\n   [JET-IMA]\
    \            Yao, J. and J. Yeh, \"Internationalized eMail\n                 \
    \       Address (IMA)\", Work in Progress, June 2005.\n   [Klensin-emailaddr]\
    \  Klensin, J., \"Internationalization of Email\n                        Addresses\"\
    , Work in Progress, July 2005.\n   [Net-Unicode]        Klensin, J. and M. Padlipsky,\
    \ \"Unicode Format\n                        for Network Interchange\", Work in\
    \ Progress,\n                        March 2007.\n   [RFC2045]            Freed,\
    \ N. and N. Borenstein, \"Multipurpose\n                        Internet Mail\
    \ Extensions (MIME) Part One: Format\n                        of Internet Message\
    \ Bodies\", RFC 2045,\n                        November 1996.\n   [RFC2046]  \
    \          Freed, N. and N. Borenstein, \"Multipurpose\n                     \
    \   Internet Mail Extensions (MIME) Part Two: Media\n                        Types\"\
    , RFC 2046, November 1996.\n   [RFC2047]            Moore, K., \"MIME (Multipurpose\
    \ Internet Mail\n                        Extensions) Part Three: Message Header\n\
    \                        Extensions for Non-ASCII Text\", RFC 2047,\n        \
    \                November 1996.\n   [RFC2231]            Freed, N. and K. Moore,\
    \ \"MIME Parameter Value\n                        and Encoded Word Extensions:\n\
    \                        Character Sets, Languages, and Continuations\",\n   \
    \                     RFC 2231, November 1997.\n   [RFC2368]            Hoffman,\
    \ P., Masinter, L., and J. Zawinski, \"The\n                        mailto URL\
    \ scheme\", RFC 2368, July 1998.\n   [RFC2822]            Resnick, P., \"Internet\
    \ Message Format\",\n                        RFC 2822, April 2001.\n   [RFC3028]\
    \            Showalter, T., \"Sieve: A Mail Filtering\n                      \
    \  Language\", RFC 3028, January 2001.\n   [RFC3156]            Elkins, M., Del\
    \ Torto, D., Levien, R., and T.\n                        Roessler, \"MIME Security\
    \ with OpenPGP\",\n                        RFC 3156, August 2001.\n   [RFC3461]\
    \            Moore, K., \"Simple Mail Transfer Protocol (SMTP)\n             \
    \           Service Extension for Delivery Status\n                        Notifications\
    \ (DSNs)\", RFC 3461, January 2003.\n   [RFC3464]            Moore, K. and G.\
    \ Vaudreuil, \"An Extensible\n                        Message Format for Delivery\
    \ Status\n                        Notifications\", RFC 3464, January 2003.\n \
    \  [RFC3851]            Ramsdell, B., \"Secure/Multipurpose Internet Mail\n  \
    \                      Extensions (S/MIME) Version 3.1 Message\n             \
    \           Specification\", RFC 3851, July 2004.\n   [RFC3987]            Duerst,\
    \ M. and M. Suignard, \"Internationalized\n                        Resource Identifiers\
    \ (IRIs)\", RFC 3987,\n                        January 2005.\n   [RFC4155]   \
    \         Hall, E., \"The application/mbox Media Type\",\n                   \
    \     RFC 4155, September 2005.\n   [RFC4409]            Gellens, R. and J. Klensin,\
    \ \"Message Submission\n                        for Mail\", RFC 4409, April 2006.\n\
    \   [RFC4690]            Klensin, J., Faltstrom, P., Karp, C., and IAB,\n    \
    \                    \"Review and Recommendations for\n                      \
    \  Internationalized Domain Names (IDNs)\",\n                        RFC 4690,\
    \ September 2006.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   John C Klensin\n   1770 Massachusetts Ave, #322\n   Cambridge,\
    \ MA  02140\n   USA\n   Phone: +1 617 491 5735\n   EMail: john-ietf@jck.com\n\
    \   YangWoo Ko\n   ICU\n   119 Munjiro\n   Yuseong-gu, Daejeon  305-732\n   Republic\
    \ of Korea\n   EMail: yw@mrko.pe.kr\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2007).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
