- title: __initial_text__
  contents:
  - "                      Recommendations for IPv6 in\n         Third Generation\
    \ Partnership Project (3GPP) Standards\n"
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2002).  All Rights Reserved.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document contains recommendations from the Internet Engineering\n\
    \   Task Force (IETF) IPv6 Working Group to the Third Generation\n   Partnership\
    \ Project (3GPP) community regarding the use of IPv6 in the\n   3GPP standards.\
    \  Specifically, this document recommends that the 3GPP\n   specify that multiple\
    \ prefixes may be assigned to each primary PDP\n   context, require that a given\
    \ prefix must not be assigned to more\n   than one primary PDP context, and allow\
    \ 3GPP nodes to use multiple\n   identifiers within those prefixes, including\
    \ randomly generated\n   identifiers.\n   The IPv6 Working Group supports the\
    \ use of IPv6 within 3GPP and\n   offers these recommendations in a spirit of\
    \ open cooperation between\n   the IPv6 Working Group and the 3GPP community.\
    \  Since the original\n   publication of this document as an Internet-Draft, the\
    \ 3GPP has\n   adopted the primary recommendations of this document.\n"
- title: Conventions Used In This Document
  contents:
  - "Conventions Used In This Document\n   The key words \"MUST\", \"MUST NOT\", \"\
    REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in BCP 14, RFC 2119\n   [KEYWORD].\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1       Introduction.............................................\
    \  2\n   1.1     What is the 3GPP?........................................  3\n\
    \   1.2     What is the IETF?........................................  4\n   1.3\
    \     Terminology..............................................  4\n   1.3.1 \
    \  3GPP Terminology.........................................  4\n   1.3.2   IETF\
    \ Terminology.........................................  5\n   1.4     Overview\
    \ of the IPv6 Addressing Architecture.............  6\n   1.5     An IP-Centric\
    \ View of the 3GPP System....................  7\n   1.5.1   Overview of the UMTS\
    \ Architecture........................  7\n   1.5.2   The PDP Context..........................................\
    \ 10\n   1.5.3   IPv6 Address Autoconfiguration in GPRS................... 11\n\
    \   2       Recommendations to the 3GPP.............................. 13\n   2.1\
    \     Limitations of 3GPP Address Assignment................... 13\n   2.2   \
    \  Advertising Multiple Prefixes............................ 14\n   2.3     Assigning\
    \ a Prefix to Only One Primary PDP Context....... 14\n   2.3.1   Is a /64 per\
    \ PDP Context Too Much?....................... 15\n   2.3.2   Prefix Information\
    \ in the SGSN........................... 16\n   2.4     Multiple Identifiers per\
    \ PDP Context..................... 16\n   3       Additional IPv6 Work Items...............................\
    \ 16\n   4       Security Considerations.................................. 17\n\
    \   Appendix A:  Analysis of Findings................................ 18\n   Address\
    \ Assignment Solutions..................................... 18\n   References.......................................................\
    \ 19\n   Authors and Acknowledgements..................................... 22\n\
    \   Editor's Address................................................. 22\n   Full\
    \ Copyright Statement......................................... 23\n"
- title: 1. Introduction
  contents:
  - "1. Introduction\n   In May 2001, the IPv6 Working Group (WG) held an interim\
    \ meeting in\n   Redmond, WA to discuss the use of IPv6 within the 3GPP standards.\n\
    \   The first day of the meeting was a joint discussion with 3GPP, during\n  \
    \ which an architectural overview of 3GPP's usage of IPv6 was\n   presented, and\
    \ there was much discussion regarding particular aspects\n   of IPv6 usage within\
    \ 3GPP.  At that meeting, a decision was made to\n   form a design team to write\
    \ a document offering advice from the IPv6\n   WG to the 3GPP community, regarding\
    \ their use of IPv6.  This document\n   is the result of that effort.\n   This\
    \ document offers recommendations to the 3GPP community from the\n   IETF IPv6\
    \ Working Group.  It is organized into three main sections:\n      1. An introduction\
    \ (this section) that provides background\n         information regarding the\
    \ IETF IPv6 WG and the 3GPP and\n         includes a high-level overview of the\
    \ technologies discussed in\n         this document.\n      2. Recommendations\
    \ from the IPv6 WG to the 3GPP community.  These\n         can be found in section\
    \ 2.\n      3. Further work items that should be considered by the IPv6 WG.\n\
    \         These items are discussed in section 3.\n   It is the purpose of this\
    \ document to provide advice from the IPv6\n   Working Group to the 3GPP community.\
    \  We have limited the contents of\n   this document to items that are directly\
    \ related to the use of IPv6\n   within 3GPP.  This document defines no standards,\
    \ and it is not a\n   definitive source of information regarding IPv6 or 3GPP.\
    \  We have not\n   chosen to explore 3GPP-related issues with other IETF protocols\n\
    \   (i.e., SIP, IPv4, etc.), as they are outside the scope of the IPv6\n   Working\
    \ Group.\n   The IPv6 Working Group fully supports the use of IPv6 within 3GPP,\n\
    \   and we encourage 3GPP implementers and operators to participate in\n   the\
    \ IETF process.  We are offering these suggestions in a spirit of\n   open cooperation\
    \ between the IPv6 Working Group and the 3GPP\n   community, and we hope that\
    \ our ongoing cooperation will help to\n   strengthen both sets of standards.\n\
    \   The 3GPP address allocation information in this document is based on\n   the\
    \ 3GPP document TS 23.060 version 4.1.0 [OLD-TS23060].  At the 3GPP\n   plenary\
    \ meeting TSG #15 in March 2002, the 3GPP adopted the two\n   primary recommendations\
    \ contained in this document, allocating a\n   unique prefix to each primary PDP\
    \ context when IPv6 stateless address\n   autoconfiguration is used, and allowing\
    \ the terminals to use multiple\n   interface identifiers.  These changes were\
    \ retroactively applied from\n   3GPP release 99 onwards, in TS23.060 versions\
    \ 3.11.0, 4.4.0 and 5.1.0\n   [NEW-TS23060].\n"
- title: 1.1 What is the 3GPP?
  contents:
  - "1.1 What is the 3GPP?\n   The Third Generation Partnership Project (3GPP) is\
    \ a global\n   standardization partnership founded in late 1998.  Its Organizational\n\
    \   Partners have agreed to co-operate in the production of technical\n   specifications\
    \ for a Third Generation Mobile System, based on the\n   evolved GSM core networks.\n\
    \   The 3GPP Organizational Partners consist of several different\n   standardization\
    \ organizations: ETSI from Europe, Standards Committee\n   T1 Telecommunications\
    \ (T1) in the USA, China Wireless\n   Telecommunication Standard Group (CWTS),\
    \ Korean Telecommunications\n   Technology Association (TTA), the Association\
    \ of Radio Industries and\n   Businesses (ARIB), and the Telecommunication Technology\n\
    \   Committee(TTC) in Japan.\n   The work is coordinated by a Project Co-ordination\
    \ Group (PCG), and\n   structured into Technical Specification Groups (TSGs).\
    \  There are\n   five TSGs: Core Network (TSG CN), Radio Access Networks (TSG\
    \ RAN),\n   Services and System Aspects (TSG SA), GSM/EDGE Radio Access Network\n\
    \   (GERAN), and the Terminals (TSG T).  The TSGs are further divided\n   into\
    \ Working Groups (WGs).  The technical work is done in the working\n   groups,\
    \ and later approved in the TSGs.\n   3GPP working methods are different from\
    \ IETF working methods.  The\n   major difference is where the majority of the\
    \ work is done.  In 3GPP,\n   the work is done in face-to-face meetings, and the\
    \ mailing list is\n   used mainly for distributing contributions, and for handling\n\
    \   documents that were not handled in the meeting, due to lack of time.\n   Decisions\
    \ are usually made by consensus, though voting does exist.\n   However, it is\
    \ rather rare to vote.  3GPP documents are public and\n   can be accessed via\
    \ the 3GPP web site [3GPP-URL].\n"
- title: 1.2 What is the IETF?
  contents:
  - "1.2 What is the IETF?\n   The Internet Engineering Task Force (IETF) is a large,\
    \ open,\n   international community of network designers, operators, vendors,\
    \ and\n   researchers, concerned with the evolution of the Internet\n   architecture\
    \ and the smooth operation of the Internet.  The IETF is\n   also the primary\
    \ standards body developing Internet protocols and\n   standards.  It is open\
    \ to any interested individual.  More\n   information about the IETF can be found\
    \ at the IETF web site [IETF-\n   URL].\n   The actual technical work of the IETF\
    \ is done in working groups,\n   organized by topic into several areas (e.g.,\
    \ routing, transport,\n   security, etc.).  The IPv6 Working Group is chartered\
    \ within the\n   Internet area of the IETF.  Much of the work is handled via mailing\n\
    \   lists, and the IETF holds meetings three times per year.\n"
- title: 1.3 Terminology
  contents:
  - "1.3 Terminology\n   This section defines the 3GPP and IETF terminology used in\
    \ this\n   document.  The 3GPP terms and their meanings have been taken from\n\
    \   [TR21905].\n"
- title: 1.3.1   3GPP Terminology
  contents:
  - "1.3.1   3GPP Terminology\n   APN          Access Point Name.  The APN is a logical\
    \ name referring\n                to a GGSN and an external network.\n   CS  \
    \         Circuit Switched\n   GERAN        GSM/EDGE Radio Access Network\n  \
    \ GGSN         Gateway GPRS Support Node.  A router between the GPRS\n       \
    \         network and an external network (i.e., the Internet).\n   GPRS     \
    \    General Packet Radio Services\n   GTP-U        General Tunneling Protocol\
    \ - User Plane\n   MT           Mobile Termination.  For example, a mobile phone\n\
    \                handset.\n   PDP          Packet Data Protocol\n   PDP Context\
    \  A PDP connection between the UE and the GGSN.\n   PS           Packet Switched\n\
    \   SGSN         Serving GPRS Support Node\n   TE           Terminal Equipment.\
    \  For example, a laptop attached\n                through a 3GPP handset.\n \
    \  UE           User Equipment (TE + MT + USIM).  An example would be\n      \
    \          a mobile handset with a USIM card inserted and a\n                laptop\
    \ attached.\n   UMTS         Universal Mobile Telecommunications System\n   USIM\
    \         Universal Subscriber Identity Module.  Typically, a\n              \
    \  card that is inserted into a mobile phone handset.\n   UTRAN        Universal\
    \ Terrestrial Radio Access Network\n"
- title: 1.3.2   IETF Terminology
  contents:
  - "1.3.2   IETF Terminology\n   IPv6         Internet Protocol version 6 [RFC 2460]\n\
    \   NAS          Network Access Server\n   NAT          Network Address Translator\n\
    \   NAT-PT       Network Address Translation with Protocol Translation.\n    \
    \            An IPv6 transition mechanism. [NAT-PT]\n   PPP          Point-to-Point\
    \ Protocol [PPP]\n   SIIT         Stateless IP/ICMP Transition Mechanism [SIIT]\n"
- title: 1.4 Overview of the IPv6 Addressing Architecture
  contents:
  - "1.4 Overview of the IPv6 Addressing Architecture\n   The recommendations in this\
    \ document are primarily related to IPv6\n   address assignment.  To fully understand\
    \ the recommended changes, it\n   is necessary to understand the IPv6 addressing\
    \ architecture, and\n   current IPv6 address assignment mechanisms.\n   The IPv6\
    \ addressing architecture represents a significant evolution\n   from IPv4 addressing\
    \ [ADDRARCH].  It is required that all IPv6 nodes\n   be able to assemble their\
    \ own addresses from interface identifiers\n   and prefix information.  This mechanism\
    \ is called IPv6 Host\n   Autoconfiguration [AUTOCONF], and it allows IPv6 nodes\
    \ to configure\n   themselves without the need for stateful configuration servers\
    \ (i.e.,\n   DHCPv6) or statically configured addresses.\n   Interface identifiers\
    \ can be globally unique, such as modified EUI-64\n   addresses [ADDRARCH], or\
    \ non-unique, such as randomly generated\n   identifiers.  Hosts that have a globally\
    \ unique identifier available\n   may also choose to use randomly generated addresses\
    \ for privacy\n   [PRIVADDR] or for other reasons.  IPv6 hosts are free to generate\
    \ new\n   identifiers at any time, and Duplicate Address Detection (DAD) is\n\
    \   used to protect against the use of duplicate identifiers on a single\n   link\
    \ [IPV6ND].\n   A constant link-local prefix can be combined with any interface\n\
    \   identifier to build an address for communication on a locally\n   attached\
    \ link.  IPv6 routers may advertise additional prefixes\n   (site-local and/or\
    \ global prefixes)[IPV6ND].  Hosts can combine\n   advertised prefixes with their\
    \ own interface identifiers to create\n   addresses for site-local and global\
    \ communication.\n   IPv6 introduces architectural support for scoped unicast\
    \ addressing\n   [SCOPARCH].  A single interface will typically have multiple\n\
    \   addresses for communication within different scopes: link-local,\n   site-local\
    \ and/or global [ADDRARCH].  Link-local addresses allow for\n   local communication,\
    \ even when an IPv6 router is not present.  Some\n   IPv6 protocols (i.e., routing\
    \ protocols) require the use of link-\n   local addresses.  Site-local addressing\
    \ allows communication to be\n   administratively contained within a single site.\
    \  Link-local or\n   site-local connections may also survive changes to global\
    \ prefix\n   information (e.g., site renumbering).\n   IPv6 explicitly associates\
    \ each address with an interface.\n   Multiple-interface hosts may have interfaces\
    \ on more than one link or\n   in more than one site.  Links and sites are internally\
    \ identified\n   using zone identifiers.  Proper routing of non-global traffic\
    \ and\n   proper address selection are ensured by the IPv6 scoped addressing\n\
    \   architecture [SCOPARCH].\n   IPv6 introduces the concept of privacy addresses\
    \ [PRIVADDR].  These\n   addresses are generated from an advertised global prefix\
    \ and a\n   randomly generated identifier, and are used for anonymous access to\n\
    \   Internet services.  Applications control the generation of privacy\n   addresses,\
    \ and new addresses can be generated at any time.\n   The IPv6 site renumbering\
    \ specification [SITEREN] relies upon the\n   fact that IPv6 nodes will generate\
    \ new addresses when new prefixes\n   are advertised on the link, and that they\
    \ will deprecate addresses\n   that use deprecated prefixes.\n   In the future,\
    \ additional IPv6 specifications may rely upon the\n   ability of IPv6 nodes to\
    \ use multiple prefixes and/or multiple\n   identifiers to dynamically create\
    \ new addresses.\n"
- title: 1.5 An IP-Centric View of the 3GPP System
  contents:
  - "1.5 An IP-Centric View of the 3GPP System\n   The 3GPP specifications define\
    \ a Third Generation Mobile System.  An\n   overview of the packet switched (PS)\
    \ domain of the 3GPP Release 99\n   system is described in the following sections.\
    \  The authors hope that\n   this description is sufficient for the reader who\
    \ is unfamiliar with\n   the UMTS packet switched service, to understand how the\
    \ UMTS system\n   works, and how IPv6 is currently defined to be used within it.\n"
- title: 1.5.1   Overview of the UMTS Architecture
  contents:
  - "1.5.1   Overview of the UMTS Architecture\n   The UMTS architecture can be divided\
    \ into two main domains -- the\n   packet switched (PS) domain, and the circuit\
    \ switched (CS) domain.\n   In this document, we will concentrate on the PS domain,\
    \ or General\n   Packet Radio Services (GPRS).\n  ------\n |  TE  |\n  ------\n\
    \    |\n    +R\n    |\n  ------   Uu  -----------   Iu  -----------   Gn  -----------\
    \   Gi\n |  MT  |--+--|   UTRAN   |--+--|   SGSN    |--+--|   GGSN    |--+--\n\
    \  ------       -----------       -----------       -----------\n   (UE)\n   \
    \                Figure 1:  Simplified GPRS Architecture\n  ------\n |      |\n\
    \ |  App |- - - - - - - - - - - - - - - - - - - - - - - - -(to app peer)\n | \
    \     |\n |------|                                              -------------\n\
    \ |  IP  |- - - - - - - - - - - - - - - - - - - - - - -|      IP     |->\n | v4/6\
    \ |                                             |     v4/6    |\n |------|   \
    \   -------------       -------------      |------       |\n |      |     |  \\\
    \ Relay /  |     |  \\ Relay /  |     |      |      |\n |      |     |   \\  \
    \   /   |     |   \\     /   |     |      |      |\n |      |     |    \\   /\
    \    |     |    \\   /    |     |      |      |\n | PDCP |- - -| PDCP\\ /GTP_U|-\
    \ - -|GTP_U\\ /GTP_U|- - -|GTP_U |      |\n |      |     |      |      |     |\
    \      |      |     |      |      |\n |------|     |------|------|     |------|------|\
    \     |------|      |\n |      |     |      |  UDP |- - -|  UDP |  UDP |- - -|\
    \ UDP  |      |\n |      |     |      |------|     |------|------|     |------|\
    \      |\n |  RLC |- - -|  RLC |  IP  |- - -|  IP  |  IP  |- - -| IP   |     \
    \ |\n |      |     |      | v4/6 |     | v4/6 | v4/6 |     |v4/6  |      |\n |------|\
    \     |------|------|     |------|------|     |------|------|\n |  MAC |     |\
    \  MAC | AAL5 |- - -| AAL5 |  L2  |- - -| L2   |  L2  |\n |------|     |------|------|\
    \     |------|------|     |------|------|\n |  L1  |- - -|  L1  |  ATM |- - -|\
    \  ATM |  L1  |- - -| L1   |  L1  |\n  ------       -------------       -------------\
    \       -------------\n    UE             UTRAN                SGSN          \
    \      GGSN\n (handset)\n                       Figure 2:  GPRS Protocol Stacks\n\
    \     ------\n    |      |\n    | App. |- - - - - - - - - - - - - - - - - - -\
    \ - - - (to app peer)\n    |      |\n    |------|\n    |      |\n    |  IP  |-\
    \ - - - - - - - - - - - - - - - - - - - - - (to GGSN)\n    | v4/6 |\n    |   \
    \   |     |             |\n    |------|     |-------------|\n    |      |    \
    \ |  \\ Relay /  |\n    |      |     |   \\     /   |\n    |      |     |    \\\
    \   /    |\n    |      |     |     \\ / PDCP|- - - (to UTRAN)\n    |      |  \
    \   |      |      |\n    |  PPP |- - -|  PPP |------|\n    |      |     |    \
    \  |  RLC |- - - (to UTRAN)\n    |      |     |      |------|\n    |      |  \
    \   |      |  MAC |\n    |------|     |------|------|\n    |  L1a |- - -|  L1a\
    \ |  L1b |- - - (to UTRAN)\n     ------       -------------\n       TE       \
    \       MT\n    (laptop)        (handset)\n                 Figure 3:  Laptop\
    \ Attached to 3GPP Handset\n   The GPRS core network elements, shown in Figures\
    \ 1 and 2, are the\n   User Equipment (UE), Serving GPRS Support Node (SGSN),\
    \ and Gateway\n   GPRS Support Node (GGSN).  The UTRAN comprises Radio Access\
    \ Network\n   Controllers (RNC) and the UTRAN base stations.\n   GGSN:  A specialized\
    \ router that functions as the gateway between the\n          GPRS network and\
    \ the external networks, e.g., Internet.  It\n          also gathers charging\
    \ information about the connections.  In\n          many ways, the GGSN is similar\
    \ to a Network Access Server\n          (NAS).\n   SGSN:  The SGSN's main functions\
    \ include authentication,\n          authorization, mobility management, and collection\
    \ of billing\n          information.  The SGSN is connected to the SS7 network\
    \ and\n          through that, to the Home Location Register (HLR), so that it\n\
    \          can perform user profile handling, authentication, and\n          authorization.\n\
    \   GTP-U: A simple tunnelling protocol running over UDP/IP and used to\n    \
    \      route packets between RNC, SGSN and GGSN within the same, or\n        \
    \  between different, UMTS backbone(s).  A GTP-U tunnel is\n          identified\
    \ at each end by a Tunnel Endpoint Identifier (TEID).\n   Only the most significant\
    \ elements of the GPRS system are discussed\n   in this document.  More information\
    \ about the GPRS system can be\n   found in [OLD-TS23060].\n"
- title: 1.5.2   The PDP Context
  contents:
  - "1.5.2   The PDP Context\n   The most important 3GPP concept in this context is\
    \ a PDP Context.  A\n   PDP Context is a connection between the UE and the GGSN,\
    \ over which\n   the packets are transferred.  There are two kinds of PDP Contexts\
    \ --\n   primary, and secondary.\n   The primary PDP Context initially defines\
    \ the link to the GGSN.  For\n   instance, an IP address is assigned to each primary\
    \ PDP Context.  In\n   addition, one or more secondary PDP Contexts can be added\
    \ to a\n   primary PDP Context, sharing the same IP address.  These secondary\n\
    \   PDP Contexts can have different Quality of Service characteristics\n   than\
    \ the primary PDP Context.\n   Together, a primary PDP Context and zero or more\
    \ secondary PDP\n   Contexts define, in IETF terms, a link.  GPRS links are point-to-\n\
    \   point.  Once activated, all PDP contexts have equal status, meaning\n   that\
    \ a primary PDP context can be deleted while keeping the link\n   between the\
    \ UE and the GGSN, as long as there are other (secondary)\n   PDP contexts active\
    \ for the same IP address.\n   There are currently three PDP Types supported in\
    \ GPRS -- IPv4, IPv6,\n   and PPP.  This document will only discuss the IPv6 PDP\
    \ Type.\n   There are three basic actions that can be performed on a PDP Context:\n\
    \   PDP Context Activation, Modification, and Deactivation.  These\n   actions\
    \ are described in the following.\n   Activate PDP Context\n         Opens a new\
    \ PDP Context to a GGSN.  If a new primary PDP\n         Context is activated,\
    \ there is a new link created between a UE\n         and a GGSN.  A UE can open\
    \ multiple primary PDP Contexts to one\n         or more GGSNs.\n   Modify PDP\
    \ Context\n         Changes the characteristics of a PDP Context, for example\
    \ QoS\n         attributes.\n   Deactivate PDP Context\n         Deactivates a\
    \ PDP Context.  If a primary PDP Context and all\n         secondary PDP contexts\
    \ associated with it are deactivated, a\n         link between the UE and the\
    \ GGSN is removed.\n   The APN is a name which is logically linked to a GGSN.\
    \  The APN may\n   identify a service or an external network.  The syntax of the\
    \ APN\n   corresponds to a fully qualified domain name.  At PDP context\n   activation,\
    \ the SGSN performs a DNS query to find out the GGSN(s)\n   serving the APN requested\
    \ by the terminal.  The DNS response contains\n   a list of GGSN addresses from\
    \ which the SGSN selects one (in a\n   round-robin fashion).\n               \
    \  ---------                           --------\n                |         | \
    \                        |  GGSN  |\n                |         |           LINK\
    \ 1        |        |\n                |      -======== PDP Context A ========-\
    \   - - -> ISP X\n                |         |                         |      \
    \  |\n                |         |                         |        |\n       \
    \         |         |                         |        |\n                |  \
    \     /======= PDP Context B =======\\      |\n                |      -  |   \
    \        LINK 2        |  -   - - -> ISP Y\n                |       \\=======\
    \ PDP Context C =======/      |\n                |         |                 \
    \        |        |\n                |   MT    |                          --------\n\
    \                |(handset)|\n                |         |                    \
    \      --------\n  --------      |         |                         |  GGSN \
    \ |\n |        |     |         |           LINK 3        |        |\n |      \
    \  |     |      -======== PDP Context D ========-     |\n |   TE   |     |   \
    \      |                         |        |\n |(laptop)|     |         |     \
    \                    |      - - -> ISP Z\n |        |     |         |        \
    \   LINK 4        |        |\n |     -====PPP====-----======== PDP Context E ========-\
    \     |\n |        |     |         |                         |        |\n |  \
    \      |     |         |                         |        |\n  --------      \
    \ ---------                           --------\n           Figure 3:  Correspondence\
    \ of PDP Contexts to IPv6 Links\n"
- title: 1.5.3   IPv6 Address Autoconfiguration in GPRS
  contents:
  - "1.5.3   IPv6 Address Autoconfiguration in GPRS\n   GPRS supports static and dynamic\
    \ address allocation.  Two types of\n   dynamic address allocation are supported\
    \ -- stateless, and stateful.\n   Stateful address configuration uses an external\
    \ protocol to connect\n   to a server that gives the IP address, e.g., DHCP.\n\
    \   The stateless IPv6 autoconfiguration works differently in GPRS than\n   in\
    \ Ethernet networks.  GPRS nodes have no unique identifier, whereas\n   Ethernet\
    \ nodes can create an identifier from their EUI-48 address.\n   Because GPRS networks\
    \ are similar to dialup networks, the stateless\n   address autoconfiguration\
    \ in GPRS was based on PPPv6 [PPPV6].\n   3GPP address autoconfiguration has the\
    \ following steps:\n      1. The Activate PDP Context message is sent to the SGSN\
    \ (PDP\n         Type=IPv6, PDP Address = 0, etc.).\n      2. The SGSN sends a\
    \ Create PDP Context message to the GGSN with\n         the above parameters.\n\
    \      3. GGSN chooses an interface identifier for the PDP Context and\n     \
    \    creates the link-local address.  It answers the SGSN with a\n         Create\
    \ PDP Context response (PDP Address = link-local address).\n      4. The SGSN\
    \ sends an Activate PDP Context accept message to the UE\n         (PDP Address\
    \ = link-local address).\n      5. The UE keeps the link-local address, and extracts\
    \ the interface\n         identifier for later use.  The UE may send a Router\n\
    \         Solicitation message to the GGSN (first hop router).\n      6. After\
    \ the PDP Context Activation, the GGSN sends a Router\n         Advertisement\
    \ to the UE.\n      7. The UE should be configured not to send a Neighbor Solicitation\n\
    \         message.  However, if one is sent, the GGSN will silently\n        \
    \ discard it.\n      8. The GGSN updates the SGSN with the whole IPv6 address.\n\
    \   Each connected handset or laptop will create a primary PDP context\n   for\
    \ communication on the Internet.  A handset may create many primary\n   and/or\
    \ secondary PDP contexts throughout the life of its connection\n   with a GGSN.\n\
    \   Within 3GPP, the GGSN assigns a single 64-bit identifier to each\n   primary\
    \ PDP context.  The GGSN also advertises a single /64 prefix to\n   the handset,\
    \ and these two items are assembled into a single IPv6\n   address.  Later, the\
    \ GGSN modifies the PDP context entry in the SGSN\n   to include the whole IPv6\
    \ address, so that the SGSN can know the\n   single address of each 3GPP node\
    \ (e.g., for billing purposes).  This\n   address is also used in the GGSN to\
    \ identify the PDP context\n   associated with each packet.  It is assumed that\
    \ 3GPP nodes will not\n   generate any addresses, except for the single identifier/prefix\n\
    \   combination assigned by the GGSN.  DAD is not performed, as the GGSN\n   will\
    \ not assign the same address to multiple nodes.\n"
- title: 2  Recommendations to the 3GPP
  contents:
  - "2  Recommendations to the 3GPP\n   In the spirit of productive cooperation, the\
    \ IPv6 Working Group\n   recommends that the 3GPP consider three changes regarding\
    \ the use of\n   IPv6 within GPRS.  Specifically, we recommend that the 3GPP:\n\
    \      1. Specify that multiple prefixes may be assigned to each primary\n   \
    \      PDP context,\n      2. Require that a given prefix must not be assigned\
    \ to more than\n         one primary PDP context, and\n      3. Allow 3GPP nodes\
    \ to use multiple identifiers within those\n         prefixes, including randomly\
    \ generated identifiers.\n   Making these changes would provide several advantages\
    \ for 3GPP\n   implementers and users:\n      Laptops that connect to 3GPP handsets\
    \ will work without any\n      software changes.  Their implementation of the\
    \ standard IPv6 over\n      PPP, address assignment, and autoconfiguration mechanisms\
    \ will\n      work without any modification.  This will eliminate the need for\n\
    \      vendors and operators to build and test special 3GPP drivers and\n    \
    \  related software.  As currently specified, the 3GPP standards will\n      be\
    \ incompatible with laptop implementations that generate their\n      own identifiers\
    \ for privacy or other purposes.\n      IPv6 software implementations could be\
    \ used in 3GPP handsets\n      without any modifications to the IPv6 protocol\
    \ mechanisms.  This\n      will make it easier to build and test 3GPP handsets.\n\
    \      Applications in 3GPP handsets will be able to take advantage of\n     \
    \ different types of IPv6 addresses (e.g., static addresses,\n      temporary\
    \ addresses for privacy, site-scoped addresses for site\n      only communication,\
    \ etc.)\n      The GPRS system will be better positioned to take advantage of\
    \ new\n      IPv6 features that are built around the current addressing\n    \
    \  architecture.\n"
- title: 2.1 Limitations of 3GPP Address Assignment
  contents:
  - "2.1 Limitations of 3GPP Address Assignment\n   The current 3GPP address assignment\
    \ mechanism has the following\n   limitations:\n      The GGSN only advertises\
    \ a single /64 prefix, rather than a set of\n      prefixes.  This will prevent\
    \ the participation of 3GPP nodes\n      (e.g., handsets or 3GPP-attached laptops)\
    \ in IPv6 site\n      renumbering, or in other mechanisms that expect IPv6 hosts\
    \ to\n      create addresses based on multiple advertised prefixes.\n      A 3GPP\
    \ node is assigned a single identifier and is not allowed to\n      generate additional\
    \ identifiers.  This will prevent the use of\n      privacy addresses by 3GPP\
    \ nodes.  This also makes 3GPP mechanisms\n      not fully compliant with the\
    \ expected behavior of IPv6 nodes,\n      which will result in incompatibility\
    \ with popular laptop IPv6\n      stacks.  For example, a laptop that uses privacy\
    \ addresses for web\n      browser connections could not currently establish a\
    \ web browser\n      connection over a 3GPP link.\n   These limitations could\
    \ be avoided by enabling the standard IPv6\n   address allocation mechanisms in\
    \ 3GPP nodes.  The GGSN could\n   advertise one or more prefixes for the local\
    \ link in standard IPv6\n   Router Advertisements, and IPv6 addresses could be\
    \ assembled, as\n   needed, by the IPv6 stack on the handset or laptop.  An interface\n\
    \   identifier could still be assigned by the GGSN, as is currently\n   specified\
    \ in the 3GPP standards.  However, the handset or laptop\n   could generate additional\
    \ identifiers, as needed for privacy or other\n   reasons.\n"
- title: 2.2 Advertising Multiple Prefixes
  contents:
  - "2.2 Advertising Multiple Prefixes\n   For compliance with current and future\
    \ IPv6 standards, the IPv6 WG\n   recommends that the 3GPP allow multiple prefixes\
    \ to be advertised for\n   each primary PDP context.  This would have several\
    \ advantages,\n   including:\n      3GPP nodes could participate in site renumbering\
    \ and future IPv6\n      mechanisms that rely on the use of multiple global prefixes\
    \ on a\n      single link.\n      Site-local prefixes could be advertised on 3GPP\
    \ links, if desired,\n      allowing for site-constrained communication that could\
    \ survive\n      changes to global prefix information (e.g., site renumbering).\n"
- title: 2.3 Assigning a Prefix to Only One Primary PDP Context
  contents:
  - "2.3 Assigning a Prefix to Only One Primary PDP Context\n   The IPv6 WG recommends\
    \ that the 3GPP treat a primary PDP context,\n   along with its secondary PDP\
    \ contexts, as a single IPv6 link, and\n   that the GGSN view each primary PDP\
    \ context as a single subnet.\n   Accordingly, a given global (or site-local)\
    \ prefix should not be\n   assigned to more than one PDP context.\n   Because\
    \ multiple IPv6 hosts may attach through a 3GPP handset, the\n   IPv6 WG recommends\
    \ that one or more /64 prefixes should be assigned\n   to each primary PDP context.\
    \  This will allow sufficient address\n   space for a 3GPP-attached node to allocate\
    \ privacy addresses and/or\n   route to a multi-link subnet [MULTLINK], and will\
    \ discourage the use\n   of NAT within 3GPP-attached devices.\n"
- title: 2.3.1   Is a /64 per PDP Context Too Much?
  contents:
  - "2.3.1   Is a /64 per PDP Context Too Much?\n   If an operator assigns a /64 per\
    \ PDP context, can we be assured that\n   there is enough address space for millions\
    \ of mobile devices?  This\n   question can be answered in the positive using\
    \ the Host Density (HD)\n   Ratio for address assignment efficiency [HD].  This\
    \ is a measure of\n   the number of addresses that can practically and easily\
    \ be assigned\n   to hosts, taking into consideration the inefficiencies in usage\n\
    \   resulting from the various address assignment processes.  The HD\n   ratio\
    \ was empirically derived from actual telephone number and data\n   network address\
    \ assignment cases.\n   We can calculate the number of easily assignable /64's\
    \ making the\n   following assumptions:\n      An HD ratio of 0.8 (representing\
    \ the efficiency that can be\n      achieved with no particular difficulty).\n\
    \      Only addresses with the 3-bit prefix 001 (the Aggregatable Global\n   \
    \   Unicast Addresses defined by RFC 2373) are used, resulting in 61\n      bits\
    \ of assignable address space.\n   Using these assumptions, a total of 490 trillion\
    \ (490x10^12) /64\n   prefixes can be assigned.  This translates into around 80,000\
    \ PDP\n   Contexts per person on the earth today.  Even assuming that a\n   majority\
    \ of these IPv6 /64 prefixes will be used by non-3GPP\n   networks, there is still\
    \ clearly a sufficient number of /64 prefixes.\n   Given this, it can be safely\
    \ concluded that the IPv6 address space\n   will not be exhausted if /64 prefixes\
    \ are allocated to primary PDP\n   contexts.\n   For more information regarding\
    \ policies for IPv6 address assignment,\n   refer to the IAB/IESG recommendations\
    \ regarding address assignment\n   [IABAA], and the APNIC, ARIN and RIPE address\
    \ allocation policy\n   [AAPOL].\n"
- title: 2.3.2   Prefix Information in the SGSN
  contents:
  - "2.3.2   Prefix Information in the SGSN\n   Currently, the 3GPP standards allow\
    \ only one prefix and one\n   identifier for each PDP context.  So, the GGSN can\
    \ send a single IPv6\n   address to the SGSN, to be used for billing purposes,\
    \ etc.\n   Instead of using the full IPv6 address to identify a PDP context, the\n\
    \   IPv6 WG recommends that the SGSN be informed of each prefix that is\n   currently\
    \ assigned to a PDP context.  By assigning a prefix to only\n   one primary PDP\
    \ context, the SGSN can associate a prefix list with\n   each PDP context.\n"
- title: 2.4 Multiple Identifiers per PDP Context
  contents:
  - "2.4 Multiple Identifiers per PDP Context\n   The IPv6 WG also recommends that\
    \ the 3GPP standards be modified to\n   allow multiple identifiers, including\
    \ randomly generated identifiers,\n   to be used within each assigned prefix.\
    \  This would allow 3GPP nodes\n   to generate and use privacy addresses, and\
    \ would be compatible with\n   future IPv6 standards that may depend on the ability\
    \ of IPv6 nodes to\n   generate new interface identifiers for communication.\n\
    \   This is a vital change, necessary to allow standards-compliant IPv6\n   nodes\
    \ to connect to the Internet through 3GPP handsets, without\n   modification.\
    \  It is expected that most IPv6 nodes, including the\n   most popular laptop\
    \ stacks, will generate privacy addresses.  The\n   current 3GPP specifications\
    \ will not be compatible with those\n   implementations.\n"
- title: 3  Additional IPv6 Work Items
  contents:
  - "3  Additional IPv6 Work Items\n   During our work on this document, we have discovered\
    \ several areas\n   that could benefit from further informational or standards-track\
    \ work\n   within the IPv6 Working Group.\n   The IPv6 WG should work to define\
    \ a point-to-point architecture and\n   specify how the standard IPv6 address\
    \ assignment mechanisms are\n   applicable to IPv6 over point-to-point links.\
    \  We should also review\n   and clarify the IPv6 over PPP specification [PPP]\
    \ to match the\n   current IPv6 addressing architecture [ADDRARCH].\n   The IPv6\
    \ WG should consider publishing an \"IPv6 over PDP Contexts\"\n   (or similar)\
    \ document.  This document would be useful for developers\n   writing drivers\
    \ for IPv6 stacks to work over 3GPP PDP Contexts.\n   The IPv6 working group should\
    \ undertake an effort to define the\n   minimal requirements for all IPv6 nodes.\n"
- title: 4  Security Considerations
  contents:
  - "4  Security Considerations\n   This document contains recommendations on the\
    \ use of the IPv6\n   protocol in 3GPP standards.  It does not specify a protocol,\
    \ and it\n   introduces no new security considerations.\n"
- title: 'Appendix A:  Analysis of Findings'
  contents:
  - "Appendix A:  Analysis of Findings\n   This section includes some analysis that\
    \ may be useful to\n   understanding why the IPv6 working group is making the\
    \ above\n   recommendations.  It also includes some other options that were\n\
    \   explored, and the reasons why those options were less suitable than\n   the\
    \ recommendations outlined above.\n"
- title: A.1 Address Assignment Solutions
  contents:
  - "A.1 Address Assignment Solutions\n   In order to allow for the configuration\
    \ and use of multiple IPv6\n   addresses per primary PDP Context having different\
    \ interface\n   identifiers, some modifications to the current 3GPP specifications\n\
    \   would be required.\n   The solutions to achieve this were evaluated against\
    \ the following\n   factors:\n      -  Scarcity and high cost of wireless spectrum\n\
    \      -  Complexity of implementation and state maintenance\n      -  Stability\
    \ of the relevant IETF standards\n      -  Impact on current 3GPP standards\n\
    \   Two solutions to allow autoconfiguration of multiple addresses on the\n  \
    \ same primary PDP Context were considered:\n      1. Assign one or more entire\
    \ prefixes (/64s) to a PDP Context upon\n         PDP Context activation and allow\
    \ the autoconfiguration of\n         multiple addresses.\n         a) The assignment\
    \ may be performed by having the GGSN advertise\n            one or more /64 prefixes\
    \ to the mobile device.\n         b) The assignment may be performed by building\
    \ \"prefix\n            delegation\" functionality into the PDP Context messages\
    \ or\n            by using layer 3 mechanisms such as [PREFDEL].  In this way,\n\
    \            the prefix is not assigned to the link between the GGSN and\n   \
    \         the mobile device (as in 1a), but it is assigned to the\n          \
    \  mobile device itself.  Note that [PREFDEL] cannot be\n            considered\
    \ stable and has not, at this stage, been adopted\n            by the IPv6 WG\
    \ as a WG document.\n      2. Share the same prefix between multiple PDP Contexts\
    \ connected\n         to the same GGSN (and APN).  Given that mobile devices may\n\
    \         generate multiple addresses using more than one interface\n        \
    \ identifier, this would require DAD for the newly generated\n         addresses\
    \ over the air interface, and a proxy DAD, function\n         which would increase\
    \ the complexity and the amount of state to\n         be kept in the GGSN.  Also,\
    \ the GGSN would need to determine\n         when the temporary addresses are\
    \ no longer in use, which would\n         be difficult.  One possible solution\
    \ could be using periodic\n         unicast neighbor solicitations for the temporary\
    \ addresses\n         [IPV6ND].\n   Considering all the factors when evaluating\
    \ the solutions, the\n   recommendation is to use Solution 1a.  This solution\
    \ requires the\n   least modification to the current 3GPP standards and maintains\
    \ all\n   the advantages of the other solutions.\n   Effectively, this would mean\
    \ that each APN in a GGSN would have a\n   certain number of /64 prefixes that\
    \ can be handed out at PDP context\n   Activation, through Router Advertisements.\
    \  Therefore, instead of\n   using the full IPv6 address to identify a primary\
    \ PDP context, the\n   IPv6 WG recommends that the GGSN use the entire prefix\
    \ (together with\n   other 3GPP specific information) and that the SGSN be informed\
    \ of the\n   prefixes that are assigned to a PDP context.  By assigning a given\n\
    \   prefix to only one primary PDP context, the GGSN and SGSN can\n   associate\
    \ a prefix list with each PDP context, as needed.\n   Note that the recommended\
    \ solution does not imply or assume that the\n   mobile device is a router.  The\
    \ MT is expected to use the /64 for\n   itself and may also use this prefix for\
    \ devices attached to it.\n   However, this is not necessary if each device behind\
    \ the MT is\n   connected to a separate primary PDP Context and therefore can\
    \ use a\n   /64, which is not shared with other devices.  The MT is also expected\n\
    \   to handle DAD locally for devices attached to it (e.g., laptops)\n   without\
    \ forwarding Neighbor Solicitations over the air to the GGSN.\n"
- title: References
  contents:
  - "References\n   [OLD-TS23060] TS 23.060, \"General Packet Radio Service (GPRS);\n\
    \                 Service description; Stage 2\", V4.1.0\n   [NEW-TS23060] TS\
    \ 23.060 version 3.11.0 (release 99), 4.4.0 (release\n                 4) and\
    \ 5.1.0 (release 5).\n   [3GPP-URL]    http://www.3gpp.org\n   [IETF-URL]    http://www.ietf.org\n\
    \   [RFC2026]     Bradner, S., \"The Internet Standards Process --\n         \
    \        Revision 3\", BCP 9, RFC 2026, October 1996\n   [KEYWORD]     Bradner,\
    \ S., \"Key words for use in RFCs to Indicate\n                 Requirement Levels\"\
    , BCP 14, RFC 2119, March 1999.\n   [TR21905]     3GPP TR 21.905, \"Vocabulary\
    \ for 3GPP Specifications\",\n                 V5.0.0\n   [IPV6]        Deering,\
    \ S. and R. Hinden, \"Internet Protocol, Version\n                 6 (IPv6) Specification\"\
    , RFC 2460, December 1998.\n   [NAT-PT]      Tsirtsis, G. and P. Shrisuresh, \"\
    Network Address\n                 Translation - Protocol Translation (NAT-PT)\"\
    , RFC 2766,\n                 February 2000.\n   [PPP]         Simpson, W., \"\
    The Point-to-Point Protocol (PPP)\", STD\n                 51, RFC 1661, July\
    \ 1994.\n   [SIIT]        Nordmark, N., \"Stateless IP/ICMP Translation\n    \
    \             Algorithm\", RFC 2765, February 2000.\n   [ADDRARCH]    Hinden,\
    \ R. and S. Deering, \"IP Version 6 Addressing\n                 Architecture\"\
    , RFC 2373, July 1998.\n   [IPV6ND]      Narten, T., Nordmark, E. and W. Simpson,\
    \ \"Neighbor\n                 Discovery for IP Version 6 (IPv6)\", RFC 2461,\
    \ December\n                 1998.\n   [AUTOCONF]    Thomson, S. and T. Narten,\
    \ \"IPv6 Stateless Address\n                 Autoconfiguration\", RFC 2462, December\
    \ 1998\n   [PRIVADDR]    Narten, T. and R. Draves, \"Privacy Extensions for\n\
    \                 Stateless Address Autoconfiguration in IPv6\", RFC 3041,\n \
    \                January 2001.\n   [IPV6ETH]     Crawford, M., \"Transmission\
    \ of IPv6 Packets over\n                 Ethernet Networks\", RFC 2464, December\
    \ 1998.\n   [PPPv6]       Haskin, D. and E. Allen, \"IP Version 6 over PPP\",\
    \ RFC\n                 2472, December 1998.\n   [MULTLINK]    C. Huitema, D.\
    \ Thaler, \"Multi-link Subnet Support in\n                 IPv6\", Work in Progress.\n\
    \   [SITEREN]     C. Huitema, \"IPv6 Site Renumbering\", Work in Progress.\n \
    \  [HD]          Durand, A. and C. Huitema, \"The Host-Density Ratio for\n   \
    \              Address Assignment Efficiency: An update on the H\n           \
    \      ratio\", RFC 3194, November 2001.\n   [IABAA]       IAB, IESG, \"IAB/IESG\
    \ Recommendations on IPv6 Address\n                 Allocations to Sites\", RFC\
    \ 3177, September 2001.\n   [AAPOL]       APNIC, ARIN, RIPE-NCC, \"IPv6 Address\
    \ Allocation and\n                 Assignment Global Policy\", Work in Progress.\n\
    \   [SCOPARCH]    S. Deering, et. al., \"IPv6 Scoped Address\n               \
    \  Architecture\", Work in Progress.\n   [CELLREQ]     J. Arkko, et. al., \"Minimum\
    \ IPv6 Functionality for a\n                 Cellular Host\", Work in Progress.\n\
    \   [PREFDEL]     J. Martin, B. Haberman, \"Automatic Prefix Delegation\n    \
    \             Protocol for Internet Protocol Version 6 (IPv6)\", Work\n      \
    \           in Progress.\n"
- title: Authors and Acknowledgements
  contents:
  - "Authors and Acknowledgements\n   This document was written by the IPv6 3GPP design\
    \ team:\n   Steve Deering, Cisco Systems\n   EMail: deering@cisco.com\n   Karim\
    \ El-Malki, Ericsson Radio Systems\n   EMail: Karim.El-Malki@era.ericsson.se\n\
    \   Paul Francis, Tahoe Networks\n   EMail: francis@tahoenetworks.com\n   Bob\
    \ Hinden, Nokia\n   EMail: hinden@iprg.nokia.com\n   Christian Huitema, Microsoft\n\
    \   EMail: huitema@windows.microsoft.com\n   Niall Richard Murphy, Hutchison 3G\n\
    \   EMail: niallm@enigma.ie\n   Markku Savela, Technical Research Centre of Finland\n\
    \   Email: Markku.Savela@vtt.fi\n   Jonne Soininen, Nokia\n   EMail: Jonne.Soininen@nokia.com\n\
    \   Margaret Wasserman, Wind River\n   EMail: mrw@windriver.com\n   Information\
    \ was incorporated from a presentation co-authored by:\n         Juan-Antonio\
    \ Ibanez, Ericsson Eurolab\n"
- title: Editor's Address
  contents:
  - "Editor's Address\n   Comments or questions regarding this document should be\
    \ sent to:\n   Margaret Wasserman\n   Wind River\n   10 Tara Blvd., Suite 330\n\
    \   Nashua, NH  03062  USA\n   Phone:  (603) 897-2067\n   EMail:  mrw@windriver.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2002).  All\
    \ Rights Reserved.\n   This document and translations of it may be copied and\
    \ furnished to\n   others, and derivative works that comment on or otherwise explain\
    \ it\n   or assist in its implementation may be prepared, copied, published\n\
    \   and distributed, in whole or in part, without restriction of any\n   kind,\
    \ provided that the above copyright notice and this paragraph are\n   included\
    \ on all such copies and derivative works.  However, this\n   document itself\
    \ may not be modified in any way, such as by removing\n   the copyright notice\
    \ or references to the Internet Society or other\n   Internet organizations, except\
    \ as needed for the purpose of\n   developing Internet standards in which case\
    \ the procedures for\n   copyrights defined in the Internet Standards process\
    \ must be\n   followed, or as required to translate it into languages other than\n\
    \   English.\n   The limited permissions granted above are perpetual and will\
    \ not be\n   revoked by the Internet Society or its successors or assigns.\n \
    \  This document and the information contained herein is provided on an\n   \"\
    AS IS\" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING\n   TASK FORCE\
    \ DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING\n   BUT NOT LIMITED\
    \ TO ANY WARRANTY THAT THE USE OF THE INFORMATION\n   HEREIN WILL NOT INFRINGE\
    \ ANY RIGHTS OR ANY IMPLIED WARRANTIES OF\n   MERCHANTABILITY OR FITNESS FOR A\
    \ PARTICULAR PURPOSE.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
