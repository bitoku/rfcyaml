- title: __initial_text__
  contents:
  - '                  Requirements for Multicast Protocols

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard.  Distribution of this memo is\n\
    \   unlimited.\n"
- title: Summary
  contents:
  - "Summary\n   Multicast protocols have been developed over the past several years\n\
    \   to address issues of group communication.  Experience has\n   demonstrated\
    \ that current protocols do not address all of the\n   requirements of multicast\
    \ applications.  This memo discusses some of\n   these unresolved issues, and\
    \ provides a high-level design for a new\n   multicast transport protocol, group\
    \ address and membership authority,\n   and modifications to existing routing\
    \ protocols.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.    Introduction  . . . . . . . . . . . . . . . . . .\
    \ . . . . .   2\n   2.    The Image Communication Problem   . . . . . . . . .\
    \ . . . .   2\n   2.1   Scope   . . . . . . . . . . . . . . . . . . . . . . .\
    \ . . .   2\n   2.2   Requirements  . . . . . . . . . . . . . . . . . . . . .\
    \ . .   3\n   3.    Review of Existing Multicast Protocols  . . . . . . . . .\
    \ .   4\n   3.1   IP/Multicast  . . . . . . . . . . . . . . . . . . . . . . .\
    \   4\n   3.2   XTP   . . . . . . . . . . . . . . . . . . . . . . . . . . .  \
    \ 5\n   3.3   ST-II   . . . . . . . . . . . . . . . . . . . . . . . . . .   6\n\
    \   3.4   MTP   . . . . . . . . . . . . . . . . . . . . . . . . . . .   7\n  \
    \ 3.5   Summary   . . . . . . . . . . . . . . . . . . . . . . . . .   8\n   4.\
    \    Reliable Adaptive Multicast Service   . . . . . . . . . . .   9\n   4.1 \
    \  The Multicast Group Authority   . . . . . . . . . . . . . .   9\n   4.1.1 Address\
    \ Management  . . . . . . . . . . . . . . . . . . . .   9\n   4.1.2 Service Registration,\
    \ Requests, Release, and Group\n         Membership Maintenance  . . . . . . .\
    \ . . . . . . . . . . .  10\n   4.2   The Reliable Adaptive Multicast Protocol\
    \ (RAMP)   . . . . .  11\n   4.2.1 Quality of Service Levels   . . . . . . . .\
    \ . . . . . . . .  12\n   4.2.2 Error Recovery  . . . . . . . . . . . . . . .\
    \ . . . . . . .  12\n   4.2.3 Flow Control  . . . . . . . . . . . . . . . . .\
    \ . . . . . .  13\n   4.3   Routing Support   . . . . . . . . . . . . . . . .\
    \ . . . . .  14\n   4.3.1 Path Set-up   . . . . . . . . . . . . . . . . . . .\
    \ . . . .  14\n   4.3.2 Path Tear-down  . . . . . . . . . . . . . . . . . . .\
    \ . . .  15\n   4.3.3 Multicast Routing Based on Quality of Service   . . . .\
    \ . .  15\n   4.3.4 Quality of Service Based Packet Loss  . . . . . . . . . .\
    \ .  15\n   5.    Interactions Among the Components: An Example   . . . . . .\
    \  15\n   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  18\n\
    \   References  . . . . . . . . . . . . . . . . . . . . . . . . . . .  18\n  \
    \ Security Considerations   . . . . . . . . . . . . . . . . . . . .  19\n   Authors'\
    \ Addresses  . . . . . . . . . . . . . . . . . . . . . . .  19\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Multicast protocols have been developed to support group\n\
    \   communications.  These protocols use a one-to-many paradigm for\n   transmission,\
    \ typically using class D Internet Protocol (IP)\n   addresses to specify specific\
    \ multicast groups.  While designing\n   network services for reliable transmission\
    \ of very large imagery as\n   part of the DARPA-sponsored ImNet program, we have\
    \ reviewed existing\n   multicast protocols and have determined that none meet\
    \ all of the\n   requirements of image communications [3].  This RFC reviews the\n\
    \   current state of multicast protocols, highlights the missing\n   features,\
    \ and motivates the design and development of an enhanced\n   multicast protocol.\n\
    \   First, the requirements for network services and underlying protocols\n  \
    \ related to image communications are presented.  Existing protocols\n   are then\
    \ reviewed, and an analysis of each protocol against the\n   requirements is presented.\
    \  The analyses identify the need for a new\n   multicast protocol.  Finally,\
    \ the features of an ideal reliable\n   multicast protocol that adapts to network\
    \ congestion in the\n   transmission of large data volumes are presented.  Additional\
    \ network\n   components needed to fully support the new protocol, including a\n\
    \   Multicast Group Authority and modifications to existing routing\n   protocols,\
    \ are also introduced.\n"
- title: 2.  The Image Communications Problem
  contents:
  - '2.  The Image Communications Problem

    '
- title: 2.1 Scope
  contents:
  - "2.1 Scope\n   Image management and communications systems are evolving from film-\n\
    \   based systems toward an all-digital environment where imagery is\n   acquired,\
    \ transmitted, analyzed, and stored using digital computer\n   and communications\
    \ technologies.  The throughput required for\n   communicating large numbers of\
    \ very large images is extremely large,\n   consisting of thousands of terabytes\
    \ of imagery per day.  Temporal\n   requirements for capture and dissemination\
    \ of single images are\n   stringent, ranging from seconds to at most several\
    \ minutes.  Imagery\n   will be viewed by hundreds of geographically distributed\
    \ users who\n   will require on-demand, interactive access to the data.\n   Traditional\
    \ imaging applications involve images on the order of 512\n   by 512 pixels. \
    \ In contrast, a single image used for remote sensing\n   can have tens of thousands\
    \ of pixels on a side.  Multiplying the data\n   volume associated with remotely\
    \ sensed images by even a small number\n   of users clearly motivates moving beyond\
    \ the current suite of\n   reliable protocols.\n   Basic image communication applications\
    \ involve distribution of\n   individual images to multiple users for both individual\
    \ and\n   collaborative analyses, and network efficiency requires the use of\n\
    \   multicast protocols.  Areas where multicasting offers significant\n   advantages\
    \ include real-time image acquisition and dissemination,\n   distribution of annotated\
    \ image-based reports, and image\n   conferencing.  Images are viewed on a heterogeneous\
    \ set of\n   workstations with differing processing and display capabilities,\n\
    \   traveling over a heterogeneous network with bandwidths varying by up\n   to\
    \ six orders of magnitude between the initial down link and the\n   slowest end\
    \ user.\n"
- title: 2.2 Requirements
  contents:
  - "2.2 Requirements\n   Multicast protocols used for image communications must address\n\
    \   several requirements.  Setting up a multicast group first requires\n   assigning\
    \ a multicast group address.  All multicast traffic is then\n   delivered to this\
    \ address, which implies that all members of the\n   group must be listening for\
    \ traffic with this address.\n   Within an image communications architecture such\
    \ as that used for the\n   ImNet program, diversity and adaptability can be accommodated\
    \ by\n   trading quality of service (i.e., image quality) with speed of\n   transmission.\
    \  Multicast support for quality-speed trades can be\n   realized either through\
    \ the use of different multicast groups, where\n   each group receives a different\
    \ image quality, or through the use of\n   a single hierarchical stream with routers\
    \ (or users) extracting\n   relevant portions.\n   Due to the current inability\
    \ of routers to support selective\n   transmission of partial streams, a multiple\
    \ stream approach is being\n   used within ImNet.  Efficient operation using a\
    \ multiple stream\n   approach requires that users be able to switch streams very\
    \ quickly,\n   and that streams with no listeners not be disseminated.\n   Consequently,\
    \ rapid configuration of multicast groups and rapid\n   switching between multicast\
    \ groups switching is essential.\n   Inevitably, network congestion or buffer\
    \ overruns result in packet\n   loss. A full range of transport reliability is\
    \ required within an\n   image communications framework. For some applications\
    \ such as image\n   conferencing, packet loss does not present a problem as dropped\
    \ mouse\n   movements can be discarded with no meaningful degradation in utility.\n\
    \   However, for functions such as image archiving or detailed image\n   analysis,\
    \ transport must be completely reliable, where any dropped\n   packets must be\
    \ retransmitted by the sender.  Additionally, several\n   hierarchical image compression\
    \ methods can provide useful, albeit\n   degraded, imagery using a semi-reliable\
    \ service, where higher level\n   data is transmitted reliably and the lower level\
    \ data is transmitted\n   unreliably.\n   In support of reliable transport, image\
    \ communications services must\n   also support adaptation to network congestion\
    \ using flow control\n   mechanisms.  Flow control regulates the quantity of data\
    \ placed on\n   the network per unit time interval, thereby increasing network\n\
    \   efficiency by reducing the number of dropped packets and avoiding the\n  \
    \ need for large numbers of retransmissions.\n"
- title: 3.  Review of Existing Multicast Protocols
  contents:
  - "3.  Review of Existing Multicast Protocols\n   Several existing protocols provide\
    \ varying levels of support for\n   multicasting, including IP/Multicast [5],\
    \ the Xpress Transfer\n   Protocol (XTP) [11], and Experimental Internet Stream\
    \ Protocol\n   Version 2 (ST-II) [10].  While the Versatile Message Transaction\n\
    \   Protocol (VMTP) [4] also supports multicast, it has been designed to\n   support\
    \ the transfer of small packets, and so is not appropriate for\n   large image\
    \ communications.  Additionally, a specification exists for\n   the Multicast\
    \ Transport Protocol (MTP) [2].\n   The image communication requirements for a\
    \ multicast protocol include\n   multicast group address assignment, group set-up,\
    \ membership\n   maintenance (i.e., join, drop, and switch membership), group\
    \ tear-\n   down, error recovery, and flow control, as presented above.  The\n\
    \   remainder of this section discusses how well each of the existing\n   protocols\
    \ meets these requirements.\n"
- title: 3.1 IP/Multicast
  contents:
  - "3.1 IP/Multicast\n   IP/Multicast is an extension to the standard IP network-level\n\
    \   protocol that supports multicast traffic.  IP/Multicast has no\n   address\
    \ allocation mechanism, with addresses assigned either by an\n   outside authority\
    \ or by each application.  This has the potential for\n   address contention among\
    \ multiple applications, which would result in\n   the traffic from the different\
    \ groups becoming commingled.\n   There is no true set-up processing for IP/Multicast;\
    \ once an address\n   is determined, the sender simply transmits packets to that\
    \ address\n   with routers determining the path(s) taken by the data.  The receiver\n\
    \   side is only slightly more complex, as an application must issue an\n   add\
    \ membership request for IP to listen to traffic destined to the\n   desired address.\
    \  If this is the first member of a group, IP\n   multicasts the request to routers\
    \ on the local network using the\n   Internet Group Multicast Protocol (IGMP)\
    \ for inclusion in routing\n   tables.  Multicast packets are then routed like\
    \ all other IP packets,\n   with receivers accepting traffic addressed to joined\
    \ groups in\n   addition to the normal host address.\n   A major problem with\
    \ the IP/Multicast set-up approach is informing\n   hosts of multicast group addresses.\
    \  If addresses are dynamically\n   allocated, then a mechanism must be established\
    \ for informing\n   receivers which addresses have been assigned to which groups.\
    \  This\n   requires a minimum of one round trip time, with an address requested\n\
    \   from a server and then returned to the receiver.\n   Dropping membership in\
    \ a group involves issuing a request to the\n   local IP, which decrements the\
    \ count of members in the IP tables.\n   However, no special action is taken when\
    \ group membership goes to\n   zero.  Instead, a heartbeat mechanism is used in\
    \ which hosts are\n   periodically polled for active groups, and routers stop\
    \ forwarding\n   group traffic to a network only after several polls receive no\n\
    \   activity requests for that group to ensure that a membership report\n   is\
    \ not lost or corrupted in transit.  This causes the problem of\n   unneeded traffic\
    \ being transmitted, due to a long periodicity for the\n   heartbeat (minimum\
    \ of one minute between polls); consequently there\n   is no method for quickly\
    \ dropping a group over a given path, impeding\n   attempts to react to network\
    \ congestion in real-time.\n   Finally, there is no transport level protocol compatible\
    \ with\n   IP/Multicast that is both reliable and implements a flow control\n\
    \   mechanism.\n"
- title: 3.2 XTP
  contents:
  - "3.2 XTP\n   XTP is a combined network and transport level protocol that offers\n\
    \   significant support for multicast transfers.  As with IP/Multicast,\n   XTP\
    \ offers no inherent address management scheme, so that an outside\n   authority\
    \ is required.\n   XTP is also similar to IP/Multicast as there is no explicit\
    \ set-up\n   processing between the sender and the receivers prior to the\n  \
    \ establishment of group communications.  While there is implicit\n   processing\
    \ in key management, an external mechanism is required for\n   passing the multicast\
    \ group address to the receivers.  The receivers\n   must have established \"\
    filters\" for the address prior to transmission\n   in order to receive the data,\
    \ and suffers the same problems as\n   IP/Multicast.\n   In contrast to IP/Multicast,\
    \ XTP does require explicit handshaking\n   between the sender and receivers that\
    \ wish to join an existing group;\n   however, there is no parallel communication\
    \ for receivers dropping\n   out of groups, and the only mechanism for a sender\
    \ to know if there\n   are any receivers is the polling scheme used for error\
    \ control and\n   recovery.  This causes the same problems with sending traffic\
    \ to\n   groups without members discussed under IP/Multicast.\n   The XTP specification\
    \ does not address how routers distribute a\n   multicast stream among different\
    \ connected networks; however it does\n   include a discussion of the optional\
    \ bucket, damping, slotting, and\n   cloning algorithms to reduce duplicate multicast\
    \ traffic within a\n   local network.\n   The specification allows the user to\
    \ determine whether multicast\n   transfers are unreliable or semi-reliable, where\
    \ semi-reliable\n   transfers are defined to provide a \"high-probability of success\
    \ [9]\"\n   of delivery to all receivers.  Reliability cannot be guaranteed due\n\
    \   to the fact that XTP does not maintain the cardinality of the\n   receiver\
    \ set, and so cannot know that the data has been received by\n   all hosts.\n\
    \   XTP recovers from errors using a go-back-n approach (assuming that\n   the\
    \ bucket algorithm has been implemented) by retransmitting dropped\n   packets\
    \ to all members of the multicast group, as group members are\n   unknown.  This\
    \ has the potential of flooding the network if only a\n   single receiver dropped\
    \ a packet. If all dropped packets belong to a\n   single network on an internet,\
    \ with traffic generated over the entire\n   connected network.\n"
- title: 3.3 ST-II
  contents:
  - "3.3 ST-II\n   ST-II is another network protocol that provides support for multicast\n\
    \   communications.  Similar to IP/Multicast and XTP, ST-II requires a\n   separate\
    \ application-specific protocol for assigning and\n   communicating multicast\
    \ group addresses.\n   While ST-II is a network level protocol, it guarantees\
    \ end-to-end\n   bandwidth and delay, and so obviates the need for many of the\n\
    \   functions of a transport protocol.  The guarantee is provided by\n   requiring\
    \ bandwidth reservations for all connections, which are made\n   at set-up time,\
    \ and ensuring that the requested bandwidth is\n   available throughout the lifetime\
    \ of the connection.  The enforcement\n   policy ensures that the same path is\
    \ followed for all transmissions,\n   and prohibits new connections over the network\
    \ unless there is\n   sufficient bandwidth to accommodate the expected traffic.\
    \  This is\n   accomplished by maintaining the state of all connections in the\n\
    \   network routers, trading the overhead of this connection set-up for\n   the\
    \ performance guarantees.\n   Connection set-up involves negotiation of the bandwidth\
    \ and delay\n   parameters and path between the sender, intermediate routers,\
    \ and\n   receivers. If the requested resources cannot be made available, the\n\
    \   sender is given the option of either accepting what is available or\n   canceling\
    \ the connection request.\n   To add a new user to an existing group, the new\
    \ receiver must first\n   communicate directly with the sender using a different\
    \ protocol to\n   exchange relevant information such as the group address.  The\
    \ sender\n   then requests ST-II to add the new receiver, with the basic\n   connection\
    \ set-up processing invoked as before with the new\n   connection completed only\
    \ if there is sufficient bandwidth to process\n   the user.\n   While the resource\
    \ guarantee system imposed by ST-II tries to prevent\n   network congestion from\
    \ occurring, there are situations where\n   priority traffic must be introduced\
    \ into the network.  ST-II makes\n   this very expensive, as the resource requirements\
    \ for existing\n   connections must be adjusted, which can only be accomplished\
    \ by the\n   origin of each stream.  This must be completed prior to the\n   connection\
    \ set-up for the priority stream, introducing a large delay\n   before the important\
    \ data can be transmitted.\n   ST-II connections can be closed by either the sender\
    \ or the receiver.\n   When the last receiver along a path has been removed, the\
    \ resources\n   allocated over that path are released.  When all receivers have\
    \ been\n   removed, the sender in informed and has the option of either adding\
    \ a\n   new receiver or tearing down the group.\n"
- title: 3.4 MTP
  contents:
  - "3.4 MTP\n   MTP is a transport level protocol designed to support efficient,\n\
    \   reliable multicast transmissions on top of existing network protocols\n  \
    \ such as IP/Multicast.  It is based on the notion of a multicast\n   \"master\"\
    \ which controls all aspects of group communications.\n   Allocation of a specific\
    \ group address, or network service access\n   point, is not considered part of\
    \ MTP, and as with the other multicast\n   protocols requires the use of an outside\
    \ addressing authority.  The\n   MTP specification does require the master to\
    \ make a \"robust effort\n   [2]\" to ensure the address selected is not already\
    \ in use by trying\n   to join an existing group at that address, but the problems\
    \ described\n   above remain.\n   Once the address is established, receivers issue\
    \ a request to join\n   the existing group using a unique connection identifier\
    \ that is pre-\n   assigned.  The MTP specification addresses neither how the\
    \ identifier\n   is allocated nor how the receivers learn its value, but is assumed\
    \ to\n   be handled through an external protocol.  The join request specifies\n\
    \   whether the receiver wishes to be a producer of information or only a\n  \
    \ receiver, whether the connection should be reliable or best effort,\n   whether\
    \ the receiver is able to accept multiple senders of\n   information, the minimum\
    \ throughput desired, and the maximum data\n   packet size.  If the request can\
    \ be granted, then the master replies\n   with an ACK with a multicast connection\
    \ identifier; otherwise a NAK\n   is returned.\n   Dropping membership in a group\
    \ is coordinated through the master.\n   The specification does not address what\
    \ action the master should take\n   when the group is reduced to a single member,\
    \ but a logical action\n   would be to stop distributing transmit tokens if there\
    \ are no active\n   receivers.\n   One of the major features in MTP is the ordering\
    \ of received data.\n   The master distributes transmit tokens to data producers\
    \ in the\n   group, which allow data to be provided at a specified rate.  Rate\n\
    \   control provides flow control within the protocol, with members that\n   cannot\
    \ maintain a minimum flow requested to leave the group.\n   Error recovery utilizes\
    \ a NAK-based selective retransmission scheme.\n   Senders are required to maintain\
    \ data for a time period specified by\n   the master, and to be able to retransmit\
    \ this data when requested by\n   members of the group.  These retransmissions\
    \ are multicast to the\n   entire group, requiring receivers to be able to cope\
    \ with duplicate\n   packets.  If a retransmission request arrives after the data\
    \ has been\n   released, the sender must NAK the request.\n   A potential problem\
    \ with MTP is the significant amount of overhead\n   associated with the protocol,\
    \ with virtually all control traffic\n   flowing through the master.  The extra\
    \ delay and congestion makes MTP\n   inappropriate for the image dissemination\
    \ applications.\n"
- title: 3.5 Summary
  contents:
  - "3.5 Summary\n   Our analysis has determined that there are significant problems\
    \ with\n   all of the major multicast protocols for the reliable, adaptive\n \
    \  multicast transport of large data items.  The problems include\n   inadequate\
    \ address management, excessive processing of control\n   information, poor response\
    \ to network congestion, inability to handle\n   high priority traffic, and suboptimal\
    \ error recovery and\n   retransmission procedures.  We have developed a high-level\
    \ notion of\n   the requirements for a service that addresses these issues, which\
    \ we\n   now discuss.\n"
- title: 4.  Protocol Suite for Reliable, Adaptive Multicast
  contents:
  - "4.  Protocol Suite for Reliable, Adaptive Multicast\n   We present an integrated\
    \ set of three basic components required to\n   provide a reliable multicast service:\
    \ the Multicast Group Authority\n   (MGA); the Reliable, Adaptive Multicast Protocol\
    \ (RAMP); and modified\n   routing algorithms.  These components are designed\
    \ to be compatible\n   with, and take full advantage of, reservation systems such\
    \ as RSVP\n   [12].\n   In this discussion, we have broadened the definition of\
    \ the term\n   \"Quality of Service (QOS).\"  There are many applications where\
    \ the\n   information content of the underlying data can be reduced through\n\
    \   data compression techniques.  For example, a 1,024 x 1,024 pixel\n   image\
    \ can be sub-sampled down to 512 x 512 pixels.  This degradation\n   results in\
    \ a lower quality of service for the end user, while\n   reducing the traditional\
    \ network QOS requirements for the transfer.\n"
- title: 4.1 The Multicast Group Authority
  contents:
  - "4.1 The Multicast Group Authority\n   The Multicast Group Authority (MGA) provides\
    \ services related to\n   managing the multicast address space and high-level\
    \ management\n   support to existing multicast groups.  The MGA has three primary\n\
    \   responsibilities: address management, service registration, and group\n  \
    \ membership maintenance.\n   The MGA is hierarchical in nature, similar to the\
    \ Internet Domain\n   Name System (DNS) [7].  Requests for service are directed\
    \ to an MGA\n   agent on the local workstation, which are propagated upwards as\n\
    \   required.\n"
- title: 4.1.1 Address Management
  contents:
  - "4.1.1 Address Management\n   The MGA is responsible for the allocation and deallocation\
    \ of\n   addresses within the Internet Class D address space.  Address\n   requests\
    \ received from application processes or other MGA nodes\n   result in a block\
    \ of addresses being assigned to the requesting MGA\n   node.  The size of the\
    \ address block allocated is dependent on the\n   position of the requester in\
    \ the MGA hierarchy, to reduce the number\n   of address requests propagated through\
    \ the MGA tree.\n   Figure 1 can be used to show what happens when an application\n\
    \   requests a multicast address from the authority at node 1.1.1.\n   Assuming\
    \ that this is the first request from this branch of the MGA,\n   node 1.1.1 issues\
    \ a request to its parent, node 1.1, which propagates\n   the request to node\
    \ 1.  Node 1 passes this request to the root, which\n   issues a block of, say,\
    \ 30 class D addresses.  Of these 30, 10 are\n   returned to node 1.1, with the\
    \ remaining 20 reserved for requests\n   from node 1's other children. Similarly,\
    \ node 1.1 passes 3 addresses\n   to node 1.1.1, reserving the other 7 for future\
    \ requests.  Finally,\n   node 1.1.1 answers the applications request for an address,\
    \ keeping\n   the remaining 2 addresses for future use.\n                    \
    \     --------\n                         | root |\n                         --------\n\
    \                          /  |  \\\n                         /   |   \\\n   \
    \               --------       --------\n                  |   1  |  ...  |  \
    \ n  |\n                  --------       --------\n                   /  |  \\\
    \n                  /   |   \\\n           --------       --------\n         \
    \  |  1.1 |  ...  |  1.n |\n           --------       --------\n            /\
    \  |  \\\n           /   |   \\\n        --------       --------\n        |1.1.1\
    \ |  ...  |1.1.n |\n        --------       --------\n                    Figure\
    \ 1.  Sample MGA Hierarchy\n   When the root exhausts the address space, a request\
    \ is made to the\n   children for reclamation of unused addresses.  This request\n\
    \   propagates down the tree, with unused addresses passed back through\n   the\
    \ hierarchy and returned to the address pool.  If the entire\n   address space\
    \ is in use, then requests for additional addresses are\n   not honored.\n   When\
    \ an application no longer requires an address, it is returned to\n   the local\
    \ MGA node, which keeps it until either it is requested by\n   another application,\
    \ it is requested by its parent, or the node is\n   terminated.  At node termination,\
    \ all available addresses are\n   returned to the parent.  Parents periodically\
    \ send heartbeat requests\n   to their children to ensure connectivity, and local\
    \ nodes similarly\n   poll applications, with addresses recalled if the queries\
    \ are not\n   answered.\n"
- title: 4.1.2 Service Registration, Requests, Release, and Group Membership
  contents:
  - "4.1.2 Service Registration, Requests, Release, and Group Membership\n      Maintenance\n\
    \   The MGA maintains the state of all registered multicast services and\n   receivers.\
    \  State information includes the number of members\n   associated with each group\
    \ by requested QOS reliability, which is\n   updated as services are offered or\
    \ rescinded and as members join or\n   leave a group.  The state information is\
    \ used to ensure that there is\n   at least one group member listening to each\
    \ multicast transfer.\n   Servers register the availability of service, specifying\
    \ whether\n   reliable service is available [section 4.2.2] and optionally the\n\
    \   number of qualities of service offered [section 4.2.1].  A multicast\n   group\
    \ address is allocated from the address pool and the service is\n   assigned an\
    \ identifier as required.  If a reservation protocol that\n   requires information\
    \ from the server (such as RSVP) is in use, then\n   the MGA notifies the reservation\
    \ system of the service with any\n   required parameters.  The service registration\
    \ is propagated through\n   the MGA, so that potential clients can discover service\
    \ availability.\n   However, servers do not begin data transfers until directed\
    \ to do so\n   by the MGA.\n   Client requests for service are also processed\
    \ through the MGA.\n   Service requests specify a service, a desired quality of\
    \ service, and\n   a reliability indication.  If the request is for a service\
    \ that has\n   been registered, then the routing support is directed to add a\
    \ route\n   for the new user [section 4.3.1].  If necessary, the MGA also\n  \
    \ notifies the reservation protocol.  If either the requested QOS is\n   not being\
    \ provided or it is provided unreliably and the request is\n   for reliable transport,\
    \ then the service provider is also notified.\n   If the service has not yet been\
    \ registered, an identifier for the\n   service is assigned and the request is\
    \ queued for when the service is\n   registered.  In either case, a response is\
    \ sent to the requester.\n   Requests for termination of group membership are\
    \ also sent to the\n   MGA.  If the request originates at a client, the MGA notifies\
    \ the\n   routing function and reservation protocol of the termination in case\n\
    \   the route should be released [section 4.3.2].  If termination results\n  \
    \ in a given QOS no longer having any recipients, the service provider\n   is\
    \ notified that the QOS is no longer required and should not be\n   transmitted.\
    \  Server-directed group terminations follow a similar\n   procedure, with all\
    \ clients of the group notified, and the service\n   offering is removed from\
    \ the MGA state tables.\n"
- title: 4.2 The Reliable Adaptive Multicast Protocol (RAMP)
  contents:
  - "4.2 The Reliable Adaptive Multicast Protocol (RAMP)\n   RAMP is a transport-level\
    \ protocol designed to provide reliable\n   multicast service on top of a network\
    \ protocol such as IP/Multicast,\n   with unreliable transport also available.\
    \  RAMP is build on the\n   premise that applications can request one quality\
    \ of service (using\n   our extended definition), but only require reliable transmission\
    \ at a\n   lower level of quality.  For example, consider the transmission of\n\
    \   hierarchical image data, in which a base spatial resolution is\n   transmitted,\
    \ followed by higher resolution data.  An application may\n   require the base\
    \ data to be sent reliably, but can tolerate dropped\n   packets for the higher\
    \ resolution by using interpolation or pixel\n   replication from the base level\
    \ to approximate the missing data.\n   Similar methods can be applied to other\
    \ data types, such as audio or\n   video.\n"
- title: 4.2.1 Quality of Service Levels
  contents:
  - "4.2.1 Quality of Service Levels\n   RAMP allows a multicast service to be provided\
    \ at multiple qualities\n   of service, with all or some of these levels transmitted\
    \ reliably.\n   These QOS can be distributed across different groups using different\n\
    \   class D addresses, or in the simplest case be transmitted in\n   individual\
    \ groups.  Single packets can be used for either a single\n   QOS, or may be applicable\
    \ to multiple qualities of service.\n   When a data packet is transmitted, a header\
    \ field indicates the QOS\n   level(s) associated with that packet.  In the old\
    \ IP implementations,\n   the Type of Service field can be used as a bit field\
    \ with one bit for\n   each applicable QOS, although this is incompatible with\
    \ RFC 1349 [1].\n   If a packet is required for multiple QOS, then multiple values\
    \ are\n   encoded in the field.  The RAMP host receiver protocol only accepts\n\
    \   those packets addressed to a group in which an application has\n   requested\
    \ membership and that has a QOS value which is in the set of\n   values requested\
    \ by the receivers.\n   The quality of service requested within a flow can be\
    \ modified during\n   the life of the flow.  QOS modification requests are forwarded\
    \ to the\n   MGA, which reduces the number of receivers in the original QOS group\n\
    \   and increments the count for the requested QOS.  These changes are\n   propagated\
    \ through the MGA hierarchy, with the server notified if\n   either the original\
    \ QOS has no remaining receivers or if the new QOS\n   is not currently being\
    \ served; similarly, the routers are notified if\n   routing changes are required.\n"
- title: 4.2.2 Error Recovery
  contents:
  - "4.2.2 Error Recovery\n   Sequence numbers are used in RAMP to determine the ordering\
    \ of\n   packets within a multicast group.  Mechanisms for ordering packets\n\
    \   transmitted from different senders is a current research topic [2,\n   6],\
    \ and an appropriate sequencing algorithm will be incorporated\n   within the\
    \ protocol.\n   Applications exist that do not require in-order delivery of data;\
    \ for\n   example, some image servers include position identification\n   information\
    \ in each packet.  To enhance the efficiency of such\n   schemes, RAMP includes\
    \ an option to allow out-or-order delivery of\n   packets to a receiver.\n   A\
    \ NAK-based selective retransmission scheme is used in RAMP to\n   minimize the\
    \ protocol overhead associated with ACK-based schemes.\n   When a receiver notices\
    \ that one or more packets have not been\n   received, and the transmission is\
    \ reliable, a request is sent to the\n   sender for the span of packets which\
    \ are missing.\n   RAMP at the sender aggregates retransmission requests for the\
    \ time\n   specified by the retransmission hold timer [section 4.2.3].  After\n\
    \   this time, the requests are evaluated to determine if sufficient\n   receivers\
    \ dropped a given packet to make multicasting the\n   retransmission worthwhile\
    \ by comparing it to a threshold value.  All\n   packets that have received a\
    \ number of retransmission requests\n   greater than the threshold are multicast\
    \ to the group address, with\n   other packets unicast to the individual requesters.\
    \  The proposed\n   retransmission scheme is a compromise between the extremes\
    \ of\n   multicasting and unicasting all retransmissions.  The rationale is\n\
    \   that multicasting a request issued by a single sender unnecessarily\n   floods\
    \ networks which had no packet loss, while unicasting to a large\n   number of\
    \ receivers floods the entire network.  The optimal approach,\n   dynamically\
    \ constructing a new multicast group for each dropped\n   packet, is currently\
    \ too costly in terms of group set-up time.\n   For those cases where the service\
    \ provider is unable to retransmit\n   the data due to released or overwritten\
    \ buffers, the protocol\n   delivers NAK responses using either multicast or unicast\
    \ based on the\n   number of retransmission requests received.\n"
- title: 4.2.3 Flow Control
  contents:
  - "4.2.3 Flow Control\n   RAMP utilizes a rate-based flow control mechanism that\
    \ derives rate\n   reductions from requests for retransmission or router back-off\n\
    \   requests (i.e., ICMP source quench messages), and derives rate\n   increases\
    \ from the number of packets transmitted without\n   retransmission requests.\
    \  When a retransmission request is received,\n   the protocol uses the number\
    \ of packets requested to compute a rate\n   reduction factor.  Similarly, a different\
    \ reduction factor is\n   computed upon receipt of a router-generated squelch\
    \ request.  The\n   rate reduction factors are then used to compute a reduced\
    \ rate of\n   transmission.\n   When a given number of packets have been transmitted\
    \ without packet\n   loss, the rate of transmission is incrementally increased.\
    \ The size\n   of the increase will always be smaller than the size of the smallest\n\
    \   rate decrease, in order to minimize throttling.\n   The retransmission hold\
    \ timer is modified according to both\n   application requests and network state.\
    \  As the number of\n   retransmission requests rises, the hold timer is incremented\
    \ to\n   minimize the number of duplicate retransmissions.  Similarly, the\n \
    \  timer is decremented as the number of retransmission requests drops.\n   RAMP\
    \ allows for priority traffic, which is marked in the packet\n   header.  The\
    \ protocol transmits a variable number of packets from\n   each sending process\
    \ in proportion to the priority of the flow.\n"
- title: 4.3 Routing Support
  contents:
  - "4.3 Routing Support\n   The protocol suite requires routing support for four\
    \ functions: path\n   set-up, path tear-down, forwarding based on QOS values,\
    \ and\n   prioritized packet loss due to congestion.  The support must be\n  \
    \ integrated into routers and network-level protocols in a similar\n   fashion\
    \ to IGMP [8].\n   Partial support comes as a direct consequence of using reservation\n\
    \   protocols such as RSVP.  This RFC does not mandate the means of\n   implementing\
    \ the required functions, and the specified protocols are\n   compatible with\
    \ known reservation protocols.\n   The routers state tables must maintain both\
    \ the multicast group\n   address and the QOS level(s) requested for each group\
    \ on each\n   outbound interface in order to make appropriate routing decisions\n\
    \   [section 4.3.3].  Therefore, the router state tables are updated\n   whenever\
    \ group membership changes, including QOS changes.\n"
- title: 4.3.1 Path Set-up
  contents:
  - "4.3.1 Path Set-up\n   Routers receive path set-up requests from the MGA as required\
    \ when\n   new members join a multicast group, which specifies the incoming and\n\
    \   outgoing interfaces, the group address, and the QOS associated with\n   the\
    \ request.  When the message is received, the router establishes a\n   path between\
    \ the server and the receiver, and subsequently updates\n   the multicast group\
    \ state table.  The mechanism used to discern the\n   network interfaces is not\
    \ specified, but may take advantage of other\n   protocols such as the RSVP path\
    \ and reservation mechanism.\n"
- title: 4.3.2 Path Tear-down
  contents:
  - "4.3.2 Path Tear-down\n   Path tear-down requests are also propagated through\
    \ the routers by\n   the MGA when group membership changes or QOS changes no longer\n\
    \   require data to be sent over a given route.  These are used to inform\n  \
    \ routers of both deletions of QOS for a given path and deletions of\n   entire\
    \ paths.  The purpose of the message is to explicitly remove\n   route table entries\
    \ in order to minimize the time required to stop\n   forwarding multicast data\
    \ across networks once the path is no longer\n   required.\n"
- title: 4.3.3 Multicast Routing Based on Quality of Service
  contents:
  - "4.3.3 Multicast Routing Based on Quality of Service\n   Traditional multicast\
    \ routing formulates route/don't route decisions\n   based on the destination\
    \ address in the packet header, with packets\n   duplicated as necessary to reach\
    \ all destinations.  In the proposed\n   new protocol suite, routers also consult\
    \ the QOS field for each\n   packet as different paths may have requested different\
    \ qualities of\n   service.  Packets are only forwarded if the group address has\
    \ been\n   requested and the quality of service specified in the header is\n \
    \  requested in the state table entry for a given interface.\n"
- title: 4.3.4 Quality of Service Based Packet Loss
  contents:
  - "4.3.4 Quality of Service Based Packet Loss\n   Network congestion causes router\
    \ queues to overflow, and as a result\n   packet loss occurs.  The QOS and priority\
    \ indications in the packet\n   headers can be used to prioritize the order in\
    \ which packets are\n   dropped.  First, packets with the priority field set in\
    \ the header\n   are dropped last.  Within packets of equal priority, packets\
    \ are\n   dropped in order of QOS, with the highest QOS packets dropped first.\n\
    \   The rationale is that other packets with lower QOS may be usable by\n   receivers,\
    \ while packets with high QOS may not be usable without the\n   lower QOS data.\n"
- title: '5.  Interactions Among the Components: An Example'
  contents:
  - "5.  Interactions Among the Components: An Example\n   The MGA, RAMP, and routing\
    \ support functions all cooperate in the\n   multicast process.  As an example,\
    \ assume that a network exists with\n   a single server (S), three routers (R1,\
    \ R2, and R3), and two clients\n   (C1 and C2).  The path between S and C1 goes\
    \ through R1 and R2, while\n   the path between S and C2 goes through R1, R2,\
    \ and R3.  The network\n   is shown in figure 2.\n                S ------- R1\
    \ -------- R2 -------- R3\n                          |           |\n         \
    \                 C1          C2\n                Figure 2.  Sample Network Configuration\n\
    \   Service Registration\n   When S is initiated, it registers a service with\
    \ the MGA node in\n   the local workstation, offering reliable service at two\
    \ qualities\n   of service, Q1 and Q2.  As this is the first multicast offering\
    \ on\n   the workstation, the local MGA requests a block of multicast\n   addresses\
    \ from the hierarchy, and assigns an address and service\n   identifier to S.\
    \  If the RSVP reservation protocol is in operation,\n   the local MGA node in\
    \ S notifies RSVP to send a RpathS\n   message out for the service, which goes\
    \ through R1, R2, and R3,\n   reaching the RSVP nodes on C1 and C2.  The service\
    \ and its\n   characteristics are propagated throughout the MGA hierarchy,\n \
    \  ultimately reaching the MGA nodes resident on C1 and C2.  The\n   service is\
    \ now available throughout the network.\n   Service Request and Path Set-up\n\
    \   The client C1 requests reliable service from S at QOS Q1, by\n   issuing a\
    \ request to the MGA node in C1.  If a reservation protocol\n   is in use, then\
    \ it is used to reserve bandwidth and establish a\n   path between the sender\
    \ and receiver, going through R1 and R2;\n   otherwise, the path is established\
    \ through R1 and R2 by the routing\n   protocol.  R1 now forwards all packets\
    \ from S with QOS Q1 along the\n   path to R2, which routes them to C1.  In concert\
    \ with the path\n   set-up, the add membership request is propagated through MGA\
    \ to the\n   server workstation.  The local MGA tables are checked and it is\n\
    \   noted that the service is not currently being offered, so the\n   server is\
    \ notified to begin reliable distribution of the service at\n   Q1.\n   Initial\
    \ Delivery\n   The server now begins transmitting Q1 data which is observed by\
    \ R1.\n   R1 inspects the header and notes that the packet has QOS Q1.  The\n\
    \   routing tables specify that QOS Q1 for this address are only\n   forwarded\
    \ along the interface leading to R2, and R1 acts\n   accordingly.  Similarly,\
    \ R2 routes the packet to C1.  When the data\n   arrives at C1, the RAMP node\
    \ inspects the QOS and destination\n   address fields in the header, accepts the\
    \ packet, and forwards it\n   to the C1 client process.\n   Error Recovery\n \
    \  During transmission, if the RAMP node in C1 realizes that packets\n   have\
    \ been dropped, a retransmission request is returned to the\n   server identifying\
    \ spans of the missing packets.  The RAMP node\n   accepts the packet, builds\
    \ the retransmission packets, and sets the\n   retransmission hold timer.  When\
    \ the timer expires, the number of\n   retransmission requests for each missing\
    \ packet is compared against\n   the threshold, and the packets are either unicast\
    \ directly to the\n   requesters or multicast to the entire group.  As in this\
    \ case there\n   is only requester, the threshold is not exceeded and the packets\n\
    \   are retransmitted to C1Us unicast address.\n   Group Membership Addition\n\
    \   Client C2 now joins the group, requesting reliable transmission at\n   QOS\
    \ Q2.  Following the process used for C1, the request propagates\n   through the\
    \ MGA (and potentially reservation protocol) hierarchy.\n   Upon completion of\
    \ the request processing, R1 routes packets for\n   QOS Q1 and Q2 to R2, while\
    \ R2 forwards QOS Q1 packets to C1 and Q2\n   packets to R3; client C1 only accepts\
    \ packets marked as Q1 while C2\n   only accepts Q2 packets.  The server is notified\
    \ that it now has\n   clients for Q2, and begins serving that QOS in addition\
    \ to Q1.\n   QOS Based Routing\n   First, assume that QOS Q1 data is independent\
    \ of QOS Q2 data.  When\n   the server sends a packet with Q1 marked in the header,\
    \ the packet\n   is received by R1 and is forwarded to R2.  R2 receives the packet,\n\
    \   and sends it out the interface to C1, but not to R3.  Next, the\n   server\
    \ delivers a packet for Q2.  R1 receives the packet and sends\n   it to R2, which\
    \ forwards it to R3 but not to C1.  R3 accepts the\n   packet, and forwards it\
    \ to C2.\n   Now, assume that either Q2 is a subset of Q1, or that receivers of\n\
    \   Q1 data also require Q2 data as in conditional compression schemes.\n   Therefore,\
    \ all Q2 packets are marked for both Q1 and Q2, while the\n   remaining Q1 packets\
    \ only have Q1 set in the header.  Q1-only\n   packets are routed as before, following\
    \ the path S -> R1 -> R2 ->\n   C1.  However, Q2 packets are now routed from S\
    \ to R1 to R2, at\n   which point R2 duplicates the packets and sends them to\
    \ both C1 and\n   R3, with R3 forwarding them to C2.  At C1, these packets have\
    \ Q1\n   marked, and so are accepted, while at C2 the packet is accepted as\n\
    \   the Q2 bit is verified.\n   Group Membership Deletion\n   When C1 issues a\
    \ drop membership request, the MGA on the client\n   workstation is notified,\
    \ and the request is propagated through the\n   MGA hierarchy back to the server\
    \ MGA node.  In parallel, the\n   routers are notified to close the path, as it\
    \ is no longer\n   required, possibly through the reservation protocol.  As this\
    \ is\n   the last client for the Q1 QOS, the server is informed to stop\n   transmitting\
    \ Q1 data, with Q2 data unaffected.  A similar process\n   occurs when C2 drops\
    \ membership from the group, leaving the server\n   idle.  At this point, the\
    \ server has the option of shutting down\n   and returning the group address to\
    \ the MGA, or to continue in an\n   idle state until another client requests service.\n"
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   This research was supported in part by the Defense Research\n\
    \   Projects Agency (DARPA) under contract number F19618-91-C-0086.\n"
- title: References
  contents:
  - "References\n   [1] Almquist, P., \"Type of Service in the Internet Protocol Suite\"\
    ,\n       RFC 1349, Consultant, July 1992.\n   [2] Armstrong, S., Freier, A.,\
    \ and K. Marzullo, \"Multicast Transport\n       Protocol\", RFC 1301, Xerox,\
    \ Apple, Cornell University, February\n       1992.\n   [3] Braudes, R., and S.\
    \ Zabele, \"A Reliable, Adaptive Multicast\n       Service for High-Bandwidth\
    \ Image Dissemination\", submitted to ACM\n       SIGCOMM '93.\n   [4] Cheriton,\
    \ D., \"VMTP: Versatile Message Transaction Protocol\", RFC\n       1045, Stanford\
    \ University, February 1988.\n   [5] Deering, S., \"Host Extensions for IP Multicasting\"\
    , STD 5, RFC\n       1112, Stanford University, August 1989.\n   [6] Mayer, E.,\
    \ \"An Evaluation Framework for Multicast Ordering\n       Protocols\", Proceedings\
    \ ACM SIGCOMM '92, Baltimore, Maryland, pp.\n       177-187.\n   [7] Mockapetris,\
    \ P., \"Domain Names - Concepts and Facilities,\" STD\n       13, RFC 1034, USC/Information\
    \ Sciences Institute, November 1987.\n   [8] Postel, J., \"Internet Control Message\
    \ Protocol - DARPA Internet\n       Program Protocol Specification\", STD 5, RFC\
    \ 792, USC/Information\n       Sciences Institute, September 1981.\n   [9] Strayer,\
    \ W., Dempsey, B., and A. Weaver, \"XTP: The Xpress\n       Transfer Protocol\"\
    , Addison-Wesley Publishing Co., Reading, MA,\n       1992.\n  [10] Topolcic,\
    \ C., Editor, \"Experimental Internet Stream Protocol,\n       Version 2 (ST-\
    \ II)\", RFC 1190, CIP Working Group, October 1990.\n  [11] \"XTP Protocol Definition\
    \ Revision 3.6\", Protocol Engines\n       Incorporated, PEI 92-10, Mountain View,\
    \ CA, 11 January 1992.\n  [12] Zhang, L., Deering, S., Estrin, D., Shenker, S.,\
    \ and D. Zappala,\n       \"RSVP: A New Resource ReSerVation Protocol\", Work\
    \ in Progress,\n       March 1993.\n"
- title: Security Considerations
  contents:
  - "Security Considerations\n   Security issues are not discussed in this memo.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Bob Braudes\n   TASC\n   55 Walkers Brook Drive\n   Reading,\
    \ MA 01867\n   Phone:  (617) 942-2000\n   EMail:  rebraudes@tasc.com\n   Steve\
    \ Zabele\n   TASC\n   55 Walkers Brook Drive\n   Reading, MA 01867\n   Phone:\
    \  (617) 942-2000\n   EMail: gszabele@tasc.com\n"
