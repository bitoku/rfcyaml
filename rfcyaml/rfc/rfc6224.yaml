- title: __initial_text__
  contents:
  - "             Base Deployment for Multicast Listener Support\n               \
    \  in Proxy Mobile IPv6 (PMIPv6) Domains\n"
- title: Abstract
  contents:
  - "Abstract\n   This document describes deployment options for activating multicast\n\
    \   listener functions in Proxy Mobile IPv6 domains without modifying\n   mobility\
    \ and multicast protocol standards.  Similar to home agents in\n   Mobile IPv6,\
    \ Local Mobility Anchors of Proxy Mobile IPv6 serve as\n   multicast subscription\
    \ anchor points, while Mobile Access Gateways\n   provide Multicast Listener Discovery\
    \ (MLD) proxy functions.  In this\n   scenario, mobile nodes remain agnostic of\
    \ multicast mobility\n   operations.  Support for mobile multicast senders is\
    \ outside the\n   scope of this document.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc6224.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2011 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  3\n   2.  Terminology  . . . . . . . . . . . . . . . . . . . .\
    \ . . . . .  3\n   3.  Overview . . . . . . . . . . . . . . . . . . . . . . .\
    \ . . . .  4\n   4.  Deployment Details . . . . . . . . . . . . . . . . . . .\
    \ . . .  8\n     4.1.  Operations of the Mobile Node  . . . . . . . . . . . .\
    \ . .  8\n     4.2.  Operations of the Mobile Access Gateway  . . . . . . . .\
    \ .  8\n     4.3.  Operations of the Local Mobility Anchor  . . . . . . . . .\
    \ 10\n     4.4.  IPv4 Support . . . . . . . . . . . . . . . . . . . . . . . 10\n\
    \     4.5.  Multihoming Support  . . . . . . . . . . . . . . . . . . . 11\n  \
    \   4.6.  Multicast Availability throughout the Access Network . . . 12\n    \
    \ 4.7.  A Note on Explicit Tracking  . . . . . . . . . . . . . . . 12\n   5. \
    \ Message Source and Destination Address . . . . . . . . . . . . 13\n     5.1.\
    \  Query  . . . . . . . . . . . . . . . . . . . . . . . . . . 13\n     5.2.  Report/Done\
    \  . . . . . . . . . . . . . . . . . . . . . . . 13\n   6.  Security Considerations\
    \  . . . . . . . . . . . . . . . . . . . 13\n   7.  Acknowledgements . . . . .\
    \ . . . . . . . . . . . . . . . . . . 14\n   8.  References . . . . . . . . .\
    \ . . . . . . . . . . . . . . . . . 14\n     8.1.  Normative References . . .\
    \ . . . . . . . . . . . . . . . . 14\n     8.2.  Informative References . . .\
    \ . . . . . . . . . . . . . . . 15\n   Appendix A.  Initial MLD Queries on Upcoming\
    \ Links . . . . . . . . 16\n   Appendix B.  State of IGMP/MLD Proxy Implementations\
    \ . . . . . . . 16\n   Appendix C.  Comparative Evaluation of Different Approaches\
    \  . . . 17\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Proxy Mobile IPv6 (PMIPv6) [RFC5213] extends Mobile IPv6\
    \ (MIPv6)\n   [RFC3775] by network-based management functions that enable IP\n\
    \   mobility for a host without requiring its participation in any\n   mobility-related\
    \ signaling.  Additional network entities, called the\n   Local Mobility Anchor\
    \ (LMA) and Mobile Access Gateways (MAGs), are\n   responsible for managing IP\
    \ mobility on behalf of the mobile node\n   (MN).\n   With these entities in place,\
    \ the mobile node experiences an\n   exceptional access topology towards the static\
    \ Internet in the sense\n   that the MAG introduces a routing hop in situations\
    \ where the LMA\n   architecturally acts as the next hop (or designated) router\
    \ for the\n   MN.  In the particular case of multicast communication, group\n\
    \   membership management, as signaled by the Multicast Listener\n   Discovery\
    \ (MLD) protocol [RFC3810] [RFC2710], requires dedicated\n   treatment at the\
    \ network side.\n   Multicast routing functions need to be placed carefully within\
    \ the\n   PMIPv6 domain in order to augment unicast transmission with group\n\
    \   communication services.  [RFC5213] does not explicitly address\n   multicast\
    \ communication.  Bidirectional home tunneling, the minimal\n   multicast support\
    \ arranged by MIPv6, cannot be directly transferred\n   to network-based management\
    \ scenarios, since a mobility-unaware node\n   will not initiate such a tunnel\
    \ after movement.  Consequently, even\n   minimal multicast listener support in\
    \ PMIPv6 domains requires an\n   explicit deployment of additional functions.\n\
    \   This document describes options for deploying multicast listener\n   functions\
    \ in Proxy Mobile IPv6 domains without modifying mobility and\n   multicast protocol\
    \ standards.  Similar to home agents in Mobile IPv6,\n   PMIPv6 Local Mobility\
    \ Anchors serve as multicast subscription anchor\n   points, while Mobile Access\
    \ Gateways provide MLD proxy functions.  In\n   this scenario, mobile nodes remain\
    \ agnostic of multicast mobility\n   operations.  This document does not address\
    \ specific optimizations\n   and efficiency improvements of multicast routing\
    \ for network-based\n   mobility discussed in [RFC5757], as such solutions would\
    \ require\n   changes to the base PMIPv6 protocol [RFC5213].  Support for mobile\n\
    \   multicast senders is also outside the scope of this document.\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   This document uses the terminology as defined for the mobility\n\
    \   protocols [RFC3775], [RFC5213], and [RFC5844], as well as the\n   multicast\
    \ edge related protocols [RFC3376], [RFC3810], and [RFC4605].\n"
- title: 3.  Overview
  contents:
  - "3.  Overview\n   The reference scenario for multicast deployment in Proxy Mobile\
    \ IPv6\n   domains is illustrated in Figure 1.  Below, LMAA and MN-HNP are the\n\
    \   LMA Address and Mobile Node's Home Network Prefix as defined in\n   [RFC5213].\n\
    \                       +-------------+\n                       | Content    \
    \ |\n                       | Source      |\n                       +-------------+\n\
    \                              |\n                     ***  ***  ***  ***\n  \
    \                  *   **   **   **   *\n                   *                \
    \    *\n                    *  Fixed Internet  *\n                   *       \
    \             *\n                    *   **   **   **   *\n                  \
    \   ***  ***  ***  ***\n                      /            \\\n              \
    \    +----+         +----+\n                  |LMA1|         |LMA2|          \
    \       Multicast Anchor\n                  +----+         +----+\n          \
    \   LMAA1  |              |  LMAA2\n                    |              |\n   \
    \                 \\\\           //\\\\\n                     \\\\         //\
    \  \\\\\n                      \\\\       //    \\\\                 Unicast Tunnel\n\
    \                       \\\\     //      \\\\\n                        \\\\  \
    \ //        \\\\\n                         \\\\ //          \\\\\n           \
    \    Proxy-CoA1 ||            ||  Proxy-CoA2\n                       +----+  \
    \        +----+\n                       |MAG1|          |MAG2|           MLD Proxy\n\
    \                       +----+          +----+\n                        |  | \
    \            |\n                MN-HNP1 |  | MN-HNP2     | MN-HNP3\n         \
    \              MN1 MN2          MN3\n      Figure 1: Reference Network for Multicast\
    \ Deployment in PMIPv6\n   An MN in a PMIPv6 domain will decide on multicast group\
    \ membership\n   management completely independent of its current mobility conditions.\n\
    \   It will submit MLD Report and Done messages, based on application\n   triggers,\
    \ using its link-local source address and multicast\n   destination addresses\
    \ according to [RFC3810] or [RFC2710].  These\n   link-local signaling messages\
    \ will arrive at the currently active MAG\n   via one of its downstream local\
    \ (wireless) links.  A multicast-\n   unaware MAG would simply discard these MLD\
    \ messages.\n   To facilitate multicast in a PMIPv6 domain, an MLD proxy function\n\
    \   [RFC4605] needs to be deployed on the MAG that selects the tunnel\n   interface\
    \ corresponding to the MN's LMA for its upstream interface\n   (cf., Section 6\
    \ of [RFC5213]).  Thereby, each MAG-to-LMA tunnel\n   interface defines an MLD\
    \ proxy domain at the MAG, and it contains all\n   downstream links to MNs that\
    \ share this specific LMA.  According to\n   standard proxy operations, MLD Report\
    \ messages will be aggregated and\n   then forwarded up the tunnel interface to\
    \ the MN's corresponding LMA.\n   Serving as the designated multicast router or\
    \ an additional MLD\n   proxy, the LMA will transpose any MLD message from a MAG\
    \ into the\n   multicast routing infrastructure.  Correspondingly, the LMA will\n\
    \   create appropriate multicast forwarding states at its tunnel\n   interface.\
    \  Traffic of the subscribed groups will arrive at the LMA,\n   and the LMA will\
    \ forward this traffic according to its group/source\n   states.  In addition,\
    \ the LMA will act as an MLD querier, seeing its\n   downstream tunnel interfaces\
    \ as multicast-enabled links.\n   At the MAG, MLD queries and multicast data will\
    \ arrive on the\n   (tunnel) interface that is assigned to a group of access links\
    \ as\n   identified by its Binding Update List (cf., Section 6.1 of\n   [RFC5213]).\
    \  As specified for MLD proxies, the MAG will forward\n   multicast traffic and\
    \ initiate related signaling down the appropriate\n   access links to the MNs.\
    \  Hence, all multicast-related signaling and\n   the data traffic will transparently\
    \ flow from the LMA to the MN on an\n   LMA-specific tree, which is shared among\
    \ the multicast sources.\n   In case of a handover, the MN (unaware of IP mobility)\
    \ will not send\n   unsolicited MLD reports.  Instead, the MAG is required to\
    \ maintain\n   group memberships in the following way.  On observing a new MN\
    \ on a\n   downstream access link, the MAG sends a MLD General Query.  Based on\n\
    \   its outcome and the multicast group states previously maintained at\n   the\
    \ MAG, a corresponding Report will be sent to the LMA aggregating\n   group membership\
    \ states according to the proxy function.  Additional\n   Reports can be omitted\
    \ when the previously established multicast\n   forwarding states at the new MAG\
    \ already cover the subscriptions of\n   the MN.\n   In summary, the following\
    \ steps are executed on handover:\n   1.  The MAG-MN link comes up and the MAG\
    \ discovers the new MN.\n   2.  Unicast address configuration and PMIPv6 binding\
    \ are performed\n       after the MAG determines the corresponding LMA.\n   3.\
    \  Following IPv6 address configuration, the MAG should send an\n       (early)\
    \ MLD General Query to the new downstream link as part of\n       its standard\
    \ multicast-enabled router operations.\n   4.  The MAG should determine whether\
    \ the MN is admissible to\n       multicast services; if it's not, then stop here.\n\
    \   5.  The MAG adds the new downstream link to the MLD proxy instance\n     \
    \  with up-link to the corresponding LMA.\n   6.  The corresponding proxy instance\
    \ triggers an MLD General Query on\n       the new downstream link.\n   7.  The\
    \ MN Membership Reports arrive at the MAG, in response either\n       to the early\
    \ query or to the query sent by the proxy instance.\n   8.  The Proxy processes\
    \ the MLD Report, updates states, and reports\n       upstream if necessary.\n\
    \   After Re-Binding, the LMA is not required to issue a MLD General\n   Query\
    \ on the tunnel link to refresh forwarding states.  Multicast\n   state updates\
    \ should be triggered by the MAG, which aggregates\n   subscriptions of all its\
    \ MNs (see the call flow in Figure 2).\n   MN1             MAG1             MN2\
    \             MAG2             LMA\n   |                |                |   \
    \            |                |\n   |    Join(G)     |                |      \
    \         |                |\n   +--------------->|                |         \
    \      |                |\n   |                |     Join(G)    |            \
    \   |                |\n   |                |<---------------+               |\
    \                |\n   |                |                |               |   \
    \             |\n   |                |     Aggregated Join(G)         |      \
    \          |\n   |                +================================================>|\n\
    \   |                |                |               |                |\n   |\
    \                |   Mcast Data   |               |                |\n   |   \
    \             |<================================================+\n   |      \
    \          |                |               |                |\n   |  Mcast Data\
    \    | Mcast Data     |               |                |\n   |<---------------+--------------->|\
    \               |                |\n   |                |                |   \
    \            |                |\n   |           <  Movement of MN 2 to MAG2  &\
    \  PMIP Binding Update  > |\n   |                |                |          \
    \     |                |\n   |                |                |--- Rtr Sol -->|\
    \                |\n   |                |                |<-- Rtr Adv ---|   \
    \             |\n   |                |                |               |      \
    \          |\n   |                |                |   MLD Query   |         \
    \       |\n   |                |                |<--------------+            \
    \    |\n   |                |                |               |               \
    \ |\n   |                |                |   Join(G)     |                |\n\
    \   |                |                +-------------->|                |\n   |\
    \                |                |               Aggregated Join(G)\n   |   \
    \             |                |               +===============>|\n   |      \
    \          |                |               |                |\n   |         \
    \       |   Mcast Data   |               |                |\n   |            \
    \    |<================================================+\n   |               \
    \ |                |               |   Mcast Data   |\n   |                | \
    \               |               |<===============+\n   |  Mcast Data    |    \
    \            |               |                |\n   |<---------------+       \
    \         |  Mcast Data   |                |\n   |                |          \
    \      |<--------------+                |\n   |                |             \
    \   |               |                |\n               Figure 2: Call Flow of\
    \ Multicast-Enabled PMIP\n            with \"MLD Membership Report\" Abbreviated\
    \ by \"Join\"\n   These multicast deployment considerations likewise apply for\
    \ mobile\n   nodes that operate with their IPv4 stack enabled in a PMIPv6 domain.\n\
    \   PMIPv6 can provide IPv4 home address mobility support [RFC5844].\n   Such\
    \ mobile nodes will use IGMP [RFC2236] [RFC3376] signaling for\n   multicast,\
    \ which is handled by an IGMP proxy function at the MAG in\n   an analogous way.\n\
    \   Following these deployment steps, multicast management transparently\n   interoperates\
    \ with PMIPv6.  It is worth noting that MNs -- while\n   being attached to the\
    \ same MAG, but associated with different LMAs --\n   can subscribe to the same\
    \ multicast group.  Thereby, data could be\n   distributed redundantly in the\
    \ network and duplicate traffic could\n   arrive at a MAG.  Additionally, in a\
    \ point-to-point wireless link\n   model, a MAG might be forced to transmit the\
    \ same data over one\n   wireless domain to different MNs.  However, multicast\
    \ traffic\n   arriving at one interface of the MN will always remain unique, i.e.,\n\
    \   the mobile multicast distribution system will never cause duplicate\n   packets\
    \ arriving at an MN (see Appendix C for further\n   considerations).\n"
- title: 4.  Deployment Details
  contents:
  - "4.  Deployment Details\n   Multicast activation in a PMIPv6 domain requires to\
    \ deploy general\n   multicast functions at PMIPv6 routers and to define their\
    \ interaction\n   with the PMIPv6 protocol in the following way.\n"
- title: 4.1.  Operations of the Mobile Node
  contents:
  - "4.1.  Operations of the Mobile Node\n   A mobile node willing to manage multicast\
    \ traffic will join,\n   maintain, and leave groups as if located in the fixed\
    \ Internet.  No\n   specific mobility actions nor implementations are required\
    \ at the MN.\n"
- title: 4.2.  Operations of the Mobile Access Gateway
  contents:
  - "4.2.  Operations of the Mobile Access Gateway\n   A Mobile Access Gateway is\
    \ required to assist in MLD signaling and\n   data forwarding between the MNs\
    \ that it serves and the corresponding\n   LMAs associated to each MN.  It therefore\
    \ needs to implement an\n   instance of the MLD proxy function [RFC4605] for each\
    \ upstream tunnel\n   interface that has been established with an LMA.  The MAG\
    \ decides on\n   the mapping of downstream links to a proxy instance (and hence\
    \ an\n   upstream link to an LMA) based on the regular Binding Update List as\n\
    \   maintained by PMIPv6 standard operations (cf., Section 6.1 of\n   [RFC5213]).\
    \  As links connecting MNs and MAGs change under mobility,\n   MLD proxies at\
    \ MAGs must be able to dynamically add and remove\n   downstream interfaces in\
    \ their configurations.\n   On the reception of MLD reports from an MN, the MAG\
    \ must identify the\n   corresponding proxy instance from the incoming interface\
    \ and perform\n   regular MLD proxy operations: it will insert/update/remove multicast\n\
    \   forwarding state on the incoming interface and will merge state\n   updates\
    \ into the MLD proxy membership database.  It will then send an\n   aggregated\
    \ Report via the upstream tunnel to the LMA when the\n   membership database (cf.,\
    \ Section 4.1 of [RFC4605]) changes.\n   Conversely, on the reception of MLD queries,\
    \ the MAG proxy instance\n   will answer the Queries on behalf of all active downstream\
    \ receivers\n   maintained in its membership database.  Queries sent by the LMA\
    \ do\n   not force the MAG to trigger corresponding messages immediately\n   towards\
    \ MNs.  Multicast traffic arriving at the MAG on an upstream\n   interface will\
    \ be forwarded according to the group-specific or\n   source-specific forwarding\
    \ states as acquired for each downstream\n   interface within the MLD proxy instance.\
    \  At this stage, it is\n   important to note that IGMP/MLD proxy implementations\
    \ capable of\n   multiple instances are expected to closely follow the specifications\n\
    \   of Section 4.2 in [RFC4605], i.e., treat proxy instances in isolation\n  \
    \ of each other while forwarding.  In providing isolated proxy\n   instances,\
    \ the MAG will uniquely serve its downstream links with\n   exactly the data that\
    \ belong to whatever group is subscribed on the\n   particular interface.\n  \
    \ After a handover, the MAG will continue to manage upstream tunnels\n   and downstream\
    \ interfaces as specified in the PMIPv6 specification.\n   It must dynamically\
    \ associate new access links to proxy instances\n   that include the upstream\
    \ connection to the corresponding LMA.  The\n   MAG detects the arrival of a new\
    \ MN by receiving a router\n   solicitation message and by an upcoming link. \
    \ To learn about\n   multicast groups subscribed by a newly attaching MN, the\
    \ MAG should\n   send a General Query to the MN's link.  Querying an upcoming\n\
    \   interface is a standard operation of MLD queriers (see Appendix A)\n   and\
    \ is performed immediately after address configuration.  In\n   addition, an MLD\
    \ query should be initiated by the proxy instance, as\n   soon as a new interface\
    \ has been configured for downstream.  In case\n   the access link between MN\
    \ and MAG goes down, interface-specific\n   multicast states change.  Both cases\
    \ may alter the composition of the\n   membership database and this will trigger\
    \ corresponding Reports\n   towards the LMA.  Note that the actual observable\
    \ state depends on\n   the access link model in use.\n   An MN may be unable to\
    \ answer MAG multicast membership queries due to\n   handover procedures, or its\
    \ report may arrive before the MAG has\n   configured its link as the proxy downstream\
    \ interface.  Such\n   occurrences are equivalent to a General Query loss.  To\
    \ prevent\n   erroneous query timeouts at the MAG, MLD parameters should be\n\
    \   carefully adjusted to the mobility regime.  In particular, MLD timers\n  \
    \ and the Robustness Variable (see Section 9 of [RFC3810]) should be\n   chosen\
    \ to be compliant with the time scale of handover operations and\n   proxy configurations\
    \ in the PMIPv6 domain.\n   In proceeding this way, the MAG is able to aggregate\
    \ multicast\n   subscriptions for each of its MLD proxy instances.  However, this\n\
    \   deployment approach does not prevent multiple identical streams\n   arriving\
    \ from different LMA upstream interfaces.  Furthermore, a\n   multipoint channel\
    \ forwarding into the wireless domain is prevented\n   by the point-to-point link\
    \ model in use.\n"
- title: 4.3.  Operations of the Local Mobility Anchor
  contents:
  - "4.3.  Operations of the Local Mobility Anchor\n   For any MN, the Local Mobility\
    \ Anchor acts as the persistent home\n   agent and at the same time as the default\
    \ multicast querier for the\n   corresponding MAG.  It implements the function\
    \ of the designated\n   multicast router or a further MLD proxy.  According to\
    \ MLD reports\n   received from a MAG (on behalf of the MNs), the LMA establishes/\n\
    \   maintains/removes group-/source-specific multicast forwarding states\n   at\
    \ its corresponding downstream tunnel interfaces.  At the same time,\n   it procures\
    \ for aggregated multicast membership maintenance at its\n   upstream interface.\
    \  Based on the multicast-transparent operations of\n   the MAGs, the LMA treats\
    \ its tunnel interfaces as multicast-enabled\n   downstream links, serving zero\
    \ to many listening nodes.  Multicast\n   traffic arriving at the LMA is transparently\
    \ forwarded according to\n   its multicast forwarding information base.\n   After\
    \ a handover, the LMA will receive Binding De-Registrations and\n   Binding Lifetime\
    \ Extensions that will cause a re-mapping of home\n   network prefix(es) to a\
    \ new Proxy-CoA in its Binding Cache (see\n   Section 5.3 of [RFC5213]).  The\
    \ multicast forwarding states require\n   updating, as well, if the MN within\
    \ an MLD proxy domain is the only\n   receiver of a multicast group.  Two different\
    \ cases need to be\n   considered:\n   1.  The mobile node is the only receiver\
    \ of a group behind the\n       interface at which a De-Registration was received:\
    \ the membership\n       database of the MAG changes, which will trigger a Report/Done\n\
    \       sent via the MAG-to-LMA interface to remove this group.  The LMA\n   \
    \    thus terminates multicast forwarding.\n   2.  The mobile node is the only\
    \ receiver of a group behind the\n       interface at which a Lifetime Extension\
    \ was received: the\n       membership database of the MAG changes, which will\
    \ trigger a\n       Report sent via the MAG-to-LMA interface to add this group.\
    \  The\n       LMA thus starts multicast distribution.\n   In proceeding this\
    \ way, each LMA will provide transparent multicast\n   support for the group of\
    \ MNs it serves.  It will perform traffic\n   aggregation at the MN-group level\
    \ and will assure that multicast data\n   streams are uniquely forwarded per individual\
    \ LMA-to-MAG tunnel.\n"
- title: 4.4.  IPv4 Support
  contents:
  - "4.4.  IPv4 Support\n   An MN in a PMIPv6 domain may use an IPv4 address transparently\
    \ for\n   communication as specified in [RFC5844].  For this purpose, LMAs can\n\
    \   register IPv4-Proxy-CoAs in its Binding Caches, and MAGs can provide\n   IPv4\
    \ support in access networks.  Correspondingly, multicast\n   membership management\
    \ will be performed by the MN using IGMP.  For\n   multicast support on the network\
    \ side, an IGMP proxy function needs\n   to be deployed at MAGs in exactly the\
    \ same way as for IPv6.\n   [RFC4605] defines IGMP proxy behavior in full agreement\
    \ with IPv6/\n   MLD.  Thus, IPv4 support can be transparently provided following\
    \ the\n   obvious deployment analogy.\n   For a dual-stack IPv4/IPv6 access network,\
    \ the MAG proxy instances\n   should choose multicast signaling according to address\
    \ configurations\n   on the link, but may submit IGMP and MLD queries in parallel,\
    \ if\n   needed.  It should further be noted that the infrastructure cannot\n\
    \   identify two data streams as identical when distributed via an IPv4\n   and\
    \ IPv6 multicast group.  Thus, duplicate data may be forwarded on a\n   heterogeneous\
    \ network layer.\n   A particular note is worth giving the scenario of [RFC5845]\
    \ in which\n   overlapping private address spaces of different operators can be\n\
    \   hosted in a PMIP domain by using Generic Routing Encapsulation (GRE)\n   with\
    \ key identification.  This scenario implies that unicast\n   communication in\
    \ the MAG-LMA tunnel can be individually identified\n   per MN by the GRE keys.\
    \  This scenario still does not impose any\n   special treatment of multicast\
    \ communication for the following\n   reasons.\n   MLD/IGMP signaling between\
    \ MNs and the MAG is on point-to-point links\n   (identical to unicast).  Aggregated\
    \ MLD/IGMP signaling between the\n   MAG proxy instance and the LMA remains link-local\
    \ between the routers\n   and independent of any individual MN.  So the MAG-proxy\
    \ and the LMA\n   should not use GRE key identifiers, but plain GRE to exchange\
    \ MLD\n   queries and reports.  Similarly, multicast traffic sent from an LMA\n\
    \   to MAGs proceeds as router-to-router forwarding according to the\n   multicast\
    \ forwarding information base (MFIB) of the LMA and\n   independent of MN's unicast\
    \ addresses, while the MAG proxy instance\n   distributes multicast data down\
    \ the point-to-point links (interfaces)\n   according to its own MFIB, independent\
    \ of MN's IP addresses.\n   It remains an open issue how communication proceeds\
    \ in a multi-\n   operator scenario, i.e., from which network the LMA pulls multicast\n\
    \   traffic.  This could be any mobility Operator itself, or a third\n   party.\
    \  However, this backbone routing in general is out of scope of\n   the document,\
    \ and most likely a matter of contracts.\n"
- title: 4.5.  Multihoming Support
  contents:
  - "4.5.  Multihoming Support\n   An MN can connect to a PMIPv6 domain through multiple\
    \ interfaces and\n   experience transparent unicast handovers at all interfaces\
    \ (cf.,\n   Section 5.4 of [RFC5213]).  In such simultaneous access scenarios,\
    \ it\n   can autonomously assign multicast channel subscriptions to individual\n\
    \   interfaces (see [RFC5757] for additional details).  While doing so,\n   multicast\
    \ mobility operations described in this document will\n   transparently preserve\
    \ the association of channels to interfaces in\n   the following way.\n   Multicast\
    \ listener states are kept per interface in the MLD state\n   table.  An MN will\
    \ answer to an MLD General Query received on a\n   specific (re-attaching) interface\
    \ according to the specific\n   interface's state table.  Thereafter, multicast\
    \ forwarding is resumed\n   for channels identical to those under subscription\
    \ prior to handover.\n   Consequently, an MN in a PMIPv6 domain may use multiple\
    \ interfaces to\n   facilitate load balancing or redundancy, but cannot follow\
    \ a 'make-\n   before-break' approach to service continuation on handovers.\n"
- title: 4.6.  Multicast Availability throughout the Access Network
  contents:
  - "4.6.  Multicast Availability throughout the Access Network\n   There may be deployment\
    \ scenarios where multicast services are\n   available throughout the access network,\
    \ independent of the PMIPv6\n   infrastructure.  Direct multicast access at MAGs\
    \ may be supported\n   through native multicast routing within a flat access network\
    \ that\n   includes a multicast router, via dedicated (tunnel or VPN) links\n\
    \   between MAGs and designated multicast routers, or by deploying\n   Automatic\
    \ Multicast Tunneling (AMT) [AUTO-MULTICAST].\n   Multicast deployment can be\
    \ simplified in these scenarios.  A single\n   proxy instance at MAGs with up-link\
    \ to the multicast cloud, for\n   instance, could serve group communication purposes.\
    \  MAGs could\n   operate as general multicast routers or AMT gateways as well.\n\
    \   Common to these solutions is that mobility management is covered by\n   the\
    \ dynamics of multicast routing, as initially foreseen in the\n   Remote Subscription\
    \ approach, i.e., join via a local multicast router\n   as sketched in [RFC3775].\
    \  Care must be taken to avoid avalanche\n   problems or service disruptions due\
    \ to tardy multicast routing\n   operations and to adapt to different link-layer\
    \ technologies\n   [RFC5757].  The different possible approaches should be carefully\n\
    \   investigated beyond the initial sketch in Appendix C.  Such work is\n   beyond\
    \ the scope of this document.\n"
- title: 4.7.  A Note on Explicit Tracking
  contents:
  - "4.7.  A Note on Explicit Tracking\n   An IGMPv3/MLDv2 Querier may operate in\
    \ combination with explicit\n   tracking as described in Appendix A.2 of [RFC3376],\
    \ or Appendix A.2\n   of [RFC3810].  This mechanism allows routers to monitor\
    \ each\n   multicast receiver individually.  Even though this procedure is not\n\
    \   standardized yet, it is widely implemented by vendors as it supports\n   faster\
    \ leave latencies and reduced signaling.\n   Enabling explicit tracking on downstream\
    \ interfaces of the LMA and\n   MAG would track a single MAG and MN respectively\
    \ per interface.  It\n   may be used to preserve bandwidth on the MAG-MN link.\n"
- title: 5.  Message Source and Destination Address
  contents:
  - "5.  Message Source and Destination Address\n   This section describes source\
    \ and destination addresses of MLD\n   messages and encapsulating outer headers\
    \ when deployed in the PMIPv6\n   domain.  This overview is for clarification\
    \ purposes only and does\n   not define a behavior different from referenced standards\
    \ in any way.\n   The interface identifier A-B denotes an interface on node A,\
    \ which is\n   connected to node B.  This includes tunnel interfaces.  Destination\n\
    \   addresses for MLD/IGMP messages shall be as specified in Section 8 of\n  \
    \ [RFC2710] for MLDv1, and Sections 5.1.15 and 5.2.14 of [RFC3810] for\n   MLDv2.\n"
- title: 5.1.  Query
  contents:
  - "5.1.  Query\n   +===========+================+======================+==========+\n\
    \   | Interface | Source Address | Destination Address  | Header   |\n   +===========+================+======================+==========+\n\
    \   |           | LMAA           | Proxy-CoA            | outer    |\n   + LMA-MAG\
    \   +----------------+----------------------+----------+\n   |           | LMA-link-local\
    \ | [RFC2710], [RFC3810] | inner    |\n   +-----------+----------------+----------------------+----------+\n\
    \   | MAG-MN    | MAG-link-local | [RFC2710], [RFC3810] |   --     |\n   +-----------+----------------+----------------------+----------+\n"
- title: 5.2.  Report/Done
  contents:
  - "5.2.  Report/Done\n   +===========+================+======================+==========+\n\
    \   | Interface | Source Address | Destination Address  | Header   |\n   +===========+================+======================+==========+\n\
    \   | MN-MAG    | MN-link-local  | [RFC2710], [RFC3810] |   --     |\n   +-----------+----------------+----------------------+----------+\n\
    \   |           | Proxy-CoA      | LMAA                 | outer    |\n   + MAG-LMA\
    \   +----------------+----------------------+----------+\n   |           | MAG-link-local\
    \ | [RFC2710], [RFC3810] | inner    |\n   +-----------+----------------+----------------------+----------+\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   This document does not introduce additional messages\
    \ or novel\n   protocol operations.  Consequently, no additional threats are\n\
    \   introduced by this document beyond those identified as security\n   concerns\
    \ of [RFC3810], [RFC4605], [RFC5213], and [RFC5844].\n   However, particular attention\
    \ should be paid to implications of\n   combining multicast and mobility management\
    \ at network entities.  As\n   this specification allows mobile nodes to initiate\
    \ the creation of\n   multicast forwarding states at MAGs and LMAs while changing\n\
    \   attachments, threats of resource exhaustion at PMIP routers and\n   access\
    \ networks arrive from rapid state changes, as well as from\n   high-volume data\
    \ streams routed into access networks of limited\n   capacities.  In addition\
    \ to proper authorization checks of MNs, rate\n   controls at replicators may\
    \ be required to protect the agents and the\n   downstream networks.  In particular,\
    \ MLD proxy implementations at\n   MAGs should carefully procure automatic multicast\
    \ state extinction on\n   the departure of MNs, as mobile multicast listeners\
    \ in the PMIPv6\n   domain will not actively terminate group membership prior\
    \ to\n   departure.\n"
- title: 7.  Acknowledgements
  contents:
  - "7.  Acknowledgements\n   This memo follows initial requirements work presented\
    \ in \"Multicast\n   Support Requirements for Proxy Mobile IPv6\" (July 2009),\
    \ and is the\n   outcome of extensive previous discussions and a follow-up of\
    \ several\n   initial documents on the subject.  The authors would like to thank\n\
    \   (in alphabetical order) Jari Arkko, Luis M. Contreras, Greg Daley,\n   Gorry\
    \ Fairhurst, Dirk von Hugo, Liu Hui, Seil Jeon, Jouni Korhonen,\n   Guang Lu,\
    \ Sebastian Meiling, Akbar Rahman, Imed Romdhani, Behcet\n   Sarikaya, Pierrick\
    \ Seite, Stig Venaas, and Juan Carlos Zuniga for\n   advice, help, and reviews\
    \ of the document.  Funding by the German\n   Federal Ministry of Education and\
    \ Research within the G-LAB\n   Initiative is gratefully acknowledged.\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [RFC2710]  Deering, S., Fenner, W., and B. Haberman,\
    \ \"Multicast\n              Listener Discovery (MLD) for IPv6\", RFC 2710,\n\
    \              October 1999.\n   [RFC3376]  Cain, B., Deering, S., Kouvelas, I.,\
    \ Fenner, B., and A.\n              Thyagarajan, \"Internet Group Management Protocol,\
    \ Version\n              3\", RFC 3376, October 2002.\n   [RFC3775]  Johnson,\
    \ D., Perkins, C., and J. Arkko, \"Mobility Support\n              in IPv6\",\
    \ RFC 3775, June 2004.\n   [RFC3810]  Vida, R. and L. Costa, \"Multicast Listener\
    \ Discovery\n              Version 2 (MLDv2) for IPv6\", RFC 3810, June 2004.\n\
    \   [RFC4605]  Fenner, B., He, H., Haberman, B., and H. Sandick,\n           \
    \   \"Internet Group Management Protocol (IGMP) / Multicast\n              Listener\
    \ Discovery (MLD)-Based Multicast Forwarding\n              (\"IGMP/MLD Proxying\"\
    )\", RFC 4605, August 2006.\n   [RFC5213]  Gundavelli, S., Leung, K., Devarapalli,\
    \ V., Chowdhury, K.,\n              and B. Patil, \"Proxy Mobile IPv6\", RFC 5213,\
    \ August 2008.\n   [RFC5844]  Wakikawa, R. and S. Gundavelli, \"IPv4 Support for\
    \ Proxy\n              Mobile IPv6\", RFC 5844, May 2010.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [AUTO-MULTICAST]\n              Thaler, D.,\
    \ Talwar, M., Aggarwal, A., Vicisano, L., and T.\n              Pusateri, \"Automatic\
    \ IP Multicast Without Explicit Tunnels\n              (AMT)\", Work in Progress,\
    \ March 2010.\n   [RFC2236]  Fenner, W., \"Internet Group Management Protocol,\
    \ Version\n              2\", RFC 2236, November 1997.\n   [RFC5757]  Schmidt,\
    \ T., Waehlisch, M., and G. Fairhurst, \"Multicast\n              Mobility in\
    \ Mobile IP Version 6 (MIPv6): Problem Statement\n              and Brief Survey\"\
    , RFC 5757, February 2010.\n   [RFC5845]  Muhanna, A., Khalil, M., Gundavelli,\
    \ S., and K. Leung,\n              \"Generic Routing Encapsulation (GRE) Key Option\
    \ for Proxy\n              Mobile IPv6\", RFC 5845, June 2010.\n"
- title: Appendix A.  Initial MLD Queries on Upcoming Links
  contents:
  - "Appendix A.  Initial MLD Queries on Upcoming Links\n   According to [RFC3810]\
    \ and [RFC2710], when an IGMP-/MLD-enabled\n   multicast router starts operating\
    \ on a subnet, by default it\n   considers itself as querier and sends several\
    \ General Queries.  Such\n   initial query should be sent by the router immediately,\
    \ but could be\n   delayed by a (tunable) Startup Query Interval (see Sections\
    \ 7.6.2 and\n   9.6 of [RFC3810]).\n   Experimental tests on Linux and Cisco systems\
    \ have revealed immediate\n   IGMP Queries followed a link trigger event (within\
    \ a fraction of 1\n   ms), while MLD queries immediately followed the autoconfiguration\
    \ of\n   IPv6 link-local addresses at the corresponding interface.\n"
- title: Appendix B.  State of IGMP/MLD Proxy Implementations
  contents:
  - "Appendix B.  State of IGMP/MLD Proxy Implementations\n   The deployment scenario\
    \ defined in this document requires certain\n   proxy functionalities at the MAGs\
    \ that implementations of [RFC4605]\n   need to contribute.  In particular, a\
    \ simultaneous support of IGMP\n   and MLD is needed, as well as a configurable\
    \ list of downstream\n   interfaces that may be altered during runtime, and the\
    \ deployment of\n   multiple proxy instances at a single router that can operate\n\
    \   independently on separated interfaces.\n   A brief experimental trial undertaken\
    \ in February 2010 revealed the\n   following divergent statuses of selected IGMP/MLD\
    \ proxy\n   implementations.\n   Cisco Edge Router:  Software-based commodity\
    \ edge routers (test\n      device from the 26xx-Series) implement IGMPv2/v3 proxy\
    \ functions\n      only in combination with Protocol Independent Multicast - Sparse\n\
    \      Mode (PIM-SM).  There is no support of MLD proxy.  Interfaces are\n   \
    \   dynamically configurable at runtime via the command line\n      interface,\
    \ but multiple proxy instances are not supported.\n   Linux igmpproxy:  IGMPv2\
    \ Proxy implementation that permits a static\n      configuration of downstream\
    \ interfaces (simple bug fix required).\n      Multiple instances are prevented\
    \ by a lock (corresponding code\n      reused from a previous Distance Vector\
    \ Multicast Routing Protocol\n      (DVMRP) implementation).  IPv6/MLD is unsupported.\
    \  Project page:\n      http://sourceforge.net/projects/igmpproxy/.\n   Linux\
    \ gproxy:  IGMPv3 Proxy implementation that permits configuration\n      of the\
    \ upstream interface, only.  Downstream interfaces are\n      collected at startup\
    \ without dynamic extension of this list.  No\n      support of multiple instances\
    \ or MLD.\n   Linux ecmh:  MLDv1/2 Proxy implementation without IGMP support that\n\
    \      inspects IPv4 tunnels and detects encapsulated MLD messages.\n      Allows\
    \ for dynamic addition of interfaces at runtime and multiple\n      instances.\
    \  However, downstream interfaces cannot be configured.\n      Project page: http://sourceforge.net/projects/ecmh/\n"
- title: Appendix C.  Comparative Evaluation of Different Approaches
  contents:
  - "Appendix C.  Comparative Evaluation of Different Approaches\n   In this section,\
    \ we briefly evaluate two orthogonal PMIP concepts for\n   multicast traffic organization\
    \ at LMAs.  In scenario A, multicast is\n   provided by combined unicast/multicast\
    \ LMAs as described in this\n   document.  Scenario B directs traffic via a dedicated,\
    \ central\n   multicast router (\"LMA-M\") that tunnels packets to MAGs independent\n\
    \   of unicast handoffs.\n   Neither approach establishes native multicast distribution\
    \ between\n   the LMA and MAG; instead, they use tunneling mechanisms.  In scenario\n\
    \   A, a MAG is connected to different multicast-enabled LMAs and can\n   receive\
    \ the same multicast stream via multiple paths depending on the\n   group subscriptions\
    \ of MNs and their associated LMAs.  This problem,\n   a.k.a. the tunnel convergence\
    \ problem, may lead to redundant traffic\n   at the MAGs.  In contrast, scenario\
    \ B configures MAGs to establish a\n   tunnel to a single, dedicated multicast\
    \ LMA for all attached MNs and\n   relocates overhead costs to the multicast anchor.\
    \  This eliminates\n   redundant traffic but may result in an avalanche problem\
    \ at the LMA.\n   We quantify the costs of both approaches based on two metrics:\
    \ the\n   amount of redundant traffic at MAGs and the number of simultaneous\n\
    \   streams at LMAs.  Realistic values depend on the topology and the\n   group\
    \ subscription model.  To explore scalability in a large PMIP\n   domain of 1,000,000\
    \ MNs, we consider the following two extreme\n   multicast settings.\n   1.  All\
    \ MNs participate in distinct multicast groups.\n   2.  All MNs join the same\
    \ multicast group.\n   A typical PMIP deployment approximately allows for 5,000\
    \ MNs attached\n   to one MAG, while 50 MAGs can be served by one LMA.  Hence\
    \ 1,000,000\n   MNs require approximately 200 MAGs backed by 4 LMAs for unicast\n\
    \   transmission.  In scenario A, these LMAs also forward multicast\n   streams,\
    \ while in scenario B one additional dedicated LMA (LMA-M)\n   serves multicast.\
    \  In the following, we calculate the metrics\n   described above.  In addition,\
    \ we display the number of packet\n   streams that cross the interconnecting (wired)\
    \ network within a\n   PMIPv6 domain.\n   Setting 1:\n   +===================+==============+================+===============+\n\
    \   | PMIP multicast    | # of redund. |   # of simul.  |  # of total   |\n  \
    \ | scheme            |   streams    |    streams     |   streams in  |\n   |\
    \                   |   at MAG     |  at LMA/LMA-M  |   the network |\n   +===================+==============+================+===============+\n\
    \   | Combined Unicast/ |        0     |     250,000    |  1,000,000    |\n  \
    \ | Multicast LMA     |              |                |               |\n   +-------------------+--------------+----------------+---------------+\n\
    \   | Dedicated         |        0     |   1,000,000    |  1,000,000    |\n  \
    \ | Multicast LMA     |              |                |               |\n   +-------------------+--------------+----------------+---------------+\n\
    \        1,000,000 MNs are subscribed to distinct multicast groups.\n   Setting\
    \ 2:\n   +===================+==============+================+===============+\n\
    \   | PMIP multicast    | # of redund. |   # of simul.  |  # of total   |\n  \
    \ | scheme            |   streams    |    streams     |   streams in  |\n   |\
    \                   |   at MAG     |  at LMA/LMA-M  |   the network |\n   +===================+==============+================+===============+\n\
    \   | Combined Unicast/ |        3     |       200      |     800       |\n  \
    \ | Multicast LMA     |              |                |               |\n   +-------------------+--------------+----------------+---------------+\n\
    \   | Dedicated         |        0     |       200      |     200       |\n  \
    \ | Multicast LMA     |              |                |               |\n   +-------------------+--------------+----------------+---------------+\n\
    \         1,000,000 MNs are subscribed to the same multicast group.\n   These\
    \ considerations of extreme settings show that packet duplication\n   and replication\
    \ effects apply in changing intensities for different\n   use cases of multicast\
    \ data services.  However, tunnel convergence,\n   i.e., duplicate data arriving\
    \ at a MAG, does cause much smaller\n   problems in scalability than the stream\
    \ replication at LMAs\n   (avalanche problem).  For scenario A, it should also\
    \ be noted that\n   the high stream replication requirements at LMAs in setting\
    \ 1 can be\n   attenuated by deploying additional LMAs in a PMIP domain, while\n\
    \   scenario B does not allow for distributing the LMA-M, as no handover\n   management\
    \ is available at LMA-M.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Thomas C. Schmidt\n   HAW Hamburg\n   Berliner Tor 7\n\
    \   Hamburg  20099\n   Germany\n   EMail: schmidt@informatik.haw-hamburg.de\n\
    \   URI:   http://inet.cpt.haw-hamburg.de/members/schmidt\n   Matthias Waehlisch\n\
    \   link-lab & FU Berlin\n   Hoenower Str. 35\n   Berlin  10318\n   Germany\n\
    \   EMail: mw@link-lab.net\n   Suresh Krishnan\n   Ericsson\n   8400 Decarie Blvd.\n\
    \   Town of Mount Royal, QC\n   Canada\n   EMail: suresh.krishnan@ericsson.com\n"
