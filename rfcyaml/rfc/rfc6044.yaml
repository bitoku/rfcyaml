- title: __initial_text__
  contents:
  - ''
- title: Independent Submission                                         M. Mohali
  contents:
  - 'Independent Submission                                         M. Mohali

    '
- title: Mapping and Interworking of Diversion Information between Diversion and
  contents:
  - "Mapping and Interworking of Diversion Information between Diversion and\n   \
    \  History-Info Headers in the Session Initiation Protocol (SIP)\n"
- title: Abstract
  contents:
  - "Abstract\n   Although the SIP History-Info header is the solution adopted in\
    \ IETF,\n   the non-standard Diversion header is nevertheless widely implemented\n\
    \   and used for conveying call-diversion-related information in SIP\n   signaling.\n\
    \   This document describes a recommended interworking guideline between\n   the\
    \ Diversion header and the History-Info header to handle call\n   diversion information.\
    \  In addition, an interworking policy is\n   proposed to manage the headers'\
    \ coexistence.  The History-Info header\n   is described in RFC 4244 and the non-standard\
    \ Diversion header is\n   described, as Historic, in RFC 5806.\n   Since the Diversion\
    \ header is used in many existing network\n   implementations for the transport\
    \ of call diversion information, its\n   interworking with the SIP History-Info\
    \ standardized solution is\n   needed.  This work is intended to enable the migration\
    \ from non-\n   standard implementations and deployment toward IETF specification-\n\
    \   based implementations and deployment.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This is a contribution to\
    \ the RFC Series, independently of any other\n   RFC stream.  The RFC Editor has\
    \ chosen to publish this document at\n   its discretion and makes no statement\
    \ about its value for\n   implementation or deployment.  Documents approved for\
    \ publication by\n   the RFC Editor are not a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc6044.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2010 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \      1.1. Overview ...................................................3\n  \
    \    1.2. Background .................................................3\n   2.\
    \ Problem Statement ...............................................4\n      2.1.\
    \ Interworking Requirements and Scope ........................4\n      2.2. Interworking\
    \ Recommendations ...............................6\n           2.2.1. SIP Network/Terminal\
    \ Using Diversion to SIP\n                  Network/Terminal Using History-Info\
    \ Header ..........6\n           2.2.2. SIP Network/Terminal Using History-Info\n\
    \                  Header to SIP Network/terminal Using Diversion\n          \
    \        Header ..............................................8\n   3. Headers\
    \ Syntaxes Reminder .......................................9\n      3.1. History-Info\
    \ Header Syntax .................................9\n      3.2. Diversion Header\
    \ Syntax ...................................11\n   4. Headers in SIP Method ..........................................11\n\
    \   5. Diversion Header to History-Info Header ........................12\n  \
    \ 6. History-Info Header to Diversion Header ........................15\n   7.\
    \ Examples .......................................................17\n      7.1.\
    \ Example with Diversion Header Changed into\n           History-Info Header .......................................17\n\
    \      7.2. Example with History-Info Header Changed into\n           Diversion\
    \ Header ..........................................17\n      7.3. Example with\
    \ Two SIP Networks Using History-Info Header ...17\n      7.4. Additional Interworking\
    \ Cases .............................19\n   8. Security Considerations ........................................20\n\
    \   9. Acknowledgements ...............................................21\n  \
    \ 10. References ....................................................21\n    \
    \  10.1. Normative References .....................................21\n      10.2.\
    \ Informative References ...................................21\n   Appendix A.\
    \  Interworking between Diversion Header and\n                Voicemail URI ........................................23\n"
- title: 1.  Introduction
  contents:
  - '1.  Introduction

    '
- title: 1.1.  Overview
  contents:
  - "1.1.  Overview\n   For some VoIP-based (Voice over IP) services (e.g., voicemail,\n\
    \   Interactive Voice Recognition (IVR) or automatic call distribution),\n   it\
    \ is helpful for the called SIP user agent to identify from whom and\n   why the\
    \ session was diverted.  For this information to be used by\n   various service\
    \ providers or by applications, it needs to pass\n   through the network.  This\
    \ is possible with two different SIP\n   headers: the History-Info header defined\
    \ in [RFC4244] and the\n   historic Diversion header defined in [RFC5806], which\
    \ are both able\n   to transport diversion information in SIP signaling.\n   Although\
    \ the Diversion header is not standardized, it is widely used.\n   Therefore,\
    \ it is useful to have guidelines to make this header\n   interwork with the standard\
    \ History-Info header.\n   Note that the new implementation and deployment of\
    \ the Diversion\n   header is strongly discouraged.\n   This document provides\
    \ a mechanism for header-content translation\n   between the Diversion header\
    \ and the History-Info header.\n"
- title: 1.2.  Background
  contents:
  - "1.2.  Background\n   The History-Info header [RFC4244] and its extension for\
    \ forming SIP\n   service URIs (including Voicemail URI) [RFC4458] are recommended\
    \ by\n   the IETF to convey redirection information.  They are also\n   recommended\
    \ in the \"Communication Diversion (CDIV) service\" Third\n   Generation Partnership\
    \ Project (3GPP) specification [TS_24.604].\n   Originally, the Diversion header\
    \ was described in a document that was\n   submitted to the SIP Working Group.\
    \  It has been published now as\n   [RFC5806] for the historical record and to\
    \ provide a reference for\n   this RFC.\n   This header contains a list of diverting\
    \ URIs and associated\n   information providing specific information as the reason\
    \ for the call\n   diversion.  Most existing SIP-based implementations have implemented\n\
    \   the Diversion header when no standard solution was ready to deploy.\n   The\
    \ IETF has finally standardized the History-Info header, partly\n   because it\
    \ can transport general history information.  This allows\n   the receiving part\
    \ to determine how and why the session is received.\n   As the History-Info header\
    \ may contain further information than call\n   diversion information, it is critical\
    \ to avoid losing information and\n   be able to extract the relevant data using\
    \ the retargeting cause URI\n   parameter described in [RFC4458] for the transport\
    \ of the diversion\n   reason.\n   The Diversion header and the History-Info header\
    \ have different\n   syntaxes, described below.  Note that the main difference\
    \ is that the\n   History-Info header is a chronological writing header whereas\
    \ the\n   Diversion header applies a reverse chronology (i.e., the first\n   diversion\
    \ entry read corresponds to the last diverting user).\n   Appendix A provides\
    \ an interworking guideline between the Diversion\n   header and the Voicemail\
    \ URI, which is another way to convey\n   diversion information.  The Voicemail\
    \ URI is defined in [RFC4458].\n"
- title: 2.  Problem Statement
  contents:
  - '2.  Problem Statement

    '
- title: 2.1.  Interworking Requirements and Scope
  contents:
  - "2.1.  Interworking Requirements and Scope\n   This section provides the baseline\
    \ terminology used in the rest of\n   the document and defines the scope of interworking\
    \ between the\n   Diversion header and the History-Info header.\n   There are\
    \ many ways in which SIP signaling can be used to modify a\n   session destination\
    \ before it is established, and there are many\n   reasons for doing so.  The\
    \ behavior of the SIP entities that will\n   have to further process the session\
    \ downstream will sometimes vary\n   depending on the reasons that lead to changing\
    \ the destination.  For\n   example, whether it is for a simple proxy to route\
    \ the session or for\n   an application server to provide a supplementary service.\
    \  The\n   Diversion header and the History-Info header differ in the approach\n\
    \   and scope of addressing this problem.\n   For clarity, the following vocabulary\
    \ is used in this document:\n   o  Retargeting/redirecting: retargeting/redirecting\
    \ refers to the\n      process of a Proxy Server/User Agent Client (UAC) changing\
    \ a\n      Uniform Resource Identifier (URI) in a request and thus changing\n\
    \      the target of the request.  These terms are defined in [RFC4244].\n   \
    \   The History-Info header is used to capture retargeting\n      information.\n\
    \   o  Call forwarding/call diversion/communication diversion: these\n      terms\
    \ are equivalent and refer to the Communications Diversion\n      (CDIV) supplementary\
    \ services, based on the Integrated Services\n      Digital Network (ISDN) Communication\
    \ diversion supplementary\n      services and defined in 3GPP [TS_24.604].  They\
    \ are applicable to\n      entities that are intended to modify the original destination\
    \ of\n      an IP multimedia session during or prior to the session\n      establishment.\n\
    \   This document does not intend to describe when or how History-Info or\n  \
    \ Diversion headers should be used.  Hereafter is provided\n   clarification on\
    \ the context in which the interworking is required.\n   The Diversion header\
    \ has exactly the same scope as the call diversion\n   service and each header\
    \ entry reflects a call diversion invocation.\n   The Diversion header is used\
    \ for recording call forwarding\n   information, which could be useful to network\
    \ entities downstream.\n   Today, this SIP header is implemented by several manufacturers\
    \ and\n   deployed in networks.\n   The History-Info header is used to store all\
    \ retargeting information\n   including call diversion information.  In practice,\
    \ the History-Info\n   header [RFC4244] is used to convey call-diversion-related\
    \ information\n   by using a cause URI parameter [RFC4458] in the relevant entry.\n\
    \   Note, however, that the use of cause URI parameter [RFC4458] in a\n   History-Info\
    \ entry for a call diversion is specific to the 3GPP\n   specification [TS_24.604].\
    \  [RFC4458] focuses on retargeting toward a\n   voicemail server and does not\
    \ specify whether the cause URI parameter\n   should be added in a URI for other\
    \ cases.  As a consequence,\n   implementations that do not use the cause URI\
    \ parameter for call\n   forwarding information are not considered for the mapping\
    \ described\n   in this document.  Nevertheless, some recommendations are given\
    \ in\n   the next sections on how to avoid the loss of non-mapped information\n\
    \   at the boundary between a network region using History-Info header\n   and\
    \ one using the Diversion header.\n   Since both headers address call forwarding\
    \ needs, diverting\n   information could be mixed up or be inconsistent if both\
    \ are present\n   in an uncoordinated fashion in the INVITE request.  So, Diversion\
    \ and\n   History-Info headers must not independently coexist in the same\n  \
    \ session signaling.  This document addresses how to convert\n   information between\
    \ the Diversion header and the History-Info header,\n   and when and how to preserve\
    \ both headers to cover additional cases.\n   For the transportation of consistent\
    \ diversion information\n   downstream, it is necessary to make the two headers\
    \ interwork.\n   Interworking between the Diversion header and the History-Info\
    \ header\n   is introduced in sections 5 and 6.  Since the coexistence scenario\n\
    \   may vary from one use case to another one, guidelines regarding\n   headers\
    \ interaction are proposed.\n"
- title: 2.2.  Interworking Recommendations
  contents:
  - "2.2.  Interworking Recommendations\n   Interworking function:\n      In a normal\
    \ case, the network topology assumption is that the\n      interworking described\
    \ in this document should be performed by a\n      specific SIP border device\
    \ that is aware, by configuration, that\n      it is at the border between two\
    \ regions, one using History-Info\n      header and one using Diversion header.\n\
    \   As History-Info header is a standard solution, a network using the\n   Diversion\
    \ header must be able to provide information to a network\n   using the History-Info\
    \ header.  In this case, to avoid header\n   coexistence, it is required to replace,\
    \ as often as possible, the\n   Diversion header with the History-Info header\
    \ in the INVITE request\n   during the interworking.\n   Since, the History-Info\
    \ header has a wider scope than the Diversion\n   header, it may be used for other\
    \ needs and services than call\n   diversion.  In addition to trace call diversion\
    \ information, the\n   History-Info header also acts as a session history and\
    \ can store all\n   successive R-URI values.  Consequently, even if it should\
    \ be better\n   to remove the History-Info header after the creation of the Diversion\n\
    \   header to avoid confusion, the History-Info header must remain\n   unmodified\
    \ in the SIP signaling if it contains supplementary (non-\n   diversion) information.\
    \  It is possible to have History-Info headers\n   that do not have values that\
    \ can be mapped into the Diversion header.\n   In this case, no interworking with\
    \ Diversion header should be\n   performed, and it must be defined per implementation\
    \ what to do in\n   this case.  This point is left out of the scope of this document.\n\
    \   As a conclusion, it is recommended to have local policies minimizing\n   the\
    \ loss of information and find the best way to keep it up to the\n   terminating\
    \ user agent.\n   The following sections describe the basic common use case.\n\
    \   Additional interworking cases are described in section 7.5.\n"
- title: 2.2.1.  SIP Network/Terminal Using Diversion to SIP Network/Terminal
  contents:
  - "2.2.1.  SIP Network/Terminal Using Diversion to SIP Network/Terminal\n      \
    \  Using History-Info Header\n   When the Diversion header is used to create a\
    \ History-Info header,\n   the Diversion header must be removed in the outgoing\
    \ INVITE.  It is\n   considered that all of the information present in the Diversion\n\
    \   header is transferred in the History-Info header.\n   If a History-Info header\
    \ is present in the incoming INVITE (in\n   addition to Diversion header), the\
    \ Diversion header and History-Info\n   header present must be mixed and only\
    \ the diversion information not\n   yet present in the History-Info header must\
    \ be inserted as a last\n   entry (more recent) in the existing History-Info header,\
    \ as\n   recommended in [RFC4244].\n   As an example, this could be the case of\
    \ an INVITE coming from\n   network_2 using the Diversion header but previously\
    \ passed through\n   network_1 using the History-Info header (or the network_2\
    \ uses\n   History-Info header to transport successive URI information) and\n\
    \   going to network_3 using the History-Info header.\n                      \
    \ IWF*                                  IWF*\n     network1           |      \
    \          network_2            |network_3\n    History-Info        |        \
    \         Diversion           |using\n                        |              \
    \                       |Hist-Info\n                        |                \
    \                     |\n"
- title: UA A    P1     AS B     |       P2     AS C    UA C   AS D    |     UA E
  contents:
  - 'UA A    P1     AS B     |       P2     AS C    UA C   AS D    |     UA E

    '
- title: '|       |       |       |       |       |       |     |       |        |'
  contents:
  - '|       |       |       |       |       |       |     |       |        |

    '
- title: '|INVITE |       |       |       |       |       |     |       |        |'
  contents:
  - '|INVITE |       |       |       |       |       |     |       |        |

    '
- title: '|------>|       |       |       |       |       |     |       |        |'
  contents:
  - '|------>|       |       |       |       |       |     |       |        |

    '
- title: '|       |       |       |       |       |       |     |       |        |'
  contents:
  - '|       |       |       |       |       |       |     |       |        |

    '
- title: '|       |INVITE |       |       |       |       |     |       |        |'
  contents:
  - '|       |INVITE |       |       |       |       |     |       |        |

    '
- title: '|       |------>|       |       |       |       |     |       |        |'
  contents:
  - '|       |------>|       |       |       |       |     |       |        |

    '
- title: '|       |Supported: histinfo    |       |       |     |       |        |'
  contents:
  - '|       |Supported: histinfo    |       |       |     |       |        |

    '
- title: '|       | History-Info:         |       |       |     |       |        |'
  contents:
  - '|       | History-Info:         |       |       |     |       |        |

    '
- title: '|       | <sip:proxyP1>; index=1,       |       |     |       |        |'
  contents:
  - '|       | <sip:proxyP1>; index=1,       |       |     |       |        |

    '
- title: '|       | <sip:userB >; index=1.1       |       |     |       |        |'
  contents:
  - '|       | <sip:userB >; index=1.1       |       |     |       |        |

    '
- title: '|       |       |       |       |       |       |     |       |        |'
  contents:
  - '|       |       |       |       |       |       |     |       |        |

    '
- title: '|       |       |INVITE |       |       |       |     |       |        |'
  contents:
  - '|       |       |INVITE |       |       |       |     |       |        |

    '
- title: '|       |       |------>|       |       |       |     |       |        |'
  contents:
  - '|       |       |------>|       |       |       |     |       |        |

    '
- title: '|       |       |History-Info:  |       |       |     |       |        |'
  contents:
  - '|       |       |History-Info:  |       |       |     |       |        |

    '
- title: '|       |       |<sip:proxyP1>; index=1,|       |     |       |        |'
  contents:
  - '|       |       |<sip:proxyP1>; index=1,|       |     |       |        |

    '
- title: '|       |       |<sip:userB>; index=1.1 |       |     |       |        |'
  contents:
  - '|       |       |<sip:userB>; index=1.1 |       |     |       |        |

    '
- title: '|       |       |<sip:userC>; cause=302; index=1.1.1  |       |        |'
  contents:
  - "|       |       |<sip:userC>; cause=302; index=1.1.1  |       |        |\n  \
    \ In this case, the incoming INVITE contains a Diversion header and a\n   History-Info\
    \ header.  Therefore, as recommended in this document, it\n   is necessary to\
    \ create, for network_3, a single History-Info header\n   gathering existing information\
    \ from both the History-Info and the\n   Diversion headers received.  Anyway,\
    \ it is required from network_2\n   (i.e., IWF) to remove the Diversion header\
    \ when the message is going\n   to a network not using the Diversion header. \
    \ Then, network_3 could\n   use call forwarding information that is present in\
    \ a single header\n   and add its own diversion information if necessary.\n  \
    \ Notes:\n   1. If a network is not able either to use only one header each time\n\
    \      or to maintain both headers up to date, the chronological order\n     \
    \ cannot be certified.\n   2. It is not possible to have only a Diversion header\
    \ when the\n      History-Info header contains more than call diversion information.\n\
    \      If previous policy recommendations are applied, the chronological\n   \
    \   order is respected as Diversion entries are inserted at the end of\n     \
    \ the History-Info header taking into account the Diversion internal\n      chronology.\n"
- title: 2.2.2.  SIP Network/Terminal Using History-Info Header to SIP
  contents:
  - "2.2.2.  SIP Network/Terminal Using History-Info Header to SIP\n        Network/Terminal\
    \ Using Diversion Header\n   When the History-Info header is interpreted to create\
    \ a Diversion\n   header, some precautions must be taken.\n   If the History-Info\
    \ header contains only call forwarding information,\n   then it must be deleted\
    \ after the interworking.\n   If the History-Info header contains other information,\
    \ then only the\n   information of concern to the diverting user must be used\
    \ to create\n   entries in the Diversion header and the History-Info header must\
    \ be\n   kept as received in the INVITE and forwarded downstream.\n   Note: The\
    \ History-Info header could be used for other reasons than\n   call diversion\
    \ services, for example, by a service that needs to know\n   if a specific Application\
    \ Server (AS) had yet been invoked in the\n   signaling path.  If the call is\
    \ later forwarded to a network using\n   the History-Info header, it would be\
    \ better not to lose history\n   information due to passing though the network\
    \ that only supports\n   Diversion headers.  A recommended solution must not disrupt\
    \ the\n   standard behavior and networks that do not implement the History-Info\n\
    \   header must be transparent to a received History-Info header.\n   If a Diversion\
    \ header is present in the incoming INVITE (in addition\n   to History-Info header),\
    \ only diversion information present in the\n   History-Info header but not in\
    \ the Diversion header must be inserted\n   from the last entry (more recent)\
    \ into the existing Diversion header,\n   as recommended in [RFC5806].\n   Note\
    \ that the chronological order could not be certified.  If\n   previous policy\
    \ recommendations are respected, this case should not\n   happen.\n   Forking\
    \ case:\n      The History-Info header enables the recording of sequential\n \
    \     forking for the same served user.  During an interworking, from\n      the\
    \ History-Info header to Diversion header, the History-Info\n      entries containing\
    \ a forking situation (with an incremented\n      \"index\" parameter) could possibly\
    \ be mapped if it contains a call\n      forwarding \"cause\" parameter.  The\
    \ interworking entity could\n      choose to create only a Diversion entry or\
    \ not apply the\n      interworking.  The choice could be done according a local\
    \ policy.\n   The same logic is applied for an interworking with Voicemail URI\
    \ (see\n   the Appendix).\n"
- title: 3.  Headers Syntaxes Reminder
  contents:
  - '3.  Headers Syntaxes Reminder

    '
- title: 3.1.  History-Info Header Syntax
  contents:
  - "3.1.  History-Info Header Syntax\n   History-Info = \"History-Info\" HCOLON hi-entry\
    \ *(COMMA hi-entry)\n     hi-entry           = hi-targeted-to-uri *( SEMI hi-param\
    \ )\n     hi-targeted-to-uri = name-addr\n     hi-param           = hi-index /\
    \ hi-extension\n     hi-index           = \"index\" EQUAL 1*DIGIT *(DOT 1*DIGIT)\n\
    \     hi-extension       = generic-param\n   The History-Info header is specified\
    \ in [RFC4244].  The top-most\n   History-Info entry (first in the list) corresponds\
    \ to the oldest\n   history information.\n   A hi-entry may contain a cause URI\
    \ parameter expressing the diversion\n   reason.  This optional cause URI parameter\
    \ is defined in [RFC4458]\n   with the following syntax:\n   cause-param = \"\
    cause\" EQUAL Status-Code\n   This parameter is also named cause-param and should\
    \ be inserted in\n   the History-Info entry (URI) of the diverted-to user in case\
    \ of call\n   diversion as recommended in the 3GPP CDIV specification [TS_24.604].\n\
    \   The cause values used in the cause-param for the diverting reason are\n  \
    \ listed in the RFC 4458, and because it is a parameter dedicated to\n   call\
    \ forwarding service, its presence is used to determine that a hi-\n   entry is\
    \ a diverting user.  More precisely, each diverting user is\n   located in the\
    \ hi-entry before the one containing a cause-param with\n   a cause value as listed\
    \ in RFC 4458.\n   Moreover, the Reason header defined in [RFC3326] should be\
    \ escaped in\n   the hi-entry of the diverting user when the call diversion is\
    \ due to\n   a received SIP response.  The Reason header contains a cause\n  \
    \ parameter set to the true SIP response code received (Status-Code).\n   Therefore,\
    \ in case of call diversion due to a SIP response, both\n   cause parameters should\
    \ be used.  The complexity is that these\n   parameters could be used at the same\
    \ time in the History-Info header\n   but not in the same hi-entry and not with\
    \ the same meaning.  Only the\n   cause-param is dedicated to call diversion service.\
    \  The 'cause'\n   Reason header parameter is not taken into account in the mapping\
    \ with\n   a Diversion header.\n   [RFC4458] also defines the 'target' URI parameter,\
    \ which could be\n   inserted in a R-URI and consequently in the hi-targeted-to-uri.\
    \  This\n   parameter is used to keep the diverting user address in the\n   downstream\
    \ INVITE request in Voicemail URI implementation.  As this\n   information is\
    \ already present in the hi-entries, the 'target' URI\n   parameter is not taken\
    \ into account regarding the interworking with\n   the Diversion header.  From\
    \ the Diversion header, it could be\n   possible to create the 'target' URI parameter\
    \ in the hi-entries\n   and/or in the R-URI, but this possibility is based on\
    \ local policies\n   not described in this document.\n   A Privacy header, as\
    \ defined in [RFC3323], could also be included in\n   hi-entries with the 'history'\
    \ value defined in the [RFC4244].\n   The index parameter is a string of digits,\
    \ separated by dots, to\n   indicate the number of forward hops and retargets.\n\
    \   Note: A history entry could contain the \"gr\" parameter.  Regardless\n  \
    \ of the rules concerning the \"gr\" parameter defined in [TS_24.604],\n   which\
    \ must be applied, this parameter has no impact on the mapping\n   and must only\
    \ be copied with the served user address.\n   Example:\n   History-Info:\n   <sip:\
    \ diverting_user1_addr?Privacy=none?Reason=SIP%3Bcause%\n   3D302>;index=1,\n\
    \   <sip: diverting_user2_addr;cause=480?Privacy=history>;index=1.1,\n   <sip:last_diversion_target;cause=486>;\
    \ index=1.1.1\n   Policy concerning \"histinfo\" option tag in Supported header:\n\
    \   According to [RFC4244], a proxy that receives a Request with the\n   \"histinfo\"\
    \ option tag in the Supported header should return captured\n   History-Info in\
    \ subsequent, provisional and final responses to the\n   Request.  The behavior\
    \ depends upon whether or not the local policy\n   supports the capture of History-Info.\n"
- title: 3.2.  Diversion Header Syntax
  contents:
  - "3.2.  Diversion Header Syntax\n   The following text is restating the exact syntax\
    \ that the production\n   rules in [RFC5806] define, but using [RFC5234] ABNF:\n\
    \    Diversion = \"Diversion\" HCOLON diversion-params\n                     \
    \            *(COMMA diversion-params)\n    diversion-params    = name-addr *(SEMI\
    \ (diversion-reason /\n                          diversion-counter / diversion-limit\
    \ /\n                          diversion-privacy / diversion-screen /\n      \
    \                    diversion-extension))\n    diversion-reason    = \"reason\"\
    \ EQUAL (\"unknown\" / \"user-busy\" /\n                          \"no-answer\"\
    \ / \"unavailable\" / \"unconditional\"\n                          / \"time-of-day\"\
    \ / \"do-not-disturb\" /\n                          \"deflection\" / \"follow-me\"\
    \ / \"out-of-service\"\n                          / \"away\" / token / quoted-string)\n\
    \    diversion-counter   = \"counter\" EQUAL 1*2DIGIT\n    diversion-limit   \
    \  = \"limit\" EQUAL 1*2DIGIT\n    diversion-privacy   = \"privacy\" EQUAL (\"\
    full\" / \"name\" / \"uri\" /\n                          \"off\" / token / quoted-string)\n\
    \    diversion-screen    = \"screen\" EQUAL (\"yes\" / \"no\" / token /\n    \
    \                      quoted-string)\n    diversion-extension = token [EQUAL\
    \ (token / quoted-string)]\n   Note: The Diversion header could be used in the\
    \ comma-separated\n   format, as described below, and in a header-separated format.\
    \  Both\n   formats could be combined a received INVITE as recommended in\n  \
    \ [RFC3261].\n   Example:\n   Diversion:\n   diverting_user2_addr; reason=\"user-busy\"\
    ; counter=1; privacy=full,\n   diverting_user1_addr; reason=\"unconditional\"\
    ; counter=1; privacy=off\n"
- title: 4.  Headers in SIP Method
  contents:
  - "4.  Headers in SIP Method\n   The recommended interworking presented in this\
    \ document should apply\n   only for INVITE requests.\n   In 3xx responses, both\
    \ headers could be present.\n   When a proxy wants to interwork with a network\
    \ supporting the other\n   header field, it should apply the interworking between\
    \ Diversion\n   header and History-Info header in the 3xx response.\n   When a\
    \ recursing proxy redirects an initial INVITE after receiving a\n   3xx response,\
    \ it should add as a last entry either a Diversion header\n   or a History-Info\
    \ header (according to its capabilities) in the\n   forwarded INVITE.  Local policies\
    \ could apply to send the received\n   header in the next INVITE.\n   Other messages\
    \ where History-Info could be present are not used for\n   the call forwarding\
    \ service and should not be changed into Diversion\n   header.  The destination\
    \ network must be transparent to the received\n   History-Info header.\n   Note:\
    \ the following mapping is inspired from the ISDN User Part\n   (ISUP) to the\
    \ SIP interworking described in [TS_29.163].\n"
- title: 5.  Diversion Header to History-Info Header
  contents:
  - "5.  Diversion Header to History-Info Header\n   The following text is valid only\
    \ if no History-Info is present in the\n   INVITE request.  If at least one History-Info\
    \ header is present, the\n   interworking function must adapt its behavior to\
    \ respect the\n   chronological order.  See section 2.2.\n   For N Diversion entries,\
    \ N+1 History-Info entries must be created.\n   To create the History-Info entries\
    \ in the same order than during a\n   session establishment, the Diversion entries\
    \ must be mapped from the\n   bottom-most until the top-most.  Each Diversion\
    \ entry shall be mapped\n   into a History-Info entry.  An additional History-Info\
    \ entry (the\n   last one) must be created with the diverted-to party address\
    \ present\n   in the R-URI of the received INVITE.  The mapping is described below.\n\
    \   The first entry created in the History-Info header contains:\n   - a hi-targeted-to-uri\
    \ with the name-addr parameter of the bottom-\n     most Diversion header.\n \
    \  - if a privacy parameter is present in the bottom-most Diversion\n     entry,\
    \ then a Privacy header could be escaped in the History-Info\n     header as described\
    \ below.\n   - an index set to 1.\n   For each following Diversion entry (from\
    \ bottom to top), the History-\n   info entries are created as following (from\
    \ top to bottom):\n"
- title: Source                                   Destination
  contents:
  - 'Source                                   Destination

    '
- title: 'Diversion header component:              History-Info header component:'
  contents:
  - 'Diversion header component:              History-Info header component:

    '
- title: =======================================================================
  contents:
  - '=======================================================================

    '
- title: name-addr                                hi-targeted-to-uri
  contents:
  - 'name-addr                                hi-targeted-to-uri

    '
- title: =======================================================================
  contents:
  - '=======================================================================

    '
- title: Reason of the previous                   cause-param (not present in
  contents:
  - 'Reason of the previous                   cause-param (not present in

    '
- title: Diversion entry                          the first created hi-entry)
  contents:
  - 'Diversion entry                          the first created hi-entry)

    '
- title: '"unknown"---------------------------------404 (default ''cause'' value)'
  contents:
  - '"unknown"---------------------------------404 (default ''cause'' value)

    '
- title: '"unconditional"---------------------------302'
  contents:
  - '"unconditional"---------------------------302

    '
- title: '"user-busy"-------------------------------486'
  contents:
  - '"user-busy"-------------------------------486

    '
- title: '"no-answer"-------------------------------408'
  contents:
  - '"no-answer"-------------------------------408

    '
- title: '"deflection "-----------------------------480 or 487'
  contents:
  - '"deflection "-----------------------------480 or 487

    '
- title: '"unavailable"-----------------------------404'
  contents:
  - '"unavailable"-----------------------------404

    '
- title: '"time-of-day"-----------------------------404 (default)'
  contents:
  - '"time-of-day"-----------------------------404 (default)

    '
- title: '"do-not-disturb"--------------------------404 (default)'
  contents:
  - '"do-not-disturb"--------------------------404 (default)

    '
- title: '"follow-me"-------------------------------404 (default)'
  contents:
  - '"follow-me"-------------------------------404 (default)

    '
- title: '"out-of-service"--------------------------404 (default)'
  contents:
  - '"out-of-service"--------------------------404 (default)

    '
- title: '"away"------------------------------------404 (default)'
  contents:
  - '"away"------------------------------------404 (default)

    '
- title: =======================================================================
  contents:
  - '=======================================================================

    '
- title: Counter                                   hi-index
  contents:
  - 'Counter                                   hi-index

    '
- title: '"1" or parameter -------------------------The previous created index'
  contents:
  - '"1" or parameter -------------------------The previous created index

    '
- title: not present                               is incremented with ".1"
  contents:
  - 'not present                               is incremented with ".1"

    '
- title: Superior to "1" --------------------------Create N-1 placeholder History
  contents:
  - 'Superior to "1" --------------------------Create N-1 placeholder History

    '
- title: (i.e., N)                                 entry with the previous index
  contents:
  - "(i.e., N)                                 entry with the previous index\n   \
    \                                       incremented with \".1\"\n            \
    \                              Then the History-Info header\n                \
    \                          created with the Diversion\n                      \
    \                    entry with the previous index\n                         \
    \                 incremented with \".1\"\n"
- title: =======================================================================
  contents:
  - '=======================================================================

    '
- title: Privacy                                   Privacy header escaped in the
  contents:
  - "Privacy                                   Privacy header escaped in the\n   \
    \                                       hi-targeted-to-uri\n"
- title: '"full"------------------------------------"history"'
  contents:
  - '"full"------------------------------------"history"

    '
- title: '"Off"-------------------------------------Privacy header field'
  contents:
  - "\"Off\"-------------------------------------Privacy header field\n          \
    \                                absent or \"none\"\n"
- title: '"name"------------------------------------"history"'
  contents:
  - '"name"------------------------------------"history"

    '
- title: '"uri"-------------------------------------"history"'
  contents:
  - '"uri"-------------------------------------"history"

    '
- title: =======================================================================
  contents:
  - "=======================================================================\n   A\
    \ last History-Info entry is created and contains:\n   - a hi-targeted-to-uri\
    \ with the Request-URI of the INVITE request.\n   - a cause-param from the top-most\
    \ Diversion entry, mapped from the\n     diversion-reason as described above.\n\
    \   - if a privacy parameter is present in the top-most Diversion entry,\n   \
    \  then a Privacy header could be escaped in the History-Info header\n     as\
    \ described above.\n   - an index set to the previous created index and incremented\
    \ with\n     \".1\"\n   Notes:\n   1. For other optional Diversion parameters,\
    \ there is no\n      recommendation as History-Info header does not provide equivalent\n\
    \      parameters.\n   2. For values of the diversion-reason values that are mapped\
    \ with a\n      recommended default value, it could also be possible to choose\n\
    \      another value.  The cause-param URI parameter offers less possible\n  \
    \    values than the diversion-reason parameter.  However, it has been\n     \
    \ considered that cause-param values list was sufficient to\n      implement CDIV\
    \ service as defined in 3GPP [TS_24.604] as it covers\n      a large portion of\
    \ cases.\n   3. The Diversion header could contain a Tel:URI in the name-addr\n\
    \      parameter, but it seems not possible to have a Tel:URI in the\n      History-Info\
    \ header.  [RFC3261] gives an indication as to the\n      mapping between sip:\
    \ and Tel:URIs, but in this particular case, it\n      is difficult to assign\
    \ a valid hostport as the diversion has\n      occurred in a previous network\
    \ and a valid hostport is difficult\n      to determine.  So, it is suggested\
    \ that in case of Tel:URI in the\n      Diversion header, the History-Info header\
    \ should be created with a\n      SIP URI with user=phone.\n   4. The Diversion\
    \ header allows the carrying of a counter that retains\n      the information\
    \ about the number of successive redirections.  The\n      History-Info header\
    \ does not have an equivalent because to trace\n      and count the number of\
    \ diversion it is necessary to count cause\n      parameter containing a value\
    \ associated to a call diversion.  Read\n      the index value is not enough.\
    \  With the use of the \"placeholder\"\n      entry, the History-Info header entries\
    \ could reflect the real\n      number of diversion occurred.\n   Example of placeholder\
    \ entry in the History-Info header:\n      <sip:unknown@unknown.invalid;cause=xxx>;index=1.1\n\
    \      <sip:bob_addr;cause=404>;index=1.1.1\n   \"cause=xxx\" reflects the diverting\
    \ reason of a previous diverting\n   user.  For a placeholder hi-entry, the value\
    \ \"404\" must be taken for\n   the cause-param and so, located in the next hi-entry.\n\
    \   Concerning local policies recommendations about headers coexistence\n   in\
    \ the INVITE request, see sections 2.2 and 7.5.\n"
- title: 6.  History-Info Header to Diversion Header
  contents:
  - "6.  History-Info Header to Diversion Header\n   To create the Diversion entries\
    \ in the same order than during a\n   session establishment, the History-Info\
    \ entries must be mapped from\n   the top-most until the bottom-most.  The first\
    \ History-Info header\n   entry selected will be mapped into the last Diversion\
    \ header entry\n   and so on.  One Diversion header entry must be created for\
    \ each\n   History-Info entry, with a cause-param reflecting a diverting reason\n\
    \   as listed in the [RFC4458].\n   In this case, the History-Info header must\
    \ be mapped into the\n   Diversion header as following:\n   Source           \
    \                         Destination\n   History-Info header component:     \
    \       Diversion header component:\n   =====================================================================\n\
    \   hi-targeted-to-uri of the                   name-addr\n   History-Info that\
    \ precedes the one\n   containing a diverting cause-param.\n   =====================================================================\n\
    \   cause-param                               Reason\n   404---------------------------------------\"\
    unknown\" (default value)\n   302---------------------------------------\"unconditional\"\
    \n   486---------------------------------------\"user-busy\"\n   408---------------------------------------\"\
    no-answer\"\n   480 or 487--------------------------------\"deflection \"\n  \
    \ 503---------------------------------------\"unavailable\"\n   =====================================================================\n\
    \   hi-index                                   Counter\n   Mandatory parameter\
    \ for--------------------The counter is set to \"1\".\n   History-Info reflecting\n\
    \   the chronological order\n   of the information.\n   =====================================================================\n\
    \   Privacy header [RFC3323] escaped in the    Privacy\n   hi-targeted-to-uri\
    \ of the\n   History-Info, which precedes the one\n   containing a diverting cause-param.\n\
    \   Optional parameter for History-Info,\n   this Privacy indicates that this\n\
    \   specific History-Info header should\n   not be forwarded.\n   \"history\"\
    ----------------------------------\"full\"\n   Privacy header field ----------------------\"\
    Off\"\n   Absent or \"none\"\n   =====================================================================\n\
    \   Note: For other optional History-Info parameters, there is no\n   recommendation\
    \ as Diversion header does not provide equivalent\n   parameters.\n   Concerning\
    \ local policies recommendations about headers coexistence\n   in the INVITE request,\
    \ see section 2.2.\n"
- title: 7.  Examples
  contents:
  - '7.  Examples

    '
- title: 7.1.  Example with Diversion Header Changed into History-Info Header
  contents:
  - "7.1.  Example with Diversion Header Changed into History-Info Header\n   INVITE\
    \ last_diverting_target\n   Diversion:\n   diverting_user3_address;reason=unconditional;counter=1;privacy=off,\n\
    \   diverting_user2_address;reason=user-busy;counter=1;privacy=full,\n   diverting_user1_address;reason=no-answer;counter=1;privacy=off\n\
    \   Mapped into:\n   History-Info:\n   <sip: diverting_user1_address; privacy=none\
    \ >; index=1,\n   <sip: diverting_user2_address; cause=408?privacy=history>;index=1.1,\n\
    \   <sip: diverting_user3_address; cause=486?privacy=none>;index=1.1.1,\n   <sip:\
    \ last_diverting_target; cause=302>;index=1.1.1.1\n"
- title: 7.2.  Example with History-Info Header Changed into Diversion Header
  contents:
  - "7.2.  Example with History-Info Header Changed into Diversion Header\n   History-Info:\n\
    \   <sip: diverting_user1_address?privacy=history >; index=1,\n   <sip: diverting_user2_address;\
    \ cause=302? privacy=none>;index=1.1,\n   <sip: last_diverting_target; cause=486>;index=1.1.1\n\
    \   Mapped into:\n   Diversion:\n   diverting_user2_address; reason=user-busy;\
    \ counter=1; privacy=off,\n   diverting_user1_address; reason=unconditional; counter=1;\n\
    \   privacy=full\n"
- title: 7.3.  Example with Two SIP Networks Using History-Info Header
  contents:
  - "7.3.  Example with Two SIP Networks Using History-Info Header\n      Interworking\
    \ with a SIP Network Using Diversion Header\n   A -> P1 -> B -> C -> P2 -> D->\
    \ E\n   A, B, C, D and E are users.\n   B, C and D have Call Forwarding service\
    \ invoked.\n   P1 and P2 are proxies.\n   Only relevant information is shown on\
    \ the following call flow.\n                          IWF*                   \
    \             IWF*\n     SIP network using     |           SIP network using \
    \      |SIP net.\n       History-Info        |                Diversion      \
    \    |using\n                           |                                   Hist-Info\n\
    \                           |                                   |\n   UA A   \
    \ P1     AS B     |      P2     AS C    UA C   AS D   |    UA E\n   |       |\
    \       |       |      |       |       |     |      |       |\n   |INV B  |  \
    \     |       |      |       |       |     |      |       |\n   |------>|    \
    \   |       |      |       |       |     |      |       |\n   |       |      \
    \ |       |      |       |       |     |      |       |\n   |       |INV B  |\
    \       |      |       |       |     |      |       |\n   |       |------>|  \
    \     |      |       |       |     |      |       |\n   |       |Supported: histinfo\
    \   |       |       |     |      |       |\n   |       | History-Info:       \
    \ |       |       |     |      |       |\n   |       | <sip:proxyP1>; index=1,\
    \      |       |     |      |       |\n   |       | <sip:userB >; index=1.1  \
    \    |       |     |      |       |\n   |       |       |       |      |     \
    \  |       |     |      |       |\n   |       |       |INV C  |      |       |\
    \       |     |      |       |\n   |       |       |------>|      |       |  \
    \     |     |      |       |\n   |       |       |History-Info: |       |    \
    \   |     |      |       |\n   |       |       <sip:proxyP1>; index=1,|      \
    \ |     |      |       |\n   |       |       <sip:userB>; index=1.1 |       |\
    \     |      |       |\n   |       |       <sip:userC; cause=302>; index=1.1.1\
    \  |      |       |\n   |       |       |       |      |       |       |     |\
    \      |       |\n   |       |       |       |INV C |       |       |     |  \
    \    |       |\n   |       |       |       |----->|       |       |     |    \
    \  |       |\n   |       |       |       |Diversion:    |       |     |      |\
    \       |\n   |       |       |       |B reason= unconditional counter=1  |  \
    \     |\n   |       |       |       |History-Info: |       |     |      |    \
    \   |\n   |       |       |       <sip:proxyP1>; index=1,|     |      |      \
    \ |\n   |       |       |       <sip:userB>; index=1.1 |     |      |       |\n\
    \   |       |       |       <sip:proxyP2; cause=302>; index=1.1.1       |\n  \
    \ |       |       |       |      |       |       |     |      |       |\n   |\
    \       |       |       |      |INV C  |       |     |      |       |\n   |  \
    \     |       |       |      |------>|       |     |      |       |\n   |    \
    \   |       |       |     No modification of Diversion due to P2|\n   |      \
    \ |       |       |      |       |       |     |      |       |\n   |       |\
    \       |       |      |       |INV C  |     |      |       |\n   |       |  \
    \     |       |      |       |------>|     |      |       |\n   |       |    \
    \   |       |      |       |       |     |      |       |\n   |       |      \
    \ |       |      |       |<--180-|     |      |       |\n   |       |       |\
    \       |      |       |       |     |      |       |\n   |       |       |  \
    \     |      |  No response timer expire  |       |\n   |       |       |    \
    \   |      |       |---INV D --->|      |       |\n   |       |       |Diversion:\
    \                          |      |       |\n   |       |       |userC; reason=no-answer;\
    \ counter=1; privacy=full,  |\n   |       |       |userB; reason=unconditional;\
    \ counter=1; privacy=off,\n   |       |       |    History-Info:             \
    \      |      |       |\n   |       |       |    <sip:proxyP1>; index=1,     \
    \    |      |       |\n   |       |       |    <sip:userB>; index=1.1        \
    \  |      |       |\n   |       |       |    <sip:proxyP2; cause=302>; index=1.1.1\
    \  |       |\n   |       |       |       |      |       |       |     |      |\
    \       |\n   |       |       |       |      |       |       |     |INV E |  \
    \     |\n   |       |       |       |      |       |       |     |----->|    \
    \   |\n   |       |       |Diversion:                                 |      \
    \ |\n   |       |       |userD; reason=time-of-day; counter=1; privacy=off  |\n\
    \   |       |       |userC; reason=no-answer; counter=1; privacy=full,  |\n  \
    \ |       |       |userB; reason=unconditional; counter=1; privacy=off,\n   |\
    \       |       |     History-Info:                         |       |\n   |  \
    \     |       |     <sip:proxyP1>; index=1,               |       |\n   |    \
    \   |       |     <sip:userB>; index=1.1                |       |\n   |      \
    \ |       |     <sip:proxyP2; cause=302>; index=1.1.1 |       |\n   |       |\
    \       |       |      |       |       |     |      |       |\n   |       |  \
    \     |       |      |       |       |     |      | INV E |\n   |       |    \
    \   |       |      |       |       |     |      |------>|\n   |       |      \
    \ | History-Info:                                     |\n   |       |       |\
    \  <sip:proxyP1>; index=1,                          |\n   |       |       |  <sip:userB\
    \ ?privacy=none>; index=1.1,            |\n   |       |       |  <sip:proxyP2;\
    \ cause=302>; index=1.1.1,           |\n   |       |       |  <sip:userC ?privacy=history>;\
    \ index=1.1.1.1,     |\n   |       |      <sip:userD; cause=408 ?privacy=none>;\
    \ index=1.1.1.1.1,\n   |       |       |  <sip:userE; cause=404>; index=1.1.1.1.1.1\
    \        |\n   |       |       |       |      |       |       |     |       |\
    \      |\n   |       |       |       |      |       |       |     |       |  \
    \    |\n   * Note: The IWF is an interworking function that could be a stand-\n\
    \   alone equipment not defined in this document (it could be a proxy).\n"
- title: 7.4.  Additional Interworking Cases
  contents:
  - "7.4.  Additional Interworking Cases\n   Even if for particular cases in which\
    \ both headers could coexist, it\n   should be the network local policy responsibility\
    \ to make it work\n   together.  Here are described some situations and some\n\
    \   recommendations on the behavior to follow.\n   In the case where there is\
    \ one network that includes different nodes,\n   some of them supporting the Diversion\
    \ header and other ones\n   supporting the History-Info header, there is a problem\
    \ when any node\n   handling a message does not know the next node that will handle\
    \ the\n   message.  This case can occur when the network has new and old nodes,\n\
    \   the older ones using Diversion header and the more recent History-\n   Info\
    \ header.\n   While a network replacement may be occurring, there will be a time\n\
    \   when both nodes coexist in the network.  If the different nodes are\n   being\
    \ used to support different subscriber types due to different\n   node capabilities\
    \ then the problem is more important.  In this case,\n   there is a need to pass\
    \ both History-Info header and Diversion header\n   within the core network.\n\
    \   These headers need to be equivalent to ensure that, whatever the node\n  \
    \ receiving the message, the correct diversion information is received.\n   This\
    \ requires that whatever the received header, there is a\n   requirement to be\
    \ able to compare the headers and to convert the\n   headers.  Depending upon\
    \ the node capability, it may be possible to\n   make assumptions as to how this\
    \ is handled.\n   o  If it is known that the older Diversion header supporting\
    \ nodes do\n      not pass on any received History-Info header, then the\n   \
    \   interworking becomes easier.  If a message is received with only\n      Diversion\
    \ headers, then it has originated from an 'old' node.  The\n      equivalent History-Info\
    \ entries can be created and these can then\n      be passed as well as the Diversion\
    \ header.\n   o  If the node creates a new History-Info header for a call\n  \
    \    diversion, then an additional Diversion header must be created.\n   o  If\
    \ the next node is an 'old' node, then the Diversion header will\n      be used\
    \ by that node and the History-Info entries will be removed\n      from the message\
    \ when it is passed on.\n   o  If the next node is a new node then the presence\
    \ of both Diversion\n      header and History-Info header means that interworking\
    \ has already\n      occurred and the Diversion and History-Info entries must\
    \ be\n      considered equivalent.\n   o  If both nodes pass on both History-Info\
    \ header and Diversion\n      header, but only actively use one, then both types\
    \ of nodes need\n      to perform the interworking and must maintain equivalence\
    \ between\n      the headers.  This will eventually result in the use of Diversion\n\
    \      header being deprecated when all nodes in the network support\n      History-Info\
    \ header.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   The security considerations in [RFC4244] and\
    \ [RFC5806] apply.\n   The use of the Diversion header or the History-Info header\
    \ require\n   the application of the requested privacy and integrity asked by\
    \ each\n   diverting user or entity.  Without integrity, the requested privacy\n\
    \   functions could be downgraded or eliminated, potentially exposing\n   identity\
    \ information.  Without confidentiality, eavesdroppers on the\n   network (or\
    \ any intermediaries between the user and the privacy\n   service) could see the\
    \ very personal information that the user has\n   asked the privacy service to\
    \ obscure.  Unauthorized insertion,\n   deletion of modification of those headers,\
    \ can provide misleading\n   information to users and applications.  A SIP entity\
    \ that can provide\n   a redirection reason in a History-Info header or a Diversion\
    \ header\n   should be able to suppress this in accordance with privacy\n   requirements\
    \ of the user concerned.\n"
- title: 9.  Acknowledgements
  contents:
  - "9.  Acknowledgements\n   The editor would like to acknowledge the constructive\
    \ feedback and\n   support provided by Steve Norreys, Jan Van Geel, Martin Dolly,\n\
    \   Francisco Silva, Guiseppe Sciortino, Cinza Amenta, Christer Holmberg,\n  \
    \ Ian Elz, Jean-Francois Mule, Mary Barnes, Francois Audet, Erick\n   Sasaki,\
    \ Shida Schubert, Joel M. Halpern, Bob Braden, and Robert\n   Sparks.  Merci a\
    \ Lionel Morand, Xavier Marjou, and Philippe Fouquart.\n"
- title: 10.  References
  contents:
  - '10.  References

    '
- title: 10.1.  Normative References
  contents:
  - "10.1.  Normative References\n   [RFC3261]   Rosenberg, J., Schulzrinne, H., Camarillo,\
    \ G., Johnston,\n               A., Peterson, J., Sparks, R., Handley, M., and\
    \ E.\n               Schooler, \"SIP: Session Initiation Protocol\", RFC 3261,\n\
    \               June 2002.\n   [RFC3323]   Peterson, J., \"A Privacy Mechanism\
    \ for the Session\n               Initiation Protocol (SIP)\", RFC 3323, November\
    \ 2002.\n   [RFC3326]   Schulzrinne, H., Oran, D., and G. Camarillo, \"The Reason\n\
    \               Header Field for the Session Initiation Protocol (SIP)\",\n  \
    \             RFC 3326, December 2002.\n   [RFC4244]   Barnes, M., Ed., \"An Extension\
    \ to the Session Initiation\n               Protocol (SIP) for Request History\
    \ Information\", RFC\n               4244, November 2005.\n   [RFC5806]   Levy,\
    \ S. and M. Mohali, Ed., \"Diversion Indication in\n               SIP\", RFC\
    \ 5806, March 2010.\n"
- title: 10.2.  Informative References
  contents:
  - "10.2.  Informative References\n   [RFC4458]   Jennings, C., Audet, F., and J.\
    \ Elwell, \"Session\n               Initiation Protocol (SIP) URIs for Applications\
    \ such as\n               Voicemail and Interactive Voice Response (IVR)\", RFC\n\
    \               4458, April 2006.\n   [RFC5234]   Crocker, D., Ed., and P. Overell,\
    \ \"Augmented BNF for\n               Syntax Specifications: ABNF\", STD 68, RFC\
    \ 5234, January\n               2008.\n   [TS_24.604] 3rd Generation Partnership\
    \ Project, \"Technical\n               Specification Group Core Network and Terminals\
    \ ;\n               Communication Diversion (CDIV) using IP Multimedia\n     \
    \          (IM)Core Network (CN) subsystem ; Protocol specification\n        \
    \       (Release 8), 3GPP TS 24.604\", December 2008.\n   [TS_29.163] 3rd Generation\
    \ Partnership Project, \"Technical\n               Specification Group Core Network\
    \ and Terminals ;\n               Interworking between the IP Multimedia (IM)\
    \ Core Network\n               (CN) Subsystem and Circuit Switched (CS) networks\n\
    \               (Release 8)\", December 2008.\n"
- title: Appendix A.  Interworking between Diversion Header and Voicemail URI
  contents:
  - "Appendix A.  Interworking between Diversion Header and Voicemail URI\n   Voicemail\
    \ URI is a mechanism described in RFC 4458 to provide a\n   simple way to transport\
    \ only one redirecting user address and the\n   reason why the diversion occurred\
    \ in the R-URI of the INVITE request.\n   This mechanism is mainly used for call\
    \ diversion to a voicemail.\n   Diversion header to Voicemail URI:\n   Received:\n\
    \   Diversion: userA-address;reason=user-busy;counter=1;privacy=full\n   Sent\
    \ (Voicemail URI created in the R-URI line of the INVITE):\n   sip: voicemail@example.com;target=userA-address;cause=486\
    \ SIP/2.0\n   Mapping of the Redirection Reason is the same as for History-Info\n\
    \   header with a default value set to 404.\n   If the Diversion header contains\
    \ more than one Diversion entry, the\n   choice of the redirecting user information\
    \ inserted in the URI is in\n   charge of the network local policy.  For example,\
    \ the choice\n   criterion of the redirecting information inserted in the URI\
    \ could be\n   the destination of forwarded INVITE request (whether or not the\n\
    \   voicemail serves this user).\n   Note: This interworking could be done in\
    \ addition to the interworking\n   of the Diversion header into the History-Info\
    \ header.\n   Voicemail URI to Diversion header:\n   In case of real voicemail,\
    \ this way of interworking should not\n   happen.  However, if for any reason\
    \ it occurs, it is recommended to\n   do it as following:\n   Received:\n   INVITE\
    \ sip: voicemail@example.com;\\\n   target=sip:+33145454500%40example.com;user=phone;\\\
    \n   cause=302 SIP/2.0\n   Sent in the forwarded INVITE:\n   Diversion: sip:+\n\
    \   33145454500%40example.com;user=phone;reason=unconditional;counter=1\n"
- title: Author's Address
  contents:
  - "Author's Address\n   Marianne Mohali\n   France Telecom Orange\n   38-40 rue\
    \ du General Leclerc\n   Issy-Les-Moulineaux Cedex 9  92794\n   France\n   Phone:\
    \ +33 1 45 29 45 14\n   EMail: marianne.mohali@orange-ftgroup.com\n"
