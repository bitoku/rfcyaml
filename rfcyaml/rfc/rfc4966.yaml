- title: __initial_text__
  contents:
  - "  Reasons to Move the Network Address Translator - Protocol Translator\n    \
    \                  (NAT-PT) to Historic Status\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The IETF Trust (2007).\n"
- title: Abstract
  contents:
  - "Abstract\n   This document discusses issues with the specific form of IPv6-IPv4\n\
    \   protocol translation mechanism implemented by the Network Address\n   Translator\
    \ - Protocol Translator (NAT-PT) defined in RFC 2766.  These\n   issues are sufficiently\
    \ serious that recommending RFC 2766 as a\n   general purpose transition mechanism\
    \ is no longer desirable, and this\n   document recommends that the IETF should\
    \ reclassify RFC 2766 from\n   Proposed Standard to Historic status.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  3\n   2.  Issues Unrelated to an DNS-ALG . . . . . . . . . . .\
    \ . . . . .  7\n     2.1.  Issues with Protocols Embedding IP Addresses . . .\
    \ . . . .  7\n     2.2.  NAPT-PT Redirection Issues . . . . . . . . . . . . .\
    \ . . .  8\n     2.3.  NAT-PT Binding State Decay . . . . . . . . . . . . . .\
    \ . .  8\n     2.4.  Loss of Information through Incompatible Semantics . . .\
    \ .  9\n     2.5.  NAT-PT and Fragmentation . . . . . . . . . . . . . . . . .\
    \ 10\n     2.6.  NAT-PT Interaction with SCTP and Multihoming . . . . . . . 11\n\
    \     2.7.  NAT-PT as a Proxy Correspondent Node for MIPv6 . . . . . . 12\n  \
    \   2.8.  NAT-PT and Multicast . . . . . . . . . . . . . . . . . . . 12\n   3.\
    \  Issues Exacerbated by the Use of DNS-ALG . . . . . . . . . . . 13\n     3.1.\
    \  Network Topology Constraints Implied by NAT-PT . . . . . . 13\n     3.2.  Scalability\
    \ and Single Point of Failure Concerns . . . . . 14\n     3.3.  Issues with Lack\
    \ of Address Persistence  . . . . . . . . . 15\n     3.4.  DoS Attacks on Memory\
    \ and Address/Port Pools . . . . . . . 16\n   4.  Issues Directly Related to Use\
    \ of DNS-ALG  . . . . . . . . . . 16\n     4.1.  Address Selection Issues when\
    \ Communicating with\n           Dual-Stack End-Hosts . . . . . . . . . . . .\
    \ . . . . . . . 16\n     4.2.  Non-Global Validity of Translated RR Records .\
    \ . . . . . . 18\n     4.3.  Inappropriate Translation of Responses to A Queries\
    \  . . . 19\n     4.4.  DNS-ALG and Multi-Addressed Nodes  . . . . . . . . . .\
    \ . . 19\n     4.5.  Limitations on Deployment of DNS Security Capabilities .\
    \ . 19\n   5.  Impact on IPv6 Application Development . . . . . . . . . . . .\
    \ 20\n   6.  Security Considerations  . . . . . . . . . . . . . . . . . . . 20\n\
    \   7.  Conclusion . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n  \
    \ 8.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 22\n   9.\
    \  References . . . . . . . . . . . . . . . . . . . . . . . . . . 22\n     9.1.\
    \  Normative References . . . . . . . . . . . . . . . . . . . 22\n     9.2.  Informative\
    \ References . . . . . . . . . . . . . . . . . . 23\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The Network Address Translator - Protocol Translator (NAT-PT)\n\
    \   document [RFC2766] defines a set of network-layer translation\n   mechanisms\
    \ designed to allow nodes that only support IPv4 to\n   communicate with nodes\
    \ that only support IPv6, during the transition\n   to the use of IPv6 in the\
    \ Internet.\n   [RFC2766] specifies the basic NAT-PT, in which only addresses\
    \ are\n   translated, and the Network Address Port Translator - Protocol\n   Translator\
    \ (NAPT-PT), which also translates transport identifiers,\n   allowing for greater\
    \ economy of scarce IPv4 addresses.  Protocol\n   translation is performed using\
    \ the Stateless IP/ICMP Translation\n   Algorithm (SIIT) defined in [RFC2765].\
    \  In the following discussion,\n   where the term \"NAT-PT\" is used unqualified,\
    \ the discussion applies\n   to both basic NAT-PT and NAPT-PT.  \"Basic NAT-PT\"\
    \ will be used if\n   points apply to the basic address-only translator.\n   A\
    \ number of previous documents have raised issues with NAT-PT.  This\n   document\
    \ will summarize these issues, note several other issues\n   carried over from\
    \ traditional IPv4 NATs, and identify some additional\n   issues that have not\
    \ been discussed elsewhere.  Proposed solutions to\n   the issues are mentioned\
    \ and any resulting need for changes to the\n   specification is identified.\n\
    \   Whereas NAT is seen as an ongoing capability that is needed to work\n   around\
    \ the limited availability of globally unique IPv4 addresses,\n   NAT-PT has a\
    \ different status as a transition mechanism for IPv6.  As\n   such, NAT-PT should\
    \ not be allowed to constrain the development of\n   IPv6 applications or impose\
    \ limitations on future developments of\n   IPv6.\n   This document draws the\
    \ conclusion that the technical and operational\n   difficulties resulting from\
    \ these issues, especially the possible\n   future constraints on the development\
    \ of IPv6 networks (see\n   Section 5), make it undesirable to recommend NAT-PT\
    \ as described in\n   [RFC2766] as a general purpose transition mechanism for\n\
    \   intercommunication between IPv6 networks and IPv4 networks.\n   Although the\
    \ [RFC2766] form of packet translation is not generally\n   applicable, it is\
    \ likely that in some circumstances a node that can\n   only support IPv4 will\
    \ need to communicate with a node that can only\n   support IPv6; this needs a\
    \ translation mechanism of some kind.\n   Although this may be better carried\
    \ out by an application-level proxy\n   or transport-layer translator, there may\
    \ still be scenarios in which\n   a revised, possibly restricted version of NAT-PT\
    \ can be a suitable\n   solution; accordingly, this document recommends that the\
    \ IETF should\n   reclassify RFC 2766 from Proposed Standard to Historic status\
    \ to\n   avoid it from being used in inappropriate scenarios while any\n   replacement\
    \ is developed.\n   The following documents relating directly to NAT-PT have been\n\
    \   reviewed while drafting this document:\n   o  Network Address Translation\
    \ - Protocol Translation (NAT-PT)\n      [RFC2766]\n   o  Stateless IP/ICMP Translation\
    \ Algorithm (SIIT) [RFC2765]\n   o  NAT-PT Applicability Statement [NATP-APP]\n\
    \   o  Issues with NAT-PT DNS ALG (Application Layer Gateway) in RFC 2766\n  \
    \    [DNS-ALG-ISSUES]\n   o  NAT-PT DNS ALG Solutions [DNS-ALG-SOL]\n   o  NAT-PT\
    \ Security Considerations [NATPT-SEC]\n   o  Issues when Translating between IPv4\
    \ and IPv6 [TRANS-ISSUES]\n   o  IPv6-IPv4 Translation Mechanism for SIP-Based\
    \ Services in Third\n      Generation Partnership Project (3GPP) Networks [3GPP-TRANS]\n\
    \   o  Analysis on IPv6 Transition in 3GPP Networks [RFC4215]\n   o  Considerations\
    \ for Mobile IP Support in NAT-PT [NATPT-MOB]\n   o  An IPv6-IPv4 Multicast Translator\
    \ based on Internet Group\n      Management Protocol / Multicast Listener Discovery\
    \ (IGMP/MLD)\n      Proxying (mtp) [MTP]\n   o  An IPv4-IPv6 Multicast Gateway\
    \ [MCASTGW]\n   o  Scalable mNAT-PT Solution [MUL-NATPT]\n   Because the majority\
    \ of the documents containing discussions of the\n   issues are documents that\
    \ are unlikely to become RFCs, the issues are\n   summarized here to avoid the\
    \ need for normative references.\n   Some additional issues can be inferred from\
    \ corresponding issues\n   known to exist in 'traditional' IPv4 NATs.  The following\
    \ documents\n   are relevant:\n   o  Protocol Complications with the IP Network\
    \ Address Translator\n      [RFC3027]\n   o  IP Network Address Translator (NAT)\
    \ Terminology and Considerations\n      [RFC2663]\n   There is some ambiguity\
    \ in [RFC2766] about whether the Application\n   Layer Gateway (ALG) for DNS (referred\
    \ to as DNS-ALG in this document)\n   is an integral and mandatory part of the\
    \ specification.  The\n   ambiguity arises mainly from the first section of the\
    \ applicability\n   section (Section 8), which appears to imply that 'simple'\
    \ use of\n   NAT-PT could avoid the use of the DNS-ALG.\n   This is important\
    \ because a number of the major issues arise from the\n   interactions between\
    \ DNS and NAT-PT.  However, detailed inspection of\n   [RFC2766] shows that the\
    \ 'simple' case has not been worked out and it\n   is unclear how information\
    \ about the address translation could be\n   passed to the hosts in the absence\
    \ of the DNS-ALG.  Therefore, this\n   document assumes that the DNS-ALG is an\
    \ integral part of NAT-PT;\n   accordingly, issues with the DNS-ALG must be considered\
    \ as issues for\n   the whole specification.\n   Note that issues not specifically\
    \ related to the use of the DNS-ALG\n   will apply to any network-layer translation\
    \ scheme, including any\n   based on the SIIT algorithm [RFC2765].  In the event\
    \ that new forms\n   of a translator are developed as alternatives to NAT-PT,\
    \ the generic\n   issues relevant to all IPv6-IPv4 translators should be borne\
    \ in mind.\n   Issues raised with IPv6-IPv4 translators in general and NAT-PT\
    \ in\n   particular can be categorized as follows:\n   o  Issues that are independent\
    \ of the use of a DNS-ALG and are,\n      therefore, applicable to any form of\
    \ an IPv6-IPv4 translator:\n      *  Disruption of all protocols that embed IP\
    \ addresses (and/or\n         ports) in packet payloads or apply integrity mechanisms\
    \ using\n         IP addresses (and ports).\n      *  Inability to redirect traffic\
    \ for protocols that lack\n         demultiplexing capabilities or are not built\
    \ on top of specific\n         transport-layer protocols in situations where one\
    \ NAPT-PT is\n         translating for multiple IPv6 hosts.\n      *  Requirement\
    \ for applications to use keepalive mechanisms to\n         workaround connectivity\
    \ issues caused by premature NAT-PT state\n         timeout.\n      *  Loss of\
    \ information due to incompatible semantics between IPv4\n         and IPv6 versions\
    \ of headers and protocols.\n      *  Need for additional state and/or packet\
    \ reconstruction in\n         NAPT-PT translators dealing with packet fragmentation.\n\
    \      *  Interaction with SCTP and multihoming.\n      *  Need for NAT-PT to\
    \ act as proxy for correspondent node when\n         IPv6 node is mobile, with\
    \ consequent restrictions on mobility.\n      *  NAT-PT not being able to handle\
    \ multicast traffic.\n   o  Issues that are exacerbated by the use of a DNS-ALG\
    \ and are,\n      therefore, also applicable to any form of an IPv6-IPv4 translator:\n\
    \      *  Constraints on network topology.\n      *  Scalability concerns together\
    \ with introduction of a single\n         point of failure and a security attack\
    \ nexus.\n      *  Lack of address mapping persistence: Some applications require\n\
    \         address retention between sessions.  The user traffic will be\n    \
    \     disrupted if a different mapping is used.  The use of the DNS-\n       \
    \  ALG to create address mappings with limited lifetimes means\n         that\
    \ applications must start using the address shortly after\n         the mapping\
    \ is created, as well as keep it alive once they\n         start using it.\n \
    \     *  Creation of a DoS (Denial of Service) threat relating to\n         exhaustion\
    \ of memory and address/port pool resources on the\n         translator.\n   o\
    \  Issues that result from the use of a DNS-ALG and are, therefore,\n      specific\
    \ to NAT-PT as defined in [RFC2766]:\n      *  Address selection issues when either\
    \ the internal or external\n         hosts implement both IPv4 and IPv6.\n   \
    \   *  Restricted validity of translated DNS records: a translated\n         record\
    \ may be forwarded to an application that cannot use it.\n      *  Inappropriate\
    \ translation of responses to A queries from IPv6\n         nodes.\n      *  Address\
    \ selection issues and resource consumption in a DNS-ALG\n         with multi-addressed\
    \ nodes.\n      *  Limitations on DNS security capabilities when using a DNS-ALG.\n\
    \   Section 2, Section 3 and Section 4 discuss these groups of issues.\n   Section\
    \ 5 examines the consequences of deploying NAT-PT for\n   application developers\
    \ and the long term effects of NAT-PT (or any\n   form of generally deployed IPv6-IPv4\
    \ translator) on the further\n   development of IPv6.\n   The terminology used\
    \ in this document is defined in [RFC2663],\n   [RFC2766], and [RFC3314].\n"
- title: 2.  Issues Unrelated to an DNS-ALG
  contents:
  - '2.  Issues Unrelated to an DNS-ALG

    '
- title: 2.1.  Issues with Protocols Embedding IP Addresses
  contents:
  - "2.1.  Issues with Protocols Embedding IP Addresses\n   It is well known from\
    \ work on IPv4 NATs (see Section 8 of [RFC2663]\n   and [RFC3027]) that the large\
    \ class of protocols that embed numeric\n   IP addresses in their payloads either\
    \ cannot work through NATs or\n   require specific ALGs as helpers to translate\
    \ the payloads in line\n   with the address and port translations.  The same set\
    \ of protocols\n   cannot pass through NAT-PT.  The problem is exacerbated because\
    \ the\n   IPv6 and IPv4 addresses are of different lengths, so that packet\n \
    \  lengths as well as packet contents are altered.  [RFC2766] describes\n   the\
    \ consequences as part of the description of the FTP ALG.  Similar\n   workarounds\
    \ are needed for all protocols with embedded IP addresses\n   that run over TCP\
    \ transports.\n   The issues raised in Sections 2 and 3 of [RFC2663], relating\
    \ to the\n   authentication and encryption with NAT, are also applicable to\n\
    \   NAT-PT.\n   Implementing a suite of ALGs requires that NAT-PT equipment includes\n\
    \   the logic for each of the relevant protocols.  Most of these\n   protocols\
    \ are continuously evolving, requiring continual and\n   coordinated updates of\
    \ the ALGs to keep them in step.\n   Assuming that the NAT-PT contains a colocated\
    \ ALG for one of the\n   relevant protocols, the ALG could replace the embedded\
    \ IP addresses\n   and ports.  However, this replacement can only happen if no\n\
    \   cryptographic integrity mechanism is used and the protocol messages\n   are\
    \ sent in the clear (i.e., not encrypted).\n   A possible workaround relies on\
    \ the NAT-PT being party to the\n   security association used to provide authentication\
    \ and/or\n   encryption.  NAT-PT would then be aware of the cryptographic\n  \
    \ algorithms and keys used to secure the traffic.  It could then modify\n   and\
    \ re-secure the packets; this would certainly complicate network\n   operations\
    \ and provide additional points of security vulnerability.\n   Unless UDP encapsulation\
    \ is used for IPsec [RFC3498], traffic using\n   IPsec AH (Authentication Header),\
    \ in transport and tunnel mode, and\n   IPsec ESP (Encapsulating Security Payload),\
    \ in transport mode, is\n   unable to be carried through NAT-PT without terminating\
    \ the security\n   associations on the NAT-PT, due to their usage of cryptographic\n\
    \   integrity protection.\n   A related issue with DNS security is discussed in\
    \ Section 4.5.\n"
- title: 2.2.  NAPT-PT Redirection Issues
  contents:
  - "2.2.  NAPT-PT Redirection Issues\n   Section 4.2 of [RFC3027] discusses problems\
    \ specific to RSVP and\n   NATs, one of which is actually a more generic problem\
    \ for all port\n   translators.  When several end-hosts are using a single NAPT-PT\
    \ box,\n   protocols that do not have a demultiplexing capability similar to\n\
    \   transport-layer port numbers may be unable to work through NAPT-PT\n   (and\
    \ any other port translator) because there is nothing for NAPT-PT\n   to use to\
    \ identify the correct binding.\n   This type of issue affects IPsec encrypted\
    \ packets where the\n   transport port is not visible (although it might be possible\
    \ to use\n   the Security Parameter Index (SPI) as an alternative demultiplexer),\n\
    \   and protocols, such as RSVP, which are carried directly in IP\n   datagrams\
    \ rather than using a standard transport-layer protocol such\n   as TCP or UDP.\
    \  In the case of RSVP, packets going from the IPv4\n   domain to the IPv6 domain\
    \ do not necessarily carry a suitable\n   demultiplexing field, because the port\
    \ fields in the flow identifier\n   and traffic specifications are optional.\n\
    \   Several ad hoc workarounds could be used to solve the demultiplexing\n   issues,\
    \ however in most cases these solutions are not documented\n   anywhere, which\
    \ could lead to non-deterministic and undesirable\n   behavior (for example, such\
    \ workarounds often assume particular\n   network topologies, etc., in order to\
    \ function correctly; if the\n   assumptions are not met in a deployment, the\
    \ workaround may not work\n   as expected).\n   This issue is closely related\
    \ to the fragmentation issue described in\n   Section 2.5.\n"
- title: 2.3.  NAT-PT Binding State Decay
  contents:
  - "2.3.  NAT-PT Binding State Decay\n   NAT-PT will generally use dynamically created\
    \ bindings to reduce the\n   need for IPv4 addresses both for basic NAT-PT and\
    \ NAPT-PT.  Both\n   basic NAT-PT and NAPT-PT use soft state mechanisms to manage\
    \ the\n   address and, in the case of NAPT-PT, port pools are used for\n   dynamically\
    \ created address bindings.  This allows all types of\n   NAT-PT boxes to operate\
    \ autonomously without requiring clients to\n   signal, either implicitly or explicitly,\
    \ that a binding is no longer\n   required.  In any case, without soft state timeouts,\
    \ network and\n   application unreliability would inevitably lead to leaks, eventually\n\
    \   causing address or port pool exhaustion.\n   For a dynamic binding to persist\
    \ for longer than the soft state\n   timeout, packets must be sent periodically\
    \ from one side of the\n   NAT-PT to the other (the direction is not specified\
    \ by the NAT-PT\n   specification).  If no packets are sent in the proper direction,\
    \ the\n   NAT-PT binding will not be refreshed and the application connection\n\
    \   will be broken.  Hence, all applications need to maintain their\n   NAT-PT\
    \ bindings during long idle periods by incorporating a keepalive\n   mechanism,\
    \ which may not be possible for legacy systems.\n   Also, [RFC2766] does not specify\
    \ how to choose timeouts for bindings.\n   As discussed in [RFC2663] for traditional\
    \ NATs, selecting suitable\n   values is a matter of heuristics, and coordinating\
    \ with application\n   expectations may be impossible.\n"
- title: 2.4.  Loss of Information through Incompatible Semantics
  contents:
  - "2.4.  Loss of Information through Incompatible Semantics\n   NAT-PT reuses the\
    \ SIIT header and protocol translations defined in\n   [RFC2765].  Mismatches\
    \ in semantics between IPv4 and IPv6 versions\n   can lead to loss of information\
    \ when packets are translated.  Three\n   issues arising from this are:\n   o\
    \  There is no equivalent in IPv4 for the flow label field of the\n      IPv6\
    \ header.  Hence, any special treatment of packets based on\n      flow label\
    \ patterns cannot be propagated into the IPv4 domain.\n   o  IPv6 extension headers\
    \ provide flexibility for future improvements\n      in the IP protocol suite\
    \ and new headers that do not have\n      equivalents in IPv4 may be defined.\
    \  In practice, some existing\n      extensions such as routing headers and mobility\
    \ extensions are not\n      translatable.\n   o  As described in Section 2.2 of\
    \ [NATP-APP], there are no\n      equivalents in IPv6 for some ICMP(v4) messages,\
    \ while for others\n      (notably the 'Parameter Problem' messages) the semantics\
    \ are not\n      equivalent.  Translation of such messages may lead to the loss\
    \ of\n      information.  However, this issue may not be very severe because\n\
    \      the error messages relate to packets that have been translated by\n   \
    \   NAT-PT rather than by arbitrary packets.  If the NAT-PT is\n      functioning\
    \ correctly, there is, for example, no reason why IPv6\n      packets with unusual\
    \ extension headers or options should be\n      generated.\n   Loss of information\
    \ in any of these cases could be a constraint to\n   certain applications.\n \
    \  A related matter concerns the propagation of the Differentiated\n   Services\
    \ Code Point (DSCP).  NAT-PT and SIIT simply copy the DSCP\n   field when translating\
    \ packets.  Accordingly, the IPv4 and IPv6\n   domains must have equivalent Per-Hop\
    \ Behaviors for the same code\n   point, or alternative means must be in place\
    \ to translate the DSCP\n   between domains.\n"
- title: 2.5.  NAT-PT and Fragmentation
  contents:
  - "2.5.  NAT-PT and Fragmentation\n   As mentioned in [RFC3027], simple port translators\
    \ are unable to\n   translate packet fragments, other than the first, from a fragmented\n\
    \   packet, because subsequent fragments do not contain the port number\n   information.\n\
    \   This means that, in general, fragmentation cannot be allowed for any\n   traffic\
    \ that traverses a NAPT-PT.  One attempted workaround requires\n   the NAPT-PT\
    \ to maintain state information derived from the first\n   fragment until all\
    \ fragments of the packet have transited the\n   NAPT-PT.  This is not a complete\
    \ solution because fragment\n   misordering could lead to the first fragment appearing\
    \ at the NAPT-PT\n   after later fragments.  Consequently, the NAPT-PT would not\
    \ have the\n   information needed to translate the fragments received before the\n\
    \   first.\n   Although it would not be expected in normal operation, NAPT-PT\
    \ needs\n   to be proofed against receiving short first fragments that don't\n\
    \   contain the transport port numbers.  Note that such packets are a\n   problem\
    \ for many forms of stateful packet inspection applied to IPv6\n   packets.  The\
    \ current specifications of IPv6 do not mandate (1) any\n   minimum packet size\
    \ beyond the need to carry the unfragmentable part\n   (which doesn't include\
    \ the transport port numbers) or (2) reassembly\n   rules to minimize the effects\
    \ of overlapping fragments.  Thus, IPv6\n   is open to the sort of attacks described\
    \ in [RFC1858] and [RFC3128].\n   An additional concern arises when a fragmented\
    \ IPv4 UDP packet, which\n   does not have a transport-layer checksum, traverses\
    \ any type of\n   NAT-PT box.  As described in [RFC2766], the NAT-PT has to reconstruct\n\
    \   the whole packet so that it can calculate the checksum needed for the\n  \
    \ translated IPv6 packet.  This can result in a significant delay to\n   the packet,\
    \ especially if it has to be re-fragmented before\n   transmission on the IPv6\
    \ side.\n   If NAT-PT boxes reassembled all incoming fragmented packets (both\n\
    \   from the IPv4 and IPv6 directions) in the same way they have to for\n   unchecksummed\
    \ IPv4 UDP packets, this would be a solution to the first\n   problem.  The resource\
    \ cost would be considerable apart from the\n   potential delay problem if the\
    \ outgoing packet has to be re-\n   fragmented.  In any case, fragmentation would\
    \ mean that the NAT-PT\n   would consume extra memory and CPU resources, making\
    \ the NAT-PT even\n   less scalable (see Section 3.2).\n   Packet reassembly in\
    \ a NAT-PT box also opens up the possibility of\n   various fragment-related security\
    \ attacks.  Some of these are\n   analogous to attacks identified for IPv4.  Of\
    \ particular concern is a\n   DoS attack based on sending large numbers of small\
    \ fragments without\n   a terminating last fragment, which would potentially overload\
    \ the\n   reconstruction buffers and consume large amounts of CPU resources.\n"
- title: 2.6.  NAT-PT Interaction with SCTP and Multihoming
  contents:
  - "2.6.  NAT-PT Interaction with SCTP and Multihoming\n   The Stream Control Transmission\
    \ Protocol (SCTP) [RFC2960] is a\n   transport protocol, which has been standardized\
    \ since SIIT was\n   specified.  SIIT does not explicitly cover the translation\
    \ of SCTP,\n   but SCTP uses transport port numbers in the same way that UDP and\
    \ TCP\n   do, so similar techniques can be used when translating SCTP packets.\n\
    \   However, SCTP also supports multihoming.  During connection setup,\n   SCTP\
    \ control packets carry embedded addresses that would have to be\n   translated.\
    \  This would also require that the types of the options\n   fields in the SCTP\
    \ control packets be changed with consequent changes\n   to packet length; the\
    \ transport checksum would also have to be\n   recalculated.  The ramifications\
    \ of multihoming as it might interact\n   with NAT-PT have not been fully explored.\
    \  Because of the 'chunked'\n   nature of data transfer, it does not appear that\
    \ that state would\n   have to be maintained to relate packets transmitted using\
    \ the\n   different IP addresses associated with the connection.\n   Even if these\
    \ technical issues can be overcome, using SCTP in a\n   NAT-PT environment may\
    \ effectively nullify the multihoming advantages\n   of SCTP if all the connections\
    \ run through the same NAT-PT.  The\n   consequences of running a multihomed network\
    \ with separate NAT-PT\n   boxes associated with each of the 'homes' have not\
    \ been fully\n   explored, but one issue that will arise is described in Section\
    \ 4.4.\n   SCTP will need an associated \"ALG\" -- actually a Transport Layer\n\
    \   Gateway -- to handle the packet payload modifications.  If it turns\n   out\
    \ that that state is required, the state would have to be\n   distributed and\
    \ synchronized across several NAT-PT boxes in a\n   multihomed environment.\n\
    \   SCTP running through NAT-PT in a multihomed environment is also\n   incompatible\
    \ with IPsec as described in Section 2.1.\n"
- title: 2.7.  NAT-PT as a Proxy Correspondent Node for MIPv6
  contents:
  - "2.7.  NAT-PT as a Proxy Correspondent Node for MIPv6\n   As discussed in [NATPT-MOB],\
    \ it is not possible to propagate Mobile\n   IPv6 (MIPv6) control messages into\
    \ the IPv4 domain.  According to the\n   IPv6 Node Requirements [RFC4294], IPv6\
    \ nodes should normally be\n   prepared to support the route optimization mechanisms\
    \ needed in a\n   correspondent node.  If communications from an IPv6 mobile node\
    \ are\n   traversing a NAT-PT, the destination IPv4 node will certainly not be\n\
    \   able to support the correspondent node features needed for route\n   optimization.\n\
    \   This can be resolved in two ways:\n   o  The NAT-PT can discard messages and\
    \ headers relating to changes of\n      care-of addresses, including reverse routing\
    \ checks.\n      Communications with the mobile node will continue through the\
    \ home\n      agent without route optimization.  This is clearly sub-optimal,\n\
    \      but communication should remain possible.\n   o  Additional functionality\
    \ could be implemented in the NAT-PT to\n      allow it to function as a proxy\
    \ correspondent node for all IPv4\n      nodes for which it has bindings.  This\
    \ scheme adds considerably to\n      the complexity of NAT-PT.  Depending on the\
    \ routability of the\n      IPv6 PREFIX used for translated IPv4 addresses, it\
    \ may also limit\n      the extent of mobility of the mobile node: all communications\
    \ to\n      the IPv4 destination have to go through the same NAT-PT, even if\n\
    \      the mobile node moves to a network that does not have direct IPv6\n   \
    \   connectivity with the NAT-PT.\n   In both cases, the existing NAT-PT specification\
    \ would need to be\n   extended to deal with IPv6 mobile nodes, and neither is\
    \ a fully\n   satisfactory solution.\n"
- title: 2.8.  NAT-PT and Multicast
  contents:
  - "2.8.  NAT-PT and Multicast\n   SIIT [RFC2765] cannot handle the translation of\
    \ multicast packets and\n   NAT-PT does not discuss a way to map multicast addresses\
    \ between IPv4\n   and IPv6.  Some separate work has been done to provide an alternative\n\
    \   mechanism to handle multicast.  This work uses a separate gateway\n   that\
    \ understands some or all of the relevant multicast control and\n   routing protocols\
    \ in each domain.  It has not yet been carried\n   through into standards.\n \
    \  A basic mechanism, which involves only IGMP on the IPv4 side and MLD\n   on\
    \ the IPv6 side, is described in 'An IPv6-IPv4 Multicast Translator\n   based\
    \ on IGMP/MLD Proxying (mtp)' [MTP].  A more comprehensive\n   approach, which\
    \ includes proxying of the multicast routing protocols,\n   is described in 'An\
    \ IPv4 - IPv6 multicast gateway' [MCASTGW].  Both\n   approaches have several\
    \ of the issues described in this section,\n   notably issues with embedded addresses.\n\
    \   [NATPT-SEC] identifies the possibility of a multiplicative reflection\n  \
    \ attack if the NAT-PT can be spoofed into creating a binding for a\n   multicast\
    \ address.  This attack would be very hard to mount because\n   routers should\
    \ not forward packets with multicast addresses in the\n   source address field.\
    \  However, it highlights the possibility that a\n   naively implemented DNS-ALG\
    \ could create such bindings from spoofed\n   DNS responses since [RFC2766] does\
    \ not mention the need for checks on\n   the types of addresses in these responses.\n\
    \   The issues for NAT-PT and multicast reflect the fact that NAT-PT is\n   at\
    \ best a partial solution.  Completing the translation solution to\n   cater for\
    \ multicast traffic is likely to carry a similar set of\n   issues to the current\
    \ unicast NAT-PT and may open up significant\n   additional security risks.\n"
- title: 3.  Issues Exacerbated by the Use of DNS-ALG
  contents:
  - '3.  Issues Exacerbated by the Use of DNS-ALG

    '
- title: 3.1.  Network Topology Constraints Implied by NAT-PT
  contents:
  - "3.1.  Network Topology Constraints Implied by NAT-PT\n   Traffic flow initiators\
    \ in a NAT-PT environment are dependent on the\n   DNS-ALG in the NAT-PT to provide\
    \ the mapped address needed to\n   communicate with the flow destination on the\
    \ other side of the\n   NAT-PT.  Whether used for flows initiated in the IPv4\
    \ domain or the\n   IPv6 domain, the NAT-PT has to be on the path taken by the\
    \ DNS query\n   sent by the flow initiator to the relevant DNS server; otherwise,\
    \ the\n   DNS query will not be modified and the response type will not be\n \
    \  appropriate.\n   The implication is that the NAT-PT box also has to be the\
    \ default\n   IPv6 router for the site so that the DNS-ALG is able to examine\
    \ all\n   DNS requests made over IPv6.  On sites with both IPv6 and dual-stack\n\
    \   nodes, this will result in all traffic flowing through the NAT-PT\n   with\
    \ consequent scalability concerns.\n   These constraints are described in more\
    \ detail in [DNS-ALG-ISSUES].\n   [DNS-ALG-SOL] proposes a solution for flows\
    \ initiated from the IPv6\n   domain, but it appears that this solution still\
    \ has issues.\n   For IPv6-only clients, the solution requires the use of a DNS\
    \ server\n   in the IPv4 domain, accessed via an IPv6 address which uses the\n\
    \   NAT-PT PREFIX (see [RFC2766]).  Queries to this server would\n   necessarily\
    \ pass through the NAT-PT.  Dual-stack hosts would use a\n   separate DNS server\
    \ accessed through a normal IPv6 address.  This\n   removes the need for the NAT-PT\
    \ box to be the default IPv6 gateway\n   for the domain.\n   The primary proposal\
    \ suggests that the IPv6-only clients should use\n   this DNS server for all queries.\
    \  This is expensive on NAT-PT\n   resources because requests relating to hosts\
    \ with native IPv6\n   addresses would also use the NAT-PT DNS-ALG.\n   The alternate\
    \ suggestion to reduce this burden appears to be flawed:\n   if IPv6-only clients\
    \ are provided with a list of DNS servers\n   including both the server accessed\
    \ via NAT-PT and server(s) accessed\n   natively via IPv6, the proposal suggests\
    \ that the client could avoid\n   using NAT-PT for hosts that have native IPv6\
    \ addresses.\n   Unfortunately, for the alternate suggestion, there is no a priori\
    \ way\n   in which the initiator can decide which DNS server to use for a\n  \
    \ particular query.  In the event that the initiator makes the wrong\n   choice,\
    \ the DNS query will return an empty list rather than failing\n   to respond.\
    \  With standard DNS logic, the initiator will not try\n   alternative DNS servers\
    \ because it has received a response.  This\n   means that the solution would\
    \ consist of always using DNS servers\n   having the NAT-PT PREFIX.  This imposes\
    \ the burden of always\n   requiring the DNS RR (Resource Record) [RFC1035] translation.\n\
    \   For flows initiated from the IPv4 network, the proposal recommends\n   that\
    \ the advertised DNS servers for the IPv6 network would have the\n   IPv4 address\
    \ of the NAT-PT.  Again there is no deterministic way to\n   choose the correct\
    \ DNS server for each query resulting in the same\n   issues as were raised for\
    \ flows initiated from the IPv6 domain.\n   Although the engineering workaround,\
    \ just described, provides a\n   partial solution to the topology constraints\
    \ issue, it mandates that\n   DNS queries and responses should still go through\
    \ a NAT-PT even if\n   there would normally be no reason to do so.  This mandatory\
    \ passage\n   through the NAT-PT for all DNS requests will exacerbate the other\n\
    \   DNS-related issues discussed in Section 3.4 and Section 4.1.\n"
- title: 3.2.  Scalability and Single Point of Failure Concerns
  contents:
  - "3.2.  Scalability and Single Point of Failure Concerns\n   As with traditional\
    \ NAT, NAT-PT is a bottleneck in the network with\n   significant scalability\
    \ concerns.  Furthermore, the anchoring of\n   flows to a particular NAT-PT makes\
    \ the NAT-PT a potential single\n   point of failure in the network.  The addition\
    \ of the DNS-ALG in\n   NAT-PT further increases the scalability concerns.\n \
    \  Solutions to both problems have been envisaged using collections of\n   cooperating\
    \ NAT-PT boxes, but such solutions require coordination and\n   state synchronization,\
    \ which has not yet been standardized and again\n   adds to the functional and\
    \ operational complexity of NAT-PT.  One\n   such solution is described in [MUL-NATPT].\n\
    \   As with traditional NAT, the concentration of flows through NAT-PT\n   and\
    \ the legitimate modification of packets in the NAT-PT make NAT-PTs\n   enticing\
    \ targets for security attacks.\n"
- title: 3.3.  Issues with Lack of Address Persistence
  contents:
  - "3.3.  Issues with Lack of Address Persistence\n   Using the DNS-ALG to create\
    \ address bindings requires that the\n   translated address returned by the DNS\
    \ query is used for\n   communications before the NAT-PT binding state is timed\
    \ out (see\n   Section 2.3).  Applications will not normally be aware of this\n\
    \   constraint, which may be different from the existing lifetime of DNS\n   query\
    \ responses.  This could lead to \"difficult to diagnose\" problems\n   with applications.\n\
    \   Additionally, the DNS-ALG needs to determine the initial lifetime of\n   bindings\
    \ that it creates.  As noted in Section 2.3, this may need to\n   be determined\
    \ heuristically.  The DNS-ALG does not know which\n   protocol the mapping is\
    \ to be used for, and so needs another way to\n   determine the initial lifetime.\
    \  This could be tied to the DNS\n   response lifetime, but that might open up\
    \ additional DoS attack\n   possibilities if very long binding lifetimes are allowed.\
    \  Also, the\n   lifetime should be adjusted once the NAT-PT determines which\
    \ protocol\n   is being used with the binding.\n   As with traditional NATs (see\
    \ Section 2.5 of [RFC3027]), NAT-PT will\n   most likely break applications that\
    \ require address mapping to be\n   retained across contiguous sessions.  These\
    \ applications require the\n   IPv4 to IPv6 address mapping to be retained between\
    \ sessions so the\n   same mapped address may be reused for subsequent session\n\
    \   interactions.  NAT-PT cannot know this requirement and may reassign\n   the\
    \ previously used mapped address to different hosts between\n   sessions.\n  \
    \ Trying to keep NAT-PT from discarding an address mapping would\n   require either\
    \ a NAT-PT extension protocol that would allow the\n   application to request\
    \ the NAT-PT device to retain the mappings, or\n   an extended ALG (which has\
    \ all the issues discussed in Section 2.1)\n   that can interact with NAT-PT to\
    \ keep the address mapping from being\n   discarded after a session.\n"
- title: 3.4.  DoS Attacks on Memory and Address/Port Pools
  contents:
  - "3.4.  DoS Attacks on Memory and Address/Port Pools\n   As discussed in Section\
    \ 2.3, a NAT-PT may create dynamic NAT\n   bindings, each of which consumes memory\
    \ resources as well as an\n   address (or port if NAPT-PT is used) from an address\
    \ (or port) pool.\n   A number of documents, including [RFC2766] and [NATPT-SEC]\
    \ discuss\n   the possible denial of service (DoS) attacks on basic NAT-PT and\n\
    \   NAPT-PT that would result in a resource depletion associated with\n   address\
    \ and port pools.  NAT-PT does not specify any authentication\n   mechanisms;\
    \ thus, an attacker may be able to create spurious bindings\n   by spoofing addresses\
    \ in packets sent through NAT-PT.  The attack is\n   more damaging if the attacker\
    \ is able to spoof protocols with long\n   binding timeouts (typically used for\
    \ TCP).\n   The use of the DNS-ALG in NAT-PT introduces another vulnerability\n\
    \   that can result in resource depletion.  The attack identified in\n   [DNS-ALG-ISSUES]\
    \ exploits the use of DNS queries traversing NAT-PT to\n   create dynamic bindings.\
    \  Every time a DNS query is sent through the\n   NAT-PT, the NAT-PT may create\
    \ a new basic NAT-PT or NAPT-PT binding\n   without any end-host authentication\
    \ or authorization mechanisms.\n   This behavior could lead to a serious DoS attack\
    \ on both memory and\n   address or port pools.  Address spoofing is not required\
    \ for this\n   attack to be successful.\n   [DNS-ALG-SOL] proposes to mitigate\
    \ the DoS attack by using Access\n   Control Lists (ACLs) and static binds, which\
    \ increases the\n   operational cost and may not always be practical.\n   The\
    \ ideal mitigation solution would be to disallow dynamically\n   created binds\
    \ until authentication and authorization of the end-host\n   needing the protocol\
    \ translation has been carried out.  This would\n   require that the proper security\
    \ infrastructure be in place to\n   support the authentication and authorization,\
    \ which increases the\n   network operational complexity.\n"
- title: 4.  Issues Directly Related to Use of DNS-ALG
  contents:
  - '4.  Issues Directly Related to Use of DNS-ALG

    '
- title: 4.1.  Address Selection Issues when Communicating with Dual-Stack End-
  contents:
  - "4.1.  Address Selection Issues when Communicating with Dual-Stack End-\n    \
    \  Hosts\n   [DNS-ALG-ISSUES] discusses NAT-PT DNS-ALG issues with regard to\n\
    \   address selection.  As specified in [RFC2766], the DNS-ALG returns\n   AAAA\
    \ Resource Records (RRs) from two possible sources, to the IPv6\n   host that\
    \ has made an AAAA DNS query.\n   If the query relates to a dual-stack host, the\
    \ query will return both\n   the native IPv6 address(es) and the translated IPv4\
    \ address(es) in\n   AAAA RRs.  Without additional information, the IPv6 host\
    \ address\n   selection may pick a translated IPv4 address instead of selecting\
    \ the\n   more appropriate native IPv6 address.  Under some circumstances, the\n\
    \   address selection algorithms [RFC3484] will always prefer the\n   translated\
    \ address over the native IPv6 address; this is obviously\n   undesirable.\n \
    \  [DNS-ALG-SOL] proposes a solution that involves modification to the\n   NAT-PT\
    \ specification intended to return only the most appropriate\n   address(es) to\
    \ an IPv6 capable host as described below:\n   o  When a DNS AAAA query traverses\
    \ the NAT-PT DNS-ALG, the NAT-PT\n      will forward the query to the DNS server\
    \ in the IPv4 domain\n      unchanged, but using IPv4 transport.  The following\
    \ two results\n      can occur:\n      *  If the authoritative DNS server has\
    \ one or more AAAA records,\n         it returns them.  The DNS-ALG then forwards\
    \ this response to\n         the IPv6 host and does not send an A query as the\
    \ standard\n         NAT-PT would do.\n      *  Otherwise, if the DNS server does\
    \ not understand the AAAA query\n         or has no AAAA entry for the host, it\
    \ will return an error.\n         The NAT-PT DNS-ALG will intercept the error\
    \ or empty return and\n         send an A query for the same host.  If this query\
    \ returns an\n         IPv4 address, the ALG creates a binding and synthesizes\
    \ a\n         corresponding AAAA record, which it sends back to the IPv6\n   \
    \      host.\n   o  The NAT-PT thus forwards the result of the first successful\
    \ DNS\n      response back to the end-host or an error if neither succeeds.\n\
    \      Consequently, only AAAA RRs from one source will be provided\n      instead\
    \ of two as specified in [RFC2766], and it will contain the\n      most appropriate\
    \ address for a dual-stack or IPv6-only querier.\n   There is, however, still\
    \ an issue with the proposed solution:\n   o  The DNS client may timeout the query\
    \ if it doesn't receive a\n      response in time.  This is more likely than for\
    \ queries not\n      passing through a DNS ALG because the NAT-PT may have to\
    \ make two\n      separate, sequential queries of which the client is not aware.\
    \  It\n      may be possible to reduce the response time by sending the two\n\
    \      queries in parallel and ignoring the result of the A query if the\n   \
    \   AAAA returns one or more addresses.  However, it is still\n      necessary\
    \ to delay after receiving the first response to determine\n      if a second\
    \ is coming, which may still trigger the DNS client\n      timeout.\n   Unfortunately,\
    \ the two queries cannot be combined in a single DNS\n   request (all known DNS\
    \ servers only process a single DNS query per\n   request message because of difficulties\
    \ expressing authoritativeness\n   for arbitrary combinations of requests).\n\
    \   An alternative solution would be to allow the IPv6 host to use the\n   NAT-PT\
    \ PREFIX [RFC2766] within its address selection policies and to\n   assign it\
    \ a low selection priority.  This solution requires an\n   automatic configuration\
    \ of the NAT-PT PREFIX as well as its\n   integration within the address selection\
    \ policies.  The simplest way\n   to integrate this automatic configuration would\
    \ be through a\n   configuration file download (in case the host or Dynamic Host\n\
    \   Configuration Protocol for IPv6 (DHCPv6) server did not support\n   vendor\
    \ options and to avoid a standardization effort on the NAT-PT\n   PREFIX option).\
    \  This solution does not require any modification to\n   the NAT-PT specification.\n\
    \   Neither of these solutions resolves a second issue related to address\n  \
    \ selection that is identified in [DNS-ALG-ISSUES].  Applications have\n   no\
    \ way of knowing that the IPv6 address returned from the DNS-ALG is\n   not a\
    \ 'real' IPv6 address, but a translated IPv4 address.  The\n   application may\
    \ therefore, be led to believe that it has end-to-end\n   IPv6 connectivity with\
    \ the destination.  As a result, the application\n   may use IPv6-specific options\
    \ that are not supported by NAT-PT.  This\n   issue is closely related to the\
    \ issue described in Section 4.2 and\n   the discussion in Section 5.\n"
- title: 4.2.  Non-Global Validity of Translated RR Records
  contents:
  - "4.2.  Non-Global Validity of Translated RR Records\n   Some applications propagate\
    \ information records retrieved from DNS to\n   other applications.  The published\
    \ semantics of DNS imply that the\n   results will be consistent to any user for\
    \ the duration of the\n   attached lifetime.  RR records translated by NAT-PT\
    \ violate these\n   semantics because the retrieved addresses are only usable\
    \ for\n   communications through the translating NAT-PT.\n   Applications that\
    \ pass on retrieved DNS records to other applications\n   will generally assume\
    \ that they can rely on the passed on addresses\n   to be usable by the receiving\
    \ application.  This may not be the case\n   if the receiving application is on\
    \ another node, especially if it is\n   not in the domain served by the NAT-PT\
    \ that generated the\n   translation.\n"
- title: 4.3.  Inappropriate Translation of Responses to A Queries
  contents:
  - "4.3.  Inappropriate Translation of Responses to A Queries\n   Some applications\
    \ running on dual-stack nodes may wish to query the\n   IPv4 address of a destination.\
    \  If the resulting A query passes\n   through the NAT-PT DNS-ALG, the DNS-ALG\
    \ will translate the response\n   inappropriately into a AAAA record using a translated\
    \ address.  This\n   happens because the DNS-ALG specified in [RFC2766] operates\n\
    \   statelessly and hence has no memory of the IPv6 query that induced\n   the\
    \ A request on the IPv4 side.  The default action is to translate\n   the response.\n\
    \   The specification of NAT-PT could be modified to maintain a minimal\n   state\
    \ about queries passed through the DNS-ALG, and hence to respond\n   correctly\
    \ to A queries as well as AAAA queries.\n"
- title: 4.4.  DNS-ALG and Multi-Addressed Nodes
  contents:
  - "4.4.  DNS-ALG and Multi-Addressed Nodes\n   Many IPv6 nodes, especially in multihomed\
    \ situations but also in\n   single homed deployments, can expect to have multiple\
    \ global\n   addresses.  The same may be true for multihomed IPv4 nodes.\n   Responses\
    \ to DNS queries for these nodes will normally contain all\n   these addresses.\
    \  Since the DNS-ALG in the NAT-PT has no knowledge\n   which of the addresses\
    \ can or will be used by the application issuing\n   the query, it is obliged\
    \ to translate all of them.\n   This could be a significant drain on resources\
    \ in both basic NAT-PT\n   and NAPT-PT, as bindings will have to be created for\
    \ each address.\n   When using SCTP in a multihomed network, the problem is exacerbated\n\
    \   if multiple NAT-PTs translate multiple addresses.  Also, it is not\n   clear\
    \ that SCTP will actually look up all the destination IP\n   addresses via DNS,\
    \ so that bindings may not be in place when packets\n   arrive.\n"
- title: 4.5.  Limitations on Deployment of DNS Security Capabilities
  contents:
  - "4.5.  Limitations on Deployment of DNS Security Capabilities\n   Secure DNS (DNSSEC)\
    \ [RFC4033] uses public key cryptographic signing\n   to authenticate DNS responses.\
    \  The DNS-ALG modifies DNS query\n   responses traversing the NAT-PT in both\
    \ directions, which would\n   invalidate the signatures as (partially) described\
    \ in Section 7.5 of\n   [RFC2766].\n   Workarounds have been proposed, such as\
    \ making the DNS-ALG behave\n   like a secure DNS server.  This would need to\
    \ be done separately for\n   both the IPv6 and IPv4 domains.  This is operationally\
    \ very complex\n   and there is a risk that the server could be mistaken for a\n\
    \   conventional DNS server.  The NAT-PT specification would have to be\n   altered\
    \ to implement any such workaround.\n   Hence, DNSSEC is not deployable in domains\
    \ that use NAT-PT as\n   currently specified.  Widespread deployment of NAT-PT\
    \ would become a\n   serious obstacle to the large scale deployment of DNSSEC.\n"
- title: 5.  Impact on IPv6 Application Development
  contents:
  - "5.  Impact on IPv6 Application Development\n   One of the major design goals\
    \ for IPv6 is to restore the end-to-end\n   transparency of the Internet.  Therefore,\
    \ because IPv6 may be\n   expected to remove the need for NATs and similar impediments\
    \ to\n   transparency, developers creating applications to work with IPv6 may\n\
    \   be tempted to assume that the complex expedients that might have been\n  \
    \ needed to make the application work in a 'NATted' IPv4 environment\n   are not\
    \ required.\n   Consequently, some classes of applications (e.g., peer-to-peer)\
    \ that\n   would need special measures to manage NAT traversal, including\n  \
    \ special encapsulations, attention to binding lifetime, and provision\n   of\
    \ keepalives, may build in assumptions on whether IPv6 is being used\n   or not.\
    \  Developers would also like to exploit additional\n   capabilities of IPv6 not\
    \ available in IPv4.\n   NAT-PT as specified in [RFC2766] is intended to work\
    \ autonomously and\n   be transparent to applications.  Therefore, there is no\
    \ way for\n   application developers to discover that a path contains a NAT-PT.\n\
    \   If NAT-PT is deployed, applications that have assumed a NAT-free IPv6\n  \
    \ environment may break when the traffic passes through a NAT-PT.  This\n   is\
    \ bad enough, but requiring developers to include special\n   capabilities to\
    \ work around what is supposed to be a temporary\n   transition 'aid' is even\
    \ worse.  Finally, deployment of NAT-PT is\n   likely to inhibit the development\
    \ and use of additional IPv6\n   capabilities enabled by the flexible extension\
    \ header system in IPv6\n   packets.\n   Some of these deleterious effects could\
    \ possibly be alleviated if\n   applications could discover the presence of NAT-PT\
    \ boxes on paths in\n   use, allowing the applications to take steps to workaround\
    \ the\n   problems.  However, requiring applications to incorporate extra code\n\
    \   to workaround problems with a transition aid still seems to be a very\n  \
    \ bad idea: the behavior of the application in native IPv6 and NAT-PT\n   environments\
    \ would be likely to be significantly different.\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   This document summarizes security issues related\
    \ to the NAT-PT\n   [RFC2766] specification.  Security issues are discussed in\
    \ various\n   sections:\n   o  Section 2.1 discusses how IPsec AH (transport and\
    \ tunnel mode) and\n      IPsec ESP transport mode are broken by NAT-PT (when\
    \ IPsec UDP\n      encapsulation is not used [RFC3498]) and authentication and\n\
    \      encryption are generally incompatible with NAT-PT.\n   o  Section 2.5 discusses\
    \ possible fragmentation related security\n      attacks on NAT-PT.\n   o  Section\
    \ 2.8 discusses security issues related to multicast\n      addresses and NAT-PT.\n\
    \   o  Section 3.3 highlights that NAT-PT is an enticing nexus for\n      security\
    \ attacks.\n   o  Section 3.4 discusses possible NAT-PT DoS attacks on both memory\n\
    \      and address/port pools.\n   o  Section 4.5 discusses why NAT-PT is incompatible\
    \ with DNSSEC\n      [RFC4033] and how deployment of NAT-PT may inhibit deployment\
    \ of\n      DNSSEC.\n"
- title: 7.  Conclusion
  contents:
  - "7.  Conclusion\n   This document has discussed a number of significant issues\
    \ with\n   NAT-PT as defined in [RFC2766].  From a deployment perspective, 3GPP\n\
    \   networks are currently the only 'standardised' scenario where NAT-PT\n   is\
    \ envisaged as a potential mechanism to allow communication between\n   an IPv6-only\
    \ host and an IPv4-only host as discussed in the 3GPP IPv6\n   transition analysis\
    \ [RFC4215].  But RFC 4215 recommends that the\n   generic form of NAT-PT should\
    \ not be used and that modified forms\n   should only be used under strict conditions.\
    \  Moreover, it documents\n   a number of caveats and security issues specific\
    \ to 3GPP.  In\n   addition, NAT-PT has seen some limited usage for other purposes.\n\
    \   Although some of the issues identified with NAT-PT appear to have\n   solutions,\
    \ many of the solutions proposed require significant\n   alterations to the existing\
    \ specification and would likely increase\n   operational complexity.  Even if\
    \ these solutions were applied, we\n   have shown that NAT-PT still has significant,\
    \ irresolvable issues and\n   appears to have limited applicability.  The potential\
    \ constraints on\n   the development of IPv6 applications described in Section\
    \ 5 are\n   particularly undesirable.  It appears that alternatives to NAT-PT\n\
    \   exist to cover the circumstances where NAT-PT has been suggested as a\n  \
    \ solution, such as the use of application proxies in 3GPP scenarios\n   [RFC4215]\n\
    \   However, it is clear that in some circumstances an IPv6-IPv4 protocol\n  \
    \ translation solution may be a useful transitional solution,\n   particularly\
    \ in more constrained situations where the translator is\n   not required to deal\
    \ with traffic for a wide variety of protocols\n   that are not determined in\
    \ advance.  Therefore, it is possible that a\n   more limited form of NAT-PT could\
    \ be defined for use in specific\n   situations.\n   Accordingly, we recommend\
    \ that:\n   o  the IETF no longer suggest its usage as a general IPv4-IPv6\n \
    \     transition mechanism in the Internet, and\n   o  RFC 2766 is moved to Historic\
    \ status to limit the possibility of\n      it being deployed inappropriately.\n"
- title: 8.  Acknowledgments
  contents:
  - "8.  Acknowledgments\n   This work builds on a large body of existing work examining\
    \ the\n   issues and applicability of NAT-PT: the work of the authors of the\n\
    \   documents referred to in Section 1 has been extremely useful in\n   creating\
    \ this document.  Particular thanks are due to Pekka Savola\n   for rapid and\
    \ thorough review of the document.\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [RFC2765]         Nordmark, E., \"Stateless IP/ICMP\
    \ Translation\n                     Algorithm (SIIT)\", RFC 2765, February 2000.\n\
    \   [RFC2766]         Tsirtsis, G. and P. Srisuresh, \"Network Address\n     \
    \                Translation - Protocol Translation (NAT-PT)\",\n            \
    \         RFC 2766, February 2000.\n   [RFC2663]         Srisuresh, P. and M.\
    \ Holdrege, \"IP Network Address\n                     Translator (NAT) Terminology\
    \ and Considerations\",\n                     RFC 2663, August 1999.\n   [RFC3027]\
    \         Holdrege, M. and P. Srisuresh, \"Protocol\n                     Complications\
    \ with the IP Network Address\n                     Translator\", RFC 3027, January\
    \ 2001.\n   [RFC3314]         Wasserman, M., \"Recommendations for IPv6 in Third\n\
    \                     Generation Partnership Project (3GPP) Standards\",\n   \
    \                  RFC 3314, September 2002.\n   [RFC3484]         Draves, R.,\
    \ \"Default Address Selection for Internet\n                     Protocol version\
    \ 6 (IPv6)\", RFC 3484,\n                     February 2003.\n   [RFC1035]   \
    \      Mockapetris, P., \"Domain names - implementation and\n                \
    \     specification\", STD 13, RFC 1035, November 1987.\n   [RFC4294]        \
    \ Loughney, J., \"IPv6 Node Requirements\", RFC 4294,\n                     April\
    \ 2006.\n   [RFC4215]         Wiljakka, J., \"Analysis on IPv6 Transition in Third\n\
    \                     Generation Partnership Project (3GPP) Networks\",\n    \
    \                 RFC 4215, October 2005.\n   [RFC4033]         Arends, R., Austein,\
    \ R., Larson, M., Massey, D.,\n                     and S. Rose, \"DNS Security\
    \ Introduction and\n                     Requirements\", RFC 4033, March 2005.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [RFC1858]         Ziemba, G., Reed, D., and\
    \ P. Traina, \"Security\n                     Considerations for IP Fragment Filtering\"\
    ,\n                     RFC 1858, October 1995.\n   [RFC3128]         Miller,\
    \ I., \"Protection Against a Variant of the\n                     Tiny Fragment\
    \ Attack (RFC 1858)\", RFC 3128,\n                     June 2001.\n   [RFC2960]\
    \         Stewart, R., Xie, Q., Morneault, K., Sharp, C.,\n                  \
    \   Schwarzbauer, H., Taylor, T., Rytina, I., Kalla,\n                     M.,\
    \ Zhang, L., and V. Paxson, \"Stream Control\n                     Transmission\
    \ Protocol\", RFC 2960, October 2000.\n   [RFC3498]         Kuhfeld, J., Johnson,\
    \ J., and M. Thatcher,\n                     \"Definitions of Managed Objects\
    \ for Synchronous\n                     Optical Network (SONET) Linear Automatic\
    \ Protection\n                     Switching (APS) Architectures\", RFC 3498,\n\
    \                     March 2003.\n   [NATP-APP]        Satapati, S., \"NAT-PT\
    \ Applicability\", Work\n                     in Progress, October 2003.\n   [DNS-ALG-ISSUES]\
    \  Durand, A., \"Issues with NAT-PT DNS ALG in\n                     RFC2766\"\
    , Work in Progress, February 2002.\n   [DNS-ALG-SOL]     Hallingby, P. and S.\
    \ Satapati, \"NAT-PT DNS ALG\n                     solutions\", Work in Progress,\
    \ July 2002.\n   [NATPT-MOB]       Shin, M. and J. Lee, \"Considerations for Mobility\n\
    \                     Support in NAT-PT\", Work in Progress, July 2005.\n   [NATPT-SEC]\
    \       Okazaki, S. and A. Desai, \"NAT-PT Security\n                     Considerations\"\
    , Work in Progress, June 2003.\n   [TRANS-ISSUES]    Pol, R., Satapati, S., and\
    \ S. Sivakumar, \"Issues\n                     when translating between IPv4 and\
    \ IPv6\", Work\n                     in Progress, January 2003.\n   [3GPP-TRANS]\
    \      Malki, K., \"IPv6-IPv4 Translation mechanism for\n                    \
    \ SIP-based services in Third Generation Partnership\n                     Project\
    \ (3GPP) Networks\", Work in Progress,\n                     December 2003.\n\
    \   [MTP]             Tsuchiya, K., Higuchi, H., Sawada, S., and S.\n        \
    \             Nozaki, \"An IPv6/IPv4 Multicast Translator based on\n         \
    \            IGMP/MLD Proxying (mtp)\", Work in Progress,\n                  \
    \   February 2003.\n   [MCASTGW]         Venaas, S., \"An IPv4 - IPv6 multicast\
    \ gateway\",\n                     Work in Progress, February 2003.\n   [MUL-NATPT]\
    \       Park, S., \"Scalable mNAT-PT Solution\", Work\n                     in\
    \ Progress, May 2003.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Cedric Aoun\n   Energize Urnet\n   Paris\n   France\n\
    \   EMail: ietf@energizeurnet.com\n   Elwyn B. Davies\n   Folly Consulting\n \
    \  Soham, Cambs\n   UK\n   Phone: +44 7889 488 335\n   EMail: elwynd@dial.pipex.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2007).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
