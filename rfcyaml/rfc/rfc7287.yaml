- title: __initial_text__
  contents:
  - ' Mobile Multicast Sender Support in Proxy Mobile IPv6 (PMIPv6) Domains

    '
- title: Abstract
  contents:
  - "Abstract\n   Multicast communication can be enabled in Proxy Mobile IPv6 (PMIPv6)\n\
    \   domains via the Local Mobility Anchors by deploying Multicast\n   Listener\
    \ Discovery (MLD) proxy functions at Mobile Access Gateways,\n   by using direct\
    \ traffic distribution within an ISP's access network,\n   or by selective route\
    \ optimization schemes.  This document describes\n   a base solution and an experimental\
    \ protocol to support mobile\n   multicast senders in PMIPv6 domains for all three\
    \ scenarios.\n   Protocol optimizations for synchronizing PMIPv6 with PIM, as\
    \ well as\n   a peering function for MLD proxies are defined.  Mobile sources\n\
    \   always remain agnostic of multicast mobility operations.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for examination, experimental implementation, and\n   evaluation.\n\
    \   This document defines an Experimental Protocol for the Internet\n   community.\
    \  This document is a product of the Internet Engineering\n   Task Force (IETF).\
    \  It represents the consensus of the IETF\n   community.  It has received public\
    \ review and has been approved for\n   publication by the Internet Engineering\
    \ Steering Group (IESG).  Not\n   all documents approved by the IESG are a candidate\
    \ for any level of\n   Internet Standard; see Section 2 of RFC 5741.\n   Information\
    \ about the current status of this document, any errata,\n   and how to provide\
    \ feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7287.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .\
    \ . . . . .   4\n   2.  Terminology . . . . . . . . . . . . . . . . . . . . .\
    \ . . . .   5\n     2.1.  Requirements Language . . . . . . . . . . . . . . .\
    \ . . .   5\n   3.  Base Solution for Source Mobility and PMIPv6 Routing  . .\
    \ . .   5\n     3.1.  Overview  . . . . . . . . . . . . . . . . . . . . . . .\
    \ .   5\n     3.2.  Base Solution for Source Mobility: Details  . . . . . . .\
    \   9\n       3.2.1.  Operations of the Mobile Node . . . . . . . . . . . .  \
    \ 9\n       3.2.2.  Operations of the Mobile Access Gateway . . . . . . .   9\n\
    \       3.2.3.  Operations of the Local Mobility Anchor . . . . . . .   9\n  \
    \     3.2.4.  IPv4 Support  . . . . . . . . . . . . . . . . . . . .  10\n    \
    \   3.2.5.  Efficiency of the Distribution System . . . . . . . .  11\n   4. \
    \ Direct Multicast Routing  . . . . . . . . . . . . . . . . . .  12\n     4.1.\
    \  Overview  . . . . . . . . . . . . . . . . . . . . . . . .  12\n     4.2.  MLD\
    \ Proxies at MAGs . . . . . . . . . . . . . . . . . . .  13\n       4.2.1.  Considerations\
    \ for PIM-SM on the Upstream . . . . . .  14\n       4.2.2.  SSM Considerations\
    \  . . . . . . . . . . . . . . . . .  14\n     4.3.  PIM-SM at MAGs  . . . . .\
    \ . . . . . . . . . . . . . . . .  15\n       4.3.1.  Routing Information Base\
    \ for PIM-SM . . . . . . . . .  15\n       4.3.2.  Operations of PIM in Phase\
    \ One (RP Tree)  . . . . . .  16\n       4.3.3.  Operations of PIM in Phase Two\
    \ (Register-Stop)  . . .  16\n       4.3.4.  Operations of PIM in Phase Three\
    \ (Shortest-Path Tree)  17\n       4.3.5.  PIM-SSM Considerations  . . . . . .\
    \ . . . . . . . . .  18\n       4.3.6.  Handover Optimizations for PIM  . . .\
    \ . . . . . . . .  18\n     4.4.  BIDIR-PIM . . . . . . . . . . . . . . . . .\
    \ . . . . . . .  18\n       4.4.1.  Routing Information Base for BIDIR-PIM  .\
    \ . . . . . .  19\n       4.4.2.  Operations of BIDIR-PIM . . . . . . . . . .\
    \ . . . . .  19\n   5.  MLD Proxy Peering Function for Optimized Source Mobility\
    \ in\n       PMIPv6  . . . . . . . . . . . . . . . . . . . . . . . . . . .  19\n\
    \     5.1.  Requirements  . . . . . . . . . . . . . . . . . . . . . .  20\n  \
    \   5.2.  Overview  . . . . . . . . . . . . . . . . . . . . . . . .  20\n    \
    \ 5.3.  Operations in Support of Multicast Senders  . . . . . . .  20\n     5.4.\
    \  Operations in Support of Multicast Listeners  . . . . . .  21\n   6.  Security\
    \ Considerations . . . . . . . . . . . . . . . . . . .  23\n   7.  Acknowledgements\
    \  . . . . . . . . . . . . . . . . . . . . . .  23\n   8.  References  . . . .\
    \ . . . . . . . . . . . . . . . . . . . . .  24\n     8.1.  Normative References\
    \  . . . . . . . . . . . . . . . . . .  24\n     8.2.  Informative References\
    \  . . . . . . . . . . . . . . . . .  24\n   Appendix A.  Multiple Upstream Interface\
    \ Proxy  . . . . . . . . .  26\n     A.1.  Operations for Local Multicast Sources\
    \  . . . . . . . . .  26\n     A.2.  Operations for Local Multicast Subscribers\
    \  . . . . . . .  26\n   Appendix B.  Implementation . . . . . . . . . . . . .\
    \ . . . . . .  27\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   Proxy Mobile IPv6 (PMIPv6) [RFC5213] extends Mobile IPv6\
    \ (MIPv6)\n   [RFC6275] by network-based management functions that enable IP\n\
    \   mobility for a host without requiring its participation in any\n   mobility-related\
    \ signaling.  Additional network entities called Local\n   Mobility Anchor (LMAs)\
    \ and Mobile Access Gateways (MAGs) are\n   responsible for managing IP mobility\
    \ on behalf of the mobile node\n   (MN).  An MN connected to a PMIPv6 domain,\
    \ which only operates\n   according to the base specifications of [RFC5213], cannot\
    \ participate\n   in multicast communication, as MAGs will discard group packets.\n\
    \   Multicast support for mobile listeners can be enabled within a PMIPv6\n  \
    \ domain by deploying MLD proxy functions at Mobile Access Gateways,\n   and multicast\
    \ routing functions at Local Mobility Anchors [RFC6224].\n   This base deployment\
    \ option is the simplest way to PMIPv6 multicast\n   extensions in the sense that\
    \ it follows the common PMIPv6 traffic\n   model and neither requires new protocol\
    \ operations nor additional\n   infrastructure entities.  Standard software functions\
    \ need to be\n   activated on PMIPv6 entities, only, at the price of possibly\
    \ non-\n   optimal multicast routing.\n   Alternate solutions leverage performance\
    \ optimization by providing\n   multicast routing at the access gateways directly\
    \ [MULTI-EXT] or by\n   using selective route optimization schemes [RFC7028].\
    \  Such\n   approaches (partially) follow the model of providing multicast data\n\
    \   services in parallel to PMIPv6 unicast routing [RFC7161].\n   Multicast listener\
    \ support satisfies the needs of receptive use cases\n   such as IPTV or server-centric\
    \ gaming on mobiles.  However, current\n   trends in the Internet develop towards\
    \ user-centric, highly\n   interactive group applications like user-generated\
    \ streaming,\n   conferencing, collective mobile sensing, etc.  Many of these\
    \ popular\n   applications create group content at end systems and can largely\n\
    \   profit from a direct data transmission to a multicast-enabled\n   network.\n\
    \   This document describes the support of mobile multicast senders in\n   Proxy\
    \ Mobile IPv6 domains for the base deployment scenario [RFC6224],\n   for direct\
    \ traffic distribution within an ISP's access network, as\n   well as for selective\
    \ route optimization schemes.  The source\n   mobility problem as discussed in\
    \ [RFC5757] serves as a foundation of\n   this document.  Mobile nodes in this\
    \ setting remain agnostic of\n   multicast mobility operations.\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   This document uses the terminology as defined for the mobility\n\
    \   protocols [RFC6275], [RFC5213], and [RFC5844], as well as the\n   multicast\
    \ routing [RFC4601] and edge-related protocols [RFC3376],\n   [RFC3810], and [RFC4605].\n\
    \   Throughout this document, we use the following acronyms:\n   HNP      Home\
    \ Network Prefix as defined in [RFC5213].\n   MAG      Mobile Access Gateway as\
    \ defined in [RFC5213].\n   MLD      Multicast Listener Discovery as defined in\
    \ [RFC2710] and\n            [RFC3810].\n   PIM      Protocol Independent Multicast\
    \ as defined in [RFC4601].\n   PMIPv6   Proxy Mobile IPv6 as defined in [RFC5213].\n"
- title: 2.1.  Requirements Language
  contents:
  - "2.1.  Requirements Language\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\"\
    , \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"\
    MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in RFC 2119 [RFC2119].\n"
- title: 3.  Base Solution for Source Mobility and PMIPv6 Routing
  contents:
  - '3.  Base Solution for Source Mobility and PMIPv6 Routing

    '
- title: 3.1.  Overview
  contents:
  - "3.1.  Overview\n   The reference scenario for multicast deployment in Proxy Mobile\
    \ IPv6\n   domains is illustrated in Figure 1.  It displays the general setting\n\
    \   for source mobility -- mobile nodes (MNs) with Home Network Prefixes\n   (HNPs)\
    \ that receive services via tunnels, which are spanned between a\n   Local Mobility\
    \ Anchor Address (LMAA) and a Proxy Care-of-Address\n   (Proxy-CoA) at a Mobility\
    \ Access Gateway (MAG).  MAGs play the role\n   of first-hop access routers that\
    \ serve multiple MNs on the downstream\n   while running an MLD/IGMP proxy instance\
    \ for every LMA upstream\n   tunnel.\n                          +-------------+\n\
    \                          | Multicast   |\n                          | Listeners\
    \   |\n                          +-------------+\n                           \
    \      |\n                        ***  ***  ***  ***\n                       *\
    \   **   **   **   *\n                      *                    *\n         \
    \              *  Fixed Internet  *\n                      *                 \
    \   *\n                       *   **   **   **   *\n                        ***\
    \  ***  ***  ***\n                         /            \\\n                 \
    \    +----+         +----+\n                     |LMA1|         |LMA2|       \
    \       Multicast Anchor\n                     +----+         +----+\n       \
    \         LMAA1  |              |  LMAA2\n                       |           \
    \   |\n                       \\\\           //\\\\\n                        \\\
    \\         //  \\\\\n                         \\\\       //    \\\\          \
    \      Unicast Tunnel\n                          \\\\     //      \\\\\n     \
    \                      \\\\   //        \\\\\n                            \\\\\
    \ //          \\\\\n                  Proxy-CoA1 ||            ||  Proxy-CoA2\n\
    \                          +----+          +----+\n                          |MAG1|\
    \          |MAG2|           MLD Proxy\n                          +----+      \
    \    +----+\n                           |  |             |\n                 \
    \  MN-HNP1 |  | MN-HNP2     | MN-HNP3\n                           |  |       \
    \      |\n                          MN1 MN2          MN3\n                   \
    \ Multicast Sender + Listener(s)\n      Figure 1: Reference Network for Multicast\
    \ Deployment in PMIPv6\n   An MN in a PMIPv6 domain will decide on multicast data\
    \ transmission\n   completely independent of its current mobility conditions.\
    \  It will\n   send packets as initiated by applications, using its source address\n\
    \   with an HNP and a multicast destination address chosen by application\n  \
    \ needs.  Multicast packets will arrive at the currently active MAG via\n   one\
    \ of its downstream local (wireless) links.  A multicast-unaware\n   MAG would\
    \ simply discard these packets in the absence of instructions\n   for packet processing,\
    \ i.e., a Multicast Routing Information Base\n   (MRIB).\n   An MN can successfully\
    \ distribute multicast data in PMIPv6, if MLD\n   proxy functions are deployed\
    \ at the MAG as described in [RFC6224].\n   In this setup, the MLD proxy instance\
    \ serving a mobile multicast\n   source has configured its upstream interface\
    \ at the tunnel towards\n   the MN's corresponding LMA.  For each LMA, there will\
    \ be a separate\n   instance of an MLD proxy.\n   According to the specifications\
    \ given in [RFC4605], multicast data\n   arriving from a downstream interface\
    \ of an MLD proxy will be\n   forwarded to the upstream interface and to all but\
    \ the incoming\n   downstream interfaces that have appropriate forwarding states\
    \ for\n   this group.  Thus, multicast streams originating from an MN will\n \
    \  arrive at the corresponding LMA and directly at all mobile receivers\n   co-located\
    \ at the same MAG and MLD proxy instance.  Serving as the\n   designated multicast\
    \ router or an additional MLD proxy, the LMA\n   forwards data to the fixed Internet,\
    \ whenever forwarding states are\n   maintained by multicast routing.  If the\
    \ LMA is acting as another MLD\n   proxy, it will forward the multicast data to\
    \ its upstream interface\n   and to downstream interfaces with matching subscriptions,\n\
    \   accordingly.\n   In case of a handover, the MN (being unaware of IP mobility)\
    \ can\n   continue to send multicast packets as soon as network connectivity is\n\
    \   re-established.  At this time, the MAG has determined the\n   corresponding\
    \ LMA, and IPv6 unicast address configuration (including\n   PMIPv6 bindings)\
    \ has been completed.  Still, multicast packets\n   arriving at the MAG are discarded\
    \ (if not buffered) until the MAG has\n   completed the following steps.\n   1.\
    \  The MAG has determined that the MN is admissible to multicast\n       services.\n\
    \   2.  The MAG has added the new downstream link to the MLD proxy\n       instance\
    \ with an uplink to the corresponding LMA.\n   As soon as the MN's uplink is associated\
    \ with the corresponding MLD\n   proxy instance, multicast packets are forwarded\
    \ again to the LMA and\n   eventually to receivers within the PMIP domain.  (See\
    \ the call flow\n   in Figure 2.)  In this way, multicast source mobility is\n\
    \   transparently enabled in PMIPv6 domains that deploy the base scenario\n  \
    \ for multicast.\n   MN1             MAG1             MN2             MAG2   \
    \          LMA\n   |                |                |               |       \
    \         |\n   |                | Mcast Data     |               |          \
    \      |\n   |                |<---------------+               |             \
    \   |\n   |                |     Mcast Data |               |                |\n\
    \   |  Join(G)       +================================================>|\n   +-------------->\
    \ |                |               |                |\n   | Mcast Data     | \
    \               |               |                |\n   |<---------------+    \
    \            |               |                |\n   |                |       \
    \         |               |                |\n   |           <  Movement of MN\
    \ 2 to MAG2  &  PMIP Binding Update  > |\n   |                |              \
    \  |               |                |\n   |                |                |---\
    \ Rtr Sol -->|                |\n   |                |                |<-- Rtr\
    \ Adv ---|                |\n   |                |                |          \
    \     |                |\n   |                |                |   < MLD Proxy\
    \ Configuration >  |\n   |                |                |               | \
    \               |\n   |                |                |  (MLD Query)  |    \
    \            |\n   |                |                |<--------------+       \
    \         |\n   |                |                |  Mcast Data   |          \
    \      |\n   |                |                +-------------->|             \
    \   |\n   |                |                |               | Mcast Data     |\n\
    \   |                |                |               +===============>|\n   |\
    \                |                |               |                |\n   |   \
    \             |   Mcast Data   |               |                |\n   |      \
    \          |<================================================+\n   |  Mcast Data\
    \    |                |               |                |\n   |<---------------+\
    \                |               |                |\n   |                |   \
    \             |               |                |\n                Legend: Rtr\
    \ Sol - ICMPv6 Router Solicitation\n                        Rtr Adv - ICMPv6 Router\
    \ Advertisement\n   Figure 2: Call Flow for Group Communication in Multicast-Enabled\
    \ PMIP\n   These multicast deployment considerations likewise apply for mobile\n\
    \   nodes that operate with their IPv4 stack enabled in a PMIPv6 domain.\n   PMIPv6\
    \ can provide IPv4 home address mobility support [RFC5844].\n   IPv4 multicast\
    \ is handled by an IGMP proxy function at the MAG in an\n   analogous way.\n \
    \  Following these deployment steps, multicast traffic distribution\n   transparently\
    \ interoperates with PMIPv6.  It is worth noting that an\n   MN -- while being\
    \ attached to the same MAG as the mobile source, but\n   associated with a different\
    \ LMA -- cannot receive multicast traffic\n   on a shortest path.  Instead, multicast\
    \ streams flow up to the LMA of\n   the mobile source, are transferred to the\
    \ LMA of the mobile listener,\n   and are tunneled downwards to the MAG again.\
    \  (See Section 5 for\n   further optimizations.)\n"
- title: '3.2.  Base Solution for Source Mobility: Details'
  contents:
  - "3.2.  Base Solution for Source Mobility: Details\n   Support of multicast source\
    \ mobility in PMIPv6 requires that general\n   multicast functions be deployed\
    \ at PMIPv6 routers and that their\n   interactions with the PMIPv6 protocol be\
    \ defined as follows.\n"
- title: 3.2.1.  Operations of the Mobile Node
  contents:
  - "3.2.1.  Operations of the Mobile Node\n   A mobile node willing to send multicast\
    \ data will proceed as if\n   attached to the fixed Internet.  No specific mobility\
    \ or other\n   multicast-related functionalities are required at the MN.\n"
- title: 3.2.2.  Operations of the Mobile Access Gateway
  contents:
  - "3.2.2.  Operations of the Mobile Access Gateway\n   A Mobile Access Gateway is\
    \ required to have MLD proxy instances\n   deployed, one for each tunnel to an\
    \ LMA, which serves as its unique\n   upstream link (cf. [RFC6224]).  On the arrival\
    \ of an MN, the MAG\n   decides on the mapping of downstream links to a proxy\
    \ instance and\n   the upstream link to the LMA based on the regular Binding Update\
    \ List\n   as maintained by PMIPv6 standard operations.  When multicast data is\n\
    \   received from the MN, the MAG MUST identify the corresponding proxy\n   instance\
    \ from the incoming interface and forwards multicast data\n   upstream according\
    \ to [RFC4605].\n   The MAG MAY apply special admission control to enable multicast\
    \ data\n   transmission from an MN.  It is advisable to take special care that\n\
    \   MLD proxy implementations do not redistribute multicast data to\n   downstream\
    \ interfaces without appropriate subscriptions in place.\n"
- title: 3.2.3.  Operations of the Local Mobility Anchor
  contents:
  - "3.2.3.  Operations of the Local Mobility Anchor\n   For any MN, the Local Mobility\
    \ Anchor acts as the persistent Home\n   Agent and at the same time as the default\
    \ multicast upstream for the\n   corresponding MAG.  It will manage and maintain\
    \ a multicast\n   forwarding information base for all group traffic arriving from\
    \ its\n   mobile sources.  It SHOULD participate in multicast routing functions\n\
    \   that enable traffic redistribution to all adjacent LMAs within the\n   PMIPv6\
    \ domain and thereby ensure a continuous receptivity while the\n   source is in\
    \ motion.\n"
- title: 3.2.3.1.  Local Mobility Anchors Operating PIM
  contents:
  - "3.2.3.1.  Local Mobility Anchors Operating PIM\n   Local Mobility Anchors that\
    \ operate the Protocol Independent\n   Multicast - Sparse Mode (PIM-SM) routing\
    \ protocol [RFC4601] will\n   require sources to be directly connected for sending\
    \ PIM registers to\n   the Rendezvous Point (RP).  This does not hold in a PMIPv6\
    \ domain, as\n   MAGs are routers intermediate to the MN and the LMA.  In this\
    \ sense,\n   MNs are multicast sources external to the PIM-SM domain.\n   To mitigate\
    \ this incompatibility common to all subsidiary MLD proxy\n   domains, the LMA\
    \ MUST act as a PIM Border Router and activate the\n   Border-bit.  In this case,\
    \ the DirectlyConnected(S) is treated as\n   being TRUE for mobile sources and\
    \ the PIM-SM forwarding rule \"iif ==\n   RPF_interface(S)\" is relaxed to be\
    \ TRUE, as the incoming tunnel\n   interface from MAG to LMA is not considered\
    \ part of the PIM-SM\n   component of the LMA (see Appendix A.1 of [RFC4601] ).\n\
    \   In addition, an LMA serving as the PIM Designated Router (DR) is\n   connected\
    \ to MLD proxies via individual IP tunnel interfaces and will\n   experience changing\
    \ PIM source states on handover.  As the incoming\n   interface connects to a\
    \ point-to-point link, PIM Assert contention is\n   not active, and incoming interface\
    \ validation is only performed by\n   Reverse Path Forwarding (RPF) checks.  Consequently,\
    \ a PIM DR SHOULD\n   update incoming source states, as soon as RPF inspection\
    \ succeeds,\n   i.e., after the PMIPv6 forwarding state update.  Consequently,\
    \ PIM\n   routers SHOULD be able to manage these state changes, but some\n   implementations\
    \ are expected to incorrectly refuse packets until the\n   previous state has\
    \ timed out.\n   Notably, running Bidirectional PIM (BIDIR-PIM) [RFC5015] on LMAs\n\
    \   remains robust with respect to source location and does not require\n   special\
    \ configurations or state management for sources.\n"
- title: 3.2.4.  IPv4 Support
  contents:
  - "3.2.4.  IPv4 Support\n   An MN in a PMIPv6 domain may use an IPv4 address transparently\
    \ for\n   communication as specified in [RFC5844].  For this purpose, an LMA\n\
    \   can register an IPv4-Proxy-CoA in its Binding Cache, and the MAG can\n   provide\
    \ IPv4 support in its access network.  Correspondingly,\n   multicast membership\
    \ management will be performed by the MN using\n   IGMP.  For multicast support\
    \ on the network side, an IGMP proxy\n   function needs to be deployed at MAGs\
    \ in exactly the same way as for\n   IPv6.  [RFC4605] defines IGMP proxy behavior\
    \ in full agreement with\n   IPv6/MLD.  Thus, IPv4 support can be transparently\
    \ provided following\n   the obvious deployment analogy.\n   For a dual-stack\
    \ IPv4/IPv6 access network, the MAG proxy instances\n   SHOULD choose multicast\
    \ signaling according to address configurations\n   on the link, but they MAY\
    \ submit IGMP and MLD queries in parallel, if\n   needed.  It should further be\
    \ noted that the infrastructure cannot\n   identify two data streams as identical\
    \ when distributed via an IPv4\n   and IPv6 multicast group.  Thus, duplicate\
    \ data may be forwarded on a\n   heterogeneous network layer.\n   The following\
    \ points are worth noting about the scenario in [RFC5845]\n   in which overlapping\
    \ private address spaces of different operators\n   can be hosted in a PMIP domain\
    \ by using Generic Routing Encapsulation\n   (GRE) with key identification.  This\
    \ scenario implies that unicast\n   communication in the MAG-LMA tunnel can be\
    \ individually identified\n   per MN by the GRE keys.  This scenario still does\
    \ not impose any\n   special treatment of multicast communication for the following\n\
    \   reasons.\n   Multicast streams from and to MNs arrive at a MAG on point-to-point\n\
    \   links (identical to unicast).  Multicast data transmission from the\n   MAG\
    \ to the corresponding LMA is link-local between the routers and\n   routing/forwarding\
    \ remains independent of any individual MN.  So, the\n   MAG-proxy and the LMA\
    \ SHOULD NOT use GRE key identifiers, but plain\n   GRE in multicast communication\
    \ (including MLD queries and reports).\n   Multicast traffic is transmitted using\
    \ router-to-router forwarding\n   via the MAG-to-LMA tunnels and according to\
    \ the MRIB of the MAG or\n   the LMA.  It remains independent of MN's unicast\
    \ addresses, while the\n   MAG proxy instance redistributes multicast data down\
    \ the point-to-\n   point links (interfaces) according to its local subscription\
    \ states,\n   independent of IP addresses of the MN.\n"
- title: 3.2.5.  Efficiency of the Distribution System
  contents:
  - "3.2.5.  Efficiency of the Distribution System\n   The distribution system of\
    \ the base solution directly follows PMIPv6\n   routing rules and organizes multicast\
    \ domains with respect to LMAs.\n   Thus, no coordination between address spaces\
    \ or services is required\n   between the different instances, provided their\
    \ associated LMAs\n   belong to disjoint multicast domains.  Routing is optimal\
    \ for\n   communication between MNs of the same domain or stationary\n   subscribers.\n\
    \   In the following situations, efficiency-related issues remain.\n   Multicast\
    \ reception at LMA\n      In the current deployment scenario, the LMA will receive\
    \ all\n      multicast traffic originating from its associated MNs.  There is\n\
    \      no mechanism to suppress upstream forwarding in the absence of\n      receivers.\n\
    \   MNs on the same MAG using different LMAs\n      For a mobile receiver and\
    \ a source that use different LMAs, the\n      traffic has to go up to one LMA,\
    \ cross over to the other LMA, and\n      then be tunneled back to the same MAG,\
    \ causing redundant flows in\n      the access network and at the MAG.\n   These\
    \ remaining deficits in routing efficiency can be resolved by\n   adding peering\
    \ functions to MLD proxies as described in Section 5.\n"
- title: 4.  Direct Multicast Routing
  contents:
  - "4.  Direct Multicast Routing\n   There are deployment scenarios, where multicast\
    \ services are\n   available throughout the access network independent of the\
    \ PMIPv6\n   routing system [RFC7028].  In these cases, the visited networks grant\n\
    \   a local content distribution service (in contrast to LMA-based home\n   subscription)\
    \ with locally optimized traffic flows.  It is also\n   possible to deploy a mixed\
    \ service model of local and LMA-based\n   subscriptions, provided that a unique\
    \ way of service selection is\n   implemented.  For example, access routers (MAGs)\
    \ could decide on\n   service access based on the multicast address G or the source-\n\
    \   specific multicast (SSM) channel (S,G) under request.  (See\n   Appendix A\
    \ for further discussions.)\n"
- title: 4.1.  Overview
  contents:
  - "4.1.  Overview\n   Direct multicast access can be supported by\n   o  native\
    \ multicast routing provided by one multicast router that is\n      neighboring\
    \ MLD proxies deployed at MAGs within a flat access\n      network, or via tunnel\
    \ uplinks,\n   o  a multicast routing protocol such as PIM-SM [RFC4601] or BIDIR-PIM\n\
    \      [RFC5015] deployed at the MAGs.\n               ***  ***  ***  ***\n  \
    \            *   **   **   **   *\n             *                    *\n     \
    \        *      Multicast     *\n    +----+   *   Infrastructure   *         \
    \                      +----+\n    |LMA |    *   **   **   **   *            \
    \                    |LMA |\n    +----+     ***  ***  ***  ***               \
    \                  +----+\n         |          //  \\\\                      \
    \                       |\n         \\\\        //    \\\\       PMIP (unicast)\
    \                       |\n  PMIP    \\\\      //      \\\\      //          \\\
    \\   **  ***  *** **    //\n"
- title: (unicast)  \\    //        \\    //            \\ *   **   **     ** //
  contents:
  - "(unicast)  \\\\    //        \\\\    //            \\\\ *   **   **     ** //\n\
    \            \\\\  //          \\\\  //              \\\\*    Multicast   *//\n\
    \            || ||           || ||              * ||     Routing    || *\n   \
    \        +----+          +----+              * +----+         +----+ *\n MLD Proxy\
    \ |MAG1|          |MAG2|              * |MAG1|         |MAG2| *\n           +----+\
    \          +----+               *+----+ **   ** +----+*\n            |  |    \
    \         |                    |  |***  ***   ***|\n            |  |         \
    \    |                    |  |              |\n           MN1 MN2          MN3\
    \                 MN1 MN2            MN3\n (a) Multicast Access at Proxy Uplink\
    \      (b) Multicast Routing at MAG\n   Figure 3: Reference Networks for (a) Proxy-Assisted\
    \ Direct Multicast\n             Access and (b) Dynamic Multicast Routing at MAGs\n\
    \   Figure 3 displays the corresponding deployment scenarios that\n   separate\
    \ multicast from PMIPv6 unicast routing.  It is assumed\n   throughout these scenarios\
    \ that all MAGs (MLD proxies) are linked to\n   a single multicast routing domain.\
    \  Notably, this scenario requires\n   coordination of multicast address utilization\
    \ and service bindings.\n   Multicast traffic distribution can be simplified in\
    \ these scenarios.\n   A single proxy instance at MAGs with uplinks into the multicast\n\
    \   domain will serve as a first-hop multicast gateway and avoid traffic\n   duplication\
    \ or detour routing.  Multicast routing functions at MAGs\n   will seamlessly\
    \ embed access gateways within a multicast cloud.\n   However, mobility of the\
    \ multicast source in this scenario will\n   require some multicast routing protocols\
    \ to rebuild distribution\n   trees.  This can cause significant service disruptions\
    \ or delays (see\n   [RFC5757] for further aspects).  Deployment details are specific\
    \ to\n   the multicast routing protocol in use; this is described below for\n\
    \   common protocols.\n"
- title: 4.2.  MLD Proxies at MAGs
  contents:
  - "4.2.  MLD Proxies at MAGs\n   In a PMIPv6 domain, single MLD proxy instances\
    \ can be deployed at\n   each MAG that enable multicast service at the access\
    \ via an uplink to\n   a multicast service infrastructure (see Figure 3(a)). \
    \ To avoid\n   service disruptions on handovers, the uplinks of all proxies SHOULD\n\
    \   be adjacent to the same next-hop multicast router.  This can either\n   be\
    \ achieved by arranging proxies within a flat access network or by\n   using upstream\
    \ tunnels that terminate at a common multicast router.\n   Multicast data submitted\
    \ by a mobile source will reach the MLD proxy\n   at the MAG that subsequently\
    \ forwards flows to the upstream and to\n   all downstream interfaces with appropriate\
    \ subscriptions.  Traversing\n   the upstream will transfer traffic into the multicast\
    \ infrastructure\n   (e.g., to a PIM Designated Router) that will route packets\
    \ to all\n   local MAGs that have joined the group, as well as further upstream\n\
    \   according to protocol procedures and forwarding states.\n   On handover, a\
    \ mobile source will reattach to a new MAG and can\n   continue to send multicast\
    \ packets as soon as PMIPv6 unicast\n   configurations have been completed.  Like\
    \ at the previous MAG, the\n   new MLD proxy will forward data upstream and downstream\
    \ to\n   subscribers.  Listeners local to the previous MAG will continue to\n\
    \   receive group traffic via the local multicast distribution\n   infrastructure\
    \ following aggregated listener reports of the previous\n   proxy.  In general,\
    \ traffic from the mobile source continues to be\n   transmitted via the same\
    \ next-hop multicast router using the same\n   source address and thus remains\
    \ unchanged when seen from the wider\n   multicast infrastructure.\n"
- title: 4.2.1.  Considerations for PIM-SM on the Upstream
  contents:
  - "4.2.1.  Considerations for PIM-SM on the Upstream\n   A mobile source that transmits\
    \ data via an MLD proxy will not be\n   directly connected to a PIM Designated\
    \ Router as discussed in\n   Section 3.2.3.1.  Countermeasures apply correspondingly.\n\
    \   A PIM Designated Router that is connected to MLD proxies via\n   individual\
    \ IP tunnel interfaces will experience invalid PIM source\n   states on handover.\
    \  In some implementations of PIM-SM, this could\n   lead to an interim packet\
    \ loss (see Section 3.2.3.1).  This problem\n   can be mitigated by aggregating\
    \ proxies on a lower layer.\n"
- title: 4.2.2.  SSM Considerations
  contents:
  - "4.2.2.  SSM Considerations\n   Source-specific subscriptions invalidate with\
    \ routes, whenever the\n   source moves from or to the MAG/proxy of a subscriber.\
    \  Multicast\n   forwarding states will rebuild with unicast route changes.  However,\n\
    \   this may lead to noticeable service disruptions for locally\n   subscribed\
    \ nodes.\n"
- title: 4.3.  PIM-SM at MAGs
  contents:
  - "4.3.  PIM-SM at MAGs\n   The full-featured multicast routing protocol PIM-SM\
    \ MAY be deployed\n   in the access network for providing multicast services in\
    \ parallel to\n   unicast routes (see Figure 3(b)).  Throughout this section,\
    \ it is\n   assumed that the PMIPv6 mobility domain is part of a single PIM-SM\n\
    \   multicast routing domain with PIM-SM routing functions present at all\n  \
    \ MAGs and all LMAs.  The PIM routing instance at a MAG SHALL then\n   serve as\
    \ the Designated Router (DR) for all directly attached Mobile\n   Nodes.  For\
    \ expediting handover operations, it is advisable to\n   position PIM Rendezvous\
    \ Points (RPs) in the core of the PMIPv6\n   network domain.  However, regular\
    \ IP routing tables need not be\n   present in a PMIPv6 deployment, and additional\
    \ effort is required to\n   establish reverse path forwarding rules as required\
    \ by PIM-SM.\n"
- title: 4.3.1.  Routing Information Base for PIM-SM
  contents:
  - "4.3.1.  Routing Information Base for PIM-SM\n   In this scenario, PIM-SM will\
    \ rely on a Multicast Routing Information\n   Base (MRIB) that is generated independently\
    \ of the policy-based\n   routing rules of PMIPv6.  The granularity of mobility-related\
    \ routing\n   locators required in PIM depends on the complexity (specific phase)\n\
    \   of its deployment.\n   For all three phases in the operation of PIM (see [RFC4601]),\
    \ the\n   following information is needed.\n   o  All routes to networks and nodes\
    \ (including RPs) that are not\n      mobile members of the PMIPv6 domain MUST\
    \ be defined consistently\n      among PIM routers and MUST remain unaffected\
    \ by node mobility.\n      The setup of these general routes is expected to follow\
    \ the\n      topology of the operator network and is beyond the scope of this\n\
    \      document.\n   The following route entries are required at a PIM-operating\
    \ MAG when\n   phase two or three of PIM or PIM-SSM is in operation.\n   o  Local\
    \ routes to the Home Network Prefixes (HNPs) of all MNs\n      associated with\
    \ their corresponding point-to-point attachments\n      that MUST be included\
    \ in the local MRIB.\n   o  All routes to MNs that are attached to distant MAGs\
    \ of the PMIPv6\n      domain point towards their corresponding LMAs.  These routes\
    \ MUST\n      be made available in the MRIB of all PIM routers (except for the\n\
    \      local MAG of attachment), but they MAY be eventually expressed by\n   \
    \   an appropriate default entry.\n"
- title: 4.3.2.  Operations of PIM in Phase One (RP Tree)
  contents:
  - "4.3.2.  Operations of PIM in Phase One (RP Tree)\n   A new mobile source S will\
    \ transmit multicast data of group G towards\n   its MAG of attachment.  Acting\
    \ as a PIM DR, the access gateway will\n   unicast-encapsulate the multicast packets\
    \ and forward the data to the\n   Virtual Interface (VI) with encapsulation target\
    \ RP(G), a process\n   known as \"PIM source registering\".  The RP will decapsulate\
    \ and\n   natively forward the packets down the RP-based distribution tree\n \
    \  towards (mobile and stationary) subscribers.\n   On handover, the point-to-point\
    \ link connecting the mobile source to\n   the old MAG will go down and all (S,*)\
    \ flows terminate.  In response,\n   the previous DR (MAG) deactivates the data\
    \ encapsulation channels for\n   the transient source (i.e., all DownstreamJPState(S,*,VI)\
    \ are set to\n   NoInfo state).  After reattaching and completing unicast handover\n\
    \   negotiations, the mobile source can continue to transmit multicast\n   packets,\
    \ while being treated as a new source at its new DR (MAG).\n   Source register\
    \ encapsulation will be immediately initiated, and\n   (S,G) data continue to\
    \ flow natively down the (*,G) RP-based tree.\n   Source handover management in\
    \ PIM phase one admits low complexity and\n   remains transparent to receivers.\
    \  In addition, the source register\n   tunnel management of PIM is a fast protocol\
    \ operation that introduces\n   little overhead.  In a PMIPv6 deployment, PIM\
    \ RPs MAY be configured\n   to uninitiated (S,G) shortest path trees for mobile\
    \ sources, and thus\n   remain in phase one of the protocol.  The price to pay\
    \ for such\n   simplified deployment lies in possible routing detours by an overall\n\
    \   RP-based packet distribution.\n"
- title: 4.3.3.  Operations of PIM in Phase Two (Register-Stop)
  contents:
  - "4.3.3.  Operations of PIM in Phase Two (Register-Stop)\n   After receiving source\
    \ register packets, a PIM RP eventually will\n   initiate a source-specific Join\
    \ for creating a shortest path tree to\n   the (mobile) source S and issue a source\
    \ register stop at the native\n   arrival of data from S.  For initiating an (S,G)\
    \ tree, the RP, as\n   well as all intermediate routers, require route entries\
    \ for the HNP\n   of the MN that -- unless the RP coincides with the MAG of S\
    \ -- point\n   towards the corresponding LMA of S.  Consequently, the (S,G) tree\n\
    \   will proceed from the RP via the (stable) LMA, down the LMA-MAG\n   tunnel\
    \ to the mobile source.  This tree can be of lower routing\n   efficiency than\
    \ the PIM source register tunnel established in phase\n   one.\n   On handover,\
    \ the mobile source reattaches to a new MAG (DR), and\n   PMIPv6 unicast management\
    \ will transfer the LMA-MAG tunnel to the new\n   point of attachment.  However,\
    \ in the absence of a corresponding\n   multicast forwarding state, the new DR\
    \ will treat S as a new source\n   and initiate a source registering of PIM phase\
    \ one with the RP.  In\n   response, the PIM RP will recognize the known source\
    \ at a new\n   (tunnel) interface and will immediately respond with a register\
    \ stop.\n   As the RP had previously joined the shortest path tree towards the\n\
    \   source via the LMA, it will see an RPF change when data arrives at a\n   new\
    \ interface.  This is implementation dependent and can trigger an\n   update of\
    \ the PIM MRIB as well as a new PIM Join message that will\n   install the multicast\
    \ forwarding state missing at the new MAG.\n   Otherwise, the tree is periodically\
    \ updated by Joins transmitted\n   towards the new MAG on a path via the LMA.\
    \  In proceeding this way, a\n   quick recovery of PIM transition from phase one\
    \ to two will be\n   performed per handover.\n"
- title: 4.3.4.  Operations of PIM in Phase Three (Shortest-Path Tree)
  contents:
  - "4.3.4.  Operations of PIM in Phase Three (Shortest-Path Tree)\n   In response\
    \ to an exceeded threshold of packet transmission, DRs of\n   receivers eventually\
    \ will initiate a source-specific Join for\n   creating a shortest path tree to\
    \ the (mobile) source S, thereby\n   transitioning PIM into the final shortcut\
    \ phase three.  For all\n   receivers not sharing a MAG with S, this (S,G) tree\
    \ will range from\n   the receiving DR via the (stable) LMA, the LMA-MAG tunnel,\
    \ and the\n   serving MAG to the mobile source.  This tree is of higher routing\n\
    \   efficiency than that established in the previous phase two, but it\n   need\
    \ not outperform the PIM source register tunnel established in\n   phase one.\
    \  It provides the advantage of immediate data delivery to\n   receivers that\
    \ share a MAG with S.\n   On handover, the mobile source reattaches to a new MAG\
    \ (DR), and\n   PMIPv6 unicast management will transfer the LMA-MAG tunnel to\
    \ the new\n   point of attachment.  However, in the absence of a corresponding\n\
    \   multicast forwarding state, the new DR will treat S as a new source\n   and\
    \ initiate a source registering of PIM phase one.  A PIM\n   implementation compliant\
    \ with this change can recover phase three\n   states in the following way.  First,\
    \ the RP recovers to phase two as\n   described in the previous section and will\
    \ not forward data arriving\n   via the source register tunnel.  Tree maintenance\
    \ eventually\n   triggered by the RPF change (see Section 4.3.3) will generate\
    \ proper\n   states for a native forwarding from the new MAG via the LMA.\n  \
    \ Thereafter, packets arriving at the LMA without source register\n   encapsulation\
    \ are forwarded natively along the shortest path tree\n   towards receivers.\n\
    \   In consequence, the PIM transitions from phase one to two to three\n   will\
    \ be quickly recovered per handover but still lead to an enhanced\n   signaling\
    \ load and intermediate packet loss.\n"
- title: 4.3.5.  PIM-SSM Considerations
  contents:
  - "4.3.5.  PIM-SSM Considerations\n   Source-specific Joins of receivers will guide\
    \ PIM to operate in SSM\n   mode and lead to an immediate establishment of source-specific\n\
    \   shortest path trees.  Such (S,G) trees will equal the distribution\n   system\
    \ of PIM's final phase three (see Section 4.3.4).  However, on\n   handover and\
    \ in the absence of RP-based data distribution, SSM data\n   delivery cannot be\
    \ resumed via source registering as in PIM phase\n   one.  Consequently, data\
    \ packets transmitted after a handover will be\n   discarded at the MAG until\
    \ regular tree maintenance has reestablished\n   the (S,G) forwarding state at\
    \ the new MAG.\n"
- title: 4.3.6.  Handover Optimizations for PIM
  contents:
  - "4.3.6.  Handover Optimizations for PIM\n   Source-specific shortest path trees\
    \ are constructed in PIM-SM (phase\n   two and three) and in PIM-SSM.  These RPF-trees\
    \ traverse LMA-MAG\n   tunnels towards a source.  As PIM remains unaware of source\
    \ mobility\n   management, these trees invalidate under handovers with each tunnel\n\
    \   re-establishment at a new MAG.  Regular tree maintenance of PIM will\n   recover\
    \ the states, but it remains unsynchronized and too slow to\n   seamlessly preserve\
    \ PIM data distribution services.\n   A method to quickly recover PIM (S,G) trees\
    \ under handover SHOULD\n   synchronize multicast state maintenance with unicast\
    \ handover\n   operations and can proceed as follows.  On handover, an LMA reads\
    \ all\n   (S,G) Join states from its corresponding tunnel interface and\n   identifies\
    \ those source addresses S_i that match moving HNPs.  After\n   re-establishing\
    \ the new tunnel, it SHOULD associate the (S_i,*) Join\n   states with the new\
    \ tunnel endpoint and immediately trigger a state\n   maintenance (PIM Join) message.\
    \  In proceeding this way, the source-\n   specific PIM states are transferred\
    \ to the new tunnel endpoint and\n   propagated to the new MAG in synchrony with\
    \ unicast handover\n   procedures.\n"
- title: 4.4.  BIDIR-PIM
  contents:
  - "4.4.  BIDIR-PIM\n   BIDIR-PIM MAY be deployed in the access network for providing\n\
    \   multicast services in parallel to unicast routes.  Throughout this\n   section,\
    \ it is assumed that the PMIPv6 mobility domain is part of a\n   single BIDIR-PIM\
    \ multicast routing domain with BIDIR-PIM routing\n   functions present at all\
    \ MAGs and all LMAs.  The PIM routing instance\n   at a MAG SHALL then serve as\
    \ the Designated Forwarder (DF) for all\n   directly attached Mobile Nodes.  For\
    \ expediting handover operations,\n   it is advisable to position BIDIR-PIM Rendezvous\
    \ Point Addresses\n   (RPAs) in the core of the PMIPv6 network domain.  As regular\
    \ IP\n   routing tables need not be present in a PMIPv6 deployment, reverse\n\
    \   path forwarding rules as required by BIDIR-PIM need to be\n   established.\n"
- title: 4.4.1.  Routing Information Base for BIDIR-PIM
  contents:
  - "4.4.1.  Routing Information Base for BIDIR-PIM\n   In this scenario, BIDIR-PIM\
    \ will rely on a Multicast Routing\n   Information Base (MRIB) that is generated\
    \ independently of the\n   policy-based routing rules of PMIPv6.  The following\
    \ information is\n   needed.\n   o  All routes to networks and nodes (including\
    \ RPAs) that are not\n      mobile members of the PMIPv6 domain MUST be defined\
    \ consistently\n      among BIDIR-PIM routers and remain unaffected by node mobility.\n\
    \      The setup of these general routes is expected to follow the\n      topology\
    \ of the operator network and is beyond the scope of this\n      document.\n"
- title: 4.4.2.  Operations of BIDIR-PIM
  contents:
  - "4.4.2.  Operations of BIDIR-PIM\n   BIDIR-PIM will establish spanning trees across\
    \ its network domain in\n   conformance to its pre-configured RPAs and the routing\
    \ information\n   provided.  Multicast data transmitted by a mobile source will\n\
    \   immediately be forwarded by its DF (MAG) onto the spanning tree for\n   the\
    \ multicast group without further protocol operations.\n   On handover, the mobile\
    \ source reattaches to a new MAG (DF), which\n   completes unicast network configurations.\
    \  Thereafter, the source can\n   immediately proceed with multicast packet transmission\
    \ onto the pre-\n   established distribution tree.  BIDIR-PIM does not require\
    \ protocol\n   signaling or additional reconfiguration delays to adapt to source\n\
    \   mobility, and it can be considered the protocol of choice for mobile\n   multicast\
    \ operations in the access network.  As multicast streams\n   always flow up to\
    \ the Rendezvous Point Link, some care should be\n   taken to configure RPAs compliant\
    \ with network capacities.\n"
- title: 5.  MLD Proxy Peering Function for Optimized Source Mobility in PMIPv6
  contents:
  - "5.  MLD Proxy Peering Function for Optimized Source Mobility in PMIPv6\n   A\
    \ deployment of MLD proxies (see [RFC4605]) at MAGs has proven a\n   useful and\
    \ appropriate approach to multicast in PMIPv6; see [RFC6224]\n   and [RFC7028].\
    \  However, deploying unmodified standard proxies can go\n   along with significant\
    \ performance degradation for mobile senders as\n   discussed in this document.\
    \  To overcome these deficits, an optimized\n   approach to multicast source mobility\
    \ based on extended peering\n   functions among proxies is defined in this section.\
    \  Based on such\n   direct data exchange between proxy instances at MAGs, triangular\n\
    \   routing is avoided and multicast streams can be disseminated directly\n  \
    \ within a PMIPv6 access network, and in particular within MAG routing\n   machines.\
    \  Prior to presenting the solution, we will summarize the\n   relevant requirements.\n"
- title: 5.1.  Requirements
  contents:
  - "5.1.  Requirements\n   Solutions that extend MLD proxies by additional uplinking\
    \ functions\n   need to comply to the following requirements.\n   Prevention of\
    \ routing loops\n      In the absence of a full-featured routing logic at an MLD\
    \ proxy,\n      simple and locally decidable rules need to prevent source traffic\n\
    \      from traversing the network in loops that would be potentially\n      enabled\
    \ by multiple uplinks.\n   Unique coverage of receivers\n      Listener functions\
    \ at proxies require simple, locally decidable\n      rules to initiate a unique\
    \ delivery of multicast packets to all\n      receivers.\n   Following local filtering\
    \ techniques, these requirements are met in\n   the following solution.\n"
- title: 5.2.  Overview
  contents:
  - "5.2.  Overview\n   A peering interface for MLD proxies allows for a direct data\
    \ exchange\n   of locally attached multicast sources.  Such peering interfaces\
    \ can\n   be configured -- as a direct link or a bidirectional tunnel --\n   between\
    \ any two proxy instances (locally deployed as in [RFC6224] or\n   remotely deployed).\
    \  Peerings remain as silent virtual links in\n   regular proxy operations.  Data\
    \ is exchanged on such links only in\n   cases where one peering proxy on its\
    \ downstream directly connects to\n   a source of multicast traffic to which the\
    \ other peering proxy\n   actively subscribes.  In such cases, the proxy connected\
    \ to the\n   source will receive a listener report on its peering interface and\n\
    \   will forward traffic from its local source accordingly.  It is worth\n   noting\
    \ that multicast traffic distribution on peering links does not\n   follow reverse\
    \ unicast paths to sources.  In the following,\n   operations are defined for\
    \ Any-Source Multicast (ASM) and SSM, but\n   they provide superior performance\
    \ in the presence of source-specific\n   signaling (IGMPv3/MLDv2) [RFC4604].\n"
- title: 5.3.  Operations in Support of Multicast Senders
  contents:
  - "5.3.  Operations in Support of Multicast Senders\n   An MLD proxy with the perspective\
    \ of a sender will see peering\n   interfaces as restricted downstream interfaces.\
    \  It will install and\n   maintain source filters at its peering links that will\
    \ restrict data\n   transmission to those packets that originate from a source\
    \ that is\n   locally attached at one of its downstream interfaces.\n   In detail,\
    \ a proxy will extract from its configuration the network\n   prefixes attached\
    \ to its downstream interfaces and MUST implement a\n   source filter base at\
    \ its peering interfaces that restricts data\n   transmission to IP source addresses\
    \ from its local prefixes.  This\n   filter base MUST be updated if and only if\
    \ the downstream\n   configuration changes (e.g., due to mobility).  Multicast\
    \ packets\n   that arrive from the upstream interface of the proxy are thus\n\
    \   prevented from traversing any peering link, but they are only\n   forwarded\
    \ to regular downstream interfaces with appropriate\n   subscription states. \
    \ In this way, multihop forwarding on peering\n   links is prevented.\n   Multicast\
    \ traffic arriving from a locally attached source will be\n   forwarded to the\
    \ regular upstream interface and all downstream\n   interfaces with appropriate\
    \ subscription states (i.e., regular proxy\n   operations).  In addition, multicast\
    \ packets of local origin are\n   transferred to those peering interfaces with\
    \ appropriate subscription\n   states.\n"
- title: 5.4.  Operations in Support of Multicast Listeners
  contents:
  - "5.4.  Operations in Support of Multicast Listeners\n   On the listener side,\
    \ peering interfaces appear as preferred upstream\n   links.  The multicast proxy\
    \ will attempt to receive multicast\n   services on peering links for as many\
    \ groups (channels) as possible.\n   The general upstream interface configured\
    \ according to [RFC4605] will\n   be used only for retrieving those groups (channels)\
    \ that remain\n   unavailable from peerings.  From this extension of [RFC4605],\
    \ an MLD\n   proxy with peering interconnects will exhibit several interfaces\
    \ for\n   pulling remote traffic: the regular upstream and the peerings.\n   Traffic\
    \ available from any of the peering links will be mutually\n   disjoint but normally\
    \ also available from the upstream.  To prevent\n   duplicate traffic from arriving\
    \ at the listener side, the proxy\n   o  MAY delay aggregated reports to the upstream,\
    \ and\n   o  MUST apply appropriate filters to exclude duplicate streams.\n  \
    \ In detail, an MLD proxy instance at a MAG first issues listener\n   reports\
    \ (in parallel) to all of its peering links.  These links span\n   at most one\
    \ (virtual) hop.  Whenever certain group traffic (SSM\n   channels) does not arrive\
    \ from the peerings after a waiting time\n   (default: 10 ms (node-local) and\
    \ 25 ms (remote)), additional reports\n   (complementary reports, in the case\
    \ of SSM) are sent to the standard\n   upstream interface.\n   Whenever traffic\
    \ from a peering link arrives, an MLD proxy MUST\n   install source filters at\
    \ its upstream interfaces (as described in\n   RFC 4605) in the following way.\n\
    \   ASM with IGMPv2/MLDv1:  In the presence of ASM using IGMPv2/MLDv1,\n     \
    \ only, the proxy cannot signal source filtering to its upstream.\n      Correspondingly,\
    \ it applies (S,*) ingress filters at its upstream\n      interface for all sources\
    \ S seen in traffic on the peering links.\n      It is noteworthy that unwanted\
    \ traffic is still replicated to the\n      proxy via the (wired) provider backbone,\
    \ but it is not forwarded\n      into the wireless access network.\n   ASM with\
    \ IGMPv3/MLDv2:  In the presence of source-specific signaling\n      (IGMPv3/MLDv2),\
    \ the upstream interface is set to (S,*) exclude\n      mode for all sources S\
    \ seen in traffic of the peering links.  The\n      corresponding source-specific\
    \ signaling will prevent forwarding of\n      duplicate traffic throughout the\
    \ access network.\n   SSM:  In the presence of Source-Specific Multicast, the\
    \ proxy will\n      subscribe on its uplink interface to those (S,G) channels,\
    \ only,\n      that do not arrive via the peering links.\n   MLD proxies will\
    \ install data-driven timers (source-timeout) for each\n   source but common to\
    \ all peering interfaces to detect interruptions\n   of data services from individual\
    \ sources at proxy peers.  Termination\n   of source-specific flows may be application\
    \ specific, but also may be\n   due to a source handover or a transmission failure.\
    \  After a\n   handover, a mobile source may reattach at another MLD proxy with\
    \ a\n   peering relation to the listener, or at a proxy that does not peer.\n\
    \   While in the first case, traffic reappears on another peering link;\n   in\
    \ the second case, data can only be retrieved via the regular\n   upstream.  To\
    \ account for the latter, the MLD proxy revokes the\n   source-specific filter(s)\
    \ at its upstream interface, after the\n   source-timeout expires (default: 50\
    \ ms).  Corresponding traffic will\n   then be pulled from the regular upstream\
    \ interface.  Source-specific\n   filters MUST be reinstalled whenever traffic\
    \ of this source arrives\n   at any peering interface.\n   There is a noteworthy\
    \ trade-off between traffic minimization and\n   available traffic at the upstream\
    \ that is locally filtered at the\n   proxy.  Implementors can use this relation\
    \ to optimize for service-\n   specific requirements.\n   In proceeding this way,\
    \ multicast group data will arrive from peering\n   interfaces first, while only\
    \ peer-wise unavailable traffic is\n   retrieved from the regular upstream interface.\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   This document defines multicast sender mobility\
    \ based on PMIPv6 and\n   common multicast routing protocols.  Consequently, threats\
    \ identified\n   as security concerns in [RFC2236], [RFC2710], [RFC3810], [RFC4605],\n\
    \   [RFC5213], and [RFC5844] are inherited by this document.\n   In addition,\
    \ particular attention should be paid to implications of\n   combining multicast\
    \ and mobility management at network entities.  As\n   this specification allows\
    \ mobile nodes to initiate the creation of\n   multicast forwarding states at\
    \ MAGs and LMAs while changing\n   attachments, threats of resource exhaustion\
    \ at PMIP routers and\n   access networks arise from rapid state changes, as well\
    \ as from high-\n   volume data streams routed into access networks of limited\n\
    \   capacities.  In cases of PIM-SM deployment, handover operations of\n   the\
    \ MNs include re-registering sources at the Rendezvous Points at\n   possibly\
    \ high frequency.  In addition to proper authorization checks\n   of MNs, rate\
    \ controls at routing agents and replicators may be needed\n   to protect the\
    \ agents and the downstream networks.  In particular,\n   MLD proxy implementations\
    \ at MAGs SHOULD automatically erase\n   multicast state on the departure of MNs,\
    \ as mobile multicast\n   listeners in the PMIPv6 domain will in general not actively\
    \ terminate\n   group membership prior to departure.\n   The deployment of IGMP/MLD\
    \ proxies for multicast routing requires\n   particular care, as routing loops\
    \ on the upstream are not\n   automatically detected.  Peering functions between\
    \ proxies extend\n   this threat in the following way.  Routing loops among peering\
    \ and\n   upstream interfaces are prevented by filters on local sources.  Such\n\
    \   filtering can fail whenever prefix configurations for downstream\n   interfaces\
    \ at a proxy are incorrect or inconsistent.  Consequently,\n   implementations\
    \ of peering-enabled proxies SHOULD take particular\n   care on keeping IP configurations\
    \ consistent at the downstream in a\n   reliable and timely manner.  (See [RFC6224]\
    \ for requirements on\n   PMIPv6-compliant implementations of MLD proxies.)\n"
- title: 7.  Acknowledgements
  contents:
  - "7.  Acknowledgements\n   The authors would like to thank (in alphabetical order)\
    \ David Black,\n   Luis M.  Contreras, Spencer Dawkins, Muhamma Omer Farooq, Bohao\
    \ Feng,\n   Sri Gundavelli, Dirk von Hugo, Ning Kong, Jouni Korhonen, He-Wu Li,\n\
    \   Cong Liu, Radia Perlman, Akbar Rahman, Behcet Sarikaya, Stig Venaas,\n   Li-Li\
    \ Wang, Sebastian Woelke, Qian Wu, and Zhi-Wei Yan for advice,\n   help, and reviews\
    \ of the document.  Funding by the German Federal\n   Ministry of Education and\
    \ Research within the G-LAB Initiative\n   (projects HAMcast, Mindstone, and SAFEST)\
    \ is gratefully acknowledged.\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC2710]  Deering, S., Fenner, W., and B. Haberman, \"Multicast\n\
    \              Listener Discovery (MLD) for IPv6\", RFC 2710, October\n      \
    \        1999.\n   [RFC3376]  Cain, B., Deering, S., Kouvelas, I., Fenner, B.,\
    \ and A.\n              Thyagarajan, \"Internet Group Management Protocol, Version\n\
    \              3\", RFC 3376, October 2002.\n   [RFC3810]  Vida, R. and L. Costa,\
    \ \"Multicast Listener Discovery\n              Version 2 (MLDv2) for IPv6\",\
    \ RFC 3810, June 2004.\n   [RFC4601]  Fenner, B., Handley, M., Holbrook, H., and\
    \ I. Kouvelas,\n              \"Protocol Independent Multicast - Sparse Mode (PIM-SM):\n\
    \              Protocol Specification (Revised)\", RFC 4601, August 2006.\n  \
    \ [RFC4605]  Fenner, B., He, H., Haberman, B., and H. Sandick,\n             \
    \ \"Internet Group Management Protocol (IGMP) / Multicast\n              Listener\
    \ Discovery (MLD)-Based Multicast Forwarding\n              (\"IGMP/MLD Proxying\"\
    )\", RFC 4605, August 2006.\n   [RFC5015]  Handley, M., Kouvelas, I., Speakman,\
    \ T., and L. Vicisano,\n              \"Bidirectional Protocol Independent Multicast\
    \ (BIDIR-\n              PIM)\", RFC 5015, October 2007.\n   [RFC5213]  Gundavelli,\
    \ S., Leung, K., Devarapalli, V., Chowdhury, K.,\n              and B. Patil,\
    \ \"Proxy Mobile IPv6\", RFC 5213, August 2008.\n   [RFC5844]  Wakikawa, R. and\
    \ S. Gundavelli, \"IPv4 Support for Proxy\n              Mobile IPv6\", RFC 5844,\
    \ May 2010.\n   [RFC6275]  Perkins, C., Johnson, D., and J. Arkko, \"Mobility\
    \ Support\n              in IPv6\", RFC 6275, July 2011.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [MULTI-EXT]\n              Schmidt, T., Ed.,\
    \ Waehlisch, M., Koodli, R., Fairhurst,\n              G., and D. Liu, \"Multicast\
    \ Listener Extensions for MIPv6\n              and PMIPv6 Fast Handovers\", Work\
    \ in Progress, May 2014.\n   [PEERING-ANALYSIS]\n              Schmidt, TC., Woelke,\
    \ S., and M. Waehlisch, \"Peer my Proxy\n              - A Performance Study of\
    \ Peering Extensions for Multicast\n              in Proxy Mobile IP Domains\"\
    , Proc. of 7th IFIP Wireless\n              and Mobile Networking Conference (WMNC\
    \ 2014), IEEE Press,\n              May 2014.\n   [RFC2236]  Fenner, W., \"Internet\
    \ Group Management Protocol, Version\n              2\", RFC 2236, November 1997.\n\
    \   [RFC4604]  Holbrook, H., Cain, B., and B. Haberman, \"Using Internet\n   \
    \           Group Management Protocol Version 3 (IGMPv3) and Multicast\n     \
    \         Listener Discovery Protocol Version 2 (MLDv2) for Source-\n        \
    \      Specific Multicast\", RFC 4604, August 2006.\n   [RFC5757]  Schmidt, T.,\
    \ Waehlisch, M., and G. Fairhurst, \"Multicast\n              Mobility in Mobile\
    \ IP Version 6 (MIPv6): Problem Statement\n              and Brief Survey\", RFC\
    \ 5757, February 2010.\n   [RFC5845]  Muhanna, A., Khalil, M., Gundavelli, S.,\
    \ and K. Leung,\n              \"Generic Routing Encapsulation (GRE) Key Option\
    \ for Proxy\n              Mobile IPv6\", RFC 5845, June 2010.\n   [RFC6224] \
    \ Schmidt, T., Waehlisch, M., and S. Krishnan, \"Base\n              Deployment\
    \ for Multicast Listener Support in Proxy Mobile\n              IPv6 (PMIPv6)\
    \ Domains\", RFC 6224, April 2011.\n   [RFC7028]  Zuniga, JC., Contreras, LM.,\
    \ Bernardos, CJ., Jeon, S., and\n              Y. Kim, \"Multicast Mobility Routing\
    \ Optimizations for\n              Proxy Mobile IPv6\", RFC 7028, September 2013.\n\
    \   [RFC7161]  Contreras, LM., Bernardos, CJ., and I. Soto, \"Proxy Mobile\n \
    \             IPv6 (PMIPv6) Multicast Handover Optimization by the\n         \
    \     Subscription Information Acquisition through the LMA\n              (SIAL)\"\
    , RFC 7161, March 2014.\n"
- title: Appendix A.  Multiple Upstream Interface Proxy
  contents:
  - "Appendix A.  Multiple Upstream Interface Proxy\n   In this section, we document\
    \ upstream extensions for an MLD proxy\n   that were originally developed during\
    \ the work on this document.\n   Multiple proxy instances deployed at a single\
    \ MAG (see Section 3) can\n   be avoided by adding multiple upstream interfaces\
    \ to a single MLD\n   proxy.  In a typical PMIPv6 deployment, each upstream interface\
    \ of a\n   single proxy instance can interconnect to one of the LMAs.  With such\n\
    \   ambiguous upstream options, appropriate forwarding rules MUST be\n   supplied\
    \ to\n   o  unambiguously guide traffic forwarding from directly attached\n  \
    \    mobile sources, and\n   o  lead listener reports to initiating unique traffic\
    \ subscriptions.\n   This can be achieved by a complete set of source- and group-specific\n\
    \   filter rules (e.g., (S,*), (*,G)) installed at proxy interfaces.\n   These\
    \ filters MAY be derived in part from PMIPv6 routing policies and\n   can include\
    \ a default behavior (e.g., (*,*)).\n"
- title: A.1.  Operations for Local Multicast Sources
  contents:
  - "A.1.  Operations for Local Multicast Sources\n   Packets from a locally attached\
    \ multicast source will be forwarded to\n   all downstream interfaces with appropriate\
    \ subscriptions, as well as\n   up the interface with the matching source-specific\
    \ filter.\n   Typically, the upstream interface for a mobile multicast source\
    \ is\n   chosen based on the policy routing (e.g., the MAG-LMA tunnel\n   interface\
    \ for LMA-based routing or the interface towards the\n   multicast router for\
    \ direct routing), but alternate configurations\n   MAY be applied.  Packets from\
    \ a locally attached multicast source\n   will be forwarded to the corresponding\
    \ upstream interface with the\n   matching source-specific filter, as well as\
    \ all the downstream\n   interfaces with appropriate subscriptions.\n"
- title: A.2.  Operations for Local Multicast Subscribers
  contents:
  - "A.2.  Operations for Local Multicast Subscribers\n   Multicast listener reports\
    \ are group-wise aggregated by the MLD\n   proxy.  The aggregated report is issued\
    \ to the upstream interface\n   with a matching group/channel-specific filter.\
    \  The choice of the\n   corresponding upstream interface for aggregated group\
    \ membership\n   reports MAY be additionally based on some administrative scoping\n\
    \   rules for scoped multicast group addresses.\n   In detail, a Multiple Upstream\
    \ Interface proxy will provide and\n   maintain a Multicast Subscription Filter\
    \ Table that maps source- and\n   group-specific filters to upstream interfaces.\
    \  The forwarding\n   decision for an aggregated MLD listener report is based\
    \ on the first\n   matching entry from this table, with the understanding that\
    \ for\n   IGMPv3/MLDv2 the MLD proxy performs a state decomposition, if needed\n\
    \   (i.e., a (*,G) subscription is split into (S,G) and (* \\ S,G) in the\n  \
    \ presence of (*,G) after (S,G) interface entries), and that\n   (S,*)-filters\
    \ are always false in the absence of source-specific\n   signaling, i.e., in IGMPv2/MLDv1\
    \ only domains.\n   In typical deployment scenarios, specific group services (channels)\n\
    \   are either\n   o  associated with selected uplinks to remote LMAs, while a\
    \ (*,*)\n      default subscription entry (in the last table line) is bound to\
    \ a\n      local routing interface, or\n   o  configured as local services first,\
    \ while a (*,*) default entry\n      (in the last table line) points to a remote\
    \ uplink that provides\n      the general multicast support.\n"
- title: Appendix B.  Implementation
  contents:
  - "Appendix B.  Implementation\n   An implementation of the extended IGMP/MLD proxy\
    \ has been provided\n   within the MCPROXY project (http://mcproxy.realmv6.org/).\
    \  This open-\n   source software is written in C++ and uses forwarding capabilities\
    \ of\n   the Linux kernel.  It supports all regular operations according to\n\
    \   [RFC4605] and allows for multiple proxy instances on one node,\n   dynamically\
    \ changing downstream links, proxy-to-proxy peerings, and\n   multiple upstream\
    \ links with individual configurations.  The software\n   can be downloaded from\
    \ GitHub at\n   <https://github.com/mcproxy/mcproxy>.  Based on this software,\
    \ an\n   experimental performance evaluation of the proxy peering function has\n\
    \   been reported in [PEERING-ANALYSIS].\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Thomas C. Schmidt (editor)\n   HAW Hamburg\n   Berliner\
    \ Tor 7\n   Hamburg  20099\n   Germany\n   EMail: schmidt@informatik.haw-hamburg.de\n\
    \   URI:   http://inet.cpt.haw-hamburg.de/members/schmidt\n   Shuai Gao\n   Beijing\
    \ Jiaotong University\n   Beijing\n   China\n   EMail: shgao@bjtu.edu.cn\n   Hong-Ke\
    \ Zhang\n   Beijing Jiaotong University\n   Beijing\n   China\n   EMail: hkzhang@bjtu.edu.cn\n\
    \   Matthias Waehlisch\n   link-lab & FU Berlin\n   Hoenower Str. 35\n   Berlin\
    \  10318\n   Germany\n   EMail: mw@link-lab.net\n"
