- title: __initial_text__
  contents:
  - '          Implementers Guide for Facsimile Using Internet Mail

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2002).  All Rights Reserved.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document is intended for the implementers of software that\
    \ use\n   email to send to facsimiles using RFC 2305 and 2532.  This is an\n \
    \  informational document and its guidelines do not supersede the\n   referenced\
    \ documents.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ..................................................\
    \  2\n   1.1 Organization of this document ................................  2\n\
    \   1.2 Discussion of this document ..................................  2\n  \
    \ 2. Terminology ...................................................  3\n   3.\
    \ Implementation Issues Specific to Simple Mode .................  3\n   3.1 Simple\
    \ Mode Fax Senders ......................................  3\n   3.1.1 Multipart-alternative\
    \ ......................................  3\n   3.2 Simple Mode Fax Receivers\
    \ ....................................  4\n   3.2.1 Multipart-alternative and\
    \ Storage Capacity .................  4\n   4. Implementation Issues Specific\
    \ to Extended Mode ...............  4\n   4.1 Multipart-alternative ........................................\
    \  4\n   4.2 Correlation of MDN with Original Message .....................  4\n\
    \   4.3 Correlation of DSN with Original Message .....................  5\n  \
    \ 4.4 Extended Mode Receivers ......................................  5\n   4.4.1\
    \ Confirmation of receipt and processing from User Agents ....  5\n   4.4.1.1\
    \ Discrepancies in MDN [9] Interpretation ..................  5\n   4.4.1.2 Disposition-Type\
    \ and body of message in MDN ..............  6\n   4.4.2 \"Subject\" of MDN and\
    \ DSN in Success and Failure Cases ......  6\n   4.4.3 Extended Mode Receivers\
    \ that are MTAs (or ESMTP servers) ...  7\n   4.4.3.1 Success Case Example .....................................\
    \  7\n   4.4.3.2 Failure Case Example 1 ...................................  9\n\
    \   4.4.3.3 Failure Case Example 2 ................................... 10\n  \
    \ 4.4.4 Extended Mode Receivers that are POP3/IMAP4 ................ 11\n   4.4.4.1\
    \ Success Case Example ..................................... 11\n   4.4.4.2 Failure\
    \ Case Example ..................................... 12\n   4.4.5 Receiving Multiple\
    \ Attachments ............................. 13\n   5. Implementation Issues Specific\
    \ to the File Format ............. 13\n   5.1 IFD Placement & Profile-S Constraints\
    \ ........................ 13\n   5.2 Precautions for implementers of RFC 2301\
    \ [4] ................. 14\n   5.2.1 Errors encountered during interoperability\
    \ testing ......... 14\n   5.2.2 Color Gamut Considerations .................................\
    \ 14\n   5.2.3 File format Considerations ................................. 15\n\
    \   5.2.3.1 Considerations for greater reader flexibility ............ 15\n  \
    \ 5.2.3.2 Error considerations ..................................... 16\n   5.3\
    \ Content-Type for the file format ............................. 17\n   6. Implementation\
    \ Issues for Internet Fax Addressing ............. 17\n   7. Security Considerations\
    \ ....................................... 18\n   8. Acknowledgements ..............................................\
    \ 18\n   9. References .................................................... 18\n\
    \   10. Authors' Addresses ........................................... 20\n  \
    \ 11. Full Copyright Statement ..................................... 21\n"
- title: 1. Introduction
  contents:
  - "1. Introduction\n   This document clarifies published RFCs which standardize\
    \ facsimile\n   communications using Internet Email.  The intent is to prevent\n\
    \   implementations that deviate in such a way as to cause\n   interoperability\
    \ problems.\n"
- title: 1.1 Organization of this document
  contents:
  - "1.1 Organization of this document\n   This document contains four sections that\
    \ clarify, in order, the\n   handling of simple mode fax messages, extended mode\
    \ fax messages, the\n   file format, and the internet addressing of fax recipients.\n\
    \   See Section 2 for terminology.\n"
- title: 1.2 Discussion of this document
  contents:
  - "1.2 Discussion of this document\n   Discussion of this document should take place\
    \ on the Internet fax\n   mailing list hosted by the Internet Mail Consortium\
    \ (IMC).  Please\n   send comments regarding this document to:\n      ietf-fax@imc.org\n\
    \   To subscribe to this list, send a message with the body 'subscribe'\n   to\
    \ \"ietf-fax-request@imc.org\".\n   To see what has gone on before you subscribed,\
    \ please see the mailing\n   list archive at:\n      http://www.imc.org/ietf-fax/\n"
- title: 2. Terminology
  contents:
  - "2. Terminology\n   The following terms are used throughout this document:\n \
    \  DSN           - RFC 1894, \"An Extensible Message Format for\n            \
    \                  Delivery Status Notifications\" [7]\n   Extended Mode - RFC\
    \ 2532, \"Extended Facsimile Using\n                              Internet Mail\"\
    \ [3]\n   MDN           - RFC 2298, \"An Extensible Message Format for\n     \
    \                         Message Disposition Notifications\" [9]\n   Simple Mode\
    \   - RFC 2305, \"A Simple Mode of Facsimile\n                              Using\
    \ Internet Mail\" [2]\n   TIFF          - profile S or F of \"File Format for\
    \ Internet Fax\" [4]\n                   delivered as \"image/tiff\"\n   TIFF-FX\
    \       - other profiles sent as \"image/tiff-fx\"\n   In examples, \"C:\" is\
    \ used to indicate lines sent by the client, and\n   \"S:\" to indicate those\
    \ sent by the server.\n"
- title: 3. Implementation Issues Specific to Simple Mode
  contents:
  - "3. Implementation Issues Specific to Simple Mode\n   Issues specific to Simple\
    \ Mode [2] are described below:\n"
- title: 3.1 Simple Mode Fax Senders
  contents:
  - '3.1 Simple Mode Fax Senders

    '
- title: 3.1.1 Multipart/alternative
  contents:
  - "3.1.1 Multipart/alternative\n   Although a requirement of MIME compliance (16,\
    \ Section 5.1.4), some\n   email client implementations are not capable of correctly\
    \ processing\n   messages with a MIME Content-Type of \"multipart/alternative\"\
    .  If a\n   sender is unsure if the recipient is able to correctly process a\n\
    \   message with a Content-Type of \"multipart/alternative\", the sender\n   should\
    \ assume the worst and not use this MIME Content-Type.\n"
- title: 3.2 Simple Mode Fax Receivers
  contents:
  - '3.2 Simple Mode Fax Receivers

    '
- title: 3.2.1 Multipart/alternative and Storage Capacity
  contents:
  - "3.2.1 Multipart/alternative and Storage Capacity\n   Devices with little storage\
    \ capacity are unable to cache previous\n   parts of a multipart/alternative message.\
    \  In order for such devices\n   to correctly process only one part of a multipart/alternative\n\
    \   message, such devices may simply use the first part of a\n   multipart/alternative\
    \ message it is capable of processing.\n   This behavior means that even if subsequent,\
    \ higher-fidelity parts\n   could have been processed, they will not be used.\n\
    \   This behavior can cause user dissatisfaction because when two high-\n   fidelity\
    \ but low-memory devices are used with each other, the\n   lowest-fidelity part\
    \ of the multipart/alternative will be processed.\n   The solution to this problem\
    \ is for the sender to determine the\n   capability of the recipient and send\
    \ only high fidelity parts.\n   However, a mechanism to determine the recipient\
    \ capabilities prior to\n   an initial message sent to the recipient doesn't yet\
    \ exist on the\n   Internet.\n   After an initial message is sent, the Extended\
    \ Mode mechanism,\n   described in RFC 2532 [3], Section 3.3, enables a recipient\
    \ to\n   include its capabilities in a delivery and/or a disposition\n   notification:\
    \ in a DSN, if the recipient device is an RFC 2532/ESMTP\n   [3] compliant server\
    \ or in an MDN if the recipient is a User Agent.\n"
- title: 4. Implementation Issues Specific to Extended Mode
  contents:
  - "4. Implementation Issues Specific to Extended Mode\n   Issues specific to Extended\
    \ Mode [3] fax are described below.  Note\n   that any Extended Mode device also\
    \ needs to consider issues specific\n   to Simple Mode (Section 3 of this document).\n"
- title: 4.1 Multipart/Alternative
  contents:
  - "4.1 Multipart/Alternative\n   Sections 3.1.1 and 3.2.1 are also applicable to\
    \ this mode.\n"
- title: 4.2. Correlation of MDN with Original Message
  contents:
  - "4.2. Correlation of MDN with Original Message\n   To re-iterate a paragraph from\
    \ section 2.1, RFC 2298 [9]:\n      A message that contains a Disposition-Notification-To\
    \ header\n      SHOULD also contain a Message-ID header, as specified in RFC 822\n\
    \      [10].  This will permit automatic correlation of MDNs with\n      original\
    \ messages by user agents.\n"
- title: 4.3 Correlation of DSN with Original Message
  contents:
  - "4.3 Correlation of DSN with Original Message\n   Similar to the requirement to\
    \ correlate an MDN, above, DSNs also need\n   to be correlated.  This is best\
    \ done using the ENVID parameter in the\n   \"MAIL\" command.  See Sections 3\
    \ and 5.4 of RFC 1891 [5] for details.\n"
- title: 4.4 Extended Mode Receivers
  contents:
  - "4.4 Extended Mode Receivers\n   Confirmation that the facsimile image (attachment)\
    \ was delivered and\n   successfully processed is an important aspect of the extended\
    \ mode of\n   the facsimile using Internet mail.  This section describes\n   implementation\
    \ issues with several types of confirmations.\n"
- title: 4.4.1 Confirmation of receipt and processing from User Agents
  contents:
  - "4.4.1 Confirmation of receipt and processing from User Agents\n   When a message\
    \ is received with the \"Disposition-Notification-To\"\n   header and the receiver\
    \ has determined whether the message can be\n   processed, it may generate a:\n\
    \   a) Negative MDN in case of error, or\n   b) Positive MDN in case of success\n\
    \   The purpose of receiving a requested MDN acknowledgement from an\n   Extended\
    \ Mode recipient is the indication of success or failure to\n   process the file\
    \ attachment that was sent.  The attachment, not the\n   body, constitutes the\
    \ facsimile message.  Therefore an Extended Mode\n   sender would expect, and\
    \ it is recommended that the Extended Mode\n   receiver send (with an MDN), an\
    \ acknowledgement of the success or\n   failure to decode and process the file\
    \ attachment.\n   Implementers of the Extended Mode [3] should be consistent in\
    \ the\n   feedback provided to senders in the form of error codes and/or\n   failure/success\
    \ messages.\n"
- title: 4.4.1.1 Discrepancies in MDN [9] Interpretation
  contents:
  - "4.4.1.1 Discrepancies in MDN [9] Interpretation\n   An Extended Mode sender must\
    \ be aware that RFC 2298 [9] does not\n   distinguish between the success or failure\
    \ to decode the body-content\n   part of the message and the success or failure\
    \ to decode a file\n   attachment.  Consequently MDNs may be received which do\
    \ not reflect\n   the success or failure to decode the attached file, but rather\
    \ to\n   decode the body-content part of the message.\n"
- title: 4.4.1.2 Disposition-Type and body of message in MDN
  contents:
  - "4.4.1.2 Disposition-Type and body of message in MDN\n   If the receiver of an\
    \ MDN request is an RFC 2532 compliant device\n   that automatically prints the\
    \ received Internet mail messages and\n   attachments, or forwards the attachment\
    \ via GSTN fax, it should, in\n   the case of success:\n   a) Use a \"disposition-type\"\
    \ of \"dispatched\" (with no \"disposition-\n      modifier\") in the MDN, and\n\
    \   b) Use text similar to the following in the body of the message:\n      \"\
    This is a Return Receipt for the mail that you sent to [above, or\n      below,\
    \ or this address, etc].  The message and attached files[s]\n      may have been\
    \ printed, faxed or saved.  This is no guarantee that\n      the message has been\
    \ read or understood\".\n   and in the case of failure:\n   a) Use a \"disposition-type\"\
    \ of \"processed\" and disposition-modifier\n      of \"error\", and\n   b) Use\
    \ text similar to the following in the body of the message:\n      \"This is a\
    \ Return Receipt for the mail that you sent to [above, or\n      below, or this\
    \ address, etc].  An error occurred while attempting\n      to decode the attached\
    \ file[s]\".\n   This recommendation adheres to the definition in RFC 2298 [9]\
    \ and\n   helps to distinguish the returned MDNs for proper handling.\n   Implementers\
    \ may wish to consider sending messages in the language of\n   the sender (by\
    \ utilizing a header field from the original message) or\n   including multiple\
    \ languages, by using multipart/alternative for the\n   text portion of the MDN.\n"
- title: 4.4.2 "Subject" of MDN and DSN in Success and Failure Cases
  contents:
  - "4.4.2 \"Subject\" of MDN and DSN in Success and Failure Cases\n   Because legacy\
    \ e-mail applications do not parse the machine-readable\n   headers, e-mail users\
    \ depend on the human-readable parts of the MDN\n   to recognize the type of acknowledgement\
    \ that is received.\n   Examples:\n      MDN:\n         Subject: Your message\
    \ was processed successfully. (MDN)\n         Subject: Your message has been rejected.\
    \ (MDN)\n      DSN:\n         Subject: Your message was delivered successfully.\
    \ (DSN)\n         Subject: Your message could not be delivered. (DSN)\n      \
    \   Subject: Your message is delayed. (DSN)\n"
- title: 4.4.3 Extended Mode Receivers that are MTAs (or ESMTP servers)
  contents:
  - "4.4.3 Extended Mode Receivers that are MTAs (or ESMTP servers)\n   SMTP server-based\
    \ implementations are strongly encouraged to\n   implement the \"SMTP Service\
    \ Extension for Returning Enhanced Error\n   Codes\" [8].  This standard is easy\
    \ to implement and it allows\n   detailed standardized success and error indications\
    \ to be returned to\n   the sender by the submitting MTA.\n   The following examples,\
    \ are provided as illustration only.  They\n   should not be interpreted as limiting\
    \ the protocol or the DSN form.\n   If the examples conflict with the definitions\
    \ in the standards (RFC\n   1891[5]/1893[6]/1894[7]/2034[8]), the standards take\
    \ precedence.\n"
- title: 4.4.3.1 Success Case Example
  contents:
  - "4.4.3.1 Success Case Example\n   In the following example the sender <jean@example.com>\
    \ sends a\n   message to the receiver <ifax@example.net> which is an ESMTP server\n\
    \   and the receiver successfully decodes the message.\n      example.com\n  \
    \     +-------+\n       | Mail  |\n       | User  |\n       | Agent |\n      \
    \ +-------+\n           |\n           V\n      +----------+      +--------+  \
    \   +---------+\n      |   Mail   +      |  Mail  |     |  Mail   |\n      |Submission|----->|Transfer|---->|Transfer\
    \ |\n      |   Agent  |      | Agent  |     |  Agent  |\n      +----------+  \
    \    +--------+     +---------+\n                        example.org    example.net\n\
    \   SMTP Sequence:\n      S: 220 example.net SMTP service ready\n      C: EHLO\
    \ example.org\n      S: 250-example.net\n      S: 250-DSN\n      S: 250 ENHANCEDSTATUSCODES\n\
    \      C: MAIL FROM:<jean@example.com> RET=HDRS ENVID=MM123456\n      S: 250 2.1.0\
    \ Originator <jean@example.com> ok\n      C: RCPT TO:<ifax@example.net> NOTIFY=SUCCESS,FAILURE\
    \ \\\n         ORCPT=rfc822;ifax@example.net\n      S: 250 2.1.5 Recipient <ifax@example.net>\
    \ ok\n      C: DATA\n      S: 354 Send message, ending in <CRLF>.<CRLF>\n    \
    \  C:\n      C:  [Message goes here.]\n      C:\n      C: .\n      S: 250 2.0.0\
    \ Message accepted\n      C: QUIT\n      S: 221 2.0.0 Goodbye\n   DSN (to jean@example.com):\n\
    \      Date: Mon, 12 Dec 1999 19:01:57 +0900\n      From: postmaster@example.net\n\
    \      Message-ID: <19991212190157.01234@example.net>\n      To: jean@example.com\n\
    \      Subject: Your message was delivered successfully. (DSN)\n      MIME-Version:\
    \ 1.0\n      Content-Type: multipart/report; report-type=delivery-status;\n  \
    \      boundary=JUK199912121854870001\n      --JUK199912121854870001\n      Content-type:\
    \ text/plain\n      Your message (id MM123456) was successfully delivered\n  \
    \    to ifax@example.net.\n      --JUK199912121854870001\n      Content-type:\
    \ message/delivery-status\n      Reporting-MTA: dns; example.net\n      Original-Envelope-ID:\
    \ MM123456\n      Final-Recipient: rfc822;ifax@example.net\n      Action: delivered\n\
    \      Status: 2.1.5 (Destination address valid)\n      Diagnostic-Code: smtp;\
    \ 250 2.1.5\n        Recipient <ifax@example.net> ok\n      --JUK199912121854870001\n\
    \      Content-type: message/rfc822\n      [headers of returned message go here.]\n\
    \      --JUK199912121854870001--\n"
- title: 4.4.3.2 Failure Case Example 1
  contents:
  - "4.4.3.2 Failure Case Example 1\n   In this example, the receiver determines it\
    \ is unable to decode the\n   attached file AFTER it has received the SMTP message.\
    \  The receiver\n   then sends a 'failure' DSN.\n      example.com\n       +-------+\n\
    \       | Mail  |\n       | User  |\n       | Agent |\n       +-------+\n    \
    \       |\n           V\n      +----------+      +--------+     +---------+\n\
    \      |   Mail   +      |  Mail  |     |  Mail   |\n      |Submission|----->|Transfer|---->|Transfer\
    \ |\n      |   Agent  |      | Agent  |     |  Agent  |\n      +----------+  \
    \    +--------+     +---------+\n                        example.org    example.net\n\
    \   SMTP Sequence:\n      This is the same as the case a).  After the sequence,\
    \ a decode\n      error occurs at the receiver, so instead of a 'success' DSN,\
    \ a\n      'failure' DSN is sent.\n   DSN (to jean@example.com):\n      Date:\
    \ Mon, 12 Dec 1999 19:31:20 +0900\n      From: postmaster@example.net\n      Message-ID:\
    \ <19991212193120.87652@example.net>\n      To: jean@example.com\n      Subject:\
    \  Your message could not be delivered. (DSN)\n      MIME-Version: 1.0\n     \
    \ Content-Type: multipart/report; report-type=delivery-status;\n        boundary=JUK199912121934240002\n\
    \      --JUK199912121934240002\n      Content-type: text/plain\n      Your message\
    \ (id MM123456) to ifax@example.net resulted in an\n      error while attempting\
    \ to decode the attached file.\n      --JUK199912121934240002\n      Content-type:\
    \ message/delivery-status\n      Reporting-MTA: dns; example.net\n      Original-Envelope-ID:\
    \ MM123456\n      Final-Recipient: rfc822;ifax@example.net\n      Action: Failed\n\
    \      Status: 5.6.1 (Media not supported)\n      Diagnostic-Code: smtp; 554 5.6.1\
    \ Decode error\n      --JUK199912121934240002\n      Content-type: message/rfc822\n\
    \      [headers of returned message go here.]\n      --JUK199912121934240002--\n"
- title: 4.4.3.3 Failure Case Example 2
  contents:
  - "4.4.3.3 Failure Case Example 2\n   In this example, the receiver determines it\
    \ is unable to decode the\n   attached file BEFORE it accepts the SMTP transmission.\n\
    \   SMTP sequence:\n      S: 220 example.net SMTP service ready\n      C: EHLO\
    \ example.org\n      S: 250-example.net\n      S: 250-DSN\n      S: 250 ENHANCEDSTATUSCODES\n\
    \      C: MAIL FROM:<jean@example.com> RET=HDRS ENVID=MM123456\n      S: 250 2.1.0\
    \ Originator <jean@example.com> ok\n      C: RCPT TO:<ifax@example.net> NOTIFY=SUCCESS,FAILURE\
    \ \\\n         ORCPT=rfc822;ifax@example.net\n      S: 250 2.1.5 Recipient <ifax@example.net>\
    \ ok\n      C: DATA\n      S: 354 Send message, ending in <CRLF>.<CRLF>\n    \
    \  C:\n      C:  [Message goes here.]\n      C:\n      C: .\n      S: 554 5.6.1\
    \ Media not supported\n      C: QUIT\n      S: 221 2.0.0 Goodbye\n   DSN:\n  \
    \    Note: In this case, the previous MTA generates the DSN that is\n      forwarded\
    \ to the original sender.  The receiving MTA has not\n      accepted delivery\
    \ and therefore can not generate a DSN.\n"
- title: 4.4.4 Extended Mode Receivers that are POP3/IMAP4
  contents:
  - "4.4.4 Extended Mode Receivers that are POP3/IMAP4\n      NOTE: This document\
    \ does not define new disposition-types or\n      disposition-modifiers.  Those\
    \ used below are defined in RFC\n      2298[9].  This section provides examples\
    \ on how POP3/IMAP4 devices\n      may use the already defined values.\n   These\
    \ examples are provided as illustration only.  They should not be\n   interpreted\
    \ as limiting the protocol or the MDN form.  If the\n   examples conflict with\
    \ the MDN [9] standard, the standard takes\n   precedence.\n"
- title: 4.4.4.1 Success Case Example
  contents:
  - "4.4.4.1 Success Case Example\n   If the original sender receives an MDN which\
    \ has \"displayed\",\n   \"dispatched\" or \"processed\" disposition-type without\
    \ disposition-\n   modifier, the receiver may have received or decoded the attached\
    \ file\n   that it sent.  The MDN does not guarantee that the receiver displays,\n\
    \   prints or saves the attached file.  See Section 4.4.1.1,\n   Discrepancies\
    \ in MDN Interpretation.\n      NOTE: This example does not include the third\
    \ component of the\n      MDN.\n      Date: 14 Dec 1999 17:48:44 +0900\n     \
    \ From: ken_recipient@example.com\n      Message-ID: <19991214174844.98765@example.com>\n\
    \      Subject:  Your message was processed successfully. (MDN)\n      To: mary@example.net\n\
    \      Mime-Version: 1.0\n      Content-Type: multipart/report;\n        report-type=disposition-notification;\
    \ boundary=\"61FD1001_IFAX\"\n      --61FD1001_IFAX\n      Content-Type: text/plain\n\
    \      This is a Return Receipt for the mail that you sent to\n      \"ken_recipient@example.com\"\
    .  The message and attached files may\n      have been printed, faxed or saved.\
    \  This is no guarantee that the\n      message has been read or understood.\n\
    \      --61FD1001_IFAX\n      Content-Type: message/disposition-notification\n\
    \      Reporting-UA: ken-ifax.example.com; barmail 1999.10\n      Original-Recipient:\
    \ rfc822;ken_recipient@example.com\n      Final-Recipient: rfc822;ken_recipient@example.com\n\
    \      Original-Message-ID: <19991214174010O.mary@example.net>\n      Disposition:\
    \ automatic-action/MDN-sent-automatically; dispatched\n      --61FD1001_IFAX--\n"
- title: 4.4.4.2 Failure Case Example
  contents:
  - "4.4.4.2 Failure Case Example\n   If the original sender receives an MDN with\
    \ an \"error\" or \"warning\"\n   disposition-modifier, it is possible that the\
    \ receiver could not\n   receive or decode the attached file.  Currently there\
    \ is no mechanism\n   to associate the disposition-type with the handling of the\
    \ main\n   content body of the message or the attached file.\n      Date: 14 Dec\
    \ 1999 19:48:44 +0900\n      From: ken_recipient@example.com\n      Message-ID:\
    \ <19991214194844.67325@example.com>\n      Subject:  Your message has been rejected.\
    \ (MDN)\n      To: mary@example.net\n      Mime-Version: 1.0\n      Content-Type:\
    \ multipart/report;\n        report-type=disposition-notification; boundary=\"\
    84FD1011_IFAX\"\n      --84FD1011_IFAX\n      Content-Type: text/plain\n     \
    \ This is a Return Receipt for the mail that you sent to\n      \"ken_recipient@example.com\"\
    .  An error occurred while attempting\n      to decode the attached file[s]\"\
    .\n      --84FD1011_IFAX\n      Content-Type: message/disposition-notification\n\
    \      Reporting-UA: ken-ifax.example.com; barmail 1999.10\n      Original-Recipient:\
    \ rfc822;ken_recipient@example.com\n      Final-Recipient: rfc822;ken_recipient@example.com\n\
    \      Original-Message-ID: <199912141823123.mary@example.net>\n      Disposition:\
    \ automatic-action/MDN-sent-automatically;\n        processed/error\n      --84FD1011_IFAX\n\
    \      Content-Type: message/rfc822\n      [original message goes here]\n    \
    \  --84FD1011_IFAX--\n"
- title: 4.4.5 Receiving Multiple Attachments
  contents:
  - "4.4.5 Receiving Multiple Attachments\n   A received email message could contain\
    \ multiple attachments and each\n   distinct attachment could use TIFF or TIFF-FX\
    \ with different\n   encodings or resolutions, and these could be mixed with other\
    \ file\n   types.\n   There is currently no mechanism to identify, in a returned\
    \ MDN, the\n   attachments that were successfully decoded from those that could\
    \ not\n   be decoded.\n   If the Extended Mode recipient is unable to decode any\
    \ of the\n   attached files, it is recommended that the Extended Mode recipient\n\
    \   return a decoding error for the entire message.\n"
- title: 5. Implementation Issues Specific to the File Format
  contents:
  - '5. Implementation Issues Specific to the File Format

    '
- title: 5.1 IFD Placement & Profile-S Constraints
  contents:
  - "5.1 IFD Placement & Profile-S Constraints\n   a) An IFD is required, by TIFF\
    \ 6.0, to begin on a word boundary,\n      however, there is ambiguity with regard\
    \ to the defined size of a\n      word.  A word should be interpreted as a 2-byte\
    \ quantity.  This\n      recommendation is based on examination of Figure 1 and\
    \ the\n      definition of IFD Entry, Bytes 8-11, found in Section 2 of TIFF\n\
    \      6.0.\n   b) Low memory devices, which support resolutions greater than\
    \ the\n      required Profile-S, may be memory-constrained, such that those\n\
    \      devices cannot properly handle arbitrary placement of TIFF IFDs\n     \
    \ within a TIFF file.\n      To interoperate with a receiver that is constrained,\
    \ it is\n      strongly recommended that senders always place the IFD at the\n\
    \      beginning of the image file when using any of the Profiles defined\n  \
    \    in [4].\n"
- title: 5.2 Precautions for implementers of RFC 2301 [4]
  contents:
  - '5.2 Precautions for implementers of RFC 2301 [4]

    '
- title: 5.2.1 Errors encountered during interoperability testing
  contents:
  - "5.2.1 Errors encountered during interoperability testing\n   The TIFF/RFC 2301\
    \ [4] errors listed below were encountered during\n   interoperability testing\
    \ and are provided so that implementers of\n   TIFF readers and writers can take\
    \ precautionary measures.\n   a) Although Profile S of TIFF [4] specifies that\
    \ files should be in\n      little-endian order, during testing it was found that\
    \ some common\n      TIFF writers create big-endian files.  If possible, the TIFF\n\
    \      reader should be coded to handle big-endian files.  TIFF writers\n    \
    \  should always create little-endian files to be compliant with the\n      standard\
    \ and to allow interoperation with memory-constrained\n      devices.\n   b) Bytes\
    \ 0-1 of the Image File Header are supposed to be set to \"II\"\n      (4949h)\
    \ or \"MM\" (4d4dh) to indicate the byte order.  During\n      testing, other\
    \ values were encountered.  Readers should handle\n      cases where the byte\
    \ order field contains values other than \"II\"\n      or \"MM\", and writers\
    \ should ensure the correct value is used.\n"
- title: 5.2.2 Color Gamut Considerations
  contents:
  - "5.2.2 Color Gamut Considerations\n   The ITULAB encoding (PhotometricInterpretation\
    \ = 10) allows choosing\n   a gamut range for L*a*b* (see the TIFF field Decode),\
    \ which in turn\n   provides a way to place finer granularity on the integer values\n\
    \   represented in this colorspace.  But consequently, an inadequate\n   gamut\
    \ choice may cause a loss in the preservation of colors that\n   don't fall within\
    \ the space of colors bounded by the gamut.  As such,\n   it is worth commenting\
    \ on this.\n   The ITULAB default gamut, L [0,100] a [-85,85] b [-75,125], was\n\
    \   chosen to accommodate most scan devices, which are typically acquired\n  \
    \ from a hardcopy source.  It wasn't chosen to deal with the range of\n   color\
    \ from camera input or sRGB monitor data.  In fact, when dealing\n   with images\
    \ from the web and other display oriented sources, the\n   color range for a scanned\
    \ hardcopy may likely be inadequate.  It is\n   important to use a gamut that\
    \ matches the source of the image data.\n   The following guidelines are recommended:\n\
    \   1. When acquiring input from a printed hardcopy source, without\n      modification,\
    \ the ITU-T Recommendation T.42 default ITULAB gamut\n      should be appropriate.\n\
    \   2. For an sRGB source, the ITU-T Recommendation T.42 default ITULAB\n    \
    \  gamut is not appropriate.  A more appropriate gamut to consider\n      is:\
    \ L [0,100], a [-88,99] and b [-108.8,95.2].  These may be\n      realized by\
    \ using the following Decode values for 8-bit data:\n      (0/1, 100/1, -22440/255,\
    \ 25245/255, -27744/255, 24276/255).\n   3. If the range of L*a*b* value can be\
    \ precomputed efficiently before\n      converting to ITULAB, then you may get\
    \ the best result by picking\n      a gamut that is custom to this range.\n"
- title: 5.2.3 File format Considerations
  contents:
  - "5.2.3 File format Considerations\n   Implementers should make sure of the contents\
    \ in the following two\n   sections.\n"
- title: 5.2.3.1 Considerations for greater reader flexibility
  contents:
  - "5.2.3.1 Considerations for greater reader flexibility\n   a) Readers are able\
    \ to handle cases where IFD offsets point beyond\n      the end of the file, while\
    \ writers ensure that the IFD offset does\n      not point beyond the end of the\
    \ file.\n   b) Readers are able to handle the first IFD offset being on a non-\n\
    \      word boundary, while writers ensure that the first IFD offset is\n    \
    \  on a word boundary.\n   c) Readers are flexible and able to accommodate: IFDs\
    \ that are not\n      presented in ascending page order; IFDs that are not placed\
    \ at a\n      location that precedes the image which the IFD describes; next IFD\n\
    \      offsets that precede the current IFD, the current IFDs' field\n      data,\
    \ or the current IFDs' image data.  Writers on the other hand\n      should generate\
    \ files with IFDs presented in ascending page order;\n      IFDs placed at a location\
    \ that precedes the image which the IFD\n      describes; the next IFD should\
    \ always follow the current IFD and\n      all of its data.\n   d) Writers generate\
    \ tags with the appropriate type of data (for\n      example RATIONAL instead\
    \ of SRATIONAL).  Readers are flexible with\n      those types of misrepresentations\
    \ that may be readily accommodated\n      (for example SHORT instead of LONG)\
    \ and lead to enhanced\n      robustness.\n   e) The appropriate count is associated\
    \ with the tags (it is not 0 and\n      matches the tag requirement), while readers\
    \ are flexible with\n      these types of misrepresentations, which may be readily\n\
    \      accommodated and lead to enhanced robustness.\n   f) Tags appear in the\
    \ correct order in the IFD and readers are\n      flexible with these types of\
    \ misrepresentations.\n"
- title: 5.2.3.2 Error considerations
  contents:
  - "5.2.3.2 Error considerations\n   a) Readers only accept files with bytes 2-3\
    \ of the Image File Header\n      equal to 42 (2Ah), the \"magic number\", as\
    \ being valid TIFF or\n      TIFF-FX files, while writers only generate files\
    \ with the\n      appropriate magic number.\n   b) Files are not generated with\
    \ missing field entries, and readers\n      reject any such files.\n   c) The\
    \ PageNumber value is based on the order within the Primary IFD\n      chain.\
    \  The ImageLayer values are based on the layer order and the\n      image order\
    \ within the layer respectively.  Readers may reject the\n      pages where the\
    \ PageNumber or ImageLayer values are not consistent\n      with the number of\
    \ Primary IFDs, number of layers or number of\n      images within the layers.\n\
    \   d) Tags are unique within an IFD and readers may reject pages where\n    \
    \  this is not the case.\n   e) Strip data does not overlap other file data and\
    \ the reader may\n      error appropriately.\n   f) The strip offset does not\
    \ point outside the file, under these\n      conditions readers may reject the\
    \ page where this is the case.\n   g) The strip offset + StripByteCounts does\
    \ not point outside the\n      file, under these conditions the reader may error\
    \ appropriately.\n   h) Only one endian order is used within the file otherwise\
    \ the\n      rendered file will be corrupted.\n   i) Tag values are consistent\
    \ with the data contained within the image\n      strip.  For example, a bi-level\
    \ black mark on a white background\n      image strip with a PhotometricInterpretation\
    \ tag value of \"1\" (bit\n      value of \"0\" means black) will result in the\
    \ rendering of the\n      image as white marks on a black background (reverse\
    \ video).\n   j) For the special color spaces (ITULAB, YCBCR, CMYK), the parameters\n\
    \      used for transformations are correct and compliant with the\n      specification.\n\
    \   k) The XPosition and YPosition values are consistent with the\n      horizontal\
    \ and vertical offsets of the top-left of the IFD from\n      the top-left of\
    \ the Primary IFD, in units of the resolution.  To\n      do otherwise results\
    \ in misplacement of the rendered image.\n   l) All combinations of tag values\
    \ are correct, with special attention\n      being given to the sets: XResolution,\
    \ YResolution and ImageWidth;\n      PhotometricInterpretation, SamplesPerPixel,\
    \ and BitsPerSample.\n      Any appropriate combinations will likely result in\
    \ image\n      distortion or an inability to render the image.\n   m) The appropriate\
    \ Compression types are used for the image layers\n      within a Profile M file,\
    \ such as a bi-level coder for the mask\n      layers (i.e. odd numbered layers)\
    \ and multi-level (color) coders\n      for the background and foreground layers.\
    \  Readers should reject\n      files where this is not true.\n"
- title: 5.3 Content-Type for the file format
  contents:
  - "5.3 Content-Type for the file format\n   The content-type \"image/tiff\" should\
    \ only be used for Profiles S and\n   F.  Some existing implementations based\
    \ on [4] may use \"image/tiff\"\n   for other Profiles.  However, this usage is\
    \ now deprecated.  Instead,\n   the content-type \"image/tiff-fx\", whose registration\
    \ is being defined\n   in [17] should be used.\n   To maximize interworking with\
    \ devices that are only capable of\n   rendering Profile S or F, \"image/tiff\"\
    \ SHOULD be used when\n   transporting Profile S or F.\n"
- title: 6. Implementation Issues for Internet Fax Addressing
  contents:
  - "6. Implementation Issues for Internet Fax Addressing\n   The \"+\" and \"=\"\
    \ characters are valid within message headers, but must\n   be encoded within\
    \ some ESMTP commands, most notably ORCPT [5].\n   Implementations must take special\
    \ care that ORCPT (and other ESMTP\n   values) are properly encoded.\n   For example,\
    \ the following header is valid as-is:\n      To: Home Fax <FAX=+390408565@example.com>\n\
    \   but when used with ORCPT, the \"=\" and \"+\" must be encoded like this:\n\
    \      RCPT TO:<FAX=+390408565@example.com> \\\n        ORCPT=FAX+3D+2B390408565@example.com\n\
    \   Note the \"=\" and \"+\" are valid inside the forward-path, but must be\n\
    \   encoded when used within the esmtp value.\n   See [5] for details on this\
    \ encoding.\n"
- title: 7. Security Considerations
  contents:
  - "7. Security Considerations\n   With regards to this document, Sections 5 in RFC\
    \ 2305 [2] and Section\n   4 in RFC 2532 [3] apply.\n"
- title: 8. Acknowledgements
  contents:
  - "8. Acknowledgements\n   The authors gratefully acknowledge the following persons\
    \ who\n   contributed or made comments on earlier versions of this memo:\n   Claudio\
    \ Allocchio, Richard Coles, Ryuji Iwazaki, Graham Klyne, James\n   Rafferty, Kensuke\
    \ Yamada, Jutta Degener and Lloyd McIntyre.\n"
- title: 9. References
  contents:
  - "9. References\n   [1]  Masinter, L., \"Terminology and Goals for Internet Fax\"\
    , RFC\n        2542, March 1999.\n   [2]  Toyoda, K., Ohno, H., Murai, J. and\
    \ D. Wing, \"A Simple Mode of\n        Facsimile Using Internet Mail\", RFC 3205,\
    \ March 1998.\n   [3]  Masinter, L. and D. Wing, \"Extended Facsimile Using Internet\n\
    \        Mail\", RFC 2532, March 1999.\n   [4]  McIntyre, L., Zilles, S., Buckley,\
    \ R., Venable, D., Parsons, G.\n        and J. Rafferty,  \"File Format for Internet\
    \ Fax\", RFC 2301,\n        March 1998.\n   [5]  Moore, K., \"SMTP Service Extension\
    \ for Delivery Status\n        Notification\", RFC 1891, January 1996.\n   [6]\
    \  Vaudreuil, G., \"Enhanced Mail System Status Codes\", RFC 1893,\n        January\
    \ 1996.\n   [7]  Moore, K. and G. Vaudreuil, \"An Extensible Message Format for\n\
    \        Delivery Status Notifications\", RFC 1894, January 1996.\n   [8]  Freed,\
    \ N., \"SMTP Service Extension for Returning Enhanced Error\n        Codes\",\
    \ RFC 2034, October 1996.\n   [9]  Fajman, R., \"An Extensible Message Format\
    \ for Message\n        Disposition Notifications\", RFC 2298, March 1998.\n  \
    \ [10] Crocker, D., \"Standard for the Format of ARPA Internet Text\n        Messages\"\
    , STD 11, RFC 822, August 1982.\n   [11] Postel, J., \"A Simple Mail Transfer\
    \ Protocol\", STD 10, RFC 821,\n        August 1982.\n   [12] Allocchio, C., \"\
    Minimal GSTN address format in Internet Mail\",\n        RFC 3191, October 2001.\n\
    \   [13] Allocchio, C., \"Minimal FAX address format in Internet Mail\",\n   \
    \     RFC 3192, October 2001.\n   [14] Allocchio, C., \"GSTN Address Element Extensions\
    \ in E-mail\n        Services\", RFC 2846, June 2000\n   [15] Klensin, J., Freed,\
    \ N., Rose, M., Stefferud, E. and D. Crocker,\n        D., \"SMTP Service Extensions\"\
    , RFC 2846, November 1995\n   [16] Freed, N. and N. Borenstein, \"Multipurpose\
    \ Internet Mail\n        Extensions (MIME) Part Two: Media Types\", RFC 2046,\
    \ November\n        1996\n   [17] McIntyre, L., Parsons, G. and J. Rafferty, \"\
    Tag Image File\n        Format Fax eXtended (TIFF-FX) - image/tiff-fx MIME Sub-type\n\
    \        Registration\", RFC 3250, September 2002.\n   [18] Klensin, J., \"Simple\
    \ Mail Transfer Protocol\", RFC 2821, April\n        2001.\n   [19] Resnick, P.,\
    \ \"Internet Message Format\", RFC 2822, April 2001.\n"
- title: 10. Authors' Addresses
  contents:
  - "10. Authors' Addresses\n   Vivian Cancio\n   103 Cuesta Drive\n   Los Altos,\
    \ CA 94022\n   Phone: +1-650-948-3135\n   EMail: vcancio@pacbell.net\n   Mike\
    \ Moldovan\n   G3 Nova Technology Inc.\n   5743 Corsa Avenue, Suite 122\n   Westlake\
    \ Village, CA 91362\n   Phone: (818) 865-6600 Ext.113\n   EMail: mmoldovan@g3nova.com\n\
    \   Hiroshi Tamura\n   Ricoh Company, LTD.\n   1-3-6 Nakamagome, Ohta-ku\n   Tokyo\
    \ 143-8555 Japan\n   Phone: +81-3-3777-8124\n   Fax:   +81-3-5742-8859\n   EMail:\
    \ tamura@toda.ricoh.co.jp\n   Dan Wing\n   Cisco Systems, Inc.\n   170 W. Tasman\
    \ Drive\n   San Jose, CA  95134-1706  USA\n   Phone: +1-408-525-5314\n   Fax:\
    \   +1-408-527-8083\n   EMail: dwing@cisco.com\n"
- title: 11. Full Copyright Statement
  contents:
  - "11. Full Copyright Statement\n   Copyright (C) The Internet Society (2002). \
    \ All Rights Reserved.\n   This document and translations of it may be copied\
    \ and furnished to\n   others, and derivative works that comment on or otherwise\
    \ explain it\n   or assist in its implementation may be prepared, copied, published\n\
    \   and distributed, in whole or in part, without restriction of any\n   kind,\
    \ provided that the above copyright notice and this paragraph are\n   included\
    \ on all such copies and derivative works.  However, this\n   document itself\
    \ may not be modified in any way, such as by removing\n   the copyright notice\
    \ or references to the Internet Society or other\n   Internet organizations, except\
    \ as needed for the purpose of\n   developing Internet standards in which case\
    \ the procedures for\n   copyrights defined in the Internet Standards process\
    \ must be\n   followed, or as required to translate it into languages other than\n\
    \   English.\n   The limited permissions granted above are perpetual and will\
    \ not be\n   revoked by the Internet Society or its successors or assigns.\n \
    \  This document and the information contained herein is provided on an\n   \"\
    AS IS\" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING\n   TASK FORCE\
    \ DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING\n   BUT NOT LIMITED\
    \ TO ANY WARRANTY THAT THE USE OF THE INFORMATION\n   HEREIN WILL NOT INFRINGE\
    \ ANY RIGHTS OR ANY IMPLIED WARRANTIES OF\n   MERCHANTABILITY OR FITNESS FOR A\
    \ PARTICULAR PURPOSE.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
