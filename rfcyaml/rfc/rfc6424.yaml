- title: __initial_text__
  contents:
  - "      Mechanism for Performing Label Switched Path Ping (LSP Ping)\n        \
    \                   over MPLS Tunnels\n"
- title: Abstract
  contents:
  - "Abstract\n   This document describes methods for performing LSP ping (specified\
    \ in\n   RFC 4379) traceroute over MPLS tunnels and for traceroute of stitched\n\
    \   MPLS Label Switched Paths (LSPs).  The techniques outlined in RFC\n   4379\
    \ are insufficient to perform traceroute Forwarding Equivalency\n   Class (FEC)\
    \ validation and path discovery for an LSP that goes over\n   other MPLS tunnels\
    \ or for a stitched LSP.  This document deprecates\n   the Downstream Mapping\
    \ TLV (defined in RFC 4379) in favor of a new\n   TLV that, along with other procedures\
    \ outlined in this document, can\n   be used to trace such LSPs.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc6424.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2011 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n   This document\
    \ may contain material from IETF Documents or IETF\n   Contributions published\
    \ or made publicly available before November\n   10, 2008.  The person(s) controlling\
    \ the copyright in some of this\n   material may not have granted the IETF Trust\
    \ the right to allow\n   modifications of such material outside the IETF Standards\
    \ Process.\n   Without obtaining an adequate license from the person(s) controlling\n\
    \   the copyright in such materials, this document may not be modified\n   outside\
    \ the IETF Standards Process, and derivative works of it may\n   not be created\
    \ outside the IETF Standards Process, except to format\n   it for publication\
    \ as an RFC or to translate it into languages other\n   than English.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  4\n     1.1.  Conventions Used in This Document  . . . . . . .\
    \ . . . . .  4\n   2.  Motivation . . . . . . . . . . . . . . . . . . . . . .\
    \ . . . .  4\n   3.  Packet Format  . . . . . . . . . . . . . . . . . . . . .\
    \ . . .  5\n     3.1.  Summary of Changes . . . . . . . . . . . . . . . . . .\
    \ . .  5\n     3.2.  New Return Codes . . . . . . . . . . . . . . . . . . . .\
    \ .  6\n       3.2.1.  Return Code per Downstream . . . . . . . . . . . . . .\
    \  6\n       3.2.2.  Return Code for Stitched LSPs  . . . . . . . . . . . .  6\n\
    \     3.3.  Downstream Detailed Mapping TLV  . . . . . . . . . . . . .  7\n  \
    \     3.3.1.  Sub-TLVs . . . . . . . . . . . . . . . . . . . . . . .  9\n    \
    \     3.3.1.1.  Multipath Data Sub-TLV . . . . . . . . . . . . . .  9\n     3.4.\
    \  Deprecation of Downstream Mapping TLV  . . . . . . . . . . 13\n   4.  Performing\
    \ MPLS Traceroute on Tunnels  . . . . . . . . . . . . 13\n     4.1.  Transit Node\
    \ Procedure . . . . . . . . . . . . . . . . . . 13\n       4.1.1.  Addition of\
    \ a New Tunnel . . . . . . . . . . . . . . . 13\n       4.1.2.  Transition between\
    \ Tunnels . . . . . . . . . . . . . . 14\n       4.1.3.  Modification to FEC Validation\
    \ Procedure on Transit  . 16\n     4.2.  Modification to FEC Validation Procedure\
    \ on Egress . . . . 16\n     4.3.  Ingress Node Procedure . . . . . . . . . .\
    \ . . . . . . . . 17\n       4.3.1.  Processing Downstream Detailed Mapping TLV\
    \ . . . . . . 17\n         4.3.1.1.  Stack Change Sub-TLV Not Present . . . .\
    \ . . . . . 17\n         4.3.1.2.  Stack Change Sub-TLV(s) Present  . . . . .\
    \ . . . . 17\n       4.3.2.  Modifications to Handling a Return Code 3 Reply.\
    \ . . . 19\n       4.3.3.  Handling of New Return Codes . . . . . . . . . . .\
    \ . . 19\n     4.4.  Handling Deprecated Downstream Mapping TLV . . . . . . .\
    \ . 20\n   5.  Security Considerations  . . . . . . . . . . . . . . . . . . .\
    \ 20\n   6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 21\n\
    \   7.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 22\n  \
    \ 8.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 22\n    \
    \ 8.1.  Normative References . . . . . . . . . . . . . . . . . . . 22\n     8.2.\
    \  Informative References . . . . . . . . . . . . . . . . . . 22\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This documents describes methods for performing LSP ping\
    \ (specified\n   in [RFC4379]) traceroute over MPLS tunnels.  The techniques in\n\
    \   [RFC4379] outline a traceroute mechanism that includes Forwarding\n   Equivalency\
    \ Class (FEC) validation and Equal Cost Multi-Path (ECMP)\n   path discovery.\
    \  Those mechanisms are insufficient and do not provide\n   details when the FEC\
    \ being traced traverses one or more MPLS tunnels\n   and when Label Switched\
    \ Path (LSP) stitching [RFC5150] is in use.\n   This document deprecates the Downstream\
    \ Mapping TLV [RFC4379],\n   introducing instead a new TLV that is more extensible\
    \ and that\n   enables retrieval of detailed information.  Using the new TLV format\n\
    \   along with the existing definitions of [RFC4379], this document\n   describes\
    \ procedures by which a traceroute request can correctly\n   traverse MPLS tunnels\
    \ with proper FEC and label validations.\n"
- title: 1.1.  Conventions Used in This Document
  contents:
  - "1.1.  Conventions Used in This Document\n   The key words \"MUST\", \"MUST NOT\"\
    , \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\"\
    , \"MAY\", and \"OPTIONAL\" in this\n   document are to be interpreted as described\
    \ in [RFC2119].\n"
- title: 2.  Motivation
  contents:
  - "2.  Motivation\n   An LSP ping traceroute may cross multiple MPLS tunnels en\
    \ route to\n   the destination.  Let us consider a simple case.\n   A        \
    \  B          C           D           E\n   o -------- o -------- o ---------\
    \ o --------- o\n     \\_____/  | \\______/   \\______/  | \\______/\n       LDP\
    \    |   RSVP       RSVP    |    LDP\n              |                      |\n\
    \               \\____________________/\n                        LDP\n       \
    \               Figure 1: LDP over RSVP Tunnel\n   When a traceroute is initiated\
    \ from router A, router B returns\n   downstream mapping information for node\
    \ C in the MPLS echo reply.\n   The next MPLS echo request reaches router C with\
    \ an LDP FEC.  Node C\n   is a pure RSVP node and does not run LDP.  Node C will\
    \ receive the\n   MPLS echo request with two labels but only one FEC in the Target\
    \ FEC\n   stack.  Consequently, node C will be unable to perform a complete FEC\n\
    \   validation.  It will let the trace continue by just providing next-\n   hop\
    \ information based on the incoming label, and by looking up the\n   forwarding\
    \ state associated with that label.  However, ignoring FEC\n   validation defeats\
    \ the purpose of control-plane validations.  The\n   MPLS echo request should\
    \ contain sufficient information to allow node\n   C to perform FEC validations\
    \ to catch any misrouted echo requests.\n   The above problem can be extended\
    \ for a generic case of hierarchical\n   tunnels or stitched tunnels (e.g., B-C\
    \ can be a separate RSVP tunnel\n   and C-D can be a separate RSVP tunnel).  The\
    \ problem of FEC\n   validation for tunnels can be solved if the transit routers\
    \ (router B\n   in the above example) provide some information to the ingress\n\
    \   regarding the start of a new tunnel.\n   Stitched LSPs involve two or more\
    \ LSP segments stitched together.\n   The LSP segments can be signaled using the\
    \ same or different\n   signaling protocols.  In order to perform an end-to-end\
    \ trace of a\n   stitched LSP, the ingress needs to know FEC information regarding\n\
    \   each of the stitched LSP segments.  For example, consider the figure\n   below.\n\
    \   A          B          C           D          E         F\n   o -------- o\
    \ -------- o --------- o -------- o ------- o\n     \\_____/    \\______/   \\\
    ______/    \\______/  \\_______/\n       LDP        LDP         BGP         RSVP\
    \      RSVP\n                          Figure 2: Stitched LSP\n   Consider ingress\
    \ (A) tracing end-to-end stitched LSP A--F.  When an\n   MPLS echo request reaches\
    \ router C, there is a FEC stack change\n   happening at router C.  With current\
    \ LSP ping [RFC4379] mechanisms,\n   there is no way to convey this information\
    \ to A.  Consequently, when\n   the next echo request reaches router D, router\
    \ D will know nothing\n   about the LDP FEC that A is trying to trace.\n   Thus,\
    \ the procedures defined in [RFC4379] do not make it possible for\n   the ingress\
    \ node to:\n   1.  Know that tunneling has occurred.\n   2.  Trace the path of\
    \ the tunnel.\n   3.  Trace the path of stitched LSPs.\n"
- title: 3.  Packet Format
  contents:
  - '3.  Packet Format

    '
- title: 3.1.  Summary of Changes
  contents:
  - "3.1.  Summary of Changes\n   In many cases, there is a need to associate additional\
    \ data in the\n   MPLS echo reply.  In most cases, the additional data needs to\
    \ be\n   associated on a per-downstream-neighbor basis.  Currently, the MPLS\n\
    \   echo reply contains one Downstream Mapping TLV (DSMAP) per downstream\n  \
    \ neighbor.  However, the DSMAP format is not extensible; hence, it is\n   not\
    \ possible to associate more information with a downstream\n   neighbor.  This\
    \ document defines a new extensible format for the\n   DSMAP and provides mechanisms\
    \ for solving the tunneled LSP ping\n   problem using the new format.  In summary,\
    \ this document makes the\n   following TLV changes:\n   o  Addition of new Downstream\
    \ Detailed Mapping TLV (DDMAP).\n   o  Deprecation of existing Downstream Mapping\
    \ TLV (DSMAP).\n   o  Addition of Downstream FEC stack change sub-TLV to DDMAP.\n"
- title: 3.2.  New Return Codes
  contents:
  - '3.2.  New Return Codes

    '
- title: 3.2.1.  Return Code per Downstream
  contents:
  - "3.2.1.  Return Code per Downstream\n   A new Return Code is being defined \"\
    See DDM TLV for Return Code and\n   Return Subcode\" (Section 6.3) to indicate\
    \ that the Return Code is per\n   Downstream Detailed Mapping TLV (Section 3.3).\
    \  This Return Code MUST\n   be used only in the message header and MUST be set\
    \ only in the MPLS\n   echo reply message.  If the Return Code is set in the MPLS\
    \ echo\n   request message, then it MUST be ignored.  When this Return Code is\n\
    \   set, each Downstream Detailed Mapping TLV MUST have an appropriate\n   Return\
    \ Code and Return Subcode.  This Return Code MUST be used when\n   there are multiple\
    \ downstreams for a given node (such as Point to\n   Multipoint (P2MP) or Equal\
    \ Cost Multi-Path (ECMP)), and the node\n   needs to return a Return Code/Return\
    \ Subcode for each downstream.\n   This Return Code MAY be used even when there\
    \ is only one downstream\n   for a given node.\n"
- title: 3.2.2.  Return Code for Stitched LSPs
  contents:
  - "3.2.2.  Return Code for Stitched LSPs\n   When a traceroute is being performed\
    \ on stitched LSPs\n   (Section 4.1.2), the stitching point SHOULD indicate the\
    \ stitching\n   action to the node performing the trace.  This is done by setting\
    \ the\n   Return Code to \"Label switched with FEC change\" (Section 6.3).  If\
    \ a\n   node is performing FEC hiding, then it MAY choose to set the Return\n\
    \   Code to a value (specified in [RFC4379]) other than \"Label switched\n   with\
    \ FEC change\".  The Return Code \"Label switched with FEC change\"\n   MUST NOT\
    \ be used if no FEC stack sub-TLV (Section 3.3.1.3) is present\n   in the Downstream\
    \ Detailed Mapping TLV(s).  This new Return Code MAY\n   be used for hierarchical\
    \ LSPs (for indicating the start or end of an\n   outer LSP).\n"
- title: 3.3.  Downstream Detailed Mapping TLV
  contents:
  - "3.3.  Downstream Detailed Mapping TLV\n        Type #   Value Field\n       \
    \ ------   ------------\n        20       Downstream Detailed Mapping\n   The\
    \ Downstream Detailed Mapping object is a TLV that MAY be included\n   in an MPLS\
    \ echo request message.  Only one Downstream Detailed\n   Mapping object may appear\
    \ in an echo request.  The presence of a\n   Downstream Detailed Mapping object\
    \ is a request that Downstream\n   Detailed Mapping objects be included in the\
    \ MPLS echo reply.  If the\n   replying router is the destination (Label Edge\
    \ Router) of the FEC,\n   then a Downstream Detailed Mapping TLV SHOULD NOT be\
    \ included in the\n   MPLS echo reply.  Otherwise, the replying router SHOULD\
    \ include a\n   Downstream Detailed Mapping object for each interface over which\
    \ this\n   FEC could be forwarded.\n       0                   1             \
    \      2                   3\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0\
    \ 1 2 3 4 5 6 7 8 9 0 1\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |               MTU             | Address Type  |    DS Flags   |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |\
    \               Downstream Address (4 or 16 octets)             |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      |         Downstream Interface Address (4 or 16 octets)         |\n   \
    \   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n      |\
    \  Return Code  | Return Subcode|        Sub-tlv Length         |\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \      .                                                               .\n   \
    \   .                      List of Sub-TLVs                         .\n      .\
    \                                                               .\n      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                 Figure 3: Downstream Detailed Mapping TLV\n   The Downstream\
    \ Detailed Mapping TLV format is derived from the\n   Downstream Mapping TLV format.\
    \  The key change is that variable\n   length and optional fields have been converted\
    \ into sub-TLVs.  The\n   fields have the same use and meaning as in [RFC4379].\
    \  A summary of\n   the fields taken from the Downstream Mapping TLV is as below:\n\
    \   Maximum Transmission Unit (MTU)\n      The MTU is the size in octets of the\
    \ largest MPLS frame (including\n      label stack) that fits on the interface\
    \ to the Downstream Label\n      Switching Router (LSR).\n   Address Type\n  \
    \    The Address Type indicates if the interface is numbered or\n      unnumbered.\
    \  It also determines the length of the Downstream IP\n      Address and Downstream\
    \ Interface fields.\n   DS Flags\n      The DS Flags field is a bit vector of\
    \ various flags.\n   Downstream Address and Downstream Interface Address\n   \
    \   IPv4 addresses and interface indices are encoded in 4 octets; IPv6\n     \
    \ addresses are encoded in 16 octets.  For details regarding setting\n      the\
    \ address value, refer to [RFC4379].\n   The newly added sub-TLVs and their fields\
    \ are as described below.\n   Return Code\n      The Return Code is set to zero\
    \ by the sender.  The receiver can\n      set it to one of the values specified\
    \ in the \"Multi-Protocol Label\n      Switching (MPLS) Label Switched Paths (LSPs)\
    \ Ping Parameters\"\n      registry, \"Return Codes\" sub-registry.\n      If\
    \ the receiver sets a non-zero value of the Return Code field in\n      the Downstream\
    \ Detailed Mapping TLV, then the receiver MUST also\n      set the Return Code\
    \ field in the echo reply header to \"See DDM TLV\n      for Return Code and Return\
    \ Subcode\" (Section 6.3).  An exception\n      to this is if the receiver is\
    \ a bud node [RFC4461] and is replying\n      as both an egress and a transit\
    \ node with a Return Code of 3\n      (\"Replying router is an egress for the\
    \ FEC at stack-depth <RSC>\")\n      in the echo reply header.\n      If the Return\
    \ Code of the echo reply message is not set to either\n      \"See DDM TLV for\
    \ Return Code and Return Subcode\" (Section 6.3) or\n      \"Replying router is\
    \ an egress for the FEC at stack-depth <RSC>\",\n      then the Return Code specified\
    \ in the Downstream Detailed Mapping\n      TLV MUST be ignored.\n   Return Subcode\n\
    \      The Return Subcode is set to zero by the sender.  The receiver can\n  \
    \    set it to one of the values specified in the \"Multi-Protocol Label\n   \
    \   Switching (MPLS) Label Switched Paths (LSPs) Ping Parameters\"\n      registry,\
    \ \"Return Codes\" sub-registry.  This field is filled in\n      with the stack-depth\
    \ for those codes that specify the stack-depth.\n      For all other codes, the\
    \ Return Subcode MUST be set to zero.\n      If the Return Code of the echo reply\
    \ message is not set to either\n      \"See DDM TLV for Return Code and Return\
    \ Subcode\" (Section 6.3) or\n      \"Replying router is an egress for the FEC\
    \ at stack-depth <RSC>\",\n      then the Return Subcode specified in the Downstream\
    \ Detailed\n      Mapping TLV MUST be ignored.\n   Sub-tlv Length\n      Total\
    \ length in bytes of the sub-TLVs associated with this TLV.\n"
- title: 3.3.1.  Sub-TLVs
  contents:
  - "3.3.1.  Sub-TLVs\n   This section defines the sub-TLVs that MAY be included as\
    \ part of the\n   Downstream Detailed Mapping TLV.\n        Sub-Type    Value\
    \ Field\n        ---------   ------------\n          1         Multipath data\n\
    \          2         Label stack\n          3         FEC stack change\n"
- title: 3.3.1.1.  Multipath Data Sub-TLV
  contents:
  - "3.3.1.1.  Multipath Data Sub-TLV\n    0                   1                 \
    \  2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3\
    \ 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |Multipath Type |       Multipath Length        |Reserved (MBZ) |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |                                                               |\n   |  \
    \                (Multipath Information)                      |\n   |        \
    \                                                       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                        Figure 4: Multipath Sub-TLV\n   The multipath data sub-TLV\
    \ includes Multipath Information.  The sub-\n   TLV fields and their usage is\
    \ as defined in [RFC4379].  A brief\n   summary of the fields is as below:\n \
    \  Multipath Type\n      The type of the encoding for the Multipath Information.\n\
    \   Multipath Length\n      The length in octets of the Multipath Information.\n\
    \   MBZ\n      MUST be set to zero when sending; MUST be ignored on receipt.\n\
    \   Multipath Information\n      Encoded multipath data, according to the Multipath\
    \ Type.\n"
- title: 3.3.1.2.  Label Stack Sub-TLV
  contents:
  - "3.3.1.2.  Label Stack Sub-TLV\n    0                   1                   2\
    \                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\
    \ 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |               Downstream Label                |    Protocol   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   .                                                               .\n   .  \
    \                                                             .\n   .        \
    \                                                       .\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |               Downstream Label                |    Protocol   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                       Figure 5: Label Stack Sub-TLV\n   The Label stack sub-TLV\
    \ contains the set of labels in the label stack\n   as it would have appeared\
    \ if this router were forwarding the packet\n   through this interface.  Any Implicit\
    \ Null labels are explicitly\n   included.  The number of label/protocol pairs\
    \ present in the sub-TLV\n   is determined based on the sub-TLV data length. \
    \ The label format and\n   protocol type are as defined in [RFC4379].  When the\
    \ Downstream\n   Detailed Mapping TLV is sent in the echo reply, this sub-TLV\
    \ MUST be\n   included.\n   Downstream Label\n      A Downstream label is 24 bits,\
    \ in the same format as an MPLS label\n      minus the Time to Live (TTL) field,\
    \ i.e., the MSBit of the label\n      is bit 0, the LSBit is bit 19, the Traffic\
    \ Class (TC) field\n      [RFC5462] is bits 20-22, and S is bit 23.  The replying\
    \ router\n      SHOULD fill in the TC field and S bit; the LSR receiving the echo\n\
    \      reply MAY choose to ignore these.\n   Protocol\n      This specifies the\
    \ label distribution protocol for the Downstream\n      label.\n"
- title: 3.3.1.3.  FEC Stack Change Sub-TLV
  contents:
  - "3.3.1.3.  FEC Stack Change Sub-TLV\n   A router MUST include the FEC stack change\
    \ sub-TLV when the\n   downstream node in the echo reply has a different FEC Stack\
    \ than the\n   FEC Stack received in the echo request.  One or more FEC stack\
    \ change\n   sub-TLVs MAY be present in the Downstream Detailed Mapping TLV. \
    \ The\n   format is as below.\n   0                   1                   2  \
    \                 3\n   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6\
    \ 7 8 9 0 1 2\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |Operation Type | Address Type  | FEC-tlv length|  Reserved     |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   |           Remote Peer Address (0, 4 or 16 octets)             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \   .                                                               .\n   .  \
    \                       FEC TLV                               .\n   .        \
    \                                                       .\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\
    \                    Figure 6: FEC Stack Change Sub-TLV\n   Operation Type\n \
    \     The operation type specifies the action associated with the FEC\n      stack\
    \ change.  The following operation types are defined:\n        Type #     Operation\n\
    \        ------     ---------\n        1          Push\n        2          Pop\n\
    \   Address Type\n      The Address Type indicates the remote peer's address type.\
    \  The\n      Address Type is set to one of the following values.  The length\
    \ of\n      the peer address is determined based on the address type.  The\n \
    \     address type MAY be different from the address type included in\n      the\
    \ Downstream Detailed Mapping TLV.  This can happen when the LSP\n      goes over\
    \ a tunnel of a different address family.  The address\n      type MAY be set\
    \ to Unspecified if the peer address is either\n      unavailable or the transit\
    \ router does not wish to provide it for\n      security or administrative reasons.\n\
    \        Type #   Address Type   Address length\n        ------   ------------\
    \   --------------\n        0        Unspecified    0\n        1        IPv4 \
    \          4\n        2        IPv6           16\n   FEC TLV Length\n      Length\
    \ in bytes of the FEC TLV.\n   Reserved\n      This field is reserved for future\
    \ use and MUST be set to zero.\n   Remote Peer Address\n      The remote peer\
    \ address specifies the remote peer that is the\n      next-hop for the FEC being\
    \ currently traced.  For example, in the\n      LDP over RSVP case in Figure 1,\
    \ router B would respond back with\n      the address of router D as the remote\
    \ peer address for the LDP FEC\n      being traced.  This allows the ingress node\
    \ to provide information\n      regarding FEC peers.  If the operation type is\
    \ PUSH, the remote\n      peer address is the address of the peer from which the\
    \ FEC being\n      pushed was learned.  If the operation type is POP, the remote\
    \ peer\n      address MAY be set to Unspecified.\n      For upstream-assigned\
    \ labels [RFC5331], an operation type of POP\n      will have a remote peer address\
    \ (the upstream node that assigned\n      the label) and this SHOULD be included\
    \ in the FEC stack change\n      sub-TLV.  The remote peer address MAY be set\
    \ to Unspecified if the\n      address needs to be hidden.\n   FEC TLV\n     \
    \ The FEC TLV is present only when the FEC-tlv length field is non-\n      zero.\
    \  The FEC TLV specifies the FEC associated with the FEC stack\n      change operation.\
    \  This TLV MAY be included when the operation\n      type is POP.  It MUST be\
    \ included when the operation type is PUSH.\n      The FEC TLV contains exactly\
    \ one FEC from the list of FECs\n      specified in [RFC4379].  A Nil FEC MAY\
    \ be associated with a PUSH\n      operation if the responding router wishes to\
    \ hide the details of\n      the FEC being pushed.\n   FEC stack change sub-TLV\
    \ operation rules are as follows:\n   a.  A FEC stack change sub-TLV containing\
    \ a PUSH operation MUST NOT\n       be followed by a FEC stack change sub-TLV\
    \ containing a POP\n       operation.\n   b.  One or more POP operations MAY be\
    \ followed by one or more PUSH\n       operations.\n   c.  One FEC stack change\
    \ sub-TLV MUST be included per FEC stack\n       change.  For example, if 2 labels\
    \ are going to be pushed, then\n       one FEC stack change sub-TLV MUST be included\
    \ for each FEC.\n   d.  A FEC splice operation (an operation where one FEC ends\
    \ and\n       another FEC starts, see Figure 7) MUST be performed by including\n\
    \       a POP type FEC stack change sub-TLV followed by a PUSH type FEC\n    \
    \   stack change sub-TLV.\n   e.  A Downstream detailed mapping TLV containing\
    \ only one FEC stack\n       change sub-TLV with Pop operation is equivalent to\
    \ IS_EGRESS\n       (Return Code 3, [RFC4379]) for the outermost FEC in the FEC\n\
    \       stack.  The ingress router performing the MPLS traceroute MUST\n     \
    \  treat such a case as an IS_EGRESS for the outermost FEC.\n"
- title: 3.4.  Deprecation of Downstream Mapping TLV
  contents:
  - "3.4.  Deprecation of Downstream Mapping TLV\n   This document deprecates the\
    \ Downstream Mapping TLV.  LSP ping\n   procedures should now use the Downstream\
    \ Detailed Mapping TLV.\n   Detailed procedures regarding interoperability between\
    \ the deprecated\n   TLV and the new TLV are specified in Section 4.4.\n"
- title: 4.  Performing MPLS Traceroute on Tunnels
  contents:
  - "4.  Performing MPLS Traceroute on Tunnels\n   This section describes the procedures\
    \ to be followed by an LSP\n   ingress node and LSP transit nodes when performing\
    \ MPLS traceroute\n   over MPLS tunnels.\n"
- title: 4.1.  Transit Node Procedure
  contents:
  - '4.1.  Transit Node Procedure

    '
- title: 4.1.1.  Addition of a New Tunnel
  contents:
  - "4.1.1.  Addition of a New Tunnel\n   A transit node (Figure 1) knows when the\
    \ FEC being traced is going to\n   enter a tunnel at that node.  Thus, it knows\
    \ about the new outer FEC.\n   All transit nodes that are the origination point\
    \ of a new tunnel\n   SHOULD add the FEC stack change sub-TLV (Section 3.3.1.3)\
    \ to the\n   Downstream Detailed Mapping TLV (Figure 3) in the echo reply.  The\n\
    \   transit node SHOULD add one FEC stack change sub-TLV of operation\n   type\
    \ PUSH, per new tunnel being originated at the transit node.\n   A transit node\
    \ that sends a Downstream FEC stack change sub-TLV in\n   the echo reply SHOULD\
    \ fill the address of the remote peer; which is\n   the peer of the current LSP\
    \ being traced.  If the transit node does\n   not know the address of the remote\
    \ peer, it MUST set the address type\n   to Unspecified.\n   The Label stack sub-TLV\
    \ MUST contain one additional label per FEC\n   being PUSHed.  The label MUST\
    \ be encoded as per Figure 5.  The label\n   value MUST be the value used to switch\
    \ the data traffic.  If the\n   tunnel is a transparent pipe to the node, i.e.\
    \ the data-plane trace\n   will not expire in the middle of the new tunnel, then\
    \ a FEC stack\n   change sub-TLV SHOULD NOT be added and the Label stack sub-TLV\
    \ SHOULD\n   NOT contain a label corresponding to the hidden tunnel.\n   If the\
    \ transit node wishes to hide the nature of the tunnel from the\n   ingress of\
    \ the echo request, then it MAY not want to send details\n   about the new tunnel\
    \ FEC to the ingress.  In such a case, the transit\n   node SHOULD use the Nil\
    \ FEC.  The echo reply would then contain a FEC\n   stack change sub-TLV with\
    \ operation type PUSH and a Nil FEC.  The\n   value of the label in the Nil FEC\
    \ MUST be set to zero.  The remote\n   peer address type MUST be set to Unspecified.\
    \  The transit node\n   SHOULD add one FEC stack change sub-TLV of operation type\
    \ PUSH, per\n   new tunnel being originated at the transit node.  The Label stack\n\
    \   sub-TLV MUST contain one additional label per FEC being PUSHed.  The\n   label\
    \ value MUST be the value used to switch the data traffic.\n"
- title: 4.1.2.  Transition between Tunnels
  contents:
  - "4.1.2.  Transition between Tunnels\n   A          B          C           D  \
    \        E         F\n   o -------- o -------- o --------- o -------- o -------\
    \ o\n     \\_____/    \\______/   \\______/    \\______/  \\_______/\n       LDP\
    \        LDP         BGP         RSVP      RSVP\n                          Figure\
    \ 7: Stitched LSPs\n   In the above figure, we have three separate LSP segments\
    \ stitched at\n   C and D.  Node C SHOULD include two FEC stack change sub-TLVs.\
    \  One\n   with a POP operation for the LDP FEC and one with the PUSH operation\n\
    \   for the BGP FEC.  Similarly, node D SHOULD include two FEC stack\n   change\
    \ sub-TLVs, one with a POP operation for the BGP FEC and one\n   with a PUSH operation\
    \ for the RSVP FEC.  Nodes C and D SHOULD set the\n   Return Code to \"Label switched\
    \ with FEC change\" (Section 6.3) to\n   indicate change in FEC being traced.\n\
    \   If node C wishes to perform FEC hiding, it SHOULD respond back with\n   two\
    \ FEC stack change sub-TLVs, one POP followed by one PUSH.  The POP\n   operation\
    \ MAY either exclude the FEC TLV (by setting the FEC TLV\n   length to 0) or set\
    \ the FEC TLV to contain the LDP FEC.  The PUSH\n   operation SHOULD have the\
    \ FEC TLV containing the Nil FEC.  The Return\n   Code SHOULD be set to \"Label\
    \ switched with FEC change\".\n   If node C performs FEC hiding and node D also\
    \ performs FEC hiding,\n   then node D MAY choose to not send any FEC stack change\
    \ sub-TLVs in\n   the echo reply since the number of labels has not changed (for\
    \ the\n   downstream of node D) and the FEC type also has not changed (Nil\n \
    \  FEC).  In such a case, node D MUST NOT set the Return Code to \"Label\n   switched\
    \ with FEC change\".  If node D performs FEC hiding, then node\n   F will respond\
    \ as IS_EGRESS for the Nil FEC.  The ingress (node A)\n   will know that IS_EGRESS\
    \ corresponds to the end-to-end LSP.\n   A          B          C           D \
    \          E           F\n   o -------- o -------- o --------- o --------- o ---------\
    \ o\n     \\_____/  |\\____________________/            |\\_______/\n       LDP\
    \    |\\       RSVP-A                    |    LDP\n              | \\_______________________________/|\n\
    \              |       RSVP-B                     |\n               \\________________________________/\n\
    \                               LDP\n                        Figure 8: Hierarchical\
    \ LSPs\n   In the above figure, we have an end-to-end LDP LSP between nodes A\n\
    \   and F.  The LDP LSP goes over RSVP LSP RSVP-B.  LSP RSVP-B itself\n   goes\
    \ over another RSVP LSP RSVP-A.  When node A initiates a\n   traceroute for the\
    \ end-to-end LDP LSP, then following sequence of FEC\n   stack change sub-TLVs\
    \ will be performed\n   Node B:\n   Respond with two FEC stack change sub-TLVs:\
    \ PUSH RSVP-B, PUSH RSVP-A.\n   Node D:\n   Respond with Return Code 3 when RSVP-A\
    \ is the top of FEC stack.  When\n   the echo request contains RSVP-B as top of\
    \ stack, respond with\n   Downstream information for node E and an appropriate\
    \ Return Code.\n   If node B is performing tunnel hiding, then:\n   Node B:\n\
    \   Respond with two FEC stack change sub-TLVs: PUSH Nil FEC, PUSH Nil\n   FEC.\n\
    \   Node D:\n   If D determines that the Nil FEC corresponds to RSVP-A, which\n\
    \   terminates at D, then it SHOULD respond with Return Code 3.  D can\n   also\
    \ respond with FEC stack change sub-TLV: POP (since D knows that\n   number of\
    \ labels towards next-hop is decreasing).  Both responses\n   would be valid.\n\
    \   A          B          C        D        E       F       G\n   o -------- o\
    \ -------- o ------ o ------ o ----- o ----- o\n        LDP       LDP        BGP\
    \   \\  RSVP    RSVP /  LDP\n                                    \\_____________/\n\
    \                                         LDP\n                   Figure 9: Stitched\
    \ Hierarchical LSPs\n   In the above case, node D will send three FEC stack change\
    \ sub-TLVs.\n   One POP (for the BGP FEC) followed by two PUSHes (one for LDP\
    \ and one\n   for RSVP).  Nodes C and D SHOULD set the Return Code to \"Label\n\
    \   switched with FEC change\" (Section 6.3) to indicate change in FEC\n   being\
    \ traced.\n"
- title: 4.1.3.  Modification to FEC Validation Procedure on Transit
  contents:
  - "4.1.3.  Modification to FEC Validation Procedure on Transit\n   Section 4.4 of\
    \ [RFC4379] specifies Target FEC stack validation\n   procedures.  This document\
    \ enhances the FEC validation procedures as\n   follows.  If the outermost FEC\
    \ of the target FEC stack is the Nil\n   FEC, then the node MUST skip the target\
    \ FEC validation completely.\n   This is to support FEC hiding, in which the outer\
    \ hidden FEC can be\n   the Nil FEC.\n"
- title: 4.2.  Modification to FEC Validation Procedure on Egress
  contents:
  - "4.2.  Modification to FEC Validation Procedure on Egress\n   Section 4.4 of [RFC4379]\
    \ specifies Target FEC stack validation\n   procedures.  This document enhances\
    \ the FEC validation procedures as\n   follows.  If the outermost FEC of the Target\
    \ FEC stack is the Nil\n   FEC, then the node MUST skip the target FEC validation\
    \ completely.\n   This is to support FEC hiding, in which the outer hidden FEC\
    \ can be\n   the Nil FEC.\n"
- title: 4.3.  Ingress Node Procedure
  contents:
  - "4.3.  Ingress Node Procedure\n   It is the responsibility of an ingress node\
    \ to understand tunnel\n   within tunnel semantics and LSP stitching semantics\
    \ when performing a\n   MPLS traceroute.  This section describes the ingress node\
    \ procedure\n   based on the kind of reply an ingress node receives from a transit\n\
    \   node.\n"
- title: 4.3.1.  Processing Downstream Detailed Mapping TLV
  contents:
  - "4.3.1.  Processing Downstream Detailed Mapping TLV\n   Downstream Detailed Mapping\
    \ TLV should be processed in the same way\n   as the Downstream Mapping TLV, defined\
    \ in Section 4.4 of [RFC4379].\n   This section describes the procedures for processing\
    \ the new elements\n   introduced in this document.\n"
- title: 4.3.1.1.  Stack Change Sub-TLV Not Present
  contents:
  - "4.3.1.1.  Stack Change Sub-TLV Not Present\n   This would be the default behavior\
    \ as described in [RFC4379].  The\n   ingress node MUST perform MPLS echo reply\
    \ processing as per the\n   procedures in [RFC4379].\n"
- title: 4.3.1.2.  Stack Change Sub-TLV(s) Present
  contents:
  - "4.3.1.2.  Stack Change Sub-TLV(s) Present\n   If one or more FEC stack change\
    \ sub-TLVs (Section 3.3.1.3) are\n   received in the MPLS echo reply, the ingress\
    \ node SHOULD process them\n   and perform some validation.\n   The FEC stack\
    \ changes are associated with a downstream neighbor and\n   along a particular\
    \ path of the LSP.  Consequently, the ingress will\n   need to maintain a FEC\
    \ stack per path being traced (in case of\n   multipath).  All changes to the\
    \ FEC stack resulting from the\n   processing of FEC stack change sub-TLV(s) should\
    \ be applied only for\n   the path along a given downstream neighbor.  The following\
    \ algorithm\n   should be followed for processing FEC stack change sub-TLVs.\n\
    \    push_seen = FALSE\n    fec_stack_depth = current-depth-of-fec-stack-being-traced\n\
    \    saved_fec_stack = current_fec_stack\n    while (sub-tlv = get_next_sub_tlv(downstream_detailed_map_tlv))\n\
    \        if (sub-tlv == NULL) break\n        if (sub-tlv.type == FEC-Stack-Change)\
    \ {\n            if (sub-tlv.operation == POP) {\n                if (push_seen)\
    \ {\n                    Drop the echo reply\n                    current_fec_stack\
    \ = saved_fec_stack\n                    return\n                }\n         \
    \       if (fec_stack_depth == 0) {\n                    Drop the echo reply\n\
    \                    current_fec_stack = saved_fec_stack\n                   \
    \ return\n                }\n                Pop FEC from FEC stack being traced\n\
    \                fec_stack_depth--;\n            }\n            if (sub-tlv.operation\
    \ == PUSH) {\n                push_seen = 1\n                Push FEC on FEC stack\
    \ being traced\n                fec_stack_depth++;\n            }\n         }\n\
    \     }\n     if (fec_stack_depth == 0) {\n         Drop the echo reply\n    \
    \     current_fec_stack = saved_fec_stack\n         return\n     }\n         Figure\
    \ 10: FEC Stack Change Sub-TLV Processing Guideline\n   The next MPLS echo request\
    \ along the same path should use the\n   modified FEC stack obtained after processing\
    \ the FEC stack change\n   sub-TLVs.  A non-Nil FEC guarantees that the next echo\
    \ request along\n   the same path will have the Downstream Detailed Mapping TLV\
    \ validated\n   for IP address, Interface address, and label stack mismatches.\n\
    \   If the top of the FEC stack is a Nil FEC and the MPLS echo reply does\n  \
    \ not contain any FEC stack change sub-TLVs, then it does not\n   necessarily\
    \ mean that the LSP has not started traversing a different\n   tunnel.  It could\
    \ be that the LSP associated with the Nil FEC\n   terminated at a transit node\
    \ and at the same time a new LSP started\n   at the same transit node.  The Nil\
    \ FEC would now be associated with\n   the new LSP (and the ingress has no way\
    \ of knowing this).  Thus, it\n   is not possible to build an accurate hierarchical\
    \ LSP topology if a\n   traceroute contains Nil FECs.\n"
- title: 4.3.2.  Modifications to Handling a Return Code 3 Reply.
  contents:
  - "4.3.2.  Modifications to Handling a Return Code 3 Reply.\n   The procedures above\
    \ allow the addition of new FECs to the original\n   FEC being traced.  Consequently,\
    \ a reply from a downstream node with\n   Return Code 3 (IS_EGRESS) may not necessarily\
    \ be for the FEC being\n   traced.  It could be for one of the new FECs that was\
    \ added.  On\n   receipt of an IS_EGRESS reply, the LSP ingress should check if\
    \ the\n   depth of Target FEC sent to the node that just responded, was the\n\
    \   same as the depth of the FEC that was being traced.  If it was not,\n   then\
    \ it should pop an entry from the Target FEC stack and resend the\n   request\
    \ with the same TTL (as previously sent).  The process of\n   popping a FEC is\
    \ to be repeated until either the LSP ingress receives\n   a non-IS_EGRESS reply\
    \ or until all the additional FECs added to the\n   FEC stack have already been\
    \ popped.  Using an IS_EGRESS reply, an\n   ingress can build a map of the hierarchical\
    \ LSP structure traversed\n   by a given FEC.\n"
- title: 4.3.3.  Handling of New Return Codes
  contents:
  - "4.3.3.  Handling of New Return Codes\n   When the MPLS echo reply Return Code\
    \ is \"Label switched with FEC\n   change\" (Section 3.2.2), the ingress node\
    \ SHOULD manipulate the FEC\n   stack as per the FEC stack change sub-TLVs contained\
    \ in the\n   downstream detailed mapping TLV.  A transit node can use this Return\n\
    \   Code for stitched LSPs and for hierarchical LSPs.  In case of ECMP or\n  \
    \ P2MP, there could be multiple paths and Downstream Detailed Mapping\n   TLVs\
    \ with different Return Codes (Section 3.2.1).  The ingress node\n   should build\
    \ the topology based on the Return Code per ECMP path/P2MP\n   branch.\n"
- title: 4.4.  Handling Deprecated Downstream Mapping TLV
  contents:
  - "4.4.  Handling Deprecated Downstream Mapping TLV\n   The Downstream Mapping TLV\
    \ has been deprecated.  Applications should\n   now use the Downstream Detailed\
    \ Mapping TLV.  The following\n   procedures SHOULD be used for backward compatibility\
    \ with routers\n   that do not support the Downstream Detailed Mapping TLV.\n\
    \   o  The Downstream Mapping TLV and the Downstream Detailed Mapping TLV\n  \
    \    MUST never be sent together in the same MPLS echo request or in\n      the\
    \ same MPLS echo reply.\n   o  If the echo request contains a Downstream Detailed\
    \ Mapping TLV and\n      the corresponding echo reply contains a Return Code 2\
    \ (\"One or\n      more of the TLVs was not understood\"), then the sender of\
    \ the echo\n      request MAY resend the echo request with the Downstream Mapping\n\
    \      TLV (instead of the Downstream Detailed Mapping TLV).  In cases\n     \
    \ where a detailed reply is needed, the sender can choose to ignore\n      the\
    \ router that does not support the Downstream Detailed Mapping\n      TLV.\n \
    \  o  If the echo request contains a Downstream Mapping TLV, then a\n      Downstream\
    \ Detailed Mapping TLV MUST NOT be sent in the echo\n      reply.  This is to\
    \ handle the case that the sender of the echo\n      request does not support\
    \ the new TLV.  The echo reply MAY contain\n      Downstream Mapping TLV(s).\n\
    \   o  If echo request forwarding is in use (such that the echo request\n    \
    \  is processed at an intermediate LSR and then forwarded on), then\n      the\
    \ intermediate router is responsible for making sure that the\n      TLVs being\
    \ used among the ingress, intermediate and destination\n      are consistent.\
    \  The intermediate router MUST NOT forward an echo\n      request or an echo\
    \ reply containing a Downstream Detailed Mapping\n      TLV if it itself does\
    \ not support that TLV.\n"
- title: 5.  Security Considerations
  contents:
  - "5.  Security Considerations\n   1.  If a network operator wants to prevent tracing\
    \ inside a tunnel,\n       one can use the Pipe Model [RFC3443], i.e., hide the\
    \ outer MPLS\n       tunnel by not propagating the MPLS TTL into the outer tunnel\
    \ (at\n       the start of the outer tunnel).  By doing this, MPLS traceroute\n\
    \       packets will not expire in the outer tunnel and the outer tunnel\n   \
    \    will not get traced.\n   2.  If one doesn't wish to expose the details of\
    \ the new outer LSP,\n       then the Nil FEC can be used to hide those details.\
    \  Using the\n       Nil FEC ensures that the trace progresses without false negatives\n\
    \       and all transit nodes (of the new outer tunnel) perform some\n       minimal\
    \ validations on the received MPLS echo requests.\n   Other security considerations,\
    \ as discussed in [RFC4379], are also\n   applicable to this document.\n"
- title: 6.  IANA Considerations
  contents:
  - '6.  IANA Considerations

    '
- title: 6.1.  New TLV
  contents:
  - "6.1.  New TLV\n   IANA has assigned a TLV type value to the following TLV from\
    \ the\n   \"Multiprotocol Label Switching Architecture (MPLS) Label Switched\n\
    \   Paths (LSPs) Ping Parameters\" registry, \"TLVs and sub-TLVs\" sub-\n   registry.\n\
    \   Downstream Detailed Mapping TLV (see Section 3.3): 20.\n"
- title: 6.2.  New Sub-TLV Types and Associated Registry
  contents:
  - "6.2.  New Sub-TLV Types and Associated Registry\n   IANA has registered the Sub-Type\
    \ field of Downstream Detailed Mapping\n   TLV.  The valid range for this is 0-65535.\
    \  Assignments in the range\n   0-16383 and 32768-49161 are made via Standards\
    \ Action as defined in\n   [RFC3692]; assignments in the range 16384-31743 and\
    \ 49162-64511 are\n   made via Specification Required [RFC4379]; values in the\
    \ range 31744-\n   32767 and 64512-65535 are for Vendor Private Use, and MUST\
    \ NOT be\n   allocated.  If a sub-TLV has a Type that falls in the range for\n\
    \   Vendor Private Use, the Length MUST be at least 4, and the first four\n  \
    \ octets MUST be that vendor's SMI Enterprise Code, in network octet\n   order.\
    \  The rest of the Value field is private to the vendor.\n   IANA has assigned\
    \ the following sub-TLV types (see Section 3.3.1):\n   Multipath data: 1\n   Label\
    \ stack: 2\n   FEC stack change: 3\n"
- title: 6.3.  New Return Codes
  contents:
  - "6.3.  New Return Codes\n   IANA has assigned new Return Code values from the\
    \ \"Multi-Protocol\n   Label Switching (MPLS) Label Switched Paths (LSPs) Ping\
    \ Parameters\"\n   registry, \"Return Codes\" sub-registry, as follows using a\
    \ Standards\n   Action value.\n       Value    Meaning\n       -----    -------\n\
    \       14       See DDM TLV for Return Code and Return Subcode\n       15   \
    \    Label switched with FEC change\n"
- title: 7.  Acknowledgements
  contents:
  - "7.  Acknowledgements\n   The authors would like to thank Yakov Rekhter and Adrian\
    \ Farrel for\n   their suggestions on the document.\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March\
    \ 1997.\n   [RFC3692]  Narten, T., \"Assigning Experimental and Testing Numbers\n\
    \              Considered Useful\", BCP 82, RFC 3692, January 2004.\n   [RFC4379]\
    \  Kompella, K. and G. Swallow, \"Detecting Multi-Protocol\n              Label\
    \ Switched (MPLS) Data Plane Failures\", RFC 4379,\n              February 2006.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [RFC3443]  Agarwal, P. and B. Akyol, \"Time\
    \ To Live (TTL) Processing\n              in Multi-Protocol Label Switching (MPLS)\
    \ Networks\",\n              RFC 3443, January 2003.\n   [RFC4461]  Yasukawa,\
    \ S., \"Signaling Requirements for Point-to-\n              Multipoint Traffic-Engineered\
    \ MPLS Label Switched Paths\n              (LSPs)\", RFC 4461, April 2006.\n \
    \  [RFC5150]  Ayyangar, A., Kompella, K., Vasseur, JP., and A. Farrel,\n     \
    \         \"Label Switched Path Stitching with Generalized\n              Multiprotocol\
    \ Label Switching Traffic Engineering (GMPLS\n              TE)\", RFC 5150, February\
    \ 2008.\n   [RFC5331]  Aggarwal, R., Rekhter, Y., and E. Rosen, \"MPLS Upstream\n\
    \              Label Assignment and Context-Specific Label Space\",\n        \
    \      RFC 5331, August 2008.\n   [RFC5462]  Andersson, L. and R. Asati, \"Multiprotocol\
    \ Label Switching\n              (MPLS) Label Stack Entry: \"EXP\" Field Renamed\
    \ to \"Traffic\n              Class\" Field\", RFC 5462, February 2009.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Nitin Bahadur\n   Juniper Networks, Inc.\n   1194 N. Mathilda\
    \ Avenue\n   Sunnyvale, CA  94089\n   US\n   Phone: +1 408 745 2000\n   EMail:\
    \ nitinb@juniper.net\n   URI:   www.juniper.net\n   Kireeti Kompella\n   Juniper\
    \ Networks, Inc.\n   1194 N. Mathilda Avenue\n   Sunnyvale, CA  94089\n   US\n\
    \   Phone: +1 408 745 2000\n   EMail: kireeti@juniper.net\n   URI:   www.juniper.net\n\
    \   George Swallow\n   Cisco Systems\n   1414 Massachusetts Ave\n   Boxborough,\
    \ MA  01719\n   US\n   EMail: swallow@cisco.com\n   URI:   www.cisco.com\n"
