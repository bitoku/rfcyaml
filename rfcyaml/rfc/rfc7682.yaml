- title: __initial_text__
  contents:
  - "         Considerations for Internet Routing Registries (IRRs)\n            \
    \        and Routing Policy Configuration\n"
- title: Abstract
  contents:
  - "Abstract\n   The purpose of this document is to catalog issues that influenced\
    \ the\n   efficacy of Internet Routing Registries (IRRs) for inter-domain\n  \
    \ routing policy specification and application in the global routing\n   system\
    \ over the past two decades.  Additionally, it provides a\n   discussion regarding\
    \ which of these issues are still problematic in\n   practice, and which are simply\
    \ artifacts that are no longer\n   applicable but continue to stifle inter-provider\
    \ policy-based\n   filtering adoption and IRR utility to this day.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc7682.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2015 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .\
    \ . . . . .   3\n   2.  Background  . . . . . . . . . . . . . . . . . . . . .\
    \ . . . .   3\n   3.  Historical Artifacts Influencing IRR Efficacy . . . . .\
    \ . . .   3\n   4.  Accuracy and Integrity of Data Contained within the IRR .\
    \ . .   4\n     4.1.  Lack of Resource Certification  . . . . . . . . . . . .\
    \ .   4\n     4.2.  Incentives to Maintain Data within the IRR  . . . . . . .\
    \   5\n     4.3.  Inability for Third Parties to Remove (Stale) Information\n\
    \           from the IRRs . . . . . . . . . . . . . . . . . . . . . .   6\n  \
    \   4.4.  Lack of Authoritative IRR for Resources . . . . . . . . .   7\n    \
    \ 4.5.  Client-Side Considerations  . . . . . . . . . . . . . . .   8\n     4.6.\
    \  Conclusions with Respect to Data in the IRR . . . . . . .   8\n   5.  Operation\
    \ of the IRR Infrastructure . . . . . . . . . . . . .   8\n     5.1.  Replication\
    \ of Resources among IRRs . . . . . . . . . . .   8\n     5.2.  Updating Routing\
    \ Policies from Updated IRR Resources  . .  10\n   6.  Historical BGP Protocol\
    \ Limitations . . . . . . . . . . . . .  11\n   7.  Historical Limitations of\
    \ Routers . . . . . . . . . . . . . .  13\n     7.1.  Incremental Updates to Policy\
    \ on Routers  . . . . . . . .  13\n     7.2.  Storage Requirements for Policy\
    \ on Routers  . . . . . . .  13\n     7.3.  Updating Configuration on Routers\
    \ . . . . . . . . . . . .  14\n   8.  Summary . . . . . . . . . . . . . . . .\
    \ . . . . . . . . . . .  15\n   9.  Security Considerations . . . . . . . . .\
    \ . . . . . . . . . .  15\n   10. Informative References  . . . . . . . . . .\
    \ . . . . . . . . .  16\n   Acknowledgements  . . . . . . . . . . . . . . . .\
    \ . . . . . . . .  18\n   Authors' Addresses  . . . . . . . . . . . . . . . .\
    \ . . . . . . .  18\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The purpose of this document is to catalog issues influencing\
    \ the\n   efficacy of Internet Routing Registries (IRRs) for inter-domain\n  \
    \ routing policy specification and application in the global routing\n   system\
    \ over the past two decades.  Additionally, it provides a\n   discussion regarding\
    \ which of these issues still pose problems in\n   practice, and which are no\
    \ longer obstacles, but whose perceived\n   drawbacks continue to stifle inter-provider\
    \ policy-based filtering\n   support and IRR utility to this day.\n"
- title: 2.  Background
  contents:
  - "2.  Background\n   IRRs can be used to express a multitude of Internet number\
    \ bindings\n   and policy objectives, i.e., to include bindings between 1) an\
    \ origin\n   AS and a given prefix, 2) a given AS and its AS and community import\n\
    \   and export policies, as well as 3) a given AS and the AS macros (as-\n   sets\
    \ in Routing Policy Specification Language (RPSL)) that convey the\n   set of\
    \ ASes that it intends to include in some common group.\n   As quoted from Section\
    \ 7 of \"Routing in a Multi-Provider Internet\"\n   [RFC1787]:\n      While ensuring\
    \ Internet-wide coordination may be more and more\n      difficult, as the Internet\
    \ continues to grow, stability and\n      consistency of the Internet-wide routing\
    \ could significantly\n      benefit if the information about routing requirements\
    \ of various\n      organizations could be shared across organizational boundaries.\n\
    \      Such information could be used in a wide variety of situations\n      ranging\
    \ from troubleshooting to detecting and eliminating\n      conflicting routing\
    \ requirements.  The scale of the Internet\n      implies that the information\
    \ should be distributed.  Work is\n      currently underway to establish depositories\
    \ of this information\n      (Routing Registries), as well as to develop tools\
    \ that analyze, as\n      well as utilize this information.\n"
- title: 3.  Historical Artifacts Influencing IRR Efficacy
  contents:
  - "3.  Historical Artifacts Influencing IRR Efficacy\n   The term IRR is often used,\
    \ incorrectly, as a broad catch-all term to\n   categorize issues related to the\
    \ accuracy of data in the IRR, RPSL,\n   and the operational deployment of policy\
    \ (derived from RPSL contained\n   within the IRR) to routers.  It is important\
    \ to classify these issues\n   into distinct categories so that the reader can\
    \ understand which\n   categories of issues are historical artifacts that are\
    \ no longer\n   applicable and which categories of issues still exist and might\
    \ be\n   addressed by the IETF.\n   The following sections will separate out challenges\
    \ related to the\n   IRR into the following categories: first, accuracy and integrity\
    \ of\n   data contained within the IRR; second, operation of the IRR\n   infrastructure,\
    \ i.e., synchronization of resources from one IRR to\n   other IRRs; and finally,\
    \ this document covers the methods related to\n   extraction of policy from the\
    \ IRR and the input, plus activation of\n   that policy within routers.\n"
- title: 4.  Accuracy and Integrity of Data Contained within the IRR
  contents:
  - "4.  Accuracy and Integrity of Data Contained within the IRR\n   The following\
    \ section will examine issues related to accuracy and\n   integrity of data contained\
    \ within the IRR.\n"
- title: 4.1.  Lack of Resource Certification
  contents:
  - "4.1.  Lack of Resource Certification\n   Internet number resources include IPv4\
    \ addresses, IPv6 addresses,\n   Autonomous System Numbers (ASNs), and more. \
    \ While these resources\n   are generally allocated by hierarchical authorities,\
    \ a general\n   mechanism for formally verifying (such as through cryptographic\n\
    \   mechanisms) when parties have been allocated resources remains an\n   open\
    \ challenge.  We generally call such a system a Resource\n   Certification System,\
    \ and we note that some candidate examples of how\n   such a general system might\
    \ be implemented and deployed exist --\n   [TASRS], [RC_HotNetsX], and [RFC6480].\n\
    \   One of the largest weaknesses often cited with the IRR system is that\n  \
    \ the data contained within the IRRs is out of date or lacks integrity.\n   This\
    \ is largely attributable to the fact that existing IRR mechanisms\n   do not\
    \ provide ways for a relying party to (cryptographically) verify\n   the validity\
    \ of an IRR object.  That is, there has never existed a\n   resource certification\
    \ infrastructure that enables a resource holder\n   to authorize a particular\
    \ autonomous system to originate network-\n   layer reachability advertisements\
    \ for a given IPv4 or IPv6 prefix.\n   It should be noted that this is not a weakness\
    \ of the underlying RPSL\n   [RFC2622], but rather, was largely the result of\
    \ no clear demand by\n   the operator community for Internet Number Resource Registries\
    \ to\n   provide sufficient resource certification infrastructure that would\n\
    \   enable a resource holder to develop a cryptographic binding between,\n   for\
    \ example, a given AS number and an IP prefix.\n   Another noteworthy (but slightly\
    \ different) deficiency in the IRR\n   system is the absence of a tangible tie\
    \ between the resource and the\n   resource holder.  That is, generally there\
    \ is no assurance of the\n   validity of objects at their creation time (except\
    \ for a subset of,\n   for example, the RIPE IRR where RPSS [RFC2725] attests\
    \ for RIPE\n   address holders and RIPE ASN holders).  If a resource holder's\n\
    \   authorization cannot be certified, then consumers cannot verify\n   attestations\
    \ made.  In effect, without resource certification,\n   consumers are basically\
    \ only certifying the assertions that the\n   creator/maintainer of the resource\
    \ object has made (not if that\n   assertion is valid).\n   The RIPE community\
    \ addressed this last issue by putting in a\n   foundation policy [RIPE638], which\
    \ requires a contractual link\n   between the RIPE NCC and the end user in direct\
    \ assignment + ASN\n   assignment cases, which weren't previously covered by Local\
    \ Internet\n   Registry (LIR) contracts for address allocations.  There were a\n\
    \   couple of intentions with this policy:\n   1.  There was an encumbrance placed\
    \ in the policy for the LIR to\n       charge the end user for provider-independent\
    \ (PI) resources.\n       This action created a collection mechanism for PI address\n\
    \       resources (IPv4/IPv6 space, ASNs).\n   2.  It guaranteed that all RIPE\
    \ NCC allocated/assigned space would be\n       subject to a contractual link,\
    \ and that this contractual chain\n       might end up actually meaning something\
    \ when it came to the issue\n       of who made what claim about what number resource.\n\
    \   3.  It tied into the RIPE NCC's object grandfathering policy that\n      \
    \ ties the registration details of the end user to the object\n       registered\
    \ in the IRR database.\n   While this policy specifically addressed PI/portable\
    \ space holders,\n   other regions address this issue, too.  Further, a tangible\
    \ tie\n   between the resource and the resource holder is indeed a prerequisite\n\
    \   for resource certification, though it does not directly address the\n   IRR\
    \ deficiencies.\n   One of the central observations of this policy was that without\
    \ a\n   chain-of-ownership functionality in IRR databases, the discussion of\n\
    \   certifying their contents becomes moot.\n"
- title: 4.2.  Incentives to Maintain Data within the IRR
  contents:
  - "4.2.  Incentives to Maintain Data within the IRR\n   A second problem with data\
    \ contained in the IRRs is that the\n   incentives for resource holders to maintain\
    \ both accurate and up-to-\n   date information in one or more IRRs (including\
    \ deletion of out-of-\n   date or stale data from the IRRs) can diminish rapidly\
    \ when changing\n   their peering policies (such as switching transit providers).\n\
    \   Specifically, there is a very strong incentive for an ISP's customers\n  \
    \ to register new routing information in the IRR, because some ISPs\n   enforce\
    \ a strict policy that they will only build or update a\n   customer's prefix-lists\
    \ applied to the customer's inbound eBGP\n   sessions based off information found\
    \ within the IRRs.  Unfortunately,\n   there is little incentive for an ISP's\
    \ customers to remove out-of-\n   date information from an IRR, most likely attributed\
    \ to the fact that\n   some ISPs do not use, or enforce use of, data contained\
    \ within the\n   IRRs to automatically build incoming policy applied to the customer's\n\
    \   eBGP sessions.  For example, if a customer is terminating service\n   from\
    \ one ISP that requires use of IRR data to build incoming policy\n   and, at the\
    \ same time, enabling service with another ISP that does\n   not require use of\
    \ IRR data, then that customer will likely let the\n   data in the IRR become\
    \ stale or inaccurate.\n   Further, policy filters are almost exclusively generated\
    \ based on the\n   origin AS information contained within IRR route objects and\
    \ used by\n   providers to filter downstream transit customers.  Since providers\n\
    \   only look for route objects containing the origin AS of their\n   downstream\
    \ customer(s), stale route objects with historical and,\n   possibly, incorrect\
    \ origin AS information are ignored.  Assuming that\n   the downstream customer(s)\
    \ do not continue to announce those routes\n   with historical, or incorrect,\
    \ origin AS information in BGP to the\n   upstream provider, there is no significant\
    \ incentive to remove them\n   as they do not impact offline policy filter generation\
    \ nor routing on\n   the Internet.  On the other hand, the main incentive that\
    \ causes the\n   Service Provider to work with downstream customer(s) is when\
    \ the\n   resultant filter list becomes so large that it is difficult for it to\n\
    \   be stored on PE routers; however, this is more practically an\n   operational\
    \ issue with very old, legacy PE routers, not more modern\n   PE router hardware\
    \ with more robust control-plane engines.\n"
- title: 4.3.  Inability for Third Parties to Remove (Stale) Information from the
  contents:
  - "4.3.  Inability for Third Parties to Remove (Stale) Information from the\n  \
    \    IRRs\n   A third challenge with data contained in IRRs is that it is not\n\
    \   possible for IRR operators, and ISPs who use them, to proactively\n   remove\
    \ (perceived) out-of-date or \"stale\" resources in an IRR, on\n   behalf of resource\
    \ holders who may not be diligent in maintaining\n   this information themselves.\
    \  The reason is that, according to the\n   RPSL [RFC2622], only the resource\
    \ holder ('mntner') specified in a\n   'mnt-by' value field of an RPSL resource\
    \ is authorized to add,\n   modify, or delete their own resources within the IRR.\
    \  To address\n   this issue, the 'auth-override' mechanism [RFC2725] was later\n\
    \   developed that would have enabled a third party to update and/or\n   remove\
    \ \"stale\" resources from the IRR.  While it is unclear if this\n   was ever\
    \ implemented or deployed, it does provide language semantics\n   needed to overcome\
    \ this obstacle.\n   Nevertheless, with such a mechanism in place, there is still\
    \ a risk\n   that the original RPSL resource holder would not receive\n   notifications\
    \ (via the 'notify' attribute in various RPSL resources)\n   about the pending\
    \ or actual removal of a resource from the IRR in\n   time to halt that action\
    \ if those resources were still being used.\n   In this case, if the removal of\
    \ a resource was not suspended, it\n   could potentially result in an unintentional\
    \ denial of service for\n   the RPSL resource holder when, for example, ISPs automatically\n\
    \   generated and deployed a new policy based on the newly removed\n   resources\
    \ from the IRR, thus dropping any reachability announcement\n   for the removed\
    \ resource in eBGP.\n"
- title: 4.4.  Lack of Authoritative IRR for Resources
  contents:
  - "4.4.  Lack of Authoritative IRR for Resources\n   According to [RFC2622], within\
    \ an RPSL resource \"the source attribute\n   specifies the registry where the\
    \ object is registered.\"  Note that\n   this source attribute only exists within\
    \ the RPSL resource itself.\n   Unfortunately, given a specific resource (e.g.,\
    \ a specific IPv4 or\n   IPv6 prefix), most of the time it is impossible to determine\
    \ a priori\n   the authoritative IRR where to query and retrieve an authoritative\n\
    \   copy of that resource.\n   This makes it difficult for consumers of data from\
    \ the IRR to\n   automatically know the authoritative IRR of a resource holder\
    \ that\n   will contain the most up-to-date set of resources.  This is typically\n\
    \   not a problem for an ISP that has a direct (customer) relationship\n   with\
    \ the resource holder, because the ISP will ask the resource\n   holder which\
    \ (authoritative) IRR to pull their resources from on, for\n   example, a \"Customer\
    \ BGP Order Form\".  However, third parties that do\n   not have a direct relationship\
    \ with the resource holder have a\n   difficult time attempting to infer the authoritative\
    \ IRR, preferred\n   by the resource holder, that likely contains the most up-to-date\
    \ set\n   of resources.  As a result, it would be helpful for third parties if\n\
    \   there were a robust referral mechanism so that a query to one IRR\n   would\
    \ be automatically redirected toward the authoritative IRR for\n   the most up-to-date\
    \ and authoritative copy of that particular\n   resource.  This problem is worked\
    \ around by individual IRR operators\n   storing a local copy of other IRRs' resources,\
    \ through periodic\n   mirroring, which allows the individual IRR to respond to\
    \ a client's\n   query with all registered instances of a particular IRR resource\
    \ that\n   exist in both the local IRR and all other IRRs.  Of course, the\n \
    \  problem with this approach is that an individual IRR operator is\n   under\
    \ no obligation to mirror all other IRRs and, in practice, some\n   IRRs do not\
    \ mirror the resources from all other IRRs.  This could\n   lead to the false\
    \ impression that a particular resource is not\n   registered or maintained at\
    \ a particular IRR.  Furthermore, the\n   authentication process of accepting\
    \ updates by any given IRR may or\n   may not be robust enough to overcome impersonation\
    \ attacks.  As a\n   result, there is no rigorous assurance that a mirrored RPSL\
    \ statement\n   was actually made by the authorized resource holder.\n"
- title: 4.5.  Client-Side Considerations
  contents:
  - "4.5.  Client-Side Considerations\n   There are no provisions in the IRR mode\
    \ for ensuring the\n   confidentiality component for clients issuing queries.\
    \  The overall\n   Confidentiality, Integrity, and Availability (CIA) model of\
    \ the\n   system does lack this component, because the interface to IRRs is\n\
    \   over an unencrypted TCP connection to port 43.  This leaves the\n   transaction\
    \ open to inspection such that an adversary could be able\n   to inspect the query\
    \ and the response.  However, the IRR system is\n   intended to be composed of\
    \ public policy information, and protection\n   of queries was not part of the\
    \ protection calculus when it was\n   designed, though the use of Transport Layer\
    \ Security (TLS) [RFC5246]\n   would address protections of query information.\n"
- title: 4.6.  Conclusions with Respect to Data in the IRR
  contents:
  - "4.6.  Conclusions with Respect to Data in the IRR\n   All of the aforementioned\
    \ issues related to integrity and accuracy of\n   data within the IRR stem from\
    \ a distinct lack of resource\n   certification for resources contained within\
    \ the IRR.  Only now is an\n   experimental testbed that reports to provide this\
    \ function (under the\n   auspices of the Resource PKI [RFC6480]) being formally\
    \ discussed;\n   this could also aid in certification of resources within the\
    \ IRR.  It\n   should be noted that the RPKI is only currently able to support\n\
    \   signing of Route Origin Authorization (ROA) resources that are the\n   equivalent\
    \ of 'route' resources in the IRR.  There has been some\n   sentiment that the\
    \ RPKI currently is not scoped to address the same\n   set of issues and the nuanced\
    \ policy applications that providers\n   leverage in RPSL.  It is unclear if,\
    \ in the future, the RPKI will be\n   extended to support additional resources\
    \ that already exist in the\n   IRR, e.g., aut-num, as-net, route-set, etc.  Finally,\
    \ a seemingly\n   equivalent resource certification specification for all resources\
    \ in\n   the IRR has already been developed [RFC2725]; however, it is unclear\n\
    \   how widely it was ever implemented or deployed.\n"
- title: 5.  Operation of the IRR Infrastructure
  contents:
  - '5.  Operation of the IRR Infrastructure

    '
- title: 5.1.  Replication of Resources among IRRs
  contents:
  - "5.1.  Replication of Resources among IRRs\n   Currently, several IRRs [IRR_LIST]\
    \  use a Near-Real-Time Mirroring\n   (NRTM) protocol to replicate each other's\
    \ contents.  However, this\n   protocol has several weaknesses.  Namely, there\
    \ is no way to validate\n   that the copy of mirrored source is correct, and synchronization\n\
    \   issues have often resulted.  Furthermore, the NRTM protocol does not\n   employ\
    \ any security mechanisms.  The NRTM protocol relies on a pull\n   mechanism and\
    \ is generally configured with a poll interval of 5 to 10\n   minutes.  There\
    \ is currently no mechanism to notify an IRR when an\n   update has occurred in\
    \ a mirrored IRR so that an immediate update can\n   be made.\n   Some providers\
    \ employ a process of mirroring an instance of an IRR\n   that involves downloading\
    \ a flat text file copy of the IRR that is\n   made available via FTP [RFC959].\
    \  These FTP files are exported at\n   regular intervals of typically anywhere\
    \ between 2 and 24 hours by the\n   IRRs.  When a provider fetches those text\
    \ files, it will process them\n   to identify any updates and reflect changes\
    \ within its own internally\n   maintained database.  The use of an internally\
    \ maintained database is\n   out of scope for this document but is generally used\
    \ to assist with\n   more straightforward access to or modification of data by\
    \ the IRR\n   operator.  Providers typically employ a 24-hour cycle to pull updated\n\
    \   resources from IRRs.  Thus, depending on when resource holders\n   submitted\
    \ their changes to an IRR, it may take up to 24 hours for\n   those changes to\
    \ be reflected in their policy configurations.  In\n   practice, it appears that\
    \ the RPKI will also employ a 24-hour cycle\n   whereby changes in resources are\
    \ pushed out to other RPKI caches\n   [RPKI_SIZING].\n   IRRs originated from\
    \ Section 7 of [RFC1787], specifically: \"The scale\n   of the Internet implies\
    \ that the [routing requirements] information\n   should be distributed.\"  Regardless,\
    \ the practical effect of an\n   organization maintaining its own local cache\
    \ of IRR resources is an\n   increase in resource resiliency (due to multiple\
    \ copies of the same\n   resource being geographically distributed), a reduction\
    \ in query time\n   for resources, and, likely, a reduction in inter-domain bandwidth\n\
    \   consumption and associated costs.  This is particularly beneficial\n   when,\
    \ for example, an ISP is evaluating resources in an IRR just to\n   determine\
    \ if there are any modifications to those resources that will\n   ultimately be\
    \ reflected in a new routing policy that will get\n   propagated to (edge) routers\
    \ in the ISP's network.  Cache locality\n   results in reduced inter-domain bandwidth\
    \ utilization for each round\n   trip.\n   On the other hand, it is unclear from\
    \ where the current provider\n   replication interval of 24 hours originated or\
    \ even whether it still\n   provides enough freshness in the face of available\
    \ resources,\n   particularly in today's environment where a typical IRR system\n\
    \   consists of a (multi-core) multi-GHz CPU connected to a network via a\n  \
    \ physical connection of 100 Mbps or, more likely, higher bandwidth.\n   In addition,\
    \ due to demand for bandwidth, circuit sizes used by ISPs\n   have increased to\
    \ 10 Gbps, thus eliminating bandwidth as a\n   significant factor in the transfer\
    \ of data between IRRs.\n   Furthermore, it should be noted that Merit's Internet\
    \ Routing\n   Registry Daemon (IRRd) [MERIT-IRRD] uses 10 minutes as its default\n\
    \   for \"irr_mirror_interval\".\n   Lastly, it should be noted that \"Routing\
    \ Policy System Replication\"\n   [RFC2769] attempted to offer a more methodical\
    \ solution for\n   distributed replication of resources between IRRs.  It is unclear\
    \ why\n   that RFC failed to gain traction, but it is suspected that this was\n\
    \   due to its reliance on \"Routing Policy System Security\" [RFC2725],\n   which\
    \ addressed \"the need to assure integrity of the data by\n   providing an authentication\
    \ and authorization model.\"  Indeed,\n   [RFC2725] attempts to add an otherwise\
    \ absent security model to the\n   integrity of policy statements made in RPSL.\
    \  Without formal\n   protections, it is possible for anyone to author a policy\
    \ statement\n   about an arbitrary set of resources, and publish it (as discussed\n\
    \   above in Section 4.1.\n"
- title: 5.2.  Updating Routing Policies from Updated IRR Resources
  contents:
  - "5.2.  Updating Routing Policies from Updated IRR Resources\n   Ultimately, the\
    \ length of time it takes to replicate resources among\n   IRRs is, generally,\
    \ the dominant factor in reflecting changes to\n   resources in policy that is\
    \ eventually applied within the control\n   plane of routers.  The length of time\
    \ to update network elements will\n   vary considerably depending on the size\
    \ of the ISP and the number of\n   IRR resources that were updated during any\
    \ given interval.  However,\n   there are a variety of common techniques, that\
    \ are outside the scope\n   of this document, that allow for this automated process\
    \ to be\n   optimized to considerably reduce the length of time it takes to\n\
    \   update policies in the ISP's network.\n   An ISP will begin the process of\
    \ updating the policy in its network,\n   first by fetching IRR resources associated\
    \ with, for example, a\n   customer ASN attached to its network.  Next, the ISP\
    \ constructs a new\n   policy associated to that customer and then evaluates if\
    \ that new\n   policy is different from existing policy associated with that same\n\
    \   customer.  If there are no changes between the new and existing\n   policy\
    \ associated with that customer, then the ISP does not make any\n   changes to\
    \ the policy in their routers specific to that customer.  On\n   the other hand,\
    \ if the new policy does reflect changes from the\n   existing policy for that\
    \ customer, then the ISP begins a process of\n   uploading the new policy to the\
    \ routers attached to that customer.\n   The process of constructing a new policy\
    \ involves use of a set of\n   programs, e.g., IRRtoolset, that performs recursive\
    \ expansion of an\n   RPSL aut-num resource that comprises an arbitrary combination\
    \ of\n   other RPSL aut-num, as-set, route, and route-set resources, according\n\
    \   to procedures defined by RPSL.  The end result of this process is,\n   traditionally,\
    \ a vendor-dependent configuration snippet that defines\n   the routing policy\
    \ for that customer.  This routing policy may\n   consist of the set of IPv4 or\
    \ IPv6 prefixes, associated prefix\n   lengths, and AS_PATHs that are supposed\
    \ to be accepted from a\n   customer's eBGP session.  However, if indicated in\
    \ the appropriate\n   RPSL resource, the policy may also set certain BGP Attributes,\
    \ such\n   as MED, AS_PATH prepend value, LOCAL_PREF, etc., at either the\n  \
    \ incoming eBGP session from the customer or on static routes that are\n   originated\
    \ by the resource holder.\n   An ISP's customers may not adequately plan for pre-planned\n\
    \   maintenance, or, more likely, they may need to rapidly begin\n   announcing\
    \ a new IP prefix as a result of, for example, an emergency\n   turn-up of the\
    \ ISP customer's new downstream customer.\n   Unfortunately, the routine, automated\
    \ process employed by the ISP\n   means that it may not begin updating its routing\
    \ policy on its\n   network for up to 24 hours, because the ISP or the IRRs the\
    \ ISP uses\n   might only mirror changes to IRR resources once every 24 hours.\
    \  The\n   time interval for the routine/automated process is not responsive to\n\
    \   the needs of directly paying customer(s) who need rapid changes in\n   their\
    \ policy in rare situations.  In these situations, when a\n   customer has an\
    \ urgent need for updates to take effect immediately,\n   they will call the Network\
    \ Operations Center (NOC) of their ISP and\n   request that the ISP immediately\
    \ fetch new IRR objects and push those\n   changes out to its network.  This is\
    \ often accomplished in as little\n   as 5 minutes from the time a customer contacts\
    \ their ISP's NOC to the\n   time a new filtering policy is pushed out to the\
    \ Provider Edge (PE)\n   routers that are attached to that customer's Attachment\
    \ Circuits\n   (ACs).  It is conceivable that some ISPs automate this using out-of-\n\
    \   band mechanisms as well, although the authors are unaware of any\n   existing\
    \ mechanisms that support this.\n   Ultimately, the aforementioned latency with\
    \ respect to \"emergency\n   changes\" in IRR resources that need to be reflected\
    \ in near-real-time\n   in the network is compounded if the IRR resources were\
    \ being used by\n   third-party ISPs to perform filtering on their peering circuits,\n\
    \   where typically no such policies are employed today for this very\n   reason.\
    \  It is likely that the length of time that it takes IRRs to\n   mirror changes\
    \ will have to be dramatically reduced.  There will need\n   to be a corresponding\
    \ reduction in the time required by ISPs to\n   evaluate whether those changes\
    \ should be recompiled and reflected in\n   router policies that would then get\
    \ pushed out to Autonomous System\n   Border Routers (ASBRs) connected to peering\
    \ circuits on their\n   network.\n"
- title: 6.  Historical BGP Protocol Limitations
  contents:
  - "6.  Historical BGP Protocol Limitations\n   As mentioned previously, after a\
    \ resource holder made changes to\n   their resources in an IRR, those changes\
    \ would automatically be\n   distributed to other IRRs, ISPs would then learn\
    \ of those changes,\n   generate new BGP policies, and then apply those to the\
    \ appropriate\n   subset of routers in their ASes.  However, in the past, one\n\
    \   additional step is necessary in order to have any of those new BGP\n   policies\
    \ take effect in the control plane and to allow/deny the\n   updated resource\
    \ from a customer to their ISP and from their\n   immediately upstream ISP to\
    \ the ISP's peers.  It was necessary (often\n   manually) to actually induce BGP\
    \ on each router to apply the new\n   policy within the control plane, thus learning\
    \ of a newly announced/\n   changed IP prefix (or, dropping a deleted IP prefix).\
    \  Unfortunately,\n   most of these methods not only were highly impactful operationally,\n\
    \   but they also affected traffic forwarding to IP destinations that\n   were\
    \ unrelated to the most recent changes to the BGP policy.\n   Historically, a\
    \ customer would have to (re-)announce the new IP\n   prefix toward their ISP,\
    \ but only after the ISP had put the new BGP\n   policies into effect.  Alternatively,\
    \ the ISP would have to reset the\n   entire eBGP session from Provider Edge to\
    \ Customer Edge either by: a)\n   bouncing the entire interface toward the customer\
    \ (e.g., shutdown /\n   no shutdown) or b) clearing the eBGP session toward the\
    \ customer\n   (e.g., clear ip bgp neighbor <IP address of CE router>, where <IP\n\
    \   address of CE router> represents a specific IP address).  The latter\n   two\
    \ cases were, of course, the most highly impactful impact and thus\n   could generally\
    \ only be performed off-hours during a maintenance\n   window.\n   Once the new\
    \ IP prefix has been successfully announced by the\n   customer and permitted\
    \ by the newly updated policy at the ISP's PEs\n   (attached to that customer),\
    \ it would be propagated to that ISP's\n   ASBRs, attached to peers, at the perimeter\
    \ of the ISP network.\n   Unfortunately, if those peers had either not yet learned\
    \ of the\n   changes to resources in the IRR or pushed out new BGP policies (and,\n\
    \   reset their BGP sessions immediately afterward) incorporating those\n   changes,\
    \ then the newly announced route would also get dropped at the\n   ingress ASBRs\
    \ of the peers.\n   Ultimately, either of the two scenarios above further lengthens\
    \ the\n   effective time it would take for changes in IRR resources to take\n\
    \   effect within BGP in the network.  Fortunately, BGP has been enhanced\n  \
    \ over the last several years in order that changes within BGP policy\n   will\
    \ take effect without requiring a service-impacting reset of BGP\n   sessions.\
    \  Specifically, BGP soft-reconfiguration (Section 1 of\n   [RFC2918]) and, later,\
    \ Route Refresh Capability for BGP-4 [RFC2918]\n   were developed so that ISPs,\
    \ or their customers, could induce BGP to\n   apply a new policy while leaving\
    \ both the existing eBGP session\n   active as well as (unaffected) routes active\
    \ in both the Loc-RIB and,\n   more importantly, FIB of the router.  Thus, using\
    \ either of these\n   mechanisms, an ISP or its peers currently will deploy a\
    \ newly\n   generated BGP policy, based on changes to resources within the IRR,\n\
    \   and immediately trigger a notification -- which does not impact\n   service\
    \ -- to the BGP process to have those changes take effect in\n   their control\
    \ plane, either allowing a new IP prefix to be announced\n   or an old IP prefix\
    \ to be dropped.  This dramatically reduces the\n   length of time from when changes\
    \ are propagated throughout the IRRs\n   to when those changes are actually operational\
    \ within BGP policy in\n   an ISP's network.\n"
- title: 7.  Historical Limitations of Routers
  contents:
  - '7.  Historical Limitations of Routers

    '
- title: 7.1.  Incremental Updates to Policy on Routers
  contents:
  - "7.1.  Incremental Updates to Policy on Routers\n   Routers in the mid 1990s rarely\
    \ supported incrementally updatable\n   prefix filters for BGP; therefore, if\
    \ new information was received\n   from a policy or internal configuration database\
    \ that would impact a\n   policy applied to a given eBGP peer, the entire prefix\
    \ list or access\n   list would need to be deleted and rewritten, compiled, and\
    \ installed.\n   This was very tedious and commonly led to leaked routes during\
    \ the\n   time when the policy was being rewritten, compiled, and applied on a\n\
    \   router.  Furthermore, application of a new policy would not\n   automatically\
    \ result in new ingress or egress reachability\n   advertisements from that new\
    \ policy, because routers at the time\n   would require a reset of the eBGP sessions\
    \ for routing information to\n   be evaluated by the new policy.  Of course, resetting\
    \ of an eBGP\n   session had implications on traffic forwarding during the time\
    \ the\n   eBGP session was reestablished and new routing information was\n   learned.\n\
    \   Routers now support the ability to perform incremental, and in situ,\n   updates\
    \ to filter lists consisting of IP prefixes and/or AS_PATHs\n   that are used\
    \ within an ingress or egress BGP policy.  In addition,\n   routers also can apply\
    \ those incremental updates to policy, with no\n   traffic disruption, using BGP\
    \ soft-reconfiguration or BGP Route\n   Refresh, as discussed in the previous\
    \ section.\n"
- title: 7.2.  Storage Requirements for Policy on Routers
  contents:
  - "7.2.  Storage Requirements for Policy on Routers\n   Historically, routers had\
    \ very limited storage capacity and would\n   have difficulty in storing an extremely\
    \ large BGP policy on-board.\n   This was typically the result of router hardware\
    \ vendors using an\n   extremely limited amount of NVRAM for storage of router\n\
    \   configurations.\n   Another challenge with historical router hardware was\
    \ that writing to\n   NVRAM was extremely slow.  For example, when the router\
    \ configuration\n   had changed as a result of updating a BGP policy that needed\
    \ to\n   accommodate changes in IRR resources, this would result in extremely\n\
    \   long times to write out these configuration changes.  Sometimes, due\n   to\
    \ bugs, this would result in loss of protocol keep-alives.  This\n   would cause\
    \ an impact to routing or forwarding of packets through the\n   platform.\n  \
    \ The above limitations have largely been resolved with equipment from\n   the\
    \ last few years that ships with increasing amounts of non-volatile\n   storage\
    \ such as PCMCIA or USB flash cards, hard disk drives, or\n   solid-state disk\
    \ drives.\n   However, as capacities and technologies have evolved on modern\n\
    \   routing hardware, so have some of the scaling requirements of the\n   data.\
    \  In some large networks, configuration growth has begun to\n   \"pose challenges\"\
    \ [IEPG89_NTT].  While the enhancements of hardware\n   have overcome some historical\
    \ limitations, evidence suggests that\n   further optimizations in configuration\
    \ processing may be needed in\n   some cases.  Some of the more recent operational\
    \ issues include\n   scheduler slips and protracted commit times.  This suggests\
    \ that even\n   though many historical hurdles have been overcome, there are still\n\
    \   motivations to optimize and modernize IRR technologies.\n"
- title: 7.3.  Updating Configuration on Routers
  contents:
  - "7.3.  Updating Configuration on Routers\n   Historically, there has not been\
    \ a standardized modeling language for\n   network configuration or an associated\
    \ method to update router\n   configurations.  When an ISP detected a change in\
    \ resources within\n   the IRR, it would fashion a vendor-dependent BGP policy\
    \ and upload\n   that to the router usually via the following method.\n   First,\
    \ an updated BGP policy configuration snippet is generated via\n   processes running\
    \ on an out-of-band server.  Next, the operator uses\n   either telnet or SSH\
    \ [RFC4253] to log in to the CLI of a target\n   router and issue vendor-dependent\
    \ CLI commands that will trigger the\n   target router to fetch the new configuration\
    \ snippet via TFTP, FTP,\n   or Secure Copy (SCP) stored on the out-of-band server.\
    \  The target\n   router will then perform syntax checking on that configuration\n\
    \   snippet and, if that passes, merge that configuration snippet into\n   the\
    \ running configuration of the router's control software.  At this\n   point,\
    \ the new BGP policy configuration snippet is active within the\n   control plane\
    \ of the router.  One last step remains -- the operator\n   will issue a CLI command\
    \ to induce the router to perform a \"soft\n   reset\", via BGP soft-reconfiguration\
    \ or BGP Route Refresh, of the\n   associated BGP session in order to trigger\
    \ the router to apply the\n   new policy to routes learned from that BGP session\
    \ without disrupting\n   traffic forwarding.\n   More recently, operators have\
    \ the ability to use NETCONF [RFC6241] /\n   SSH (or, TLS) from an out-of-band\
    \ server to push a BGP configuration\n   snippet from an out-of-band server toward\
    \ a target router that has\n   that capability.  However, this activity is still\
    \ dependent on\n   generating, via the out-of-band server, a vendor-dependent\
    \ XML\n   configuration snippet that would get uploaded via SSH or TLS to the\n\
    \   target router.\n   In the future, the ability to upload new Route Origin Authorization\n\
    \   (ROA) information may be provided from the RPKI to routers via the\n   RPKI-RTR\
    \ [RFC6810] protocol.  However, this will not allow operators\n   the ability\
    \ to upload other configuration information such as BGP\n   policy information\
    \ (AS_PATHs, BGP communities, etc.) that might be\n   associated with that ROA\
    \ information, as they can from IRR-generated\n   BGP policies.\n"
- title: 8.  Summary
  contents:
  - "8.  Summary\n   As discussed above, many of the problems that have traditionally\n\
    \   stifled IRR deployment have, themselves, become historical.  However,\n  \
    \ there are still real operational considerations that limit IRR usage\n   from\
    \ realizing its full effectiveness.  The potential for IRRs to\n   express inter-domain\
    \ routing policy, and to allow relying parties to\n   learn policy, has always\
    \ positioned them as a strong candidate to aid\n   the security postures of operators.\
    \  However, while routing density\n   and complexity have grown, so have some\
    \ of the challenges facing IRRs\n   (even today).  Because of this state increase,\
    \ the potential to model\n   all policies for all ASes in all routers may still\
    \ remain illusive.\n   In addition, without an operationally deployed resource\
    \ certification\n   framework that can tie policies to resource holders, there\
    \ is a\n   fundamental limitation that still exists.\n"
- title: 9.  Security Considerations
  contents:
  - "9.  Security Considerations\n   One of the central concerns with IRRs is the\
    \ ability of an IRR\n   operator to remotely influence the routing operations\
    \ of an external\n   consumer.  Specifically, if the processing of IRR contents\
    \ can become\n   burdensome, or if the policy statements can be crafted to introduce\n\
    \   routing problems or anomalies, then operators may want to be\n   circumspect\
    \ about ingesting contents from external parties.  A\n   resource certification\
    \ framework should be used to address the\n   authorization of IRR statements\
    \ to make attestations and assertions\n   (as mentioned in Section 4.1, and discussed\
    \ in Section 5.1).\n   Additionally, the external and systemic dependencies introduced\
    \ by\n   IRRs and other such systems employed to inform routing policy, and\n\
    \   how tightly or loosely coupled those systems are to the global\n   routing\
    \ system and operational networks, introduce additional vectors\n   that operators\
    \ and system architects should consider when evaluating\n   attack surface and\
    \ service dependencies associated with those\n   elements.  These attributes and\
    \ concerns are certainly not unique to\n   IRRs, and operators should evaluate\
    \ the implications of external\n   systems and the varying degrees of coupling\
    \ and operational buffers\n   that might be installed in their environments.\n"
- title: 10.  Informative References
  contents:
  - "10.  Informative References\n   [IEPG89_NTT]\n              Mauch, J., \"NTT\
    \ BGP Configuration Size and Scope\", IEPG\n              meeting before IETF\
    \ 89, March 2014,\n              <http://iepg.org/2014-03-02-ietf89/\n       \
    \       ietf89_iepg_jmauch.pdf>.\n   [IRR_LIST] Merit Network, Inc., \"List of\
    \ Routing Registries\",\n              <http://www.irr.net/docs/list.html>.\n\
    \   [MERIT-IRRD]\n              Merit, \"IRRd - Internet Routing Registry Daemon\"\
    ,\n              <http://www.irrd.net>.\n   [RC_HotNetsX]\n              Osterweil,\
    \ E., Amante, S., Massey, D., and D. McPherson,\n              \"The Great IPv4\
    \ Land Grab: Resource Certification for the\n              IPv4 Grey Market\"\
    , DOI 10.1145/2070562.2070574,\n              <http://dl.acm.org/citation.cfm?id=2070574>.\n\
    \   [RFC959]   Postel, J. and J. Reynolds, \"File Transfer Protocol\",\n     \
    \         STD 9, RFC 959, DOI 10.17487/RFC0959, October 1985,\n              <http://www.rfc-editor.org/info/rfc959>.\n\
    \   [RFC1787]  Rekhter, Y., \"Routing in a Multi-provider Internet\",\n      \
    \        RFC 1787, DOI 10.17487/RFC1787, April 1995,\n              <http://www.rfc-editor.org/info/rfc1787>.\n\
    \   [RFC2622]  Alaettinoglu, C., Villamizar, C., Gerich, E., Kessens, D.,\n  \
    \            Meyer, D., Bates, T., Karrenberg, D., and M. Terpstra,\n        \
    \      \"Routing Policy Specification Language (RPSL)\", RFC 2622,\n         \
    \     DOI 10.17487/RFC2622, June 1999,\n              <http://www.rfc-editor.org/info/rfc2622>.\n\
    \   [RFC2725]  Villamizar, C., Alaettinoglu, C., Meyer, D., and S.\n         \
    \     Murphy, \"Routing Policy System Security\", RFC 2725,\n              DOI\
    \ 10.17487/RFC2725, December 1999,\n              <http://www.rfc-editor.org/info/rfc2725>.\n\
    \   [RFC2769]  Villamizar, C., Alaettinoglu, C., Govindan, R., and D.\n      \
    \        Meyer, \"Routing Policy System Replication\", RFC 2769,\n           \
    \   DOI 10.17487/RFC2769, February 2000,\n              <http://www.rfc-editor.org/info/rfc2769>.\n\
    \   [RFC2918]  Chen, E., \"Route Refresh Capability for BGP-4\", RFC 2918,\n \
    \             DOI 10.17487/RFC2918, September 2000,\n              <http://www.rfc-editor.org/info/rfc2918>.\n\
    \   [RFC4253]  Ylonen, T. and C. Lonvick, Ed., \"The Secure Shell (SSH)\n    \
    \          Transport Layer Protocol\", RFC 4253, DOI 10.17487/RFC4253,\n     \
    \         January 2006, <http://www.rfc-editor.org/info/rfc4253>.\n   [RFC5246]\
    \  Dierks, T. and E. Rescorla, \"The Transport Layer Security\n              (TLS)\
    \ Protocol Version 1.2\", RFC 5246,\n              DOI 10.17487/RFC5246, August\
    \ 2008,\n              <http://www.rfc-editor.org/info/rfc5246>.\n   [RFC6241]\
    \  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,\n              and\
    \ A. Bierman, Ed., \"Network Configuration Protocol\n              (NETCONF)\"\
    , RFC 6241, DOI 10.17487/RFC6241, June 2011,\n              <http://www.rfc-editor.org/info/rfc6241>.\n\
    \   [RFC6480]  Lepinski, M. and S. Kent, \"An Infrastructure to Support\n    \
    \          Secure Internet Routing\", RFC 6480, DOI 10.17487/RFC6480,\n      \
    \        February 2012, <http://www.rfc-editor.org/info/rfc6480>.\n   [RFC6810]\
    \  Bush, R. and R. Austein, \"The Resource Public Key\n              Infrastructure\
    \ (RPKI) to Router Protocol\", RFC 6810,\n              DOI 10.17487/RFC6810,\
    \ January 2013,\n              <http://www.rfc-editor.org/info/rfc6810>.\n   [RIPE638]\
    \  RIPE NCC, \"Autonomous System (AS) Number Assignment\n              Policies\"\
    , March 2015,\n              <https://www.ripe.net/publications/docs/ripe-638>.\n\
    \   [RPKI_SIZING]\n              Osterweil, E., Manderson, T., White, R., and\
    \ D. McPherson,\n              \"Sizing Estimates for a Fully Deployed RPKI\"\
    , Verisign\n              Labs Technical Report 1120005 version 2, December 2012,\n\
    \              <http://techreports.verisignlabs.com/\n              tr-lookup.cgi?trid=1120005&rev=2>.\n\
    \   [TASRS]    Osterweil, E., Amante, S., and D. McPherson, \"TASRS:\n       \
    \       Towards a Secure Routing System Through Internet Number\n            \
    \  Resource Certification\", Verisign Labs Technical\n              Report 1130009,\
    \ February 2013,\n              <http://techreports.verisignlabs.com/\n      \
    \        tr-lookup.cgi?trid=1130009&rev=1>.\n"
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   The authors would like to acknowledge and thank Chris Morrow,\
    \ Jeff\n   Haas, Wes George, and John Curran for their help and constructive\n\
    \   feedback.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Danny McPherson\n   Verisign, Inc.\n   Email: dmcpherson@verisign.com\n\
    \   Shane Amante\n   Apple, Inc.\n   Email: amante@apple.com\n   Eric Osterweil\n\
    \   Verisign, Inc.\n   Email: eosterweil@verisign.com\n   Larry J. Blunk\n   Merit\
    \ Network, Inc.\n   Email: ljb@merit.edu\n   Dave Mitchell\n   Singularity Networks\n\
    \   Email: dave@singularity.cx\n"
