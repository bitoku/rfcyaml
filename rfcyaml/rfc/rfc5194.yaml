- title: __initial_text__
  contents:
  - "              Framework for Real-Time Text over IP Using\n                 the\
    \ Session Initiation Protocol (SIP)\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document lists the essential requirements for real-time Text-\n\
    \   over-IP (ToIP) and defines a framework for implementation of all\n   required\
    \ functions based on the Session Initiation Protocol (SIP) and\n   the Real-Time\
    \ Transport Protocol (RTP).  This includes interworking\n   between Text-over-IP\
    \ and existing text telephony on the Public\n   Switched Telephone Network (PSTN)\
    \ and other networks.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Scope ...........................................................4\n  \
    \ 3. Terminology .....................................................4\n   4.\
    \ Definitions .....................................................4\n   5. Requirements\
    \ ....................................................6\n      5.1. General Requirements\
    \ for ToIP ..............................6\n      5.2. Detailed Requirements for\
    \ ToIP .............................8\n           5.2.1. Session Setup and Control\
    \ Requirements ..............9\n           5.2.2. Transport Requirements .............................10\n\
    \           5.2.3. Transcoding Service Requirements ...................10\n  \
    \         5.2.4. Presentation and User Control Requirements .........11\n    \
    \       5.2.5. Interworking Requirements ..........................13\n      \
    \            5.2.5.1. PSTN Interworking Requirements ............13\n        \
    \          5.2.5.2. Cellular Interworking Requirements ........14\n          \
    \        5.2.5.3. Instant Messaging Interworking\n                           Requirements\
    \ ..............................14\n   6. Implementation Framework .......................................15\n\
    \      6.1. General Implementation Framework ..........................15\n  \
    \    6.2. Detailed Implementation Framework .........................15\n    \
    \       6.2.1. Session Control and Setup ..........................15\n      \
    \            6.2.1.1. Pre-Session Setup .........................15\n        \
    \          6.2.1.2. Session Negotiations ......................16\n          \
    \ 6.2.2. Transport ..........................................17\n           6.2.3.\
    \ Transcoding Services ...............................18\n           6.2.4. Presentation\
    \ and User Control Functions ............18\n                  6.2.4.1. Progress\
    \ and Status Information ...........18\n                  6.2.4.2. Alerting ..................................18\n\
    \                  6.2.4.3. Text Presentation .........................19\n  \
    \                6.2.4.4. File Storage ..............................19\n    \
    \       6.2.5. Interworking Functions .............................19\n      \
    \            6.2.5.1. PSTN Interworking .........................20\n        \
    \          6.2.5.2. Mobile Interworking .......................22\n          \
    \                 6.2.5.2.1. Cellular \"No-gain\" .............22\n          \
    \                 6.2.5.2.2. Cellular Text Telephone\n                       \
    \               Modem (CTM) ....................22\n                         \
    \  6.2.5.2.3. Cellular \"Baudot mode\" .........22\n                         \
    \  6.2.5.2.4. Mobile Data Channel Mode .......23\n                           6.2.5.2.5.\
    \ Mobile ToIP ....................23\n                  6.2.5.3. Instant Messaging\
    \ Interworking ............23\n                  6.2.5.4. Multi-Functional Combination\
    \ Gateways .....24\n                  6.2.5.5. Character Set Transcoding .................25\n\
    \   7. Further Recommendations for Implementers and Service\n      Providers ......................................................25\n\
    \      7.1. Access to Emergency Services ..............................25\n  \
    \    7.2. Home Gateways or Analog Terminal Adapters .................25\n    \
    \  7.3. User Mobility .............................................26\n      7.4.\
    \ Firewalls and NATs ........................................26\n      7.5. Quality\
    \ of Service ........................................26\n   8. Security Considerations\
    \ ........................................26\n   9. Contributors ...................................................27\n\
    \   10. References ....................................................27\n  \
    \    10.1. Normative References .....................................27\n    \
    \  10.2. Informative References ...................................29\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   For many years, real-time text has been in use as a medium\
    \ for\n   conversational, interactive dialogue between users in a similar way\n\
    \   to how voice telephony is used.  Such interactive text is different\n   from\
    \ messaging and semi-interactive solutions like Instant Messaging\n   in that\
    \ it offers an equivalent conversational experience to users\n   who cannot, or\
    \ do not wish to, use voice.  It therefore meets a\n   different set of requirements\
    \ from other text-based solutions already\n   available on IP networks.\n   Traditionally,\
    \ deaf, hard-of-hearing, and speech-impaired people are\n   amongst the most prolific\
    \ users of real-time, conversational, text\n   but, because of its interactivity,\
    \ it is becoming popular amongst\n   mainstream users as well.  Real-time text\
    \ conversation can be\n   combined with other conversational media like video\
    \ or voice.\n   This document describes how existing IETF protocols can be used\
    \ to\n   implement a Text-over-IP solution (ToIP).  Therefore, this document\n\
    \   describes how to use a set of existing components and protocols and\n   provides\
    \ the requirements and rules for that resulting structure,\n   which is why it\
    \ is called a \"framework\", fitting commonly accepted\n   dictionary definitions\
    \ of that term.\n   This ToIP framework is specifically designed to be compatible\
    \ with\n   Voice-over-IP (VoIP), Video-over-IP, and Multimedia-over-IP (MoIP)\n\
    \   environments.  This ToIP framework also builds upon, and is\n   compatible\
    \ with, the high-level user requirements of deaf, hard-of-\n   hearing and speech-impaired\
    \ users as described in RFC3351 [22].  It\n   also meets real-time text requirements\
    \ of mainstream users.\n   ToIP also offers an IP equivalent of analog text telephony\
    \ services\n   as used by deaf, hard-of-hearing, speech-impaired, and mainstream\n\
    \   users.\n   The Session Initiation Protocol (SIP) [2] is the protocol of choice\n\
    \   for control of Multimedia communications and Voice-over-IP (VoIP) in\n   particular.\
    \  It offers all the necessary control and signalling\n   required for the ToIP\
    \ framework.\n   The Real-Time Transport Protocol (RTP) [3] is the protocol of\
    \ choice\n   for real-time data transmission, and its use for real-time text\n\
    \   payloads is described in RFC 4103 [4].\n   This document defines a framework\
    \ for ToIP to be used either by\n   itself or as part of integrated, multi-media\
    \ services, including\n   Total Conversation [5].\n"
- title: 2.  Scope
  contents:
  - "2.  Scope\n   This document defines a framework for the implementation of real-time\n\
    \   ToIP, either stand-alone or as a part of multimedia services,\n   including\
    \ Total Conversation [5].  It provides the:\n   a. requirements for real-time\
    \ text;\n   b. requirements for ToIP interworking;\n   c. description of ToIP\
    \ implementation using SIP and RTP;\n   d. description of ToIP interworking with\
    \ other text services.\n"
- title: 3.  Terminology
  contents:
  - "3.  Terminology\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\"\
    , \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT RECOMMENDED\"\
    , \"MAY\", and\n   \"OPTIONAL\" in this document are to be interpreted as described\
    \ in RFC\n   2119 [6] and indicate requirement levels for compliant\n   implementations.\n"
- title: 4.  Definitions
  contents:
  - "4.  Definitions\n   Audio bridging: a function of an audio media bridge server,\
    \ gateway,\n   or relay service that sends to each destination the combination\
    \ of\n   audio from all participants in a conference, excluding the\n   participant(s)\
    \ at that destination.  At the RTP level, this is an\n   instance of the mixer\
    \ function as defined in RFC 3550 [3].\n   Cellular: a telecommunication network\
    \ that has wireless access and\n   can support voice and data services over very\
    \ large geographical\n   areas.  Also called Mobile.\n   Full duplex: media is\
    \ sent independently in both directions.\n   Half duplex: media can only be sent\
    \ in one direction at a time, or if\n   an attempt to send information in both\
    \ directions is made, errors may\n   be introduced into the presented media.\n\
    \   Interactive text: another term for real-time text, as defined below.\n   Real-time\
    \ text: a term for real-time transmission of text in a\n   character-by-character\
    \ fashion for use in conversational services,\n   often as a text equivalent to\
    \ voice-based conversational services.\n   Conversational text is defined in the\
    \ ITU-T Framework for multimedia\n   services, Recommendation F.700 [21].\n  \
    \ Text gateway: a function that transcodes between different forms of\n   text\
    \ transport methods, e.g., between ToIP in IP networks and Baudot\n   or ITU-T\
    \ V.21 text telephony in the PSTN.\n   Textphone: also \"text telephone\".  A\
    \ terminal device that allows\n   end-to-end real-time text communication using\
    \ analog transmission.  A\n   variety of PSTN textphone protocols exists world-wide.\
    \  A textphone\n   can often be combined with a voice telephone, or include voice\n\
    \   communication functions for simultaneous or alternating use of text\n   and\
    \ voice in a call.\n   Text bridging: a function of the text media bridge server,\
    \ gateway\n   (including transcoding gateways), or relay service analogous to\
    \ that\n   of audio bridging as defined above, except that text is the medium\
    \ of\n   conversation.\n   Text relay service: a third-party or intermediary that\
    \ enables\n   communications between deaf, hard-of-hearing, and speech-impaired\n\
    \   people and voice telephone users by translating between voice and\n   real-time\
    \ text in a call.\n   Text telephony: analog textphone service.\n   Total Conversation:\
    \ a multimedia service offering real-time\n   conversation in video, real-time\
    \ text and voice according to\n   interoperable standards.  All media streams\
    \ flow in real time.  (See\n   ITU-T F.703, \"Multimedia conversational services\"\
    \ [5].)\n   Transcoding service: a service provided by a third-party User Agent\n\
    \   that transcodes one stream into another.  Transcoding can be done by\n   human\
    \ operators, in an automated manner, or by a combination of both\n   methods.\
    \  Within this document, the term particularly applies to\n   conversion between\
    \ different types of media.  A text relay service is\n   an example of a transcoding\
    \ service that converts between real-time\n   text and audio.\n   TTY: originally,\
    \ an abbreviation for \"teletype\".  Often used in North\n   America as an alternative\
    \ designation for a text telephone or\n   textphone.  Also called TDD, Telecommunication\
    \ Device for the Deaf.\n   Video relay service: a service that enables communications\
    \ between\n   deaf and hard-of-hearing people and hearing persons with voice\n\
    \   telephones by translating between sign language and spoken language\n   in\
    \ a call.\n   Acronyms:\n     2G      Second generation cellular (mobile)\n  \
    \   2.5G    Enhanced second generation cellular (mobile)\n     3G      Third generation\
    \ cellular (mobile)\n     ATA     Analog Telephone Adaptor\n     CDMA    Code\
    \ Division Multiple Access\n     CLI     Calling Line Identification\n     CTM\
    \     Cellular Text Telephone Modem\n     ENUM    E.164 number storage in DNS\
    \ (see RFC3761)\n     GSM     Global System for Mobile Communications\n     ISDN\
    \    Integrated Services Digital Network\n     ITU-T   International Telecommunications\n\
    \             Union-Telecommunications Standardisation Sector\n     NAT     Network\
    \ Address Translation\n     PSTN    Public Switched Telephone Network\n     RTP\
    \     Real-Time Transport Protocol\n     SDP     Session Description Protocol\n\
    \     SIP     Session Initiation Protocol\n     SRTP    Secure Real Time Transport\
    \ Protocol\n     TDD     Telecommunication Device for the Deaf\n     TDMA    Time\
    \ Division Multiple Access\n     TTY     Analog textphone (Teletypewriter)\n \
    \    ToIP    Real-time Text over Internet Protocol\n     URI     Uniform Resource\
    \ Identifier\n     UTF-8   UCS/Unicode Transformation Format-8\n     VCO/HCO Voice\
    \ Carry Over/Hearing Carry Over\n     VoIP    Voice over Internet Protocol\n"
- title: 5.  Requirements
  contents:
  - "5.  Requirements\n   The framework described in Section 6 defines a real-time\
    \ text-based\n   conversational service that is the text equivalent of voice-based\n\
    \   telephony.  This section describes the requirements that the\n   framework\
    \ is designed to meet and the functionality it should offer.\n"
- title: 5.1.  General Requirements for ToIP
  contents:
  - "5.1.  General Requirements for ToIP\n   Any framework for ToIP must be derived\
    \ from the requirements of RFC\n   3351 [22].  A basic requirement is that it\
    \ must provide a\n   standardized way for offering real-time text-based conversational\n\
    \   services that can be used as an equivalent to voice telephony by\n   deaf,\
    \ hard-of-hearing, speech-impaired, and mainstream users.\n   It is important\
    \ to understand that real-time text conversations are\n   significantly different\
    \ from other text-based communications like\n   email or Instant Messaging.  Real-time\
    \ text conversations deliver an\n   equivalent mode to voice conversations by\
    \ providing transmission of\n   text character by character as it is entered,\
    \ so that the\n   conversation can be followed closely and that immediate interaction\n\
    \   takes place.\n   Store-and-forward systems like email or messaging on mobile\
    \ networks,\n   or non-streaming systems like instant messaging, are unable to\n\
    \   provide that functionality.  In particular, they do not allow for\n   smooth\
    \ communication through a Text Relay Service.\n   In order to make ToIP the text\
    \ equivalent of voice services, ToIP\n   needs to offer equivalent features in\
    \ terms of conversationality to\n   those provided by voice.  To achieve that,\
    \ ToIP needs to:\n   a. offer real-time transport and presentation of the conversation;\n\
    \   b. provide simultaneous transmission in both directions;\n   c. support both\
    \ point-to-point and multipoint communication;\n   d. allow other media, like\
    \ audio and video, to be used in conjunction\n      with ToIP;\n   e. ensure that\
    \ the real-time text service is always available.\n   Real-time text is a useful\
    \ subset of Total Conversation as defined in\n   ITU-T F.703 [5].  Total Conversation\
    \ allows participants to use\n   multiple modes of communication during the conversation,\
    \ either at\n   the same time or by switching between modes, e.g., between real-time\n\
    \   text and audio.\n   Deaf, hard-of-hearing, and mainstream users may invoke\
    \ ToIP services\n   for many different reasons:\n   - because they are in a noisy\
    \ environment, e.g., in a machine room of\n     a factory where listening is difficult;\n\
    \   - because they are busy with another call and want to participate in\n   \
    \  two calls at the same time;\n   - for implementing text and/or speech recording\
    \ services (e.g., text\n     documentation/audio recording) for legal purposes,\
    \ for clarity, or\n     for flexibility;\n   - to overcome language barriers through\
    \ speech translation and/or\n     transcoding services;\n   - because of hearing\
    \ loss, deafness, or tinnitus as a result of the\n     aging process or for any\
    \ other reason, creating a need to replace\n     or complement voice with real-time\
    \ text in conversational sessions.\n   In many of the above examples, real-time\
    \ text may accompany speech.\n   The text could be displayed side by side, or\
    \ in a manner similar to\n   subtitling in broadcasting environments, or in any\
    \ other suitable\n   manner.  This could occur with users who are hard of hearing\
    \ and also\n   for mixed media calls with both hearing and deaf people participating\n\
    \   in the call.\n   A ToIP user may wish to call another ToIP user, join a conference\n\
    \   session involving several users, or initiate or join a multimedia\n   session,\
    \ such as a Total Conversation session.\n   A common scenario for multipoint real-time\
    \ text is conference calling\n   with many participants.  Implementers could,\
    \ for example, use\n   different colours to render different participants' text,\
    \ or could\n   create separate windows or rendering areas for each participant.\n"
- title: 5.2.  Detailed Requirements for ToIP
  contents:
  - "5.2.  Detailed Requirements for ToIP\n   The following sections list individual\
    \ requirements for ToIP.  Each\n   requirement has been given a unique identifier\
    \ (R1, R2, etc.).\n   Section 6 (Implementation Framework) describes how to implement\
    \ ToIP\n   based on these requirements by using existing protocols and\n   techniques.\n\
    \   The requirements are organized under the following headings:\n   - session\
    \ setup and session control;\n   - transport;\n   - use of transcoding services;\n\
    \   - presentation and user control;\n   - interworking.\n"
- title: 5.2.1.  Session Setup and Control Requirements
  contents:
  - "5.2.1.  Session Setup and Control Requirements\n   Conversations could be started\
    \ using a mode other than real-time\n   text.  Simultaneous or alternating voice\
    \ and real-time text is used\n   by a large number of people who can send voice\
    \ but must receive text\n   (due to a hearing impairment), or who can hear but\
    \ must send text\n   (due to a speech impairment).\n   R1: It SHOULD be possible\
    \ to start conversations in any mode (real-\n   time text, voice, video) or combination\
    \ of modes.\n   R2: It MUST be possible for the users to switch to real-time text,\
    \ or\n   add real-time text as an additional modality, during the\n   conversation.\n\
    \   R3: Systems supporting ToIP MUST allow users to select any of the\n   supported\
    \ conversation modes at any time, including in mid-\n   conversation.\n   R4:\
    \ Systems SHOULD allow the user to specify a preferred mode of\n   communication\
    \ in each direction, with the ability to fall back to\n   alternatives that the\
    \ user has indicated are acceptable.\n   R5: If the user requests simultaneous\
    \ use of real-time text and\n   audio, and this is not possible because of constraints\
    \ in the\n   network, the system SHOULD try to establish text-only communication\n\
    \   if that is what the user has specified as his/her preference.\n   R6: If the\
    \ user has expressed a preference for real-time text,\n   establishment of a connection\
    \ including real-time text MUST have\n   priority over other outcomes of the session\
    \ setup.\n   R7: It MUST be possible to use real-time text in conferences both\
    \ as\n   a medium of discussion between individual participants (for example,\n\
    \   for sidebar discussions in real-time text while listening to the main\n  \
    \ conference audio) and for central support of the conference with\n   real-time\
    \ text interpretation of speech.\n   R8: Session setup and negotiation of modalities\
    \ MUST allow users to\n   specify the language of the real-time text to be used.\
    \  (It is\n   RECOMMENDED that similar functionality be provided for the video\
    \ part\n   of the conversation, i.e., to specify the sign language being used).\n\
    \   R9: Where certain session services are available for the audio media\n   part\
    \ of a session, these functions MUST also be supported for the\n   real-time text\
    \ media part of the same session.  For example, call\n   transfer must act on\
    \ all media in the session.\n"
- title: 5.2.2.  Transport Requirements
  contents:
  - "5.2.2.  Transport Requirements\n   ToIP will often be used to access a relay\
    \ service [24], allowing\n   real-time text users to communicate with voice users.\
    \  With relay\n   services, as well as in direct user-to-user conversation, it\
    \ is\n   crucial that text characters are sent as soon as possible after they\n\
    \   are entered.  While buffering may be done to improve efficiency, the\n   delays\
    \ SHOULD be kept minimal.  In particular, buffering of whole\n   lines of text\
    \ will not meet character delay requirements.\n   R10: Characters must be transmitted\
    \ soon after entry of each\n   character so that the maximum delay requirement\
    \ can be met.  An end-\n   to-end delay time of one second is regarded as good,\
    \ while users note\n   and appreciate shorter delays, down to 300ms.  A delay\
    \ of up to two\n   seconds is possible to use.\n   R11: Real-time text transmission\
    \ from a terminal SHALL be performed\n   character by character as entered, or\
    \ in small groups of characters,\n   so that no character is delayed from entry\
    \ to transmission by more\n   than 300 milliseconds.\n   R12: It MUST be possible\
    \ to transmit characters at a rate sufficient\n   to support fast human typing\
    \ as well as speech-to-text methods of\n   generating real-time text.  A rate\
    \ of 30 characters per second is\n   regarded as sufficient.\n   R13: A ToIP service\
    \ MUST be able to deal with international character\n   sets.\n   R14: Where it\
    \ is possible, loss or corruption of real-time text\n   during transport SHOULD\
    \ be detected and the user should be informed.\n   R15: Transport of real-time\
    \ text SHOULD be as robust as possible, so\n   as to minimize loss of characters.\n\
    \   R16: It SHOULD be possible to send and receive real-time text\n   simultaneously.\n"
- title: 5.2.3.  Transcoding Service Requirements
  contents:
  - "5.2.3.  Transcoding Service Requirements\n   If the User Agents of different\
    \ participants indicate that there is\n   an incompatibility between their capabilities\
    \ to support certain\n   media types, e.g., one User Agent only offering T.140\
    \ over IP, as\n   described in RFC 4103 [4], and the other one only supporting\
    \ audio,\n   the user might want to invoke a transcoding service.\n   Some users\
    \ may indicate their preferred modality to be audio while\n   others may indicate\
    \ real-time text.  In this case, transcoding\n   services might be needed for\
    \ text-to-speech (TTS) and speech-to-text\n   (STT).  Other examples of possible\
    \ scenarios for including a relay\n   service in the conversation are: text bridging\
    \ after conversion from\n   speech, audio bridging after conversion from real-time\
    \ text, etc.\n   A number of requirements, motivations, and implementation guidelines\n\
    \   for relay service invocation can be found in RFC 3351 [22].\n   R17: It MUST\
    \ be possible for users to invoke a transcoding service\n   where such service\
    \ is available.\n   R18: It MUST be possible for users to indicate their preferred\n\
    \   modality (e.g., ToIP).\n   R19: It MUST be possible to negotiate the requirements\
    \ for\n   transcoding services in real time in the process of setting up a\n \
    \  call.\n   R20: It MUST be possible to negotiate the requirements for\n   transcoding\
    \ services in mid-call, for the immediate addition of those\n   services to the\
    \ call.\n   R21: Communication between the end participants SHOULD continue after\n\
    \   the addition or removal of a text relay service, and the effect of\n   the\
    \ change should be limited in the users' perception to the direct\n   effect of\
    \ having or not having the transcoding service in the\n   connection.\n   R22:\
    \ When setting up a session, it MUST be possible for a user to\n   specify the\
    \ type of relay service requested (e.g., speech to text or\n   text to speech).\
    \  The specification of a type of relay SHOULD include\n   a language specifier.\n\
    \   R23: It SHOULD be possible to route the session to a preferred relay\n   service\
    \ even if the user invokes the session from another region or\n   network than\
    \ that usually used.\n   R24: It is RECOMMENDED that ToIP implementations make\
    \ the invocation\n   and use of relay services as easy as possible.\n"
- title: 5.2.4.  Presentation and User Control Requirements
  contents:
  - "5.2.4.  Presentation and User Control Requirements\n   A user should never be\
    \ in doubt about the status of the session, even\n   if the user is unable to\
    \ make use of the audio or visual indication.\n   For example, tactile indications\
    \ could be used by deaf-blind\n   individuals.\n   R25: User Agents for ToIP services\
    \ MUST have alerting methods (e.g.,\n   for incoming sessions) that can be used\
    \ by deaf and hard-of-hearing\n   people or provide a range of alternative, but\
    \ equivalent, alerting\n   methods that can be selected by all users, regardless\
    \ of their\n   abilities.\n   R26: Where real-time text is used in conjunction\
    \ with other media,\n   exposure of user control functions through the User Interface\
    \ needs\n   to be done in an equivalent manner for all supported media.  For\n\
    \   example, it must be possible for the user to select between audio,\n   visual,\
    \ or tactile prompts, or all must be supplied.\n   R27: If available, identification\
    \ of the originating party (e.g., in\n   the form of a URI or a Calling Line Identification\
    \ (CLI)) MUST be\n   clearly presented to the user in a form suitable for the\
    \ user BEFORE\n   the session invitation is answered.\n   R28: When a session\
    \ invitation involving ToIP originates from a\n   Public Switched Telephone Network\
    \ (PSTN) text telephone (e.g.,\n   transcoded via a text gateway), this SHOULD\
    \ be indicated to the user.\n   The ToIP client MAY adjust the presentation of\
    \ the real-time text to\n   the user as a consequence.\n   R29: An indication\
    \ SHOULD be given to the user when real-time text is\n   available during the\
    \ call, even if it is not invoked at call setup\n   (e.g., when only voice and/or\
    \ video is used initially).\n   R30: The user MUST be informed of any change in\
    \ modalities.\n   R31: Users MUST be presented with appropriate session progress\n\
    \   information at all times.\n   R32: Systems for ToIP SHOULD support an answering\
    \ machine function,\n   equivalent to answering machines on telephony networks.\n\
    \   R33: If an answering machine function is supported, it MUST support\n   at\
    \ least 160 characters for the greeting message.  It MUST support\n   incoming\
    \ text message storage of a minimum of 4096 characters,\n   although systems MAY\
    \ support much larger storage.  It is RECOMMENDED\n   that systems support storage\
    \ of at least 20 incoming messages of up\n   to 16000 characters per message.\n\
    \   R34: When the answering machine is activated, user alerting SHOULD\n   still\
    \ take place.  The user SHOULD be allowed to monitor the auto-\n   answer progress,\
    \ and where this is provided, the user SHOULD be\n   allowed to intervene during\
    \ any stage of the answering machine\n   procedure and take control of the session.\n\
    \   R35: It SHOULD be possible to save the text portion of a\n   conversation.\n\
    \   R36: The presentation of the conversation SHOULD be done in such a\n   way\
    \ that users can easily identify which party generated any given\n   portion of\
    \ text.\n   R37: ToIP SHOULD handle characters such as new line, erasure, and\n\
    \   alerting during a session as specified in ITU-T T.140 [8].\n"
- title: 5.2.5.  Interworking Requirements
  contents:
  - "5.2.5.  Interworking Requirements\n   There is a range of existing real-time\
    \ text services.  There is also\n   a range of network technologies that could\
    \ support real-time text\n   services.\n   Real-time/interactive texting facilities\
    \ exist already in various\n   forms and on various networks.  In the PSTN, they\
    \ are commonly\n   referred to as text telephony.\n   Text gateways are used for\
    \ converting between different protocols for\n   text conversation.  They can\
    \ be used between networks or within\n   networks where different transport technologies\
    \ are used.\n   R38: ToIP SHOULD provide interoperability with text conversation\n\
    \   features in other networks, for instance the PSTN.\n   R39: When communicating\
    \ via a gateway to other networks and\n   protocols, the ToIP service SHOULD support\
    \ the functionality for\n   alternating or simultaneous use of modalities as offered\
    \ by the\n   interworking network.\n   R40: Calling party identification information,\
    \ such as CLI, MUST be\n   passed by gateways and converted to an appropriate\
    \ form, if required.\n   R41: When interworking with other networks and services,\
    \ the ToIP\n   service SHOULD provide buffering mechanisms to deal with delays\
    \ in\n   call setup and with differences in transmission speeds, and/or to\n \
    \  interwork with half-duplex services.\n"
- title: 5.2.5.1.  PSTN Interworking Requirements
  contents:
  - "5.2.5.1.  PSTN Interworking Requirements\n   Analog text telephony is used in\
    \ many countries, mainly by deaf,\n   hard-of-hearing and speech-impaired individuals.\n\
    \   R42: ToIP services MUST provide interworking with PSTN legacy text\n   telephony\
    \ devices.\n   R43: When interworking with PSTN legacy text telephony services,\n\
    \   alternating text and voice function MAY be supported.  (Called \"voice\n \
    \  carry over (VCO) and hearing carry over (HCO)\").\n"
- title: 5.2.5.2.  Cellular Interworking Requirements
  contents:
  - "5.2.5.2.  Cellular Interworking Requirements\n   As mobile communications have\
    \ been adopted widely, various solutions\n   for real-time texting while on the\
    \ move were developed.  ToIP\n   services should provide interworking with such\
    \ services as well.\n   Alternative means of transferring the text telephony data\
    \ have been\n   developed when TTY services over cellular were mandated by the\
    \ FCC in\n   the USA.  They are the a) \"No-gain\" codec solution, and b) the\n\
    \   Cellular Text Telephony Modem (CTM) solution [7], both collectively\n   called\
    \ \"Baudot mode\" solution in the USA.\n   The GSM and 3G standards from 3GPP\
    \ make use of the CTM modem in the\n   voice channel for text telephony.  However,\
    \ implementations also\n   exist that use the data channel to provide such functionality.\n\
    \   Interworking with these solutions should be done using text gateways\n   that\
    \ set up the data channel connection at the GSM side and provide\n   ToIP at the\
    \ other side.\n   R44: a ToIP service SHOULD provide interworking with mobile\
    \ text\n   conversation services.\n"
- title: 5.2.5.3.  Instant Messaging Interworking Requirements
  contents:
  - "5.2.5.3.  Instant Messaging Interworking Requirements\n   Many people use Instant\
    \ Messaging to communicate via the Internet\n   using text.  Instant Messaging\
    \ usually transfers blocks of text\n   rather than streaming as is used by ToIP.\
    \  Usually a specific action\n   is required by the user to activate transmission,\
    \ such as pressing\n   the ENTER key or a send button.  As such, it is not a replacement\
    \ for\n   ToIP; in particular, it does not meet the needs for real-time\n   conversations\
    \ including those of deaf, hard-of-hearing, and speech-\n   impaired users as\
    \ defined in RFC 3351 [22].  It is less suitable for\n   communications through\
    \ a relay service [24].\n   The streaming nature of ToIP provides a more direct\
    \ conversational\n   user experience and, when given the choice, users may prefer\
    \ ToIP.\n   R45: a ToIP service MAY provide interworking with Instant Messaging\n\
    \   services.\n"
- title: 6.  Implementation Framework
  contents:
  - "6.  Implementation Framework\n   This section describes an implementation framework\
    \ for ToIP that\n   meets the requirements and offers the functionality as set\
    \ out in\n   Section 5.  The framework presented here uses existing standards\
    \ that\n   are already commonly used for voice-based conversational services on\n\
    \   IP networks.\n"
- title: 6.1.  General Implementation Framework
  contents:
  - "6.1.  General Implementation Framework\n   This framework specifies the use of\
    \ the Session Initiation Protocol\n   (SIP) [2] to set up, control, and tear down\
    \ the connections between\n   ToIP users whilst the media is transported using\
    \ the Real-Time\n   Transport Protocol (RTP) [3] as described in RFC 4103 [4].\n\
    \   RFC 4504 describes how to implement support for real-time text in SIP\n  \
    \ telephony devices [23].\n"
- title: 6.2.  Detailed Implementation Framework
  contents:
  - '6.2.  Detailed Implementation Framework

    '
- title: 6.2.1.  Session Control and Setup
  contents:
  - "6.2.1.  Session Control and Setup\n   ToIP services MUST use the Session Initiation\
    \ Protocol (SIP) [2] for\n   setting up, controlling, and terminating sessions\
    \ for real-time text\n   conversation with one or more participants and possibly\
    \ including\n   other media like video or audio.  The Session Description Protocol\n\
    \   (SDP) used in SIP to describe the session is used to express the\n   attributes\
    \ of the session and to negotiate a set of compatible media\n   types.\n   SIP\
    \ [2] allows participants to negotiate all media, including real-\n   time text\
    \ conversation [4].  ToIP services can provide the ability to\n   set up conversation\
    \ sessions from any location as well as provision\n   for privacy and security\
    \ through the application of standard SIP\n   techniques.\n"
- title: 6.2.1.1.  Pre-Session Setup
  contents:
  - "6.2.1.1.  Pre-Session Setup\n   The requirements of the user to be reached at\
    \ a consistent address\n   and to store preferences for evaluation at session\
    \ setup are met by\n   pre-session setup actions.  That includes storing of registration\n\
    \   information in the SIP registrar to provide information about how a\n   user\
    \ can be contacted.  This will allow sessions to be set up rapidly\n   and with\
    \ proper routing and addressing.\n   The need to use real-time text as a medium\
    \ of communications can be\n   expressed by users during registration time.  Two\
    \ situations need to\n   be considered in the pre-session setup environment:\n\
    \   a. User Preferences: It MUST be possible for a user to indicate a\n      preference\
    \ for real-time text by registering that preference with\n      a SIP server that\
    \ is part of the ToIP service.\n   b. Server Support of User Preferences: SIP\
    \ servers that support ToIP\n      services MUST have the capability to act on\
    \ calling user\n      preferences for real-time text in order to accept or reject\
    \ the\n      session.  The actions taken can be based on the called users\n  \
    \    preferences defined as part of the pre-session setup registration.\n    \
    \  For example, if the user is called by another party, and it is\n      determined\
    \ that a transcoding server is needed, the session should\n      be re-directed\
    \ or otherwise handled accordingly.\n   The ability to include a transcoding service\
    \ MUST NOT require user\n   registration in any specific SIP registrar, but MAY\
    \ require\n   authorisation of the SIP registrar to invoke the service.\n   A\
    \ point-to-point session takes place between two parties.  For ToIP,\n   one or\
    \ both of the communicating parties will indicate real-time text\n   as a possible\
    \ or preferred medium for conversation using SIP in the\n   session setup.\n \
    \  The following features MAY be implemented to facilitate the session\n   establishment\
    \ using ToIP:\n   a. Caller Preferences: SIP headers (e.g., Contact) [10] can\
    \ be used\n      to show that real-time text is the medium of choice for\n   \
    \   communications.\n   b. Called Party Preferences [11]: The called party being\
    \ passive can\n      formulate a clear rule indicating how a session should be\
    \ handled,\n      either using real-time text as a preferred medium or not, and\n\
    \      whether this session needs to be handled by a designated SIP proxy\n  \
    \    or the SIP User Agent.\n   c. SIP Server Support for User Preferences: It\
    \ is RECOMMENDED that\n      SIP servers also handle the incoming sessions in\
    \ accordance with\n      preferences expressed for real-time text.  The SIP server\
    \ can also\n      enforce ToIP policy rules for communications (e.g., use of the\n\
    \      transcoding server for ToIP).\n"
- title: 6.2.1.2.  Session Negotiations
  contents:
  - "6.2.1.2.  Session Negotiations\n   The Session Description Protocol (SDP) used\
    \ in SIP [2] provides the\n   capabilities to indicate real-time text as a medium\
    \ in the session\n   setup.  RFC 4103 [4] uses the RTP payload types \"text/red\"\
    \ and\n   \"text/t140\" for support of ToIP, which can be indicated in the SDP\
    \ as\n   a part of the SIP INVITE, OK, and SIP/200/ACK media negotiations.  In\n\
    \   addition, SIP's offer/answer model [12] can also be used in\n   conjunction\
    \ with other capabilities, including the use of a\n   transcoding server for enhanced\
    \ session negotiations [28,29,13].\n"
- title: 6.2.2.  Transport
  contents:
  - "6.2.2.  Transport\n   ToIP services MUST support the Real-Time Transport Protocol\
    \ (RTP) [3]\n   according to the specification of RFC 4103 [4] for the transport\
    \ of\n   real-time text between participants.\n   RFC 4103 describes the transmission\
    \ of T.140 [8] real-time text on IP\n   networks.\n   In order to enable the use\
    \ of international character sets, the\n   transmission format for real-time text\
    \ conversation SHALL be UTF-8\n   [14], in accordance with ITU-T T.140.\n   If\
    \ real-time text is detected to be missing after transmission, there\n   SHOULD\
    \ be a \"text loss\" indication in the real-time text as specified\n   in T.140\
    \ Addendum 1 [8].\n   The redundancy method of RFC 4103 [4] SHOULD be used to\
    \ significantly\n   increase the reliability of the real-time text transmission.\
    \  A\n   redundancy level using 2 generations gives very reliable results and\n\
    \   is therefore strongly RECOMMENDED.\n   In order to avoid exceeding the capabilities\
    \ of the sender, receiver,\n   or network (congestion), the transmission rate\
    \ SHOULD be kept at or\n   below 30 characters per second, which is the default\
    \ maximum rate\n   specified in RFC 4103 [4].  Lower rates MAY be negotiated when\
    \ needed\n   through the \"cps\" parameter as specified in RFC 4103 [4].\n   Real-time\
    \ text capability is announced in SDP by a declaration\n   similar to this example:\n\
    \   m=text 11000 RTP/AVP 100 98\n   a=rtpmap:98 t140/1000\n   a=rtpmap:100 red/1000\n\
    \   a=fmtp:100 98/98/98\n   By having this single coding and transmission scheme\
    \ for real-time\n   text defined in the SIP session control environment, the opportunity\n\
    \   for interoperability is optimized.  However, if good reasons exist,\n   other\
    \ transport mechanisms MAY be offered and used for the T.140-\n   coded text,\
    \ provided that proper negotiation is introduced, but the\n   RFC 4103 [4] transport\
    \ MUST be used as both the default and the\n   fallback transport.\n"
- title: 6.2.3.  Transcoding Services
  contents:
  - "6.2.3.  Transcoding Services\n   Invocation of a transcoding service MAY happen\
    \ automatically when the\n   session is being set up based on any valid indication\
    \ or negotiation\n   of supported or preferred media types.  A transcoding framework\n\
    \   document using SIP [28] describes invoking relay services, where the\n   relay\
    \ acts as a conference bridge or uses the third-party control\n   mechanism. \
    \ ToIP implementations SHOULD support this transcoding\n   framework.\n"
- title: 6.2.4.  Presentation and User Control Functions
  contents:
  - '6.2.4.  Presentation and User Control Functions

    '
- title: 6.2.4.1.  Progress and Status Information
  contents:
  - "6.2.4.1.  Progress and Status Information\n   Session progress information SHOULD\
    \ use simple language so that as\n   many users as possible can understand it.\
    \  The use of jargon or\n   ambiguous terminology SHOULD be avoided.  It is RECOMMENDED\
    \ that text\n   information be used together with icons to symbolise the session\n\
    \   progress information.\n   In summary, it SHOULD be possible to observe indicators\
    \ about:\n   - Incoming session\n   - Availability of real-time text, voice, and\
    \ video channels\n   - Session progress\n   - Incoming real-time text\n   - Any\
    \ loss in incoming real-time text\n   - Typed and transmitted real-time text\n"
- title: 6.2.4.2.  Alerting
  contents:
  - "6.2.4.2.  Alerting\n   For users who cannot use the audible alerter for incoming\
    \ sessions,\n   it is RECOMMENDED to include a tactile, as well as a visual,\n\
    \   indicator.\n   Among the alerting options are alerting by the User Agent's\
    \ User\n   Interface and specific alerting User Agents registered to the same\n\
    \   registrar as the main User Agent.\n   It should be noted that external alerting\
    \ systems exist and one\n   common interface for triggering the alerting action\
    \ is a contact\n   closure between two conductors.\n"
- title: 6.2.4.3.  Text Presentation
  contents:
  - "6.2.4.3.  Text Presentation\n   Requirement R32 states that, in the display of\
    \ text conversations,\n   users must be able to distinguish easily between different\
    \ speakers.\n   This could be done using color, positioning of the text (i.e.,\n\
    \   incoming real-time text and outgoing real-time text in different\n   display\
    \ areas), in-band identifiers of the parties, or a combination\n   of any of these\
    \ techniques.\n"
- title: 6.2.4.4.  File Storage
  contents:
  - "6.2.4.4.  File Storage\n   Requirement R31 recommends that ToIP systems allow\
    \ the user to save\n   text conversations.  This SHOULD be done using a standard\
    \ file\n   format.  For example: a UTF-8 text file in XHTML format [15],\n   including\
    \ timestamps, party names (or addresses), and the\n   conversation text.\n"
- title: 6.2.5.  Interworking Functions
  contents:
  - "6.2.5.  Interworking Functions\n   A number of systems for real-time text conversation\
    \ already exist as\n   well as a number of message-oriented text communication\
    \ systems.\n   Interoperability is of interest between ToIP and some of these\n\
    \   systems.\n   Interoperation of half-duplex and full-duplex protocols, and\
    \ between\n   protocols that have different data rates, may require text buffering.\n\
    \   Some intelligence will be needed to determine when to change\n   direction\
    \ when operating in half-duplex mode.  Identification may be\n   required of half-duplex\
    \ operation either at the \"user\" level (i.e.,\n   users must inform each other)\
    \ or at the \"protocol\" level (where an\n   indication must be sent back to the\
    \ gateway).  However, special care\n   needs to be taken to provide the best possible\
    \ real-time performance.\n   Buffering schemes SHOULD be dimensioned to adjust\
    \ for receiving at 30\n   characters per second and transmitting at 6 characters\
    \ per second for\n   up to 4 minutes (i.e., less than 3000 characters).\n   When\
    \ converting between simultaneous voice and text on the IP side,\n   and alternating\
    \ voice and text on the other side of a gateway, a\n   conflict can occur if the\
    \ IP user transmits both audio and text at\n   the same time.  In such situations,\
    \ text transmission SHOULD have\n   precedence, so that while text is transmitted,\
    \ audio is lost.\n   Transcoding of text to and from other coding formats may\
    \ need to take\n   place in gateways between ToIP and other forms of text conversation,\n\
    \   for example, to connect to a PSTN text telephone.\n   Session setup through\
    \ gateways to other networks may require the use\n   of specially formatted addresses\
    \ or other mechanisms for invoking\n   those gateways.\n   ToIP interworking requires\
    \ a method to invoke a text gateway.  These\n   text gateways act as User Agents\
    \ at the IP side.  The capabilities of\n   the gateway during the call will be\
    \ determined by the call\n   capabilities of the terminal that is using the gateway.\
    \  For example,\n   a PSTN textphone is generally only able to receive voice and\
    \ real-\n   time text, so the gateway will only allow ToIP and audio.\n   Examples\
    \ of possible scenarios for invocation of the text gateway\n   are:\n   a. PSTN\
    \ textphone users dial a prefix number before dialing out.\n   b. Separate real-time\
    \ text subscriptions, linked to the phone number\n      or terminal identifier/\
    \ IP address.\n   c. Real-time text capability indicators.\n   d. Real-time text\
    \ preference indicators.\n   e. Listen for V.18 modem modulation text activity\
    \ in all PSTN calls\n      and routing of the call to an appropriate gateway.\n\
    \   f. Call transfer request by the called user.\n   g. Placing a call via the\
    \ Web, and using one of the methods described\n      here\n   h. A text gateway\
    \ with its own telephone number and/or SIP address\n      (this requires user\
    \ interaction with the gateway to place a call).\n   i. ENUM address analysis\
    \ and number plan.\n   j. Number or address analysis leads to a gateway for all\
    \ PSTN calls.\n"
- title: 6.2.5.1.  PSTN Interworking
  contents:
  - "6.2.5.1.  PSTN Interworking\n   Analog text telephony is cumbersome because of\
    \ incompatible national\n   implementations where interworking was never considered.\
    \  A large\n   number of these implementations have been documented in ITU-T V.18\n\
    \   [16], which also defines the modem detection sequences for the\n   different\
    \ text protocols.  In rare cases, the modem type\n   identification may take considerable\
    \ time, depending on user actions.\n   To resolve analog textphone incompatibilities,\
    \ text telephone\n   gateways are needed to transcode incoming analog signals\
    \ into T.140\n   and vice versa.  The modem capability exchange time can be reduced\
    \ by\n   the text telephone gateways initially assuming the analog text\n   telephone\
    \ protocol used in the region where the gateway is located.\n   For example, in\
    \ the USA, Baudot [25] might be tried as the initial\n   protocol.  If negotiation\
    \ for Baudot fails, the full V.18 modem\n   capability exchange will take place.\
    \  In the UK, ITU-T V.21 [26]\n   might be the first choice.\n   In particular,\
    \ transmission of real-time text on PSTN networks takes\n   place using a variety\
    \ of codings and modulations, including ITU-T\n   V.21 [26], Baudot [25], dual-tone\
    \ multi-frequency (DTMF), V.23 [27],\n   and others.  Many difficulties have arisen\
    \ as a result of this\n   variety in text telephony protocols and the ITU-T V.18\
    \ [16] standard\n   was developed to address some of these issues.\n   ITU-T V.18\
    \ [16] offers a native text telephony method, plus it\n   defines interworking\
    \ with current protocols.  In the interworking\n   mode, it will recognise one\
    \ of the older protocols and fall back to\n   that transmission method when required.\n\
    \   Text gateways MUST use the ITU-T V.18 [16] standard at the PSTN side.\n  \
    \ A text gateway MUST act as a SIP User Agent on the IP side and\n   support RFC\
    \ 4103 real-time text transport.\n   While ToIP allows receiving and sending real-time\
    \ text simultaneously\n   and is displayed on a split screen, many analog text\
    \ telephones\n   require users to take turns typing.  This is because many text\n\
    \   telephones operate strictly half duplex.  Only one can transmit text\n   at\
    \ a time.  The users apply strict turn-taking rules.\n   There are several text\
    \ telephones which communicate in full duplex,\n   but merge transmitted text\
    \ and received text in the same line in the\n   same display window.  Here too\
    \ the users apply strict turn taking\n   rules.\n   Native V.18 text telephones\
    \ support full duplex and separate display\n   from reception and transmission\
    \ so that the full duplex capability\n   can be used fully.  Such devices could\
    \ use the ToIP split screen as\n   well, but almost all text telephones use a\
    \ restricted character set\n   and many use low text transmission speeds (4 to\
    \ 7 characters per\n   second).\n   That is why it is important for the ToIP user\
    \ to know that he or she\n   is connected with an analog text telephone.  The\
    \ session description\n   [9] SHOULD contain an indication that the other endpoint\
    \ for the call\n   is a PSTN textphone (e.g., connected via an ATA or through\
    \ a text\n   gateway).  This means that the textphone user may be used to formal\n\
    \   turn taking during the call.\n"
- title: 6.2.5.2.  Mobile Interworking
  contents:
  - "6.2.5.2.  Mobile Interworking\n   Mobile wireless (or cellular) circuit switched\
    \ connections provide a\n   digital real-time transport service for voice or data.\
    \  The access\n   technologies include GSM, CDMA, TDMA, iDen, and various 3G\n\
    \   technologies, as well as WiFi or WiMAX.\n   ToIP may be supported over the\
    \ cellular wireless packet-switched\n   service.  It interfaces to the Internet.\n\
    \   The following sections describe how mobile text telephony is\n   supported.\n"
- title: 6.2.5.2.1.  Cellular "No-gain"
  contents:
  - "6.2.5.2.1.  Cellular \"No-gain\"\n   The \"No-gain\" text telephone transporting\
    \ technology uses specially\n   modified Enhanced Full Rate (EFR) [17] and Enhanced\
    \ Variable Rate\n   (EVR) [18] speech vocoders in mobile terminals used to provide\
    \ a text\n   telephony call.  It provides full duplex operation and supports\n\
    \   alternating between voice and text (\"VCO/HCO\").  It is dedicated to\n  \
    \ CDMA and TDMA mobile technologies and the US Baudot (i.e., 45 bit/s)\n   type\
    \ of text telephones.\n"
- title: 6.2.5.2.2.  Cellular Text Telephone Modem (CTM)
  contents:
  - "6.2.5.2.2.  Cellular Text Telephone Modem (CTM)\n   CTM [7] is a technology-independent\
    \ modem technology that provides\n   the transport of text telephone characters\
    \ at up to 10 characters/sec\n   using modem signals that can be carried by many\
    \ voice codecs and uses\n   a highly redundant encoding technique to overcome\
    \ the fading and cell\n   changing losses.\n"
- title: 6.2.5.2.3.  Cellular "Baudot mode"
  contents:
  - "6.2.5.2.3.  Cellular \"Baudot mode\"\n   This term is often used by cellular\
    \ terminal suppliers for a cellular\n   phone mode that allows TTYs to operate\
    \ into a cellular phone and to\n   communicate with a fixed-line TTY.  Thus it\
    \ is a common name for the\n   \"No-Gain\" and the CTM solutions when applied\
    \ to the Baudot-type\n   textphones.\n"
- title: 6.2.5.2.4.  Mobile Data Channel Mode
  contents:
  - "6.2.5.2.4.  Mobile Data Channel Mode\n   Many mobile terminals allow the use\
    \ of the circuit-switched data\n   channel to transfer data in real time.  Data\
    \ rates of 9600 bit/s are\n   usually supported on the 2G mobile network.  Gateways\
    \ provide\n   interoperability with PSTN textphones.\n"
- title: 6.2.5.2.5.  Mobile ToIP
  contents:
  - "6.2.5.2.5.  Mobile ToIP\n   ToIP could be supported over mobile wireless packet-switched\
    \ services\n   that interface to the Internet.  For 3GPP 3G services, ToIP support\n\
    \   is described in 3G TS 26.235 [19].\n"
- title: 6.2.5.3.  Instant Messaging Interworking
  contents:
  - "6.2.5.3.  Instant Messaging Interworking\n   Text gateways MAY be used to allow\
    \ interworking between Instant\n   Messaging systems and ToIP solutions.  Because\
    \ Instant Messaging is\n   based on blocks of text, rather than on a continuous\
    \ stream of\n   characters like ToIP, gateways MUST transcode between the two\n\
    \   formats.  Text gateways for interworking between Instant Messaging\n   and\
    \ ToIP MUST apply a procedure for bridging the different\n   conversational formats\
    \ of real-time text versus text messaging.  The\n   following advice may improve\
    \ user experience for both parties in a\n   call through a messaging gateway.\n\
    \   a. Concatenate individual characters originating at the ToIP side\n      into\
    \ blocks of text.\n   b. When the length of the concatenated message becomes longer\
    \ than 50\n      characters, the buffered text SHOULD be transmitted to the Instant\n\
    \      Messaging side as soon as any non-alphanumerical character is\n      received\
    \ from the ToIP side.\n   c. When a new line indicator is received from the ToIP\
    \ side, the\n      buffered characters up to that point, including the carriage\n\
    \      return and/or line-feed characters, SHOULD be transmitted to the\n    \
    \  Instant Messaging side.\n   d. When the ToIP side has been idle for at least\
    \ 5 seconds, all\n      buffered text up to that point SHOULD be transmitted to\
    \ the\n      Instant Messaging side.\n   e. Text Gateways must be capable of maintaining\
    \ the real-time\n      performance for ToIP while providing the interworking services.\n\
    \   It is RECOMMENDED that during the session, both users be constantly\n   updated\
    \ on the progress of the text input.  Many Instant Messaging\n   protocols signal\
    \ that a user is typing to the other party in the\n   conversation.  Text gateways\
    \ between such Instant Messaging protocols\n   and ToIP MUST provide this signalling\
    \ to the Instant Messaging side\n   when characters start being received, or at\
    \ the beginning of the\n   conversation.\n   At the ToIP side, an indicator of\
    \ writing the Instant Message MUST be\n   present where the Instant Messaging\
    \ protocol provides one.  For\n   example, the real-time text user MAY see \"\
    . . . waiting for replying\n   IM. . . \" and when 5 seconds have passed another\
    \ . (dot) can be\n   shown.\n   Those solutions will reduce the difficulties between\
    \ streaming and\n   blocked text services.\n   Even though the text gateway can\
    \ connect Instant Messaging and ToIP,\n   the best solution is to take advantage\
    \ of the fact that the user\n   interfaces and the user communities for instant\
    \ messaging and ToIP\n   telephony are very similar.  After all, the character\
    \ input,\n   character display, Internet connectivity, and SIP stack can be the\n\
    \   same for Instant Messaging (SIMPLE) and ToIP.  Thus, the user may\n   simply\
    \ use different applications for ToIP and text messaging in the\n   same terminal.\n\
    \   Devices that implement Instant Messaging SHOULD implement ToIP as\n   described\
    \ in this document so that a more complete text communication\n   service can\
    \ be provided.\n"
- title: 6.2.5.4.  Multi-Functional Combination Gateways
  contents:
  - "6.2.5.4.  Multi-Functional Combination Gateways\n   In practice, many interworking\
    \ gateways will be implemented as\n   gateways that combine different functions.\
    \  As such, a text gateway\n   could be built to have modems to interwork with\
    \ the PSTN and support\n   both Instant Messaging as well as ToIP.  Such interworking\
    \ functions\n   are called combination gateways.\n   Combination gateways could\
    \ provide interworking between all of their\n   supported text-based functions.\
    \  For example, a text gateway that has\n   modems to interwork with the PSTN\
    \ and that support both Instant\n   Messaging and ToIP could support the following\
    \ interworking\n   functions:\n   - PSTN text telephony to ToIP\n   - PSTN text\
    \ telephony to Instant Messaging\n   - Instant Messaging to ToIP\n"
- title: 6.2.5.5.  Character Set Transcoding
  contents:
  - "6.2.5.5.  Character Set Transcoding\n   Gateways between the ToIP network and\
    \ other networks MAY need to\n   transcode text streams.  ToIP makes use of the\
    \ ISO 10646 character\n   set.  Most PSTN textphones use a 7-bit character set,\
    \ or a character\n   set that is converted to a 7-bit character set by the V.18\
    \ modem.\n   When transcoding between character sets and T.140 in gateways,\n\
    \   special consideration MUST be given to the national variants of the\n   7-bit\
    \ codes, with national characters mapping into different codes in\n   the ISO\
    \ 10646 code space.  The national variant to be used could be\n   selectable by\
    \ the user on a per-call basis, or be configured as a\n   national default for\
    \ the gateway.\n   The indicator of missing text in T.140, specified in T.140\
    \ amendment\n   1, cannot be represented in the 7-bit character codes.  Therefore\
    \ the\n   indicator of missing text SHOULD be transcoded to the ' (apostrophe)\n\
    \   character in legacy text telephone systems, where this character\n   exists.\
    \  For legacy systems where the ' character does not exist, the\n   .  (full stop)\
    \ character SHOULD be used instead.\n"
- title: 7.  Further Recommendations for Implementers and Service Providers
  contents:
  - '7.  Further Recommendations for Implementers and Service Providers

    '
- title: 7.1.  Access to Emergency Services
  contents:
  - "7.1.  Access to Emergency Services\n   It must be possible to place an emergency\
    \ call using ToIP and it must\n   be possible to use a relay service in such a\
    \ call.  The emergency\n   service provided to users utilising the real-time text\
    \ medium must be\n   equivalent to the emergency service provided to users utilising\n\
    \   speech or other media.\n   A text gateway must be able to route real-time\
    \ text calls to\n   emergency service providers when any of the recognised emergency\n\
    \   numbers that support text communications for the country or region\n   are\
    \ called, e.g., \"911\" in the USA and \"112\" in Europe.  Routing\n   real-time\
    \ text calls to emergency services may require the use of a\n   transcoding service.\n\
    \   A text gateway with cellular wireless packet-switched services must\n   be\
    \ able to route real-time text calls to emergency service providers\n   when any\
    \ of the recognized emergency numbers that support real-time\n   text communication\
    \ for the country is called.\n"
- title: 7.2.  Home Gateways or Analog Terminal Adapters
  contents:
  - "7.2.  Home Gateways or Analog Terminal Adapters\n   Analog terminal adapters\
    \ (ATA) using SIP-based IP communication and\n   RJ-11 connectors for connecting\
    \ traditional PSTN devices SHOULD\n   enable connection of legacy PSTN text telephones\
    \ [23].\n   These adapters SHOULD contain V.18 modem functionality, voice\n  \
    \ handling functionality, and conversion functions to/from SIP-based\n   ToIP\
    \ with T.140 transported according to RFC 4103 [4], in a similar\n   way as it\
    \ provides interoperability for voice sessions.\n   If a session is set up and\
    \ text/t140 capability is not declared by\n   the destination endpoint (by the\
    \ endpoint terminal or the text\n   gateway in the network at the endpoint), a\
    \ method for invoking a\n   transcoding server SHALL be used.  If no such server\
    \ is available,\n   the signals from the textphone MAY be transmitted in the voice\n\
    \   channel as audio with a high quality of service.\n   NOTE: It is preferred\
    \ that such analog terminal adaptors do use RFC\n   4103 [4] on board and thus\
    \ act as a text gateway.  Sending textphone\n   signals over the voice channel\
    \ is undesirable due to possible\n   filtering and compression and packet loss\
    \ between the endpoints.\n   This can result in character loss in the textphone\
    \ conversation or\n   even not allowing the textphones to connect to each other.\n"
- title: 7.3.  User Mobility
  contents:
  - "7.3.  User Mobility\n   ToIP User Agents SHOULD use the same mechanisms as other\
    \ SIP User\n   Agents to resolve mobility issues.  It is RECOMMENDED that users\
    \ use\n   a SIP address, resolved by a SIP registrar, to enable basic user\n \
    \  mobility.  Further mechanisms are defined for all session types for\n   3G\
    \ IP multimedia systems.\n"
- title: 7.4.  Firewalls and NATs
  contents:
  - "7.4.  Firewalls and NATs\n   ToIP uses the same signalling and transport protocols\
    \ as VoIP.\n   Hence, the same firewall and NAT solutions and network functionality\n\
    \   that apply to VoIP MUST also apply to ToIP.\n"
- title: 7.5.  Quality of Service
  contents:
  - "7.5.  Quality of Service\n   Where Quality of Service (QoS) mechanisms are used,\
    \ the real-time\n   text streams should be assigned appropriate QoS characteristics,\
    \ so\n   that the performance requirements can be met and the real-time text\n\
    \   stream is not degraded unfavourably in comparison to voice\n   performance\
    \ in congested situations.\n"
- title: 8.  Security Considerations
  contents:
  - "8.  Security Considerations\n   User confidentiality and privacy need to be met\
    \ as described in SIP\n   [2].  For example, nothing should reveal in an obvious\
    \ way the fact\n   that the ToIP user might be a person with a hearing or speech\n\
    \   impairment.  It is up to the ToIP user to make his or her hearing or\n   speech\
    \ impairment public.  If a transcoding server is being used,\n   this SHOULD be\
    \ as transparent as possible.  However, it might still\n   be possible to discern\
    \ that a user might be hearing or speech\n   impaired based on the attributes\
    \ present in SDP, although the\n   intention is that mainstream users might also\
    \ choose to use ToIP.\n   Encryption SHOULD be used on an end-to-end or hop-by-hop\
    \ basis as\n   described in SIP [2] and SRTP [20].\n   Authentication MUST be\
    \ provided for users in addition to message\n   integrity and access control.\n\
    \   Protection against Denial-of-Service (DoS) attacks needs to be\n   provided,\
    \ considering the case that the ToIP users might need\n   transcoding servers.\n"
- title: 9.  Contributors
  contents:
  - "9.  Contributors\n   The following people contributed to this document: Willem\
    \ Dijkstra,\n   Barry Dingle, Gunnar Hellstrom, Radhika R. Roy, Henry Sinnreich,\
    \ and\n   Gregg C. Vanderheiden.\n   The content and concepts within are a product\
    \ of the SIPPING Working\n   Group.  Tom Taylor (Nortel) acted as independent\
    \ reviewer and\n   contributed significantly to the structure and content of this\n\
    \   document.\n"
- title: 10.  References
  contents:
  - '10.  References

    '
- title: 10.1.  Normative References
  contents:
  - "10.1.  Normative References\n   [1]   Bradner, S., Ed., \"Intellectual Property\
    \ Rights in IETF\n         Technology\", BCP 79, RFC 3979, March 2005.\n   [2]\
    \   Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,\n         Peterson,\
    \ J., Sparks, R., Handley, M., and E. Schooler, \"SIP:\n         Session Initiation\
    \ Protocol\", RFC 3261, June 2002.\n   [3]   Schulzrinne, H., Casner, S., Frederick,\
    \ R., and V. Jacobson,\n         \"RTP: A Transport Protocol for Real-Time Applications\"\
    , STD 64,\n         RFC 3550, July 2003.\n   [4]   Hellstrom, G. and P. Jones,\
    \ \"RTP Payload for Text\n         Conversation\", RFC 4103, June 2005.\n   [5]\
    \   ITU-T Recommendation F.703,\"Multimedia Conversational\n         Services\"\
    , November 2000.\n   [6]   Bradner, S., \"Key words for use in RFCs to Indicate\
    \ Requirement\n         Levels\", BCP 14, RFC 2119, March 1997.\n   [7]   3GPP\
    \ TS 26.226, \"Cellular Text Telephone Modem Description\"\n         (CTM).\n\
    \   [8]   ITU-T Recommendation T.140, \"Protocol for Multimedia\n         Application\
    \ Text Conversation\" (February 1998) and Addendum 1\n         (February 2000).\n\
    \   [9]   Handley, M., Jacobson, V., and C. Perkins, \"SDP: Session\n        \
    \ Description Protocol\", RFC 4566, July 2006.\n   [10]  Rosenberg, J., Schulzrinne,\
    \ H., and P. Kyzivat, \"Indicating\n         User Agent Capabilities in the Session\
    \ Initiation Protocol\n         (SIP)\", RFC 3840, August 2004.\n   [11]  Rosenberg,\
    \ J., Schulzrinne, H., and P. Kyzivat, \"Caller\n         Preferences for the\
    \ Session Initiation Protocol (SIP)\", RFC\n         3841, August 2004.\n   [12]\
    \  Rosenberg, J. and H. Schulzrinne, \"An Offer/Answer Model with\n         Session\
    \ Description Protocol (SDP)\", RFC 3264, June 2002.\n   [13]  Camarillo, G.,\
    \ Burger, E., Schulzrinne, H., and A. van Wijk,\n         \"Transcoding Services\
    \ Invocation in the Session Initiation\n         Protocol (SIP) Using Third Party\
    \ Call Control (3pcc)\", RFC\n         4117, June 2005.\n   [14]  Yergeau, F.,\
    \ \"UTF-8, a transformation format of ISO 10646\", STD\n         63, RFC 3629,\
    \ November 2003.\n   [15]  \"XHTML 1.0: The Extensible HyperText Markup Language:\
    \ A\n         Reformulation of HTML 4 in XML 1.0\", W3C Recommendation,\n    \
    \     Available at http://www.w3.org/TR/xhtml1.\n   [16]  ITU-T Recommendation\
    \ V.18, \"Operational and Interworking\n         Requirements for DCEs operating\
    \ in Text Telephone Mode\",\n         November 2000.\n   [17]  TIA/EIA/IS-823-A,\
    \ \"TTY/TDD Extension to TIA/EIA-136-410\n         Enhanced Full Rate Speech Codec\
    \ (must used in conjunction with\n         TIA/EIA/IS-840)\"\n   [18]  TIA/EIA/IS-127-2,\
    \ \"Enhanced Variable Rate Codec, Speech Service\n         Option 3 for Wideband\
    \ Spread Spectrum Digital Systems, Addendum\n         2.\"\n   [19]  \"IP Multimedia\
    \ default codecs\", 3GPP TS 26.235\n   [20]  Baugher, M., McGrew, D., Naslund,\
    \ M., Carrara, E., and K.\n         Norrman, \"The Secure Real-time Transport\
    \ Protocol (SRTP)\", RFC\n         3711, March 2004.\n   [21]  ITU-T Recommendation\
    \ F.700, \"Framework Recommendation for\n         Multimedia Services\", November\
    \ 2000.\n"
- title: 10.2.  Informative References
  contents:
  - "10.2.  Informative References\n   [22]  Charlton, N., Gasson, M., Gybels, G.,\
    \ Spanner, M., and A. van\n         Wijk, \"User Requirements for the Session\
    \ Initiation Protocol\n         (SIP) in Support of Deaf, Hard of Hearing and\
    \ Speech-impaired\n         Individuals\", RFC 3351, August 2002.\n   [23]  Sinnreich,\
    \ H., Ed., Lass, S., and C. Stredicke, \"SIP Telephony\n         Device Requirements\
    \ and Configuration\", RFC 4504, May 2006.\n   [24]  European Telecommunications\
    \ Standards Institute (ETSI), \"Human\n         Factors (HF); Guidelines for Telecommunication\
    \ Relay Services\n         for Text Telephones\". TR 101 806, June 2000.\n   [25]\
    \  TIA/EIA/825 \"A Frequency Shift Keyed Modem for Use on the\n         Public\
    \ Switched Telephone Network.\" (The specification for\n         45.45 and 50\
    \ bit/s TTY modems.)\n   [26]  International Telecommunication Union (ITU), \"\
    300 bits per\n         second duplex modem standardized for use in the general\n\
    \         switched telephone network\". ITU-T Recommendation V.21,\n         November\
    \ 1988.\n   [27]  International Telecommunication Union (ITU), \"600/1200-baud\n\
    \         modem standardized for use in the general switched telephone\n     \
    \    network\", ITU-T Recommendation V.23, November 1988.\n   [28]  Camarillo,\
    \ G., \"Framework for Transcoding with the Session\n         Initiation Protocol\"\
    , Work in Progress, May 2006.\n   [29]  Camarillo, G., \"The SIP Conference Bridge\
    \ Transcoding Model\",\n         Work in Progress, January 2006.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Guido Gybels\n   Department of New Technologies\n   RNID,\
    \ 19-23 Featherstone Street\n   London EC1Y 8SL, UK\n   Tel +44-20-7294 3713\n\
    \   Txt +44-20-7296 8001 Ext 3713\n   Fax +44-20-7296 8069\n   EMail: guido.gybels@rnid.org.uk\n\
    \   http://www.ictrnid.org.uk\n   Arnoud A. T. van Wijk\n   Real-Time Text Taskforce\
    \ (R3TF)\n   EMail: arnoud@realtimetext.org\n   http://www.realtimetext.org\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The IETF Trust (2008).\n   This document\
    \ is subject to the rights, licenses and restrictions\n   contained in BCP 78,\
    \ and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND\n   THE\
    \ INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS\n   OR IMPLIED,\
    \ INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF\n   THE INFORMATION\
    \ HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY\
    \ OR FITNESS FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
