Abstract This memo defines a portion of the Management Information Base (MIB) for use with network management protocols in TCP/IP based internets.
In particular, it defines objects for managing the Open Shortest Path First Routing Protocol.
The SNMPv2 Network Management Framework
Network Management Framework consists of four major components.
They are: RFC 1441 which defines the SMI, the mechanisms used for describing and naming objects for the purpose of management.
STD 17, RFC 1213 defines MIB II, the core set of managed objects for the Internet suite of protocols.
RFC 1445 which defines the administrative and other architectural aspects of the framework.
RFC 1448 which defines the protocol used for network access to managed objects.
The Framework permits new objects to be defined for the purpose of experimentation and evaluation.
Object Definitions Managed objects are accessed via a virtual information store, termed the Management Information Base or MIB.
Objects in the MIB are defined using the subset of Abstract Syntax Notation One (ASN.1) defined in the SMI.
In particular, each object object type is named by an OBJECT IDENTIFIER, an administratively assigned name.
The object type together with an object instance serves to uniquely identify a specific instantiation of the object.
For human convenience, we often use a textual string, termed the descriptor, to refer to the object type.
The changes from RFC 1253 are the following:
(1)  The textual convention PositiveInteger was changed from 1..
..'7FFFFFFF'h at the request of Marshall Rose.
The textual convention TOSType was changed to reflect the TOS values defined in the Router Requirements Draft, and in accordance with the IP Forwarding Table MIB's values.
The names of some objects were changed, conforming to the convention that an acronym (for example, LSA) is a single word ("Lsa") in most SNMP names.
(4)  textual changes were made to make the MIB readable by Dave Perkins' SMIC MIB Compiler in addition to Mosy.
This involved changing the case of some characters in certain names and removing the DEFVAL clauses for Counters.
(5)  The variables ospfAreaStatus and ospfIfStatus were added, having been overlooked in the original MIB.
The range of the variable ospfLsdbType was extended to include multicastLink (Group membership LSA) and nssaExternalLink (NSSA LSA).
The variable ospfIfMetricMetric was renamed ospfIfMetricValue, and the following text was removed from its description: "The value FFFF is distinguished to mean 'no route via this TOS'."
The variable ospfNbmaNbrPermanence was added, with the values 'dynamic' and 'permanent'; by this means, dynamically learned and configured neighbors can be distinguished.
(9)  The DESCRIPTION of the variable ospfNbrIpAddr was changed from "The IP address of this neighbor."
to "The IP address this neighbor is using in its IP Source Address.
Note that, on addressless links, this will not be 0.0.0.0, but the address of another of the neighbor's interfaces.
" This is by way of clarification and does not change the specification.
The OSPF External Link State Database was added.
The OSPF Link State Database used to display all LSAs stored; in this MIB, it displays all but the AS External LSAs.
This is because there are usually a large number of External LSAs, and they are relicated in all non Stub Areas.
The variable ospfAreaSummary was added to control the import of summary LSAs into stub areas.
If it is noAreaSummary (default)
the router will neither originate nor propagate summary LSAs into the stub area.
It will rely entirely on its default route.
If it is sendAreaSummary, the router will both summarize and propagate summary LSAs.
The general variables ospfExtLsdbLimit and ExitOverflowInterval were introduced to help handle LSDB overflow.
The use of the IP Forwarding Table is defined.
The ospfAreaRangeTable was obsoleted and replaced with the ospfAreaAggregateTable to accommodate two additional indexes.
The ospfAreaAggregateEntry keys now include a LsdbType (which can be used to differentiate between the traditional type 3 Aggregates and NSSA Aggregates) and an ospfAreaAggregateMask (which will more clearly express the range).
The variable ospfAreaAggregateEffect was added.
This permits the network manager to hide a subnet within an area.
Normally, the border router of a stub area advertises a default route as an OSPF network summary.
An NSSA border router will generate a type 7 LSA indicating a default route, and import it into the NSSA.
(ospf internal, type 1 external, or type 2 external) indicates the type of the default metric advertised.
(17) ospfMulticastExtensions is added to the OSPF General Group.
This indicates the router's ability to forward IP multicast (Class D) datagrams.
(18) ospfIfMulticastForwarding is added to the Interface Group.
and if so, how, multicasts should be forwarded on the interface.
The MIB is converted to SNMP Version 2.
Beyond simple text changes and the addition of the MODULE IDENTITY and MODULE
COMPLIANCE macros, this involved trading the TruthValue Textual Convention for SNMP Version 2's, which has the same values, and trading the Validation Textual Convention for SNMP Version 2's RowStatus.
(area authentication type) was changed to an interface authentication type to match the key.
It also has an additional value, to indicate the use of MD5 for authentication.
(21) ospfIfIntfType has a new value, pointToMultipoint.
(22) ospfIfDemand (read/write) is added, to permit control of Demand OSPF features.
(23) ospfNbrHelloSuppressed and ospfVirtNbrHelloSuppressed were added, (read only).
They indicate whether Hellos are being suppressed to the neighbor.
(24) ospfDemandExtensions was added to indicate whether the Demand OSPF extensions have been implemented, and to disable them if appropriate.
Several new data types are introduced as a textual convention in this MIB document.
These textual conventions enhance the readability of the specification and can ease comparison with other specifications if appropriate.
It should be noted that the introduction of the these textual conventions has no effect on either the syntax nor the semantics of any managed objects.
The use of these is merely an artifact of the explanatory method used.
Objects defined in terms of one of these methods are always encoded by means of the rules that define the primitive type.
Hence, no changes to the SMI or the SNMP are necessary to accommodate these textual conventions which are adopted merely for the convenience of readers and writers in pursuit of the elusive goal of clear, concise, and unambiguous MIB documents.
The new data types are AreaID, RouterID, TOSType, Metric, BigMetric, Status, PositiveInteger, HelloRange, UpToMaxAge, InterfaceIndex, and DesignatedRouterPriority.
The MIB is composed of the following sections: General Variables Area Data Structure Area Stub Metric Table Link State Database Address Range Table Host Table Interface Table Interface Metric Table Virtual Interface Table Neighbor Table Virtual Neighbor Table External Link State Database Aggregate Range Table There exists a separate MIB for notifications ("traps"), which is entirely optional.
The General Variables are about what they sound like; variables which are global to the OSPF Process.
Area Data Structure and Area Stub Metric Table
The Area Data Structure describes the OSPF Areas that the router participates in.
The Area Stub Metric Table describes the metrics advertised into a stub area by the default router(s).
Link State Database and External Link
The Link State Database is provided primarily to provide detailed information for network debugging.
Address Table and Host Tables
The Address Range Table and Host Table are provided to view configured Network Summary and Host Route information.
The Interface Table and the Interface Metric Table together describe the various IP interfaces to OSPF.
The metrics are placed in separate tables in order to simplify dealing with multiple types of service, and to provide flexibility in the event that the IP TOS definition is changed in the future.
A Default Value specification is supplied for the TOS 0 (default)
Likewise, the Virtual Interface Table describe virtual links to the OSPF Process.
The Neighbor Table and the Virtual Neighbor Table describe the neighbors to the OSPF Process.
Conceptual Row Creation For the benefit of row creation in "conceptual" (see [9])
tables, DEFVAL (Default Value) clauses are included in the definitions in section 3, suggesting values which an agent should use for instances of variables which need to be created due to a Set Request, but which are not specified in the Set Request.
DEFVAL clauses have not been specified for some objects which are read only, implying that they are zeroed upon row creation.
These objects are of the SYNTAX Counter32
For those objects not having a DEFVAL clause, both management stations and agents should heed the Robustness Principle of the Internet (see RFC 791): "be liberal in what you accept, conservative in what you send" That is, management stations should include as many of these columnar objects as possible (e.g., all read write objects) in a Set Request when creating a conceptual row; agents should accept a Set Request with as few of these as they need (e.g., the minimum contents of a row creating SET consists of those objects for which, as they cannot be intuited, no default is specified.).
There are numerous read write objects in this MIB, as it is designed for SNMP management of the protocol, not just SNMP monitoring of its state.
However, in the absence of a standard SNMP Security architecture, it is acceptable for implementations to implement these as read only with an alternative interface for their modification.
Default Configuration OSPF is a powerful routing protocol, equipped with features to handle virtually any configuration requirement that might reasonably be found within an Autonomous System.
With this power comes a fair degree of complexity, which the sheer number of objects in the MIB will attest to.
Care has therefore been taken, in constructing this MIB, to define default values for virtually every object, to minimize the amount of parameterization required in the typical case.
That default configuration is as follows:
The ifTable has already been configured    ifSpeed is estimated by the interface drivers
The OSPF Process automatically discovers all IP Interfaces and creates corresponding OSPF Interfaces
The TOS 0 metrics are autonomously derived from ifSpeed
This can be accomplished with a single SET:
The configured system will have the following attributes:
The RouterID will be one of the IP addresses of the device
The device will be neither an Area Border Router nor an Autonomous System Border Router.
Every IP Interface, with or without an address, will be an OSPF Interface.
The AreaID of each interface will be 0.0.0.0, the Backbone.
All Broadcast and Point to Point interfaces will be operational.
NBMA Interfaces require the configuration of at least one neighbor.
Timers on all direct interfaces will be:
no direct links to hosts will be configured.
no addresses will be summarized    Metrics, being a measure of bit duration, are unambiguous and intelligent.
No Virtual Links will be configured.
IMPORTS MODULE IDENTITY, OBJECT TYPE, Counter32, Gauge32,
SMI TEXTUAL CONVENTION, TruthValue, RowStatus FROM SNMPv2
ospf MODULE IDENTITY LAST UPDATED "9501201225Z"
PST 1995 ORGANIZATION "IETF OSPF Working Group" CONTACT INFO "
Cisco Systems 519 Lado Drive Santa Barbara, California 93111
The OSPF Metric is defined as an unsigned value in the range
, while 'disabled' indicates that it is not."
Time Durations measured in seconds
Values in excess are precluded as unnecessary and prone to interoperability issues.
"The range of intervals on which hello messages are exchanged.
"The values that one might find or configure for variables bounded by the maximum age of an LSA."
The range of ifIndex InterfaceIndex ::
Potential Priorities for the Designated Router Election DesignatedRouterPriority :
6 0 1 0 0
10 0 1 1 0
14 1 0 0 0
18 1 0 1 0
22 1 1 0 0
26 1 1 1 0
The remaining values are left for future definition.
current DESCRIPTION "A  32 bit  integer
uniquely  identifying  the router in the Autonomous System.
By  convention,  to  ensure  uniqueness,
this should  default  to  the  value  of  one of the router's IP interface addresses.
"The  administrative  status  of  OSPF  in  the router.
The  value 'enabled' denotes that the OSPF Process is active on at least  one  inter  face;  'disabled'  disables
"The current version number of the OSPF  proto  col is 2."
3 } ospfAreaBdrRtrStatus OBJECT TYPE SYNTAX
A flag to note whether this router is an  area border router.
OSPF Version 2, Section 3
Splitting the AS into Areas" ::
{ ospfGeneralGroup 4 } ospfASBdrRtrStatus OBJECT TYPE SYNTAX
A flag to note whether this router is  config  ured as an Autonomous System border router.
"The number of external (LS type 5)  link state advertisements in the link state database."
REFERENCE "OSPF Version 2, Appendix A.4.5
current DESCRIPTION "The 32 bit unsigned sum of the LS checksums of the  external  link state  advertisements
con  tained in the link state  database.
This  sum can  be  used  to determine if there has been a change in a router's link state  database,  and to
compare  the  link state  database  of  two routers."
"The router's support for type of service rout  ing.
" REFERENCE "OSPF Version 2,  Appendix
"The number of  new  link state  advertisements that  have been originated.
This number is in  cremented each time the router originates a new LSA."
"The number of  link state  advertisements  re
This number does not include  newer  instantia  tions  of self originated link state advertise  ments."
The  maximum   number   of   non default
AS  external LSAs entries that can be stored in the link state database.
If the value is  1,
then there is no limit.
When the number of non default AS external LSAs in
a  router's  link state  database  reaches ospfExtLsdbLimit, the router  enters  Overflow  State.
never  holds  more  than ospfExtLsdbLimit
OspfExtLsdbLimit MUST be set identically in all routers attached to the OSPF backbone  and/or  any regular OSPF area.
(i.e., OSPF stub areas and NSSAs are excluded).
A Bit Mask indicating whether  the  router  is forwarding  IP  multicast
datagrams based on the algorithms defined in  the  Multi  cast Extensions to OSPF.
Bit 0, if set, indicates that  the  router  can forward  IP multicast datagrams in the router's directly attached areas (called intra area mul  ticast routing).
Bit 1, if set, indicates that  the  router  can forward  IP  multicast
datagrams  between OSPF areas (called inter area multicast routing).
Bit 2, if set, indicates that  the  router  can forward  IP  multicast  datagrams between Auto  nomous Systems (called inter AS multicast rout  ing).
Only certain combinations of bit  settings  are allowed,  namely: 0 (no multicast forwarding is enabled), 1 (intra area multicasting  only),  3 (intra area  and  inter area  multicasting),  5 (intra area and inter AS  multicasting)  and  7 (multicasting  everywhere).
By default, no mul  ticast forwarding is enabled.
12 } ospfExitOverflowInterval OBJECT TYPE SYNTAX
PositiveInteger MAX ACCESS   read write
that,  after  entering OverflowState,  a  router will attempt to leave OverflowState.
This allows the router to  again originate  non default  AS external LSAs.
When set to 0, the router will not  leave  Overflow  State until restarted.
"The router's support for demand routing.
Area 0.0.0.0, by definition, is the Backbone Area ospfAreaTable OBJECT TYPE SYNTAX   SEQUENCE OF OspfAreaEntry
current DESCRIPTION "Information describing the configured  parame  ters  and cumulative statistics of the router's attached areas.
REFERENCE "OSPF Version 2, Section 6
current DESCRIPTION "Information describing the configured  parame  ters  and  cumulative  statistics of one of the router's attached areas.
A 32 bit integer uniquely identifying an area.
Area ID 0.0.0.0 is used for the OSPF backbone."
ospfAreaEntry 1 } ospfAuthType OBJECT TYPE
MAX ACCESS   read create STATUS   obsolete DESCRIPTION
"The authentication type specified for an area.
Additional authentication types may be assigned locally on a per Area basis.
MAX ACCESS   read create STATUS
"The area's support for importing  AS  external link  state advertisements."
The number of times that the intra area  route table  has  been  calculated  using this area's link state database.
This  is  typically  done using Dijkstra's algorithm."
ospfAreaEntry 4 } ospfAreaBdrRtrCount OBJECT TYPE SYNTAX
"The total number of area border routers reach  able within this area.
This is initially zero, and is calculated in each SPF Pass."
"The total number of Autonomous  System  border routers  reachable  within  this area.
This is initially zero, and is calculated in  each  SPF Pass."
"The total number of link state  advertisements in  this  area's link state database, excluding AS External LSA's."
current DESCRIPTION "The 32 bit unsigned sum of the link state  ad  vertisements'  LS  checksums  contained in this area's link state database.
This sum  excludes external (LS type 5)
The sum can be used to determine if  there  has been  a  change  in a router's link state data  base, and to compare the link state database of two routers.
MAX ACCESS   read create STATUS
"The variable ospfAreaSummary controls the  i
m  port  of  summary LSAs into stub areas.
It has no effect on other areas.
If it is noAreaSummary, the router will neither originate  nor  propagate summary LSAs into the stub area.
It will rely entirely  on  its  de  fault route.
If it is sendAreaSummary, the router will  both summarize and propagate summary LSAs."
ospfAreaEntry 9 } ospfAreaStatus OBJECT
"This variable displays the status of
Setting it to 'invalid' has the effect of rendering it inoperative.
The internal  effect (row removal) is implementation dependent."
The set of metrics that will be advertised  by a default Area Border Router into a stub area."
given Type  of  Service  that will  be  advertised  by  a default Area Border Router into a stub area.
ospfStubMetric BigMetric, ospfStubStatus RowStatus, ospfStubMetricType INTEGER }
current DESCRIPTION "The 32 bit identifier for the Stub  Area.
On creation,  this  can  be  derived  from the in  stance."
The  Type  of  Service  associated  with   the metric.
On creation, this can be derived from the instance."
"The metric value applied at the indicated type of  service.
By default, this equals the least metric at the type of service among the  inter  faces to other areas."
"This variable displays the status of
Setting it to 'invalid' has the effect of rendering it inoperative.
The internal  effect (row removal) is implementation dependent."
"This variable displays the type of metric  ad  vertised as a default route.
SEQUENCE OF OspfLsdbEntry MAX ACCESS
The OSPF Process's Link State Database."
Section 12  Link  State  Adver
current DESCRIPTION "A single Link State Advertisement.
ospfLsdbAdvertisement OCTET STRING } ospfLsdbAreaId OBJECT
The 32 bit identifier of the Area  from  which the LSA was received."
External Link State Advertisements are permitted   for backward compatibility, but should be displayed in   the ospfExtLsdbTable rather than here.
"The type  of  the  link  state  advertisement.
Each  link state type has a separate advertise  ment format.
REFERENCE "OSPF Version 2, Appendix A.4.1
"The Link State ID is an LS Type Specific field containing either a Router ID or an IP Address; it identifies the piece of the  routing  domain that is being described by the advertisement."
current DESCRIPTION "The 32 bit number that uniquely identifies the originating router in the Autonomous System."
Thus, a typical sequence number will be very negative.
"The sequence number field is a  signed  32 bit integer.
It  is used to detect old and dupli  cate link state advertisements.
The  space  of sequence  numbers  is  linearly  ordered.
The larger the sequence number the more recent  the advertisement."
OSPF Version  2,  Section  12.1.6
"This field is the age of the link state adver  tisement in seconds.
"This field is the  checksum  of  the  complete contents  of  the  advertisement, excepting the age field.
The age field is excepted  so  that an   advertisement's  age
can  be  incremented without updating the  checksum.
The  checksum used  is  the same that is used for ISO connec  tionless datagrams; it is commonly referred  to as the Fletcher checksum.
MAX ACCESS   read only STATUS
"The entire Link State Advertisement, including its header."
Section 12  Link  State  Adver
SEQUENCE OF OspfAreaRangeEntry MAX ACCESS
A range if IP addresses  specified  by  an  IP address/IP  network  mask  pair.
A range if IP addresses  specified  by  an  IP address/IP  network  mask  pair.
read only STATUS   obsolete DESCRIPTION "
Range  is  to  be  found within."
read only STATUS   obsolete DESCRIPTION "
The IP Address of the Net or Subnet  indicated by the range.
read create STATUS   obsolete DESCRIPTION
"The Subnet Mask that pertains to  the  Net  or Subnet."
read create STATUS   obsolete DESCRIPTION
"This variable displays the status of
Setting it to 'invalid' has the effect of rendering it inoperative.
The internal  effect (row removal) is implementation dependent."
{ advertiseMatching (1), doNotAdvertiseMatching (2) }
MAX ACCESS   read create STATUS   obsolete DESCRIPTION
"Subnets subsumed by ranges either trigger  the advertisement  of the indicated summary (adver  tiseMatching), or result in  the  subnet's  not being advertised at all outside the area."
The list of Hosts, and their metrics, that the router will advertise as host routes."
REFERENCE "OSPF Version 2, Appendix C.6  Host route param  eters" ::
{ ospf 6 } ospfHostEntry OBJECT
"A metric to be advertised, for a given type of service, when a given host is reachable.
ospfHostStatus RowStatus, ospfHostAreaID AreaID } ospfHostIpAddress OBJECT TYPE SYNTAX
The IP Address of the Host."
"The Type of Service of the route being config  ured.
"The Metric to be advertised."
} ospfHostStatus OBJECT TYPE SYNTAX
"This variable displays the status of
Setting it to 'invalid' has the effect of rendering it inoperative.
The internal  effect (row removal) is implementation dependent."
The Area the Host Entry is to be found within.
SEQUENCE OF OspfIfEntry MAX ACCESS
The OSPF Interface Table describes the  inter  faces from the viewpoint of OSPF."
The OSPF Interface Entry describes one  inter  face from the viewpoint of OSPF.
PositiveInteger, ospfIfPollInterval PositiveInteger, ospfIfState INTEGER, ospfIfDesignatedRouter IpAddress, ospfIfBackupDesignatedRouter
IpAddress, ospfIfEvents Counter32, ospfIfAuthType INTEGER, ospfIfAuthKey OCTET STRING, ospfIfStatus RowStatus, ospfIfMulticastForwarding INTEGER, ospfIfDemand TruthValue }
The IP address of this OSPF interface."
read only STATUS   current DESCRIPTION "For the purpose of easing
the  instancing  of addressed   and  addressless  interfaces;  This variable takes the value 0 on  interfaces  with IP  Addresses,  and  the corresponding value of ifIndex for interfaces having no IP Address."
MAX ACCESS   read create STATUS
A 32 bit integer uniquely identifying the area to  which  the  interface  connects.
Area  ID 0.0.0.0 is used for the OSPF backbone."
MAX ACCESS   read create STATUS
current DESCRIPTION "The OSPF interface type.
By way of a default, this field may be intuited from the corresponding value of ifType.
Broad  cast LANs, such as  Ethernet  and  IEEE  802.5, take  the  value
'broadcast', X.25 and similar technologies take the value 'nbma',  and  links that  are  definitively point to point take the value 'pointToPoint'."
The OSPF  interface's  administrative  status.
The  value formed on the interface, and the in  terface will be advertised as an internal route to  some  area.
The  value 'disabled' denotes that the interface is external to OSPF."
DesignatedRouterPriority MAX ACCESS   read create STATUS
The  priority  of  this  interface.
Used  in multi access  networks,  this  field is used in the designated router election algorithm.
The value 0 signifies that the router is not eligi
designated  router  on  this particular  network.
In the event of a tie in this value, routers will use their Router ID as a tie breaker.
"The estimated number of seconds  it  takes  to transmit  a  link state update packet over this interface."
"The number of seconds between  link state  ad  vertisement  retransmissions,  for  adjacencies belonging to this  interface.
This  value  is also used when retransmitting database descrip  tion and link state request packets.
"The length of time, in  seconds,  between  the Hello  packets that the router sends on the in  terface.
This value must be the same  for  all routers attached to a common network.
PositiveInteger MAX ACCESS   read create STATUS
"The number of seconds that
a  router's  Hello packets  have  not been seen before it's neigh
bors declare the router down.
This  should  be some  multiple  of  the  Hello  interval.
This value must be the same for all routers attached to a common network.
PositiveInteger MAX ACCESS   read create STATUS
The larger time interval, in seconds,  between the  Hello  packets  sent  to  an inactive non  broadcast multi  access neighbor.
current DESCRIPTION "The OSPF Interface State."
The IP Address of the Designated Router."
The  IP  Address  of  the  Backup   Designated Router.
"The number of times this  OSPF  interface  has changed its state, or an error has occurred."
MAX ACCESS   read create STATUS
current DESCRIPTION "The Authentication Key.
If the Area's Author  ization  Type  is  simplePassword,  and the key length is shorter than 8 octets, the agent will left adjust and zero fill to 8 octets.
need  no authentication key, and simple password authen  tication cannot use a key of more  than  8  oc  tets.
Larger keys are useful only with authen  tication mechanisms not specified in this docu  ment.
When read, ospfIfAuthKey always returns an  Oc  tet String of length zero.
" REFERENCE "OSPF Version 2, Section 9
"This variable displays the status of
Setting it to 'invalid' has the effect of rendering it inoperative.
The internal  effect (row removal) is implementation dependent."
"The way multicasts should  forwarded  on  this interface;  not  forwarded,  forwarded  as data link multicasts, or forwarded as data link uni  casts.
Data link multicasting is not meaning  ful on point to point and NBMA interfaces,  and setting ospfMulticastForwarding to 0
effective  ly disables all multicast forwarding.
current DESCRIPTION "Indicates whether Demand OSPF procedures (hel  lo supression to FULL neighbors and setting the DoNotAge flag on proogated LSAs) should be per  formed on this interface.
MAX ACCESS   read create STATUS
"The authentication type specified for
Additional  authentication types may be assigned locally.
Types of service, as defined by RFC 791, have the ability   to request low delay, high bandwidth, or reliable linkage.
For the purposes of this specification, the measure of   bandwidth
/ ifSpeed   is the default value.
For multiple link interfaces, note   that ifSpeed is the sum of the individual link speeds.
Routes that are not specified use the default (TOS 0)
The TOS metrics for  a  non virtual  interface identified by the interface index."
A particular TOS metric for a non virtual  in  terface identified by the interface index.
The IP address of this OSPF interface.
On row creation,  this  can  be  derived  from the in  stance."
read only STATUS   current DESCRIPTION "For the purpose of easing
the  instancing  of addressed   and  addressless  interfaces;  This variable takes the value 0 on  interfaces  with IP  Addresses, and the value of ifIndex for in  terfaces having no IP Address.
On  row  crea  tion, this can be derived from the instance."
"The type of service metric  being  referenced.
On  row  creation, this can be derived from the instance."
The metric of using this type  of  service  on this interface.
The default value of the TOS 0 Metric is 10^8 / ifSpeed."
"This variable displays the status of
Setting it to 'invalid' has the effect of rendering it inoperative.
The internal  effect (row removal) is implementation dependent."
SEQUENCE OF OspfVirtIfEntry MAX ACCESS
current DESCRIPTION "Information about this router's virtual inter  faces.
OSPF Version  2,  Appendix  C.4
current DESCRIPTION "Information about a single Virtual Interface.
ospfVirtIfRetransInterval UpToMaxAge, ospfVirtIfHelloInterval HelloRange, ospfVirtIfRtrDeadInterval PositiveInteger, ospfVirtIfState INTEGER, ospfVirtIfEvents Counter32, ospfVirtIfAuthType INTEGER, ospfVirtIfAuthKey OCTET STRING, ospfVirtIfStatus RowStatus } ospfVirtIfAreaId OBJECT
that  the   Virtual   Link traverses.
"The Router ID of the Virtual Neighbor."
"The estimated number of seconds  it  takes  to transmit  a link  state update packet over this interface."
"The number of seconds between  link state  ad  vertisement  retransmissions,  for  adjacencies belonging to this  interface.
This  value  is also used when retransmitting database descrip  tion  and  link state  request  packets.
This value  should  be well over the expected round  trip time."
"The length of time, in  seconds,  between  the Hello  packets that the router sends on the in  terface.
This value must be the same  for  the virtual neighbor."
PositiveInteger MAX ACCESS   read create STATUS
"The number of seconds that
a  router's  Hello packets  have  not been seen before it's neigh
bors declare the router down.
This  should  be some  multiple  of  the  Hello  interval.
This value must be the same for the  virtual  neigh  bor."
current DESCRIPTION "OSPF virtual interface states.
MAX ACCESS   read create STATUS
"If Authentication Type is simplePassword,  the device  will left adjust and zero fill to 8 oc  tets.
need  no authentication key, and simple password authen  tication cannot use a key of more  than  8  oc  tets.
Larger keys are useful only with authen  tication mechanisms not specified in this docu  ment.
When  read,  ospfVifAuthKey  always  returns  a string of length zero.
" REFERENCE "OSPF Version 2, Section 9
"This variable displays the status of
Setting it to 'invalid' has the effect of rendering it inoperative.
The internal  effect (row removal) is implementation dependent."
MAX ACCESS   read create STATUS
"The authentication type specified for a virtu  al  interface.
Additional authentication types may be assigned locally.
A table of non virtual neighbor information."
REFERENCE "OSPF Version 2, Section 10
The information regarding a single neighbor.
" REFERENCE "OSPF Version 2, Section 10
"The IP address this neighbor is using  in  its IP  Source  Address.
Note that, on addressless links, this will not be 0.0.0.0,
but  the  ad  dress of another of the neighbor's interfaces."
read only STATUS   current DESCRIPTION "On an interface having an  IP  Address,  zero.
On  addressless  interfaces,  the corresponding value of ifIndex in the Internet Standard  MIB.
On  row  creation, this can be derived from the instance."
A 32 bit integer (represented as a type  IpAd  dress)  uniquely  identifying  the  neighboring router in the Autonomous System."
current DESCRIPTION "A Bit Mask corresponding to the neighbor's op  tions field.
Bit 0, if set, indicates that the  system  will operate  on  Type of Service metrics other than TOS 0.
If zero, the neighbor will  ignore  all metrics except the TOS 0 metric.
Bit 1, if set, indicates  that  the  associated area  accepts and operates on external informa  tion; if zero, it is a stub area.
Bit 2, if set, indicates that the system is ca  pable  of routing IP Multicast datagrams; i.e., that it implements the Multicast Extensions  to OSPF.
Bit 3, if set, indicates  that  the  associated area  is  an  NSSA.
These areas are capable of carrying type 7 external advertisements,  which are  translated into type 5 external advertise  ments at NSSA borders.
DesignatedRouterPriority MAX ACCESS   read create STATUS
"The priority of this neighbor in the designat  ed router election algorithm.
nifies that the neighbor is not eligible to be
come  the  designated router on this particular network.
"The State of the relationship with this Neigh  bor."
"The number of times this neighbor relationship has changed state, or an error has occurred."
The  current  length  of  the   retransmission queue."
"This variable displays the status of
Setting it to 'invalid' has the effect of rendering it inoperative.
The internal  effect (row removal) is implementation dependent."
9 } ospfNbmaNbrPermanence OBJECT TYPE SYNTAX   INTEGER
configured address } MAX ACCESS   read
"This variable displays the status of
'dynamic'  and  'permanent' refer to how the neighbor became known."
This table describes all virtual neighbors.
SEQUENCE OF OspfVirtNbrEntry MAX ACCESS
A table of virtual neighbor information."
current DESCRIPTION "Virtual neighbor information.
current DESCRIPTION "A  32 bit  integer
uniquely  identifying  the neighboring router in the Autonomous System."
this Virtual  Neighbor  is  us  ing."
current DESCRIPTION "A Bit Mask corresponding to the neighbor's op  tions field.
Bit 1, if set, indicates that the  system  will operate  on  Type of Service metrics other than TOS 0.
If zero, the neighbor will  ignore  all metrics except the TOS 0 metric.
Bit 2, if set, indicates  that  the  system  is Network
ie, that it imple  ments OSPF Multicast Routing."
"The number of  times  this  virtual  link  has changed its state, or an error has occurred."
{ ospfVirtNbrEntry 6 } ospfVirtNbrLsRetransQLen OBJECT
The  current  length  of  the   retransmission queue."
current DESCRIPTION "The OSPF Process's Links State Database.
Section 12  Link  State  Adver
current DESCRIPTION "A single Link State Advertisement.
ospfExtLsdbChecksum Integer32, ospfExtLsdbAdvertisement OCTET STRING } ospfExtLsdbType OBJECT TYPE SYNTAX   INTEGER
"The type  of  the  link  state  advertisement.
Each  link state type has a separate advertise  ment format.
REFERENCE "OSPF Version 2, Appendix A.4.1
"The Link State ID is an LS Type Specific field containing either a Router ID or an IP Address; it identifies the piece of the  routing  domain that is being described by the advertisement."
current DESCRIPTION "The 32 bit number that uniquely identifies the originating router in the Autonomous System."
Thus, a typical sequence number will be very negative.
"The sequence number field is a  signed  32 bit integer.
It  is used to detect old and dupli  cate link state advertisements.
The  space  of sequence  numbers  is  linearly  ordered.
The larger the sequence number the more recent  the advertisement."
OSPF Version  2,  Section  12.1.6
"This field is the age of the link state adver  tisement in seconds.
"This field is the  checksum  of  the  complete contents  of  the  advertisement, excepting the age field.
The age field is excepted  so  that an   advertisement's  age
can  be  incremented without updating the  checksum.
The  checksum used  is  the same that is used for ISO connec  tionless datagrams; it is commonly referred  to as the Fletcher checksum.
"The entire Link State Advertisement, including its header."
Section 12  Link  State  Adver
The IP Forwarding Table defines a number of objects for use by   the routing protocol to externalize its information.
Most of   the variables (ipForwardDest, ipForwardMask, ipForwardPolicy,   ipForwardNextHop, ipForwardIfIndex, ipForwardType,   ipForwardProto, ipForwardAge, and ipForwardNextHopAS) are   defined there.
Those that leave some discretion are defined here.
ipCidrRouteProto is, of course, ospf (13).
ipCidrRouteAge is the time since the route was first calculated,   as opposed to the time since the last SPF run.
ipCidrRouteInfo is an OBJECT IDENTIFIER for use by the routing   protocol.
The following values shall be found there depending   on the way the route was calculated.
ipCidrRouteMetric1 is, by definition, the primary routing
Therefore, it should be the metric that route   selection is based on.
For intra area and inter area routes,   it is an OSPF metric.
For External Type 1 (comparable value)   routes, it is an OSPF metric plus the External Metric.
For   external Type 2 (non comparable value) routes, it is the   external metric.
ipCidrRouteMetric2 is, by definition, a secondary routing   metric.
Therefore, it should be the metric that breaks a tie   among routes having equal metric1 values and the same   calculation rule.
For intra area, inter area routes, and   External Type 1 (comparable value) routes, it is unused.
For   external Type 2 (non comparable value) routes, it is the metric   to the AS border router.
ipCidrRouteMetric3, ipCidrRouteMetric4, and ipCidrRouteMetric5 are   unused.
The OSPF Area Aggregate Table
"A range of IP addresses  specified  by  an  IP address/IP  network  mask  pair.
For example, class B address range of X.X.X.X with a network mask  of  255.255.0.0 includes all IP addresses from X.X.0.0  to  X.X.255.255.
that  if ranges  are configured such that one range sub  sumes
and  10.1.0.0 mask 255.255.0.0), the most specific match is the preferred one.
"A range of IP addresses  specified  by  an  IP address/IP  network  mask  pair.
For example, class B address range of X.X.X.X with a network mask  of  255.255.0.0 includes all IP addresses from X.X.0.0  to  X.X.255.255.
that  if ranges are range configured such that one range subsumes another  range
and  10.1.0.0 mask 255.255.0.0), the most specific match is the preferred one.
Appendix C.2  Area parameters" INDEX { ospfAreaAggregateAreaID
AreaID, ospfAreaAggregateLsdbType INTEGER, ospfAreaAggregateNet IpAddress, ospfAreaAggregateMask IpAddress, ospfAreaAggregateStatus RowStatus, ospfAreaAggregateEffect INTEGER } ospfAreaAggregateAreaID
The Area the Address Aggregate is to be  found within."
"The type of the Address Aggregate.
This field specifies  the  Lsdb type that this Address Ag  gregate applies to."
REFERENCE "OSPF Version 2, Appendix A.4.1
The IP Address of the Net or Subnet  indicated by the range.
"The Subnet Mask that pertains to  the  Net  or Subnet."
"This variable displays the status of
Setting it to 'invalid' has the effect of rendering it inoperative.
The internal  effect (row removal) is implementation dependent."
{ advertiseMatching (1), doNotAdvertiseMatching (2) }
MAX ACCESS   read create STATUS
"Subnets subsumed by ranges either trigger  the advertisement  of  the indicated aggregate (ad  vertiseMatching), or result in the subnet's not being advertised at all outside the area."
ospfCompliance MODULE COMPLIANCE STATUS  current DESCRIPTION
The compliance statement " MODULE
OBJECT GROUP OBJECTS { ospfRouterId, ospfAdminStat, ospfVersionNumber, ospfAreaBdrRtrStatus, ospfASBdrRtrStatus, ospfExternLsaCount, ospfExternLsaCksumSum, ospfTOSSupport, ospfOriginateNewLsas, ospfRxNewLsas, ospfExtLsdbLimit,
ospfMulticastExtensions, ospfExitOverflowInterval, ospfDemandExtensions } STATUS
"These objects are required for OSPF systems."
OBJECT GROUP OBJECTS { ospfAreaId, ospfImportAsExtern, ospfSpfRuns, ospfAreaBdrRtrCount, ospfAsBdrRtrCount, ospfAreaLsaCount, ospfAreaLsaCksumSum, ospfAreaSummary, ospfAreaStatus } STATUS  current DESCRIPTION
"These objects are required  for  OSPF  systems supporting areas."
OBJECT GROUP OBJECTS { ospfStubAreaId, ospfStubTOS, ospfStubMetric, ospfStubStatus,
ospfStubMetricType } STATUS  current DESCRIPTION
"These objects are required  for  OSPF  systems supporting stub areas."
OBJECT GROUP OBJECTS { ospfLsdbAreaId, ospfLsdbType, ospfLsdbLsid, ospfLsdbRouterId, ospfLsdbSequence, ospfLsdbAge, ospfLsdbChecksum, ospfLsdbAdvertisement } STATUS  current DESCRIPTION
"These objects are required  for  OSPF  systems that display their link state database."
"These objects are required for  non CIDR  OSPF systems that support multiple areas."
OBJECT GROUP OBJECTS { ospfHostIpAddress, ospfHostTOS, ospfHostMetric, ospfHostStatus,
ospfHostAreaID } STATUS  current DESCRIPTION
"These objects are required  for  OSPF  systems that support attached hosts."
"These objects are required for OSPF systems."
OBJECT GROUP OBJECTS { ospfIfMetricIpAddress, ospfIfMetricAddressLessIf, ospfIfMetricTOS, ospfIfMetricValue, ospfIfMetricStatus } STATUS  current DESCRIPTION
"These objects are required for OSPF systems."
"These objects are required for OSPF systems."
"These objects are required for OSPF systems."
OBJECT GROUP OBJECTS { ospfVirtNbrArea, ospfVirtNbrRtrId, ospfVirtNbrIpAddr, ospfVirtNbrOptions, ospfVirtNbrState, ospfVirtNbrEvents, ospfVirtNbrLsRetransQLen, ospfVirtNbrHelloSuppressed } STATUS
"These objects are required for OSPF systems."
"These objects are required  for  OSPF  systems that display their link state database."
"These objects are required for OSPF systems."
Traps OSPF is an event driven routing protocol, where an event can be a change in an OSPF interface's link level status, the expiration of an OSPF timer or the reception of an OSPF protocol packet.
Many of the actions that OSPF takes as a result of these events will result in a change of the routing topology.
As routing topologies become large and complex it is often difficult to locate the source of a topology change or unpredicted routing path by polling a large number or routers.
Another approach is to notify a network manager of potentially critical OSPF events with SNMP traps.
This section defines a set of traps, objects and mechanisms to enhance the ability to manage IP internetworks which use OSPF as its IGP.
It is an optional but useful extension to the OSPF MIB.
Format Of Trap Definitions Section 7 contains contains the trap definitions.
The mechanism for sending traps is straight forward.
When an exception event occurs, the application notifies the local agent who sends a trap to the appropriate SNMP management stations.
The message includes the trap type and may include a list of trap specific variables.
A new object is defined in section 3.2 that will allow a network manager to enable or disable particular OSPF traps.
Section 5 gives the trap definitions which includes the variable lists.
The router ID of the originator of the trap is included in the variable list so that the network manager may easily determine the source of the trap.
To limit the frequency of OSPF traps, the following additional mechanisms are suggested.
The majority of critical events occur when OSPF is enabled on a router, at which time the designated router is elected and neighbor adjacencies are formed.
During this initial period a potential flood of traps is unnecessary since the events are expected.
To avoid unnecessary traps, a router should not originate expected OSPF interface related traps until two of that interface's dead timer intervals have elapsed.
The expected OSPF interface traps are ospfIfStateChange, ospfVirtIfStateChange, ospfNbrStateChange, ospfVirtNbrStateChange, ospfTxRetranmit and ospfVirtIfTxRetransmit.
Additionally, ospfMaxAgeLsa and ospfOriginateLsa traps should not be originated until two dead timer intervals have elapsed where the dead timer interval used should be the dead timer with the smallest value.
The mechanism for throttling the traps is similar to the mechanism explained in RFC 1224 [11], section 5.
The basic idea is that there is a sliding window in seconds and an upper bound on the number of traps that may be generated within this window.
Unlike RFC 1224, traps are not sent to inform the network manager that the throttling mechanism has kicked in.
A single window should be used to throttle all OSPF traps types except for the ospfLsdbOverflow and the ospfLsdbApproachingOverflow trap which should not be throttled.
For example, if the window time is 3, the upper bound is 3 and the events that would cause trap types 1,3,5 and 7 occur within a 3 second period, the type 7 trap should not be generated.
Appropriate values are 7 traps with a window time of 10 seconds.
One Trap Per OSPF Event Several of the traps defined in section 5 are generated as the result of finding an unusual condition while parsing an OSPF packet or a processing a timer event.
There may be more than one unusual condition detected while handling the event.
For example, a link  state update packet may contain several retransmitted link state advertisements (LSAs), or a retransmitted database description packet may contain several database description entries.
To limit the number of traps and variables, OSPF should generate at most one trap per OSPF event.
Only the variables associated with the first unusual condition should be included with the trap.
Similarly, if more than one type of unusual condition is encountered while parsing the packet, only the first event will generate a trap.
Many of the tables in the OSPF MIB contain generalized event counters.
By enabling the traps defined in this document a network manager can obtain more specific information about these events.
A network manager may want to poll these event counters and enable specific OSPF traps when a particular counter starts increasing abnormally.
The following table shows the relationship between the event counters defined in the OSPF MIB and the trap types defined in section 5.
IMPORTS MODULE IDENTITY, OBJECT TYPE, NOTIFICATION TYPE,
SMI MODULE COMPLIANCE, OBJECT GROUP FROM SNMPv2 CONF ospfRouterId, ospfIfIpAddress, ospfAddressLessIf, ospfIfState, ospfVirtIfAreaId, ospfVirtIfNeighbor, ospfVirtIfState, ospfNbrIpAddr, ospfNbrAddressLessIndex, ospfNbrRtrId,
ospfNbrState, ospfVirtNbrArea, ospfVirtNbrRtrId, ospfVirtNbrState, ospfLsdbType, ospfLsdbLsid, ospfLsdbRouterId, ospfLsdbAreaId, ospfExtLsdbLimit, ospf FROM OSPF MIB; ospfTrap MODULE IDENTITY LAST UPDATED "9501201225Z"
519 Lado Drive Santa Barbara, California 93111
The MIB module to describe traps for  the  OSPF Version 2 Protocol."
The following are support objects for the OSPF traps.
current DESCRIPTION "A four octet string serving as a bit  map  for the trap events defined by the OSPF traps.
This object is used to enable and  disable  specific OSPF
where  a  1  in  the  bit  field represents enabled.
The right most bit  (least significant) represents trap 0."
current DESCRIPTION "Potential types  of  configuration  conflicts.
Used  by the ospfConfigError and ospfConfigVir  tError traps."
hello (1), dbDescript (2), lsReq (3), lsUpdate (4), lsAck (5) } MAX ACCESS   read only STATUS
current DESCRIPTION "OSPF packet types."
The IP address of an inbound packet that  can  not be identified by a neighbor instance."
The originator of the trap
"An ospfIfStateChange trap signifies that there has been a change in the state of a non virtual OSPF interface.
This trap should  be  generated when  the interface state regresses (e.g., goes from Dr to Down) or progresses  to  a  terminal state  (i.e.,  Point to Point, DR Other, Dr, or Backup)."
An ospfIfStateChange trap signifies that there has  been a change in the state of an OSPF vir  tual interface.
This trap should be generated when  the  inter  face  state
regresses  (e.g., goes from Point  to Point to Down) or progresses to  a  terminal state (i.e., Point to Point)."
that there  has been a change in the state of a non  virtual OSPF neighbor.
This  trap  should  be generated  when  the  neighbor  state regresses (e.g., goes from Attempt or Full  to  1 Way  or Down)  or progresses to a terminal state (e.g., 2 Way or Full).
When an  neighbor  transitions from  or  to Full on non broadcast multi access and broadcast networks, the trap should be gen  erated  by the designated router.
A designated router transitioning to Down will be  noted  by ospfIfStateChange."
An ospfIfStateChange trap signifies that there has  been a change in the state of an OSPF vir  tual neighbor.
This trap should  be  generated when  the  neighbor state regresses (e.g., goes from Attempt or  Full  to  1 Way  or  Down)  or progresses to a terminal state (e.g., Full)."
The originator of the trap
that  a packet  has  been received on a non virtual in  terface  from
a  router  whose   configuration parameters  conflict  with this router's confi  guration parameters.
should  cause  a  trap only if it prevents an adjacency from forming."
Note that the event optionMismatch should  cause a trap only if it prevents an ad  jacency from forming."
"An ospfIfAuthFailure  trap  signifies  that  a packet  has  been received on a non virtual in  terface from a router whose authentication  key or  authentication
conflicts  with  this router's authentication key  or  authentication type."
An ospfIfRxBadPacket trap  signifies  that  an OSPF  packet has been received on a non virtual interface that cannot be parsed."
an OSPF  packet  has  been retransmitted on a non  virtual interface.
All packets that may be re  transmitted  are associated with an LSDB entry.
The LS type, LS ID, and Router ID are  used  to identify the LSDB entry."
an OSPF packet has been retransmitted on a virtual interface.
All packets that may be retransmit  ted  are  associated with an LSDB entry.
The LS type, LS ID, and Router ID are used to identify the LSDB entry."
An ospfOriginateLsa trap signifies that a  new LSA  has  been originated by this router.
This trap should not be invoked for simple refreshes of  LSAs  (which happesn every 30 minutes), but instead will only be invoked
when  an  LSA  is (re)originated due to a topology change.
tionally, this trap does not include LSAs  that are  being  flushed  because  they have reached MaxAge."
that  one  of the LSA in the router's link state database has aged to MaxAge.
that  the number of LSAs in the router's link state data  base has exceeded ospfExtLsdbLimit.
signifies that  the  number of LSAs in the router's link  state database has exceeded ninety  percent  of ospfExtLsdbLimit."
The compliance statement " MODULE
OBJECT GROUP OBJECTS { ospfSetTrap, ospfConfigErrorType, ospfPacketType, ospfPacketSrc
"These objects are required  to  control  traps from OSPF systems."
Security Considerations Security issues are not discussed in this memo.
