- contents:
  - "        Encoding Three Pre-Congestion Notification (PCN) States\n       in the
    IP Header Using a Single Diffserv Codepoint (DSCP)\n"
  title: __initial_text__
- contents:
  - "Abstract\n   The objective of Pre-Congestion Notification (PCN) is to protect
    the\n   quality of service (QoS) of inelastic flows within a Diffserv domain.\n
    \  The overall rate of PCN-traffic is metered on every link in the PCN-\n   domain,
    and PCN-packets are appropriately marked when certain\n   configured rates are
    exceeded.  Egress nodes pass information about\n   these PCN-marks to Decision
    Points that then decide whether to admit\n   or block new flow requests or to
    terminate some already admitted\n   flows during serious pre-congestion.\n   This
    document specifies how PCN-marks are to be encoded into the IP\n   header by reusing
    the Explicit Congestion Notification (ECN)\n   codepoints within a PCN-domain.
    \ The PCN wire protocol for non-IP\n   protocol headers will need to be defined
    elsewhere.  Nonetheless,\n   this document clarifies the PCN encoding for MPLS
    in an informational\n   appendix.  The encoding for IP provides for up to three
    different PCN\n   marking states using a single Diffserv codepoint (DSCP): not-marked\n
    \  (NM), threshold-marked (ThM), and excess-traffic-marked (ETM).\n   Hence, it
    is called the 3-in-1 PCN encoding.  This document obsoletes\n   RFC 5696.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    5741.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc6660.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2012 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (http://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .
    . . . . . .  3\n     1.1.  Requirements Language  . . . . . . . . . . . . . .
    . . . .  4\n   2.  Definitions and Abbreviations  . . . . . . . . . . . . . .
    . .  4\n     2.1.  Terminology  . . . . . . . . . . . . . . . . . . . . . . .
    \ 4\n     2.2.  List of Abbreviations  . . . . . . . . . . . . . . . . . .  5\n
    \  3.  Definition of 3-in-1 PCN Encoding  . . . . . . . . . . . . . .  6\n   4.
    \ Requirements for and Applicability of 3-in-1 PCN Encoding  . .  7\n     4.1.
    \ PCN Requirements . . . . . . . . . . . . . . . . . . . . .  7\n     4.2.  Requirements
    Imposed by Tunnelling . . . . . . . . . . . .  7\n     4.3.  Applicable Environments
    for the 3-in-1 PCN Encoding  . . .  8\n   5.  Behaviour of a PCN-node to Comply
    with the 3-in-1 PCN\n       Encoding . . . . . . . . . . . . . . . . . . . . .
    . . . . . .  8\n     5.1.  PCN-Ingress-Node Behaviour . . . . . . . . . . . .
    . . . .  8\n     5.2.  PCN-Interior-Node Behaviour  . . . . . . . . . . . . .
    . . 11\n       5.2.1.  Behaviour Common to All PCN-Interior-Nodes . . . . . .
    11\n       5.2.2.  Behaviour of PCN-Interior-Nodes Using Two\n               PCN-Markings
    . . . . . . . . . . . . . . . . . . . . . 11\n       5.2.3.  Behaviour of PCN-Interior-Nodes
    Using One\n               PCN-Marking  . . . . . . . . . . . . . . . . . . . .
    . 12\n     5.3.  PCN-Egress-Node Behaviour  . . . . . . . . . . . . . . . . 13\n
    \  6.  Backward Compatibility . . . . . . . . . . . . . . . . . . . . 13\n     6.1.
    \ Backward Compatibility with ECN  . . . . . . . . . . . . . 13\n     6.2.  Backward
    Compatibility with the Encoding in RFC 5696 . . . 14\n   7.  Security Considerations
    \ . . . . . . . . . . . . . . . . . . . 14\n   8.  Conclusions  . . . . . . .
    . . . . . . . . . . . . . . . . . . 15\n   9.  Acknowledgements . . . . . . .
    . . . . . . . . . . . . . . . . 15\n   10. References . . . . . . . . . . . .
    . . . . . . . . . . . . . . 15\n     10.1. Normative References . . . . . . .
    . . . . . . . . . . . . 15\n     10.2. Informative References . . . . . . . .
    . . . . . . . . . . 16\n   Appendix A.  Choice of Suitable DSCPs  . . . . . .
    . . . . . . . . 18\n   Appendix B.  Coexistence of ECN and PCN  . . . . . . .
    . . . . . . 19\n   Appendix C.  Example Mapping between Encoding of PCN-Marks
    in\n                IP and in MPLS Shim Headers . . . . . . . . . . . . . 22\n
    \  Appendix D.  Rationale for Difference between the Schemes\n                Using
    One PCN-Marking . . . . . . . . . . . . . . . . 23\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   The objective of Pre-Congestion Notification (PCN) [RFC5559]
    is to\n   protect the quality of service (QoS) of inelastic flows within a\n   Diffserv
    domain in a simple, scalable, and robust fashion.  Two\n   mechanisms are used:
    admission control, to decide whether to admit or\n   block a new flow request,
    and flow termination to terminate some\n   existing flows during serious pre-congestion.
    \ To achieve this, the\n   overall rate of PCN-traffic is metered on every link
    in the domain,\n   and PCN-packets are appropriately marked when certain configured\n
    \  rates are exceeded.  These configured rates are below the rate of the\n   link,
    thus providing notification to boundary nodes about overloads\n   before any real
    congestion occurs (hence \"pre-congestion\n   notification\").\n   [RFC5670] provides
    for two metering and marking functions that are\n   generally configured with
    different reference rates.  Threshold-\n   marking marks all PCN packets once
    their traffic rate on a link\n   exceeds the configured reference rate (PCN-threshold-rate).
    \ Excess-\n   traffic-marking marks only those PCN packets that exceed the\n   configured
    reference rate (PCN-excess-rate).  The PCN-excess-rate is\n   typically larger
    than the PCN-threshold-rate [RFC5559].  Egress nodes\n   monitor the PCN-marks
    of received PCN-packets and pass information\n   about these PCN-marks to Decision
    Points that then decide whether to\n   admit new flows or terminate existing flows
    [RFC6661] [RFC6662].\n   The encoding defined in [RFC5696] described how two PCN
    marking\n   states (not-marked and PCN-marked) could be encoded into the IP\n
    \  header using a single Diffserv codepoint.  It defined '01' as an\n   experimental
    codepoint (EXP), along with guidelines for its use.  Two\n   PCN marking states
    are sufficient for the Single Marking edge\n   behaviour [RFC6662].  However,
    PCN-domains utilising the controlled\n   load edge behaviour [RFC6661] require
    three PCN marking states.  This\n   document extends the encoding that originally
    appeared in RFC 5696 by\n   redefining the experimental codepoint as a third PCN
    marking state in\n   the IP header, but still using a single Diffserv codepoint.
    \ This\n   encoding scheme is therefore called the \"3-in-1 PCN encoding\".  It\n
    \  obsoletes the [RFC5696] encoding, which provides only a subset of the\n   same
    capabilities.\n   The full version of the 3-in-1 encoding requires any tunnel
    endpoint\n   within the PCN-domain to support the normal tunnelling rules defined\n
    \  in [RFC6040].  There is one limited exception to this constraint\n   where
    the PCN-domain only uses the excess-traffic-marking behaviour\n   and where the
    threshold-marking behaviour is deactivated.  This is\n   discussed in Section
    5.2.3.1.\n   This document only concerns the PCN wire protocol encoding for IP\n
    \  headers, whether IPv4 or IPv6.  It makes no changes or\n   recommendations
    concerning algorithms for congestion marking or\n   congestion response.  Other
    documents will define the PCN wire\n   protocol for other header types.  Appendix
    C discusses a possible\n   mapping between IP and MPLS.\n"
  - contents:
    - "1.1.  Requirements Language\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\",
      \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\",
      and \"OPTIONAL\" in this\n   document are to be interpreted as described in
      [RFC2119].\n"
    title: 1.1.  Requirements Language
  title: 1.  Introduction
- contents:
  - '2.  Definitions and Abbreviations

    '
  - contents:
    - "2.1.  Terminology\n   The terms PCN-domain, PCN-node, PCN-interior-node, PCN-ingress-node,\n
      \  PCN-egress-node, PCN-boundary-node, PCN-traffic, PCN-packets, and\n   PCN-marking
      are used as defined in [RFC5559].  The following\n   additional terms are defined
      in this document:\n   PCN encoding:  mapping of PCN marking states to specific
      codepoints\n      in the packet header.\n   PCN-compatible Diffserv codepoint:
      \ a Diffserv codepoint indicating\n      packets for which the ECN field carries
      PCN-markings rather than\n      [RFC3168] markings.  Note that an operator configures
      PCN-nodes to\n      recognise PCN-compatible DSCPs, whereas the same DSCP has
      no PCN-\n      specific meaning to a node outside the PCN-domain.\n   Threshold-marked
      codepoint:  a codepoint that indicates a packet has\n      been threshold-marked;
      that is, a packet that has been marked at a\n      PCN-interior-node as a result
      of an indication from the threshold-\n      metering function [RFC5670].  Abbreviated
      to ThM codepoint.\n   Excess-traffic-marked codepoint:  a codepoint that indicates
      packets\n      that have been marked at a PCN-interior-node as a result of an\n
      \     indication from the excess-traffic-metering function [RFC5670].\n      Abbreviated
      to ETM codepoint.\n   Not-marked codepoint:  a codepoint that indicates PCN-packets
      that\n      are not PCN-marked.  Abbreviated to NM codepoint.\n   Not-PCN codepoint:
      \ a codepoint that indicates packets that are not\n      PCN-packets.\n"
    title: 2.1.  Terminology
  - contents:
    - "2.2.  List of Abbreviations\n   The following abbreviations are used in this
      document:\n   o  AF = Assured Forwarding [RFC2597]\n   o  CE = Congestion Experienced
      [RFC3168]\n   o  CS = Class Selector [RFC2474]\n   o  DSCP = Diffserv codepoint\n
      \  o  e2e = end-to-end\n   o  ECN = Explicit Congestion Notification [RFC3168]\n
      \  o  ECT = ECN Capable Transport [RFC3168]\n   o  EF = Expedited Forwarding
      [RFC3246]\n   o  ETM = excess-traffic-marked\n   o  EXP = Experimental\n   o
      \ NM = not-marked\n   o  PCN = Pre-Congestion Notification\n   o  PHB = Per-hop
      behaviour [RFC2474]\n   o  ThM = threshold-marked\n"
    title: 2.2.  List of Abbreviations
  title: 2.  Definitions and Abbreviations
- contents:
  - "3.  Definition of 3-in-1 PCN Encoding\n   The 3-in-1 PCN encoding scheme supports
    networks that need three PCN-\n   marking states to be encoded within the IP header,
    as well as those\n   that need only two.  The full encoding is shown in Figure
    1.\n   +--------+----------------------------------------------------+\n   |        |
    \          Codepoint in ECN field of IP header      |\n   |  DSCP  |               <RFC3168
    codepoint name>             |\n   |        +--------------+-------------+-------------+---------+\n
    \  |        | 00 <Not-ECT> | 10 <ECT(0)> | 01 <ECT(1)> | 11 <CE> |\n   +--------+--------------+-------------+-------------+---------+\n
    \  | DSCP n |    not-PCN   |      NM     |     ThM     |   ETM   |\n   +--------+--------------+-------------+-------------+---------+\n
    \                      Figure 1: 3-in-1 PCN Encoding\n   A PCN-node will be configured
    to recognise certain DSCPs as PCN-\n   compatible.  Appendix A discusses the choice
    of suitable DSCPs.  In\n   Figure 1, 'DSCP n' indicates such a PCN-compatible
    DSCP.  In the PCN-\n   domain, any packet carrying a PCN-compatible DSCP and with
    the ECN-\n   field anything other than 00 (not-PCN) is a PCN-packet as defined
    in\n   [RFC5559].\n   PCN-nodes MUST interpret the ECN field of a PCN-packet using
    the\n   3-in-1 PCN encoding, rather than [RFC3168].  This does not change the\n
    \  behaviour for any packet with a DSCP that is not PCN-compatible, or\n   for
    any node outside a PCN-domain.  In all such cases, the 3-in-1\n   encoding is
    not applicable, and so by default the node will interpret\n   the ECN field using
    [RFC3168].\n   When using the 3-in-1 encoding, the codepoints of the ECN field
    have\n   the following meanings:\n   not-PCN:  indicates a non-PCN-packet, i.e.,
    a packet that uses a PCN-\n      compatible DSCP but is not subject to PCN metering
    and marking.\n   NM:  not-marked.  Indicates a PCN-packet that has not yet been
    marked\n      by any PCN marker.\n   ThM:  threshold-marked.  Indicates a PCN-packet
    that has been marked\n      by a threshold-marker [RFC5670].\n   ETM:  excess-traffic-marked.
    \ Indicates a PCN-packet that has been\n      marked by an excess-traffic-marker
    [RFC5670].\n"
  title: 3.  Definition of 3-in-1 PCN Encoding
- contents:
  - '4.  Requirements for and Applicability of 3-in-1 PCN Encoding

    '
  - contents:
    - "4.1.  PCN Requirements\n   In accordance with the PCN architecture [RFC5559],
      PCN-ingress-nodes\n   control packets entering a PCN-domain.  Packets belonging
      to PCN-\n   controlled flows are subject to PCN-metering and PCN-marking, and\n
      \  PCN-ingress-nodes mark them as not-marked (PCN-colouring).  All nodes\n   in
      the PCN-domain perform PCN-metering and PCN-mark PCN-packets if\n   needed.
      \ There are two different metering and marking behaviours:\n   threshold-marking
      and excess-traffic-marking [RFC5670].  Some edge\n   behaviours require only
      a Single Marking behaviour [RFC6662], others\n   require both [RFC6661].  In
      the latter case, three PCN marking states\n   are needed: not-marked (NM) to
      indicate not-marked packets,\n   threshold-marked (ThM) to indicate packets
      marked by the threshold-\n   marker, and excess-traffic-marked (ETM) to indicate
      packets marked by\n   the excess-traffic-marker [RFC5670].  Threshold-marking
      and excess-\n   traffic-marking are configured to start marking packets at different\n
      \  load conditions, so one marking behaviour indicates more severe pre-\n   congestion
      than the other.  Therefore, a fourth PCN marking state\n   indicating that a
      packet is marked by both markers is not needed.\n   However, a fourth codepoint
      is required to indicate packets that use\n   a PCN-compatible DSCP but do not
      use PCN-marking (the not-PCN\n   codepoint).\n   In all current PCN edge behaviours
      that use two marking behaviours\n   [RFC5559] [RFC6661], excess-traffic-marking
      is configured with a\n   larger reference rate than threshold-marking.  We take
      this as a rule\n   and define excess-traffic-marked as a more severe PCN-mark
      than\n   threshold-marked.\n"
    title: 4.1.  PCN Requirements
  - contents:
    - "4.2.  Requirements Imposed by Tunnelling\n   [RFC6040] defines rules for the
      encapsulation and decapsulation of\n   ECN markings within IP-in-IP tunnels.
      \ The publication of RFC 6040\n   removed the tunnelling constraints that existed
      when the encoding of\n   [RFC5696] was written (see Section 3.3.2 of [RFC6627]).\n
      \  Nonetheless, there is still a problem if there are any legacy (pre-\n   RFC6040)
      decapsulating tunnel endpoints within a PCN-domain.  If a\n   PCN-node Threshold-marks
      the outer header of a tunnelled packet that\n   has a not-marked codepoint on
      the inner header, a legacy decapsulator\n   will forward the packet as not-marked,
      losing the Threshold-marking.\n   The rules on applicability in Section 4.3
      below are designed to avoid\n   this problem.\n   Even if an operator accidentally
      breaks these applicability rules,\n   the order of severity of the 3-in-1 codepoints
      was chosen to protect\n   other PCN or non-PCN traffic.  Although legacy pre-RFC6040
      tunnels\n   did not propagate '01', all tunnels pre-RFC6040 and post-RFC6040
      have\n   always propagated '11' correctly.  Therefore, '11' was chosen to\n
      \  signal the most severe pre-congestion (ETM), so it would act as a\n   reliable
      fail-safe even if an overlooked legacy tunnel was\n   suppressing '01' (ThM)
      signals.\n"
    title: 4.2.  Requirements Imposed by Tunnelling
  - contents:
    - "4.3.  Applicable Environments for the 3-in-1 PCN Encoding\n   The 3-in-1 encoding
      is applicable in situations where two marking\n   behaviours are being used
      in the PCN-domain.  The 3-in-1 encoding can\n   also be used with only one marking
      behaviour, in which case one of\n   the codepoints MUST NOT be used anywhere
      in the PCN-domain (see\n   Section 5.2.3).\n   With one exception (see next
      paragraph), any tunnel endpoints\n   (IP-in-IP and IPsec) within the PCN-domain
      MUST comply with the ECN\n   encapsulation and decapsulation rules set out in
      [RFC6040] (see\n   Section 4.2).\n   Operators may not be able to upgrade every
      pre-RFC6040 tunnel\n   endpoint within a PCN-domain.  In such circumstances,
      a limited\n   version of the 3-in-1 encoding can still be used but only under
      the\n   following stringent condition.  If any pre-RFC6040 tunnel\n   decapsulator
      exists within a PCN-domain, then every PCN-node in the\n   PCN-domain MUST be
      configured so that it never sets the ThM\n   codepoint.  PCN-interior-nodes
      in this case MUST solely use the\n   Excess-traffic-marking function, as defined
      in Section 5.2.3.1.  In\n   all other situations where legacy tunnel decapsulators
      might be\n   present within the PCN-domain, the 3-in-1 encoding is not applicable.\n"
    title: 4.3.  Applicable Environments for the 3-in-1 PCN Encoding
  title: 4.  Requirements for and Applicability of 3-in-1 PCN Encoding
- contents:
  - "5.  Behaviour of a PCN-node to Comply with the 3-in-1 PCN Encoding\n   Any tunnel
    endpoint implementation on a PCN-node MUST comply with\n   [RFC6040].  Since PCN
    is a new capability, this is considered a\n   reasonable requirement.\n"
  - contents:
    - "5.1.  PCN-Ingress-Node Behaviour\n   If packets arrive from another Diffserv
      domain, any re-mapping of\n   Diffserv codepoints MUST happen before PCN-ingress
      processing.\n   At each logical ingress link into a PCN-domain, each PCN-ingress-node\n
      \  will apply the four functions described in Section 4.2 of [RFC5559]\n   to
      arriving packets.  These functions are applied in the following\n   order: PCN-classify,
      PCN-police, PCN-colour, PCN-rate-meter.  This\n   section describes these four
      steps, but only the aspects relevant to\n   packet encoding:\n   1. PCN-classification:
      \ The PCN-ingress-node determines whether each\n      packet matches the filter
      spec of an admitted flow.  Packets that\n      match are defined as PCN-packets.\n
      \  1b. Extra step if ECN and PCN coexist:  If a packet classified as a\n      PCN-packet
      arrives with the ECN field already set to a value other\n      than Not-ECT
      (i.e., it is from an ECN-capable transport), then to\n      comply with BCP
      124 [RFC4774] it MUST pass through one of the\n      following preparatory steps
      before the PCN-policing and PCN-\n      colouring steps.  The choice between
      these four actions depends on\n      local policy:\n      *  Encapsulate ECN-capable
      PCN-packets across the PCN-domain:\n         +  either within another IP header
      using an RFC6040 tunnel;\n         +  or within a lower-layer protocol capable
      of being PCN-\n            marked, such as MPLS (see Appendix C).\n         Encapsulation
      using either of these methods is the RECOMMENDED\n         policy for ECN-capable
      PCN-packets, and implementations SHOULD\n         use IP-in-IP tunnelling as
      the default.\n         If encapsulation is used, it MUST precede PCN-policing
      and PCN-\n         colouring so that the encapsulator and decapsulator are\n
      \        logically outside the PCN-domain (see Appendix B and\n         specifically
      Figure 2).\n         If MPLS encapsulation is used, note that penultimate hop\n
      \        popping [RFC3031] is incompatible with PCN, unless the\n         penultimate
      hop applies the PCN-egress-node behaviour before it\n         pops the PCN-capable
      MPLS label.\n      *  If some form of encapsulation is not possible, the PCN-ingress-\n
      \        node can allow through ECN-capable packets without\n         encapsulation,
      but it MUST drop CE-marked packets at this\n         stage.  Failure to drop
      CE-marked packets would risk congestion\n         collapse, because without
      encapsulation there is no mechanism\n         to propagate the CE markings across
      the PCN-domain (see\n         Appendix B).\n         This policy is NOT RECOMMENDED
      because there is no tunnel to\n         protect the e2e ECN capability, which
      is otherwise disabled\n         when the PCN-egress-node zeroes the ECN field.\n
      \     *  Drop the packet.\n         This policy is also NOT RECOMMENDED, because
      it precludes the\n         possibility that e2e ECN can coexist with PCN as
      a means of\n         controlling congestion.\n      *  Any other action that
      complies with [RFC4774] (see Appendix B\n         for an example).\n      Appendix
      B provides more information about the coexistence of PCN\n      and ECN.\n   2.
      PCN-policing:  The PCN-policing function only allows appropriate\n      packets
      into the PCN behaviour aggregate.  Per-flow policing\n      actions may be required
      to block rejected flows and to rate-police\n      accepted flows, but these
      are specified in the relevant edge-\n      behaviour document, e.g., [RFC6662]
      or [RFC6661].\n      Here, we only specify packet-level PCN-policing, which
      prevents\n      packets that are not PCN-packets from being forwarded into the\n
      \     PCN-domain if PCN-interior-nodes would otherwise mistake them for\n      PCN-packets.
      \ A non-PCN-packet will be confused with a PCN-packet\n      if on arrival it
      meets all three of the following conditions:\n      a)  it is not classified
      as a PCN-packet;\n      b)  it already carries a PCN-compatible DSCP; and\n
      \     c)  its ECN field carries a codepoint other than Not-ECT.\n      The PCN-ingress-node
      MUST police packets that meet all three\n      conditions (a-c) by subjecting
      them to one of the following\n      treatments:\n      *  re-mark the DSCP to
      a DSCP that is not PCN-compatible;\n      *  tunnel the packet to the PCN-egress-node
      with a DSCP in the\n         outer header that is not PCN-compatible; or\n      *
      \ drop the packet (NOT RECOMMENDED -- see below).\n      The choice between
      these actions depends on local policy.  In the\n      absence of any operator-specific
      configuration for this case, an\n      implementation SHOULD re-mark the DSCP
      to zero (000000) by\n      default.\n      Whichever policing action is chosen,
      the PCN-ingress-node SHOULD\n      log the event and MAY also raise an alarm.
      \ Alarms SHOULD be rate-\n      limited so that the anomalous packets will not
      amplify into a\n      flood of alarm messages.\n      Rationale: Traffic that
      meets all three of the above conditions\n      (a-c) is not PCN-traffic; therefore,
      ideally a PCN-ingress ought\n      not to interfere with it, but it has to do
      something to avoid\n      ambiguous packet markings.  Clearing the ECN field
      is not an\n      appropriate policing action, because a network node ought not
      to\n      interfere with an e2e signal.  Even if such packets seem like an\n
      \     attack, drop would be overkill, because such an attack can be\n      neutralised
      by just re-marking the DSCP.  And DSCP re-marking in\n      the network is legitimate,
      because the DSCP is not considered an\n      e2e signal.\n   3. PCN-colouring:
      \ If a packet has been classified as a PCN-packet,\n      once it has been policed,
      the PCN-ingress-node:\n      *  MUST set a PCN-compatible Diffserv codepoint
      on all PCN-\n         packets.  To conserve DSCPs, DSCPs SHOULD be chosen that
      are\n         already defined for use with admission-controlled traffic.\n         Appendix
      A gives guidance to implementors on suitable DSCPs.\n      *  MUST set the PCN
      codepoint of all PCN-packets to not-marked\n         (NM).\n   4. PCN rate-metering:
      \ This fourth step may be necessary depending on\n      the edge behaviour in
      force.  It is listed for completeness, but\n      it is not relevant to this
      encoding document.\n"
    title: 5.1.  PCN-Ingress-Node Behaviour
  - contents:
    - '5.2.  PCN-Interior-Node Behaviour

      '
    - contents:
      - "5.2.1.  Behaviour Common to All PCN-Interior-Nodes\n   Interior nodes MUST
        NOT change not-PCN to any other codepoint.\n   Interior nodes MUST NOT change
        NM to not-PCN.\n   Interior nodes MUST NOT change ThM to NM or not-PCN.\n
        \  Interior nodes MUST NOT change ETM to any other codepoint.\n"
      title: 5.2.1.  Behaviour Common to All PCN-Interior-Nodes
    - contents:
      - "5.2.2.  Behaviour of PCN-Interior-Nodes Using Two PCN-Markings\n   If the
        threshold-meter function indicates a need to mark a packet,\n   the PCN-interior-node
        MUST change NM to ThM.\n   If the excess-traffic-meter function indicates
        a need to mark a\n   packet:\n   o  the PCN-interior-node MUST change NM to
        ETM;\n   o  the PCN-interior-node MUST change ThM to ETM.\n   If both the
        threshold meter and the excess-traffic meter indicate the\n   need to mark
        a packet, the Excess-traffic-marking rules MUST take\n   precedence.\n"
      title: 5.2.2.  Behaviour of PCN-Interior-Nodes Using Two PCN-Markings
    - contents:
      - "5.2.3.  Behaviour of PCN-Interior-Nodes Using One PCN-Marking\n   Some PCN
        edge behaviours require only one PCN-marking within the PCN-\n   domain.  The
        Single Marking edge behaviour [RFC6662] requires PCN-\n   interior-nodes to
        mark packets using the excess-traffic-meter\n   function [RFC5670].  It is
        possible that future schemes may require\n   only the threshold-meter function.
        \ Appendix D explains the rationale\n   for the behaviours defined in this
        section.\n"
      - contents:
        - "5.2.3.1.  Marking Using Only the Excess-Traffic-Meter Function\n   The
          threshold-traffic-meter function SHOULD be disabled and MUST NOT\n   trigger
          any packet marking.\n   The PCN-interior-node SHOULD raise a management
          alarm if it receives\n   a ThM packet, but the frequency of such alarms
          SHOULD be limited.\n   If the excess-traffic-meter function indicates a
          need to mark the\n   packet:\n   o  the PCN-interior-node MUST change NM
          to ETM;\n   o  the PCN-interior-node MUST change ThM to ETM.  It SHOULD
          also\n      raise an alarm as above.\n"
        title: 5.2.3.1.  Marking Using Only the Excess-Traffic-Meter Function
      - contents:
        - "5.2.3.2.  Marking Using Only the Threshold-Meter Function\n   The excess-traffic-meter
          function SHOULD be disabled and MUST NOT\n   trigger any packet marking.\n
          \  The PCN-interior-node SHOULD raise a management alarm if it receives\n
          \  an ETM packet, but the frequency of such alarms SHOULD be limited.\n
          \  If the threshold-meter function indicates a need to mark the packet:\n
          \  o  the PCN-interior-node MUST change NM to ThM;\n   o  the PCN-interior-node
          MUST NOT change ETM to any other codepoint.\n      It SHOULD raise an alarm
          as above if it encounters an ETM packet.\n"
        title: 5.2.3.2.  Marking Using Only the Threshold-Meter Function
      title: 5.2.3.  Behaviour of PCN-Interior-Nodes Using One PCN-Marking
    title: 5.2.  PCN-Interior-Node Behaviour
  - contents:
    - "5.3.  PCN-Egress-Node Behaviour\n   A PCN-egress-node SHOULD set the not-PCN
      ('00') codepoint on all\n   packets it forwards out of the PCN-domain.\n   The
      only exception to this is if the PCN-egress-node is certain that\n   revealing
      other codepoints outside the PCN-domain won't contravene\n   the guidance given
      in [RFC4774].  For instance, if the PCN-ingress-\n   node has explicitly informed
      the PCN-egress-node that this flow is\n   ECN-capable, then it might be safe
      to expose other ECN codepoints.\n   Appendix B gives details of how such schemes
      might work, but such\n   schemes are currently only tentative ideas.\n   If
      the PCN-domain is configured to use only Excess-traffic-marking,\n   the PCN-egress-node
      MUST treat ThM as ETM; if only threshold-marking\n   is used, it SHOULD treat
      ETM as ThM.  However, it SHOULD raise a\n   management alarm in either case
      since this means there is some\n   misconfiguration in the PCN-domain.\n"
    title: 5.3.  PCN-Egress-Node Behaviour
  title: 5.  Behaviour of a PCN-node to Comply with the 3-in-1 PCN Encoding
- contents:
  - '6.  Backward Compatibility

    '
  - contents:
    - "6.1.  Backward Compatibility with ECN\n   BCP 124 [RFC4774] gives guidelines
      for specifying alternative\n   semantics for the ECN field.  It sets out a number
      of factors to be\n   taken into consideration.  It also suggests various techniques
      to\n   allow the coexistence of default ECN and alternative ECN semantics.\n
      \  The encoding specified in this document uses one of those techniques;\n   it
      defines PCN-compatible Diffserv codepoints as no longer supporting\n   the default
      ECN semantics within a PCN-domain.  As such, this\n   document is compatible
      with BCP 124.\n   There is not enough space in one IP header for the 3-in-1
      encoding to\n   support both ECN marking end-to-end and PCN-marking within a
      PCN-\n   domain.  The non-normative Appendix B discusses possible ways to do\n
      \  this, e.g., by carrying e2e ECN across a PCN-domain within the inner\n   header
      of an IP-in-IP tunnel.  The normative text in Section 5.1\n   requires one of
      these methods to be configured at the PCN-ingress-\n   node and recommends that
      implementations offer tunnelling as the\n   default.\n   In any PCN deployment,
      traffic can only enter the PCN-domain through\n   PCN-ingress-nodes and leave
      through PCN-egress-nodes.  PCN-ingress-\n   nodes ensure that any packets entering
      the PCN-domain have the ECN\n   field in their outermost IP header set to the
      appropriate codepoint.\n   PCN-egress-nodes then guarantee that the ECN field
      of any packet\n   leaving the PCN-domain has appropriate ECN semantics.  This
      prevents\n   unintended leakage of ECN marks into or out of the PCN-domain,
      and\n   thus reduces backward-compatibility issues.\n"
    title: 6.1.  Backward Compatibility with ECN
  - contents:
    - "6.2.  Backward Compatibility with the Encoding in RFC 5696\n   Section 5.1
      of the PCN architecture [RFC5559] gives general guidance\n   on fault detection
      and diagnosis, including management analysis of\n   PCN markings arriving at
      PCN-egress-nodes to detect early signs of\n   potential faults.  Because the
      PCN encoding has gone through an\n   obsoleted earlier stage [RFC5696], misconfiguration
      mistakes may be\n   more likely.  Therefore, extra monitoring, such as in the
      following\n   example, may be necessary to detect and diagnose potential problems:\n
      \     Informational example: In a controlled-load edge-behaviour\n      scenario
      it could be worth the PCN-egress-node detecting the onset\n      of excess-traffic
      marking without any prior threshold-marking.\n      This might indicate that
      an interior node has been wrongly\n      configured to mark only ETM (which
      would have been correct for the\n      single-marking edge behaviour).\n   A
      PCN-node implemented to use the obsoleted encoding in RFC 5696\n   could conceivably
      have been configured so that the Threshold-meter\n   function marked what is
      now defined as the ETM codepoint in the\n   3-in-1 encoding.  However, there
      is no known deployment of this\n   rather unlikely variant of RFC 5696 and no
      reason to believe that\n   such an implementation would ever have been built.
      \ Therefore, it\n   seems safe to ignore this issue.\n"
    title: 6.2.  Backward Compatibility with the Encoding in RFC 5696
  title: 6.  Backward Compatibility
- contents:
  - "7.  Security Considerations\n   PCN-marking only carries a meaning within the
    confines of a PCN-\n   domain.  This encoding document is intended to stand independently
    of\n   the architecture used to determine how specific packets are\n   authorised
    to be PCN-marked, which will be described in separate\n   documents on PCN-boundary-node
    behaviour.\n   This document assumes the PCN-domain to be entirely under the control\n
    \  of a single operator, or a set of operators who trust each other.\n   However,
    future extensions to PCN might include inter-domain versions\n   where trust cannot
    be assumed between domains.  If such schemes are\n   proposed, they must ensure
    that they can operate securely despite the\n   lack of trust.  However, such considerations
    are beyond the scope of\n   this document.\n   One potential security concern
    is the injection of spurious PCN-marks\n   into the PCN-domain.  However, these
    can only enter the domain if a\n   PCN-ingress-node is misconfigured.  The precise
    impact of any such\n   misconfiguration will depend on which of the proposed PCN-boundary-\n
    \  node behaviours is used; however, in general, spurious marks will\n   lead
    to admitting fewer flows into the domain or potentially\n   terminating too many
    flows.  In either case, good management should\n   be able to quickly spot the
    problem since the overall utilisation of\n   the domain will rapidly fall.\n"
  title: 7.  Security Considerations
- contents:
  - "8.  Conclusions\n   The 3-in-1 PCN encoding uses a PCN-compatible DSCP and the
    ECN field\n   to encode PCN-marks.  One codepoint allows non-PCN traffic to be\n
    \  carried with the same PCN-compatible DSCP and three other codepoints\n   support
    three PCN marking states with different levels of severity.\n   In general, the
    use of this PCN encoding scheme presupposes that any\n   tunnel endpoints within
    the PCN-domain comply with [RFC6040].\n"
  title: 8.  Conclusions
- contents:
  - "9.  Acknowledgements\n   Many thanks to Philip Eardley for providing extensive
    feedback,\n   criticism and advice.  Thanks also to Teco Boot, Kwok Ho Chan,\n
    \  Ruediger Geib, Georgios Karagiannis, James Polk, Tom Taylor, Adrian\n   Farrel,
    and everyone else who has commented on the document.\n"
  title: 9.  Acknowledgements
- contents:
  - '10.  References

    '
  - contents:
    - "10.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use
      in RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119, March
      1997.\n   [RFC2474]  Nichols, K., Blake, S., Baker, F., and D. Black,\n              \"Definition
      of the Differentiated Services Field (DS\n              Field) in the IPv4 and
      IPv6 Headers\", RFC 2474,\n              December 1998.\n   [RFC3168]  Ramakrishnan,
      K., Floyd, S., and D. Black, \"The Addition\n              of Explicit Congestion
      Notification (ECN) to IP\",\n              RFC 3168, September 2001.\n   [RFC5559]
      \ Eardley, P., \"Pre-Congestion Notification (PCN)\n              Architecture\",
      RFC 5559, June 2009.\n   [RFC5670]  Eardley, P., \"Metering and Marking Behaviour
      of PCN-\n              Nodes\", RFC 5670, November 2009.\n   [RFC6040]  Briscoe,
      B., \"Tunnelling of Explicit Congestion\n              Notification\", RFC 6040,
      November 2010.\n"
    title: 10.1.  Normative References
  - contents:
    - "10.2.  Informative References\n   [RFC2597]  Heinanen, J., Baker, F., Weiss,
      W., and J. Wroclawski,\n              \"Assured Forwarding PHB Group\", RFC
      2597, June 1999.\n   [RFC3031]  Rosen, E., Viswanathan, A., and R. Callon, \"Multiprotocol\n
      \             Label Switching Architecture\", RFC 3031, January 2001.\n   [RFC3246]
      \ Davie, B., Charny, A., Bennet, J., Benson, K., Le Boudec,\n              J.,
      Courtney, W., Davari, S., Firoiu, V., and D.\n              Stiliadis, \"An
      Expedited Forwarding PHB (Per-Hop\n              Behavior)\", RFC 3246, March
      2002.\n   [RFC3540]  Spring, N., Wetherall, D., and D. Ely, \"Robust Explicit\n
      \             Congestion Notification (ECN) Signaling with Nonces\",\n              RFC
      3540, June 2003.\n   [RFC4594]  Babiarz, J., Chan, K., and F. Baker, \"Configuration\n
      \             Guidelines for DiffServ Service Classes\", RFC 4594,\n              August
      2006.\n   [RFC4774]  Floyd, S., \"Specifying Alternate Semantics for the\n              Explicit
      Congestion Notification (ECN) Field\", BCP 124,\n              RFC 4774, November
      2006.\n   [RFC5127]  Chan, K., Babiarz, J., and F. Baker, \"Aggregation of\n
      \             Diffserv Service Classes\", RFC 5127, February 2008.\n   [RFC5129]
      \ Davie, B., Briscoe, B., and J. Tay, \"Explicit Congestion\n              Marking
      in MPLS\", RFC 5129, January 2008.\n   [RFC5462]  Andersson, L. and R. Asati,
      \"Multiprotocol Label Switching\n              (MPLS) Label Stack Entry: \"EXP\"
      Field Renamed to \"Traffic\n              Class\" Field\", RFC 5462, February
      2009.\n   [RFC5696]  Moncaster, T., Briscoe, B., and M. Menth, \"Baseline\n
      \             Encoding and Transport of Pre-Congestion Information\",\n              RFC
      5696, November 2009.\n   [RFC5865]  Baker, F., Polk, J., and M. Dolly, \"A Differentiated\n
      \             Services Code Point (DSCP) for Capacity-Admitted Traffic\",\n
      \             RFC 5865, May 2010.\n   [RFC6627]  Karagiannis, G., Chan, K.,
      Moncaster, T., Menth, M.,\n              Eardley, P., and B. Briscoe, \"Overview
      of Pre-Congestion\n              Notification Encoding\", RFC 6627, July 2012.\n
      \  [RFC6661]  Charny, A., Huang, F., Karagiannis, G., Menth, M., and T.\n              Taylor,
      Ed., \"Pre-Congestion Notification (PCN) Boundary-\n              Node Behaviour
      for the Controlled Load (CL) Mode of\n              Operation\", RFC 6661, July
      2012.\n   [RFC6662]  Charny, A., Zhang, J., Karagiannis, G., Menth, M., and
      T.\n              Taylor, Ed., \"Pre-Congestion Notification (PCN) Boundary-\n
      \             Node Behaviour for the Single Marking (SM) Mode of\n              Operation\",
      RFC 6662, July 2012.\n"
    title: 10.2.  Informative References
  title: 10.  References
- contents:
  - "Appendix A.  Choice of Suitable DSCPs\n   This appendix is informative not normative.\n
    \  A single DSCP has not been defined for use with PCN for several\n   reasons.
    \ Firstly, the PCN mechanism is applicable to a variety of\n   different traffic
    classes.  Secondly, Standards Track DSCPs are in\n   increasingly short supply.
    \ Thirdly, PCN is not a scheduling\n   behaviour -- rather, it should be seen
    as being a marking behaviour\n   similar to ECN but intended for inelastic traffic.
    \ The choice of\n   which DSCP is most suitable for a given PCN-domain is dependent
    on\n   the nature of the traffic entering that domain and the link rates of\n
    \  all the links making up that domain.  In PCN-domains with sufficient\n   aggregation,
    the appropriate DSCPs would currently be those for the\n   Real-Time Treatment
    Aggregate [RFC5127].  It is suggested that\n   admission control could be used
    for the following service classes\n   (defined in [RFC4594] unless otherwise stated):\n
    \  o  Telephony (EF)\n   o  Real-time interactive (CS4)\n   o  Broadcast Video
    (CS3)\n   o  Multimedia Conferencing (AF4)\n   o  the VOICE-ADMIT codepoint defined
    in [RFC5865].\n   CS5 is excluded from this list since PCN is not expected to
    be\n   applied to signalling traffic.\n   PCN-marking is intended to provide a
    scalable admission-control\n   mechanism for traffic with a high degree of statistical
    multiplexing.\n   PCN-marking would therefore be appropriate to apply to traffic
    in the\n   above classes, but only within a PCN-domain containing sufficiently\n
    \  aggregated traffic.  In such cases, the above service classes may\n   well
    all be subject to a single forwarding treatment (treatment\n   aggregate [RFC5127]).
    \ However, this does not imply all such IP\n   traffic would necessarily be identified
    by one DSCP -- each service\n   class might keep a distinct DSCP within the highly
    aggregated region\n   [RFC5127].\n   Guidelines for conserving DSCPs by allowing
    non-admission-controlled-\n   traffic to compete with PCN-traffic are given in
    Appendix B.1 of\n   [RFC5670].\n   Additional service classes may be defined for
    which admission control\n   is appropriate, whether through some future standards
    action or\n   through local use by certain operators, e.g., the Multimedia\n   Streaming
    service class (AF3).  This document does not preclude the\n   use of PCN in more
    cases than those listed above.\n   Note: The above discussion is informative not
    normative, as operators\n   are ultimately free to decide whether to use admission
    control for\n   certain service classes and whether to use PCN as their mechanism
    of\n   choice.\n"
  title: Appendix A.  Choice of Suitable DSCPs
- contents:
  - "Appendix B.  Coexistence of ECN and PCN\n   This appendix is informative not
    normative.  It collects together\n   material relevant to coexistence of ECN and
    PCN, including that\n   spread throughout the body of this specification.  If
    this results in\n   any conflict or ambiguity, the normative text in the body
    of the\n   specification takes precedence.\n   ECN [RFC3168] is an e2e congestion
    notification mechanism.  As such\n   it is possible that some traffic entering
    the PCN-domain may also be\n   ECN-capable.  The PCN encoding described in this
    document reuses the\n   bits of the ECN field in the IP header.  Consequently,
    this disables\n   ECN within the PCN-domain.\n   For the purposes of this appendix,
    we define two forms of traffic\n   that might arrive at a PCN-ingress-node.  These
    are admission-\n   controlled traffic (PCN-traffic) and non-admission-controlled
    traffic\n   (non-PCN-traffic).\n   Flow signalling identifies admission-controlled
    traffic, by\n   associating a filter spec with the need for admission control
    (e.g.,\n   through RSVP or some equivalent message, such as from a SIP server
    to\n   the ingress or from a logically centralised network control system).\n
    \  The PCN-ingress-node re-marks admission-controlled traffic matching\n   that
    filter spec to a PCN-compatible DSCP.  Note that the term \"flow\"\n   need not
    imply just one microflow, but instead could match an\n   aggregate and/or could
    depend on the incoming DSCP (see Appendix A).\n   All other traffic can be thought
    of as non-admission-controlled (and\n   therefore outside the scope of PCN).  However,
    such traffic may still\n   need to share the same DSCP as the admission-controlled
    traffic.\n   This may be due to policy (for instance, if it is high-priority voice\n
    \  traffic), or may be because there is a shortage of local DSCPs.\n   Unless
    specified otherwise, for any of the cases in the list below,\n   an IP-in-IP tunnel
    that complies with [RFC6040] can be used to\n   preserve ECN markings across the
    PCN-domain.  The tunnelling action\n   should be applied wholly outside the PCN-domain
    as illustrated in\n   Figure 2.  Then, by the rules of RFC 6040, the tunnel egress\n
    \  propagates the ECN field from the inner header, because the PCN-\n   egress
    will have zeroed the outer ECN field.\n               .  .  .  .  .  .  PCN-domain
    \ .  .  .  .  .  .\n              .   ,---------.                   ,--------.
    \   .\n             .   _|  PCN-   |___________________|  PCN-  |_   .\n             .
    \ / | ingress |                   | egress | \\  .\n              .|  `---------'
    \                  `--------'  |.\n               | .  .  .  .  .  .  .  .  .
    \ .  .  .  .  .  .|\n         ,---------.                                     ,--------.\n
    \   _____| Tunnel  |                                     | Tunnel |____\n         |
    Ingress | - - ECN preserved inside tunnel - - | Egress |\n         `---------'
    \                                    `--------'\n            Figure 2: Separation
    of Tunnelling and PCN Actions\n   There are three cases for how e2e ECN traffic
    may wish to be treated\n   while crossing a PCN-domain:\n   a) Traffic that does
    not require PCN admission control:\n      For example, traffic that does not match
    flow signalling being\n      used for admission control.  In this case, the e2e
    ECN traffic is\n      not treated as PCN-traffic.  There are two possible scenarios:\n
    \     *  Arriving traffic does not carry a PCN-compatible DSCP: no\n         action
    required.\n      *  Arriving traffic carries a DSCP that clashes with a PCN-\n
    \        compatible DSCP.  There are two options:\n         1.  The ingress maps
    the DSCP to a local DSCP with the same\n             scheduling PHB as the original
    DSCP, and the egress re-maps\n             it to the original PCN-compatible DSCP.\n
    \        2.  The ingress tunnels the traffic, setting the DSCP in the\n             outer
    header to a local DSCP with the same scheduling PHB\n             as the original
    DSCP.\n         3.  The ingress tunnels the traffic, using the original DSCP in\n
    \            the outer header but setting not-PCN in the outer header;\n             note
    that this turns off ECN for this traffic within the\n             PCN-domain.\n
    \        The first or second options are recommended unless the operator\n         is
    short of local DSCPs.\n   b) Traffic that requires admission-control:\n      In
    this case, the e2e ECN traffic is treated as PCN-traffic across\n      the PCN-domain.
    \ There are two options.\n      *  The PCN-ingress-node places this traffic in
    a tunnel with a\n         PCN-compatible DSCP in the outer header.  The PCN-egress
    zeroes\n         the ECN-field before decapsulation.\n      *  The PCN-ingress-node
    drops CE-marked packets and otherwise sets\n         the ECN-field to NM and sets
    the DSCP to a PCN-compatible DSCP.\n         The PCN-egress zeroes the ECN field
    of all PCN packets; note\n         that this turns off e2e ECN.\n      The second
    option is emphatically not recommended, unless perhaps\n      as a last resort
    if tunnelling is not possible for some\n      insurmountable reason.\n   c) Traffic
    that requires PCN admission control where the endpoints\n      ask to see PCN
    marks:\n      Note that this scheme is currently only a tentative idea.\n      For
    real-time data generated by an adaptive codec, schemes have\n      been suggested
    where PCN marks may be leaked out of the PCN-domain\n      so that end hosts can
    drop to a lower data-rate, thus deferring\n      the need for admission control.
    \ Currently, such schemes require\n      further study and the following is for
    guidance only.\n      The PCN-ingress-node needs to tunnel the traffic as in Figure
    2,\n      taking care to comply with [RFC6040].  In this case, the PCN-\n      egress
    does not zero the ECN field (contrary to the recommendation\n      in Section
    5.3), so that the [RFC6040] tunnel egress will preserve\n      any PCN-marking.
    \ Note that a PCN-interior-node may change the\n      ECN-field from '10' to '01'
    (NM to ThM), which would be\n      interpreted by the e2e ECN as a change from
    ECT(0) into ECT(1).\n      This would not be compatible with the (currently experimental)
    ECN\n      nonce [RFC3540].\n"
  title: Appendix B.  Coexistence of ECN and PCN
- contents:
  - "Appendix C.  Example Mapping between Encoding of PCN-Marks in IP and in\n             MPLS
    Shim Headers\n   This appendix is informative not normative.\n   The 6 bits of
    the DS field in the IP header provide for 64\n   codepoints.  When encapsulating
    IP traffic in MPLS, it is useful to\n   make the DS field information accessible
    in the MPLS header.\n   However, the MPLS shim header has only a 3-bit traffic
    class (TC)\n   field [RFC5462] providing for 8 codepoints.  The operator has the\n
    \  freedom to define a site-local mapping of the 64 codepoints of the DS\n   field
    onto the 8 codepoints in the TC field.\n   [RFC5129] describes how ECN markings
    in the IP header can also be\n   mapped to codepoints in the MPLS TC field.  Appendix
    A of [RFC5129]\n   gives an informative description of how to support PCN in MPLS
    by\n   extending the way MPLS supports ECN.  [RFC5129] was written while PCN\n
    \  specifications were in early draft stages.  The following provides a\n   clearer
    example of a mapping between PCN in IP and in MPLS using the\n   PCN terminology
    and concepts that have since been specified.\n   To support PCN in a MPLS domain,
    a PCN-compatible DSCP ('DSCP n')\n   needs codepoints to be provided in the TC
    field for all the PCN-marks\n   used.  That means, when, for instance, only excess-traffic-marking
    is\n   used for PCN purposes, the operator needs to define a site-local\n   mapping
    to two codepoints in the MPLS TC field for IP headers with:\n   o  DSCP n and
    NM\n   o  DSCP n and ETM\n   If both excess-traffic-marking and threshold-marking
    are used, the\n   operator needs to define a site-local mapping to codepoints
    in the\n   MPLS TC field for IP headers with all three of the 3-in-1 codepoints:\n
    \  o  DSCP n and NM\n   o  DSCP n and ThM\n   o  DSCP n and ETM\n   In either
    case, if the operator wishes to support the same Diffserv\n   PHB but without
    PCN marking, it will also be necessary to define a\n   site-local mapping to an
    MPLS TC codepoint for IP headers marked\n   with:\n   o  DSCP n and not-PCN\n
    \  The above sets of codepoints are required for every PCN-compatible\n   DSCP.
    \ Clearly, given so few TC codepoints are available, it may be\n   necessary to
    compromise by merging together some capabilities.\n   Guidelines for conserving
    TC codepoints by allowing non-admission-\n   controlled-traffic to compete with
    PCN-traffic are given in Appendix\n   B.1 of [RFC5670].\n"
  title: Appendix C.  Example Mapping between Encoding of PCN-Marks in IP and in
- contents:
  - "Appendix D.  Rationale for Difference between the Schemes Using One\n             PCN-Marking\n
    \  Readers may notice a difference between the two behaviours in\n   Sections
    5.2.3.1 and 5.2.3.2.  With only Excess-traffic-marking\n   enabled, an unexpected
    ThM packet can be re-marked to ETM.  However,\n   with only Threshold-marking,
    an unexpected ETM packet cannot be re-\n   marked to ThM.\n   This apparent inconsistency
    is deliberate.  The behaviour with only\n   Threshold-marking keeps to the rule
    of Section 5.2.1 that ETM is more\n   severe and must never be changed to ThM
    even though ETM is not a\n   valid marking in this case.  Otherwise, implementations
    would have to\n   allow operators to configure an exception to this rule, which
    would\n   not be safe practice and would require different code in the data\n
    \  plane compared to the common behaviour.\n"
  title: Appendix D.  Rationale for Difference between the Schemes Using One
- contents:
  - "Authors' Addresses\n   Bob Briscoe\n   BT\n   B54/77, Adastral Park\n   Martlesham
    Heath\n   Ipswich  IP5 3RE\n   UK\n   Phone: +44 1473 645196\n   EMail: bob.briscoe@bt.com\n
    \  URI:   http://bobbriscoe.net/\n   Toby Moncaster\n   University of Cambridge
    Computer Laboratory\n   William Gates Building, J J Thomson Avenue\n   Cambridge
    \ CB3 0FD\n   UK\n   EMail: toby.moncaster@cl.cam.ac.uk\n   Michael Menth\n   University
    of Tuebingen\n   Sand 13\n   72076 Tuebingen\n   Germany\n   Phone: +49-7071-2970505\n
    \  EMail: menth@uni-tuebingen.de\n"
  title: Authors' Addresses
