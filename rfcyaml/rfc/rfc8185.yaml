- contents:
  - "                        Dual-Homing Coordination\n      for MPLS Transport Profile
    (MPLS-TP) Pseudowires Protection\n"
  title: __initial_text__
- contents:
  - "Abstract\n   In some scenarios, MPLS Transport Profile (MPLS-TP) pseudowires
    (PWs)\n   (RFC 5921) may be statically configured when a dynamic control plane\n
    \  is not available.  A fast protection mechanism for MPLS-TP PWs is\n   needed
    to protect against the failure of an Attachment Circuit (AC),\n   the failure
    of a Provider Edge (PE), or a failure in the Packet\n   Switched Network (PSN).
    \ The framework and typical scenarios of dual-\n   homing PW local protection
    are described in RFC 8184.  This document\n   proposes a dual-homing coordination
    mechanism for MPLS-TP PWs that is\n   used for state exchange and switchover coordination
    between the dual-\n   homing PEs for dual-homing PW local protection.\n"
  title: Abstract
- contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This
    document is a product of the Internet Engineering Task Force\n   (IETF).  It represents
    the consensus of the IETF community.  It has\n   received public review and has
    been approved for publication by the\n   Internet Engineering Steering Group (IESG).
    \ Further information on\n   Internet Standards is available in Section 2 of RFC
    7841.\n   Information about the current status of this document, any errata,\n
    \  and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc8185.\n"
  title: Status of This Memo
- contents:
  - "Copyright Notice\n   Copyright (c) 2017 IETF Trust and the persons identified
    as the\n   document authors.  All rights reserved.\n   This document is subject
    to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n
    \  (http://trustee.ietf.org/license-info) in effect on the date of\n   publication
    of this document.  Please review these documents\n   carefully, as they describe
    your rights and restrictions with respect\n   to this document.  Code Components
    extracted from this document must\n   include Simplified BSD License text as described
    in Section 4.e of\n   the Trust Legal Provisions and are provided without warranty
    as\n   described in the Simplified BSD License.\n"
  title: Copyright Notice
- contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .
    . . . . .   3\n   2.  Requirements Language . . . . . . . . . . . . . . . . .
    . . .   3\n   3.  Overview of the Proposed Solution . . . . . . . . . . . . .
    .   4\n   4.  Protocol Extensions for Dual-Homing MPLS-TP PW Protection . .   5\n
    \    4.1.  Information Exchange Between Dual-Homing PEs  . . . . . .   5\n     4.2.
    \ Protection Procedures . . . . . . . . . . . . . . . . . .   9\n   5.  IANA Considerations
    . . . . . . . . . . . . . . . . . . . . .  13\n   6.  Security Considerations
    . . . . . . . . . . . . . . . . . . .  13\n   7.  References  . . . . . . . .
    . . . . . . . . . . . . . . . . .  14\n     7.1.  Normative References  . . .
    . . . . . . . . . . . . . . .  14\n     7.2.  Informative References  . . . .
    . . . . . . . . . . . . .  15\n   Contributors  . . . . . . . . . . . . . . .
    . . . . . . . . . . .  16\n   Authors' Addresses  . . . . . . . . . . . . . .
    . . . . . . . . .  17\n"
  title: Table of Contents
- contents:
  - "1.  Introduction\n   [RFC6372], [RFC6378], and [RFC7771] describe the framework
    and\n   mechanism of MPLS Transport Profile (MPLS-TP) linear protection,\n   which
    can provide protection for the MPLS Label Switched Path (LSP)\n   and pseudowires
    (PWs) between the edge nodes.  These mechanisms\n   cannot protect against the
    failure of the Attachment Circuit (AC) or\n   the edge nodes.  [RFC6718] and [RFC6870]
    specify the PW redundancy\n   framework and mechanism for protecting the AC or
    edge node against\n   failure by adding one or more edge nodes, but it requires
    PW\n   switchover in case of an AC failure; also, PW redundancy relies on\n   Packet
    Switched Network (PSN) protection mechanisms to protect\n   against the failure
    of PW.\n   In some scenarios such as mobile backhauling, the MPLS PWs are\n   provisioned
    with dual-homing topology in which at least the Customer\n   Edge (CE) node on
    one side is dual-homed to two Provider Edge (PE)\n   nodes.  If a failure occurs
    in the primary AC, operators usually\n   prefer to perform local switchover in
    the dual-homing PE side and\n   keep the working pseudowire unchanged, if possible.
    \ This is to avoid\n   massive PW switchover in the mobile backhaul network due
    to AC\n   failure in the mobile core site; such massive PW switchover may in\n
    \  turn lead to congestion caused by migrating traffic away from the\n   preferred
    paths of network planners.  Similarly, as multiple PWs\n   share the physical
    AC in the mobile core site, it is preferable to\n   keep using the working AC
    when one working PW fails in the PSN to\n   potentially avoid unnecessary switchover
    for other PWs.  To meet the\n   above requirements, a fast dual-homing PW protection
    mechanism is\n   needed to protect against failure in the AC, the PE node, and
    the\n   PSN.\n   [RFC8184] describes a framework and several scenarios of dual-homing\n
    \  PW local protection.  This document proposes a dual-homing\n   coordination
    mechanism for static MPLS-TP PWs; the mechanism is used\n   for information exchange
    and switchover coordination between the\n   dual-homing PEs for the dual-homing
    PW local protection.  The\n   proposed mechanism has been implemented and deployed
    in several\n   mobile backhaul networks that use static MPLS-TP PWs for the\n
    \  backhauling of mobile traffic from the radio access sites to the core\n   site.\n"
  title: 1.  Introduction
- contents:
  - "2.  Requirements Language\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\",
    \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT
    RECOMMENDED\", \"MAY\", and\n   \"OPTIONAL\" in this document are to be interpreted
    as described in BCP\n   14 [RFC2119] [RFC8174] when, and only when, they appear
    in all\n   capitals, as shown here.\n"
  title: 2.  Requirements Language
- contents:
  - "3.  Overview of the Proposed Solution\n   Linear protection mechanisms for the
    MPLS-TP network are defined in\n   [RFC6378], [RFC7271], and [RFC7324].  When
    such mechanisms are\n   applied to PW linear protection [RFC7771], both the working
    PW and\n   the protection PW are terminated on the same PE node.  In order to\n
    \  provide dual-homing protection for MPLS-TP PWs, some additional\n   mechanisms
    are needed.\n   In MPLS-TP PW dual-homing protection, the linear protection mechanism\n
    \  (as defined in [RFC6378], [RFC7271], and [RFC7324]) on the single-\n   homing
    PE (e.g., PE3 in Figure 1) is not changed, while on the dual-\n   homing side,
    the working PW and protection PW are terminated on two\n   dual-homing PEs (e.g.,
    PE1 and PE2 in Figure 1), respectively, to\n   protect against a failure occurring
    in a PE or a connected AC.  As\n   described in [RFC8184], a dedicated Dual-Node
    Interconnection (DNI)\n   PW is used between the two dual-homing PE nodes to forward
    the\n   traffic.  In order to utilize the linear protection mechanism\n   [RFC7771]
    in the dual-homing PEs scenario, coordination between the\n   dual-homing PE nodes
    is needed so that the dual-homing PEs can switch\n   the connection between the
    AC, the service PW, and the DNI-PW\n   properly in a coordinated fashion by the
    forwarder.\n         +----------------------------------+\n         |                PE1
    \              |\n         +----------------------------------+             +----+\n
    \        |                 |                |   Working   |    |\n         X    Forwarder
    \   +     Service    X-------------X    |\n        /|                 |       PW
    \      | Service PW1 |    |\n   AC1 / +--------+--------+                |             |
    \   |\n      /  |     DNI-PW      |                |             |    |\n +---*
    \  +--------X--------+----------------+             |    |   +---+\n |   |            ^
    \                                      |    |   |   |\n |CE1|            |  DNI-PW
    \                              |PE3 +---|CE2|\n |   |            |                                       |
    \   |   |   |\n |   |            V                                       |    |
    \  |   |\n +---*   +--------X--------+----------------+             |    |   +---+\n
    \     \\  |     DNI-PW      |                |             |    |\n   AC2 \\ +--------+--------+
    \               | Protection  |    |\n        \\|                 |     Service
    \   X-------------X    |\n         X    Forwarder    +       PW       | Service
    PW2 |    |\n         |                 |                |             +----+\n
    \        +----------------------------------+\n         |                PE2               |\n
    \        +----------------------------------+\n               Figure 1: Dual-Homing
    Protection with DNI-PW\n"
  title: 3.  Overview of the Proposed Solution
- contents:
  - "4.  Protocol Extensions for Dual-Homing MPLS-TP PW Protection\n   In dual-homing
    MPLS-TP PW local protection, the forwarding states of\n   the dual-homing PEs
    are determined by the forwarding state machine in\n   Table 1.\n          +-----------+---------+--------+---------------------+\n
    \         |Service PW |   AC    | DNI-PW | Forwarding Behavior |\n          +-----------+---------+--------+---------------------+\n
    \         |  Active   | Active  |   Up   |Service PW <-> AC    |\n          +-----------+---------+--------+---------------------+\n
    \         |  Active   | Standby |   Up   |Service PW <-> DNI-PW|\n          +-----------+---------+--------+---------------------+\n
    \         |  Standby  | Active  |   Up   |    DNI-PW <-> AC    |\n          +-----------+---------+--------+---------------------+\n
    \         |  Standby  | Standby |   Up   |  Drop all packets   |\n          +-----------+---------+--------+---------------------+\n
    \         |  Active   | Active  |  Down  |Service PW <-> AC    |\n          +-----------+---------+--------+---------------------+\n
    \         |  Active   | Standby |  Down  |  Drop all packets   |\n          +-----------+---------+--------+---------------------+\n
    \         |  Standby  | Active  |  Down  |  Drop all packets   |\n          +-----------+---------+--------+---------------------+\n
    \         |  Standby  | Standby |  Down  |  Drop all packets   |\n          +-----------+---------+--------+---------------------+\n
    \  Table 1: Dual-Homing PE Forwarding State Machine\n   In order to achieve dual-homing
    MPLS-TP PW protection, coordination\n   between the dual-homing PE nodes is needed
    to exchange the PW status\n   and protection coordination requests.\n"
  - contents:
    - "4.1.  Information Exchange Between Dual-Homing PEs\n   The coordination information
      will be sent on the DNI-PW over the\n   Generic Associated Channel (G-ACh) as
      described in [RFC5586].  A new\n   G-ACh channel type is defined for the dual-homing
      coordination\n   between the dual-homing PEs of MPLS-TP PWs.  This channel type
      can be\n   used for the exchange of different types of information between the\n
      \  dual-homing PEs.  This document uses this channel type for the\n   exchange
      of PW status and switchover coordination between the dual-\n   homing PEs.  Other
      potential usages of this channel type are for\n   further study and are out
      of the scope of this document.\n   The MPLS-TP Dual-Homing Coordination (DHC)
      message is sent on the\n   DNI-PW between the dual-homing PEs.  The format of
      the MPLS-TP DHC\n   message is shown below:\n    0                   1                   2
      \                  3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4
      5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |0 0 0 1|Version|   Reserved    |         DHC Channel Type      |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |                     Dual-Homing PEs Group ID                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  |         TLV  Length           |           Reserved            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \  ~                              TLVs                             ~\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \           Figure 2: MPLS-TP Dual-Homing Coordination Message\n   The first
      4 octets is the common G-ACh header as specified in\n   [RFC5586].  The DHC
      Channel Type is the G-ACh channel type code point\n   assigned by IANA (0x0009).\n
      \  The Dual-Homing Group ID is a 4-octet unsigned integer to identify\n   the
      dual-homing group to which the dual-homing PEs belong.  It MUST\n   be the same
      at both PEs in the same group.\n   The TLV Length field specifies the total
      length in octets of the\n   subsequent TLVs.\n   In this document, two TLVs
      are defined in the MPLS-TP Dual-Homing\n   Coordination message for dual-homing
      MPLS-TP PW protection:\n   Type        Description                Length\n    1
      \         PW Status                  20 bytes\n    2          Dual-Node Switching
      \       16 bytes\n   The PW Status TLV is used by a dual-homing PE to report
      its service\n   PW status to the other dual-homing PE in the same dual-homing
      group.\n      0                   1                   2                   3\n
      \     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |     Type=1 (PW Status)         |          Length              |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |              Destination Dual-Homing PE Node_ID               |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                Source Dual-Homing PE Node_ID                  |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                         DNI-PW ID                             |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                         Flags                               |P|\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                      Service PW Status                    |D|F|\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \                         Figure 3: PW Status TLV\n   The Length field specifies
      the length in octets of the value field of\n   the TLV.\n   The Destination
      Dual-Homing PE Node_ID is the 32-bit identifier of\n   the receiver PE [RFC6370],
      which supports both IPv4 and IPv6\n   environments.  Usually it is the same
      as the Label Switching Router\n   ID (LSR ID) of the receiver PE.\n   The Source
      Dual-Homing PE Node_ID is the 32-bit identifier of the\n   sending PE [RFC6370],
      which supports both IPv4 and IPv6 environments.\n   Usually it is the same as
      the LSR ID of the sending PE.\n   The DNI-PW ID field contains the 32-bit PW
      ID [RFC8077] of the DNI-\n   PW.\n   The Flags field contains 32-bit flags,
      in which:\n   o  The P (Protection) bit indicates whether the Source Dual-Homing
      PE\n      is the working PE (P=0) or the protection PE (P=1).\n   o  Other bits
      are reserved for future use, which MUST be set to 0 on\n      transmission and
      MUST be ignored upon receipt.\n   The Service PW Status field indicates the
      status of the service PW\n   between the sending PE and the remote PE.  Currently,
      two bits are\n   defined in the Service PW Status field:\n   o  F bit: If set,
      it indicates Signal Fail (SF) [RFC6378] on the\n      service PW.  It can be
      either a local request generated by the PE\n      itself or a remote request
      received from the remote PE.\n   o  D bit: If set, it indicates Signal Degrade
      (SD) [RFC6378] on the\n      service PW.  It can be either a local request or
      a remote request\n      received from the remote PE.\n   o  Other bits are reserved
      for future use, which MUST be set to 0 on\n      transmission and MUST be ignored
      upon receipt.\n   The Dual-Node Switching TLV is used by one dual-homing PE
      to send\n   protection state coordination to the other PE in the same dual-homing\n
      \  group.\n      0                   1                   2                   3\n
      \     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |  Type=2 (Dual-Node Switching) |          Length               |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |              Destination Dual-Homing PE Node_ID               |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                Source Dual-Homing PE Node_ID                  |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                         DNI-PW ID                             |\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \    |                          Flags                            |S|P|\n     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n
      \                    Figure 4: Dual-Node Switching TLV\n   The Length field
      specifies the length in octets of the value field of\n   the TLV.\n   The Destination
      Dual-Homing PE Node_ID is the 32-bit identifier of\n   the receiver PE [RFC6370].
      \ Usually it is the same as the LSR ID of\n   the receiver PE.\n   The Source
      Dual-Homing PE Node_ID is the 32-bit identifier of the\n   sending PE [RFC6370].
      \ Usually it is the same as the LSR ID of the\n   sending PE.\n   The DNI-PW
      ID field contains the 32-bit PW-ID [RFC8077] of the DNI-\n   PW.\n   The Flags
      field contains 32-bit flags, in which:\n   o  The P (Protection) bit indicates
      whether the Source Dual-Homing PE\n      is the working PE (P=0) or the protection
      PE (P=1).\n   o  The S (PW Switching) bit indicates which service PW is used
      for\n      forwarding traffic.  It is set to 0 when traffic will be\n      transported
      on the working PW, and it is set to 1 if traffic will\n      be transported
      on the protection PW.  The value of the S bit is\n      determined by the protection
      coordination mechanism between the\n      dual-homing PEs and the remote PE.\n
      \  o  Other bits are reserved for future use, which MUST be set to 0 on\n      transmission
      and MUST be ignored upon receipt.\n   When a change of service PW status is
      detected by one of the dual-\n   homing PEs, it MUST be reflected in the PW
      Status TLV and sent to the\n   other dual-homing PE as quickly as possible to
      allow for fast\n   protection switching using three consecutive DHC messages.
      \ This set\n   of three messages allows for fast protection switching even if
      one or\n   two of these packets are lost or corrupted.  After the transmission\n
      \  of the three rapid messages, the dual-homing PE MUST send the most\n   recently
      transmitted service PW status periodically to the other\n   dual-homing PE on
      a continual basis using the DHC message.\n   When one dual-homing PE determines
      that the active service PW needs\n   to be switched from the working PW to the
      protection PW, it MUST send\n   the Dual-Node Switching TLV to the other dual-homing
      PE as quickly as\n   possible to allow for fast protection switching using three\n
      \  consecutive DHC messages.  After the transmission of the three\n   messages,
      the protection PW would become the active service PW, and\n   the dual-homing
      PE MUST send the most recently transmitted Dual-Node\n   Switching TLV periodically
      to the other dual-homing PE on a continual\n   basis using the DHC message.\n
      \  It is RECOMMENDED that the default interval of the first three rapid\n   DHC
      messages be 3.3 ms, similar to [RFC6378], and the default\n   interval of the
      subsequent messages is 1 second.  Both the default\n   interval of the three
      consecutive messages as well as the default\n   interval of the periodic messages
      SHALL be configurable by the\n   operator.\n"
    title: 4.1.  Information Exchange Between Dual-Homing PEs
  - contents:
    - "4.2.  Protection Procedures\n   The dual-homing MPLS-TP PW protection mechanism
      can be deployed with\n   the existing AC redundancy mechanisms.  On the PSN
      side, a PSN tunnel\n   protection mechanism is not required, as the dual-homing
      PW\n   protection can also protect if a failure occurs in the PSN.\n   This
      section uses the one-side dual-homing scenario as an example to\n   describe
      the dual-homing PW protection procedures; the procedures for\n   a two-side
      dual-homing scenario would be similar.\n   On the dual-homing PE side, the role
      of working and protection PE are\n   set by the management system or local configuration.
      \ The service PW\n   connecting to the working PE is the working PW, and the
      service PW\n   connecting to the protection PE is called the protection PW.\n
      \  On the single-homing PE side, it treats the working PW and protection\n   PW
      as if they terminate on the same remote PE node, thus normal MPLS-\n   TP protection
      coordination procedures still apply on the single-\n   homing PE.\n   The forwarding
      behavior of the dual-homing PEs is determined by the\n   components shown in
      the figure below:\n             +---------------------------------+          +-----+\n
      \            |        PE1 (Working PE)         |          |     |\n             +---------------------------------+
      \   PW1   |     |\n             |                 |               |  Working
      |     |\n             +    Forwarder    +    Service    X<-------->X     |\n
      \           /|                 |      PW       |          |     |\n           /
      +--------+--------+               |          |     |\n     AC1  /  |     DNI-PW
      \     |               |          |     |\n         /   +--------X--------+---------------+
      \         |     |\n +-----+/   AC        ^    DNI-PW                         |
      \    |  +---+\n | CE1 |redundancy    |                                   | PE3
      +--|CE2|\n +-----+ mechanism    |  DHC message                      |     |
      \ +---+\n        \\             V   exchange                        |     |\n
      \    AC2 \\   +--------X--------+---------------+          |     |\n          \\
      \ |     DNI-PW      |               |          |     |\n           \\ +--------+--------+
      \              |    PW2   |     |\n            \\|                 |     Service
      \  |Protection|     |\n             +    Forwarder    +       PW      X<-------->X
      \    |\n             |                 |               |   PSC    |     |\n
      \            +---------------------------------+  message |     |\n             |
      \       PE2 (Protection PE)      | exchange |     |\n             +---------------------------------+
      \         +-----+\n        Figure 5: Components of One-Side Dual-Homing PW Protection\n
      \  In Figure 5, for each dual-homing PE, the service PW is the PW used\n   to
      carry service between the dual-homing PE and the remote PE.  The\n   state of
      the service PW is determined by the Operation,\n   Administration, and Maintenance
      (OAM) mechanisms between the dual-\n   homing PEs and the remote PE.\n   The
      DNI-PW is provisioned between the two dual-homing PE nodes.  It\n   is used
      to bridge traffic when a failure occurs in the PSN or in the\n   ACs.  The state
      of the DNI-PW is determined by the OAM mechanism\n   between the dual-homing
      PEs.  Since the DNI-PW is used to carry both\n   the DHC messages and the service
      traffic during protection switching,\n   it is important to ensure the robustness
      of the DNI-PW.  In order to\n   avoid the DNI-PW failure due to the failure
      of a particular link, it\n   is RECOMMENDED that multiple diverse links be deployed
      between the\n   dual-homing PEs and the underlying Label Switched Path (LSP)\n
      \  protection mechanism SHOULD be enabled.\n   The AC is the link that connects
      a dual-homing PE to the dual-homed\n   CE.  The status of AC is determined by
      the existing AC redundancy\n   mechanisms; this is out of the scope of this
      document.\n   In order to perform dual-homing PW local protection, the service
      PW\n   status and Dual-Node Switching coordination requests are exchanged\n
      \  between the dual-homing PEs using the DHC message defined in\n   Section
      4.1.\n   Whenever a change of service PW status is detected by a dual-homing\n
      \  PE, it MUST be reflected in the PW Status TLV and sent to the other\n   dual-homing
      PE immediately using the three consecutive DHC messages.\n   After the transmission
      of the three rapid messages, the dual-homing\n   PE MUST send the most recently
      transmitted service PW status\n   periodically to the other dual-homing PE on
      a continual basis using\n   the DHC message.  This way, both dual-homing PEs
      have the status of\n   the working and protection PW consistently.\n   When
      there is a switchover request either generated locally or\n   received on the
      protection PW from the remote PE, based on the status\n   of the working and
      protection service PW along with the local and\n   remote request of the protection
      coordination between the dual-homing\n   PEs and the remote PE, the active/standby
      state of the service PW can\n   be determined by the dual-homing PEs.  As the
      remote protection\n   coordination request is transmitted over the protection
      path, in this\n   case the active/standby status of the service PW is determined
      by the\n   protection PE in the dual-homing group.\n   If it is determined on
      one dual-homing PE that switchover of the\n   service PW is needed, this dual-homing
      PE MUST set the S bit in the\n   Dual-Node Switching TLV and send it to the
      other dual-homing PE\n   immediately using the three consecutive DHC messages.
      \ With the\n   exchange of service PW status and the switching request, both
      dual-\n   homing PEs are consistent on the active/standby forwarding status
      of\n   the working and protection service PWs.  The status of the DNI-PW is\n
      \  determined by PW OAM mechanism as defined in [RFC5085], and the\n   status
      of ACs is determined by existing AC redundancy mechanisms:\n   both are out
      of the scope of this document.  The forwarding behavior\n   on the dual-homing
      PE nodes is determined by the forwarding state\n   machine as shown in Table
      1.\n   Using the topology in Figure 5 as an example, in normal state, the\n
      \  working PW (PW1) is in active state, the protection PW (PW2) is in\n   standby
      state, the DNI-PW is up, and AC1 is in active state according\n   to the AC
      redundancy mechanism.  According to the forwarding state\n   machine in Table
      1, traffic will be forwarded through the working PW\n   (PW1) and the primary
      AC (AC1).  No traffic will go through the\n   protection PE (PE2) or the DNI-PW,
      as both the protection PW (PW2)\n   and the AC connecting to PE2 are in standby
      state.\n   If a failure occurs in AC1, the state of AC2 changes to active\n
      \  according to the AC redundancy mechanism, while there is no change in\n   the
      state of the working and protection PWs.  According to the\n   forwarding state
      machine in Table 1, PE1 starts to forward traffic\n   between the working PW
      and the DNI-PW, and PE2 starts to forward\n   traffic between AC2 and the DNI-PW.
      \ It should be noted that in this\n   case only AC switchover takes place; in
      the PSN, traffic is still\n   forwarded using the working PW.\n   If a failure
      in the PSN brings PW1 down, the failure can be detected\n   by PE1 or PE3 using
      existing OAM mechanisms.  If PE1 detects the\n   failure of PW1, it MUST inform
      PE2 of the state of the working PW\n   using the PW Status TLV in the DHC messages
      and change the forwarding\n   status of PW1 to standby.  On receipt of the DHC
      message, PE2 SHOULD\n   change the forwarding status of PW2 to active.  Then,
      according to\n   the forwarding state machine in Table 1, PE1 SHOULD set up
      the\n   connection between the DNI-PW and AC1, and PE2 SHOULD set up the\n   connection
      between PW2 and the DNI-PW.  According to the linear\n   protection mechanism
      [RFC6378], PE2 also sends an appropriate\n   protection coordination message
      [RFC6378] over the protection PW\n   (PW2) to PE3 for the remote side to switchover
      from PW1 to PW2.  If\n   PE3 detects the failure of PW1, according to the linear
      protection\n   mechanism [RFC6378], it sends a protection coordination message
      on\n   the protection PW (PW2) to inform PE2 of the failure on the working\n
      \  PW.  Upon receipt of the message, PE2 SHOULD change the forwarding\n   status
      of PW2 to active and set up the connection according to the\n   forwarding state
      machine in Table 1.  PE2 SHOULD send a DHC message\n   to PE1 with the S bit
      set in the Dual-Node Switching TLV to\n   coordinate the switchover on PE1 and
      PE2.  This is useful for a\n   unidirectional failure that cannot be detected
      by PE1.\n   If a failure brings the working PE (PE1) down, the failure can be\n
      \  detected by both PE2 and PE3 using existing OAM mechanisms.  Both PE2\n   and
      PE3 SHOULD change the forwarding status of PW2 to active and send\n   a protection
      coordination message [RFC6378] on the protection PW\n   (PW2) to inform the
      remote side to switchover.  According to the\n   existing AC redundancy mechanisms,
      the status of AC1 changes to\n   standby and the state of AC2 changes to active.
      \ According to the\n   forwarding state machine in Table 1, PE2 starts to forward
      traffic\n   between the PW2 and AC2.\n"
    title: 4.2.  Protection Procedures
  title: 4.  Protocol Extensions for Dual-Homing MPLS-TP PW Protection
- contents:
  - "5.  IANA Considerations\n   IANA has assigned a new channel type for the \"MPLS-TP
    Dual-Homing\n   Coordination Message\" from the \"MPLS Generalized Associated
    Channel\n   (G-ACh) Types (including Pseudowire Associated Channel Types)\"\n
    \  subregistry within the \"Generic Associated Channel (G-ACh)\n   Parameters\"
    registry.\n   Value     Description                                Reference\n
    \  0x0009    MPLS-TP Dual-Homing Coordination message   RFC 8185\n   IANA has
    created a new subregistry called \"MPLS-TP DHC TLVs\" within\n   the \"Generic
    Associated Channel (G-ACh) Parameters\" registry.  The\n   registry has the following
    fields and initial allocations:\n   Type        Description                 Length
    \      Reference\n   0x0000      Reserved\n   0x0001      PW Status                   20
    Bytes     RFC 8185\n   0x0002      Dual-Node Switching         16 Bytes     RFC
    8185\n   The allocation policy for this registry is IETF Review, as specified\n
    \  in [RFC8126].\n"
  title: 5.  IANA Considerations
- contents:
  - "6.  Security Considerations\n   MPLS-TP is a subset of MPLS and so builds upon
    many of the aspects of\n   the MPLS security model.  Please refer to [RFC5920]
    for generic MPLS\n   security issues and methods for securing traffic privacy
    and\n   integrity.\n   The DHC message defined in this document contains control\n
    \  information.  If it is injected or modified by an attacker, the dual-\n   homing
    PEs might not agree on which PE should be used to deliver the\n   CE traffic,
    and this could be used as a denial-of-service attack\n   against the CE.  It is
    important that the DHC message be used within\n   a trusted MPLS-TP network domain
    as described in [RFC6941].\n   The DHC message is carried in the G-ACh [RFC5586],
    so it is dependent\n   on the security of the G-ACh itself.  The G-ACh is a generalization\n
    \  of the Associated Channel defined in [RFC4385].  Thus, this document\n   relies
    on the security mechanisms provided for the Associated Channel\n   as described
    in those two documents.\n   As described in the Security Considerations section
    of [RFC6378], the\n   G-ACh is essentially connection oriented, so injection or\n
    \  modification of control messages requires the subversion of a transit\n   node.
    \ Such subversion is generally considered hard in connection-\n   oriented MPLS
    networks and impossible to protect against at the\n   protocol level.  Management-level
    techniques are more appropriate.\n   The procedures and protocol extensions defined
    in this document do\n   not affect the security model of MPLS-TP linear protection
    as defined\n   in [RFC6378].\n   Uniqueness of the identifiers defined in this
    document is guaranteed\n   by the assigner (e.g., the operator).  Failure by an
    assigner to use\n   unique values within the specified scoping for any of the
    identifiers\n   defined herein could result in operational problems.  Please refer
    to\n   [RFC6370] for more details about the uniqueness of the identifiers.\n"
  title: 6.  Security Considerations
- contents:
  - '7.  References

    '
  - contents:
    - "7.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use
      in RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119,\n
      \             DOI 10.17487/RFC2119, March 1997,\n              <http://www.rfc-editor.org/info/rfc2119>.\n
      \  [RFC5085]  Nadeau, T., Ed. and C. Pignataro, Ed., \"Pseudowire Virtual\n
      \             Circuit Connectivity Verification (VCCV): A Control\n              Channel
      for Pseudowires\", RFC 5085, DOI 10.17487/RFC5085,\n              December 2007,
      <http://www.rfc-editor.org/info/rfc5085>.\n   [RFC5586]  Bocci, M., Ed., Vigoureux,
      M., Ed., and S. Bryant, Ed.,\n              \"MPLS Generic Associated Channel\",
      RFC 5586,\n              DOI 10.17487/RFC5586, June 2009,\n              <http://www.rfc-editor.org/info/rfc5586>.\n
      \  [RFC6370]  Bocci, M., Swallow, G., and E. Gray, \"MPLS Transport\n              Profile
      (MPLS-TP) Identifiers\", RFC 6370,\n              DOI 10.17487/RFC6370, September
      2011,\n              <http://www.rfc-editor.org/info/rfc6370>.\n   [RFC6378]
      \ Weingarten, Y., Ed., Bryant, S., Osborne, E., Sprecher,\n              N.,
      and A. Fulignoli, Ed., \"MPLS Transport Profile (MPLS-\n              TP) Linear
      Protection\", RFC 6378, DOI 10.17487/RFC6378,\n              October 2011, <http://www.rfc-editor.org/info/rfc6378>.\n
      \  [RFC7271]  Ryoo, J., Ed., Gray, E., Ed., van Helvoort, H.,\n              D'Alessandro,
      A., Cheung, T., and E. Osborne, \"MPLS\n              Transport Profile (MPLS-TP)
      Linear Protection to Match the\n              Operational Expectations of Synchronous
      Digital Hierarchy,\n              Optical Transport Network, and Ethernet Transport
      Network\n              Operators\", RFC 7271, DOI 10.17487/RFC7271, June 2014,\n
      \             <http://www.rfc-editor.org/info/rfc7271>.\n   [RFC7324]  Osborne,
      E., \"Updates to MPLS Transport Profile Linear\n              Protection\",
      RFC 7324, DOI 10.17487/RFC7324, July 2014,\n              <http://www.rfc-editor.org/info/rfc7324>.\n
      \  [RFC8077]  Martini, L., Ed. and G. Heron, Ed., \"Pseudowire Setup and\n              Maintenance
      Using the Label Distribution Protocol (LDP)\",\n              STD 84, RFC 8077,
      DOI 10.17487/RFC8077, February 2017,\n              <http://www.rfc-editor.org/info/rfc8077>.\n
      \  [RFC8174]  Leiba, B., \"Ambiguity of Uppercase vs Lowercase in RFC\n              2119
      Key Words\", BCP 14, RFC 8174, DOI 10.17487/RFC8174,\n              May 2017,
      <http://www.rfc-editor.org/info/rfc8174>.\n"
    title: 7.1.  Normative References
  - contents:
    - "7.2.  Informative References\n   [RFC4385]  Bryant, S., Swallow, G., Martini,
      L., and D. McPherson,\n              \"Pseudowire Emulation Edge-to-Edge (PWE3)
      Control Word for\n              Use over an MPLS PSN\", RFC 4385, DOI 10.17487/RFC4385,\n
      \             February 2006, <http://www.rfc-editor.org/info/rfc4385>.\n   [RFC5920]
      \ Fang, L., Ed., \"Security Framework for MPLS and GMPLS\n              Networks\",
      RFC 5920, DOI 10.17487/RFC5920, July 2010,\n              <http://www.rfc-editor.org/info/rfc5920>.\n
      \  [RFC6372]  Sprecher, N., Ed. and A. Farrel, Ed., \"MPLS Transport\n              Profile
      (MPLS-TP) Survivability Framework\", RFC 6372,\n              DOI 10.17487/RFC6372,
      September 2011,\n              <http://www.rfc-editor.org/info/rfc6372>.\n   [RFC6718]
      \ Muley, P., Aissaoui, M., and M. Bocci, \"Pseudowire\n              Redundancy\",
      RFC 6718, DOI 10.17487/RFC6718, August 2012,\n              <http://www.rfc-editor.org/info/rfc6718>.\n
      \  [RFC6870]  Muley, P., Ed. and M. Aissaoui, Ed., \"Pseudowire\n              Preferential
      Forwarding Status Bit\", RFC 6870,\n              DOI 10.17487/RFC6870, February
      2013,\n              <http://www.rfc-editor.org/info/rfc6870>.\n   [RFC6941]
      \ Fang, L., Ed., Niven-Jenkins, B., Ed., Mansfield, S., Ed.,\n              and
      R. Graveman, Ed., \"MPLS Transport Profile (MPLS-TP)\n              Security
      Framework\", RFC 6941, DOI 10.17487/RFC6941, April\n              2013, <http://www.rfc-editor.org/info/rfc6941>.\n
      \  [RFC7771]  Malis, A., Ed., Andersson, L., van Helvoort, H., Shin, J.,\n              Wang,
      L., and A. D'Alessandro, \"Switching Provider Edge\n              (S-PE) Protection
      for MPLS and MPLS Transport Profile\n              (MPLS-TP) Static Multi-Segment
      Pseudowires\", RFC 7771,\n              DOI 10.17487/RFC7771, January 2016,\n
      \             <http://www.rfc-editor.org/info/rfc7771>.\n   [RFC8126]  Cotton,
      M., Leiba, B., and T. Narten, \"Guidelines for\n              Writing an IANA
      Considerations Section in RFCs\", BCP 26,\n              RFC 8126, DOI 10.17487/RFC8126,
      June 2017,\n              <http://www.rfc-editor.org/info/rfc8126>.\n   [RFC8184]
      \ Cheng, W., Wang, L., Li, H., Davari, S., and J. Dong,\n              \"Dual-Homing
      Protection for MPLS and the MPLS Transport\n              Profile (MPLS-TP)
      Pseudowires\", RFC 8184,\n              DOI 10.17487/RFC8184, June 2017.\n"
    title: 7.2.  Informative References
  title: 7.  References
- contents:
  - "Contributors\n   The following individuals substantially contributed to the content
    of\n   this document:\n   Kai Liu\n   Huawei Technologies\n   Email: alex.liukai@huawei.com\n
    \  Shahram Davari\n   Broadcom Corporation\n   Email: davari@broadcom.com\n"
  title: Contributors
- contents:
  - "Authors' Addresses\n   Weiqiang Cheng\n   China Mobile\n   No.32 Xuanwumen West
    Street\n   Beijing  100053\n   China\n   Email: chengweiqiang@chinamobile.com\n
    \  Lei Wang\n   China Mobile\n   No.32 Xuanwumen West Street\n   Beijing  100053\n
    \  China\n   Email: Wangleiyj@chinamobile.com\n   Han Li\n   China Mobile\n   No.32
    Xuanwumen West Street\n   Beijing  100053\n   China\n   Email: Lihan@chinamobile.com\n
    \  Jie Dong\n   Huawei Technologies\n   Huawei Campus, No. 156 Beiqing Rd.\n   Beijing
    \ 100095\n   China\n   Email: jie.dong@huawei.com\n   Alessandro D'Alessandro\n
    \  Telecom Italia\n   via Reiss Romoli, 274\n   Torino  10148\n   Italy\n   Email:
    alessandro.dalessandro@telecomitalia.it\n"
  title: Authors' Addresses
