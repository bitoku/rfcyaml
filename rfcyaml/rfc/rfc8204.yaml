- title: __initial_text__
  contents:
  - '   Benchmarking Virtual Switches in the Open Platform for NFV (OPNFV)

    '
- title: Abstract
  contents:
  - "Abstract\n   This memo describes the contributions of the Open Platform for NFV\n\
    \   (OPNFV) project on Virtual Switch Performance (VSPERF), particularly\n   in\
    \ the areas of test setups and configuration parameters for the\n   system under\
    \ test.  This project has extended the current and\n   completed work of the Benchmarking\
    \ Methodology Working Group in the\n   IETF and references existing literature.\
    \  The Benchmarking\n   Methodology Working Group has traditionally conducted\
    \ laboratory\n   characterization of dedicated physical implementations of\n \
    \  internetworking functions.  Therefore, this memo describes the\n   additional\
    \ considerations when virtual switches are implemented on\n   general-purpose\
    \ hardware.  The expanded tests and benchmarks are also\n   influenced by the\
    \ OPNFV mission to support virtualization of the\n   \"telco\" infrastructure.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 7841.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   https://www.rfc-editor.org/info/rfc8204.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2017 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (https://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction  . . . . . . . . . . . . . . . . . . .\
    \ . . . . .   3\n     1.1.  Requirements Language . . . . . . . . . . . . . .\
    \ . . . .   4\n     1.2.  Abbreviations . . . . . . . . . . . . . . . . . . .\
    \ . . .   4\n   2.  Scope . . . . . . . . . . . . . . . . . . . . . . . . . .\
    \ . .   5\n   3.  Benchmarking Considerations . . . . . . . . . . . . . . . .\
    \ .   5\n     3.1.  Comparison with Physical Network Functions  . . . . . . .\
    \   5\n     3.2.  Continued Emphasis on Black-Box Benchmarks  . . . . . . .  \
    \ 6\n     3.3.  New Configuration Parameters  . . . . . . . . . . . . . .   6\n\
    \     3.4.  Flow Classification . . . . . . . . . . . . . . . . . . .   8\n  \
    \   3.5.  Benchmarks Using Baselines with Resource Isolation  . . .   9\n   4.\
    \  VSPERF Specification Summary  . . . . . . . . . . . . . . . .  11\n   5.  3x3\
    \ Matrix Coverage . . . . . . . . . . . . . . . . . . . . .  18\n     5.1.  Speed\
    \ of Activation . . . . . . . . . . . . . . . . . . .  19\n     5.2.  Accuracy\
    \ of Activation  . . . . . . . . . . . . . . . . .  19\n     5.3.  Reliability\
    \ of Activation . . . . . . . . . . . . . . . .  19\n     5.4.  Scale of Activation\
    \ . . . . . . . . . . . . . . . . . . .  19\n     5.5.  Speed of Operation  .\
    \ . . . . . . . . . . . . . . . . . .  19\n     5.6.  Accuracy of Operation .\
    \ . . . . . . . . . . . . . . . . .  19\n     5.7.  Reliability of Operation \
    \ . . . . . . . . . . . . . . . .  20\n     5.8.  Scalability of Operation  .\
    \ . . . . . . . . . . . . . . .  20\n     5.9.  Summary . . . . . . . . . . .\
    \ . . . . . . . . . . . . . .  20\n   6.  Security Considerations . . . . . .\
    \ . . . . . . . . . . . . .  21\n   7.  References  . . . . . . . . . . . . .\
    \ . . . . . . . . . . . .  21\n     7.1.  Normative References  . . . . . . .\
    \ . . . . . . . . . . .  21\n     7.2.  Informative References  . . . . . . .\
    \ . . . . . . . . . .  22\n   Acknowledgements  . . . . . . . . . . . . . . .\
    \ . . . . . . . . .  23\n   Authors' Addresses  . . . . . . . . . . . . . . .\
    \ . . . . . . . .  24\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The Benchmarking Methodology Working Group (BMWG) has traditionally\n\
    \   conducted laboratory characterization of dedicated physical\n   implementations\
    \ of internetworking functions.  The black-box\n   benchmarks of throughput, latency,\
    \ forwarding rates, and others have\n   served our industry for many years.  Now,\
    \ Network Function\n   Virtualization (NFV) has the goal of transforming how internetwork\n\
    \   functions are implemented and therefore has garnered much attention.\n   A\
    \ virtual switch (vSwitch) is an important aspect of the NFV\n   infrastructure;\
    \ it provides connectivity between and among physical\n   network functions and\
    \ virtual network functions.  As a result, there\n   are many vSwitch benchmarking\
    \ efforts but few specifications to guide\n   the many new test design choices.\
    \  This is a complex problem and an\n   industry-wide work in progress.  In the\
    \ future, several of BMWG's\n   fundamental specifications will likely be updated\
    \ as more testing\n   experience helps to form consensus around new methodologies,\
    \ and BMWG\n   should continue to collaborate with all organizations that share\
    \ the\n   same goal.\n   This memo describes the contributions of the Open Platform\
    \ for NFV\n   (OPNFV) project on Virtual Switch Performance (VSPERF)\n   characterization\
    \ through the Danube 3.0 (fourth) release [DanubeRel]\n   to the chartered work\
    \ of the BMWG (with stable references to their\n   test descriptions).  This project\
    \ has extended the current and\n   completed work of the BMWG IETF and references\
    \ existing literature.\n   For example, the most often referenced RFC is [RFC2544]\
    \ (which\n   depends on [RFC1242]), so the foundation of the benchmarking work\
    \ in\n   OPNFV is common and strong.  The recommended extensions are\n   specifically\
    \ in the areas of test setups and configuration parameters\n   for the system\
    \ under test.\n   See [VSPERFhome] for more background and the OPNFV website for\n\
    \   general information [OPNFV].\n   The authors note that OPNFV distinguishes\
    \ itself from other open\n   source compute and networking projects through its\
    \ emphasis on\n   existing \"telco\" services as opposed to cloud computing. \
    \ There are\n   many ways in which telco requirements have different emphasis\
    \ on\n   performance dimensions when compared to cloud computing: support for\n\
    \   and transfer of isochronous media streams is one example.\n"
- title: 1.1.  Requirements Language
  contents:
  - "1.1.  Requirements Language\n   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\"\
    , \"SHALL\", \"SHALL NOT\",\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"\
    NOT RECOMMENDED\", \"MAY\", and\n   \"OPTIONAL\" in this document are to be interpreted\
    \ as described in\n   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear\
    \ in all\n   capitals, as shown here.\n"
- title: 1.2.  Abbreviations
  contents:
  - "1.2.  Abbreviations\n   For the purposes of this document, the following abbreviations\
    \ apply:\n    ACK      Acknowledge\n    ACPI     Advanced Configuration and Power\
    \ Interface\n    BIOS     Basic Input Output System\n    BMWG     Benchmarking\
    \ Methodology Working Group\n    CPDP     Control Plane Data Plane\n    CPU  \
    \    Central Processing Unit\n    DIMM     Dual In-line Memory Module\n    DPDK\
    \     Data Plane Development Kit\n    DUT      Device Under Test\n    GRUB   \
    \  Grand Unified Bootloader\n    ID       Identification\n    IMIX     Internet\
    \ Mix\n    IP       Internet Protocol\n    IPPM     IP Performance Metrics\n \
    \   LAN      Local Area Network\n    LTD      Level Test Design\n    NFV     \
    \ Network Functions Virtualization\n    NIC      Network Interface Card\n    NUMA\
    \     Non-uniform Memory Access\n    OPNFV    Open Platform for NFV\n    OS  \
    \     Operating System\n    PCI      Peripheral Component Interconnect\n    PDV\
    \      Packet Delay Variation\n    SR/IOV   Single Root / Input Output Virtualization\n\
    \    SUT      System Under Test\n    TCP      Transmission Control Protocol\n\
    \    TSO      TCP Segment Offload\n    UDP      User Datagram Protocol\n    VM\
    \       Virtual Machine\n    VNF      Virtualised Network Function\n    VSPERF\
    \   OPNFV vSwitch Performance Project\n"
- title: 2.  Scope
  contents:
  - "2.  Scope\n   The primary purpose and scope of the memo is to describe key aspects\n\
    \   of vSwitch benchmarking, particularly in the areas of test setups and\n  \
    \ configuration parameters for the system under test, and extend the\n   body\
    \ of extensive BMWG literature and experience.  Initial feedback\n   indicates\
    \ that many of these extensions may be applicable beyond this\n   memo's current\
    \ scope (to hardware switches in the NFV infrastructure\n   and to virtual routers,\
    \ for example).  Additionally, this memo serves\n   as a vehicle to include more\
    \ detail and relevant commentary from BMWG\n   and other open source communities\
    \ under BMWG's chartered work to\n   characterize the NFV infrastructure.\n  \
    \ The benchmarking covered in this memo should be applicable to many\n   types\
    \ of vSwitches and remain vSwitch agnostic to a great degree.\n   There has been\
    \ no attempt to track and test all features of any\n   specific vSwitch implementation.\n"
- title: 3.  Benchmarking Considerations
  contents:
  - "3.  Benchmarking Considerations\n   This section highlights some specific considerations\
    \ (from [RFC8172])\n   related to benchmarks for virtual switches.  The OPNFV\
    \ project is\n   sharing its present view on these areas as they develop their\n\
    \   specifications in the Level Test Design (LTD) document as defined by\n   [IEEE829].\n"
- title: 3.1.  Comparison with Physical Network Functions
  contents:
  - "3.1.  Comparison with Physical Network Functions\n   To compare the performance\
    \ of virtual designs and implementations\n   with their physical counterparts,\
    \ identical benchmarks are needed.\n   BMWG has developed specifications for many\
    \ physical network\n   functions.  The BMWG has recommended reusing existing benchmarks\
    \ and\n   methods in [RFC8172], and the OPNFV LTD expands on them as described\n\
    \   here.  A key configuration aspect for vSwitches is the number of\n   parallel\
    \ CPU cores required to achieve comparable performance with a\n   given physical\
    \ device or whether some limit of scale will be reached\n   before the vSwitch\
    \ can achieve the comparable performance level.\n   It's unlikely that the virtual\
    \ switch will be the only application\n   running on the SUT, so CPU utilization,\
    \ cache utilization, and memory\n   footprint should also be recorded for the\
    \ virtual implementations of\n   internetworking functions.  However, internally\
    \ measured metrics such\n   as these are not benchmarks; they may be useful for\
    \ the audience\n   (e.g., operations) to know and may also be useful if there\
    \ is a\n   problem encountered during testing.\n   Benchmark comparability between\
    \ virtual and physical/hardware\n   implementations of equivalent functions will\
    \ likely place more\n   detailed and exact requirements on the \"testing systems\"\
    \ (in terms of\n   stream generation, algorithms to search for maximum values,\
    \ and their\n   configurations).  This is another area for standards development\
    \ to\n   appreciate; however, this is a topic for a future document.\n"
- title: 3.2.  Continued Emphasis on Black-Box Benchmarks
  contents:
  - "3.2.  Continued Emphasis on Black-Box Benchmarks\n   External observations remain\
    \ essential as the basis for benchmarks.\n   Internal observations with a fixed\
    \ specification and interpretation\n   will be provided in parallel to assist\
    \ the development of operations\n   procedures when the technology is deployed.\n"
- title: 3.3.  New Configuration Parameters
  contents:
  - "3.3.  New Configuration Parameters\n   A key consideration when conducting any\
    \ sort of benchmark is trying\n   to ensure the consistency and repeatability\
    \ of test results.  When\n   benchmarking the performance of a vSwitch, there\
    \ are many factors\n   that can affect the consistency of results; one key factor\
    \ is\n   matching the various hardware and software details of the SUT.  This\n\
    \   section lists some of the many new parameters that this project\n   believes\
    \ are critical to report in order to achieve repeatability.\n   It has been the\
    \ goal of the project to produce repeatable results,\n   and a large set of the\
    \ parameters believed to be critical is provided\n   so that the benchmarking\
    \ community can better appreciate the increase\n   in configuration complexity\
    \ inherent in this work.  The parameter set\n   below is assumed sufficient for\
    \ the infrastructure in use by the\n   VSPERF project to obtain repeatable results\
    \ from test to test.\n   Hardware details (platform, processor, memory, and network)\n\
    \   including:\n   o  BIOS version, release date, and any configurations that\
    \ were\n      modified\n   o  Power management at all levels (ACPI sleep states,\
    \ processor\n      package, OS, etc.)\n   o  CPU microcode level\n   o  Number\
    \ of enabled cores\n   o  Number of cores used for the test\n   o  Memory information\
    \ (type and size)\n   o  Memory DIMM configurations (quad rank performance may\
    \ not be the\n      same as dual rank) in size, frequency, and slot locations\n\
    \   o  Number of physical NICs and their details (manufacturer, versions,\n  \
    \    type, and the PCI slot they are plugged into)\n   o  NIC interrupt configuration\
    \ (and any special features in use)\n   o  PCI configuration parameters (payload\
    \ size, early ACK option,\n      etc.)\n   Software details including:\n   o \
    \ OS RunLevel\n   o  OS version (for host and VNF)\n   o  Kernel version (for\
    \ host and VNF)\n   o  GRUB boot parameters (for host and VNF)\n   o  Hypervisor\
    \ details (type and version)\n   o  Selected vSwitch, version number, or commit\
    \ ID used\n   o  vSwitch launch command line if it has been parameterized\n  \
    \ o  Memory allocation to the vSwitch\n   o  Which NUMA node it is using and how\
    \ many memory channels\n   o  DPDK or any other software dependency version number\
    \ or commit ID\n      used\n   o  Memory allocation to a VM - if it's from Hugepages/elsewhere\n\
    \   o  VM storage type - snapshot, independent persistent, independent\n     \
    \ non-persistent\n   o  Number of VMs\n   o  Number of virtual NICs (vNICs) -\
    \ versions, type, and driver\n   o  Number of virtual CPUs and their core affinity\
    \ on the host\n   o  Number of vNICs and their interrupt configurations\n   o\
    \  Thread affinitization for the applications (including the vSwitch\n      itself)\
    \ on the host\n   o  Details of resource isolation, such as CPUs designated for\
    \ Host/\n      Kernel (isolcpu) and CPUs designated for specific processes\n \
    \     (taskset).\n   Test traffic information:\n   o  Test duration\n   o  Number\
    \ of flows\n   o  Traffic type - UDP, TCP, and others\n   o  Frame Sizes - fixed\
    \ or IMIX [RFC6985] (note that with\n      [IEEE802.1ac], frames may be longer\
    \ than 1500 bytes and up to 2000\n      bytes)\n   o  Deployment Scenario - defines\
    \ the communications path in the SUT\n"
- title: 3.4.  Flow Classification
  contents:
  - "3.4.  Flow Classification\n   Virtual switches group packets into flows by processing\
    \ and matching\n   particular packet or frame header information, or by matching\
    \ packets\n   based on the input ports.  Thus, a flow can be thought of as a\n\
    \   sequence of packets that have the same set of header field values or\n   have\
    \ arrived on the same physical or logical port.  Performance\n   results can vary\
    \ based on the parameters the vSwitch uses to match\n   for a flow.  The recommended\
    \ flow classification parameters for any\n   vSwitch performance tests are: the\
    \ input port (physical or logical),\n   the source MAC address, the destination\
    \ MAC address, the source IP\n   address, the destination IP address, and the\
    \ Ethernet protocol type\n   field (although classification may take place on\
    \ other fields, such\n   as source and destination transport port numbers).  It\
    \ is essential\n   to increase the flow timeout time on a vSwitch before conducting\
    \ any\n   performance tests that do not intend to measure the flow setup time\n\
    \   (see Section 3 of [RFC2889]).  Normally, the first packet of a\n   particular\
    \ stream will install the flow in the virtual switch, which\n   introduces additional\
    \ latency; subsequent packets of the same flow\n   are not subject to this latency\
    \ if the flow is already installed on\n   the vSwitch.\n"
- title: 3.5.  Benchmarks Using Baselines with Resource Isolation
  contents:
  - "3.5.  Benchmarks Using Baselines with Resource Isolation\n   This outline describes\
    \ the measurement of baselines with isolated\n   resources at a high level, which\
    \ is the intended approach at this\n   time.\n   1.  Baselines:\n       *  Optional:\
    \ Benchmark platform forwarding capability without a\n          vSwitch or VNF\
    \ for at least 72 hours (serves as a means of\n          platform validation and\
    \ a means to obtain the base performance\n          for the platform in terms\
    \ of its maximum forwarding rate and\n          latency).\n                  \
    \                                            __\n          +--------------------------------------------------+\
    \   |\n          |   +------------------------------------------+   |   |\n  \
    \        |   |                                          |   |   |\n          |\
    \   |          Simple Forwarding App           |   |  Host\n          |   |  \
    \                                        |   |   |\n          |   +------------------------------------------+\
    \   |   |\n          |   |                 NIC                      |   |   |\n\
    \          +---+------------------------------------------+---+ __|\n        \
    \             ^                           :\n                     |          \
    \                 |\n                     :                           v\n    \
    \      +--------------------------------------------------+\n          |     \
    \                                             |\n          |                Traffic\
    \ Generator                 |\n          |                                   \
    \               |\n          +--------------------------------------------------+\n\
    \            Figure 1: Benchmark Platform Forwarding Capability\n       *  Benchmark\
    \ VNF forwarding capability with direct connectivity\n          (vSwitch bypass,\
    \ e.g., SR/IOV) for at least 72 hours (serves\n          as a means of VNF validation\
    \ and a means to obtain the base\n          performance for the VNF in terms of\
    \ its maximum forwarding\n          rate and latency).  The metrics gathered from\
    \ this test will\n          serve as a key comparison point for vSwitch bypass\n\
    \          technologies performance and vSwitch performance.\n               \
    \                                                    __\n         +--------------------------------------------------+\
    \ __     |\n         |   +------------------------------------------+   |   |\
    \    |\n         |   |                                          |   | Host/  |\n\
    \         |   |                 VNF                      |   | Guest  |\n    \
    \     |   |                                          |   |   |    |\n        \
    \ |   +------------------------------------------+   | __|    |\n         |  \
    \ |          Passthrough/SR-IOV              |   |       Host\n         |   +------------------------------------------+\
    \   |        |\n         |   |                 NIC                      |   |\
    \        |\n         +---+------------------------------------------+---+    \
    \  __|\n                    ^                           :\n                  \
    \  |                           |\n                    :                      \
    \     v\n         +--------------------------------------------------+\n     \
    \    |                                                  |\n         |        \
    \        Traffic Generator                 |\n         |                     \
    \                             |\n         +--------------------------------------------------+\n\
    \               Figure 2: Benchmark VNF Forwarding Capability\n       *  Benchmarking\
    \ with isolated resources alone and with other\n          resources (both hardware\
    \ and software) disabled; for example,\n          vSwitch and VM are SUT.\n  \
    \     *  Benchmarking with isolated resources alone, thus leaving some\n     \
    \     resources unused.\n       *  Benchmarking with isolated resources and all\
    \ resources\n          occupied.\n   2.  Next Steps:\n       *  Limited sharing\n\
    \       *  Production scenarios\n       *  Stressful scenarios\n"
- title: 4.  VSPERF Specification Summary
  contents:
  - "4.  VSPERF Specification Summary\n   The overall specification in preparation\
    \ is referred to as a Level\n   Test Design (LTD) document, which will contain\
    \ a suite of performance\n   tests.  The base performance tests in the LTD are\
    \ based on the\n   pre-existing specifications developed by the BMWG to test the\n\
    \   performance of physical switches.  These specifications include:\n   o  Benchmarking\
    \ Methodology for Network Interconnect Devices\n      [RFC2544]\n   o  Benchmarking\
    \ Methodology for LAN Switching [RFC2889]\n   o  Device Reset Characterization\
    \ [RFC6201]\n   o  Packet Delay Variation Applicability Statement [RFC5481]\n\
    \   The two most recent RFCs above ([RFC6201] and [RFC5481]) are being\n   applied\
    \ in benchmarking for the first time and represent a\n   development challenge\
    \ for test equipment developers.  Fortunately,\n   many members of the testing\
    \ system community have engaged on the\n   VSPERF project, including an open source\
    \ test system.\n   In addition to this, the LTD also reuses the terminology defined\
    \ by:\n   o  Benchmarking Terminology for LAN Switching Devices [RFC2285]\n  \
    \ It is recommended that these references be included in future\n   benchmarking\
    \ specifications:\n   o  Methodology for IP Multicast Benchmarking [RFC3918]\n\
    \   o  Packet Reordering Metrics [RFC4737]\n   As one might expect, the most fundamental\
    \ internetworking\n   characteristics of throughput and latency remain important\
    \ when the\n   switch is virtualized, and these benchmarks figure prominently\
    \ in the\n   specification.\n   When considering characteristics important to\
    \ \"telco\" network\n   functions, additional performance metrics are needed.\
    \  In this case,\n   the project specifications have referenced metrics from the\
    \ IETF IP\n   Performance Metrics (IPPM) literature.  This means that the latency\n\
    \   test described in [RFC2544] is replaced by measurement of a metric\n   derived\
    \ from IPPM's [RFC7679], where a set of statistical summaries\n   will be provided\
    \ (mean, max, min, and percentiles).  Further metrics\n   planned to be benchmarked\
    \ include packet delay variation as defined\n   by [RFC5481], reordering, burst\
    \ behaviour, DUT availability, DUT\n   capacity, and packet loss in long-term\
    \ testing at the throughput\n   level, where some low level of background loss\
    \ may be present and\n   characterized.\n   Tests have been designed to collect\
    \ the metrics below:\n   o  Throughput tests are designed to measure the maximum\
    \ forwarding\n      rate (in frames per second, fps) and bit rate (in Mbps) for\
    \ a\n      constant load (as defined by [RFC1242]) without traffic loss.\n   o\
    \  Packet and frame-delay distribution tests are designed to measure\n      the\
    \ average minimum and maximum packet (and/or frame) delay for\n      constant\
    \ loads.\n   o  Packet delay tests are designed to understand latency distribution\n\
    \      for different packet sizes and to uncover outliers over an\n      extended\
    \ test run.\n   o  Scalability tests are designed to understand how the virtual\n\
    \      switch performs with an increasing number of flows, number of\n      active\
    \ ports, configuration complexity of the forwarding logic,\n      etc.\n   o \
    \ Stream performance tests (with TCP or UDP) are designed to measure\n      bulk\
    \ data transfer performance, i.e., how fast systems can send\n      and receive\
    \ data through the switch.\n   o  Control-path and data-path coupling tests are\
    \ designed to\n      understand how closely the data path and the control path\
    \ are\n      coupled, as well as the effect of this coupling on the performance\n\
    \      of the DUT (for example, delay of the initial packet of a flow).\n   o\
    \  CPU and memory consumption tests are designed to understand the\n      virtual\
    \ switch's footprint on the system and are conducted as\n      auxiliary measurements\
    \ with the benchmarks above.  They include\n      CPU utilization, cache utilization,\
    \ and memory footprint.\n   o  The so-called \"soak\" tests, where the selected\
    \ test is conducted\n      over a long period of time (with an ideal duration\
    \ of 24 hours but\n      only long enough to determine that stability issues exist\
    \ when\n      found; there is no requirement to continue a test when a DUT\n \
    \     exhibits instability over time).  The key performance\n      characteristics\
    \ and benchmarks for a DUT are determined (using\n      short duration tests)\
    \ prior to conducting soak tests.  The purpose\n      of soak tests is to capture\
    \ transient changes in performance,\n      which may occur due to infrequent processes,\
    \ memory leaks, or the\n      low-probability coincidence of two or more processes.\
    \  The\n      stability of the DUT is the paramount consideration, so\n      performance\
    \ must be evaluated periodically during continuous\n      testing, and this results\
    \ in use of frame rate metrics [RFC2889]\n      instead of throughput [RFC2544]\
    \ (which requires stopping traffic\n      to allow time for all traffic to exit\
    \ internal queues), for\n      example.\n   Additional test specification development\
    \ should include:\n   o  Request/response performance tests (with TCP or UDP),\
    \ which\n      measure the transaction rate through the switch.\n   o  Noisy neighbor\
    \ tests, in order to understand the effects of\n      resource sharing on the\
    \ performance of a virtual switch.\n   o  Tests derived from examination of ETSI\
    \ NFV Draft GS IFA003\n      requirements [IFA003] on characterization of acceleration\n\
    \      technologies applied to vSwitches.\n   The flexibility of deployment of\
    \ a virtual switch within a network\n   means that it is necessary to characterize\
    \ the performance of a\n   vSwitch in various deployment scenarios.  The deployment\
    \ scenarios\n   under consideration are shown in the following figures:\n    \
    \                                                     __\n     +--------------------------------------------------+\
    \   |\n     |              +--------------------+              |   |\n     | \
    \             |                    |              |   |\n     |              |\
    \                    v              |   |  Host\n     |   +--------------+   \
    \         +--------------+   |   |\n     |   |   PHY Port   |  vSwitch   |   PHY\
    \ Port   |   |   |\n     +---+--------------+------------+--------------+---+\
    \ __|\n                ^                           :\n                |      \
    \                     |\n                :                           v\n     +--------------------------------------------------+\n\
    \     |                                                  |\n     |           \
    \     Traffic Generator                 |\n     |                            \
    \                      |\n     +--------------------------------------------------+\n\
    \        Figure 3: Physical Port to Virtual Switch to Physical Port\n        \
    \                                                 __\n     +---------------------------------------------------+\
    \   |\n     |                                                   |   |\n     |\
    \   +-------------------------------------------+   |   |\n     |   |        \
    \         Application               |   |   |\n     |   +-------------------------------------------+\
    \   |   |\n     |       ^                                  :        |   |\n  \
    \   |       |                                  |        |   |  Guest\n     | \
    \      :                                  v        |   |\n     |   +---------------+\
    \           +---------------+   |   |\n     |   | Logical Port 0|           |\
    \ Logical Port 1|   |   |\n     +---+---------------+-----------+---------------+---+\
    \ __|\n             ^                                  :\n             |     \
    \                             |\n             :                              \
    \    v         __\n     +---+---------------+----------+---------------+---+ \
    \  |\n     |   | Logical Port 0|          | Logical Port 1|   |   |\n     |  \
    \ +---------------+          +---------------+   |   |\n     |       ^       \
    \                           :       |   |\n     |       |                    \
    \              |       |   |  Host\n     |       :                           \
    \       v       |   |\n     |   +--------------+            +--------------+ \
    \  |   |\n     |   |   PHY Port   |  vSwitch   |   PHY Port   |   |   |\n    \
    \ +---+--------------+------------+--------------+---+ __|\n                ^\
    \                           :\n                |                           |\n\
    \                :                           v\n     +--------------------------------------------------+\n\
    \     |                                                  |\n     |           \
    \     Traffic Generator                 |\n     |                            \
    \                      |\n     +--------------------------------------------------+\n\
    \   Figure 4: Physical Port to Virtual Switch to VNF to Virtual Switch to\n  \
    \                             Physical Port\n                                \
    \                      __\n     +----------------------+  +----------------------+\
    \  |\n     |   Guest 1            |  |   Guest 2            |  |\n     |   +---------------+\
    \  |  |   +---------------+  |  |\n     |   |  Application  |  |  |   |  Application\
    \  |  |  |\n     |   +---------------+  |  |   +---------------+  |  |\n     |\
    \       ^       |      |  |       ^       |      |  |\n     |       |       v\
    \      |  |       |       v      |  |  Guests\n     |   +---------------+  | \
    \ |   +---------------+  |  |\n     |   | Logical Ports |  |  |   | Logical Ports\
    \ |  |  |\n     |   |   0       1   |  |  |   |   0       1   |  |  |\n     +---+---------------+--+\
    \  +---+---------------+--+__|\n             ^       :                 ^     \
    \  :\n             |       |                 |       |\n             :       v\
    \                 :       v       _\n     +---+---------------+---------+---------------+--+\
    \ |\n     |   |   0       1   |         |   3       4   |  | |\n     |   | Logical\
    \ Ports |         | Logical Ports |  | |\n     |   +---------------+         +---------------+\
    \  | |\n     |       ^       |                 ^       |      | |  Host\n    \
    \ |       |       \\-----------------/       v      | |\n     |   +--------------+\
    \          +--------------+   | |\n     |   |   PHY Ports  | vSwitch  |   PHY\
    \ Ports  |   | |\n     +---+--------------+----------+--------------+---+_|\n\
    \             ^                                 :\n             |            \
    \                     |\n             :                                 v\n  \
    \   +--------------------------------------------------+\n     |             \
    \                                     |\n     |                Traffic Generator\
    \                 |\n     |                                                  |\n\
    \     +--------------------------------------------------+\n   Figure 5: Physical\
    \ Port to Virtual Switch to VNF to Virtual Switch to\n                  VNF to\
    \ Virtual Switch to Physical Port\n                                          \
    \                __\n     +---------------------------------------------------+\
    \   |\n     |                                                   |   |\n     |\
    \   +-------------------------------------------+   |   |\n     |   |        \
    \         Application               |   |   |\n     |   +-------------------------------------------+\
    \   |   |\n     |       ^                                           |   |\n  \
    \   |       |                                           |   |  Guest\n     | \
    \      :                                           |   |\n     |   +---------------+\
    \                               |   |\n     |   | Logical Port 0|            \
    \                   |   |\n     +---+---------------+-------------------------------+\
    \ __|\n             ^\n             |\n             :                        \
    \                    __\n     +---+---------------+------------------------------+\
    \   |\n     |   | Logical Port 0|                              |   |\n     | \
    \  +---------------+                              |   |\n     |       ^      \
    \                                    |   |\n     |       |                   \
    \                       |   |  Host\n     |       :                          \
    \                |   |\n     |   +--------------+                            \
    \   |   |\n     |   |   PHY Port   |  vSwitch                      |   |\n   \
    \  +---+--------------+------------ -------------- ---+ __|\n                ^\n\
    \                |\n                :\n     +--------------------------------------------------+\n\
    \     |                                                  |\n     |           \
    \     Traffic Generator                 |\n     |                            \
    \                      |\n     +--------------------------------------------------+\n\
    \             Figure 6: Physical Port to Virtual Switch to VNF\n             \
    \                                             __\n     +---------------------------------------------------+\
    \   |\n     |                                                   |   |\n     |\
    \   +-------------------------------------------+   |   |\n     |   |        \
    \         Application               |   |   |\n     |   +-------------------------------------------+\
    \   |   |\n     |                                          :        |   |\n  \
    \   |                                          |        |   |  Guest\n     | \
    \                                         v        |   |\n     |             \
    \                  +---------------+   |   |\n     |                         \
    \      | Logical Port  |   |   |\n     +-------------------------------+---------------+---+\
    \ __|\n                                                :\n                   \
    \                             |\n                                            \
    \    v         __\n     +------------------------------+---------------+---+ \
    \  |\n     |                              | Logical Port  |   |   |\n     |  \
    \                            +---------------+   |   |\n     |               \
    \                           :       |   |\n     |                            \
    \              |       |   |  Host\n     |                                   \
    \       v       |   |\n     |                               +--------------+ \
    \  |   |\n     |                     vSwitch   |   PHY Port   |   |   |\n    \
    \ +-------------------------------+--------------+---+ __|\n                 \
    \                           :\n                                            |\n\
    \                                            v\n     +--------------------------------------------------+\n\
    \     |                                                  |\n     |           \
    \     Traffic Generator                 |\n     |                            \
    \                      |\n     +--------------------------------------------------+\n\
    \             Figure 7: VNF to Virtual Switch to Physical Port\n             \
    \                                         __\n     +----------------------+  +----------------------+\
    \  |\n     |   Guest 1            |  |   Guest 2            |  |\n     |   +---------------+\
    \  |  |   +---------------+  |  |\n     |   |  Application  |  |  |   |  Application\
    \  |  |  |\n     |   +---------------+  |  |   +---------------+  |  |\n     |\
    \              |       |  |       ^              |  |\n     |              v \
    \      |  |       |              |  |  Guests\n     |   +---------------+  | \
    \ |   +---------------+  |  |\n     |   | Logical Ports |  |  |   | Logical Ports\
    \ |  |  |\n     |   |           0   |  |  |   |   0           |  |  |\n     +---+---------------+--+\
    \  +---+---------------+--+__|\n                     :                 ^\n   \
    \                  |                 |\n                     v               \
    \  :               _\n     +---+---------------+---------+---------------+--+\
    \ |\n     |   |           1   |         |   1           |  | |\n     |   | Logical\
    \ Ports |         | Logical Ports |  | |\n     |   +---------------+         +---------------+\
    \  | |\n     |               |                 ^              | |  Host\n    \
    \ |               \\-----------------/              | |\n     |              \
    \                                  | |\n     |                    vSwitch    \
    \                 | |\n     +------------------------------------------------+_|\n\
    \                  Figure 8: VNF to Virtual Switch to VNF\n   A set of deployment\
    \ scenario figures is available on the VSPERF \"Test\n   Methodology\" wiki page\
    \ [TestTopo].\n"
- title: 5.  3x3 Matrix Coverage
  contents:
  - "5.  3x3 Matrix Coverage\n   This section organizes the many existing test specifications\
    \ into the\n   \"3x3\" matrix (introduced in [RFC8172]).  Because the LTD\n  \
    \ specification ID names are quite long, this section is organized into\n   lists\
    \ for each occupied cell of the matrix (not all are occupied;\n   also, the matrix\
    \ has grown to 3x4 to accommodate scale metrics when\n   displaying the coverage\
    \ of many metrics/benchmarks).  The current\n   version of the LTD specification\
    \ is available; see [LTD].\n   The tests listed below assess the activation of\
    \ paths in the data\n   plane rather than the control plane.\n   A complete list\
    \ of tests with short summaries is available on the\n   VSPERF \"LTD Test Spec\
    \ Overview\" wiki page [LTDoverV].\n"
- title: 5.1.  Speed of Activation
  contents:
  - "5.1.  Speed of Activation\n   o  Activation.RFC2889.AddressLearningRate\n   o\
    \  PacketLatency.InitialPacketProcessingLatency\n"
- title: 5.2.  Accuracy of Activation
  contents:
  - "5.2.  Accuracy of Activation\n   o  CPDP.Coupling.Flow.Addition\n"
- title: 5.3.  Reliability of Activation
  contents:
  - "5.3.  Reliability of Activation\n   o  Throughput.RFC2544.SystemRecoveryTime\n\
    \   o  Throughput.RFC2544.ResetTime\n"
- title: 5.4.  Scale of Activation
  contents:
  - "5.4.  Scale of Activation\n   o  Activation.RFC2889.AddressCachingCapacity\n"
- title: 5.5.  Speed of Operation
  contents:
  - "5.5.  Speed of Operation\n   o  Throughput.RFC2544.PacketLossRate\n   o  Stress.RFC2544.0PacketLoss\n\
    \   o  Throughput.RFC2544.PacketLossRateFrameModification\n   o  Throughput.RFC2544.BackToBackFrames\n\
    \   o  Throughput.RFC2889.MaxForwardingRate\n   o  Throughput.RFC2889.ForwardPressure\n\
    \   o  Throughput.RFC2889.BroadcastFrameForwarding\n   o  Throughput.RFC2544.WorstN-BestN\n\
    \   o  Throughput.Overlay.Network.<tech>.RFC2544.PacketLossRatio\n"
- title: 5.6.  Accuracy of Operation
  contents:
  - "5.6.  Accuracy of Operation\n   o  Throughput.RFC2889.ErrorFramesFiltering\n\
    \   o  Throughput.RFC2544.Profile\n"
- title: 5.7.  Reliability of Operation
  contents:
  - "5.7.  Reliability of Operation\n   o  Throughput.RFC2889.Soak\n   o  Throughput.RFC2889.SoakFrameModification\n\
    \   o  PacketDelayVariation.RFC3393.Soak\n"
- title: 5.8.  Scalability of Operation
  contents:
  - "5.8.  Scalability of Operation\n   o  Scalability.RFC2544.0PacketLoss\n   o \
    \ MemoryBandwidth.RFC2544.0PacketLoss.Scalability\n   o  Scalability.VNF.RFC2544.PacketLossProfile\n\
    \   o  Scalability.VNF.RFC2544.PacketLossRatio\n"
- title: 5.9.  Summary
  contents:
  - "5.9.  Summary\n |---------------------------------------------------------------------|\n\
    \ |              |           |            |               |             |\n |\
    \              |   SPEED   |  ACCURACY  |  RELIABILITY  |    SCALE    |\n |  \
    \            |           |            |               |             |\n |---------------------------------------------------------------------|\n\
    \ |              |           |            |               |             |\n |\
    \  Activation  |     X     |     X      |       X       |      X      |\n |  \
    \            |           |            |               |             |\n |---------------------------------------------------------------------|\n\
    \ |              |           |            |               |             |\n |\
    \  Operation   |     X     |     X      |       X       |      X      |\n |  \
    \            |           |            |               |             |\n |---------------------------------------------------------------------|\n\
    \ |              |           |            |               |             |\n |\
    \ De-activation|           |            |               |             |\n |  \
    \            |           |            |               |             |\n |---------------------------------------------------------------------|\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   Benchmarking activities as described in this\
    \ memo are limited to\n   technology characterization of a Device Under Test/System\
    \ Under Test\n   (DUT/SUT) using controlled stimuli in a laboratory environment\
    \ with\n   dedicated address space and the constraints specified in the sections\n\
    \   above.\n   The benchmarking network topology will be an independent test setup\n\
    \   and MUST NOT be connected to devices that may forward the test\n   traffic\
    \ into a production network or misroute traffic to the test\n   management network.\n\
    \   Further, benchmarking is performed on a \"black-box\" basis and relies\n \
    \  solely on measurements observable external to the DUT/SUT.\n   Special capabilities\
    \ SHOULD NOT exist in the DUT/SUT specifically for\n   benchmarking purposes.\
    \  Any implications for network security arising\n   from the DUT/SUT SHOULD be\
    \ identical in the lab and in production\n   networks.\n"
- title: 7.  References
  contents:
  - '7.  References

    '
- title: 7.1.  Normative References
  contents:
  - "7.1.  Normative References\n   [RFC2119]  Bradner, S., \"Key words for use in\
    \ RFCs to Indicate\n              Requirement Levels\", BCP 14, RFC 2119,\n  \
    \            DOI 10.17487/RFC2119, March 1997,\n              <https://www.rfc-editor.org/info/rfc2119>.\n\
    \   [RFC2285]  Mandeville, R., \"Benchmarking Terminology for LAN\n          \
    \    Switching Devices\", RFC 2285, DOI 10.17487/RFC2285,\n              February\
    \ 1998, <https://www.rfc-editor.org/info/rfc2285>.\n   [RFC2544]  Bradner, S.\
    \ and J. McQuaid, \"Benchmarking Methodology for\n              Network Interconnect\
    \ Devices\", RFC 2544,\n              DOI 10.17487/RFC2544, March 1999,\n    \
    \          <https://www.rfc-editor.org/info/rfc2544>.\n   [RFC2889]  Mandeville,\
    \ R. and J. Perser, \"Benchmarking Methodology\n              for LAN Switching\
    \ Devices\", RFC 2889,\n              DOI 10.17487/RFC2889, August 2000,\n   \
    \           <https://www.rfc-editor.org/info/rfc2889>.\n   [RFC3918]  Stopp, D.\
    \ and B. Hickman, \"Methodology for IP Multicast\n              Benchmarking\"\
    , RFC 3918, DOI 10.17487/RFC3918, October\n              2004, <https://www.rfc-editor.org/info/rfc3918>.\n\
    \   [RFC4737]  Morton, A., Ciavattone, L., Ramachandran, G., Shalunov,\n     \
    \         S., and J. Perser, \"Packet Reordering Metrics\", RFC 4737,\n      \
    \        DOI 10.17487/RFC4737, November 2006,\n              <https://www.rfc-editor.org/info/rfc4737>.\n\
    \   [RFC6201]  Asati, R., Pignataro, C., Calabria, F., and C. Olvera,\n      \
    \        \"Device Reset Characterization\", RFC 6201,\n              DOI 10.17487/RFC6201,\
    \ March 2011,\n              <https://www.rfc-editor.org/info/rfc6201>.\n   [RFC6985]\
    \  Morton, A., \"IMIX Genome: Specification of Variable Packet\n             \
    \ Sizes for Additional Testing\", RFC 6985,\n              DOI 10.17487/RFC6985,\
    \ July 2013,\n              <https://www.rfc-editor.org/info/rfc6985>.\n   [RFC7679]\
    \  Almes, G., Kalidindi, S., Zekauskas, M., and A. Morton,\n              Ed.,\
    \ \"A One-Way Delay Metric for IP Performance Metrics\n              (IPPM)\"\
    , STD 81, RFC 7679, DOI 10.17487/RFC7679, January\n              2016, <https://www.rfc-editor.org/info/rfc7679>.\n\
    \   [RFC8174]  Leiba, B., \"Ambiguity of Uppercase vs Lowercase in RFC\n     \
    \         2119 Key Words\", BCP 14, RFC 8174, DOI 10.17487/RFC8174,\n        \
    \      May 2017, <https://www.rfc-editor.org/info/rfc8174>.\n"
- title: 7.2.  Informative References
  contents:
  - "7.2.  Informative References\n   [BENCHMARK-METHOD]\n              Huang, L.,\
    \ Ed., Rong, G., Ed., Mandeville, B., and B.\n              Hickman, \"Benchmarking\
    \ Methodology for Virtualization\n              Network Performance\", Work in\
    \ Progress, draft-huang-bmwg-\n              virtual-network-performance-03, July\
    \ 2017.\n   [DanubeRel]\n              OPNFV, \"Danube\",\n              <https://wiki.opnfv.org/display/SWREL/Danube>.\n\
    \   [IEEE802.1ac]\n              IEEE, \"IEEE Standard for Local and metropolitan\
    \ area\n              networks -- Media Access Control (MAC) Service\n       \
    \       Definition\", IEEE 802.1AC-2016,\n              DOI 10.1109/IEEESTD.2017.7875381,\
    \ 2016,\n              <https://standards.ieee.org/findstds/\n              standard/802.1AC-2016.html>.\n\
    \   [IEEE829]  IEEE, \"IEEE Standard for Software and System Test\n          \
    \    Documentation\", IEEE 829-2008,\n              DOI 10.1109/IEEESTD.2008.4578383,\n\
    \              <http://ieeexplore.ieee.org/document/4578383/>.\n   [IFA003]  \
    \ ETSI, \"Network Functions Virtualisation (NFV);\n              Acceleration\
    \ Technologies; vSwitch Benchmarking and\n              Acceleration Specification\"\
    , ETSI GS NFV-IFA 003 V2.1.1,\n              April 2016, <http://www.etsi.org/deliver/etsi_gs/\n\
    \              NFV-IFA/001_099/003/02.01.01_60/\n              gs_NFV-IFA003v020101p.pdf>.\n\
    \   [LTD]      Tahhan, M., \"VSPERF Level Test Design (LTD)\",\n             \
    \ <http://docs.opnfv.org/en/stable-danube/\n              submodules/vswitchperf/docs/testing/developer/\n\
    \              requirements/vswitchperf_ltd.html#>.\n   [LTDoverV] Morton, A.,\
    \ \"LTD Test Spec Overview\",\n              <https://wiki.opnfv.org/display/vsperf/\n\
    \              LTD+Test+Spec+Overview>.\n   [OPNFV]    OPNFV, \"OPNFV\", <https://www.opnfv.org/>.\n\
    \   [RFC1242]  Bradner, S., \"Benchmarking Terminology for Network\n         \
    \     Interconnection Devices\", RFC 1242, DOI 10.17487/RFC1242,\n           \
    \   July 1991, <https://www.rfc-editor.org/info/rfc1242>.\n   [RFC5481]  Morton,\
    \ A. and B. Claise, \"Packet Delay Variation\n              Applicability Statement\"\
    , RFC 5481, DOI 10.17487/RFC5481,\n              March 2009, <https://www.rfc-editor.org/info/rfc5481>.\n\
    \   [RFC8172]  Morton, A., \"Considerations for Benchmarking Virtual\n       \
    \       Network Functions and Their Infrastructure\", RFC 8172,\n            \
    \  DOI 10.17487/RFC8172, July 2017,\n              <https://www.rfc-editor.org/info/rfc8172>.\n\
    \   [TestTopo] Snyder, E., \"Test Methodology\",\n              <https://wiki.opnfv.org/display/vsperf/Test+Methodology>.\n\
    \   [VSPERFhome]\n              Tahhan, M., \"VSPERF Home\",\n              <https://wiki.opnfv.org/display/vsperf/VSperf+Home>.\n"
- title: Acknowledgements
  contents:
  - "Acknowledgements\n   The authors appreciate and acknowledge comments from Scott\
    \ Bradner,\n   Marius Georgescu, Ramki Krishnan, Doug Montgomery, Martin Klozik,\n\
    \   Christian Trautman, Benoit Claise, and others for their reviews.\n   We also\
    \ acknowledge the early work in [BENCHMARK-METHOD] and useful\n   discussion with\
    \ the authors.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Maryam Tahhan\n   Intel\n   Email: maryam.tahhan@intel.com\n\
    \   Billy O'Mahony\n   Intel\n   Email: billy.o.mahony@intel.com\n   Al Morton\n\
    \   AT&T Labs\n   200 Laurel Avenue South\n   Middletown, NJ  07748\n   United\
    \ States of America\n   Phone: +1 732 420 1571\n   Fax:   +1 732 368 1192\n  \
    \ Email: acmorton@att.com\n"
