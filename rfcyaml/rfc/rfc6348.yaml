- title: __initial_text__
  contents:
  - "            Requirements for Point-to-Multipoint Extensions\n               \
    \    to the Label Distribution Protocol\n"
- title: Abstract
  contents:
  - "Abstract\n   This document lists a set of functional requirements that served\
    \ as\n   input to the design of Label Distribution Protocol (LDP) extensions\n\
    \   for setting up point-to-multipoint (P2MP) Label Switched Paths (LSP),\n  \
    \ in order to deliver point-to-multipoint applications over a\n   Multiprotocol\
    \ Label Switching (MPLS) infrastructure.\n   This work was overtaken by the protocol\
    \ solution developed by the\n   MPLS working group, but that solution did not\
    \ closely follow the\n   requirements documented here.  This document is published\
    \ as a\n   historic record of the ideas and requirements that shaped the\n   protocol\
    \ work.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for the historical record.\n   This document defines a Historic\
    \ Document for the Internet community.\n   This document is a product of the Internet\
    \ Engineering Task Force\n   (IETF).  It represents the consensus of the IETF\
    \ community.  It has\n   received public review and has been approved for publication\
    \ by the\n   Internet Engineering Steering Group (IESG).  Not all documents\n\
    \   approved by the IESG are a candidate for any level of Internet\n   Standard;\
    \ see Section 2 of RFC 5741.\n   Information about the current status of this\
    \ document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc6348.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2011 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n   This document\
    \ may contain material from IETF Documents or IETF\n   Contributions published\
    \ or made publicly available before November\n   10, 2008.  The person(s) controlling\
    \ the copyright in some of this\n   material may not have granted the IETF Trust\
    \ the right to allow\n   modifications of such material outside the IETF Standards\
    \ Process.\n   Without obtaining an adequate license from the person(s) controlling\n\
    \   the copyright in such materials, this document may not be modified\n   outside\
    \ the IETF Standards Process, and derivative works of it may\n   not be created\
    \ outside the IETF Standards Process, except to format\n   it for publication\
    \ as an RFC or to translate it into languages other\n   than English.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  4\n     1.1.  Requirements Language  . . . . . . . . . . . . .\
    \ . . . . .  4\n     1.2.  Definitions  . . . . . . . . . . . . . . . . . . .\
    \ . . . .  4\n     1.3.  Context and Motivations  . . . . . . . . . . . . . .\
    \ . . .  6\n     1.4.  Document Scope . . . . . . . . . . . . . . . . . . . .\
    \ . .  7\n   2.  Requirements Overview  . . . . . . . . . . . . . . . . . . .\
    \ .  7\n   3.  Application Scenario . . . . . . . . . . . . . . . . . . . . .\
    \  8\n   4.  Detailed Requirements  . . . . . . . . . . . . . . . . . . . .  9\n\
    \     4.1.  P2MP LSPs  . . . . . . . . . . . . . . . . . . . . . . . .  9\n  \
    \   4.2.  P2MP LSP FEC . . . . . . . . . . . . . . . . . . . . . . . 10\n    \
    \ 4.3.  P2MP LDP Routing . . . . . . . . . . . . . . . . . . . . . 10\n     4.4.\
    \  Setting Up, Tearing Down, and Modifying P2MP LSPs  . . . . 10\n     4.5.  Label\
    \ Advertisement  . . . . . . . . . . . . . . . . . . . 10\n     4.6.  Data Duplication\
    \ . . . . . . . . . . . . . . . . . . . . . 11\n     4.7.  Detecting and Avoiding\
    \ Loops . . . . . . . . . . . . . . . 11\n     4.8.  P2MP LSP Rerouting . . .\
    \ . . . . . . . . . . . . . . . . . 11\n     4.9.  Support for Multi-Access Networks\
    \  . . . . . . . . . . . . 12\n     4.10. Support for Encapsulation in P2P and\
    \ P2MP TE Tunnels . . . 12\n     4.11. Label Spaces . . . . . . . . . . . . .\
    \ . . . . . . . . . . 13\n     4.12. IPv4/IPv6 Support  . . . . . . . . . . .\
    \ . . . . . . . . . 13\n     4.13. Multi-Area/AS LSPs . . . . . . . . . . . .\
    \ . . . . . . . . 13\n     4.14. OAM  . . . . . . . . . . . . . . . . . . . .\
    \ . . . . . . . 13\n     4.15. Graceful Restart and Fault Recovery  . . . . .\
    \ . . . . . . 14\n     4.16. Robustness . . . . . . . . . . . . . . . . . . .\
    \ . . . . . 14\n     4.17. Scalability  . . . . . . . . . . . . . . . . . . .\
    \ . . . . 14\n     4.18. Backward Compatibility . . . . . . . . . . . . . . .\
    \ . . . 14\n   5.  Shared Trees . . . . . . . . . . . . . . . . . . . . . . .\
    \ . . 15\n     5.1.  Requirements for MP2MP LSPs  . . . . . . . . . . . . . .\
    \ . 15\n   6.  Evaluation Criteria  . . . . . . . . . . . . . . . . . . . . .\
    \ 16\n     6.1.  Performance  . . . . . . . . . . . . . . . . . . . . . . . 16\n\
    \     6.2.  Complexity and Risks . . . . . . . . . . . . . . . . . . . 17\n  \
    \ 7.  Security Considerations  . . . . . . . . . . . . . . . . . . . 17\n   8.\
    \  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 17\n   9.  References\
    \ . . . . . . . . . . . . . . . . . . . . . . . . . . 18\n     9.1.  Normative\
    \ References . . . . . . . . . . . . . . . . . . . 18\n     9.2.  Informative\
    \ References . . . . . . . . . . . . . . . . . . 18\n   Contributing Authors .\
    \ . . . . . . . . . . . . . . . . . . . . . . 20\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   This document lists a set of functional requirements that\
    \ served as\n   input to the design of Label Distribution Protocol (LDP) extensions\n\
    \   for setting up point-to-multipoint (P2MP) Label Switched Paths (LSP)\n   [MLDP],\
    \ in order to deliver point-to-multipoint applications over a\n   Multiprotocol\
    \ Label Switching (MPLS) infrastructure.\n   This work was overtaken by the protocol\
    \ solution developed by the\n   MPLS working group and documented in [MLDP]. \
    \ That solution did not\n   closely follow the requirements documented here, and\
    \ it was\n   recognized that this document had served its purpose in driving\n\
    \   discussions of how the solution should be designed.  At this point,\n   no\
    \ further action is planned to update this document in line with the\n   protocol\
    \ solution, and this document is published simply as a\n   historic record of\
    \ the ideas and requirements that shaped the\n   protocol work.\n   The document\
    \ is structured as follows:\n   o  Section 2 is an overview of the requirements.\n\
    \   o  Section 3 illustrates an application scenario.\n   o  Section 4 addresses\
    \ detailed requirements for P2MP LSPs.\n   o  Section 5 discusses requirements\
    \ for shared trees and multipoint-\n      to-multipoint (MP2MP) LSPs.\n   o  Section\
    \ 6 presents criteria against which a solution can be\n      evaluated.\n"
- title: 1.1.  Requirements Language
  contents:
  - "1.1.  Requirements Language\n   This document is a historic requirements document.\
    \  To clarify\n   statement of requirements, key words are used as follows.  The\
    \ key\n   words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\"\
    , \"SHOULD\",\n   \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in\
    \ this document\n   are to be interpreted as described in [RFC2119].\n"
- title: 1.2.  Definitions
  contents:
  - '1.2.  Definitions

    '
- title: 1.2.1.  Acronyms
  contents:
  - "1.2.1.  Acronyms\n   P2P:  Point-to-Point\n   MP2P:  Multipoint-to-Point\n  \
    \ P2MP:  Point-to-Multipoint\n   MP2MP:  Multipoint-to-Multipoint\n   LSP:  Label\
    \ Switched Path\n   LSR:  Label Switching Router\n   PE:  Provider Edge\n   P:\
    \ Provider\n   IGP:  Interior Gateway Protocol\n   AS:  Autonomous System\n"
- title: 1.2.2.  Terminology
  contents:
  - "1.2.2.  Terminology\n   The reader is assumed to be familiar with the terminology\
    \ in\n   [RFC3031], [RFC5036], and [RFC4026].\n   Ingress LSR:\n      Router acting\
    \ as a sender of an LSP\n   Egress LSR:\n      Router acting as a receiver of\
    \ an LSP\n   P2P LSP:\n      An LSP that has one unique Ingress LSR and one unique\
    \ Egress LSR\n   MP2P LSP:\n      An LSP that has one or more Ingress LSRs and\
    \ one unique Egress LSR\n   P2MP LSP:\n      An LSP that has one unique Ingress\
    \ LSR and one or more Egress LSRs\n   MP2MP LSP:\n      An LSP that has one or\
    \ more Leaf LSRs acting indifferently as\n      Ingress or Egress LSR\n   Leaf\
    \ LSR:\n      An Egress LSR of a P2MP LSP or an Ingress/Egress LSR of an MP2MP\n\
    \      LSP\n   Transit LSR:\n      An LSR of a P2MP or MP2MP LSP that has one\
    \ or more downstream LSRs\n   Branch LSR:\n      An LSR of a P2MP or MP2MP LSP\
    \ that has more than one downstream\n      LSR\n   Bud LSR:\n      An LSR of a\
    \ P2MP or MP2MP LSP that is an Egress but also has one\n      or more directly\
    \ connected downstream LSR(s)\n   P2MP tree:\n      The ordered set of LSRs and\
    \ links that comprise the path of a P2MP\n      LSP from its Ingress LSR to all\
    \ of its Egress LSRs.\n"
- title: 1.3.  Context and Motivations
  contents:
  - "1.3.  Context and Motivations\n   LDP [RFC5036] has been deployed for setting\
    \ up point-to-point (P2P)\n   and multipoint-to-point (MP2P) LSPs, in order to\
    \ offer point-to-point\n   services in MPLS backbones.\n   There are emerging\
    \ requirements for supporting delivery of point-to-\n   multipoint applications\
    \ in MPLS backbones, such as those defined in\n   [RFC4834] and [RFC5501].\n \
    \  For various reasons, including consistency with P2P applications, and\n   taking\
    \ full advantages of MPLS network infrastructure, it would be\n   highly desirable\
    \ to use MPLS LSPs for the delivery of multicast\n   traffic.  This could be implemented\
    \ by setting up a group of P2P or\n   MP2P LSPs, but such an approach may be inefficient\
    \ since it would\n   result in data replication at the Ingress LSR and duplicate\
    \ data\n   traffic within the network.\n   Hence, new mechanisms are required\
    \ that would allow traffic from an\n   Ingress LSR to be efficiently delivered\
    \ to a number of Egress LSRs in\n   an MPLS backbone on a point-to-multipoint\
    \ LSP (P2MP LSP), avoiding\n   duplicate copies of a packet on a given link and\
    \ relying on MPLS\n   traffic replication at some Branch LSRs.\n   Resource Reservation\
    \ Protocol - Traffic Engineering (RSVP-TE)\n   extensions for setting up point-to-multipoint\
    \ Traffic Engineered LSPs\n   (P2MP TE LSPs) have been defined in [RFC4875]. \
    \ They meet\n   requirements expressed in [RFC4461].  This approach is useful\
    \ in\n   network environments where P2MP Traffic Engineering capabilities are\n\
    \   needed (optimization, QoS, fast recovery).\n   However, for operators who\
    \ want to support point-to-multipoint\n   traffic delivery on an MPLS backbone,\
    \ without Traffic Engineering\n   needs, and who have already deployed LDP for\
    \ P2P traffic, an\n   interesting and useful approach would be to rely on LDP\
    \ extensions in\n   order to set up point-to-multipoint (P2MP) LSPs.  This would\
    \ bring\n   consistency with P2P MPLS applications and would ease the delivery\
    \ of\n   point-to-multipoint services in an MPLS backbone.\n"
- title: 1.4.  Document Scope
  contents:
  - "1.4.  Document Scope\n   This document focuses on the LDP approach for setting\
    \ up P2MP LSPs.\n   It lists a detailed set of requirements for P2MP extensions\
    \ to LDP,\n   so as to deliver P2MP traffic over an LDP-enabled MPLS\n   infrastructure.\
    \  The original intent was that these requirements\n   should be used as guidelines\
    \ when specifying LDP extensions.\n   Note that generic requirements for P2MP\
    \ extensions to MPLS are out of\n   the scope of this document.  Rather, this\
    \ document describes\n   solution-specific requirements related to LDP extensions\
    \ in order to\n   set up P2MP LSPs.\n   Note also that other mechanisms could\
    \ be used for setting up P2MP\n   LSPs (for instance, PIM extensions), but these\
    \ are out of the scope\n   of this document.  The objective is not to compare\
    \ these mechanisms\n   but rather to focus on the requirements for an LDP extension\n\
    \   approach.\n"
- title: 2.  Requirements Overview
  contents:
  - "2.  Requirements Overview\n   The P2MP LDP mechanism MUST support setting up\
    \ P2MP LSPs, i.e., LSPs\n   with one Ingress LSR and one or more Egress LSRs,\
    \ with traffic\n   replication at some Branch LSRs.\n   The P2MP LDP mechanism\
    \ MUST allow the addition or removal of leaves\n   associated with a P2MP LSP.\n\
    \   The P2MP LDP mechanism MUST coexist with current LDP mechanisms and\n   inherit\
    \ its capability sets from [RFC5036].  It is of paramount\n   importance that\
    \ the P2MP LDP mechanism MUST NOT impede the operation\n   of existing P2P/MP2P\
    \ LDP LSPs.  Also, the P2MP LDP mechanism MUST\n   coexist with P2P and P2MP RSVP-TE\
    \ mechanisms [RFC3209] [RFC4875].  It\n   is of paramount importance that the\
    \ P2MP LDP mechanism MUST NOT\n   impede the operation of existing P2P and P2MP\
    \ RSVP-TE LSPs.\n   The P2MP LDP mechanism MAY also allow setting up multipoint-to-\n\
    \   multipoint (MP2MP) LSPs connecting a group of Leaf LSRs acting\n   indifferently\
    \ as Ingress LSR or Egress LSR.  This may allow a\n   reduction in the amount\
    \ of LDP state that needs to be maintained by\n   an LSR.\n"
- title: 3.  Application Scenario
  contents:
  - "3.  Application Scenario\n   Figure 1 below illustrates an LDP-enabled MPLS provider\
    \ network, used\n   to carry both unicast and multicast traffic of VPN customers\n\
    \   following, for instance, the architecture defined in [MVPN] for BGP/\n   MPLS\
    \ VPNs or the one defined in [VPLS-MCAST].\n   In this example, a set of MP2P\
    \ LDP LSPs is set up between Provider\n   Edge (PE) routers to carry unicast VPN\
    \ traffic within the MPLS\n   backbone (not represented in Figure 1).\n   In this\
    \ example, a set of P2MP LDP LSPs is set up between PE routers\n   acting as Ingress\
    \ LSRs and PE routers acting as Egress LSRs, so as to\n   support multicast VPN\
    \ traffic delivery within the MPLS backbone.\n   For instance, a P2MP LDP LSP\
    \ is set up between Ingress LSR PE1 and\n   Egress LSRs PE2, PE3, and PE4.  It\
    \ is used to transport multicast\n   traffic from PE1 to PE2, PE3, and PE4.  P1\
    \ is a Branch LSR; it\n   replicates MPLS traffic sent by PE1 to P2, P3, and PE2.\
    \  P2 and P3\n   are non-Branch Transit LSRs; they forward MPLS traffic sent by\
    \ P1 to\n   PE3 and PE4, respectively.\n                          PE1\n      \
    \                    *|                *** P2MP LDP LSP\n                    \
    \      *|*****\n                          P1-----PE2\n                       \
    \  */ \\*\n                        */   \\*\n                   *****/     \\\
    ******\n                PE3----P2      P3----PE4\n                       |   \
    \    |\n                       |       |\n                       |       |\n \
    \                     PE5     PE6\n               Figure 1: P2MP LSP from PE1\
    \ to PE2, PE3, PE4\n   If later there are new receivers attached to PE5 and PE6,\
    \ then PE5\n   and PE6 join the P2MP LDP LSP.  P2 and P3 become Branch LSRs and\n\
    \   replicate traffic received from P1 to PE3 and PE5 and to PE4 and PE6,\n  \
    \ respectively (see Figure 2 below).\n                          PE1\n        \
    \                  *|               *** P2MP LDP LSP\n                       \
    \   *|*****\n                          P1-----PE2\n                         */\
    \ \\*\n                        */   \\*\n                   *****/     \\******\n\
    \                PE3----P2      P3----PE4\n                      *|       |*\n\
    \                      *|       |*\n                      *|       |*\n      \
    \                PE5     PE6\n                    Figure 2: Attachment of PE5\
    \ and PE6\n   The above example is provided for the sake of illustration.  Note\n\
    \   that P2MP LSPs Ingress and Egress LSRs may not necessarily be PE\n   routers.\
    \  Also, Branch LSRs may not necessarily be P routers.\n"
- title: 4.  Detailed Requirements
  contents:
  - '4.  Detailed Requirements

    '
- title: 4.1.  P2MP LSPs
  contents:
  - "4.1.  P2MP LSPs\n   The P2MP LDP mechanism MUST support setting up P2MP LSPs.\
    \  Data plane\n   aspects related to P2MP LSPs are those already defined in [RFC4461].\n\
    \   That is, a P2MP LSP has one Ingress LSR and one or more Egress LSRs.\n   Traffic\
    \ sent by the Ingress LSR is received by all Egress LSRs.  The\n   specific aspect\
    \ related to P2MP LSPs is the action required at a\n   Branch LSR, where data\
    \ replication occurs.  Incoming labeled data is\n   appropriately replicated to\
    \ several outgoing interfaces, which may\n   use different labels.\n   An LSR\
    \ SHOULD NOT send more than one copy of a packet on any given\n   link of a P2MP\
    \ LSP.  Exceptions to this are mentioned in Sections 4.9\n   and 4.18.\n   A P2MP\
    \ LSP MUST be identified by a constant and unique identifier\n   within the whole\
    \ LDP domain, whatever the number of leaves, which may\n   vary dynamically. \
    \ This identifier will be used so as to add/remove\n   leaves to/from the P2MP\
    \ tree.\n"
- title: 4.2.  P2MP LSP FEC
  contents:
  - "4.2.  P2MP LSP FEC\n   As with P2P MPLS technology [RFC5036], traffic MUST be\
    \ classified\n   into a Forwarding Equivalence Class (FEC) in this P2MP extension.\n\
    \   All packets that belong to a particular P2MP FEC and that travel from\n  \
    \ a particular node MUST use the same P2MP LSP.\n   If existing FECs cannot be\
    \ used for this purpose, a new LDP FEC that\n   is suitable for P2MP forwarding\
    \ MUST be specified.\n"
- title: 4.3.  P2MP LDP Routing
  contents:
  - "4.3.  P2MP LDP Routing\n   As with P2P and MP2P LDP LSPs, the P2MP LDP mechanism\
    \ MUST support\n   hop-by-hop LSP routing.  P2MP LDP-based routing SHOULD rely\
    \ upon the\n   information maintained in LSR Routing Information Bases (RIBs).\n\
    \   It is RECOMMENDED that the P2MP LSP routing rely upon the unicast\n   route\
    \ to the Ingress LSR to build a reverse path tree.\n"
- title: 4.4.  Setting Up, Tearing Down, and Modifying P2MP LSPs
  contents:
  - "4.4.  Setting Up, Tearing Down, and Modifying P2MP LSPs\n   The P2MP LDP mechanism\
    \ MUST support the establishment, maintenance,\n   and teardown of P2MP LSPs in\
    \ a scalable manner.  This MUST include\n   both the existence of a large number\
    \ of P2MP LSPs within a single\n   network and a large number of Leaf LSRs for\
    \ a single P2MP LSP (see\n   also Section 4.17 for scalability considerations\
    \ and figures).\n   In order to scale well with a large number of leaves, it is\n\
    \   RECOMMENDED to follow a leaf-initiated P2MP LSP setup approach.  For\n   that\
    \ purpose, leaves will have to be aware of the P2MP LSP\n   identifier.  The ways\
    \ a Leaf LSR discovers P2MP LSP identifiers rely\n   on the applications that\
    \ will use P2MP LSPs and are out of the scope\n   of this document.\n   The P2MP\
    \ LDP mechanism MUST allow the dynamic addition and removal of\n   leaves to and\
    \ from a P2MP LSP, without any restriction (provided\n   there is network connectivity).\
    \  It is RECOMMENDED that these\n   operations be leaf-initiated.  These operations\
    \ MUST NOT impact the\n   data transfer (packet loss, duplication, delay) towards\
    \ other leaves.\n   It is RECOMMENDED that these operations do not cause any additional\n\
    \   processing except on the path from the added/removed Leaf LSR to the\n   Branch\
    \ LSR.\n"
- title: 4.5.  Label Advertisement
  contents:
  - "4.5.  Label Advertisement\n   The P2MP LDP mechanism MUST support downstream\
    \ unsolicited label\n   advertisement mode.  This is well suited to a leaf-initiated\
    \ approach\n   and is consistent with P2P/MP2P LDP operations.\n   Other advertisement\
    \ modes MAY also be supported.\n"
- title: 4.6.  Data Duplication
  contents:
  - "4.6.  Data Duplication\n   Data duplication refers to the receipt of multiple\
    \ copies of a packet\n   by any leaf.  Although this may be a marginal situation,\
    \ it may also\n   be detrimental for certain applications.  Hence, data duplication\n\
    \   SHOULD be avoided as much as possible and limited to (hopefully rare)\n  \
    \ transitory conditions.\n   Note, in particular, that data duplication might\
    \ occur if P2MP LSP\n   rerouting is being performed (see also Section 4.8).\n"
- title: 4.7.  Detecting and Avoiding Loops
  contents:
  - "4.7.  Detecting and Avoiding Loops\n   The P2MP LDP extension MUST have a mechanism\
    \ to detect routing loops.\n   This MAY rely on extensions to the LDP loop detection\
    \ mechanism\n   defined in [RFC5036].  A loop detection mechanism MAY require\n\
    \   recording the set of LSRs traversed on the P2MP tree.  The P2MP loop\n   avoidance\
    \ mechanism MUST NOT impact the scalability of the P2MP LDP\n   solution.\n  \
    \ The P2MP LDP mechanism SHOULD have a mechanism to avoid routing loops\n   in\
    \ the data plane even during transient events.\n   Furthermore, the P2MP LDP mechanism\
    \ MUST avoid routing loops in the\n   data plane, which may trigger unexpected\
    \ non-localized exponential\n   growth of traffic.\n"
- title: 4.8.  P2MP LSP Rerouting
  contents:
  - "4.8.  P2MP LSP Rerouting\n   The P2MP LDP mechanism MUST support the rerouting\
    \ of a P2MP LSP in\n   the following cases:\n   o  Network failure (link or node);\n\
    \   o  A better path exists (e.g., new link or metric change); and\n   o  Planned\
    \ maintenance.\n   Given that P2MP LDP routing should rely on the RIB, the achievement\n\
    \   of the following requirements relies on the underlying routing\n   protocols\
    \ (IGP, etc.).\n"
- title: 4.8.1.  Rerouting upon Network Failure
  contents:
  - "4.8.1.  Rerouting upon Network Failure\n   The P2MP LDP mechanism MUST allow\
    \ for rerouting of a P2MP LSP in case\n   of link or node failure(s) by relying\
    \ upon update of the routes in\n   the RIB.  The rerouting time SHOULD be minimized\
    \ as much as possible\n   so as to reduce traffic disruption.\n   A mechanism\
    \ MUST be defined to prevent constant P2MP LSP teardown and\n   rebuild, which\
    \ may be caused by the instability of a specific link/\n   node in the network.\
    \  This can rely on IGP dampening but may be\n   completed by specific dampening\
    \ at the LDP level.\n"
- title: 4.8.2.  Rerouting on a Better Path
  contents:
  - "4.8.2.  Rerouting on a Better Path\n   The P2MP LDP mechanism MUST allow for\
    \ rerouting of a P2MP LSP in case\n   a better path is created in the network,\
    \ for instance, as a result of\n   a metric change, a link repair, or the addition\
    \ of links or nodes.\n   This will rely on update of the routes in the RIB.\n"
- title: 4.8.3.  Rerouting upon Planned Maintenance
  contents:
  - "4.8.3.  Rerouting upon Planned Maintenance\n   The P2MP LDP mechanism MUST support\
    \ planned maintenance operations.\n   It MUST be possible to reroute a P2MP LSP\
    \ before a link/node is\n   deactivated for maintenance purposes.  Traffic disruption\
    \ and data\n   duplication SHOULD be minimized as much as possible during such\n\
    \   planned maintenance.  P2MP LSP rerouting upon planned maintenance MAY\n  \
    \ rely on a make-before-break procedure.\n"
- title: 4.9.  Support for Multi-Access Networks
  contents:
  - "4.9.  Support for Multi-Access Networks\n   The P2MP LDP mechanism SHOULD provide\
    \ a way for a Branch LSR to send\n   a single copy of the data onto an interface\
    \ to a multi-access network\n   (e.g., an Ethernet LAN) and reach multiple adjacent\
    \ downstream nodes.\n   This requires that the same label be negotiated with all\
    \ downstream\n   LSRs for the LSP.\n   When there are several candidate upstream\
    \ LSRs on an interface to a\n   multi-access LAN, the P2MP LDP mechanism SHOULD\
    \ provide a way for all\n   downstream LSRs of a given P2MP LSP to select the\
    \ same upstream LSR,\n   so as to avoid traffic replication.  In addition, the\
    \ P2MP LDP\n   mechanism SHOULD allow for an efficient balancing of a set of P2MP\n\
    \   LSPs among a set of candidate upstream LSRs on a LAN interface.\n"
- title: 4.10.  Support for Encapsulation in P2P and P2MP TE Tunnels
  contents:
  - "4.10.  Support for Encapsulation in P2P and P2MP TE Tunnels\n   The P2MP LDP\
    \ mechanism MUST support nesting P2MP LSPs into P2P and\n   P2MP TE tunnels.\n\
    \   The P2MP LDP mechanism MUST provide a way for a Branch LSR of a P2MP\n   LSP,\
    \ which is also a Head End LSR of a P2MP TE tunnel, to send a\n   single copy\
    \ of the data onto the tunnel and reach all downstream LSRs\n   on the P2MP LSP,\
    \ which are also Egress LSRs of the tunnel.  As with\n   LAN interfaces, this\
    \ requires that the same label be negotiated with\n   all downstream LSRs of the\
    \ P2MP LDP LSP.\n"
- title: 4.11.  Label Spaces
  contents:
  - "4.11.  Label Spaces\n   Labels for P2MP LSPs and P2P/MP2P LSPs MAY be assigned\
    \ from shared or\n   dedicated label spaces.\n   Note that dedicated label spaces\
    \ will require the establishment of\n   separate P2P and P2MP LDP sessions.\n"
- title: 4.12.  IPv4/IPv6 Support
  contents:
  - "4.12.  IPv4/IPv6 Support\n   The P2MP LDP mechanism MUST support the establishment\
    \ of LDP sessions\n   over both IPv4 and IPv6 control planes.\n"
- title: 4.13.  Multi-Area/AS LSPs
  contents:
  - "4.13.  Multi-Area/AS LSPs\n   The P2MP LDP mechanism MUST support the establishment\
    \ of multi-area\n   P2MP LSPs, i.e., LSPs whose leaves do not all reside in the\
    \ same IGP\n   area as the Ingress LSR.  This SHOULD be possible without requiring\n\
    \   the advertisement of Ingress LSRs' addresses across IGP areas.\n   The P2MP\
    \ LDP mechanism MUST also support the establishment of\n   inter-AS P2MP LSPs,\
    \ i.e., LSPs whose leaves do not all reside in the\n   same AS as the Ingress\
    \ LSR.  This SHOULD be possible without\n   requiring the advertisement of Ingress\
    \ LSRs' addresses across ASes.\n"
- title: 4.14.  OAM
  contents:
  - "4.14.  OAM\n   LDP management tools ([RFC3815], etc.) will have to be enhanced\
    \ to\n   support P2MP LDP extensions.  This may yield a new MIB module, which\n\
    \   may possibly be inherited from the LDP MIB.\n   Built-in diagnostic tools\
    \ MUST be defined to check the connectivity,\n   trace the path, and ensure fast\
    \ detection of data plane failures on\n   P2MP LDP LSPs.\n   Further and precise\
    \ requirements and mechanisms for P2MP MPLS\n   Operations, Administration, and\
    \ Maintenance (OAM) purposes are out of\n   the scope of this document and are\
    \ addressed in [RFC4687].\n"
- title: 4.15.  Graceful Restart and Fault Recovery
  contents:
  - "4.15.  Graceful Restart and Fault Recovery\n   LDP Graceful Restart mechanisms\
    \ [RFC3478] and Fault Recovery\n   mechanisms [RFC3479] SHOULD be enhanced to\
    \ support P2MP LDP LSPs.\n"
- title: 4.16.  Robustness
  contents:
  - "4.16.  Robustness\n   A solution MUST be designed to re-establish connectivity\
    \ for P2MP and\n   MP2MP LSPs in the event of failures, provided there exists\
    \ network\n   connectivity between ingress and egress nodes (i.e., designed without\n\
    \   introducing single points of failure).\n"
- title: 4.17.  Scalability
  contents:
  - "4.17.  Scalability\n   Scalability is a key requirement for the P2MP LDP mechanism.\
    \  It MUST\n   be designed to scale well with an increase in the number of any\
    \ of\n   the following:\n   o  Number of Leaf LSRs per P2MP LSP;\n   o  Number\
    \ of downstream LSRs per Branch LSR; and\n   o  Number of P2MP LSPs per LSR.\n\
    \   In order to scale well with an increase in the number of leaves, it\n   is\
    \ RECOMMENDED that the size of a P2MP LSP state on an LSR, for one\n   particular\
    \ LSP, depend only on the number of adjacent LSRs on the\n   LSP.\n"
- title: 4.17.1.  Orders of Magnitude Expected in Operational Networks
  contents:
  - "4.17.1.  Orders of Magnitude Expected in Operational Networks\n   Typical orders\
    \ of magnitude that we expect should be supported are:\n   o  Tens of thousands\
    \ of P2MP trees spread out across core network\n      routers; and\n   o  Hundreds,\
    \ or a few thousands, of leaves per tree.\n   See also Section 4.2 of [RFC4834].\n"
- title: 4.18.  Backward Compatibility
  contents:
  - "4.18.  Backward Compatibility\n   In order to allow for a smooth migration, the\
    \ P2MP LDP mechanism\n   SHOULD offer as much backward compatibility as possible.\
    \  In\n   particular, the solution SHOULD allow the setup of a P2MP LSP along\n\
    \   non-Branch Transit LSRs that do not support P2MP LDP extensions.\n   Also,\
    \ the P2MP LDP solution MUST coexist with current LDP mechanisms\n   and inherit\
    \ its capability sets from [RFC5036].  The P2MP LDP\n   solution MUST NOT impede\
    \ the operation of P2P/MP2P LSPs.  A P2MP LDP\n   solution MUST be designed in\
    \ such a way that it allows P2P/MP2P and\n   P2MP LSPs to be signaled on the same\
    \ interface.\n"
- title: 5.  Shared Trees
  contents:
  - "5.  Shared Trees\n   For traffic delivery between a group of N LSRs that act\
    \ as egress\n   and/or egress nodes on different P2MP flows, it may be useful\
    \ to set\n   up a shared tree connecting all these LSRs instead of having N P2MP\n\
    \   LSPs.  This would reduce the amount of control and forwarding state\n   that\
    \ has to be maintained on a given LSR.\n   There are two main options for supporting\
    \ such shared trees:\n   o  Relying on the applications' protocols that use LDP\
    \ LSPs.  A\n      shared tree could consist of the combination of an MP2P LDP\
    \ LSP\n      from Leaf LSRs to a given root node with a P2MP LSP from this root\n\
    \      to Leaf LSRs.  For instance, with Multicast L3 VPN applications,\n    \
    \  it would be possible to build a shared tree by combining (see\n      [MVPN]):\n\
    \      *  An MP2P unicast LDP LSP, from each PE router of the group to a\n   \
    \      particular root PE router acting as tree root and\n      *  A P2MP LDP\
    \ LSP from this root PE router to each PE router of\n         the group.\n   o\
    \  Relying on a specific LDP mechanism allowing the setup of\n      multipoint-to-multipoint\
    \ MPLS LSPs (MP2MP LSPs).\n   The former approach (combination of MP2P and P2MP\
    \ LSPs at the\n   application level) is out of the scope of this document while\
    \ the\n   latter (MP2MP LSPs) is within the scope of this document.\n   Requirements\
    \ for the setup of MP2MP LSPs are listed below.\n"
- title: 5.1.  Requirements for MP2MP LSPs
  contents:
  - "5.1.  Requirements for MP2MP LSPs\n   A multipoint-to-multipoint (MP2MP) LSP\
    \ is an LSP connecting a group\n   of Leaf LSRs acting as Egress and/or Ingress\
    \ LSRs.  Traffic sent by\n   any Leaf LSR is received by all other Leaf LSRs of\
    \ the group.\n   Procedures for setting up MP2MP LSPs with LDP SHOULD be specified.\n\
    \   An implementation that supports P2MP LDP LSPs MAY also support MP2MP\n   LDP\
    \ LSPs.\n   The MP2MP LDP procedures MUST NOT impede the operations of P2MP LSP.\n\
    \   Requirements for P2MP LSPs, set forth in Section 4, apply equally to\n   MP2MP\
    \ LSPs.  Particular attention should be given to the requirements\n   below:\n\
    \   o  The solution MUST support recovery upon link and transit node\n      failure\
    \ and be designed to re-establish connectivity for MP2MP\n      LSPs in the event\
    \ of failures, provided network connectivity\n      exists between ingress and\
    \ egress nodes (i.e., designed without\n      introducing single points of failure).\n\
    \   o  The size of MP2MP state on an LSR, for one particular MP2MP LSP,\n    \
    \  SHOULD only depend on the number of adjacent LSRs on the LSP.\n   o  Furthermore,\
    \ the MP2MP LDP mechanism MUST avoid routing loops that\n      may trigger exponential\
    \ growth of traffic.  Note that this\n      requirement is more challenging with\
    \ MP2MP LSPs as an LSR may need\n      to receive traffic for a given LSP on multiple\
    \ interfaces.\n   There are additional requirements specific to MP2MP LSPs:\n\
    \   o  It is RECOMMENDED that an MP2MP MPLS LSP is built based on the\n      unicast\
    \ route to a specific LSR called root LSR.\n   o  It is RECOMMENDED to define\
    \ several root LSRs (e.g., a primary and\n      a backup) to ensure redundancy\
    \ upon root LSR failure.\n   o  The receiver SHOULD NOT receive back a packet\
    \ it has sent on the\n      MP2MP LSP.\n   o  The solution SHOULD avoid that all\
    \ traffic between any pair of\n      leaves is traversing a root LSR (similarly\
    \ to PIM-Bidir trees) and\n      SHOULD provide the operator with means to minimize\
    \ the delay\n      between two leaves.\n   o  It MUST be possible to check connectivity\
    \ of an MP2MP LSP in both\n      directions.\n"
- title: 6.  Evaluation Criteria
  contents:
  - '6.  Evaluation Criteria

    '
- title: 6.1.  Performance
  contents:
  - "6.1.  Performance\n   The solution will be evaluated with respect to the following\n\
    \   criteria:\n   (1)  Efficiency of network resource usage;\n   (2)  Time to\
    \ add or remove a Leaf LSR;\n   (3)  Time to repair a P2MP LSP in case of link\
    \ or node failure; and\n   (4)  Scalability (state size, number of messages, message\
    \ size).\n   Particularly, the P2MP LDP mechanism SHOULD be designed with the\
    \ key\n   objective of minimizing the additional amount of state and additional\n\
    \   processing required in the network.\n   Also, the P2MP LDP mechanism SHOULD\
    \ be designed so that convergence\n   times in case of link or node failure are\
    \ minimized, in order to\n   limit traffic disruption.\n"
- title: 6.2.  Complexity and Risks
  contents:
  - "6.2.  Complexity and Risks\n   The proposed solution SHOULD NOT introduce complexity\
    \ to the current\n   LDP operations to such a degree that it would affect the\
    \ stability\n   and diminish the benefits of deploying such solution.\n"
- title: 7.  Security Considerations
  contents:
  - "7.  Security Considerations\n   It is expected that addressing the requirements\
    \ defined in this\n   document should not introduce any new security issues beyond\
    \ those\n   inherent to LDP and that a P2MP LDP solution will rely on the\n  \
    \ security mechanisms defined in [RFC5036] (e.g., TCP MD5 Signature).\n   An evaluation\
    \ of the security features for MPLS networks may be found\n   in [RFC5920], and\
    \ where issues or further work is identified by that\n   document, new security\
    \ features or procedures for the MPLS protocols\n   will need to be developed.\n"
- title: 8.  Acknowledgments
  contents:
  - "8.  Acknowledgments\n   We would like to thank Christian Jacquenet, Hitoshi Fukuda,\
    \ Ina\n   Minei, Dean Cheng, and Benjamin Niven-Jenkins for their highly useful\n\
    \   comments and suggestions.  We would like to thank Adrian Farrel for\n   reviewing\
    \ this document before publication.\n   We would also like to thank the authors\
    \ of [RFC4461], which inspired\n   some of the text in this document.\n"
- title: 9.  References
  contents:
  - '9.  References

    '
- title: 9.1.  Normative References
  contents:
  - "9.1.  Normative References\n   [RFC2119]     Bradner, S., \"Key words for use\
    \ in RFCs to Indicate\n                 Requirement Levels\", BCP 14, RFC 2119,\
    \ March 1997.\n   [RFC3031]     Rosen, E., Viswanathan, A., and R. Callon,\n \
    \                \"Multiprotocol Label Switching Architecture\", RFC 3031,\n \
    \                January 2001.\n   [RFC3478]     Leelanivas, M., Rekhter, Y.,\
    \ and R. Aggarwal, \"Graceful\n                 Restart Mechanism for Label Distribution\
    \ Protocol\",\n                 RFC 3478, February 2003.\n   [RFC3479]     Farrel,\
    \ A., \"Fault Tolerance for the Label Distribution\n                 Protocol\
    \ (LDP)\", RFC 3479, February 2003.\n   [RFC3815]     Cucchiara, J., Sjostrand,\
    \ H., and J. Luciani,\n                 \"Definitions of Managed Objects for the\
    \ Multiprotocol\n                 Label Switching (MPLS), Label Distribution Protocol\n\
    \                 (LDP)\", RFC 3815, June 2004.\n   [RFC4461]     Yasukawa, S.,\
    \ \"Signaling Requirements for Point-to-\n                 Multipoint Traffic-Engineered\
    \ MPLS Label Switched Paths\n                 (LSPs)\", RFC 4461, April 2006.\n\
    \   [RFC5036]     Andersson, L., Minei, I., and B. Thomas, \"LDP\n           \
    \      Specification\", RFC 5036, October 2007.\n"
- title: 9.2.  Informative References
  contents:
  - "9.2.  Informative References\n   [MLDP]        Minei, I., Wijnands, I., Kompella,\
    \ K., and B. Thomas,\n                 \"Label Distribution Protocol Extensions\
    \ for Point-to-\n                 Multipoint and Multipoint-to-Multipoint Label\
    \ Switched\n                 Paths\", Work in Progress, August 2011.\n   [MVPN]\
    \        Aggarwal, R., Bandi, S., Cai, Y., Morin, T., Rekhter,\n             \
    \    Y., Rosen, E., Wijnands, I., and S. Yasukawa,\n                 \"Multicast\
    \ in MPLS/BGP IP VPNs\", Work in Progress,\n                 January 2010.\n \
    \  [RFC3209]     Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan,\n     \
    \            V., and G. Swallow, \"RSVP-TE: Extensions to RSVP for\n         \
    \        LSP Tunnels\", RFC 3209, December 2001.\n   [RFC4026]     Andersson,\
    \ L. and T. Madsen, \"Provider Provisioned\n                 Virtual Private Network\
    \ (VPN) Terminology\", RFC 4026,\n                 March 2005.\n   [RFC4687] \
    \    Yasukawa, S., Farrel, A., King, D., and T. Nadeau,\n                 \"Operations\
    \ and Management (OAM) Requirements for\n                 Point-to-Multipoint\
    \ MPLS Networks\", RFC 4687,\n                 September 2006.\n   [RFC4834] \
    \    Morin, T., Ed., \"Requirements for Multicast in Layer 3\n               \
    \  Provider-Provisioned Virtual Private Networks\n                 (PPVPNs)\"\
    , RFC 4834, April 2007.\n   [RFC4875]     Aggarwal, R., Papadimitriou, D., and\
    \ S. Yasukawa,\n                 \"Extensions to Resource Reservation Protocol\
    \ - Traffic\n                 Engineering (RSVP-TE) for Point-to-Multipoint TE\
    \ Label\n                 Switched Paths (LSPs)\", RFC 4875, May 2007.\n   [RFC5501]\
    \     Kamite, Y., Wada, Y., Serbest, Y., Morin, T., and L.\n                 Fang,\
    \ \"Requirements for Multicast Support in Virtual\n                 Private LAN\
    \ Services\", RFC 5501, March 2009.\n   [RFC5920]     Fang, L., \"Security Framework\
    \ for MPLS and GMPLS\n                 Networks\", RFC 5920, July 2010.\n   [VPLS-MCAST]\
    \  Aggarwal, R., Kamite, Y., Fang, L., and Y. Rekhter,\n                 \"Multicast\
    \ in VPLS\", Work in Progress, July 2011.\n"
- title: Contributing Authors
  contents:
  - "Contributing Authors\n   Vincent Parfait\n   France Telecom - Orange, Orange\
    \ Business Services\n   EMail: vincent.parfait@orange-ftgroup.com\n   Luyuan Fang\n\
    \   Cisco Systems, Inc.\n   EMail: lufang@cisco.com\n   Lei Wang\n   Telenor\n\
    \   EMail: lei.wang@telenor.com\n   Yuji Kamite\n   NTT Communications Corporation\n\
    \   EMail: y.kamite@ntt.com\n   Shane Amante\n   Level 3 Communications, LLC\n\
    \   EMail: shane@level3.net\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Jean-Louis Le Roux (editor)\n   France Telecom - Orange\n\
    \   EMail: jeanlouis.leroux@orange-ftgroup.com\n   Thomas Morin (editor)\n   France\
    \ Telecom - Orange\n   EMail: thomas.morin@orange-ftgroup.com\n"
