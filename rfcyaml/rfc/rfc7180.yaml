- title: __initial_text__
  contents:
  - "         Transparent Interconnection of Lots of Links (TRILL):\n            \
    \    Clarifications, Corrections, and Updates\n"
- title: Abstract
  contents:
  - "Abstract\n   The IETF Transparent Interconnection of Lots of Links (TRILL)\n\
    \   protocol provides least-cost pair-wise data forwarding without\n   configuration\
    \ in multi-hop networks with arbitrary topology and link\n   technology, safe\
    \ forwarding even during periods of temporary loops,\n   and support for multipathing\
    \ of both unicast and multicast traffic.\n   TRILL accomplishes this by using\
    \ Intermediate System to Intermediate\n   System (IS-IS) link-state routing and\
    \ by encapsulating traffic using\n   a header that includes a hop count.  Since\
    \ publication of the TRILL\n   base protocol in July 2011, active development\
    \ of TRILL has revealed\n   errata in  RFC 6325 and some cases that could use\
    \ clarifications or\n   updates.\n   RFCs 6327 and 6439 provide clarifications\
    \ and updates with respect to\n   adjacency and Appointed Forwarders.  This document\
    \ provides other\n   known clarifications, corrections, and updates to RFCs 6325,\
    \ 6327,\n   and 6439.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This is an Internet Standards Track document.\n   This\
    \ document is a product of the Internet Engineering Task Force\n   (IETF).  It\
    \ represents the consensus of the IETF community.  It has\n   received public\
    \ review and has been approved for publication by the\n   Internet Engineering\
    \ Steering Group (IESG).  Further information on\n   Internet Standards is available\
    \ in Section 2 of RFC 5741.\n   Information about the current status of this document,\
    \ any errata,\n   and how to provide feedback on it may be obtained at\n   http://www.rfc-editor.org/info/rfc7180.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................4\n\
    \      1.1. Precedence .................................................4\n  \
    \    1.2. Changes That Are Not Backward Compatible ...................4\n    \
    \  1.3. Terminology and Acronyms ...................................5\n   2. Overloaded\
    \ and/or Unreachable RBridges ..........................5\n      2.1. Reachability\
    \ ...............................................6\n      2.2. Distribution Trees\
    \ .........................................6\n      2.3. Overloaded Receipt of\
    \ TRILL Data Frames ....................7\n           2.3.1. Known Unicast Receipt\
    \ ...............................7\n           2.3.2. Multi-Destination Receipt\
    \ ...........................7\n      2.4. Overloaded Origination of TRILL Data\
    \ Frames ................7\n           2.4.1. Known Unicast Origination ...........................7\n\
    \           2.4.2. Multi-Destination Origination .......................8\n  \
    \                2.4.2.1. An Example Network .........................8\n    \
    \              2.4.2.2. Indicating OOMF Support ....................9\n      \
    \            2.4.2.3. Using OOMF Service .........................9\n   3. Distribution\
    \ Trees .............................................10\n      3.1. Number of\
    \ Distribution Trees ..............................10\n      3.2. Clarification\
    \ of Distribution Tree Updates ................10\n      3.3. Multicast Pruning\
    \ Based on IP Address .....................10\n      3.4. Numbering of Distribution\
    \ Trees ...........................11\n      3.5. Link Cost Directionality ..................................11\n\
    \   4. Nickname Selection .............................................11\n  \
    \ 5. MTU (Maximum Transmission Unit) ................................13\n    \
    \  5.1. MTU-Related Errata in RFC 6325 ............................13\n      \
    \     5.1.1. MTU PDU Addressing .................................14\n        \
    \   5.1.2. MTU PDU Processing .................................14\n          \
    \ 5.1.3. MTU Testing ........................................14\n      5.2. Ethernet\
    \ MTU Values .......................................15\n   6. Port Modes .....................................................15\n\
    \   7. The CFI/DEI Bit ................................................16\n  \
    \ 8. Graceful Restart ...............................................17\n   9.\
    \ Updates to RFC 6327 ............................................17\n   10. Updates\
    \ on Appointed Forwarders and Inhibition ................18\n      10.1. Optional\
    \ TRILL Hello Reduction ...........................18\n      10.2. Overload and\
    \ Appointed Forwarders ........................20\n   11. IANA Considerations\
    \ ...........................................21\n   12. Security Considerations\
    \ .......................................21\n   13. Acknowledgements ..............................................21\n\
    \   14. References ....................................................22\n  \
    \    14.1. Normative References .....................................22\n    \
    \  14.2. Informative References ...................................23\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The IETF Transparent Interconnection of Lots of Links (TRILL)\n\
    \   protocol [RFC6325] provides optimal pair-wise data frame forwarding\n   without\
    \ configuration in multi-hop networks with arbitrary topology\n   and link technology,\
    \ safe forwarding even during periods of temporary\n   loops, and support for\
    \ multipathing of both unicast and multicast\n   traffic.  TRILL accomplishes\
    \ this by using Intermediate System to\n   Intermediate System (IS-IS) [IS-IS]\
    \ [RFC1195] [RFC7176] link-state\n   routing and encapsulating traffic using a\
    \ header that includes a hop\n   count.  The design supports VLANs (Virtual Local\
    \ Area Networks) and\n   optimization of the distribution of multi-destination\
    \ frames based on\n   VLANs and IP derived multicast groups.\n   In the years\
    \ since the TRILL base protocol [RFC6325] was published,\n   active development\
    \ of TRILL has revealed five errors in the\n   specification [RFC6325] and cases\
    \ that could use clarifications or\n   updates.\n   [RFC6327] and [RFC6439] provide\
    \ clarifications with respect to\n   Adjacency and Appointed Forwarders.  This\
    \ document provides other\n   known clarifications, corrections, and updates to\
    \ [RFC6325],\n   [RFC6327], and [RFC6439].\n"
- title: 1.1.  Precedence
  contents:
  - "1.1.  Precedence\n   In case of conflict between this document and any of [RFC6325],\n\
    \   [RFC6327], or [RFC6439], this document takes precedence.  In\n   addition,\
    \ Section 1.2 (Normative Content and Precedence) of [RFC6325]\n   is updated to\
    \ provide a more complete precedence ordering of the\n   sections of [RFC6325]\
    \ as following, where sections to the left take\n   precedence over sections to\
    \ their right:\n                      4 > 3 > 7 > 5 > 2 > 6 > 1\n"
- title: 1.2.  Changes That Are Not Backward Compatible
  contents:
  - "1.2.  Changes That Are Not Backward Compatible\n   The change made by Section\
    \ 3.4 below is not backward compatible with\n   [RFC6325] but has nevertheless\
    \ been adopted to reduce distribution\n   tree changes resulting from topology\
    \ changes.\n   The several other changes herein that are fixes to errata for\n\
    \   [RFC6325] -- [Err3002] [Err3003] [Err3004] [Err3052] [Err3053]\n   [Err3508]\
    \ -- may not be backward compatible with previous\n   implementations that conformed\
    \ to errors in the specification.\n"
- title: 1.3.  Terminology and Acronyms
  contents:
  - "1.3.  Terminology and Acronyms\n   This document uses the acronyms defined in\
    \ [RFC6325] and the\n   following acronyms and terms:\n      CFI - Canonical Format\
    \ Indicator [802]\n      DEI - Drop Eligibility Indicator [802.1Q-2011]\n    \
    \  EISS - Enhanced Internal Sublayer Service\n      OOMF - Overload Originated\
    \ Multi-destination Frame\n      TRILL Switch - An alternative name for an RBridge\n\
    \   The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\"\
    ,\n   \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT RECOMMENDED\", \"MAY\"\
    , and\n   \"OPTIONAL\" in this document are to be interpreted as described in\n\
    \   [RFC2119].\n"
- title: 2.  Overloaded and/or Unreachable RBridges
  contents:
  - "2.  Overloaded and/or Unreachable RBridges\n   RBridges may be in overload as\
    \ indicated by the [IS-IS] overload flag\n   in their LSPs (Link State PDUs).\
    \  This means that either (1) they are\n   incapable of holding the entire link-state\
    \ database and thus do not\n   have a view of the entire topology or (2) they\
    \ have been configured\n   to have the overload bit set.  Although networks should\
    \ be engineered\n   to avoid actual link-state overload, it might occur under\
    \ various\n   circumstances.  For example, if a large campus included one or more\n\
    \   low-end TRILL Switches.\n   It is a common operational practice to set the\
    \ overload bit in an\n   [IS-IS] router (such as an RBridge) when performing maintenance\
    \ on\n   that router that might affect its ability to correctly forward\n   frames;\
    \ this will usually leave the router reachable for maintenance\n   traffic, but\
    \ transit traffic will not be routed through it.  (Also,\n   in some cases, TRILL\
    \ provides for setting the overload bit in the\n   pseudonode of a link to stop\
    \ TRILL Data traffic on an access link\n   (see Section 4.9.1 of [RFC6325]).)\n\
    \   [IS-IS] and TRILL make a reasonable effort to do what they can even\n   if\
    \ some RBridges/routers are in overload.  They can do reasonably\n   well if a\
    \ few scattered nodes are in overload.  However, actual\n   least-cost paths are\
    \ no longer assured if any RBridges are in\n   overload.\n   For the effect of\
    \ overload on the appointment of forwarders, see\n   Section 10.2.\n   In this\
    \ Section 2, the term \"neighbor\" refers only to actual RBridges\n   and ignores\
    \ pseudonodes.\n"
- title: 2.1.  Reachability
  contents:
  - "2.1.  Reachability\n   Frames are not least-cost routed through an overloaded\
    \ TRILL Switch,\n   although they may originate or terminate at an overloaded\
    \ TRILL\n   Switch.  In addition, frames will not be least-cost routed over links\n\
    \   with cost 2**24 - 1 [RFC5305]; such links are reserved for traffic-\n   engineered\
    \ frames, the handling of which is beyond the scope of this\n   document.\n  \
    \ As a result, a portion of the campus may be unreachable for least-\n   cost\
    \ routed TRILL Data because all paths to it would be through a\n   link with cost\
    \ 2**24 - 1 or through an overloaded RBridge.  For\n   example, an RBridge RB1\
    \ is not reachable by TRILL Data if all of its\n   neighbors are connected to\
    \ RB1 by links with cost 2**24 - 1.  Such\n   RBridges are called \"data unreachable\"\
    .\n   The link-state database at an RBridge RB1 can also contain\n   information\
    \ on TRILL Switches that are unreachable by IS-IS link-\n   state flooding due\
    \ to link or RBridge failures.  When such failures\n   partition the campus, the\
    \ TRILL Switches adjacent to the failure and\n   on the same side of the failure\
    \ as RB1 will update their LSPs to show\n   the lack of connectivity, and RB1\
    \ will receive those updates.  As a\n   result, RB1 will be aware of the partition.\
    \  Nodes on the far side of\n   the partition are both IS-IS unreachable and data\
    \ unreachable.\n   However, LSPs held by RB1 for TRILL Switches on the far side\
    \ of the\n   failure will not be updated and may stay around until they time out,\n\
    \   which could be tens of minutes or longer.  (The default in [IS-IS] is\n  \
    \ twenty minutes.)\n"
- title: 2.2.  Distribution Trees
  contents:
  - "2.2.  Distribution Trees\n   An RBridge in overload cannot be trusted to correctly\
    \ calculate\n   distribution trees or correctly perform the RPFC (Reverse-Path\n\
    \   Forwarding Check).  Therefore, it cannot be trusted to forward multi-\n  \
    \ destination TRILL Data frames.  It can only appear as a leaf node in\n   a TRILL\
    \ multi-destination distribution tree.  Furthermore, if all the\n   immediate\
    \ neighbors of an RBridge are overloaded, then it is omitted\n   from all trees\
    \ in the campus and is unreachable by multi-destination\n   frames.\n   When an\
    \ RBridge determines what nicknames to use as the roots of the\n   distribution\
    \ trees it calculates, it MUST ignore all nicknames held\n   by TRILL Switches\
    \ that are in overload or are data unreachable.  When\n   calculating RPFCs for\
    \ multi-destination frames, an RBridge RB1 MAY,\n   to avoid calculating unnecessary\
    \ RPF check state, ignore any trees\n   that cannot reach to RB1 even if other\
    \ RBridges list those trees as\n   trees that other TRILL Switches might use.\
    \  (But see Section 3.)\n"
- title: 2.3.  Overloaded Receipt of TRILL Data Frames
  contents:
  - "2.3.  Overloaded Receipt of TRILL Data Frames\n   The receipt of TRILL Data frames\
    \ by overloaded RBridge RB2 is\n   discussed in the subsections below.  In all\
    \ cases, the normal Hop\n   Count decrement is performed, and the TRILL Data frame\
    \ is discarded\n   if the result is less than one or if the egress nickname is\
    \ illegal.\n"
- title: 2.3.1.  Known Unicast Receipt
  contents:
  - "2.3.1.  Known Unicast Receipt\n   RB2 will not usually receive unicast TRILL\
    \ Data frames unless it is\n   the egress, in which case it decapsulates and delivers\
    \ the frames\n   normally.  If RB2 receives a unicast TRILL Data frame for which\
    \ it is\n   not the egress, perhaps because a neighbor does not yet know it is\
    \ in\n   overload, RB2 MUST NOT discard the frame because the egress is an\n \
    \  unknown nickname as it might not know about all nicknames due to its\n   overloaded\
    \ condition.  If any neighbor, other than the neighbor from\n   which it received\
    \ the frame, is not overloaded, it MUST attempt to\n   forward the frame to one\
    \ of those neighbors.  If there is no such\n   neighbor, the frame is discarded.\n"
- title: 2.3.2.  Multi-Destination Receipt
  contents:
  - "2.3.2.  Multi-Destination Receipt\n   If RB2 in overload receives a multi-destination\
    \ TRILL Data frame, RB2\n   MUST NOT apply an RPFC since, due to overload, it\
    \ might not do so\n   correctly.  RB2 decapsulates and delivers the frame locally\
    \ where it\n   is Appointed Forwarder for the frame's VLAN, subject to any multicast\n\
    \   pruning.  But since, as stated above, RB2 can only be the leaf of a\n   distribution\
    \ tree, it MUST NOT forward a multi-destination TRILL Data\n   frame (except as\
    \ an egressed native frame where RB2 is Appointed\n   Forwarder).\n"
- title: 2.4.  Overloaded Origination of TRILL Data Frames
  contents:
  - "2.4.  Overloaded Origination of TRILL Data Frames\n   Overloaded origination\
    \ of unicast frames with known egress and of\n   multi-destination frames are\
    \ discussed in the subsections below.\n"
- title: 2.4.1.  Known Unicast Origination
  contents:
  - "2.4.1.  Known Unicast Origination\n   When an overloaded RBridge RB2 ingresses\
    \ or creates a known\n   destination unicast TRILL Data frame, it delivers it\
    \ locally if the\n   destination Media Access Control (MAC) is local.  Otherwise,\
    \ RB2\n   unicasts it to any neighbor TRILL Switch that is not overloaded.  It\n\
    \   MAY use what routing information it has to help select the neighbor.\n"
- title: 2.4.2.  Multi-Destination Origination
  contents:
  - "2.4.2.  Multi-Destination Origination\n   Overloaded RBridge RB2 ingressing or\
    \ creating a multi-destination\n   TRILL Data frame is more complex than for a\
    \ known unicast frame.\n"
- title: 2.4.2.1.  An Example Network
  contents:
  - "2.4.2.1.  An Example Network\n   For example, consider the network below in which,\
    \ for simplicity, end\n   stations and any bridges are not shown.  There is one\
    \ distribution\n   tree of which RB4 is the root; it is represented by double\
    \ lines.\n   Only RBridge RB2 is overloaded.\n            +-----+    +-----+ \
    \    +-----+     +-----+\n            | RB7 +====+ RB5 +=====+ RB3 +=====+ RB1\
    \ |\n            +-----+    +--+--+     +-++--+     +--+--|\n                \
    \          |          ||           |\n                      +---+---+      ||\
    \           |\n               +------+RB2(ov)|======++           |\n         \
    \      |      +-------+      ||           |\n               |                \
    \     ||           |\n            +--+--+     +-----+  ++==++=++     +--+--+\n\
    \            | RB8 +=====+ RB6 +==++ RB4 ++=====+ RB9 |\n            +-----+ \
    \    +-----+  ++=====++     +-----+\n   Since RB2 is overloaded, it does not know\
    \ what the distribution tree\n   or trees are for the network.  Thus, there is\
    \ no way it can provide\n   normal TRILL Data encapsulation for multi-destination\
    \ native frames.\n   So RB2 tunnels the frame to a neighbor that is not overloaded\
    \ if it\n   has such a neighbor that has signaled that it is willing to offer\n\
    \   this service.  RBridges indicate this in their Hellos as described\n   below.\
    \  This service is called OOMF (Overload Originated Multi-\n   destination Frame)\
    \ service.\n   -  The multi-destination frame MUST NOT be locally distributed\
    \ in\n      native form at RB2 before tunneling to a neighbor because this\n \
    \     would cause the frame to be delivered twice.  For example, if RB2\n    \
    \  locally distributed a multicast native frame and then tunneled it\n      to\
    \ RB5, RB2 would get a copy of the frame when RB3 transmitted it\n      as a TRILL\
    \ Data frame on the multi-access RB2-RB3-RB4 link.  Since\n      RB2 would, in\
    \ general, not be able to tell that this was a frame\n      it had tunneled for\
    \ distribution, RB2 would decapsulate it and\n      locally distribute it a second\
    \ time.\n   -  On the other hand, if there is no neighbor of RB2 offering RB2\
    \ the\n      OOMF service, RB2 cannot tunnel the frame to a neighbor.  In this\n\
    \      case, RB2 MUST locally distribute the frame where it is Appointed\n   \
    \   Forwarder for the frame's VLAN and optionally subject to multicast\n     \
    \ pruning.\n"
- title: 2.4.2.2.  Indicating OOMF Support
  contents:
  - "2.4.2.2.  Indicating OOMF Support\n   An RBridge RB3 indicates its willingness\
    \ to offer the OOMF service to\n   RB2 in the TRILL Neighbor TLV in RB3's TRILL\
    \ Hellos by setting a bit\n   associated with the SNPA (Subnetwork Point of Attachment,\
    \ also known\n   as MAC address) of RB2 on the link.  (See Section 11.)  Overloaded\n\
    \   RBridge RB2 can only distribute multi-destination TRILL Data frames\n   to\
    \ the campus if a neighbor of RB2 not in overload offers RB2 the\n   OOMF service.\
    \  If RB2 does not have OOMF service available to it, RB2\n   can still receive\
    \ multi-destination frames from non-overloaded\n   neighbors and, if RB2 should\
    \ originate or ingress such a frame, it\n   distributes it locally in native form.\n"
- title: 2.4.2.3.  Using OOMF Service
  contents:
  - "2.4.2.3.  Using OOMF Service\n   If RB2 sees this OOMF (Overload Originated Multi-destination\
    \ Frame)\n   service advertised for it by any of its neighbors on any link to\n\
    \   which RB2 connects, it selects one such neighbor by a means beyond\n   the\
    \ scope of this document.  Assuming RB2 selects RB3 to handle\n   multi-destination\
    \ frames it originates, RB2 MUST advertise in its LSP\n   that it might use any\
    \ of the distribution trees that RB3 advertises\n   so that the RPFC will work\
    \ in the rest of the campus.  Thus,\n   notwithstanding its overloaded state,\
    \ RB2 MUST retain this\n   information from RB3 LSPs, which it will receive as\
    \ it is directly\n   connected to RB3.\n   RB2 then encapsulates such frames as\
    \ TRILL Data frames to RB3 as\n   follows: M bit = 0, Hop Count = 2, ingress nickname\
    \ = a nickname held\n   by RB2, and, since RB2 cannot tell what distribution tree\
    \ RB3 will\n   use, egress nickname = a special nickname indicating an OOMF frame\n\
    \   (see Section 11).  RB2 then unicasts this TRILL Data frame to RB3.\n   (Implementation\
    \ of Item 4 in Section 4 below provides reasonable\n   assurance that, notwithstanding\
    \ its overloaded state, the ingress\n   nickname used by RB2 will be unique within\
    \ at least the portion of\n   the campus that is IS-IS reachable from RB2.)\n\
    \   On receipt of such a frame, RB3 does the following:\n   -  changes the Egress\
    \ Nickname field to designate a distribution tree\n      that RB3 normally uses,\n\
    \   -  sets the M bit to one,\n   -  changes the Hop Count to the value it would\
    \ normally use if it\n      were the ingress, and\n   -  forwards the frame on\
    \ that tree.\n   RB3 MAY rate limit the number of frames for which it is providing\n\
    \   this service by discarding some such frames from RB2.  The provision\n   of\
    \ even limited bandwidth for OOMFs by RB3, perhaps via the slow\n   path, may\
    \ be important to the bootstrapping of services at RB2 or at\n   end stations\
    \ connected to RB2, such as supporting DHCP and ARP/ND\n   (Address Resolution\
    \ Protocol / Neighbor Discovery).  (Everyone\n   sometimes needs a little OOMF\
    \ (pronounced \"oomph\") to get off the\n   ground.)\n"
- title: 3.  Distribution Trees
  contents:
  - "3.  Distribution Trees\n   Two corrections, a clarification, and two updates\
    \ related to\n   distribution trees appear in the subsections below.  See also\n\
    \   Section 2.2.\n"
- title: 3.1.  Number of Distribution Trees
  contents:
  - "3.1.  Number of Distribution Trees\n   In [RFC6325], Section 4.5.2, page 56,\
    \ Point 2, 4th paragraph, the\n   parenthetical \"(up to the maximum of {j,k})\"\
    \ is incorrect [Err3052].\n   It should read \"(up to k if j is zero or the minimum\
    \ of (j, k) if j\n   is non-zero)\".\n"
- title: 3.2.  Clarification of Distribution Tree Updates
  contents:
  - "3.2.  Clarification of Distribution Tree Updates\n   When a link-state database\
    \ change causes a change in the distribution\n   tree(s), there are several possibilities.\
    \  If a tree root remains a\n   tree root but the tree changes, then local forwarding\
    \ and RPFC\n   entries for that tree should be updated as soon as practical.\n\
    \   Similarly, if a new nickname becomes a tree root, forwarding and RPFC\n  \
    \ entries for the new tree should be installed as soon as practical.\n   However,\
    \ if a nickname ceases to be a tree root and there is\n   sufficient room in local\
    \ tables, the forwarding and RPFC entries for\n   the former tree MAY be retained\
    \ so that any multi-destination TRILL\n   Data frames already in flight on that\
    \ tree have a higher probability\n   of being delivered.\n"
- title: 3.3.  Multicast Pruning Based on IP Address
  contents:
  - "3.3.  Multicast Pruning Based on IP Address\n   The TRILL base protocol specification\
    \ [RFC6325] provides for and\n   recommends the pruning of multi-destination frame\
    \ distribution trees\n   based on the location of IP multicast routers and listeners;\
    \ however,\n   multicast listening is identified by derived MAC addresses as\n\
    \   communicated in the Group MAC Address sub-TLV [RFC7176].\n   TRILL Switches\
    \ MAY communicate multicast listeners and prune\n   distribution trees based on\
    \ the actual IPv4 or IPv6 multicast\n   addresses involved.  Additional Group\
    \ Address sub-TLVs are provided\n   in [RFC7176] to carry this information.  A\
    \ TRILL Switch that is only\n   capable of pruning based on derived MAC address\
    \ SHOULD calculate and\n   use such derived MAC addresses from multicast listener\
    \ IPv4/IPv6\n   address information it receives.\n"
- title: 3.4.  Numbering of Distribution Trees
  contents:
  - "3.4.  Numbering of Distribution Trees\n   Section 4.5.1 of [RFC6325] specifies\
    \ that, when building distribution\n   tree number j, node (RBridge) N that has\
    \ multiple possible parents in\n   the tree is attached to possible parent number\
    \ j mod p.  Trees are\n   numbered starting with 1, but possible parents are numbered\
    \ starting\n   with 0.  As a result, if there are two trees and two possible\n\
    \   parents, in tree 1, parent 1 will be selected, and in tree 2, parent\n   0\
    \ will be selected.\n   This is changed so that the selected parent MUST be (j-1)\
    \ mod p.  As\n   a result, in the case above, tree 1 will select parent 0, and\
    \ tree 2\n   will select parent 1.  This change is not backward compatible with\n\
    \   [RFC6325].  If all RBridges in a campus do not determine distribution\n  \
    \ trees in the same way, then for most topologies, the RPFC will drop\n   many\
    \ multi-destination frames before they have been properly\n   delivered.\n"
- title: 3.5.  Link Cost Directionality
  contents:
  - "3.5.  Link Cost Directionality\n   Distribution tree construction, like other\
    \ least-cost aspects of\n   TRILL, works even if link costs are asymmetric, so\
    \ the cost of the\n   hop from RB1 to RB2 is different from the cost of the hop\
    \ from RB2 to\n   RB1. However, it is essential that all RBridges calculate the\
    \ same\n   distribution trees, and thus, all must either use the cost away from\n\
    \   the tree root or the cost towards the tree root. As corrected in\n   [Err3508],\
    \ the text in Section 4.5.1 of [RFC6325] is incorrect.  It\n   says:\n      In\
    \ other words, the set of potential parents for N, for the tree\n      rooted\
    \ at R, consists of those that give equally minimal cost\n      paths from N to\
    \ R and ...\n   but the text should say \"from R to N\":\n      In other words,\
    \ the set of potential parents for N, for the tree\n      rooted at R, consists\
    \ of those that give equally minimal cost\n      paths from R to N and ...\n"
- title: 4.  Nickname Selection
  contents:
  - "4.  Nickname Selection\n   Nickname selection is covered by Section 3.7.3 of\
    \ [RFC6325].\n   However, the following should be noted:\n   1.  The second sentence\
    \ in the second bullet item in Section 3.7.3 of\n       [RFC6325] on page 25 is\
    \ erroneous [Err3002] and is corrected as\n       follows:\n       o  The occurrence\
    \ of \"IS-IS ID (LAN ID)\" is replaced with\n          \"priority\".\n       o\
    \  The occurrence of \"IS-IS System ID\" is replaced with \"seven-\n         \
    \ byte IS-IS ID (LAN ID)\".\n       The resulting corrected sentence in [RFC6325]\
    \ reads as follows:\n          If RB1 chooses nickname x, and RB1 discovers, through\
    \ receipt\n          of an LSP for RB2 at any later time, that RB2 has also chosen\n\
    \          x, then the RBridge or pseudonode with the numerically higher\n   \
    \       priority keeps the nickname, or if there is a tie in priority,\n     \
    \     the RBridge with the numerically higher seven-byte IS-IS ID\n          (LAN\
    \ ID) keeps the nickname, and the other RBridge MUST select\n          a new nickname.\n\
    \   2.  In examining the link-state database for nickname conflicts,\n       nicknames\
    \ held by IS-IS unreachable TRILL Switches MUST be\n       ignored, but nicknames\
    \ held by IS-IS reachable TRILL Switches\n       MUST NOT be ignored even if they\
    \ are data unreachable.\n   3.  An RBridge may need to select a new nickname,\
    \ either initially\n       because it has none or because of a conflict.  When\
    \ doing so, the\n       RBridge MUST consider as available all nicknames that\
    \ do not\n       appear in its link-state database or that appear to be held by\n\
    \       IS-IS unreachable TRILL Switches; however, it SHOULD give\n       preference\
    \ to selecting new nicknames that do not appear to be\n       held by any TRILL\
    \ Switch in the campus, reachable or unreachable,\n       so as to minimize conflicts\
    \ if IS-IS unreachable TRILL Switches\n       later become reachable.\n   4. \
    \ An RBridge, even after it has acquired a nickname for which there\n       appears\
    \ to be no conflicting claimant, MUST continue to monitor\n       for conflicts\
    \ with the nickname or nicknames it holds.  It does\n       so by checking in\
    \ LSP PDUs it receives that should update its\n       link-state database for\
    \ the following: any occurrence of any of\n       its nicknames held with higher\
    \ priority by some other TRILL\n       Switch that is IS-IS reachable from it.\
    \  If it finds such a\n       conflict, it MUST select a new nickname, even when\
    \ in overloaded\n       state.  (It is possible to receive an LSP that should\
    \ update the\n       link-state database but does not due to overload.)\n   5.\
    \  In the very unlikely case that an RBridge is unable to obtain a\n       nickname\
    \ because all valid RBridge nicknames (0x0001 through\n       0xFFBF inclusive)\
    \ are in use with higher priority by IS-IS\n       reachable TRILL Switches, it\
    \ will be unable to act as an ingress,\n       egress, or tree root but will still\
    \ be able to function as a\n       transit TRILL Switch.  Although it cannot be\
    \ a tree root, such an\n       RBridge is included in distribution trees computed\
    \ for the campus\n       unless all its neighbors are overloaded.  It would not\
    \ be\n       possible to send a unicast RBridge Channel message specifically\n\
    \       to such a TRILL Switch [RFC7178]; however, it will receive\n       unicast\
    \ Channel messages sent by a neighbor to the Any-RBridge\n       egress nickname\
    \ and will receive appropriate multi-destination\n       Channel messages.\n"
- title: 5.  MTU (Maximum Transmission Unit)
  contents:
  - "5.  MTU (Maximum Transmission Unit)\n   MTU values in TRILL key off the originatingL1LSPBufferSize\
    \ value\n   communicated in the IS-IS originatingLSPBufferSize TLV [IS-IS].  The\n\
    \   campus-wide value Sz, as described in Section 4.3.1 of [RFC6325], is\n   the\
    \ minimum value of originatingL1LSPBufferSize for the RBridges in a\n   campus,\
    \ but not less than 1470.  The MTU testing mechanism and\n   limiting LSPs to\
    \ Sz assures that the LSPs can be flooded by IS-IS and\n   thus that IS-IS can\
    \ operate properly.\n   If nothing is known about the MTU of the links or the\n\
    \   originatingL1LSPBufferSize of other RBridges in a campus, the\n   originatingL1LSPBufferSize\
    \ for an RBridge should default to the\n   minimum of the LSP size that its TRILL\
    \ IS-IS software can handle and\n   the minimum MTU of the ports that it might\
    \ use to receive or transmit\n   LSPs.  If an RBridge does have knowledge of link\
    \ MTUs or other\n   RBridge originatingL1LSPBufferSize, then, to avoid the necessity\
    \ to\n   regenerate the local LSPs using a different maximum size, the\n   RBridge's\
    \ originatingL1LSPBufferSize SHOULD be configured to the\n   minimum of (1) the\
    \ smallest value that other RBridges are or will be\n   announcing as their originatingL1LSPBufferSize\
    \ and (2) a value small\n   enough that the campus will not partition due to a\
    \ significant number\n   of links with limited MTU.  However, as provided in [RFC6325],\
    \ in no\n   case can originatingL1LSPBufferSize be less than 1470.  In a well-\n\
    \   configured campus, to minimize any LSP regeneration due to re-sizing,\n  \
    \ it is desirable for all RBridges to be configured with the same\n   originatingL1LSPBufferSize.\n\
    \   Section 5.1 below corrects errata in [RFC6325], and Section 5.2\n   clarifies\
    \ the meaning of various MTU limits for TRILL Ethernet links.\n"
- title: 5.1.  MTU-Related Errata in RFC 6325
  contents:
  - "5.1.  MTU-Related Errata in RFC 6325\n   Three MTU-related errata in [RFC6325]\
    \ are corrected in the\n   subsections below.\n"
- title: 5.1.1.  MTU PDU Addressing
  contents:
  - "5.1.1.  MTU PDU Addressing\n   Section 4.3.2 of [RFC6325] incorrectly states\
    \ that multi-destination\n   MTU-probe and MTU-ack TRILL IS-IS PDUs are sent on\
    \ Ethernet links\n   with the All-RBridges multicast address as the Outer.MacDA\
    \ [Err3004].\n   As TRILL IS-IS PDUs, when multicast on an Ethernet link, they\
    \ MUST be\n   sent to the All-IS-IS-RBridges multicast address.\n"
- title: 5.1.2.  MTU PDU Processing
  contents:
  - "5.1.2.  MTU PDU Processing\n   As discussed in [RFC6325] and, in more detail,\
    \ in [RFC6327], MTU-\n   probe and MTU-ack PDUs MAY be unicast; however, Section\
    \ 4.6 of\n   [RFC6325] erroneously does not allow for this possibility [Err3003].\n\
    \   It is corrected by replacing Item numbered \"1\" in Section 4.6.2 of\n   [RFC6325]\
    \ with the following quoted text to which TRILL Switches MUST\n   conform:\n \
    \  \"1. If the Ethertype is L2-IS-IS and the Outer.MacDA is either All-\n    \
    \   IS-IS-RBridges or the unicast MAC address of the receiving\n       RBridge\
    \ port, the frame is handled as described in\n       Section 4.6.2.1\"\n   The\
    \ reference to \"Section 4.6.2.1\" in the above quoted text is to\n   that section\
    \ in [RFC6325].\n"
- title: 5.1.3.  MTU Testing
  contents:
  - "5.1.3.  MTU Testing\n   The last two sentences of Section 4.3.2 of [RFC6325]\
    \ have errors\n   [Err3053].  They currently read:\n      If X is not greater\
    \ than Sz, then RB1 sets the \"failed minimum MTU\n      test\" flag for RB2 in\
    \ RB1's Hello.  If size X succeeds, and X >\n      Sz, then RB1 advertises the\
    \ largest tested X for each adjacency in\n      the TRILL Hellos RB1 sends on\
    \ that link, and RB1 MAY advertise X\n      as an attribute of the link to RB2\
    \ in RB1's LSP.\n   They should read:\n      If X is not greater than or equal\
    \ to Sz, then RB1 sets the \"failed\n      minimum MTU test\" flag for RB2 in\
    \ RB1's Hello.  If size X\n      succeeds, and X >= Sz, then RB1 advertises the\
    \ largest tested X\n      for each adjacency in the TRILL Hellos RB1 sends on\
    \ that link, and\n      RB1 MAY advertise X as an attribute of the link to RB2\
    \ in RB1's\n      LSP.\n"
- title: 5.2.  Ethernet MTU Values
  contents:
  - "5.2.  Ethernet MTU Values\n   originatingL1LSPBufferSize is the maximum permitted\
    \ size of LSPs\n   starting with the 0x83 Intradomain Routeing Protocol Discriminator\n\
    \   byte.  In Layer 3 IS-IS, originatingL1LSPBufferSize defaults to 1492\n   bytes.\
    \  (This is because, in its previous life as DECnet Phase V,\n   IS-IS was encoded\
    \ using the SNAP SAP (Subnetwork Access Protocol\n   Service Access Point) [RFC7042]\
    \ format, which takes 8 bytes of\n   overhead and 1492 + 8 = 1500, the classic\
    \ Ethernet maximum.  When\n   standardized by ISO/IEC [IS-IS] to use Logical Link\
    \ Control (LLC)\n   encoding, this default could have been increased by a few\
    \ bytes but\n   was not.)\n   In TRILL, originatingL1LSPBufferSize defaults to\
    \ 1470 bytes.  This\n   allows 27 bytes of headroom or safety margin to accommodate\
    \ legacy\n   devices with the classic Ethernet maximum MTU despite headers such\
    \ as\n   an Outer.VLAN.\n   Assuming the campus-wide minimum link MTU is Sz, RBridges\
    \ on Ethernet\n   links MUST limit most TRILL IS-IS PDUs so that PDUz (the length\
    \ of\n   the PDU starting just after the L2-IS-IS Ethertype and ending just\n\
    \   before the Ethernet Frame Check Sequence (FCS)) does not to exceed\n   Sz.\
    \  The PDU exceptions are TRILL Hello PDUs, which MUST NOT exceed\n   1470 bytes,\
    \ and MTU-probe and MTU-ack PDUs that are padded, depending\n   on the size being\
    \ tested (which may exceed Sz).\n   Sz does not limit TRILL Data frames.  They\
    \ are only limited by the\n   MTU of the devices and links that they actually\
    \ pass through;\n   however, links that can accommodate IS-IS PDUs up to Sz would\n\
    \   accommodate, with a generous safety margin, TRILL Data frame payloads\n  \
    \ of (Sz - 24) bytes, starting after the Inner.VLAN and ending just\n   before\
    \ the FCS.  Most modern Ethernet equipment has ample headroom\n   for frames with\
    \ extensive headers and is sometimes engineered to\n   accommodate 9K byte jumbo\
    \ frames.\n"
- title: 6.  Port Modes
  contents:
  - "6.  Port Modes\n   Section 4.9.1 of [RFC6325] specifies four mode bits for RBridge\
    \ ports\n   but may not be completely clear on the effects of various\n   combinations\
    \ of bits.\n   The table below explicitly indicates the effect of all possible\n\
    \   combinations of the TRILL port mode bits.  \"*\" in one of the first\n   four\
    \ columns indicates that the bit can be either zero or one.  The\n   following\
    \ columns indicate allowed frame types.  The Disable bit\n   normally disables\
    \ all frames, but, as an implementation choice, some\n   or all low-level Layer\
    \ 2 control frames (as specified in [RFC6325],\n   Section 1.4) can still be sent\
    \ or received.\n            +-+-+-+-+--------+-------+-----+-----+-----+\n   \
    \         |D| | | |        |       |     |     |     |\n            |i| |A| |\
    \        |       |TRILL|     |     |\n            |s| |c|T|        |       |Data\
    \ |     |     |\n            |a| |c|r|        |       |     |     |     |\n  \
    \          |b|P|e|u|        |native | LSP |     |     |\n            |l|2|s|n|Layer\
    \ 2 |ingress| SNP |TRILL| P2P |\n            |e|P|s|k|Control |egress | MTU |Hello|Hello|\n\
    \            +-+-+-+-+--------+-------+-----+-----+-----+\n            |0|0|0|0|\
    \  Yes   |  Yes  | Yes | Yes | No  |\n            +-+-+-+-+--------+-------+-----+-----+-----+\n\
    \            |0|0|0|1|  Yes   |  No   | Yes | Yes | No  |\n            +-+-+-+-+--------+-------+-----+-----+-----+\n\
    \            |0|0|1|0|  Yes   |  Yes  | No  | Yes | No  |\n            +-+-+-+-+--------+-------+-----+-----+-----+\n\
    \            |0|0|1|1|  Yes   |  No   | No  | Yes | No  |\n            +-+-+-+-+--------+-------+-----+-----+-----+\n\
    \            |0|1|0|*|  Yes   |  No   | Yes | No  | Yes |\n            +-+-+-+-+--------+-------+-----+-----+-----+\n\
    \            |0|1|1|*|  Yes   |  No   | No  | No  | Yes |\n            +-+-+-+-+--------+-------+-----+-----+-----+\n\
    \            |1|*|*|*|Optional|  No   | No  | No  | No  |\n            +-+-+-+-+--------+-------+-----+-----+-----+\n\
    \   (The formal name of the \"access bit\" is the \"TRILL traffic disable\n  \
    \ bit\", and the formal name of the \"trunk bit\" is the \"end-station\n   service\
    \ disable bit\" [RFC6325].)\n"
- title: 7.  The CFI/DEI Bit
  contents:
  - "7.  The CFI/DEI Bit\n   In May 2011, the IEEE promulgated [802.1Q-2011], which\
    \ changes the\n   meaning of the bit between the priority and VLAN ID bits in\
    \ the\n   payload of C-VLAN tags.  Previously, this bit was called the CFI\n \
    \  (Canonical Format Indicator) bit [802] and had a special meaning in\n   connection\
    \ with IEEE 802.5 (Token Ring) frames.  Now, under\n   [802.1Q-2011], it is a\
    \ DEI (Drop Eligibility Indicator) bit, similar\n   to that bit in S-VLAN/B-VLAN\
    \ tags where this bit has always been a\n   DEI bit.\n   The TRILL base protocol\
    \ specification [RFC6325] assumed, in effect,\n   that the link by which end stations\
    \ are connected to TRILL Switches\n   and the restricted virtual link provided\
    \ by the TRILL Data frame are\n   IEEE 802.3 Ethernet links on which the CFI bit\
    \ is always zero.\n   Should an end station be attached by some other type of\
    \ link, such as\n   a Token Ring link, [RFC6325] implicitly assumed that such\
    \ frames\n   would be canonicalized to 802.3 frames before being ingressed, and\n\
    \   similarly, on egress, such frames would be converted from 802.3 to\n   the\
    \ appropriate frame type for the link.  Thus, [RFC6325] required\n   that the\
    \ CFI bit in the Inner.VLAN, which is shown as the \"C\" bit in\n   Section 4.1.1\
    \ of [RFC6325], always be zero.\n   However, for TRILL Switches with ports conforming\
    \ to the change\n   incorporated in the IEEE 802.1Q-2011 standard, the bit in\
    \ the\n   Inner.VLAN, now a DEI bit, MUST be set to the DEI value provided by\n\
    \   the EISS (Enhanced Internal Sublayer Service) interface on ingressing\n  \
    \ a native frame.  Similarly, this bit MUST be provided to the EISS\n   when transiting\
    \ or egressing a TRILL Data frame.  As with the 3-bit\n   Priority field, the\
    \ DEI bit to use in forwarding a transit frame MUST\n   be taken from the Inner.VLAN.\
    \  The exact effect on the Outer.VLAN DEI\n   and priority bits and whether or\
    \ not an Outer.VLAN appears at all on\n   the wire for output frames may depend\
    \ on output port configuration.\n   TRILL campuses with a mixture of ports, some\
    \ compliant with\n   [802.1Q-2011] and some compliant with pre-802.1Q-2011 standards,\n\
    \   especially if they have actual Token Ring links, may operate\n   incorrectly\
    \ and may corrupt data, just as a bridged LAN with such\n   mixed ports and links\
    \ would.\n"
- title: 8.  Graceful Restart
  contents:
  - "8.  Graceful Restart\n   TRILL Switches SHOULD support the features specified\
    \ in [RFC5306],\n   which describes a mechanism for a restarting IS-IS router\
    \ to signal\n   to its neighbors that it is restarting, allowing them to reestablish\n\
    \   their adjacencies without cycling through the down state, while still\n  \
    \ correctly initiating link-state database synchronization.\n"
- title: 9.  Updates to RFC 6327
  contents:
  - "9.  Updates to RFC 6327\n   [RFC6327] provides for multiple states of the potential\
    \ adjacency\n   between two TRILL Switches.  It makes clear that only an adjacency\
    \ in\n   the \"Report\" state is reported in LSPs.  LSP synchronization (LSP and\n\
    \   Subnetwork Point (SNP) transmission and receipt), however, is\n   performed\
    \ if and only if there is at least one adjacency on the link\n   in either the\
    \ \"2-Way\" or \"Report\" state.\n   To support the PORT-TRILL-VER sub-TLV specified\
    \ in [RFC7176], the\n   following updates are made to [RFC6327]:\n   1.  The first\
    \ sentence of the last paragraph in [RFC6327] Section 3.1\n       is modified\
    \ from\n          All TRILL LAN Hellos issued by an RBridge on a particular port\n\
    \          MUST have the same source MAC address, priority, desired\n        \
    \  Designated VLAN, and Port ID, regardless of the VLAN in which\n          the\
    \ Hello is sent.\n       to\n          All TRILL LAN Hellos issued by an RBridge\
    \ on a particular port\n          MUST have the same source MAC address, priority,\
    \ desired\n          Designated VLAN, Port ID, and PORT-TRILL-VER sub-TLV [RFC7176]\n\
    \          if included, regardless of the VLAN in which the Hello is\n       \
    \   sent.\n   2.  An additional bullet item is added to the end of Section 3.2\
    \ of\n       [RFC6327] as follows:\n       o  The five bytes of PORT-TRILL-VER\
    \ sub-TLV data received in the\n          most recent TRILL Hello from the neighbor\
    \ RBridge.\n   3.  In Section 3.3 of [RFC6327], near the bottom of page 12, a\
    \ bullet\n       item as follows is added:\n       o  The five bytes of PORT-TRILL-VER\
    \ sub-TLV data are set from\n          that sub-TLV in the Hello or set to zero\
    \ if that sub-TLV does\n          not occur in the Hello.\n   4.  At the beginning\
    \ of Section 4 of [RFC6327], a bullet item is\n       added to the list as follows:\n\
    \       o  The five bytes of PORT-TRILL-VER sub-TLV data used in TRILL\n     \
    \     Hellos sent on the port.\n"
- title: 10.  Updates on Appointed Forwarders and Inhibition
  contents:
  - "10.  Updates on Appointed Forwarders and Inhibition\n   An optional method of\
    \ Hello reduction is specified in Section 10.1\n   below and a recommendation\
    \ on forwarder appointments in the face of\n   overload is given in Section 10.2.\n"
- title: 10.1.  Optional TRILL Hello Reduction
  contents:
  - "10.1.  Optional TRILL Hello Reduction\n   If a network manager has sufficient\
    \ confidence that it knows the\n   configuration of bridges, ports, and the like,\
    \ within a link, it may\n   be able to reduce the number of TRILL Hellos sent\
    \ on that link; for\n   example, if all RBridges on the link will see all Hellos\
    \ regardless\n   of VLAN constraints, Hellos could be sent on fewer VLANs.  However,\n\
    \   because adjacencies are established in the Designated VLAN, an\n   RBridge\
    \ MUST always attempt to send Hellos in the Designated VLAN.\n   Hello reduction\
    \ makes TRILL less robust in the face of decreased VLAN\n   connectivity in a\
    \ link such as partitioned VLANs, many VLANs disabled\n   on ports, or disagreement\
    \ over the Designated VLAN; however, as long\n   as all RBridge ports on the link\
    \ are configured for the same desired\n   Designated VLAN, can see each other's\
    \ frames in that VLAN, and\n   utilize the mechanisms specified below to update\
    \ VLAN inhibition\n   timers, operations will be safe.  (These considerations\
    \ do not arise\n   on links between RBridges that are configured as point-to-point\n\
    \   since, in that case, each RBridge sends point-to-point Hellos, other\n   TRILL\
    \ IS-IS PDUs, and TRILL Data frames only in what it believes to\n   be the Designated\
    \ VLAN of the link and no native frame end-station\n   service is provided.)\n\
    \   The provision for a configurable set of \"Announcing VLANs\", as\n   described\
    \ in Section 4.4.3 of [RFC6325], provides a mechanism in the\n   TRILL base protocol\
    \ for a reduction in TRILL Hellos.\n   To maintain loop safety in the face of\
    \ occasional lost frames,\n   RBridge failures, link failures, new RBridges coming\
    \ up on a link,\n   and the like, the inhibition mechanism specified in [RFC6439]\
    \ is\n   still required.  Under Section 3 of [RFC6439], a VLAN inhibition\n  \
    \ timer can only be set by the receipt of a Hello sent or received in\n   that\
    \ VLAN.  Thus, to safely send a reduced number of TRILL Hellos on\n   a reduced\
    \ number of VLANs requires additional mechanisms to set the\n   VLAN inhibition\
    \ timers at an RBridge, thus extending Section 3, Item\n   4, of [RFC6439].  Two\
    \ such mechanisms are specified below.  Support\n   for both of these mechanisms\
    \ is indicated by a capability bit in the\n   PORT-TRILL-VER sub-TLV (see Section\
    \ 9 above and [RFC7176]).  It may\n   be unsafe for an RBridge to send TRILL Hellos\
    \ on fewer VLANs than the\n   set of VLANs recommended in [RFC6325] on a link\
    \ unless all its\n   adjacencies on that link (excluding those in the Down state\n\
    \   [RFC6327]) indicate support of these mechanisms and these mechanisms\n   are\
    \ in use.\n   1.  An RBridge RB2 MAY include in any TRILL Hello an Appointed\n\
    \       Forwarders sub-TLV [RFC7176] appointing itself for one or more\n     \
    \  ranges of VLANs.  The Appointee Nickname field(s) in the\n       Appointed\
    \ Forwarder sub-TLV MUST be the same as the Sender\n       Nickname in the Special\
    \ VLANs and Flags sub-TLV in the TRILL\n       Hello.  This indicates the sending\
    \ RBridge believes it is\n       Appointed Forwarder for those VLANs.  An RBridge\
    \ receiving such a\n       sub-TLV sets each of its VLAN inhibition timers for\
    \ every VLAN in\n       the block or blocks listed in the Appointed Forwarders\
    \ sub-TLV to\n       the maximum of its current value and the Holding Time of\
    \ the\n       Hello containing the sub-TLV.  This is backward compatible\n   \
    \    because such sub-TLVs will have no effect on any receiving\n       RBridge\
    \ not implementing this mechanism unless RB2 is the DRB\n       (Designated RBridge)\
    \ sending Hello on the Designated VLAN, in\n       which case, as specified in\
    \ [RFC6439], RB2 MUST include in the\n       Hello all forwarder appointments,\
    \ if any, for RBridges other than\n       itself on the link.\n   2.  An RBridge\
    \ MAY use the new VLANs Appointed sub-TLV [RFC7176].\n       When RB1 receives\
    \ a VLANs Appointed sub-TLV in a TRILL Hello from\n       RB2 on any VLAN, RB1\
    \ updates the VLAN inhibition timers for all\n       the VLANs that RB2 lists\
    \ in that sub-TLV as VLANs for which RB2\n       is Appointed Forwarder.  Each\
    \ such timer is updated to the\n       maximum of its current value and the Holding\
    \ Time of the TRILL\n       Hello containing the VLANs Appointed sub-TLV.  This\
    \ sub-TLV will\n       be an unknown sub-TLV to RBridges not implementing it,\
    \ and such\n       RBridges will ignore it.  Even if a TRILL Hello sent by the\
    \ DRB\n       on the Designated VLAN includes one or more VLANs Appointed sub-\n\
    \       TLVs, as long as no Appointed Forwarders sub-TLVs appear, the\n      \
    \ Hello is not required to indicate all forwarder appointments.\n   Two different\
    \ encodings are providing above to optimize the listing\n   of VLANs.  Large blocks\
    \ of contiguous VLANs are more efficiently\n   encoded with the Appointed Forwarders\
    \ sub-TLV, and scattered VLANs\n   are more efficiently encoded with the VLANs\
    \ Appointed sub-TLV.  These\n   encodings may be mixed in the same Hello.  The\
    \ use of these sub-TLVs\n   does not affect the requirement that the \"AF\" bit\
    \ in the Special\n   VLANs and Flags sub-TLV MUST be set if the originating RBridge\n\
    \   believes it is Appointed Forwarder for the VLAN in which the Hello is\n  \
    \ sent.  If the above mechanisms are used on a link, then each RBridge\n   on\
    \ the link MUST send Hellos in one or more VLANs with such VLANs\n   Appointed\
    \ sub-TLV(s) and/or self-appointment Appointed Forwarders\n   sub-TLV(s), and\
    \ the \"AF\" bit MUST be appropriately set such that no\n   VLAN inhibition timer\
    \ will improperly expire unless three or more\n   Hellos are lost.  For example,\
    \ an RBridge could announce all VLANs\n   for which it believes it is Appointed\
    \ Forwarder in a Hello sent on\n   the Designated VLAN three times per Holding\
    \ Time.\n"
- title: 10.2.  Overload and Appointed Forwarders
  contents:
  - "10.2.  Overload and Appointed Forwarders\n   An RBridge in overload (see Section\
    \ 2) will, in general, do a poorer\n   job of ingressing and forwarding frames\
    \ than an RBridge not in\n   overload that has full knowledge of the campus topology.\
    \  For\n   example, an overloaded RBridge may not be able to distribute multi-\n\
    \   destination TRILL Data frames at all.\n   Therefore, the DRB SHOULD NOT appoint\
    \ an RBridge in overload as an\n   Appointed Forwarder unless there is no alternative.\
    \  Furthermore, if\n   an Appointed Forwarder becomes overloaded, the DRB SHOULD\
    \ re-assign\n   VLANs from the overloaded RBridge to another RBridge on the link\
    \ that\n   is not overloaded, if one is available.  DRB election is not affected\n\
    \   by overload.\n   A counter-example would be if all campus end stations in\
    \ VLAN-x were\n   on links attached to RB1 via ports where VLAN-x was enabled.\
    \  In such\n   a case, RB1 SHOULD be made the VLAN-x Appointed Forwarder on all\
    \ such\n   links even if RB1 is overloaded.\n"
- title: 11.  IANA Considerations
  contents:
  - "11.  IANA Considerations\n   The following IANA actions have been completed.\n\
    \   1.  The nickname 0xFFC1, which was reserved by [RFC6325], is\n       allocated\
    \ for use in the TRILL Header Egress Nickname field to\n       indicate an OOMF\
    \ (Overload Originated Multi-destination Frame).\n   2.  Bit 1 from the seven\
    \ previously reserved (RESV) bits in the per-\n       neighbor \"Neighbor RECORD\"\
    \ in the TRILL Neighbor TLV [RFC7176] is\n       allocated to indicate that the\
    \ RBridge sending the TRILL Hello\n       volunteers to provide the OOMF forwarding\
    \ service described in\n       Section 2.4.2 to such frames originated by the\
    \ TRILL Switch whose\n       SNPA (MAC address) appears in that Neighbor RECORD.\
    \  The\n       description of this bit is \"Offering OOMF service\".\n   3.  Bit\
    \ 0 is allocated from the Capability bits in the PORT-TRILL-VER\n       sub-TLV\
    \ [RFC7176] to indicate support of the VLANs Appointed sub-\n       TLV [RFC7176]\
    \ and the VLAN inhibition setting mechanisms\n       specified in Section 10.1.\
    \  The description of this bit is \"Hello\n       reduction support\".\n"
- title: 12.  Security Considerations
  contents:
  - "12.  Security Considerations\n   This memo improves the documentation of the\
    \ TRILL protocol, corrects\n   five errata in [RFC6325], and updates [RFC6325],\
    \ [RFC6327], and\n   [RFC6439].  It does not change the security considerations\
    \ of these\n   RFCs.\n"
- title: 13.  Acknowledgements
  contents:
  - "13.  Acknowledgements\n   The contributions of the following individuals are\
    \ gratefully\n   acknowledged: Somnath Chatterjee, Weiguo Hao, Rakesh Kumar, Yizhou\n\
    \   Li, Radia Perlman, Mike Shand, Meral Shirazipour, and Varun Varshah.\n"
- title: 14.  References
  contents:
  - '14.  References

    '
- title: 14.1.  Normative References
  contents:
  - "14.1.  Normative References\n   [802.1Q-2011]\n              IEEE, \"IEEE Standard\
    \ for Local and metropolitan area\n              networks -- Media Access Control\
    \ (MAC) Bridges and Virtual\n              Bridged Local Area Networks\", IEEE\
    \ Std 802.1Q-2011, August\n              2011.\n   [IS-IS]    International Organization\
    \ for Standardization,\n              \"Intermediate System to Intermediate System\
    \ intra-domain\n              routeing information exchange protocol for use in\n\
    \              conjunction with the protocol for providing the\n             \
    \ connectionless-mode network service (ISO 8473)\", Second\n              Edition,\
    \ November 2002.\n   [RFC1195]  Callon, R., \"Use of OSI IS-IS for routing in\
    \ TCP/IP and\n              dual environments\", RFC 1195, December 1990.\n  \
    \ [RFC2119]  Bradner, S., \"Key words for use in RFCs to Indicate\n          \
    \    Requirement Levels\", BCP 14, RFC 2119, March 1997.\n   [RFC5305]  Li, T.\
    \ and H. Smit, \"IS-IS Extensions for Traffic\n              Engineering\", RFC\
    \ 5305, October 2008.\n   [RFC5306]  Shand, M. and L. Ginsberg, \"Restart Signaling\
    \ for IS-IS\",\n              RFC 5306, October 2008.\n   [RFC6325]  Perlman,\
    \ R., Eastlake 3rd, D., Dutt, D., Gai, S., and A.\n              Ghanwani, \"\
    Routing Bridges (RBridges): Base Protocol\n              Specification\", RFC\
    \ 6325, July 2011.\n   [RFC6327]  Eastlake 3rd, D., Perlman, R., Ghanwani, A.,\
    \ Dutt, D., and\n              V. Manral, \"Routing Bridges (RBridges): Adjacency\"\
    , RFC\n              6327, July 2011.\n   [RFC6439]  Perlman, R., Eastlake, D.,\
    \ Li, Y., Banerjee, A., and F.\n              Hu, \"Routing Bridges (RBridges):\
    \ Appointed Forwarders\",\n              RFC 6439, November 2011.\n   [RFC7176]\
    \  Eastlake 3rd, D., Senevirathne, T., Ghanwani, A., Dutt,\n              D.,\
    \ and A. Banerjee, \"Transparent Interconnection of Lots\n              of Links\
    \ (TRILL) Use of IS-IS\", RFC 7176, May 2014.\n"
- title: 14.2.  Informative References
  contents:
  - "14.2.  Informative References\n   [802]      IEEE 802, \"IEEE Standard for Local\
    \ and metropolitan area\n              networks: Overview and Architecture\",\
    \ IEEE Std 802.1-2001,\n              8 March 2002.\n   [Err3002]  RFC Errata,\
    \ Errata ID 3002, RFC 6325,\n              <http://www.rfc-editor.org>.\n   [Err3003]\
    \  RFC Errata, Errata ID 3003, RFC 6325,\n              <http://www.rfc-editor.org>.\n\
    \   [Err3004]  RFC Errata, Errata ID 3004, RFC 6325,\n              <http://www.rfc-editor.org>.\n\
    \   [Err3052]  RFC Errata, Errata ID 3052, RFC 6325,\n              <http://www.rfc-editor.org>.\n\
    \   [Err3053]  RFC Errata, Errata ID 3053, RFC 6325,\n              <http://www.rfc-editor.org>.\n\
    \   [Err3508]  RFC Errata, Errata ID 3508, RFC 6325,\n              <http://rfc-editor.org>.\n\
    \   [RFC7042]  Eastlake 3rd, D. and J. Abley, \"IANA Considerations and\n    \
    \          IETF Protocol and Documentation Usage for IEEE 802\n              Parameters\"\
    , BCP 141, RFC 7042, October 2013.\n   [RFC7178]  Eastlake 3rd, D., Manral, V.,\
    \ Li, Y., Aldrin, S., and D.\n              Ward, \"Transparent Interconnection\
    \ of Lots of Links\n              (TRILL): RBridge Channel Support\", RFC 7178,\
    \ May 2014.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Donald Eastlake 3rd\n   Huawei R&D USA\n   155 Beaver\
    \ Street\n   Milford, MA 01757\n   USA\n   Phone: +1-508-333-2270\n   EMail: d3e3e3@gmail.com\n\
    \   Mingui Zhang\n   Huawei Technologies Co., Ltd\n   Huawei Building, No.156\
    \ Beiqing Rd.\n   Z-park, Shi-Chuang-Ke-Ji-Shi-Fan-Yuan, Hai-Dian District,\n\
    \   Beijing 100095\n   P.R. China\n   EMail: zhangmingui@huawei.com\n   Anoop\
    \ Ghanwani\n   Dell\n   5450 Great America Parkway\n   Santa Clara, CA  95054\n\
    \   USA\n   EMail: anoop@alumni.duke.edu\n   Vishwas Manral\n   Ionos Corp.\n\
    \   4100 Moorpark Ave.\n   San Jose, CA  95117\n   USA\n   EMail: vishwas@ionosnetworks.com\n\
    \   Ayan Banerjee\n   Cumulus Networks\n   1089 West Evelyn Avenue\n   Sunnyvale,\
    \ CA 94086\n   USA\n   EMail: ayabaner@gmail.com\n"
