- title: __initial_text__
  contents:
  - "    Implementing an Emergency Telecommunications Service (ETS) for\n        \
    \   Real-Time Services in the Internet Protocol Suite\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2006).\n"
- title: Abstract
  contents:
  - "Abstract\n   RFCs 3689 and 3690 detail requirements for an Emergency\n   Telecommunications\
    \ Service (ETS), of which an Internet Emergency\n   Preparedness Service (IEPS)\
    \ would be a part.  Some of these types of\n   services require call preemption;\
    \ others require call queuing or\n   other mechanisms.  IEPS requires a Call Admission\
    \ Control (CAC)\n   procedure and a Per Hop Behavior (PHB) for the data that meet\
    \ the\n   needs of this architecture.  Such a CAC procedure and PHB is\n   appropriate\
    \ to any service that might use H.323 or SIP to set up\n   real-time sessions.\
    \  The key requirement is to guarantee an elevated\n   probability of call completion\
    \ to an authorized user in time of\n   crisis.\n   This document primarily discusses\
    \ supporting ETS in the context of\n   the US Government and NATO, because it\
    \ focuses on the Multi-Level\n   Precedence and Preemption (MLPP) and Government\
    \ Emergency\n   Telecommunication Service (GETS) standards.  The architectures\n\
    \   described here are applicable beyond these organizations.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Overview of the Internet Emergency Preference Service\n\
    \      Problem and Proposed Solutions ..................................3\n  \
    \    1.1. Emergency Telecommunications Services ......................3\n    \
    \       1.1.1. Multi-Level Preemption and Precedence ...............4\n      \
    \     1.1.2. Government Emergency Telecommunications Service .....6\n      1.2.\
    \ Definition of Call Admission ...............................6\n      1.3. Assumptions\
    \ about the Network ..............................7\n      1.4. Assumptions about\
    \ Application Behavior .....................7\n      1.5. Desired Characteristics\
    \ in an Internet Environment .........9\n      1.6. The Use of Bandwidth as a\
    \ Solution for QoS ................10\n   2. Solution Proposal ..............................................11\n\
    \      2.1. Call Admission/Preemption Procedure .......................12\n  \
    \    2.2. Voice Handling Characteristics ............................15\n    \
    \  2.3. Bandwidth Admission Procedure .............................17\n      \
    \     2.3.1. RSVP Admission Using Policy for Both\n                  Unicast and\
    \ Multicast Sessions .....................17\n           2.3.2. RSVP Scaling Issues\
    \ ................................19\n           2.3.3. RSVP Operation in Backbones\
    \ and Virtual\n                  Private Networks (VPNs) ............................19\n\
    \           2.3.4. Interaction with the Differentiated\n                  Services\
    \ Architecture ..............................21\n           2.3.5. Admission Policy\
    \ ...................................21\n      2.4. Authentication and Authorization\
    \ of Calls Placed ..........23\n      2.5. Defined User Interface ....................................23\n\
    \   3. Security Considerations ........................................24\n  \
    \ 4. Acknowledgements ...............................................24\n   5.\
    \ References .....................................................25\n      5.1.\
    \ Normative References ......................................25\n      5.2. Informative\
    \ References ....................................27\n   Appendix A.  2-Call Preemption\
    \ Example using RSVP .................29\n"
- title: 1.  Overview of the Internet Emergency Preference Service Problem and
  contents:
  - "1.  Overview of the Internet Emergency Preference Service Problem and\n    Proposed\
    \ Solutions\n   [RFC3689] and [RFC3690] detail requirements for an Emergency\n\
    \   Telecommunications Service (ETS), of which an Internet Emergency\n   Preference\
    \ Service (IEPS) would be a part.  Some of these types of\n   services require\
    \ call preemption; others require call queuing or\n   other mechanisms.  The key\
    \ requirement is to guarantee an elevated\n   probability of call completion to\
    \ an authorized user in time of\n   crisis.\n   IEPS requires a Call Admission\
    \ Control procedure and a Per Hop\n   Behavior for the data that meet the needs\
    \ of this architecture.  Such\n   a CAC procedure and PHB is appropriate to any\
    \ service that might use\n   H.323 or SIP to set up real-time sessions.  These\
    \ obviously include\n   but are not limited to Voice and Video applications, although\
    \ at this\n   writing the community is mostly thinking about Voice on IP, and\
    \ many\n   of the examples in the document are taken from that environment.\n\
    \   In a network where a call permitted initially is not denied or\n   rejected\
    \ at a later time, capacity admission procedures performed\n   only at the time\
    \ of call setup may be sufficient.  However, in a\n   network where session status\
    \ can be reviewed by the network and\n   preempted or denied due to changes in\
    \ routing (when the new routes\n   lack capacity to carry calls switched to them)\
    \ or changes in offered\n   load (where higher precedence calls supersede existing\
    \ calls),\n   maintaining a continuing model of the status of the various calls\
    \ is\n   required.\n"
- title: 1.1.  Emergency Telecommunications Services
  contents:
  - "1.1.  Emergency Telecommunications Services\n   Before doing so, however, let\
    \ us discuss the problem that ETS (and\n   therefore IEPS) is intended to solve\
    \ and the architecture of the\n   system.  The Emergency Telecommunications Service\
    \ [ITU.ETS.E106] is a\n   successor to and generalization of two services used\
    \ in the United\n   States: Multi-Level Precedence and Preemption (MLPP), and\
    \ the\n   Government Emergency Telecommunication Service (GETS).  Services\n \
    \  based on these models are also used in a variety of countries\n   throughout\
    \ the world, both Public Switched Telephone Network (PSTN)\n   and Global System\
    \ for Mobile Communications (GSM)-based.  Both of\n   these services are designed\
    \ to enable an authorized user to obtain\n   service from the telephone network\
    \ in times of crisis.  They differ\n   primarily in the mechanisms used and number\
    \ of levels of precedence\n   acknowledged.\n"
- title: 1.1.1.  Multi-Level Preemption and Precedence
  contents:
  - "1.1.1.  Multi-Level Preemption and Precedence\n   The Assured Service is designed\
    \ as an IP implementation of an\n   existing ITU-T/NATO/DoD telephone system architecture\
    \ known as\n   Multi-Level Precedence and Preemption [ITU.MLPP.1990]\n   [ANSI.MLPP.Spec]\
    \ [ANSI.MLPP.Supp], or MLPP.  MLPP is an architecture\n   for a prioritized call\
    \ handling service such that in times of\n   emergency in the relevant NATO and\
    \ DoD commands, the relative\n   importance of various kinds of communications\
    \ is strictly defined,\n   allowing higher-precedence communication at the expense\
    \ of lower-\n   precedence communications.  This document describes NATO and US\n\
    \   Department of Defense uses of MLPP, but the architecture and standard\n  \
    \ are applicable outside of these organizations.\n   These precedences, in descending\
    \ order, are:\n   Flash Override Override:  used by the Commander in Chief, Secretary\n\
    \      of Defense, and Joint Chiefs of Staff, commanders of combatant\n      commands\
    \ when declaring the existence of a state of war.\n      Commanders of combatant\
    \ commands when declaring Defense Condition\n      One or Defense Emergency or\
    \ Air Defense Emergency and other\n      national authorities that the President\
    \ may authorize in\n      conjunction with Worldwide Secure Voice Conferencing\
    \ System\n      conferences.  Flash Override Override cannot be preempted.  This\n\
    \      precedence level is not enabled on all DoD networks.\n   Flash Override:\
    \  used by the Commander in Chief, Secretary of\n      Defense, and Joint Chiefs\
    \ of Staff, commanders of combatant\n      commands when declaring the existence\
    \ of a state of war.\n      Commanders of combatant commands when declaring Defense\
    \ Condition\n      One or Defense Emergency and other national authorities the\n\
    \      President may authorize.  Flash Override cannot be preempted in\n     \
    \ the DSN.\n   Flash:  reserved generally for telephone calls pertaining to command\n\
    \      and control of military forces essential to defense and\n      retaliation,\
    \ critical intelligence essential to national survival,\n      conduct of diplomatic\
    \ negotiations critical to the arresting or\n      limiting of hostilities, dissemination\
    \ of critical civil alert\n      information essential to national survival, continuity\
    \ of federal\n      government functions essential to national survival, fulfillment\n\
    \      of critical internal security functions essential to national\n      survival,\
    \ or catastrophic events of national or international\n      significance.\n \
    \  Immediate:  reserved generally for telephone calls pertaining to\n      situations\
    \ that gravely affect the security of national and allied\n      forces, reconstitution\
    \ of forces in a post-attack period,\n      intelligence essential to national\
    \ security, conduct of diplomatic\n      negotiations to reduce or limit the threat\
    \ of war, implementation\n      of federal government actions essential to national\
    \ survival,\n      situations that gravely affect the internal security of the\n\
    \      nation, Civil Defense actions, disasters or events of extensive\n     \
    \ seriousness having an immediate and detrimental effect on the\n      welfare\
    \ of the population, or vital information having an\n      immediate effect on\
    \ aircraft, spacecraft, or missile operations.\n   Priority:  reserved generally\
    \ for telephone calls requiring\n      expeditious action by called parties and/or\
    \ furnishing essential\n      information for the conduct of government operations.\n\
    \   Routine:  designation applied to those official government\n      communications\
    \ that require rapid transmission by telephonic means\n      but do not require\
    \ preferential handling.\n   MLPP is intended to deliver a higher probability\
    \ of call completion\n   to the more important calls.  The rule, in MLPP, is that\
    \ more\n   important calls override less important calls when congestion occurs\n\
    \   within a network.  Station-based preemption is used when a more\n   important\
    \ call needs to be placed to either party in an existing\n   call.  Trunk-based\
    \ preemption is used when trunk bandwidth needs to\n   be reallocated to facilitate\
    \ a higher-precedence call over a given\n   path in the network.  In both station-\
    \ and trunk-based preemption\n   scenarios, preempted parties are positively notified,\
    \ via preemption\n   tone, that their call can no longer be supported.  The same\n\
    \   preemption tone is used, regardless of whether calls are terminated\n   for\
    \ the purposes of station- of trunk-based preemption.  The\n   remainder of this\
    \ discussion focuses on trunk-based preemption\n   issues.\n   MLPP is built as\
    \ a proactive system in which callers must assign one\n   of the precedence levels\
    \ listed above at call initiation; this\n   precedence level cannot be changed\
    \ throughout that call.  If an\n   elevated status is not assigned by a user at\
    \ call initiation time,\n   the call is assumed to be \"routine\".  If there is\
    \ end-to-end capacity\n   to place a call, any call may be placed at any time.\
    \  However, when\n   any trunk group (in the circuit world) or interface (in an\
    \ IP world)\n   reaches a utilization threshold, a choice must be made as to which\n\
    \   calls to accept or allow to continue.  The system will seize the\n   trunk(s)\
    \ or bandwidth necessary to place the more important calls in\n   preference to\
    \ less important calls by preempting an existing call (or\n   calls) of lower\
    \ precedence to permit a higher-precedence call to be\n   placed.\n   More than\
    \ one call might properly be preempted if more trunks or\n   bandwidth is necessary\
    \ for this higher precedence call.  A video call\n   (perhaps of 384 KBPS, or\
    \ 6 trunks) competing with several lower-\n   precedence voice calls is a good\
    \ example of this situation.\n"
- title: 1.1.2.  Government Emergency Telecommunications Service
  contents:
  - "1.1.2.  Government Emergency Telecommunications Service\n   A US service similar\
    \ to MLPP and using MLPP signaling technology, but\n   built for use in civilian\
    \ networks, is the Government Emergency\n   Telecommunications Service (GETS).\
    \  This differs from MLPP in two\n   ways: it does not use preemption, but rather\
    \ reserves bandwidth or\n   queues calls to obtain a high probability of call\
    \ completion, and it\n   has only two levels of service: \"Routine\" and \"Priority\"\
    .\n   GETS is described here as another example.  Similar architectures are\n\
    \   applied by other governments and organizations.\n"
- title: 1.2.  Definition of Call Admission
  contents:
  - "1.2.  Definition of Call Admission\n   Traditionally, in the PSTN, Call Admission\
    \ Control (CAC) has had the\n   responsibility of implementing bandwidth available\
    \ thresholds (e.g.,\n   to limit resources consumed by some traffic) and determining\
    \ whether\n   a caller has permission (e.g., is an identified subscriber, with\n\
    \   identify attested to by appropriate credentials) to use an available\n   circuit.\
    \  IEPS, or any emergency telephone service, has additional\n   options that it\
    \ may employ to improve the probability of call\n   completion:\n   o  The call\
    \ may be authorized to use other networks that it would not\n      normally use;\n\
    \   o  The network may preempt other calls to free bandwidth;\n   o  The network\
    \ may hold the call and place it when other calls\n      complete; or\n   o  The\
    \ network may use different bandwidth availability thresholds\n      than are\
    \ used for other calls.\n   At the completion of CAC, however, the caller either\
    \ has a circuit\n   that he or she is authorized to use or has no circuit.  Since\
    \ the act\n   of preemption or consideration of alternative bandwidth sources\
    \ is\n   part and parcel of the problem of providing bandwidth, the\n   authorization\
    \ step in bandwidth provision also affects the choice of\n   networks that may\
    \ be authorized to be considered.  The three cannot\n   be separated.  The CAC\
    \ procedure finds available bandwidth that the\n   caller is authorized to use\
    \ and preemption may in some networks be\n   part of making that happen.\n"
- title: 1.3.  Assumptions about the Network
  contents:
  - "1.3.  Assumptions about the Network\n   IP networks generally fall into two categories:\
    \ those with\n   constrained bandwidth, and those that are massively over-provisioned.\n\
    \   In a network where over any interval that can be measured (including\n   sub-second\
    \ intervals) capacity exceeds offered load by at least 2:1,\n   the jitter and\
    \ loss incurred in transit are nominal.  This is\n   generally a characteristic\
    \ of properly engineered Ethernet LANs and\n   of optical networks (networks that\
    \ measure their link speeds in\n   multiples of 51 MBPS); in the latter, circuit-switched\
    \ networking\n   solutions such as Asynchronous Transfer Mode (ATM), MPLS, and\
    \ GMPLS\n   can be used to explicitly place routes, which improves the odds a\n\
    \   bit.\n   Between those networks, in places commonly called \"inter-campus\n\
    \   links\", \"access links\", or \"access networks\", for various reasons\n \
    \  including technology (e.g., satellite links) and cost, it is common\n   to\
    \ find links whose offered load can approximate or exceed the\n   available capacity.\
    \  Such events may be momentary or may occur for\n   extended periods of time.\n\
    \   In addition, primarily in tactical deployments, it is common to find\n   bandwidth\
    \ constraints in the local infrastructure of networks.  For\n   example, the US\
    \ Navy's network afloat connects approximately 300\n   ships, via satellite, to\
    \ five network operation centers (NOCs), and\n   those NOCs are in turn interconnected\
    \ via the Defense Information\n   Systems Agency (DISA) backbone.  A typical ship\
    \ may have between two\n   and six radio systems aboard, often at speeds of 64\
    \ KBPS or less.  In\n   US Army networks, current radio technology likewise limits\
    \ tactical\n   communications to links below 100 KBPS.\n   Over this infrastructure,\
    \ military communications expect to deploy\n   voice communication systems (30-80\
    \ KBPS per session) and video\n   conferencing using MPEG 2 (3-7 MBPS) and MPEG\
    \ 4 (80 KBPS to 800\n   KBPS), in addition to traditional mail, file transfer,\
    \ and\n   transaction traffic.\n"
- title: 1.4.  Assumptions about Application Behavior
  contents:
  - "1.4.  Assumptions about Application Behavior\n   Parekh and Gallagher published\
    \ a series of papers [Parekh1] [Parekh2]\n   analyzing what is necessary to ensure\
    \ a specified service level for a\n   stream of traffic.  In a nutshell, they\
    \ showed that to predict the\n   behavior of a stream of traffic in a network,\
    \ one must know two\n   things:\n   o  the rate and arrival distribution with\
    \ which traffic in a class is\n      introduced to the network, and\n   o  what\
    \ network elements will do, in terms of the departure\n      distribution, injected\
    \ delay jitter, and loss characteristics,\n      with the traffic they see.\n\
    \   For example, TCP tunes its effective window (the amount of data it\n   sends\
    \ per round trip interval) so that the ratio of the window and\n   the round trip\
    \ interval approximate the available capacity in the\n   network.  As long as\
    \ the round trip delay remains roughly stable and\n   loss is nominal (which are\
    \ primarily behaviors of the network), TCP\n   is able to maintain a predictable\
    \ level of throughput.  In an\n   environment where loss is random or in which\
    \ delays wildly vary, TCP\n   behaves in a far less predictable manner.\n   Voice\
    \ and video systems, in the main, are designed to deliver a fixed\n   level of\
    \ quality as perceived by the user.  (Exceptions are systems\n   that select rate\
    \ options over a broad range to adapt to ambient loss\n   characteristics.  These\
    \ deliver broadly fluctuating perceived quality\n   and have not found significant\
    \ commercial applicability.)  Rather,\n   they send traffic at a rate specified\
    \ by the codec depending on what\n   it perceives is required.  In an MPEG-4 system,\
    \ for example, if the\n   camera is pointed at a wall, the codec determines that\
    \ an 80 KBPS\n   data stream will describe that wall and issues that amount of\n\
    \   traffic.  If a person walks in front of the wall or the camera is\n   pointed\
    \ an a moving object, the codec may easily send 800 KBPS in its\n   effort to\
    \ accurately describe what it sees.  In commercial broadcast\n   sports, which\
    \ may line up periods in which advertisements are\n   displayed, the effect is\
    \ that traffic rates suddenly jump across all\n   channels at certain times because\
    \ the eye-catching ads require much\n   more bandwidth than the camera pointing\
    \ at the green football field.\n   As described in [RFC1633], when dealing with\
    \ a real-time application,\n   there are basically two things one must do to ensure\
    \ Parekh's first\n   requirement.  To ensure that one knows how much offered load\
    \ the\n   application is presenting, one must police (measure load offered and\n\
    \   discard excess) traffic entering the network.  If that policing\n   behavior\
    \ has a debilitating effect on the application, as non-\n   negligible loss has\
    \ on voice or video, one must admit sessions\n   judiciously according to some\
    \ policy.  A key characteristic of that\n   policy must be that the offered load\
    \ does not exceed the capacity\n   dedicated to the application.\n   In the network,\
    \ the other thing one must do is ensure that the\n   application's needs are met\
    \ in terms of loss, variation in delay, and\n   end-to-end delay.  One way to\
    \ do this is to supply sufficient\n   bandwidth so that loss and jitter are nominal.\
    \  Where that cannot be\n   accomplished, one must use queuing technology to deterministically\n\
    \   apply bandwidth to accomplish the goal.\n"
- title: 1.5.  Desired Characteristics in an Internet Environment
  contents:
  - "1.5.  Desired Characteristics in an Internet Environment\n   The key elements\
    \ of the Internet Emergency Preference Service include\n   the following:\n  \
    \ Precedence Level Marking each call:  Call initiators choose the\n      appropriate\
    \ precedence level for each call based on the user-\n      perceived importance\
    \ of the call.  This level is not to be changed\n      for the duration of the\
    \ call.  The call before and the call after\n      are independent with regard\
    \ to this level choice.\n   Call Admission/Preemption Policy:  There is likewise\
    \ a clear policy\n      regarding calls that may be in progress at the called\
    \ instrument.\n      During call admission (SIP/H.323), if they are of lower\n\
    \      precedence, they must make way according to a prescribed\n      procedure.\
    \  All callers on the preempted call must be informed\n      that the call has\
    \ been preempted, and the call must make way for\n      the higher-precedence\
    \ call.\n   Bandwidth Admission Policy:  There is a clear bandwidth admission\n\
    \      policy: sessions may be placed that assert any of several levels\n    \
    \  of precedence, and in the event that there is demand and\n      authorization\
    \ is granted, other sessions will be preempted to make\n      way for a call of\
    \ higher precedence.\n   Authentication and Authorization of calls placed:  Unauthorized\n\
    \      attempts to place a call at an elevated status are not permitted.\n   \
    \   In the telephone system, this is managed by controlling the policy\n     \
    \ applied to an instrument by its switch plus a code produced by the\n      caller\
    \ identifying himself or herself to the switch.  In the\n      Internet, such\
    \ characteristics must be explicitly signaled.\n   Voice handling characteristics:\
    \  A call made, in the telephone\n      system, gets a circuit and provides the\
    \ means for the callers to\n      conduct their business without significant impact\
    \ as long as their\n      call is not preempted.  In a VoIP system, one would\
    \ hope for\n      essentially the same service.\n   Defined User Interface:  If\
    \ a call is preempted, the caller and the\n      callee are notified via a defined\
    \ signal, so that they know that\n      their call has been preempted and that\
    \ at this instant there is no\n      alternative circuit available to them at\
    \ that precedence level.\n   A VoIP implementation of the Internet Emergency Preference\
    \ Service\n   must, by definition, provide those characteristics.\n"
- title: 1.6.  The Use of Bandwidth as a Solution for QoS
  contents:
  - "1.6.  The Use of Bandwidth as a Solution for QoS\n   There is a discussion in\
    \ Internet circles concerning the relationship\n   of bandwidth to QoS procedures,\
    \ which needs to be put to bed before\n   this procedure can be adequately analyzed.\
    \  The issue is that it is\n   possible and common in certain parts of the Internet\
    \ to solve the\n   problem with bandwidth.  In LAN environments, for example,\
    \ if there\n   is significant loss between any two switches or between a switch\
    \ and\n   a server, the simplest and cheapest solution is to buy the next\n  \
    \ faster interface: substitute 100 MBPS for 10 MBPS Ethernet, 1 gigabit\n   for\
    \ 100 MBPS, or, for that matter, upgrade to a 10-gigabit Ethernet.\n   Similarly,\
    \ in optical networking environments, the simplest and\n   cheapest solution is\
    \ often to increase the data rate of the optical\n   path either by selecting\
    \ a faster optical carrier or deploying an\n   additional lambda.  In places where\
    \ the bandwidth can be over-\n   provisioned to a point where loss or queuing\
    \ delay are negligible,\n   10:1 over-provisioning is often the cheapest and surest\
    \ solution and,\n   by the way, offers a growth path for future requirements.\
    \  However,\n   there are many places in communication networks where the provision\n\
    \   of effectively infinite bandwidth is not feasible, including many\n   access\
    \ networks, satellite communications, fixed wireless, airborne\n   and marine\
    \ communications, island connections, and connections to\n   regions in which\
    \ fiber optic connections are not cost-effective.  It\n   is in these places where\
    \ the question of resource management is\n   relevant.  Specifically, we do not\
    \ recommend the deployment of\n   significant QoS procedures on links in excess\
    \ of 100 MBPS apart from\n   the provision of aggregated services that provide\
    \ specific protection\n   to the stability of the network or the continuity of\
    \ real-time\n   traffic as a class, as the mathematics of such circuits do not\n\
    \   support this as a requirement.\n   In short, the fact that we are discussing\
    \ this class of policy\n   control says that such constrictions in the network\
    \ exist and must be\n   dealt with.  However much we might like to, in those places\
    \ we are\n   not solving the problem with bandwidth.\n"
- title: 2.  Solution Proposal
  contents:
  - "2.  Solution Proposal\n   A typical voice or video network, including a backbone\
    \ domain, is\n   shown in Figure 1.\n      ...............             ......................\n\
    \     .                .          .                      .\n    .  H  H  H  H\
    \      .        .   H  H  H  H           .\n   .  /----------/      .       .\
    \  /----------/           .\n   .     R     SIP      .       .    R      R   \
    \           .\n   .      \\             .       .   /        \\              .\n\
    \   .       R  H  H  H   . .......  /          \\             .\n   .      /----------/\
    \  ..      ../            R     SIP    .\n    .              R  ..         /.\
    \           /----------/  .\n      .....       ..\\.    R-----R  .           H\
    \  H  H  H   .\n            ......  .\\   /       \\  .                      .\n\
    \                    . \\ /         \\  .                    .\n             \
    \        .  R-----------R  ....................\n                     .   \\ \
    \        /   .\n                     .    \\       /   .\n                   \
    \  .     R-----R   .\n                      .             .\n                \
    \       ............\n           SIP   = SIP Proxy\n           H     = SIP-enabled\
    \ Host (Telephone, call gateway or PC)\n           R     = Router\n          \
    \ /---/ = Ethernet or Ethernet Switch\n              Figure 1: Typical VoIP or\
    \ Video/IP Network\n  Reviewing the figure above, it becomes obvious that Voice/IP\
    \ and\n  Video/IP call flows are very different than call flows in the PSTN.\n\
    \  In the PSTN, call control traverses a switch, which in turn controls\n  data\
    \ handling services like ATM or Time Division Multiplexing (TDM)\n  switches or\
    \ multiplexers.  While they may not be physically co-\n  located, the control\
    \ plane software and the data plane services are\n  closely connected; the switch\
    \ routes a call using bandwidth that it\n  knows is available.  In a voice/video-on-IP\
    \ network, call control is\n  completely divorced from the data plane: It is possible\
    \ for a\n  telephone instrument in the United States to have a Swedish telephone\n\
    \  number if that is where its SIP proxy happens to be, but on any given\n  call\
    \ for it to use only data paths in the Asia/Pacific region, data\n  paths provided\
    \ by a different company, and, often, data paths provided\n  by multiple companies/providers.\n\
    \  Call management therefore addresses a variety of questions, all of\n  which\
    \ must be answered:\n   o  May I make this call from an administrative policy\
    \ perspective?\n      Am I authorized to make this call?\n   o  What IP address\
    \ correlates with this telephone number or SIP URI?\n   o  Is the other instrument\
    \ \"on hook\"?  If it is busy, under what\n      circumstances may I interrupt?\n\
    \   o  Is there bandwidth available to support the call?\n   o  Does the call\
    \ actually work, or do other impairments (loss, delay)\n      make the call unusable?\n"
- title: 2.1.  Call Admission/Preemption Procedure
  contents:
  - "2.1.  Call Admission/Preemption Procedure\n   Administrative Call Admission is\
    \ the objective of SIP and H.323.  It\n   asks fundamental questions like \"What\
    \ IP address is the callee at?\"\n   and \"Did you pay your bill?\".\n   For a\
    \ specialized policy like call preemption, two capabilities are\n   necessary\
    \ from an administrative perspective: [RFC4412] provides a\n   way to communicate\
    \ policy-related information regarding the\n   precedence of the call; and [RFC4411]\
    \ provides a reason code when a\n   call fails or is refused, indicating the cause\
    \ of the event.  If it\n   is a failure, it may make sense to redial the call.\
    \  If it is a\n   policy-driven preemption, even if the call is redialed it may\
    \ not be\n   possible to place the call.  Requirements for this service are\n\
    \   further discussed in [RFC3689].\n   The SIP Communications Resource Priority\
    \ Header (or RP Header) serves\n   the call setup process with the precedence\
    \ level chosen by the\n   initiator of the call.  The syntax is in the form:\n\
    \        Resource Priority: namespace.priority level\n   The \"namespace\" part\
    \ of the syntax ensures the domain of significance\n   to the originator of the\
    \ call, and this travels end-to-end to the\n   destination (called) device (telephone).\
    \  If the receiving phone does\n   not support the namespace, it can easily ignore\
    \ the setup request.\n   This ability to denote the domain of origin allows Service\
    \ Level\n   Agreements (SLAs) to be in place to limit the ability of an unknown\n\
    \   requester to gain preferential treatment into an IEPS domain.\n   For the\
    \ DSN infrastructure, the header would look like this for a\n   routine precedence\
    \ level call:\n        Resource Priority: dsn.routine\n   The precedence level\
    \ chosen in this header would be compared to the\n   requester's authorization\
    \ profile to use that precedence level.  This\n   would typically occur in the\
    \ SIP first-hop Proxy, which can challenge\n   many aspects of the call setup\
    \ request including the requester's\n   choice of precedence levels (verifying\
    \ that they are not using a\n   level they are not authorized to use).\n   The\
    \ DSN has 5 precedence levels of IEPS, in descending order:\n        dsn.flash-override\n\
    \        dsn.flash\n        dsn.immediate\n        dsn.priority\n        dsn.routine\n\
    \   The US Defense Red Switched Network (DRSN), as another example that\n   was\
    \ IANA-registered in [RFC4412], has 6 levels of precedence.  The\n   DRSN simply\
    \ adds one precedence level higher than flash-override to\n   be used by the President\
    \ and a select few others:\n        drsn.flash-override-override\n   Note that\
    \ the namespace changed for this level.  The lower 5 levels\n   within the DRSN\
    \ would also have this as their namespace for all\n   DRSN-originated call setup\
    \ requests.\n   The Resource-Priority Header (RPH) informs both the use of\n \
    \  Differentiated Services Code Points (DSCPs) by the callee (who needs\n   to\
    \ use the same DSCP as the caller to obtain the same data path\n   service) and\
    \ to facilitate policy-based preemption of calls in\n   progress, when appropriate.\n\
    \   Once a call is established in an IEPS domain, the Reason Header for\n   Preemption,\
    \ described in [RFC4411], ensures that all SIP nodes are\n   synchronized to a\
    \ preemption event occurring either at the endpoint\n   or in a router that experiences\
    \ congestion.  In SIP, the normal\n   indication for the end of a session is for\
    \ one end system to send a\n   BYE Method request as specified in [RFC3261]. \
    \ This, too, is the\n   proper means for signaling a termination of a call due\
    \ to a\n   preemption event, as it essentially performs a normal termination\n\
    \   with additional information informing the peer of the reason for the\n   abrupt\
    \ end: it indicates that a preemption occurred.  This will be\n   used to inform\
    \ all relevant SIP entities, and whether this was an\n   endpoint-generated preemption\
    \ event, or that the preemption event\n   occurred within a router along the communications\
    \ path (described in\n   Section 2.3.1).\n   Figure 2 is a simple example of a\
    \ SIP call setup that includes the\n   layer 7 precedence of a call between Alice\
    \ and Bob.  After Alice\n   successfully sets up a call to Bob at the \"Routine\"\
    \ precedence level,\n   Carol calls Bob at a higher precedence level (Immediate).\
    \  At the SIP\n   layer (this has nothing to do with RSVP yet; that example, involving\n\
    \   SIP and RSVP signaling, is in the appendix), once Bob's user agent\n   (phone)\
    \ receives the INVITE message from Carol, his UA needs to make\n   a choice between\
    \ retaining the call to Alice and sending Carol a\n   \"busy\" indication, or\
    \ preempting the call to Alice in favor of\n   accepting the call from Carol.\
    \  That choice in IEPS networks is a\n   comparison of Resource Priority headers.\
    \  Alice, who controlled the\n   precedence level of the call to Bob, sent the\
    \ precedence level of her\n   call to him at \"Routine\" (the lowest level within\
    \ the network).\n   Carol, who controls the priority of the call signal to Bob,\
    \ sent her\n   priority level to \"Immediate\" (higher than \"Routine\").  Bob's\
    \ UA\n   needs to (under IEPS policy) preempt the call from Alice (and provide\n\
    \   her with a preemption indication in the call termination message).\n   Bob\
    \ needs to successfully answer the call setup from Carol.\n      UA Alice    \
    \                 UA Bob                       UA Carol\n         |    INVITE\
    \ (RP: Routine)    |                             |\n         |--------------------------->|\
    \                             |\n         |           200 OK           |     \
    \                        |\n         |<---------------------------|          \
    \                   |\n         |            ACK             |               \
    \              |\n         |--------------------------->|                    \
    \         |\n         |            RTP             |                         \
    \    |\n         |<==========================>|                             |\n\
    \         |                            |                             |\n     \
    \    |                            |   INVITE (RP: Immediate)    |\n         |\
    \                            |<----------------------------|\n         |     \
    \ ************************************************    |\n         |      *Resource\
    \ Priority value comparison by Bob's UA*    |\n         |      ************************************************\
    \    |\n         |                            |                             |\n\
    \         | BYE (Reason: UA preemption)                              |\n     \
    \    |<---------------------------|                             |\n         |\
    \                            |           200 OK            |\n         |     \
    \                       |---------------------------->|\n         |       200\
    \ OK (BYE)         |                             |\n         |--------------------------->|\
    \                             |\n         |                            |     \
    \       ACK              |\n         |                            |<----------------------------|\n\
    \         |                            |            RTP              |\n     \
    \    |                            |<===========================>|\n         |\
    \                            |                             |\n    Figure 2: Priority\
    \ Call Establishment and Termination at SIP Layer\n   Nothing in this example\
    \ involved mechanisms other than SIP.  It is\n   also assumed each user agent\
    \ recognized the Resource-Priority header\n   namespace value in each message.\
    \  Therefore, it is assumed that the\n   domain allowed Alice, Bob, and Carol\
    \ to communicate.  Authentication\n   and Authorization are discussed later in\
    \ this document.\n"
- title: 2.2.  Voice Handling Characteristics
  contents:
  - "2.2.  Voice Handling Characteristics\n   The Quality of Service architecture\
    \ used in the data path is that of\n   [RFC2475].  Differentiated Services uses\
    \ a flag in the IP header\n   called the DSCP [RFC2474] to identify a data stream,\
    \ and then applies\n   a procedure called a Per Hop Behavior, or PHB, to it. \
    \ This is\n   largely as described in [RFC2998].\n   In the data path, the Expedited\
    \ Forwarding PHB [RFC3246] [RFC3247]\n   describes the fundamental needs of voice\
    \ and video traffic.  This PHB\n   entails ensuring that sufficient bandwidth\
    \ is dedicated to real-time\n   traffic to ensure that variation in delay and\
    \ loss rate are minimal,\n   as codecs are hampered by excessive loss [G711.1]\
    \ [G711.3].  In parts\n   of the network where bandwidth is heavily over-provisioned,\
    \ there may\n   be no remaining concern.  In places in the network where bandwidth\
    \ is\n   more constrained, this may require the use of a priority queue.  If a\n\
    \   priority queue is used, the potential for abuse exists, meaning that\n   it\
    \ is also necessary to police traffic placed into the queue to\n   detect and\
    \ manage abuse.  A fundamental question is \"where does this\n   policing need\
    \ to take place?\".  The obvious places would be the\n   first-hop routers and\
    \ any place where converging data streams might\n   congest a link.\n   Some proposals\
    \ mark traffic with various code points appropriate to\n   the service precedence\
    \ of the call.  In normal service, if the\n   traffic is all in the same queue\
    \ and EF service requirements are met\n   (applied capacity exceeds offered load,\
    \ variation in delay is\n   minimal, and loss is negligible), details of traffic\
    \ marking should\n   be irrelevant, as long as packets get into the right service\
    \ class.\n   Then, the major issues are appropriate policing of traffic,\n   especially\
    \ around route changes, and ensuring that the path has\n   sufficient capacity.\n\
    \   The real-time voice/video application should be generating traffic at\n  \
    \ a rate appropriate to its content and codec, which is either a\n   constant\
    \ bit rate stream or a stream whose rate is variable within a\n   specified range.\
    \  The first-hop router should be policing traffic\n   originated by the application,\
    \ as is performed in traditional virtual\n   circuit networks like Frame Relay\
    \ and ATM.  Between these two checks\n   (at what some networks call the Data\
    \ Terminal Equipment (DTE) and\n   Data Communications Equipment (DCE)), the application\
    \ traffic should\n   be guaranteed to be within acceptable limits.  As such, given\n\
    \   bandwidth-aware call admission control, there should be minimal\n   actual\
    \ loss.  The cases where loss would occur include cases where\n   routing has\
    \ recently changed and CAC has not caught up, or cases\n   where statistical thresholds\
    \ are in use in CAC and the data streams\n   happen to coincide at their peak\
    \ rates.\n   If it is demonstrated that routing transients and variable rate beat\n\
    \   frequencies present a sufficient problem, it is possible to provide a\n  \
    \ policing mechanism that isolates intentional loss among an ordered\n   set of\
    \ classes.  While the ability to do so, by various algorithms,\n   has been demonstrated,\
    \ the technical requirement has not.  If\n   dropping random packets from all\
    \ calls is not appropriate,\n   concentrating random loss in a subset of the calls\
    \ makes the problem\n   for those calls worse; a superior approach would reject\
    \ or preempt an\n   entire call.\n   Parekh's second condition has been met: we\
    \ must know what the network\n   will do with the traffic.  If the offered load\
    \ exceeds the available\n   bandwidth, the network will remark and drop the excess\
    \ traffic.  The\n   key questions become \"How does one limit offered load to\
    \ a rate less\n   than or equal to available bandwidth?\" and \"How much traffic\
    \ does one\n   admit with each appropriate marking?\"\n"
- title: 2.3.  Bandwidth Admission Procedure
  contents:
  - "2.3.  Bandwidth Admission Procedure\n   Since many available voice and video\
    \ codecs require a nominal loss\n   rate to deliver acceptable performance, Parekh's\
    \ first requirement is\n   that offered load be within the available capacity.\
    \  There are\n   several possible approaches.\n   An approach that is commonly\
    \ used in H.323 networks is to limit the\n   number of calls simultaneously accepted\
    \ by the gatekeeper.  SIP\n   networks do something similar when they place a\
    \ stateful SIP proxy\n   near a single ingress/egress to the network.  This is\
    \ able to impose\n   an upper bound on the total number of calls in the network\
    \ or the\n   total number of calls crossing the significant link.  However, the\n\
    \   gatekeeper has no knowledge of routing, so the engineering must be\n   very\
    \ conservative and usually presumes a single ingress/egress or the\n   failure\
    \ of one of its data paths.  While this may serve as a short-\n   term work-around,\
    \ it is not a general solution that is readily\n   deployed.  This limits the\
    \ options in network design.\n   [RFC1633] provides for signaled admission for\
    \ the use of capacity.\n   The recommended approach is explicit capacity admission,\
    \ supporting\n   the concepts of preemption.  An example of such a procedure uses\
    \ the\n   Resource Reservation Protocol [RFC2205] [RFC2209] (RSVP).  The use of\n\
    \   Capacity Admission using RSVP with SIP is described in [RFC3312].\n   While\
    \ call counting is specified in H.323, network capacity admission\n   is not integrated\
    \ with H.323 at this time.\n"
- title: 2.3.1.  RSVP Admission Using Policy for Both Unicast and Multicast
  contents:
  - "2.3.1.  RSVP Admission Using Policy for Both Unicast and Multicast\n        Sessions\n\
    \   RSVP is a resource reservation setup protocol providing the one-way\n   (at\
    \ a time) setup of resource reservations for multicast and unicast\n   flows.\
    \  Each reservation is set up in one direction (meaning one\n   reservation from\
    \ each end system; in a multicast environment, N\n   senders set up N reservations).\
    \  These reservations complete a\n   communication path with a deterministic bandwidth\
    \ allocation through\n   each router along that path between end systems.  These\
    \ reservations\n   set up a known quality of service for end-to-end communications\
    \ and\n   maintain a \"soft-state\" within a node.  The meaning of the term \"\
    soft\n   state\" is that in the event of a network outage or change of routing,\n\
    \   these reservations are cleared without manual intervention, but must\n   be\
    \ periodically refreshed.  In RSVP, the refresh period is by default\n   30 seconds,\
    \ but may be as long as is appropriate.\n   RSVP is a locally-oriented process,\
    \ not a globally- or domain-\n   oriented one like a routing protocol or H.323\
    \ Call Counting.\n   Although it uses the local routing databases to determine\
    \ the routing\n   path, it is only concerned with the quality of service for a\n\
    \   particular or aggregate flow through a device.  RSVP is not aware of\n   anything\
    \ other than the local goal of QoS and its RSVP-enabled\n   adjacencies, operating\
    \ below the network layer.  The process by\n   itself neither requires nor has\
    \ any end-to-end network knowledge or\n   state.  Thus, RSVP can be effective\
    \ when it is enabled at some nodes\n   in a network without the need to have every\
    \ node participate.\n                 HOST                              ROUTER\n\
    \    _____________________________       ____________________________\n   |  _______\
    \                    |     |                            |\n   | |       |   _______\
    \         |     |            _______         |\n   | |Appli- |  |       |    \
    \    |RSVP |           |       |        |\n   | | cation|  | RSVP <--------------------------->\
    \ RSVP  <---------->\n   | |       <-->       |        |     | _______   |   \
    \    |        |\n   | |       |  |process|  _____ |     ||Routing|  |process|\
    \  _____ |\n   | |_._____|  |       -->Policy|     ||       <-->       -->Policy||\n\
    \   |   |        |__.__._| |Cntrl||     ||process|  |__.__._| |Cntrl||\n   | \
    \  |data       |  |   |_____||     ||__.____|     |  |   |_____||\n   |===|===========|==|==========|\
    \     |===|==========|==|==========|\n   |   |   --------|  |    _____ |     |\
    \   |  --------|  |    _____ |\n   |   |  |        |  ---->Admis||     |   | \
    \ |       |  ---->Admis||\n   |  _V__V_    ___V____  |Cntrl||     |  _V__V_  \
    \  __V_____ |Cntrl||\n   | |      |  |        | |_____||     | |      |  |   \
    \     ||_____||\n   | |Class-|  | Packet |        |     | |Class-|  | Packet |\
    \       |\n   | | ifier|==>Schedulr|================> ifier|==>Schedulr|=========>\n\
    \   | |______|  |________|        |data | |______|  |________|      data\n   |\
    \                             |     |                            |\n   |_____________________________|\
    \     |____________________________|\n                    Figure 3: RSVP in Hosts\
    \ and Routers\n   Figure 3 shows the internal process of RSVP in both hosts (end\n\
    \   systems) and routers, as shown in [RFC2209].\n   RSVP uses the phrase \"traffic\
    \ control\" to describe the mechanisms of\n   how a data flow receives quality\
    \ of service.  There are 3 different\n   mechanisms to traffic control (shown\
    \ in Figure 2 in both hosts and\n   routers).  They are:\n   A packet classifier\
    \ mechanism: This resolves the QoS class for each\n      packet; this can determine\
    \ the route as well.\n   An admission control mechanism: This consists of two\
    \ decision\n      modules: admission control and policy control.  Determining\n\
    \      whether there are satisfactory resources for the requested QoS is\n   \
    \   the function of admission control.  Determining whether the user\n      has\
    \ the authorization to request such resources is the function of\n      policy\
    \ control.  If the parameters carried within this flow fail,\n      either of\
    \ these two modules errors the request using RSVP.\n   A packet scheduler mechanism:\
    \  At each outbound interface, the\n      scheduler attains the guaranteed QoS\
    \ for that flow.\n"
- title: 2.3.2.  RSVP Scaling Issues
  contents:
  - "2.3.2.  RSVP Scaling Issues\n   As originally written, there was concern that\
    \ RSVP had scaling\n   limitations due to its data plane behavior [RFC2208]. \
    \ This either\n   has not proven to be the case or has in time largely been corrected.\n\
    \   Telephony services generally require peak call admission rates on the\n  \
    \ order of thousands of calls per minute and peak call levels\n   comparable to\
    \ the capacities of the lines in question, which is\n   generally on the order\
    \ of thousands to tens of thousands of calls.\n   Current RSVP implementations\
    \ admit calls at the rate of hundreds of\n   calls per second and maintain as\
    \ many calls in progress as memory\n   configurations allow.\n   In edge networks,\
    \ RSVP is used to signal for individual microflows,\n   admitting the bandwidth.\
    \  However, Differentiated Services is used\n   for the data plane behavior. \
    \ Admission and policing may be performed\n   anywhere, but need only be performed\
    \ in the first-hop router (which,\n   if the end system sending the traffic is\
    \ a DTE, constitutes a DCE for\n   the remaining network) and in routers that\
    \ have interfaces threatened\n   by congestion.  In Figure 1, these would normally\
    \ be the links that\n   cross network boundaries.\n"
- title: 2.3.3.  RSVP Operation in Backbones and Virtual Private Networks (VPNs)
  contents:
  - "2.3.3.  RSVP Operation in Backbones and Virtual Private Networks (VPNs)\n   In\
    \ backbone networks, networks that are normally awash in bandwidth,\n   RSVP and\
    \ its affected data flows may be carried in a variety of ways.\n   If the backbone\
    \ is a maze of tunnels between its edges (true of MPLS\n   networks, networks\
    \ that carry traffic from an encryptor to a\n   decryptor, and also VPNs), applicable\
    \ technologies include [RFC2207],\n   [RFC2746], and [RFC2983].  An IP tunnel\
    \ is, simplistically put, a IP\n   packet enveloped inside another IP packet as\
    \ a payload.  When IPv6 is\n   transported over an IPv4 network, encapsulating\
    \ the entire v6 packet\n   inside a v4 packet is an effective means to accomplish\
    \ this task.  In\n   this type of tunnel, the IPv6 packet is not read by any of\
    \ the\n   routers while inside the IPv4 envelope.  If the inner packet is RSVP\n\
    \   enabled, there must be an active configuration to ensure that all\n   relevant\
    \ backbone nodes read the RSVP fields; [RFC2746] describes\n   this.\n   This\
    \ is similar to how IPsec tunnels work.  Encapsulating an RSVP\n   packet inside\
    \ an encrypted packet for security purposes without\n   copying or conveying the\
    \ RSVP indicators in the outside IP packet\n   header would make RSVP inoperable\
    \ while in this form of a tunnel.\n   [RFC2207] describes how to modify an IPsec\
    \ packet header to allow for\n   RSVP awareness by nodes that need to provide\
    \ QoS for the flow or\n   flows inside a tunnel.\n   Other networks may simply\
    \ choose to aggregate the reservations across\n   themselves as described in [RFC3175].\
    \  The problem with an individual\n   reservation architecture is that each flow\
    \ requires a non-trivial\n   amount of message exchange, computation, and memory\
    \ resources in each\n   router between each endpoint.  Aggregation of flows reduces\
    \ the\n   number of completely individual reservations into groups of\n   individual\
    \ flows that can act as one for part or all of the journey\n   between end systems.\
    \  Aggregates are not intended to be from the\n   first router to the last router\
    \ within a flow, but to cover common\n   paths of a large number of individual\
    \ flows.\n   Examples of aggregated data flows include streams of IP data that\n\
    \   traverse common ingress and egress points in a network and also\n   include\
    \ tunnels of various kinds.  MPLS LSPs, IPsec Security\n   Associations between\
    \ VPN edge routers, IP/IP tunnels, and Generic\n   Routing Encapsulation (GRE)\
    \ tunnels all fall into this general\n   category.  The distinguishing factor\
    \ is that the system injecting an\n   aggregate into the aggregated network sums\
    \ the PATH and RESV\n   statistical information on the un-aggregated side and\
    \ produces a\n   reservation for the tunnel on the aggregated side.  If the bandwidth\n\
    \   for the tunnel cannot be expanded, RSVP leaves the existing\n   reservation\
    \ in place and returns an error to the aggregator, which\n   can then apply a\
    \ policy such as IEPS to determine which session to\n   refuse.  In the data plane,\
    \ the DSCP for the traffic must be copied\n   from the inner to the outer header,\
    \ to preserve the PHB's effect.\n   One concern with this approach is that this\
    \ leaks information into\n   the aggregated zone concerning the number of active\
    \ calls or the\n   bandwidth they consume.  In fact, it does not, as the data\
    \ itself is\n   identifiable by aggregator address, deaggregator address, and\
    \ DSCP.\n   As such, even if it is not advertised, such information is\n   measurable.\n"
- title: 2.3.4.  Interaction with the Differentiated Services Architecture
  contents:
  - "2.3.4.  Interaction with the Differentiated Services Architecture\n   In the\
    \ PATH message, the DCLASS object described in [RFC2996] is used\n   to carry\
    \ the determined DSCP for the precedence level of that call in\n   the stream.\
    \  This is reflected back in the RESV message.  The DSCP\n   will be determined\
    \ from the authorized SIP message exchange between\n   end systems by using the\
    \ R-P header.  The DCLASS object permits both\n   bandwidth admission within a\
    \ class and the building up of the various\n   rates or token buckets.\n"
- title: 2.3.5.  Admission Policy
  contents:
  - "2.3.5.  Admission Policy\n   RSVP's basic admission policy, as defined, is to\
    \ grant any user\n   bandwidth if there is bandwidth available within the current\n\
    \   configuration.  In other words, if a new request arrives and the\n   difference\
    \ between the configured upper bound and the currently\n   reserved bandwidth\
    \ is sufficiently large, RSVP grants use of that\n   bandwidth.  This basic policy\
    \ may be augmented in various ways, such\n   as using a local or remote policy\
    \ engine to apply AAA procedures and\n   further qualify the reservation.\n"
- title: 2.3.5.1.  Admission for Variable Rate Codecs
  contents:
  - "2.3.5.1.  Admission for Variable Rate Codecs\n   For certain applications, such\
    \ as broadcast video using MPEG-1 or\n   voice without activity detection and\
    \ using a constant bit rate codec\n   such as G.711, this basic policy is adequate\
    \ apart from AAA.  For\n   variable rate codecs, such as MPEG-4 or a voice codec\
    \ with Voice\n   Activity Detection, however, this may be deemed too conservative.\
    \  In\n   such cases, two basic types of statistical policy have been studied\n\
    \   and reported on in the literature: simple over-provisioning, and\n   approximation\
    \ to ambient load.\n   Simple over-provisioning sets the bandwidth admission limit\
    \ higher\n   than the desired load, on the assumption that a session that admits\
    \ a\n   certain bandwidth will in fact use a fraction of the bandwidth.  For\n\
    \   example, if MPEG-4 data streams are known to use data rates between\n   80\
    \ and 800 KBPS and there is no obvious reason that sessions would\n   synchronize\
    \ (such as having commercial breaks on 15 minute\n   boundaries), one could imagine\
    \ estimating that the average session\n   consumes 400 KBPS and treating an admission\
    \ of 800 KBPS as actually\n   consuming half the amount.\n   One can also approximate\
    \ to average load, which is perhaps a more\n   reliable procedure.  In this case,\
    \ one maintains a variable that\n   measures actual traffic through the admitted\
    \ data's queue,\n   approximating it using an exponentially weighted moving average.\n\
    \   When a new reservation request arrives, if the requested rate is less\n  \
    \ than the difference between the configured upper bound and the\n   current value\
    \ of the moving average, the reservation is accepted, and\n   the moving average\
    \ is immediately increased by the amount of the\n   reservation to ensure that\
    \ the bandwidth is not promised out to\n   several users simultaneously.  In time,\
    \ the moving average will decay\n   from this guard position to an estimate of\
    \ true load, which may offer\n   a chance to another session to be reserved that\
    \ would otherwise have\n   been refused.\n   Statistical reservation schemes such\
    \ as these are overwhelmingly\n   dependent on the correctness of their configuration\
    \ and its\n   appropriateness for the codecs in use.  However, they offer the\n\
    \   opportunity to take advantage of statistical multiplexing gains that\n   might\
    \ otherwise be missed.\n"
- title: 2.3.5.2.  Interaction with Complex Admission Policies, AAA, and
  contents:
  - "2.3.5.2.  Interaction with Complex Admission Policies, AAA, and\n          Preemption\
    \ of Bandwidth\n   Policy is carried and applied as described in [RFC2753].  Figure\
    \ 4,\n   below, is the basic conceptual model for policy decisions and\n   enforcement\
    \ in an Integrated Services model.  This model was created\n   to provide the\
    \ ability to monitor and control reservation flows based\n   on user identify,\
    \ specific traffic and security requirements, and\n   conditions that might change\
    \ for various reasons, including a\n   reaction to a disaster or emergency event\
    \ involving the network or\n   its users.\n     Network Node       Policy server\n\
    \    ______________\n   |   ______     |\n   |  |      |    |      _____\n   |\
    \  | PEP  |    |     |     |------------->\n   |  |______|<---|---->| PDP |May\
    \ use LDAP,SNMP,COPS...for accessing\n   |     ^        |     |     | policy database,\
    \ authentication, etc.\n   |     |        |     |_____|------------->\n   |  \
    \ __v___     |\n   |  |      |    |     PDP = Policy Decision Point\n   |  | LPDP\
    \ |    |     PEP = Policy Enforcement Point\n   |  |______|    |    LPDP = Local\
    \ Policy Decision Point\n   |______________|\n         Figure 4: Conceptual Model\
    \ for Policy Control of Routers\n   The Network Node represents a router in the\
    \ network.  The Policy\n   Server represents the point of admission and policy\
    \ control by the\n   network operator.  Policy Enforcement Point (PEP) (the router)\
    \ is\n   where the policy action is carried out.  Policy decisions can be\n  \
    \ either locally present in the form of a Local Policy Decision Point\n   (LPDP),\
    \ or in a separate server on the network called the Policy\n   Decision Point.\
    \  The easier the instruction set of rules, the more\n   likely this set can reside\
    \ in the LPDP for speed of access reasons.\n   The more complex the rule set,\
    \ the more likely this is active on a\n   remote server.  The PDP will use other\
    \ protocols (LDAP, SNMP, etc.)\n   to request information (e.g., user authentication\
    \ and authorization\n   for precedence level usage) to be used in creating the\
    \ rule sets of\n   network components.  This remote PDP should also be considered\
    \ where\n   non-reactive policies are distributed out to the LPDPs.\n   Taking\
    \ the above model as a framework, [RFC2750] extends RSVP's\n   concept of a simple\
    \ reservation to include policy controls, including\n   the concepts of Preemption\
    \ [RFC3181] and Identity [RFC3182],\n   specifically speaking to the usage of\
    \ policies that preempt calls\n   under the control of either a local or remote\
    \ policy manager.  The\n   policy manager assigns a precedence level to the admitted\
    \ data flow.\n   If it admits a data flow that exceeds the available capacity\
    \ of a\n   system, the expectation is that the RSVP-affected RSVP process will\n\
    \   tear down a session among the lowest precedence sessions it has\n   admitted.\
    \  The RESV Error resulting from that will go to the receiver\n   of the data\
    \ flow and be reported to the application (SIP or H.323).\n   That application\
    \ is responsible for disconnecting its call, with a\n   reason code of \"bandwidth\
    \ preemption\".\n"
- title: 2.4.  Authentication and Authorization of Calls Placed
  contents:
  - "2.4.  Authentication and Authorization of Calls Placed\n   It will be necessary,\
    \ of course, to ensure that any policy is applied\n   to an authenticated user;\
    \ the capabilities assigned to an\n   authenticated user may be considered authorized\
    \ for use in the\n   network.  For bandwidth admission, this will require the\
    \ utilization\n   of [RFC2747] [RFC3097].  In SIP and H.323, AAA procedures will\
    \ also\n   be needed.\n"
- title: 2.5.  Defined User Interface
  contents:
  - "2.5.  Defined User Interface\n   The user interface -- the chimes and tones heard\
    \ by the user --\n   should ideally remain the same as in the PSTN for those indications\n\
    \   that are still applicable to an IP network.  There should be some new\n  \
    \ effort generated to update the list of announcements sent to the user\n   that\
    \ don't necessarily apply.  All indications to the user, of\n   course, depend\
    \ on positive signals, not unreliable measures based on\n   changing measurements.\n"
- title: 3.  Security Considerations
  contents:
  - "3.  Security Considerations\n   This document outlines a networking capability\
    \ composed entirely of\n   existing specifications.  It has significant security\
    \ issues, in the\n   sense that a failure of the various authentication or authorization\n\
    \   procedures can cause a fundamental breakdown in communications.\n   However,\
    \ the issues are internal to the various component protocols\n   and are covered\
    \ by their various security procedures.\n"
- title: 4.  Acknowledgements
  contents:
  - "4.  Acknowledgements\n   This document was developed with the knowledge and input\
    \ of many\n   people, far too numerous to be mentioned by name.  However, key\n\
    \   contributors of thoughts include Francois Le Faucheur, Haluk\n   Keskiner,\
    \ Rohan Mahy, Scott Bradner, Scott Morrison, Subha Dhesikan,\n   and Tony De Simone.\
    \  Pete Babendreier, Ken Carlberg, and Mike Pierce\n   provided useful reviews.\n"
- title: 5.  References
  contents:
  - '5.  References

    '
- title: 5.1.  Normative References
  contents:
  - "5.1.  Normative References\n   [RFC3689]         Carlberg, K. and R. Atkinson,\
    \ \"General Requirements\n                     for Emergency Telecommunication\
    \ Service (ETS)\", RFC\n                     3689, February 2004.\n   [RFC3690]\
    \         Carlberg, K. and R. Atkinson, \"IP Telephony\n                     Requirements\
    \ for Emergency Telecommunication\n                     Service (ETS)\", RFC 3690,\
    \ February 2004.\n   Integrated Services Architecture References\n   [RFC1633]\
    \         Braden, B., Clark, D., and S. Shenker, \"Integrated\n              \
    \       Services in the Internet Architecture: an\n                     Overview\"\
    , RFC 1633, June 1994.\n   [RFC2205]         Braden, B., Zhang, L., Berson, S.,\
    \ Herzog, S., and\n                     S.  Jamin, \"Resource ReSerVation Protocol\
    \ (RSVP) --\n                     Version 1 Functional Specification\", RFC 2205,\n\
    \                     September 1997.\n   [RFC2207]         Berger, L. and T.\
    \ O'Malley, \"RSVP Extensions for\n                     IPSEC Data Flows\", RFC\
    \ 2207, September 1997.\n   [RFC2208]         Mankin, A., Baker, F., Braden, B.,\
    \ Bradner, S.,\n                     O'Dell, M., Romanow, A., Weinrib, A., and\
    \ L. Zhang,\n                     \"Resource ReSerVation Protocol (RSVP) Version\
    \ 1\n                     Applicability Statement Some Guidelines on\n       \
    \              Deployment\", RFC 2208, September 1997.\n   [RFC2209]         Braden,\
    \ B. and L. Zhang, \"Resource ReSerVation\n                     Protocol (RSVP)\
    \ -- Version 1 Message Processing\n                     Rules\", RFC 2209, September\
    \ 1997.\n   [RFC2746]         Terzis, A., Krawczyk, J., Wroclawski, J., and L.\n\
    \                     Zhang, \"RSVP Operation Over IP Tunnels\", RFC 2746,\n \
    \                    January 2000.\n   [RFC2747]         Baker, F., Lindell, B.,\
    \ and M. Talwar, \"RSVP\n                     Cryptographic Authentication\",\
    \ RFC 2747, January\n                     2000.\n   [RFC2750]         Herzog,\
    \ S., \"RSVP Extensions for Policy Control\",\n                     RFC 2750,\
    \ January 2000.\n   [RFC2753]         Yavatkar, R., Pendarakis, D., and R. Guerin,\
    \ \"A\n                     Framework for Policy-based Admission Control\", RFC\n\
    \                     2753, January 2000.\n   [RFC2996]         Bernet, Y., \"\
    Format of the RSVP DCLASS Object\", RFC\n                     2996, November 2000.\n\
    \   [RFC2998]         Bernet, Y., Ford, P., Yavatkar, R., Baker, F.,\n       \
    \              Zhang, L., Speer, M., Braden, R., Davie, B.,\n                \
    \     Wroclawski, J., and E.  Felstaine, \"A Framework for\n                 \
    \    Integrated Services Operation over Diffserv\n                     Networks\"\
    , RFC 2998, November 2000.\n   [RFC3097]         Braden, R. and L. Zhang, \"RSVP\
    \ Cryptographic\n                     Authentication -- Updated Message Type Value\"\
    , RFC\n                     3097, April 2001.\n   [RFC3175]         Baker, F.,\
    \ Iturralde, C., Le Faucheur, F., and B.\n                     Davie, \"Aggregation\
    \ of RSVP for IPv4 and IPv6\n                     Reservations\", RFC 3175, September\
    \ 2001.\n   [RFC3181]         Herzog, S., \"Signaled Preemption Priority Policy\n\
    \                     Element\", RFC 3181, October 2001.\n   [RFC3182]       \
    \  Yadav, S., Yavatkar, R., Pabbati, R., Ford, P.,\n                     Moore,\
    \ T., Herzog, S., and R. Hess, \"Identity\n                     Representation\
    \ for RSVP\", RFC 3182, October 2001.\n   [RFC3312]         Camarillo, G., Marshall,\
    \ W., and J. Rosenberg,\n                     \"Integration of Resource Management\
    \ and Session\n                     Initiation Protocol (SIP)\", RFC 3312, October\
    \ 2002.\n   Differentiated Services Architecture References\n   [RFC2474]    \
    \     Nichols, K., Blake, S., Baker, F., and D. Black,\n                     \"\
    Definition of the Differentiated Services Field\n                     (DS Field)\
    \ in the IPv4 and IPv6 Headers\", RFC 2474,\n                     December 1998.\n\
    \   [RFC2475]         Blake, S., Black, D., Carlson, M., Davies, E.,\n       \
    \              Wang, Z., and W. Weiss, \"An Architecture for\n               \
    \      Differentiated Services\", RFC 2475, December 1998.\n   [RFC2983]     \
    \    Black, D., \"Differentiated Services and Tunnels\",\n                   \
    \  RFC 2983, October 2000.\n   [RFC3246]         Davie, B., Charny, A., Bennet,\
    \ J., Benson, K., Le\n                     Boudec, J., Courtney, W., Davari, S.,\
    \ Firoiu, V.,\n                     and D.  Stiliadis, \"An Expedited Forwarding\
    \ PHB\n                     (Per-Hop Behavior)\", RFC 3246, March 2002.\n   [RFC3247]\
    \         Charny, A., Bennet, J., Benson, K., Boudec, J.,\n                  \
    \   Chiu, A., Courtney, W., Davari, S., Firoiu, V.,\n                     Kalmanek,\
    \ C., and K.  Ramakrishnan, \"Supplemental\n                     Information for\
    \ the New Definition of the EF PHB\n                     (Expedited Forwarding\
    \ Per-Hop Behavior)\", RFC 3247,\n                     March 2002.\n   Session\
    \ Initiation Protocol and Related References\n   [RFC2327]         Handley, M.\
    \ and V. Jacobson, \"SDP: Session\n                     Description Protocol\"\
    , RFC 2327, April 1998.\n   [RFC3261]         Rosenberg, J., Schulzrinne, H.,\
    \ Camarillo, G.,\n                     Johnston, A., Peterson, J., Sparks, R.,\
    \ Handley,\n                     M., and E.  Schooler, \"SIP: Session Initiation\n\
    \                     Protocol\", RFC 3261, June 2002.\n   [RFC4411]         Polk,\
    \ J., \"Extending the Session Initiation\n                     Protocol (SIP)\
    \ Reason Header for Preemption\n                     Events\", RFC 4411, February\
    \ 2006.\n   [RFC4412]         Schulzrinne, H. and J. Polk, \"Communications\n\
    \                     Resource Priority for the Session Initiation\n         \
    \            Protocol (SIP)\", RFC 4412, February 2006.\n"
- title: 5.2.  Informative References
  contents:
  - "5.2.  Informative References\n   [ANSI.MLPP.Spec]  American National Standards\
    \ Institute,\n                     \"Telecommunications - Integrated Services\
    \ Digital\n                     Network (ISDN) - Multi-Level Precedence and\n\
    \                     Preemption (MLPP) Service Capability\", ANSI\n         \
    \            T1.619-1992 (R1999), 1992.\n   [ANSI.MLPP.Supp]  American National\
    \ Standards Institute, \"MLPP\n                     Service Domain Cause Value\
    \ Changes\", ANSI ANSI\n                     T1.619a-1994 (R1999), 1990.\n   [G711.1]\
    \          Viola Networks, \"Netally VoIP Evaluator\", January\n             \
    \        2003, <http://www.brainworks.de/Site/hersteller/\n                  \
    \   viola_networks/Dokumente/Compr_Report_Sample.pdf>.\n   [G711.3]          Nortel\
    \ Networks, \"Packet Loss and Packet Loss\n                     Concealment\"\
    , 2000, <http://www.nortelnetworks.com/\n                     products/01/succession/es/collateral/\n\
    \                     tb_pktloss.pdf>.\n   [ITU.ETS.E106]    International Telecommunications\
    \ Union,\n                     \"International Emergency Preference Scheme for\n\
    \                     disaster relief operations (IEPS)\", ITU-T\n           \
    \          Recommendation E.106, October 2003.\n   [ITU.MLPP.1990]   International\
    \ Telecommunications Union, \"Multilevel\n                     Precedence and\
    \ Preemption Service (MLPP)\", ITU-T\n                     Recommendation I.255.3,\
    \ 1990.\n   [Parekh1]         Parekh, A. and R. Gallager, \"A Generalized\n  \
    \                   Processor Sharing Approach to Flow Control in\n          \
    \           Integrated Services Networks: The Multiple Node\n                \
    \     Case\", INFOCOM 1993: 521-530, 1993.\n   [Parekh2]         Parekh, A. and\
    \ R. Gallager, \"A Generalized\n                     Processor Sharing Approach\
    \ to Flow Control in\n                     Integrated Services Networks: The Single\
    \ Node\n                     Case\", INFOCOM 1992: 915-924, 1992.\n"
- title: Appendix A.  2-Call Preemption Example Using RSVP
  contents:
  - "Appendix A.  2-Call Preemption Example Using RSVP\n   This appendix will present\
    \ a more complete view of the interaction\n   among SIP, SDP, and RSVP.  The bulk\
    \ of the material is referenced\n   from [RFC2327], [RFC3312], [RFC4411], and\
    \ [RFC4412].  There will be\n   some discussion on basic RSVP operations regarding\
    \ reservation paths;\n   this will be mostly from [RFC2205].\n   SIP signaling\
    \ occurs at the Application Layer, riding on a UDP/IP or\n   TCP/IP (including\
    \ TLS/TCP/IP) transport that is bound by routing\n   protocols such as BGP and\
    \ OSPF to determine the route the packets\n   traverse through a network between\
    \ source and destination devices.\n   RSVP is riding on top of IP as well, which\
    \ means RSVP is at the mercy\n   of the IP routing protocols to determine a path\
    \ through the network\n   between endpoints.  RSVP is not a routing protocol.\
    \  In this\n   appendix, there will be an escalation of building blocks getting\
    \ to\n   how the many layers are involved in SIP.  QoS Preconditions require\n\
    \   successful RSVP signaling between endpoints prior to SIP successfully\n  \
    \ acknowledging the setup of the session (for voice, video, or both).\n   Then\
    \ we will present what occurs when a network overload occurs\n   (congestion),\
    \ causing a SIP session to be preempted.\n   Three diagrams in this appendix show\
    \ multiple views of the same\n   example of connectivity for discussion throughout\
    \ this appendix.  The\n   first diagram (Figure 5) is of many routers between\
    \ many endpoints\n   (SIP user agents, or UAs).  There are 4 UAs of interest;\
    \ those are\n   for users Alice, Bob, Carol, and Dave.  When a user (the human)\
    \ of a\n   UA gets involved and must do something to a UA to progress a SIP\n\
    \   process, this will be explicitly mentioned to avoid confusion;\n   otherwise,\
    \ when Alice is referred to, it means Alice's UA (her\n   phone).\n   RSVP reserves\
    \ bandwidth in one direction only (the direction of the\n   RESV message), as\
    \ has been discussed, IP forwarding of packets are\n   dictated by the routing\
    \ protocol for that portion of the\n   infrastructure from the point of view of\
    \ where the packet is to go\n   next.\n   The RESV message traverses the routers\
    \ in the reverse path taken by\n   the PATH message.  The PATH message establishes\
    \ a record of the route\n   taken through a network portion to the destination\
    \ endpoint, but it\n   does not reserve resources (bandwidth).  The RESV message\
    \ back to the\n   original requester of the RSVP flow requests for the bandwidth\n\
    \   resources.  This means the endpoint that initiates the RESV message\n   controls\
    \ the parameters of the reservation.  This document specifies\n   in the body\
    \ text that the SIP initiator (the UAC) establishes the\n   parameters of the\
    \ session in an INVITE message, and that the INVITE\n   recipient (the UAS) must\
    \ follow the parameters established in that\n   INVITE message.  One exception\
    \ to this is which codec to use if the\n   UAC offered more than one to the UAS.\
    \  This exception will be shown\n   when the INVITE message is discussed in detail\
    \ later in the appendix.\n   If there was only one codec in the SDP of the INVITE\
    \ message, the\n   parameters of the reservation will follow what the UAC requested\n\
    \   (specifically to include the Resource-Priority header namespace and\n   priority\
    \ value).\n   Here is the first figure with the 4 UAs and a meshed routed\n  \
    \ infrastructure between each.  For simplicity of this explanation,\n   this appendix\
    \ will only discuss the reservations from Alice to Bob\n   (one direction) and\
    \ from Carol to Dave (one direction).  An\n   interactive voice service will require\
    \ two one-way reservations that\n   end in each UA.  This gives the appearance\
    \ of a two-way reservation,\n   when indeed it is not.\n           Alice -----R1----R2----R3----R4------\
    \ Bob\n                      | \\  /  \\  /  \\  / |\n                      |\
    \  \\/    \\/    \\/  |\n                      |  /\\    /\\    /\\  |\n     \
    \                 | /  \\  /  \\  /  \\ |\n           Carol -----R5----R6----R7----R8------\
    \ Dave\n            Figure 5: Complex Routing and Reservation Topology\n   The\
    \ PATH message from Alice to Bob (establishing the route for the\n   RESV message)\
    \ will be through routers:\n      Alice -> R1 -> R2 -> R3 -> R4 -> Bob\n   The\
    \ RESV message (and therefore the reservation of resources) from\n   Bob to Alice\
    \ will be through routers:\n      Bob -> R4 -> R3 -> R2 -> R1 -> Alice\n   The\
    \ PATH message from Carol to Dave (establishing the route for the\n   RESV message)\
    \ will be through routers:\n      Carol -> R5 -> R2 -> R3 -> R8 -> Dave\n   The\
    \ RESV message (and therefore the reservation of resources) from\n   Dave to Carol\
    \ will be through routers:\n      Dave -> R8 -> R3 -> R2 -> R5 -> Carol\n   The\
    \ reservations from Alice to Bob traverse a common router link:\n   between R3\
    \ and R2 and thus a common interface at R2.  Here is where\n   there will be congestion\
    \ in this example, on the link between R2 and\n   R3.  Since the flow of data\
    \ (in this case voice media packets)\n   travels the direction of the PATH message,\
    \ and RSVP establishes\n   reservation of resources at the egress interface of\
    \ a router, the\n   interface in Figure 6 shows that Int7 will be what first knows\
    \ about\n   a congestion condition.\n             Alice                      \
    \         Bob\n                \\                                /\n         \
    \        \\                              /\n                  +--------+     \
    \     +--------+\n                  |        |          |        |\n         \
    \         |   R2   |          |   R3   |\n                  |       Int7-------Int5\
    \      |\n                  |        |          |        |\n                 \
    \ +--------+          +--------+\n                 /                         \
    \     \\\n                /                                \\\n            Carol\
    \                                Dave\n                  Figure 6: Reduced Reservation\
    \ Topology\n   Figure 6 illustrates how the messaging between the UAs and the\
    \ RSVP\n   messages between the relevant routers can be shown to understand the\n\
    \   binding that was established in [RFC3312] (more suitably titled \"SIP\n  \
    \ Preconditions for QoS\" from this document's point of view).\n   We will assume\
    \ all devices have powered up and received whatever\n   registration or remote\
    \ policy downloads were necessary for proper\n   operation.  The routing protocol\
    \ of choice has performed its routing\n   table update throughout this part of\
    \ the network.  Now we are left to\n   focus only on end-to-end communications\
    \ and how that affects the\n   infrastructure between endpoints.\n   The next\
    \ diagram (Figure 7) (nearly identical to Figure 1 from\n   [RFC3312]) shows the\
    \ minimum SIP messaging (at layer 7) between Alice\n   and Bob for a good-quality\
    \ voice call.  The SIP messages are numbered\n   to identify special qualities\
    \ of each.  During the SIP signaling,\n   RSVP will be initiated.  That messaging\
    \ will also be discussed below.\n      UA Alice                              \
    \        UA Bob\n          |                                            |\n  \
    \        |                                            |\n          |-------------(1)\
    \ INVITE SDP1--------------->|\n          |                                  \
    \          |   Note 1\n          |<------(2) 183 Session Progress SDP2--------|\
    \     |\n       ***|********************************************|***<-+\n    \
    \   *  |----------------(3) PRACK------------------>|  *\n       *  |        \
    \                                    |  * Where\n       *  |<-----------(4) 200\
    \ OK (PRACK)--------------|  * RSVP\n       *  |                             \
    \               |  * is\n       *  |                                         \
    \   |  * signaled\n       ***|********************************************|***\n\
    \          |-------------(5) UPDATE SDP3--------------->|\n          |       \
    \                                     |\n          |<--------(6) 200 OK (UPDATE)\
    \ SDP4-----------|\n          |                                            |\n\
    \          |<-------------(7) 180 Ringing---------------|\n          |       \
    \                                     |\n          |-----------------(8) PRACK----------------->|\n\
    \          |                                            |\n          |<------------(9)\
    \ 200 OK (PRACK)-------------|\n          |                                  \
    \          |\n          |                                            |\n     \
    \     |<-----------(10) 200 OK (INVITE)------------|\n          |            \
    \                                |\n          |------------------(11) ACK----------------->|\n\
    \          |                                            |\n          |       \
    \  RTP (within the reservation)       |\n          |<==========================================>|\n\
    \          |                                            |\n        Figure 7: SIP\
    \ Reservation Establishment Using Preconditions\n   The session initiation starts\
    \ with Alice wanting to communicate with\n   Bob.  Alice decides on an IEPS precedence\
    \ level for their call (the\n   default is the \"routine\" level, which is for\
    \ normal everyday calls,\n   but a priority level has to be chosen for each call).\
    \  Alice puts\n   into her UA Bob's address and precedence level and (effectively)\
    \ hits\n   the send button.  This is reflected in SIP with an INVITE Method\n\
    \   Request message [M1].  Below is what SIP folks call a well-formed SIP\n  \
    \ message (meaning it has all the headers that are mandatory to\n   function properly).\
    \  We will pick on the US Marine Corps (USMC) for\n   the addressing of this message\
    \ exchange.\n      [M1 - INVITE from Alice to Bob, RP=Routine, QOS=e2e and mandatory]\n\
    \      INVITE sip:bob@usmc.example.mil SIP/2.0\n      Via: SIP/2.0/TCP pc33.usmc.example.mil:5060\n\
    \        ;branch=z9hG4bK74bf9\n      Max-Forwards: 70\n      From: Alice <sip:alice@usmc.example.mil>;tag=9fxced76sl\n\
    \      To: Bob <sip:bob@usmc.example.mil>\n      Call-ID: 3848276298220188511@pc33.usmc.example.mil\n\
    \      CSeq: 31862 INVITE\n      Require: 100rel, preconditions, resource-priority\n\
    \      Resource-Priority: dsn.routine\n      Contact: <sip:alice@usmc.example.mil>\n\
    \      Content-Type: application/sdp\n      Content-Length: 191\n      v=0\n \
    \     o=alice 2890844526 2890844526 IN IP4 usmc.example.mil\n      c=IN IP4 10.1.3.33\n\
    \      t=0 0\n      m=audio 49172 RTP/AVP 0 4 8\n      a=rtpmap:0 PCMU/8000\n\
    \      a=curr:qos e2e none\n      a=des:qos mandatory e2e sendrecv\n   From the\
    \ INVITE above, Alice is inviting Bob to a session.  The upper\n   half of the\
    \ lines (above the line \"v=0\") is SIP headers and header\n   values, and the\
    \ lower half is Session Description Protocol (SDP)\n   lines.  SIP headers (after\
    \ the first line, called the Status line)\n   are not mandated in any particular\
    \ order, with one exception: the Via\n   header.  It is a SIP hop (through a SIP\
    \ Proxy) route path that has a\n   new Via header line added by each SIP element\
    \ this message traverses\n   towards the destination UA.  This is similar in function\
    \ to an RSVP\n   PATH message (building a reverse path back to the originator\
    \ of the\n   message).  At any point in the message's path, a SIP element knows\n\
    \   the path to the originator of the message.  There will be no SIP\n   Proxies\
    \ in this example, because for Preconditions, Proxies only make\n   more messages\
    \ that look identical (with the exception of the Via and\n   Max-Forwards headers),\
    \ and it is not worth the space here to\n   replicate what has been done in SIP\
    \ RFCs already.\n   SIP headers that are used for Preconditions are as follows:\n\
    \   o  Require header, which contains 3 option tags: \"100rel\" mandates a\n \
    \     reliable provisional response message to the conditions requesting\n   \
    \   in this INVITE (knowing they are special), \"preconditions\"\n      mandates\
    \ that preconditions are attempted, and \"resource-priority\"\n      mandates\
    \ support for the Resource-Priority header.  Each of these\n      option tags\
    \ can be explicitly identified in a message failure\n      indication from the\
    \ called UA to tell the calling UA exactly what\n      was not supported.\n  \
    \    Provided that this INVITE message is received as acceptable, this\n     \
    \ will result in the 183 \"Session Progress\" message from Bob's UA, a\n     \
    \ reliable confirmation that preconditions are required for this\n      call.\n\
    \   o  Resource-Priority header, which denotes the domain namespace and\n    \
    \  precedence level of the call on an end-to-end basis.\n   This completes SIP's\
    \ functions in session initiation.  Preconditions\n   are requested, required,\
    \ and signaled for in the SDP portion of the\n   message.  SDP is carried in what's\
    \ called a SIP message body (much\n   like the text in an email message is carried).\
    \  SDP has special\n   properties (see [RFC2327] for more on SDP, or the MMUSIC\
    \ WG for\n   ongoing efforts regarding SDP).  SDP lines are in a specific order\n\
    \   for parsing by end systems.  Dialog-generating (or call-generating)\n   SDP\
    \ message bodies all must have an \"m=\" line (or media description\n   line).\
    \  Following the \"m=\" line are zero or more \"a=\" lines (or\n   Attribute lines).\
    \  The \"m=\" line in Alice's INVITE calls for a voice\n   session (this is where\
    \ video is identified also) using one of 3\n   different codecs that Alice supports\
    \ (0 = G.711, 4 = G.723, and 18 =\n   G.729) that Bob gets to choose from for\
    \ this session.  Bob can choose\n   any of the 3.  The first a=rtpmap line is\
    \ specific to the type of\n   codec these 3 are (PCMU).  The next two \"a=\" lines\
    \ are the only\n   identifiers that RSVP is to be used for this call.  The second\
    \ \"a=\"\n   line:\n      a=curr:qos e2e none\n   identifies the \"current\" status\
    \ of qos at Alice's UA.  Note:\n   everything in SDP is with respect to the sender\
    \ of the SDP message\n   body (Alice will never tell Bob how his SDP is; she will\
    \ only tell\n   Bob about her SDP).\n      \"e2e\" means that capacity assurance\
    \ is required from Alice's UA to\n      Bob's UA; thus, a lack of available capacity\
    \ assurance in either\n      direction will fail the call attempt.\n      \"none\"\
    \ means there is no reservation at Alice's UA (to Bob) at\n      this time.\n\
    \   The final \"a=\" line (a=des) identifies the \"desired\" level of qos:\n \
    \     a=des:qos mandatory e2e sendrecv\n      \"mandatory\" means this request\
    \ for qos MUST be successful, or the\n      call fails.\n      \"e2e\" means RSVP\
    \ is required from Alice's UA to Bob's UA.\n      \"sendrecv\" means the reservation\
    \ is in both directions.\n   As discussed, RSVP does not reserve bandwidth in\
    \ both directions, and\n   it is up to the endpoints to have 2 one-way reservations\
    \ if that\n   particular application (here, voice) requires it.  Voice between\n\
    \   Alice and Bob requires 2 one-way reservations.  The UAs will be the\n   focal\
    \ points for both reservations in both directions.\n   Message 2 is the 183 \"\
    Session Progress\" message sent by Bob to Alice,\n   which indicates to Alice\
    \ that Bob understands that preconditions are\n   required for this call.\n  \
    \    [M2 - 183 \"Session Progress\"]\n      SIP/2.0 183 Session Progress\n   \
    \   Via: SIP/2.0/TCP pc33.usmc.example.mil:5060\n        ;branch=z9hG4bK74bf9\
    \ ;received=10.1.3.33\n      From: Alice <sip:alice@usmc.example.mil>;tag=9fxced76sl\n\
    \      To: Bob <sip:bob@usmc.example.mil>;tag=8321234356\n      Call-ID: 3848276298220188511@pc33.usmc.example.mil\n\
    \      CSeq: 31862 INVITE\n      RSeq: 813520\n      Resource-Priority: dsn.routine\n\
    \      Contact: <sip:bob@usmc.example.mil>\n      Content-Type: application/sdp\n\
    \      Content-Length: 210\n      v=0\n      o=bob 2890844527 2890844527 IN IP4\
    \ usmc.example.mil\n      c=IN IP4 10.100.50.51\n      t=0 0\n      m=audio 3456\
    \ RTP/AVP 0\n      a=rtpmap:0 PCMU/8000\n      a=curr:qos e2e none\n      a=des:qos\
    \ mandatory e2e sendrecv\n      a=conf:qos e2e recv\n   The only interesting header\
    \ in the SIP portion of this message is the\n   RSeq header, which is the \"Reliable\
    \ Sequence\" header.  The value is\n   incremented for every Reliable message\
    \ that's sent in this call setup\n   (to make sure none are lost or to ignore\
    \ duplicates).\n   Bob's SDP indicates several \"a=\" line statuses and picks\
    \ a codec for\n   the call.  The codec picked is in the m=audio line (the \"0\"\
    \ at the\n   end of this line means G.711 will be the codec).\n   The a=curr line\
    \ gives Alice Bob's status with regard to RSVP\n   (currently \"none\").\n   The\
    \ a=des line also states the desire for mandatory qos e2e in both\n   directions.\n\
    \   The a=conf line is new.  This line means Bob wants confirmation that\n   Alice\
    \ has 2 one-way reservations before Bob's UA proceeds with the\n   SIP session\
    \ setup.\n   This is where \"Note-1\" applies in Figure 7.  At the point that\
    \ Bob's\n   UA transmits this 183 message, Bob's UA (the one that picked the\n\
    \   codec, so it knows the amount of bandwidth to reserve) transmits an\n   RSVP\
    \ PATH message to Alice's UA.  This PATH message will take the\n   route previously\
    \ discussed in Figure 5:\n      Bob -> R4 -> R3 -> R2 -> R1 -> Alice\n   This\
    \ is the path of the PATH message, and the reverse will be the\n   path of the\
    \ reservation setup RESV message, or:\n      Alice -> R1 -> R2 -> R3 -> R4 ->\
    \ Bob\n   Immediately after Alice transmits the RESV message towards Bob, Alice\n\
    \   sends her own PATH message to initiate the other one-way reservation.\n  \
    \ Bob, receiving that PATH message, will reply with a RESV.\n   All this is independent\
    \ of SIP.  However, during this time of\n   reservation establishment, a Provisional\
    \ Acknowledgement (PRACK) [M3]\n   is sent from Alice to Bob to confirm the request\
    \ for confirmation of\n   2 one-way reservations at Alice's UA.  This message\
    \ is acknowledged\n   with a normal 200 OK message [M4].  This is shown in Figure\
    \ 7.\n   As soon as the RSVP is successfully completed at Alice's UA (knowing\n\
    \   that it was the last in the two-way cycle or reservation\n   establishment),\
    \ at the SIP layer an UPDATE message [M5] is sent to\n   Bob's UA to inform his\
    \ UA that the current status of RSVP (or qos) is\n   \"e2e\" and \"sendrecv\"\
    .\n      [M5 - UPDATE to Bob that Alice has qos e2e and sendrecv]\n      UPDATE\
    \ sip:bob@usmc.example.mil SIP/2.0\n      Via: SIP/2.0/TCP pc33.usmc.example.mil:5060\n\
    \        ;branch=z9hG4bK74bfa\n      From: Alice <sip:alice@usmc.example.mil>;tag=9fxced76sl\n\
    \      To: Bob <sip:bob@usmc.example.mil>\n      Call-ID: 3848276298220188511@pc33.usmc.example.mil\n\
    \      Resource-Priority: dsn.routine\n      Contact: <sip:alice@usmc.example.mil>\n\
    \      CSeq: 10197 UPDATE\n      Content-Type: application/sdp\n      Content-Length:\
    \ 191\n      v=0\n      o=alice 2890844528 2890844528 IN IP4 usmc.example.mil\n\
    \      c=IN IP4 10.1.3.33\n      t=0 0\n      m=audio 49172 RTP/AVP 0\n      a=rtpmap:0\
    \ PCMU/8000\n      a=curr:qos e2e send\n      a=des:qos mandatory e2e sendrecv\n\
    \   This is shown by the matching table that can be built from the a=curr\n  \
    \ line and a=des line.  If the two lines match, then no further\n   signaling\
    \ needs take place with regard to \"qos\".  [M6] is the 200 OK\n   acknowledgement\
    \ of this synchronization between the two UAs.\n      [M6 - 200 OK to the UPDATE\
    \ from Bob indicating synchronization]\n      SIP/2.0 200 OK sip:bob@usmc.example.mil\n\
    \      Via: SIP/2.0/TCP pc33.usmc.example.mil:5060\n        ;branch=z9hG4bK74bfa\n\
    \      From: Alice <sip:alice@usmc.example.mil>;tag=9fxced76sl\n      To: Bob\
    \ <sip:bob@usmc.example.mil>\n      Call-ID: 3848276298220188511@pc33.usmc.example.mil\n\
    \      Resource-Priority: dsn.routine\n      Contact: < sip:alice@usmc.example.mil\
    \ >\n      CSeq: 10197 UPDATE\n      Content-Type: application/sdp\n      Content-Length:\
    \ 195\n      v=0\n      o=alice 2890844529 2890844529 IN IP4 usmc.example.mil\n\
    \      c=IN IP4 10.1.3.33\n      t=0 0\n      m=audio 49172 RTP/AVP 0\n      a=rtpmap:0\
    \ PCMU/8000\n      a=curr:qos e2e sendrecv\n      a=des:qos mandatory e2e sendrecv\n\
    \   At this point, the reservation is operational and both UAs know it.\n   Bob's\
    \ UA now rings, telling Bob the user that Alice is calling him.\n   ([M7] is the\
    \ SIP indication to Alice that this is taking place).\n   Nothing up until now\
    \ has involved Bob the user.  Bob picks up the\n   phone (generating [M10], from\
    \ which Alice's UA responds with the\n   final ACK), and RTP is now operating\
    \ within the reservations between\n   the two UAs.\n   Now we get to Carol calling\
    \ Dave.  Figure 6 shows a common router\n   interface for the reservation between\
    \ Alice to Bob, and one that will\n   also be the route for one of the reservations\
    \ between Carol to Dave.\n   This interface will experience congestion in our\
    \ example.\n   Carol is now calling Dave at a Resource-Priority level of\n   \"\
    Immediate\", which is higher in priority than Alice to Bob's\n   \"routine\".\
    \  In this continuing example, Router 2's Interface-7 is\n   congested and cannot\
    \ accept any more RSVP traffic.  Perhaps the\n   offered load is at interface\
    \ capacity.  Perhaps Interface-7 is\n   configured with a fixed amount of bandwidth\
    \ it can allocate for RSVP\n   traffic, and it has reached its maximum without\
    \ one of the\n   reservations going away through normal termination or forced\n\
    \   termination (preemption).\n   Interface-7 is not so full of offered load that\
    \ it cannot transmit\n   signaling packets, such as Carol's SIP messaging to set\
    \ up a call to\n   Dave.  This should be by design (that not all RSVP traffic\
    \ can starve\n   an interface from signaling packets).  Carol sends her own INVITE\n\
    \   with the following important characteristics:\n   [M1 - INVITE from Carol\
    \ to Dave, RP=Immediate, QOS=e2e and mandatory]\n   This packet does *not* affect\
    \ the reservations between Alice and Bob\n   (SIP and RSVP are at different layers,\
    \ and all routers are passing\n   signaling packets without problems).  Dave sends\
    \ his M2:\n   [M2 - 183 \"Session Progress\"]\n   with the SDP chart of:\n   \
    \   a=curr:qos e2e none\n      a=des:qos mandatory e2e sendrecv\n      a=conf:qos\
    \ e2e recv\n   indicating he understands RSVP reservations are required e2e for\
    \ this\n   call to be considered successful.  Dave sends his PATH message.  The\n\
    \   PATH message does *not* affect Alice's reservation; it merely\n   establishes\
    \ a path for the RESV reservation setup message to take.\n   To keep this example\
    \ simple, the PATH message from Dave to Carol took\n   this route (which we make\
    \ different from the route in the reverse\n   direction):\n      Dave -> R8 ->\
    \ R7 -> R6 -> R5 -> Carol\n   causing the reservation to be this route:\n    \
    \  Carol -> R5 -> R6 -> R7 -> R8 -> Dave\n   The Carol-to-Dave reservation above\
    \ will not traverse any of the same\n   routers as the Alice-to-Bob reservation.\
    \  When Carol transmits her\n   RESV message towards Dave, she immediately transmits\
    \ her PATH message\n   to set up the complementary reservation.\n   The PATH message\
    \ from Carol to Dave be through routers:\n      Carol -> R5 -> R2 -> R3 -> R8\
    \ -> Dave\n   Thus, the RESV message will be through routers:\n      Dave -> R8\
    \ -> R3 -> R2 -> R5 -> Carol\n   This RESV message will traverse the same routers,\
    \ R3 and R2, as the\n   Alice-to-Bob reservation.  This RESV message, when received\
    \ at\n   Interface-7 of R2, will create a congestion situation such that R2\n\
    \   will need to make a decision on whether:\n   o  to keep the Alice-to-Bob reservation\
    \ and error the new RESV from\n      Dave, or\n   o  to error the reservation\
    \ from Alice to Bob in order to make room\n      for the Carol-to-Dave reservation.\n\
    \   Alice's reservation was set up in SIP at the \"routine\" precedence\n   level.\
    \  This will equate to a comparable RSVP priority number (RSVP\n   has 65,535\
    \ priority values, or 2*32 bits per [RFC3181]).  Dave's RESV\n   equates to a\
    \ precedence value of \"immediate\", which is a higher\n   priority.  Thus, R2\
    \ will preempt the reservation from Alice to Bob\n   and allow the reservation\
    \ request from Dave to Carol.  The proper\n   RSVP error is the ResvErr that indicates\
    \ preemption.  This message\n   travels downstream towards the originator of the\
    \ RESV message (Bob).\n   This clears the reservation in all routers downstream\
    \ of R2 (meaning\n   R3 and R4).  Once Bob receives the ResvErr message indicating\n\
    \   preemption has occurred on this reservation, Bob's UA transmits a SIP\n  \
    \ preemption indication back towards Alice's UA.  This accomplishes two\n   things:\
    \ first, it informs all SIP Servers that were in the session\n   setup path that\
    \ wanted to remain \"dialog stateful\" per [RFC3261], and\n   second, it informs\
    \ Alice's UA that this was a purposeful termination,\n   and to play a preemption\
    \ tone.  The proper indication in SIP of this\n   termination due to preemption\
    \ is a BYE Method message that includes a\n   Reason Header indicating why this\
    \ occurred (in this case, \"Reserved\n   Resources Preempted\").  Here is the\
    \ message from Bob to Alice that\n   terminates the call in SIP.\n      BYE sip:alice@usmc.example.mil\
    \ SIP/2.0\n      Via: SIP/2.0/TCP swp34.usmc.example.mil\n        ;branch=z9hG4bK776asegma\n\
    \      To: Alice <sip:alice@usmc.example.mil>\n      From: Bob <sip:bob@usmc.example.mil>;tag=192820774\n\
    \      Reason: preemption ;cause=2 ;text=reserved resourced preempted\n      Call-ID:\
    \ 3848276298220188511@pc33.usmc.example.mil\n      CSeq: 6187 BYE\n      Contact:\
    \ <sip:bob@usmc.example.mil>\n   When Alice's UA receives this message, her UA\
    \ terminates the call,\n   sends a 200 OK to Bob to confirm reception of the BYE\
    \ message, and\n   plays a preemption tone to Alice the user.\n   The RESV message\
    \ from Dave successfully traverses R2, and Carol's UA\n   receives it.  Just as\
    \ with the Alice-to-Bob call setup, Carol sends\n   an UPDATE message to Dave,\
    \ confirming she has QoS \"e2e\" in \"sendrecv\"\n   directions.  Bob acknowledges\
    \ this with a 200 OK that gives his\n   current status (QoS \"e2e\" and \"sendrecv\"\
    ), and the call setup in SIP\n   continues to completion.\n   In summary, Alice\
    \ set up a call to Bob with RSVP at a priority level\n   of Routine.  When Carol\
    \ called Dave at a high priority, their call\n   would have preempted any lower\
    \ priority calls if there were a\n   contention for resources.  In this case,\
    \ it occurred and affected the\n   call between Alice and Bob.  A router at this\
    \ congestion point\n   preempted Alice's call to Bob in order to place the higher-priority\n\
    \   call between Carol and Dave.  Alice and Bob were both informed of the\n  \
    \ preemption event.  Both Alice and Bob's UAs played preemption\n   indications.\
    \  What was not mentioned in this appendix was that this\n   document RECOMMENDS\
    \ that router R2 (in this example) generate a\n   syslog message to the domain\
    \ administrator to properly manage and\n   track such events within this domain.\
    \  This will ensure that the\n   domain administrators have recorded knowledge\
    \ of where such events\n   occur, and what the conditions were that caused them.\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Fred Baker\n   Cisco Systems\n   1121 Via Del Rey\n  \
    \ Santa Barbara, California  93117\n   USA\n   Phone: +1-408-526-4257\n   Fax:\
    \   +1-413-473-2403\n   EMail: fred@cisco.com\n   James Polk\n   Cisco Systems\n\
    \   2200 East President George Bush Turnpike\n   Richardson, Texas  75082\n  \
    \ USA\n   Phone: +1-817-271-3552\n   EMail: jmpolk@cisco.com\n"
- title: Full Copyright Statement
  contents:
  - "Full Copyright Statement\n   Copyright (C) The Internet Society (2006).\n   This\
    \ document is subject to the rights, licenses and restrictions\n   contained in\
    \ BCP 78, and except as set forth therein, the authors\n   retain all their rights.\n\
    \   This document and the information contained herein are provided on an\n  \
    \ \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n  \
    \ OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET\n   ENGINEERING\
    \ TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,\n   INCLUDING BUT NOT\
    \ LIMITED TO ANY WARRANTY THAT THE USE OF THE\n   INFORMATION HEREIN WILL NOT\
    \ INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY OR FITNESS\
    \ FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at\n   ietf-ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is provided by the IETF\n\
    \   Administrative Support Activity (IASA).\n"
