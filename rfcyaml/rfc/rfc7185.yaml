- title: __initial_text__
  contents:
  - "                 Rationale for the Use of Link Metrics\n    in the Optimized\
    \ Link State Routing Protocol Version 2 (OLSRv2)\n"
- title: Abstract
  contents:
  - "Abstract\n   The Optimized Link State Routing Protocol version 2 (OLSRv2) includes\n\
    \   the ability to assign metrics to links and to use those metrics to\n   allow\
    \ routing by other than minimum hop count routes.  This document\n   provides\
    \ a historic record of the rationale for, and design\n   considerations behind,\
    \ how link metrics were included in OLSRv2.\n"
- title: Status of This Memo
  contents:
  - "Status of This Memo\n   This document is not an Internet Standards Track specification;\
    \ it is\n   published for informational purposes.\n   This document is a product\
    \ of the Internet Engineering Task Force\n   (IETF).  It represents the consensus\
    \ of the IETF community.  It has\n   received public review and has been approved\
    \ for publication by the\n   Internet Engineering Steering Group (IESG).  Not\
    \ all documents\n   approved by the IESG are a candidate for any level of Internet\n\
    \   Standard; see Section 2 of RFC 5741.\n   Information about the current status\
    \ of this document, any errata,\n   and how to provide feedback on it may be obtained\
    \ at\n   http://www.rfc-editor.org/info/rfc7185.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (c) 2014 IETF Trust and the persons identified\
    \ as the\n   document authors.  All rights reserved.\n   This document is subject\
    \ to BCP 78 and the IETF Trust's Legal\n   Provisions Relating to IETF Documents\n\
    \   (http://trustee.ietf.org/license-info) in effect on the date of\n   publication\
    \ of this document.  Please review these documents\n   carefully, as they describe\
    \ your rights and restrictions with respect\n   to this document.  Code Components\
    \ extracted from this document must\n   include Simplified BSD License text as\
    \ described in Section 4.e of\n   the Trust Legal Provisions and are provided\
    \ without warranty as\n   described in the Simplified BSD License.\n   This document\
    \ may contain material from IETF Documents or IETF\n   Contributions published\
    \ or made publicly available before November\n   10, 2008.  The person(s) controlling\
    \ the copyright in some of this\n   material may not have granted the IETF Trust\
    \ the right to allow\n   modifications of such material outside the IETF Standards\
    \ Process.\n   Without obtaining an adequate license from the person(s) controlling\n\
    \   the copyright in such materials, this document may not be modified\n   outside\
    \ the IETF Standards Process, and derivative works of it may\n   not be created\
    \ outside the IETF Standards Process, except to format\n   it for publication\
    \ as an RFC or to translate it into languages other\n   than English.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1. Introduction ....................................................3\n\
    \   2. Terminology .....................................................5\n  \
    \ 3. Applicability ...................................................5\n   4.\
    \ Motivational Scenarios ..........................................5\n   5. Link\
    \ Metrics ....................................................7\n      5.1. Link\
    \ Metric Properties .....................................7\n      5.2. Link Metric\
    \ Types ..........................................8\n      5.3. Directional Link\
    \ Metrics ..................................10\n      5.4. Reporting Link and\
    \ Neighbor Metrics .......................10\n      5.5. Defining Incoming Link\
    \ Metrics ............................12\n      5.6. Link Metric Values ........................................12\n\
    \   6. MPRs with Link Metrics .........................................14\n  \
    \    6.1. Flooding MPRs .............................................14\n    \
    \  6.2. Routing MPRs ..............................................16\n      6.3.\
    \ Relationship between MPR Sets .............................19\n   7. Security\
    \ Considerations ........................................21\n   8. Acknowledgements\
    \ ...............................................21\n   9. Informative References\
    \ .........................................21\n   Appendix A.  MPR Routing Property\
    \ .................................23\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   The Optimized Link State Routing Protocol version 1 (OLSRv1)\n\
    \   [RFC3626] is a proactive routing protocol for mobile ad hoc networks\n   (MANETs)\
    \ [RFC2501].  OLSRv1 finds the shortest, defined as minimum\n   number of hops,\
    \ routes from a router to all possible destinations.\n   Using only minimum hop\
    \ routes may result in what are, in practice,\n   inferior routes.  Some examples\
    \ are given in Section 4.  Thus, one of\n   the distinguishing features of the\
    \ Optimized Link State Routing\n   Protocol version 2 (OLSRv2) [RFC7181] is the\
    \ introduction of the\n   ability to select routes using link metrics other than\
    \ the number of\n   hops.\n   During the development of OLSRv2, the working group\
    \ and authors\n   repeatedly discussed how and why some choices were made in the\n\
    \   protocol specification, particularly at the metric integration level.\n  \
    \ Some of the issues may be non-intuitive, and this document is\n   presented\
    \ as a record of the considerations and decisions to provide\n   informational\
    \ discussion about motivation and historic design\n   choices.  This document\
    \ is intended to be useful as a reference if\n   those questions arise again.\n\
    \   Use of the extensible message format [RFC5444] by OLSRv2 has allowed\n   the\
    \ addition, by OLSRv2, of link metric information to the HELLO\n   messages defined\
    \ in the MANET Neighborhood Discovery Protocol (NHDP)\n   [RFC6130] as well as\
    \ inclusion in the Topology Control (TC) messages\n   defined in [RFC7181].\n\
    \   OLSRv2 essentially first determines local link metrics from 1-hop\n   neighbors,\
    \ these being defined by a process outside OLSRv2, then\n   distributes required\
    \ link metric values in HELLO messages and TC\n   messages, and then finally forms\
    \ routes with minimum total link\n   metric.  Using a definition of route metric\
    \ other than number of hops\n   is a natural extension that is commonly used in\
    \ link state protocols.\n   A metric-based route selection process for OLSRv2\
    \ could have been\n   handled as an extension to OLSRv2.  However, were this to\
    \ have been\n   done, OLSRv2 routers that did not implement this extension would\
    \ not\n   recognize any link metric information and would attempt to use\n   minimum\
    \ hop-count routes.  This would have meant that, in effect,\n   routers that did\
    \ implement and routers that did not implement this\n   extension would differ\
    \ over their valuation of links and routes.\n   This would have led to the fundamental\
    \ routing problem of \"looping\".\n   Thus, if metric-based route selection were\
    \ to have been considered\n   only as an extension to OLSRv2, then routers that\
    \ did implement and\n   routers that did not implement this extension would not\
    \ have been\n   able to interoperate.  This would have been a significant limitation\n\
    \   of such an extension.  Link metrics were therefore included as\n   standard\
    \ in OLSRv2.\n   This document discusses the motivation and design rationale behind\n\
    \   how link metrics were included in OLSRv2.  The principal issues\n   involved\
    \ when including link metrics in OLSRv2 were:\n   o  Assigning metrics to links\
    \ involved considering separate metrics\n      for the two directions of a link,\
    \ with the receiving router\n      determining the metric from transmitter to\
    \ receiver.  A metric\n      used by OLSRv2 may be either of:\n      *  A link\
    \ metric, the metric of a specific link from an OLSRv2\n         interface of\
    \ the transmitting router to an OLSRv2 interface of\n         the receiving router.\n\
    \      *  A neighbor metric, the minimum of the link metrics between two\n   \
    \      OLSRv2 routers, in the indicated direction.\n      These metrics are necessarily\
    \ the same when these routers each\n      have a single OLSRv2 interface but may\
    \ differ when either has\n      more.  HELLO messages may include both link metrics\
    \ and neighbor\n      metrics.  TC messages include only neighbor metrics.\n \
    \  o  Metrics as used in OLSRv2 are defined to be dimensionless and\n      additive.\
    \  The assignment of metrics, including their relationship\n      to real parameters\
    \ such as data rate, loss rate, and delay, and\n      the management of the choice\
    \ of metric, is outside the scope of\n      [RFC7181], which simply uses these\
    \ metrics in a consistent manner.\n      Within a single MANET, including all\
    \ components of a temporarily\n      fragmented MANET, a single choice of link\
    \ metric is used.  By use\n      of a registry of metric types (employing extended\
    \ types of a\n      single Address Block TLV type), routers can be configured\
    \ to use\n      only a subset of the available metric types.\n   o  Node metrics\
    \ were not included in OLSRv2.  Node metrics can be\n      implemented by the\
    \ addition of the corresponding value to all\n      incoming link metrics by the\
    \ corresponding router.\n   o  The separation of the two functions performed by\
    \ multipoint relays\n      (MPRs) in OLSRv1, optimized flooding and reduced topology\n\
    \      advertisement for routing, into separate sets of MPRs in OLSRv2\n     \
    \ [RFC7181], denoted \"flooding MPRs\" and \"routing MPRs\".  Flooding\n     \
    \ MPRs can be calculated as in [RFC3626], but the use of link\n      metrics in\
    \ OLSRv2 can improve the MPR selection.  Routing MPRs\n      need a metric-aware\
    \ selection algorithm.  The selection of routing\n      MPRs guarantees the use\
    \ of minimum distance routes using the\n      chosen metric, while using only\
    \ symmetric 2-hop neighborhood\n      information from HELLO messages and routing\
    \ MPR selector\n      information from TC messages.\n   o  The protocol Information\
    \ Bases defined in OLSRv2 include required\n      metric values.  This has included\
    \ additions to the protocol\n      Information Bases defined in NHDP [RFC6130]\
    \ when used by OLSRv2.\n"
- title: 2.  Terminology
  contents:
  - "2.  Terminology\n   All terms introduced in [RFC5444], including \"message\"\
    \ and \"TLV\"\n   (type-length-value), are to be interpreted as described there.\n\
    \   All terms introduced in [RFC6130], including \"MANET interface\",\n   \"HELLO\
    \ message\", \"heard\", \"link\", \"symmetric link\", \"1-hop neighbor\",\n  \
    \ \"symmetric 1-hop neighbor\", \"2-hop neighbor\", \"symmetric 2-hop\n   neighbor\"\
    , \"symmetric 2-hop neighborhood\", and the symbolic constants\n   SYMMETRIC and\
    \ HEARD, are to be interpreted as described there.\n   All terms introduced in\
    \ [RFC7181], including \"router\", \"OLSRv2\n   interface\", \"willingness\",\
    \ \"multipoint relay (MPR)\", \"MPR selector\",\n   \"MPR flooding\", and the\
    \ TLV type LINK_METRIC, are to be interpreted\n   as described there.\n"
- title: 3.  Applicability
  contents:
  - "3.  Applicability\n   The objective of this document is to retain the design\
    \ considerations\n   behind how link metrics were included in [RFC7181].  This\
    \ document\n   does not prescribe any behavior but explains some aspects of the\n\
    \   operation of OLSRv2.\n"
- title: 4.  Motivational Scenarios
  contents:
  - "4.  Motivational Scenarios\n   The basic situation that suggests the desirability\
    \ of use of routes\n   other than minimum hop routes is shown in Figure 1.\n \
    \                           A ----- X ----- B\n                             \\\
    \             /\n                              \\           /\n              \
    \                 Y ------- Z\n                                 Figure 1\n   The\
    \ minimum hop route from A to B is via X.  However, if the links A\n   to X and\
    \ X to B are poor (e.g., have low data rate or are unreliable)\n   but the links\
    \ A to Y, Y to Z, and Z to B are better (e.g., have\n   reliable high data rate),\
    \ then the route A to B via Y and Z may be\n   preferred to that via X.\n   There\
    \ are other situations where the use of some links should be\n   discouraged,\
    \ even if the avoidance of them does not show immediately\n   obvious benefits\
    \ to users.  Consider a network with many short-range\n   links and a few long-range\
    \ links.  Use of minimum hop routes will\n   immediately lead to heavy use of\
    \ the long-range links.  This will be\n   particularly undesirable if those links\
    \ achieve their longer range\n   through reduced data rate or through being less\
    \ reliable.  However,\n   even if the long-range links have the same characteristics\
    \ as the\n   short-range links, it may be better to reserve usage of the long-\n\
    \   range links for when this usage is particularly valuable -- for\n   example,\
    \ when the use of one long-range link saves several short-\n   range links, rather\
    \ than the single link saving that is needed for a\n   minimum hop route.\n  \
    \ A related case is that of a privileged relay.  An example is an\n   aerial router\
    \ in an otherwise ground-based network.  The aerial\n   router may have a link\
    \ to many, or even all, other routers.  That\n   would lead to all routers attempting\
    \ to send all their traffic (other\n   than to symmetric 1-hop neighbors and some\
    \ symmetric 2-hop neighbors)\n   via the aerial router.  It may, however, be important\
    \ to reserve that\n   capacity for cases where the aerial router is actually essential,\n\
    \   such as if the ground-based portion of the network is not connected.\n   Link\
    \ metrics provide a possible solution to these scenarios.  For\n   example, in\
    \ Figure 1, the route A to Y to Z to B could be preferred\n   to A to X to B by\
    \ making the metrics on the former path 1 and those\n   on the latter path 2.\
    \  The aerial privileged relay could be used only\n   when necessary by giving\
    \ its links maximal metric values, with much\n   smaller other metric values or,\
    \ if the aerial link is to be preferred\n   to N ground links, by giving the ground\
    \ links metric values of 1\n   while making the sum of the aerial node uplink\
    \ and downlink metrics\n   equal to N.\n   Other cases may involve attempts to\
    \ avoid areas of congestion,\n   attempts to route around insecure routers, and\
    \ attempts by routers to\n   discourage being used as relays due to, for example,\
    \ limited battery\n   power.  OLSRv2 does have another mechanism to aid in this:\
    \ a router's\n   willingness to act as an MPR.  However, there are cases where\
    \ that\n   cannot help but where use of non-minimum hop routes could.\n   Similarly,\
    \ note that OLSRv2's optional use of link quality (through\n   its use of [RFC6130])\
    \ is not a solution to these problems.  Use of\n   link quality as specified in\
    \ [RFC6130] allows a router to decline to\n   use a link, not only on its own,\
    \ but on all routers' behalf.  It does\n   not, for example, allow the use of\
    \ a link otherwise determined to be\n   too low quality to be generally useful\
    \ as part of a route where no\n   better links exist.  These mechanisms (link\
    \ quality and link metrics)\n   solve distinctly different problems.\n   It should\
    \ also be noted that the loop-free property of OLSRv2 applies\n   strictly only\
    \ in the static state.  When the network topology is\n   changing and when messages\
    \ can be lost, it is possible for transient\n   loops to form.  However, with\
    \ update rates appropriate to the rate of\n   topology change, such loops will\
    \ be sufficiently rare.  Changing link\n   metrics is a form of network topology\
    \ change and should be limited to\n   a rate slower than the message information\
    \ update rate (defined by\n   the parameters HELLO_INTERVAL, HELLO_MIN_INTERVAL,\
    \ REFRESH_INTERVAL,\n   TC_INTERVAL, and TC_MIN_INTERVAL).\n"
- title: 5.  Link Metrics
  contents:
  - "5.  Link Metrics\n   This section describes the required and selected properties\
    \ of the\n   link metrics used in OLSRv2, followed by implementation details\n\
    \   achieving those properties.\n"
- title: 5.1.  Link Metric Properties
  contents:
  - "5.1.  Link Metric Properties\n   Link metrics in OLSRv2 are:\n   o  Dimensionless.\
    \  While they may, directly or indirectly, correspond\n      to specific physical\
    \ information (such as delay, loss rate, or\n      data rate), this knowledge\
    \ is not used by OLSRv2.  Instead,\n      generating the metric value is the responsibility\
    \ of a mechanism\n      external to OLSRv2.\n   o  Additive, so that the metric\
    \ of a route is the sum of the metrics\n      of the links forming that route.\
    \  Note that this requires a metric\n      where a low value of a link metric\
    \ indicates a \"good\" link and a\n      high value of a link metric indicates\
    \ a \"bad\" link, and the former\n      will be preferred to the latter.\n   o\
    \  Directional, the metric from router A to router B need not be the\n      same\
    \ as the metric from router B to router A, even when using the\n      same OLSRv2\
    \ interfaces.  At router A, a link metric from router B\n      to router A is\
    \ referred to as an incoming link metric, while a\n      link metric from router\
    \ A to router B is referred to as an\n      outgoing link metric.  (These are,\
    \ of course, reversed at router\n      B.)\n   o  Specific to a pair of OLSRv2\
    \ interfaces, so that if there is more\n      than one link from router A to router\
    \ B, each has its own link\n      metric in that direction.  There is also an\
    \ overall metric, a\n      \"neighbor metric\", from router A to router B (its\
    \ 1-hop neighbor).\n      This is the minimum value of the link metrics from router\
    \ A to\n      router B, considering symmetric links only; it is undefined if\n\
    \      there are no such symmetric links.  A neighbor metric from one\n      router\
    \ to another is always equal to a link metric in the same\n      direction between\
    \ OLSRv2 interfaces of those routers.  When\n      referring to a specific OLSRv2\
    \ interface (for example, in a Link\n      Tuple or a HELLO message sent on that\
    \ OLSRv2 interface), a link\n      metric always refers to a link on that OLSRv2\
    \ interface to or from\n      the indicated 1-hop neighbor OLSRv2 interface, while\
    \ a neighbor\n      metric may be equal to a link metric to and/or from another\
    \ OLSRv2\n      interface.\n"
- title: 5.2.  Link Metric Types
  contents:
  - "5.2.  Link Metric Types\n   There are various physical characteristics that may\
    \ be used to define\n   a link metric.  Some examples, which also illustrate some\n\
    \   characteristics of metrics that result, are:\n   o  Delay is a straightforward\
    \ metric; as it is naturally additive,\n      the delay of a multi-link route\
    \ is the sum of the delays of the\n      links.  This does not directly take into\
    \ account delays due to\n      routers (such as due to router queues or transition\
    \ of packets\n      between router interfaces) rather than links, but these delays\
    \ can\n      be divided among incoming and outgoing links.\n   o  Probability\
    \ of loss on a link is, as long as probabilities of loss\n      are small and\
    \ independent, approximately additive.  (A slightly\n      more accurate approach\
    \ is using a negatively scaled logarithm of\n      the probability of not losing\
    \ a packet.)  If losses are not\n      independent, then this will be pessimistic.\n\
    \   o  Data rates are not additive.  They even have the wrong\n      characteristic\
    \ of being good when high and bad when low; thus, a\n      mapping that inverts\
    \ the ordering must be applied.  Such a mapping\n      can, at best, only produce\
    \ a metric that is acceptable to treat as\n      additive.  Consider, for example,\
    \ a preference for a route that\n      maximizes the minimum data rate link on\
    \ the route and then prefers\n      a route with the fewest links of each data\
    \ rate from the lowest.\n      If links may be of three discrete data rates, \"\
    high\", \"medium\",\n      and \"low\", then this preference can be achieved,\
    \ on the assumption\n      that no route will have more than 10 links, with metric\
    \ values of\n      1, 10, and 100 for the three data rates.\n      If routes can\
    \ have more than 10 links, the range of metrics must\n      be increased; this\
    \ was one reason for a preference for a wide\n      \"dynamic range\" of link\
    \ metric values.  Depending on the ratios of\n      the numerical values of the\
    \ three data rates, the same effect may\n      be achieved by using a scaling\
    \ of an inverse power of the\n      numerical values of the data rates.  For example,\
    \ if the three\n      data rates were 2, 5, and 10 Mbit/s, then a possible mapping\
    \ would\n      be the fourth power of 10 Mbit/s divided by the data rate, giving\n\
    \      metric values of 625, 16, and 1 (good for up to 16 links in a\n      route).\
    \  This mapping can be extended to a system with more data\n      rate values,\
    \ for example, giving a 4 Mbit/s data rate a metric\n      value of about 39.\
    \  This may lose the capability to produce an\n      absolutely maximal minimum\
    \ data rate route but will usually\n      produce either that, or something close\
    \ (and at times maybe\n      better, is a route of three 5 Mbit/s links really\
    \ better than one\n      of a single 4 Mbit/s link?).  Specific metrics will need\
    \ to define\n      the mapping.\n   There are also many other possible metrics,\
    \ including using physical-\n   layer information (such as signal-to-noise ratio\
    \ and error-control\n   statistics) and information such as packet-queuing statistics.\n\
    \   In a well-designed network, all routers will use the same metric\n   type.\
    \  It will not produce good routes if, for example, some link\n   metrics are\
    \ based on data rate and some on path loss (except to the\n   extent that these\
    \ may be correlated).  How to achieve this is an\n   administrative matter, outside\
    \ the scope of OLSRv2.  In fact, even\n   the actual physical meanings of the\
    \ metrics is outside the scope of\n   OLSRv2.  This is because new metrics may\
    \ be added in the future, for\n   example, as data rates increase, and may be\
    \ based on new, possibly\n   non-physical, considerations, for example, financial\
    \ cost.  Each such\n   type will have a metric type number.  Initially, a single\
    \ link metric\n   type zero is defined as indicating a dimensionless metric with\
    \ no\n   predefined physical meaning.\n   An OLSRv2 router is instructed which\
    \ single link metric type to use\n   and recognize, without knowing whether it\
    \ represents delay,\n   probability of loss, data rate, cost, or any other quantity.\
    \  This\n   recognized link metric type number is a router parameter and subject\n\
    \   to change in case of reconfiguration or possibly the use of a\n   protocol\
    \ (outside the scope of OLSRv2) permitting a process of link\n   metric type agreement\
    \ between routers.\n   The use of link metric type numbers also suggests the possibility\
    \ of\n   use of multiple link metric types and multiple network topologies.\n\
    \   This is a possible future extension to OLSRv2.  To allow for that\n   future\
    \ possibility, the sending of more than one metric of different\n   physical types,\
    \ which should otherwise not be done for reasons of\n   efficiency, is not prohibited,\
    \ but types other than that configured\n   will be ignored.\n   The following\
    \ three sections assume a chosen single link metric type,\n   of unspecified physical\
    \ nature.\n"
- title: 5.3.  Directional Link Metrics
  contents:
  - "5.3.  Directional Link Metrics\n   OLSRv2 uses only \"symmetric\" (bidirectional)\
    \ links, which may carry\n   traffic in either direction.  A key decision was\
    \ whether these links\n   should each be assigned a single metric, used in both\
    \ directions, or\n   a metric in each direction, noting that:\n   o  Links can\
    \ have different characteristics in each direction.  Use\n      of directional\
    \ link metrics recognizes this.\n   o  In many (possibly most) cases, the two\
    \ ends of a link will\n      naturally form different views as to what the link\
    \ metric should\n      be.  To use a single link metric requires a coordination\
    \ between\n      the two that can be avoided if using directional metrics.  Note\n\
    \      that if using a single metric, it would be essential that the two\n   \
    \   ends agree as to its value; otherwise, it is possible for looping\n      to\
    \ occur.  This problem does not occur for directional metrics.\n   Based on these\
    \ considerations, directional metrics are used in\n   OLSRv2.  Each router must\
    \ thus be responsible for defining the metric\n   in one direction only.  This\
    \ could have been in either direction,\n   i.e., a router is responsible for either\
    \ incoming or outgoing link\n   metrics, as long as the choice is universal. \
    \ The former (incoming)\n   case is used in OLSRv2 because, in general, receiving\
    \ routers have\n   more information available to determine link metrics (for example,\n\
    \   received signal strength, interference levels, and error-control\n   coding\
    \ statistics).\n   Note that, using directional metrics, if router A defines the\
    \ metric\n   of the link from router B to router A, then router B must use router\n\
    \   A's definition of that metric on that link in that direction.\n   (Router\
    \ B could, if appropriate, use a bad mismatch between\n   directional metrics\
    \ as a reason to discontinue use of this link,\n   using the link quality mechanism\
    \ defined in [RFC6130]; note that this\n   is a distinct mechanism from the use\
    \ of link metrics.)\n"
- title: 5.4.  Reporting Link and Neighbor Metrics
  contents:
  - "5.4.  Reporting Link and Neighbor Metrics\n   Links, and hence link metrics,\
    \ are reported in HELLO messages.  A\n   router must report incoming link metrics\
    \ in its HELLO messages in\n   order for these link metrics to be available at\
    \ the other end of the\n   link.  This means that, for a symmetric link, both\
    \ ends of the link\n   will know both of the incoming and outgoing link metrics.\n\
    \   As well as advertising incoming link metrics, HELLO messages also\n   advertise\
    \ incoming neighbor metrics.  These are used for routing MPR\n   selection (see\
    \ Section 6.2), which requires use of the lowest metric\n   link between two routers\
    \ when more than one link exists.  This\n   neighbor metric may be using another\
    \ OLSRv2 interface, and hence, the\n   link metric alone is insufficient.\n  \
    \ Metrics are also reported in TC messages.  It can be shown that these\n   need\
    \ to be outgoing metrics:\n   o  Router A must be responsible for advertising\
    \ a metric from router\n      A to router B in TC messages.  This can be seen\
    \ by considering a\n      route connecting single OLSRv2 interface routers P to\
    \ Q to R to S.\n      Router P receives its only information about the link from\
    \ R to S\n      in the TC messages transmitted by router R, which is an MPR of\n\
    \      router S (assuming that only MPR selectors are reported in TC\n      messages).\
    \  Router S may not even transmit TC messages (if no\n      routers have selected\
    \ it as an MPR and it has no attached networks\n      to report).  So any information\
    \ about the metric of the link from\n      R to S must also be included in the\
    \ TC messages sent by router R;\n      hence, router R is responsible for reporting\
    \ the metric for the\n      link from R to S.\n   o  In a more general case, where\
    \ there may be more than one link from\n      R to S, the TC message must, so\
    \ that minimum metric routes can be\n      constructed (e.g., by router P), report\
    \ the minimum of these\n      outgoing link metrics, i.e., the outgoing neighbor\
    \ metric from R\n      to S.\n   In this example, router P also receives information\
    \ about the\n   existence of a link between Q and R in the HELLO messages sent\
    \ by\n   router Q.  Without the use of metrics, this link could be used by\n \
    \  OLSRv2 for 2-hop routing to router R, using just HELLO messages sent\n   by\
    \ router Q.  For this property (which accelerates local route\n   formation) to\
    \ be retained (from OLSRv1), router P must receive the\n   metric from Q to R\
    \ in HELLO messages sent by router Q.  This\n   indicates that router Q must be\
    \ responsible for reporting the metric\n   for the outgoing link from Q to R.\
    \  This is in addition to the\n   incoming link metric information that a HELLO\
    \ message must report.\n   Again, in general, this must be the outgoing neighbor\
    \ metric, rather\n   than the outgoing link metric.\n   In addition, Section 6.1\
    \ offers an additional reason for reporting\n   outgoing neighbor metrics in HELLO\
    \ messages, without which metrics\n   can properly affect only routing, not flooding.\n\
    \   Note that there is no need to report an outgoing link metric in a\n   HELLO\
    \ message.  The corresponding 1-hop neighbor knows that value; it\n   specified\
    \ it.  Furthermore, for 2-hop neighborhood use, neighbor\n   metrics are required\
    \ (as these will, in general, not use the same\n   OLSRv2 interface).\n"
- title: 5.5.  Defining Incoming Link Metrics
  contents:
  - "5.5.  Defining Incoming Link Metrics\n   When a router reports a 1-hop neighbor\
    \ in a HELLO message, it may do\n   so for the first time with link status HEARD.\
    \  As the router is\n   responsible for defining and reporting incoming link metrics,\
    \ it must\n   evaluate that metric and attach that link metric to the appropriate\n\
    \   address (which will have link status HEARD) in the next HELLO message\n  \
    \ reporting that address on that OLSRv2 interface.  There will, at this\n   time,\
    \ be no outgoing link metric available to report, but a router\n   must be able\
    \ to immediately decide on an incoming link metric once it\n   has heard a 1-hop\
    \ neighbor on an OLSRv2 interface for the first time.\n   This is because, when\
    \ receiving a HELLO message from this router, the\n   1-hop neighbor seeing its\
    \ own address listed with link status HEARD\n   will (unless the separate link\
    \ quality mechanism indicates otherwise)\n   immediately consider that link to\
    \ be SYMMETRIC, advertise it with\n   that link status in future HELLO messages,\
    \ and use it (for MPR\n   selection and data traffic forwarding).\n   It may,\
    \ depending on the physical nature of the link metric, be too\n   early for an\
    \ ideal decision as to that metric; however, a choice must\n   be made.  The metric\
    \ value may later be refined based on further\n   observation of HELLO messages,\
    \ other message transmissions between\n   the routers, or other observations of\
    \ the environment.  It will\n   probably be best to over-estimate the metric if\
    \ initially uncertain\n   as to its value, to discourage, rather than over-encourage,\
    \ its use.\n   If no information other than the receipt of the HELLO message is\n\
    \   available, then a conservative maximum link metric value, denoted\n   MAXIMUM_METRIC\
    \ in [RFC7181], should be used.\n"
- title: 5.6.  Link Metric Values
  contents:
  - "5.6.  Link Metric Values\n   Link metric values are recorded in LINK_METRIC TLVs,\
    \ defined in\n   [RFC7181], using a compressed (lossy) representation that occupies\
    \ 12\n   bits.  The use of 12 bits is convenient because, when combined with 4\n\
    \   flag bits of additional information, described below, this results in\n  \
    \ a 2-octet value field.  However, the use of 12 bits, and thus the\n   availability\
    \ of 4 flag bits, was a consequence of a design to use a\n   modified exponent/mantissa\
    \ form with the following characteristics:\n   o  The values represented are to\
    \ be positive integers starting 1, 2,\n      ...\n   o  The maximum value represented\
    \ should be close to, but less than\n      2^24 (^ denotes exponentiation in this\
    \ section).  This is so that\n      with a route limited to no more than 255 hops,\
    \ the maximum route\n      metric is less than 2^32, i.e., can be stored in 32\
    \ bits.  (The\n      link metric value can be stored in 24 bits.)\n   A representation\
    \ that is modified from an exponent/mantissa form with\n   e bits of exponent\
    \ and m bits of mantissa and that has the first of\n   these properties is one\
    \ that starts at 1, then is incremented by 1 up\n   to 2^m, then has a further\
    \ 2^m increments by 2, then a further 2^m\n   increments by 4, and so on for 2^e\
    \ sets of increments.  This means\n   that the represented value is never in error\
    \ by more than a half (if\n   rounding) or one (if truncating) part in 2^m, usually\
    \ less.\n   The position in the increment sequence, from 0 to 2^m-1, is\n   considered\
    \ as a form of mantissa and denoted a.  The increment\n   sequence number, from\
    \ 0 to 2^e-1, is considered as a form of exponent\n   and denoted b.\n   The value\
    \ represented by (b,a) can then be shown to be equal to\n   (2^m+a+1)2^b-2^m.\
    \  To verify this, note that:\n   o  With fixed b, the difference between two\
    \ values with consecutive\n      values of a is 2^b, as expected.\n   o  The value\
    \ represented by (b,2^m-1) is (2^m+2^m)2^b-2^m.  The value\n      represented\
    \ by (b+1,0) is (2^m+1)(2^(b+1))-2^m.  The difference\n      between these two\
    \ values is 2^(b+1), as expected.\n   The maximum represented value has b = 2^e-1\
    \ and a = 2^m-1 and is\n   (2^m+2^m)(2^(2^e-1))-2^m = 2^(2^e+m)-2^m.  This is\
    \ slightly less than\n   2^(2^e+m).  The required 24-bit limit can be achieved\
    \ if 2^e+m = 24.\n   Of the possible (e,m) pairs that satisfy this equation, the\
    \ pair e =\n   4, m = 8 was selected as most appropriate and is that used by OLSRv2.\n\
    \   It uses the previously indicated e+m = 12 bits.  An algorithm for\n   converting\
    \ from a 24-bit value v to a 12-bit pair (b,a) is given in\n   Section 6.2 of\
    \ [RFC7181].\n   As noted above, the 12-bit representation then shares two octets\
    \ with\n   4 flag bits.  Putting the flag bits first, it is then natural to put\n\
    \   the exponent bits in the last four bits of the first octet and to put\n  \
    \ the mantissa bits in the second octet.  The 12 consecutive bits,\n   using network\
    \ byte order (most significant octet first), then\n   represent 256b+a.  Note\
    \ that the ordering of these 12-bit\n   representation values is the same as the\
    \ ordering of the 24-bit\n   metric values.  In other words, two 12-bit metrics\
    \ fields can be\n   compared for equality/ordering as if they were unsigned integers.\n\
    \   The four flag bits each represent one kind of metric, defined by its\n   direction\
    \ (incoming or outgoing) and whether the metric is a link\n   metric or a neighbor\
    \ metric.  As indicated by the flag bits set, a\n   metric value may be of any\
    \ combination of these four kinds of metric.\n"
- title: 6.  MPRs with Link Metrics
  contents:
  - "6.  MPRs with Link Metrics\n   MPRs are used for two purposes in OLSRv2.  In\
    \ both cases, it is MPR\n   selectors that are actually used, MPR selectors being\
    \ determined from\n   MPRs advertised in HELLO messages.\n   o  Optimized Flooding.\
    \  This uses the MPR selector status of\n      symmetric 1-hop neighbor routers\
    \ from which messages are received\n      in order to determine if these messages\
    \ are to be forwarded.  MPR\n      selector status is recorded in the Neighbor\
    \ Set (defined in\n      [RFC6130] and extended in [RFC7181]) and determined from\
    \ received\n      HELLO messages.\n   o  Routing.  Non-local link information\
    \ is based on information\n      recorded in this router's Topology Information\
    \ Base.  That\n      information is based on received TC messages.  The neighbor\n\
    \      information in these TC messages consists of addresses of the\n      originating\
    \ router's advertised (1-hop) neighbors, as recorded in\n      that router's Neighbor\
    \ Set (defined in [RFC6130] and extended in\n      [RFC7181]).  These advertised\
    \ neighbors include all of the MPR\n      selectors of the originating router.\n\
    \   Metrics interact with these two uses of MPRs differently, as\n   described\
    \ in the following two sections.  This leads to the\n   requirement for two separate\
    \ sets of MPRs for these two uses when\n   using metrics.  The relationship between\
    \ these two sets of MPRs is\n   considered in Section 6.3.\n"
- title: 6.1.  Flooding MPRs
  contents:
  - "6.1.  Flooding MPRs\n   The essential detail of the \"flooding MPR\" selection\
    \ specification is\n   that a router must select a set of MPRs such that a message\n\
    \   transmitted by a router and retransmitted by all its flooding MPRs\n   will\
    \ reach all of the selecting router's symmetric 2-hop neighbors.\n   Flooding\
    \ MPR selection can ignore metrics and produce a solution that\n   meets the required\
    \ specification.  However, that does not mean that\n   metrics cannot be usefully\
    \ considered in selecting flooding MPRs.\n   Consider the network in Figure 2,\
    \ where numbers are metrics of links\n   in the direction away from router A,\
    \ towards router D.\n                                    3\n                 \
    \               A ----- B\n                                |       |\n       \
    \                       1 |       | 1\n                                |     \
    \  |\n                                C ----- D\n                            \
    \        4\n                                 Figure 2\n   Which is the better\
    \ flooding MPR selection by router A: B or C?  If\n   the metric represents probability\
    \ of message loss, then clearly\n   choosing B maximizes the probability of a\
    \ message sent by A reaching\n   D.  This is despite C having a lower metric in\
    \ its connection to A\n   than B does.  (Similar arguments about a preference\
    \ for B can be made\n   if, for example, the metric represents data rate or delay\
    \ rather than\n   probability of loss.)\n   However, neither should only the second\
    \ hop be considered.  If this\n   example is modified to that in Figure 3, where\
    \ the numbers still are\n   metrics of links in the direction away from router\
    \ A, towards router\n   D, then it is possible that, when A is selecting flooding\
    \ MPRs,\n   selecting C is preferable to selecting B.\n                      \
    \              3\n                                A ----- B\n                \
    \                |       |\n                              1 |       | 3\n    \
    \                            |       |\n                                C -----\
    \ D\n                                    4\n                                 Figure\
    \ 3\n   If the metrics represent scaled values of delay or the probability of\n\
    \   loss, then selecting C is clearly better.  This indicates that the\n   sum\
    \ of metrics is an appropriate measure to use to choose between B\n   and C.\n\
    \   However, this is a particularly simple example.  Usually, it is not a\n  \
    \ simple choice between two routers as a flooding MPR, each only adding\n   one\
    \ router coverage.  When considering which router to next add as a\n   flooding\
    \ MPR, a more general process should incorporate the metric to\n   that router\
    \ and the metric from that router to each symmetric 2-hop\n   neighbor as well\
    \ as the number of newly covered symmetric 2-hop\n   neighbors.  Other factors\
    \ may also be included.\n   The required specification for flooding MPR selection\
    \ is in\n   Section 18.4 (also using Section 18.3) of [RFC7181], which may use\n\
    \   the example MPR selection algorithm in Appendix B of [RFC7181].\n   However,\
    \ note that (as in [RFC3626]) each router can make its own\n   independent choice\
    \ of flooding MPRs, and flooding MPR selection\n   algorithm, and still interoperate.\n\
    \   Also note that the references above to the direction of the metrics\n   is\
    \ correct: for flooding, directional metrics outward from a router\n   are appropriate,\
    \ i.e., metrics in the direction of the flooding.\n   This is an additional reason\
    \ for including outward metrics in HELLO\n   messages, as otherwise a metric-aware\
    \ MPR selection for flooding is\n   not possible.  The second-hop metrics are\
    \ outgoing neighbor metrics\n   because the OLSRv2 interface used for a second-hop\
    \ transmission may\n   not be the same as that used for the first-hop reception.\n"
- title: 6.2.  Routing MPRs
  contents:
  - "6.2.  Routing MPRs\n   The essential detail of the \"routing MPR\" selection\
    \ specification is\n   that a router must, per OLSRv2 interface, select a set\
    \ of MPRs such\n   that there is a 2-hop route from each symmetric 2-hop neighbor\
    \ of the\n   selecting router to the selecting router, with the intermediate\n\
    \   router on each such route being a routing MPR of the selecting\n   router.\n\
    \   It is sufficient, when using an additive link metric rather than a\n   hop\
    \ count, to require that these routing MPRs provide not just a\n   2-hop route\
    \ but a minimum distance 2-hop route.  In addition, a\n   router is a symmetric\
    \ 2-hop neighbor even if it is a symmetric 1-hop\n   neighbor, as long as there\
    \ is a 2-hop route from it that is shorter\n   than the 1-hop link from it.  (The\
    \ property that no routes go through\n   routers with willingness WILL_NEVER is\
    \ retained.  Examples below\n   assume that all routers are equally willing, with\
    \ none having\n   willingness WILL_NEVER.)\n   For example, consider the network\
    \ in Figure 4.  Numbers are metrics\n   of links in the direction towards router\
    \ A, away from router D.\n   Router A must pick router B as a routing MPR, whereas\
    \ for minimum hop\n   count routing, it could alternatively pick router C.  Note\
    \ that the\n   use of incoming neighbor metrics in this case follows the same\n\
    \   reasoning as for the directionality of metrics in TC messages, as\n   described\
    \ in Section 5.4.\n                                    2\n                   \
    \             A ----- B\n                                |       |\n         \
    \                     1 |       | 1\n                                |       |\n\
    \                                C ----- D\n                                 \
    \   3\n                                 Figure 4\n   In Figure 5, where numbers\
    \ are metrics of links in the direction\n   towards router A and away from router\
    \ C, router A must pick router B\n   as a routing MPR, but for minimum hop count\
    \ routing, it would not\n   need to pick any MPRs.\n                         \
    \           1\n                                  A - B\n                     \
    \              \\  |\n                                  4 \\ | 2\n           \
    \                          \\|\n                                      C\n    \
    \                             Figure 5\n   In Figure 6, where numbers are metrics\
    \ of links in the direction\n   towards router A and away from routers D and E,\
    \ router A must pick\n   both routers B and C as routing MPRs, but for minimum\
    \ hop count\n   routing, it could pick either.\n                             \
    \  D        E\n                               |\\      /|\n                  \
    \             | \\ 3  / |\n                               |  \\  /  |\n      \
    \                       1 |   \\/   | 1\n                               |   /\\\
    \   |\n                               |  /  \\  |\n                          \
    \     | / 2  \\ |\n                               |/      \\|\n              \
    \                 B        C\n                                \\       |\n   \
    \                              \\     /\n                                3 \\\
    \   / 2\n                                   \\ /\n                           \
    \         A\n                                 Figure 6\n   It is shown in Appendix\
    \ A that selecting routing MPRs according to\n   this definition and advertising\
    \ only such links (plus knowledge of\n   local links from HELLO messages) will\
    \ result in selection of lowest\n   total metric routes, even if all links (advertised\
    \ or not) are\n   considered in the definition of a shortest route.\n   However,\
    \ the definition noted above as sufficient for routing MPR\n   selection is not\
    \ necessary.  For example, consider the network in\n   Figure 7, where numbers\
    \ are metrics of links in the direction towards\n   router A, away from other\
    \ routers; the metrics from B to C and C to B\n   are both assumed to be 2.\n\
    \                                1\n                            A ----- B\n  \
    \                           \\     /\n                            4 \\   / 2\n\
    \                               \\ /\n                                C -----\
    \ D ----- E\n                                    3       5\n                 \
    \                Figure 7\n   Using the above definition, A must pick both B and\
    \ C as routing MPRs,\n   in order to cover the symmetric 2-hop neighbors C and\
    \ D,\n   respectively.  (C is a symmetric 2-hop neighbor because the route\n \
    \  length via B is shorter than the 1-hop link.)\n   However, A only needs to\
    \ pick B as a routing MPR, because the only\n   reason to pick C as a routing\
    \ MPR would be so that C can advertise\n   the link to A for routing -- to be\
    \ used by, for example, E.  However,\n   A knows that no other router should use\
    \ the link C to A in a shortest\n   route because routing via B is shorter.  So,\
    \ if there is no need to\n   advertise the link from C to A, then there is no\
    \ reason for A to\n   select C as a routing MPR.\n   This process of \"thinning\
    \ out\" the routing MPR selection uses only\n   local information from HELLO messages.\
    \  Using any minimum distance\n   algorithm, the router identifies shortest routes,\
    \ whether one, two,\n   or more hops, from all routers in its symmetric 2-hop\
    \ neighborhood.\n   It then selects as MPRs all symmetric 1-hop neighbors that\
    \ are the\n   last router (before the selecting router itself) on any such route.\n\
    \   Where there is more than one shortest distance route from a router,\n   only\
    \ one such route is required.  Alternative routes may be selected\n   so as to\
    \ minimize the number of last routers -- this is the\n   equivalent to the selection\
    \ of a minimal set of MPRs in the non-\n   metric case.\n   Note that this only\
    \ removes routing MPRs whose selection can be\n   directly seen to be unnecessary.\
    \  Consequently, if (as is shown in\n   Appendix A) the first approach creates\
    \ minimum distance routes, then\n   so does this process.\n   The examples in\
    \ Figures 5 and 6 show that use of link metrics may\n   require a router to select\
    \ more routing MPRs than when not using\n   metrics and even require a router\
    \ to select routing MPRs when,\n   without metrics, it would not need any routing\
    \ MPRs.  This may result\n   in more, and larger, messages being generated and\
    \ forwarded more\n   often.  Thus, the use of link metrics is not without cost,\
    \ even\n   excluding the cost of link metric signaling.\n   These examples consider\
    \ only single OLSRv2 interface routers.\n   However, if routers have more than\
    \ one OLSRv2 interface, then the\n   process is unchanged; other than that, if\
    \ there is more than one\n   known metric between two routers (on different OLSRv2\
    \ interfaces),\n   then, considering symmetric links only (as only these are used\
    \ for\n   routing) the smallest link metric, i.e., the neighbor metric, is\n \
    \  used.  There is no need to calculate routing MPRs per OLSRv2\n   interface.\
    \  That requirement results from the consideration of\n   flooding and the need\
    \ to avoid certain \"race\" conditions, which are\n   not relevant to routing,\
    \ only to flooding.\n   The required specification for routing MPR selection is\
    \ in\n   Section 18.5 (also using Section 18.3) of [RFC7181], which may use\n\
    \   the example MPR selection algorithm in Appendix B of [RFC7181].\n   However,\
    \ note that (as in [RFC3626]) each router can make its own\n   independent choice\
    \ of routing MPRs, and routing MPR selection\n   algorithm, and still interoperate.\n"
- title: 6.3.  Relationship between MPR Sets
  contents:
  - "6.3.  Relationship between MPR Sets\n   It would be convenient if the two sets\
    \ of flooding and routing MPRs\n   were the same.  This can be the case if all\
    \ metrics are equal, but in\n   general, for \"good\" sets of MPRs, they are not.\
    \  (A reasonable\n   definition of this is that there is no common minimal set\
    \ of MPRs.)\n   If metrics are asymmetrically valued (the two sets of MPRs use\n\
    \   opposite direction metrics) or routers have multiple OLSRv2\n   interfaces\
    \ (where routing MPRs can ignore this but flooding MPRs\n   cannot), this is particularly\
    \ unlikely.  However, even using a\n   symmetrically valued metric with a single\
    \ OLSRv2 interface on each\n   router, the ideal sets need not be equal, nor is\
    \ one always a subset\n   of the other.  To show this, consider these examples,\
    \ where all\n   lettered routers are assumed equally willing to be MPRs, and numbers\n\
    \   are bidirectional metrics for links.\n   In Figure 8, A does not require any\
    \ flooding MPRs.  However, A must\n   select B as a routing MPR.\n           \
    \                         1\n                                  A - B\n       \
    \                            \\  |\n                                  4 \\ | 2\n\
    \                                     \\|\n                                  \
    \    C\n                                 Figure 8\n   In Figure 9, A must select\
    \ C and D as routing MPRs.  However, A's\n   minimal set of flooding MPRs is just\
    \ B.  In this example, the set of\n   routing MPRs serves as a set of flooding\
    \ MPRs, but a non-minimal one\n   (although one that might be better, depending\
    \ on the relative\n   importance of number of MPRs and flooding link metrics).\n\
    \                                      2\n                                   C\
    \ --- E\n                                  /     /\n                         \
    \      1 /     / 1\n                                /  4  /\n                \
    \               A --- B\n                                \\     \\\n         \
    \                      1 \\     \\ 1\n                                  \\   \
    \  \\\n                                   D --- F\n                          \
    \            2\n                                 Figure 9\n   However, this is\
    \ not always the case.  In Figure 10, A's set of\n   routing MPRs must contain\
    \ B but need not contain C.  A's set of\n   flooding MPRs need not contain B but\
    \ must contain C. (In this case,\n   flooding with A selecting B rather than C\
    \ as a flooding MPR will\n   reach D but in three hops rather than the minimum\
    \ two that MPR\n   flooding guarantees.)\n                                   2\
    \   1\n                                 B - C - D\n                          \
    \       |  /\n                               1 | / 4\n                       \
    \          |/\n                                 A\n                          \
    \       Figure 10\n"
- title: 7.  Security Considerations
  contents:
  - "7.  Security Considerations\n   An attacker can have an adverse impact on an\
    \ OLSRv2 network by\n   creating apparently valid messages that contain incorrect\
    \ link\n   metrics.  This could take the form of influencing the choice of\n \
    \  routes or, in some cases, producing routing loops.  This is a more\n   subtle,\
    \ and likely to be less effective, attack than other forms of\n   invalid message\
    \ injection.  These can add and remove other and more\n   basic forms of network\
    \ information, such as the existence of some\n   routers and links.\n   As such,\
    \ no significantly new security issues arose from the\n   inclusion of metrics\
    \ in OLSRv2.  Defenses to the injection of invalid\n   link metrics are the same\
    \ as to other forms of invalid message\n   injection, as discussed in the Security\
    \ Considerations section of\n   [RFC7181].\n   There are possible uses for link\
    \ metrics in the creation of security\n   countermeasures to prefer the use of\
    \ links that have better security\n   properties, including better availability,\
    \ to those with poorer\n   security properties.  This, however, is beyond the\
    \ scope of both this\n   document and [RFC7181].\n"
- title: 8.  Acknowledgements
  contents:
  - "8.  Acknowledgements\n   The authors would like to gratefully acknowledge the\
    \ following people\n   (listed alphabetically) for intense technical discussions,\
    \ early\n   reviews, and comments on the documents and its components: Brian\n\
    \   Adamson (NRL), Alan Cullen (BAE Systems), Justin Dean (NRL), Ulrich\n   Herberg\
    \ (Fujitsu), Charles Perkins (Huawei), Stan Ratliff (Cisco),\n   and Henning Rogge\
    \ (FGAN).\n   Finally, the authors would like to express their gratitude to (listed\n\
    \   alphabetically) Benoit Claise, Adrian Farrel, Stephen Farrell, and\n   Suresh\
    \ Krishnan for their reviews and comments on the later draft\n   versions of this\
    \ document.\n"
- title: 9.  Informative References
  contents:
  - "9.  Informative References\n   [RFC2501]  Corson, S. and J. Macker, \"Mobile\
    \ Ad hoc Networking\n              (MANET): Routing Protocol Performance Issues\
    \ and\n              Evaluation Considerations\", RFC 2501, January 1999.\n  \
    \ [RFC3626]  Clausen, T. and P. Jacquet, \"Optimized Link State Routing\n    \
    \          Protocol (OLSR)\", RFC 3626, October 2003.\n   [RFC5444]  Clausen,\
    \ T., Dearlove, C., Dean, J., and C. Adjih,\n              \"Generalized Mobile\
    \ Ad Hoc Network (MANET) Packet/Message\n              Format\", RFC 5444, February\
    \ 2009.\n   [RFC6130]  Clausen, T., Dearlove, C., and J. Dean, \"Mobile Ad Hoc\n\
    \              Network (MANET) Neighborhood Discovery Protocol (NHDP)\",\n   \
    \           RFC 6130, April 2011.\n   [RFC7181]  Clausen, T., Dearlove, C., Jacquet,\
    \ P., and U. Herberg,\n              \"The Optimized Link State Routing Protocol\
    \ Version 2\", RFC\n              7181, April 2014.\n"
- title: Appendix A.  MPR Routing Property
  contents:
  - "Appendix A.  MPR Routing Property\n   In order for routers to find and use shortest\
    \ routes in a network\n   while using the minimum reduced topology supported by\
    \ OLSRv2 (that a\n   router only advertises its MPR selectors in TC messages),\
    \ routing MPR\n   selection must result in the property that there are shortest\
    \ routes\n   with all intermediate routers being routing MPRs.\n   This appendix\
    \ uses the following terminology and assumptions:\n   o  The network is a graph\
    \ of nodes connected by arcs, where nodes\n      correspond to routers with willingness\
    \ not equal to WILL_NEVER\n      (except possibly at the ends of routes).  An\
    \ arc corresponds to\n      the set of symmetric links connecting those routers;\
    \ the OLSRv2\n      interfaces used by those links are not relevant.\n   o  Each\
    \ arc has a metric in each direction, being the minimum of the\n      corresponding\
    \ link metrics in that direction, i.e., the\n      corresponding neighbor metric.\
    \  This metric must be positive.\n   o  A sequence of arcs joining two nodes is\
    \ referred to as a path.\n   o  Node A is an MPR of node B if corresponding router\
    \ A is a routing\n      MPR of router B.\n   The required property (of using shortest\
    \ routes with reduced\n   topology) is equivalent to the following property: for\
    \ any pair of\n   distinct nodes X and Z, there is a shortest path from X to Z,\
    \ X - Y1\n   - Y2 - ... - Ym - Z such that Y1 is an MPR of Y2, ..., Ym is an MPR\n\
    \   of Z.  Call such a path a routable path, and call this property the\n   routable\
    \ path property.\n   The required definition for a node X selecting MPRs is that\
    \ for each\n   distinct node Z from which there is a two-arc path, there is a\n\
    \   shorter, or equally short, path that is either Z - Y - X where Y is\n   an\
    \ MPR of X or is the one-arc path Z - X.  Note that the existence of\n   locally\
    \ known, shorter paths that have more than two arcs, which can\n   be used to\
    \ reduce the numbers of MPRs, is not considered here.  (Such\n   reductions are\
    \ only when the remaining MPRs can be seen to retain all\n   necessary shortest\
    \ paths and therefore retain the required property.)\n   Although this appendix\
    \ is concerned with paths with minimum total\n   metric, not number of arcs (hop\
    \ count), it proceeds by induction on\n   the number of arcs in a path.  Although\
    \ it considers minimum metric\n   routes with a bounded number of arcs, it then\
    \ allows that number of\n   arcs to increase so that overall minimum metric paths,\
    \ regardless of\n   the number of arcs, are considered.\n   Specifically, the\
    \ routable path property is a corollary of the\n   property that for all positive\
    \ integers n and all distinct nodes X\n   and Z, if there is any path from X to\
    \ Z of n arcs or fewer, then\n   there is a shortest path, from among those of\
    \ n arcs or fewer, that\n   is a routable path.  This may be called the n-arc\
    \ routable path\n   property.\n   The n-arc routable path property is trivial\
    \ for n = 1 and directly\n   follows from the definition of the MPRs of Z for\
    \ n = 2.\n   Proceeding by induction, assuming the n-arc routable path property\
    \ is\n   true for n = k, consider the case that n = k+1.\n   Suppose that X -\
    \ V1 - V2 - ... - Vk - Z is a shortest k+1 arc path\n   from X to Z.  We construct\
    \ a path that has no more than k+1 arcs, has\n   the same or shorter length (hence\
    \ has the same, shortest, length\n   considering only paths of up to k+1 arcs,\
    \ by assumption), and is a\n   routable path.\n   First, consider whether Vk is\
    \ an MPR of Z.  If it is not, then\n   consider the two-arc path Vk-1 - Vk - Z.\
    \  This can be replaced either\n   by a one-arc path Vk-1 - Z or by a two-arc\
    \ path Vk-1 - Wk - Z, where\n   Wk is an MPR of Z, such that the metric from Vk-1\
    \ to Z by the\n   replacement path is no longer.  In the former case (replacement\
    \ one-\n   arc path), this now produces a path of length k, and the previous\n\
    \   inductive step may be applied.  In the latter case, we have replaced\n   Vk\
    \ by Wk, where Wk is an MPR of Z.  Thus, we need only consider the\n   case that\
    \ Vk is an MPR of Z.\n   We now apply the previous inductive step to the path\
    \ X - V1 - ... -\n   Vk-1 - Vk, replacing it by an equal length path X - W1 -\
    \ ... Wm-1 -\n   Vk, where m <= k, where this path is a routable path.  Then,\
    \ because\n   Vk is an MPR of Z, the path X - W1 - ... - Wm-1 - Vk - Z is a\n\
    \   routable path and demonstrates the n-arc routable path property for n\n  \
    \ = k+1.\n   This thus shows that for any distinct nodes X and Z, there is a\n\
    \   routable path using the MPR-reduced topology from X to Z, i.e., that\n   OLSRv2\
    \ finds minimum length paths (minimum total metric routes).\n"
- title: Authors' Addresses
  contents:
  - "Authors' Addresses\n   Christopher Dearlove\n   BAE Systems Advanced Technology\
    \ Centre\n   West Hanningfield Road\n   Great Baddow, Chelmsford\n   United Kingdom\n\
    \   Phone: +44 1245 242194\n   EMail: chris.dearlove@baesystems.com\n   URI: \
    \  http://www.baesystems.com/\n   Thomas Heide Clausen\n   LIX, Ecole Polytechnique\n\
    \   91128 Palaiseau Cedex\n   France\n   Phone: +33 6 6058 9349\n   EMail: T.Clausen@computer.org\n\
    \   URI:   http://www.thomasclausen.org/\n   Philippe Jacquet\n   Alcatel-Lucent\
    \ Bell Labs\n   Phone: +33 6 7337 1880\n   EMail: philippe.jacquet@alcatel-lucent.com\n"
