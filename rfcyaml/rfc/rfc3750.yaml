- title: __initial_text__
  contents:
  - '              Unmanaged Networks IPv6 Transition Scenarios

    '
- title: Status of this Memo
  contents:
  - "Status of this Memo\n   This memo provides information for the Internet community.\
    \  It does\n   not specify an Internet standard of any kind.  Distribution of\
    \ this\n   memo is unlimited.\n"
- title: Copyright Notice
  contents:
  - "Copyright Notice\n   Copyright (C) The Internet Society (2004).  All Rights Reserved.\n"
- title: Abstract
  contents:
  - "Abstract\n   This document defines the scenarios in which IPv6 transition\n \
    \  mechanisms are to be used in unmanaged networks.  In order to\n   evaluate\
    \ the suitability of these mechanisms, we need to define the\n   scenarios in\
    \ which these mechanisms have to be used.  One specific\n   scope is the \"unmanaged\
    \ network\", which typically corresponds to a\n   home or small office network.\
    \  The scenarios are specific to a single\n   subnet, and are defined in terms\
    \ of IP connectivity supported by the\n   gateway and the Internet Service Provider\
    \ (ISP).  We first examine\n   the generic requirements of four classes of applications:\
    \ local,\n   client, peer to peer and server.  Then, for each scenario, we infer\n\
    \   transition requirements by analyzing the needs for smooth migration\n   of\
    \ applications from IPv4 to IPv6.\n"
- title: Table of Contents
  contents:
  - "Table of Contents\n   1.  Introduction . . . . . . . . . . . . . . . . . . .\
    \ . . . . . .  3\n   2.  Topology . . . . . . . . . . . . . . . . . . . . . .\
    \ . . . . .  3\n   3.  Applications . . . . . . . . . . . . . . . . . . . . .\
    \ . . . .  4\n       3.1.  Local Applications . . . . . . . . . . . . . . . .\
    \ . . .  5\n       3.2.  Client Applications. . . . . . . . . . . . . . . . .\
    \ . .  5\n       3.3.  Peer-to-Peer Applications. . . . . . . . . . . . . . .\
    \ .  5\n       3.4.  Server Applications. . . . . . . . . . . . . . . . . . .\
    \  5\n   4.  Application Requirements of an IPv6 Unmanaged Network. . . . .  6\n\
    \       4.1.  Requirements of Local Applications . . . . . . . . . . .  6\n  \
    \     4.2.  Requirements of Client Applications. . . . . . . . . . .  7\n    \
    \         4.2.1.  Privacy Requirement of Client Applications . . .  7\n      \
    \ 4.3.  Requirements of Peer-to-Peer Applications. . . . . . . .  8\n       4.4.\
    \  Requirements of Server Applications. . . . . . . . . . .  9\n   5.  Stages\
    \ of IPv6 Deployment. . . . . . . . . . . . . . . . . . .  9\n       5.1.  Case\
    \ A, Host Deployment of IPv6 Applications . . . . . . 10\n             5.1.1.\
    \  Application Support in Case A. . . . . . . . . . 10\n             5.1.2.  Addresses\
    \ and Connectivity in Case A . . . . . . 11\n             5.1.3.  Naming Services\
    \ in Case A. . . . . . . . . . . . 12\n       5.2.  Case B, IPv6 Connectivity\
    \ with Provider Support. . . . . 12\n             5.2.1.  Application Support\
    \ in Case B. . . . . . . . . . 12\n             5.2.2.  Addresses and Connectivity\
    \ in Case B . . . . . . 13\n             5.2.3.  Naming Services in Case B. .\
    \ . . . . . . . . . . 14\n       5.3.  Case C, IPv6 Connectivity without Provider\
    \ Support . . . 14\n             5.3.1.  Application Support in Case C. . . .\
    \ . . . . . . 15\n             5.3.2.  Addresses and Connectivity in Case C .\
    \ . . . . . 15\n             5.3.3.  Naming Services in Case C. . . . . . . .\
    \ . . . . 15\n       5.4.  Case D, ISP Stops Providing Native IPv4 Connectivity\
    \ . . 15\n             5.4.1.  Application Support in Case D. . . . . . . . .\
    \ . 16\n             5.4.2.  Addresses and Connectivity in Case D . . . . . .\
    \ 16\n             5.4.3.  Naming Services in Case D. . . . . . . . . . . . 17\n\
    \   6.  Security Considerations. . . . . . . . . . . . . . . . . . . . 17\n  \
    \ 7.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 18\n   8.\
    \  References . . . . . . . . . . . . . . . . . . . . . . . . . . 18\n       8.1.\
    \ Normative References. . . . . . . . . . . . . . . . . . . 18\n       8.2. Informative\
    \ References. . . . . . . . . . . . . . . . . . 18\n   9.  Authors' Addresses\
    \ . . . . . . . . . . . . . . . . . . . . . . 19\n   10. Full Copyright Statement\
    \ . . . . . . . . . . . . . . . . . . . 20\n"
- title: 1.  Introduction
  contents:
  - "1.  Introduction\n   In order to evaluate the suitability of transition mechanisms\
    \ from\n   IPv4 [RFC791] to IPv6 [RFC2460], we need to define the environment\
    \ or\n   scope in which these mechanisms have to be used.  One specific scope\n\
    \   is the \"unmanaged networks\", which typically correspond to home\n   networks\
    \ or small office networks.\n   This document studies the requirement posed by\
    \ various transition\n   scenarios, and is organized in to four main sections.\
    \  Section 2\n   defines the topology that we are considering.  Section 3 presents\
    \ the\n   four classes of applications that we consider for unmanaged networks:\n\
    \   local applications, client applications, peer-to-peer applications,\n   and\
    \ server applications.  Section 4 studies the requirements of these\n   four classes\
    \ of applications.  Section 5 analyses how these\n   requirements translate into\
    \ four configurations that we expect to\n   encounter during IPv6 deployment:\
    \ gateways which do not provide IPv6,\n   dual-stack gateways connected to dual-stack\
    \ ISPs, dual-stack gateways\n   connected to IPv4-only ISPs, and IPv6-capable\
    \ gateways connected to\n   IPv6-only ISPs.  While these four configurations are\
    \ certainly not an\n   exhaustive list of possible configurations, we believe\
    \ that they\n   represent the common cases for unmanaged networks.\n"
- title: 2.  Topology
  contents:
  - "2.  Topology\n   The typical unmanaged network is composed of a single subnet,\n\
    \   connected to the Internet through a single Internet Service Provider\n   (ISP)\
    \ connection.  Several hosts may be connected to the subnet:\n      +------+\n\
    \      | Host +--+\n      +------+  |\n                |\n      +------+  |\n\
    \      | Host +--+                         +--------------\n      +------+  |\
    \                         |\n                :                   +-----+\n   \
    \             :  +---------+      |     |\n                +--+ Gateway +------|\
    \ ISP | Internet\n                :  +---------+      |     |\n              \
    \  :                   +-----+\n      +------+  |                         |\n\
    \      | Host +--+                         +--------------\n      +------+  |\n\
    \                |\n      +------+  |\n      | Host +--+\n      +------+\n   Between\
    \ the subnet and the ISP access link is a gateway, which may or\n   may not perform\
    \ NAT and firewall functions.  When the gateway\n   performs NAT functions [RFC3022],\
    \ it generally allocates private IPv4\n   addresses to the local hosts [RFC1918].\
    \  A key point of this\n   configuration is that the gateway is typically not\
    \ \"managed\".  In\n   most cases, it is a simple \"appliance\" that incorporates\
    \ some static\n   policies.  There are many cases in which the gateway is procured\
    \ and\n   configured by the ISP.\n   Note that there are also some cases in which\
    \ we find two gateways\n   back to back, one managed by the ISP and the other\
    \ added by the owner\n   of the unmanaged network.  They are not covered in this\
    \ memo because\n   most of them either require some management, or the gateway\
    \ added by\n   the user can function as an L2 switch.\n   The access link between\
    \ the unmanaged network and the ISP might be\n   either a static, permanent connection\
    \ or a dynamic connection such as\n   a dial-up or ISDN line.\n   In a degenerate\
    \ case, an unmanaged network might consist of a single\n   host, directly connected\
    \ to an ISP.\n   There are some cases in which the \"gateway\" is replaced by\
    \ a layer-2\n   bridge.  In such deployments, the hosts have direct access to\
    \ the ISP\n   service.  In order to avoid lengthy developments, we will treat\
    \ these\n   cases as if the gateway was not present, i.e., as if each host was\n\
    \   connected directly to the ISP.\n   Our definition of unmanaged networks explicitly\
    \ exclude networks\n   composed of multiple subnets.  We will readily admit that\
    \ some home\n   networks and some small business networks contain multiple subnets,\n\
    \   but in the current state of the technology, these multiple subnet\n   networks\
    \ are not \"unmanaged\": some competent administrator has to\n   explicitly configure\
    \ the routers.  We will thus concentrate on single\n   subnet networks, where\
    \ no such competent operator is expected.\n"
- title: 3.  Applications
  contents:
  - "3.  Applications\n   Users may use or wish to use the unmanaged network services\
    \ in four\n   types of applications: local, client, servers and peer-to-peers.\n\
    \   These applications may or may not run easily on today's networks\n   (some\
    \ do, some don't).\n"
- title: 3.1.  Local Applications
  contents:
  - "3.1.  Local Applications\n   \"Local applications\" are only meant to involve\
    \ the hosts that are\n   part of the unmanaged network.  Typical examples would\
    \ be file\n   sharing or printer sharing.\n   Local applications work effectively\
    \ in IPv4 unmanaged networks, even\n   when the gateway performs NAT or firewall\
    \ functions.  In fact,\n   firewall services at the gateway are often deemed desirable,\
    \ as they\n   isolate the local applications from interference by Internet users.\n"
- title: 3.2.  Client Applications
  contents:
  - "3.2.  Client Applications\n   \"Client applications\" are those that involve\
    \ a client on the\n   unmanaged network and a server at a remote location.  Typical\n\
    \   examples would be accessing a web server from a client inside the\n   unmanaged\
    \ network, or reading and sending e-mail with the help of a\n   server outside\
    \ the unmanaged network.\n   Client applications tend to work correctly in IPv4\
    \ unmanaged\n   networks, even when the gateway performs NAT or firewall functions:\n\
    \   these translation and firewall functions are designed precisely to\n   enable\
    \ client applications.\n"
- title: 3.3.  Peer-to-Peer Applications
  contents:
  - "3.3.  Peer-to-Peer Applications\n   There are really two kinds of \"peer-to-peer\"\
    \ applications: ones which\n   only involve hosts on the unmanaged network, and\
    \ ones which involve\n   both one or more hosts on the unmanaged network and one\
    \ or more hosts\n   outside the unmanaged network.  We will only consider the\
    \ latter kind\n   of peer-to-peer applications, since the former can be considered\
    \ a\n   subset of the kind of local applications discussed in section 3.1.\n \
    \  Peer-to-peer applications often don't work well in unmanaged IPv4\n   networks.\
    \  Application developers often have to enlist the help of a\n   \"relay server\"\
    , in effect restructuring the peer-to-peer connection\n   into a pair of back-to-back\
    \ client/server connections.\n"
- title: 3.4.  Server Applications
  contents:
  - "3.4.  Server Applications\n   \"Server applications\" involve running a server\
    \ in the unmanaged\n   network for use by other parties outside the network. \
    \ Typical\n   examples would be running a web server or an e-mail server on one\
    \ of\n   the hosts inside the unmanaged network.\n   Deploying these servers in\
    \ most unmanaged IPv4 networks requires some\n   special programming of the NAT\
    \ or firewall [RFC2993], and is more\n   complex when the NAT only publishes a\
    \ small number of global IP\n   addresses and relies on \"port translation\".\
    \  In the common case in\n   which the NAT manages exactly one global IP address\
    \ and relies on\n   \"port translation\", a given external port can only be used\
    \ by one\n   internal server.\n   Deploying servers usually requires providing\
    \ each server with a\n   stable DNS name, and associating a global IPv4 address\
    \ with that\n   name, whether the address be that of the server itself or that\
    \ of the\n   router acting as a firewall or NAT.  Since updating DNS is a\n  \
    \ management task, it falls somewhat outside the scope of an unmanaged\n   network.\
    \  On the other hand, it is also possible to use out-of-band\n   techniques (such\
    \ as cut-and-paste into an instant message system) to\n   pass around the address\
    \ of the target server.\n"
- title: 4.  Application Requirements of an IPv6 Unmanaged Network
  contents:
  - "4.  Application Requirements of an IPv6 Unmanaged Network\n   As we transition\
    \ to IPv6, we must meet the requirements of the\n   various applications, which\
    \ we can summarize in the following way:\n   applications that worked well with\
    \ IPv4 should continue working well\n   during the transition; it should be possible\
    \ to use IPv6 to deploy\n   new applications that are currently hard to deploy\
    \ in IPv4 networks;\n   and the deployment of these IPv6 applications should be\
    \ simple and\n   easy to manage, but the solutions should also be robust and secure.\n\
    \   The application requirements for IPv6 Unmanaged Networks fall into\n   three\
    \ general categories: connectivity, naming, and security.\n   Connectivity issues\
    \ include the provision of IPv6 addresses and their\n   quality: do hosts need\
    \ global addresses, should these addresses be\n   stable or, more precisely, what\
    \ should the expected lifetimes of\n   these addresses be?  Naming issues include\
    \ the management of names\n   for the hosts: do hosts need DNS names, and is inverse\
    \ name\n   resolution  [DNSINADDR] a requirement?  Security issues include\n \
    \  possible restriction to connectivity, privacy concerns and, generally\n   speaking,\
    \ the security of the applications.\n"
- title: 4.1.  Requirements of Local Applications
  contents:
  - "4.1.  Requirements of Local Applications\n   Local applications require local\
    \ connectivity.  They must continue to\n   work even if the unmanaged network\
    \ is isolated from the Internet.\n   Local applications typically use ad hoc naming\
    \ systems.  Many of\n   these systems are proprietary; an example of a standard\
    \ system is the\n   service location protocol (SLP) [RFC2608].\n   The security\
    \ of local applications will usually be enhanced if these\n   applications can\
    \ be effectively isolated from the global Internet.\n"
- title: 4.2.  Requirements of Client Applications
  contents:
  - "4.2.  Requirements of Client Applications\n   Client applications require global\
    \ connectivity.  In an IPv6 network,\n   we would expect the client to use a global\
    \ IPv6 address, which will\n   have to remain stable for the duration of the client-server\
    \ session.\n   Client applications typically use the domain name system to locate\n\
    \   servers.  In an IPv6 network, the client must be able to locate a DNS\n  \
    \ resolver.\n   Many servers try to look up a DNS name associated with the IP\
    \ address\n   of the client.  In an IPv4 network, this IP address will often be\n\
    \   allocated by the Internet service provider to the gateway, and the\n   corresponding\
    \ PTR record will be maintained by the ISP.  In many\n   cases, these PTR records\
    \ are perfunctory, derived in an algorithmic\n   fashion from the IPv4 address;\
    \ the main information that they contain\n   is the domain name of the ISP.  Whether\
    \ or not an equivalent function\n   should be provided in an IPv6 network is unclear.\n"
- title: 4.2.1.  Privacy Requirement of Client Applications
  contents:
  - "4.2.1.  Privacy Requirement of Client Applications\n   It is debatable whether\
    \ the IPv6 networking service should be\n   engineered to enhance the privacy\
    \ of the clients, and specifically\n   whether support for RFC 3041 [RFC3041]\
    \ should be required.  RFC 3041\n   enables hosts to pick IPv6 addresses in which\
    \ the host identifier is\n   randomized; this was designed to make sure that the\
    \ IPv6 addresses\n   and the host identifier cannot be used to track the Internet\n\
    \   connections of a device's owner.\n   Many observe that randomizing the host\
    \ identifier portion of the\n   address is only a half measure.  If the unmanaged\
    \ network address\n   prefix remains constant, the randomization only hides which\
    \ host in\n   the unmanaged network originates a given connection, e.g., the\n\
    \   children's computer versus their parents'.  This would place the\n   privacy\
    \ rating of such connections on a par with that of IPv4\n   connections originating\
    \ from an unmanaged network in which a NAT\n   manages a static IPv4 address;\
    \ in both cases, the IPv4 address or the\n   IPv6 prefix can be used to identify\
    \ the unmanaged network, e.g., the\n   specific home from which the connection\
    \ originated.\n   However, randomization of the host identifier does provide benefits.\n\
    \   First, if some of the hosts in the unmanaged network are mobile, the\n   randomization\
    \ destroys any correlation between the addresses used at\n   various locations:\
    \ the addresses alone could not be used to determine\n   whether a given connection\
    \ originates from the same laptop moving\n   from work to home, or used on the\
    \ road.  Second, the randomization\n   removes any information that could be extracted\
    \ from a hardwired host\n   identifier; for example, it will prevent outsiders\
    \ from correlating a\n   serial number with a specific brand of expensive electronic\n\
    \   equipment, and to use this information for planning marketing\n   campaigns\
    \ or possibly burglary attempts.\n   Randomization of the addresses is not sufficient\
    \ to guarantee\n   privacy.  Usage can be tracked by a variety of other means,\
    \ from\n   application level \"cookies\" to complex techniques involving data\n\
    \   mining and traffic analysis.  However, we should not make a bad\n   situation\
    \ worse.  Other attacks to privacy may be possible, but this\n   is not a reason\
    \ to enable additional tracking through IPv6 addresses.\n   Randomization of the\
    \ host identifier has some costs: the address\n   management in hosts is more\
    \ complex for the hosts, reverse DNS\n   services are harder to provide, and the\
    \ gateway may have to maintain\n   a larger cache of neighbor addresses; however,\
    \ experience from\n   existing implementation shows that these costs are not overwhelming.\n\
    \   Given the limited benefits, it would be unreasonable to require that\n   all\
    \ hosts use privacy addresses; however, given the limited costs, it\n   is reasonable\
    \ to require that all unmanaged networks allow use of\n   privacy addresses by\
    \ those hosts that choose to do so.\n"
- title: 4.3.  Requirements of Peer-to-Peer Applications
  contents:
  - "4.3.  Requirements of Peer-to-Peer Applications\n   Peer-to-peer applications\
    \ require global connectivity.  In an IPv6\n   network, we would expect the peers\
    \ to use a global IPv6 address,\n   which will have to remain stable for the duration\
    \ of the peer-to-peer\n   session.\n   There are multiple aspects to the security\
    \ of peer-to-peer\n   applications, many of which relate to the security of the\
    \ rendezvous\n   system.  If we assume that the peers have been able to safely\n\
    \   exchange their IPv6 addresses, the main security requirement is the\n   capability\
    \ to safely exchange data between the peers without\n   interference by third\
    \ parties.\n   Private conversations by one of the authors with developers of\
    \ peer-\n   to-peer applications suggest that many individuals would be willing\n\
    \   to consider an \"IPv6-only\" model if they can get two guarantees:\n   1)\
    \ That there is no regression from IPv4, i.e., that all customers\n      who could\
    \ participate in a peer-to-peer application using IPv4 can\n      also be reached\
    \ by IPv6.\n   2) That IPv6 provides a solution for at least some of their hard\n\
    \      problems, e.g., enabling peers located behind an IPv4 NAT to\n      participate\
    \ in a peer-to-peer application.\n   Requiring IPv6 connectivity for a popular\
    \ peer-to-peer application\n   could create what economists refer to as a \"network\
    \ effect\", which in\n   turn could significantly speed up the deployment of IPv6.\n"
- title: 4.4.  Requirements of Server Applications
  contents:
  - "4.4.  Requirements of Server Applications\n   Server applications require global\
    \ connectivity, which in an IPv6\n   network implies global addresses.  In an\
    \ IPv4 network utilizing a\n   NAT, for each service provided by a server, the\
    \ NAT has to be\n   configured to forward packets sent to that service to the\
    \ server that\n   offers the service.\n   Server applications normally rely on\
    \ the publication of the server's\n   address in the DNS.  This, in turn, requires\
    \ that the server be\n   provisioned with a \"global DNS name\".\n   The DNS entries\
    \ for the server will have to be updated, preferably in\n   real time, if the\
    \ server's address changes.  In practice, updating\n   the DNS can be slow, which\
    \ implies that server applications will have\n   a better chance of being deployed\
    \ if the IPv6 addresses remain\n   stable.\n   The security of server applications\
    \ depends mostly on the correctness\n   of the server, and also on the absence\
    \ of collateral effects: many\n   incidents occur when the opening of a server\
    \ on the Internet\n   inadvertently enables remote access to some other services\
    \ on the\n   same host.\n"
- title: 5.  Stages of IPv6 Deployment
  contents:
  - "5.  Stages of IPv6 Deployment\n   We expect the deployment of IPv6 to proceed\
    \ from an initial state in\n   which there is little or no deployment, to a final\
    \ stage in which we\n   might retire the IPv4 infrastructure.  We expect this\
    \ process to\n   stretch over many years; we also expect it to not be synchronized,\
    \ as\n   different parties involved will deploy IPv6 at different paces.\n   In\
    \ order to get some clarity, we distinguish three entities involved\n   in the\
    \ transition of an unmanaged network: the ISP (possibly\n   including ISP consumer\
    \ premise equipment (CPE)), the home gateway,\n   and the hosts (computers and\
    \ appliances).  Each can support IPv4-\n   only, both IPv4 and IPv6, or IPv6-only.\
    \  That gives us 27\n   possibilities.  We describe the most important cases.\
    \  We will assume\n   that in all cases the hosts are a combination of IPv4-only,\
    \ dual\n   stack, and (perhaps) IPv6-only hosts.\n   The cases we will consider\
    \ are:\n   A) a gateway that does not provide IPv6 at all;\n   B) a dual-stack\
    \ gateway connected to a dual stack ISP;\n   C) a dual stack gateway connected\
    \ to an IPV4-only ISP; and\n   D) a gateway connected to an IPv6-only ISP\n  \
    \ In most of these cases, we will assume that the gateway includes a\n   NAT:\
    \ we realize that this is not always the case, but we submit that\n   it is common\
    \ enough that we have to deal with it; furthermore, we\n   believe that the non-NAT\
    \ variants of these cases map fairly closely\n   to this same set of cases.  In\
    \ fact, we can consider three non-NAT\n   variants: directly connected host; gateway\
    \ acting as a bridge; and\n   gateway acting as a non-NAT IP router.\n   The cases\
    \ of directly connected hosts are, in effect, variants of\n   cases B, C, and\
    \ D, in which the host can use all solutions available\n   to gateways: case B\
    \ if the ISP is dual stack, case C if the ISP only\n   provides IPv4 connectivity,\
    \ and case D if the ISP only provides IPv6\n   connectivity.\n   In the cases\
    \ where the gateway is a bridge, the hosts are, in effect,\n   directly connected\
    \ to the ISP, and for all practical matter, behave\n   as directly connected hosts.\n\
    \   The case where the gateway is an IP router but not a NAT will be\n   treated\
    \ as small variants in the analysis of case A, B, C, and D.\n"
- title: 5.1.  Case A, Host Deployment of IPv6 Applications
  contents:
  - "5.1.  Case A, Host Deployment of IPv6 Applications\n   In this case, the gateway\
    \ doesn't provide IPv6; the ISP may or may\n   not provide IPv6, but this is not\
    \ relevant since the non-upgraded\n   gateway would prevent the hosts from using\
    \ the ISP service.  Some\n   hosts will try to get IPv6 connectivity in order\
    \ to run applications\n   that require IPv6, or work better with IPv6.  The hosts,\
    \ in this\n   case, will have to handle the IPv6 transition mechanisms on their\n\
    \   own.\n   There are two variations of this case, depending on the type of\n\
    \   service implemented by the gateway.  In many cases, the gateway is a\n   direct\
    \ obstacle to the deployment of IPv6, but a gateway which is\n   some form of\
    \ bridge-mode CPE or which is a plain (neither filtering\n   nor NAT) router does\
    \ not really fall into this category.\n"
- title: 5.1.1.  Application Support in Case A
  contents:
  - "5.1.1.  Application Support in Case A\n   The focus of Case A is to enable communication\
    \ between a host on the\n   unmanaged network and some IPv6-only hosts outside\
    \ of the network.\n   The primary focus in the immediate future, i.e., for the\
    \ early\n   adopters of IPv6, will be peer-to-peer applications.  However, as\n\
    \   IPv6 deployment progresses, we will likely find a situation where\n   some\
    \ networks have IPv6-only services deployed, at which point we\n   would like\
    \ case A client applications to be able to access those\n   services.\n   Local\
    \ applications are not a primary focus of Case A.  At this stage,\n   we expect\
    \ all clients in the unmanaged network to have either IPv4\n   only or dual stack\
    \ support.  Local applications can continue working\n   using IPv4.\n   Server\
    \ applications are also not a primary focus of Case A.  Server\n   applications\
    \ require DNS support, which is difficult to engineer for\n   clients located\
    \ behind a NAT, which is likely to be present in this\n   case.  Besides, server\
    \ applications presently cater mostly to IPv4\n   clients; putting up an IPv6-only\
    \ server is not very attractive.\n   In contrast, peer-to-peer applications are\
    \ probably both attractive\n   and easy to deploy: they are deployed in a coordinated\
    \ fashion as\n   part of a peer-to-peer network, which means that hosts can all\n\
    \   receive some form of an IPv6 upgrade; they often provide their own\n   naming\
    \ infrastructure, in which case they are not dependent on DNS\n   services.\n"
- title: 5.1.2.  Addresses and Connectivity in Case A
  contents:
  - "5.1.2.  Addresses and Connectivity in Case A\n   We saw in 5.1.1 that the likely\
    \ motivation for deployment of IPv6\n   connectivity in hosts in case A is a desire\
    \ to use peer-to-peer and\n   client IPv6 applications.  These applications require\
    \ that all\n   participating nodes get some form of IPv6 connectivity, i.e., at\n\
    \   least one globally reachable IPv6 address.\n   If the local gateway provides\
    \ global IPv4 addresses to the local\n   hosts, then these hosts can individually\
    \ exercise the mechanisms\n   described in case C, \"IPv6 connectivity without\
    \ provider support.\"\n   If the local gateway implements a NAT function, another\
    \ type of\n   mechanism is needed.  The mechanism to provide connectivity to peers\n\
    \   behind NAT should be easy to deploy, and light weight; it will have\n   to\
    \ involve tunneling over a protocol that can easily traverse NAT,\n   either TCP\
    \ or preferably UDP, as tunneling over TCP can result in\n   poor performance\
    \ in cases of time-outs and retransmissions.  If\n   servers are needed, these\
    \ servers will, in practice, have to be\n   deployed as part of the \"support\
    \ infrastructure\" for the peer-to-peer\n   network or for an IPv6-based service;\
    \ economic reality implies that\n   the cost of running these servers should be\
    \ as low as possible.\n"
- title: 5.1.3.  Naming Services in Case A
  contents:
  - "5.1.3.  Naming Services in Case A\n   At this phase of IPv6 deployment, hosts\
    \ in the unmanaged domain have\n   access to DNS services over IPv4 through the\
    \ existing gateway.  DNS\n   resolvers are supposed to serve AAAA records, even\
    \ if they only\n   implement IPv4; the local hosts should thus be able to obtain\
    \ the\n   IPv6 addresses of IPv6-only servers.\n   Reverse lookup is difficult\
    \ to provide for hosts on the unmanaged\n   network if the gateway is not upgraded.\
    \  This is a potential issue\n   for client applications.  Some servers require\
    \ a reverse lookup as\n   part of accepting a client's connection, and may require\
    \ that the\n   direct lookup of the corresponding name matches the IPv6 address\
    \ of\n   the client.  There is thus a requirement to provide either a reverse\n\
    \   lookup solution, or to make sure that IPv6 servers do not require\n   reverse\
    \ lookup.\n"
- title: 5.2.  Case B, IPv6 Connectivity with Provider Support
  contents:
  - "5.2.  Case B, IPv6 Connectivity with Provider Support\n   In this case, the ISP\
    \ and gateway are both dual stack.  The gateway\n   can use native IPv6 connectivity\
    \ to the ISP and can use an IPv6\n   prefix allocated by the ISP.\n"
- title: 5.2.1.  Application Support in Case B
  contents:
  - "5.2.1.  Application Support in Case B\n   If the ISP and the gateway are dual-stack,\
    \ client applications,\n   peer-to-peer applications, and server applications\
    \ can all be enabled\n   easily on the unmanaged network.\n   We expect the unmanaged\
    \ network to include three kinds of hosts:\n   IPv4 only, IPv6-only, and dual\
    \ stack.  Obviously, dual stack hosts\n   can interact easily with either IPv4\
    \ only hosts or IPv6-only hosts,\n   but an IPv4 only host and an IPv6-only host\
    \ cannot communicate\n   without a third party performing some kind of translation\
    \ service.\n   Our analysis concludes that unmanaged networks should not have\
    \ to\n   provide such translation services.\n   The argument for providing translation\
    \ services is that their\n   availability would accelerate the deployment of IPv6-only\
    \ devices,\n   and thus the transition to IPv6.  This is, however, a dubious\n\
    \   argument since it can also be argued that the availability of these\n   translation\
    \ services will reduce the pressure to provide IPv6 at all,\n   and to just continue\
    \ fielding IPv4-only devices.  The remaining\n   pressure to provide IPv6 connectivity\
    \ would just be the difference in\n   \"quality of service\" between a translated\
    \ exchange and a native\n   interconnect.\n   The argument against translation\
    \ service is the difficulty of\n   providing these services for all applications,\
    \ compared to the\n   relative ease of installing dual stack solutions in an unmanaged\n\
    \   network.  Translation services can be provided either by application\n   relays,\
    \ such as HTTP proxies, or by network level services, such as\n   NAT-PT [RFC2766].\
    \  Application relays pose several operational\n   problems: first, one must develop\
    \ relays for all applications;\n   second, one must develop a management infrastructure\
    \ to provision the\n   host with the addresses of the relays; in addition, the\
    \ application\n   may have to be modified if one wants to use the relay selectively,\n\
    \   e.g., only when direct connection is not available.  Network level\n   translation\
    \ poses similar problems: in practice, network level\n   actions must be complemented\
    \ by \"application layer gateways\" that\n   will rewrite references to IP addresses\
    \ in the protocol, and while\n   these relays are not necessary for every application,\
    \ they are\n   necessary for enough applications to make any sort of generalized\n\
    \   translation quite problematic; hosts may need to be parameterized to\n   use\
    \ the translation service, and designing the right algorithm to\n   decide when\
    \ to translate DNS requests has proven very difficult.\n   Not assuming translation\
    \ services in the network appears to be both\n   more practical and more robust.\
    \  If the market requirement for a new\n   device requires that it interact with\
    \ both IPv4 and IPv6 hosts, we\n   may expect the manufacturers of these devices\
    \ to program them with a\n   dual stack capability; in particular, we expect general\
    \ purpose\n   systems, such as personal computers, to be effectively dual-stack.\n\
    \   The only devices that are expected to be capable of only supporting\n   IPv6\
    \ are those designed for specific applications, which do not\n   require interoperation\
    \ with IPv4-only systems.  We also observe that\n   providing both IPv4 and IPv6\
    \ connectivity in an unmanaged network is\n   not particularly difficult: we have\
    \ a fair amount of experience using\n   IPv4 in unmanaged networks in parallel\
    \ with other protocols, such as\n   IPX.\n"
- title: 5.2.2.  Addresses and Connectivity in Case B
  contents:
  - "5.2.2.  Addresses and Connectivity in Case B\n   In Case B, the upgraded gateway\
    \ will act as an IPv6 router; it will\n   continue providing the IPv4 connectivity,\
    \ perhaps using NAT.  Nodes\n   in the local network will typically obtain:\n\
    \      - IPv4 addresses (from or via the gateway),\n      - IPv6 link local addresses,\
    \ and\n      - IPv6 global addresses.\n   In some networks, NAT will not be in\
    \ use and the local hosts will\n   actually obtain global IPv4 addresses.  We\
    \ will not elaborate on\n   this, as the availability of global IPv4 addresses\
    \ does not bring any\n   additional complexity to the transition mechanisms.\n\
    \   To enable this scenario, the gateway needs to use a mechanism to\n   obtain\
    \ a global IPv6 address prefix from the ISP, and advertise this\n   address prefix\
    \ to the hosts in the unmanaged network; several\n   solutions will be assessed\
    \ in a companion memo [EVAL].\n"
- title: 5.2.3.  Naming Services in Case B
  contents:
  - "5.2.3.  Naming Services in Case B\n   In case B, hosts in the unmanaged domain\
    \ have access to DNS services\n   through the gateway.  As the gateway and the\
    \ ISP both support IPv4\n   and IPv6, these services may be accessible by the\
    \ IPv4-only hosts\n   using IPv4, by the IPv6-only hosts using IPv6, and by the\
    \ dual stack\n   hosts using either.  Currently, IPv4 only hosts usually discover\
    \ the\n   IPv4 address of the local DNS resolver using DHCP; there must be a\n\
    \   way for IPv6-only hosts to discover the IPv6 address of the DNS\n   resolver.\n\
    \   There must be a way to resolve the name of local hosts to their IPv4\n   or\
    \ IPv6 addresses.  Typing auto-configured IPv6 addresses in a\n   configuration\
    \ file is impractical; this implies either some form of\n   dynamic registration\
    \ of IPv6 addresses in the local service, or a\n   dynamic address discovery mechanism.\
    \  Possible solutions will be\n   compared in the evaluation draft [EVAL].\n \
    \  The requirement to support server applications in the unmanaged\n   network\
    \ implies a requirement to publish the IPv6 addresses of local\n   servers in\
    \ the DNS.  There are multiple solutions, including domain\n   name delegation.\
    \  If efficient reverse lookup functions are to be\n   provided, delegation of\
    \ a fraction of the ip6.arpa tree is also\n   required.\n   The response to a\
    \ DNS request should not depend on the protocol by\n   which the request is transported:\
    \ dual-stack hosts may use either\n   IPv4 or IPv6 to contact the local resolver,\
    \ the choice of IPv4 or\n   IPv6 may be random, and the value of the response\
    \ should not depend\n   on a random event.\n   DNS transition issues in a dual\
    \ IPv4/IPv6 network are discussed in\n   [DNSOPV6].\n"
- title: 5.3.  Case C, IPv6 Connectivity without Provider Support
  contents:
  - "5.3.  Case C, IPv6 Connectivity without Provider Support\n   In this case, the\
    \ gateway is dual stack, but the ISP is not.  The\n   gateway has been upgraded\
    \ and offers both IPv4 and IPv6 connectivity\n   to hosts.  It cannot rely on\
    \ the ISP for IPv6 connectivity, because\n   the ISP does not yet offer ISP connectivity.\n"
- title: 5.3.1.  Application Support in Case C
  contents:
  - "5.3.1.  Application Support in Case C\n   Application support in case C should\
    \ be identical to that of case B.\n"
- title: 5.3.2.  Addresses and Connectivity in Case C
  contents:
  - "5.3.2.  Addresses and Connectivity in Case C\n   The upgraded gateway will behave\
    \ as an IPv6 router; it will continue\n   providing the IPv4 connectivity, perhaps\
    \ using NAT.  Nodes in the\n   local network will obtain:\n      - IPv4 addresses\
    \ (from or via the gateway),\n      - IPv6 link local addresses,\n      - IPv6\
    \ global addresses.\n   There are two ways to bring immediate IPv6 connectivity\
    \ on top of an\n   IPv4 only infrastructure: automatic tunnels, e.g., provided\
    \ by the\n   6TO4 technology [RFC3056], or configured tunnels.  Both technologies\n\
    \   have advantages and limitations, which will be studied in another\n   document.\n\
    \   There will be some cases where the local hosts actually obtain global\n  \
    \ IPv4 addresses.  We will not discuss this scenario, as it does not\n   make\
    \ the use of transition technology harder, or more complex.  Case\n   A has already\
    \ examined how hosts could obtain IPv6 connectivity\n   individually.\n"
- title: 5.3.3.   Naming Services in Case C
  contents:
  - "5.3.3.   Naming Services in Case C\n   The local naming requirements in case\
    \ C are identical to the local\n   naming requirements of case B, with two differences:\
    \ delegation of\n   domain names, and management of reverse lookup queries.\n\
    \   A delegation of some domain name is required in order to publish the\n   IPv6\
    \ addresses of servers in the DNS.\n   A specific mechanism for handling reverse\
    \ lookup queries will be\n   required if the gateway uses a dynamic mechanism,\
    \ such as 6to4, to\n   obtain a prefix independently of any IPv6 ISP.\n"
- title: 5.4.  Case D, ISP Stops Providing Native IPv4 Connectivity
  contents:
  - "5.4.  Case D, ISP Stops Providing Native IPv4 Connectivity\n   In this case,\
    \ the ISP is IPv6-only, so the gateway loses IPv4\n   connectivity, and is faced\
    \ with an IPv6-only service provider.  The\n   gateway itself is dual stack, and\
    \ the unmanaged network includes IPv4\n   only, IPv6-only, and dual stack hosts.\
    \  Any interaction between hosts\n   in the unmanaged network and IPv4 hosts on\
    \ the Internet will require\n   the provision of some inter-protocol services\
    \ by the ISP.\n"
- title: 5.4.1.  Application Support in Case D
  contents:
  - "5.4.1.  Application Support in Case D\n   At this phase of the transition, IPv6\
    \ hosts can participate in all\n   types of applications with other IPv6 hosts.\
    \  IPv4 hosts in the\n   unmanaged network will be able to perform local applications\
    \ with\n   IPv4 or dual stack local hosts.\n   As in case B, we will assume that\
    \ IPv6-only hosts will not interact\n   with IPv4-only hosts, either local or\
    \ remote.  We must however assume\n   that IPv4-only hosts and dual stack hosts\
    \ will want to interact with\n   IPv4 services available on the Internet: the\
    \ inability to do so would\n   place the IPv6-only provider at a great commercial\
    \ disadvantage\n   compared to other Internet service providers.\n   There are\
    \ three possible ways that an ISP can provide hosts in the\n   unmanaged network\
    \ with access to IPv4 applications: by using a set of\n   application relays,\
    \ by providing an address translation service, or\n   by providing IPv4-over-IPv6\
    \ tunnels.  Our analysis concludes that a\n   tunnel service seems to be vastly\
    \ preferable.\n   We already mentioned the drawbacks of the application gateway\n\
    \   approach when analyzing case B: it is necessary to provide relays for\n  \
    \ all applications, to develop a way to provision the hosts with the\n   addresses\
    \ of these relays, and to modify the applications so that\n   they will only use\
    \ the relays when needed.  We also observe that in\n   an IPv6-only ISP, the application\
    \ relays would only be accessible\n   over IPv6, and would thus not be accessible\
    \ by the \"legacy\" IPv4-only\n   hosts.  The application relay approach is thus\
    \ not very attractive.\n   Providing a network address and protocol translation\
    \ service between\n   IPv6 and IPv4 would also have many drawbacks.  As in case\
    \ B, it will\n   have to be complemented by \"application layer gateways\" that\
    \ will\n   rewrite references to IP addresses in the protocol; hosts may need\
    \ to\n   be parameterized to use the translation service, and we would have to\n\
    \   solve DNS issues.  The network level protocol translation service\n   doesn't\
    \ appear to be very desirable.\n   The preferable alternative to application relays\
    \ and network address\n   translation is the provision of an IPv4-over-IPv6 service.\n"
- title: 5.4.2.  Addresses and Connectivity in Case D
  contents:
  - "5.4.2.  Addresses and Connectivity in Case D\n   The ISP assigns an IPv6 prefix\
    \ to the unmanaged network, so hosts\n   have a global IPv6 address and use it\
    \ for global IPv6 connectivity.\n   This will require delegation of an IPv6 address\
    \ prefix, as\n   investigated in case C.\n   To enable IPv4 hosts and dual stack\
    \ hosts accessibility to remote\n   IPv4 services, the ISP must provide the gateway\
    \ with at least one\n   IPv4 address, using some form of IPv4-over-IPv6 tunneling.\
    \  Once such\n   addresses have been provided, the gateway effectively acquires\
    \ dual-\n   stack connectivity; for hosts inside the unmanaged network, this will\n\
    \   be indistinguishable from the IPv4 connectivity obtained in case B or\n  \
    \ C.\n"
- title: 5.4.3.  Naming Services in Case D
  contents:
  - "5.4.3.  Naming Services in Case D\n   The loss of IPv4 connectivity has a direct\
    \ impact on the provision of\n   naming services.  In many IPv4 unmanaged networks,\
    \ hosts obtain their\n   DNS configuration parameters from the local gateway,\
    \ typically\n   through the DHCP service.  If the same mode of operation is desired\n\
    \   in case D, the gateway will have to be provisioned with the address\n   of\
    \ a DNS resolver and with other DNS parameters, and this\n   provisioning will\
    \ have to use IPv6 mechanisms.  Another consequence\n   is that the DNS service\
    \ in the gateway will only be able to use IPv6\n   connectivity to resolve queries;\
    \ if local hosts perform DNS\n   resolution autonomously, they will have the same\
    \ restriction.\n   On the surface, this seems to indicate that the local hosts\
    \ will only\n   be able to resolve names if the domain servers are accessible\
    \ through\n   an IPv6 address documented in an AAAA record.  However, the DNS\n\
    \   services are just one case of \"IPv4 servers accessed by IPv6 hosts\":\n \
    \  it should be possible to simply send queries through the IPv4\n   connectivity\
    \ services to reach the IPv4 only servers.\n   The gateway should be able to act\
    \ as a recursive DNS name server for\n   the remaining IPv4 only hosts.\n"
- title: 6.  Security Considerations
  contents:
  - "6.  Security Considerations\n   Security considerations are discussed as part\
    \ of the applications'\n   requirements.  They include:\n   - the guarantee that\
    \ local applications are only used locally,\n   - the protection of the privacy\
    \ of clients\n   - the requirement that peer-to-peer connections are only used\
    \ by\n     authorized peers\n   - the requirement that tunneling protocols used\
    \ for IPv6 access over\n     IPv4 be designed for secure use\n   - the related\
    \ requirement that servers in the infrastructure\n     supporting transition scenarios\
    \ be designed so as to not be\n     vulnerable to abuse.\n   The security solutions\
    \ currently used in IPv4 networks include a\n   combination of firewall functions\
    \ in the gateway, authentication and\n   authorization functions in the applications,\
    \ encryption and\n   authentication services provided by IP security, Transport\
    \ Layer\n   Security and application specific services, and host-based security\n\
    \   products, such as anti-virus software and host firewalls.  The\n   applicability\
    \ of these tools in IPv6 unmanaged networks will be\n   studied in a another document.\n"
- title: 7.  Acknowledgements
  contents:
  - "7.  Acknowledgements\n   This document has benefited from the comments of the\
    \ members of the\n   IETF V6OPS working group, and from extensive reviews by Chris\n\
    \   Fischer, Tony Hain, Kurt Erik Lindqvist, Erik Nordmark, Pekka Savola,\n  \
    \ and Margaret Wasserman.\n"
- title: 8.  References
  contents:
  - '8.  References

    '
- title: 8.1.  Normative References
  contents:
  - "8.1.  Normative References\n   [RFC791]    Postel, J., \"Internet Protocol\"\
    , STD 5, RFC 791,\n               September 1981.\n   [RFC2460]   Deering, S.\
    \ and R. Hinden, \"Internet Protocol, Version 6\n               (IPv6) Specification\"\
    , RFC 2460, December 1998.\n"
- title: 8.2.  Informative References
  contents:
  - "8.2.  Informative References\n   [EVAL]      Evaluation of Transition Mechanisms\
    \ for Unmanaged\n               Networks, Work in Progress.\n   [RFC1918]   Rekhter,\
    \ Y., Moskowitz, B., Karrenberg, D., de Groot, G.\n               J. and E. Lear,\
    \ \"Address Allocation for Private\n               Internets\", BCP 5, RFC 1918,\
    \ February 1996.\n   [RFC2608]   Guttman, E., Perkins, C., Veizades, J. and M.\
    \ Day,\n               \"Service Location Protocol, Version 2\", RFC 2608, June\n\
    \               1999.\n   [RFC3056]   Carpenter, B. and K. Moore, \"Connection\
    \ of IPv6 Domains\n               via IPv4 Clouds\", RFC 3056, February 2001.\n\
    \   [RFC3022]   Srisuresh, P. and K. Egevang. \"Traditional IP Network\n     \
    \          Address Translator (Traditional NAT)\", RFC 3022, January\n       \
    \        2001.\n   [RFC2993]   Hain, T., \"Architectural Implications of NAT\"\
    , RFC 2993,\n               November 2000.\n   [RFC3041]   Narten, T. and R. Draves,\
    \ \"Privacy Extensions for\n               Stateless Address Autoconfiguration\
    \ in IPv6\", RFC 3041,\n               January 2001.\n   [RFC2766]   Tsirtsis,\
    \ G. and P. Srisuresh, \"Network Address\n               Translation - Protocol\
    \ Translation (NAT-PT)\", RFC 2766,\n               February 2000.\n   [DNSOPV6]\
    \   Durand, A., Ihren, J. and P. Savola, \"Operational\n               Considerations\
    \ and Issues with IPv6 DNS\", Work in\n               Progress.\n   [DNSINADDR]\
    \ Senie, D., \"Requiring DNS IN-ADDR Mapping\", Work in\n               Progress.\n"
- title: 9.  Authors' Addresses
  contents:
  - "9.  Authors' Addresses\n   Christian Huitema\n   Microsoft Corporation\n   One\
    \ Microsoft Way\n   Redmond, WA 98052-6399\n   EMail: huitema@microsoft.com\n\
    \   Rob Austein\n   Internet Systems Consortium\n   950 Charter Street\n   Redwood\
    \ City, CA 94063\n   USA\n   EMail: sra@isc.org\n   Suresh Satapati\n   Cisco\
    \ Systems, Inc.\n   San Jose, CA 95134\n   USA\n   EMail: satapati@cisco.com\n\
    \   Ronald van der Pol\n   NLnet Labs\n   Kruislaan 419\n   1098 VA Amsterdam\n\
    \   NL\n   EMail: Ronald.vanderPol@nlnetlabs.nl\n"
- title: 10.  Full Copyright Statement
  contents:
  - "10.  Full Copyright Statement\n   Copyright (C) The Internet Society (2004).\
    \  This document is subject\n   to the rights, licenses and restrictions contained\
    \ in BCP 78 and\n   except as set forth therein, the authors retain all their\
    \ rights.\n   This document and the information contained herein are provided\
    \ on an\n   \"AS IS\" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS\n\
    \   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET\n   ENGINEERING\
    \ TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,\n   INCLUDING BUT NOT\
    \ LIMITED TO ANY WARRANTY THAT THE USE OF THE\n   INFORMATION HEREIN WILL NOT\
    \ INFRINGE ANY RIGHTS OR ANY IMPLIED\n   WARRANTIES OF MERCHANTABILITY OR FITNESS\
    \ FOR A PARTICULAR PURPOSE.\n"
- title: Intellectual Property
  contents:
  - "Intellectual Property\n   The IETF takes no position regarding the validity or\
    \ scope of any\n   Intellectual Property Rights or other rights that might be\
    \ claimed to\n   pertain to the implementation or use of the technology described\
    \ in\n   this document or the extent to which any license under such rights\n\
    \   might or might not be available; nor does it represent that it has\n   made\
    \ any independent effort to identify any such rights.  Information\n   on the\
    \ procedures with respect to rights in RFC documents can be\n   found in BCP 78\
    \ and BCP 79.\n   Copies of IPR disclosures made to the IETF Secretariat and any\n\
    \   assurances of licenses to be made available, or the result of an\n   attempt\
    \ made to obtain a general license or permission for the use of\n   such proprietary\
    \ rights by implementers or users of this\n   specification can be obtained from\
    \ the IETF on-line IPR repository at\n   http://www.ietf.org/ipr.\n   The IETF\
    \ invites any interested party to bring to its attention any\n   copyrights, patents\
    \ or patent applications, or other proprietary\n   rights that may cover technology\
    \ that may be required to implement\n   this standard.  Please address the information\
    \ to the IETF at ietf-\n   ipr@ietf.org.\n"
- title: Acknowledgement
  contents:
  - "Acknowledgement\n   Funding for the RFC Editor function is currently provided\
    \ by the\n   Internet Society.\n"
